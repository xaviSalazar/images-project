var YE=e1=>{throw TypeError(e1)};var W_=(e1,_g,t1)=>_g.has(e1)||YE("Cannot "+t1);var Py=(e1,_g,t1)=>(W_(e1,_g,"read from private field"),t1?t1.call(e1):_g.get(e1)),X0=(e1,_g,t1)=>_g.has(e1)?YE("Cannot add the same private member more than once"):_g instanceof WeakSet?_g.add(e1):_g.set(e1,t1),M0=(e1,_g,t1,r1)=>(W_(e1,_g,"write to private field"),r1?r1.call(e1,t1):_g.set(e1,t1),t1),Uv=(e1,_g,t1)=>(W_(e1,_g,"access private method"),t1);var V2=(e1,_g,t1,r1)=>({set _(n1){M0(e1,_g,n1,t1)},get _(){return Py(e1,_g,r1)}});function _mergeNamespaces(e1,_g){for(var t1=0;t1<_g.length;t1++){const r1=_g[t1];if(typeof r1!="string"&&!Array.isArray(r1)){for(const n1 in r1)if(n1!=="default"&&!(n1 in e1)){const i1=Object.getOwnPropertyDescriptor(r1,n1);i1&&Object.defineProperty(e1,n1,i1.get?i1:{enumerable:!0,get:()=>r1[n1]})}}}return Object.freeze(Object.defineProperty(e1,Symbol.toStringTag,{value:"Module"}))}(function(){const _g=document.createElement("link").relList;if(_g&&_g.supports&&_g.supports("modulepreload"))return;for(const n1 of document.querySelectorAll('link[rel="modulepreload"]'))r1(n1);new MutationObserver(n1=>{for(const i1 of n1)if(i1.type==="childList")for(const o1 of i1.addedNodes)o1.tagName==="LINK"&&o1.rel==="modulepreload"&&r1(o1)}).observe(document,{childList:!0,subtree:!0});function t1(n1){const i1={};return n1.integrity&&(i1.integrity=n1.integrity),n1.referrerPolicy&&(i1.referrerPolicy=n1.referrerPolicy),n1.crossOrigin==="use-credentials"?i1.credentials="include":n1.crossOrigin==="anonymous"?i1.credentials="omit":i1.credentials="same-origin",i1}function r1(n1){if(n1.ep)return;n1.ep=!0;const i1=t1(n1);fetch(n1.href,i1)}})();function getDefaultExportFromCjs(e1){return e1&&e1.__esModule&&Object.prototype.hasOwnProperty.call(e1,"default")?e1.default:e1}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$6=Symbol.for("react.profiler"),t$4=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$2(e1){return e1===null||typeof e1!="object"?null:(e1=z$4&&e1[z$4]||e1["@@iterator"],typeof e1=="function"?e1:null)}var B$4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$4={};function E$3(e1,_g,t1){this.props=e1,this.context=_g,this.refs=D$4,this.updater=t1||B$4}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(e1,_g){if(typeof e1!="object"&&typeof e1!="function"&&e1!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e1,_g,"setState")};E$3.prototype.forceUpdate=function(e1){this.updater.enqueueForceUpdate(this,e1,"forceUpdate")};function F$2(){}F$2.prototype=E$3.prototype;function G$4(e1,_g,t1){this.props=e1,this.context=_g,this.refs=D$4,this.updater=t1||B$4}var H$4=G$4.prototype=new F$2;H$4.constructor=G$4;C$2(H$4,E$3.prototype);H$4.isPureReactComponent=!0;var I$2=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$4={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$5(e1,_g,t1){var r1,n1={},i1=null,o1=null;if(_g!=null)for(r1 in _g.ref!==void 0&&(o1=_g.ref),_g.key!==void 0&&(i1=""+_g.key),_g)J$2.call(_g,r1)&&!L$4.hasOwnProperty(r1)&&(n1[r1]=_g[r1]);var a1=arguments.length-2;if(a1===1)n1.children=t1;else if(1<a1){for(var u1=Array(a1),s1=0;s1<a1;s1++)u1[s1]=arguments[s1+2];n1.children=u1}if(e1&&e1.defaultProps)for(r1 in a1=e1.defaultProps,a1)n1[r1]===void 0&&(n1[r1]=a1[r1]);return{$$typeof:l$3,type:e1,key:i1,ref:o1,props:n1,_owner:K$4.current}}function N$4(e1,_g){return{$$typeof:l$3,type:e1.type,key:_g,ref:e1.ref,props:e1.props,_owner:e1._owner}}function O$3(e1){return typeof e1=="object"&&e1!==null&&e1.$$typeof===l$3}function escape$1(e1){var _g={"=":"=0",":":"=2"};return"$"+e1.replace(/[=:]/g,function(t1){return _g[t1]})}var P$3=/\/+/g;function Q$5(e1,_g){return typeof e1=="object"&&e1!==null&&e1.key!=null?escape$1(""+e1.key):_g.toString(36)}function R$3(e1,_g,t1,r1,n1){var i1=typeof e1;(i1==="undefined"||i1==="boolean")&&(e1=null);var o1=!1;if(e1===null)o1=!0;else switch(i1){case"string":case"number":o1=!0;break;case"object":switch(e1.$$typeof){case l$3:case n$5:o1=!0}}if(o1)return o1=e1,n1=n1(o1),e1=r1===""?"."+Q$5(o1,0):r1,I$2(n1)?(t1="",e1!=null&&(t1=e1.replace(P$3,"$&/")+"/"),R$3(n1,_g,t1,"",function(s1){return s1})):n1!=null&&(O$3(n1)&&(n1=N$4(n1,t1+(!n1.key||o1&&o1.key===n1.key?"":(""+n1.key).replace(P$3,"$&/")+"/")+e1)),_g.push(n1)),1;if(o1=0,r1=r1===""?".":r1+":",I$2(e1))for(var a1=0;a1<e1.length;a1++){i1=e1[a1];var u1=r1+Q$5(i1,a1);o1+=R$3(i1,_g,t1,u1,n1)}else if(u1=A$2(e1),typeof u1=="function")for(e1=u1.call(e1),a1=0;!(i1=e1.next()).done;)i1=i1.value,u1=r1+Q$5(i1,a1++),o1+=R$3(i1,_g,t1,u1,n1);else if(i1==="object")throw _g=String(e1),Error("Objects are not valid as a React child (found: "+(_g==="[object Object]"?"object with keys {"+Object.keys(e1).join(", ")+"}":_g)+"). If you meant to render a collection of children, use an array instead.");return o1}function S$2(e1,_g,t1){if(e1==null)return e1;var r1=[],n1=0;return R$3(e1,r1,"","",function(i1){return _g.call(t1,i1,n1++)}),r1}function T$4(e1){if(e1._status===-1){var _g=e1._result;_g=_g(),_g.then(function(t1){(e1._status===0||e1._status===-1)&&(e1._status=1,e1._result=t1)},function(t1){(e1._status===0||e1._status===-1)&&(e1._status=2,e1._result=t1)}),e1._status===-1&&(e1._status=0,e1._result=_g)}if(e1._status===1)return e1._result.default;throw e1._result}var U$6={current:null},V$4={transition:null},W$3={ReactCurrentDispatcher:U$6,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$4};function X$5(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(e1,_g,t1){S$2(e1,function(){_g.apply(this,arguments)},t1)},count:function(e1){var _g=0;return S$2(e1,function(){_g++}),_g},toArray:function(e1){return S$2(e1,function(_g){return _g})||[]},only:function(e1){if(!O$3(e1))throw Error("React.Children.only expected to receive a single React element child.");return e1}};react_production_min.Component=E$3;react_production_min.Fragment=p$5;react_production_min.Profiler=r$6;react_production_min.PureComponent=G$4;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$5;react_production_min.cloneElement=function(e1,_g,t1){if(e1==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e1+".");var r1=C$2({},e1.props),n1=e1.key,i1=e1.ref,o1=e1._owner;if(_g!=null){if(_g.ref!==void 0&&(i1=_g.ref,o1=K$4.current),_g.key!==void 0&&(n1=""+_g.key),e1.type&&e1.type.defaultProps)var a1=e1.type.defaultProps;for(u1 in _g)J$2.call(_g,u1)&&!L$4.hasOwnProperty(u1)&&(r1[u1]=_g[u1]===void 0&&a1!==void 0?a1[u1]:_g[u1])}var u1=arguments.length-2;if(u1===1)r1.children=t1;else if(1<u1){a1=Array(u1);for(var s1=0;s1<u1;s1++)a1[s1]=arguments[s1+2];r1.children=a1}return{$$typeof:l$3,type:e1.type,key:n1,ref:i1,props:r1,_owner:o1}};react_production_min.createContext=function(e1){return e1={$$typeof:u$4,_currentValue:e1,_currentValue2:e1,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e1.Provider={$$typeof:t$4,_context:e1},e1.Consumer=e1};react_production_min.createElement=M$5;react_production_min.createFactory=function(e1){var _g=M$5.bind(null,e1);return _g.type=e1,_g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e1){return{$$typeof:v$3,render:e1}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(e1){return{$$typeof:y$1,_payload:{_status:-1,_result:e1},_init:T$4}};react_production_min.memo=function(e1,_g){return{$$typeof:x$1,type:e1,compare:_g===void 0?null:_g}};react_production_min.startTransition=function(e1){var _g=V$4.transition;V$4.transition={};try{e1()}finally{V$4.transition=_g}};react_production_min.unstable_act=X$5;react_production_min.useCallback=function(e1,_g){return U$6.current.useCallback(e1,_g)};react_production_min.useContext=function(e1){return U$6.current.useContext(e1)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e1){return U$6.current.useDeferredValue(e1)};react_production_min.useEffect=function(e1,_g){return U$6.current.useEffect(e1,_g)};react_production_min.useId=function(){return U$6.current.useId()};react_production_min.useImperativeHandle=function(e1,_g,t1){return U$6.current.useImperativeHandle(e1,_g,t1)};react_production_min.useInsertionEffect=function(e1,_g){return U$6.current.useInsertionEffect(e1,_g)};react_production_min.useLayoutEffect=function(e1,_g){return U$6.current.useLayoutEffect(e1,_g)};react_production_min.useMemo=function(e1,_g){return U$6.current.useMemo(e1,_g)};react_production_min.useReducer=function(e1,_g,t1){return U$6.current.useReducer(e1,_g,t1)};react_production_min.useRef=function(e1){return U$6.current.useRef(e1)};react_production_min.useState=function(e1){return U$6.current.useState(e1)};react_production_min.useSyncExternalStore=function(e1,_g,t1){return U$6.current.useSyncExternalStore(e1,_g,t1)};react_production_min.useTransition=function(){return U$6.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$4=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$4=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$3(e1,_g,t1){var r1,n1={},i1=null,o1=null;t1!==void 0&&(i1=""+t1),_g.key!==void 0&&(i1=""+_g.key),_g.ref!==void 0&&(o1=_g.ref);for(r1 in _g)m$4.call(_g,r1)&&!p$4.hasOwnProperty(r1)&&(n1[r1]=_g[r1]);if(e1&&e1.defaultProps)for(r1 in _g=e1.defaultProps,_g)n1[r1]===void 0&&(n1[r1]=_g[r1]);return{$$typeof:k$4,type:e1,key:i1,ref:o1,props:n1,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e1){function _g(K1,J1){var hy=K1.length;K1.push(J1);e:for(;0<hy;){var G1=hy-1>>>1,Y1=K1[G1];if(0<n1(Y1,J1))K1[G1]=J1,K1[hy]=Y1,hy=G1;else break e}}function t1(K1){return K1.length===0?null:K1[0]}function r1(K1){if(K1.length===0)return null;var J1=K1[0],hy=K1.pop();if(hy!==J1){K1[0]=hy;e:for(var G1=0,Y1=K1.length,yy=Y1>>>1;G1<yy;){var Oy=2*(G1+1)-1,Ey=K1[Oy],jy=Oy+1,Ay=K1[jy];if(0>n1(Ey,hy))jy<Y1&&0>n1(Ay,Ey)?(K1[G1]=Ay,K1[jy]=hy,G1=jy):(K1[G1]=Ey,K1[Oy]=hy,G1=Oy);else if(jy<Y1&&0>n1(Ay,hy))K1[G1]=Ay,K1[jy]=hy,G1=jy;else break e}}return J1}function n1(K1,J1){var hy=K1.sortIndex-J1.sortIndex;return hy!==0?hy:K1.id-J1.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i1=performance;e1.unstable_now=function(){return i1.now()}}else{var o1=Date,a1=o1.now();e1.unstable_now=function(){return o1.now()-a1}}var u1=[],s1=[],l1=1,c1=null,d1=3,h1=!1,f1=!1,g1=!1,v1=typeof setTimeout=="function"?setTimeout:null,$1=typeof clearTimeout=="function"?clearTimeout:null,y1=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _1(K1){for(var J1=t1(s1);J1!==null;){if(J1.callback===null)r1(s1);else if(J1.startTime<=K1)r1(s1),J1.sortIndex=J1.expirationTime,_g(u1,J1);else break;J1=t1(s1)}}function E1(K1){if(g1=!1,_1(K1),!f1)if(t1(u1)!==null)f1=!0,U1(T1);else{var J1=t1(s1);J1!==null&&V1(E1,J1.startTime-K1)}}function T1(K1,J1){f1=!1,g1&&(g1=!1,$1(N1),N1=-1),h1=!0;var hy=d1;try{for(_1(J1),c1=t1(u1);c1!==null&&(!(c1.expirationTime>J1)||K1&&!ty());){var G1=c1.callback;if(typeof G1=="function"){c1.callback=null,d1=c1.priorityLevel;var Y1=G1(c1.expirationTime<=J1);J1=e1.unstable_now(),typeof Y1=="function"?c1.callback=Y1:c1===t1(u1)&&r1(u1),_1(J1)}else r1(u1);c1=t1(u1)}if(c1!==null)var yy=!0;else{var Oy=t1(s1);Oy!==null&&V1(E1,Oy.startTime-J1),yy=!1}return yy}finally{c1=null,d1=hy,h1=!1}}var P1=!1,k1=null,N1=-1,W1=5,H1=-1;function ty(){return!(e1.unstable_now()-H1<W1)}function ey(){if(k1!==null){var K1=e1.unstable_now();H1=K1;var J1=!0;try{J1=k1(!0,K1)}finally{J1?ly():(P1=!1,k1=null)}}else P1=!1}var ly;if(typeof y1=="function")ly=function(){y1(ey)};else if(typeof MessageChannel<"u"){var oy=new MessageChannel,Q1=oy.port2;oy.port1.onmessage=ey,ly=function(){Q1.postMessage(null)}}else ly=function(){v1(ey,0)};function U1(K1){k1=K1,P1||(P1=!0,ly())}function V1(K1,J1){N1=v1(function(){K1(e1.unstable_now())},J1)}e1.unstable_IdlePriority=5,e1.unstable_ImmediatePriority=1,e1.unstable_LowPriority=4,e1.unstable_NormalPriority=3,e1.unstable_Profiling=null,e1.unstable_UserBlockingPriority=2,e1.unstable_cancelCallback=function(K1){K1.callback=null},e1.unstable_continueExecution=function(){f1||h1||(f1=!0,U1(T1))},e1.unstable_forceFrameRate=function(K1){0>K1||125<K1?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W1=0<K1?Math.floor(1e3/K1):5},e1.unstable_getCurrentPriorityLevel=function(){return d1},e1.unstable_getFirstCallbackNode=function(){return t1(u1)},e1.unstable_next=function(K1){switch(d1){case 1:case 2:case 3:var J1=3;break;default:J1=d1}var hy=d1;d1=J1;try{return K1()}finally{d1=hy}},e1.unstable_pauseExecution=function(){},e1.unstable_requestPaint=function(){},e1.unstable_runWithPriority=function(K1,J1){switch(K1){case 1:case 2:case 3:case 4:case 5:break;default:K1=3}var hy=d1;d1=K1;try{return J1()}finally{d1=hy}},e1.unstable_scheduleCallback=function(K1,J1,hy){var G1=e1.unstable_now();switch(typeof hy=="object"&&hy!==null?(hy=hy.delay,hy=typeof hy=="number"&&0<hy?G1+hy:G1):hy=G1,K1){case 1:var Y1=-1;break;case 2:Y1=250;break;case 5:Y1=1073741823;break;case 4:Y1=1e4;break;default:Y1=5e3}return Y1=hy+Y1,K1={id:l1++,callback:J1,priorityLevel:K1,startTime:hy,expirationTime:Y1,sortIndex:-1},hy>G1?(K1.sortIndex=hy,_g(s1,K1),t1(u1)===null&&K1===t1(s1)&&(g1?($1(N1),N1=-1):g1=!0,V1(E1,hy-G1))):(K1.sortIndex=Y1,_g(u1,K1),f1||h1||(f1=!0,U1(T1))),K1},e1.unstable_shouldYield=ty,e1.unstable_wrapCallback=function(K1){var J1=d1;return function(){var hy=d1;d1=J1;try{return K1.apply(this,arguments)}finally{d1=hy}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$3=reactExports,ca$2=schedulerExports;function p$3(e1){for(var _g="https://reactjs.org/docs/error-decoder.html?invariant="+e1,t1=1;t1<arguments.length;t1++)_g+="&args[]="+encodeURIComponent(arguments[t1]);return"Minified React error #"+e1+"; visit "+_g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$2=new Set,ea$2={};function fa$2(e1,_g){ha$2(e1,_g),ha$2(e1+"Capture",_g)}function ha$2(e1,_g){for(ea$2[e1]=_g,e1=0;e1<_g.length;e1++)da$2.add(_g[e1])}var ia$3=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$3=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$2={},ma$1={};function oa$3(e1){return ja$3.call(ma$1,e1)?!0:ja$3.call(la$2,e1)?!1:ka$1.test(e1)?ma$1[e1]=!0:(la$2[e1]=!0,!1)}function pa$2(e1,_g,t1,r1){if(t1!==null&&t1.type===0)return!1;switch(typeof _g){case"function":case"symbol":return!0;case"boolean":return r1?!1:t1!==null?!t1.acceptsBooleans:(e1=e1.toLowerCase().slice(0,5),e1!=="data-"&&e1!=="aria-");default:return!1}}function qa$3(e1,_g,t1,r1){if(_g===null||typeof _g>"u"||pa$2(e1,_g,t1,r1))return!0;if(r1)return!1;if(t1!==null)switch(t1.type){case 3:return!_g;case 4:return _g===!1;case 5:return isNaN(_g);case 6:return isNaN(_g)||1>_g}return!1}function v$2(e1,_g,t1,r1,n1,i1,o1){this.acceptsBooleans=_g===2||_g===3||_g===4,this.attributeName=r1,this.attributeNamespace=n1,this.mustUseProperty=t1,this.propertyName=e1,this.type=_g,this.sanitizeURL=i1,this.removeEmptyString=o1}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e1){z$3[e1]=new v$2(e1,0,!1,e1,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e1){var _g=e1[0];z$3[_g]=new v$2(_g,1,!1,e1[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e1){z$3[e1]=new v$2(e1,2,!1,e1.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e1){z$3[e1]=new v$2(e1,2,!1,e1,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e1){z$3[e1]=new v$2(e1,3,!1,e1.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e1){z$3[e1]=new v$2(e1,3,!0,e1,null,!1,!1)});["capture","download"].forEach(function(e1){z$3[e1]=new v$2(e1,4,!1,e1,null,!1,!1)});["cols","rows","size","span"].forEach(function(e1){z$3[e1]=new v$2(e1,6,!1,e1,null,!1,!1)});["rowSpan","start"].forEach(function(e1){z$3[e1]=new v$2(e1,5,!1,e1.toLowerCase(),null,!1,!1)});var ra$2=/[\-:]([a-z])/g;function sa$3(e1){return e1[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e1){var _g=e1.replace(ra$2,sa$3);z$3[_g]=new v$2(_g,1,!1,e1,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e1){var _g=e1.replace(ra$2,sa$3);z$3[_g]=new v$2(_g,1,!1,e1,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e1){var _g=e1.replace(ra$2,sa$3);z$3[_g]=new v$2(_g,1,!1,e1,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e1){z$3[e1]=new v$2(e1,1,!1,e1.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e1){z$3[e1]=new v$2(e1,1,!1,e1.toLowerCase(),null,!0,!0)});function ta$2(e1,_g,t1,r1){var n1=z$3.hasOwnProperty(_g)?z$3[_g]:null;(n1!==null?n1.type!==0:r1||!(2<_g.length)||_g[0]!=="o"&&_g[0]!=="O"||_g[1]!=="n"&&_g[1]!=="N")&&(qa$3(_g,t1,n1,r1)&&(t1=null),r1||n1===null?oa$3(_g)&&(t1===null?e1.removeAttribute(_g):e1.setAttribute(_g,""+t1)):n1.mustUseProperty?e1[n1.propertyName]=t1===null?n1.type===3?!1:"":t1:(_g=n1.attributeName,r1=n1.attributeNamespace,t1===null?e1.removeAttribute(_g):(n1=n1.type,t1=n1===3||n1===4&&t1===!0?"":""+t1,r1?e1.setAttributeNS(r1,_g,t1):e1.setAttribute(_g,t1))))}var ua$2=aa$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$2=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$2=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$2=Symbol.for("react.suspense"),Fa$2=Symbol.for("react.suspense_list"),Ga$2=Symbol.for("react.memo"),Ha$3=Symbol.for("react.lazy"),Ia$2=Symbol.for("react.offscreen"),Ja$3=Symbol.iterator;function Ka$3(e1){return e1===null||typeof e1!="object"?null:(e1=Ja$3&&e1[Ja$3]||e1["@@iterator"],typeof e1=="function"?e1:null)}var A$1=Object.assign,La$2;function Ma$1(e1){if(La$2===void 0)try{throw Error()}catch(t1){var _g=t1.stack.trim().match(/\n( *(at )?)/);La$2=_g&&_g[1]||""}return`
`+La$2+e1}var Na$1=!1;function Oa$1(e1,_g){if(!e1||Na$1)return"";Na$1=!0;var t1=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_g)if(_g=function(){throw Error()},Object.defineProperty(_g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_g,[])}catch(s1){var r1=s1}Reflect.construct(e1,[],_g)}else{try{_g.call()}catch(s1){r1=s1}e1.call(_g.prototype)}else{try{throw Error()}catch(s1){r1=s1}e1()}}catch(s1){if(s1&&r1&&typeof s1.stack=="string"){for(var n1=s1.stack.split(`
`),i1=r1.stack.split(`
`),o1=n1.length-1,a1=i1.length-1;1<=o1&&0<=a1&&n1[o1]!==i1[a1];)a1--;for(;1<=o1&&0<=a1;o1--,a1--)if(n1[o1]!==i1[a1]){if(o1!==1||a1!==1)do if(o1--,a1--,0>a1||n1[o1]!==i1[a1]){var u1=`
`+n1[o1].replace(" at new "," at ");return e1.displayName&&u1.includes("<anonymous>")&&(u1=u1.replace("<anonymous>",e1.displayName)),u1}while(1<=o1&&0<=a1);break}}}finally{Na$1=!1,Error.prepareStackTrace=t1}return(e1=e1?e1.displayName||e1.name:"")?Ma$1(e1):""}function Pa(e1){switch(e1.tag){case 5:return Ma$1(e1.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return e1=Oa$1(e1.type,!1),e1;case 11:return e1=Oa$1(e1.type.render,!1),e1;case 1:return e1=Oa$1(e1.type,!0),e1;default:return""}}function Qa$3(e1){if(e1==null)return null;if(typeof e1=="function")return e1.displayName||e1.name||null;if(typeof e1=="string")return e1;switch(e1){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$2:return"StrictMode";case Ea$2:return"Suspense";case Fa$2:return"SuspenseList"}if(typeof e1=="object")switch(e1.$$typeof){case Ca$1:return(e1.displayName||"Context")+".Consumer";case Ba$2:return(e1._context.displayName||"Context")+".Provider";case Da$1:var _g=e1.render;return e1=e1.displayName,e1||(e1=_g.displayName||_g.name||"",e1=e1!==""?"ForwardRef("+e1+")":"ForwardRef"),e1;case Ga$2:return _g=e1.displayName||null,_g!==null?_g:Qa$3(e1.type)||"Memo";case Ha$3:_g=e1._payload,e1=e1._init;try{return Qa$3(e1(_g))}catch{}}return null}function Ra$1(e1){var _g=e1.type;switch(e1.tag){case 24:return"Cache";case 9:return(_g.displayName||"Context")+".Consumer";case 10:return(_g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e1=_g.render,e1=e1.displayName||e1.name||"",_g.displayName||(e1!==""?"ForwardRef("+e1+")":"ForwardRef");case 7:return"Fragment";case 5:return _g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$3(_g);case 8:return _g===za$2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _g=="function")return _g.displayName||_g.name||null;if(typeof _g=="string")return _g}return null}function Sa$1(e1){switch(typeof e1){case"boolean":case"number":case"string":case"undefined":return e1;case"object":return e1;default:return""}}function Ta$1(e1){var _g=e1.type;return(e1=e1.nodeName)&&e1.toLowerCase()==="input"&&(_g==="checkbox"||_g==="radio")}function Ua$2(e1){var _g=Ta$1(e1)?"checked":"value",t1=Object.getOwnPropertyDescriptor(e1.constructor.prototype,_g),r1=""+e1[_g];if(!e1.hasOwnProperty(_g)&&typeof t1<"u"&&typeof t1.get=="function"&&typeof t1.set=="function"){var n1=t1.get,i1=t1.set;return Object.defineProperty(e1,_g,{configurable:!0,get:function(){return n1.call(this)},set:function(o1){r1=""+o1,i1.call(this,o1)}}),Object.defineProperty(e1,_g,{enumerable:t1.enumerable}),{getValue:function(){return r1},setValue:function(o1){r1=""+o1},stopTracking:function(){e1._valueTracker=null,delete e1[_g]}}}}function Va$3(e1){e1._valueTracker||(e1._valueTracker=Ua$2(e1))}function Wa$2(e1){if(!e1)return!1;var _g=e1._valueTracker;if(!_g)return!0;var t1=_g.getValue(),r1="";return e1&&(r1=Ta$1(e1)?e1.checked?"true":"false":e1.value),e1=r1,e1!==t1?(_g.setValue(e1),!0):!1}function Xa$3(e1){if(e1=e1||(typeof document<"u"?document:void 0),typeof e1>"u")return null;try{return e1.activeElement||e1.body}catch{return e1.body}}function Ya$3(e1,_g){var t1=_g.checked;return A$1({},_g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t1??e1._wrapperState.initialChecked})}function Za$3(e1,_g){var t1=_g.defaultValue==null?"":_g.defaultValue,r1=_g.checked!=null?_g.checked:_g.defaultChecked;t1=Sa$1(_g.value!=null?_g.value:t1),e1._wrapperState={initialChecked:r1,initialValue:t1,controlled:_g.type==="checkbox"||_g.type==="radio"?_g.checked!=null:_g.value!=null}}function ab$1(e1,_g){_g=_g.checked,_g!=null&&ta$2(e1,"checked",_g,!1)}function bb$1(e1,_g){ab$1(e1,_g);var t1=Sa$1(_g.value),r1=_g.type;if(t1!=null)r1==="number"?(t1===0&&e1.value===""||e1.value!=t1)&&(e1.value=""+t1):e1.value!==""+t1&&(e1.value=""+t1);else if(r1==="submit"||r1==="reset"){e1.removeAttribute("value");return}_g.hasOwnProperty("value")?cb$1(e1,_g.type,t1):_g.hasOwnProperty("defaultValue")&&cb$1(e1,_g.type,Sa$1(_g.defaultValue)),_g.checked==null&&_g.defaultChecked!=null&&(e1.defaultChecked=!!_g.defaultChecked)}function db$1(e1,_g,t1){if(_g.hasOwnProperty("value")||_g.hasOwnProperty("defaultValue")){var r1=_g.type;if(!(r1!=="submit"&&r1!=="reset"||_g.value!==void 0&&_g.value!==null))return;_g=""+e1._wrapperState.initialValue,t1||_g===e1.value||(e1.value=_g),e1.defaultValue=_g}t1=e1.name,t1!==""&&(e1.name=""),e1.defaultChecked=!!e1._wrapperState.initialChecked,t1!==""&&(e1.name=t1)}function cb$1(e1,_g,t1){(_g!=="number"||Xa$3(e1.ownerDocument)!==e1)&&(t1==null?e1.defaultValue=""+e1._wrapperState.initialValue:e1.defaultValue!==""+t1&&(e1.defaultValue=""+t1))}var eb$1=Array.isArray;function fb$1(e1,_g,t1,r1){if(e1=e1.options,_g){_g={};for(var n1=0;n1<t1.length;n1++)_g["$"+t1[n1]]=!0;for(t1=0;t1<e1.length;t1++)n1=_g.hasOwnProperty("$"+e1[t1].value),e1[t1].selected!==n1&&(e1[t1].selected=n1),n1&&r1&&(e1[t1].defaultSelected=!0)}else{for(t1=""+Sa$1(t1),_g=null,n1=0;n1<e1.length;n1++){if(e1[n1].value===t1){e1[n1].selected=!0,r1&&(e1[n1].defaultSelected=!0);return}_g!==null||e1[n1].disabled||(_g=e1[n1])}_g!==null&&(_g.selected=!0)}}function gb$1(e1,_g){if(_g.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$1({},_g,{value:void 0,defaultValue:void 0,children:""+e1._wrapperState.initialValue})}function hb$1(e1,_g){var t1=_g.value;if(t1==null){if(t1=_g.children,_g=_g.defaultValue,t1!=null){if(_g!=null)throw Error(p$3(92));if(eb$1(t1)){if(1<t1.length)throw Error(p$3(93));t1=t1[0]}_g=t1}_g==null&&(_g=""),t1=_g}e1._wrapperState={initialValue:Sa$1(t1)}}function ib$1(e1,_g){var t1=Sa$1(_g.value),r1=Sa$1(_g.defaultValue);t1!=null&&(t1=""+t1,t1!==e1.value&&(e1.value=t1),_g.defaultValue==null&&e1.defaultValue!==t1&&(e1.defaultValue=t1)),r1!=null&&(e1.defaultValue=""+r1)}function jb$1(e1){var _g=e1.textContent;_g===e1._wrapperState.initialValue&&_g!==""&&_g!==null&&(e1.value=_g)}function kb$1(e1){switch(e1){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(e1,_g){return e1==null||e1==="http://www.w3.org/1999/xhtml"?kb$1(_g):e1==="http://www.w3.org/2000/svg"&&_g==="foreignObject"?"http://www.w3.org/1999/xhtml":e1}var mb$1,nb$1=function(e1){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_g,t1,r1,n1){MSApp.execUnsafeLocalFunction(function(){return e1(_g,t1,r1,n1)})}:e1}(function(e1,_g){if(e1.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e1)e1.innerHTML=_g;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+_g.valueOf().toString()+"</svg>",_g=mb$1.firstChild;e1.firstChild;)e1.removeChild(e1.firstChild);for(;_g.firstChild;)e1.appendChild(_g.firstChild)}});function ob$1(e1,_g){if(_g){var t1=e1.firstChild;if(t1&&t1===e1.lastChild&&t1.nodeType===3){t1.nodeValue=_g;return}}e1.textContent=_g}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(e1){qb$1.forEach(function(_g){_g=_g+e1.charAt(0).toUpperCase()+e1.substring(1),pb$1[_g]=pb$1[e1]})});function rb$1(e1,_g,t1){return _g==null||typeof _g=="boolean"||_g===""?"":t1||typeof _g!="number"||_g===0||pb$1.hasOwnProperty(e1)&&pb$1[e1]?(""+_g).trim():_g+"px"}function sb$1(e1,_g){e1=e1.style;for(var t1 in _g)if(_g.hasOwnProperty(t1)){var r1=t1.indexOf("--")===0,n1=rb$1(t1,_g[t1],r1);t1==="float"&&(t1="cssFloat"),r1?e1.setProperty(t1,n1):e1[t1]=n1}}var tb$1=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(e1,_g){if(_g){if(tb$1[e1]&&(_g.children!=null||_g.dangerouslySetInnerHTML!=null))throw Error(p$3(137,e1));if(_g.dangerouslySetInnerHTML!=null){if(_g.children!=null)throw Error(p$3(60));if(typeof _g.dangerouslySetInnerHTML!="object"||!("__html"in _g.dangerouslySetInnerHTML))throw Error(p$3(61))}if(_g.style!=null&&typeof _g.style!="object")throw Error(p$3(62))}}function vb$1(e1,_g){if(e1.indexOf("-")===-1)return typeof _g.is=="string";switch(e1){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(e1){return e1=e1.target||e1.srcElement||window,e1.correspondingUseElement&&(e1=e1.correspondingUseElement),e1.nodeType===3?e1.parentNode:e1}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(e1){if(e1=Cb$1(e1)){if(typeof yb$1!="function")throw Error(p$3(280));var _g=e1.stateNode;_g&&(_g=Db$1(_g),yb$1(e1.stateNode,e1.type,_g))}}function Eb$1(e1){zb$1?Ab$1?Ab$1.push(e1):Ab$1=[e1]:zb$1=e1}function Fb$1(){if(zb$1){var e1=zb$1,_g=Ab$1;if(Ab$1=zb$1=null,Bb$1(e1),_g)for(e1=0;e1<_g.length;e1++)Bb$1(_g[e1])}}function Gb$1(e1,_g){return e1(_g)}function Hb(){}var Ib$1=!1;function Jb$1(e1,_g,t1){if(Ib$1)return e1(_g,t1);Ib$1=!0;try{return Gb$1(e1,_g,t1)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb(),Fb$1())}}function Kb$1(e1,_g){var t1=e1.stateNode;if(t1===null)return null;var r1=Db$1(t1);if(r1===null)return null;t1=r1[_g];e:switch(_g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r1=!r1.disabled)||(e1=e1.type,r1=!(e1==="button"||e1==="input"||e1==="select"||e1==="textarea")),e1=!r1;break e;default:e1=!1}if(e1)return null;if(t1&&typeof t1!="function")throw Error(p$3(231,_g,typeof t1));return t1}var Lb$1=!1;if(ia$3)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(e1,_g,t1,r1,n1,i1,o1,a1,u1){var s1=Array.prototype.slice.call(arguments,3);try{_g.apply(t1,s1)}catch(l1){this.onError(l1)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(e1){Ob$1=!0,Pb$1=e1}};function Tb$1(e1,_g,t1,r1,n1,i1,o1,a1,u1){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(e1,_g,t1,r1,n1,i1,o1,a1,u1){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var s1=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$3(198));Qb$1||(Qb$1=!0,Rb$1=s1)}}function Vb$1(e1){var _g=e1,t1=e1;if(e1.alternate)for(;_g.return;)_g=_g.return;else{e1=_g;do _g=e1,_g.flags&4098&&(t1=_g.return),e1=_g.return;while(e1)}return _g.tag===3?t1:null}function Wb(e1){if(e1.tag===13){var _g=e1.memoizedState;if(_g===null&&(e1=e1.alternate,e1!==null&&(_g=e1.memoizedState)),_g!==null)return _g.dehydrated}return null}function Xb$1(e1){if(Vb$1(e1)!==e1)throw Error(p$3(188))}function Yb$1(e1){var _g=e1.alternate;if(!_g){if(_g=Vb$1(e1),_g===null)throw Error(p$3(188));return _g!==e1?null:e1}for(var t1=e1,r1=_g;;){var n1=t1.return;if(n1===null)break;var i1=n1.alternate;if(i1===null){if(r1=n1.return,r1!==null){t1=r1;continue}break}if(n1.child===i1.child){for(i1=n1.child;i1;){if(i1===t1)return Xb$1(n1),e1;if(i1===r1)return Xb$1(n1),_g;i1=i1.sibling}throw Error(p$3(188))}if(t1.return!==r1.return)t1=n1,r1=i1;else{for(var o1=!1,a1=n1.child;a1;){if(a1===t1){o1=!0,t1=n1,r1=i1;break}if(a1===r1){o1=!0,r1=n1,t1=i1;break}a1=a1.sibling}if(!o1){for(a1=i1.child;a1;){if(a1===t1){o1=!0,t1=i1,r1=n1;break}if(a1===r1){o1=!0,r1=i1,t1=n1;break}a1=a1.sibling}if(!o1)throw Error(p$3(189))}}if(t1.alternate!==r1)throw Error(p$3(190))}if(t1.tag!==3)throw Error(p$3(188));return t1.stateNode.current===t1?e1:_g}function Zb$1(e1){return e1=Yb$1(e1),e1!==null?$b$1(e1):null}function $b$1(e1){if(e1.tag===5||e1.tag===6)return e1;for(e1=e1.child;e1!==null;){var _g=$b$1(e1);if(_g!==null)return _g;e1=e1.sibling}return null}var ac$2=ca$2.unstable_scheduleCallback,bc$2=ca$2.unstable_cancelCallback,cc$2=ca$2.unstable_shouldYield,dc$2=ca$2.unstable_requestPaint,B$3=ca$2.unstable_now,ec$1=ca$2.unstable_getCurrentPriorityLevel,fc$2=ca$2.unstable_ImmediatePriority,gc$2=ca$2.unstable_UserBlockingPriority,hc$1=ca$2.unstable_NormalPriority,ic$2=ca$2.unstable_LowPriority,jc$2=ca$2.unstable_IdlePriority,kc$2=null,lc$2=null;function mc$2(e1){if(lc$2&&typeof lc$2.onCommitFiberRoot=="function")try{lc$2.onCommitFiberRoot(kc$2,e1,void 0,(e1.current.flags&128)===128)}catch{}}var oc$2=Math.clz32?Math.clz32:nc$2,pc$2=Math.log,qc$2=Math.LN2;function nc$2(e1){return e1>>>=0,e1===0?32:31-(pc$2(e1)/qc$2|0)|0}var rc$1=64,sc$2=4194304;function tc$1(e1){switch(e1&-e1){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e1&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e1&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e1}}function uc$2(e1,_g){var t1=e1.pendingLanes;if(t1===0)return 0;var r1=0,n1=e1.suspendedLanes,i1=e1.pingedLanes,o1=t1&268435455;if(o1!==0){var a1=o1&~n1;a1!==0?r1=tc$1(a1):(i1&=o1,i1!==0&&(r1=tc$1(i1)))}else o1=t1&~n1,o1!==0?r1=tc$1(o1):i1!==0&&(r1=tc$1(i1));if(r1===0)return 0;if(_g!==0&&_g!==r1&&!(_g&n1)&&(n1=r1&-r1,i1=_g&-_g,n1>=i1||n1===16&&(i1&4194240)!==0))return _g;if(r1&4&&(r1|=t1&16),_g=e1.entangledLanes,_g!==0)for(e1=e1.entanglements,_g&=r1;0<_g;)t1=31-oc$2(_g),n1=1<<t1,r1|=e1[t1],_g&=~n1;return r1}function vc$2(e1,_g){switch(e1){case 1:case 2:case 4:return _g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$2(e1,_g){for(var t1=e1.suspendedLanes,r1=e1.pingedLanes,n1=e1.expirationTimes,i1=e1.pendingLanes;0<i1;){var o1=31-oc$2(i1),a1=1<<o1,u1=n1[o1];u1===-1?(!(a1&t1)||a1&r1)&&(n1[o1]=vc$2(a1,_g)):u1<=_g&&(e1.expiredLanes|=a1),i1&=~a1}}function xc$2(e1){return e1=e1.pendingLanes&-1073741825,e1!==0?e1:e1&1073741824?1073741824:0}function yc$2(){var e1=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),e1}function zc$2(e1){for(var _g=[],t1=0;31>t1;t1++)_g.push(e1);return _g}function Ac$2(e1,_g,t1){e1.pendingLanes|=_g,_g!==536870912&&(e1.suspendedLanes=0,e1.pingedLanes=0),e1=e1.eventTimes,_g=31-oc$2(_g),e1[_g]=t1}function Bc$2(e1,_g){var t1=e1.pendingLanes&~_g;e1.pendingLanes=_g,e1.suspendedLanes=0,e1.pingedLanes=0,e1.expiredLanes&=_g,e1.mutableReadLanes&=_g,e1.entangledLanes&=_g,_g=e1.entanglements;var r1=e1.eventTimes;for(e1=e1.expirationTimes;0<t1;){var n1=31-oc$2(t1),i1=1<<n1;_g[n1]=0,r1[n1]=-1,e1[n1]=-1,t1&=~i1}}function Cc$2(e1,_g){var t1=e1.entangledLanes|=_g;for(e1=e1.entanglements;t1;){var r1=31-oc$2(t1),n1=1<<r1;n1&_g|e1[r1]&_g&&(e1[r1]|=_g),t1&=~n1}}var C$1=0;function Dc$2(e1){return e1&=-e1,1<e1?4<e1?e1&268435455?16:536870912:4:1}var Ec$2,Fc$2,Gc$2,Hc$2,Ic$2,Jc$2=!1,Kc$2=[],Lc$2=null,Mc$2=null,Nc$2=null,Oc$2=new Map,Pc$2=new Map,Qc$2=[],Rc$2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$2(e1,_g){switch(e1){case"focusin":case"focusout":Lc$2=null;break;case"dragenter":case"dragleave":Mc$2=null;break;case"mouseover":case"mouseout":Nc$2=null;break;case"pointerover":case"pointerout":Oc$2.delete(_g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$2.delete(_g.pointerId)}}function Tc$2(e1,_g,t1,r1,n1,i1){return e1===null||e1.nativeEvent!==i1?(e1={blockedOn:_g,domEventName:t1,eventSystemFlags:r1,nativeEvent:i1,targetContainers:[n1]},_g!==null&&(_g=Cb$1(_g),_g!==null&&Fc$2(_g)),e1):(e1.eventSystemFlags|=r1,_g=e1.targetContainers,n1!==null&&_g.indexOf(n1)===-1&&_g.push(n1),e1)}function Uc$2(e1,_g,t1,r1,n1){switch(_g){case"focusin":return Lc$2=Tc$2(Lc$2,e1,_g,t1,r1,n1),!0;case"dragenter":return Mc$2=Tc$2(Mc$2,e1,_g,t1,r1,n1),!0;case"mouseover":return Nc$2=Tc$2(Nc$2,e1,_g,t1,r1,n1),!0;case"pointerover":var i1=n1.pointerId;return Oc$2.set(i1,Tc$2(Oc$2.get(i1)||null,e1,_g,t1,r1,n1)),!0;case"gotpointercapture":return i1=n1.pointerId,Pc$2.set(i1,Tc$2(Pc$2.get(i1)||null,e1,_g,t1,r1,n1)),!0}return!1}function Vc$2(e1){var _g=Wc$2(e1.target);if(_g!==null){var t1=Vb$1(_g);if(t1!==null){if(_g=t1.tag,_g===13){if(_g=Wb(t1),_g!==null){e1.blockedOn=_g,Ic$2(e1.priority,function(){Gc$2(t1)});return}}else if(_g===3&&t1.stateNode.current.memoizedState.isDehydrated){e1.blockedOn=t1.tag===3?t1.stateNode.containerInfo:null;return}}}e1.blockedOn=null}function Xc$2(e1){if(e1.blockedOn!==null)return!1;for(var _g=e1.targetContainers;0<_g.length;){var t1=Yc$2(e1.domEventName,e1.eventSystemFlags,_g[0],e1.nativeEvent);if(t1===null){t1=e1.nativeEvent;var r1=new t1.constructor(t1.type,t1);wb$1=r1,t1.target.dispatchEvent(r1),wb$1=null}else return _g=Cb$1(t1),_g!==null&&Fc$2(_g),e1.blockedOn=t1,!1;_g.shift()}return!0}function Zc$2(e1,_g,t1){Xc$2(e1)&&t1.delete(_g)}function $c$2(){Jc$2=!1,Lc$2!==null&&Xc$2(Lc$2)&&(Lc$2=null),Mc$2!==null&&Xc$2(Mc$2)&&(Mc$2=null),Nc$2!==null&&Xc$2(Nc$2)&&(Nc$2=null),Oc$2.forEach(Zc$2),Pc$2.forEach(Zc$2)}function ad$2(e1,_g){e1.blockedOn===_g&&(e1.blockedOn=null,Jc$2||(Jc$2=!0,ca$2.unstable_scheduleCallback(ca$2.unstable_NormalPriority,$c$2)))}function bd$1(e1){function _g(n1){return ad$2(n1,e1)}if(0<Kc$2.length){ad$2(Kc$2[0],e1);for(var t1=1;t1<Kc$2.length;t1++){var r1=Kc$2[t1];r1.blockedOn===e1&&(r1.blockedOn=null)}}for(Lc$2!==null&&ad$2(Lc$2,e1),Mc$2!==null&&ad$2(Mc$2,e1),Nc$2!==null&&ad$2(Nc$2,e1),Oc$2.forEach(_g),Pc$2.forEach(_g),t1=0;t1<Qc$2.length;t1++)r1=Qc$2[t1],r1.blockedOn===e1&&(r1.blockedOn=null);for(;0<Qc$2.length&&(t1=Qc$2[0],t1.blockedOn===null);)Vc$2(t1),t1.blockedOn===null&&Qc$2.shift()}var cd$2=ua$2.ReactCurrentBatchConfig,dd$2=!0;function ed$2(e1,_g,t1,r1){var n1=C$1,i1=cd$2.transition;cd$2.transition=null;try{C$1=1,fd$2(e1,_g,t1,r1)}finally{C$1=n1,cd$2.transition=i1}}function gd$1(e1,_g,t1,r1){var n1=C$1,i1=cd$2.transition;cd$2.transition=null;try{C$1=4,fd$2(e1,_g,t1,r1)}finally{C$1=n1,cd$2.transition=i1}}function fd$2(e1,_g,t1,r1){if(dd$2){var n1=Yc$2(e1,_g,t1,r1);if(n1===null)hd$2(e1,_g,r1,id$2,t1),Sc$2(e1,r1);else if(Uc$2(n1,e1,_g,t1,r1))r1.stopPropagation();else if(Sc$2(e1,r1),_g&4&&-1<Rc$2.indexOf(e1)){for(;n1!==null;){var i1=Cb$1(n1);if(i1!==null&&Ec$2(i1),i1=Yc$2(e1,_g,t1,r1),i1===null&&hd$2(e1,_g,r1,id$2,t1),i1===n1)break;n1=i1}n1!==null&&r1.stopPropagation()}else hd$2(e1,_g,r1,null,t1)}}var id$2=null;function Yc$2(e1,_g,t1,r1){if(id$2=null,e1=xb$1(r1),e1=Wc$2(e1),e1!==null)if(_g=Vb$1(e1),_g===null)e1=null;else if(t1=_g.tag,t1===13){if(e1=Wb(_g),e1!==null)return e1;e1=null}else if(t1===3){if(_g.stateNode.current.memoizedState.isDehydrated)return _g.tag===3?_g.stateNode.containerInfo:null;e1=null}else _g!==e1&&(e1=null);return id$2=e1,null}function jd$2(e1){switch(e1){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$2:return 1;case gc$2:return 4;case hc$1:case ic$2:return 16;case jc$2:return 536870912;default:return 16}default:return 16}}var kd$2=null,ld$2=null,md$2=null;function nd$2(){if(md$2)return md$2;var e1,_g=ld$2,t1=_g.length,r1,n1="value"in kd$2?kd$2.value:kd$2.textContent,i1=n1.length;for(e1=0;e1<t1&&_g[e1]===n1[e1];e1++);var o1=t1-e1;for(r1=1;r1<=o1&&_g[t1-r1]===n1[i1-r1];r1++);return md$2=n1.slice(e1,1<r1?1-r1:void 0)}function od$2(e1){var _g=e1.keyCode;return"charCode"in e1?(e1=e1.charCode,e1===0&&_g===13&&(e1=13)):e1=_g,e1===10&&(e1=13),32<=e1||e1===13?e1:0}function pd$2(){return!0}function qd$2(){return!1}function rd$2(e1){function _g(t1,r1,n1,i1,o1){this._reactName=t1,this._targetInst=n1,this.type=r1,this.nativeEvent=i1,this.target=o1,this.currentTarget=null;for(var a1 in e1)e1.hasOwnProperty(a1)&&(t1=e1[a1],this[a1]=t1?t1(i1):i1[a1]);return this.isDefaultPrevented=(i1.defaultPrevented!=null?i1.defaultPrevented:i1.returnValue===!1)?pd$2:qd$2,this.isPropagationStopped=qd$2,this}return A$1(_g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t1=this.nativeEvent;t1&&(t1.preventDefault?t1.preventDefault():typeof t1.returnValue!="unknown"&&(t1.returnValue=!1),this.isDefaultPrevented=pd$2)},stopPropagation:function(){var t1=this.nativeEvent;t1&&(t1.stopPropagation?t1.stopPropagation():typeof t1.cancelBubble!="unknown"&&(t1.cancelBubble=!0),this.isPropagationStopped=pd$2)},persist:function(){},isPersistent:pd$2}),_g}var sd$2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e1){return e1.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$2=rd$2(sd$2),ud$2=A$1({},sd$2,{view:0,detail:0}),vd$2=rd$2(ud$2),wd$1,xd$1,yd$1,Ad$2=A$1({},ud$2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(e1){return e1.relatedTarget===void 0?e1.fromElement===e1.srcElement?e1.toElement:e1.fromElement:e1.relatedTarget},movementX:function(e1){return"movementX"in e1?e1.movementX:(e1!==yd$1&&(yd$1&&e1.type==="mousemove"?(wd$1=e1.screenX-yd$1.screenX,xd$1=e1.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=e1),wd$1)},movementY:function(e1){return"movementY"in e1?e1.movementY:xd$1}}),Bd$1=rd$2(Ad$2),Cd$2=A$1({},Ad$2,{dataTransfer:0}),Dd$2=rd$2(Cd$2),Ed$2=A$1({},ud$2,{relatedTarget:0}),Fd$2=rd$2(Ed$2),Gd$1=A$1({},sd$2,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$2=rd$2(Gd$1),Id$2=A$1({},sd$2,{clipboardData:function(e1){return"clipboardData"in e1?e1.clipboardData:window.clipboardData}}),Jd$1=rd$2(Id$2),Kd$2=A$1({},sd$2,{data:0}),Ld$2=rd$2(Kd$2),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$2(e1){var _g=this.nativeEvent;return _g.getModifierState?_g.getModifierState(e1):(e1=Od$2[e1])?!!_g[e1]:!1}function zd$1(){return Pd$2}var Qd$1=A$1({},ud$2,{key:function(e1){if(e1.key){var _g=Md$1[e1.key]||e1.key;if(_g!=="Unidentified")return _g}return e1.type==="keypress"?(e1=od$2(e1),e1===13?"Enter":String.fromCharCode(e1)):e1.type==="keydown"||e1.type==="keyup"?Nd$1[e1.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(e1){return e1.type==="keypress"?od$2(e1):0},keyCode:function(e1){return e1.type==="keydown"||e1.type==="keyup"?e1.keyCode:0},which:function(e1){return e1.type==="keypress"?od$2(e1):e1.type==="keydown"||e1.type==="keyup"?e1.keyCode:0}}),Rd$1=rd$2(Qd$1),Sd$2=A$1({},Ad$2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$2(Sd$2),Ud$1=A$1({},ud$2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$2(Ud$1),Wd$1=A$1({},sd$2,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$2=rd$2(Wd$1),Yd$2=A$1({},Ad$2,{deltaX:function(e1){return"deltaX"in e1?e1.deltaX:"wheelDeltaX"in e1?-e1.wheelDeltaX:0},deltaY:function(e1){return"deltaY"in e1?e1.deltaY:"wheelDeltaY"in e1?-e1.wheelDeltaY:"wheelDelta"in e1?-e1.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$2(Yd$2),$d$1=[9,13,27,32],ae$2=ia$3&&"CompositionEvent"in window,be$3=null;ia$3&&"documentMode"in document&&(be$3=document.documentMode);var ce$2=ia$3&&"TextEvent"in window&&!be$3,de$2=ia$3&&(!ae$2||be$3&&8<be$3&&11>=be$3),ee$1=" ",fe$4=!1;function ge$2(e1,_g){switch(e1){case"keyup":return $d$1.indexOf(_g.keyCode)!==-1;case"keydown":return _g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(e1){return e1=e1.detail,typeof e1=="object"&&"data"in e1?e1.data:null}var ie$1=!1;function je$1(e1,_g){switch(e1){case"compositionend":return he$2(_g);case"keypress":return _g.which!==32?null:(fe$4=!0,ee$1);case"textInput":return e1=_g.data,e1===ee$1&&fe$4?null:e1;default:return null}}function ke$2(e1,_g){if(ie$1)return e1==="compositionend"||!ae$2&&ge$2(e1,_g)?(e1=nd$2(),md$2=ld$2=kd$2=null,ie$1=!1,e1):null;switch(e1){case"paste":return null;case"keypress":if(!(_g.ctrlKey||_g.altKey||_g.metaKey)||_g.ctrlKey&&_g.altKey){if(_g.char&&1<_g.char.length)return _g.char;if(_g.which)return String.fromCharCode(_g.which)}return null;case"compositionend":return de$2&&_g.locale!=="ko"?null:_g.data;default:return null}}var le$3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$3(e1){var _g=e1&&e1.nodeName&&e1.nodeName.toLowerCase();return _g==="input"?!!le$3[e1.type]:_g==="textarea"}function ne$2(e1,_g,t1,r1){Eb$1(r1),_g=oe$2(_g,"onChange"),0<_g.length&&(t1=new td$2("onChange","change",null,t1,r1),e1.push({event:t1,listeners:_g}))}var pe$2=null,qe$2=null;function re$1(e1){se$1(e1,0)}function te$1(e1){var _g=ue$2(e1);if(Wa$2(_g))return e1}function ve$3(e1,_g){if(e1==="change")return _g}var we$4=!1;if(ia$3){var xe$3;if(ia$3){var ye$4="oninput"in document;if(!ye$4){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$4=typeof ze$1.oninput=="function"}xe$3=ye$4}else xe$3=!1;we$4=xe$3&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$2&&(pe$2.detachEvent("onpropertychange",Be$1),qe$2=pe$2=null)}function Be$1(e1){if(e1.propertyName==="value"&&te$1(qe$2)){var _g=[];ne$2(_g,qe$2,e1,xb$1(e1)),Jb$1(re$1,_g)}}function Ce$2(e1,_g,t1){e1==="focusin"?(Ae$1(),pe$2=_g,qe$2=t1,pe$2.attachEvent("onpropertychange",Be$1)):e1==="focusout"&&Ae$1()}function De$4(e1){if(e1==="selectionchange"||e1==="keyup"||e1==="keydown")return te$1(qe$2)}function Ee$3(e1,_g){if(e1==="click")return te$1(_g)}function Fe$2(e1,_g){if(e1==="input"||e1==="change")return te$1(_g)}function Ge$1(e1,_g){return e1===_g&&(e1!==0||1/e1===1/_g)||e1!==e1&&_g!==_g}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(e1,_g){if(He$2(e1,_g))return!0;if(typeof e1!="object"||e1===null||typeof _g!="object"||_g===null)return!1;var t1=Object.keys(e1),r1=Object.keys(_g);if(t1.length!==r1.length)return!1;for(r1=0;r1<t1.length;r1++){var n1=t1[r1];if(!ja$3.call(_g,n1)||!He$2(e1[n1],_g[n1]))return!1}return!0}function Je$2(e1){for(;e1&&e1.firstChild;)e1=e1.firstChild;return e1}function Ke$1(e1,_g){var t1=Je$2(e1);e1=0;for(var r1;t1;){if(t1.nodeType===3){if(r1=e1+t1.textContent.length,e1<=_g&&r1>=_g)return{node:t1,offset:_g-e1};e1=r1}e:{for(;t1;){if(t1.nextSibling){t1=t1.nextSibling;break e}t1=t1.parentNode}t1=void 0}t1=Je$2(t1)}}function Le$1(e1,_g){return e1&&_g?e1===_g?!0:e1&&e1.nodeType===3?!1:_g&&_g.nodeType===3?Le$1(e1,_g.parentNode):"contains"in e1?e1.contains(_g):e1.compareDocumentPosition?!!(e1.compareDocumentPosition(_g)&16):!1:!1}function Me$3(){for(var e1=window,_g=Xa$3();_g instanceof e1.HTMLIFrameElement;){try{var t1=typeof _g.contentWindow.location.href=="string"}catch{t1=!1}if(t1)e1=_g.contentWindow;else break;_g=Xa$3(e1.document)}return _g}function Ne$2(e1){var _g=e1&&e1.nodeName&&e1.nodeName.toLowerCase();return _g&&(_g==="input"&&(e1.type==="text"||e1.type==="search"||e1.type==="tel"||e1.type==="url"||e1.type==="password")||_g==="textarea"||e1.contentEditable==="true")}function Oe$1(e1){var _g=Me$3(),t1=e1.focusedElem,r1=e1.selectionRange;if(_g!==t1&&t1&&t1.ownerDocument&&Le$1(t1.ownerDocument.documentElement,t1)){if(r1!==null&&Ne$2(t1)){if(_g=r1.start,e1=r1.end,e1===void 0&&(e1=_g),"selectionStart"in t1)t1.selectionStart=_g,t1.selectionEnd=Math.min(e1,t1.value.length);else if(e1=(_g=t1.ownerDocument||document)&&_g.defaultView||window,e1.getSelection){e1=e1.getSelection();var n1=t1.textContent.length,i1=Math.min(r1.start,n1);r1=r1.end===void 0?i1:Math.min(r1.end,n1),!e1.extend&&i1>r1&&(n1=r1,r1=i1,i1=n1),n1=Ke$1(t1,i1);var o1=Ke$1(t1,r1);n1&&o1&&(e1.rangeCount!==1||e1.anchorNode!==n1.node||e1.anchorOffset!==n1.offset||e1.focusNode!==o1.node||e1.focusOffset!==o1.offset)&&(_g=_g.createRange(),_g.setStart(n1.node,n1.offset),e1.removeAllRanges(),i1>r1?(e1.addRange(_g),e1.extend(o1.node,o1.offset)):(_g.setEnd(o1.node,o1.offset),e1.addRange(_g)))}}for(_g=[],e1=t1;e1=e1.parentNode;)e1.nodeType===1&&_g.push({element:e1,left:e1.scrollLeft,top:e1.scrollTop});for(typeof t1.focus=="function"&&t1.focus(),t1=0;t1<_g.length;t1++)e1=_g[t1],e1.element.scrollLeft=e1.left,e1.element.scrollTop=e1.top}}var Pe$3=ia$3&&"documentMode"in document&&11>=document.documentMode,Qe$2=null,Re$2=null,Se$2=null,Te$2=!1;function Ue$3(e1,_g,t1){var r1=t1.window===t1?t1.document:t1.nodeType===9?t1:t1.ownerDocument;Te$2||Qe$2==null||Qe$2!==Xa$3(r1)||(r1=Qe$2,"selectionStart"in r1&&Ne$2(r1)?r1={start:r1.selectionStart,end:r1.selectionEnd}:(r1=(r1.ownerDocument&&r1.ownerDocument.defaultView||window).getSelection(),r1={anchorNode:r1.anchorNode,anchorOffset:r1.anchorOffset,focusNode:r1.focusNode,focusOffset:r1.focusOffset}),Se$2&&Ie$2(Se$2,r1)||(Se$2=r1,r1=oe$2(Re$2,"onSelect"),0<r1.length&&(_g=new td$2("onSelect","select",null,_g,t1),e1.push({event:_g,listeners:r1}),_g.target=Qe$2)))}function Ve$1(e1,_g){var t1={};return t1[e1.toLowerCase()]=_g.toLowerCase(),t1["Webkit"+e1]="webkit"+_g,t1["Moz"+e1]="moz"+_g,t1}var We$3={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$2={},Ye$1={};ia$3&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$3.animationend.animation,delete We$3.animationiteration.animation,delete We$3.animationstart.animation),"TransitionEvent"in window||delete We$3.transitionend.transition);function Ze$3(e1){if(Xe$2[e1])return Xe$2[e1];if(!We$3[e1])return e1;var _g=We$3[e1],t1;for(t1 in _g)if(_g.hasOwnProperty(t1)&&t1 in Ye$1)return Xe$2[e1]=_g[t1];return e1}var $e$2=Ze$3("animationend"),af$2=Ze$3("animationiteration"),bf$1=Ze$3("animationstart"),cf$1=Ze$3("transitionend"),df$1=new Map,ef$2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$2(e1,_g){df$1.set(e1,_g),fa$2(_g,[e1])}for(var gf$1=0;gf$1<ef$2.length;gf$1++){var hf$2=ef$2[gf$1],jf$1=hf$2.toLowerCase(),kf$1=hf$2[0].toUpperCase()+hf$2.slice(1);ff$2(jf$1,"on"+kf$1)}ff$2($e$2,"onAnimationEnd");ff$2(af$2,"onAnimationIteration");ff$2(bf$1,"onAnimationStart");ff$2("dblclick","onDoubleClick");ff$2("focusin","onFocus");ff$2("focusout","onBlur");ff$2(cf$1,"onTransitionEnd");ha$2("onMouseEnter",["mouseout","mouseover"]);ha$2("onMouseLeave",["mouseout","mouseover"]);ha$2("onPointerEnter",["pointerout","pointerover"]);ha$2("onPointerLeave",["pointerout","pointerover"]);fa$2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$2("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$2=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$2));function nf$2(e1,_g,t1){var r1=e1.type||"unknown-event";e1.currentTarget=t1,Ub$1(r1,_g,void 0,e1),e1.currentTarget=null}function se$1(e1,_g){_g=(_g&4)!==0;for(var t1=0;t1<e1.length;t1++){var r1=e1[t1],n1=r1.event;r1=r1.listeners;e:{var i1=void 0;if(_g)for(var o1=r1.length-1;0<=o1;o1--){var a1=r1[o1],u1=a1.instance,s1=a1.currentTarget;if(a1=a1.listener,u1!==i1&&n1.isPropagationStopped())break e;nf$2(n1,a1,s1),i1=u1}else for(o1=0;o1<r1.length;o1++){if(a1=r1[o1],u1=a1.instance,s1=a1.currentTarget,a1=a1.listener,u1!==i1&&n1.isPropagationStopped())break e;nf$2(n1,a1,s1),i1=u1}}}if(Qb$1)throw e1=Rb$1,Qb$1=!1,Rb$1=null,e1}function D$3(e1,_g){var t1=_g[of$2];t1===void 0&&(t1=_g[of$2]=new Set);var r1=e1+"__bubble";t1.has(r1)||(pf$2(_g,e1,2,!1),t1.add(r1))}function qf$1(e1,_g,t1){var r1=0;_g&&(r1|=4),pf$2(t1,e1,r1,_g)}var rf$2="_reactListening"+Math.random().toString(36).slice(2);function sf$2(e1){if(!e1[rf$2]){e1[rf$2]=!0,da$2.forEach(function(t1){t1!=="selectionchange"&&(mf$2.has(t1)||qf$1(t1,!1,e1),qf$1(t1,!0,e1))});var _g=e1.nodeType===9?e1:e1.ownerDocument;_g===null||_g[rf$2]||(_g[rf$2]=!0,qf$1("selectionchange",!1,_g))}}function pf$2(e1,_g,t1,r1){switch(jd$2(_g)){case 1:var n1=ed$2;break;case 4:n1=gd$1;break;default:n1=fd$2}t1=n1.bind(null,_g,t1,e1),n1=void 0,!Lb$1||_g!=="touchstart"&&_g!=="touchmove"&&_g!=="wheel"||(n1=!0),r1?n1!==void 0?e1.addEventListener(_g,t1,{capture:!0,passive:n1}):e1.addEventListener(_g,t1,!0):n1!==void 0?e1.addEventListener(_g,t1,{passive:n1}):e1.addEventListener(_g,t1,!1)}function hd$2(e1,_g,t1,r1,n1){var i1=r1;if(!(_g&1)&&!(_g&2)&&r1!==null)e:for(;;){if(r1===null)return;var o1=r1.tag;if(o1===3||o1===4){var a1=r1.stateNode.containerInfo;if(a1===n1||a1.nodeType===8&&a1.parentNode===n1)break;if(o1===4)for(o1=r1.return;o1!==null;){var u1=o1.tag;if((u1===3||u1===4)&&(u1=o1.stateNode.containerInfo,u1===n1||u1.nodeType===8&&u1.parentNode===n1))return;o1=o1.return}for(;a1!==null;){if(o1=Wc$2(a1),o1===null)return;if(u1=o1.tag,u1===5||u1===6){r1=i1=o1;continue e}a1=a1.parentNode}}r1=r1.return}Jb$1(function(){var s1=i1,l1=xb$1(t1),c1=[];e:{var d1=df$1.get(e1);if(d1!==void 0){var h1=td$2,f1=e1;switch(e1){case"keypress":if(od$2(t1)===0)break e;case"keydown":case"keyup":h1=Rd$1;break;case"focusin":f1="focus",h1=Fd$2;break;case"focusout":f1="blur",h1=Fd$2;break;case"beforeblur":case"afterblur":h1=Fd$2;break;case"click":if(t1.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h1=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h1=Dd$2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h1=Vd$1;break;case $e$2:case af$2:case bf$1:h1=Hd$2;break;case cf$1:h1=Xd$2;break;case"scroll":h1=vd$2;break;case"wheel":h1=Zd$1;break;case"copy":case"cut":case"paste":h1=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h1=Td$1}var g1=(_g&4)!==0,v1=!g1&&e1==="scroll",$1=g1?d1!==null?d1+"Capture":null:d1;g1=[];for(var y1=s1,_1;y1!==null;){_1=y1;var E1=_1.stateNode;if(_1.tag===5&&E1!==null&&(_1=E1,$1!==null&&(E1=Kb$1(y1,$1),E1!=null&&g1.push(tf$2(y1,E1,_1)))),v1)break;y1=y1.return}0<g1.length&&(d1=new h1(d1,f1,null,t1,l1),c1.push({event:d1,listeners:g1}))}}if(!(_g&7)){e:{if(d1=e1==="mouseover"||e1==="pointerover",h1=e1==="mouseout"||e1==="pointerout",d1&&t1!==wb$1&&(f1=t1.relatedTarget||t1.fromElement)&&(Wc$2(f1)||f1[uf$2]))break e;if((h1||d1)&&(d1=l1.window===l1?l1:(d1=l1.ownerDocument)?d1.defaultView||d1.parentWindow:window,h1?(f1=t1.relatedTarget||t1.toElement,h1=s1,f1=f1?Wc$2(f1):null,f1!==null&&(v1=Vb$1(f1),f1!==v1||f1.tag!==5&&f1.tag!==6)&&(f1=null)):(h1=null,f1=s1),h1!==f1)){if(g1=Bd$1,E1="onMouseLeave",$1="onMouseEnter",y1="mouse",(e1==="pointerout"||e1==="pointerover")&&(g1=Td$1,E1="onPointerLeave",$1="onPointerEnter",y1="pointer"),v1=h1==null?d1:ue$2(h1),_1=f1==null?d1:ue$2(f1),d1=new g1(E1,y1+"leave",h1,t1,l1),d1.target=v1,d1.relatedTarget=_1,E1=null,Wc$2(l1)===s1&&(g1=new g1($1,y1+"enter",f1,t1,l1),g1.target=_1,g1.relatedTarget=v1,E1=g1),v1=E1,h1&&f1)t:{for(g1=h1,$1=f1,y1=0,_1=g1;_1;_1=vf$1(_1))y1++;for(_1=0,E1=$1;E1;E1=vf$1(E1))_1++;for(;0<y1-_1;)g1=vf$1(g1),y1--;for(;0<_1-y1;)$1=vf$1($1),_1--;for(;y1--;){if(g1===$1||$1!==null&&g1===$1.alternate)break t;g1=vf$1(g1),$1=vf$1($1)}g1=null}else g1=null;h1!==null&&wf$1(c1,d1,h1,g1,!1),f1!==null&&v1!==null&&wf$1(c1,v1,f1,g1,!0)}}e:{if(d1=s1?ue$2(s1):window,h1=d1.nodeName&&d1.nodeName.toLowerCase(),h1==="select"||h1==="input"&&d1.type==="file")var T1=ve$3;else if(me$3(d1))if(we$4)T1=Fe$2;else{T1=De$4;var P1=Ce$2}else(h1=d1.nodeName)&&h1.toLowerCase()==="input"&&(d1.type==="checkbox"||d1.type==="radio")&&(T1=Ee$3);if(T1&&(T1=T1(e1,s1))){ne$2(c1,T1,t1,l1);break e}P1&&P1(e1,d1,s1),e1==="focusout"&&(P1=d1._wrapperState)&&P1.controlled&&d1.type==="number"&&cb$1(d1,"number",d1.value)}switch(P1=s1?ue$2(s1):window,e1){case"focusin":(me$3(P1)||P1.contentEditable==="true")&&(Qe$2=P1,Re$2=s1,Se$2=null);break;case"focusout":Se$2=Re$2=Qe$2=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue$3(c1,t1,l1);break;case"selectionchange":if(Pe$3)break;case"keydown":case"keyup":Ue$3(c1,t1,l1)}var k1;if(ae$2)e:{switch(e1){case"compositionstart":var N1="onCompositionStart";break e;case"compositionend":N1="onCompositionEnd";break e;case"compositionupdate":N1="onCompositionUpdate";break e}N1=void 0}else ie$1?ge$2(e1,t1)&&(N1="onCompositionEnd"):e1==="keydown"&&t1.keyCode===229&&(N1="onCompositionStart");N1&&(de$2&&t1.locale!=="ko"&&(ie$1||N1!=="onCompositionStart"?N1==="onCompositionEnd"&&ie$1&&(k1=nd$2()):(kd$2=l1,ld$2="value"in kd$2?kd$2.value:kd$2.textContent,ie$1=!0)),P1=oe$2(s1,N1),0<P1.length&&(N1=new Ld$2(N1,e1,null,t1,l1),c1.push({event:N1,listeners:P1}),k1?N1.data=k1:(k1=he$2(t1),k1!==null&&(N1.data=k1)))),(k1=ce$2?je$1(e1,t1):ke$2(e1,t1))&&(s1=oe$2(s1,"onBeforeInput"),0<s1.length&&(l1=new Ld$2("onBeforeInput","beforeinput",null,t1,l1),c1.push({event:l1,listeners:s1}),l1.data=k1))}se$1(c1,_g)})}function tf$2(e1,_g,t1){return{instance:e1,listener:_g,currentTarget:t1}}function oe$2(e1,_g){for(var t1=_g+"Capture",r1=[];e1!==null;){var n1=e1,i1=n1.stateNode;n1.tag===5&&i1!==null&&(n1=i1,i1=Kb$1(e1,t1),i1!=null&&r1.unshift(tf$2(e1,i1,n1)),i1=Kb$1(e1,_g),i1!=null&&r1.push(tf$2(e1,i1,n1))),e1=e1.return}return r1}function vf$1(e1){if(e1===null)return null;do e1=e1.return;while(e1&&e1.tag!==5);return e1||null}function wf$1(e1,_g,t1,r1,n1){for(var i1=_g._reactName,o1=[];t1!==null&&t1!==r1;){var a1=t1,u1=a1.alternate,s1=a1.stateNode;if(u1!==null&&u1===r1)break;a1.tag===5&&s1!==null&&(a1=s1,n1?(u1=Kb$1(t1,i1),u1!=null&&o1.unshift(tf$2(t1,u1,a1))):n1||(u1=Kb$1(t1,i1),u1!=null&&o1.push(tf$2(t1,u1,a1)))),t1=t1.return}o1.length!==0&&e1.push({event:_g,listeners:o1})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(e1){return(typeof e1=="string"?e1:""+e1).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(e1,_g,t1){if(_g=zf$1(_g),zf$1(e1)!==_g&&t1)throw Error(p$3(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(e1,_g){return e1==="textarea"||e1==="noscript"||typeof _g.children=="string"||typeof _g.children=="number"||typeof _g.dangerouslySetInnerHTML=="object"&&_g.dangerouslySetInnerHTML!==null&&_g.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(e1){return Hf$1.resolve(null).then(e1).catch(If$1)}:Ff$1;function If$1(e1){setTimeout(function(){throw e1})}function Kf$1(e1,_g){var t1=_g,r1=0;do{var n1=t1.nextSibling;if(e1.removeChild(t1),n1&&n1.nodeType===8)if(t1=n1.data,t1==="/$"){if(r1===0){e1.removeChild(n1),bd$1(_g);return}r1--}else t1!=="$"&&t1!=="$?"&&t1!=="$!"||r1++;t1=n1}while(t1);bd$1(_g)}function Lf$1(e1){for(;e1!=null;e1=e1.nextSibling){var _g=e1.nodeType;if(_g===1||_g===3)break;if(_g===8){if(_g=e1.data,_g==="$"||_g==="$!"||_g==="$?")break;if(_g==="/$")return null}}return e1}function Mf$1(e1){e1=e1.previousSibling;for(var _g=0;e1;){if(e1.nodeType===8){var t1=e1.data;if(t1==="$"||t1==="$!"||t1==="$?"){if(_g===0)return e1;_g--}else t1==="/$"&&_g++}e1=e1.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$2="__reactContainer$"+Nf$1,of$2="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$2(e1){var _g=e1[Of$1];if(_g)return _g;for(var t1=e1.parentNode;t1;){if(_g=t1[uf$2]||t1[Of$1]){if(t1=_g.alternate,_g.child!==null||t1!==null&&t1.child!==null)for(e1=Mf$1(e1);e1!==null;){if(t1=e1[Of$1])return t1;e1=Mf$1(e1)}return _g}e1=t1,t1=e1.parentNode}return null}function Cb$1(e1){return e1=e1[Of$1]||e1[uf$2],!e1||e1.tag!==5&&e1.tag!==6&&e1.tag!==13&&e1.tag!==3?null:e1}function ue$2(e1){if(e1.tag===5||e1.tag===6)return e1.stateNode;throw Error(p$3(33))}function Db$1(e1){return e1[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(e1){return{current:e1}}function E$2(e1){0>Tf$1||(e1.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$3(e1,_g){Tf$1++,Sf$1[Tf$1]=e1.current,e1.current=_g}var Vf$1={},H$3=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(e1,_g){var t1=e1.type.contextTypes;if(!t1)return Vf$1;var r1=e1.stateNode;if(r1&&r1.__reactInternalMemoizedUnmaskedChildContext===_g)return r1.__reactInternalMemoizedMaskedChildContext;var n1={},i1;for(i1 in t1)n1[i1]=_g[i1];return r1&&(e1=e1.stateNode,e1.__reactInternalMemoizedUnmaskedChildContext=_g,e1.__reactInternalMemoizedMaskedChildContext=n1),n1}function Zf$1(e1){return e1=e1.childContextTypes,e1!=null}function $f$1(){E$2(Wf$1),E$2(H$3)}function ag(e1,_g,t1){if(H$3.current!==Vf$1)throw Error(p$3(168));G$3(H$3,_g),G$3(Wf$1,t1)}function bg$1(e1,_g,t1){var r1=e1.stateNode;if(_g=_g.childContextTypes,typeof r1.getChildContext!="function")return t1;r1=r1.getChildContext();for(var n1 in r1)if(!(n1 in _g))throw Error(p$3(108,Ra$1(e1)||"Unknown",n1));return A$1({},t1,r1)}function cg$1(e1){return e1=(e1=e1.stateNode)&&e1.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$3.current,G$3(H$3,e1),G$3(Wf$1,Wf$1.current),!0}function dg$1(e1,_g,t1){var r1=e1.stateNode;if(!r1)throw Error(p$3(169));t1?(e1=bg$1(e1,_g,Xf$1),r1.__reactInternalMemoizedMergedChildContext=e1,E$2(Wf$1),E$2(H$3),G$3(H$3,e1)):E$2(Wf$1),G$3(Wf$1,t1)}var eg=null,fg$1=!1,gg=!1;function hg$1(e1){eg===null?eg=[e1]:eg.push(e1)}function ig$1(e1){fg$1=!0,hg$1(e1)}function jg(){if(!gg&&eg!==null){gg=!0;var e1=0,_g=C$1;try{var t1=eg;for(C$1=1;e1<t1.length;e1++){var r1=t1[e1];do r1=r1(!0);while(r1!==null)}eg=null,fg$1=!1}catch(n1){throw eg!==null&&(eg=eg.slice(e1+1)),ac$2(fc$2,jg),n1}finally{C$1=_g,gg=!1}}return null}var kg=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg=null,rg$1=1,sg$1="";function tg$1(e1,_g){kg[lg$1++]=ng$1,kg[lg$1++]=mg$1,mg$1=e1,ng$1=_g}function ug$1(e1,_g,t1){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,qg=e1;var r1=rg$1;e1=sg$1;var n1=32-oc$2(r1)-1;r1&=~(1<<n1),t1+=1;var i1=32-oc$2(_g)+n1;if(30<i1){var o1=n1-n1%5;i1=(r1&(1<<o1)-1).toString(32),r1>>=o1,n1-=o1,rg$1=1<<32-oc$2(_g)+n1|t1<<n1|r1,sg$1=i1+e1}else rg$1=1<<i1|t1<<n1|r1,sg$1=e1}function vg$1(e1){e1.return!==null&&(tg$1(e1,1),ug$1(e1,1,0))}function wg$1(e1){for(;e1===mg$1;)mg$1=kg[--lg$1],kg[lg$1]=null,ng$1=kg[--lg$1],kg[lg$1]=null;for(;e1===qg;)qg=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg=null,I$1=!1,zg=null;function Ag(e1,_g){var t1=Bg(5,null,null,0);t1.elementType="DELETED",t1.stateNode=_g,t1.return=e1,_g=e1.deletions,_g===null?(e1.deletions=[t1],e1.flags|=16):_g.push(t1)}function Cg(e1,_g){switch(e1.tag){case 5:var t1=e1.type;return _g=_g.nodeType!==1||t1.toLowerCase()!==_g.nodeName.toLowerCase()?null:_g,_g!==null?(e1.stateNode=_g,xg$1=e1,yg=Lf$1(_g.firstChild),!0):!1;case 6:return _g=e1.pendingProps===""||_g.nodeType!==3?null:_g,_g!==null?(e1.stateNode=_g,xg$1=e1,yg=null,!0):!1;case 13:return _g=_g.nodeType!==8?null:_g,_g!==null?(t1=qg!==null?{id:rg$1,overflow:sg$1}:null,e1.memoizedState={dehydrated:_g,treeContext:t1,retryLane:1073741824},t1=Bg(18,null,null,0),t1.stateNode=_g,t1.return=e1,e1.child=t1,xg$1=e1,yg=null,!0):!1;default:return!1}}function Dg(e1){return(e1.mode&1)!==0&&(e1.flags&128)===0}function Eg(e1){if(I$1){var _g=yg;if(_g){var t1=_g;if(!Cg(e1,_g)){if(Dg(e1))throw Error(p$3(418));_g=Lf$1(t1.nextSibling);var r1=xg$1;_g&&Cg(e1,_g)?Ag(r1,t1):(e1.flags=e1.flags&-4097|2,I$1=!1,xg$1=e1)}}else{if(Dg(e1))throw Error(p$3(418));e1.flags=e1.flags&-4097|2,I$1=!1,xg$1=e1}}}function Fg(e1){for(e1=e1.return;e1!==null&&e1.tag!==5&&e1.tag!==3&&e1.tag!==13;)e1=e1.return;xg$1=e1}function Gg(e1){if(e1!==xg$1)return!1;if(!I$1)return Fg(e1),I$1=!0,!1;var _g;if((_g=e1.tag!==3)&&!(_g=e1.tag!==5)&&(_g=e1.type,_g=_g!=="head"&&_g!=="body"&&!Ef$1(e1.type,e1.memoizedProps)),_g&&(_g=yg)){if(Dg(e1))throw Hg(),Error(p$3(418));for(;_g;)Ag(e1,_g),_g=Lf$1(_g.nextSibling)}if(Fg(e1),e1.tag===13){if(e1=e1.memoizedState,e1=e1!==null?e1.dehydrated:null,!e1)throw Error(p$3(317));e:{for(e1=e1.nextSibling,_g=0;e1;){if(e1.nodeType===8){var t1=e1.data;if(t1==="/$"){if(_g===0){yg=Lf$1(e1.nextSibling);break e}_g--}else t1!=="$"&&t1!=="$!"&&t1!=="$?"||_g++}e1=e1.nextSibling}yg=null}}else yg=xg$1?Lf$1(e1.stateNode.nextSibling):null;return!0}function Hg(){for(var e1=yg;e1;)e1=Lf$1(e1.nextSibling)}function Ig(){yg=xg$1=null,I$1=!1}function Jg(e1){zg===null?zg=[e1]:zg.push(e1)}var Kg=ua$2.ReactCurrentBatchConfig;function Lg(e1,_g,t1){if(e1=t1.ref,e1!==null&&typeof e1!="function"&&typeof e1!="object"){if(t1._owner){if(t1=t1._owner,t1){if(t1.tag!==1)throw Error(p$3(309));var r1=t1.stateNode}if(!r1)throw Error(p$3(147,e1));var n1=r1,i1=""+e1;return _g!==null&&_g.ref!==null&&typeof _g.ref=="function"&&_g.ref._stringRef===i1?_g.ref:(_g=function(o1){var a1=n1.refs;o1===null?delete a1[i1]:a1[i1]=o1},_g._stringRef=i1,_g)}if(typeof e1!="string")throw Error(p$3(284));if(!t1._owner)throw Error(p$3(290,e1))}return e1}function Mg(e1,_g){throw e1=Object.prototype.toString.call(_g),Error(p$3(31,e1==="[object Object]"?"object with keys {"+Object.keys(_g).join(", ")+"}":e1))}function Ng(e1){var _g=e1._init;return _g(e1._payload)}function Og(e1){function _g($1,y1){if(e1){var _1=$1.deletions;_1===null?($1.deletions=[y1],$1.flags|=16):_1.push(y1)}}function t1($1,y1){if(!e1)return null;for(;y1!==null;)_g($1,y1),y1=y1.sibling;return null}function r1($1,y1){for($1=new Map;y1!==null;)y1.key!==null?$1.set(y1.key,y1):$1.set(y1.index,y1),y1=y1.sibling;return $1}function n1($1,y1){return $1=Pg($1,y1),$1.index=0,$1.sibling=null,$1}function i1($1,y1,_1){return $1.index=_1,e1?(_1=$1.alternate,_1!==null?(_1=_1.index,_1<y1?($1.flags|=2,y1):_1):($1.flags|=2,y1)):($1.flags|=1048576,y1)}function o1($1){return e1&&$1.alternate===null&&($1.flags|=2),$1}function a1($1,y1,_1,E1){return y1===null||y1.tag!==6?(y1=Qg(_1,$1.mode,E1),y1.return=$1,y1):(y1=n1(y1,_1),y1.return=$1,y1)}function u1($1,y1,_1,E1){var T1=_1.type;return T1===ya$1?l1($1,y1,_1.props.children,E1,_1.key):y1!==null&&(y1.elementType===T1||typeof T1=="object"&&T1!==null&&T1.$$typeof===Ha$3&&Ng(T1)===y1.type)?(E1=n1(y1,_1.props),E1.ref=Lg($1,y1,_1),E1.return=$1,E1):(E1=Rg(_1.type,_1.key,_1.props,null,$1.mode,E1),E1.ref=Lg($1,y1,_1),E1.return=$1,E1)}function s1($1,y1,_1,E1){return y1===null||y1.tag!==4||y1.stateNode.containerInfo!==_1.containerInfo||y1.stateNode.implementation!==_1.implementation?(y1=Sg(_1,$1.mode,E1),y1.return=$1,y1):(y1=n1(y1,_1.children||[]),y1.return=$1,y1)}function l1($1,y1,_1,E1,T1){return y1===null||y1.tag!==7?(y1=Tg$1(_1,$1.mode,E1,T1),y1.return=$1,y1):(y1=n1(y1,_1),y1.return=$1,y1)}function c1($1,y1,_1){if(typeof y1=="string"&&y1!==""||typeof y1=="number")return y1=Qg(""+y1,$1.mode,_1),y1.return=$1,y1;if(typeof y1=="object"&&y1!==null){switch(y1.$$typeof){case va$1:return _1=Rg(y1.type,y1.key,y1.props,null,$1.mode,_1),_1.ref=Lg($1,null,y1),_1.return=$1,_1;case wa$1:return y1=Sg(y1,$1.mode,_1),y1.return=$1,y1;case Ha$3:var E1=y1._init;return c1($1,E1(y1._payload),_1)}if(eb$1(y1)||Ka$3(y1))return y1=Tg$1(y1,$1.mode,_1,null),y1.return=$1,y1;Mg($1,y1)}return null}function d1($1,y1,_1,E1){var T1=y1!==null?y1.key:null;if(typeof _1=="string"&&_1!==""||typeof _1=="number")return T1!==null?null:a1($1,y1,""+_1,E1);if(typeof _1=="object"&&_1!==null){switch(_1.$$typeof){case va$1:return _1.key===T1?u1($1,y1,_1,E1):null;case wa$1:return _1.key===T1?s1($1,y1,_1,E1):null;case Ha$3:return T1=_1._init,d1($1,y1,T1(_1._payload),E1)}if(eb$1(_1)||Ka$3(_1))return T1!==null?null:l1($1,y1,_1,E1,null);Mg($1,_1)}return null}function h1($1,y1,_1,E1,T1){if(typeof E1=="string"&&E1!==""||typeof E1=="number")return $1=$1.get(_1)||null,a1(y1,$1,""+E1,T1);if(typeof E1=="object"&&E1!==null){switch(E1.$$typeof){case va$1:return $1=$1.get(E1.key===null?_1:E1.key)||null,u1(y1,$1,E1,T1);case wa$1:return $1=$1.get(E1.key===null?_1:E1.key)||null,s1(y1,$1,E1,T1);case Ha$3:var P1=E1._init;return h1($1,y1,_1,P1(E1._payload),T1)}if(eb$1(E1)||Ka$3(E1))return $1=$1.get(_1)||null,l1(y1,$1,E1,T1,null);Mg(y1,E1)}return null}function f1($1,y1,_1,E1){for(var T1=null,P1=null,k1=y1,N1=y1=0,W1=null;k1!==null&&N1<_1.length;N1++){k1.index>N1?(W1=k1,k1=null):W1=k1.sibling;var H1=d1($1,k1,_1[N1],E1);if(H1===null){k1===null&&(k1=W1);break}e1&&k1&&H1.alternate===null&&_g($1,k1),y1=i1(H1,y1,N1),P1===null?T1=H1:P1.sibling=H1,P1=H1,k1=W1}if(N1===_1.length)return t1($1,k1),I$1&&tg$1($1,N1),T1;if(k1===null){for(;N1<_1.length;N1++)k1=c1($1,_1[N1],E1),k1!==null&&(y1=i1(k1,y1,N1),P1===null?T1=k1:P1.sibling=k1,P1=k1);return I$1&&tg$1($1,N1),T1}for(k1=r1($1,k1);N1<_1.length;N1++)W1=h1(k1,$1,N1,_1[N1],E1),W1!==null&&(e1&&W1.alternate!==null&&k1.delete(W1.key===null?N1:W1.key),y1=i1(W1,y1,N1),P1===null?T1=W1:P1.sibling=W1,P1=W1);return e1&&k1.forEach(function(ty){return _g($1,ty)}),I$1&&tg$1($1,N1),T1}function g1($1,y1,_1,E1){var T1=Ka$3(_1);if(typeof T1!="function")throw Error(p$3(150));if(_1=T1.call(_1),_1==null)throw Error(p$3(151));for(var P1=T1=null,k1=y1,N1=y1=0,W1=null,H1=_1.next();k1!==null&&!H1.done;N1++,H1=_1.next()){k1.index>N1?(W1=k1,k1=null):W1=k1.sibling;var ty=d1($1,k1,H1.value,E1);if(ty===null){k1===null&&(k1=W1);break}e1&&k1&&ty.alternate===null&&_g($1,k1),y1=i1(ty,y1,N1),P1===null?T1=ty:P1.sibling=ty,P1=ty,k1=W1}if(H1.done)return t1($1,k1),I$1&&tg$1($1,N1),T1;if(k1===null){for(;!H1.done;N1++,H1=_1.next())H1=c1($1,H1.value,E1),H1!==null&&(y1=i1(H1,y1,N1),P1===null?T1=H1:P1.sibling=H1,P1=H1);return I$1&&tg$1($1,N1),T1}for(k1=r1($1,k1);!H1.done;N1++,H1=_1.next())H1=h1(k1,$1,N1,H1.value,E1),H1!==null&&(e1&&H1.alternate!==null&&k1.delete(H1.key===null?N1:H1.key),y1=i1(H1,y1,N1),P1===null?T1=H1:P1.sibling=H1,P1=H1);return e1&&k1.forEach(function(ey){return _g($1,ey)}),I$1&&tg$1($1,N1),T1}function v1($1,y1,_1,E1){if(typeof _1=="object"&&_1!==null&&_1.type===ya$1&&_1.key===null&&(_1=_1.props.children),typeof _1=="object"&&_1!==null){switch(_1.$$typeof){case va$1:e:{for(var T1=_1.key,P1=y1;P1!==null;){if(P1.key===T1){if(T1=_1.type,T1===ya$1){if(P1.tag===7){t1($1,P1.sibling),y1=n1(P1,_1.props.children),y1.return=$1,$1=y1;break e}}else if(P1.elementType===T1||typeof T1=="object"&&T1!==null&&T1.$$typeof===Ha$3&&Ng(T1)===P1.type){t1($1,P1.sibling),y1=n1(P1,_1.props),y1.ref=Lg($1,P1,_1),y1.return=$1,$1=y1;break e}t1($1,P1);break}else _g($1,P1);P1=P1.sibling}_1.type===ya$1?(y1=Tg$1(_1.props.children,$1.mode,E1,_1.key),y1.return=$1,$1=y1):(E1=Rg(_1.type,_1.key,_1.props,null,$1.mode,E1),E1.ref=Lg($1,y1,_1),E1.return=$1,$1=E1)}return o1($1);case wa$1:e:{for(P1=_1.key;y1!==null;){if(y1.key===P1)if(y1.tag===4&&y1.stateNode.containerInfo===_1.containerInfo&&y1.stateNode.implementation===_1.implementation){t1($1,y1.sibling),y1=n1(y1,_1.children||[]),y1.return=$1,$1=y1;break e}else{t1($1,y1);break}else _g($1,y1);y1=y1.sibling}y1=Sg(_1,$1.mode,E1),y1.return=$1,$1=y1}return o1($1);case Ha$3:return P1=_1._init,v1($1,y1,P1(_1._payload),E1)}if(eb$1(_1))return f1($1,y1,_1,E1);if(Ka$3(_1))return g1($1,y1,_1,E1);Mg($1,_1)}return typeof _1=="string"&&_1!==""||typeof _1=="number"?(_1=""+_1,y1!==null&&y1.tag===6?(t1($1,y1.sibling),y1=n1(y1,_1),y1.return=$1,$1=y1):(t1($1,y1),y1=Qg(_1,$1.mode,E1),y1.return=$1,$1=y1),o1($1)):t1($1,y1)}return v1}var Ug=Og(!0),Vg=Og(!1),Wg=Uf$1(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah$1(e1){var _g=Wg.current;E$2(Wg),e1._currentValue=_g}function bh$1(e1,_g,t1){for(;e1!==null;){var r1=e1.alternate;if((e1.childLanes&_g)!==_g?(e1.childLanes|=_g,r1!==null&&(r1.childLanes|=_g)):r1!==null&&(r1.childLanes&_g)!==_g&&(r1.childLanes|=_g),e1===t1)break;e1=e1.return}}function ch$2(e1,_g){Xg=e1,Zg=Yg=null,e1=e1.dependencies,e1!==null&&e1.firstContext!==null&&(e1.lanes&_g&&(dh$2=!0),e1.firstContext=null)}function eh$2(e1){var _g=e1._currentValue;if(Zg!==e1)if(e1={context:e1,memoizedValue:_g,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=e1,Xg.dependencies={lanes:0,firstContext:e1}}else Yg=Yg.next=e1;return _g}var fh$1=null;function gh$2(e1){fh$1===null?fh$1=[e1]:fh$1.push(e1)}function hh$2(e1,_g,t1,r1){var n1=_g.interleaved;return n1===null?(t1.next=t1,gh$2(_g)):(t1.next=n1.next,n1.next=t1),_g.interleaved=t1,ih$2(e1,r1)}function ih$2(e1,_g){e1.lanes|=_g;var t1=e1.alternate;for(t1!==null&&(t1.lanes|=_g),t1=e1,e1=e1.return;e1!==null;)e1.childLanes|=_g,t1=e1.alternate,t1!==null&&(t1.childLanes|=_g),t1=e1,e1=e1.return;return t1.tag===3?t1.stateNode:null}var jh$1=!1;function kh$1(e1){e1.updateQueue={baseState:e1.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh$2(e1,_g){e1=e1.updateQueue,_g.updateQueue===e1&&(_g.updateQueue={baseState:e1.baseState,firstBaseUpdate:e1.firstBaseUpdate,lastBaseUpdate:e1.lastBaseUpdate,shared:e1.shared,effects:e1.effects})}function mh$2(e1,_g){return{eventTime:e1,lane:_g,tag:0,payload:null,callback:null,next:null}}function nh$2(e1,_g,t1){var r1=e1.updateQueue;if(r1===null)return null;if(r1=r1.shared,K$3&2){var n1=r1.pending;return n1===null?_g.next=_g:(_g.next=n1.next,n1.next=_g),r1.pending=_g,ih$2(e1,t1)}return n1=r1.interleaved,n1===null?(_g.next=_g,gh$2(r1)):(_g.next=n1.next,n1.next=_g),r1.interleaved=_g,ih$2(e1,t1)}function oh$2(e1,_g,t1){if(_g=_g.updateQueue,_g!==null&&(_g=_g.shared,(t1&4194240)!==0)){var r1=_g.lanes;r1&=e1.pendingLanes,t1|=r1,_g.lanes=t1,Cc$2(e1,t1)}}function ph$2(e1,_g){var t1=e1.updateQueue,r1=e1.alternate;if(r1!==null&&(r1=r1.updateQueue,t1===r1)){var n1=null,i1=null;if(t1=t1.firstBaseUpdate,t1!==null){do{var o1={eventTime:t1.eventTime,lane:t1.lane,tag:t1.tag,payload:t1.payload,callback:t1.callback,next:null};i1===null?n1=i1=o1:i1=i1.next=o1,t1=t1.next}while(t1!==null);i1===null?n1=i1=_g:i1=i1.next=_g}else n1=i1=_g;t1={baseState:r1.baseState,firstBaseUpdate:n1,lastBaseUpdate:i1,shared:r1.shared,effects:r1.effects},e1.updateQueue=t1;return}e1=t1.lastBaseUpdate,e1===null?t1.firstBaseUpdate=_g:e1.next=_g,t1.lastBaseUpdate=_g}function qh$1(e1,_g,t1,r1){var n1=e1.updateQueue;jh$1=!1;var i1=n1.firstBaseUpdate,o1=n1.lastBaseUpdate,a1=n1.shared.pending;if(a1!==null){n1.shared.pending=null;var u1=a1,s1=u1.next;u1.next=null,o1===null?i1=s1:o1.next=s1,o1=u1;var l1=e1.alternate;l1!==null&&(l1=l1.updateQueue,a1=l1.lastBaseUpdate,a1!==o1&&(a1===null?l1.firstBaseUpdate=s1:a1.next=s1,l1.lastBaseUpdate=u1))}if(i1!==null){var c1=n1.baseState;o1=0,l1=s1=u1=null,a1=i1;do{var d1=a1.lane,h1=a1.eventTime;if((r1&d1)===d1){l1!==null&&(l1=l1.next={eventTime:h1,lane:0,tag:a1.tag,payload:a1.payload,callback:a1.callback,next:null});e:{var f1=e1,g1=a1;switch(d1=_g,h1=t1,g1.tag){case 1:if(f1=g1.payload,typeof f1=="function"){c1=f1.call(h1,c1,d1);break e}c1=f1;break e;case 3:f1.flags=f1.flags&-65537|128;case 0:if(f1=g1.payload,d1=typeof f1=="function"?f1.call(h1,c1,d1):f1,d1==null)break e;c1=A$1({},c1,d1);break e;case 2:jh$1=!0}}a1.callback!==null&&a1.lane!==0&&(e1.flags|=64,d1=n1.effects,d1===null?n1.effects=[a1]:d1.push(a1))}else h1={eventTime:h1,lane:d1,tag:a1.tag,payload:a1.payload,callback:a1.callback,next:null},l1===null?(s1=l1=h1,u1=c1):l1=l1.next=h1,o1|=d1;if(a1=a1.next,a1===null){if(a1=n1.shared.pending,a1===null)break;d1=a1,a1=d1.next,d1.next=null,n1.lastBaseUpdate=d1,n1.shared.pending=null}}while(!0);if(l1===null&&(u1=c1),n1.baseState=u1,n1.firstBaseUpdate=s1,n1.lastBaseUpdate=l1,_g=n1.shared.interleaved,_g!==null){n1=_g;do o1|=n1.lane,n1=n1.next;while(n1!==_g)}else i1===null&&(n1.shared.lanes=0);rh$2|=o1,e1.lanes=o1,e1.memoizedState=c1}}function sh$2(e1,_g,t1){if(e1=_g.effects,_g.effects=null,e1!==null)for(_g=0;_g<e1.length;_g++){var r1=e1[_g],n1=r1.callback;if(n1!==null){if(r1.callback=null,r1=t1,typeof n1!="function")throw Error(p$3(191,n1));n1.call(r1)}}}var th$2={},uh$2=Uf$1(th$2),vh$2=Uf$1(th$2),wh$1=Uf$1(th$2);function xh$1(e1){if(e1===th$2)throw Error(p$3(174));return e1}function yh$1(e1,_g){switch(G$3(wh$1,_g),G$3(vh$2,e1),G$3(uh$2,th$2),e1=_g.nodeType,e1){case 9:case 11:_g=(_g=_g.documentElement)?_g.namespaceURI:lb$1(null,"");break;default:e1=e1===8?_g.parentNode:_g,_g=e1.namespaceURI||null,e1=e1.tagName,_g=lb$1(_g,e1)}E$2(uh$2),G$3(uh$2,_g)}function zh$1(){E$2(uh$2),E$2(vh$2),E$2(wh$1)}function Ah$1(e1){xh$1(wh$1.current);var _g=xh$1(uh$2.current),t1=lb$1(_g,e1.type);_g!==t1&&(G$3(vh$2,e1),G$3(uh$2,t1))}function Bh$1(e1){vh$2.current===e1&&(E$2(uh$2),E$2(vh$2))}var L$3=Uf$1(0);function Ch$1(e1){for(var _g=e1;_g!==null;){if(_g.tag===13){var t1=_g.memoizedState;if(t1!==null&&(t1=t1.dehydrated,t1===null||t1.data==="$?"||t1.data==="$!"))return _g}else if(_g.tag===19&&_g.memoizedProps.revealOrder!==void 0){if(_g.flags&128)return _g}else if(_g.child!==null){_g.child.return=_g,_g=_g.child;continue}if(_g===e1)break;for(;_g.sibling===null;){if(_g.return===null||_g.return===e1)return null;_g=_g.return}_g.sibling.return=_g.return,_g=_g.sibling}return null}var Dh$1=[];function Eh$1(){for(var e1=0;e1<Dh$1.length;e1++)Dh$1[e1]._workInProgressVersionPrimary=null;Dh$1.length=0}var Fh$1=ua$2.ReactCurrentDispatcher,Gh$1=ua$2.ReactCurrentBatchConfig,Hh$1=0,M$4=null,N$3=null,O$2=null,Ih=!1,Jh$1=!1,Kh$1=0,Lh$1=0;function P$2(){throw Error(p$3(321))}function Mh$1(e1,_g){if(_g===null)return!1;for(var t1=0;t1<_g.length&&t1<e1.length;t1++)if(!He$2(e1[t1],_g[t1]))return!1;return!0}function Nh$1(e1,_g,t1,r1,n1,i1){if(Hh$1=i1,M$4=_g,_g.memoizedState=null,_g.updateQueue=null,_g.lanes=0,Fh$1.current=e1===null||e1.memoizedState===null?Oh$1:Ph$1,e1=t1(r1,n1),Jh$1){i1=0;do{if(Jh$1=!1,Kh$1=0,25<=i1)throw Error(p$3(301));i1+=1,O$2=N$3=null,_g.updateQueue=null,Fh$1.current=Qh$1,e1=t1(r1,n1)}while(Jh$1)}if(Fh$1.current=Rh$1,_g=N$3!==null&&N$3.next!==null,Hh$1=0,O$2=N$3=M$4=null,Ih=!1,_g)throw Error(p$3(300));return e1}function Sh$1(){var e1=Kh$1!==0;return Kh$1=0,e1}function Th$1(){var e1={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$2===null?M$4.memoizedState=O$2=e1:O$2=O$2.next=e1,O$2}function Uh$1(){if(N$3===null){var e1=M$4.alternate;e1=e1!==null?e1.memoizedState:null}else e1=N$3.next;var _g=O$2===null?M$4.memoizedState:O$2.next;if(_g!==null)O$2=_g,N$3=e1;else{if(e1===null)throw Error(p$3(310));N$3=e1,e1={memoizedState:N$3.memoizedState,baseState:N$3.baseState,baseQueue:N$3.baseQueue,queue:N$3.queue,next:null},O$2===null?M$4.memoizedState=O$2=e1:O$2=O$2.next=e1}return O$2}function Vh$1(e1,_g){return typeof _g=="function"?_g(e1):_g}function Wh$1(e1){var _g=Uh$1(),t1=_g.queue;if(t1===null)throw Error(p$3(311));t1.lastRenderedReducer=e1;var r1=N$3,n1=r1.baseQueue,i1=t1.pending;if(i1!==null){if(n1!==null){var o1=n1.next;n1.next=i1.next,i1.next=o1}r1.baseQueue=n1=i1,t1.pending=null}if(n1!==null){i1=n1.next,r1=r1.baseState;var a1=o1=null,u1=null,s1=i1;do{var l1=s1.lane;if((Hh$1&l1)===l1)u1!==null&&(u1=u1.next={lane:0,action:s1.action,hasEagerState:s1.hasEagerState,eagerState:s1.eagerState,next:null}),r1=s1.hasEagerState?s1.eagerState:e1(r1,s1.action);else{var c1={lane:l1,action:s1.action,hasEagerState:s1.hasEagerState,eagerState:s1.eagerState,next:null};u1===null?(a1=u1=c1,o1=r1):u1=u1.next=c1,M$4.lanes|=l1,rh$2|=l1}s1=s1.next}while(s1!==null&&s1!==i1);u1===null?o1=r1:u1.next=a1,He$2(r1,_g.memoizedState)||(dh$2=!0),_g.memoizedState=r1,_g.baseState=o1,_g.baseQueue=u1,t1.lastRenderedState=r1}if(e1=t1.interleaved,e1!==null){n1=e1;do i1=n1.lane,M$4.lanes|=i1,rh$2|=i1,n1=n1.next;while(n1!==e1)}else n1===null&&(t1.lanes=0);return[_g.memoizedState,t1.dispatch]}function Xh$1(e1){var _g=Uh$1(),t1=_g.queue;if(t1===null)throw Error(p$3(311));t1.lastRenderedReducer=e1;var r1=t1.dispatch,n1=t1.pending,i1=_g.memoizedState;if(n1!==null){t1.pending=null;var o1=n1=n1.next;do i1=e1(i1,o1.action),o1=o1.next;while(o1!==n1);He$2(i1,_g.memoizedState)||(dh$2=!0),_g.memoizedState=i1,_g.baseQueue===null&&(_g.baseState=i1),t1.lastRenderedState=i1}return[i1,r1]}function Yh$1(){}function Zh$1(e1,_g){var t1=M$4,r1=Uh$1(),n1=_g(),i1=!He$2(r1.memoizedState,n1);if(i1&&(r1.memoizedState=n1,dh$2=!0),r1=r1.queue,$h$1(ai$2.bind(null,t1,r1,e1),[e1]),r1.getSnapshot!==_g||i1||O$2!==null&&O$2.memoizedState.tag&1){if(t1.flags|=2048,bi$2(9,ci$2.bind(null,t1,r1,n1,_g),void 0,null),Q$4===null)throw Error(p$3(349));Hh$1&30||di$3(t1,_g,n1)}return n1}function di$3(e1,_g,t1){e1.flags|=16384,e1={getSnapshot:_g,value:t1},_g=M$4.updateQueue,_g===null?(_g={lastEffect:null,stores:null},M$4.updateQueue=_g,_g.stores=[e1]):(t1=_g.stores,t1===null?_g.stores=[e1]:t1.push(e1))}function ci$2(e1,_g,t1,r1){_g.value=t1,_g.getSnapshot=r1,ei$2(_g)&&fi$3(e1)}function ai$2(e1,_g,t1){return t1(function(){ei$2(_g)&&fi$3(e1)})}function ei$2(e1){var _g=e1.getSnapshot;e1=e1.value;try{var t1=_g();return!He$2(e1,t1)}catch{return!0}}function fi$3(e1){var _g=ih$2(e1,1);_g!==null&&gi$2(_g,e1,1,-1)}function hi$3(e1){var _g=Th$1();return typeof e1=="function"&&(e1=e1()),_g.memoizedState=_g.baseState=e1,e1={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh$1,lastRenderedState:e1},_g.queue=e1,e1=e1.dispatch=ii$2.bind(null,M$4,e1),[_g.memoizedState,e1]}function bi$2(e1,_g,t1,r1){return e1={tag:e1,create:_g,destroy:t1,deps:r1,next:null},_g=M$4.updateQueue,_g===null?(_g={lastEffect:null,stores:null},M$4.updateQueue=_g,_g.lastEffect=e1.next=e1):(t1=_g.lastEffect,t1===null?_g.lastEffect=e1.next=e1:(r1=t1.next,t1.next=e1,e1.next=r1,_g.lastEffect=e1)),e1}function ji$3(){return Uh$1().memoizedState}function ki$2(e1,_g,t1,r1){var n1=Th$1();M$4.flags|=e1,n1.memoizedState=bi$2(1|_g,t1,void 0,r1===void 0?null:r1)}function li$2(e1,_g,t1,r1){var n1=Uh$1();r1=r1===void 0?null:r1;var i1=void 0;if(N$3!==null){var o1=N$3.memoizedState;if(i1=o1.destroy,r1!==null&&Mh$1(r1,o1.deps)){n1.memoizedState=bi$2(_g,t1,i1,r1);return}}M$4.flags|=e1,n1.memoizedState=bi$2(1|_g,t1,i1,r1)}function mi$3(e1,_g){return ki$2(8390656,8,e1,_g)}function $h$1(e1,_g){return li$2(2048,8,e1,_g)}function ni$2(e1,_g){return li$2(4,2,e1,_g)}function oi$2(e1,_g){return li$2(4,4,e1,_g)}function pi$3(e1,_g){if(typeof _g=="function")return e1=e1(),_g(e1),function(){_g(null)};if(_g!=null)return e1=e1(),_g.current=e1,function(){_g.current=null}}function qi$3(e1,_g,t1){return t1=t1!=null?t1.concat([e1]):null,li$2(4,4,pi$3.bind(null,_g,e1),t1)}function ri$2(){}function si$3(e1,_g){var t1=Uh$1();_g=_g===void 0?null:_g;var r1=t1.memoizedState;return r1!==null&&_g!==null&&Mh$1(_g,r1[1])?r1[0]:(t1.memoizedState=[e1,_g],e1)}function ti$2(e1,_g){var t1=Uh$1();_g=_g===void 0?null:_g;var r1=t1.memoizedState;return r1!==null&&_g!==null&&Mh$1(_g,r1[1])?r1[0]:(e1=e1(),t1.memoizedState=[e1,_g],e1)}function ui$2(e1,_g,t1){return Hh$1&21?(He$2(t1,_g)||(t1=yc$2(),M$4.lanes|=t1,rh$2|=t1,e1.baseState=!0),_g):(e1.baseState&&(e1.baseState=!1,dh$2=!0),e1.memoizedState=t1)}function vi$2(e1,_g){var t1=C$1;C$1=t1!==0&&4>t1?t1:4,e1(!0);var r1=Gh$1.transition;Gh$1.transition={};try{e1(!1),_g()}finally{C$1=t1,Gh$1.transition=r1}}function wi$2(){return Uh$1().memoizedState}function xi$2(e1,_g,t1){var r1=yi$2(e1);if(t1={lane:r1,action:t1,hasEagerState:!1,eagerState:null,next:null},zi$3(e1))Ai$2(_g,t1);else if(t1=hh$2(e1,_g,t1,r1),t1!==null){var n1=R$2();gi$2(t1,e1,r1,n1),Bi$3(t1,_g,r1)}}function ii$2(e1,_g,t1){var r1=yi$2(e1),n1={lane:r1,action:t1,hasEagerState:!1,eagerState:null,next:null};if(zi$3(e1))Ai$2(_g,n1);else{var i1=e1.alternate;if(e1.lanes===0&&(i1===null||i1.lanes===0)&&(i1=_g.lastRenderedReducer,i1!==null))try{var o1=_g.lastRenderedState,a1=i1(o1,t1);if(n1.hasEagerState=!0,n1.eagerState=a1,He$2(a1,o1)){var u1=_g.interleaved;u1===null?(n1.next=n1,gh$2(_g)):(n1.next=u1.next,u1.next=n1),_g.interleaved=n1;return}}catch{}finally{}t1=hh$2(e1,_g,n1,r1),t1!==null&&(n1=R$2(),gi$2(t1,e1,r1,n1),Bi$3(t1,_g,r1))}}function zi$3(e1){var _g=e1.alternate;return e1===M$4||_g!==null&&_g===M$4}function Ai$2(e1,_g){Jh$1=Ih=!0;var t1=e1.pending;t1===null?_g.next=_g:(_g.next=t1.next,t1.next=_g),e1.pending=_g}function Bi$3(e1,_g,t1){if(t1&4194240){var r1=_g.lanes;r1&=e1.pendingLanes,t1|=r1,_g.lanes=t1,Cc$2(e1,t1)}}var Rh$1={readContext:eh$2,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh$1={readContext:eh$2,useCallback:function(e1,_g){return Th$1().memoizedState=[e1,_g===void 0?null:_g],e1},useContext:eh$2,useEffect:mi$3,useImperativeHandle:function(e1,_g,t1){return t1=t1!=null?t1.concat([e1]):null,ki$2(4194308,4,pi$3.bind(null,_g,e1),t1)},useLayoutEffect:function(e1,_g){return ki$2(4194308,4,e1,_g)},useInsertionEffect:function(e1,_g){return ki$2(4,2,e1,_g)},useMemo:function(e1,_g){var t1=Th$1();return _g=_g===void 0?null:_g,e1=e1(),t1.memoizedState=[e1,_g],e1},useReducer:function(e1,_g,t1){var r1=Th$1();return _g=t1!==void 0?t1(_g):_g,r1.memoizedState=r1.baseState=_g,e1={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e1,lastRenderedState:_g},r1.queue=e1,e1=e1.dispatch=xi$2.bind(null,M$4,e1),[r1.memoizedState,e1]},useRef:function(e1){var _g=Th$1();return e1={current:e1},_g.memoizedState=e1},useState:hi$3,useDebugValue:ri$2,useDeferredValue:function(e1){return Th$1().memoizedState=e1},useTransition:function(){var e1=hi$3(!1),_g=e1[0];return e1=vi$2.bind(null,e1[1]),Th$1().memoizedState=e1,[_g,e1]},useMutableSource:function(){},useSyncExternalStore:function(e1,_g,t1){var r1=M$4,n1=Th$1();if(I$1){if(t1===void 0)throw Error(p$3(407));t1=t1()}else{if(t1=_g(),Q$4===null)throw Error(p$3(349));Hh$1&30||di$3(r1,_g,t1)}n1.memoizedState=t1;var i1={value:t1,getSnapshot:_g};return n1.queue=i1,mi$3(ai$2.bind(null,r1,i1,e1),[e1]),r1.flags|=2048,bi$2(9,ci$2.bind(null,r1,i1,t1,_g),void 0,null),t1},useId:function(){var e1=Th$1(),_g=Q$4.identifierPrefix;if(I$1){var t1=sg$1,r1=rg$1;t1=(r1&~(1<<32-oc$2(r1)-1)).toString(32)+t1,_g=":"+_g+"R"+t1,t1=Kh$1++,0<t1&&(_g+="H"+t1.toString(32)),_g+=":"}else t1=Lh$1++,_g=":"+_g+"r"+t1.toString(32)+":";return e1.memoizedState=_g},unstable_isNewReconciler:!1},Ph$1={readContext:eh$2,useCallback:si$3,useContext:eh$2,useEffect:$h$1,useImperativeHandle:qi$3,useInsertionEffect:ni$2,useLayoutEffect:oi$2,useMemo:ti$2,useReducer:Wh$1,useRef:ji$3,useState:function(){return Wh$1(Vh$1)},useDebugValue:ri$2,useDeferredValue:function(e1){var _g=Uh$1();return ui$2(_g,N$3.memoizedState,e1)},useTransition:function(){var e1=Wh$1(Vh$1)[0],_g=Uh$1().memoizedState;return[e1,_g]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$2,unstable_isNewReconciler:!1},Qh$1={readContext:eh$2,useCallback:si$3,useContext:eh$2,useEffect:$h$1,useImperativeHandle:qi$3,useInsertionEffect:ni$2,useLayoutEffect:oi$2,useMemo:ti$2,useReducer:Xh$1,useRef:ji$3,useState:function(){return Xh$1(Vh$1)},useDebugValue:ri$2,useDeferredValue:function(e1){var _g=Uh$1();return N$3===null?_g.memoizedState=e1:ui$2(_g,N$3.memoizedState,e1)},useTransition:function(){var e1=Xh$1(Vh$1)[0],_g=Uh$1().memoizedState;return[e1,_g]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$2,unstable_isNewReconciler:!1};function Ci$2(e1,_g){if(e1&&e1.defaultProps){_g=A$1({},_g),e1=e1.defaultProps;for(var t1 in e1)_g[t1]===void 0&&(_g[t1]=e1[t1]);return _g}return _g}function Di$3(e1,_g,t1,r1){_g=e1.memoizedState,t1=t1(r1,_g),t1=t1==null?_g:A$1({},_g,t1),e1.memoizedState=t1,e1.lanes===0&&(e1.updateQueue.baseState=t1)}var Ei$2={isMounted:function(e1){return(e1=e1._reactInternals)?Vb$1(e1)===e1:!1},enqueueSetState:function(e1,_g,t1){e1=e1._reactInternals;var r1=R$2(),n1=yi$2(e1),i1=mh$2(r1,n1);i1.payload=_g,t1!=null&&(i1.callback=t1),_g=nh$2(e1,i1,n1),_g!==null&&(gi$2(_g,e1,n1,r1),oh$2(_g,e1,n1))},enqueueReplaceState:function(e1,_g,t1){e1=e1._reactInternals;var r1=R$2(),n1=yi$2(e1),i1=mh$2(r1,n1);i1.tag=1,i1.payload=_g,t1!=null&&(i1.callback=t1),_g=nh$2(e1,i1,n1),_g!==null&&(gi$2(_g,e1,n1,r1),oh$2(_g,e1,n1))},enqueueForceUpdate:function(e1,_g){e1=e1._reactInternals;var t1=R$2(),r1=yi$2(e1),n1=mh$2(t1,r1);n1.tag=2,_g!=null&&(n1.callback=_g),_g=nh$2(e1,n1,r1),_g!==null&&(gi$2(_g,e1,r1,t1),oh$2(_g,e1,r1))}};function Fi$3(e1,_g,t1,r1,n1,i1,o1){return e1=e1.stateNode,typeof e1.shouldComponentUpdate=="function"?e1.shouldComponentUpdate(r1,i1,o1):_g.prototype&&_g.prototype.isPureReactComponent?!Ie$2(t1,r1)||!Ie$2(n1,i1):!0}function Gi$3(e1,_g,t1){var r1=!1,n1=Vf$1,i1=_g.contextType;return typeof i1=="object"&&i1!==null?i1=eh$2(i1):(n1=Zf$1(_g)?Xf$1:H$3.current,r1=_g.contextTypes,i1=(r1=r1!=null)?Yf$1(e1,n1):Vf$1),_g=new _g(t1,i1),e1.memoizedState=_g.state!==null&&_g.state!==void 0?_g.state:null,_g.updater=Ei$2,e1.stateNode=_g,_g._reactInternals=e1,r1&&(e1=e1.stateNode,e1.__reactInternalMemoizedUnmaskedChildContext=n1,e1.__reactInternalMemoizedMaskedChildContext=i1),_g}function Hi$3(e1,_g,t1,r1){e1=_g.state,typeof _g.componentWillReceiveProps=="function"&&_g.componentWillReceiveProps(t1,r1),typeof _g.UNSAFE_componentWillReceiveProps=="function"&&_g.UNSAFE_componentWillReceiveProps(t1,r1),_g.state!==e1&&Ei$2.enqueueReplaceState(_g,_g.state,null)}function Ii$2(e1,_g,t1,r1){var n1=e1.stateNode;n1.props=t1,n1.state=e1.memoizedState,n1.refs={},kh$1(e1);var i1=_g.contextType;typeof i1=="object"&&i1!==null?n1.context=eh$2(i1):(i1=Zf$1(_g)?Xf$1:H$3.current,n1.context=Yf$1(e1,i1)),n1.state=e1.memoizedState,i1=_g.getDerivedStateFromProps,typeof i1=="function"&&(Di$3(e1,_g,i1,t1),n1.state=e1.memoizedState),typeof _g.getDerivedStateFromProps=="function"||typeof n1.getSnapshotBeforeUpdate=="function"||typeof n1.UNSAFE_componentWillMount!="function"&&typeof n1.componentWillMount!="function"||(_g=n1.state,typeof n1.componentWillMount=="function"&&n1.componentWillMount(),typeof n1.UNSAFE_componentWillMount=="function"&&n1.UNSAFE_componentWillMount(),_g!==n1.state&&Ei$2.enqueueReplaceState(n1,n1.state,null),qh$1(e1,t1,n1,r1),n1.state=e1.memoizedState),typeof n1.componentDidMount=="function"&&(e1.flags|=4194308)}function Ji$3(e1,_g){try{var t1="",r1=_g;do t1+=Pa(r1),r1=r1.return;while(r1);var n1=t1}catch(i1){n1=`
Error generating stack: `+i1.message+`
`+i1.stack}return{value:e1,source:_g,stack:n1,digest:null}}function Ki$3(e1,_g,t1){return{value:e1,source:null,stack:t1??null,digest:_g??null}}function Li$3(e1,_g){try{console.error(_g.value)}catch(t1){setTimeout(function(){throw t1})}}var Mi$3=typeof WeakMap=="function"?WeakMap:Map;function Ni$2(e1,_g,t1){t1=mh$2(-1,t1),t1.tag=3,t1.payload={element:null};var r1=_g.value;return t1.callback=function(){Oi$3||(Oi$3=!0,Pi$3=r1),Li$3(e1,_g)},t1}function Qi$3(e1,_g,t1){t1=mh$2(-1,t1),t1.tag=3;var r1=e1.type.getDerivedStateFromError;if(typeof r1=="function"){var n1=_g.value;t1.payload=function(){return r1(n1)},t1.callback=function(){Li$3(e1,_g)}}var i1=e1.stateNode;return i1!==null&&typeof i1.componentDidCatch=="function"&&(t1.callback=function(){Li$3(e1,_g),typeof r1!="function"&&(Ri$3===null?Ri$3=new Set([this]):Ri$3.add(this));var o1=_g.stack;this.componentDidCatch(_g.value,{componentStack:o1!==null?o1:""})}),t1}function Si$2(e1,_g,t1){var r1=e1.pingCache;if(r1===null){r1=e1.pingCache=new Mi$3;var n1=new Set;r1.set(_g,n1)}else n1=r1.get(_g),n1===void 0&&(n1=new Set,r1.set(_g,n1));n1.has(t1)||(n1.add(t1),e1=Ti$2.bind(null,e1,_g,t1),_g.then(e1,e1))}function Ui$3(e1){do{var _g;if((_g=e1.tag===13)&&(_g=e1.memoizedState,_g=_g!==null?_g.dehydrated!==null:!0),_g)return e1;e1=e1.return}while(e1!==null);return null}function Vi$2(e1,_g,t1,r1,n1){return e1.mode&1?(e1.flags|=65536,e1.lanes=n1,e1):(e1===_g?e1.flags|=65536:(e1.flags|=128,t1.flags|=131072,t1.flags&=-52805,t1.tag===1&&(t1.alternate===null?t1.tag=17:(_g=mh$2(-1,1),_g.tag=2,nh$2(t1,_g,1))),t1.lanes|=1),e1)}var Wi$3=ua$2.ReactCurrentOwner,dh$2=!1;function Xi$3(e1,_g,t1,r1){_g.child=e1===null?Vg(_g,null,t1,r1):Ug(_g,e1.child,t1,r1)}function Yi$3(e1,_g,t1,r1,n1){t1=t1.render;var i1=_g.ref;return ch$2(_g,n1),r1=Nh$1(e1,_g,t1,r1,i1,n1),t1=Sh$1(),e1!==null&&!dh$2?(_g.updateQueue=e1.updateQueue,_g.flags&=-2053,e1.lanes&=~n1,Zi$3(e1,_g,n1)):(I$1&&t1&&vg$1(_g),_g.flags|=1,Xi$3(e1,_g,r1,n1),_g.child)}function $i$2(e1,_g,t1,r1,n1){if(e1===null){var i1=t1.type;return typeof i1=="function"&&!aj(i1)&&i1.defaultProps===void 0&&t1.compare===null&&t1.defaultProps===void 0?(_g.tag=15,_g.type=i1,bj(e1,_g,i1,r1,n1)):(e1=Rg(t1.type,null,r1,_g,_g.mode,n1),e1.ref=_g.ref,e1.return=_g,_g.child=e1)}if(i1=e1.child,!(e1.lanes&n1)){var o1=i1.memoizedProps;if(t1=t1.compare,t1=t1!==null?t1:Ie$2,t1(o1,r1)&&e1.ref===_g.ref)return Zi$3(e1,_g,n1)}return _g.flags|=1,e1=Pg(i1,r1),e1.ref=_g.ref,e1.return=_g,_g.child=e1}function bj(e1,_g,t1,r1,n1){if(e1!==null){var i1=e1.memoizedProps;if(Ie$2(i1,r1)&&e1.ref===_g.ref)if(dh$2=!1,_g.pendingProps=r1=i1,(e1.lanes&n1)!==0)e1.flags&131072&&(dh$2=!0);else return _g.lanes=e1.lanes,Zi$3(e1,_g,n1)}return cj(e1,_g,t1,r1,n1)}function dj(e1,_g,t1){var r1=_g.pendingProps,n1=r1.children,i1=e1!==null?e1.memoizedState:null;if(r1.mode==="hidden")if(!(_g.mode&1))_g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$3(ej,fj),fj|=t1;else{if(!(t1&1073741824))return e1=i1!==null?i1.baseLanes|t1:t1,_g.lanes=_g.childLanes=1073741824,_g.memoizedState={baseLanes:e1,cachePool:null,transitions:null},_g.updateQueue=null,G$3(ej,fj),fj|=e1,null;_g.memoizedState={baseLanes:0,cachePool:null,transitions:null},r1=i1!==null?i1.baseLanes:t1,G$3(ej,fj),fj|=r1}else i1!==null?(r1=i1.baseLanes|t1,_g.memoizedState=null):r1=t1,G$3(ej,fj),fj|=r1;return Xi$3(e1,_g,n1,t1),_g.child}function gj(e1,_g){var t1=_g.ref;(e1===null&&t1!==null||e1!==null&&e1.ref!==t1)&&(_g.flags|=512,_g.flags|=2097152)}function cj(e1,_g,t1,r1,n1){var i1=Zf$1(t1)?Xf$1:H$3.current;return i1=Yf$1(_g,i1),ch$2(_g,n1),t1=Nh$1(e1,_g,t1,r1,i1,n1),r1=Sh$1(),e1!==null&&!dh$2?(_g.updateQueue=e1.updateQueue,_g.flags&=-2053,e1.lanes&=~n1,Zi$3(e1,_g,n1)):(I$1&&r1&&vg$1(_g),_g.flags|=1,Xi$3(e1,_g,t1,n1),_g.child)}function hj(e1,_g,t1,r1,n1){if(Zf$1(t1)){var i1=!0;cg$1(_g)}else i1=!1;if(ch$2(_g,n1),_g.stateNode===null)ij(e1,_g),Gi$3(_g,t1,r1),Ii$2(_g,t1,r1,n1),r1=!0;else if(e1===null){var o1=_g.stateNode,a1=_g.memoizedProps;o1.props=a1;var u1=o1.context,s1=t1.contextType;typeof s1=="object"&&s1!==null?s1=eh$2(s1):(s1=Zf$1(t1)?Xf$1:H$3.current,s1=Yf$1(_g,s1));var l1=t1.getDerivedStateFromProps,c1=typeof l1=="function"||typeof o1.getSnapshotBeforeUpdate=="function";c1||typeof o1.UNSAFE_componentWillReceiveProps!="function"&&typeof o1.componentWillReceiveProps!="function"||(a1!==r1||u1!==s1)&&Hi$3(_g,o1,r1,s1),jh$1=!1;var d1=_g.memoizedState;o1.state=d1,qh$1(_g,r1,o1,n1),u1=_g.memoizedState,a1!==r1||d1!==u1||Wf$1.current||jh$1?(typeof l1=="function"&&(Di$3(_g,t1,l1,r1),u1=_g.memoizedState),(a1=jh$1||Fi$3(_g,t1,a1,r1,d1,u1,s1))?(c1||typeof o1.UNSAFE_componentWillMount!="function"&&typeof o1.componentWillMount!="function"||(typeof o1.componentWillMount=="function"&&o1.componentWillMount(),typeof o1.UNSAFE_componentWillMount=="function"&&o1.UNSAFE_componentWillMount()),typeof o1.componentDidMount=="function"&&(_g.flags|=4194308)):(typeof o1.componentDidMount=="function"&&(_g.flags|=4194308),_g.memoizedProps=r1,_g.memoizedState=u1),o1.props=r1,o1.state=u1,o1.context=s1,r1=a1):(typeof o1.componentDidMount=="function"&&(_g.flags|=4194308),r1=!1)}else{o1=_g.stateNode,lh$2(e1,_g),a1=_g.memoizedProps,s1=_g.type===_g.elementType?a1:Ci$2(_g.type,a1),o1.props=s1,c1=_g.pendingProps,d1=o1.context,u1=t1.contextType,typeof u1=="object"&&u1!==null?u1=eh$2(u1):(u1=Zf$1(t1)?Xf$1:H$3.current,u1=Yf$1(_g,u1));var h1=t1.getDerivedStateFromProps;(l1=typeof h1=="function"||typeof o1.getSnapshotBeforeUpdate=="function")||typeof o1.UNSAFE_componentWillReceiveProps!="function"&&typeof o1.componentWillReceiveProps!="function"||(a1!==c1||d1!==u1)&&Hi$3(_g,o1,r1,u1),jh$1=!1,d1=_g.memoizedState,o1.state=d1,qh$1(_g,r1,o1,n1);var f1=_g.memoizedState;a1!==c1||d1!==f1||Wf$1.current||jh$1?(typeof h1=="function"&&(Di$3(_g,t1,h1,r1),f1=_g.memoizedState),(s1=jh$1||Fi$3(_g,t1,s1,r1,d1,f1,u1)||!1)?(l1||typeof o1.UNSAFE_componentWillUpdate!="function"&&typeof o1.componentWillUpdate!="function"||(typeof o1.componentWillUpdate=="function"&&o1.componentWillUpdate(r1,f1,u1),typeof o1.UNSAFE_componentWillUpdate=="function"&&o1.UNSAFE_componentWillUpdate(r1,f1,u1)),typeof o1.componentDidUpdate=="function"&&(_g.flags|=4),typeof o1.getSnapshotBeforeUpdate=="function"&&(_g.flags|=1024)):(typeof o1.componentDidUpdate!="function"||a1===e1.memoizedProps&&d1===e1.memoizedState||(_g.flags|=4),typeof o1.getSnapshotBeforeUpdate!="function"||a1===e1.memoizedProps&&d1===e1.memoizedState||(_g.flags|=1024),_g.memoizedProps=r1,_g.memoizedState=f1),o1.props=r1,o1.state=f1,o1.context=u1,r1=s1):(typeof o1.componentDidUpdate!="function"||a1===e1.memoizedProps&&d1===e1.memoizedState||(_g.flags|=4),typeof o1.getSnapshotBeforeUpdate!="function"||a1===e1.memoizedProps&&d1===e1.memoizedState||(_g.flags|=1024),r1=!1)}return jj(e1,_g,t1,r1,i1,n1)}function jj(e1,_g,t1,r1,n1,i1){gj(e1,_g);var o1=(_g.flags&128)!==0;if(!r1&&!o1)return n1&&dg$1(_g,t1,!1),Zi$3(e1,_g,i1);r1=_g.stateNode,Wi$3.current=_g;var a1=o1&&typeof t1.getDerivedStateFromError!="function"?null:r1.render();return _g.flags|=1,e1!==null&&o1?(_g.child=Ug(_g,e1.child,null,i1),_g.child=Ug(_g,null,a1,i1)):Xi$3(e1,_g,a1,i1),_g.memoizedState=r1.state,n1&&dg$1(_g,t1,!0),_g.child}function kj(e1){var _g=e1.stateNode;_g.pendingContext?ag(e1,_g.pendingContext,_g.pendingContext!==_g.context):_g.context&&ag(e1,_g.context,!1),yh$1(e1,_g.containerInfo)}function lj(e1,_g,t1,r1,n1){return Ig(),Jg(n1),_g.flags|=256,Xi$3(e1,_g,t1,r1),_g.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e1){return{baseLanes:e1,cachePool:null,transitions:null}}function oj(e1,_g,t1){var r1=_g.pendingProps,n1=L$3.current,i1=!1,o1=(_g.flags&128)!==0,a1;if((a1=o1)||(a1=e1!==null&&e1.memoizedState===null?!1:(n1&2)!==0),a1?(i1=!0,_g.flags&=-129):(e1===null||e1.memoizedState!==null)&&(n1|=1),G$3(L$3,n1&1),e1===null)return Eg(_g),e1=_g.memoizedState,e1!==null&&(e1=e1.dehydrated,e1!==null)?(_g.mode&1?e1.data==="$!"?_g.lanes=8:_g.lanes=1073741824:_g.lanes=1,null):(o1=r1.children,e1=r1.fallback,i1?(r1=_g.mode,i1=_g.child,o1={mode:"hidden",children:o1},!(r1&1)&&i1!==null?(i1.childLanes=0,i1.pendingProps=o1):i1=pj(o1,r1,0,null),e1=Tg$1(e1,r1,t1,null),i1.return=_g,e1.return=_g,i1.sibling=e1,_g.child=i1,_g.child.memoizedState=nj(t1),_g.memoizedState=mj,e1):qj(_g,o1));if(n1=e1.memoizedState,n1!==null&&(a1=n1.dehydrated,a1!==null))return rj(e1,_g,o1,r1,a1,n1,t1);if(i1){i1=r1.fallback,o1=_g.mode,n1=e1.child,a1=n1.sibling;var u1={mode:"hidden",children:r1.children};return!(o1&1)&&_g.child!==n1?(r1=_g.child,r1.childLanes=0,r1.pendingProps=u1,_g.deletions=null):(r1=Pg(n1,u1),r1.subtreeFlags=n1.subtreeFlags&14680064),a1!==null?i1=Pg(a1,i1):(i1=Tg$1(i1,o1,t1,null),i1.flags|=2),i1.return=_g,r1.return=_g,r1.sibling=i1,_g.child=r1,r1=i1,i1=_g.child,o1=e1.child.memoizedState,o1=o1===null?nj(t1):{baseLanes:o1.baseLanes|t1,cachePool:null,transitions:o1.transitions},i1.memoizedState=o1,i1.childLanes=e1.childLanes&~t1,_g.memoizedState=mj,r1}return i1=e1.child,e1=i1.sibling,r1=Pg(i1,{mode:"visible",children:r1.children}),!(_g.mode&1)&&(r1.lanes=t1),r1.return=_g,r1.sibling=null,e1!==null&&(t1=_g.deletions,t1===null?(_g.deletions=[e1],_g.flags|=16):t1.push(e1)),_g.child=r1,_g.memoizedState=null,r1}function qj(e1,_g){return _g=pj({mode:"visible",children:_g},e1.mode,0,null),_g.return=e1,e1.child=_g}function sj(e1,_g,t1,r1){return r1!==null&&Jg(r1),Ug(_g,e1.child,null,t1),e1=qj(_g,_g.pendingProps.children),e1.flags|=2,_g.memoizedState=null,e1}function rj(e1,_g,t1,r1,n1,i1,o1){if(t1)return _g.flags&256?(_g.flags&=-257,r1=Ki$3(Error(p$3(422))),sj(e1,_g,o1,r1)):_g.memoizedState!==null?(_g.child=e1.child,_g.flags|=128,null):(i1=r1.fallback,n1=_g.mode,r1=pj({mode:"visible",children:r1.children},n1,0,null),i1=Tg$1(i1,n1,o1,null),i1.flags|=2,r1.return=_g,i1.return=_g,r1.sibling=i1,_g.child=r1,_g.mode&1&&Ug(_g,e1.child,null,o1),_g.child.memoizedState=nj(o1),_g.memoizedState=mj,i1);if(!(_g.mode&1))return sj(e1,_g,o1,null);if(n1.data==="$!"){if(r1=n1.nextSibling&&n1.nextSibling.dataset,r1)var a1=r1.dgst;return r1=a1,i1=Error(p$3(419)),r1=Ki$3(i1,r1,void 0),sj(e1,_g,o1,r1)}if(a1=(o1&e1.childLanes)!==0,dh$2||a1){if(r1=Q$4,r1!==null){switch(o1&-o1){case 4:n1=2;break;case 16:n1=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n1=32;break;case 536870912:n1=268435456;break;default:n1=0}n1=n1&(r1.suspendedLanes|o1)?0:n1,n1!==0&&n1!==i1.retryLane&&(i1.retryLane=n1,ih$2(e1,n1),gi$2(r1,e1,n1,-1))}return tj(),r1=Ki$3(Error(p$3(421))),sj(e1,_g,o1,r1)}return n1.data==="$?"?(_g.flags|=128,_g.child=e1.child,_g=uj.bind(null,e1),n1._reactRetry=_g,null):(e1=i1.treeContext,yg=Lf$1(n1.nextSibling),xg$1=_g,I$1=!0,zg=null,e1!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,rg$1=e1.id,sg$1=e1.overflow,qg=_g),_g=qj(_g,r1.children),_g.flags|=4096,_g)}function vj(e1,_g,t1){e1.lanes|=_g;var r1=e1.alternate;r1!==null&&(r1.lanes|=_g),bh$1(e1.return,_g,t1)}function wj(e1,_g,t1,r1,n1){var i1=e1.memoizedState;i1===null?e1.memoizedState={isBackwards:_g,rendering:null,renderingStartTime:0,last:r1,tail:t1,tailMode:n1}:(i1.isBackwards=_g,i1.rendering=null,i1.renderingStartTime=0,i1.last=r1,i1.tail=t1,i1.tailMode=n1)}function xj(e1,_g,t1){var r1=_g.pendingProps,n1=r1.revealOrder,i1=r1.tail;if(Xi$3(e1,_g,r1.children,t1),r1=L$3.current,r1&2)r1=r1&1|2,_g.flags|=128;else{if(e1!==null&&e1.flags&128)e:for(e1=_g.child;e1!==null;){if(e1.tag===13)e1.memoizedState!==null&&vj(e1,t1,_g);else if(e1.tag===19)vj(e1,t1,_g);else if(e1.child!==null){e1.child.return=e1,e1=e1.child;continue}if(e1===_g)break e;for(;e1.sibling===null;){if(e1.return===null||e1.return===_g)break e;e1=e1.return}e1.sibling.return=e1.return,e1=e1.sibling}r1&=1}if(G$3(L$3,r1),!(_g.mode&1))_g.memoizedState=null;else switch(n1){case"forwards":for(t1=_g.child,n1=null;t1!==null;)e1=t1.alternate,e1!==null&&Ch$1(e1)===null&&(n1=t1),t1=t1.sibling;t1=n1,t1===null?(n1=_g.child,_g.child=null):(n1=t1.sibling,t1.sibling=null),wj(_g,!1,n1,t1,i1);break;case"backwards":for(t1=null,n1=_g.child,_g.child=null;n1!==null;){if(e1=n1.alternate,e1!==null&&Ch$1(e1)===null){_g.child=n1;break}e1=n1.sibling,n1.sibling=t1,t1=n1,n1=e1}wj(_g,!0,t1,null,i1);break;case"together":wj(_g,!1,null,null,void 0);break;default:_g.memoizedState=null}return _g.child}function ij(e1,_g){!(_g.mode&1)&&e1!==null&&(e1.alternate=null,_g.alternate=null,_g.flags|=2)}function Zi$3(e1,_g,t1){if(e1!==null&&(_g.dependencies=e1.dependencies),rh$2|=_g.lanes,!(t1&_g.childLanes))return null;if(e1!==null&&_g.child!==e1.child)throw Error(p$3(153));if(_g.child!==null){for(e1=_g.child,t1=Pg(e1,e1.pendingProps),_g.child=t1,t1.return=_g;e1.sibling!==null;)e1=e1.sibling,t1=t1.sibling=Pg(e1,e1.pendingProps),t1.return=_g;t1.sibling=null}return _g.child}function yj(e1,_g,t1){switch(_g.tag){case 3:kj(_g),Ig();break;case 5:Ah$1(_g);break;case 1:Zf$1(_g.type)&&cg$1(_g);break;case 4:yh$1(_g,_g.stateNode.containerInfo);break;case 10:var r1=_g.type._context,n1=_g.memoizedProps.value;G$3(Wg,r1._currentValue),r1._currentValue=n1;break;case 13:if(r1=_g.memoizedState,r1!==null)return r1.dehydrated!==null?(G$3(L$3,L$3.current&1),_g.flags|=128,null):t1&_g.child.childLanes?oj(e1,_g,t1):(G$3(L$3,L$3.current&1),e1=Zi$3(e1,_g,t1),e1!==null?e1.sibling:null);G$3(L$3,L$3.current&1);break;case 19:if(r1=(t1&_g.childLanes)!==0,e1.flags&128){if(r1)return xj(e1,_g,t1);_g.flags|=128}if(n1=_g.memoizedState,n1!==null&&(n1.rendering=null,n1.tail=null,n1.lastEffect=null),G$3(L$3,L$3.current),r1)break;return null;case 22:case 23:return _g.lanes=0,dj(e1,_g,t1)}return Zi$3(e1,_g,t1)}var zj,Aj,Bj,Cj;zj=function(e1,_g){for(var t1=_g.child;t1!==null;){if(t1.tag===5||t1.tag===6)e1.appendChild(t1.stateNode);else if(t1.tag!==4&&t1.child!==null){t1.child.return=t1,t1=t1.child;continue}if(t1===_g)break;for(;t1.sibling===null;){if(t1.return===null||t1.return===_g)return;t1=t1.return}t1.sibling.return=t1.return,t1=t1.sibling}};Aj=function(){};Bj=function(e1,_g,t1,r1){var n1=e1.memoizedProps;if(n1!==r1){e1=_g.stateNode,xh$1(uh$2.current);var i1=null;switch(t1){case"input":n1=Ya$3(e1,n1),r1=Ya$3(e1,r1),i1=[];break;case"select":n1=A$1({},n1,{value:void 0}),r1=A$1({},r1,{value:void 0}),i1=[];break;case"textarea":n1=gb$1(e1,n1),r1=gb$1(e1,r1),i1=[];break;default:typeof n1.onClick!="function"&&typeof r1.onClick=="function"&&(e1.onclick=Bf$1)}ub$1(t1,r1);var o1;t1=null;for(s1 in n1)if(!r1.hasOwnProperty(s1)&&n1.hasOwnProperty(s1)&&n1[s1]!=null)if(s1==="style"){var a1=n1[s1];for(o1 in a1)a1.hasOwnProperty(o1)&&(t1||(t1={}),t1[o1]="")}else s1!=="dangerouslySetInnerHTML"&&s1!=="children"&&s1!=="suppressContentEditableWarning"&&s1!=="suppressHydrationWarning"&&s1!=="autoFocus"&&(ea$2.hasOwnProperty(s1)?i1||(i1=[]):(i1=i1||[]).push(s1,null));for(s1 in r1){var u1=r1[s1];if(a1=n1!=null?n1[s1]:void 0,r1.hasOwnProperty(s1)&&u1!==a1&&(u1!=null||a1!=null))if(s1==="style")if(a1){for(o1 in a1)!a1.hasOwnProperty(o1)||u1&&u1.hasOwnProperty(o1)||(t1||(t1={}),t1[o1]="");for(o1 in u1)u1.hasOwnProperty(o1)&&a1[o1]!==u1[o1]&&(t1||(t1={}),t1[o1]=u1[o1])}else t1||(i1||(i1=[]),i1.push(s1,t1)),t1=u1;else s1==="dangerouslySetInnerHTML"?(u1=u1?u1.__html:void 0,a1=a1?a1.__html:void 0,u1!=null&&a1!==u1&&(i1=i1||[]).push(s1,u1)):s1==="children"?typeof u1!="string"&&typeof u1!="number"||(i1=i1||[]).push(s1,""+u1):s1!=="suppressContentEditableWarning"&&s1!=="suppressHydrationWarning"&&(ea$2.hasOwnProperty(s1)?(u1!=null&&s1==="onScroll"&&D$3("scroll",e1),i1||a1===u1||(i1=[])):(i1=i1||[]).push(s1,u1))}t1&&(i1=i1||[]).push("style",t1);var s1=i1;(_g.updateQueue=s1)&&(_g.flags|=4)}};Cj=function(e1,_g,t1,r1){t1!==r1&&(_g.flags|=4)};function Dj(e1,_g){if(!I$1)switch(e1.tailMode){case"hidden":_g=e1.tail;for(var t1=null;_g!==null;)_g.alternate!==null&&(t1=_g),_g=_g.sibling;t1===null?e1.tail=null:t1.sibling=null;break;case"collapsed":t1=e1.tail;for(var r1=null;t1!==null;)t1.alternate!==null&&(r1=t1),t1=t1.sibling;r1===null?_g||e1.tail===null?e1.tail=null:e1.tail.sibling=null:r1.sibling=null}}function S$1(e1){var _g=e1.alternate!==null&&e1.alternate.child===e1.child,t1=0,r1=0;if(_g)for(var n1=e1.child;n1!==null;)t1|=n1.lanes|n1.childLanes,r1|=n1.subtreeFlags&14680064,r1|=n1.flags&14680064,n1.return=e1,n1=n1.sibling;else for(n1=e1.child;n1!==null;)t1|=n1.lanes|n1.childLanes,r1|=n1.subtreeFlags,r1|=n1.flags,n1.return=e1,n1=n1.sibling;return e1.subtreeFlags|=r1,e1.childLanes=t1,_g}function Ej(e1,_g,t1){var r1=_g.pendingProps;switch(wg$1(_g),_g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_g),null;case 1:return Zf$1(_g.type)&&$f$1(),S$1(_g),null;case 3:return r1=_g.stateNode,zh$1(),E$2(Wf$1),E$2(H$3),Eh$1(),r1.pendingContext&&(r1.context=r1.pendingContext,r1.pendingContext=null),(e1===null||e1.child===null)&&(Gg(_g)?_g.flags|=4:e1===null||e1.memoizedState.isDehydrated&&!(_g.flags&256)||(_g.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e1,_g),S$1(_g),null;case 5:Bh$1(_g);var n1=xh$1(wh$1.current);if(t1=_g.type,e1!==null&&_g.stateNode!=null)Bj(e1,_g,t1,r1,n1),e1.ref!==_g.ref&&(_g.flags|=512,_g.flags|=2097152);else{if(!r1){if(_g.stateNode===null)throw Error(p$3(166));return S$1(_g),null}if(e1=xh$1(uh$2.current),Gg(_g)){r1=_g.stateNode,t1=_g.type;var i1=_g.memoizedProps;switch(r1[Of$1]=_g,r1[Pf$1]=i1,e1=(_g.mode&1)!==0,t1){case"dialog":D$3("cancel",r1),D$3("close",r1);break;case"iframe":case"object":case"embed":D$3("load",r1);break;case"video":case"audio":for(n1=0;n1<lf$2.length;n1++)D$3(lf$2[n1],r1);break;case"source":D$3("error",r1);break;case"img":case"image":case"link":D$3("error",r1),D$3("load",r1);break;case"details":D$3("toggle",r1);break;case"input":Za$3(r1,i1),D$3("invalid",r1);break;case"select":r1._wrapperState={wasMultiple:!!i1.multiple},D$3("invalid",r1);break;case"textarea":hb$1(r1,i1),D$3("invalid",r1)}ub$1(t1,i1),n1=null;for(var o1 in i1)if(i1.hasOwnProperty(o1)){var a1=i1[o1];o1==="children"?typeof a1=="string"?r1.textContent!==a1&&(i1.suppressHydrationWarning!==!0&&Af$1(r1.textContent,a1,e1),n1=["children",a1]):typeof a1=="number"&&r1.textContent!==""+a1&&(i1.suppressHydrationWarning!==!0&&Af$1(r1.textContent,a1,e1),n1=["children",""+a1]):ea$2.hasOwnProperty(o1)&&a1!=null&&o1==="onScroll"&&D$3("scroll",r1)}switch(t1){case"input":Va$3(r1),db$1(r1,i1,!0);break;case"textarea":Va$3(r1),jb$1(r1);break;case"select":case"option":break;default:typeof i1.onClick=="function"&&(r1.onclick=Bf$1)}r1=n1,_g.updateQueue=r1,r1!==null&&(_g.flags|=4)}else{o1=n1.nodeType===9?n1:n1.ownerDocument,e1==="http://www.w3.org/1999/xhtml"&&(e1=kb$1(t1)),e1==="http://www.w3.org/1999/xhtml"?t1==="script"?(e1=o1.createElement("div"),e1.innerHTML="<script><\/script>",e1=e1.removeChild(e1.firstChild)):typeof r1.is=="string"?e1=o1.createElement(t1,{is:r1.is}):(e1=o1.createElement(t1),t1==="select"&&(o1=e1,r1.multiple?o1.multiple=!0:r1.size&&(o1.size=r1.size))):e1=o1.createElementNS(e1,t1),e1[Of$1]=_g,e1[Pf$1]=r1,zj(e1,_g,!1,!1),_g.stateNode=e1;e:{switch(o1=vb$1(t1,r1),t1){case"dialog":D$3("cancel",e1),D$3("close",e1),n1=r1;break;case"iframe":case"object":case"embed":D$3("load",e1),n1=r1;break;case"video":case"audio":for(n1=0;n1<lf$2.length;n1++)D$3(lf$2[n1],e1);n1=r1;break;case"source":D$3("error",e1),n1=r1;break;case"img":case"image":case"link":D$3("error",e1),D$3("load",e1),n1=r1;break;case"details":D$3("toggle",e1),n1=r1;break;case"input":Za$3(e1,r1),n1=Ya$3(e1,r1),D$3("invalid",e1);break;case"option":n1=r1;break;case"select":e1._wrapperState={wasMultiple:!!r1.multiple},n1=A$1({},r1,{value:void 0}),D$3("invalid",e1);break;case"textarea":hb$1(e1,r1),n1=gb$1(e1,r1),D$3("invalid",e1);break;default:n1=r1}ub$1(t1,n1),a1=n1;for(i1 in a1)if(a1.hasOwnProperty(i1)){var u1=a1[i1];i1==="style"?sb$1(e1,u1):i1==="dangerouslySetInnerHTML"?(u1=u1?u1.__html:void 0,u1!=null&&nb$1(e1,u1)):i1==="children"?typeof u1=="string"?(t1!=="textarea"||u1!=="")&&ob$1(e1,u1):typeof u1=="number"&&ob$1(e1,""+u1):i1!=="suppressContentEditableWarning"&&i1!=="suppressHydrationWarning"&&i1!=="autoFocus"&&(ea$2.hasOwnProperty(i1)?u1!=null&&i1==="onScroll"&&D$3("scroll",e1):u1!=null&&ta$2(e1,i1,u1,o1))}switch(t1){case"input":Va$3(e1),db$1(e1,r1,!1);break;case"textarea":Va$3(e1),jb$1(e1);break;case"option":r1.value!=null&&e1.setAttribute("value",""+Sa$1(r1.value));break;case"select":e1.multiple=!!r1.multiple,i1=r1.value,i1!=null?fb$1(e1,!!r1.multiple,i1,!1):r1.defaultValue!=null&&fb$1(e1,!!r1.multiple,r1.defaultValue,!0);break;default:typeof n1.onClick=="function"&&(e1.onclick=Bf$1)}switch(t1){case"button":case"input":case"select":case"textarea":r1=!!r1.autoFocus;break e;case"img":r1=!0;break e;default:r1=!1}}r1&&(_g.flags|=4)}_g.ref!==null&&(_g.flags|=512,_g.flags|=2097152)}return S$1(_g),null;case 6:if(e1&&_g.stateNode!=null)Cj(e1,_g,e1.memoizedProps,r1);else{if(typeof r1!="string"&&_g.stateNode===null)throw Error(p$3(166));if(t1=xh$1(wh$1.current),xh$1(uh$2.current),Gg(_g)){if(r1=_g.stateNode,t1=_g.memoizedProps,r1[Of$1]=_g,(i1=r1.nodeValue!==t1)&&(e1=xg$1,e1!==null))switch(e1.tag){case 3:Af$1(r1.nodeValue,t1,(e1.mode&1)!==0);break;case 5:e1.memoizedProps.suppressHydrationWarning!==!0&&Af$1(r1.nodeValue,t1,(e1.mode&1)!==0)}i1&&(_g.flags|=4)}else r1=(t1.nodeType===9?t1:t1.ownerDocument).createTextNode(r1),r1[Of$1]=_g,_g.stateNode=r1}return S$1(_g),null;case 13:if(E$2(L$3),r1=_g.memoizedState,e1===null||e1.memoizedState!==null&&e1.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&_g.mode&1&&!(_g.flags&128))Hg(),Ig(),_g.flags|=98560,i1=!1;else if(i1=Gg(_g),r1!==null&&r1.dehydrated!==null){if(e1===null){if(!i1)throw Error(p$3(318));if(i1=_g.memoizedState,i1=i1!==null?i1.dehydrated:null,!i1)throw Error(p$3(317));i1[Of$1]=_g}else Ig(),!(_g.flags&128)&&(_g.memoizedState=null),_g.flags|=4;S$1(_g),i1=!1}else zg!==null&&(Fj(zg),zg=null),i1=!0;if(!i1)return _g.flags&65536?_g:null}return _g.flags&128?(_g.lanes=t1,_g):(r1=r1!==null,r1!==(e1!==null&&e1.memoizedState!==null)&&r1&&(_g.child.flags|=8192,_g.mode&1&&(e1===null||L$3.current&1?T$3===0&&(T$3=3):tj())),_g.updateQueue!==null&&(_g.flags|=4),S$1(_g),null);case 4:return zh$1(),Aj(e1,_g),e1===null&&sf$2(_g.stateNode.containerInfo),S$1(_g),null;case 10:return ah$1(_g.type._context),S$1(_g),null;case 17:return Zf$1(_g.type)&&$f$1(),S$1(_g),null;case 19:if(E$2(L$3),i1=_g.memoizedState,i1===null)return S$1(_g),null;if(r1=(_g.flags&128)!==0,o1=i1.rendering,o1===null)if(r1)Dj(i1,!1);else{if(T$3!==0||e1!==null&&e1.flags&128)for(e1=_g.child;e1!==null;){if(o1=Ch$1(e1),o1!==null){for(_g.flags|=128,Dj(i1,!1),r1=o1.updateQueue,r1!==null&&(_g.updateQueue=r1,_g.flags|=4),_g.subtreeFlags=0,r1=t1,t1=_g.child;t1!==null;)i1=t1,e1=r1,i1.flags&=14680066,o1=i1.alternate,o1===null?(i1.childLanes=0,i1.lanes=e1,i1.child=null,i1.subtreeFlags=0,i1.memoizedProps=null,i1.memoizedState=null,i1.updateQueue=null,i1.dependencies=null,i1.stateNode=null):(i1.childLanes=o1.childLanes,i1.lanes=o1.lanes,i1.child=o1.child,i1.subtreeFlags=0,i1.deletions=null,i1.memoizedProps=o1.memoizedProps,i1.memoizedState=o1.memoizedState,i1.updateQueue=o1.updateQueue,i1.type=o1.type,e1=o1.dependencies,i1.dependencies=e1===null?null:{lanes:e1.lanes,firstContext:e1.firstContext}),t1=t1.sibling;return G$3(L$3,L$3.current&1|2),_g.child}e1=e1.sibling}i1.tail!==null&&B$3()>Gj&&(_g.flags|=128,r1=!0,Dj(i1,!1),_g.lanes=4194304)}else{if(!r1)if(e1=Ch$1(o1),e1!==null){if(_g.flags|=128,r1=!0,t1=e1.updateQueue,t1!==null&&(_g.updateQueue=t1,_g.flags|=4),Dj(i1,!0),i1.tail===null&&i1.tailMode==="hidden"&&!o1.alternate&&!I$1)return S$1(_g),null}else 2*B$3()-i1.renderingStartTime>Gj&&t1!==1073741824&&(_g.flags|=128,r1=!0,Dj(i1,!1),_g.lanes=4194304);i1.isBackwards?(o1.sibling=_g.child,_g.child=o1):(t1=i1.last,t1!==null?t1.sibling=o1:_g.child=o1,i1.last=o1)}return i1.tail!==null?(_g=i1.tail,i1.rendering=_g,i1.tail=_g.sibling,i1.renderingStartTime=B$3(),_g.sibling=null,t1=L$3.current,G$3(L$3,r1?t1&1|2:t1&1),_g):(S$1(_g),null);case 22:case 23:return Hj(),r1=_g.memoizedState!==null,e1!==null&&e1.memoizedState!==null!==r1&&(_g.flags|=8192),r1&&_g.mode&1?fj&1073741824&&(S$1(_g),_g.subtreeFlags&6&&(_g.flags|=8192)):S$1(_g),null;case 24:return null;case 25:return null}throw Error(p$3(156,_g.tag))}function Ij(e1,_g){switch(wg$1(_g),_g.tag){case 1:return Zf$1(_g.type)&&$f$1(),e1=_g.flags,e1&65536?(_g.flags=e1&-65537|128,_g):null;case 3:return zh$1(),E$2(Wf$1),E$2(H$3),Eh$1(),e1=_g.flags,e1&65536&&!(e1&128)?(_g.flags=e1&-65537|128,_g):null;case 5:return Bh$1(_g),null;case 13:if(E$2(L$3),e1=_g.memoizedState,e1!==null&&e1.dehydrated!==null){if(_g.alternate===null)throw Error(p$3(340));Ig()}return e1=_g.flags,e1&65536?(_g.flags=e1&-65537|128,_g):null;case 19:return E$2(L$3),null;case 4:return zh$1(),null;case 10:return ah$1(_g.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$5=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Lj(e1,_g){var t1=e1.ref;if(t1!==null)if(typeof t1=="function")try{t1(null)}catch(r1){W$2(e1,_g,r1)}else t1.current=null}function Mj(e1,_g,t1){try{t1()}catch(r1){W$2(e1,_g,r1)}}var Nj=!1;function Oj(e1,_g){if(Cf$1=dd$2,e1=Me$3(),Ne$2(e1)){if("selectionStart"in e1)var t1={start:e1.selectionStart,end:e1.selectionEnd};else e:{t1=(t1=e1.ownerDocument)&&t1.defaultView||window;var r1=t1.getSelection&&t1.getSelection();if(r1&&r1.rangeCount!==0){t1=r1.anchorNode;var n1=r1.anchorOffset,i1=r1.focusNode;r1=r1.focusOffset;try{t1.nodeType,i1.nodeType}catch{t1=null;break e}var o1=0,a1=-1,u1=-1,s1=0,l1=0,c1=e1,d1=null;t:for(;;){for(var h1;c1!==t1||n1!==0&&c1.nodeType!==3||(a1=o1+n1),c1!==i1||r1!==0&&c1.nodeType!==3||(u1=o1+r1),c1.nodeType===3&&(o1+=c1.nodeValue.length),(h1=c1.firstChild)!==null;)d1=c1,c1=h1;for(;;){if(c1===e1)break t;if(d1===t1&&++s1===n1&&(a1=o1),d1===i1&&++l1===r1&&(u1=o1),(h1=c1.nextSibling)!==null)break;c1=d1,d1=c1.parentNode}c1=h1}t1=a1===-1||u1===-1?null:{start:a1,end:u1}}else t1=null}t1=t1||{start:0,end:0}}else t1=null;for(Df$1={focusedElem:e1,selectionRange:t1},dd$2=!1,V$3=_g;V$3!==null;)if(_g=V$3,e1=_g.child,(_g.subtreeFlags&1028)!==0&&e1!==null)e1.return=_g,V$3=e1;else for(;V$3!==null;){_g=V$3;try{var f1=_g.alternate;if(_g.flags&1024)switch(_g.tag){case 0:case 11:case 15:break;case 1:if(f1!==null){var g1=f1.memoizedProps,v1=f1.memoizedState,$1=_g.stateNode,y1=$1.getSnapshotBeforeUpdate(_g.elementType===_g.type?g1:Ci$2(_g.type,g1),v1);$1.__reactInternalSnapshotBeforeUpdate=y1}break;case 3:var _1=_g.stateNode.containerInfo;_1.nodeType===1?_1.textContent="":_1.nodeType===9&&_1.documentElement&&_1.removeChild(_1.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(E1){W$2(_g,_g.return,E1)}if(e1=_g.sibling,e1!==null){e1.return=_g.return,V$3=e1;break}V$3=_g.return}return f1=Nj,Nj=!1,f1}function Pj(e1,_g,t1){var r1=_g.updateQueue;if(r1=r1!==null?r1.lastEffect:null,r1!==null){var n1=r1=r1.next;do{if((n1.tag&e1)===e1){var i1=n1.destroy;n1.destroy=void 0,i1!==void 0&&Mj(_g,t1,i1)}n1=n1.next}while(n1!==r1)}}function Qj(e1,_g){if(_g=_g.updateQueue,_g=_g!==null?_g.lastEffect:null,_g!==null){var t1=_g=_g.next;do{if((t1.tag&e1)===e1){var r1=t1.create;t1.destroy=r1()}t1=t1.next}while(t1!==_g)}}function Rj(e1){var _g=e1.ref;if(_g!==null){var t1=e1.stateNode;switch(e1.tag){case 5:e1=t1;break;default:e1=t1}typeof _g=="function"?_g(e1):_g.current=e1}}function Sj(e1){var _g=e1.alternate;_g!==null&&(e1.alternate=null,Sj(_g)),e1.child=null,e1.deletions=null,e1.sibling=null,e1.tag===5&&(_g=e1.stateNode,_g!==null&&(delete _g[Of$1],delete _g[Pf$1],delete _g[of$2],delete _g[Qf$1],delete _g[Rf$1])),e1.stateNode=null,e1.return=null,e1.dependencies=null,e1.memoizedProps=null,e1.memoizedState=null,e1.pendingProps=null,e1.stateNode=null,e1.updateQueue=null}function Tj(e1){return e1.tag===5||e1.tag===3||e1.tag===4}function Uj(e1){e:for(;;){for(;e1.sibling===null;){if(e1.return===null||Tj(e1.return))return null;e1=e1.return}for(e1.sibling.return=e1.return,e1=e1.sibling;e1.tag!==5&&e1.tag!==6&&e1.tag!==18;){if(e1.flags&2||e1.child===null||e1.tag===4)continue e;e1.child.return=e1,e1=e1.child}if(!(e1.flags&2))return e1.stateNode}}function Vj(e1,_g,t1){var r1=e1.tag;if(r1===5||r1===6)e1=e1.stateNode,_g?t1.nodeType===8?t1.parentNode.insertBefore(e1,_g):t1.insertBefore(e1,_g):(t1.nodeType===8?(_g=t1.parentNode,_g.insertBefore(e1,t1)):(_g=t1,_g.appendChild(e1)),t1=t1._reactRootContainer,t1!=null||_g.onclick!==null||(_g.onclick=Bf$1));else if(r1!==4&&(e1=e1.child,e1!==null))for(Vj(e1,_g,t1),e1=e1.sibling;e1!==null;)Vj(e1,_g,t1),e1=e1.sibling}function Wj(e1,_g,t1){var r1=e1.tag;if(r1===5||r1===6)e1=e1.stateNode,_g?t1.insertBefore(e1,_g):t1.appendChild(e1);else if(r1!==4&&(e1=e1.child,e1!==null))for(Wj(e1,_g,t1),e1=e1.sibling;e1!==null;)Wj(e1,_g,t1),e1=e1.sibling}var X$4=null,Xj=!1;function Yj(e1,_g,t1){for(t1=t1.child;t1!==null;)Zj(e1,_g,t1),t1=t1.sibling}function Zj(e1,_g,t1){if(lc$2&&typeof lc$2.onCommitFiberUnmount=="function")try{lc$2.onCommitFiberUnmount(kc$2,t1)}catch{}switch(t1.tag){case 5:U$5||Lj(t1,_g);case 6:var r1=X$4,n1=Xj;X$4=null,Yj(e1,_g,t1),X$4=r1,Xj=n1,X$4!==null&&(Xj?(e1=X$4,t1=t1.stateNode,e1.nodeType===8?e1.parentNode.removeChild(t1):e1.removeChild(t1)):X$4.removeChild(t1.stateNode));break;case 18:X$4!==null&&(Xj?(e1=X$4,t1=t1.stateNode,e1.nodeType===8?Kf$1(e1.parentNode,t1):e1.nodeType===1&&Kf$1(e1,t1),bd$1(e1)):Kf$1(X$4,t1.stateNode));break;case 4:r1=X$4,n1=Xj,X$4=t1.stateNode.containerInfo,Xj=!0,Yj(e1,_g,t1),X$4=r1,Xj=n1;break;case 0:case 11:case 14:case 15:if(!U$5&&(r1=t1.updateQueue,r1!==null&&(r1=r1.lastEffect,r1!==null))){n1=r1=r1.next;do{var i1=n1,o1=i1.destroy;i1=i1.tag,o1!==void 0&&(i1&2||i1&4)&&Mj(t1,_g,o1),n1=n1.next}while(n1!==r1)}Yj(e1,_g,t1);break;case 1:if(!U$5&&(Lj(t1,_g),r1=t1.stateNode,typeof r1.componentWillUnmount=="function"))try{r1.props=t1.memoizedProps,r1.state=t1.memoizedState,r1.componentWillUnmount()}catch(a1){W$2(t1,_g,a1)}Yj(e1,_g,t1);break;case 21:Yj(e1,_g,t1);break;case 22:t1.mode&1?(U$5=(r1=U$5)||t1.memoizedState!==null,Yj(e1,_g,t1),U$5=r1):Yj(e1,_g,t1);break;default:Yj(e1,_g,t1)}}function ak(e1){var _g=e1.updateQueue;if(_g!==null){e1.updateQueue=null;var t1=e1.stateNode;t1===null&&(t1=e1.stateNode=new Kj),_g.forEach(function(r1){var n1=bk.bind(null,e1,r1);t1.has(r1)||(t1.add(r1),r1.then(n1,n1))})}}function ck(e1,_g){var t1=_g.deletions;if(t1!==null)for(var r1=0;r1<t1.length;r1++){var n1=t1[r1];try{var i1=e1,o1=_g,a1=o1;e:for(;a1!==null;){switch(a1.tag){case 5:X$4=a1.stateNode,Xj=!1;break e;case 3:X$4=a1.stateNode.containerInfo,Xj=!0;break e;case 4:X$4=a1.stateNode.containerInfo,Xj=!0;break e}a1=a1.return}if(X$4===null)throw Error(p$3(160));Zj(i1,o1,n1),X$4=null,Xj=!1;var u1=n1.alternate;u1!==null&&(u1.return=null),n1.return=null}catch(s1){W$2(n1,_g,s1)}}if(_g.subtreeFlags&12854)for(_g=_g.child;_g!==null;)dk(_g,e1),_g=_g.sibling}function dk(e1,_g){var t1=e1.alternate,r1=e1.flags;switch(e1.tag){case 0:case 11:case 14:case 15:if(ck(_g,e1),ek(e1),r1&4){try{Pj(3,e1,e1.return),Qj(3,e1)}catch(g1){W$2(e1,e1.return,g1)}try{Pj(5,e1,e1.return)}catch(g1){W$2(e1,e1.return,g1)}}break;case 1:ck(_g,e1),ek(e1),r1&512&&t1!==null&&Lj(t1,t1.return);break;case 5:if(ck(_g,e1),ek(e1),r1&512&&t1!==null&&Lj(t1,t1.return),e1.flags&32){var n1=e1.stateNode;try{ob$1(n1,"")}catch(g1){W$2(e1,e1.return,g1)}}if(r1&4&&(n1=e1.stateNode,n1!=null)){var i1=e1.memoizedProps,o1=t1!==null?t1.memoizedProps:i1,a1=e1.type,u1=e1.updateQueue;if(e1.updateQueue=null,u1!==null)try{a1==="input"&&i1.type==="radio"&&i1.name!=null&&ab$1(n1,i1),vb$1(a1,o1);var s1=vb$1(a1,i1);for(o1=0;o1<u1.length;o1+=2){var l1=u1[o1],c1=u1[o1+1];l1==="style"?sb$1(n1,c1):l1==="dangerouslySetInnerHTML"?nb$1(n1,c1):l1==="children"?ob$1(n1,c1):ta$2(n1,l1,c1,s1)}switch(a1){case"input":bb$1(n1,i1);break;case"textarea":ib$1(n1,i1);break;case"select":var d1=n1._wrapperState.wasMultiple;n1._wrapperState.wasMultiple=!!i1.multiple;var h1=i1.value;h1!=null?fb$1(n1,!!i1.multiple,h1,!1):d1!==!!i1.multiple&&(i1.defaultValue!=null?fb$1(n1,!!i1.multiple,i1.defaultValue,!0):fb$1(n1,!!i1.multiple,i1.multiple?[]:"",!1))}n1[Pf$1]=i1}catch(g1){W$2(e1,e1.return,g1)}}break;case 6:if(ck(_g,e1),ek(e1),r1&4){if(e1.stateNode===null)throw Error(p$3(162));n1=e1.stateNode,i1=e1.memoizedProps;try{n1.nodeValue=i1}catch(g1){W$2(e1,e1.return,g1)}}break;case 3:if(ck(_g,e1),ek(e1),r1&4&&t1!==null&&t1.memoizedState.isDehydrated)try{bd$1(_g.containerInfo)}catch(g1){W$2(e1,e1.return,g1)}break;case 4:ck(_g,e1),ek(e1);break;case 13:ck(_g,e1),ek(e1),n1=e1.child,n1.flags&8192&&(i1=n1.memoizedState!==null,n1.stateNode.isHidden=i1,!i1||n1.alternate!==null&&n1.alternate.memoizedState!==null||(fk=B$3())),r1&4&&ak(e1);break;case 22:if(l1=t1!==null&&t1.memoizedState!==null,e1.mode&1?(U$5=(s1=U$5)||l1,ck(_g,e1),U$5=s1):ck(_g,e1),ek(e1),r1&8192){if(s1=e1.memoizedState!==null,(e1.stateNode.isHidden=s1)&&!l1&&e1.mode&1)for(V$3=e1,l1=e1.child;l1!==null;){for(c1=V$3=l1;V$3!==null;){switch(d1=V$3,h1=d1.child,d1.tag){case 0:case 11:case 14:case 15:Pj(4,d1,d1.return);break;case 1:Lj(d1,d1.return);var f1=d1.stateNode;if(typeof f1.componentWillUnmount=="function"){r1=d1,t1=d1.return;try{_g=r1,f1.props=_g.memoizedProps,f1.state=_g.memoizedState,f1.componentWillUnmount()}catch(g1){W$2(r1,t1,g1)}}break;case 5:Lj(d1,d1.return);break;case 22:if(d1.memoizedState!==null){gk(c1);continue}}h1!==null?(h1.return=d1,V$3=h1):gk(c1)}l1=l1.sibling}e:for(l1=null,c1=e1;;){if(c1.tag===5){if(l1===null){l1=c1;try{n1=c1.stateNode,s1?(i1=n1.style,typeof i1.setProperty=="function"?i1.setProperty("display","none","important"):i1.display="none"):(a1=c1.stateNode,u1=c1.memoizedProps.style,o1=u1!=null&&u1.hasOwnProperty("display")?u1.display:null,a1.style.display=rb$1("display",o1))}catch(g1){W$2(e1,e1.return,g1)}}}else if(c1.tag===6){if(l1===null)try{c1.stateNode.nodeValue=s1?"":c1.memoizedProps}catch(g1){W$2(e1,e1.return,g1)}}else if((c1.tag!==22&&c1.tag!==23||c1.memoizedState===null||c1===e1)&&c1.child!==null){c1.child.return=c1,c1=c1.child;continue}if(c1===e1)break e;for(;c1.sibling===null;){if(c1.return===null||c1.return===e1)break e;l1===c1&&(l1=null),c1=c1.return}l1===c1&&(l1=null),c1.sibling.return=c1.return,c1=c1.sibling}}break;case 19:ck(_g,e1),ek(e1),r1&4&&ak(e1);break;case 21:break;default:ck(_g,e1),ek(e1)}}function ek(e1){var _g=e1.flags;if(_g&2){try{e:{for(var t1=e1.return;t1!==null;){if(Tj(t1)){var r1=t1;break e}t1=t1.return}throw Error(p$3(160))}switch(r1.tag){case 5:var n1=r1.stateNode;r1.flags&32&&(ob$1(n1,""),r1.flags&=-33);var i1=Uj(e1);Wj(e1,i1,n1);break;case 3:case 4:var o1=r1.stateNode.containerInfo,a1=Uj(e1);Vj(e1,a1,o1);break;default:throw Error(p$3(161))}}catch(u1){W$2(e1,e1.return,u1)}e1.flags&=-3}_g&4096&&(e1.flags&=-4097)}function hk(e1,_g,t1){V$3=e1,ik(e1)}function ik(e1,_g,t1){for(var r1=(e1.mode&1)!==0;V$3!==null;){var n1=V$3,i1=n1.child;if(n1.tag===22&&r1){var o1=n1.memoizedState!==null||Jj;if(!o1){var a1=n1.alternate,u1=a1!==null&&a1.memoizedState!==null||U$5;a1=Jj;var s1=U$5;if(Jj=o1,(U$5=u1)&&!s1)for(V$3=n1;V$3!==null;)o1=V$3,u1=o1.child,o1.tag===22&&o1.memoizedState!==null?jk(n1):u1!==null?(u1.return=o1,V$3=u1):jk(n1);for(;i1!==null;)V$3=i1,ik(i1),i1=i1.sibling;V$3=n1,Jj=a1,U$5=s1}kk(e1)}else n1.subtreeFlags&8772&&i1!==null?(i1.return=n1,V$3=i1):kk(e1)}}function kk(e1){for(;V$3!==null;){var _g=V$3;if(_g.flags&8772){var t1=_g.alternate;try{if(_g.flags&8772)switch(_g.tag){case 0:case 11:case 15:U$5||Qj(5,_g);break;case 1:var r1=_g.stateNode;if(_g.flags&4&&!U$5)if(t1===null)r1.componentDidMount();else{var n1=_g.elementType===_g.type?t1.memoizedProps:Ci$2(_g.type,t1.memoizedProps);r1.componentDidUpdate(n1,t1.memoizedState,r1.__reactInternalSnapshotBeforeUpdate)}var i1=_g.updateQueue;i1!==null&&sh$2(_g,i1,r1);break;case 3:var o1=_g.updateQueue;if(o1!==null){if(t1=null,_g.child!==null)switch(_g.child.tag){case 5:t1=_g.child.stateNode;break;case 1:t1=_g.child.stateNode}sh$2(_g,o1,t1)}break;case 5:var a1=_g.stateNode;if(t1===null&&_g.flags&4){t1=a1;var u1=_g.memoizedProps;switch(_g.type){case"button":case"input":case"select":case"textarea":u1.autoFocus&&t1.focus();break;case"img":u1.src&&(t1.src=u1.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_g.memoizedState===null){var s1=_g.alternate;if(s1!==null){var l1=s1.memoizedState;if(l1!==null){var c1=l1.dehydrated;c1!==null&&bd$1(c1)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$5||_g.flags&512&&Rj(_g)}catch(d1){W$2(_g,_g.return,d1)}}if(_g===e1){V$3=null;break}if(t1=_g.sibling,t1!==null){t1.return=_g.return,V$3=t1;break}V$3=_g.return}}function gk(e1){for(;V$3!==null;){var _g=V$3;if(_g===e1){V$3=null;break}var t1=_g.sibling;if(t1!==null){t1.return=_g.return,V$3=t1;break}V$3=_g.return}}function jk(e1){for(;V$3!==null;){var _g=V$3;try{switch(_g.tag){case 0:case 11:case 15:var t1=_g.return;try{Qj(4,_g)}catch(u1){W$2(_g,t1,u1)}break;case 1:var r1=_g.stateNode;if(typeof r1.componentDidMount=="function"){var n1=_g.return;try{r1.componentDidMount()}catch(u1){W$2(_g,n1,u1)}}var i1=_g.return;try{Rj(_g)}catch(u1){W$2(_g,i1,u1)}break;case 5:var o1=_g.return;try{Rj(_g)}catch(u1){W$2(_g,o1,u1)}}}catch(u1){W$2(_g,_g.return,u1)}if(_g===e1){V$3=null;break}var a1=_g.sibling;if(a1!==null){a1.return=_g.return,V$3=a1;break}V$3=_g.return}}var lk=Math.ceil,mk=ua$2.ReactCurrentDispatcher,nk=ua$2.ReactCurrentOwner,ok=ua$2.ReactCurrentBatchConfig,K$3=0,Q$4=null,Y$3=null,Z$3=0,fj=0,ej=Uf$1(0),T$3=0,pk=null,rh$2=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi$3=!1,Pi$3=null,Ri$3=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$2(){return K$3&6?B$3():Ak!==-1?Ak:Ak=B$3()}function yi$2(e1){return e1.mode&1?K$3&2&&Z$3!==0?Z$3&-Z$3:Kg.transition!==null?(Bk===0&&(Bk=yc$2()),Bk):(e1=C$1,e1!==0||(e1=window.event,e1=e1===void 0?16:jd$2(e1.type)),e1):1}function gi$2(e1,_g,t1,r1){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac$2(e1,t1,r1),(!(K$3&2)||e1!==Q$4)&&(e1===Q$4&&(!(K$3&2)&&(qk|=t1),T$3===4&&Ck(e1,Z$3)),Dk(e1,r1),t1===1&&K$3===0&&!(_g.mode&1)&&(Gj=B$3()+500,fg$1&&jg()))}function Dk(e1,_g){var t1=e1.callbackNode;wc$2(e1,_g);var r1=uc$2(e1,e1===Q$4?Z$3:0);if(r1===0)t1!==null&&bc$2(t1),e1.callbackNode=null,e1.callbackPriority=0;else if(_g=r1&-r1,e1.callbackPriority!==_g){if(t1!=null&&bc$2(t1),_g===1)e1.tag===0?ig$1(Ek.bind(null,e1)):hg$1(Ek.bind(null,e1)),Jf$1(function(){!(K$3&6)&&jg()}),t1=null;else{switch(Dc$2(r1)){case 1:t1=fc$2;break;case 4:t1=gc$2;break;case 16:t1=hc$1;break;case 536870912:t1=jc$2;break;default:t1=hc$1}t1=Fk(t1,Gk.bind(null,e1))}e1.callbackPriority=_g,e1.callbackNode=t1}}function Gk(e1,_g){if(Ak=-1,Bk=0,K$3&6)throw Error(p$3(327));var t1=e1.callbackNode;if(Hk()&&e1.callbackNode!==t1)return null;var r1=uc$2(e1,e1===Q$4?Z$3:0);if(r1===0)return null;if(r1&30||r1&e1.expiredLanes||_g)_g=Ik(e1,r1);else{_g=r1;var n1=K$3;K$3|=2;var i1=Jk();(Q$4!==e1||Z$3!==_g)&&(uk=null,Gj=B$3()+500,Kk(e1,_g));do try{Lk();break}catch(a1){Mk(e1,a1)}while(!0);$g(),mk.current=i1,K$3=n1,Y$3!==null?_g=0:(Q$4=null,Z$3=0,_g=T$3)}if(_g!==0){if(_g===2&&(n1=xc$2(e1),n1!==0&&(r1=n1,_g=Nk(e1,n1))),_g===1)throw t1=pk,Kk(e1,0),Ck(e1,r1),Dk(e1,B$3()),t1;if(_g===6)Ck(e1,r1);else{if(n1=e1.current.alternate,!(r1&30)&&!Ok(n1)&&(_g=Ik(e1,r1),_g===2&&(i1=xc$2(e1),i1!==0&&(r1=i1,_g=Nk(e1,i1))),_g===1))throw t1=pk,Kk(e1,0),Ck(e1,r1),Dk(e1,B$3()),t1;switch(e1.finishedWork=n1,e1.finishedLanes=r1,_g){case 0:case 1:throw Error(p$3(345));case 2:Pk(e1,tk,uk);break;case 3:if(Ck(e1,r1),(r1&130023424)===r1&&(_g=fk+500-B$3(),10<_g)){if(uc$2(e1,0)!==0)break;if(n1=e1.suspendedLanes,(n1&r1)!==r1){R$2(),e1.pingedLanes|=e1.suspendedLanes&n1;break}e1.timeoutHandle=Ff$1(Pk.bind(null,e1,tk,uk),_g);break}Pk(e1,tk,uk);break;case 4:if(Ck(e1,r1),(r1&4194240)===r1)break;for(_g=e1.eventTimes,n1=-1;0<r1;){var o1=31-oc$2(r1);i1=1<<o1,o1=_g[o1],o1>n1&&(n1=o1),r1&=~i1}if(r1=n1,r1=B$3()-r1,r1=(120>r1?120:480>r1?480:1080>r1?1080:1920>r1?1920:3e3>r1?3e3:4320>r1?4320:1960*lk(r1/1960))-r1,10<r1){e1.timeoutHandle=Ff$1(Pk.bind(null,e1,tk,uk),r1);break}Pk(e1,tk,uk);break;case 5:Pk(e1,tk,uk);break;default:throw Error(p$3(329))}}}return Dk(e1,B$3()),e1.callbackNode===t1?Gk.bind(null,e1):null}function Nk(e1,_g){var t1=sk;return e1.current.memoizedState.isDehydrated&&(Kk(e1,_g).flags|=256),e1=Ik(e1,_g),e1!==2&&(_g=tk,tk=t1,_g!==null&&Fj(_g)),e1}function Fj(e1){tk===null?tk=e1:tk.push.apply(tk,e1)}function Ok(e1){for(var _g=e1;;){if(_g.flags&16384){var t1=_g.updateQueue;if(t1!==null&&(t1=t1.stores,t1!==null))for(var r1=0;r1<t1.length;r1++){var n1=t1[r1],i1=n1.getSnapshot;n1=n1.value;try{if(!He$2(i1(),n1))return!1}catch{return!1}}}if(t1=_g.child,_g.subtreeFlags&16384&&t1!==null)t1.return=_g,_g=t1;else{if(_g===e1)break;for(;_g.sibling===null;){if(_g.return===null||_g.return===e1)return!0;_g=_g.return}_g.sibling.return=_g.return,_g=_g.sibling}}return!0}function Ck(e1,_g){for(_g&=~rk,_g&=~qk,e1.suspendedLanes|=_g,e1.pingedLanes&=~_g,e1=e1.expirationTimes;0<_g;){var t1=31-oc$2(_g),r1=1<<t1;e1[t1]=-1,_g&=~r1}}function Ek(e1){if(K$3&6)throw Error(p$3(327));Hk();var _g=uc$2(e1,0);if(!(_g&1))return Dk(e1,B$3()),null;var t1=Ik(e1,_g);if(e1.tag!==0&&t1===2){var r1=xc$2(e1);r1!==0&&(_g=r1,t1=Nk(e1,r1))}if(t1===1)throw t1=pk,Kk(e1,0),Ck(e1,_g),Dk(e1,B$3()),t1;if(t1===6)throw Error(p$3(345));return e1.finishedWork=e1.current.alternate,e1.finishedLanes=_g,Pk(e1,tk,uk),Dk(e1,B$3()),null}function Qk(e1,_g){var t1=K$3;K$3|=1;try{return e1(_g)}finally{K$3=t1,K$3===0&&(Gj=B$3()+500,fg$1&&jg())}}function Rk(e1){wk!==null&&wk.tag===0&&!(K$3&6)&&Hk();var _g=K$3;K$3|=1;var t1=ok.transition,r1=C$1;try{if(ok.transition=null,C$1=1,e1)return e1()}finally{C$1=r1,ok.transition=t1,K$3=_g,!(K$3&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(e1,_g){e1.finishedWork=null,e1.finishedLanes=0;var t1=e1.timeoutHandle;if(t1!==-1&&(e1.timeoutHandle=-1,Gf$1(t1)),Y$3!==null)for(t1=Y$3.return;t1!==null;){var r1=t1;switch(wg$1(r1),r1.tag){case 1:r1=r1.type.childContextTypes,r1!=null&&$f$1();break;case 3:zh$1(),E$2(Wf$1),E$2(H$3),Eh$1();break;case 5:Bh$1(r1);break;case 4:zh$1();break;case 13:E$2(L$3);break;case 19:E$2(L$3);break;case 10:ah$1(r1.type._context);break;case 22:case 23:Hj()}t1=t1.return}if(Q$4=e1,Y$3=e1=Pg(e1.current,null),Z$3=fj=_g,T$3=0,pk=null,rk=qk=rh$2=0,tk=sk=null,fh$1!==null){for(_g=0;_g<fh$1.length;_g++)if(t1=fh$1[_g],r1=t1.interleaved,r1!==null){t1.interleaved=null;var n1=r1.next,i1=t1.pending;if(i1!==null){var o1=i1.next;i1.next=n1,r1.next=o1}t1.pending=r1}fh$1=null}return e1}function Mk(e1,_g){do{var t1=Y$3;try{if($g(),Fh$1.current=Rh$1,Ih){for(var r1=M$4.memoizedState;r1!==null;){var n1=r1.queue;n1!==null&&(n1.pending=null),r1=r1.next}Ih=!1}if(Hh$1=0,O$2=N$3=M$4=null,Jh$1=!1,Kh$1=0,nk.current=null,t1===null||t1.return===null){T$3=1,pk=_g,Y$3=null;break}e:{var i1=e1,o1=t1.return,a1=t1,u1=_g;if(_g=Z$3,a1.flags|=32768,u1!==null&&typeof u1=="object"&&typeof u1.then=="function"){var s1=u1,l1=a1,c1=l1.tag;if(!(l1.mode&1)&&(c1===0||c1===11||c1===15)){var d1=l1.alternate;d1?(l1.updateQueue=d1.updateQueue,l1.memoizedState=d1.memoizedState,l1.lanes=d1.lanes):(l1.updateQueue=null,l1.memoizedState=null)}var h1=Ui$3(o1);if(h1!==null){h1.flags&=-257,Vi$2(h1,o1,a1,i1,_g),h1.mode&1&&Si$2(i1,s1,_g),_g=h1,u1=s1;var f1=_g.updateQueue;if(f1===null){var g1=new Set;g1.add(u1),_g.updateQueue=g1}else f1.add(u1);break e}else{if(!(_g&1)){Si$2(i1,s1,_g),tj();break e}u1=Error(p$3(426))}}else if(I$1&&a1.mode&1){var v1=Ui$3(o1);if(v1!==null){!(v1.flags&65536)&&(v1.flags|=256),Vi$2(v1,o1,a1,i1,_g),Jg(Ji$3(u1,a1));break e}}i1=u1=Ji$3(u1,a1),T$3!==4&&(T$3=2),sk===null?sk=[i1]:sk.push(i1),i1=o1;do{switch(i1.tag){case 3:i1.flags|=65536,_g&=-_g,i1.lanes|=_g;var $1=Ni$2(i1,u1,_g);ph$2(i1,$1);break e;case 1:a1=u1;var y1=i1.type,_1=i1.stateNode;if(!(i1.flags&128)&&(typeof y1.getDerivedStateFromError=="function"||_1!==null&&typeof _1.componentDidCatch=="function"&&(Ri$3===null||!Ri$3.has(_1)))){i1.flags|=65536,_g&=-_g,i1.lanes|=_g;var E1=Qi$3(i1,a1,_g);ph$2(i1,E1);break e}}i1=i1.return}while(i1!==null)}Sk(t1)}catch(T1){_g=T1,Y$3===t1&&t1!==null&&(Y$3=t1=t1.return);continue}break}while(!0)}function Jk(){var e1=mk.current;return mk.current=Rh$1,e1===null?Rh$1:e1}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$4===null||!(rh$2&268435455)&&!(qk&268435455)||Ck(Q$4,Z$3)}function Ik(e1,_g){var t1=K$3;K$3|=2;var r1=Jk();(Q$4!==e1||Z$3!==_g)&&(uk=null,Kk(e1,_g));do try{Tk();break}catch(n1){Mk(e1,n1)}while(!0);if($g(),K$3=t1,mk.current=r1,Y$3!==null)throw Error(p$3(261));return Q$4=null,Z$3=0,T$3}function Tk(){for(;Y$3!==null;)Uk(Y$3)}function Lk(){for(;Y$3!==null&&!cc$2();)Uk(Y$3)}function Uk(e1){var _g=Vk(e1.alternate,e1,fj);e1.memoizedProps=e1.pendingProps,_g===null?Sk(e1):Y$3=_g,nk.current=null}function Sk(e1){var _g=e1;do{var t1=_g.alternate;if(e1=_g.return,_g.flags&32768){if(t1=Ij(t1,_g),t1!==null){t1.flags&=32767,Y$3=t1;return}if(e1!==null)e1.flags|=32768,e1.subtreeFlags=0,e1.deletions=null;else{T$3=6,Y$3=null;return}}else if(t1=Ej(t1,_g,fj),t1!==null){Y$3=t1;return}if(_g=_g.sibling,_g!==null){Y$3=_g;return}Y$3=_g=e1}while(_g!==null);T$3===0&&(T$3=5)}function Pk(e1,_g,t1){var r1=C$1,n1=ok.transition;try{ok.transition=null,C$1=1,Wk(e1,_g,t1,r1)}finally{ok.transition=n1,C$1=r1}return null}function Wk(e1,_g,t1,r1){do Hk();while(wk!==null);if(K$3&6)throw Error(p$3(327));t1=e1.finishedWork;var n1=e1.finishedLanes;if(t1===null)return null;if(e1.finishedWork=null,e1.finishedLanes=0,t1===e1.current)throw Error(p$3(177));e1.callbackNode=null,e1.callbackPriority=0;var i1=t1.lanes|t1.childLanes;if(Bc$2(e1,i1),e1===Q$4&&(Y$3=Q$4=null,Z$3=0),!(t1.subtreeFlags&2064)&&!(t1.flags&2064)||vk||(vk=!0,Fk(hc$1,function(){return Hk(),null})),i1=(t1.flags&15990)!==0,t1.subtreeFlags&15990||i1){i1=ok.transition,ok.transition=null;var o1=C$1;C$1=1;var a1=K$3;K$3|=4,nk.current=null,Oj(e1,t1),dk(t1,e1),Oe$1(Df$1),dd$2=!!Cf$1,Df$1=Cf$1=null,e1.current=t1,hk(t1),dc$2(),K$3=a1,C$1=o1,ok.transition=i1}else e1.current=t1;if(vk&&(vk=!1,wk=e1,xk=n1),i1=e1.pendingLanes,i1===0&&(Ri$3=null),mc$2(t1.stateNode),Dk(e1,B$3()),_g!==null)for(r1=e1.onRecoverableError,t1=0;t1<_g.length;t1++)n1=_g[t1],r1(n1.value,{componentStack:n1.stack,digest:n1.digest});if(Oi$3)throw Oi$3=!1,e1=Pi$3,Pi$3=null,e1;return xk&1&&e1.tag!==0&&Hk(),i1=e1.pendingLanes,i1&1?e1===zk?yk++:(yk=0,zk=e1):yk=0,jg(),null}function Hk(){if(wk!==null){var e1=Dc$2(xk),_g=ok.transition,t1=C$1;try{if(ok.transition=null,C$1=16>e1?16:e1,wk===null)var r1=!1;else{if(e1=wk,wk=null,xk=0,K$3&6)throw Error(p$3(331));var n1=K$3;for(K$3|=4,V$3=e1.current;V$3!==null;){var i1=V$3,o1=i1.child;if(V$3.flags&16){var a1=i1.deletions;if(a1!==null){for(var u1=0;u1<a1.length;u1++){var s1=a1[u1];for(V$3=s1;V$3!==null;){var l1=V$3;switch(l1.tag){case 0:case 11:case 15:Pj(8,l1,i1)}var c1=l1.child;if(c1!==null)c1.return=l1,V$3=c1;else for(;V$3!==null;){l1=V$3;var d1=l1.sibling,h1=l1.return;if(Sj(l1),l1===s1){V$3=null;break}if(d1!==null){d1.return=h1,V$3=d1;break}V$3=h1}}}var f1=i1.alternate;if(f1!==null){var g1=f1.child;if(g1!==null){f1.child=null;do{var v1=g1.sibling;g1.sibling=null,g1=v1}while(g1!==null)}}V$3=i1}}if(i1.subtreeFlags&2064&&o1!==null)o1.return=i1,V$3=o1;else e:for(;V$3!==null;){if(i1=V$3,i1.flags&2048)switch(i1.tag){case 0:case 11:case 15:Pj(9,i1,i1.return)}var $1=i1.sibling;if($1!==null){$1.return=i1.return,V$3=$1;break e}V$3=i1.return}}var y1=e1.current;for(V$3=y1;V$3!==null;){o1=V$3;var _1=o1.child;if(o1.subtreeFlags&2064&&_1!==null)_1.return=o1,V$3=_1;else e:for(o1=y1;V$3!==null;){if(a1=V$3,a1.flags&2048)try{switch(a1.tag){case 0:case 11:case 15:Qj(9,a1)}}catch(T1){W$2(a1,a1.return,T1)}if(a1===o1){V$3=null;break e}var E1=a1.sibling;if(E1!==null){E1.return=a1.return,V$3=E1;break e}V$3=a1.return}}if(K$3=n1,jg(),lc$2&&typeof lc$2.onPostCommitFiberRoot=="function")try{lc$2.onPostCommitFiberRoot(kc$2,e1)}catch{}r1=!0}return r1}finally{C$1=t1,ok.transition=_g}}return!1}function Xk(e1,_g,t1){_g=Ji$3(t1,_g),_g=Ni$2(e1,_g,1),e1=nh$2(e1,_g,1),_g=R$2(),e1!==null&&(Ac$2(e1,1,_g),Dk(e1,_g))}function W$2(e1,_g,t1){if(e1.tag===3)Xk(e1,e1,t1);else for(;_g!==null;){if(_g.tag===3){Xk(_g,e1,t1);break}else if(_g.tag===1){var r1=_g.stateNode;if(typeof _g.type.getDerivedStateFromError=="function"||typeof r1.componentDidCatch=="function"&&(Ri$3===null||!Ri$3.has(r1))){e1=Ji$3(t1,e1),e1=Qi$3(_g,e1,1),_g=nh$2(_g,e1,1),e1=R$2(),_g!==null&&(Ac$2(_g,1,e1),Dk(_g,e1));break}}_g=_g.return}}function Ti$2(e1,_g,t1){var r1=e1.pingCache;r1!==null&&r1.delete(_g),_g=R$2(),e1.pingedLanes|=e1.suspendedLanes&t1,Q$4===e1&&(Z$3&t1)===t1&&(T$3===4||T$3===3&&(Z$3&130023424)===Z$3&&500>B$3()-fk?Kk(e1,0):rk|=t1),Dk(e1,_g)}function Yk(e1,_g){_g===0&&(e1.mode&1?(_g=sc$2,sc$2<<=1,!(sc$2&130023424)&&(sc$2=4194304)):_g=1);var t1=R$2();e1=ih$2(e1,_g),e1!==null&&(Ac$2(e1,_g,t1),Dk(e1,t1))}function uj(e1){var _g=e1.memoizedState,t1=0;_g!==null&&(t1=_g.retryLane),Yk(e1,t1)}function bk(e1,_g){var t1=0;switch(e1.tag){case 13:var r1=e1.stateNode,n1=e1.memoizedState;n1!==null&&(t1=n1.retryLane);break;case 19:r1=e1.stateNode;break;default:throw Error(p$3(314))}r1!==null&&r1.delete(_g),Yk(e1,t1)}var Vk;Vk=function(e1,_g,t1){if(e1!==null)if(e1.memoizedProps!==_g.pendingProps||Wf$1.current)dh$2=!0;else{if(!(e1.lanes&t1)&&!(_g.flags&128))return dh$2=!1,yj(e1,_g,t1);dh$2=!!(e1.flags&131072)}else dh$2=!1,I$1&&_g.flags&1048576&&ug$1(_g,ng$1,_g.index);switch(_g.lanes=0,_g.tag){case 2:var r1=_g.type;ij(e1,_g),e1=_g.pendingProps;var n1=Yf$1(_g,H$3.current);ch$2(_g,t1),n1=Nh$1(null,_g,r1,e1,n1,t1);var i1=Sh$1();return _g.flags|=1,typeof n1=="object"&&n1!==null&&typeof n1.render=="function"&&n1.$$typeof===void 0?(_g.tag=1,_g.memoizedState=null,_g.updateQueue=null,Zf$1(r1)?(i1=!0,cg$1(_g)):i1=!1,_g.memoizedState=n1.state!==null&&n1.state!==void 0?n1.state:null,kh$1(_g),n1.updater=Ei$2,_g.stateNode=n1,n1._reactInternals=_g,Ii$2(_g,r1,e1,t1),_g=jj(null,_g,r1,!0,i1,t1)):(_g.tag=0,I$1&&i1&&vg$1(_g),Xi$3(null,_g,n1,t1),_g=_g.child),_g;case 16:r1=_g.elementType;e:{switch(ij(e1,_g),e1=_g.pendingProps,n1=r1._init,r1=n1(r1._payload),_g.type=r1,n1=_g.tag=Zk(r1),e1=Ci$2(r1,e1),n1){case 0:_g=cj(null,_g,r1,e1,t1);break e;case 1:_g=hj(null,_g,r1,e1,t1);break e;case 11:_g=Yi$3(null,_g,r1,e1,t1);break e;case 14:_g=$i$2(null,_g,r1,Ci$2(r1.type,e1),t1);break e}throw Error(p$3(306,r1,""))}return _g;case 0:return r1=_g.type,n1=_g.pendingProps,n1=_g.elementType===r1?n1:Ci$2(r1,n1),cj(e1,_g,r1,n1,t1);case 1:return r1=_g.type,n1=_g.pendingProps,n1=_g.elementType===r1?n1:Ci$2(r1,n1),hj(e1,_g,r1,n1,t1);case 3:e:{if(kj(_g),e1===null)throw Error(p$3(387));r1=_g.pendingProps,i1=_g.memoizedState,n1=i1.element,lh$2(e1,_g),qh$1(_g,r1,null,t1);var o1=_g.memoizedState;if(r1=o1.element,i1.isDehydrated)if(i1={element:r1,isDehydrated:!1,cache:o1.cache,pendingSuspenseBoundaries:o1.pendingSuspenseBoundaries,transitions:o1.transitions},_g.updateQueue.baseState=i1,_g.memoizedState=i1,_g.flags&256){n1=Ji$3(Error(p$3(423)),_g),_g=lj(e1,_g,r1,t1,n1);break e}else if(r1!==n1){n1=Ji$3(Error(p$3(424)),_g),_g=lj(e1,_g,r1,t1,n1);break e}else for(yg=Lf$1(_g.stateNode.containerInfo.firstChild),xg$1=_g,I$1=!0,zg=null,t1=Vg(_g,null,r1,t1),_g.child=t1;t1;)t1.flags=t1.flags&-3|4096,t1=t1.sibling;else{if(Ig(),r1===n1){_g=Zi$3(e1,_g,t1);break e}Xi$3(e1,_g,r1,t1)}_g=_g.child}return _g;case 5:return Ah$1(_g),e1===null&&Eg(_g),r1=_g.type,n1=_g.pendingProps,i1=e1!==null?e1.memoizedProps:null,o1=n1.children,Ef$1(r1,n1)?o1=null:i1!==null&&Ef$1(r1,i1)&&(_g.flags|=32),gj(e1,_g),Xi$3(e1,_g,o1,t1),_g.child;case 6:return e1===null&&Eg(_g),null;case 13:return oj(e1,_g,t1);case 4:return yh$1(_g,_g.stateNode.containerInfo),r1=_g.pendingProps,e1===null?_g.child=Ug(_g,null,r1,t1):Xi$3(e1,_g,r1,t1),_g.child;case 11:return r1=_g.type,n1=_g.pendingProps,n1=_g.elementType===r1?n1:Ci$2(r1,n1),Yi$3(e1,_g,r1,n1,t1);case 7:return Xi$3(e1,_g,_g.pendingProps,t1),_g.child;case 8:return Xi$3(e1,_g,_g.pendingProps.children,t1),_g.child;case 12:return Xi$3(e1,_g,_g.pendingProps.children,t1),_g.child;case 10:e:{if(r1=_g.type._context,n1=_g.pendingProps,i1=_g.memoizedProps,o1=n1.value,G$3(Wg,r1._currentValue),r1._currentValue=o1,i1!==null)if(He$2(i1.value,o1)){if(i1.children===n1.children&&!Wf$1.current){_g=Zi$3(e1,_g,t1);break e}}else for(i1=_g.child,i1!==null&&(i1.return=_g);i1!==null;){var a1=i1.dependencies;if(a1!==null){o1=i1.child;for(var u1=a1.firstContext;u1!==null;){if(u1.context===r1){if(i1.tag===1){u1=mh$2(-1,t1&-t1),u1.tag=2;var s1=i1.updateQueue;if(s1!==null){s1=s1.shared;var l1=s1.pending;l1===null?u1.next=u1:(u1.next=l1.next,l1.next=u1),s1.pending=u1}}i1.lanes|=t1,u1=i1.alternate,u1!==null&&(u1.lanes|=t1),bh$1(i1.return,t1,_g),a1.lanes|=t1;break}u1=u1.next}}else if(i1.tag===10)o1=i1.type===_g.type?null:i1.child;else if(i1.tag===18){if(o1=i1.return,o1===null)throw Error(p$3(341));o1.lanes|=t1,a1=o1.alternate,a1!==null&&(a1.lanes|=t1),bh$1(o1,t1,_g),o1=i1.sibling}else o1=i1.child;if(o1!==null)o1.return=i1;else for(o1=i1;o1!==null;){if(o1===_g){o1=null;break}if(i1=o1.sibling,i1!==null){i1.return=o1.return,o1=i1;break}o1=o1.return}i1=o1}Xi$3(e1,_g,n1.children,t1),_g=_g.child}return _g;case 9:return n1=_g.type,r1=_g.pendingProps.children,ch$2(_g,t1),n1=eh$2(n1),r1=r1(n1),_g.flags|=1,Xi$3(e1,_g,r1,t1),_g.child;case 14:return r1=_g.type,n1=Ci$2(r1,_g.pendingProps),n1=Ci$2(r1.type,n1),$i$2(e1,_g,r1,n1,t1);case 15:return bj(e1,_g,_g.type,_g.pendingProps,t1);case 17:return r1=_g.type,n1=_g.pendingProps,n1=_g.elementType===r1?n1:Ci$2(r1,n1),ij(e1,_g),_g.tag=1,Zf$1(r1)?(e1=!0,cg$1(_g)):e1=!1,ch$2(_g,t1),Gi$3(_g,r1,n1),Ii$2(_g,r1,n1,t1),jj(null,_g,r1,!0,e1,t1);case 19:return xj(e1,_g,t1);case 22:return dj(e1,_g,t1)}throw Error(p$3(156,_g.tag))};function Fk(e1,_g){return ac$2(e1,_g)}function $k(e1,_g,t1,r1){this.tag=e1,this.key=t1,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r1,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e1,_g,t1,r1){return new $k(e1,_g,t1,r1)}function aj(e1){return e1=e1.prototype,!(!e1||!e1.isReactComponent)}function Zk(e1){if(typeof e1=="function")return aj(e1)?1:0;if(e1!=null){if(e1=e1.$$typeof,e1===Da$1)return 11;if(e1===Ga$2)return 14}return 2}function Pg(e1,_g){var t1=e1.alternate;return t1===null?(t1=Bg(e1.tag,_g,e1.key,e1.mode),t1.elementType=e1.elementType,t1.type=e1.type,t1.stateNode=e1.stateNode,t1.alternate=e1,e1.alternate=t1):(t1.pendingProps=_g,t1.type=e1.type,t1.flags=0,t1.subtreeFlags=0,t1.deletions=null),t1.flags=e1.flags&14680064,t1.childLanes=e1.childLanes,t1.lanes=e1.lanes,t1.child=e1.child,t1.memoizedProps=e1.memoizedProps,t1.memoizedState=e1.memoizedState,t1.updateQueue=e1.updateQueue,_g=e1.dependencies,t1.dependencies=_g===null?null:{lanes:_g.lanes,firstContext:_g.firstContext},t1.sibling=e1.sibling,t1.index=e1.index,t1.ref=e1.ref,t1}function Rg(e1,_g,t1,r1,n1,i1){var o1=2;if(r1=e1,typeof e1=="function")aj(e1)&&(o1=1);else if(typeof e1=="string")o1=5;else e:switch(e1){case ya$1:return Tg$1(t1.children,n1,i1,_g);case za$2:o1=8,n1|=8;break;case Aa$1:return e1=Bg(12,t1,_g,n1|2),e1.elementType=Aa$1,e1.lanes=i1,e1;case Ea$2:return e1=Bg(13,t1,_g,n1),e1.elementType=Ea$2,e1.lanes=i1,e1;case Fa$2:return e1=Bg(19,t1,_g,n1),e1.elementType=Fa$2,e1.lanes=i1,e1;case Ia$2:return pj(t1,n1,i1,_g);default:if(typeof e1=="object"&&e1!==null)switch(e1.$$typeof){case Ba$2:o1=10;break e;case Ca$1:o1=9;break e;case Da$1:o1=11;break e;case Ga$2:o1=14;break e;case Ha$3:o1=16,r1=null;break e}throw Error(p$3(130,e1==null?e1:typeof e1,""))}return _g=Bg(o1,t1,_g,n1),_g.elementType=e1,_g.type=r1,_g.lanes=i1,_g}function Tg$1(e1,_g,t1,r1){return e1=Bg(7,e1,r1,_g),e1.lanes=t1,e1}function pj(e1,_g,t1,r1){return e1=Bg(22,e1,r1,_g),e1.elementType=Ia$2,e1.lanes=t1,e1.stateNode={isHidden:!1},e1}function Qg(e1,_g,t1){return e1=Bg(6,e1,null,_g),e1.lanes=t1,e1}function Sg(e1,_g,t1){return _g=Bg(4,e1.children!==null?e1.children:[],e1.key,_g),_g.lanes=t1,_g.stateNode={containerInfo:e1.containerInfo,pendingChildren:null,implementation:e1.implementation},_g}function al$2(e1,_g,t1,r1,n1){this.tag=_g,this.containerInfo=e1,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$2(0),this.expirationTimes=zc$2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$2(0),this.identifierPrefix=r1,this.onRecoverableError=n1,this.mutableSourceEagerHydrationData=null}function bl$2(e1,_g,t1,r1,n1,i1,o1,a1,u1){return e1=new al$2(e1,_g,t1,a1,u1),_g===1?(_g=1,i1===!0&&(_g|=8)):_g=0,i1=Bg(3,null,null,_g),e1.current=i1,i1.stateNode=e1,i1.memoizedState={element:r1,isDehydrated:t1,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh$1(i1),e1}function cl$2(e1,_g,t1){var r1=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:r1==null?null:""+r1,children:e1,containerInfo:_g,implementation:t1}}function dl$2(e1){if(!e1)return Vf$1;e1=e1._reactInternals;e:{if(Vb$1(e1)!==e1||e1.tag!==1)throw Error(p$3(170));var _g=e1;do{switch(_g.tag){case 3:_g=_g.stateNode.context;break e;case 1:if(Zf$1(_g.type)){_g=_g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_g=_g.return}while(_g!==null);throw Error(p$3(171))}if(e1.tag===1){var t1=e1.type;if(Zf$1(t1))return bg$1(e1,t1,_g)}return _g}function el$2(e1,_g,t1,r1,n1,i1,o1,a1,u1){return e1=bl$2(t1,r1,!0,e1,n1,i1,o1,a1,u1),e1.context=dl$2(null),t1=e1.current,r1=R$2(),n1=yi$2(t1),i1=mh$2(r1,n1),i1.callback=_g??null,nh$2(t1,i1,n1),e1.current.lanes=n1,Ac$2(e1,n1,r1),Dk(e1,r1),e1}function fl$2(e1,_g,t1,r1){var n1=_g.current,i1=R$2(),o1=yi$2(n1);return t1=dl$2(t1),_g.context===null?_g.context=t1:_g.pendingContext=t1,_g=mh$2(i1,o1),_g.payload={element:e1},r1=r1===void 0?null:r1,r1!==null&&(_g.callback=r1),e1=nh$2(n1,_g,o1),e1!==null&&(gi$2(e1,n1,o1,i1),oh$2(e1,n1,o1)),o1}function gl$2(e1){if(e1=e1.current,!e1.child)return null;switch(e1.child.tag){case 5:return e1.child.stateNode;default:return e1.child.stateNode}}function hl$2(e1,_g){if(e1=e1.memoizedState,e1!==null&&e1.dehydrated!==null){var t1=e1.retryLane;e1.retryLane=t1!==0&&t1<_g?t1:_g}}function il$2(e1,_g){hl$2(e1,_g),(e1=e1.alternate)&&hl$2(e1,_g)}function jl$2(){return null}var kl$2=typeof reportError=="function"?reportError:function(e1){console.error(e1)};function ll$2(e1){this._internalRoot=e1}ml$2.prototype.render=ll$2.prototype.render=function(e1){var _g=this._internalRoot;if(_g===null)throw Error(p$3(409));fl$2(e1,_g,null,null)};ml$2.prototype.unmount=ll$2.prototype.unmount=function(){var e1=this._internalRoot;if(e1!==null){this._internalRoot=null;var _g=e1.containerInfo;Rk(function(){fl$2(null,e1,null,null)}),_g[uf$2]=null}};function ml$2(e1){this._internalRoot=e1}ml$2.prototype.unstable_scheduleHydration=function(e1){if(e1){var _g=Hc$2();e1={blockedOn:null,target:e1,priority:_g};for(var t1=0;t1<Qc$2.length&&_g!==0&&_g<Qc$2[t1].priority;t1++);Qc$2.splice(t1,0,e1),t1===0&&Vc$2(e1)}};function nl$2(e1){return!(!e1||e1.nodeType!==1&&e1.nodeType!==9&&e1.nodeType!==11)}function ol$2(e1){return!(!e1||e1.nodeType!==1&&e1.nodeType!==9&&e1.nodeType!==11&&(e1.nodeType!==8||e1.nodeValue!==" react-mount-point-unstable "))}function pl$2(){}function ql$2(e1,_g,t1,r1,n1){if(n1){if(typeof r1=="function"){var i1=r1;r1=function(){var s1=gl$2(o1);i1.call(s1)}}var o1=el$2(_g,r1,e1,0,null,!1,!1,"",pl$2);return e1._reactRootContainer=o1,e1[uf$2]=o1.current,sf$2(e1.nodeType===8?e1.parentNode:e1),Rk(),o1}for(;n1=e1.lastChild;)e1.removeChild(n1);if(typeof r1=="function"){var a1=r1;r1=function(){var s1=gl$2(u1);a1.call(s1)}}var u1=bl$2(e1,0,!1,null,null,!1,!1,"",pl$2);return e1._reactRootContainer=u1,e1[uf$2]=u1.current,sf$2(e1.nodeType===8?e1.parentNode:e1),Rk(function(){fl$2(_g,u1,t1,r1)}),u1}function rl$2(e1,_g,t1,r1,n1){var i1=t1._reactRootContainer;if(i1){var o1=i1;if(typeof n1=="function"){var a1=n1;n1=function(){var u1=gl$2(o1);a1.call(u1)}}fl$2(_g,o1,e1,n1)}else o1=ql$2(t1,_g,e1,n1,r1);return gl$2(o1)}Ec$2=function(e1){switch(e1.tag){case 3:var _g=e1.stateNode;if(_g.current.memoizedState.isDehydrated){var t1=tc$1(_g.pendingLanes);t1!==0&&(Cc$2(_g,t1|1),Dk(_g,B$3()),!(K$3&6)&&(Gj=B$3()+500,jg()))}break;case 13:Rk(function(){var r1=ih$2(e1,1);if(r1!==null){var n1=R$2();gi$2(r1,e1,1,n1)}}),il$2(e1,1)}};Fc$2=function(e1){if(e1.tag===13){var _g=ih$2(e1,134217728);if(_g!==null){var t1=R$2();gi$2(_g,e1,134217728,t1)}il$2(e1,134217728)}};Gc$2=function(e1){if(e1.tag===13){var _g=yi$2(e1),t1=ih$2(e1,_g);if(t1!==null){var r1=R$2();gi$2(t1,e1,_g,r1)}il$2(e1,_g)}};Hc$2=function(){return C$1};Ic$2=function(e1,_g){var t1=C$1;try{return C$1=e1,_g()}finally{C$1=t1}};yb$1=function(e1,_g,t1){switch(_g){case"input":if(bb$1(e1,t1),_g=t1.name,t1.type==="radio"&&_g!=null){for(t1=e1;t1.parentNode;)t1=t1.parentNode;for(t1=t1.querySelectorAll("input[name="+JSON.stringify(""+_g)+'][type="radio"]'),_g=0;_g<t1.length;_g++){var r1=t1[_g];if(r1!==e1&&r1.form===e1.form){var n1=Db$1(r1);if(!n1)throw Error(p$3(90));Wa$2(r1),bb$1(r1,n1)}}}break;case"textarea":ib$1(e1,t1);break;case"select":_g=t1.value,_g!=null&&fb$1(e1,!!t1.multiple,_g,!1)}};Gb$1=Qk;Hb=Rk;var sl$2={usingClientEntryPoint:!1,Events:[Cb$1,ue$2,Db$1,Eb$1,Fb$1,Qk]},tl$2={findFiberByHostInstance:Wc$2,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul$2={bundleType:tl$2.bundleType,version:tl$2.version,rendererPackageName:tl$2.rendererPackageName,rendererConfig:tl$2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$2.ReactCurrentDispatcher,findHostInstanceByFiber:function(e1){return e1=Zb$1(e1),e1===null?null:e1.stateNode},findFiberByHostInstance:tl$2.findFiberByHostInstance||jl$2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl$2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl$2.isDisabled&&vl$2.supportsFiber)try{kc$2=vl$2.inject(ul$2),lc$2=vl$2}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl$2;reactDom_production_min.createPortal=function(e1,_g){var t1=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl$2(_g))throw Error(p$3(200));return cl$2(e1,_g,null,t1)};reactDom_production_min.createRoot=function(e1,_g){if(!nl$2(e1))throw Error(p$3(299));var t1=!1,r1="",n1=kl$2;return _g!=null&&(_g.unstable_strictMode===!0&&(t1=!0),_g.identifierPrefix!==void 0&&(r1=_g.identifierPrefix),_g.onRecoverableError!==void 0&&(n1=_g.onRecoverableError)),_g=bl$2(e1,1,!1,null,null,t1,!1,r1,n1),e1[uf$2]=_g.current,sf$2(e1.nodeType===8?e1.parentNode:e1),new ll$2(_g)};reactDom_production_min.findDOMNode=function(e1){if(e1==null)return null;if(e1.nodeType===1)return e1;var _g=e1._reactInternals;if(_g===void 0)throw typeof e1.render=="function"?Error(p$3(188)):(e1=Object.keys(e1).join(","),Error(p$3(268,e1)));return e1=Zb$1(_g),e1=e1===null?null:e1.stateNode,e1};reactDom_production_min.flushSync=function(e1){return Rk(e1)};reactDom_production_min.hydrate=function(e1,_g,t1){if(!ol$2(_g))throw Error(p$3(200));return rl$2(null,e1,_g,!0,t1)};reactDom_production_min.hydrateRoot=function(e1,_g,t1){if(!nl$2(e1))throw Error(p$3(405));var r1=t1!=null&&t1.hydratedSources||null,n1=!1,i1="",o1=kl$2;if(t1!=null&&(t1.unstable_strictMode===!0&&(n1=!0),t1.identifierPrefix!==void 0&&(i1=t1.identifierPrefix),t1.onRecoverableError!==void 0&&(o1=t1.onRecoverableError)),_g=el$2(_g,null,e1,1,t1??null,n1,!1,i1,o1),e1[uf$2]=_g.current,sf$2(e1),r1)for(e1=0;e1<r1.length;e1++)t1=r1[e1],n1=t1._getVersion,n1=n1(t1._source),_g.mutableSourceEagerHydrationData==null?_g.mutableSourceEagerHydrationData=[t1,n1]:_g.mutableSourceEagerHydrationData.push(t1,n1);return new ml$2(_g)};reactDom_production_min.render=function(e1,_g,t1){if(!ol$2(_g))throw Error(p$3(200));return rl$2(null,e1,_g,!1,t1)};reactDom_production_min.unmountComponentAtNode=function(e1){if(!ol$2(e1))throw Error(p$3(40));return e1._reactRootContainer?(Rk(function(){rl$2(null,null,e1,!1,function(){e1._reactRootContainer=null,e1[uf$2]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e1,_g,t1,r1){if(!ol$2(t1))throw Error(p$3(200));if(e1==null||e1._reactInternals===void 0)throw Error(p$3(38));return rl$2(e1,_g,t1,!1,r1)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e1){console.error(e1)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const $7SXl2$reactdom=getDefaultExportFromCjs(reactDomExports);var m$3=reactDomExports;client.createRoot=m$3.createRoot,client.hydrateRoot=m$3.hydrateRoot;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e1){return this.listeners.add(e1),this.onSubscribe(),()=>{this.listeners.delete(e1),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$3(){}function functionalUpdate(e1,_g){return typeof e1=="function"?e1(_g):e1}function isValidTimeout(e1){return typeof e1=="number"&&e1>=0&&e1!==1/0}function timeUntilStale(e1,_g){return Math.max(e1+(_g||0)-Date.now(),0)}function resolveStaleTime(e1,_g){return typeof e1=="function"?e1(_g):e1}function resolveEnabled(e1,_g){return typeof e1=="function"?e1(_g):e1}function matchQuery(e1,_g){const{type:t1="all",exact:r1,fetchStatus:n1,predicate:i1,queryKey:o1,stale:a1}=e1;if(o1){if(r1){if(_g.queryHash!==hashQueryKeyByOptions(o1,_g.options))return!1}else if(!partialMatchKey(_g.queryKey,o1))return!1}if(t1!=="all"){const u1=_g.isActive();if(t1==="active"&&!u1||t1==="inactive"&&u1)return!1}return!(typeof a1=="boolean"&&_g.isStale()!==a1||n1&&n1!==_g.state.fetchStatus||i1&&!i1(_g))}function matchMutation(e1,_g){const{exact:t1,status:r1,predicate:n1,mutationKey:i1}=e1;if(i1){if(!_g.options.mutationKey)return!1;if(t1){if(hashKey(_g.options.mutationKey)!==hashKey(i1))return!1}else if(!partialMatchKey(_g.options.mutationKey,i1))return!1}return!(r1&&_g.state.status!==r1||n1&&!n1(_g))}function hashQueryKeyByOptions(e1,_g){return((_g==null?void 0:_g.queryKeyHashFn)||hashKey)(e1)}function hashKey(e1){return JSON.stringify(e1,(_g,t1)=>isPlainObject$3(t1)?Object.keys(t1).sort().reduce((r1,n1)=>(r1[n1]=t1[n1],r1),{}):t1)}function partialMatchKey(e1,_g){return e1===_g?!0:typeof e1!=typeof _g?!1:e1&&_g&&typeof e1=="object"&&typeof _g=="object"?!Object.keys(_g).some(t1=>!partialMatchKey(e1[t1],_g[t1])):!1}function replaceEqualDeep(e1,_g){if(e1===_g)return e1;const t1=isPlainArray(e1)&&isPlainArray(_g);if(t1||isPlainObject$3(e1)&&isPlainObject$3(_g)){const r1=t1?e1:Object.keys(e1),n1=r1.length,i1=t1?_g:Object.keys(_g),o1=i1.length,a1=t1?[]:{};let u1=0;for(let s1=0;s1<o1;s1++){const l1=t1?s1:i1[s1];(!t1&&r1.includes(l1)||t1)&&e1[l1]===void 0&&_g[l1]===void 0?(a1[l1]=void 0,u1++):(a1[l1]=replaceEqualDeep(e1[l1],_g[l1]),a1[l1]===e1[l1]&&e1[l1]!==void 0&&u1++)}return n1===o1&&u1===n1?e1:a1}return _g}function isPlainArray(e1){return Array.isArray(e1)&&e1.length===Object.keys(e1).length}function isPlainObject$3(e1){if(!hasObjectPrototype(e1))return!1;const _g=e1.constructor;if(_g===void 0)return!0;const t1=_g.prototype;return!(!hasObjectPrototype(t1)||!t1.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e1)!==Object.prototype)}function hasObjectPrototype(e1){return Object.prototype.toString.call(e1)==="[object Object]"}function sleep(e1){return new Promise(_g=>{setTimeout(_g,e1)})}function replaceData(e1,_g,t1){return typeof t1.structuralSharing=="function"?t1.structuralSharing(e1,_g):t1.structuralSharing!==!1?replaceEqualDeep(e1,_g):_g}function addToEnd(e1,_g,t1=0){const r1=[...e1,_g];return t1&&r1.length>t1?r1.slice(1):r1}function addToStart(e1,_g,t1=0){const r1=[_g,...e1];return t1&&r1.length>t1?r1.slice(0,-1):r1}var skipToken=Symbol(),ensureQueryFn=(e1,_g)=>!e1.queryFn&&(_g!=null&&_g.initialPromise)?()=>_g.initialPromise:!e1.queryFn||e1.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${e1.queryHash}'`)):e1.queryFn,jx,_x,iw,XE,FocusManager=(XE=class extends Subscribable{constructor(){super();X0(this,jx);X0(this,_x);X0(this,iw);M0(this,iw,_g=>{if(!isServer&&window.addEventListener){const t1=()=>_g();return window.addEventListener("visibilitychange",t1,!1),()=>{window.removeEventListener("visibilitychange",t1)}}})}onSubscribe(){Py(this,_x)||this.setEventListener(Py(this,iw))}onUnsubscribe(){var _g;this.hasListeners()||((_g=Py(this,_x))==null||_g.call(this),M0(this,_x,void 0))}setEventListener(_g){var t1;M0(this,iw,_g),(t1=Py(this,_x))==null||t1.call(this),M0(this,_x,_g(r1=>{typeof r1=="boolean"?this.setFocused(r1):this.onFocus()}))}setFocused(_g){Py(this,jx)!==_g&&(M0(this,jx,_g),this.onFocus())}onFocus(){const _g=this.isFocused();this.listeners.forEach(t1=>{t1(_g)})}isFocused(){var _g;return typeof Py(this,jx)=="boolean"?Py(this,jx):((_g=globalThis.document)==null?void 0:_g.visibilityState)!=="hidden"}},jx=new WeakMap,_x=new WeakMap,iw=new WeakMap,XE),focusManager=new FocusManager,ow,Sx,sw,QE,OnlineManager=(QE=class extends Subscribable{constructor(){super();X0(this,ow,!0);X0(this,Sx);X0(this,sw);M0(this,sw,_g=>{if(!isServer&&window.addEventListener){const t1=()=>_g(!0),r1=()=>_g(!1);return window.addEventListener("online",t1,!1),window.addEventListener("offline",r1,!1),()=>{window.removeEventListener("online",t1),window.removeEventListener("offline",r1)}}})}onSubscribe(){Py(this,Sx)||this.setEventListener(Py(this,sw))}onUnsubscribe(){var _g;this.hasListeners()||((_g=Py(this,Sx))==null||_g.call(this),M0(this,Sx,void 0))}setEventListener(_g){var t1;M0(this,sw,_g),(t1=Py(this,Sx))==null||t1.call(this),M0(this,Sx,_g(this.setOnline.bind(this)))}setOnline(_g){Py(this,ow)!==_g&&(M0(this,ow,_g),this.listeners.forEach(r1=>{r1(_g)}))}isOnline(){return Py(this,ow)}},ow=new WeakMap,Sx=new WeakMap,sw=new WeakMap,QE),onlineManager=new OnlineManager;function defaultRetryDelay(e1){return Math.min(1e3*2**e1,3e4)}function canFetch(e1){return(e1??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class{constructor(e1){this.revert=e1==null?void 0:e1.revert,this.silent=e1==null?void 0:e1.silent}};function isCancelledError(e1){return e1 instanceof CancelledError}function createRetryer(e1){let _g=!1,t1=0,r1=!1,n1,i1,o1;const a1=new Promise(($1,y1)=>{i1=$1,o1=y1}),u1=$1=>{var y1;r1||(f1(new CancelledError($1)),(y1=e1.abort)==null||y1.call(e1))},s1=()=>{_g=!0},l1=()=>{_g=!1},c1=()=>focusManager.isFocused()&&(e1.networkMode==="always"||onlineManager.isOnline())&&e1.canRun(),d1=()=>canFetch(e1.networkMode)&&e1.canRun(),h1=$1=>{var y1;r1||(r1=!0,(y1=e1.onSuccess)==null||y1.call(e1,$1),n1==null||n1(),i1($1))},f1=$1=>{var y1;r1||(r1=!0,(y1=e1.onError)==null||y1.call(e1,$1),n1==null||n1(),o1($1))},g1=()=>new Promise($1=>{var y1;n1=_1=>{(r1||c1())&&$1(_1)},(y1=e1.onPause)==null||y1.call(e1)}).then(()=>{var $1;n1=void 0,r1||($1=e1.onContinue)==null||$1.call(e1)}),v1=()=>{if(r1)return;let $1;const y1=t1===0?e1.initialPromise:void 0;try{$1=y1??e1.fn()}catch(_1){$1=Promise.reject(_1)}Promise.resolve($1).then(h1).catch(_1=>{var N1;if(r1)return;const E1=e1.retry??(isServer?0:3),T1=e1.retryDelay??defaultRetryDelay,P1=typeof T1=="function"?T1(t1,_1):T1,k1=E1===!0||typeof E1=="number"&&t1<E1||typeof E1=="function"&&E1(t1,_1);if(_g||!k1){f1(_1);return}t1++,(N1=e1.onFail)==null||N1.call(e1,t1,_1),sleep(P1).then(()=>c1()?void 0:g1()).then(()=>{_g?f1(_1):v1()})})};return{promise:a1,cancel:u1,continue:()=>(n1==null||n1(),a1),cancelRetry:s1,continueRetry:l1,canStart:d1,start:()=>(d1()?v1():g1().then(v1),a1)}}function createNotifyManager(){let e1=[],_g=0,t1=d1=>{d1()},r1=d1=>{d1()},n1=d1=>setTimeout(d1,0);const i1=d1=>{n1=d1},o1=d1=>{let h1;_g++;try{h1=d1()}finally{_g--,_g||s1()}return h1},a1=d1=>{_g?e1.push(d1):n1(()=>{t1(d1)})},u1=d1=>(...h1)=>{a1(()=>{d1(...h1)})},s1=()=>{const d1=e1;e1=[],d1.length&&n1(()=>{r1(()=>{d1.forEach(h1=>{t1(h1)})})})};return{batch:o1,batchCalls:u1,schedule:a1,setNotifyFunction:d1=>{t1=d1},setBatchNotifyFunction:d1=>{r1=d1},setScheduler:i1}}var notifyManager=createNotifyManager(),Lx,JE,Removable=(JE=class{constructor(){X0(this,Lx)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&M0(this,Lx,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e1){this.gcTime=Math.max(this.gcTime||0,e1??(isServer?1/0:5*60*1e3))}clearGcTimeout(){Py(this,Lx)&&(clearTimeout(Py(this,Lx)),M0(this,Lx,void 0))}},Lx=new WeakMap,JE),aw,lw,R$,Vv,Kw,Fx,z$,px,eT,Query=(eT=class extends Removable{constructor(_g){super();X0(this,z$);X0(this,aw);X0(this,lw);X0(this,R$);X0(this,Vv);X0(this,Kw);X0(this,Fx);M0(this,Fx,!1),M0(this,Kw,_g.defaultOptions),this.setOptions(_g.options),this.observers=[],M0(this,R$,_g.cache),this.queryKey=_g.queryKey,this.queryHash=_g.queryHash,M0(this,aw,_g.state||getDefaultState$1(this.options)),this.state=Py(this,aw),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var _g;return(_g=Py(this,Vv))==null?void 0:_g.promise}setOptions(_g){this.options={...Py(this,Kw),..._g},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Py(this,R$).remove(this)}setData(_g,t1){const r1=replaceData(this.state.data,_g,this.options);return Uv(this,z$,px).call(this,{data:r1,type:"success",dataUpdatedAt:t1==null?void 0:t1.updatedAt,manual:t1==null?void 0:t1.manual}),r1}setState(_g,t1){Uv(this,z$,px).call(this,{type:"setState",state:_g,setStateOptions:t1})}cancel(_g){var r1,n1;const t1=(r1=Py(this,Vv))==null?void 0:r1.promise;return(n1=Py(this,Vv))==null||n1.cancel(_g),t1?t1.then(noop$3).catch(noop$3):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Py(this,aw))}isActive(){return this.observers.some(_g=>resolveEnabled(_g.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(_g=>_g.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(_g=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,_g)}onFocus(){var t1;const _g=this.observers.find(r1=>r1.shouldFetchOnWindowFocus());_g==null||_g.refetch({cancelRefetch:!1}),(t1=Py(this,Vv))==null||t1.continue()}onOnline(){var t1;const _g=this.observers.find(r1=>r1.shouldFetchOnReconnect());_g==null||_g.refetch({cancelRefetch:!1}),(t1=Py(this,Vv))==null||t1.continue()}addObserver(_g){this.observers.includes(_g)||(this.observers.push(_g),this.clearGcTimeout(),Py(this,R$).notify({type:"observerAdded",query:this,observer:_g}))}removeObserver(_g){this.observers.includes(_g)&&(this.observers=this.observers.filter(t1=>t1!==_g),this.observers.length||(Py(this,Vv)&&(Py(this,Fx)?Py(this,Vv).cancel({revert:!0}):Py(this,Vv).cancelRetry()),this.scheduleGc()),Py(this,R$).notify({type:"observerRemoved",query:this,observer:_g}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Uv(this,z$,px).call(this,{type:"invalidate"})}fetch(_g,t1){var u1,s1,l1;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t1!=null&&t1.cancelRefetch))this.cancel({silent:!0});else if(Py(this,Vv))return Py(this,Vv).continueRetry(),Py(this,Vv).promise}if(_g&&this.setOptions(_g),!this.options.queryFn){const c1=this.observers.find(d1=>d1.options.queryFn);c1&&this.setOptions(c1.options)}const r1=new AbortController,n1=c1=>{Object.defineProperty(c1,"signal",{enumerable:!0,get:()=>(M0(this,Fx,!0),r1.signal)})},i1=()=>{const c1=ensureQueryFn(this.options,t1),d1={queryKey:this.queryKey,meta:this.meta};return n1(d1),M0(this,Fx,!1),this.options.persister?this.options.persister(c1,d1,this):c1(d1)},o1={fetchOptions:t1,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i1};n1(o1),(u1=this.options.behavior)==null||u1.onFetch(o1,this),M0(this,lw,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s1=o1.fetchOptions)==null?void 0:s1.meta))&&Uv(this,z$,px).call(this,{type:"fetch",meta:(l1=o1.fetchOptions)==null?void 0:l1.meta});const a1=c1=>{var d1,h1,f1,g1;isCancelledError(c1)&&c1.silent||Uv(this,z$,px).call(this,{type:"error",error:c1}),isCancelledError(c1)||((h1=(d1=Py(this,R$).config).onError)==null||h1.call(d1,c1,this),(g1=(f1=Py(this,R$).config).onSettled)==null||g1.call(f1,this.state.data,c1,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return M0(this,Vv,createRetryer({initialPromise:t1==null?void 0:t1.initialPromise,fn:o1.fetchFn,abort:r1.abort.bind(r1),onSuccess:c1=>{var d1,h1,f1,g1;if(c1===void 0){a1(new Error(`${this.queryHash} data is undefined`));return}this.setData(c1),(h1=(d1=Py(this,R$).config).onSuccess)==null||h1.call(d1,c1,this),(g1=(f1=Py(this,R$).config).onSettled)==null||g1.call(f1,c1,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a1,onFail:(c1,d1)=>{Uv(this,z$,px).call(this,{type:"failed",failureCount:c1,error:d1})},onPause:()=>{Uv(this,z$,px).call(this,{type:"pause"})},onContinue:()=>{Uv(this,z$,px).call(this,{type:"continue"})},retry:o1.options.retry,retryDelay:o1.options.retryDelay,networkMode:o1.options.networkMode,canRun:()=>!0})),Py(this,Vv).start()}},aw=new WeakMap,lw=new WeakMap,R$=new WeakMap,Vv=new WeakMap,Kw=new WeakMap,Fx=new WeakMap,z$=new WeakSet,px=function(_g){const t1=r1=>{switch(_g.type){case"failed":return{...r1,fetchFailureCount:_g.failureCount,fetchFailureReason:_g.error};case"pause":return{...r1,fetchStatus:"paused"};case"continue":return{...r1,fetchStatus:"fetching"};case"fetch":return{...r1,...fetchState(r1.data,this.options),fetchMeta:_g.meta??null};case"success":return{...r1,data:_g.data,dataUpdateCount:r1.dataUpdateCount+1,dataUpdatedAt:_g.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!_g.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n1=_g.error;return isCancelledError(n1)&&n1.revert&&Py(this,lw)?{...Py(this,lw),fetchStatus:"idle"}:{...r1,error:n1,errorUpdateCount:r1.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r1.fetchFailureCount+1,fetchFailureReason:n1,fetchStatus:"idle",status:"error"};case"invalidate":return{...r1,isInvalidated:!0};case"setState":return{...r1,..._g.state}}};this.state=t1(this.state),notifyManager.batch(()=>{this.observers.forEach(r1=>{r1.onQueryUpdate()}),Py(this,R$).notify({query:this,type:"updated",action:_g})})},eT);function fetchState(e1,_g){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(_g.networkMode)?"fetching":"paused",...e1===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(e1){const _g=typeof e1.initialData=="function"?e1.initialData():e1.initialData,t1=_g!==void 0,r1=t1?typeof e1.initialDataUpdatedAt=="function"?e1.initialDataUpdatedAt():e1.initialDataUpdatedAt:0;return{data:_g,dataUpdateCount:0,dataUpdatedAt:t1?r1??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t1?"success":"pending",fetchStatus:"idle"}}var X$,tT,QueryCache=(tT=class extends Subscribable{constructor(_g={}){super();X0(this,X$);this.config=_g,M0(this,X$,new Map)}build(_g,t1,r1){const n1=t1.queryKey,i1=t1.queryHash??hashQueryKeyByOptions(n1,t1);let o1=this.get(i1);return o1||(o1=new Query({cache:this,queryKey:n1,queryHash:i1,options:_g.defaultQueryOptions(t1),state:r1,defaultOptions:_g.getQueryDefaults(n1)}),this.add(o1)),o1}add(_g){Py(this,X$).has(_g.queryHash)||(Py(this,X$).set(_g.queryHash,_g),this.notify({type:"added",query:_g}))}remove(_g){const t1=Py(this,X$).get(_g.queryHash);t1&&(_g.destroy(),t1===_g&&Py(this,X$).delete(_g.queryHash),this.notify({type:"removed",query:_g}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(_g=>{this.remove(_g)})})}get(_g){return Py(this,X$).get(_g)}getAll(){return[...Py(this,X$).values()]}find(_g){const t1={exact:!0,..._g};return this.getAll().find(r1=>matchQuery(t1,r1))}findAll(_g={}){const t1=this.getAll();return Object.keys(_g).length>0?t1.filter(r1=>matchQuery(_g,r1)):t1}notify(_g){notifyManager.batch(()=>{this.listeners.forEach(t1=>{t1(_g)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(_g=>{_g.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(_g=>{_g.onOnline()})})}},X$=new WeakMap,tT),Q$,r$,Bx,J$,xx,rT,Mutation=(rT=class extends Removable{constructor(_g){super();X0(this,J$);X0(this,Q$);X0(this,r$);X0(this,Bx);this.mutationId=_g.mutationId,M0(this,r$,_g.mutationCache),M0(this,Q$,[]),this.state=_g.state||getDefaultState(),this.setOptions(_g.options),this.scheduleGc()}setOptions(_g){this.options=_g,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(_g){Py(this,Q$).includes(_g)||(Py(this,Q$).push(_g),this.clearGcTimeout(),Py(this,r$).notify({type:"observerAdded",mutation:this,observer:_g}))}removeObserver(_g){M0(this,Q$,Py(this,Q$).filter(t1=>t1!==_g)),this.scheduleGc(),Py(this,r$).notify({type:"observerRemoved",mutation:this,observer:_g})}optionalRemove(){Py(this,Q$).length||(this.state.status==="pending"?this.scheduleGc():Py(this,r$).remove(this))}continue(){var _g;return((_g=Py(this,Bx))==null?void 0:_g.continue())??this.execute(this.state.variables)}async execute(_g){var n1,i1,o1,a1,u1,s1,l1,c1,d1,h1,f1,g1,v1,$1,y1,_1,E1,T1,P1,k1;M0(this,Bx,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(_g):Promise.reject(new Error("No mutationFn found")),onFail:(N1,W1)=>{Uv(this,J$,xx).call(this,{type:"failed",failureCount:N1,error:W1})},onPause:()=>{Uv(this,J$,xx).call(this,{type:"pause"})},onContinue:()=>{Uv(this,J$,xx).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Py(this,r$).canRun(this)}));const t1=this.state.status==="pending",r1=!Py(this,Bx).canStart();try{if(!t1){Uv(this,J$,xx).call(this,{type:"pending",variables:_g,isPaused:r1}),await((i1=(n1=Py(this,r$).config).onMutate)==null?void 0:i1.call(n1,_g,this));const W1=await((a1=(o1=this.options).onMutate)==null?void 0:a1.call(o1,_g));W1!==this.state.context&&Uv(this,J$,xx).call(this,{type:"pending",context:W1,variables:_g,isPaused:r1})}const N1=await Py(this,Bx).start();return await((s1=(u1=Py(this,r$).config).onSuccess)==null?void 0:s1.call(u1,N1,_g,this.state.context,this)),await((c1=(l1=this.options).onSuccess)==null?void 0:c1.call(l1,N1,_g,this.state.context)),await((h1=(d1=Py(this,r$).config).onSettled)==null?void 0:h1.call(d1,N1,null,this.state.variables,this.state.context,this)),await((g1=(f1=this.options).onSettled)==null?void 0:g1.call(f1,N1,null,_g,this.state.context)),Uv(this,J$,xx).call(this,{type:"success",data:N1}),N1}catch(N1){try{throw await(($1=(v1=Py(this,r$).config).onError)==null?void 0:$1.call(v1,N1,_g,this.state.context,this)),await((_1=(y1=this.options).onError)==null?void 0:_1.call(y1,N1,_g,this.state.context)),await((T1=(E1=Py(this,r$).config).onSettled)==null?void 0:T1.call(E1,void 0,N1,this.state.variables,this.state.context,this)),await((k1=(P1=this.options).onSettled)==null?void 0:k1.call(P1,void 0,N1,_g,this.state.context)),N1}finally{Uv(this,J$,xx).call(this,{type:"error",error:N1})}}finally{Py(this,r$).runNext(this)}}},Q$=new WeakMap,r$=new WeakMap,Bx=new WeakMap,J$=new WeakSet,xx=function(_g){const t1=r1=>{switch(_g.type){case"failed":return{...r1,failureCount:_g.failureCount,failureReason:_g.error};case"pause":return{...r1,isPaused:!0};case"continue":return{...r1,isPaused:!1};case"pending":return{...r1,context:_g.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:_g.isPaused,status:"pending",variables:_g.variables,submittedAt:Date.now()};case"success":return{...r1,data:_g.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r1,data:void 0,error:_g.error,failureCount:r1.failureCount+1,failureReason:_g.error,isPaused:!1,status:"error"}}};this.state=t1(this.state),notifyManager.batch(()=>{Py(this,Q$).forEach(r1=>{r1.onMutationUpdate(_g)}),Py(this,r$).notify({mutation:this,type:"updated",action:_g})})},rT);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var v$,Zw,nT,MutationCache=(nT=class extends Subscribable{constructor(_g={}){super();X0(this,v$);X0(this,Zw);this.config=_g,M0(this,v$,new Map),M0(this,Zw,Date.now())}build(_g,t1,r1){const n1=new Mutation({mutationCache:this,mutationId:++V2(this,Zw)._,options:_g.defaultMutationOptions(t1),state:r1});return this.add(n1),n1}add(_g){const t1=scopeFor(_g),r1=Py(this,v$).get(t1)??[];r1.push(_g),Py(this,v$).set(t1,r1),this.notify({type:"added",mutation:_g})}remove(_g){var r1;const t1=scopeFor(_g);if(Py(this,v$).has(t1)){const n1=(r1=Py(this,v$).get(t1))==null?void 0:r1.filter(i1=>i1!==_g);n1&&(n1.length===0?Py(this,v$).delete(t1):Py(this,v$).set(t1,n1))}this.notify({type:"removed",mutation:_g})}canRun(_g){var r1;const t1=(r1=Py(this,v$).get(scopeFor(_g)))==null?void 0:r1.find(n1=>n1.state.status==="pending");return!t1||t1===_g}runNext(_g){var r1;const t1=(r1=Py(this,v$).get(scopeFor(_g)))==null?void 0:r1.find(n1=>n1!==_g&&n1.state.isPaused);return(t1==null?void 0:t1.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(_g=>{this.remove(_g)})})}getAll(){return[...Py(this,v$).values()].flat()}find(_g){const t1={exact:!0,..._g};return this.getAll().find(r1=>matchMutation(t1,r1))}findAll(_g={}){return this.getAll().filter(t1=>matchMutation(_g,t1))}notify(_g){notifyManager.batch(()=>{this.listeners.forEach(t1=>{t1(_g)})})}resumePausedMutations(){const _g=this.getAll().filter(t1=>t1.state.isPaused);return notifyManager.batch(()=>Promise.all(_g.map(t1=>t1.continue().catch(noop$3))))}},v$=new WeakMap,Zw=new WeakMap,nT);function scopeFor(e1){var _g;return((_g=e1.options.scope)==null?void 0:_g.id)??String(e1.mutationId)}function infiniteQueryBehavior(e1){return{onFetch:(_g,t1)=>{const r1=async()=>{var f1,g1,v1,$1,y1;const n1=_g.options,i1=(v1=(g1=(f1=_g.fetchOptions)==null?void 0:f1.meta)==null?void 0:g1.fetchMore)==null?void 0:v1.direction,o1=(($1=_g.state.data)==null?void 0:$1.pages)||[],a1=((y1=_g.state.data)==null?void 0:y1.pageParams)||[],u1={pages:[],pageParams:[]};let s1=!1;const l1=_1=>{Object.defineProperty(_1,"signal",{enumerable:!0,get:()=>(_g.signal.aborted?s1=!0:_g.signal.addEventListener("abort",()=>{s1=!0}),_g.signal)})},c1=ensureQueryFn(_g.options,_g.fetchOptions),d1=async(_1,E1,T1)=>{if(s1)return Promise.reject();if(E1==null&&_1.pages.length)return Promise.resolve(_1);const P1={queryKey:_g.queryKey,pageParam:E1,direction:T1?"backward":"forward",meta:_g.options.meta};l1(P1);const k1=await c1(P1),{maxPages:N1}=_g.options,W1=T1?addToStart:addToEnd;return{pages:W1(_1.pages,k1,N1),pageParams:W1(_1.pageParams,E1,N1)}};let h1;if(i1&&o1.length){const _1=i1==="backward",E1=_1?getPreviousPageParam:getNextPageParam,T1={pages:o1,pageParams:a1},P1=E1(n1,T1);h1=await d1(T1,P1,_1)}else{h1=await d1(u1,a1[0]??n1.initialPageParam);const _1=e1??o1.length;for(let E1=1;E1<_1;E1++){const T1=getNextPageParam(n1,h1);h1=await d1(h1,T1)}}return h1};_g.options.persister?_g.fetchFn=()=>{var n1,i1;return(i1=(n1=_g.options).persister)==null?void 0:i1.call(n1,r1,{queryKey:_g.queryKey,meta:_g.options.meta,signal:_g.signal},t1)}:_g.fetchFn=r1}}}function getNextPageParam(e1,{pages:_g,pageParams:t1}){const r1=_g.length-1;return e1.getNextPageParam(_g[r1],_g,t1[r1],t1)}function getPreviousPageParam(e1,{pages:_g,pageParams:t1}){var r1;return(r1=e1.getPreviousPageParam)==null?void 0:r1.call(e1,_g[0],_g,t1[0],t1)}var bv,Ex,Tx,uw,cw,Cx,dw,pw,iT,QueryClient=(iT=class{constructor(e1={}){X0(this,bv);X0(this,Ex);X0(this,Tx);X0(this,uw);X0(this,cw);X0(this,Cx);X0(this,dw);X0(this,pw);M0(this,bv,e1.queryCache||new QueryCache),M0(this,Ex,e1.mutationCache||new MutationCache),M0(this,Tx,e1.defaultOptions||{}),M0(this,uw,new Map),M0(this,cw,new Map),M0(this,Cx,0)}mount(){V2(this,Cx)._++,Py(this,Cx)===1&&(M0(this,dw,focusManager.subscribe(async e1=>{e1&&(await this.resumePausedMutations(),Py(this,bv).onFocus())})),M0(this,pw,onlineManager.subscribe(async e1=>{e1&&(await this.resumePausedMutations(),Py(this,bv).onOnline())})))}unmount(){var e1,_g;V2(this,Cx)._--,Py(this,Cx)===0&&((e1=Py(this,dw))==null||e1.call(this),M0(this,dw,void 0),(_g=Py(this,pw))==null||_g.call(this),M0(this,pw,void 0))}isFetching(e1){return Py(this,bv).findAll({...e1,fetchStatus:"fetching"}).length}isMutating(e1){return Py(this,Ex).findAll({...e1,status:"pending"}).length}getQueryData(e1){var t1;const _g=this.defaultQueryOptions({queryKey:e1});return(t1=Py(this,bv).get(_g.queryHash))==null?void 0:t1.state.data}ensureQueryData(e1){const _g=this.getQueryData(e1.queryKey);if(_g===void 0)return this.fetchQuery(e1);{const t1=this.defaultQueryOptions(e1),r1=Py(this,bv).build(this,t1);return e1.revalidateIfStale&&r1.isStaleByTime(resolveStaleTime(t1.staleTime,r1))&&this.prefetchQuery(t1),Promise.resolve(_g)}}getQueriesData(e1){return Py(this,bv).findAll(e1).map(({queryKey:_g,state:t1})=>{const r1=t1.data;return[_g,r1]})}setQueryData(e1,_g,t1){const r1=this.defaultQueryOptions({queryKey:e1}),n1=Py(this,bv).get(r1.queryHash),i1=n1==null?void 0:n1.state.data,o1=functionalUpdate(_g,i1);if(o1!==void 0)return Py(this,bv).build(this,r1).setData(o1,{...t1,manual:!0})}setQueriesData(e1,_g,t1){return notifyManager.batch(()=>Py(this,bv).findAll(e1).map(({queryKey:r1})=>[r1,this.setQueryData(r1,_g,t1)]))}getQueryState(e1){var t1;const _g=this.defaultQueryOptions({queryKey:e1});return(t1=Py(this,bv).get(_g.queryHash))==null?void 0:t1.state}removeQueries(e1){const _g=Py(this,bv);notifyManager.batch(()=>{_g.findAll(e1).forEach(t1=>{_g.remove(t1)})})}resetQueries(e1,_g){const t1=Py(this,bv),r1={type:"active",...e1};return notifyManager.batch(()=>(t1.findAll(e1).forEach(n1=>{n1.reset()}),this.refetchQueries(r1,_g)))}cancelQueries(e1={},_g={}){const t1={revert:!0,..._g},r1=notifyManager.batch(()=>Py(this,bv).findAll(e1).map(n1=>n1.cancel(t1)));return Promise.all(r1).then(noop$3).catch(noop$3)}invalidateQueries(e1={},_g={}){return notifyManager.batch(()=>{if(Py(this,bv).findAll(e1).forEach(r1=>{r1.invalidate()}),e1.refetchType==="none")return Promise.resolve();const t1={...e1,type:e1.refetchType??e1.type??"active"};return this.refetchQueries(t1,_g)})}refetchQueries(e1={},_g){const t1={..._g,cancelRefetch:(_g==null?void 0:_g.cancelRefetch)??!0},r1=notifyManager.batch(()=>Py(this,bv).findAll(e1).filter(n1=>!n1.isDisabled()).map(n1=>{let i1=n1.fetch(void 0,t1);return t1.throwOnError||(i1=i1.catch(noop$3)),n1.state.fetchStatus==="paused"?Promise.resolve():i1}));return Promise.all(r1).then(noop$3)}fetchQuery(e1){const _g=this.defaultQueryOptions(e1);_g.retry===void 0&&(_g.retry=!1);const t1=Py(this,bv).build(this,_g);return t1.isStaleByTime(resolveStaleTime(_g.staleTime,t1))?t1.fetch(_g):Promise.resolve(t1.state.data)}prefetchQuery(e1){return this.fetchQuery(e1).then(noop$3).catch(noop$3)}fetchInfiniteQuery(e1){return e1.behavior=infiniteQueryBehavior(e1.pages),this.fetchQuery(e1)}prefetchInfiniteQuery(e1){return this.fetchInfiniteQuery(e1).then(noop$3).catch(noop$3)}resumePausedMutations(){return onlineManager.isOnline()?Py(this,Ex).resumePausedMutations():Promise.resolve()}getQueryCache(){return Py(this,bv)}getMutationCache(){return Py(this,Ex)}getDefaultOptions(){return Py(this,Tx)}setDefaultOptions(e1){M0(this,Tx,e1)}setQueryDefaults(e1,_g){Py(this,uw).set(hashKey(e1),{queryKey:e1,defaultOptions:_g})}getQueryDefaults(e1){const _g=[...Py(this,uw).values()];let t1={};return _g.forEach(r1=>{partialMatchKey(e1,r1.queryKey)&&(t1={...t1,...r1.defaultOptions})}),t1}setMutationDefaults(e1,_g){Py(this,cw).set(hashKey(e1),{mutationKey:e1,defaultOptions:_g})}getMutationDefaults(e1){const _g=[...Py(this,cw).values()];let t1={};return _g.forEach(r1=>{partialMatchKey(e1,r1.mutationKey)&&(t1={...t1,...r1.defaultOptions})}),t1}defaultQueryOptions(e1){if(e1._defaulted)return e1;const _g={...Py(this,Tx).queries,...this.getQueryDefaults(e1.queryKey),...e1,_defaulted:!0};return _g.queryHash||(_g.queryHash=hashQueryKeyByOptions(_g.queryKey,_g)),_g.refetchOnReconnect===void 0&&(_g.refetchOnReconnect=_g.networkMode!=="always"),_g.throwOnError===void 0&&(_g.throwOnError=!!_g.suspense),!_g.networkMode&&_g.persister&&(_g.networkMode="offlineFirst"),_g.enabled!==!0&&_g.queryFn===skipToken&&(_g.enabled=!1),_g}defaultMutationOptions(e1){return e1!=null&&e1._defaulted?e1:{...Py(this,Tx).mutations,...(e1==null?void 0:e1.mutationKey)&&this.getMutationDefaults(e1.mutationKey),...e1,_defaulted:!0}}clear(){Py(this,bv).clear(),Py(this,Ex).clear()}},bv=new WeakMap,Ex=new WeakMap,Tx=new WeakMap,uw=new WeakMap,cw=new WeakMap,Cx=new WeakMap,dw=new WeakMap,pw=new WeakMap,iT),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:e1,children:_g})=>(reactExports.useEffect(()=>(e1.mount(),()=>{e1.unmount()}),[e1]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:e1,children:_g}));function _objectWithoutPropertiesLoose(e1,_g){if(e1==null)return{};var t1={},r1=Object.keys(e1),n1,i1;for(i1=0;i1<r1.length;i1++)n1=r1[i1],!(_g.indexOf(n1)>=0)&&(t1[n1]=e1[n1]);return t1}var _excluded$e=["color"],ArrowDownIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$e);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M7.5 2C7.77614 2 8 2.22386 8 2.5L8 11.2929L11.1464 8.14645C11.3417 7.95118 11.6583 7.95118 11.8536 8.14645C12.0488 8.34171 12.0488 8.65829 11.8536 8.85355L7.85355 12.8536C7.75979 12.9473 7.63261 13 7.5 13C7.36739 13 7.24021 12.9473 7.14645 12.8536L3.14645 8.85355C2.95118 8.65829 2.95118 8.34171 3.14645 8.14645C3.34171 7.95118 3.65829 7.95118 3.85355 8.14645L7 11.2929L7 2.5C7 2.22386 7.22386 2 7.5 2Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$j=["color"],ArrowUpIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$j);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M7.14645 2.14645C7.34171 1.95118 7.65829 1.95118 7.85355 2.14645L11.8536 6.14645C12.0488 6.34171 12.0488 6.65829 11.8536 6.85355C11.6583 7.04882 11.3417 7.04882 11.1464 6.85355L8 3.70711L8 12.5C8 12.7761 7.77614 13 7.5 13C7.22386 13 7 12.7761 7 12.5L7 3.70711L3.85355 6.85355C3.65829 7.04882 3.34171 7.04882 3.14645 6.85355C2.95118 6.65829 2.95118 6.34171 3.14645 6.14645L7.14645 2.14645Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Q=["color"],CaretSortIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$Q);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$T=["color"],CheckIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$T);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$W=["color"],ChevronDownIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$W);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Y=["color"],ChevronRightIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$Y);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Z=["color"],ChevronUpIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$Z);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1g=["color"],CookieIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$1g);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M12.0697 1.76746C12.4807 1.21947 11.4605 0.454311 11.0495 1.0023C10.6385 1.55028 11.6588 2.31544 12.0697 1.76746ZM8.39263 1.07811C7.15585 0.950602 5.7823 1.16348 4.58433 1.70937C3.38552 2.25563 2.32735 3.15309 1.78844 4.41832C1.37574 5.38724 1.01715 6.28113 1.00088 7.44354C0.984724 8.59844 1.30522 9.96898 2.13174 11.928C2.61142 13.0649 4.03963 13.5446 5.13895 13.8079C6.40836 14.1119 7.80857 14.1914 8.6644 14.0742C9.36515 13.9782 10.1448 13.8284 10.7987 13.297C11.8977 12.4039 12.9009 11.3955 13.4994 10.3393C14.104 9.27221 14.3256 8.09207 13.7216 6.95324C13.5628 6.65373 13.316 6.57734 13.0412 6.4923C12.9374 6.46016 12.8295 6.42678 12.7209 6.37966C11.6211 5.90234 10.9646 5.34963 10.9135 5.02876C10.8656 4.72808 10.9221 4.51463 10.9811 4.29181C11.0129 4.17199 11.0453 4.04947 11.0626 3.90922C11.0838 3.73737 11.0814 3.33319 10.6996 3.12761C10.4048 2.96888 10.2164 2.65843 10.0407 2.36904C9.99742 2.29775 9.95492 2.22773 9.9118 2.16158C9.62634 1.72367 9.20769 1.16213 8.39263 1.07811ZM4.99899 2.61935C3.96483 3.09058 3.12554 3.83097 2.70846 4.81018C2.29808 5.77368 2.01406 6.50873 2.00079 7.45753C1.98741 8.41385 2.25043 9.6368 3.0531 11.5393C3.39181 12.3421 4.62167 12.6557 5.37186 12.8354C6.5493 13.1174 7.822 13.1802 8.52868 13.0834C9.21271 12.9897 9.74568 12.8642 10.1681 12.5209C11.229 11.6587 12.121 10.7435 12.6293 9.84635C12.9349 9.30709 13.5141 7.7028 12.6292 7.3873C10.7539 6.71875 10.262 6.06669 9.99011 5.41268C9.80915 4.97744 9.82868 4.52282 9.95741 4.07885L9.95741 4.07884C9.97662 4.0126 9.99538 3.94791 10.0334 3.88882C9.81857 3.73676 9.6515 3.55195 9.51464 3.3715C9.42876 3.25828 9.3469 3.12099 9.26197 2.97856C9.01866 2.57052 8.75018 2.12027 8.29008 2.07283C7.22889 1.96343 6.03398 2.14772 4.99899 2.61935ZM13.2081 3.77471C13.441 3.22671 12.4547 2.63606 12.0822 3.10163C11.5817 3.72732 12.9029 4.49281 13.2081 3.77471ZM14.3672 2.26031C14.9668 2.27493 15.1551 1.11603 14.5718 0.949371C13.8076 0.731026 13.5918 2.24139 14.3672 2.26031ZM14.2857 5.09098C14.8644 5.10004 15.0462 4.38222 14.4832 4.27899C13.7455 4.14375 13.5373 5.07927 14.2857 5.09098ZM6.9075 4.28672C6.46898 4.66754 6.0522 4.15185 5.97983 3.7365C5.86848 3.09744 6.33696 2.56856 6.94823 2.91156C7.43344 3.18382 7.26678 3.97471 6.9075 4.28672ZM4.94455 5.88184C5.40885 5.41754 4.59567 4.57013 4.11425 5.05154C3.83338 5.33242 4.00936 5.65376 4.23744 5.88184C4.43271 6.0771 4.74929 6.0771 4.94455 5.88184ZM6.97716 6.71984C7.31181 7.38914 8.48804 6.79159 7.99413 6.14788C7.86519 5.97983 7.68657 5.9494 7.62145 5.94207C7.21217 5.89601 6.76349 6.2925 6.97716 6.71984ZM6.98798 8.72461C7.14066 9.1188 7.51122 9.3187 7.91915 9.1633C8.27434 9.02799 8.33186 8.39689 8.17175 8.07427C8.02331 7.77514 7.63956 7.67793 7.33747 7.79417C6.98512 7.92976 6.85672 8.38708 6.98576 8.71889L6.98798 8.72461ZM10.3885 8.84081C10.7575 8.6566 11.4617 8.82771 11.4617 9.31199C11.4617 9.71286 10.9587 10.2165 10.5634 10.2826C10.1813 10.3465 9.70515 9.97581 9.76648 9.57718C9.81445 9.26539 10.1217 8.97401 10.3885 8.84081ZM7.56704 10.8432C7.33461 10.7502 7.14353 10.8601 7.11437 10.8769L7.11279 10.8778C6.90782 10.9949 6.71383 11.2439 6.6747 11.4842C6.59018 12.0034 7.13199 12.1239 7.52661 12.0987C8.2074 12.0553 8.06547 11.0426 7.56704 10.8432ZM4.8805 10.8932C5.0674 10.7723 5.15658 10.5363 5.08293 10.3153C4.93046 9.79687 4.3246 9.71252 3.96561 10.1297C3.79336 10.3299 3.80749 10.6274 3.99214 10.8105L3.99495 10.814L3.9979 10.8176C4.22025 11.0942 4.63624 11.1857 4.8805 10.8932ZM3.04695 7.81318C3.33147 8.0977 3.60077 8.15067 3.98443 8.05859C4.60826 7.90887 4.13814 6.24299 3.047 6.87296C2.70939 7.06788 2.86716 7.63339 3.04695 7.81318Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1r=["color"],Cross2Icon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$1r);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1I=["color"],DotFilledIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$1I);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r1}))}),_excluded$1L=["color"],DoubleArrowDownIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$1L);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M3.85355 2.14645C3.65829 1.95118 3.34171 1.95118 3.14645 2.14645C2.95118 2.34171 2.95118 2.65829 3.14645 2.85355L7.14645 6.85355C7.34171 7.04882 7.65829 7.04882 7.85355 6.85355L11.8536 2.85355C12.0488 2.65829 12.0488 2.34171 11.8536 2.14645C11.6583 1.95118 11.3417 1.95118 11.1464 2.14645L7.5 5.79289L3.85355 2.14645ZM3.85355 8.14645C3.65829 7.95118 3.34171 7.95118 3.14645 8.14645C2.95118 8.34171 2.95118 8.65829 3.14645 8.85355L7.14645 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L11.8536 8.85355C12.0488 8.65829 12.0488 8.34171 11.8536 8.14645C11.6583 7.95118 11.3417 7.95118 11.1464 8.14645L7.5 11.7929L3.85355 8.14645Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1O=["color"],DoubleArrowUpIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$1O);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M11.1464 6.85355C11.3417 7.04882 11.6583 7.04882 11.8536 6.85355C12.0488 6.65829 12.0488 6.34171 11.8536 6.14645L7.85355 2.14645C7.65829 1.95118 7.34171 1.95118 7.14645 2.14645L3.14645 6.14645C2.95118 6.34171 2.95118 6.65829 3.14645 6.85355C3.34171 7.04882 3.65829 7.04882 3.85355 6.85355L7.5 3.20711L11.1464 6.85355ZM11.1464 12.8536C11.3417 13.0488 11.6583 13.0488 11.8536 12.8536C12.0488 12.6583 12.0488 12.3417 11.8536 12.1464L7.85355 8.14645C7.65829 7.95118 7.34171 7.95118 7.14645 8.14645L3.14645 12.1464C2.95118 12.3417 2.95118 12.6583 3.14645 12.8536C3.34171 13.0488 3.65829 13.0488 3.85355 12.8536L7.5 9.20711L11.1464 12.8536Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$3p=["color"],PersonIcon=reactExports.forwardRef(function(e1,_g){var t1=e1.color,r1=t1===void 0?"currentColor":t1,n1=_objectWithoutPropertiesLoose(e1,_excluded$3p);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n1,{ref:_g}),reactExports.createElement("path",{d:"M7.5 0.875C5.49797 0.875 3.875 2.49797 3.875 4.5C3.875 6.15288 4.98124 7.54738 6.49373 7.98351C5.2997 8.12901 4.27557 8.55134 3.50407 9.31167C2.52216 10.2794 2.02502 11.72 2.02502 13.5999C2.02502 13.8623 2.23769 14.0749 2.50002 14.0749C2.76236 14.0749 2.97502 13.8623 2.97502 13.5999C2.97502 11.8799 3.42786 10.7206 4.17091 9.9883C4.91536 9.25463 6.02674 8.87499 7.49995 8.87499C8.97317 8.87499 10.0846 9.25463 10.8291 9.98831C11.5721 10.7206 12.025 11.8799 12.025 13.5999C12.025 13.8623 12.2376 14.0749 12.5 14.0749C12.7623 14.075 12.975 13.8623 12.975 13.6C12.975 11.72 12.4778 10.2794 11.4959 9.31166C10.7244 8.55135 9.70025 8.12903 8.50625 7.98352C10.0187 7.5474 11.125 6.15289 11.125 4.5C11.125 2.49797 9.50203 0.875 7.5 0.875ZM4.825 4.5C4.825 3.02264 6.02264 1.825 7.5 1.825C8.97736 1.825 10.175 3.02264 10.175 4.5C10.175 5.97736 8.97736 7.175 7.5 7.175C6.02264 7.175 4.825 5.97736 4.825 4.5Z",fill:r1,fillRule:"evenodd",clipRule:"evenodd"}))});function composeEventHandlers(e1,_g,{checkForDefaultPrevented:t1=!0}={}){return function(n1){if(e1==null||e1(n1),t1===!1||!n1.defaultPrevented)return _g==null?void 0:_g(n1)}}function setRef(e1,_g){typeof e1=="function"?e1(_g):e1!=null&&(e1.current=_g)}function composeRefs(...e1){return _g=>e1.forEach(t1=>setRef(t1,_g))}function useComposedRefs(...e1){return reactExports.useCallback(composeRefs(...e1),e1)}function createContext2(e1,_g){const t1=reactExports.createContext(_g);function r1(i1){const{children:o1,...a1}=i1,u1=reactExports.useMemo(()=>a1,Object.values(a1));return jsxRuntimeExports.jsx(t1.Provider,{value:u1,children:o1})}function n1(i1){const o1=reactExports.useContext(t1);if(o1)return o1;if(_g!==void 0)return _g;throw new Error(`\`${i1}\` must be used within \`${e1}\``)}return r1.displayName=e1+"Provider",[r1,n1]}function createContextScope(e1,_g=[]){let t1=[];function r1(i1,o1){const a1=reactExports.createContext(o1),u1=t1.length;t1=[...t1,o1];function s1(c1){const{scope:d1,children:h1,...f1}=c1,g1=(d1==null?void 0:d1[e1][u1])||a1,v1=reactExports.useMemo(()=>f1,Object.values(f1));return jsxRuntimeExports.jsx(g1.Provider,{value:v1,children:h1})}function l1(c1,d1){const h1=(d1==null?void 0:d1[e1][u1])||a1,f1=reactExports.useContext(h1);if(f1)return f1;if(o1!==void 0)return o1;throw new Error(`\`${c1}\` must be used within \`${i1}\``)}return s1.displayName=i1+"Provider",[s1,l1]}const n1=()=>{const i1=t1.map(o1=>reactExports.createContext(o1));return function(a1){const u1=(a1==null?void 0:a1[e1])||i1;return reactExports.useMemo(()=>({[`__scope${e1}`]:{...a1,[e1]:u1}}),[a1,u1])}};return n1.scopeName=e1,[r1,composeContextScopes(n1,..._g)]}function composeContextScopes(...e1){const _g=e1[0];if(e1.length===1)return _g;const t1=()=>{const r1=e1.map(n1=>({useScope:n1(),scopeName:n1.scopeName}));return function(i1){const o1=r1.reduce((a1,{useScope:u1,scopeName:s1})=>{const c1=u1(i1)[`__scope${s1}`];return{...a1,...c1}},{});return reactExports.useMemo(()=>({[`__scope${_g.scopeName}`]:o1}),[o1])}};return t1.scopeName=_g.scopeName,t1}var Slot=reactExports.forwardRef((e1,_g)=>{const{children:t1,...r1}=e1,n1=reactExports.Children.toArray(t1),i1=n1.find(isSlottable);if(i1){const o1=i1.props.children,a1=n1.map(u1=>u1===i1?reactExports.Children.count(o1)>1?reactExports.Children.only(null):reactExports.isValidElement(o1)?o1.props.children:null:u1);return jsxRuntimeExports.jsx(SlotClone,{...r1,ref:_g,children:reactExports.isValidElement(o1)?reactExports.cloneElement(o1,void 0,a1):null})}return jsxRuntimeExports.jsx(SlotClone,{...r1,ref:_g,children:t1})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((e1,_g)=>{const{children:t1,...r1}=e1;if(reactExports.isValidElement(t1)){const n1=getElementRef$1(t1);return reactExports.cloneElement(t1,{...mergeProps(r1,t1.props),ref:_g?composeRefs(_g,n1):n1})}return reactExports.Children.count(t1)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:e1})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e1});function isSlottable(e1){return reactExports.isValidElement(e1)&&e1.type===Slottable}function mergeProps(e1,_g){const t1={..._g};for(const r1 in _g){const n1=e1[r1],i1=_g[r1];/^on[A-Z]/.test(r1)?n1&&i1?t1[r1]=(...a1)=>{i1(...a1),n1(...a1)}:n1&&(t1[r1]=n1):r1==="style"?t1[r1]={...n1,...i1}:r1==="className"&&(t1[r1]=[n1,i1].filter(Boolean).join(" "))}return{...e1,...t1}}function getElementRef$1(e1){var r1,n1;let _g=(r1=Object.getOwnPropertyDescriptor(e1.props,"ref"))==null?void 0:r1.get,t1=_g&&"isReactWarning"in _g&&_g.isReactWarning;return t1?e1.ref:(_g=(n1=Object.getOwnPropertyDescriptor(e1,"ref"))==null?void 0:n1.get,t1=_g&&"isReactWarning"in _g&&_g.isReactWarning,t1?e1.props.ref:e1.props.ref||e1.ref)}function createCollection(e1){const _g=e1+"CollectionProvider",[t1,r1]=createContextScope(_g),[n1,i1]=t1(_g,{collectionRef:{current:null},itemMap:new Map}),o1=h1=>{const{scope:f1,children:g1}=h1,v1=React.useRef(null),$1=React.useRef(new Map).current;return jsxRuntimeExports.jsx(n1,{scope:f1,itemMap:$1,collectionRef:v1,children:g1})};o1.displayName=_g;const a1=e1+"CollectionSlot",u1=React.forwardRef((h1,f1)=>{const{scope:g1,children:v1}=h1,$1=i1(a1,g1),y1=useComposedRefs(f1,$1.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:y1,children:v1})});u1.displayName=a1;const s1=e1+"CollectionItemSlot",l1="data-radix-collection-item",c1=React.forwardRef((h1,f1)=>{const{scope:g1,children:v1,...$1}=h1,y1=React.useRef(null),_1=useComposedRefs(f1,y1),E1=i1(s1,g1);return React.useEffect(()=>(E1.itemMap.set(y1,{ref:y1,...$1}),()=>void E1.itemMap.delete(y1))),jsxRuntimeExports.jsx(Slot,{[l1]:"",ref:_1,children:v1})});c1.displayName=s1;function d1(h1){const f1=i1(e1+"CollectionConsumer",h1);return React.useCallback(()=>{const v1=f1.collectionRef.current;if(!v1)return[];const $1=Array.from(v1.querySelectorAll(`[${l1}]`));return Array.from(f1.itemMap.values()).sort((E1,T1)=>$1.indexOf(E1.ref.current)-$1.indexOf(T1.ref.current))},[f1.collectionRef,f1.itemMap])}return[{Provider:o1,Slot:u1,ItemSlot:c1},d1,r1]}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((e1,_g)=>{const t1=reactExports.forwardRef((r1,n1)=>{const{asChild:i1,...o1}=r1,a1=i1?Slot:_g;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(a1,{...o1,ref:n1})});return t1.displayName=`Primitive.${_g}`,{...e1,[_g]:t1}},{});function dispatchDiscreteCustomEvent(e1,_g){e1&&reactDomExports.flushSync(()=>e1.dispatchEvent(_g))}function useCallbackRef$1(e1){const _g=reactExports.useRef(e1);return reactExports.useEffect(()=>{_g.current=e1}),reactExports.useMemo(()=>(...t1)=>{var r1;return(r1=_g.current)==null?void 0:r1.call(_g,...t1)},[])}function useEscapeKeydown(e1,_g=globalThis==null?void 0:globalThis.document){const t1=useCallbackRef$1(e1);reactExports.useEffect(()=>{const r1=n1=>{n1.key==="Escape"&&t1(n1)};return _g.addEventListener("keydown",r1,{capture:!0}),()=>_g.removeEventListener("keydown",r1,{capture:!0})},[t1,_g])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((e1,_g)=>{const{disableOutsidePointerEvents:t1=!1,onEscapeKeyDown:r1,onPointerDownOutside:n1,onFocusOutside:i1,onInteractOutside:o1,onDismiss:a1,...u1}=e1,s1=reactExports.useContext(DismissableLayerContext),[l1,c1]=reactExports.useState(null),d1=(l1==null?void 0:l1.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h1]=reactExports.useState({}),f1=useComposedRefs(_g,k1=>c1(k1)),g1=Array.from(s1.layers),[v1]=[...s1.layersWithOutsidePointerEventsDisabled].slice(-1),$1=g1.indexOf(v1),y1=l1?g1.indexOf(l1):-1,_1=s1.layersWithOutsidePointerEventsDisabled.size>0,E1=y1>=$1,T1=usePointerDownOutside(k1=>{const N1=k1.target,W1=[...s1.branches].some(H1=>H1.contains(N1));!E1||W1||(n1==null||n1(k1),o1==null||o1(k1),k1.defaultPrevented||a1==null||a1())},d1),P1=useFocusOutside(k1=>{const N1=k1.target;[...s1.branches].some(H1=>H1.contains(N1))||(i1==null||i1(k1),o1==null||o1(k1),k1.defaultPrevented||a1==null||a1())},d1);return useEscapeKeydown(k1=>{y1===s1.layers.size-1&&(r1==null||r1(k1),!k1.defaultPrevented&&a1&&(k1.preventDefault(),a1()))},d1),reactExports.useEffect(()=>{if(l1)return t1&&(s1.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=d1.body.style.pointerEvents,d1.body.style.pointerEvents="none"),s1.layersWithOutsidePointerEventsDisabled.add(l1)),s1.layers.add(l1),dispatchUpdate(),()=>{t1&&s1.layersWithOutsidePointerEventsDisabled.size===1&&(d1.body.style.pointerEvents=originalBodyPointerEvents)}},[l1,d1,t1,s1]),reactExports.useEffect(()=>()=>{l1&&(s1.layers.delete(l1),s1.layersWithOutsidePointerEventsDisabled.delete(l1),dispatchUpdate())},[l1,s1]),reactExports.useEffect(()=>{const k1=()=>h1({});return document.addEventListener(CONTEXT_UPDATE,k1),()=>document.removeEventListener(CONTEXT_UPDATE,k1)},[]),jsxRuntimeExports.jsx(Primitive.div,{...u1,ref:f1,style:{pointerEvents:_1?E1?"auto":"none":void 0,...e1.style},onFocusCapture:composeEventHandlers(e1.onFocusCapture,P1.onFocusCapture),onBlurCapture:composeEventHandlers(e1.onBlurCapture,P1.onBlurCapture),onPointerDownCapture:composeEventHandlers(e1.onPointerDownCapture,T1.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((e1,_g)=>{const t1=reactExports.useContext(DismissableLayerContext),r1=reactExports.useRef(null),n1=useComposedRefs(_g,r1);return reactExports.useEffect(()=>{const i1=r1.current;if(i1)return t1.branches.add(i1),()=>{t1.branches.delete(i1)}},[t1.branches]),jsxRuntimeExports.jsx(Primitive.div,{...e1,ref:n1})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(e1,_g=globalThis==null?void 0:globalThis.document){const t1=useCallbackRef$1(e1),r1=reactExports.useRef(!1),n1=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const i1=a1=>{if(a1.target&&!r1.current){let u1=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,t1,s1,{discrete:!0})};const s1={originalEvent:a1};a1.pointerType==="touch"?(_g.removeEventListener("click",n1.current),n1.current=u1,_g.addEventListener("click",n1.current,{once:!0})):u1()}else _g.removeEventListener("click",n1.current);r1.current=!1},o1=window.setTimeout(()=>{_g.addEventListener("pointerdown",i1)},0);return()=>{window.clearTimeout(o1),_g.removeEventListener("pointerdown",i1),_g.removeEventListener("click",n1.current)}},[_g,t1]),{onPointerDownCapture:()=>r1.current=!0}}function useFocusOutside(e1,_g=globalThis==null?void 0:globalThis.document){const t1=useCallbackRef$1(e1),r1=reactExports.useRef(!1);return reactExports.useEffect(()=>{const n1=i1=>{i1.target&&!r1.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,t1,{originalEvent:i1},{discrete:!1})};return _g.addEventListener("focusin",n1),()=>_g.removeEventListener("focusin",n1)},[_g,t1]),{onFocusCapture:()=>r1.current=!0,onBlurCapture:()=>r1.current=!1}}function dispatchUpdate(){const e1=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(e1)}function handleAndDispatchCustomEvent$1(e1,_g,t1,{discrete:r1}){const n1=t1.originalEvent.target,i1=new CustomEvent(e1,{bubbles:!1,cancelable:!0,detail:t1});_g&&n1.addEventListener(e1,_g,{once:!0}),r1?dispatchDiscreteCustomEvent(n1,i1):n1.dispatchEvent(i1)}var Root$a=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$7="Portal",Portal$4=reactExports.forwardRef((e1,_g)=>{var a1;const{container:t1,...r1}=e1,[n1,i1]=reactExports.useState(!1);useLayoutEffect2(()=>i1(!0),[]);const o1=t1||n1&&((a1=globalThis==null?void 0:globalThis.document)==null?void 0:a1.body);return o1?$7SXl2$reactdom.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...r1,ref:_g}),o1):null});Portal$4.displayName=PORTAL_NAME$7;function useStateMachine$1(e1,_g){return reactExports.useReducer((t1,r1)=>_g[t1][r1]??t1,e1)}var Presence=e1=>{const{present:_g,children:t1}=e1,r1=usePresence(_g),n1=typeof t1=="function"?t1({present:r1.isPresent}):reactExports.Children.only(t1),i1=useComposedRefs(r1.ref,getElementRef(n1));return typeof t1=="function"||r1.isPresent?reactExports.cloneElement(n1,{ref:i1}):null};Presence.displayName="Presence";function usePresence(e1){const[_g,t1]=reactExports.useState(),r1=reactExports.useRef({}),n1=reactExports.useRef(e1),i1=reactExports.useRef("none"),o1=e1?"mounted":"unmounted",[a1,u1]=useStateMachine$1(o1,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const s1=getAnimationName(r1.current);i1.current=a1==="mounted"?s1:"none"},[a1]),useLayoutEffect2(()=>{const s1=r1.current,l1=n1.current;if(l1!==e1){const d1=i1.current,h1=getAnimationName(s1);e1?u1("MOUNT"):h1==="none"||(s1==null?void 0:s1.display)==="none"?u1("UNMOUNT"):u1(l1&&d1!==h1?"ANIMATION_OUT":"UNMOUNT"),n1.current=e1}},[e1,u1]),useLayoutEffect2(()=>{if(_g){const s1=c1=>{const h1=getAnimationName(r1.current).includes(c1.animationName);c1.target===_g&&h1&&reactDomExports.flushSync(()=>u1("ANIMATION_END"))},l1=c1=>{c1.target===_g&&(i1.current=getAnimationName(r1.current))};return _g.addEventListener("animationstart",l1),_g.addEventListener("animationcancel",s1),_g.addEventListener("animationend",s1),()=>{_g.removeEventListener("animationstart",l1),_g.removeEventListener("animationcancel",s1),_g.removeEventListener("animationend",s1)}}else u1("ANIMATION_END")},[_g,u1]),{isPresent:["mounted","unmountSuspended"].includes(a1),ref:reactExports.useCallback(s1=>{s1&&(r1.current=getComputedStyle(s1)),t1(s1)},[])}}function getAnimationName(e1){return(e1==null?void 0:e1.animationName)||"none"}function getElementRef(e1){var r1,n1;let _g=(r1=Object.getOwnPropertyDescriptor(e1.props,"ref"))==null?void 0:r1.get,t1=_g&&"isReactWarning"in _g&&_g.isReactWarning;return t1?e1.ref:(_g=(n1=Object.getOwnPropertyDescriptor(e1,"ref"))==null?void 0:n1.get,t1=_g&&"isReactWarning"in _g&&_g.isReactWarning,t1?e1.props.ref:e1.props.ref||e1.ref)}function useControllableState({prop:e1,defaultProp:_g,onChange:t1=()=>{}}){const[r1,n1]=useUncontrolledState({defaultProp:_g,onChange:t1}),i1=e1!==void 0,o1=i1?e1:r1,a1=useCallbackRef$1(t1),u1=reactExports.useCallback(s1=>{if(i1){const c1=typeof s1=="function"?s1(e1):s1;c1!==e1&&a1(c1)}else n1(s1)},[i1,e1,n1,a1]);return[o1,u1]}function useUncontrolledState({defaultProp:e1,onChange:_g}){const t1=reactExports.useState(e1),[r1]=t1,n1=reactExports.useRef(r1),i1=useCallbackRef$1(_g);return reactExports.useEffect(()=>{n1.current!==r1&&(i1(r1),n1.current=r1)},[r1,n1,i1]),t1}var NAME$4="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((e1,_g)=>jsxRuntimeExports.jsx(Primitive.span,{...e1,ref:_g,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e1.style}}));VisuallyHidden.displayName=NAME$4;var Root$9=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection$5,useCollection$5,createCollectionScope$5]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope("Toast",[createCollectionScope$5]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=e1=>{const{__scopeToast:_g,label:t1="Notification",duration:r1=5e3,swipeDirection:n1="right",swipeThreshold:i1=50,children:o1}=e1,[a1,u1]=reactExports.useState(null),[s1,l1]=reactExports.useState(0),c1=reactExports.useRef(!1),d1=reactExports.useRef(!1);return t1.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$5.Provider,{scope:_g,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:_g,label:t1,duration:r1,swipeDirection:n1,swipeThreshold:i1,toastCount:s1,viewport:a1,onViewportChange:u1,onToastAdd:reactExports.useCallback(()=>l1(h1=>h1+1),[]),onToastRemove:reactExports.useCallback(()=>l1(h1=>h1-1),[]),isFocusedToastEscapeKeyDownRef:c1,isClosePausedRef:d1,children:o1})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$2="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((e1,_g)=>{const{__scopeToast:t1,hotkey:r1=VIEWPORT_DEFAULT_HOTKEY,label:n1="Notifications ({hotkey})",...i1}=e1,o1=useToastProviderContext(VIEWPORT_NAME$2,t1),a1=useCollection$5(t1),u1=reactExports.useRef(null),s1=reactExports.useRef(null),l1=reactExports.useRef(null),c1=reactExports.useRef(null),d1=useComposedRefs(_g,c1,o1.onViewportChange),h1=r1.join("+").replace(/Key/g,"").replace(/Digit/g,""),f1=o1.toastCount>0;reactExports.useEffect(()=>{const v1=$1=>{var _1;r1.every(E1=>$1[E1]||$1.code===E1)&&((_1=c1.current)==null||_1.focus())};return document.addEventListener("keydown",v1),()=>document.removeEventListener("keydown",v1)},[r1]),reactExports.useEffect(()=>{const v1=u1.current,$1=c1.current;if(f1&&v1&&$1){const y1=()=>{if(!o1.isClosePausedRef.current){const P1=new CustomEvent(VIEWPORT_PAUSE);$1.dispatchEvent(P1),o1.isClosePausedRef.current=!0}},_1=()=>{if(o1.isClosePausedRef.current){const P1=new CustomEvent(VIEWPORT_RESUME);$1.dispatchEvent(P1),o1.isClosePausedRef.current=!1}},E1=P1=>{!v1.contains(P1.relatedTarget)&&_1()},T1=()=>{v1.contains(document.activeElement)||_1()};return v1.addEventListener("focusin",y1),v1.addEventListener("focusout",E1),v1.addEventListener("pointermove",y1),v1.addEventListener("pointerleave",T1),window.addEventListener("blur",y1),window.addEventListener("focus",_1),()=>{v1.removeEventListener("focusin",y1),v1.removeEventListener("focusout",E1),v1.removeEventListener("pointermove",y1),v1.removeEventListener("pointerleave",T1),window.removeEventListener("blur",y1),window.removeEventListener("focus",_1)}}},[f1,o1.isClosePausedRef]);const g1=reactExports.useCallback(({tabbingDirection:v1})=>{const y1=a1().map(_1=>{const E1=_1.ref.current,T1=[E1,...getTabbableCandidates$1(E1)];return v1==="forwards"?T1:T1.reverse()});return(v1==="forwards"?y1.reverse():y1).flat()},[a1]);return reactExports.useEffect(()=>{const v1=c1.current;if(v1){const $1=y1=>{var T1,P1,k1;const _1=y1.altKey||y1.ctrlKey||y1.metaKey;if(y1.key==="Tab"&&!_1){const N1=document.activeElement,W1=y1.shiftKey;if(y1.target===v1&&W1){(T1=s1.current)==null||T1.focus();return}const ey=g1({tabbingDirection:W1?"backwards":"forwards"}),ly=ey.findIndex(oy=>oy===N1);focusFirst$3(ey.slice(ly+1))?y1.preventDefault():W1?(P1=s1.current)==null||P1.focus():(k1=l1.current)==null||k1.focus()}};return v1.addEventListener("keydown",$1),()=>v1.removeEventListener("keydown",$1)}},[a1,g1]),jsxRuntimeExports.jsxs(Branch,{ref:u1,role:"region","aria-label":n1.replace("{hotkey}",h1),tabIndex:-1,style:{pointerEvents:f1?void 0:"none"},children:[f1&&jsxRuntimeExports.jsx(FocusProxy,{ref:s1,onFocusFromOutsideViewport:()=>{const v1=g1({tabbingDirection:"forwards"});focusFirst$3(v1)}}),jsxRuntimeExports.jsx(Collection$5.Slot,{scope:t1,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...i1,ref:d1})}),f1&&jsxRuntimeExports.jsx(FocusProxy,{ref:l1,onFocusFromOutsideViewport:()=>{const v1=g1({tabbingDirection:"backwards"});focusFirst$3(v1)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$2;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((e1,_g)=>{const{__scopeToast:t1,onFocusFromOutsideViewport:r1,...n1}=e1,i1=useToastProviderContext(FOCUS_PROXY_NAME,t1);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...n1,ref:_g,style:{position:"fixed"},onFocus:o1=>{var s1;const a1=o1.relatedTarget;!((s1=i1.viewport)!=null&&s1.contains(a1))&&r1()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((e1,_g)=>{const{forceMount:t1,open:r1,defaultOpen:n1,onOpenChange:i1,...o1}=e1,[a1=!0,u1]=useControllableState({prop:r1,defaultProp:n1,onChange:i1});return jsxRuntimeExports.jsx(Presence,{present:t1||a1,children:jsxRuntimeExports.jsx(ToastImpl,{open:a1,...o1,ref:_g,onClose:()=>u1(!1),onPause:useCallbackRef$1(e1.onPause),onResume:useCallbackRef$1(e1.onResume),onSwipeStart:composeEventHandlers(e1.onSwipeStart,s1=>{s1.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(e1.onSwipeMove,s1=>{const{x:l1,y:c1}=s1.detail.delta;s1.currentTarget.setAttribute("data-swipe","move"),s1.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${l1}px`),s1.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${c1}px`)}),onSwipeCancel:composeEventHandlers(e1.onSwipeCancel,s1=>{s1.currentTarget.setAttribute("data-swipe","cancel"),s1.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),s1.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),s1.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),s1.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(e1.onSwipeEnd,s1=>{const{x:l1,y:c1}=s1.detail.delta;s1.currentTarget.setAttribute("data-swipe","end"),s1.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),s1.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),s1.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${l1}px`),s1.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${c1}px`),u1(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeToast:t1,type:r1="foreground",duration:n1,open:i1,onClose:o1,onEscapeKeyDown:a1,onPause:u1,onResume:s1,onSwipeStart:l1,onSwipeMove:c1,onSwipeCancel:d1,onSwipeEnd:h1,...f1}=e1,g1=useToastProviderContext(TOAST_NAME,t1),[v1,$1]=reactExports.useState(null),y1=useComposedRefs(_g,oy=>$1(oy)),_1=reactExports.useRef(null),E1=reactExports.useRef(null),T1=n1||g1.duration,P1=reactExports.useRef(0),k1=reactExports.useRef(T1),N1=reactExports.useRef(0),{onToastAdd:W1,onToastRemove:H1}=g1,ty=useCallbackRef$1(()=>{var Q1;(v1==null?void 0:v1.contains(document.activeElement))&&((Q1=g1.viewport)==null||Q1.focus()),o1()}),ey=reactExports.useCallback(oy=>{!oy||oy===1/0||(window.clearTimeout(N1.current),P1.current=new Date().getTime(),N1.current=window.setTimeout(ty,oy))},[ty]);reactExports.useEffect(()=>{const oy=g1.viewport;if(oy){const Q1=()=>{ey(k1.current),s1==null||s1()},U1=()=>{const V1=new Date().getTime()-P1.current;k1.current=k1.current-V1,window.clearTimeout(N1.current),u1==null||u1()};return oy.addEventListener(VIEWPORT_PAUSE,U1),oy.addEventListener(VIEWPORT_RESUME,Q1),()=>{oy.removeEventListener(VIEWPORT_PAUSE,U1),oy.removeEventListener(VIEWPORT_RESUME,Q1)}}},[g1.viewport,T1,u1,s1,ey]),reactExports.useEffect(()=>{i1&&!g1.isClosePausedRef.current&&ey(T1)},[i1,T1,g1.isClosePausedRef,ey]),reactExports.useEffect(()=>(W1(),()=>H1()),[W1,H1]);const ly=reactExports.useMemo(()=>v1?getAnnounceTextContent(v1):null,[v1]);return g1.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ly&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:t1,role:"status","aria-live":r1==="foreground"?"assertive":"polite","aria-atomic":!0,children:ly}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:t1,onClose:ty,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$5.ItemSlot,{scope:t1,children:jsxRuntimeExports.jsx(Root$a,{asChild:!0,onEscapeKeyDown:composeEventHandlers(a1,()=>{g1.isFocusedToastEscapeKeyDownRef.current||ty(),g1.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i1?"open":"closed","data-swipe-direction":g1.swipeDirection,...f1,ref:y1,style:{userSelect:"none",touchAction:"none",...e1.style},onKeyDown:composeEventHandlers(e1.onKeyDown,oy=>{oy.key==="Escape"&&(a1==null||a1(oy.nativeEvent),oy.nativeEvent.defaultPrevented||(g1.isFocusedToastEscapeKeyDownRef.current=!0,ty()))}),onPointerDown:composeEventHandlers(e1.onPointerDown,oy=>{oy.button===0&&(_1.current={x:oy.clientX,y:oy.clientY})}),onPointerMove:composeEventHandlers(e1.onPointerMove,oy=>{if(!_1.current)return;const Q1=oy.clientX-_1.current.x,U1=oy.clientY-_1.current.y,V1=!!E1.current,K1=["left","right"].includes(g1.swipeDirection),J1=["left","up"].includes(g1.swipeDirection)?Math.min:Math.max,hy=K1?J1(0,Q1):0,G1=K1?0:J1(0,U1),Y1=oy.pointerType==="touch"?10:2,yy={x:hy,y:G1},Oy={originalEvent:oy,delta:yy};V1?(E1.current=yy,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,c1,Oy,{discrete:!1})):isDeltaInDirection(yy,g1.swipeDirection,Y1)?(E1.current=yy,handleAndDispatchCustomEvent(TOAST_SWIPE_START,l1,Oy,{discrete:!1}),oy.target.setPointerCapture(oy.pointerId)):(Math.abs(Q1)>Y1||Math.abs(U1)>Y1)&&(_1.current=null)}),onPointerUp:composeEventHandlers(e1.onPointerUp,oy=>{const Q1=E1.current,U1=oy.target;if(U1.hasPointerCapture(oy.pointerId)&&U1.releasePointerCapture(oy.pointerId),E1.current=null,_1.current=null,Q1){const V1=oy.currentTarget,K1={originalEvent:oy,delta:Q1};isDeltaInDirection(Q1,g1.swipeDirection,g1.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,h1,K1,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,d1,K1,{discrete:!0}),V1.addEventListener("click",J1=>J1.preventDefault(),{once:!0})}})})})}),g1.viewport)})]}):null}),ToastAnnounce=e1=>{const{__scopeToast:_g,children:t1,...r1}=e1,n1=useToastProviderContext(TOAST_NAME,_g),[i1,o1]=reactExports.useState(!1),[a1,u1]=reactExports.useState(!1);return useNextFrame(()=>o1(!0)),reactExports.useEffect(()=>{const s1=window.setTimeout(()=>u1(!0),1e3);return()=>window.clearTimeout(s1)},[]),a1?null:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...r1,children:i1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n1.label," ",t1]})})})},TITLE_NAME$2="ToastTitle",ToastTitle$1=reactExports.forwardRef((e1,_g)=>{const{__scopeToast:t1,...r1}=e1;return jsxRuntimeExports.jsx(Primitive.div,{...r1,ref:_g})});ToastTitle$1.displayName=TITLE_NAME$2;var DESCRIPTION_NAME$2="ToastDescription",ToastDescription$1=reactExports.forwardRef((e1,_g)=>{const{__scopeToast:t1,...r1}=e1;return jsxRuntimeExports.jsx(Primitive.div,{...r1,ref:_g})});ToastDescription$1.displayName=DESCRIPTION_NAME$2;var ACTION_NAME$1="ToastAction",ToastAction$1=reactExports.forwardRef((e1,_g)=>{const{altText:t1,...r1}=e1;return t1.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:t1,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...r1,ref:_g})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME$1}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME$1;var CLOSE_NAME$2="ToastClose",ToastClose$1=reactExports.forwardRef((e1,_g)=>{const{__scopeToast:t1,...r1}=e1,n1=useToastInteractiveContext(CLOSE_NAME$2,t1);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...r1,ref:_g,onClick:composeEventHandlers(e1.onClick,n1.onClose)})})});ToastClose$1.displayName=CLOSE_NAME$2;var ToastAnnounceExclude=reactExports.forwardRef((e1,_g)=>{const{__scopeToast:t1,altText:r1,...n1}=e1;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r1||void 0,...n1,ref:_g})});function getAnnounceTextContent(e1){const _g=[];return Array.from(e1.childNodes).forEach(r1=>{if(r1.nodeType===r1.TEXT_NODE&&r1.textContent&&_g.push(r1.textContent),isHTMLElement$2(r1)){const n1=r1.ariaHidden||r1.hidden||r1.style.display==="none",i1=r1.dataset.radixToastAnnounceExclude==="";if(!n1)if(i1){const o1=r1.dataset.radixToastAnnounceAlt;o1&&_g.push(o1)}else _g.push(...getAnnounceTextContent(r1))}}),_g}function handleAndDispatchCustomEvent(e1,_g,t1,{discrete:r1}){const n1=t1.originalEvent.currentTarget,i1=new CustomEvent(e1,{bubbles:!0,cancelable:!0,detail:t1});_g&&n1.addEventListener(e1,_g,{once:!0}),r1?dispatchDiscreteCustomEvent(n1,i1):n1.dispatchEvent(i1)}var isDeltaInDirection=(e1,_g,t1=0)=>{const r1=Math.abs(e1.x),n1=Math.abs(e1.y),i1=r1>n1;return _g==="left"||_g==="right"?i1&&r1>t1:!i1&&n1>t1};function useNextFrame(e1=()=>{}){const _g=useCallbackRef$1(e1);useLayoutEffect2(()=>{let t1=0,r1=0;return t1=window.requestAnimationFrame(()=>r1=window.requestAnimationFrame(_g)),()=>{window.cancelAnimationFrame(t1),window.cancelAnimationFrame(r1)}},[_g])}function isHTMLElement$2(e1){return e1.nodeType===e1.ELEMENT_NODE}function getTabbableCandidates$1(e1){const _g=[],t1=document.createTreeWalker(e1,NodeFilter.SHOW_ELEMENT,{acceptNode:r1=>{const n1=r1.tagName==="INPUT"&&r1.type==="hidden";return r1.disabled||r1.hidden||n1?NodeFilter.FILTER_SKIP:r1.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t1.nextNode();)_g.push(t1.currentNode);return _g}function focusFirst$3(e1){const _g=document.activeElement;return e1.some(t1=>t1===_g?!0:(t1.focus(),document.activeElement!==_g))}var Provider$1=ToastProvider$1,Viewport$2=ToastViewport$1,Root2$5=Toast$1,Title$1=ToastTitle$1,Description$1=ToastDescription$1,Action$1=ToastAction$1,Close$1=ToastClose$1;function r$5(e1){var _g,t1,r1="";if(typeof e1=="string"||typeof e1=="number")r1+=e1;else if(typeof e1=="object")if(Array.isArray(e1))for(_g=0;_g<e1.length;_g++)e1[_g]&&(t1=r$5(e1[_g]))&&(r1&&(r1+=" "),r1+=t1);else for(_g in e1)e1[_g]&&(r1&&(r1+=" "),r1+=_g);return r1}function clsx$1(){for(var e1,_g,t1=0,r1="";t1<arguments.length;)(e1=arguments[t1++])&&(_g=r$5(e1))&&(r1&&(r1+=" "),r1+=_g);return r1}const falsyToString=e1=>typeof e1=="boolean"?"".concat(e1):e1===0?"0":e1,cx=clsx$1,cva=(e1,_g)=>t1=>{var r1;if((_g==null?void 0:_g.variants)==null)return cx(e1,t1==null?void 0:t1.class,t1==null?void 0:t1.className);const{variants:n1,defaultVariants:i1}=_g,o1=Object.keys(n1).map(s1=>{const l1=t1==null?void 0:t1[s1],c1=i1==null?void 0:i1[s1];if(l1===null)return null;const d1=falsyToString(l1)||falsyToString(c1);return n1[s1][d1]}),a1=t1&&Object.entries(t1).reduce((s1,l1)=>{let[c1,d1]=l1;return d1===void 0||(s1[c1]=d1),s1},{}),u1=_g==null||(r1=_g.compoundVariants)===null||r1===void 0?void 0:r1.reduce((s1,l1)=>{let{class:c1,className:d1,...h1}=l1;return Object.entries(h1).every(f1=>{let[g1,v1]=f1;return Array.isArray(v1)?v1.includes({...i1,...a1}[g1]):{...i1,...a1}[g1]===v1})?[...s1,c1,d1]:s1},[]);return cx(e1,o1,u1,t1==null?void 0:t1.class,t1==null?void 0:t1.className)};function r$4(e1){var _g,t1,r1="";if(typeof e1=="string"||typeof e1=="number")r1+=e1;else if(typeof e1=="object")if(Array.isArray(e1)){var n1=e1.length;for(_g=0;_g<n1;_g++)e1[_g]&&(t1=r$4(e1[_g]))&&(r1&&(r1+=" "),r1+=t1)}else for(t1 in e1)e1[t1]&&(r1&&(r1+=" "),r1+=t1);return r1}function clsx(){for(var e1,_g,t1=0,r1="",n1=arguments.length;t1<n1;t1++)(e1=arguments[t1])&&(_g=r$4(e1))&&(r1&&(r1+=" "),r1+=_g);return r1}const CLASS_PART_SEPARATOR="-";function createClassGroupUtils(e1){const _g=createClassMap(e1),{conflictingClassGroups:t1,conflictingClassGroupModifiers:r1}=e1;function n1(o1){const a1=o1.split(CLASS_PART_SEPARATOR);return a1[0]===""&&a1.length!==1&&a1.shift(),getGroupRecursive(a1,_g)||getGroupIdForArbitraryProperty(o1)}function i1(o1,a1){const u1=t1[o1]||[];return a1&&r1[o1]?[...u1,...r1[o1]]:u1}return{getClassGroupId:n1,getConflictingClassGroupIds:i1}}function getGroupRecursive(e1,_g){var o1;if(e1.length===0)return _g.classGroupId;const t1=e1[0],r1=_g.nextPart.get(t1),n1=r1?getGroupRecursive(e1.slice(1),r1):void 0;if(n1)return n1;if(_g.validators.length===0)return;const i1=e1.join(CLASS_PART_SEPARATOR);return(o1=_g.validators.find(({validator:a1})=>a1(i1)))==null?void 0:o1.classGroupId}const arbitraryPropertyRegex=/^\[(.+)\]$/;function getGroupIdForArbitraryProperty(e1){if(arbitraryPropertyRegex.test(e1)){const _g=arbitraryPropertyRegex.exec(e1)[1],t1=_g==null?void 0:_g.substring(0,_g.indexOf(":"));if(t1)return"arbitrary.."+t1}}function createClassMap(e1){const{theme:_g,prefix:t1}=e1,r1={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(e1.classGroups),t1).forEach(([i1,o1])=>{processClassesRecursively(o1,r1,i1,_g)}),r1}function processClassesRecursively(e1,_g,t1,r1){e1.forEach(n1=>{if(typeof n1=="string"){const i1=n1===""?_g:getPart(_g,n1);i1.classGroupId=t1;return}if(typeof n1=="function"){if(isThemeGetter(n1)){processClassesRecursively(n1(r1),_g,t1,r1);return}_g.validators.push({validator:n1,classGroupId:t1});return}Object.entries(n1).forEach(([i1,o1])=>{processClassesRecursively(o1,getPart(_g,i1),t1,r1)})})}function getPart(e1,_g){let t1=e1;return _g.split(CLASS_PART_SEPARATOR).forEach(r1=>{t1.nextPart.has(r1)||t1.nextPart.set(r1,{nextPart:new Map,validators:[]}),t1=t1.nextPart.get(r1)}),t1}function isThemeGetter(e1){return e1.isThemeGetter}function getPrefixedClassGroupEntries(e1,_g){return _g?e1.map(([t1,r1])=>{const n1=r1.map(i1=>typeof i1=="string"?_g+i1:typeof i1=="object"?Object.fromEntries(Object.entries(i1).map(([o1,a1])=>[_g+o1,a1])):i1);return[t1,n1]}):e1}function createLruCache(e1){if(e1<1)return{get:()=>{},set:()=>{}};let _g=0,t1=new Map,r1=new Map;function n1(i1,o1){t1.set(i1,o1),_g++,_g>e1&&(_g=0,r1=t1,t1=new Map)}return{get(i1){let o1=t1.get(i1);if(o1!==void 0)return o1;if((o1=r1.get(i1))!==void 0)return n1(i1,o1),o1},set(i1,o1){t1.has(i1)?t1.set(i1,o1):n1(i1,o1)}}}const IMPORTANT_MODIFIER="!";function createParseClassName(e1){const{separator:_g,experimentalParseClassName:t1}=e1,r1=_g.length===1,n1=_g[0],i1=_g.length;function o1(a1){const u1=[];let s1=0,l1=0,c1;for(let v1=0;v1<a1.length;v1++){let $1=a1[v1];if(s1===0){if($1===n1&&(r1||a1.slice(v1,v1+i1)===_g)){u1.push(a1.slice(l1,v1)),l1=v1+i1;continue}if($1==="/"){c1=v1;continue}}$1==="["?s1++:$1==="]"&&s1--}const d1=u1.length===0?a1:a1.substring(l1),h1=d1.startsWith(IMPORTANT_MODIFIER),f1=h1?d1.substring(1):d1,g1=c1&&c1>l1?c1-l1:void 0;return{modifiers:u1,hasImportantModifier:h1,baseClassName:f1,maybePostfixModifierPosition:g1}}return t1?function(u1){return t1({className:u1,parseClassName:o1})}:o1}function sortModifiers(e1){if(e1.length<=1)return e1;const _g=[];let t1=[];return e1.forEach(r1=>{r1[0]==="["?(_g.push(...t1.sort(),r1),t1=[]):t1.push(r1)}),_g.push(...t1.sort()),_g}function createConfigUtils(e1){return{cache:createLruCache(e1.cacheSize),parseClassName:createParseClassName(e1),...createClassGroupUtils(e1)}}const SPLIT_CLASSES_REGEX=/\s+/;function mergeClassList(e1,_g){const{parseClassName:t1,getClassGroupId:r1,getConflictingClassGroupIds:n1}=_g,i1=new Set;return e1.trim().split(SPLIT_CLASSES_REGEX).map(o1=>{const{modifiers:a1,hasImportantModifier:u1,baseClassName:s1,maybePostfixModifierPosition:l1}=t1(o1);let c1=!!l1,d1=r1(c1?s1.substring(0,l1):s1);if(!d1){if(!c1)return{isTailwindClass:!1,originalClassName:o1};if(d1=r1(s1),!d1)return{isTailwindClass:!1,originalClassName:o1};c1=!1}const h1=sortModifiers(a1).join(":");return{isTailwindClass:!0,modifierId:u1?h1+IMPORTANT_MODIFIER:h1,classGroupId:d1,originalClassName:o1,hasPostfixModifier:c1}}).reverse().filter(o1=>{if(!o1.isTailwindClass)return!0;const{modifierId:a1,classGroupId:u1,hasPostfixModifier:s1}=o1,l1=a1+u1;return i1.has(l1)?!1:(i1.add(l1),n1(u1,s1).forEach(c1=>i1.add(a1+c1)),!0)}).reverse().map(o1=>o1.originalClassName).join(" ")}function twJoin(){let e1=0,_g,t1,r1="";for(;e1<arguments.length;)(_g=arguments[e1++])&&(t1=toValue(_g))&&(r1&&(r1+=" "),r1+=t1);return r1}function toValue(e1){if(typeof e1=="string")return e1;let _g,t1="";for(let r1=0;r1<e1.length;r1++)e1[r1]&&(_g=toValue(e1[r1]))&&(t1&&(t1+=" "),t1+=_g);return t1}function createTailwindMerge(e1,..._g){let t1,r1,n1,i1=o1;function o1(u1){const s1=_g.reduce((l1,c1)=>c1(l1),e1());return t1=createConfigUtils(s1),r1=t1.cache.get,n1=t1.cache.set,i1=a1,a1(u1)}function a1(u1){const s1=r1(u1);if(s1)return s1;const l1=mergeClassList(u1,t1);return n1(u1,l1),l1}return function(){return i1(twJoin.apply(null,arguments))}}function fromTheme(e1){const _g=t1=>t1[e1]||[];return _g.isThemeGetter=!0,_g}const arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function isLength(e1){return isNumber$1(e1)||stringLengths.has(e1)||fractionRegex.test(e1)}function isArbitraryLength(e1){return getIsArbitraryValue(e1,"length",isLengthOnly)}function isNumber$1(e1){return!!e1&&!Number.isNaN(Number(e1))}function isArbitraryNumber(e1){return getIsArbitraryValue(e1,"number",isNumber$1)}function isInteger(e1){return!!e1&&Number.isInteger(Number(e1))}function isPercent(e1){return e1.endsWith("%")&&isNumber$1(e1.slice(0,-1))}function isArbitraryValue(e1){return arbitraryValueRegex.test(e1)}function isTshirtSize(e1){return tshirtUnitRegex.test(e1)}const sizeLabels=new Set(["length","size","percentage"]);function isArbitrarySize(e1){return getIsArbitraryValue(e1,sizeLabels,isNever)}function isArbitraryPosition(e1){return getIsArbitraryValue(e1,"position",isNever)}const imageLabels=new Set(["image","url"]);function isArbitraryImage(e1){return getIsArbitraryValue(e1,imageLabels,isImage)}function isArbitraryShadow(e1){return getIsArbitraryValue(e1,"",isShadow)}function isAny(){return!0}function getIsArbitraryValue(e1,_g,t1){const r1=arbitraryValueRegex.exec(e1);return r1?r1[1]?typeof _g=="string"?r1[1]===_g:_g.has(r1[1]):t1(r1[2]):!1}function isLengthOnly(e1){return lengthUnitRegex.test(e1)&&!colorFunctionRegex.test(e1)}function isNever(){return!1}function isShadow(e1){return shadowRegex.test(e1)}function isImage(e1){return imageRegex.test(e1)}function getDefaultConfig(){const e1=fromTheme("colors"),_g=fromTheme("spacing"),t1=fromTheme("blur"),r1=fromTheme("brightness"),n1=fromTheme("borderColor"),i1=fromTheme("borderRadius"),o1=fromTheme("borderSpacing"),a1=fromTheme("borderWidth"),u1=fromTheme("contrast"),s1=fromTheme("grayscale"),l1=fromTheme("hueRotate"),c1=fromTheme("invert"),d1=fromTheme("gap"),h1=fromTheme("gradientColorStops"),f1=fromTheme("gradientColorStopPositions"),g1=fromTheme("inset"),v1=fromTheme("margin"),$1=fromTheme("opacity"),y1=fromTheme("padding"),_1=fromTheme("saturate"),E1=fromTheme("scale"),T1=fromTheme("sepia"),P1=fromTheme("skew"),k1=fromTheme("space"),N1=fromTheme("translate"),W1=()=>["auto","contain","none"],H1=()=>["auto","hidden","clip","visible","scroll"],ty=()=>["auto",isArbitraryValue,_g],ey=()=>[isArbitraryValue,_g],ly=()=>["",isLength,isArbitraryLength],oy=()=>["auto",isNumber$1,isArbitraryValue],Q1=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U1=()=>["solid","dashed","dotted","double","none"],V1=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K1=()=>["start","end","center","between","around","evenly","stretch"],J1=()=>["","0",isArbitraryValue],hy=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G1=()=>[isNumber$1,isArbitraryNumber],Y1=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:G1(),borderColor:[e1],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:ey(),borderWidth:ly(),contrast:G1(),grayscale:J1(),hueRotate:Y1(),invert:J1(),gap:ey(),gradientColorStops:[e1],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:ty(),margin:ty(),opacity:G1(),padding:ey(),saturate:G1(),scale:G1(),sepia:J1(),skew:Y1(),space:ey(),translate:ey()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":hy()}],"break-before":[{"break-before":hy()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q1(),isArbitraryValue]}],overflow:[{overflow:H1()}],"overflow-x":[{"overflow-x":H1()}],"overflow-y":[{"overflow-y":H1()}],overscroll:[{overscroll:W1()}],"overscroll-x":[{"overscroll-x":W1()}],"overscroll-y":[{"overscroll-y":W1()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g1]}],"inset-x":[{"inset-x":[g1]}],"inset-y":[{"inset-y":[g1]}],start:[{start:[g1]}],end:[{end:[g1]}],top:[{top:[g1]}],right:[{right:[g1]}],bottom:[{bottom:[g1]}],left:[{left:[g1]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:ty()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:J1()}],shrink:[{shrink:J1()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":oy()}],"col-end":[{"col-end":oy()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":oy()}],"row-end":[{"row-end":oy()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[d1]}],"gap-x":[{"gap-x":[d1]}],"gap-y":[{"gap-y":[d1]}],"justify-content":[{justify:["normal",...K1()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K1(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K1(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y1]}],px:[{px:[y1]}],py:[{py:[y1]}],ps:[{ps:[y1]}],pe:[{pe:[y1]}],pt:[{pt:[y1]}],pr:[{pr:[y1]}],pb:[{pb:[y1]}],pl:[{pl:[y1]}],m:[{m:[v1]}],mx:[{mx:[v1]}],my:[{my:[v1]}],ms:[{ms:[v1]}],me:[{me:[v1]}],mt:[{mt:[v1]}],mr:[{mr:[v1]}],mb:[{mb:[v1]}],ml:[{ml:[v1]}],"space-x":[{"space-x":[k1]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k1]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,_g]}],"min-w":[{"min-w":[isArbitraryValue,_g,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,_g,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,_g,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,_g,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,_g,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,_g,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e1]}],"placeholder-opacity":[{"placeholder-opacity":[$1]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e1]}],"text-opacity":[{"text-opacity":[$1]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U1(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[e1]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ey()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[$1]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q1(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[e1]}],"gradient-from-pos":[{from:[f1]}],"gradient-via-pos":[{via:[f1]}],"gradient-to-pos":[{to:[f1]}],"gradient-from":[{from:[h1]}],"gradient-via":[{via:[h1]}],"gradient-to":[{to:[h1]}],rounded:[{rounded:[i1]}],"rounded-s":[{"rounded-s":[i1]}],"rounded-e":[{"rounded-e":[i1]}],"rounded-t":[{"rounded-t":[i1]}],"rounded-r":[{"rounded-r":[i1]}],"rounded-b":[{"rounded-b":[i1]}],"rounded-l":[{"rounded-l":[i1]}],"rounded-ss":[{"rounded-ss":[i1]}],"rounded-se":[{"rounded-se":[i1]}],"rounded-ee":[{"rounded-ee":[i1]}],"rounded-es":[{"rounded-es":[i1]}],"rounded-tl":[{"rounded-tl":[i1]}],"rounded-tr":[{"rounded-tr":[i1]}],"rounded-br":[{"rounded-br":[i1]}],"rounded-bl":[{"rounded-bl":[i1]}],"border-w":[{border:[a1]}],"border-w-x":[{"border-x":[a1]}],"border-w-y":[{"border-y":[a1]}],"border-w-s":[{"border-s":[a1]}],"border-w-e":[{"border-e":[a1]}],"border-w-t":[{"border-t":[a1]}],"border-w-r":[{"border-r":[a1]}],"border-w-b":[{"border-b":[a1]}],"border-w-l":[{"border-l":[a1]}],"border-opacity":[{"border-opacity":[$1]}],"border-style":[{border:[...U1(),"hidden"]}],"divide-x":[{"divide-x":[a1]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a1]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[$1]}],"divide-style":[{divide:U1()}],"border-color":[{border:[n1]}],"border-color-x":[{"border-x":[n1]}],"border-color-y":[{"border-y":[n1]}],"border-color-t":[{"border-t":[n1]}],"border-color-r":[{"border-r":[n1]}],"border-color-b":[{"border-b":[n1]}],"border-color-l":[{"border-l":[n1]}],"divide-color":[{divide:[n1]}],"outline-style":[{outline:["",...U1()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[e1]}],"ring-w":[{ring:ly()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e1]}],"ring-opacity":[{"ring-opacity":[$1]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[e1]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[$1]}],"mix-blend":[{"mix-blend":[...V1(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V1()}],filter:[{filter:["","none"]}],blur:[{blur:[t1]}],brightness:[{brightness:[r1]}],contrast:[{contrast:[u1]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[s1]}],"hue-rotate":[{"hue-rotate":[l1]}],invert:[{invert:[c1]}],saturate:[{saturate:[_1]}],sepia:[{sepia:[T1]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t1]}],"backdrop-brightness":[{"backdrop-brightness":[r1]}],"backdrop-contrast":[{"backdrop-contrast":[u1]}],"backdrop-grayscale":[{"backdrop-grayscale":[s1]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[l1]}],"backdrop-invert":[{"backdrop-invert":[c1]}],"backdrop-opacity":[{"backdrop-opacity":[$1]}],"backdrop-saturate":[{"backdrop-saturate":[_1]}],"backdrop-sepia":[{"backdrop-sepia":[T1]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o1]}],"border-spacing-x":[{"border-spacing-x":[o1]}],"border-spacing-y":[{"border-spacing-y":[o1]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:Y1()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:Y1()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E1]}],"scale-x":[{"scale-x":[E1]}],"scale-y":[{"scale-y":[E1]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[N1]}],"translate-y":[{"translate-y":[N1]}],"skew-x":[{"skew-x":[P1]}],"skew-y":[{"skew-y":[P1]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",e1]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[e1]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ey()}],"scroll-mx":[{"scroll-mx":ey()}],"scroll-my":[{"scroll-my":ey()}],"scroll-ms":[{"scroll-ms":ey()}],"scroll-me":[{"scroll-me":ey()}],"scroll-mt":[{"scroll-mt":ey()}],"scroll-mr":[{"scroll-mr":ey()}],"scroll-mb":[{"scroll-mb":ey()}],"scroll-ml":[{"scroll-ml":ey()}],"scroll-p":[{"scroll-p":ey()}],"scroll-px":[{"scroll-px":ey()}],"scroll-py":[{"scroll-py":ey()}],"scroll-ps":[{"scroll-ps":ey()}],"scroll-pe":[{"scroll-pe":ey()}],"scroll-pt":[{"scroll-pt":ey()}],"scroll-pr":[{"scroll-pr":ey()}],"scroll-pb":[{"scroll-pb":ey()}],"scroll-pl":[{"scroll-pl":ey()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[e1,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[e1,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const twMerge=createTailwindMerge(getDefaultConfig),DEFAULT_BRUSH_SIZE=40,MIN_BRUSH_SIZE=3,MAX_BRUSH_SIZE=200,MODEL_TYPE_INPAINT="inpaint",MODEL_TYPE_DIFFUSERS_SD="diffusers_sd",MODEL_TYPE_DIFFUSERS_SDXL="diffusers_sdxl",MODEL_TYPE_DIFFUSERS_SD_INPAINT="diffusers_sd_inpaint",MODEL_TYPE_DIFFUSERS_SDXL_INPAINT="diffusers_sdxl_inpaint",MODEL_TYPE_OTHER="diffusers_other",BRUSH_COLOR="#ffcc00bb",LDM="ldm",CV2="cv2",PAINT_BY_EXAMPLE="Fantasy-Studio/Paint-by-Example",INSTRUCT_PIX2PIX="timbrooks/instruct-pix2pix",POWERPAINT="Sanster/PowerPaint-V1-stable-diffusion-inpainting",ANYTEXT="Sanster/AnyText",DEFAULT_POSITIVE_PROMPT="Lush, vibrant Amazon rainforest at golden hour, showcasing an elegant cosmetic product elegantly positioned on a natural rock amidst exotic flowers using cream colors. Ultra-high definition 4K resolution, capturing breathtaking details with a crystal-clear, cinematic quality. Focus on achieving a serene, tranquil atmosphere that highlights the product’s harmony with nature, ensuring a realistic, highly detailed background that complements the product beautifully without any digital distortion",DEFAULT_NEGATIVE_PROMPT="Exclude pixelation, compression artifacts, noisy backgrounds, visual clutter, unrelated objects, figures, animals, dark or ominous elements, and unnatural colors. No watermarks, branding, or identifying marks not related to the product. Background should be free from distractions, focusing solely on the product, without any visual noise like glitches, jpeg artifacts, or chromatic aberration",predefinedRatios=[{name:"1:1",ratio:1,width:1024,height:1024},{name:"3:2",ratio:3/2,width:1152,height:768},{name:"2:3",ratio:2/3,width:768,height:1152},{name:"4:3",ratio:4/3,width:1152,height:864},{name:"3:4",ratio:3/4,width:864,height:1152},{name:"16:9",ratio:16/9,width:1024,height:576},{name:"9:16",ratio:9/16,width:768,height:1360}],LOG_LEVELS={DEBUG:"debug",INFO:"info",ERROR:"error"};function t$3(e1,_g,t1){return(_g=n$3(_g))in e1?Object.defineProperty(e1,_g,{value:t1,enumerable:!0,configurable:!0,writable:!0}):e1[_g]=t1,e1}function e$1(e1,_g){var t1=Object.keys(e1);if(Object.getOwnPropertySymbols){var r1=Object.getOwnPropertySymbols(e1);_g&&(r1=r1.filter(function(n1){return Object.getOwnPropertyDescriptor(e1,n1).enumerable})),t1.push.apply(t1,r1)}return t1}function s$1(e1){for(var _g=1;_g<arguments.length;_g++){var t1=arguments[_g]!=null?arguments[_g]:{};_g%2?e$1(Object(t1),!0).forEach(function(r1){t$3(e1,r1,t1[r1])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e1,Object.getOwnPropertyDescriptors(t1)):e$1(Object(t1)).forEach(function(r1){Object.defineProperty(e1,r1,Object.getOwnPropertyDescriptor(t1,r1))})}return e1}function i$1(e1,_g){if(e1==null)return{};var t1,r1,n1=function(o1,a1){if(o1==null)return{};var u1={};for(var s1 in o1)if({}.hasOwnProperty.call(o1,s1)){if(a1.indexOf(s1)>=0)continue;u1[s1]=o1[s1]}return u1}(e1,_g);if(Object.getOwnPropertySymbols){var i1=Object.getOwnPropertySymbols(e1);for(r1=0;r1<i1.length;r1++)t1=i1[r1],_g.indexOf(t1)>=0||{}.propertyIsEnumerable.call(e1,t1)&&(n1[t1]=e1[t1])}return n1}function r$3(e1,_g){return _g||(_g=e1.slice(0)),Object.freeze(Object.defineProperties(e1,{raw:{value:Object.freeze(_g)}}))}function n$3(e1){var _g=function(t1,r1){if(typeof t1!="object"||!t1)return t1;var n1=t1[Symbol.toPrimitive];if(n1!==void 0){var i1=n1.call(t1,r1||"default");if(typeof i1!="object")return i1;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r1==="string"?String:Number)(t1)}(e1,"string");return typeof _g=="symbol"?_g:_g+""}let o$1=class{constructor(){t$3(this,"browserShadowBlurConstant",1),t$3(this,"DPI",96),t$3(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),t$3(this,"perfLimitSizeTotal",2097152),t$3(this,"maxCacheSideLimit",4096),t$3(this,"minCacheSideLimit",256),t$3(this,"disableStyleCopyPaste",!1),t$3(this,"enableGLFiltering",!0),t$3(this,"textureSize",4096),t$3(this,"forceGLPutImageData",!1),t$3(this,"cachesBoundsOfCurve",!0),t$3(this,"fontPaths",{}),t$3(this,"NUM_FRACTION_DIGITS",4)}};const a=new class extends o$1{constructor(e1){super(),this.configure(e1)}configure(){let e1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,e1)}addFonts(){let e1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=s$1(s$1({},this.fontPaths),e1)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(e1=>{delete this.fontPaths[e1]})}clearFonts(){this.fontPaths={}}restoreDefaults(e1){const _g=new o$1,t1=(e1==null?void 0:e1.reduce((r1,n1)=>(r1[n1]=_g[n1],r1),{}))||_g;this.configure(t1)}},h$2=function(e1){for(var _g=arguments.length,t1=new Array(_g>1?_g-1:0),r1=1;r1<_g;r1++)t1[r1-1]=arguments[r1];return console[e1]("fabric",...t1)};class c extends Error{constructor(_g,t1){super("fabric: ".concat(_g),t1)}}let l$1=class extends c{constructor(_g){super("".concat(_g," 'options.signal' is in 'aborted' state"))}},u$3=class{};class d extends u$3{testPrecision(_g,t1){const r1="precision ".concat(t1,` float;
void main(){}`),n1=_g.createShader(_g.FRAGMENT_SHADER);return!!n1&&(_g.shaderSource(n1,r1),_g.compileShader(n1),!!_g.getShaderParameter(n1,_g.COMPILE_STATUS))}queryWebGL(_g){const t1=_g.getContext("webgl");t1&&(this.maxTextureSize=t1.getParameter(t1.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r1=>this.testPrecision(t1,r1)),t1.getExtension("WEBGL_lose_context").loseContext(),h$2("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(_g){return!!this.maxTextureSize&&this.maxTextureSize>=_g}}const g={};let f;const m$2=()=>f||(f={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new d,dispose(){},copyPasteData:g}),v$1=()=>m$2().document,y=()=>m$2().window,_$2=()=>{var e1;return Math.max((e1=a.devicePixelRatio)!==null&&e1!==void 0?e1:y().devicePixelRatio,1)},x=new class{constructor(){t$3(this,"charWidthsCache",{}),t$3(this,"boundsOfCurveCache",{})}getFontCache(e1){let{fontFamily:_g,fontStyle:t1,fontWeight:r1}=e1;_g=_g.toLowerCase(),this.charWidthsCache[_g]||(this.charWidthsCache[_g]={});const n1=this.charWidthsCache[_g],i1="".concat(t1.toLowerCase(),"_").concat((r1+"").toLowerCase());return n1[i1]||(n1[i1]={}),n1[i1]}clearFontCache(e1){(e1=(e1||"").toLowerCase())?this.charWidthsCache[e1]&&delete this.charWidthsCache[e1]:this.charWidthsCache={}}limitDimsByArea(e1){const{perfLimitSizeTotal:_g}=a,t1=Math.sqrt(_g*e1);return[Math.floor(t1),Math.floor(_g/t1)]}},C="6.0.2";function b(){}const w$1=Math.PI/2,S=2*Math.PI,T$2=Math.PI/180,O$1=Object.freeze([1,0,0,1,0,0]),k$3=16,D$2=.4477152502,M$3="center",P$1="left",E$1="top",A="bottom",j$1="right",F$1="none",L$2=/\r?\n/,R$1="moving",B$2="scaling",I="rotating",X$3="rotate",W$1="skewing",Y$2="resizing",V$2="modifyPoly",H$2="changed",G$2="scale",z$2="scaleX",N$2="scaleY",U$4="skewX",q$2="skewY",K$2="fill",J$1="stroke",Z$2="modified",Q$3="json",$$1="svg",tt$1=new class{constructor(){this[Q$3]=new Map,this[$$1]=new Map}getClass(e1){const _g=this[Q$3].get(e1);if(!_g)throw new c("No class registered for ".concat(e1));return _g}setClass(e1,_g){_g?this[Q$3].set(_g,e1):(this[Q$3].set(e1.type,e1),this[Q$3].set(e1.type.toLowerCase(),e1))}getSVGClass(e1){return this[$$1].get(e1)}setSVGClass(e1,_g){this[$$1].set(_g??e1.type.toLowerCase(),e1)}},et=new class extends Array{remove(e1){const _g=this.indexOf(e1);_g>-1&&this.splice(_g,1)}cancelAll(){const e1=this.splice(0);return e1.forEach(_g=>_g.abort()),e1}cancelByCanvas(e1){if(!e1)return[];const _g=this.filter(t1=>{var r1;return t1.target===e1||typeof t1.target=="object"&&((r1=t1.target)===null||r1===void 0?void 0:r1.canvas)===e1});return _g.forEach(t1=>t1.abort()),_g}cancelByTarget(e1){if(!e1)return[];const _g=this.filter(t1=>t1.target===e1);return _g.forEach(t1=>t1.abort()),_g}};class st{constructor(){t$3(this,"__eventListeners",{})}on(_g,t1){if(this.__eventListeners||(this.__eventListeners={}),typeof _g=="object")return Object.entries(_g).forEach(r1=>{let[n1,i1]=r1;this.on(n1,i1)}),()=>this.off(_g);if(t1){const r1=_g;return this.__eventListeners[r1]||(this.__eventListeners[r1]=[]),this.__eventListeners[r1].push(t1),()=>this.off(r1,t1)}return()=>!1}once(_g,t1){if(typeof _g=="object"){const r1=[];return Object.entries(_g).forEach(n1=>{let[i1,o1]=n1;r1.push(this.once(i1,o1))}),()=>r1.forEach(n1=>n1())}if(t1){const r1=this.on(_g,function(){for(var n1=arguments.length,i1=new Array(n1),o1=0;o1<n1;o1++)i1[o1]=arguments[o1];t1.call(this,...i1),r1()});return r1}return()=>!1}_removeEventListener(_g,t1){if(this.__eventListeners[_g])if(t1){const r1=this.__eventListeners[_g],n1=r1.indexOf(t1);n1>-1&&r1.splice(n1,1)}else this.__eventListeners[_g]=[]}off(_g,t1){if(this.__eventListeners)if(_g===void 0)for(const r1 in this.__eventListeners)this._removeEventListener(r1);else typeof _g=="object"?Object.entries(_g).forEach(r1=>{let[n1,i1]=r1;this._removeEventListener(n1,i1)}):this._removeEventListener(_g,t1)}fire(_g,t1){var r1;if(!this.__eventListeners)return;const n1=(r1=this.__eventListeners[_g])===null||r1===void 0?void 0:r1.concat();if(n1)for(let i1=0;i1<n1.length;i1++)n1[i1].call(this,t1||{})}}const it$1=(e1,_g)=>Math.floor(Math.random()*(_g-e1+1))+e1,rt$1=(e1,_g)=>isNaN(e1)&&typeof _g=="number"?_g:e1,nt$2=(e1,_g)=>{const t1=e1.indexOf(_g);return t1!==-1&&e1.splice(t1,1),e1},ot$1=e1=>{if(e1===0)return 1;switch(Math.abs(e1)/w$1){case 1:case 3:return 0;case 2:return-1}return Math.cos(e1)},at=e1=>{if(e1===0)return 0;const _g=e1/w$1,t1=Math.sign(e1);switch(_g){case 1:return t1;case 2:return 0;case 3:return-t1}return Math.sin(e1)};let ht$1=class t${constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof _g=="object"?(this.x=_g.x,this.y=_g.y):(this.x=_g,this.y=t1)}add(_g){return new t$(this.x+_g.x,this.y+_g.y)}addEquals(_g){return this.x+=_g.x,this.y+=_g.y,this}scalarAdd(_g){return new t$(this.x+_g,this.y+_g)}scalarAddEquals(_g){return this.x+=_g,this.y+=_g,this}subtract(_g){return new t$(this.x-_g.x,this.y-_g.y)}subtractEquals(_g){return this.x-=_g.x,this.y-=_g.y,this}scalarSubtract(_g){return new t$(this.x-_g,this.y-_g)}scalarSubtractEquals(_g){return this.x-=_g,this.y-=_g,this}multiply(_g){return new t$(this.x*_g.x,this.y*_g.y)}scalarMultiply(_g){return new t$(this.x*_g,this.y*_g)}scalarMultiplyEquals(_g){return this.x*=_g,this.y*=_g,this}divide(_g){return new t$(this.x/_g.x,this.y/_g.y)}scalarDivide(_g){return new t$(this.x/_g,this.y/_g)}scalarDivideEquals(_g){return this.x/=_g,this.y/=_g,this}eq(_g){return this.x===_g.x&&this.y===_g.y}lt(_g){return this.x<_g.x&&this.y<_g.y}lte(_g){return this.x<=_g.x&&this.y<=_g.y}gt(_g){return this.x>_g.x&&this.y>_g.y}gte(_g){return this.x>=_g.x&&this.y>=_g.y}lerp(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t1=Math.max(Math.min(1,t1),0),new t$(this.x+(_g.x-this.x)*t1,this.y+(_g.y-this.y)*t1)}distanceFrom(_g){const t1=this.x-_g.x,r1=this.y-_g.y;return Math.sqrt(t1*t1+r1*r1)}midPointFrom(_g){return this.lerp(_g)}min(_g){return new t$(Math.min(this.x,_g.x),Math.min(this.y,_g.y))}max(_g){return new t$(Math.max(this.x,_g.x),Math.max(this.y,_g.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(_g,t1){return this.x=_g,this.y=t1,this}setX(_g){return this.x=_g,this}setY(_g){return this.y=_g,this}setFromPoint(_g){return this.x=_g.x,this.y=_g.y,this}swap(_g){const t1=this.x,r1=this.y;this.x=_g.x,this.y=_g.y,_g.x=t1,_g.y=r1}clone(){return new t$(this.x,this.y)}rotate(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ct$1;const r1=at(_g),n1=ot$1(_g),i1=this.subtract(t1);return new t$(i1.x*n1-i1.y*r1,i1.x*r1+i1.y*n1).add(t1)}transform(_g){let t1=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new t$(_g[0]*this.x+_g[2]*this.y+(t1?0:_g[4]),_g[1]*this.x+_g[3]*this.y+(t1?0:_g[5]))}};const ct$1=new ht$1(0,0),lt$2=e1=>!!e1&&Array.isArray(e1._objects);function ut$2(e1){class _g extends e1{constructor(){super(...arguments),t$3(this,"_objects",[])}_onObjectAdded(r1){}_onObjectRemoved(r1){}_onStackOrderChanged(r1){}add(){for(var r1=arguments.length,n1=new Array(r1),i1=0;i1<r1;i1++)n1[i1]=arguments[i1];const o1=this._objects.push(...n1);return n1.forEach(a1=>this._onObjectAdded(a1)),o1}insertAt(r1){for(var n1=arguments.length,i1=new Array(n1>1?n1-1:0),o1=1;o1<n1;o1++)i1[o1-1]=arguments[o1];return this._objects.splice(r1,0,...i1),i1.forEach(a1=>this._onObjectAdded(a1)),this._objects.length}remove(){const r1=this._objects,n1=[];for(var i1=arguments.length,o1=new Array(i1),a1=0;a1<i1;a1++)o1[a1]=arguments[a1];return o1.forEach(u1=>{const s1=r1.indexOf(u1);s1!==-1&&(r1.splice(s1,1),n1.push(u1),this._onObjectRemoved(u1))}),n1}forEachObject(r1){this.getObjects().forEach((n1,i1,o1)=>r1(n1,i1,o1))}getObjects(){for(var r1=arguments.length,n1=new Array(r1),i1=0;i1<r1;i1++)n1[i1]=arguments[i1];return n1.length===0?[...this._objects]:this._objects.filter(o1=>o1.isType(...n1))}item(r1){return this._objects[r1]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r1,n1){return!!this._objects.includes(r1)||!!n1&&this._objects.some(i1=>i1 instanceof _g&&i1.contains(r1,!0))}complexity(){return this._objects.reduce((r1,n1)=>r1+=n1.complexity?n1.complexity():0,0)}sendObjectToBack(r1){return!(!r1||r1===this._objects[0])&&(nt$2(this._objects,r1),this._objects.unshift(r1),this._onStackOrderChanged(r1),!0)}bringObjectToFront(r1){return!(!r1||r1===this._objects[this._objects.length-1])&&(nt$2(this._objects,r1),this._objects.push(r1),this._onStackOrderChanged(r1),!0)}sendObjectBackwards(r1,n1){if(!r1)return!1;const i1=this._objects.indexOf(r1);if(i1!==0){const o1=this.findNewLowerIndex(r1,i1,n1);return nt$2(this._objects,r1),this._objects.splice(o1,0,r1),this._onStackOrderChanged(r1),!0}return!1}bringObjectForward(r1,n1){if(!r1)return!1;const i1=this._objects.indexOf(r1);if(i1!==this._objects.length-1){const o1=this.findNewUpperIndex(r1,i1,n1);return nt$2(this._objects,r1),this._objects.splice(o1,0,r1),this._onStackOrderChanged(r1),!0}return!1}moveObjectTo(r1,n1){return r1!==this._objects[n1]&&(nt$2(this._objects,r1),this._objects.splice(n1,0,r1),this._onStackOrderChanged(r1),!0)}findNewLowerIndex(r1,n1,i1){let o1;if(i1){o1=n1;for(let a1=n1-1;a1>=0;--a1)if(r1.isOverlapping(this._objects[a1])){o1=a1;break}}else o1=n1-1;return o1}findNewUpperIndex(r1,n1,i1){let o1;if(i1){o1=n1;for(let a1=n1+1;a1<this._objects.length;++a1)if(r1.isOverlapping(this._objects[a1])){o1=a1;break}}else o1=n1+1;return o1}collectObjects(r1){let{left:n1,top:i1,width:o1,height:a1}=r1,{includeIntersecting:u1=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s1=[],l1=new ht$1(n1,i1),c1=l1.add(new ht$1(o1,a1));for(let d1=this._objects.length-1;d1>=0;d1--){const h1=this._objects[d1];h1.selectable&&h1.visible&&(u1&&h1.intersectsWithRect(l1,c1)||h1.isContainedWithinRect(l1,c1)||u1&&h1.containsPoint(l1)||u1&&h1.containsPoint(c1))&&s1.push(h1)}return s1}}return _g}let dt$1=class extends st{_setOptions(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t1 in _g)this.set(t1,_g[t1])}_setObject(_g){for(const t1 in _g)this._set(t1,_g[t1])}set(_g,t1){return typeof _g=="object"?this._setObject(_g):this._set(_g,t1),this}_set(_g,t1){this[_g]=t1}toggle(_g){const t1=this.get(_g);return typeof t1=="boolean"&&this.set(_g,!t1),this}get(_g){return this[_g]}};function gt$2(e1){return y().requestAnimationFrame(e1)}function ft$1(e1){return y().cancelAnimationFrame(e1)}let pt=0;const mt$1=()=>pt++,vt=()=>{const e1=v$1().createElement("canvas");if(!e1||e1.getContext===void 0)throw new c("Failed to create `canvas` element");return e1},yt$1=()=>v$1().createElement("img"),_t$1=(e1,_g,t1)=>e1.toDataURL("image/".concat(_g),t1),xt$1=e1=>e1*T$2,Ct=e1=>e1/T$2,bt$1=e1=>e1.every((_g,t1)=>_g===O$1[t1]),wt=(e1,_g,t1)=>new ht$1(e1).transform(_g,t1),St$2=e1=>{const _g=1/(e1[0]*e1[3]-e1[1]*e1[2]),t1=[_g*e1[3],-_g*e1[1],-_g*e1[2],_g*e1[0],0,0],{x:r1,y:n1}=new ht$1(e1[4],e1[5]).transform(t1,!0);return t1[4]=-r1,t1[5]=-n1,t1},Tt=(e1,_g,t1)=>[e1[0]*_g[0]+e1[2]*_g[1],e1[1]*_g[0]+e1[3]*_g[1],e1[0]*_g[2]+e1[2]*_g[3],e1[1]*_g[2]+e1[3]*_g[3],t1?0:e1[0]*_g[4]+e1[2]*_g[5]+e1[4],t1?0:e1[1]*_g[4]+e1[3]*_g[5]+e1[5]],Ot$2=(e1,_g)=>e1.reduceRight((t1,r1)=>r1&&t1?Tt(r1,t1,_g):r1||t1,void 0)||O$1.concat(),kt$1=e1=>{let[_g,t1]=e1;return Math.atan2(t1,_g)},Dt$2=e1=>{const _g=kt$1(e1),t1=Math.pow(e1[0],2)+Math.pow(e1[1],2),r1=Math.sqrt(t1),n1=(e1[0]*e1[3]-e1[2]*e1[1])/r1,i1=Math.atan2(e1[0]*e1[2]+e1[1]*e1[3],t1);return{angle:Ct(_g),scaleX:r1,scaleY:n1,skewX:Ct(i1),skewY:0,translateX:e1[4]||0,translateY:e1[5]||0}},Mt$2=function(e1){return[1,0,0,1,e1,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Pt$1(){let{angle:e1=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:_g=0,y:t1=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r1=xt$1(e1),n1=ot$1(r1),i1=at(r1);return[n1,i1,-i1,n1,_g?_g-(n1*_g-i1*t1):0,t1?t1-(i1*_g+n1*t1):0]}const Et$1=function(e1){return[e1,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:e1,0,0]},At$1=e1=>Math.tan(xt$1(e1)),jt=e1=>[1,0,At$1(e1),1,0,0],Ft=e1=>[1,At$1(e1),0,1,0,0],Lt=e1=>{let{scaleX:_g=1,scaleY:t1=1,flipX:r1=!1,flipY:n1=!1,skewX:i1=0,skewY:o1=0}=e1,a1=Et$1(r1?-_g:_g,n1?-t1:t1);return i1&&(a1=Tt(a1,jt(i1),!0)),o1&&(a1=Tt(a1,Ft(o1),!0)),a1},Rt$1=e1=>{const{translateX:_g=0,translateY:t1=0,angle:r1=0}=e1;let n1=Mt$2(_g,t1);r1&&(n1=Tt(n1,Pt$1({angle:r1})));const i1=Lt(e1);return bt$1(i1)||(n1=Tt(n1,i1)),n1},Bt$2=function(e1){let{signal:_g,crossOrigin:t1=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r1,n1){if(_g&&_g.aborted)return n1(new l$1("loadImage"));const i1=yt$1();let o1;_g&&(o1=function(u1){i1.src="",n1(u1)},_g.addEventListener("abort",o1,{once:!0}));const a1=function(){i1.onload=i1.onerror=null,o1&&(_g==null||_g.removeEventListener("abort",o1)),r1(i1)};e1?(i1.onload=a1,i1.onerror=function(){o1&&(_g==null||_g.removeEventListener("abort",o1)),n1(new c("Error loading ".concat(i1.src)))},t1&&(i1.crossOrigin=t1),i1.src=e1):a1()})},It$1=function(e1){let{signal:_g,reviver:t1=b}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r1,n1)=>{const i1=[];_g&&_g.addEventListener("abort",n1,{once:!0}),Promise.all(e1.map(o1=>tt$1.getClass(o1.type).fromObject(o1,{signal:_g}).then(a1=>(t1(o1,a1),i1.push(a1),a1)))).then(r1).catch(o1=>{i1.forEach(a1=>{a1.dispose&&a1.dispose()}),n1(o1)}).finally(()=>{_g&&_g.removeEventListener("abort",n1)})})},Xt$2=function(e1){let{signal:_g}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t1,r1)=>{const n1=[];_g&&_g.addEventListener("abort",r1,{once:!0});const i1=Object.values(e1).map(a1=>a1&&(a1.type?It$1([a1],{signal:_g}).then(u1=>{let[s1]=u1;return n1.push(s1),s1}):a1.source?tt$1.getClass("pattern").fromObject(a1,{signal:_g}).then(u1=>(n1.push(u1),u1)):a1)),o1=Object.keys(e1);Promise.all(i1).then(a1=>a1.reduce((u1,s1,l1)=>(u1[o1[l1]]=s1,u1),{})).then(t1).catch(a1=>{n1.forEach(u1=>{u1.dispose&&u1.dispose()}),r1(a1)}).finally(()=>{_g&&_g.removeEventListener("abort",r1)})})},Wt$2=function(e1){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((_g,t1)=>(t1 in e1&&(_g[t1]=e1[t1]),_g),{})},Yt$1=(e1,_g)=>Object.keys(e1).reduce((t1,r1)=>(_g(e1[r1],r1,e1)&&(t1[r1]=e1[r1]),t1),{}),Vt$1={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Ht=(e1,_g,t1)=>(t1<0&&(t1+=1),t1>1&&(t1-=1),t1<1/6?e1+6*(_g-e1)*t1:t1<.5?_g:t1<2/3?e1+(_g-e1)*(2/3-t1)*6:e1),Gt=(e1,_g,t1,r1)=>{e1/=255,_g/=255,t1/=255;const n1=Math.max(e1,_g,t1),i1=Math.min(e1,_g,t1);let o1,a1;const u1=(n1+i1)/2;if(n1===i1)o1=a1=0;else{const s1=n1-i1;switch(a1=u1>.5?s1/(2-n1-i1):s1/(n1+i1),n1){case e1:o1=(_g-t1)/s1+(_g<t1?6:0);break;case _g:o1=(t1-e1)/s1+2;break;case t1:o1=(e1-_g)/s1+4}o1/=6}return[Math.round(360*o1),Math.round(100*a1),Math.round(100*u1),r1]},zt$2=function(){let e1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(e1)/(e1.endsWith("%")?100:1)},Nt$1=e1=>Math.min(Math.round(e1),255).toString(16).toUpperCase().padStart(2,"0"),Ut$1=e1=>{let[_g,t1,r1,n1=1]=e1;const i1=Math.round(.3*_g+.59*t1+.11*r1);return[i1,i1,i1,n1]};class qt{constructor(_g){if(t$3(this,"isUnrecognised",!1),_g)if(_g instanceof qt)this.setSource([..._g._source]);else if(Array.isArray(_g)){const[t1,r1,n1,i1=1]=_g;this.setSource([t1,r1,n1,i1])}else this.setSource(this._tryParsingColor(_g));else this.setSource([0,0,0,1])}_tryParsingColor(_g){return _g in Vt$1&&(_g=Vt$1[_g]),_g==="transparent"?[255,255,255,0]:qt.sourceFromHex(_g)||qt.sourceFromRgb(_g)||qt.sourceFromHsl(_g)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(_g){this._source=_g}toRgb(){const[_g,t1,r1]=this.getSource();return"rgb(".concat(_g,",").concat(t1,",").concat(r1,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[_g,t1,r1]=Gt(...this.getSource());return"hsl(".concat(_g,",").concat(t1,"%,").concat(r1,"%)")}toHsla(){const[_g,t1,r1,n1]=Gt(...this.getSource());return"hsla(".concat(_g,",").concat(t1,"%,").concat(r1,"%,").concat(n1,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[_g,t1,r1,n1]=this.getSource();return"".concat(Nt$1(_g)).concat(Nt$1(t1)).concat(Nt$1(r1)).concat(Nt$1(Math.round(255*n1)))}getAlpha(){return this.getSource()[3]}setAlpha(_g){return this._source[3]=_g,this}toGrayscale(){return this.setSource(Ut$1(this.getSource())),this}toBlackWhite(_g){const[t1,,,r1]=Ut$1(this.getSource()),n1=t1<(_g||127)?0:255;return this.setSource([n1,n1,n1,r1]),this}overlayWith(_g){_g instanceof qt||(_g=new qt(_g));const t1=this.getSource(),r1=_g.getSource(),[n1,i1,o1]=t1.map((a1,u1)=>Math.round(.5*a1+.5*r1[u1]));return this.setSource([n1,i1,o1,t1[3]]),this}static fromRgb(_g){return qt.fromRgba(_g)}static fromRgba(_g){return new qt(qt.sourceFromRgb(_g))}static sourceFromRgb(_g){const t1=_g.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t1){const[r1,n1,i1]=t1.slice(1,4).map(o1=>{const a1=parseFloat(o1);return o1.endsWith("%")?Math.round(2.55*a1):a1});return[r1,n1,i1,zt$2(t1[4])]}}static fromHsl(_g){return qt.fromHsla(_g)}static fromHsla(_g){return new qt(qt.sourceFromHsl(_g))}static sourceFromHsl(_g){const t1=_g.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t1)return;const r1=(qt.parseAngletoDegrees(t1[1])%360+360)%360/360,n1=parseFloat(t1[2])/100,i1=parseFloat(t1[3])/100;let o1,a1,u1;if(n1===0)o1=a1=u1=i1;else{const s1=i1<=.5?i1*(n1+1):i1+n1-i1*n1,l1=2*i1-s1;o1=Ht(l1,s1,r1+1/3),a1=Ht(l1,s1,r1),u1=Ht(l1,s1,r1-1/3)}return[Math.round(255*o1),Math.round(255*a1),Math.round(255*u1),zt$2(t1[4])]}static fromHex(_g){return new qt(qt.sourceFromHex(_g))}static sourceFromHex(_g){if(_g.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t1=_g.slice(_g.indexOf("#")+1);let r1;r1=t1.length<=4?t1.split("").map(u1=>u1+u1):t1.match(/.{2}/g);const[n1,i1,o1,a1=255]=r1.map(u1=>parseInt(u1,16));return[n1,i1,o1,a1/255]}}static parseAngletoDegrees(_g){const t1=_g.toLowerCase(),r1=parseFloat(t1);return t1.includes("rad")?Ct(r1):t1.includes("turn")?360*r1:r1}}const Kt=(e1,_g)=>parseFloat(Number(e1).toFixed(_g)),Jt$1=function(e1){let _g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k$3;const t1=/\D{0,2}$/.exec(e1),r1=parseFloat(e1),n1=a.DPI;switch(t1==null?void 0:t1[0]){case"mm":return r1*n1/25.4;case"cm":return r1*n1/2.54;case"in":return r1*n1;case"pt":return r1*n1/72;case"pc":return r1*n1/72*12;case"em":return r1*_g;default:return r1}},Zt$1=e1=>{const[_g,t1]=e1.trim().split(" "),[r1,n1]=(i1=_g)&&i1!==F$1?[i1.slice(1,4),i1.slice(5,8)]:i1===F$1?[i1,i1]:["Mid","Mid"];var i1;return{meetOrSlice:t1||"meet",alignX:r1,alignY:n1}},Qt$1=e1=>"matrix("+e1.map(_g=>Kt(_g,a.NUM_FRACTION_DIGITS)).join(" ")+")",$t=function(e1,_g){let t1,r1,n1=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(_g)if(_g.toLive)t1="url(#SVGID_".concat(_g.id,")");else{const i1=new qt(_g),o1=i1.getAlpha();t1=i1.toRgb(),o1!==1&&(r1=o1.toString())}else t1="none";return n1?"".concat(e1,": ").concat(t1,"; ").concat(r1?"".concat(e1,"-opacity: ").concat(r1,"; "):""):"".concat(e1,'="').concat(t1,'" ').concat(r1?"".concat(e1,'-opacity="').concat(r1,'" '):"")},te=e1=>!!e1&&e1.toLive!==void 0,ee=e1=>!!e1&&typeof e1.toObject=="function",se=e1=>!!e1&&e1.offsetX!==void 0&&"source"in e1,ie=e1=>!!e1&&typeof e1._renderText=="function",re=e1=>!!e1&&"multiSelectionStacking"in e1;function ne$1(e1){const _g=e1&&oe$1(e1);let t1=0,r1=0;if(!e1||!_g)return{left:t1,top:r1};const n1=_g.documentElement,i1=_g.body||{scrollLeft:0,scrollTop:0};for(;e1&&(e1.parentNode||e1.host)&&((e1=e1.parentNode||e1.host)===_g?(t1=i1.scrollLeft||n1.scrollLeft||0,r1=i1.scrollTop||n1.scrollTop||0):(t1+=e1.scrollLeft||0,r1+=e1.scrollTop||0),e1.nodeType!==1||e1.style.position!=="fixed"););return{left:t1,top:r1}}const oe$1=e1=>e1.ownerDocument||null,ae$1=e1=>{var _g;return((_g=e1.ownerDocument)===null||_g===void 0?void 0:_g.defaultView)||null};function he$1(e1,_g){const t1=e1.style;t1&&(typeof _g=="string"?e1.style.cssText+=";"+_g:Object.entries(_g).forEach(r1=>{let[n1,i1]=r1;return t1.setProperty(n1,i1)}))}const ce$1=function(e1,_g,t1){let{width:r1,height:n1}=t1,i1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;e1.width=r1,e1.height=n1,i1>1&&(e1.setAttribute("width",(r1*i1).toString()),e1.setAttribute("height",(n1*i1).toString()),_g.scale(i1,i1))},le$2=(e1,_g)=>{let{width:t1,height:r1}=_g;t1&&(e1.style.width=typeof t1=="number"?"".concat(t1,"px"):t1),r1&&(e1.style.height=typeof r1=="number"?"".concat(r1,"px"):r1)};function ue$1(e1){return e1.onselectstart!==void 0&&(e1.onselectstart=()=>!1),e1.style.userSelect=F$1,e1}let de$1=class{constructor(_g){t$3(this,"_originalCanvasStyle",void 0),t$3(this,"lower",void 0);const t1=this.createLowerCanvas(_g);this.lower={el:t1,ctx:t1.getContext("2d")}}createLowerCanvas(_g){const t1=(r1=_g)&&r1.getContext!==void 0?_g:_g&&v$1().getElementById(_g)||vt();var r1;if(t1.hasAttribute("data-fabric"))throw new c("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t1.style.cssText,t1.setAttribute("data-fabric","main"),t1.classList.add("lower-canvas"),t1}cleanupDOM(_g){let{width:t1,height:r1}=_g;const{el:n1}=this.lower;n1.classList.remove("lower-canvas"),n1.removeAttribute("data-fabric"),n1.setAttribute("width","".concat(t1)),n1.setAttribute("height","".concat(r1)),n1.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(_g,t1){const{el:r1,ctx:n1}=this.lower;ce$1(r1,n1,_g,t1)}setCSSDimensions(_g){le$2(this.lower.el,_g)}calcOffset(){return function(_g){var t1;let r1={left:0,top:0};const n1=_g&&oe$1(_g),i1={left:0,top:0},o1={borderLeftWidth:P$1,borderTopWidth:E$1,paddingLeft:P$1,paddingTop:E$1};if(!n1)return i1;const a1=((t1=ae$1(_g))===null||t1===void 0?void 0:t1.getComputedStyle(_g,null))||{};for(const l1 in o1)i1[o1[l1]]+=parseInt(a1[l1],10)||0;const u1=n1.documentElement;_g.getBoundingClientRect!==void 0&&(r1=_g.getBoundingClientRect());const s1=ne$1(_g);return{left:r1.left+s1.left-(u1.clientLeft||0)+i1.left,top:r1.top+s1.top-(u1.clientTop||0)+i1.top}}(this.lower.el)}dispose(){m$2().dispose(this.lower.el),delete this.lower}};const ge$1={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...O$1]};let fe$3=class oT extends ut$2(dt$1){get lowerCanvasEl(){var _g;return(_g=this.elements.lower)===null||_g===void 0?void 0:_g.el}get contextContainer(){var _g;return(_g=this.elements.lower)===null||_g===void 0?void 0:_g.ctx}static getDefaults(){return oT.ownDefaults}constructor(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t1),this.initElements(_g),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(_g){this.elements=new de$1(_g)}add(){const _g=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),_g}insertAt(_g){for(var t1=arguments.length,r1=new Array(t1>1?t1-1:0),n1=1;n1<t1;n1++)r1[n1-1]=arguments[n1];const i1=super.insertAt(_g,...r1);return r1.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i1}remove(){const _g=super.remove(...arguments);return _g.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),_g}_onObjectAdded(_g){_g.canvas&&_g.canvas!==this&&(h$2("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),_g.canvas.remove(_g)),_g._set("canvas",this),_g.setCoords(),this.fire("object:added",{target:_g}),_g.fire("added",{target:this})}_onObjectRemoved(_g){_g._set("canvas",void 0),this.fire("object:removed",{target:_g}),_g.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?_$2():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(_g,t1){return this.setDimensions({width:_g},t1)}setHeight(_g,t1){return this.setDimensions({height:_g},t1)}_setDimensionsImpl(_g){let{cssOnly:t1=!1,backstoreOnly:r1=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t1){const n1=s$1({width:this.width,height:this.height},_g);this.elements.setDimensions(n1,this.getRetinaScaling()),this.hasLostContext=!0,this.width=n1.width,this.height=n1.height}r1||this.elements.setCSSDimensions(_g),this.calcOffset()}setDimensions(_g,t1){this._setDimensionsImpl(_g,t1),t1&&t1.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(_g){this.viewportTransform=_g,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(_g,t1){const r1=_g,n1=[...this.viewportTransform],i1=wt(_g,St$2(n1));n1[0]=t1,n1[3]=t1;const o1=wt(i1,n1);n1[4]+=r1.x-o1.x,n1[5]+=r1.y-o1.y,this.setViewportTransform(n1)}setZoom(_g){this.zoomToPoint(new ht$1(0,0),_g)}absolutePan(_g){const t1=[...this.viewportTransform];return t1[4]=-_g.x,t1[5]=-_g.y,this.setViewportTransform(t1)}relativePan(_g){return this.absolutePan(new ht$1(-_g.x-this.viewportTransform[4],-_g.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(_g){_g.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=gt$2(()=>this.renderAndReset()))}calcViewportBoundaries(){const _g=this.width,t1=this.height,r1=St$2(this.viewportTransform),n1=wt({x:0,y:0},r1),i1=wt({x:_g,y:t1},r1),o1=n1.min(i1),a1=n1.max(i1);return this.vptCoords={tl:o1,tr:new ht$1(a1.x,o1.y),bl:new ht$1(o1.x,a1.y),br:a1}}cancelRequestedRender(){this.nextRenderHandle&&(ft$1(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(_g){}renderCanvas(_g,t1){if(this.destroyed)return;const r1=this.viewportTransform,n1=this.clipPath;this.calcViewportBoundaries(),this.clearContext(_g),_g.imageSmoothingEnabled=this.imageSmoothingEnabled,_g.patternQuality="best",this.fire("before:render",{ctx:_g}),this._renderBackground(_g),_g.save(),_g.transform(r1[0],r1[1],r1[2],r1[3],r1[4],r1[5]),this._renderObjects(_g,t1),_g.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(_g),n1&&(n1._set("canvas",this),n1.shouldCache(),n1._transformDone=!0,n1.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(_g,n1)),this._renderOverlay(_g),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(_g),this.fire("after:render",{ctx:_g}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(_g,t1){const r1=this.viewportTransform;_g.save(),_g.transform(...r1),_g.globalCompositeOperation="destination-in",t1.transform(_g),_g.scale(1/t1.zoomX,1/t1.zoomY),_g.drawImage(t1._cacheCanvas,-t1.cacheTranslationX,-t1.cacheTranslationY),_g.restore()}_renderObjects(_g,t1){for(let r1=0,n1=t1.length;r1<n1;++r1)t1[r1]&&t1[r1].render(_g)}_renderBackgroundOrOverlay(_g,t1){const r1=this["".concat(t1,"Color")],n1=this["".concat(t1,"Image")],i1=this.viewportTransform,o1=this["".concat(t1,"Vpt")];if(!r1&&!n1)return;const a1=te(r1);if(r1){if(_g.save(),_g.beginPath(),_g.moveTo(0,0),_g.lineTo(this.width,0),_g.lineTo(this.width,this.height),_g.lineTo(0,this.height),_g.closePath(),_g.fillStyle=a1?r1.toLive(_g):r1,o1&&_g.transform(...i1),a1){_g.transform(1,0,0,1,r1.offsetX||0,r1.offsetY||0);const u1=r1.gradientTransform||r1.patternTransform;u1&&_g.transform(...u1)}_g.fill(),_g.restore()}if(n1){_g.save();const{skipOffscreen:u1}=this;this.skipOffscreen=o1,o1&&_g.transform(...i1),n1.render(_g),this.skipOffscreen=u1,_g.restore()}}_renderBackground(_g){this._renderBackgroundOrOverlay(_g,"background")}_renderOverlay(_g){this._renderBackgroundOrOverlay(_g,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new ht$1(this.width/2,this.height/2)}centerObjectH(_g){return this._centerObject(_g,new ht$1(this.getCenterPoint().x,_g.getCenterPoint().y))}centerObjectV(_g){return this._centerObject(_g,new ht$1(_g.getCenterPoint().x,this.getCenterPoint().y))}centerObject(_g){return this._centerObject(_g,this.getCenterPoint())}viewportCenterObject(_g){return this._centerObject(_g,this.getVpCenter())}viewportCenterObjectH(_g){return this._centerObject(_g,new ht$1(this.getVpCenter().x,_g.getCenterPoint().y))}viewportCenterObjectV(_g){return this._centerObject(_g,new ht$1(_g.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return wt(this.getCenterPoint(),St$2(this.viewportTransform))}_centerObject(_g,t1){_g.setXY(t1,M$3,M$3),_g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(_g){return this.toDatalessObject(_g)}toObject(_g){return this._toObjectMethod("toObject",_g)}toJSON(){return this.toObject()}toDatalessObject(_g){return this._toObjectMethod("toDatalessObject",_g)}_toObjectMethod(_g,t1){const r1=this.clipPath,n1=r1&&!r1.excludeFromExport?this._toObject(r1,_g,t1):null;return s$1(s$1(s$1({version:C},Wt$2(this,t1)),{},{objects:this._objects.filter(i1=>!i1.excludeFromExport).map(i1=>this._toObject(i1,_g,t1))},this.__serializeBgOverlay(_g,t1)),n1?{clipPath:n1}:null)}_toObject(_g,t1,r1){let n1;this.includeDefaultValues||(n1=_g.includeDefaultValues,_g.includeDefaultValues=!1);const i1=_g[t1](r1);return this.includeDefaultValues||(_g.includeDefaultValues=!!n1),i1}__serializeBgOverlay(_g,t1){const r1={},n1=this.backgroundImage,i1=this.overlayImage,o1=this.backgroundColor,a1=this.overlayColor;return te(o1)?o1.excludeFromExport||(r1.background=o1.toObject(t1)):o1&&(r1.background=o1),te(a1)?a1.excludeFromExport||(r1.overlay=a1.toObject(t1)):a1&&(r1.overlay=a1),n1&&!n1.excludeFromExport&&(r1.backgroundImage=this._toObject(n1,_g,t1)),i1&&!i1.excludeFromExport&&(r1.overlayImage=this._toObject(i1,_g,t1)),r1}toSVG(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t1=arguments.length>1?arguments[1]:void 0;_g.reviver=t1;const r1=[];return this._setSVGPreamble(r1,_g),this._setSVGHeader(r1,_g),this.clipPath&&r1.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r1,"background"),this._setSVGBgOverlayImage(r1,"backgroundImage",t1),this._setSVGObjects(r1,t1),this.clipPath&&r1.push(`</g>
`),this._setSVGBgOverlayColor(r1,"overlay"),this._setSVGBgOverlayImage(r1,"overlayImage",t1),r1.push("</svg>"),r1.join("")}_setSVGPreamble(_g,t1){t1.suppressPreamble||_g.push('<?xml version="1.0" encoding="',t1.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(_g,t1){const r1=t1.width||"".concat(this.width),n1=t1.height||"".concat(this.height),i1=a.NUM_FRACTION_DIGITS,o1=t1.viewBox;let a1;if(o1)a1='viewBox="'.concat(o1.x," ").concat(o1.y," ").concat(o1.width," ").concat(o1.height,'" ');else if(this.svgViewportTransformation){const u1=this.viewportTransform;a1='viewBox="'.concat(Kt(-u1[4]/u1[0],i1)," ").concat(Kt(-u1[5]/u1[3],i1)," ").concat(Kt(this.width/u1[0],i1)," ").concat(Kt(this.height/u1[3],i1),'" ')}else a1='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');_g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r1,'" ','height="',n1,'" ',a1,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",C,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t1),`</defs>
`)}createSVGClipPathMarkup(_g){const t1=this.clipPath;return t1?(t1.clipPathId="CLIPPATH_".concat(mt$1()),'<clipPath id="'.concat(t1.clipPathId,`" >
`).concat(t1.toClipPathSVG(_g.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(_g=>{const t1=this["".concat(_g,"Color")];if(te(t1)){const r1=this["".concat(_g,"Vpt")],n1=this.viewportTransform,i1={isType:()=>!1,width:this.width/(r1?n1[0]:1),height:this.height/(r1?n1[3]:1)};return t1.toSVG(i1,{additionalTransform:r1?Qt$1(n1):""})}}).join("")}createSVGFontFacesMarkup(){const _g=[],t1={},r1=a.fontPaths;this._objects.forEach(function i1(o1){_g.push(o1),lt$2(o1)&&o1._objects.forEach(i1)}),_g.forEach(i1=>{if(!ie(i1))return;const{styles:o1,fontFamily:a1}=i1;!t1[a1]&&r1[a1]&&(t1[a1]=!0,o1&&Object.values(o1).forEach(u1=>{Object.values(u1).forEach(s1=>{let{fontFamily:l1=""}=s1;!t1[l1]&&r1[l1]&&(t1[l1]=!0)})}))});const n1=Object.keys(t1).map(i1=>`		@font-face {
			font-family: '`.concat(i1,`';
			src: url('`).concat(r1[i1],`');
		}
`)).join("");return n1?`	<style type="text/css"><![CDATA[
`.concat(n1,`]]></style>
`):""}_setSVGObjects(_g,t1){this.forEachObject(r1=>{r1.excludeFromExport||this._setSVGObject(_g,r1,t1)})}_setSVGObject(_g,t1,r1){_g.push(t1.toSVG(r1))}_setSVGBgOverlayImage(_g,t1,r1){const n1=this[t1];n1&&!n1.excludeFromExport&&n1.toSVG&&_g.push(n1.toSVG(r1))}_setSVGBgOverlayColor(_g,t1){const r1=this["".concat(t1,"Color")];if(r1)if(te(r1)){const n1=r1.repeat||"",i1=this.width,o1=this.height,a1=this["".concat(t1,"Vpt")]?Qt$1(St$2(this.viewportTransform)):"";_g.push('<rect transform="'.concat(a1," translate(").concat(i1/2,",").concat(o1/2,')" x="').concat(r1.offsetX-i1/2,'" y="').concat(r1.offsetY-o1/2,'" width="').concat(n1!=="repeat-y"&&n1!=="no-repeat"||!se(r1)?i1:r1.source.width,'" height="').concat(n1!=="repeat-x"&&n1!=="no-repeat"||!se(r1)?o1:r1.source.height,'" fill="url(#SVGID_').concat(r1.id,`)"></rect>
`))}else _g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r1,'"',`></rect>
`)}loadFromJSON(_g,t1){let{signal:r1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!_g)return Promise.reject(new c("`json` is undefined"));const n1=typeof _g=="string"?JSON.parse(_g):_g,{objects:i1=[],backgroundImage:o1,background:a1,overlayImage:u1,overlay:s1,clipPath:l1}=n1,c1=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([It$1(i1,{reviver:t1,signal:r1}),Xt$2({backgroundImage:o1,backgroundColor:a1,overlayImage:u1,overlayColor:s1,clipPath:l1},{signal:r1})]).then(d1=>{let[h1,f1]=d1;return this.clear(),this.add(...h1),this.set(n1),this.set(f1),this.renderOnAddRemove=c1,this})}clone(_g){const t1=this.toObject(_g);return this.cloneWithoutData().loadFromJSON(t1)}cloneWithoutData(){const _g=vt();return _g.width=this.width,_g.height=this.height,new this.constructor(_g)}toDataURL(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t1="png",quality:r1=1,multiplier:n1=1,enableRetinaScaling:i1=!1}=_g,o1=n1*(i1?this.getRetinaScaling():1);return _t$1(this.toCanvasElement(o1,_g),t1,r1)}toCanvasElement(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t1,height:r1,left:n1,top:i1,filter:o1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a1=(t1||this.width)*_g,u1=(r1||this.height)*_g,s1=this.getZoom(),l1=this.width,c1=this.height,d1=this.skipControlsDrawing,h1=s1*_g,f1=this.viewportTransform,g1=[h1,0,0,h1,(f1[4]-(n1||0))*_g,(f1[5]-(i1||0))*_g],v1=this.enableRetinaScaling,$1=vt(),y1=o1?this._objects.filter(_1=>o1(_1)):this._objects;return $1.width=a1,$1.height=u1,this.enableRetinaScaling=!1,this.viewportTransform=g1,this.width=a1,this.height=u1,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas($1.getContext("2d"),y1),this.viewportTransform=f1,this.width=l1,this.height=c1,this.calcViewportBoundaries(),this.enableRetinaScaling=v1,this.skipControlsDrawing=d1,$1}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),et.cancelByCanvas(this),this.disposed=!0,new Promise((_g,t1)=>{const r1=()=>{this.destroy(),_g(!0)};r1.kill=t1,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?_g(!1):this.nextRenderHandle?this.__cleanupTask=r1:r1()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(_g=>_g.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};t$3(fe$3,"ownDefaults",ge$1);const pe$1=["touchstart","touchmove","touchend"],me$2=e1=>{const _g=ne$1(e1.target),t1=function(r1){const n1=r1.changedTouches;return n1&&n1[0]?n1[0]:r1}(e1);return new ht$1(t1.clientX+_g.left,t1.clientY+_g.top)},ve$2=e1=>pe$1.includes(e1.type)||e1.pointerType==="touch",ye$3=e1=>{e1.preventDefault(),e1.stopPropagation()},_e$2=e1=>{if(e1.length===0)return{left:0,top:0,width:0,height:0};const{min:_g,max:t1}=e1.reduce((n1,i1)=>{let{min:o1,max:a1}=n1;return{min:o1.min(i1),max:a1.max(i1)}},{min:new ht$1(e1[0]),max:new ht$1(e1[0])}),r1=t1.subtract(_g);return{left:_g.x,top:_g.y,width:r1.x,height:r1.y}},xe$2=["translateX","translateY","scaleX","scaleY"],Ce$1=(e1,_g)=>be$2(e1,Tt(_g,e1.calcOwnMatrix())),be$2=(e1,_g)=>{const t1=Dt$2(_g),{translateX:r1,translateY:n1,scaleX:i1,scaleY:o1}=t1,a1=i$1(t1,xe$2),u1=new ht$1(r1,n1);e1.flipX=!1,e1.flipY=!1,Object.assign(e1,a1),e1.set({scaleX:i1,scaleY:o1}),e1.setPositionByOrigin(u1,M$3,M$3)},we$3=e1=>{e1.scaleX=1,e1.scaleY=1,e1.skewX=0,e1.skewY=0,e1.flipX=!1,e1.flipY=!1,e1.rotate(0)},Se$1=e1=>({scaleX:e1.scaleX,scaleY:e1.scaleY,skewX:e1.skewX,skewY:e1.skewY,angle:e1.angle,left:e1.left,flipX:e1.flipX,flipY:e1.flipY,top:e1.top}),Te$1=(e1,_g,t1)=>{const r1=e1/2,n1=_g/2,i1=[new ht$1(-r1,-n1),new ht$1(r1,-n1),new ht$1(-r1,n1),new ht$1(r1,n1)].map(a1=>a1.transform(t1)),o1=_e$2(i1);return new ht$1(o1.width,o1.height)},Oe=function(){let e1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O$1;return Tt(St$2(arguments.length>1&&arguments[1]!==void 0?arguments[1]:O$1),e1)},ke$1=function(e1){let _g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O$1,t1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O$1;return e1.transform(Oe(_g,t1))},De$3=function(e1){let _g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O$1,t1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O$1;return e1.transform(Oe(_g,t1),!0)},Me$2=(e1,_g,t1)=>{const r1=Oe(_g,t1);return be$2(e1,Tt(r1,e1.calcOwnMatrix())),r1},Pe$2=(e1,_g)=>{var t1;const{transform:{target:r1}}=_g;(t1=r1.canvas)===null||t1===void 0||t1.fire("object:".concat(e1),s$1(s$1({},_g),{},{target:r1})),r1.fire(e1,_g)},Ee$2={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ae=e1=>typeof e1=="string"?Ee$2[e1]:e1-.5,je="not-allowed";function Fe$1(e1){return Ae(e1.originX)===Ae(M$3)&&Ae(e1.originY)===Ae(M$3)}function Le(e1){return .5-Ae(e1)}const Re$1=(e1,_g)=>e1[_g],Be=(e1,_g,t1,r1)=>({e:e1,transform:_g,pointer:new ht$1(t1,r1)});function Ie$1(e1,_g){const t1=e1.getTotalAngle()+Ct(Math.atan2(_g.y,_g.x))+360;return Math.round(t1%360/45)}function Xe$1(e1,_g,t1,r1,n1){var i1;let{target:o1,corner:a1}=e1;const u1=o1.controls[a1],s1=((i1=o1.canvas)===null||i1===void 0?void 0:i1.getZoom())||1,l1=o1.padding/s1,c1=function(d1,h1,f1,g1){const v1=d1.getRelativeCenterPoint(),$1=f1!==void 0&&g1!==void 0?d1.translateToGivenOrigin(v1,M$3,M$3,f1,g1):new ht$1(d1.left,d1.top);return(d1.angle?h1.rotate(-xt$1(d1.angle),v1):h1).subtract($1)}(o1,new ht$1(r1,n1),_g,t1);return c1.x>=l1&&(c1.x-=l1),c1.x<=-l1&&(c1.x+=l1),c1.y>=l1&&(c1.y-=l1),c1.y<=l1&&(c1.y+=l1),c1.x-=u1.offsetX,c1.y-=u1.offsetY,c1}const We$2=(e1,_g,t1,r1)=>{const{target:n1,offsetX:i1,offsetY:o1}=_g,a1=t1-i1,u1=r1-o1,s1=!Re$1(n1,"lockMovementX")&&n1.left!==a1,l1=!Re$1(n1,"lockMovementY")&&n1.top!==u1;return s1&&n1.set(P$1,a1),l1&&n1.set(E$1,u1),(s1||l1)&&Pe$2(R$1,Be(e1,_g,t1,r1)),s1||l1};class Ye{getSvgStyles(_g){const t1=this.fillRule?this.fillRule:"nonzero",r1=this.strokeWidth?this.strokeWidth:"0",n1=this.strokeDashArray?this.strokeDashArray.join(" "):F$1,i1=this.strokeDashOffset?this.strokeDashOffset:"0",o1=this.strokeLineCap?this.strokeLineCap:"butt",a1=this.strokeLineJoin?this.strokeLineJoin:"miter",u1=this.strokeMiterLimit?this.strokeMiterLimit:"4",s1=this.opacity!==void 0?this.opacity:"1",l1=this.visible?"":" visibility: hidden;",c1=_g?"":this.getSvgFilter(),d1=$t(K$2,this.fill);return[$t(J$1,this.stroke),"stroke-width: ",r1,"; ","stroke-dasharray: ",n1,"; ","stroke-linecap: ",o1,"; ","stroke-dashoffset: ",i1,"; ","stroke-linejoin: ",a1,"; ","stroke-miterlimit: ",u1,"; ",d1,"fill-rule: ",t1,"; ","opacity: ",s1,";",c1,l1].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r1=_g?this.calcTransformMatrix():this.calcOwnMatrix(),n1='transform="'.concat(Qt$1(r1));return"".concat(n1).concat(t1,'" ')}_toSVG(_g){return[""]}toSVG(_g){return this._createBaseSVGMarkup(this._toSVG(_g),{reviver:_g})}toClipPathSVG(_g){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(_g),{reviver:_g})}_createBaseClipPathSVGMarkup(_g){let{reviver:t1,additionalTransform:r1=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n1=[this.getSvgTransform(!0,r1),this.getSvgCommons()].join(""),i1=_g.indexOf("COMMON_PARTS");return _g[i1]=n1,t1?t1(_g.join("")):_g.join("")}_createBaseSVGMarkup(_g){let{noStyle:t1,reviver:r1,withShadow:n1,additionalTransform:i1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o1=t1?"":'style="'.concat(this.getSvgStyles(),'" '),a1=n1?'style="'.concat(this.getSvgFilter(),'" '):"",u1=this.clipPath,s1=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",l1=u1&&u1.absolutePositioned,c1=this.stroke,d1=this.fill,h1=this.shadow,f1=[],g1=_g.indexOf("COMMON_PARTS");let v1;u1&&(u1.clipPathId="CLIPPATH_".concat(mt$1()),v1='<clipPath id="'.concat(u1.clipPathId,`" >
`).concat(u1.toClipPathSVG(r1),`</clipPath>
`)),l1&&f1.push("<g ",a1,this.getSvgCommons(),` >
`),f1.push("<g ",this.getSvgTransform(!1),l1?"":a1+this.getSvgCommons(),` >
`);const $1=[o1,s1,t1?"":this.addPaintOrder()," ",i1?'transform="'.concat(i1,'" '):""].join("");return _g[g1]=$1,te(d1)&&f1.push(d1.toSVG(this)),te(c1)&&f1.push(c1.toSVG(this)),h1&&f1.push(h1.toSVG(this)),u1&&f1.push(v1),f1.push(_g.join("")),f1.push(`</g>
`),l1&&f1.push(`</g>
`),r1?r1(f1.join("")):f1.join("")}addPaintOrder(){return this.paintFirst!==K$2?' paint-order="'.concat(this.paintFirst,'" '):""}}const Ve=(e1,_g,t1,r1)=>(e1<Math.abs(_g)?(e1=_g,r1=t1/4):r1=_g===0&&e1===0?t1/S*Math.asin(1):t1/S*Math.asin(_g/e1),{a:e1,c:_g,p:t1,s:r1}),He$1=(e1,_g,t1,r1,n1)=>e1*Math.pow(2,10*(r1-=1))*Math.sin((r1*n1-_g)*S/t1),Ge=(e1,_g,t1,r1)=>-t1*Math.cos(e1/r1*w$1)+t1+_g,ze=(e1,_g,t1,r1)=>(e1/=r1)<1/2.75?t1*(7.5625*e1*e1)+_g:e1<2/2.75?t1*(7.5625*(e1-=1.5/2.75)*e1+.75)+_g:e1<2.5/2.75?t1*(7.5625*(e1-=2.25/2.75)*e1+.9375)+_g:t1*(7.5625*(e1-=2.625/2.75)*e1+.984375)+_g,Ne$1=(e1,_g,t1,r1)=>t1-ze(r1-e1,0,t1,r1)+_g;var Ue$2=Object.freeze({__proto__:null,defaultEasing:Ge,easeInBack:function(e1,_g,t1,r1){let n1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t1*(e1/=r1)*e1*((n1+1)*e1-n1)+_g},easeInBounce:Ne$1,easeInCirc:(e1,_g,t1,r1)=>-t1*(Math.sqrt(1-(e1/=r1)*e1)-1)+_g,easeInCubic:(e1,_g,t1,r1)=>t1*(e1/r1)**3+_g,easeInElastic:(e1,_g,t1,r1)=>{const n1=t1;let i1=0;if(e1===0)return _g;if((e1/=r1)===1)return _g+t1;i1||(i1=.3*r1);const{a:o1,s:a1,p:u1}=Ve(n1,t1,i1,1.70158);return-He$1(o1,a1,u1,e1,r1)+_g},easeInExpo:(e1,_g,t1,r1)=>e1===0?_g:t1*2**(10*(e1/r1-1))+_g,easeInOutBack:function(e1,_g,t1,r1){let n1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(e1/=r1/2)<1?t1/2*(e1*e1*((1+(n1*=1.525))*e1-n1))+_g:t1/2*((e1-=2)*e1*((1+(n1*=1.525))*e1+n1)+2)+_g},easeInOutBounce:(e1,_g,t1,r1)=>e1<r1/2?.5*Ne$1(2*e1,0,t1,r1)+_g:.5*ze(2*e1-r1,0,t1,r1)+.5*t1+_g,easeInOutCirc:(e1,_g,t1,r1)=>(e1/=r1/2)<1?-t1/2*(Math.sqrt(1-e1**2)-1)+_g:t1/2*(Math.sqrt(1-(e1-=2)*e1)+1)+_g,easeInOutCubic:(e1,_g,t1,r1)=>(e1/=r1/2)<1?t1/2*e1**3+_g:t1/2*((e1-2)**3+2)+_g,easeInOutElastic:(e1,_g,t1,r1)=>{const n1=t1;let i1=0;if(e1===0)return _g;if((e1/=r1/2)===2)return _g+t1;i1||(i1=r1*(.3*1.5));const{a:o1,s:a1,p:u1,c:s1}=Ve(n1,t1,i1,1.70158);return e1<1?-.5*He$1(o1,a1,u1,e1,r1)+_g:o1*Math.pow(2,-10*(e1-=1))*Math.sin((e1*r1-a1)*S/u1)*.5+s1+_g},easeInOutExpo:(e1,_g,t1,r1)=>e1===0?_g:e1===r1?_g+t1:(e1/=r1/2)<1?t1/2*2**(10*(e1-1))+_g:t1/2*-(2**(-10*--e1)+2)+_g,easeInOutQuad:(e1,_g,t1,r1)=>(e1/=r1/2)<1?t1/2*e1**2+_g:-t1/2*(--e1*(e1-2)-1)+_g,easeInOutQuart:(e1,_g,t1,r1)=>(e1/=r1/2)<1?t1/2*e1**4+_g:-t1/2*((e1-=2)*e1**3-2)+_g,easeInOutQuint:(e1,_g,t1,r1)=>(e1/=r1/2)<1?t1/2*e1**5+_g:t1/2*((e1-2)**5+2)+_g,easeInOutSine:(e1,_g,t1,r1)=>-t1/2*(Math.cos(Math.PI*e1/r1)-1)+_g,easeInQuad:(e1,_g,t1,r1)=>t1*(e1/=r1)*e1+_g,easeInQuart:(e1,_g,t1,r1)=>t1*(e1/=r1)*e1**3+_g,easeInQuint:(e1,_g,t1,r1)=>t1*(e1/r1)**5+_g,easeInSine:(e1,_g,t1,r1)=>-t1*Math.cos(e1/r1*w$1)+t1+_g,easeOutBack:function(e1,_g,t1,r1){let n1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t1*((e1=e1/r1-1)*e1*((n1+1)*e1+n1)+1)+_g},easeOutBounce:ze,easeOutCirc:(e1,_g,t1,r1)=>t1*Math.sqrt(1-(e1=e1/r1-1)*e1)+_g,easeOutCubic:(e1,_g,t1,r1)=>t1*((e1/r1-1)**3+1)+_g,easeOutElastic:(e1,_g,t1,r1)=>{const n1=t1;let i1=0;if(e1===0)return _g;if((e1/=r1)===1)return _g+t1;i1||(i1=.3*r1);const{a:o1,s:a1,p:u1,c:s1}=Ve(n1,t1,i1,1.70158);return o1*2**(-10*e1)*Math.sin((e1*r1-a1)*S/u1)+s1+_g},easeOutExpo:(e1,_g,t1,r1)=>e1===r1?_g+t1:t1*-(2**(-10*e1/r1)+1)+_g,easeOutQuad:(e1,_g,t1,r1)=>-t1*(e1/=r1)*(e1-2)+_g,easeOutQuart:(e1,_g,t1,r1)=>-t1*((e1=e1/r1-1)*e1**3-1)+_g,easeOutQuint:(e1,_g,t1,r1)=>t1*((e1/r1-1)**5+1)+_g,easeOutSine:(e1,_g,t1,r1)=>t1*Math.sin(e1/r1*w$1)+_g});const qe$1=()=>!1;class Ke{constructor(_g){let{startValue:t1,byValue:r1,duration:n1=500,delay:i1=0,easing:o1=Ge,onStart:a1=b,onChange:u1=b,onComplete:s1=b,abort:l1=qe$1,target:c1}=_g;t$3(this,"_state","pending"),t$3(this,"durationProgress",0),t$3(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n1,this.delay=i1,this.easing=o1,this._onStart=a1,this._onChange=u1,this._onComplete=s1,this._abort=l1,this.target=c1,this.startValue=t1,this.byValue=r1,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const _g=t1=>{this._state==="pending"&&(this.startTime=t1||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>gt$2(_g),this.delay):gt$2(_g)}tick(_g){const t1=(_g||+new Date)-this.startTime,r1=Math.min(t1,this.duration);this.durationProgress=r1/this.duration;const{value:n1,valueProgress:i1}=this.calculate(r1);this.value=Object.freeze(n1),this.valueProgress=i1,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t1>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),gt$2(this.tick)))}register(){et.push(this)}unregister(){et.remove(this)}abort(){this._state="aborted",this.unregister()}}const Je$1=["startValue","endValue"];let Ze$2=class extends Ke{constructor(_g){let{startValue:t1=0,endValue:r1=100}=_g;super(s$1(s$1({},i$1(_g,Je$1)),{},{startValue:t1,byValue:r1-t1}))}calculate(_g){const t1=this.easing(_g,this.startValue,this.byValue,this.duration);return{value:t1,valueProgress:Math.abs((t1-this.startValue)/this.byValue)}}};const Qe$1=["startValue","endValue"];let $e$1=class extends Ke{constructor(_g){let{startValue:t1=[0],endValue:r1=[100]}=_g;super(s$1(s$1({},i$1(_g,Qe$1)),{},{startValue:t1,byValue:r1.map((n1,i1)=>n1-t1[i1])}))}calculate(_g){const t1=this.startValue.map((r1,n1)=>this.easing(_g,r1,this.byValue[n1],this.duration,n1));return{value:t1,valueProgress:Math.abs((t1[0]-this.startValue[0])/this.byValue[0])}}};const ts$2=(e1,_g,t1)=>Math.max(e1,Math.min(_g,t1)),es$2=["startValue","endValue","easing","onChange","onComplete","abort"],ss$2=(e1,_g,t1,r1)=>_g+t1*(1-Math.cos(e1/r1*w$1)),is$3=e1=>e1&&((_g,t1,r1)=>e1(new qt(_g).toRgba(),t1,r1));let rs$2=class extends Ke{constructor(_g){let{startValue:t1,endValue:r1,easing:n1=ss$2,onChange:i1,onComplete:o1,abort:a1}=_g,u1=i$1(_g,es$2);const s1=new qt(t1).getSource(),l1=new qt(r1).getSource();super(s$1(s$1({},u1),{},{startValue:s1,byValue:l1.map((c1,d1)=>c1-s1[d1]),easing:n1,onChange:is$3(i1),onComplete:is$3(o1),abort:is$3(a1)}))}calculate(_g){const[t1,r1,n1,i1]=this.startValue.map((a1,u1)=>this.easing(_g,a1,this.byValue[u1],this.duration,u1)),o1=[...[t1,r1,n1].map(Math.round),ts$2(0,i1,1)];return{value:o1,valueProgress:o1.map((a1,u1)=>this.byValue[u1]!==0?Math.abs((a1-this.startValue[u1])/this.byValue[u1]):0).find(a1=>a1!==0)||0}}};function ns$1(e1){const _g=(t1=>Array.isArray(t1.startValue)||Array.isArray(t1.endValue))(e1)?new $e$1(e1):new Ze$2(e1);return _g.start(),_g}function os$2(e1){const _g=new rs$2(e1);return _g.start(),_g}const as$2=new ht$1(1,0),hs$2=new ht$1,cs$2=(e1,_g)=>e1.rotate(_g),ls$2=(e1,_g)=>new ht$1(_g).subtract(e1),us$2=e1=>e1.distanceFrom(hs$2),ds$2=(e1,_g)=>Math.atan2(ms$2(e1,_g),vs$2(e1,_g)),gs$2=e1=>ds$2(as$2,e1),fs$2=e1=>e1.eq(hs$2)?e1:e1.scalarDivide(us$2(e1)),ps$2=function(e1){let _g=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return fs$2(new ht$1(-e1.y,e1.x).scalarMultiply(_g?1:-1))},ms$2=(e1,_g)=>e1.x*_g.y-e1.y*_g.x,vs$2=(e1,_g)=>e1.x*_g.x+e1.y*_g.y,ys$2=(e1,_g,t1)=>{if(e1.eq(_g)||e1.eq(t1))return!0;const r1=ms$2(_g,t1),n1=ms$2(_g,e1),i1=ms$2(t1,e1);return r1>=0?n1>=0&&i1<=0:!(n1<=0&&i1>=0)};let _s$2=class Mv{constructor(_g){this.status=_g,this.points=[]}includes(_g){return this.points.some(t1=>t1.eq(_g))}append(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];return this.points=this.points.concat(t1.filter(n1=>!this.includes(n1))),this}static isPointContained(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t1.eq(r1))return _g.eq(t1);if(t1.x===r1.x)return _g.x===t1.x&&(n1||_g.y>=Math.min(t1.y,r1.y)&&_g.y<=Math.max(t1.y,r1.y));if(t1.y===r1.y)return _g.y===t1.y&&(n1||_g.x>=Math.min(t1.x,r1.x)&&_g.x<=Math.max(t1.x,r1.x));{const i1=ls$2(t1,r1),o1=ls$2(t1,_g).divide(i1);return n1?Math.abs(o1.x)===Math.abs(o1.y):o1.x===o1.y&&o1.x>=0&&o1.x<=1}}static isPointInPolygon(_g,t1){const r1=new ht$1(_g).setX(Math.min(_g.x-1,...t1.map(i1=>i1.x)));let n1=0;for(let i1=0;i1<t1.length;i1++){const o1=this.intersectSegmentSegment(t1[i1],t1[(i1+1)%t1.length],_g,r1);if(o1.includes(_g))return!0;n1+=+(o1.status==="Intersection")}return n1%2==1}static intersectLineLine(_g,t1,r1,n1){let i1=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o1=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a1=t1.x-_g.x,u1=t1.y-_g.y,s1=n1.x-r1.x,l1=n1.y-r1.y,c1=_g.x-r1.x,d1=_g.y-r1.y,h1=s1*d1-l1*c1,f1=a1*d1-u1*c1,g1=l1*a1-s1*u1;if(g1!==0){const v1=h1/g1,$1=f1/g1;return(i1||0<=v1&&v1<=1)&&(o1||0<=$1&&$1<=1)?new Mv("Intersection").append(new ht$1(_g.x+v1*a1,_g.y+v1*u1)):new Mv}if(h1===0||f1===0){const v1=i1||o1||Mv.isPointContained(_g,r1,n1)||Mv.isPointContained(t1,r1,n1)||Mv.isPointContained(r1,_g,t1)||Mv.isPointContained(n1,_g,t1);return new Mv(v1?"Coincident":void 0)}return new Mv("Parallel")}static intersectSegmentLine(_g,t1,r1,n1){return Mv.intersectLineLine(_g,t1,r1,n1,!1,!0)}static intersectSegmentSegment(_g,t1,r1,n1){return Mv.intersectLineLine(_g,t1,r1,n1,!1,!1)}static intersectLinePolygon(_g,t1,r1){let n1=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i1=new Mv,o1=r1.length;for(let a1,u1,s1,l1=0;l1<o1;l1++){if(a1=r1[l1],u1=r1[(l1+1)%o1],s1=Mv.intersectLineLine(_g,t1,a1,u1,n1,!1),s1.status==="Coincident")return s1;i1.append(...s1.points)}return i1.points.length>0&&(i1.status="Intersection"),i1}static intersectSegmentPolygon(_g,t1,r1){return Mv.intersectLinePolygon(_g,t1,r1,!1)}static intersectPolygonPolygon(_g,t1){const r1=new Mv,n1=_g.length,i1=[];for(let o1=0;o1<n1;o1++){const a1=_g[o1],u1=_g[(o1+1)%n1],s1=Mv.intersectSegmentPolygon(a1,u1,t1);s1.status==="Coincident"?(i1.push(s1),r1.append(a1,u1)):r1.append(...s1.points)}return i1.length>0&&i1.length===_g.length?new Mv("Coincident"):(r1.points.length>0&&(r1.status="Intersection"),r1)}static intersectPolygonRectangle(_g,t1,r1){const n1=t1.min(r1),i1=t1.max(r1),o1=new ht$1(i1.x,n1.y),a1=new ht$1(n1.x,i1.y);return Mv.intersectPolygonPolygon(_g,[n1,o1,i1,a1])}},xs$2=class extends dt$1{_getTransformedDimensions(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t1=s$1({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},_g),r1=t1.strokeWidth;let n1=r1,i1=0;this.strokeUniform&&(n1=0,i1=r1);const o1=t1.width+n1,a1=t1.height+n1;let u1;return u1=t1.skewX===0&&t1.skewY===0?new ht$1(o1*t1.scaleX,a1*t1.scaleY):Te$1(o1,a1,Lt(t1)),u1.scalarAdd(i1)}translateToGivenOrigin(_g,t1,r1,n1,i1){let o1=_g.x,a1=_g.y;const u1=Ae(n1)-Ae(t1),s1=Ae(i1)-Ae(r1);if(u1||s1){const l1=this._getTransformedDimensions();o1+=u1*l1.x,a1+=s1*l1.y}return new ht$1(o1,a1)}translateToCenterPoint(_g,t1,r1){const n1=this.translateToGivenOrigin(_g,t1,r1,M$3,M$3);return this.angle?n1.rotate(xt$1(this.angle),_g):n1}translateToOriginPoint(_g,t1,r1){const n1=this.translateToGivenOrigin(_g,M$3,M$3,t1,r1);return this.angle?n1.rotate(xt$1(this.angle),_g):n1}getCenterPoint(){const _g=this.getRelativeCenterPoint();return this.group?wt(_g,this.group.calcTransformMatrix()):_g}getRelativeCenterPoint(){return this.translateToCenterPoint(new ht$1(this.left,this.top),this.originX,this.originY)}getPointByOrigin(_g,t1){return this.translateToOriginPoint(this.getRelativeCenterPoint(),_g,t1)}setPositionByOrigin(_g,t1,r1){const n1=this.translateToCenterPoint(_g,t1,r1),i1=this.translateToOriginPoint(n1,this.originX,this.originY);this.set({left:i1.x,top:i1.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),P$1,E$1)}},Cs$2=class extends xs$2{getX(){return this.getXY().x}setX(_g){this.setXY(this.getXY().setX(_g))}getY(){return this.getXY().y}setY(_g){this.setXY(this.getXY().setY(_g))}getRelativeX(){return this.left}setRelativeX(_g){this.left=_g}getRelativeY(){return this.top}setRelativeY(_g){this.top=_g}getXY(){const _g=this.getRelativeXY();return this.group?wt(_g,this.group.calcTransformMatrix()):_g}setXY(_g,t1,r1){this.group&&(_g=wt(_g,St$2(this.group.calcTransformMatrix()))),this.setRelativeXY(_g,t1,r1)}getRelativeXY(){return new ht$1(this.left,this.top)}setRelativeXY(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(_g,t1,r1)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:_g,tr:t1,br:r1,bl:n1}=this.aCoords||(this.aCoords=this.calcACoords()),i1=[_g,t1,r1,n1];if(this.group){const o1=this.group.calcTransformMatrix();return i1.map(a1=>wt(a1,o1))}return i1}intersectsWithRect(_g,t1){return _s$2.intersectPolygonRectangle(this.getCoords(),_g,t1).status==="Intersection"}intersectsWithObject(_g){const t1=_s$2.intersectPolygonPolygon(this.getCoords(),_g.getCoords());return t1.status==="Intersection"||t1.status==="Coincident"||_g.isContainedWithinObject(this)||this.isContainedWithinObject(_g)}isContainedWithinObject(_g){return this.getCoords().every(t1=>_g.containsPoint(t1))}isContainedWithinRect(_g,t1){const{left:r1,top:n1,width:i1,height:o1}=this.getBoundingRect();return r1>=_g.x&&r1+i1<=t1.x&&n1>=_g.y&&n1+o1<=t1.y}isOverlapping(_g){return this.intersectsWithObject(_g)||this.isContainedWithinObject(_g)||_g.isContainedWithinObject(this)}containsPoint(_g){return _s$2.isPointInPolygon(_g,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:_g,br:t1}=this.canvas.vptCoords;return!!this.getCoords().some(r1=>r1.x<=t1.x&&r1.x>=_g.x&&r1.y<=t1.y&&r1.y>=_g.y)||!!this.intersectsWithRect(_g,t1)||this.containsPoint(_g.midPointFrom(t1))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:_g,br:t1}=this.canvas.vptCoords;return this.intersectsWithRect(_g,t1)?!0:this.getCoords().every(r1=>(r1.x>=t1.x||r1.x<=_g.x)&&(r1.y>=t1.y||r1.y<=_g.y))&&this.containsPoint(_g.midPointFrom(t1))}getBoundingRect(){return _e$2(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(_g){this._set(z$2,_g),this._set(N$2,_g),this.setCoords()}scaleToWidth(_g){const t1=this.getBoundingRect().width/this.getScaledWidth();return this.scale(_g/this.width/t1)}scaleToHeight(_g){const t1=this.getBoundingRect().height/this.getScaledHeight();return this.scale(_g/this.height/t1)}getCanvasRetinaScaling(){var _g;return((_g=this.canvas)===null||_g===void 0?void 0:_g.getRetinaScaling())||1}getTotalAngle(){return this.group?Ct(kt$1(this.calcTransformMatrix())):this.angle}getViewportTransform(){var _g;return((_g=this.canvas)===null||_g===void 0?void 0:_g.viewportTransform)||O$1.concat()}calcACoords(){const _g=Pt$1({angle:this.angle}),{x:t1,y:r1}=this.getRelativeCenterPoint(),n1=Mt$2(t1,r1),i1=Tt(n1,_g),o1=this._getTransformedDimensions(),a1=o1.x/2,u1=o1.y/2;return{tl:wt({x:-a1,y:-u1},i1),tr:wt({x:a1,y:-u1},i1),bl:wt({x:-a1,y:u1},i1),br:wt({x:a1,y:u1},i1)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let _g=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t1=[];return!_g&&this.group&&(t1=this.group.transformMatrixKey(_g)),t1.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ae(this.originX),Ae(this.originY)),t1}calcTransformMatrix(){let _g=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t1=this.calcOwnMatrix();if(_g||!this.group)return t1;const r1=this.transformMatrixKey(_g),n1=this.matrixCache;return n1&&n1.key.every((i1,o1)=>i1===r1[o1])?n1.value:(this.group&&(t1=Tt(this.group.calcTransformMatrix(!1),t1)),this.matrixCache={key:r1,value:t1},t1)}calcOwnMatrix(){const _g=this.transformMatrixKey(!0),t1=this.ownMatrixCache;if(t1&&t1.key===_g)return t1.value;const r1=this.getRelativeCenterPoint(),n1={angle:this.angle,translateX:r1.x,translateY:r1.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i1=Rt$1(n1);return this.ownMatrixCache={key:_g,value:i1},i1}_getNonTransformedDimensions(){return new ht$1(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(_g){return this._getTransformedDimensions(_g).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}},bs$2=class sT extends Cs$2{isDescendantOf(_g){const{parent:t1,group:r1}=this;return t1===_g||r1===_g||this.canvas===_g||!!t1&&t1.isDescendantOf(_g)||!!r1&&r1!==t1&&r1.isDescendantOf(_g)}getAncestors(){const _g=[];let t1=this;do t1=t1 instanceof sT?t1.parent:void 0,t1&&_g.push(t1);while(t1);return _g}findCommonAncestors(_g){if(this===_g)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t1=this.getAncestors(),r1=_g.getAncestors();if(t1.length===0&&r1.length>0&&this===r1[r1.length-1])return{fork:[],otherFork:[_g,...r1.slice(0,r1.length-1)],common:[this]};for(let n1,i1=0;i1<t1.length;i1++){if(n1=t1[i1],n1===_g)return{fork:[this,...t1.slice(0,i1)],otherFork:[],common:t1.slice(i1)};for(let o1=0;o1<r1.length;o1++){if(this===r1[o1])return{fork:[],otherFork:[_g,...r1.slice(0,o1)],common:[this,...t1]};if(n1===r1[o1])return{fork:[this,...t1.slice(0,i1)],otherFork:[_g,...r1.slice(0,o1)],common:t1.slice(i1)}}}return{fork:[this,...t1],otherFork:[_g,...r1],common:[]}}hasCommonAncestors(_g){const t1=this.findCommonAncestors(_g);return t1&&!!t1.common.length}isInFrontOf(_g){if(this===_g)return;const t1=this.findCommonAncestors(_g);if(t1.fork.includes(_g))return!0;if(t1.otherFork.includes(this))return!1;const r1=t1.common[0]||this.canvas;if(!r1)return;const n1=t1.fork.pop(),i1=t1.otherFork.pop(),o1=r1._objects.indexOf(n1),a1=r1._objects.indexOf(i1);return o1>-1&&o1>a1}},ws$2=class extends bs$2{animate(_g,t1){return Object.entries(_g).reduce((r1,n1)=>{let[i1,o1]=n1;return r1[i1]=this._animate(i1,o1,t1),r1},{})}_animate(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n1=_g.split("."),i1=this.constructor.colorProperties.includes(n1[n1.length-1]),{abort:o1,startValue:a1,onChange:u1,onComplete:s1}=r1,l1=s$1(s$1({},r1),{},{target:this,startValue:a1??n1.reduce((c1,d1)=>c1[d1],this),endValue:t1,abort:o1==null?void 0:o1.bind(this),onChange:(c1,d1,h1)=>{n1.reduce((f1,g1,v1)=>(v1===n1.length-1&&(f1[g1]=c1),f1[g1]),this),u1&&u1(c1,d1,h1)},onComplete:(c1,d1,h1)=>{this.setCoords(),s1&&s1(c1,d1,h1)}});return i1?os$2(l1):ns$1(l1)}};function Ss$2(e1){return new RegExp("^("+e1.join("|")+")\\b","i")}var Ts$2,Os$2;t$3(ws$2,"colorProperties",[K$2,J$1,"backgroundColor"]);const ks$1=String.raw(Ts$2||(Ts$2=r$3(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(Os$2||(Os$2=r$3(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const Ms$1=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ks$1+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ks$1+"))?\\s+(.*)"),Ps$2={cx:P$1,x:P$1,r:"radius",cy:E$1,y:E$1,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Es$2="font-size",As$2="clip-path";Ss$2(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Ss$2(["symbol","image","marker","pattern","view","svg"]);const Ls$2=Ss$2(["symbol","g","a","svg","clipPath","defs"]),Bs$2="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Is$2=new RegExp("(?:\\s|^)"+Bs$2+Bs$2+"("+ks$1+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");let Xs$2=class W2{constructor(_g){const t1=typeof _g=="string"?W2.parseShadow(_g):_g;Object.assign(this,W2.ownDefaults);for(const r1 in t1)this[r1]=t1[r1];this.id=mt$1()}static parseShadow(_g){const t1=_g.trim(),[,r1=0,n1=0,i1=0]=(Is$2.exec(t1)||[]).map(o1=>parseFloat(o1)||0);return{color:(t1.replace(Is$2,"")||"rgb(0,0,0)").trim(),offsetX:r1,offsetY:n1,blur:i1}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(_g){const t1=cs$2(new ht$1(this.offsetX,this.offsetY),xt$1(-_g.angle)),r1=new qt(this.color);let n1=40,i1=40;return _g.width&&_g.height&&(n1=100*Kt((Math.abs(t1.x)+this.blur)/_g.width,a.NUM_FRACTION_DIGITS)+20,i1=100*Kt((Math.abs(t1.y)+this.blur)/_g.height,a.NUM_FRACTION_DIGITS)+20),_g.flipX&&(t1.x*=-1),_g.flipY&&(t1.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i1,'%" height="').concat(100+2*i1,'%" x="-').concat(n1,'%" width="').concat(100+2*n1,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Kt(this.blur?this.blur/2:0,a.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Kt(t1.x,a.NUM_FRACTION_DIGITS),'" dy="').concat(Kt(t1.y,a.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r1.toRgb(),'" flood-opacity="').concat(r1.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const _g={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t1=W2.ownDefaults;return this.includeDefaultValues?_g:Yt$1(_g,(r1,n1)=>r1!==t1[n1])}static async fromObject(_g){return new this(_g)}};t$3(Xs$2,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),t$3(Xs$2,"type","shadow"),tt$1.setClass(Xs$2,"shadow");const Ws$1=e1=>JSON.parse(JSON.stringify(e1)),Ys$1=[E$1,P$1,z$2,N$2,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",U$4,q$2],Vs$1=[K$2,J$1,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Hs$1={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:P$1,originY:E$1,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:K$2,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Gs$2=["type"],zs$2=["extraParam"];let Ns$1=class H_ extends ws$2{static getDefaults(){return H_.ownDefaults}get type(){const _g=this.constructor.type;return _g==="FabricObject"?"object":_g.toLowerCase()}set type(_g){h$2("warn","Setting type has no effect",_g)}constructor(_g){super(),t$3(this,"_cacheContext",null),Object.assign(this,H_.ownDefaults),this.setOptions(_g)}_createCacheCanvas(){this._cacheCanvas=vt(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(_g){const t1=_g.width,r1=_g.height,n1=a.maxCacheSideLimit,i1=a.minCacheSideLimit;if(t1<=n1&&r1<=n1&&t1*r1<=a.perfLimitSizeTotal)return t1<i1&&(_g.width=i1),r1<i1&&(_g.height=i1),_g;const o1=t1/r1,[a1,u1]=x.limitDimsByArea(o1),s1=ts$2(i1,a1,n1),l1=ts$2(i1,u1,n1);return t1>s1&&(_g.zoomX/=t1/s1,_g.width=s1,_g.capped=!0),r1>l1&&(_g.zoomY/=r1/l1,_g.height=l1,_g.capped=!0),_g}_getCacheCanvasDimensions(){const _g=this.getTotalObjectScaling(),t1=this._getTransformedDimensions({skewX:0,skewY:0}),r1=t1.x*_g.x/this.scaleX,n1=t1.y*_g.y/this.scaleY;return{width:r1+2,height:n1+2,zoomX:_g.x,zoomY:_g.y,x:r1,y:n1}}_updateCacheCanvas(){const _g=this._cacheCanvas,t1=this._cacheContext,r1=this._limitCacheSize(this._getCacheCanvasDimensions()),n1=a.minCacheSideLimit,i1=r1.width,o1=r1.height,a1=r1.zoomX,u1=r1.zoomY,s1=i1!==_g.width||o1!==_g.height,l1=this.zoomX!==a1||this.zoomY!==u1;if(!_g||!t1)return!1;let c1,d1,h1=s1||l1,f1=0,g1=0,v1=!1;if(s1){const $1=this._cacheCanvas.width,y1=this._cacheCanvas.height,_1=i1>$1||o1>y1;v1=_1||(i1<.9*$1||o1<.9*y1)&&$1>n1&&y1>n1,_1&&!r1.capped&&(i1>n1||o1>n1)&&(f1=.1*i1,g1=.1*o1)}return ie(this)&&this.path&&(h1=!0,v1=!0,f1+=this.getHeightOfLine(0)*this.zoomX,g1+=this.getHeightOfLine(0)*this.zoomY),!!h1&&(v1?(_g.width=Math.ceil(i1+f1),_g.height=Math.ceil(o1+g1)):(t1.setTransform(1,0,0,1,0,0),t1.clearRect(0,0,_g.width,_g.height)),c1=r1.x/2,d1=r1.y/2,this.cacheTranslationX=Math.round(_g.width/2-c1)+c1,this.cacheTranslationY=Math.round(_g.height/2-d1)+d1,t1.translate(this.cacheTranslationX,this.cacheTranslationY),t1.scale(a1,u1),this.zoomX=a1,this.zoomY=u1,!0)}setOptions(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(_g)}transform(_g){const t1=this.group&&!this.group._transformDone||this.group&&this.canvas&&_g===this.canvas.contextTop,r1=this.calcTransformMatrix(!t1);_g.transform(r1[0],r1[1],r1[2],r1[3],r1[4],r1[5])}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t1=a.NUM_FRACTION_DIGITS,r1=this.clipPath&&!this.clipPath.excludeFromExport?s$1(s$1({},this.clipPath.toObject(_g)),{},{inverted:this.clipPath.inverted,absolutePositioned:this.clipPath.absolutePositioned}):null,n1=s$1(s$1({},Wt$2(this,_g)),{},{type:this.constructor.type,version:C,originX:this.originX,originY:this.originY,left:Kt(this.left,t1),top:Kt(this.top,t1),width:Kt(this.width,t1),height:Kt(this.height,t1),fill:ee(this.fill)?this.fill.toObject():this.fill,stroke:ee(this.stroke)?this.stroke.toObject():this.stroke,strokeWidth:Kt(this.strokeWidth,t1),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:Kt(this.strokeMiterLimit,t1),scaleX:Kt(this.scaleX,t1),scaleY:Kt(this.scaleY,t1),angle:Kt(this.angle,t1),flipX:this.flipX,flipY:this.flipY,opacity:Kt(this.opacity,t1),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:Kt(this.skewX,t1),skewY:Kt(this.skewY,t1)},r1?{clipPath:r1}:null);return this.includeDefaultValues?n1:this._removeDefaultValues(n1)}toDatalessObject(_g){return this.toObject(_g)}_removeDefaultValues(_g){const t1=this.constructor.getDefaults(),r1=Object.keys(t1).length>0?t1:Object.getPrototypeOf(this);return Yt$1(_g,(n1,i1)=>{if(i1===P$1||i1===E$1||i1==="type")return!0;const o1=r1[i1];return n1!==o1&&!(Array.isArray(n1)&&Array.isArray(o1)&&n1.length===0&&o1.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}getObjectScaling(){if(!this.group)return new ht$1(Math.abs(this.scaleX),Math.abs(this.scaleY));const _g=Dt$2(this.calcTransformMatrix());return new ht$1(Math.abs(_g.scaleX),Math.abs(_g.scaleY))}getTotalObjectScaling(){const _g=this.getObjectScaling();if(this.canvas){const t1=this.canvas.getZoom(),r1=this.getCanvasRetinaScaling();return _g.scalarMultiply(t1*r1)}return _g}getObjectOpacity(){let _g=this.opacity;return this.group&&(_g*=this.group.getObjectOpacity()),_g}_constrainScale(_g){return Math.abs(_g)<this.minScaleLimit?_g<0?-this.minScaleLimit:this.minScaleLimit:_g===0?1e-4:_g}_set(_g,t1){_g!==z$2&&_g!==N$2||(t1=this._constrainScale(t1)),_g===z$2&&t1<0?(this.flipX=!this.flipX,t1*=-1):_g==="scaleY"&&t1<0?(this.flipY=!this.flipY,t1*=-1):_g!=="shadow"||!t1||t1 instanceof Xs$2||(t1=new Xs$2(t1));const r1=this[_g]!==t1;return this[_g]=t1,r1&&this.constructor.cacheProperties.includes(_g)&&(this.dirty=!0),this.parent&&(this.dirty||r1&&this.constructor.stateProperties.includes(_g))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(_g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(_g.save(),this._setupCompositeOperation(_g),this.drawSelectionBackground(_g),this.transform(_g),this._setOpacity(_g),this._setShadow(_g),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(_g)):(this._removeCacheCanvas(),this.drawObject(_g),this.dirty=!1),_g.restore())}drawSelectionBackground(_g){}renderCache(_g){_g=_g||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,_g.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===J$1&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.parent||!this.parent.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(_g,t1){if(_g.save(),t1.inverted?_g.globalCompositeOperation="destination-out":_g.globalCompositeOperation="destination-in",t1.absolutePositioned){const r1=St$2(this.calcTransformMatrix());_g.transform(r1[0],r1[1],r1[2],r1[3],r1[4],r1[5])}t1.transform(_g),_g.scale(1/t1.zoomX,1/t1.zoomY),_g.drawImage(t1._cacheCanvas,-t1.cacheTranslationX,-t1.cacheTranslationY),_g.restore()}drawObject(_g,t1){const r1=this.fill,n1=this.stroke;t1?(this.fill="black",this.stroke="",this._setClippingProperties(_g)):this._renderBackground(_g),this._render(_g),this._drawClipPath(_g,this.clipPath),this.fill=r1,this.stroke=n1}_drawClipPath(_g,t1){t1&&(t1._set("canvas",this.canvas),t1.shouldCache(),t1._transformDone=!0,t1.renderCache({forClipping:!0}),this.drawClipPathOnCache(_g,t1))}drawCacheOnCanvas(_g){_g.scale(1/this.zoomX,1/this.zoomY),_g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let _g=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t1=this._cacheCanvas,r1=this._cacheContext;return!(!t1||!r1||_g||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t1&&r1&&!_g&&(r1.save(),r1.setTransform(1,0,0,1,0,0),r1.clearRect(0,0,t1.width,t1.height),r1.restore()),!0)}_renderBackground(_g){if(!this.backgroundColor)return;const t1=this._getNonTransformedDimensions();_g.fillStyle=this.backgroundColor,_g.fillRect(-t1.x/2,-t1.y/2,t1.x,t1.y),this._removeShadow(_g)}_setOpacity(_g){this.group&&!this.group._transformDone?_g.globalAlpha=this.getObjectOpacity():_g.globalAlpha*=this.opacity}_setStrokeStyles(_g,t1){const r1=t1.stroke;r1&&(_g.lineWidth=t1.strokeWidth,_g.lineCap=t1.strokeLineCap,_g.lineDashOffset=t1.strokeDashOffset,_g.lineJoin=t1.strokeLineJoin,_g.miterLimit=t1.strokeMiterLimit,te(r1)?r1.gradientUnits==="percentage"||r1.gradientTransform||r1.patternTransform?this._applyPatternForTransformedGradient(_g,r1):(_g.strokeStyle=r1.toLive(_g),this._applyPatternGradientTransform(_g,r1)):_g.strokeStyle=t1.stroke)}_setFillStyles(_g,t1){let{fill:r1}=t1;r1&&(te(r1)?(_g.fillStyle=r1.toLive(_g),this._applyPatternGradientTransform(_g,r1)):_g.fillStyle=r1)}_setClippingProperties(_g){_g.globalAlpha=1,_g.strokeStyle="transparent",_g.fillStyle="#000000"}_setLineDash(_g,t1){t1&&t1.length!==0&&(1&t1.length&&t1.push(...t1),_g.setLineDash(t1))}_setShadow(_g){if(!this.shadow)return;const t1=this.shadow,r1=this.canvas,n1=this.getCanvasRetinaScaling(),[i1,,,o1]=(r1==null?void 0:r1.viewportTransform)||O$1,a1=i1*n1,u1=o1*n1,s1=t1.nonScaling?new ht$1(1,1):this.getObjectScaling();_g.shadowColor=t1.color,_g.shadowBlur=t1.blur*a.browserShadowBlurConstant*(a1+u1)*(s1.x+s1.y)/4,_g.shadowOffsetX=t1.offsetX*a1*s1.x,_g.shadowOffsetY=t1.offsetY*u1*s1.y}_removeShadow(_g){this.shadow&&(_g.shadowColor="",_g.shadowBlur=_g.shadowOffsetX=_g.shadowOffsetY=0)}_applyPatternGradientTransform(_g,t1){if(!te(t1))return{offsetX:0,offsetY:0};const r1=t1.gradientTransform||t1.patternTransform,n1=-this.width/2+t1.offsetX||0,i1=-this.height/2+t1.offsetY||0;return t1.gradientUnits==="percentage"?_g.transform(this.width,0,0,this.height,n1,i1):_g.transform(1,0,0,1,n1,i1),r1&&_g.transform(r1[0],r1[1],r1[2],r1[3],r1[4],r1[5]),{offsetX:n1,offsetY:i1}}_renderPaintInOrder(_g){this.paintFirst===J$1?(this._renderStroke(_g),this._renderFill(_g)):(this._renderFill(_g),this._renderStroke(_g))}_render(_g){}_renderFill(_g){this.fill&&(_g.save(),this._setFillStyles(_g,this),this.fillRule==="evenodd"?_g.fill("evenodd"):_g.fill(),_g.restore())}_renderStroke(_g){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(_g),_g.save(),this.strokeUniform){const t1=this.getObjectScaling();_g.scale(1/t1.x,1/t1.y)}this._setLineDash(_g,this.strokeDashArray),this._setStrokeStyles(_g,this),_g.stroke(),_g.restore()}}_applyPatternForTransformedGradient(_g,t1){var r1;const n1=this._limitCacheSize(this._getCacheCanvasDimensions()),i1=vt(),o1=this.getCanvasRetinaScaling(),a1=n1.x/this.scaleX/o1,u1=n1.y/this.scaleY/o1;i1.width=Math.ceil(a1),i1.height=Math.ceil(u1);const s1=i1.getContext("2d");s1&&(s1.beginPath(),s1.moveTo(0,0),s1.lineTo(a1,0),s1.lineTo(a1,u1),s1.lineTo(0,u1),s1.closePath(),s1.translate(a1/2,u1/2),s1.scale(n1.zoomX/this.scaleX/o1,n1.zoomY/this.scaleY/o1),this._applyPatternGradientTransform(s1,t1),s1.fillStyle=t1.toLive(_g),s1.fill(),_g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),_g.scale(o1*this.scaleX/n1.zoomX,o1*this.scaleY/n1.zoomY),_g.strokeStyle=(r1=s1.createPattern(i1,"no-repeat"))!==null&&r1!==void 0?r1:"")}_findCenterFromElement(){return new ht$1(this.left+this.width/2,this.top+this.height/2)}clone(_g){const t1=this.toObject(_g);return this.constructor.fromObject(t1)}cloneAsImage(_g){const t1=this.toCanvasElement(_g);return new(tt$1.getClass("image"))(t1)}toCanvasElement(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t1=Se$1(this),r1=this.group,n1=this.shadow,i1=Math.abs,o1=_g.enableRetinaScaling?_$2():1,a1=(_g.multiplier||1)*o1,u1=_g.canvasProvider||(y1=>new fe$3(y1,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,_g.withoutTransform&&we$3(this),_g.withoutShadow&&(this.shadow=null),_g.viewportTransform&&Me$2(this,this.getViewportTransform()),this.setCoords();const s1=vt(),l1=this.getBoundingRect(),c1=this.shadow,d1=new ht$1;if(c1){const y1=c1.blur,_1=c1.nonScaling?new ht$1(1,1):this.getObjectScaling();d1.x=2*Math.round(i1(c1.offsetX)+y1)*i1(_1.x),d1.y=2*Math.round(i1(c1.offsetY)+y1)*i1(_1.y)}const h1=l1.width+d1.x,f1=l1.height+d1.y;s1.width=Math.ceil(h1),s1.height=Math.ceil(f1);const g1=u1(s1);_g.format==="jpeg"&&(g1.backgroundColor="#fff"),this.setPositionByOrigin(new ht$1(g1.width/2,g1.height/2),M$3,M$3);const v1=this.canvas;g1._objects=[this],this.set("canvas",g1),this.setCoords();const $1=g1.toCanvasElement(a1||1,_g);return this.set("canvas",v1),this.shadow=n1,r1&&(this.group=r1),this.set(t1),this.setCoords(),g1._objects=[],g1.destroy(),$1}toDataURL(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _t$1(this.toCanvasElement(_g),_g.format||"png",_g.quality||1)}isType(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];return t1.includes(this.constructor.type)||t1.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(_g){const{centeredRotation:t1,originX:r1,originY:n1}=this;if(t1){const{x:i1,y:o1}=this.getRelativeCenterPoint();this.originX=M$3,this.originY=M$3,this.left=i1,this.top=o1}if(this.set("angle",_g),t1){const{x:i1,y:o1}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r1,n1);this.left=i1,this.top=o1,this.originX=r1,this.originY=n1}}setOnGroup(){}_setupCompositeOperation(_g){this.globalCompositeOperation&&(_g.globalCompositeOperation=this.globalCompositeOperation)}dispose(){et.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&m$2().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}static _fromObject(_g){let t1=i$1(_g,Gs$2),r1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n1}=r1,i1=i$1(r1,zs$2);return Xt$2(Ws$1(t1),i1).then(o1=>{const a1=s$1(s$1({},i1),o1);if(n1){const{[n1]:u1}=a1;return new this(u1,i$1(a1,[n1].map(n$3)))}return new this(a1)})}static fromObject(_g,t1){return this._fromObject(_g,t1)}};t$3(Ns$1,"stateProperties",Ys$1),t$3(Ns$1,"cacheProperties",Vs$1),t$3(Ns$1,"ownDefaults",Hs$1),t$3(Ns$1,"type","FabricObject"),tt$1.setClass(Ns$1),tt$1.setClass(Ns$1,"object");const Us$1=(e1,_g)=>(t1,r1,n1,i1)=>{const o1=_g(t1,r1,n1,i1);return o1&&Pe$2(e1,Be(t1,r1,n1,i1)),o1};function qs$1(e1){return(_g,t1,r1,n1)=>{const{target:i1,originX:o1,originY:a1}=t1,u1=i1.getRelativeCenterPoint(),s1=i1.translateToOriginPoint(u1,o1,a1),l1=e1(_g,t1,r1,n1);return i1.setPositionByOrigin(s1,t1.originX,t1.originY),l1}}const Ks$2=Us$1(Y$2,qs$1((e1,_g,t1,r1)=>{const n1=Xe$1(_g,_g.originX,_g.originY,t1,r1);if(Ae(_g.originX)===Ae(M$3)||Ae(_g.originX)===Ae(j$1)&&n1.x<0||Ae(_g.originX)===Ae(P$1)&&n1.x>0){const{target:i1}=_g,o1=i1.strokeWidth/(i1.strokeUniform?i1.scaleX:1),a1=Fe$1(_g)?2:1,u1=i1.width,s1=Math.ceil(Math.abs(n1.x*a1/i1.scaleX)-o1);return i1.set("width",Math.max(s1,0)),u1!==i1.width}return!1}));function Js$1(e1,_g,t1,r1,n1){r1=r1||{};const i1=this.sizeX||r1.cornerSize||n1.cornerSize,o1=this.sizeY||r1.cornerSize||n1.cornerSize,a1=r1.transparentCorners!==void 0?r1.transparentCorners:n1.transparentCorners,u1=a1?J$1:K$2,s1=!a1&&(r1.cornerStrokeColor||n1.cornerStrokeColor);let l1,c1=_g,d1=t1;e1.save(),e1.fillStyle=r1.cornerColor||n1.cornerColor||"",e1.strokeStyle=r1.cornerStrokeColor||n1.cornerStrokeColor||"",i1>o1?(l1=i1,e1.scale(1,o1/i1),d1=t1*i1/o1):o1>i1?(l1=o1,e1.scale(i1/o1,1),c1=_g*o1/i1):l1=i1,e1.lineWidth=1,e1.beginPath(),e1.arc(c1,d1,l1/2,0,S,!1),e1[u1](),s1&&e1.stroke(),e1.restore()}function Zs$2(e1,_g,t1,r1,n1){r1=r1||{};const i1=this.sizeX||r1.cornerSize||n1.cornerSize,o1=this.sizeY||r1.cornerSize||n1.cornerSize,a1=r1.transparentCorners!==void 0?r1.transparentCorners:n1.transparentCorners,u1=a1?J$1:K$2,s1=!a1&&(r1.cornerStrokeColor||n1.cornerStrokeColor),l1=i1/2,c1=o1/2;e1.save(),e1.fillStyle=r1.cornerColor||n1.cornerColor||"",e1.strokeStyle=r1.cornerStrokeColor||n1.cornerStrokeColor||"",e1.lineWidth=1,e1.translate(_g,t1);const d1=n1.getTotalAngle();e1.rotate(xt$1(d1)),e1["".concat(u1,"Rect")](-l1,-c1,i1,o1),s1&&e1.strokeRect(-l1,-c1,i1,o1),e1.restore()}let Qs$1=class{constructor(_g){t$3(this,"visible",!0),t$3(this,"actionName",G$2),t$3(this,"angle",0),t$3(this,"x",0),t$3(this,"y",0),t$3(this,"offsetX",0),t$3(this,"offsetY",0),t$3(this,"sizeX",0),t$3(this,"sizeY",0),t$3(this,"touchSizeX",0),t$3(this,"touchSizeY",0),t$3(this,"cursorStyle","crosshair"),t$3(this,"withConnection",!1),Object.assign(this,_g)}shouldActivate(_g,t1,r1,n1){var i1;let{tl:o1,tr:a1,br:u1,bl:s1}=n1;return((i1=t1.canvas)===null||i1===void 0?void 0:i1.getActiveObject())===t1&&t1.isControlVisible(_g)&&_s$2.isPointInPolygon(r1,[o1,a1,u1,s1])}getActionHandler(_g,t1,r1){return this.actionHandler}getMouseDownHandler(_g,t1,r1){return this.mouseDownHandler}getMouseUpHandler(_g,t1,r1){return this.mouseUpHandler}cursorStyleHandler(_g,t1,r1){return t1.cursorStyle}getActionName(_g,t1,r1){return t1.actionName}getVisibility(_g,t1){var r1,n1;return(r1=(n1=_g._controlsVisibility)===null||n1===void 0?void 0:n1[t1])!==null&&r1!==void 0?r1:this.visible}setVisibility(_g,t1,r1){this.visible=_g}positionHandler(_g,t1,r1,n1){return new ht$1(this.x*_g.x+this.offsetX,this.y*_g.y+this.offsetY).transform(t1)}calcCornerCoords(_g,t1,r1,n1,i1,o1){const a1=Ot$2([Mt$2(r1,n1),Pt$1({angle:_g}),Et$1((i1?this.touchSizeX:this.sizeX)||t1,(i1?this.touchSizeY:this.sizeY)||t1)]);return{tl:new ht$1(-.5,-.5).transform(a1),tr:new ht$1(.5,-.5).transform(a1),br:new ht$1(.5,.5).transform(a1),bl:new ht$1(-.5,.5).transform(a1)}}render(_g,t1,r1,n1,i1){((n1=n1||{}).cornerStyle||i1.cornerStyle)==="circle"?Js$1.call(this,_g,t1,r1,n1,i1):Zs$2.call(this,_g,t1,r1,n1,i1)}};const $s$2=(e1,_g,t1)=>t1.lockRotation?je:_g.cursorStyle,ti$1=Us$1(I,qs$1((e1,_g,t1,r1)=>{let{target:n1,ex:i1,ey:o1,theta:a1,originX:u1,originY:s1}=_g;const l1=n1.translateToOriginPoint(n1.getRelativeCenterPoint(),u1,s1);if(Re$1(n1,"lockRotation"))return!1;const c1=Math.atan2(o1-l1.y,i1-l1.x),d1=Math.atan2(r1-l1.y,t1-l1.x);let h1=Ct(d1-c1+a1);if(n1.snapAngle&&n1.snapAngle>0){const g1=n1.snapAngle,v1=n1.snapThreshold||g1,$1=Math.ceil(h1/g1)*g1,y1=Math.floor(h1/g1)*g1;Math.abs(h1-y1)<v1?h1=y1:Math.abs(h1-$1)<v1&&(h1=$1)}h1<0&&(h1=360+h1),h1%=360;const f1=n1.angle!==h1;return n1.angle=h1,f1}));function ei$1(e1,_g){const t1=_g.canvas,r1=e1[t1.uniScaleKey];return t1.uniformScaling&&!r1||!t1.uniformScaling&&r1}function si$2(e1,_g,t1){const r1=Re$1(e1,"lockScalingX"),n1=Re$1(e1,"lockScalingY");if(r1&&n1||!_g&&(r1||n1)&&t1||r1&&_g==="x"||n1&&_g==="y")return!0;const{width:i1,height:o1,strokeWidth:a1}=e1;return i1===0&&a1===0&&_g!=="y"||o1===0&&a1===0&&_g!=="x"}const ii$1=["e","se","s","sw","w","nw","n","ne","e"],ri$1=(e1,_g,t1)=>{const r1=ei$1(e1,t1);if(si$2(t1,_g.x!==0&&_g.y===0?"x":_g.x===0&&_g.y!==0?"y":"",r1))return je;const n1=Ie$1(t1,_g);return"".concat(ii$1[n1],"-resize")};function ni$1(e1,_g,t1,r1){let n1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i1=_g.target,o1=n1.by,a1=ei$1(e1,i1);let u1,s1,l1,c1,d1,h1;if(si$2(i1,o1,a1))return!1;if(_g.gestureScale)s1=_g.scaleX*_g.gestureScale,l1=_g.scaleY*_g.gestureScale;else{if(u1=Xe$1(_g,_g.originX,_g.originY,t1,r1),d1=o1!=="y"?Math.sign(u1.x||_g.signX||1):1,h1=o1!=="x"?Math.sign(u1.y||_g.signY||1):1,_g.signX||(_g.signX=d1),_g.signY||(_g.signY=h1),Re$1(i1,"lockScalingFlip")&&(_g.signX!==d1||_g.signY!==h1))return!1;if(c1=i1._getTransformedDimensions(),a1&&!o1){const v1=Math.abs(u1.x)+Math.abs(u1.y),{original:$1}=_g,y1=v1/(Math.abs(c1.x*$1.scaleX/i1.scaleX)+Math.abs(c1.y*$1.scaleY/i1.scaleY));s1=$1.scaleX*y1,l1=$1.scaleY*y1}else s1=Math.abs(u1.x*i1.scaleX/c1.x),l1=Math.abs(u1.y*i1.scaleY/c1.y);Fe$1(_g)&&(s1*=2,l1*=2),_g.signX!==d1&&o1!=="y"&&(_g.originX=Le(_g.originX),s1*=-1,_g.signX=d1),_g.signY!==h1&&o1!=="x"&&(_g.originY=Le(_g.originY),l1*=-1,_g.signY=h1)}const f1=i1.scaleX,g1=i1.scaleY;return o1?(o1==="x"&&i1.set(z$2,s1),o1==="y"&&i1.set(N$2,l1)):(!Re$1(i1,"lockScalingX")&&i1.set(z$2,s1),!Re$1(i1,"lockScalingY")&&i1.set(N$2,l1)),f1!==i1.scaleX||g1!==i1.scaleY}const oi$1=Us$1(B$2,qs$1((e1,_g,t1,r1)=>ni$1(e1,_g,t1,r1))),ai$1=Us$1(B$2,qs$1((e1,_g,t1,r1)=>ni$1(e1,_g,t1,r1,{by:"x"}))),hi$2=Us$1(B$2,qs$1((e1,_g,t1,r1)=>ni$1(e1,_g,t1,r1,{by:"y"}))),ci$1=["target","ex","ey","skewingSide"],li$1={x:{counterAxis:"y",scale:z$2,skew:U$4,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:N$2,skew:q$2,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},ui$1=["ns","nesw","ew","nwse"],di$2=(e1,_g,t1)=>{if(_g.x!==0&&Re$1(t1,"lockSkewingY")||_g.y!==0&&Re$1(t1,"lockSkewingX"))return je;const r1=Ie$1(t1,_g)%4;return"".concat(ui$1[r1],"-resize")};function gi$1(e1,_g,t1,r1,n1){const{target:i1}=t1,{counterAxis:o1,origin:a1,lockSkewing:u1,skew:s1,flip:l1}=li$1[e1];if(Re$1(i1,u1))return!1;const{origin:c1,flip:d1}=li$1[o1],h1=Ae(t1[c1])*(i1[d1]?-1:1),f1=-Math.sign(h1)*(i1[l1]?-1:1),g1=.5*-((i1[s1]===0&&Xe$1(t1,M$3,M$3,r1,n1)[e1]>0||i1[s1]>0?1:-1)*f1)+.5;return Us$1(W$1,qs$1(($1,y1,_1,E1)=>function(T1,P1,k1){let{target:N1,ex:W1,ey:H1,skewingSide:ty}=P1,ey=i$1(P1,ci$1);const{skew:ly}=li$1[T1],oy=k1.subtract(new ht$1(W1,H1)).divide(new ht$1(N1.scaleX,N1.scaleY))[T1],Q1=N1[ly],U1=ey[ly],V1=Math.tan(xt$1(U1)),K1=T1==="y"?N1._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:N1._getTransformedDimensions({scaleX:1,scaleY:1}).y,J1=2*oy*ty/Math.max(K1,1)+V1,hy=Ct(Math.atan(J1));N1.set(ly,hy);const G1=Q1!==N1[ly];if(G1&&T1==="y"){const{skewX:Y1,scaleX:yy}=N1,Oy=N1._getTransformedDimensions({skewY:Q1}),Ey=N1._getTransformedDimensions(),jy=Y1!==0?Oy.x/Ey.x:1;jy!==1&&N1.set(z$2,jy*yy)}return G1}(e1,y1,new ht$1(_1,E1))))(_g,s$1(s$1({},t1),{},{[a1]:g1,skewingSide:f1}),r1,n1)}const fi$2=(e1,_g,t1,r1)=>gi$1("x",e1,_g,t1,r1),pi$2=(e1,_g,t1,r1)=>gi$1("y",e1,_g,t1,r1);function mi$2(e1,_g){return e1[_g.canvas.altActionKey]}const vi$1=(e1,_g,t1)=>{const r1=mi$2(e1,t1);return _g.x===0?r1?U$4:N$2:_g.y===0?r1?q$2:z$2:""},yi$1=(e1,_g,t1)=>mi$2(e1,t1)?di$2(0,_g,t1):ri$1(e1,_g,t1),_i$1=(e1,_g,t1,r1)=>mi$2(e1,_g.target)?pi$2(e1,_g,t1,r1):ai$1(e1,_g,t1,r1),xi$1=(e1,_g,t1,r1)=>mi$2(e1,_g.target)?fi$2(e1,_g,t1,r1):hi$2(e1,_g,t1,r1),Ci$1=()=>({ml:new Qs$1({x:-.5,y:0,cursorStyleHandler:yi$1,actionHandler:_i$1,getActionName:vi$1}),mr:new Qs$1({x:.5,y:0,cursorStyleHandler:yi$1,actionHandler:_i$1,getActionName:vi$1}),mb:new Qs$1({x:0,y:.5,cursorStyleHandler:yi$1,actionHandler:xi$1,getActionName:vi$1}),mt:new Qs$1({x:0,y:-.5,cursorStyleHandler:yi$1,actionHandler:xi$1,getActionName:vi$1}),tl:new Qs$1({x:-.5,y:-.5,cursorStyleHandler:ri$1,actionHandler:oi$1}),tr:new Qs$1({x:.5,y:-.5,cursorStyleHandler:ri$1,actionHandler:oi$1}),bl:new Qs$1({x:-.5,y:.5,cursorStyleHandler:ri$1,actionHandler:oi$1}),br:new Qs$1({x:.5,y:.5,cursorStyleHandler:ri$1,actionHandler:oi$1}),mtr:new Qs$1({x:0,y:-.5,actionHandler:ti$1,cursorStyleHandler:$s$2,offsetY:-40,withConnection:!0,actionName:X$3})}),bi$1=()=>({mr:new Qs$1({x:.5,y:0,actionHandler:Ks$2,cursorStyleHandler:yi$1,actionName:Y$2}),ml:new Qs$1({x:-.5,y:0,actionHandler:Ks$2,cursorStyleHandler:yi$1,actionName:Y$2})}),wi$1=()=>s$1(s$1({},Ci$1()),bi$1());let Si$1=class G_ extends Ns$1{static getDefaults(){return s$1(s$1({},super.getDefaults()),G_.ownDefaults)}constructor(_g){super(),Object.assign(this,this.constructor.createControls(),G_.ownDefaults),this.setOptions(_g)}static createControls(){return{controls:Ci$1()}}_updateCacheCanvas(){const _g=this.canvas;if(this.noScaleCache&&_g&&_g._currentTransform){const t1=_g._currentTransform,r1=t1.target,n1=t1.action;if(this===r1&&n1&&n1.startsWith(G$2))return!1}return super._updateCacheCanvas()}getActiveControl(){const _g=this.__corner;return _g?{key:_g,control:this.controls[_g],coord:this.oCoords[_g]}:void 0}findControl(_g){let t1=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r1=Object.entries(this.oCoords);for(let n1=r1.length-1;n1>=0;n1--){const[i1,o1]=r1[n1],a1=this.controls[i1];if(a1.shouldActivate(i1,this,_g,t1?o1.touchCorner:o1.corner))return this.__corner=i1,{key:i1,control:a1,coord:this.oCoords[i1]}}}calcOCoords(){const _g=this.getViewportTransform(),t1=this.getCenterPoint(),r1=Mt$2(t1.x,t1.y),n1=Pt$1({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i1=Tt(r1,n1),o1=Tt(_g,i1),a1=Tt(o1,[1/_g[0],0,0,1/_g[3],0,0]),u1=this.group?Dt$2(this.calcTransformMatrix()):void 0;u1&&(u1.scaleX=Math.abs(u1.scaleX),u1.scaleY=Math.abs(u1.scaleY));const s1=this._calculateCurrentDimensions(u1),l1={};return this.forEachControl((c1,d1)=>{const h1=c1.positionHandler(s1,a1,this,c1);l1[d1]=Object.assign(h1,this._calcCornerCoords(c1,h1))}),l1}_calcCornerCoords(_g,t1){const r1=this.getTotalAngle();return{corner:_g.calcCornerCoords(r1,this.cornerSize,t1.x,t1.y,!1,this),touchCorner:_g.calcCornerCoords(r1,this.touchCornerSize,t1.x,t1.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(_g){for(const t1 in this.controls)_g(this.controls[t1],t1,this)}drawSelectionBackground(_g){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;_g.save();const t1=this.getRelativeCenterPoint(),r1=this._calculateCurrentDimensions(),n1=this.getViewportTransform();_g.translate(t1.x,t1.y),_g.scale(1/n1[0],1/n1[3]),_g.rotate(xt$1(this.angle)),_g.fillStyle=this.selectionBackgroundColor,_g.fillRect(-r1.x/2,-r1.y/2,r1.x,r1.y),_g.restore()}strokeBorders(_g,t1){_g.strokeRect(-t1.x/2,-t1.y/2,t1.x,t1.y)}_drawBorders(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n1=s$1({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r1);_g.save(),_g.strokeStyle=n1.borderColor,this._setLineDash(_g,n1.borderDashArray),this.strokeBorders(_g,t1),n1.hasControls&&this.drawControlsConnectingLines(_g,t1),_g.restore()}_renderControls(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r1,hasControls:n1}=this,i1=s$1({hasBorders:r1,hasControls:n1},t1),o1=this.getViewportTransform(),a1=i1.hasBorders,u1=i1.hasControls,s1=Tt(o1,this.calcTransformMatrix()),l1=Dt$2(s1);_g.save(),_g.translate(l1.translateX,l1.translateY),_g.lineWidth=1*this.borderScaleFactor,this.group===this.parent&&(_g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(l1.angle-=180),_g.rotate(xt$1(this.group?l1.angle:this.angle)),a1&&this.drawBorders(_g,l1,t1),u1&&this.drawControls(_g,t1),_g.restore()}drawBorders(_g,t1,r1){let n1;if(r1&&r1.forActiveSelection||this.group){const i1=Te$1(this.width,this.height,Lt(t1)),o1=this.isStrokeAccountedForInDimensions()?ct$1:(this.strokeUniform?new ht$1().scalarAdd(this.canvas?this.canvas.getZoom():1):new ht$1(t1.scaleX,t1.scaleY)).scalarMultiply(this.strokeWidth);n1=i1.add(o1).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n1=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(_g,n1,r1)}drawControlsConnectingLines(_g,t1){let r1=!1;_g.beginPath(),this.forEachControl((n1,i1)=>{n1.withConnection&&n1.getVisibility(this,i1)&&(r1=!0,_g.moveTo(n1.x*t1.x,n1.y*t1.y),_g.lineTo(n1.x*t1.x+n1.offsetX,n1.y*t1.y+n1.offsetY))}),r1&&_g.stroke()}drawControls(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_g.save();const r1=this.getCanvasRetinaScaling(),{cornerStrokeColor:n1,cornerDashArray:i1,cornerColor:o1}=this,a1=s$1({cornerStrokeColor:n1,cornerDashArray:i1,cornerColor:o1},t1);_g.setTransform(r1,0,0,r1,0,0),_g.strokeStyle=_g.fillStyle=a1.cornerColor,this.transparentCorners||(_g.strokeStyle=a1.cornerStrokeColor),this._setLineDash(_g,a1.cornerDashArray),this.forEachControl((u1,s1)=>{if(u1.getVisibility(this,s1)){const l1=this.oCoords[s1];u1.render(_g,l1.x,l1.y,a1,this)}}),_g.restore()}isControlVisible(_g){return this.controls[_g]&&this.controls[_g].getVisibility(this,_g)}setControlVisible(_g,t1){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[_g]=t1}setControlsVisibility(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(_g).forEach(t1=>{let[r1,n1]=t1;return this.setControlVisible(r1,n1)})}clearContextTop(_g){if(!this.canvas)return;const t1=this.canvas.contextTop;if(!t1)return;const r1=this.canvas.viewportTransform;t1.save(),t1.transform(r1[0],r1[1],r1[2],r1[3],r1[4],r1[5]),this.transform(t1);const n1=this.width+4,i1=this.height+4;return t1.clearRect(-n1/2,-i1/2,n1,i1),_g||t1.restore(),t1}onDeselect(_g){return!1}onSelect(_g){return!1}shouldStartDragging(_g){return!1}onDragStart(_g){return!1}canDrop(_g){return!1}renderDragSourceEffect(_g){}renderDropTargetEffect(_g){}};function Ti$1(e1,_g){return _g.forEach(t1=>{Object.getOwnPropertyNames(t1.prototype).forEach(r1=>{r1!=="constructor"&&Object.defineProperty(e1.prototype,r1,Object.getOwnPropertyDescriptor(t1.prototype,r1)||Object.create(null))})}),e1}t$3(Si$1,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});let Oi$2=class extends Si$1{};Ti$1(Oi$2,[Ye]),tt$1.setClass(Oi$2),tt$1.setClass(Oi$2,"object");const ki$1=(e1,_g,t1,r1)=>{const n1=2*(r1=Math.round(r1))+1,{data:i1}=e1.getImageData(_g-r1,t1-r1,n1,n1);for(let o1=3;o1<i1.length;o1+=4)if(i1[o1]>0)return!1;return!0};let Di$2=class{constructor(_g){this.options=_g,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ht$1(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ht$1(1/this.options.scaleX,1/this.options.scaleY):new ht$1(1,1)}createSideVector(_g,t1){const r1=ls$2(_g,t1);return this.options.strokeUniform?r1.multiply(this.scale):r1}projectOrthogonally(_g,t1,r1){return this.applySkew(_g.add(this.calcOrthogonalProjection(_g,t1,r1)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(_g){const t1=new ht$1(_g);return t1.y+=t1.x*Math.tan(xt$1(this.options.skewY)),t1.x+=t1.y*Math.tan(xt$1(this.options.skewX)),t1}scaleUnitVector(_g,t1){return _g.multiply(this.strokeUniformScalar).scalarMultiply(t1)}};const Mi$2=new ht$1;let Pi$2=class H2 extends Di$2{static getOrthogonalRotationFactor(_g,t1){const r1=t1?ds$2(_g,t1):gs$2(_g);return Math.abs(r1)<w$1?-1:1}constructor(_g,t1,r1,n1){super(n1),t$3(this,"AB",void 0),t$3(this,"AC",void 0),t$3(this,"alpha",void 0),t$3(this,"bisector",void 0),this.A=new ht$1(_g),this.B=new ht$1(t1),this.C=new ht$1(r1),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=ds$2(this.AB,this.AC),this.bisector=fs$2(cs$2(this.AB.eq(Mi$2)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n1=this.createSideVector(_g,t1),i1=ps$2(n1),o1=H2.getOrthogonalRotationFactor(i1,this.bisector);return this.scaleUnitVector(i1,r1*o1)}projectBevel(){const _g=[];return(this.alpha%S==0?[this.B]:[this.B,this.C]).forEach(t1=>{_g.push(this.projectOrthogonally(this.A,t1)),_g.push(this.projectOrthogonally(this.A,t1,-this.strokeProjectionMagnitude))}),_g}projectMiter(){const _g=[],t1=Math.abs(this.alpha),r1=1/Math.sin(t1/2),n1=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r1),i1=this.options.strokeUniform?us$2(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return us$2(n1)/this.strokeProjectionMagnitude<=i1&&_g.push(this.applySkew(this.A.add(n1))),_g.push(...this.projectBevel()),_g}projectRoundNoSkew(_g,t1){const r1=[],n1=new ht$1(H2.getOrthogonalRotationFactor(this.bisector),H2.getOrthogonalRotationFactor(new ht$1(this.bisector.y,this.bisector.x)));return[new ht$1(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n1),new ht$1(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n1)].forEach(i1=>{ys$2(i1,_g,t1)&&r1.push(this.A.add(i1))}),r1}projectRoundWithSkew(_g,t1){const r1=[],{skewX:n1,skewY:i1,scaleX:o1,scaleY:a1,strokeUniform:u1}=this.options,s1=new ht$1(Math.tan(xt$1(n1)),Math.tan(xt$1(i1))),l1=this.strokeProjectionMagnitude,c1=u1?l1/a1/Math.sqrt(1/a1**2+1/o1**2*s1.y**2):l1/Math.sqrt(1+s1.y**2),d1=new ht$1(Math.sqrt(Math.max(l1**2-c1**2,0)),c1),h1=u1?l1/Math.sqrt(1+s1.x**2*(1/a1)**2/(1/o1+1/o1*s1.x*s1.y)**2):l1/Math.sqrt(1+s1.x**2/(1+s1.x*s1.y)**2),f1=new ht$1(h1,Math.sqrt(Math.max(l1**2-h1**2,0)));return[f1,f1.scalarMultiply(-1),d1,d1.scalarMultiply(-1)].map(g1=>this.applySkew(u1?g1.multiply(this.strokeUniformScalar):g1)).forEach(g1=>{ys$2(g1,_g,t1)&&r1.push(this.applySkew(this.A).add(g1))}),r1}projectRound(){const _g=[];_g.push(...this.projectBevel());const t1=this.alpha%S==0,r1=this.applySkew(this.A),n1=_g[t1?0:2].subtract(r1),i1=_g[t1?1:0].subtract(r1),o1=t1?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a1=ms$2(n1,o1)>0,u1=a1?n1:i1,s1=a1?i1:n1;return this.isSkewed()?_g.push(...this.projectRoundWithSkew(u1,s1)):_g.push(...this.projectRoundNoSkew(u1,s1)),_g}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(_g=>({originPoint:this.A,projectedPoint:_g,angle:this.alpha,bisector:this.bisector}))}},Ei$1=class extends Di$2{constructor(_g,t1,r1){super(r1),this.A=new ht$1(_g),this.T=new ht$1(t1)}calcOrthogonalProjection(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n1=this.createSideVector(_g,t1);return this.scaleUnitVector(ps$2(n1),r1)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const _g=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t1=new ht$1(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);_g.push(this.applySkew(this.A.add(t1)),this.applySkew(this.A.subtract(t1)))}else _g.push(...new Pi$2(this.A,this.T,this.T,this.options).projectRound());return _g}projectSquare(){const _g=[];if(this.A.eq(this.T)){const t1=new ht$1(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);_g.push(this.A.add(t1),this.A.subtract(t1))}else{const t1=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r1=this.scaleUnitVector(fs$2(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n1=this.A.add(r1);_g.push(n1.add(t1),n1.subtract(t1))}return _g.map(t1=>this.applySkew(t1))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(_g=>({originPoint:this.A,projectedPoint:_g}))}};const Ai$1=function(e1,_g){let t1=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r1=[];if(e1.length===0)return r1;const n1=e1.reduce((i1,o1)=>(i1[i1.length-1].eq(o1)||i1.push(new ht$1(o1)),i1),[new ht$1(e1[0])]);if(n1.length===1)t1=!0;else if(!t1){const i1=n1[0],o1=((a1,u1)=>{for(let s1=a1.length-1;s1>=0;s1--)if(u1(a1[s1],s1,a1))return s1;return-1})(n1,a1=>!a1.eq(i1));n1.splice(o1+1)}return n1.forEach((i1,o1,a1)=>{let u1,s1;o1===0?(s1=a1[1],u1=t1?i1:a1[a1.length-1]):o1===a1.length-1?(u1=a1[o1-1],s1=t1?i1:a1[0]):(u1=a1[o1-1],s1=a1[o1+1]),t1&&a1.length===1?r1.push(...new Ei$1(i1,i1,_g).project()):!t1||o1!==0&&o1!==a1.length-1?r1.push(...new Pi$2(i1,u1,s1,_g).project()):r1.push(...new Ei$1(i1,o1===0?s1:u1,_g).project())}),r1},ji$2=e1=>e1.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Fi$2=e1=>{const _g=[];for(let t1,r1=0;r1<e1.length;r1++)(t1=Li$2(e1,r1))!==!1&&_g.push(t1);return _g},Li$2=(e1,_g)=>{const t1=e1.charCodeAt(_g);if(isNaN(t1))return"";if(t1<55296||t1>57343)return e1.charAt(_g);if(55296<=t1&&t1<=56319){if(e1.length<=_g+1)throw"High surrogate without following low surrogate";const n1=e1.charCodeAt(_g+1);if(56320>n1||n1>57343)throw"High surrogate without following low surrogate";return e1.charAt(_g)+e1.charAt(_g+1)}if(_g===0)throw"Low surrogate without preceding high surrogate";const r1=e1.charCodeAt(_g-1);if(55296>r1||r1>56319)throw"Low surrogate without preceding high surrogate";return!1};var Ri$2=Object.freeze({__proto__:null,capitalize:function(e1){let _g=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(e1.charAt(0).toUpperCase()).concat(_g?e1.slice(1):e1.slice(1).toLowerCase())},escapeXml:ji$2,graphemeSplit:Fi$2});const Bi$2=function(e1,_g){let t1=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return e1.fill!==_g.fill||e1.stroke!==_g.stroke||e1.strokeWidth!==_g.strokeWidth||e1.fontSize!==_g.fontSize||e1.fontFamily!==_g.fontFamily||e1.fontWeight!==_g.fontWeight||e1.fontStyle!==_g.fontStyle||e1.textBackgroundColor!==_g.textBackgroundColor||e1.deltaY!==_g.deltaY||t1&&(e1.overline!==_g.overline||e1.underline!==_g.underline||e1.linethrough!==_g.linethrough)},Ii$1=(e1,_g)=>{const t1=_g.split(`
`),r1=[];let n1=-1,i1={};e1=Ws$1(e1);for(let o1=0;o1<t1.length;o1++){const a1=Fi$2(t1[o1]);if(e1[o1])for(let u1=0;u1<a1.length;u1++){n1++;const s1=e1[o1][u1];s1&&Object.keys(s1).length>0&&(Bi$2(i1,s1,!0)?r1.push({start:n1,end:n1+1,style:s1}):r1[r1.length-1].end++),i1=s1||{}}else n1+=a1.length,i1={}}return r1},Xi$2=(e1,_g)=>{if(!Array.isArray(e1))return Ws$1(e1);const t1=_g.split(L$2),r1={};let n1=-1,i1=0;for(let o1=0;o1<t1.length;o1++){const a1=Fi$2(t1[o1]);for(let u1=0;u1<a1.length;u1++)n1++,e1[i1]&&e1[i1].start<=n1&&n1<e1[i1].end&&(r1[o1]=r1[o1]||{},r1[o1][u1]=s$1({},e1[i1].style),n1===e1[i1].end-1&&i1++)}return r1},Wi$2=["display","transform",K$2,"fill-opacity","fill-rule","opacity",J$1,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Yi$2(e1,_g){const t1=e1.nodeName,r1=e1.getAttribute("class"),n1=e1.getAttribute("id"),i1="(?![a-zA-Z\\-]+)";let o1;if(o1=new RegExp("^"+t1,"i"),_g=_g.replace(o1,""),n1&&_g.length&&(o1=new RegExp("#"+n1+i1,"i"),_g=_g.replace(o1,"")),r1&&_g.length){const a1=r1.split(" ");for(let u1=a1.length;u1--;)o1=new RegExp("\\."+a1[u1]+i1,"i"),_g=_g.replace(o1,"")}return _g.length===0}function Vi$1(e1,_g){let t1=!0;const r1=Yi$2(e1,_g.pop());return r1&&_g.length&&(t1=function(n1,i1){let o1,a1=!0;for(;n1.parentElement&&n1.parentElement.nodeType===1&&i1.length;)a1&&(o1=i1.pop()),a1=Yi$2(n1=n1.parentElement,o1);return i1.length===0}(e1,_g)),r1&&t1&&_g.length===0}const Hi$2=e1=>{var _g;return(_g=Ps$2[e1])!==null&&_g!==void 0?_g:e1},Gi$2=new RegExp("(".concat(ks$1,")"),"gi"),zi$2=e1=>e1.replace(Gi$2," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Ni$1,Ui$2,qi$2,Ki$2,Ji$2,Zi$2,Qi$2;const $i$1="(".concat(ks$1,")"),tr=String.raw(Ni$1||(Ni$1=r$3(["(skewX)(",")"],["(skewX)\\(","\\)"])),$i$1),er$1=String.raw(Ui$2||(Ui$2=r$3(["(skewY)(",")"],["(skewY)\\(","\\)"])),$i$1),sr$2=String.raw(qi$2||(qi$2=r$3(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),$i$1,$i$1,$i$1),ir=String.raw(Ki$2||(Ki$2=r$3(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),$i$1,$i$1),rr=String.raw(Ji$2||(Ji$2=r$3(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),$i$1,$i$1),nr=String.raw(Zi$2||(Zi$2=r$3(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),$i$1,$i$1,$i$1,$i$1,$i$1,$i$1),or="(?:".concat(nr,"|").concat(rr,"|").concat(sr$2,"|").concat(ir,"|").concat(tr,"|").concat(er$1,")"),ar$1="(?:".concat(or,"*)"),hr$2=String.raw(Qi$2||(Qi$2=r$3(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),ar$1),cr$2=new RegExp(hr$2),lr$2=new RegExp(or),ur$2=new RegExp(or,"g");function dr$1(e1){const _g=[];if(!(e1=zi$2(e1).replace(/\s*([()])\s*/gi,"$1"))||e1&&!cr$2.test(e1))return[...O$1];for(const t1 of e1.matchAll(ur$2)){const r1=lr$2.exec(t1[0]);if(!r1)continue;let n1=O$1;const i1=r1.filter(f1=>!!f1),[,o1,...a1]=i1,[u1,s1,l1,c1,d1,h1]=a1.map(f1=>parseFloat(f1));switch(o1){case"translate":n1=Mt$2(u1,s1);break;case X$3:n1=Pt$1({angle:u1},{x:s1,y:l1});break;case G$2:n1=Et$1(u1,s1);break;case U$4:n1=jt(u1);break;case q$2:n1=Ft(u1);break;case"matrix":n1=[u1,s1,l1,c1,d1,h1]}_g.push(n1)}return Ot$2(_g)}function gr$2(e1,_g,t1,r1){const n1=Array.isArray(_g);let i1,o1=_g;if(e1!==K$2&&e1!==J$1||_g!==F$1){if(e1==="strokeUniform")return _g==="non-scaling-stroke";if(e1==="strokeDashArray")o1=_g===F$1?null:_g.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(e1==="transformMatrix")o1=t1&&t1.transformMatrix?Tt(t1.transformMatrix,dr$1(_g)):dr$1(_g);else if(e1==="visible")o1=_g!==F$1&&_g!=="hidden",t1&&t1.visible===!1&&(o1=!1);else if(e1==="opacity")o1=parseFloat(_g),t1&&t1.opacity!==void 0&&(o1*=t1.opacity);else if(e1==="textAnchor")o1=_g==="start"?P$1:_g==="end"?j$1:M$3;else if(e1==="charSpacing")i1=Jt$1(_g,r1)/r1*1e3;else if(e1==="paintFirst"){const a1=_g.indexOf(K$2),u1=_g.indexOf(J$1);o1=K$2,(a1>-1&&u1>-1&&u1<a1||a1===-1&&u1>-1)&&(o1=J$1)}else{if(e1==="href"||e1==="xlink:href"||e1==="font")return _g;if(e1==="imageSmoothing")return _g==="optimizeQuality";i1=n1?_g.map(Jt$1):Jt$1(_g,r1)}}else o1="";return!n1&&isNaN(i1)?o1:i1}function fr$2(e1,_g){const t1=e1.match(Ms$1);if(!t1)return;const r1=t1[1],n1=t1[3],i1=t1[4],o1=t1[5],a1=t1[6];r1&&(_g.fontStyle=r1),n1&&(_g.fontWeight=isNaN(parseFloat(n1))?n1:parseFloat(n1)),i1&&(_g.fontSize=Jt$1(i1)),a1&&(_g.fontFamily=a1),o1&&(_g.lineHeight=o1==="normal"?1:o1)}function pr$1(e1){const _g={},t1=e1.getAttribute("style");return t1&&(typeof t1=="string"?function(r1,n1){r1.replace(/;\s*$/,"").split(";").forEach(i1=>{const[o1,a1]=i1.split(":");n1[o1.trim().toLowerCase()]=a1.trim()})}(t1,_g):function(r1,n1){Object.entries(r1).forEach(i1=>{let[o1,a1]=i1;a1!==void 0&&(n1[o1.toLowerCase()]=a1)})}(t1,_g)),_g}const mr$2={stroke:"strokeOpacity",fill:"fillOpacity"};function vr$1(e1,_g,t1){if(!e1)return{};let r1,n1={},i1=k$3;e1.parentNode&&Ls$2.test(e1.parentNode.nodeName)&&(n1=vr$1(e1.parentElement,_g,t1),n1.fontSize&&(r1=i1=Jt$1(n1.fontSize)));const o1=s$1(s$1(s$1({},_g.reduce((s1,l1)=>{const c1=e1.getAttribute(l1);return c1&&(s1[l1]=c1),s1},{})),function(s1){let l1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c1={};for(const d1 in l1)Vi$1(s1,d1.split(" "))&&(c1=s$1(s$1({},c1),l1[d1]));return c1}(e1,t1)),pr$1(e1));o1[As$2]&&e1.setAttribute(As$2,o1[As$2]),o1[Es$2]&&(r1=Jt$1(o1[Es$2],i1),o1[Es$2]="".concat(r1));const a1={};for(const s1 in o1){const l1=Hi$2(s1),c1=gr$2(l1,o1[s1],n1,r1);a1[l1]=c1}a1&&a1.font&&fr$2(a1.font,a1);const u1=s$1(s$1({},n1),a1);return Ls$2.test(e1.nodeName)?u1:function(s1){const l1=Oi$2.getDefaults();return Object.entries(mr$2).forEach(c1=>{let[d1,h1]=c1;if(s1[h1]===void 0||s1[d1]==="")return;if(s1[d1]===void 0){if(!l1[d1])return;s1[d1]=l1[d1]}if(s1[d1].indexOf("url(")===0)return;const f1=new qt(s1[d1]);s1[d1]=f1.setAlpha(Kt(f1.getAlpha()*s1[h1],2)).toRgba()}),s1}(u1)}const yr$1=["left","top","width","height","visible"],_r$1=["rx","ry"];let xr$1=class q_ extends Oi$2{static getDefaults(){return s$1(s$1({},super.getDefaults()),q_.ownDefaults)}constructor(_g){super(),Object.assign(this,q_.ownDefaults),this.setOptions(_g),this._initRxRy()}_initRxRy(){const{rx:_g,ry:t1}=this;_g&&!t1?this.ry=_g:t1&&!_g&&(this.rx=t1)}_render(_g){const{width:t1,height:r1}=this,n1=-t1/2,i1=-r1/2,o1=this.rx?Math.min(this.rx,t1/2):0,a1=this.ry?Math.min(this.ry,r1/2):0,u1=o1!==0||a1!==0;_g.beginPath(),_g.moveTo(n1+o1,i1),_g.lineTo(n1+t1-o1,i1),u1&&_g.bezierCurveTo(n1+t1-D$2*o1,i1,n1+t1,i1+D$2*a1,n1+t1,i1+a1),_g.lineTo(n1+t1,i1+r1-a1),u1&&_g.bezierCurveTo(n1+t1,i1+r1-D$2*a1,n1+t1-D$2*o1,i1+r1,n1+t1-o1,i1+r1),_g.lineTo(n1+o1,i1+r1),u1&&_g.bezierCurveTo(n1+D$2*o1,i1+r1,n1,i1+r1-D$2*a1,n1,i1+r1-a1),_g.lineTo(n1,i1+a1),u1&&_g.bezierCurveTo(n1,i1+D$2*a1,n1+D$2*o1,i1,n1+o1,i1),_g.closePath(),this._renderPaintInOrder(_g)}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([..._r$1,..._g])}_toSVG(){const{width:_g,height:t1,rx:r1,ry:n1}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-_g/2,'" y="').concat(-t1/2,'" rx="').concat(r1,'" ry="').concat(n1,'" width="').concat(_g,'" height="').concat(t1,`" />
`)]}static async fromElement(_g,t1,r1){const n1=vr$1(_g,this.ATTRIBUTE_NAMES,r1),{left:i1=0,top:o1=0,width:a1=0,height:u1=0,visible:s1=!0}=n1,l1=i$1(n1,yr$1);return new this(s$1(s$1(s$1({},t1),l1),{},{left:i1,top:o1,width:a1,height:u1,visible:!!(s1&&a1&&u1)}))}};t$3(xr$1,"type","Rect"),t$3(xr$1,"cacheProperties",[...Vs$1,..._r$1]),t$3(xr$1,"ownDefaults",{rx:0,ry:0}),t$3(xr$1,"ATTRIBUTE_NAMES",[...Wi$2,"x","y","rx","ry","width","height"]),tt$1.setClass(xr$1),tt$1.setSVGClass(xr$1);const Cr$1="initialization",br$1="added",wr$1="removed",Sr$1="imperative",Tr$1=(e1,_g)=>{const{strokeUniform:t1,strokeWidth:r1,width:n1,height:i1,group:o1}=_g,a1=o1&&o1!==e1?Oe(o1.calcTransformMatrix(),e1.calcTransformMatrix()):null,u1=a1?_g.getRelativeCenterPoint().transform(a1):_g.getRelativeCenterPoint(),s1=!_g.isStrokeAccountedForInDimensions(),l1=t1&&s1?De$3(new ht$1(r1,r1),void 0,e1.calcTransformMatrix()):ct$1,c1=!t1&&s1?r1:0,d1=Te$1(n1+c1,i1+c1,Ot$2([a1,_g.calcOwnMatrix()],!0)).add(l1).scalarDivide(2);return[u1.subtract(d1),u1.add(d1)]};let Or$1=class{calcLayoutResult(_g,t1){if(this.shouldPerformLayout(_g))return this.calcBoundingBox(t1,_g)}shouldPerformLayout(_g){let{type:t1,prevStrategy:r1,strategy:n1}=_g;return t1===Cr$1||t1===Sr$1||!!r1&&n1!==r1}shouldLayoutClipPath(_g){let{type:t1,target:{clipPath:r1}}=_g;return t1!==Cr$1&&r1&&!r1.absolutePositioned}getInitialSize(_g,t1){return t1.size}calcBoundingBox(_g,t1){const{type:r1,target:n1}=t1;if(r1===Sr$1&&t1.overrides)return t1.overrides;if(_g.length===0)return;const{left:i1,top:o1,width:a1,height:u1}=_e$2(_g.map(c1=>Tr$1(n1,c1)).reduce((c1,d1)=>c1.concat(d1),[])),s1=new ht$1(a1,u1),l1=new ht$1(i1,o1).add(s1.scalarDivide(2));if(r1===Cr$1){const c1=this.getInitialSize(t1,{size:s1,center:l1});return{center:l1,relativeCorrection:new ht$1(0,0),size:c1}}return{center:l1.transform(n1.calcOwnMatrix()),size:s1}}};t$3(Or$1,"type","strategy");let kr$2=class extends Or$1{shouldPerformLayout(_g){return!0}};t$3(kr$2,"type","fit-content"),tt$1.setClass(kr$2);const Dr$1=["strategy"],Mr$1=["target","strategy","bubbles","prevStrategy"],Pr$2="layoutManager";let Er$2=class{constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new kr$2;t$3(this,"strategy",void 0),this.strategy=_g,this._subscriptions=new Map}performLayout(_g){const t1=s$1(s$1({bubbles:!0,strategy:this.strategy},_g),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t1);const r1=this.getLayoutResult(t1);r1&&this.commitLayout(t1,r1),this.onAfterLayout(t1,r1),this._prevLayoutStrategy=t1.strategy}attachHandlers(_g,t1){const{target:r1}=t1;return[Z$2,R$1,Y$2,I,B$2,W$1,H$2,V$2].map(n1=>_g.on(n1,i1=>this.performLayout(n1===Z$2?{type:"object_modified",trigger:n1,e:i1,target:r1}:{type:"object_modifying",trigger:n1,e:i1,target:r1})))}subscribe(_g,t1){this.unsubscribe(_g,t1);const r1=this.attachHandlers(_g,t1);this._subscriptions.set(_g,r1)}unsubscribe(_g,t1){(this._subscriptions.get(_g)||[]).forEach(r1=>r1()),this._subscriptions.delete(_g)}unsubscribeTargets(_g){_g.targets.forEach(t1=>this.unsubscribe(t1,_g))}subscribeTargets(_g){_g.targets.forEach(t1=>this.subscribe(t1,_g))}onBeforeLayout(_g){const{target:t1,type:r1}=_g,{canvas:n1}=t1;if(r1===Cr$1||r1===br$1?this.subscribeTargets(_g):r1===wr$1&&this.unsubscribeTargets(_g),t1.fire("layout:before",{context:_g}),n1&&n1.fire("object:layout:before",{target:t1,context:_g}),r1===Sr$1&&_g.deep){const i1=i$1(_g,Dr$1);t1.forEachObject(o1=>o1.layoutManager&&o1.layoutManager.performLayout(s$1(s$1({},i1),{},{bubbles:!1,target:o1})))}}getLayoutResult(_g){const{target:t1,strategy:r1,type:n1}=_g,i1=r1.calcLayoutResult(_g,t1.getObjects());if(!i1)return;const o1=n1===Cr$1?new ht$1:t1.getRelativeCenterPoint(),{center:a1,correction:u1=new ht$1,relativeCorrection:s1=new ht$1}=i1,l1=o1.subtract(a1).add(u1).transform(n1===Cr$1?O$1:St$2(t1.calcOwnMatrix()),!0).add(s1);return{result:i1,prevCenter:o1,nextCenter:a1,offset:l1}}commitLayout(_g,t1){const{target:r1}=_g,{result:{size:n1},nextCenter:i1}=t1;var o1,a1;r1.set({width:n1.x,height:n1.y}),this.layoutObjects(_g,t1),_g.type===Cr$1?r1.set({left:(o1=_g.x)!==null&&o1!==void 0?o1:i1.x+n1.x*Ae(r1.originX),top:(a1=_g.y)!==null&&a1!==void 0?a1:i1.y+n1.y*Ae(r1.originY)}):(r1.setPositionByOrigin(i1,M$3,M$3),r1.setCoords(),r1.set("dirty",!0))}layoutObjects(_g,t1){const{target:r1}=_g;r1.forEachObject(n1=>{n1.group===r1&&this.layoutObject(_g,t1,n1)}),_g.strategy.shouldLayoutClipPath(_g)&&this.layoutObject(_g,t1,r1.clipPath)}layoutObject(_g,t1,r1){let{offset:n1}=t1;r1.set({left:r1.left+n1.x,top:r1.top+n1.y})}onAfterLayout(_g,t1){const{target:r1,strategy:n1,bubbles:i1,prevStrategy:o1}=_g,a1=i$1(_g,Mr$1),{canvas:u1}=r1;r1.fire("layout:after",{context:_g,result:t1}),u1&&u1.fire("object:layout:after",{context:_g,result:t1,target:r1});const s1=r1.parent;i1&&s1!=null&&s1.layoutManager&&((a1.path||(a1.path=[])).push(r1),s1.layoutManager.performLayout(s$1(s$1({},a1),{},{target:s1}))),r1.set("dirty",!0)}dispose(){const{_subscriptions:_g}=this;_g.forEach(t1=>t1.forEach(r1=>r1())),_g.clear()}toObject(){return{type:Pr$2,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}};tt$1.setClass(Er$2,Pr$2);const Ar$1=["type","objects","layoutManager"];class jr extends Er$2{performLayout(){}}let Fr$1=class K_ extends ut$2(Oi$2){static getDefaults(){return s$1(s$1({},super.getDefaults()),K_.ownDefaults)}constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),t$3(this,"_activeObjects",[]),t$3(this,"__objectSelectionTracker",void 0),t$3(this,"__objectSelectionDisposer",void 0),Object.assign(this,K_.ownDefaults),this.setOptions(t1),this.groupInit(_g,t1)}groupInit(_g,t1){var r1;this._objects=[..._g],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(n1=>{this.enterGroup(n1,!1)}),this.layoutManager=(r1=t1.layoutManager)!==null&&r1!==void 0?r1:new Er$2,this.layoutManager.performLayout({type:Cr$1,target:this,targets:[..._g],x:t1.left,y:t1.top})}canEnterGroup(_g){return _g===this||this.isDescendantOf(_g)?(h$2("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(_g)===-1||(h$2("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(_g){return _g.filter((t1,r1,n1)=>this.canEnterGroup(t1)&&n1.indexOf(t1)===r1)}add(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];const n1=this._filterObjectsBeforeEnteringGroup(t1),i1=super.add(...n1);return this._onAfterObjectsChange(br$1,n1),i1}insertAt(_g){for(var t1=arguments.length,r1=new Array(t1>1?t1-1:0),n1=1;n1<t1;n1++)r1[n1-1]=arguments[n1];const i1=this._filterObjectsBeforeEnteringGroup(r1),o1=super.insertAt(_g,...i1);return this._onAfterObjectsChange(br$1,i1),o1}remove(){const _g=super.remove(...arguments);return this._onAfterObjectsChange(wr$1,_g),_g}_onObjectAdded(_g){this.enterGroup(_g,!0),this.fire("object:added",{target:_g}),_g.fire("added",{target:this})}_onObjectRemoved(_g,t1){this.exitGroup(_g,t1),this.fire("object:removed",{target:_g}),_g.fire("removed",{target:this})}_onAfterObjectsChange(_g,t1){this.layoutManager.performLayout({type:_g,targets:t1,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(_g,t1){const r1=this[_g];return super._set(_g,t1),_g==="canvas"&&r1!==t1&&(this._objects||[]).forEach(n1=>{n1._set(_g,t1)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(_g,t1){let{target:r1}=t1;const n1=this._activeObjects;if(_g)n1.push(r1),this._set("dirty",!0);else if(n1.length>0){const i1=n1.indexOf(r1);i1>-1&&(n1.splice(i1,1),this._set("dirty",!0))}}_watchObject(_g,t1){_g&&this._watchObject(!1,t1),_g?(t1.on("selected",this.__objectSelectionTracker),t1.on("deselected",this.__objectSelectionDisposer)):(t1.off("selected",this.__objectSelectionTracker),t1.off("deselected",this.__objectSelectionDisposer))}enterGroup(_g,t1){_g.group&&_g.group.remove(_g),_g._set("parent",this),this._enterGroup(_g,t1)}_enterGroup(_g,t1){t1&&be$2(_g,Tt(St$2(this.calcTransformMatrix()),_g.calcTransformMatrix())),this._shouldSetNestedCoords()&&_g.setCoords(),_g._set("group",this),_g._set("canvas",this.canvas),this._watchObject(!0,_g);const r1=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r1&&(r1===_g||_g.isDescendantOf(r1))&&this._activeObjects.push(_g)}exitGroup(_g,t1){this._exitGroup(_g,t1),_g._set("parent",void 0),_g._set("canvas",void 0)}_exitGroup(_g,t1){_g._set("group",void 0),t1||(be$2(_g,Tt(this.calcTransformMatrix(),_g.calcTransformMatrix())),_g.setCoords()),this._watchObject(!1,_g);const r1=this._activeObjects.length>0?this._activeObjects.indexOf(_g):-1;r1>-1&&this._activeObjects.splice(r1,1)}shouldCache(){const _g=Oi$2.prototype.shouldCache.call(this);if(_g){for(let t1=0;t1<this._objects.length;t1++)if(this._objects[t1].willDrawShadow())return this.ownCaching=!1,!1}return _g}willDrawShadow(){if(super.willDrawShadow())return!0;for(let _g=0;_g<this._objects.length;_g++)if(this._objects[_g].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(_g){this._renderBackground(_g);for(let r1=0;r1<this._objects.length;r1++){var t1;(t1=this.canvas)!==null&&t1!==void 0&&t1.preserveObjectStacking&&this._objects[r1].group!==this?(_g.save(),_g.transform(...St$2(this.calcTransformMatrix())),this._objects[r1].render(_g),_g.restore()):this._objects[r1].group===this&&this._objects[r1].render(_g)}this._drawClipPath(_g,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(_g=>_g.setCoords())}triggerLayout(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(s$1({target:this,type:Sr$1},_g))}render(_g){this._transformDone=!0,super.render(_g),this._transformDone=!1}__serializeObjects(_g,t1){const r1=this.includeDefaultValues;return this._objects.filter(function(n1){return!n1.excludeFromExport}).map(function(n1){const i1=n1.includeDefaultValues;n1.includeDefaultValues=r1;const o1=n1[_g||"toObject"](t1);return n1.includeDefaultValues=i1,o1})}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t1=this.layoutManager.toObject();return s$1(s$1(s$1({},super.toObject(["subTargetCheck","interactive",..._g])),t1.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t1}:{}),{},{objects:this.__serializeObjects("toObject",_g)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(_g=>{this._watchObject(!1,_g),_g.dispose()}),super.dispose()}_createSVGBgRect(_g){if(!this.backgroundColor)return"";const t1=xr$1.prototype._toSVG.call(this),r1=t1.indexOf("COMMON_PARTS");t1[r1]='for="group" ';const n1=t1.join("");return _g?_g(n1):n1}_toSVG(_g){const t1=["<g ","COMMON_PARTS",` >
`],r1=this._createSVGBgRect(_g);r1&&t1.push("		",r1);for(let n1=0;n1<this._objects.length;n1++)t1.push("		",this._objects[n1].toSVG(_g));return t1.push(`</g>
`),t1}getSvgStyles(){const _g=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t1=this.visible?"":" visibility: hidden;";return[_g,this.getSvgFilter(),t1].join("")}toClipPathSVG(_g){const t1=[],r1=this._createSVGBgRect(_g);r1&&t1.push("	",r1);for(let n1=0;n1<this._objects.length;n1++)t1.push("	",this._objects[n1].toClipPathSVG(_g));return this._createBaseClipPathSVGMarkup(t1,{reviver:_g})}static fromObject(_g,t1){let{type:r1,objects:n1=[],layoutManager:i1}=_g,o1=i$1(_g,Ar$1);return Promise.all([It$1(n1,t1),Xt$2(o1,t1)]).then(a1=>{let[u1,s1]=a1;const l1=new this(u1,s$1(s$1(s$1({},o1),s1),{},{layoutManager:new jr}));if(i1){const c1=tt$1.getClass(i1.type),d1=tt$1.getClass(i1.strategy);l1.layoutManager=new c1(new d1)}else l1.layoutManager=new Er$2;return l1.layoutManager.subscribeTargets({type:Cr$1,target:l1,targets:l1.getObjects()}),l1.setCoords(),l1})}};t$3(Fr$1,"type","Group"),t$3(Fr$1,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),tt$1.setClass(Fr$1);const Lr=(e1,_g)=>Math.min(_g.width/e1.width,_g.height/e1.height),Rr$2=(e1,_g)=>Math.max(_g.width/e1.width,_g.height/e1.height);var Br$2;const Ir="(".concat(ks$1,")"),Xr="(M) (?:".concat(Ir," ").concat(Ir," ?)+"),Wr$1="(L) (?:".concat(Ir," ").concat(Ir," ?)+"),Yr="(H) (?:".concat(Ir," ?)+"),Vr$1="(V) (?:".concat(Ir," ?)+"),Hr=String.raw(Br$2||(Br$2=r$3(["(Z)s*"],["(Z)\\s*"]))),Gr$1="(C) (?:".concat(Ir," ").concat(Ir," ").concat(Ir," ").concat(Ir," ").concat(Ir," ").concat(Ir," ?)+"),zr$2="(S) (?:".concat(Ir," ").concat(Ir," ").concat(Ir," ").concat(Ir," ?)+"),Nr$1="(Q) (?:".concat(Ir," ").concat(Ir," ").concat(Ir," ").concat(Ir," ?)+"),Ur$1="(T) (?:".concat(Ir," ").concat(Ir," ?)+"),qr="(A) (?:".concat(Ir," ").concat(Ir," ").concat(Ir," ([01]) ?([01]) ").concat(Ir," ").concat(Ir," ?)+"),Kr="(?:(?:".concat(Xr,")")+"|(?:".concat(Wr$1,")")+"|(?:".concat(Yr,")")+"|(?:".concat(Vr$1,")")+"|(?:".concat(Hr,")")+"|(?:".concat(Gr$1,")")+"|(?:".concat(zr$2,")")+"|(?:".concat(Nr$1,")")+"|(?:".concat(Ur$1,")")+"|(?:".concat(qr,"))"),Jr$1={m:"l",M:"L"},Zr=(e1,_g,t1,r1,n1,i1,o1,a1,u1,s1,l1)=>{const c1=ot$1(e1),d1=at(e1),h1=ot$1(_g),f1=at(_g),g1=t1*n1*h1-r1*i1*f1+o1,v1=r1*n1*h1+t1*i1*f1+a1;return["C",s1+u1*(-t1*n1*d1-r1*i1*c1),l1+u1*(-r1*n1*d1+t1*i1*c1),g1+u1*(t1*n1*f1+r1*i1*h1),v1+u1*(r1*n1*f1-t1*i1*h1),g1,v1]},Qr$2=(e1,_g,t1,r1)=>{const n1=Math.atan2(_g,e1),i1=Math.atan2(r1,t1);return i1>=n1?i1-n1:2*Math.PI-(n1-i1)};function $r$1(e1,_g,t1,r1,n1,i1,o1,a1){let u1;if(a.cachesBoundsOfCurve&&(u1=[...arguments].join(),x.boundsOfCurveCache[u1]))return x.boundsOfCurveCache[u1];const s1=Math.sqrt,l1=Math.abs,c1=[],d1=[[0,0],[0,0]];let h1=6*e1-12*t1+6*n1,f1=-3*e1+9*t1-9*n1+3*o1,g1=3*t1-3*e1;for(let E1=0;E1<2;++E1){if(E1>0&&(h1=6*_g-12*r1+6*i1,f1=-3*_g+9*r1-9*i1+3*a1,g1=3*r1-3*_g),l1(f1)<1e-12){if(l1(h1)<1e-12)continue;const W1=-g1/h1;0<W1&&W1<1&&c1.push(W1);continue}const T1=h1*h1-4*g1*f1;if(T1<0)continue;const P1=s1(T1),k1=(-h1+P1)/(2*f1);0<k1&&k1<1&&c1.push(k1);const N1=(-h1-P1)/(2*f1);0<N1&&N1<1&&c1.push(N1)}let v1=c1.length;const $1=v1,y1=rn$1(e1,_g,t1,r1,n1,i1,o1,a1);for(;v1--;){const{x:E1,y:T1}=y1(c1[v1]);d1[0][v1]=E1,d1[1][v1]=T1}d1[0][$1]=e1,d1[1][$1]=_g,d1[0][$1+1]=o1,d1[1][$1+1]=a1;const _1=[new ht$1(Math.min(...d1[0]),Math.min(...d1[1])),new ht$1(Math.max(...d1[0]),Math.max(...d1[1]))];return a.cachesBoundsOfCurve&&(x.boundsOfCurveCache[u1]=_1),_1}const tn$2=(e1,_g,t1)=>{let[r1,n1,i1,o1,a1,u1,s1,l1]=t1;const c1=((d1,h1,f1,g1,v1,$1,y1)=>{if(f1===0||g1===0)return[];let _1=0,E1=0,T1=0;const P1=Math.PI,k1=y1*T$2,N1=at(k1),W1=ot$1(k1),H1=.5*(-W1*d1-N1*h1),ty=.5*(-W1*h1+N1*d1),ey=f1**2,ly=g1**2,oy=ty**2,Q1=H1**2,U1=ey*ly-ey*oy-ly*Q1;let V1=Math.abs(f1),K1=Math.abs(g1);if(U1<0){const Wy=Math.sqrt(1-U1/(ey*ly));V1*=Wy,K1*=Wy}else T1=(v1===$1?-1:1)*Math.sqrt(U1/(ey*oy+ly*Q1));const J1=T1*V1*ty/K1,hy=-T1*K1*H1/V1,G1=W1*J1-N1*hy+.5*d1,Y1=N1*J1+W1*hy+.5*h1;let yy=Qr$2(1,0,(H1-J1)/V1,(ty-hy)/K1),Oy=Qr$2((H1-J1)/V1,(ty-hy)/K1,(-H1-J1)/V1,(-ty-hy)/K1);$1===0&&Oy>0?Oy-=2*P1:$1===1&&Oy<0&&(Oy+=2*P1);const Ey=Math.ceil(Math.abs(Oy/P1*2)),jy=new Array(Ey),Ay=Oy/Ey,Uy=8/3*Math.sin(Ay/4)*Math.sin(Ay/4)/Math.sin(Ay/2);let Gy=yy+Ay;for(let Wy=0;Wy<Ey;Wy++)jy[Wy]=Zr(yy,Gy,W1,N1,V1,K1,G1,Y1,Uy,_1,E1),_1=jy[Wy][5],E1=jy[Wy][6],yy=Gy,Gy+=Ay;return jy})(s1-e1,l1-_g,n1,i1,a1,u1,o1);for(let d1=0,h1=c1.length;d1<h1;d1++)c1[d1][1]+=e1,c1[d1][2]+=_g,c1[d1][3]+=e1,c1[d1][4]+=_g,c1[d1][5]+=e1,c1[d1][6]+=_g;return c1},en$2=e1=>{let _g=0,t1=0,r1=0,n1=0;const i1=[];let o1,a1=0,u1=0;for(const s1 of e1){const l1=[...s1];let c1;switch(l1[0]){case"l":l1[1]+=_g,l1[2]+=t1;case"L":_g=l1[1],t1=l1[2],c1=["L",_g,t1];break;case"h":l1[1]+=_g;case"H":_g=l1[1],c1=["L",_g,t1];break;case"v":l1[1]+=t1;case"V":t1=l1[1],c1=["L",_g,t1];break;case"m":l1[1]+=_g,l1[2]+=t1;case"M":_g=l1[1],t1=l1[2],r1=l1[1],n1=l1[2],c1=["M",_g,t1];break;case"c":l1[1]+=_g,l1[2]+=t1,l1[3]+=_g,l1[4]+=t1,l1[5]+=_g,l1[6]+=t1;case"C":a1=l1[3],u1=l1[4],_g=l1[5],t1=l1[6],c1=["C",l1[1],l1[2],a1,u1,_g,t1];break;case"s":l1[1]+=_g,l1[2]+=t1,l1[3]+=_g,l1[4]+=t1;case"S":o1==="C"?(a1=2*_g-a1,u1=2*t1-u1):(a1=_g,u1=t1),_g=l1[3],t1=l1[4],c1=["C",a1,u1,l1[1],l1[2],_g,t1],a1=c1[3],u1=c1[4];break;case"q":l1[1]+=_g,l1[2]+=t1,l1[3]+=_g,l1[4]+=t1;case"Q":a1=l1[1],u1=l1[2],_g=l1[3],t1=l1[4],c1=["Q",a1,u1,_g,t1];break;case"t":l1[1]+=_g,l1[2]+=t1;case"T":o1==="Q"?(a1=2*_g-a1,u1=2*t1-u1):(a1=_g,u1=t1),_g=l1[1],t1=l1[2],c1=["Q",a1,u1,_g,t1];break;case"a":l1[6]+=_g,l1[7]+=t1;case"A":tn$2(_g,t1,l1).forEach(d1=>i1.push(d1)),_g=l1[6],t1=l1[7];break;case"z":case"Z":_g=r1,t1=n1,c1=["Z"]}c1?(i1.push(c1),o1=c1[0]):o1=""}return i1},sn$2=(e1,_g,t1,r1)=>Math.sqrt((t1-e1)**2+(r1-_g)**2),rn$1=(e1,_g,t1,r1,n1,i1,o1,a1)=>u1=>{const s1=u1**3,l1=(h1=>3*h1**2*(1-h1))(u1),c1=(h1=>3*h1*(1-h1)**2)(u1),d1=(h1=>(1-h1)**3)(u1);return new ht$1(o1*s1+n1*l1+t1*c1+e1*d1,a1*s1+i1*l1+r1*c1+_g*d1)},nn$1=e1=>e1**2,on$2=e1=>2*e1*(1-e1),an$2=e1=>(1-e1)**2,hn$1=(e1,_g,t1,r1,n1,i1,o1,a1)=>u1=>{const s1=nn$1(u1),l1=on$2(u1),c1=an$2(u1),d1=3*(c1*(t1-e1)+l1*(n1-t1)+s1*(o1-n1)),h1=3*(c1*(r1-_g)+l1*(i1-r1)+s1*(a1-i1));return Math.atan2(h1,d1)},cn$2=(e1,_g,t1,r1,n1,i1)=>o1=>{const a1=nn$1(o1),u1=on$2(o1),s1=an$2(o1);return new ht$1(n1*a1+t1*u1+e1*s1,i1*a1+r1*u1+_g*s1)},ln$1=(e1,_g,t1,r1,n1,i1)=>o1=>{const a1=1-o1,u1=2*(a1*(t1-e1)+o1*(n1-t1)),s1=2*(a1*(r1-_g)+o1*(i1-r1));return Math.atan2(s1,u1)},un$1=(e1,_g,t1)=>{let r1=new ht$1(_g,t1),n1=0;for(let i1=1;i1<=100;i1+=1){const o1=e1(i1/100);n1+=sn$2(r1.x,r1.y,o1.x,o1.y),r1=o1}return n1},dn$1=(e1,_g)=>{let t1,r1=0,n1=0,i1={x:e1.x,y:e1.y},o1=s$1({},i1),a1=.01,u1=0;const s1=e1.iterator,l1=e1.angleFinder;for(;n1<_g&&a1>1e-4;)o1=s1(r1),u1=r1,t1=sn$2(i1.x,i1.y,o1.x,o1.y),t1+n1>_g?(r1-=a1,a1/=2):(i1=o1,r1+=a1,n1+=t1);return s$1(s$1({},o1),{},{angle:l1(u1)})},gn$1=e1=>{let _g,t1,r1=0,n1=0,i1=0,o1=0,a1=0;const u1=[];for(const s1 of e1){const l1={x:n1,y:i1,command:s1[0],length:0};switch(s1[0]){case"M":t1=l1,t1.x=o1=n1=s1[1],t1.y=a1=i1=s1[2];break;case"L":t1=l1,t1.length=sn$2(n1,i1,s1[1],s1[2]),n1=s1[1],i1=s1[2];break;case"C":_g=rn$1(n1,i1,s1[1],s1[2],s1[3],s1[4],s1[5],s1[6]),t1=l1,t1.iterator=_g,t1.angleFinder=hn$1(n1,i1,s1[1],s1[2],s1[3],s1[4],s1[5],s1[6]),t1.length=un$1(_g,n1,i1),n1=s1[5],i1=s1[6];break;case"Q":_g=cn$2(n1,i1,s1[1],s1[2],s1[3],s1[4]),t1=l1,t1.iterator=_g,t1.angleFinder=ln$1(n1,i1,s1[1],s1[2],s1[3],s1[4]),t1.length=un$1(_g,n1,i1),n1=s1[3],i1=s1[4];break;case"Z":t1=l1,t1.destX=o1,t1.destY=a1,t1.length=sn$2(n1,i1,o1,a1),n1=o1,i1=a1}r1+=t1.length,u1.push(t1)}return u1.push({length:r1,x:n1,y:i1}),u1},fn$1=function(e1,_g){let t1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gn$1(e1),r1=0;for(;_g-t1[r1].length>0&&r1<t1.length-2;)_g-=t1[r1].length,r1++;const n1=t1[r1],i1=_g/n1.length,o1=e1[r1];switch(n1.command){case"M":return{x:n1.x,y:n1.y,angle:0};case"Z":return s$1(s$1({},new ht$1(n1.x,n1.y).lerp(new ht$1(n1.destX,n1.destY),i1)),{},{angle:Math.atan2(n1.destY-n1.y,n1.destX-n1.x)});case"L":return s$1(s$1({},new ht$1(n1.x,n1.y).lerp(new ht$1(o1[1],o1[2]),i1)),{},{angle:Math.atan2(o1[2]-n1.y,o1[1]-n1.x)});case"C":case"Q":return dn$1(n1,_g)}},pn$1=new RegExp(Kr,"gi"),mn$1=new RegExp(Kr,"i"),vn=e1=>{e1=zi$2(e1);const _g=[];for(let[t1]of e1.matchAll(pn$1)){const r1=[];let n1;do{if(n1=mn$1.exec(t1),!n1)break;const i1=n1.filter(a1=>a1);i1.shift();const o1=i1.map(a1=>{const u1=Number.parseFloat(a1);return Number.isNaN(u1)?a1:u1});if(r1.push(o1),i1.length<=1)break;i1.shift(),t1=t1.replace(new RegExp("".concat(i1.join(" ?")," ?$")),"")}while(n1);r1.reverse().forEach((i1,o1)=>{const a1=Jr$1[i1[0]];o1>0&&(a1=="l"||a1=="L")&&(i1[0]=a1),_g.push(i1)})}return _g},yn$1=function(e1){let _g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t1=new ht$1(e1[0]),r1=new ht$1(e1[1]),n1=1,i1=0;const o1=[],a1=e1.length,u1=a1>2;let s1;for(u1&&(n1=e1[2].x<r1.x?-1:e1[2].x===r1.x?0:1,i1=e1[2].y<r1.y?-1:e1[2].y===r1.y?0:1),o1.push(["M",t1.x-n1*_g,t1.y-i1*_g]),s1=1;s1<a1;s1++){if(!t1.eq(r1)){const l1=t1.midPointFrom(r1);o1.push(["Q",t1.x,t1.y,l1.x,l1.y])}t1=e1[s1],s1+1<e1.length&&(r1=e1[s1+1])}return u1&&(n1=t1.x>e1[s1-2].x?1:t1.x===e1[s1-2].x?0:-1,i1=t1.y>e1[s1-2].y?1:t1.y===e1[s1-2].y?0:-1),o1.push(["L",t1.x+n1*_g,t1.y+i1*_g]),o1},_n=(e1,_g)=>e1.map(t1=>t1.map((r1,n1)=>n1===0||_g===void 0?r1:Kt(r1,_g)).join(" ")).join(" ");function xn(e1){let _g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t1=_g.onComplete||b,r1=new(y()).XMLHttpRequest,n1=_g.signal,i1=function(){r1.abort()},o1=function(){n1&&n1.removeEventListener("abort",i1),r1.onerror=r1.ontimeout=b};if(n1&&n1.aborted)throw new l$1("request");return n1&&n1.addEventListener("abort",i1,{once:!0}),r1.onreadystatechange=function(){r1.readyState===4&&(o1(),t1(r1),r1.onreadystatechange=b)},r1.onerror=r1.ontimeout=o1,r1.open("get",e1,!0),r1.send(),r1}const Cn$1=(e1,_g)=>{let t1=e1._findCenterFromElement();e1.transformMatrix&&((r1=>{if(r1.transformMatrix){const{scaleX:n1,scaleY:i1,angle:o1,skewX:a1}=Dt$2(r1.transformMatrix);r1.flipX=!1,r1.flipY=!1,r1.set(z$2,n1),r1.set(N$2,i1),r1.angle=o1,r1.skewX=a1,r1.skewY=0}})(e1),t1=t1.transform(e1.transformMatrix)),delete e1.transformMatrix,_g&&(e1.scaleX*=_g.scaleX,e1.scaleY*=_g.scaleY,e1.cropX=_g.cropX,e1.cropY=_g.cropY,t1.x+=_g.offsetLeft,t1.y+=_g.offsetTop,e1.width=_g.width,e1.height=_g.height),e1.setPositionByOrigin(t1,M$3,M$3)};var bn$1=Object.freeze({__proto__:null,addTransformToObject:Ce$1,animate:ns$1,animateColor:os$2,applyTransformToObject:be$2,calcAngleBetweenVectors:ds$2,calcDimensionsMatrix:Lt,calcPlaneChangeMatrix:Oe,calcVectorRotation:gs$2,cancelAnimFrame:ft$1,capValue:ts$2,composeMatrix:Rt$1,copyCanvasElement:e1=>{var _g;const t1=vt();return t1.width=e1.width,t1.height=e1.height,(_g=t1.getContext("2d"))===null||_g===void 0||_g.drawImage(e1,0,0),t1},cos:ot$1,createCanvasElement:vt,createImage:yt$1,createRotateMatrix:Pt$1,createScaleMatrix:Et$1,createSkewXMatrix:jt,createSkewYMatrix:Ft,createTranslateMatrix:Mt$2,createVector:ls$2,crossProduct:ms$2,degreesToRadians:xt$1,dotProduct:vs$2,ease:Ue$2,enlivenObjectEnlivables:Xt$2,enlivenObjects:It$1,findScaleToCover:Rr$2,findScaleToFit:Lr,getBoundsOfCurve:$r$1,getOrthonormalVector:ps$2,getPathSegmentsInfo:gn$1,getPointOnPath:fn$1,getPointer:me$2,getRandomInt:it$1,getRegularPolygonPath:(e1,_g)=>{const t1=2*Math.PI/e1;let r1=-w$1;e1%2==0&&(r1+=t1/2);const n1=new Array(e1+1);for(let i1=0;i1<e1;i1++){const o1=i1*t1+r1,{x:a1,y:u1}=new ht$1(ot$1(o1),at(o1)).scalarMultiply(_g);n1[i1]=[i1===0?"M":"L",a1,u1]}return n1[e1]=["Z"],n1},getSmoothPathFromPoints:yn$1,getSvgAttributes:e1=>{const _g=["instantiated_by_use","style","id","class"];switch(e1){case"linearGradient":return _g.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return _g.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return _g.concat(["offset","stop-color","stop-opacity"])}return _g},getUnitVector:fs$2,groupSVGElements:(e1,_g)=>e1&&e1.length===1?e1[0]:new Fr$1(e1,_g),hasStyleChanged:Bi$2,invertTransform:St$2,isBetweenVectors:ys$2,isIdentityMatrix:bt$1,isTouchEvent:ve$2,isTransparent:ki$1,joinPath:_n,loadImage:Bt$2,magnitude:us$2,makeBoundingBoxFromPoints:_e$2,makePathSimpler:en$2,matrixToSVG:Qt$1,mergeClipPaths:(e1,_g)=>{var t1;let r1=e1,n1=_g;r1.inverted&&!n1.inverted&&(r1=_g,n1=e1),Me$2(n1,(t1=n1.group)===null||t1===void 0?void 0:t1.calcTransformMatrix(),r1.calcTransformMatrix());const i1=r1.inverted&&n1.inverted;return i1&&(r1.inverted=n1.inverted=!1),new Fr$1([r1],{clipPath:n1,inverted:i1})},multiplyTransformMatrices:Tt,multiplyTransformMatrixArray:Ot$2,parsePath:vn,parsePreserveAspectRatioAttribute:Zt$1,parseUnit:Jt$1,pick:Wt$2,projectStrokeOnPoints:Ai$1,qrDecompose:Dt$2,radiansToDegrees:Ct,removeFromArray:nt$2,removeTransformFromObject:(e1,_g)=>{const t1=St$2(_g),r1=Tt(t1,e1.calcOwnMatrix());be$2(e1,r1)},removeTransformMatrixForSvgParsing:Cn$1,request:xn,requestAnimFrame:gt$2,resetObjectTransform:we$3,rotatePoint:(e1,_g,t1)=>e1.rotate(t1,_g),rotateVector:cs$2,saveObjectTransform:Se$1,sendObjectToPlane:Me$2,sendPointToPlane:ke$1,sendVectorToPlane:De$3,setStyle:he$1,sin:at,sizeAfterTransform:Te$1,string:Ri$2,stylesFromArray:Xi$2,stylesToArray:Ii$1,toDataURL:_t$1,toFixed:Kt,transformPath:(e1,_g,t1)=>(t1&&(_g=Tt(_g,[1,0,0,1,-t1.x,-t1.y])),e1.map(r1=>{const n1=[...r1];for(let i1=1;i1<r1.length-1;i1+=2){const{x:o1,y:a1}=wt({x:r1[i1],y:r1[i1+1]},_g);n1[i1]=o1,n1[i1+1]=a1}return n1})),transformPoint:wt});class wn extends de$1{constructor(_g){let{allowTouchScrolling:t1=!1,containerClass:r1=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(_g),t$3(this,"upper",void 0),t$3(this,"container",void 0);const{el:n1}=this.lower,i1=this.createUpperCanvas();this.upper={el:i1,ctx:i1.getContext("2d")},this.applyCanvasStyle(n1,{allowTouchScrolling:t1}),this.applyCanvasStyle(i1,{allowTouchScrolling:t1});const o1=this.createContainerElement();o1.classList.add(r1),n1.parentNode&&n1.parentNode.replaceChild(o1,n1),o1.append(n1,i1),this.container=o1}createUpperCanvas(){const{el:_g}=this.lower,t1=vt();return t1.className=_g.className,t1.classList.remove("lower-canvas"),t1.classList.add("upper-canvas"),t1.setAttribute("data-fabric","top"),t1.style.cssText=_g.style.cssText,t1.setAttribute("draggable","true"),t1}createContainerElement(){const _g=v$1().createElement("div");return _g.setAttribute("data-fabric","wrapper"),he$1(_g,{position:"relative"}),ue$1(_g),_g}applyCanvasStyle(_g,t1){let{allowTouchScrolling:r1}=t1;he$1(_g,{position:"absolute",left:"0",top:"0"}),function(n1,i1){const o1=i1?"manipulation":F$1;he$1(n1,{"touch-action":o1,"-ms-touch-action":o1})}(_g,r1),ue$1(_g)}setDimensions(_g,t1){super.setDimensions(_g,t1);const{el:r1,ctx:n1}=this.upper;ce$1(r1,n1,_g,t1)}setCSSDimensions(_g){super.setCSSDimensions(_g),le$2(this.upper.el,_g),le$2(this.container,_g)}cleanupDOM(_g){const t1=this.container,{el:r1}=this.lower,{el:n1}=this.upper;super.cleanupDOM(_g),t1.removeChild(n1),t1.removeChild(r1),t1.parentNode&&t1.parentNode.replaceChild(r1,t1)}dispose(){super.dispose(),m$2().dispose(this.upper.el),delete this.upper,delete this.container}}class Sn extends fe$3{constructor(){super(...arguments),t$3(this,"targets",[]),t$3(this,"_hoveredTargets",[]),t$3(this,"_objectsToRender",void 0),t$3(this,"_currentTransform",null),t$3(this,"_groupSelector",null),t$3(this,"contextTopDirty",!1)}static getDefaults(){return s$1(s$1({},super.getDefaults()),Sn.ownDefaults)}get upperCanvasEl(){var _g;return(_g=this.elements.upper)===null||_g===void 0?void 0:_g.el}get contextTop(){var _g;return(_g=this.elements.upper)===null||_g===void 0?void 0:_g.ctx}get wrapperEl(){return this.elements.container}initElements(_g){this.elements=new wn(_g,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(_g){this._objectsToRender=void 0,super._onObjectAdded(_g)}_onObjectRemoved(_g){this._objectsToRender=void 0,_g===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[_g]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[_g]}),_g.fire("deselected",{target:_g})),_g===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(_g)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const _g=this._activeObject;return!this.preserveObjectStacking&&_g?this._objects.filter(t1=>!t1.group&&t1!==_g).concat(_g):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(_g){_g.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(_g),this.contextTopDirty=!0),_g.restore()}renderTop(){const _g=this.contextTop;this.clearContext(_g),this.renderTopLayer(_g),this.fire("after:render",{ctx:_g})}setTargetFindTolerance(_g){_g=Math.round(_g),this.targetFindTolerance=_g;const t1=this.getRetinaScaling(),r1=Math.ceil((2*_g+1)*t1);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r1,this.pixelFindContext.scale(t1,t1)}isTargetTransparent(_g,t1,r1){const n1=this.targetFindTolerance,i1=this.pixelFindContext;this.clearContext(i1),i1.save(),i1.translate(-t1+n1,-r1+n1),i1.transform(...this.viewportTransform);const o1=_g.selectionBackgroundColor;_g.selectionBackgroundColor="",_g.render(i1),_g.selectionBackgroundColor=o1,i1.restore();const a1=Math.round(n1*this.getRetinaScaling());return ki$1(i1,a1,a1,a1)}_isSelectionKeyPressed(_g){const t1=this.selectionKey;return!!t1&&(Array.isArray(t1)?!!t1.find(r1=>!!r1&&_g[r1]===!0):_g[t1])}_shouldClearSelection(_g,t1){const r1=this.getActiveObjects(),n1=this._activeObject;return!!(!t1||t1&&n1&&r1.length>1&&r1.indexOf(t1)===-1&&n1!==t1&&!this._isSelectionKeyPressed(_g)||t1&&!t1.evented||t1&&!t1.selectable&&n1&&n1!==t1)}_shouldCenterTransform(_g,t1,r1){if(!_g)return;let n1;return t1===G$2||t1===z$2||t1===N$2||t1===Y$2?n1=this.centeredScaling||_g.centeredScaling:t1===X$3&&(n1=this.centeredRotation||_g.centeredRotation),n1?!r1:r1}_getOriginFromCorner(_g,t1){const r1={x:_g.originX,y:_g.originY};return t1&&(["ml","tl","bl"].includes(t1)?r1.x=j$1:["mr","tr","br"].includes(t1)&&(r1.x=P$1),["tl","mt","tr"].includes(t1)?r1.y=A:["bl","mb","br"].includes(t1)&&(r1.y=E$1)),r1}_setupCurrentTransform(_g,t1,r1){var n1;const i1=t1.group?ke$1(this.getScenePoint(_g),void 0,t1.group.calcTransformMatrix()):this.getScenePoint(_g),{key:o1="",control:a1}=t1.getActiveControl()||{},u1=r1&&a1?(n1=a1.getActionHandler(_g,t1,a1))===null||n1===void 0?void 0:n1.bind(a1):We$2,s1=((h1,f1,g1,v1)=>{if(!f1||!h1)return"drag";const $1=v1.controls[f1];return $1.getActionName(g1,$1,v1)})(r1,o1,_g,t1),l1=_g[this.centeredKey],c1=this._shouldCenterTransform(t1,s1,l1)?{x:M$3,y:M$3}:this._getOriginFromCorner(t1,o1),d1={target:t1,action:s1,actionHandler:u1,actionPerformed:!1,corner:o1,scaleX:t1.scaleX,scaleY:t1.scaleY,skewX:t1.skewX,skewY:t1.skewY,offsetX:i1.x-t1.left,offsetY:i1.y-t1.top,originX:c1.x,originY:c1.y,ex:i1.x,ey:i1.y,lastX:i1.x,lastY:i1.y,theta:xt$1(t1.angle),width:t1.width,height:t1.height,shiftKey:_g.shiftKey,altKey:l1,original:s$1(s$1({},Se$1(t1)),{},{originX:c1.x,originY:c1.y})};this._currentTransform=d1,this.fire("before:transform",{e:_g,transform:d1})}setCursor(_g){this.upperCanvasEl.style.cursor=_g}_drawSelection(_g){const{x:t1,y:r1,deltaX:n1,deltaY:i1}=this._groupSelector,o1=new ht$1(t1,r1).transform(this.viewportTransform),a1=new ht$1(t1+n1,r1+i1).transform(this.viewportTransform),u1=this.selectionLineWidth/2;let s1=Math.min(o1.x,a1.x),l1=Math.min(o1.y,a1.y),c1=Math.max(o1.x,a1.x),d1=Math.max(o1.y,a1.y);this.selectionColor&&(_g.fillStyle=this.selectionColor,_g.fillRect(s1,l1,c1-s1,d1-l1)),this.selectionLineWidth&&this.selectionBorderColor&&(_g.lineWidth=this.selectionLineWidth,_g.strokeStyle=this.selectionBorderColor,s1+=u1,l1+=u1,c1-=u1,d1-=u1,Oi$2.prototype._setLineDash.call(this,_g,this.selectionDashArray),_g.strokeRect(s1,l1,c1-s1,d1-l1))}findTarget(_g){if(this.skipTargetFind)return;const t1=this.getViewportPoint(_g),r1=this._activeObject,n1=this.getActiveObjects();if(this.targets=[],r1&&n1.length>=1){if(r1.findControl(t1,ve$2(_g))||n1.length>1&&this.searchPossibleTargets([r1],t1))return r1;if(r1===this.searchPossibleTargets([r1],t1)){if(this.preserveObjectStacking){const i1=this.targets;this.targets=[];const o1=this.searchPossibleTargets(this._objects,t1);return _g[this.altSelectionKey]&&o1&&o1!==r1?(this.targets=i1,r1):o1}return r1}}return this.searchPossibleTargets(this._objects,t1)}_pointIsInObjectSelectionArea(_g,t1){let r1=_g.getCoords();const n1=this.getZoom(),i1=_g.padding/n1;if(i1){const[o1,a1,u1,s1]=r1,l1=Math.atan2(a1.y-o1.y,a1.x-o1.x),c1=ot$1(l1)*i1,d1=at(l1)*i1,h1=c1+d1,f1=c1-d1;r1=[new ht$1(o1.x-f1,o1.y-h1),new ht$1(a1.x+h1,a1.y-f1),new ht$1(u1.x+f1,u1.y+h1),new ht$1(s1.x-h1,s1.y+f1)]}return _s$2.isPointInPolygon(t1,r1)}_checkTarget(_g,t1){return!!(_g&&_g.visible&&_g.evented&&this._pointIsInObjectSelectionArea(_g,ke$1(t1,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!_g.perPixelTargetFind||_g.isEditing||!this.isTargetTransparent(_g,t1.x,t1.y)))}_searchPossibleTargets(_g,t1){let r1=_g.length;for(;r1--;){const n1=_g[r1];if(this._checkTarget(n1,t1)){if(lt$2(n1)&&n1.subTargetCheck){const i1=this._searchPossibleTargets(n1._objects,t1);i1&&this.targets.push(i1)}return n1}}}searchPossibleTargets(_g,t1){const r1=this._searchPossibleTargets(_g,t1);if(r1&&lt$2(r1)&&r1.interactive&&this.targets[0]){const n1=this.targets;for(let i1=n1.length-1;i1>0;i1--){const o1=n1[i1];if(!lt$2(o1)||!o1.interactive)return o1}return n1[0]}return r1}getViewportPoint(_g){return this._pointer?this._pointer:this.getPointer(_g,!0)}getScenePoint(_g){return this._absolutePointer?this._absolutePointer:this.getPointer(_g)}getPointer(_g){let t1=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r1=this.upperCanvasEl,n1=r1.getBoundingClientRect();let i1=me$2(_g),o1=n1.width||0,a1=n1.height||0;o1&&a1||(E$1 in n1&&A in n1&&(a1=Math.abs(n1.top-n1.bottom)),j$1 in n1&&P$1 in n1&&(o1=Math.abs(n1.right-n1.left))),this.calcOffset(),i1.x=i1.x-this._offset.left,i1.y=i1.y-this._offset.top,t1||(i1=ke$1(i1,void 0,this.viewportTransform));const u1=this.getRetinaScaling();u1!==1&&(i1.x/=u1,i1.y/=u1);const s1=o1===0||a1===0?new ht$1(1,1):new ht$1(r1.width/o1,r1.height/a1);return i1.multiply(s1)}_setDimensionsImpl(_g,t1){this._resetTransformEventData(),super._setDimensionsImpl(_g,t1),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=vt(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const _g=this._activeObject;return re(_g)?_g.getObjects():_g?[_g]:[]}_fireSelectionEvents(_g,t1){let r1=!1,n1=!1;const i1=this.getActiveObjects(),o1=[],a1=[];_g.forEach(u1=>{i1.includes(u1)||(r1=!0,u1.fire("deselected",{e:t1,target:u1}),a1.push(u1))}),i1.forEach(u1=>{_g.includes(u1)||(r1=!0,u1.fire("selected",{e:t1,target:u1}),o1.push(u1))}),_g.length>0&&i1.length>0?(n1=!0,r1&&this.fire("selection:updated",{e:t1,selected:o1,deselected:a1})):i1.length>0?(n1=!0,this.fire("selection:created",{e:t1,selected:o1})):_g.length>0&&(n1=!0,this.fire("selection:cleared",{e:t1,deselected:a1})),n1&&(this._objectsToRender=void 0)}setActiveObject(_g,t1){const r1=this.getActiveObjects(),n1=this._setActiveObject(_g,t1);return this._fireSelectionEvents(r1,t1),n1}_setActiveObject(_g,t1){const r1=this._activeObject;return r1!==_g&&!(!this._discardActiveObject(t1,_g)&&this._activeObject)&&!_g.onSelect({e:t1})&&(this._activeObject=_g,re(_g)&&r1!==_g&&_g.set("canvas",this),_g.setCoords(),!0)}_discardActiveObject(_g,t1){const r1=this._activeObject;return!!r1&&!r1.onDeselect({e:_g,object:t1})&&(this._currentTransform&&this._currentTransform.target===r1&&this.endCurrentTransform(_g),this._activeObject=void 0,!0)}discardActiveObject(_g){const t1=this.getActiveObjects(),r1=this.getActiveObject();t1.length&&this.fire("before:selection:cleared",{e:_g,deselected:[r1]});const n1=this._discardActiveObject(_g);return this._fireSelectionEvents(t1,_g),n1}endCurrentTransform(_g){const t1=this._currentTransform;this._finalizeCurrentTransform(_g),t1&&t1.target&&(t1.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(_g){const t1=this._currentTransform,r1=t1.target,n1={e:_g,target:r1,transform:t1,action:t1.action};r1._scaling&&(r1._scaling=!1),r1.setCoords(),t1.actionPerformed&&(this.fire("object:modified",n1),r1.fire(Z$2,n1))}setViewportTransform(_g){super.setViewportTransform(_g);const t1=this._activeObject;t1&&t1.setCoords()}destroy(){const _g=this._activeObject;re(_g)&&(_g.removeAll(),_g.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(_g){const t1=this._activeObject;t1&&t1._renderControls(_g)}_toObject(_g,t1,r1){const n1=this._realizeGroupTransformOnObject(_g),i1=super._toObject(_g,t1,r1);return _g.set(n1),i1}_realizeGroupTransformOnObject(_g){const{group:t1}=_g;if(t1&&re(t1)&&this._activeObject===t1){const r1=Wt$2(_g,["angle","flipX","flipY",P$1,z$2,N$2,U$4,q$2,E$1]);return Ce$1(_g,t1.calcOwnMatrix()),r1}return{}}_setSVGObject(_g,t1,r1){const n1=this._realizeGroupTransformOnObject(t1);super._setSVGObject(_g,t1,r1),t1.set(n1)}}t$3(Sn,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Tn{constructor(_g){t$3(this,"targets",[]),t$3(this,"__disposer",void 0);const t1=()=>{const{hiddenTextarea:n1}=_g.getActiveObject()||{};n1&&n1.focus()},r1=_g.upperCanvasEl;r1.addEventListener("click",t1),this.__disposer=()=>r1.removeEventListener("click",t1)}exitTextEditing(){this.target=void 0,this.targets.forEach(_g=>{_g.isEditing&&_g.exitEditing()})}add(_g){this.targets.push(_g)}remove(_g){this.unregister(_g),nt$2(this.targets,_g)}register(_g){this.target=_g}unregister(_g){_g===this.target&&(this.target=void 0)}onMouseMove(_g){var t1;!((t1=this.target)===null||t1===void 0)&&t1.isEditing&&this.target.updateSelectionOnMouseMove(_g)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const On$1=["target","oldTarget","fireCanvas","e"],kn$2={passive:!1},Dn$2=(e1,_g)=>{const t1=e1.getViewportPoint(_g),r1=e1.getScenePoint(_g);return{viewportPoint:t1,scenePoint:r1,pointer:t1,absolutePointer:r1}},Mn$2=function(e1){for(var _g=arguments.length,t1=new Array(_g>1?_g-1:0),r1=1;r1<_g;r1++)t1[r1-1]=arguments[r1];return e1.addEventListener(...t1)},Pn$2=function(e1){for(var _g=arguments.length,t1=new Array(_g>1?_g-1:0),r1=1;r1<_g;r1++)t1[r1-1]=arguments[r1];return e1.removeEventListener(...t1)},En$1={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class An extends Sn{constructor(_g){super(_g,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),t$3(this,"_isClick",void 0),t$3(this,"textEditingManager",new Tn(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t1=>{this[t1]=this[t1].bind(this)}),this.addOrRemove(Mn$2,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(_g,t1){const r1=this.upperCanvasEl,n1=this._getEventPrefix();_g(ae$1(r1),"resize",this._onResize),_g(r1,n1+"down",this._onMouseDown),_g(r1,"".concat(n1,"move"),this._onMouseMove,kn$2),_g(r1,"".concat(n1,"out"),this._onMouseOut),_g(r1,"".concat(n1,"enter"),this._onMouseEnter),_g(r1,"wheel",this._onMouseWheel),_g(r1,"contextmenu",this._onContextMenu),_g(r1,"dblclick",this._onDoubleClick),_g(r1,"dragstart",this._onDragStart),_g(r1,"dragend",this._onDragEnd),_g(r1,"dragover",this._onDragOver),_g(r1,"dragenter",this._onDragEnter),_g(r1,"dragleave",this._onDragLeave),_g(r1,"drop",this._onDrop),this.enablePointerEvents||_g(r1,"touchstart",this._onTouchStart,kn$2)}removeListeners(){this.addOrRemove(Pn$2,"remove");const _g=this._getEventPrefix(),t1=oe$1(this.upperCanvasEl);Pn$2(t1,"".concat(_g,"up"),this._onMouseUp),Pn$2(t1,"touchend",this._onTouchEnd,kn$2),Pn$2(t1,"".concat(_g,"move"),this._onMouseMove,kn$2),Pn$2(t1,"touchmove",this._onMouseMove,kn$2)}_onMouseWheel(_g){this.__onMouseWheel(_g)}_onMouseOut(_g){const t1=this._hoveredTarget,r1=s$1({e:_g},Dn$2(this,_g));this.fire("mouse:out",s$1(s$1({},r1),{},{target:t1})),this._hoveredTarget=void 0,t1&&t1.fire("mouseout",s$1({},r1)),this._hoveredTargets.forEach(n1=>{this.fire("mouse:out",s$1(s$1({},r1),{},{target:n1})),n1&&n1.fire("mouseout",s$1({},r1))}),this._hoveredTargets=[]}_onMouseEnter(_g){this._currentTransform||this.findTarget(_g)||(this.fire("mouse:over",s$1({e:_g},Dn$2(this,_g))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(_g){this._isClick=!1;const t1=this.getActiveObject();if(t1&&t1.onDragStart(_g)){this._dragSource=t1;const r1={e:_g,target:t1};return this.fire("dragstart",r1),t1.fire("dragstart",r1),void Mn$2(this.upperCanvasEl,"drag",this._onDragProgress)}ye$3(_g)}_renderDragEffects(_g,t1,r1){let n1=!1;const i1=this._dropTarget;i1&&i1!==t1&&i1!==r1&&(i1.clearContextTop(),n1=!0),t1==null||t1.clearContextTop(),r1!==t1&&(r1==null||r1.clearContextTop());const o1=this.contextTop;o1.save(),o1.transform(...this.viewportTransform),t1&&(o1.save(),t1.transform(o1),t1.renderDragSourceEffect(_g),o1.restore(),n1=!0),r1&&(o1.save(),r1.transform(o1),r1.renderDropTargetEffect(_g),o1.restore(),n1=!0),o1.restore(),n1&&(this.contextTopDirty=!0)}_onDragEnd(_g){const t1=!!_g.dataTransfer&&_g.dataTransfer.dropEffect!==F$1,r1=t1?this._activeObject:void 0,n1={e:_g,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t1,dropTarget:r1};Pn$2(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n1),this._dragSource&&this._dragSource.fire("dragend",n1),delete this._dragSource,this._onMouseUp(_g)}_onDragProgress(_g){const t1={e:_g,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t1),this._dragSource&&this._dragSource.fire("drag",t1)}findDragTargets(_g){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(_g)),targets:[...this.targets]}}_onDragOver(_g){const t1="dragover",{target:r1,targets:n1}=this.findDragTargets(_g),i1=this._dragSource,o1={e:_g,target:r1,subTargets:n1,dragSource:i1,canDrop:!1,dropTarget:void 0};let a1;this.fire(t1,o1),this._fireEnterLeaveEvents(r1,o1),r1&&(r1.canDrop(_g)&&(a1=r1),r1.fire(t1,o1));for(let u1=0;u1<n1.length;u1++){const s1=n1[u1];s1.canDrop(_g)&&(a1=s1),s1.fire(t1,o1)}this._renderDragEffects(_g,i1,a1),this._dropTarget=a1}_onDragEnter(_g){const{target:t1,targets:r1}=this.findDragTargets(_g),n1={e:_g,target:t1,subTargets:r1,dragSource:this._dragSource};this.fire("dragenter",n1),this._fireEnterLeaveEvents(t1,n1)}_onDragLeave(_g){const t1={e:_g,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t1),this._fireEnterLeaveEvents(void 0,t1),this._renderDragEffects(_g,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(_g){const{target:t1,targets:r1}=this.findDragTargets(_g),n1=this._basicEventHandler("drop:before",s$1({e:_g,target:t1,subTargets:r1,dragSource:this._dragSource},Dn$2(this,_g)));n1.didDrop=!1,n1.dropTarget=void 0,this._basicEventHandler("drop",n1),this.fire("drop:after",n1)}_onContextMenu(_g){const t1=this.findTarget(_g),r1=this.targets||[],n1=this._basicEventHandler("contextmenu:before",{e:_g,target:t1,subTargets:r1});return this.stopContextMenu&&ye$3(_g),this._basicEventHandler("contextmenu",n1),!1}_onDoubleClick(_g){this._cacheTransformEventData(_g),this._handleEvent(_g,"dblclick"),this._resetTransformEventData()}getPointerId(_g){const t1=_g.changedTouches;return t1?t1[0]&&t1[0].identifier:this.enablePointerEvents?_g.pointerId:-1}_isMainEvent(_g){return _g.isPrimary===!0||_g.isPrimary!==!1&&(_g.type==="touchend"&&_g.touches.length===0||!_g.changedTouches||_g.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(_g){_g.preventDefault(),this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(_g)),this.__onMouseDown(_g),this._resetTransformEventData();const t1=this.upperCanvasEl,r1=this._getEventPrefix(),n1=oe$1(t1);Mn$2(n1,"touchend",this._onTouchEnd,kn$2),Mn$2(n1,"touchmove",this._onMouseMove,kn$2),Pn$2(t1,"".concat(r1,"down"),this._onMouseDown)}_onMouseDown(_g){this.__onMouseDown(_g),this._resetTransformEventData();const t1=this.upperCanvasEl,r1=this._getEventPrefix();Pn$2(t1,"".concat(r1,"move"),this._onMouseMove,kn$2);const n1=oe$1(t1);Mn$2(n1,"".concat(r1,"up"),this._onMouseUp),Mn$2(n1,"".concat(r1,"move"),this._onMouseMove,kn$2)}_onTouchEnd(_g){if(_g.touches.length>0)return;this.__onMouseUp(_g),this._resetTransformEventData(),delete this.mainTouchId;const t1=this._getEventPrefix(),r1=oe$1(this.upperCanvasEl);Pn$2(r1,"touchend",this._onTouchEnd,kn$2),Pn$2(r1,"touchmove",this._onMouseMove,kn$2),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Mn$2(this.upperCanvasEl,"".concat(t1,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(_g){this.__onMouseUp(_g),this._resetTransformEventData();const t1=this.upperCanvasEl,r1=this._getEventPrefix();if(this._isMainEvent(_g)){const n1=oe$1(this.upperCanvasEl);Pn$2(n1,"".concat(r1,"up"),this._onMouseUp),Pn$2(n1,"".concat(r1,"move"),this._onMouseMove,kn$2),Mn$2(t1,"".concat(r1,"move"),this._onMouseMove,kn$2)}}_onMouseMove(_g){const t1=this.getActiveObject();!this.allowTouchScrolling&&(!t1||!t1.shouldStartDragging(_g))&&_g.preventDefault&&_g.preventDefault(),this.__onMouseMove(_g)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(_g){const t1=this.getActiveObject();return!!t1!=!!_g||t1&&_g&&t1!==_g}__onMouseUp(_g){var t1;this._cacheTransformEventData(_g),this._handleEvent(_g,"up:before");const r1=this._currentTransform,n1=this._isClick,i1=this._target,{button:o1}=_g;if(o1)return(this.fireMiddleClick&&o1===1||this.fireRightClick&&o1===2)&&this._handleEvent(_g,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(_g);if(!this._isMainEvent(_g))return;let a1,u1,s1=!1;if(r1&&(this._finalizeCurrentTransform(_g),s1=r1.actionPerformed),!n1){const l1=i1===this._activeObject;this.handleSelection(_g),s1||(s1=this._shouldRender(i1)||!l1&&i1===this._activeObject)}if(i1){const l1=i1.findControl(this.getViewportPoint(_g),ve$2(_g)),{key:c1,control:d1}=l1||{};if(u1=c1,i1.selectable&&i1!==this._activeObject&&i1.activeOn==="up")this.setActiveObject(i1,_g),s1=!0;else if(d1){const h1=d1.getMouseUpHandler(_g,i1,d1);h1&&(a1=this.getScenePoint(_g),h1.call(d1,_g,r1,a1.x,a1.y))}i1.isMoving=!1}if(r1&&(r1.target!==i1||r1.corner!==u1)){const l1=r1.target&&r1.target.controls[r1.corner],c1=l1&&l1.getMouseUpHandler(_g,r1.target,l1);a1=a1||this.getScenePoint(_g),c1&&c1.call(l1,_g,r1,a1.x,a1.y)}this._setCursorFromEvent(_g,i1),this._handleEvent(_g,"up"),this._groupSelector=null,this._currentTransform=null,i1&&(i1.__corner=void 0),s1?this.requestRenderAll():n1||(t1=this._activeObject)!==null&&t1!==void 0&&t1.isEditing||this.renderTop()}_basicEventHandler(_g,t1){const{target:r1,subTargets:n1=[]}=t1;this.fire(_g,t1),r1&&r1.fire(_g,t1);for(let i1=0;i1<n1.length;i1++)n1[i1]!==r1&&n1[i1].fire(_g,t1);return t1}_handleEvent(_g,t1){const r1=this._target,n1=this.targets||[],i1=s$1(s$1({e:_g,target:r1,subTargets:n1},Dn$2(this,_g)),{},{transform:this._currentTransform},t1==="up:before"||t1==="up"?{isClick:this._isClick,currentTarget:this.findTarget(_g),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t1),i1),r1&&r1.fire("mouse".concat(t1),i1);for(let o1=0;o1<n1.length;o1++)n1[o1]!==r1&&n1[o1].fire("mouse".concat(t1),i1)}_onMouseDownInDrawingMode(_g){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(_g),this.requestRenderAll());const t1=this.getScenePoint(_g);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t1,{e:_g,pointer:t1}),this._handleEvent(_g,"down")}_onMouseMoveInDrawingMode(_g){if(this._isCurrentlyDrawing){const t1=this.getScenePoint(_g);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t1,{e:_g,pointer:t1})}this.setCursor(this.freeDrawingCursor),this._handleEvent(_g,"move")}_onMouseUpInDrawingMode(_g){const t1=this.getScenePoint(_g);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:_g,pointer:t1}):this._isCurrentlyDrawing=!1,this._handleEvent(_g,"up")}__onMouseDown(_g){this._isClick=!0,this._cacheTransformEventData(_g),this._handleEvent(_g,"down:before");let t1=this._target;const{button:r1}=_g;if(r1)return(this.fireMiddleClick&&r1===1||this.fireRightClick&&r1===2)&&this._handleEvent(_g,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(_g);if(!this._isMainEvent(_g)||this._currentTransform)return;let n1=this._shouldRender(t1),i1=!1;if(this.handleMultiSelection(_g,t1)?(t1=this._activeObject,i1=!0,n1=!0):this._shouldClearSelection(_g,t1)&&this.discardActiveObject(_g),this.selection&&(!t1||!t1.selectable&&!t1.isEditing&&t1!==this._activeObject)){const o1=this.getScenePoint(_g);this._groupSelector={x:o1.x,y:o1.y,deltaY:0,deltaX:0}}if(t1){const o1=t1===this._activeObject;t1.selectable&&t1.activeOn==="down"&&this.setActiveObject(t1,_g);const a1=t1.findControl(this.getViewportPoint(_g),ve$2(_g));if(t1===this._activeObject&&(a1||!i1)){this._setupCurrentTransform(_g,t1,o1);const u1=a1?a1.control:void 0,s1=this.getScenePoint(_g),l1=u1&&u1.getMouseDownHandler(_g,t1,u1);l1&&l1.call(u1,_g,this._currentTransform,s1.x,s1.y)}}n1&&(this._objectsToRender=void 0),this._handleEvent(_g,"down"),n1&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(_g){this._resetTransformEventData(),this._pointer=this.getViewportPoint(_g),this._absolutePointer=ke$1(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(_g)}__onMouseMove(_g){if(this._isClick=!1,this._cacheTransformEventData(_g),this._handleEvent(_g,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(_g);if(!this._isMainEvent(_g))return;const t1=this._groupSelector;if(t1){const r1=this.getScenePoint(_g);t1.deltaX=r1.x-t1.x,t1.deltaY=r1.y-t1.y,this.renderTop()}else if(this._currentTransform)this._transformObject(_g);else{const r1=this.findTarget(_g);this._setCursorFromEvent(_g,r1),this._fireOverOutEvents(_g,r1)}this.textEditingManager.onMouseMove(_g),this._handleEvent(_g,"move"),this._resetTransformEventData()}_fireOverOutEvents(_g,t1){const r1=this._hoveredTarget,n1=this._hoveredTargets,i1=this.targets,o1=Math.max(n1.length,i1.length);this.fireSyntheticInOutEvents("mouse",{e:_g,target:t1,oldTarget:r1,fireCanvas:!0});for(let a1=0;a1<o1;a1++)this.fireSyntheticInOutEvents("mouse",{e:_g,target:i1[a1],oldTarget:n1[a1]});this._hoveredTarget=t1,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(_g,t1){const r1=this._draggedoverTarget,n1=this._hoveredTargets,i1=this.targets,o1=Math.max(n1.length,i1.length);this.fireSyntheticInOutEvents("drag",s$1(s$1({},t1),{},{target:_g,oldTarget:r1,fireCanvas:!0}));for(let a1=0;a1<o1;a1++)this.fireSyntheticInOutEvents("drag",s$1(s$1({},t1),{},{target:i1[a1],oldTarget:n1[a1]}));this._draggedoverTarget=_g}fireSyntheticInOutEvents(_g,t1){let{target:r1,oldTarget:n1,fireCanvas:i1,e:o1}=t1,a1=i$1(t1,On$1);const{targetIn:u1,targetOut:s1,canvasIn:l1,canvasOut:c1}=En$1[_g],d1=n1!==r1;if(n1&&d1){const h1=s$1(s$1({},a1),{},{e:o1,target:n1,nextTarget:r1},Dn$2(this,o1));i1&&this.fire(c1,h1),n1.fire(s1,h1)}if(r1&&d1){const h1=s$1(s$1({},a1),{},{e:o1,target:r1,previousTarget:n1},Dn$2(this,o1));i1&&this.fire(l1,h1),r1.fire(u1,h1)}}__onMouseWheel(_g){this._cacheTransformEventData(_g),this._handleEvent(_g,"wheel"),this._resetTransformEventData()}_transformObject(_g){const t1=this.getScenePoint(_g),r1=this._currentTransform,n1=r1.target,i1=n1.group?ke$1(t1,void 0,n1.group.calcTransformMatrix()):t1;r1.shiftKey=_g.shiftKey,r1.altKey=!!this.centeredKey&&_g[this.centeredKey],this._performTransformAction(_g,r1,i1),r1.actionPerformed&&this.requestRenderAll()}_performTransformAction(_g,t1,r1){const{action:n1,actionHandler:i1,target:o1}=t1,a1=!!i1&&i1(_g,t1,r1.x,r1.y);a1&&o1.setCoords(),n1==="drag"&&a1&&(t1.target.isMoving=!0,this.setCursor(t1.target.moveCursor||this.moveCursor)),t1.actionPerformed=t1.actionPerformed||a1}_setCursorFromEvent(_g,t1){if(!t1)return void this.setCursor(this.defaultCursor);let r1=t1.hoverCursor||this.hoverCursor;const n1=re(this._activeObject)?this._activeObject:null,i1=(!n1||t1.group!==n1)&&t1.findControl(this.getViewportPoint(_g));if(i1){const o1=i1.control;this.setCursor(o1.cursorStyleHandler(_g,o1,t1))}else t1.subTargetCheck&&this.targets.concat().reverse().map(o1=>{r1=o1.hoverCursor||r1}),this.setCursor(r1)}handleMultiSelection(_g,t1){const r1=this._activeObject,n1=re(r1);if(r1&&this._isSelectionKeyPressed(_g)&&this.selection&&t1&&t1.selectable&&(r1!==t1||n1)&&(n1||!t1.isDescendantOf(r1)&&!r1.isDescendantOf(t1))&&!t1.onSelect({e:_g})&&!r1.getActiveControl()){if(n1){const i1=r1.getObjects();if(t1===r1){const o1=this.getViewportPoint(_g);if(!(t1=this.searchPossibleTargets(i1,o1)||this.searchPossibleTargets(this._objects,o1))||!t1.selectable)return!1}t1.group===r1?(r1.remove(t1),this._hoveredTarget=t1,this._hoveredTargets=[...this.targets],r1.size()===1&&this._setActiveObject(r1.item(0),_g)):(r1.multiSelectAdd(t1),this._hoveredTarget=r1,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i1,_g)}else{r1.exitEditing&&r1.exitEditing();const i1=new(tt$1.getClass("ActiveSelection"))([],{canvas:this});i1.multiSelectAdd(r1,t1),this._hoveredTarget=i1,this._setActiveObject(i1,_g),this._fireSelectionEvents([r1],_g)}return!0}return!1}handleSelection(_g){if(!this.selection||!this._groupSelector)return!1;const{x:t1,y:r1,deltaX:n1,deltaY:i1}=this._groupSelector,o1=new ht$1(t1,r1),a1=o1.add(new ht$1(n1,i1)),u1=o1.min(a1),s1=o1.max(a1).subtract(u1),l1=this.collectObjects({left:u1.x,top:u1.y,width:s1.x,height:s1.y},{includeIntersecting:!this.selectionFullyContained}),c1=o1.eq(a1)?l1[0]?[l1[0]]:[]:l1.length>1?l1.filter(d1=>!d1.onSelect({e:_g})).reverse():l1;if(c1.length===1)this.setActiveObject(c1[0],_g);else if(c1.length>1){const d1=tt$1.getClass("ActiveSelection");this.setActiveObject(new d1(c1,{canvas:this}),_g)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const jn$2={x1:0,y1:0,x2:0,y2:0},Fn$2=s$1(s$1({},jn$2),{},{r1:0,r2:0}),Ln$2=/^(\d+\.\d+)%|(\d+)%$/;function Rn$2(e1){return e1&&Ln$2.test(e1)}function Bn$2(e1,_g){const t1=typeof e1=="number"?e1:typeof e1=="string"?parseFloat(e1)/(Rn$2(e1)?100:1):NaN;return ts$2(0,rt$1(t1,_g),1)}const In=/\s*;\s*/,Xn$2=/\s*:\s*/;function Wn$1(e1,_g){let t1,r1;const n1=e1.getAttribute("style");if(n1){const o1=n1.split(In);o1[o1.length-1]===""&&o1.pop();for(let a1=o1.length;a1--;){const[u1,s1]=o1[a1].split(Xn$2).map(l1=>l1.trim());u1==="stop-color"?t1=s1:u1==="stop-opacity"&&(r1=s1)}}const i1=new qt(t1||e1.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Bn$2(e1.getAttribute("offset"),0),color:i1.toRgb(),opacity:rt$1(parseFloat(r1||e1.getAttribute("stop-opacity")||""),1)*i1.getAlpha()*_g}}function Yn$2(e1,_g){const t1=[],r1=e1.getElementsByTagName("stop"),n1=Bn$2(_g,1);for(let i1=r1.length;i1--;)t1.push(Wn$1(r1[i1],n1));return t1}function Vn$1(e1){return e1.nodeName==="linearGradient"||e1.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Hn$1(e1){return e1.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Gn$2(e1,_g){return e1.getAttribute(_g)}function zn$2(e1,_g){return function(t1,r1){let n1,{width:i1,height:o1,gradientUnits:a1}=r1;return Object.keys(t1).reduce((u1,s1)=>{const l1=t1[s1];return l1==="Infinity"?n1=1:l1==="-Infinity"?n1=0:(n1=typeof l1=="string"?parseFloat(l1):l1,typeof l1=="string"&&Rn$2(l1)&&(n1*=.01,a1==="pixels"&&(s1!=="x1"&&s1!=="x2"&&s1!=="r2"||(n1*=i1),s1!=="y1"&&s1!=="y2"||(n1*=o1)))),u1[s1]=n1,u1},{})}(Vn$1(e1)==="linear"?function(t1){return{x1:Gn$2(t1,"x1")||0,y1:Gn$2(t1,"y1")||0,x2:Gn$2(t1,"x2")||"100%",y2:Gn$2(t1,"y2")||0}}(e1):function(t1){return{x1:Gn$2(t1,"fx")||Gn$2(t1,"cx")||"50%",y1:Gn$2(t1,"fy")||Gn$2(t1,"cy")||"50%",r1:0,x2:Gn$2(t1,"cx")||"50%",y2:Gn$2(t1,"cy")||"50%",r2:Gn$2(t1,"r")||"50%"}}(e1),s$1(s$1({},_g),{},{gradientUnits:Hn$1(e1)}))}let Nn$2=class{constructor(_g){let{type:t1="linear",gradientUnits:r1="pixels",coords:n1={},colorStops:i1=[],offsetX:o1=0,offsetY:a1=0,gradientTransform:u1,id:s1}=_g;this.id=s1?"".concat(s1,"_").concat(mt$1()):mt$1(),this.type=t1,this.gradientUnits=r1,this.gradientTransform=u1,this.offsetX=o1,this.offsetY=a1,this.coords=s$1(s$1({},this.type==="radial"?Fn$2:jn$2),n1),this.colorStops=i1.slice()}addColorStop(_g){for(const t1 in _g){const r1=new qt(_g[t1]);this.colorStops.push({offset:parseFloat(t1),color:r1.toRgb(),opacity:r1.getAlpha()})}return this}toObject(_g){return s$1(s$1({},Wt$2(this,_g)),{},{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(_g){let{additionalTransform:t1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r1=[],n1=this.gradientTransform?this.gradientTransform.concat():O$1.concat(),i1=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o1=this.colorStops.map(c1=>s$1({},c1)).sort((c1,d1)=>c1.offset-d1.offset);let a1=-this.offsetX,u1=-this.offsetY;var s1;i1==="objectBoundingBox"?(a1/=_g.width,u1/=_g.height):(a1+=_g.width/2,u1+=_g.height/2),(s1=_g)&&typeof s1._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a1-=_g.pathOffset.x,u1-=_g.pathOffset.y),n1[4]-=a1,n1[5]-=u1;const l1=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i1,'"'),'gradientTransform="'.concat(t1?t1+" ":"").concat(Qt$1(n1),'"'),""].join(" ");if(this.type==="linear"){const{x1:c1,y1:d1,x2:h1,y2:f1}=this.coords;r1.push("<linearGradient ",l1,' x1="',c1,'" y1="',d1,'" x2="',h1,'" y2="',f1,`">
`)}else if(this.type==="radial"){const{x1:c1,y1:d1,x2:h1,y2:f1,r1:g1,r2:v1}=this.coords,$1=g1>v1;r1.push("<radialGradient ",l1,' cx="',$1?c1:h1,'" cy="',$1?d1:f1,'" r="',$1?g1:v1,'" fx="',$1?h1:c1,'" fy="',$1?f1:d1,`">
`),$1&&(o1.reverse(),o1.forEach(_1=>{_1.offset=1-_1.offset}));const y1=Math.min(g1,v1);if(y1>0){const _1=y1/Math.max(g1,v1);o1.forEach(E1=>{E1.offset+=_1*(1-E1.offset)})}}return o1.forEach(c1=>{let{color:d1,offset:h1,opacity:f1}=c1;r1.push("<stop ",'offset="',100*h1+"%",'" style="stop-color:',d1,f1!==void 0?";stop-opacity: "+f1:";",`"/>
`)}),r1.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r1.join("")}toLive(_g){const t1=this.coords,r1=this.type==="linear"?_g.createLinearGradient(t1.x1,t1.y1,t1.x2,t1.y2):_g.createRadialGradient(t1.x1,t1.y1,t1.r1,t1.x2,t1.y2,t1.r2);return this.colorStops.forEach(n1=>{let{color:i1,opacity:o1,offset:a1}=n1;r1.addColorStop(a1,o1!==void 0?new qt(i1).setAlpha(o1).toRgba():i1)}),r1}static async fromObject(_g){return new this(_g)}static fromElement(_g,t1,r1){const n1=Hn$1(_g),i1=t1._findCenterFromElement();return new this(s$1({id:_g.getAttribute("id")||void 0,type:Vn$1(_g),coords:zn$2(_g,{width:r1.viewBoxWidth||r1.width,height:r1.viewBoxHeight||r1.height}),colorStops:Yn$2(_g,r1.opacity),gradientUnits:n1,gradientTransform:dr$1(_g.getAttribute("gradientTransform")||"")},n1==="pixels"?{offsetX:t1.width/2-i1.x,offsetY:t1.height/2-i1.y}:{offsetX:0,offsetY:0}))}};t$3(Nn$2,"type","Gradient"),tt$1.setClass(Nn$2,"gradient"),tt$1.setClass(Nn$2,"linear"),tt$1.setClass(Nn$2,"radial");const Un$2=["type","source"];let qn$1=class{get type(){return"pattern"}set type(_g){h$2("warn","Setting type has no effect",_g)}constructor(_g){t$3(this,"repeat","repeat"),t$3(this,"offsetX",0),t$3(this,"offsetY",0),t$3(this,"crossOrigin",""),t$3(this,"patternTransform",null),this.id=mt$1(),Object.assign(this,_g)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(_g){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?_g.createPattern(this.source,this.repeat):null}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t1,crossOrigin:r1}=this;return s$1(s$1({},Wt$2(this,_g)),{},{type:"pattern",source:this.sourceToString(),repeat:t1,crossOrigin:r1,offsetX:Kt(this.offsetX,a.NUM_FRACTION_DIGITS),offsetY:Kt(this.offsetY,a.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(_g){let{width:t1,height:r1}=_g;const{source:n1,repeat:i1,id:o1}=this,a1=rt$1(this.offsetX/t1,0),u1=rt$1(this.offsetY/r1,0),s1=i1==="repeat-y"||i1==="no-repeat"?1+Math.abs(a1||0):rt$1(n1.width/t1,0),l1=i1==="repeat-x"||i1==="no-repeat"?1+Math.abs(u1||0):rt$1(n1.height/r1,0);return['<pattern id="SVGID_'.concat(o1,'" x="').concat(a1,'" y="').concat(u1,'" width="').concat(s1,'" height="').concat(l1,'">'),'<image x="0" y="0" width="'.concat(n1.width,'" height="').concat(n1.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(_g,t1){let{type:r1,source:n1}=_g,i1=i$1(_g,Un$2);const o1=await Bt$2(n1,s$1(s$1({},t1),{},{crossOrigin:i1.crossOrigin}));return new this(s$1(s$1({},i1),{},{source:o1}))}};t$3(qn$1,"type","Pattern"),tt$1.setClass(qn$1),tt$1.setClass(qn$1,"pattern");let Kn$2=class{constructor(_g){t$3(this,"color","rgb(0, 0, 0)"),t$3(this,"width",1),t$3(this,"shadow",null),t$3(this,"strokeLineCap","round"),t$3(this,"strokeLineJoin","round"),t$3(this,"strokeMiterLimit",10),t$3(this,"strokeDashArray",null),t$3(this,"limitedToCanvasSize",!1),this.canvas=_g}_setBrushStyles(_g){_g.strokeStyle=this.color,_g.lineWidth=this.width,_g.lineCap=this.strokeLineCap,_g.miterLimit=this.strokeMiterLimit,_g.lineJoin=this.strokeLineJoin,_g.setLineDash(this.strokeDashArray||[])}_saveAndTransform(_g){const t1=this.canvas.viewportTransform;_g.save(),_g.transform(t1[0],t1[1],t1[2],t1[3],t1[4],t1[5])}needsFullRender(){return new qt(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const _g=this.canvas,t1=this.shadow,r1=_g.contextTop,n1=_g.getZoom()*_g.getRetinaScaling();r1.shadowColor=t1.color,r1.shadowBlur=t1.blur*n1,r1.shadowOffsetX=t1.offsetX*n1,r1.shadowOffsetY=t1.offsetY*n1}_resetShadow(){const _g=this.canvas.contextTop;_g.shadowColor="",_g.shadowBlur=_g.shadowOffsetX=_g.shadowOffsetY=0}_isOutSideCanvas(_g){return _g.x<0||_g.x>this.canvas.getWidth()||_g.y<0||_g.y>this.canvas.getHeight()}};const Jn$2=["path","left","top"],Zn$2=["d"];let Qn$2=class aT extends Oi$2{constructor(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r1,left:n1,top:i1}=t1,o1=i$1(t1,Jn$2);super(),Object.assign(this,aT.ownDefaults),this.setOptions(o1),this._setPath(_g||[],!0),typeof n1=="number"&&this.set(P$1,n1),typeof i1=="number"&&this.set(E$1,i1)}_setPath(_g,t1){this.path=en$2(Array.isArray(_g)?_g:vn(_g)),this.setBoundingBox(t1)}_findCenterFromElement(){const _g=this._calcBoundsFromPath();return new ht$1(_g.left+_g.width/2,_g.top+_g.height/2)}_renderPathCommands(_g){const t1=-this.pathOffset.x,r1=-this.pathOffset.y;_g.beginPath();for(const n1 of this.path)switch(n1[0]){case"L":_g.lineTo(n1[1]+t1,n1[2]+r1);break;case"M":_g.moveTo(n1[1]+t1,n1[2]+r1);break;case"C":_g.bezierCurveTo(n1[1]+t1,n1[2]+r1,n1[3]+t1,n1[4]+r1,n1[5]+t1,n1[6]+r1);break;case"Q":_g.quadraticCurveTo(n1[1]+t1,n1[2]+r1,n1[3]+t1,n1[4]+r1);break;case"Z":_g.closePath()}}_render(_g){this._renderPathCommands(_g),this._renderPaintInOrder(_g)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s$1(s$1({},super.toObject(_g)),{},{path:this.path.map(t1=>t1.slice())})}toDatalessObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t1=this.toObject(_g);return this.sourcePath&&(delete t1.path,t1.sourcePath=this.sourcePath),t1}_toSVG(){const _g=_n(this.path,a.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(_g,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const _g=a.NUM_FRACTION_DIGITS;return" translate(".concat(Kt(-this.pathOffset.x,_g),", ").concat(Kt(-this.pathOffset.y,_g),")")}toClipPathSVG(_g){const t1=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:_g,additionalTransform:t1})}toSVG(_g){const t1=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:_g,additionalTransform:t1})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(_g){const{width:t1,height:r1,pathOffset:n1}=this._calcDimensions();this.set({width:t1,height:r1,pathOffset:n1}),_g&&this.setPositionByOrigin(n1,M$3,M$3)}_calcBoundsFromPath(){const _g=[];let t1=0,r1=0,n1=0,i1=0;for(const o1 of this.path)switch(o1[0]){case"L":n1=o1[1],i1=o1[2],_g.push(new ht$1(t1,r1),new ht$1(n1,i1));break;case"M":n1=o1[1],i1=o1[2],t1=n1,r1=i1;break;case"C":_g.push(...$r$1(n1,i1,o1[1],o1[2],o1[3],o1[4],o1[5],o1[6])),n1=o1[5],i1=o1[6];break;case"Q":_g.push(...$r$1(n1,i1,o1[1],o1[2],o1[1],o1[2],o1[3],o1[4])),n1=o1[3],i1=o1[4];break;case"Z":n1=t1,i1=r1}return _e$2(_g)}_calcDimensions(){const _g=this._calcBoundsFromPath();return s$1(s$1({},_g),{},{pathOffset:new ht$1(_g.left+_g.width/2,_g.top+_g.height/2)})}static fromObject(_g){return this._fromObject(_g,{extraParam:"path"})}static async fromElement(_g,t1,r1){const n1=vr$1(_g,this.ATTRIBUTE_NAMES,r1),{d:i1}=n1;return new this(i1,s$1(s$1(s$1({},i$1(n1,Zn$2)),t1),{},{left:void 0,top:void 0}))}};t$3(Qn$2,"type","Path"),t$3(Qn$2,"cacheProperties",[...Vs$1,"path","fillRule"]),t$3(Qn$2,"ATTRIBUTE_NAMES",[...Wi$2,"d"]),tt$1.setClass(Qn$2),tt$1.setSVGClass(Qn$2);let $n$1=class Z_ extends Kn$2{constructor(_g){super(_g),t$3(this,"decimate",.4),t$3(this,"drawStraightLine",!1),t$3(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(_g,t1,r1){const n1=t1.midPointFrom(r1);return _g.quadraticCurveTo(t1.x,t1.y,n1.x,n1.y),n1}onMouseDown(_g,t1){let{e:r1}=t1;this.canvas._isMainEvent(r1)&&(this.drawStraightLine=!!this.straightLineKey&&r1[this.straightLineKey],this._prepareForDrawing(_g),this._addPoint(_g),this._render())}onMouseMove(_g,t1){let{e:r1}=t1;if(this.canvas._isMainEvent(r1)&&(this.drawStraightLine=!!this.straightLineKey&&r1[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(_g))&&this._addPoint(_g)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const n1=this._points,i1=n1.length,o1=this.canvas.contextTop;this._saveAndTransform(o1),this.oldEnd&&(o1.beginPath(),o1.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=Z_.drawSegment(o1,n1[i1-2],n1[i1-1]),o1.stroke(),o1.restore()}}onMouseUp(_g){let{e:t1}=_g;return!this.canvas._isMainEvent(t1)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(_g){this._reset(),this._addPoint(_g),this.canvas.contextTop.moveTo(_g.x,_g.y)}_addPoint(_g){return!(this._points.length>1&&_g.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(_g),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t1=this._points[0],r1=this._points[1];if(this._saveAndTransform(_g),_g.beginPath(),this._points.length===2&&t1.x===r1.x&&t1.y===r1.y){const n1=this.width/1e3;t1.x-=n1,r1.x+=n1}_g.moveTo(t1.x,t1.y);for(let n1=1;n1<this._points.length;n1++)Z_.drawSegment(_g,t1,r1),t1=this._points[n1],r1=this._points[n1+1];_g.lineTo(t1.x,t1.y),_g.stroke(),_g.restore()}convertPointsToSVGPath(_g){const t1=this.width/1e3;return yn$1(_g,t1)}createPath(_g){const t1=new Qn$2(_g,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t1.shadow=new Xs$2(this.shadow)),t1}decimatePoints(_g,t1){if(_g.length<=2)return _g;let r1,n1=_g[0];const i1=this.canvas.getZoom(),o1=Math.pow(t1/i1,2),a1=_g.length-1,u1=[n1];for(let s1=1;s1<a1-1;s1++)r1=Math.pow(n1.x-_g[s1].x,2)+Math.pow(n1.y-_g[s1].y,2),r1>=o1&&(n1=_g[s1],u1.push(n1));return u1.push(_g[a1]),u1}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const _g=this.convertPointsToSVGPath(this._points);if(function(r1){return _n(r1)==="M 0 0 Q 0 0 0 0 L 0 0"}(_g))return void this.canvas.requestRenderAll();const t1=this.createPath(_g);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t1}),this.canvas.add(t1),this.canvas.requestRenderAll(),t1.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t1})}};const to$2=["left","top","radius"],eo$2=["radius","startAngle","endAngle","counterClockwise"];let so$2=class Y_ extends Oi$2{static getDefaults(){return s$1(s$1({},super.getDefaults()),Y_.ownDefaults)}constructor(_g){super(),Object.assign(this,Y_.ownDefaults),this.setOptions(_g)}_set(_g,t1){return super._set(_g,t1),_g==="radius"&&this.setRadius(t1),this}_render(_g){_g.beginPath(),_g.arc(0,0,this.radius,xt$1(this.startAngle),xt$1(this.endAngle),this.counterClockwise),this._renderPaintInOrder(_g)}getRadiusX(){return this.get("radius")*this.get(z$2)}getRadiusY(){return this.get("radius")*this.get(N$2)}setRadius(_g){this.radius=_g,this.set({width:2*_g,height:2*_g})}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...eo$2,..._g])}_toSVG(){const _g=(this.endAngle-this.startAngle)%360;if(_g===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t1}=this,r1=xt$1(this.startAngle),n1=xt$1(this.endAngle),i1=ot$1(r1)*t1,o1=at(r1)*t1,a1=ot$1(n1)*t1,u1=at(n1)*t1,s1=_g>180?1:0,l1=this.counterClockwise?0:1;return['<path d="M '.concat(i1," ").concat(o1," A ").concat(t1," ").concat(t1," 0 ").concat(s1," ").concat(l1," ").concat(a1," ").concat(u1,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(_g,t1,r1){const n1=vr$1(_g,this.ATTRIBUTE_NAMES,r1),{left:i1=0,top:o1=0,radius:a1=0}=n1;return new this(s$1(s$1({},i$1(n1,to$2)),{},{radius:a1,left:i1-a1,top:o1-a1}))}static fromObject(_g){return super._fromObject(_g)}};t$3(so$2,"type","Circle"),t$3(so$2,"cacheProperties",[...Vs$1,...eo$2]),t$3(so$2,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),t$3(so$2,"ATTRIBUTE_NAMES",["cx","cy","r",...Wi$2]),tt$1.setClass(so$2),tt$1.setSVGClass(so$2);const oo$2=["x1","y1","x2","y2"],ao$2=["x1","y1","x2","y2"],ho$2=["x1","x2","y1","y2"];let co$2=class lT extends Oi$2{constructor(){let[_g,t1,r1,n1]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,lT.ownDefaults),this.setOptions(i1),this.x1=_g,this.x2=r1,this.y1=t1,this.y2=n1,this._setWidthHeight();const{left:o1,top:a1}=i1;typeof o1=="number"&&this.set(P$1,o1),typeof a1=="number"&&this.set(E$1,a1)}_setWidthHeight(){const{x1:_g,y1:t1,x2:r1,y2:n1}=this;this.width=Math.abs(r1-_g),this.height=Math.abs(n1-t1);const{left:i1,top:o1,width:a1,height:u1}=_e$2([{x:_g,y:t1},{x:r1,y:n1}]),s1=new ht$1(i1+a1/2,o1+u1/2);this.setPositionByOrigin(s1,M$3,M$3)}_set(_g,t1){return super._set(_g,t1),ho$2.includes(_g)&&this._setWidthHeight(),this}_render(_g){_g.beginPath();const t1=this.calcLinePoints();_g.moveTo(t1.x1,t1.y1),_g.lineTo(t1.x2,t1.y2),_g.lineWidth=this.strokeWidth;const r1=_g.strokeStyle;var n1;te(this.stroke)?_g.strokeStyle=this.stroke.toLive(_g):_g.strokeStyle=(n1=this.stroke)!==null&&n1!==void 0?n1:_g.fillStyle,this.stroke&&this._renderStroke(_g),_g.strokeStyle=r1}_findCenterFromElement(){return new ht$1((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s$1(s$1({},super.toObject(_g)),this.calcLinePoints())}_getNonTransformedDimensions(){const _g=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(_g.y-=this.strokeWidth),this.height===0&&(_g.x-=this.strokeWidth)),_g}calcLinePoints(){const{x1:_g,x2:t1,y1:r1,y2:n1,width:i1,height:o1}=this,a1=_g<=t1?-1:1,u1=r1<=n1?-1:1;return{x1:a1*i1/2,x2:a1*-i1/2,y1:u1*o1/2,y2:u1*-o1/2}}_toSVG(){const{x1:_g,x2:t1,y1:r1,y2:n1}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(_g,'" y1="').concat(r1,'" x2="').concat(t1,'" y2="').concat(n1,`" />
`)]}static async fromElement(_g,t1,r1){const n1=vr$1(_g,this.ATTRIBUTE_NAMES,r1),{x1:i1=0,y1:o1=0,x2:a1=0,y2:u1=0}=n1;return new this([i1,o1,a1,u1],i$1(n1,oo$2))}static fromObject(_g){let{x1:t1,y1:r1,x2:n1,y2:i1}=_g,o1=i$1(_g,ao$2);return this._fromObject(s$1(s$1({},o1),{},{points:[t1,r1,n1,i1]}),{extraParam:"points"})}};t$3(co$2,"type","Line"),t$3(co$2,"cacheProperties",[...Vs$1,...ho$2]),t$3(co$2,"ATTRIBUTE_NAMES",Wi$2.concat(ho$2)),tt$1.setClass(co$2),tt$1.setSVGClass(co$2);let lo$2=class X_ extends Oi$2{static getDefaults(){return s$1(s$1({},super.getDefaults()),X_.ownDefaults)}constructor(_g){super(),Object.assign(this,X_.ownDefaults),this.setOptions(_g)}_render(_g){const t1=this.width/2,r1=this.height/2;_g.beginPath(),_g.moveTo(-t1,r1),_g.lineTo(0,-r1),_g.lineTo(t1,r1),_g.closePath(),this._renderPaintInOrder(_g)}_toSVG(){const _g=this.width/2,t1=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-_g," ").concat(t1,",0 ").concat(-t1,",").concat(_g," ").concat(t1),'" />']}};t$3(lo$2,"type","Triangle"),t$3(lo$2,"ownDefaults",{width:100,height:100}),tt$1.setClass(lo$2),tt$1.setSVGClass(lo$2);const uo$2=["rx","ry"];let go$2=class Q_ extends Oi$2{static getDefaults(){return s$1(s$1({},super.getDefaults()),Q_.ownDefaults)}constructor(_g){super(),Object.assign(this,Q_.ownDefaults),this.setOptions(_g)}_set(_g,t1){switch(super._set(_g,t1),_g){case"rx":this.rx=t1,this.set("width",2*t1);break;case"ry":this.ry=t1,this.set("height",2*t1)}return this}getRx(){return this.get("rx")*this.get(z$2)}getRy(){return this.get("ry")*this.get(N$2)}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...uo$2,..._g])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(_g){_g.beginPath(),_g.save(),_g.transform(1,0,0,this.ry/this.rx,0,0),_g.arc(0,0,this.rx,0,S,!1),_g.restore(),this._renderPaintInOrder(_g)}static async fromElement(_g,t1,r1){const n1=vr$1(_g,this.ATTRIBUTE_NAMES,r1);return n1.left=(n1.left||0)-n1.rx,n1.top=(n1.top||0)-n1.ry,new this(n1)}};function fo$2(e1){if(!e1)return[];const _g=e1.replace(/,/g," ").trim().split(/\s+/),t1=[];for(let r1=0;r1<_g.length;r1+=2)t1.push({x:parseFloat(_g[r1]),y:parseFloat(_g[r1+1])});return t1}t$3(go$2,"type","Ellipse"),t$3(go$2,"cacheProperties",[...Vs$1,...uo$2]),t$3(go$2,"ownDefaults",{rx:0,ry:0}),t$3(go$2,"ATTRIBUTE_NAMES",[...Wi$2,"cx","cy","rx","ry"]),tt$1.setClass(go$2),tt$1.setSVGClass(go$2);const po$2=["left","top"],mo$2={exactBoundingBox:!1};let vo$2=class J_ extends Oi$2{static getDefaults(){return s$1(s$1({},super.getDefaults()),J_.ownDefaults)}constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),t$3(this,"strokeDiff",void 0),Object.assign(this,J_.ownDefaults),this.setOptions(t1),this.points=_g;const{left:r1,top:n1}=t1;this.initialized=!0,this.setBoundingBox(!0),typeof r1=="number"&&this.set(P$1,r1),typeof n1=="number"&&this.set(E$1,n1)}isOpen(){return!0}_projectStrokeOnPoints(_g){return Ai$1(this.points,_g,this.isOpen())}_calcDimensions(_g){_g=s$1({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},_g||{});const t1=this.exactBoundingBox?this._projectStrokeOnPoints(_g).map(s1=>s1.projectedPoint):this.points;if(t1.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ht$1,strokeOffset:new ht$1,strokeDiff:new ht$1};const r1=_e$2(t1),n1=Lt(s$1(s$1({},_g),{},{scaleX:1,scaleY:1})),i1=_e$2(this.points.map(s1=>wt(s1,n1,!0))),o1=new ht$1(this.scaleX,this.scaleY);let a1=r1.left+r1.width/2,u1=r1.top+r1.height/2;return this.exactBoundingBox&&(a1-=u1*Math.tan(xt$1(this.skewX)),u1-=a1*Math.tan(xt$1(this.skewY))),s$1(s$1({},r1),{},{pathOffset:new ht$1(a1,u1),strokeOffset:new ht$1(i1.left,i1.top).subtract(new ht$1(r1.left,r1.top)).multiply(o1),strokeDiff:new ht$1(r1.width,r1.height).subtract(new ht$1(i1.width,i1.height)).multiply(o1)})}_findCenterFromElement(){const _g=_e$2(this.points);return new ht$1(_g.left+_g.width/2,_g.top+_g.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(_g){const{left:t1,top:r1,width:n1,height:i1,pathOffset:o1,strokeOffset:a1,strokeDiff:u1}=this._calcDimensions();this.set({width:n1,height:i1,pathOffset:o1,strokeOffset:a1,strokeDiff:u1}),_g&&this.setPositionByOrigin(new ht$1(t1+n1/2,r1+i1/2),M$3,M$3)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ht$1(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o1;if(Object.keys(_g).some(a1=>this.strokeUniform||this.constructor.layoutProperties.includes(a1))){var t1,r1;const{width:a1,height:u1}=this._calcDimensions(_g);o1=new ht$1((t1=_g.width)!==null&&t1!==void 0?t1:a1,(r1=_g.height)!==null&&r1!==void 0?r1:u1)}else{var n1,i1;o1=new ht$1((n1=_g.width)!==null&&n1!==void 0?n1:this.width,(i1=_g.height)!==null&&i1!==void 0?i1:this.height)}return o1.multiply(new ht$1(_g.scaleX||this.scaleX,_g.scaleY||this.scaleY))}return super._getTransformedDimensions(_g)}_set(_g,t1){const r1=this.initialized&&this[_g]!==t1,n1=super._set(_g,t1);return this.exactBoundingBox&&r1&&((_g===z$2||_g===N$2)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(_g))&&this.setDimensions(),n1}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s$1(s$1({},super.toObject(_g)),{},{points:Ws$1(this.points)})}_toSVG(){const _g=[],t1=this.pathOffset.x,r1=this.pathOffset.y,n1=a.NUM_FRACTION_DIGITS;for(let i1=0,o1=this.points.length;i1<o1;i1++)_g.push(Kt(this.points[i1].x-t1,n1),",",Kt(this.points[i1].y-r1,n1)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(_g.join(""),`" />
`)]}_render(_g){const t1=this.points.length,r1=this.pathOffset.x,n1=this.pathOffset.y;if(t1&&!isNaN(this.points[t1-1].y)){_g.beginPath(),_g.moveTo(this.points[0].x-r1,this.points[0].y-n1);for(let i1=0;i1<t1;i1++){const o1=this.points[i1];_g.lineTo(o1.x-r1,o1.y-n1)}!this.isOpen()&&_g.closePath(),this._renderPaintInOrder(_g)}}complexity(){return this.points.length}static async fromElement(_g,t1,r1){return new this(fo$2(_g.getAttribute("points")),s$1(s$1({},i$1(vr$1(_g,this.ATTRIBUTE_NAMES,r1),po$2)),t1))}static fromObject(_g){return this._fromObject(_g,{extraParam:"points"})}};t$3(vo$2,"ownDefaults",mo$2),t$3(vo$2,"type","Polyline"),t$3(vo$2,"layoutProperties",[U$4,q$2,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),t$3(vo$2,"cacheProperties",[...Vs$1,"points"]),t$3(vo$2,"ATTRIBUTE_NAMES",[...Wi$2]),tt$1.setClass(vo$2),tt$1.setSVGClass(vo$2);let yo$2=class extends vo$2{isOpen(){return!1}};t$3(yo$2,"ownDefaults",mo$2),t$3(yo$2,"type","Polygon"),tt$1.setClass(yo$2),tt$1.setSVGClass(yo$2);const _o$2=["fontSize","fontWeight","fontFamily","fontStyle"],xo$2=["underline","overline","linethrough"],Co$2=[..._o$2,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],bo$2=[...Co$2,...xo$2,"textBackgroundColor","direction"],wo$2=[..._o$2,...xo$2,J$1,"strokeWidth",K$2,"deltaY","textBackgroundColor"],So$2={_reNewline:L$2,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:P$1,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:P$1,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},To$2="justify",Oo$1="justify-left",ko="justify-right",Do$1="justify-center";class Mo extends Oi$2{isEmptyStyles(_g){if(!this.styles||_g!==void 0&&!this.styles[_g])return!0;const t1=_g===void 0?this.styles:{line:this.styles[_g]};for(const r1 in t1)for(const n1 in t1[r1])for(const i1 in t1[r1][n1])return!1;return!0}styleHas(_g,t1){if(!this.styles||t1!==void 0&&!this.styles[t1])return!1;const r1=t1===void 0?this.styles:{0:this.styles[t1]};for(const n1 in r1)for(const i1 in r1[n1])if(r1[n1][i1][_g]!==void 0)return!0;return!1}cleanStyle(_g){if(!this.styles)return!1;const t1=this.styles;let r1,n1,i1=0,o1=!0,a1=0;for(const u1 in t1){r1=0;for(const s1 in t1[u1]){const l1=t1[u1][s1]||{};i1++,l1[_g]!==void 0?(n1?l1[_g]!==n1&&(o1=!1):n1=l1[_g],l1[_g]===this[_g]&&delete l1[_g]):o1=!1,Object.keys(l1).length!==0?r1++:delete t1[u1][s1]}r1===0&&delete t1[u1]}for(let u1=0;u1<this._textLines.length;u1++)a1+=this._textLines[u1].length;o1&&i1===a1&&(this[_g]=n1,this.removeStyle(_g))}removeStyle(_g){if(!this.styles)return;const t1=this.styles;let r1,n1,i1;for(n1 in t1){for(i1 in r1=t1[n1],r1)delete r1[i1][_g],Object.keys(r1[i1]).length===0&&delete r1[i1];Object.keys(r1).length===0&&delete t1[n1]}}_extendStyles(_g,t1){const{lineIndex:r1,charIndex:n1}=this.get2DCursorLocation(_g);this._getLineStyle(r1)||this._setLineStyle(r1);const i1=Yt$1(s$1(s$1({},this._getStyleDeclaration(r1,n1)),t1),o1=>o1!==void 0);this._setStyleDeclaration(r1,n1,i1)}getSelectionStyles(_g,t1,r1){const n1=[];for(let i1=_g;i1<(t1||_g);i1++)n1.push(this.getStyleAtPosition(i1,r1));return n1}getStyleAtPosition(_g,t1){const{lineIndex:r1,charIndex:n1}=this.get2DCursorLocation(_g);return t1?this.getCompleteStyleDeclaration(r1,n1):this._getStyleDeclaration(r1,n1)}setSelectionStyles(_g,t1,r1){for(let n1=t1;n1<(r1||t1);n1++)this._extendStyles(n1,_g);this._forceClearCache=!0}_getStyleDeclaration(_g,t1){var r1;const n1=this.styles&&this.styles[_g];return n1&&(r1=n1[t1])!==null&&r1!==void 0?r1:{}}getCompleteStyleDeclaration(_g,t1){return s$1(s$1({},Wt$2(this,this.constructor._styleProperties)),this._getStyleDeclaration(_g,t1))}_setStyleDeclaration(_g,t1,r1){this.styles[_g][t1]=r1}_deleteStyleDeclaration(_g,t1){delete this.styles[_g][t1]}_getLineStyle(_g){return!!this.styles[_g]}_setLineStyle(_g){this.styles[_g]={}}_deleteLineStyle(_g){delete this.styles[_g]}}t$3(Mo,"_styleProperties",wo$2);const Po$1=/  +/g,Eo$1=/"/g;function Ao$1(e1,_g,t1,r1,n1){return"		".concat(function(i1,o1){let{left:a1,top:u1,width:s1,height:l1}=o1,c1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.NUM_FRACTION_DIGITS;const d1=$t(K$2,i1,!1),[h1,f1,g1,v1]=[a1,u1,s1,l1].map($1=>Kt($1,c1));return"<rect ".concat(d1,' x="').concat(h1,'" y="').concat(f1,'" width="').concat(g1,'" height="').concat(v1,'"></rect>')}(e1,{left:_g,top:t1,width:r1,height:n1}),`
`)}const jo$1=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Fo$1,Lo$1=class Uw extends Mo{static getDefaults(){return s$1(s$1({},super.getDefaults()),Uw.ownDefaults)}constructor(_g,t1){super(),t$3(this,"__charBounds",[]),Object.assign(this,Uw.ownDefaults),this.setOptions(t1),this.styles||(this.styles={}),this.text=_g,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const _g=this.path;_g&&(_g.segmentsInfo=gn$1(_g.path))}_splitText(){const _g=this._splitTextIntoLines(this.text);return this.textLines=_g.lines,this._textLines=_g.graphemeLines,this._unwrappedTextLines=_g._unwrappedLines,this._text=_g.graphemeText,_g}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(To$2)&&this.enlargeSpaces()}enlargeSpaces(){let _g,t1,r1,n1,i1,o1,a1;for(let u1=0,s1=this._textLines.length;u1<s1;u1++)if((this.textAlign===To$2||u1!==s1-1&&!this.isEndOfWrapping(u1))&&(n1=0,i1=this._textLines[u1],t1=this.getLineWidth(u1),t1<this.width&&(a1=this.textLines[u1].match(this._reSpacesAndTabs)))){r1=a1.length,_g=(this.width-t1)/r1;for(let l1=0;l1<=i1.length;l1++)o1=this.__charBounds[u1][l1],this._reSpaceAndTab.test(i1[l1])?(o1.width+=_g,o1.kernedWidth+=_g,o1.left+=n1,n1+=_g):o1.left+=n1}}isEndOfWrapping(_g){return _g===this._textLines.length-1}missingNewlineOffset(_g){return 1}get2DCursorLocation(_g,t1){const r1=t1?this._unwrappedTextLines:this._textLines;let n1;for(n1=0;n1<r1.length;n1++){if(_g<=r1[n1].length)return{lineIndex:n1,charIndex:_g};_g-=r1[n1].length+this.missingNewlineOffset(n1,t1)}return{lineIndex:n1-1,charIndex:r1[n1-1].length<_g?r1[n1-1].length:_g}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const _g=super._getCacheCanvasDimensions(),t1=this.fontSize;return _g.width+=t1*_g.zoomX,_g.height+=t1*_g.zoomY,_g}_render(_g){const t1=this.path;t1&&!t1.isNotVisible()&&t1._render(_g),this._setTextStyles(_g),this._renderTextLinesBackground(_g),this._renderTextDecoration(_g,"underline"),this._renderText(_g),this._renderTextDecoration(_g,"overline"),this._renderTextDecoration(_g,"linethrough")}_renderText(_g){this.paintFirst===J$1?(this._renderTextStroke(_g),this._renderTextFill(_g)):(this._renderTextFill(_g),this._renderTextStroke(_g))}_setTextStyles(_g,t1,r1){if(_g.textBaseline="alphabetic",this.path)switch(this.pathAlign){case M$3:_g.textBaseline="middle";break;case"ascender":_g.textBaseline=E$1;break;case"descender":_g.textBaseline=A}_g.font=this._getFontDeclaration(t1,r1)}calcTextWidth(){let _g=this.getLineWidth(0);for(let t1=1,r1=this._textLines.length;t1<r1;t1++){const n1=this.getLineWidth(t1);n1>_g&&(_g=n1)}return _g}_renderTextLine(_g,t1,r1,n1,i1,o1){this._renderChars(_g,t1,r1,n1,i1,o1)}_renderTextLinesBackground(_g){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t1=_g.fillStyle,r1=this._getLeftOffset();let n1=this._getTopOffset();for(let i1=0,o1=this._textLines.length;i1<o1;i1++){const a1=this.getHeightOfLine(i1);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i1)){n1+=a1;continue}const u1=this._textLines[i1].length,s1=this._getLineLeftOffset(i1);let l1,c1,d1=0,h1=0,f1=this.getValueOfPropertyAt(i1,0,"textBackgroundColor");for(let g1=0;g1<u1;g1++){const v1=this.__charBounds[i1][g1];c1=this.getValueOfPropertyAt(i1,g1,"textBackgroundColor"),this.path?(_g.save(),_g.translate(v1.renderLeft,v1.renderTop),_g.rotate(v1.angle),_g.fillStyle=c1,c1&&_g.fillRect(-v1.width/2,-a1/this.lineHeight*(1-this._fontSizeFraction),v1.width,a1/this.lineHeight),_g.restore()):c1!==f1?(l1=r1+s1+h1,this.direction==="rtl"&&(l1=this.width-l1-d1),_g.fillStyle=f1,f1&&_g.fillRect(l1,n1,d1,a1/this.lineHeight),h1=v1.left,d1=v1.width,f1=c1):d1+=v1.kernedWidth}c1&&!this.path&&(l1=r1+s1+h1,this.direction==="rtl"&&(l1=this.width-l1-d1),_g.fillStyle=c1,_g.fillRect(l1,n1,d1,a1/this.lineHeight)),n1+=a1}_g.fillStyle=t1,this._removeShadow(_g)}_measureChar(_g,t1,r1,n1){const i1=x.getFontCache(t1),o1=this._getFontDeclaration(t1),a1=r1+_g,u1=r1&&o1===this._getFontDeclaration(n1),s1=t1.fontSize/this.CACHE_FONT_SIZE;let l1,c1,d1,h1;if(r1&&i1[r1]!==void 0&&(d1=i1[r1]),i1[_g]!==void 0&&(h1=l1=i1[_g]),u1&&i1[a1]!==void 0&&(c1=i1[a1],h1=c1-d1),l1===void 0||d1===void 0||c1===void 0){const f1=function(){if(!Fo$1){const g1=vt();g1.width=g1.height=0,Fo$1=g1.getContext("2d")}return Fo$1}();this._setTextStyles(f1,t1,!0),l1===void 0&&(h1=l1=f1.measureText(_g).width,i1[_g]=l1),d1===void 0&&u1&&r1&&(d1=f1.measureText(r1).width,i1[r1]=d1),u1&&c1===void 0&&(c1=f1.measureText(a1).width,i1[a1]=c1,h1=c1-d1)}return{width:l1*s1,kernedWidth:h1*s1}}getHeightOfChar(_g,t1){return this.getValueOfPropertyAt(_g,t1,"fontSize")}measureLine(_g){const t1=this._measureLine(_g);return this.charSpacing!==0&&(t1.width-=this._getWidthOfCharSpacing()),t1.width<0&&(t1.width=0),t1}_measureLine(_g){let t1,r1,n1=0;const i1=this.pathSide===j$1,o1=this.path,a1=this._textLines[_g],u1=a1.length,s1=new Array(u1);this.__charBounds[_g]=s1;for(let l1=0;l1<u1;l1++){const c1=a1[l1];r1=this._getGraphemeBox(c1,_g,l1,t1),s1[l1]=r1,n1+=r1.kernedWidth,t1=c1}if(s1[u1]={left:r1?r1.left+r1.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o1&&o1.segmentsInfo){let l1=0;const c1=o1.segmentsInfo[o1.segmentsInfo.length-1].length;switch(this.textAlign){case P$1:l1=i1?c1-n1:0;break;case M$3:l1=(c1-n1)/2;break;case j$1:l1=i1?0:c1-n1}l1+=this.pathStartOffset*(i1?-1:1);for(let d1=i1?u1-1:0;i1?d1>=0:d1<u1;i1?d1--:d1++)r1=s1[d1],l1>c1?l1%=c1:l1<0&&(l1+=c1),this._setGraphemeOnPath(l1,r1),l1+=r1.kernedWidth}return{width:n1,numOfSpaces:0}}_setGraphemeOnPath(_g,t1){const r1=_g+t1.kernedWidth/2,n1=this.path,i1=fn$1(n1.path,r1,n1.segmentsInfo);t1.renderLeft=i1.x-n1.pathOffset.x,t1.renderTop=i1.y-n1.pathOffset.y,t1.angle=i1.angle+(this.pathSide===j$1?Math.PI:0)}_getGraphemeBox(_g,t1,r1,n1,i1){const o1=this.getCompleteStyleDeclaration(t1,r1),a1=n1?this.getCompleteStyleDeclaration(t1,r1-1):{},u1=this._measureChar(_g,o1,n1,a1);let s1,l1=u1.kernedWidth,c1=u1.width;this.charSpacing!==0&&(s1=this._getWidthOfCharSpacing(),c1+=s1,l1+=s1);const d1={width:c1,left:0,height:o1.fontSize,kernedWidth:l1,deltaY:o1.deltaY};if(r1>0&&!i1){const h1=this.__charBounds[t1][r1-1];d1.left=h1.left+h1.width+u1.kernedWidth-u1.width}return d1}getHeightOfLine(_g){if(this.__lineHeights[_g])return this.__lineHeights[_g];let t1=this.getHeightOfChar(_g,0);for(let r1=1,n1=this._textLines[_g].length;r1<n1;r1++)t1=Math.max(this.getHeightOfChar(_g,r1),t1);return this.__lineHeights[_g]=t1*this.lineHeight*this._fontSizeMult}calcTextHeight(){let _g,t1=0;for(let r1=0,n1=this._textLines.length;r1<n1;r1++)_g=this.getHeightOfLine(r1),t1+=r1===n1-1?_g/this.lineHeight:_g;return t1}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(_g,t1){_g.save();let r1=0;const n1=this._getLeftOffset(),i1=this._getTopOffset();for(let o1=0,a1=this._textLines.length;o1<a1;o1++){const u1=this.getHeightOfLine(o1),s1=u1/this.lineHeight,l1=this._getLineLeftOffset(o1);this._renderTextLine(t1,_g,this._textLines[o1],n1+l1,i1+r1+s1,o1),r1+=u1}_g.restore()}_renderTextFill(_g){(this.fill||this.styleHas(K$2))&&this._renderTextCommon(_g,"fillText")}_renderTextStroke(_g){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(_g),_g.save(),this._setLineDash(_g,this.strokeDashArray),_g.beginPath(),this._renderTextCommon(_g,"strokeText"),_g.closePath(),_g.restore())}_renderChars(_g,t1,r1,n1,i1,o1){const a1=this.getHeightOfLine(o1),u1=this.textAlign.includes(To$2),s1=this.path,l1=!u1&&this.charSpacing===0&&this.isEmptyStyles(o1)&&!s1,c1=this.direction==="ltr",d1=this.direction==="ltr"?1:-1,h1=t1.direction;let f1,g1,v1,$1,y1,_1="",E1=0;if(t1.save(),h1!==this.direction&&(t1.canvas.setAttribute("dir",c1?"ltr":"rtl"),t1.direction=c1?"ltr":"rtl",t1.textAlign=c1?P$1:j$1),i1-=a1*this._fontSizeFraction/this.lineHeight,l1)return this._renderChar(_g,t1,o1,0,r1.join(""),n1,i1),void t1.restore();for(let T1=0,P1=r1.length-1;T1<=P1;T1++)$1=T1===P1||this.charSpacing||s1,_1+=r1[T1],v1=this.__charBounds[o1][T1],E1===0?(n1+=d1*(v1.kernedWidth-v1.width),E1+=v1.width):E1+=v1.kernedWidth,u1&&!$1&&this._reSpaceAndTab.test(r1[T1])&&($1=!0),$1||(f1=f1||this.getCompleteStyleDeclaration(o1,T1),g1=this.getCompleteStyleDeclaration(o1,T1+1),$1=Bi$2(f1,g1,!1)),$1&&(s1?(t1.save(),t1.translate(v1.renderLeft,v1.renderTop),t1.rotate(v1.angle),this._renderChar(_g,t1,o1,T1,_1,-E1/2,0),t1.restore()):(y1=n1,this._renderChar(_g,t1,o1,T1,_1,y1,i1)),_1="",f1=g1,n1+=d1*E1,E1=0);t1.restore()}_applyPatternGradientTransformText(_g){const t1=vt(),r1=this.width+this.strokeWidth,n1=this.height+this.strokeWidth,i1=t1.getContext("2d");return t1.width=r1,t1.height=n1,i1.beginPath(),i1.moveTo(0,0),i1.lineTo(r1,0),i1.lineTo(r1,n1),i1.lineTo(0,n1),i1.closePath(),i1.translate(r1/2,n1/2),i1.fillStyle=_g.toLive(i1),this._applyPatternGradientTransform(i1,_g),i1.fill(),i1.createPattern(t1,"no-repeat")}handleFiller(_g,t1,r1){let n1,i1;return te(r1)?r1.gradientUnits==="percentage"||r1.gradientTransform||r1.patternTransform?(n1=-this.width/2,i1=-this.height/2,_g.translate(n1,i1),_g[t1]=this._applyPatternGradientTransformText(r1),{offsetX:n1,offsetY:i1}):(_g[t1]=r1.toLive(_g),this._applyPatternGradientTransform(_g,r1)):(_g[t1]=r1,{offsetX:0,offsetY:0})}_setStrokeStyles(_g,t1){let{stroke:r1,strokeWidth:n1}=t1;return _g.lineWidth=n1,_g.lineCap=this.strokeLineCap,_g.lineDashOffset=this.strokeDashOffset,_g.lineJoin=this.strokeLineJoin,_g.miterLimit=this.strokeMiterLimit,this.handleFiller(_g,"strokeStyle",r1)}_setFillStyles(_g,t1){let{fill:r1}=t1;return this.handleFiller(_g,"fillStyle",r1)}_renderChar(_g,t1,r1,n1,i1,o1,a1){const u1=this._getStyleDeclaration(r1,n1),s1=this.getCompleteStyleDeclaration(r1,n1),l1=_g==="fillText"&&s1.fill,c1=_g==="strokeText"&&s1.stroke&&s1.strokeWidth;if(c1||l1){if(t1.save(),t1.font=this._getFontDeclaration(s1),u1.textBackgroundColor&&this._removeShadow(t1),u1.deltaY&&(a1+=u1.deltaY),l1){const d1=this._setFillStyles(t1,s1);t1.fillText(i1,o1-d1.offsetX,a1-d1.offsetY)}if(c1){const d1=this._setStrokeStyles(t1,s1);t1.strokeText(i1,o1-d1.offsetX,a1-d1.offsetY)}t1.restore()}}setSuperscript(_g,t1){this._setScript(_g,t1,this.superscript)}setSubscript(_g,t1){this._setScript(_g,t1,this.subscript)}_setScript(_g,t1,r1){const n1=this.get2DCursorLocation(_g,!0),i1=this.getValueOfPropertyAt(n1.lineIndex,n1.charIndex,"fontSize"),o1=this.getValueOfPropertyAt(n1.lineIndex,n1.charIndex,"deltaY"),a1={fontSize:i1*r1.size,deltaY:o1+i1*r1.baseline};this.setSelectionStyles(a1,_g,t1)}_getLineLeftOffset(_g){const t1=this.getLineWidth(_g),r1=this.width-t1,n1=this.textAlign,i1=this.direction,o1=this.isEndOfWrapping(_g);let a1=0;return n1===To$2||n1===Do$1&&!o1||n1===ko&&!o1||n1===Oo$1&&!o1?0:(n1===M$3&&(a1=r1/2),n1===j$1&&(a1=r1),n1===Do$1&&(a1=r1/2),n1===ko&&(a1=r1),i1==="rtl"&&(n1===j$1||n1===To$2||n1===ko?a1=0:n1===P$1||n1===Oo$1?a1=-r1:n1!==M$3&&n1!==Do$1||(a1=-r1/2)),a1)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(_g){if(this.__lineWidths[_g]!==void 0)return this.__lineWidths[_g];const{width:t1}=this.measureLine(_g);return this.__lineWidths[_g]=t1,t1}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(_g,t1,r1){var n1;return(n1=this._getStyleDeclaration(_g,t1)[r1])!==null&&n1!==void 0?n1:this[r1]}_renderTextDecoration(_g,t1){if(!this[t1]&&!this.styleHas(t1))return;let r1=this._getTopOffset();const n1=this._getLeftOffset(),i1=this.path,o1=this._getWidthOfCharSpacing(),a1=this.offsets[t1];for(let u1=0,s1=this._textLines.length;u1<s1;u1++){const l1=this.getHeightOfLine(u1);if(!this[t1]&&!this.styleHas(t1,u1)){r1+=l1;continue}const c1=this._textLines[u1],d1=l1/this.lineHeight,h1=this._getLineLeftOffset(u1);let f1,g1,v1=0,$1=0,y1=this.getValueOfPropertyAt(u1,0,t1),_1=this.getValueOfPropertyAt(u1,0,K$2);const E1=r1+d1*(1-this._fontSizeFraction);let T1=this.getHeightOfChar(u1,0),P1=this.getValueOfPropertyAt(u1,0,"deltaY");for(let N1=0,W1=c1.length;N1<W1;N1++){const H1=this.__charBounds[u1][N1];f1=this.getValueOfPropertyAt(u1,N1,t1),g1=this.getValueOfPropertyAt(u1,N1,K$2);const ty=this.getHeightOfChar(u1,N1),ey=this.getValueOfPropertyAt(u1,N1,"deltaY");if(i1&&f1&&g1)_g.save(),_g.fillStyle=_1,_g.translate(H1.renderLeft,H1.renderTop),_g.rotate(H1.angle),_g.fillRect(-H1.kernedWidth/2,a1*ty+ey,H1.kernedWidth,this.fontSize/15),_g.restore();else if((f1!==y1||g1!==_1||ty!==T1||ey!==P1)&&$1>0){let ly=n1+h1+v1;this.direction==="rtl"&&(ly=this.width-ly-$1),y1&&_1&&(_g.fillStyle=_1,_g.fillRect(ly,E1+a1*T1+P1,$1,this.fontSize/15)),v1=H1.left,$1=H1.width,y1=f1,_1=g1,T1=ty,P1=ey}else $1+=H1.kernedWidth}let k1=n1+h1+v1;this.direction==="rtl"&&(k1=this.width-k1-$1),_g.fillStyle=g1,f1&&g1&&_g.fillRect(k1,E1+a1*T1+P1,$1-o1,this.fontSize/15),r1+=l1}this._removeShadow(_g)}_getFontDeclaration(){let{fontFamily:_g=this.fontFamily,fontStyle:t1=this.fontStyle,fontWeight:r1=this.fontWeight,fontSize:n1=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i1=arguments.length>1?arguments[1]:void 0;const o1=_g.includes("'")||_g.includes('"')||_g.includes(",")||Uw.genericFonts.includes(_g.toLowerCase())?_g:'"'.concat(_g,'"');return[t1,r1,"".concat(i1?this.CACHE_FONT_SIZE:n1,"px"),o1].join(" ")}render(_g){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(_g)))}graphemeSplit(_g){return Fi$2(_g)}_splitTextIntoLines(_g){const t1=_g.split(this._reNewline),r1=new Array(t1.length),n1=[`
`];let i1=[];for(let o1=0;o1<t1.length;o1++)r1[o1]=this.graphemeSplit(t1[o1]),i1=i1.concat(r1[o1],n1);return i1.pop(),{_unwrappedLines:r1,lines:t1,graphemeText:i1,graphemeLines:r1}}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s$1(s$1({},super.toObject([...bo$2,..._g])),{},{styles:Ii$1(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(_g,t1){const{textLayoutProperties:r1}=this.constructor;super.set(_g,t1);let n1=!1,i1=!1;if(typeof _g=="object")for(const o1 in _g)o1==="path"&&this.setPathInfo(),n1=n1||r1.includes(o1),i1=i1||o1==="path";else n1=r1.includes(_g),i1=_g==="path";return i1&&this.setPathInfo(),n1&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(_g,t1,r1){const n1=vr$1(_g,Uw.ATTRIBUTE_NAMES,r1),i1=s$1(s$1({},t1),n1),{textAnchor:o1=P$1,textDecoration:a1="",dx:u1=0,dy:s1=0,top:l1=0,left:c1=0,fontSize:d1=k$3,strokeWidth:h1=1}=i1,f1=i$1(i1,jo$1),g1=new this((_g.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),s$1({left:c1+u1,top:l1+s1,underline:a1.includes("underline"),overline:a1.includes("overline"),linethrough:a1.includes("line-through"),strokeWidth:0,fontSize:d1},f1)),v1=g1.getScaledHeight()/g1.height,$1=((g1.height+g1.strokeWidth)*g1.lineHeight-g1.height)*v1,y1=g1.getScaledHeight()+$1;let _1=0;return o1===M$3&&(_1=g1.getScaledWidth()/2),o1===j$1&&(_1=g1.getScaledWidth()),g1.set({left:g1.left-_1,top:g1.top-(y1-g1.fontSize*(.07+g1._fontSizeFraction))/g1.lineHeight,strokeWidth:h1}),g1}static fromObject(_g){return this._fromObject(s$1(s$1({},_g),{},{styles:Xi$2(_g.styles||{},_g.text)}),{extraParam:"text"})}};t$3(Lo$1,"textLayoutProperties",Co$2),t$3(Lo$1,"cacheProperties",[...Vs$1,...bo$2]),t$3(Lo$1,"ownDefaults",So$2),t$3(Lo$1,"type","Text"),t$3(Lo$1,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]),t$3(Lo$1,"ATTRIBUTE_NAMES",Wi$2.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Ti$1(Lo$1,[class extends Ye{_toSVG(){const e1=this._getSVGLeftTopOffsets(),_g=this._getSVGTextAndBg(e1.textTop,e1.textLeft);return this._wrapSVGTextAndBg(_g)}toSVG(e1){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e1,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(e1){let{textBgRects:_g,textSpans:t1}=e1;const r1=this.getSvgTextDecoration(this);return[_g.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(Eo$1,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r1?'text-decoration="'.concat(r1,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t1.join(""),`</text>
`]}_getSVGTextAndBg(e1,_g){const t1=[],r1=[];let n1,i1=e1;this.backgroundColor&&r1.push(...Ao$1(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o1=0,a1=this._textLines.length;o1<a1;o1++)n1=this._getLineLeftOffset(o1),this.direction==="rtl"&&(n1+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o1))&&this._setSVGTextLineBg(r1,o1,_g+n1,i1),this._setSVGTextLineText(t1,o1,_g+n1,i1),i1+=this.getHeightOfLine(o1);return{textSpans:t1,textBgRects:r1}}_createTextCharSpan(e1,_g,t1,r1){const n1=this.getSvgSpanStyles(_g,e1!==e1.trim()||!!e1.match(Po$1)),i1=n1?'style="'.concat(n1,'"'):"",o1=_g.deltaY,a1=o1?' dy="'.concat(Kt(o1,a.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Kt(t1,a.NUM_FRACTION_DIGITS),'" y="').concat(Kt(r1,a.NUM_FRACTION_DIGITS),'" ').concat(a1).concat(i1,">").concat(ji$2(e1),"</tspan>")}_setSVGTextLineText(e1,_g,t1,r1){const n1=this.getHeightOfLine(_g),i1=this.textAlign.includes(To$2),o1=this._textLines[_g];let a1,u1,s1,l1,c1,d1="",h1=0;r1+=n1*(1-this._fontSizeFraction)/this.lineHeight;for(let f1=0,g1=o1.length-1;f1<=g1;f1++)c1=f1===g1||this.charSpacing,d1+=o1[f1],s1=this.__charBounds[_g][f1],h1===0?(t1+=s1.kernedWidth-s1.width,h1+=s1.width):h1+=s1.kernedWidth,i1&&!c1&&this._reSpaceAndTab.test(o1[f1])&&(c1=!0),c1||(a1=a1||this.getCompleteStyleDeclaration(_g,f1),u1=this.getCompleteStyleDeclaration(_g,f1+1),c1=Bi$2(a1,u1,!0)),c1&&(l1=this._getStyleDeclaration(_g,f1),e1.push(this._createTextCharSpan(d1,l1,t1,r1)),d1="",a1=u1,this.direction==="rtl"?t1-=h1:t1+=h1,h1=0)}_setSVGTextLineBg(e1,_g,t1,r1){const n1=this._textLines[_g],i1=this.getHeightOfLine(_g)/this.lineHeight;let o1,a1=0,u1=0,s1=this.getValueOfPropertyAt(_g,0,"textBackgroundColor");for(let l1=0;l1<n1.length;l1++){const{left:c1,width:d1,kernedWidth:h1}=this.__charBounds[_g][l1];o1=this.getValueOfPropertyAt(_g,l1,"textBackgroundColor"),o1!==s1?(s1&&e1.push(...Ao$1(s1,t1+u1,r1,a1,i1)),u1=c1,a1=d1,s1=o1):a1+=h1}o1&&e1.push(...Ao$1(s1,t1+u1,r1,a1,i1))}_getSVGLineTopOffset(e1){let _g,t1=0;for(_g=0;_g<e1;_g++)t1+=this.getHeightOfLine(_g);const r1=this.getHeightOfLine(_g);return{lineTop:t1,offset:(this._fontSizeMult-this._fontSizeFraction)*r1/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(e1){return"".concat(super.getSvgStyles(e1)," white-space: pre;")}getSvgSpanStyles(e1,_g){const{fontFamily:t1,strokeWidth:r1,stroke:n1,fill:i1,fontSize:o1,fontStyle:a1,fontWeight:u1,deltaY:s1}=e1,l1=this.getSvgTextDecoration(e1);return[n1?$t(J$1,n1):"",r1?"stroke-width: ".concat(r1,"; "):"",t1?"font-family: ".concat(t1.includes("'")||t1.includes('"')?t1:"'".concat(t1,"'"),"; "):"",o1?"font-size: ".concat(o1,"px; "):"",a1?"font-style: ".concat(a1,"; "):"",u1?"font-weight: ".concat(u1,"; "):"",l1&&"text-decoration: ".concat(l1,"; "),i1?$t(K$2,i1):"",s1?"baseline-shift: ".concat(-s1,"; "):"",_g?"white-space: pre; ":""].join("")}getSvgTextDecoration(e1){return["overline","underline","line-through"].filter(_g=>e1[_g.replace("-","")]).join(" ")}}]),tt$1.setClass(Lo$1),tt$1.setSVGClass(Lo$1);class Ro{constructor(_g){t$3(this,"target",void 0),t$3(this,"__mouseDownInPlace",!1),t$3(this,"__dragStartFired",!1),t$3(this,"__isDraggingOver",!1),t$3(this,"__dragStartSelection",void 0),t$3(this,"__dragImageDisposer",void 0),t$3(this,"_dispose",void 0),this.target=_g;const t1=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t1.forEach(r1=>r1()),this._dispose=void 0}}isPointerOverSelection(_g){const t1=this.target,r1=t1.getSelectionStartFromPointer(_g);return t1.isEditing&&r1>=t1.selectionStart&&r1<=t1.selectionEnd&&t1.selectionStart<t1.selectionEnd}start(_g){return this.__mouseDownInPlace=this.isPointerOverSelection(_g)}isActive(){return this.__mouseDownInPlace}end(_g){const t1=this.isActive();return t1&&!this.__dragStartFired&&(this.target.setCursorByClick(_g),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t1}getDragStartSelection(){return this.__dragStartSelection}setDragImage(_g,t1){var r1;let{selectionStart:n1,selectionEnd:i1}=t1;const o1=this.target,a1=o1.canvas,u1=new ht$1(o1.flipX?-1:1,o1.flipY?-1:1),s1=o1._getCursorBoundaries(n1),l1=new ht$1(s1.left+s1.leftOffset,s1.top+s1.topOffset).multiply(u1).transform(o1.calcTransformMatrix()),c1=a1.getScenePoint(_g).subtract(l1),d1=o1.getCanvasRetinaScaling(),h1=o1.getBoundingRect(),f1=l1.subtract(new ht$1(h1.left,h1.top)),g1=a1.viewportTransform,v1=f1.add(c1).transform(g1,!0),$1=o1.backgroundColor,y1=Ws$1(o1.styles);o1.backgroundColor="";const _1={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o1.setSelectionStyles(_1,0,n1),o1.setSelectionStyles(_1,i1,o1.text.length),o1.dirty=!0;const E1=o1.toCanvasElement({enableRetinaScaling:a1.enableRetinaScaling,viewportTransform:!0});o1.backgroundColor=$1,o1.styles=y1,o1.dirty=!0,he$1(E1,{position:"fixed",left:"".concat(-E1.width,"px"),border:F$1,width:"".concat(E1.width/d1,"px"),height:"".concat(E1.height/d1,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{E1.remove()},oe$1(_g.target||this.target.hiddenTextarea).body.appendChild(E1),(r1=_g.dataTransfer)===null||r1===void 0||r1.setDragImage(E1,v1.x,v1.y)}onDragStart(_g){this.__dragStartFired=!0;const t1=this.target,r1=this.isActive();if(r1&&_g.dataTransfer){const n1=this.__dragStartSelection={selectionStart:t1.selectionStart,selectionEnd:t1.selectionEnd},i1=t1._text.slice(n1.selectionStart,n1.selectionEnd).join(""),o1=s$1({text:t1.text,value:i1},n1);_g.dataTransfer.setData("text/plain",i1),_g.dataTransfer.setData("application/fabric",JSON.stringify({value:i1,styles:t1.getSelectionStyles(n1.selectionStart,n1.selectionEnd,!0)})),_g.dataTransfer.effectAllowed="copyMove",this.setDragImage(_g,o1)}return t1.abortCursorAnimation(),r1}canDrop(_g){if(this.target.editable&&!this.target.getActiveControl()&&!_g.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t1=this.target.getSelectionStartFromPointer(_g),r1=this.__dragStartSelection;return t1<r1.selectionStart||t1>r1.selectionEnd}return!0}return!1}targetCanDrop(_g){return this.target.canDrop(_g)}dragEnterHandler(_g){let{e:t1}=_g;const r1=this.targetCanDrop(t1);!this.__isDraggingOver&&r1&&(this.__isDraggingOver=!0)}dragOverHandler(_g){const{e:t1}=_g,r1=this.targetCanDrop(t1);!this.__isDraggingOver&&r1?this.__isDraggingOver=!0:this.__isDraggingOver&&!r1&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t1.preventDefault(),_g.canDrop=!0,_g.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(_g){var t1;const{e:r1}=_g,n1=r1.defaultPrevented;this.__isDraggingOver=!1,r1.preventDefault();let i1=(t1=r1.dataTransfer)===null||t1===void 0?void 0:t1.getData("text/plain");if(i1&&!n1){const o1=this.target,a1=o1.canvas;let u1=o1.getSelectionStartFromPointer(r1);const{styles:s1}=r1.dataTransfer.types.includes("application/fabric")?JSON.parse(r1.dataTransfer.getData("application/fabric")):{},l1=i1[Math.max(0,i1.length-1)],c1=0;if(this.__dragStartSelection){const d1=this.__dragStartSelection.selectionStart,h1=this.__dragStartSelection.selectionEnd;u1>d1&&u1<=h1?u1=d1:u1>h1&&(u1-=h1-d1),o1.removeChars(d1,h1),delete this.__dragStartSelection}o1._reNewline.test(l1)&&(o1._reNewline.test(o1._text[u1])||u1===o1._text.length)&&(i1=i1.trimEnd()),_g.didDrop=!0,_g.dropTarget=o1,o1.insertChars(i1,s1,u1),a1.setActiveObject(o1),o1.enterEditing(r1),o1.selectionStart=Math.min(u1+c1,o1._text.length),o1.selectionEnd=Math.min(o1.selectionStart+i1.length,o1._text.length),o1.hiddenTextarea.value=o1.text,o1._updateTextarea(),o1.hiddenTextarea.focus(),o1.fire(H$2,{index:u1+c1,action:"drop"}),a1.fire("text:changed",{target:o1}),a1.contextTopDirty=!0,a1.requestRenderAll()}}dragEndHandler(_g){let{e:t1}=_g;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r1;const n1=this.target,i1=this.target.canvas,{selectionStart:o1,selectionEnd:a1}=this.__dragStartSelection,u1=((r1=t1.dataTransfer)===null||r1===void 0?void 0:r1.dropEffect)||F$1;u1===F$1?(n1.selectionStart=o1,n1.selectionEnd=a1,n1._updateTextarea(),n1.hiddenTextarea.focus()):(n1.clearContextTop(),u1==="move"&&(n1.removeChars(o1,a1),n1.selectionStart=n1.selectionEnd=o1,n1.hiddenTextarea&&(n1.hiddenTextarea.value=n1.text),n1._updateTextarea(),n1.fire(H$2,{index:o1,action:"dragend"}),i1.fire("text:changed",{target:n1}),i1.requestRenderAll()),n1.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Bo=/[ \n\.,;!\?\-]/;let Io$2=class extends Lo$1{constructor(){super(...arguments),t$3(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(_g){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(_g)}_animateCursor(_g){let{toValue:t1,duration:r1,delay:n1,onComplete:i1}=_g;return ns$1({startValue:this._currentCursorOpacity,endValue:t1,duration:r1,delay:n1,onComplete:i1,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o1=>{this._currentCursorOpacity=o1,this.renderCursorOrSelection()}})}_tick(_g){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(_g||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var _g;(_g=this._currentTickCompleteState)===null||_g===void 0||_g.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(_g){this.abortCursorAnimation(),this._tick(_g?0:this.cursorDelay)}abortCursorAnimation(){let _g=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t1=>{t1&&!t1.isDone()&&(_g=!0,t1.abort())}),this._currentCursorOpacity=1,_g&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(_g=>!_g||_g.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(_g){let t1=0,r1=_g-1;if(this._reSpace.test(this._text[r1]))for(;this._reSpace.test(this._text[r1]);)t1++,r1--;for(;/\S/.test(this._text[r1])&&r1>-1;)t1++,r1--;return _g-t1}findWordBoundaryRight(_g){let t1=0,r1=_g;if(this._reSpace.test(this._text[r1]))for(;this._reSpace.test(this._text[r1]);)t1++,r1++;for(;/\S/.test(this._text[r1])&&r1<this._text.length;)t1++,r1++;return _g+t1}findLineBoundaryLeft(_g){let t1=0,r1=_g-1;for(;!/\n/.test(this._text[r1])&&r1>-1;)t1++,r1--;return _g-t1}findLineBoundaryRight(_g){let t1=0,r1=_g;for(;!/\n/.test(this._text[r1])&&r1<this._text.length;)t1++,r1++;return _g+t1}searchWordBoundary(_g,t1){const r1=this._text;let n1=_g>0&&this._reSpace.test(r1[_g])&&(t1===-1||!L$2.test(r1[_g-1]))?_g-1:_g,i1=r1[n1];for(;n1>0&&n1<r1.length&&!Bo.test(i1);)n1+=t1,i1=r1[n1];return t1===-1&&Bo.test(i1)&&n1++,n1}selectWord(_g){_g=_g||this.selectionStart;const t1=this.searchWordBoundary(_g,-1),r1=Math.max(t1,this.searchWordBoundary(_g,1));this.selectionStart=t1,this.selectionEnd=r1,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(_g){_g=_g||this.selectionStart;const t1=this.findLineBoundaryLeft(_g),r1=this.findLineBoundaryRight(_g);return this.selectionStart=t1,this.selectionEnd=r1,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(_g){!this.isEditing&&this.editable&&(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",_g?{e:_g}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:_g}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(_g){if(this.getActiveControl())return;const t1=this.hiddenTextarea;oe$1(t1).activeElement!==t1&&t1.focus();const r1=this.getSelectionStartFromPointer(_g),n1=this.selectionStart,i1=this.selectionEnd;(r1===this.__selectionStartOnMouseDown&&n1!==i1||n1!==r1&&i1!==r1)&&(r1>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r1):(this.selectionStart=r1,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n1&&this.selectionEnd===i1||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(_g,t1,r1){const n1=r1.slice(0,_g),i1=this.graphemeSplit(n1).length;if(_g===t1)return{selectionStart:i1,selectionEnd:i1};const o1=r1.slice(_g,t1);return{selectionStart:i1,selectionEnd:i1+this.graphemeSplit(o1).length}}fromGraphemeToStringSelection(_g,t1,r1){const n1=r1.slice(0,_g).join("").length;return _g===t1?{selectionStart:n1,selectionEnd:n1}:{selectionStart:n1,selectionEnd:n1+r1.slice(_g,t1).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const _g=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=_g.selectionStart,this.hiddenTextarea.selectionEnd=_g.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const _g=this.hiddenTextarea;this.text=_g.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t1=this.fromStringToGraphemeSelection(_g.selectionStart,_g.selectionEnd,_g.value);this.selectionEnd=this.selectionStart=t1.selectionEnd,this.inCompositionMode||(this.selectionStart=t1.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const _g=this._calcTextareaPosition();this.hiddenTextarea.style.left=_g.left,this.hiddenTextarea.style.top=_g.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const _g=this.inCompositionMode?this.compositionStart:this.selectionStart,t1=this._getCursorBoundaries(_g),r1=this.get2DCursorLocation(_g),n1=r1.lineIndex,i1=r1.charIndex,o1=this.getValueOfPropertyAt(n1,i1,"fontSize")*this.lineHeight,a1=t1.leftOffset,u1=this.getCanvasRetinaScaling(),s1=this.canvas.upperCanvasEl,l1=s1.width/u1,c1=s1.height/u1,d1=l1-o1,h1=c1-o1,f1=new ht$1(t1.left+a1,t1.top+t1.topOffset+o1).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ht$1(s1.clientWidth/l1,s1.clientHeight/c1));return f1.x<0&&(f1.x=0),f1.x>d1&&(f1.x=d1),f1.y<0&&(f1.y=0),f1.y>h1&&(f1.y=h1),f1.x+=this.canvas._offset.left,f1.y+=this.canvas._offset.top,{left:"".concat(f1.x,"px"),top:"".concat(f1.y,"px"),fontSize:"".concat(o1,"px"),charHeight:o1}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const _g=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,_g&&(_g.blur&&_g.blur(),_g.parentNode&&_g.parentNode.removeChild(_g)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const _g=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),_g&&this.fire(Z$2),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),_g&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const _g in this.styles)this._textLines[_g]||delete this.styles[_g]}removeStyleFromTo(_g,t1){const{lineIndex:r1,charIndex:n1}=this.get2DCursorLocation(_g,!0),{lineIndex:i1,charIndex:o1}=this.get2DCursorLocation(t1,!0);if(r1!==i1){if(this.styles[r1])for(let a1=n1;a1<this._unwrappedTextLines[r1].length;a1++)delete this.styles[r1][a1];if(this.styles[i1])for(let a1=o1;a1<this._unwrappedTextLines[i1].length;a1++){const u1=this.styles[i1][a1];u1&&(this.styles[r1]||(this.styles[r1]={}),this.styles[r1][n1+a1-o1]=u1)}for(let a1=r1+1;a1<=i1;a1++)delete this.styles[a1];this.shiftLineStyles(i1,r1-i1)}else if(this.styles[r1]){const a1=this.styles[r1],u1=o1-n1;for(let s1=n1;s1<o1;s1++)delete a1[s1];for(const s1 in this.styles[r1]){const l1=parseInt(s1,10);l1>=o1&&(a1[l1-u1]=a1[s1],delete a1[s1])}}}shiftLineStyles(_g,t1){const r1=Object.assign({},this.styles);for(const n1 in this.styles){const i1=parseInt(n1,10);i1>_g&&(this.styles[i1+t1]=r1[i1],r1[i1-t1]||delete this.styles[i1])}}insertNewlineStyleObject(_g,t1,r1,n1){const i1={},o1=this._unwrappedTextLines[_g].length,a1=o1===t1;let u1=!1;r1||(r1=1),this.shiftLineStyles(_g,r1);const s1=this.styles[_g]?this.styles[_g][t1===0?t1:t1-1]:void 0;for(const c1 in this.styles[_g]){const d1=parseInt(c1,10);d1>=t1&&(u1=!0,i1[d1-t1]=this.styles[_g][c1],a1&&t1===0||delete this.styles[_g][c1])}let l1=!1;for(u1&&!a1&&(this.styles[_g+r1]=i1,l1=!0),(l1||o1>t1)&&r1--;r1>0;)n1&&n1[r1-1]?this.styles[_g+r1]={0:s$1({},n1[r1-1])}:s1?this.styles[_g+r1]={0:s$1({},s1)}:delete this.styles[_g+r1],r1--;this._forceClearCache=!0}insertCharStyleObject(_g,t1,r1,n1){this.styles||(this.styles={});const i1=this.styles[_g],o1=i1?s$1({},i1):{};r1||(r1=1);for(const u1 in o1){const s1=parseInt(u1,10);s1>=t1&&(i1[s1+r1]=o1[s1],o1[s1-r1]||delete i1[s1])}if(this._forceClearCache=!0,n1){for(;r1--;)Object.keys(n1[r1]).length&&(this.styles[_g]||(this.styles[_g]={}),this.styles[_g][t1+r1]=s$1({},n1[r1]));return}if(!i1)return;const a1=i1[t1?t1-1:1];for(;a1&&r1--;)this.styles[_g][t1+r1]=s$1({},a1)}insertNewStyleBlock(_g,t1,r1){const n1=this.get2DCursorLocation(t1,!0),i1=[0];let o1,a1=0;for(let u1=0;u1<_g.length;u1++)_g[u1]===`
`?(a1++,i1[a1]=0):i1[a1]++;for(i1[0]>0&&(this.insertCharStyleObject(n1.lineIndex,n1.charIndex,i1[0],r1),r1=r1&&r1.slice(i1[0]+1)),a1&&this.insertNewlineStyleObject(n1.lineIndex,n1.charIndex+i1[0],a1),o1=1;o1<a1;o1++)i1[o1]>0?this.insertCharStyleObject(n1.lineIndex+o1,0,i1[o1],r1):r1&&this.styles[n1.lineIndex+o1]&&r1[0]&&(this.styles[n1.lineIndex+o1][0]=r1[0]),r1=r1&&r1.slice(i1[o1]+1);i1[o1]>0&&this.insertCharStyleObject(n1.lineIndex+o1,0,i1[o1],r1)}removeChars(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_g+1;this.removeStyleFromTo(_g,t1),this._text.splice(_g,t1-_g),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r1;n1>r1&&this.removeStyleFromTo(r1,n1);const i1=this.graphemeSplit(_g);this.insertNewStyleBlock(i1,r1,t1),this._text=[...this._text.slice(0,r1),...i1,...this._text.slice(n1)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(_g,t1,r1){r1<=_g?(t1===_g?this._selectionDirection=P$1:this._selectionDirection===j$1&&(this._selectionDirection=P$1,this.selectionEnd=_g),this.selectionStart=r1):r1>_g&&r1<t1?this._selectionDirection===j$1?this.selectionEnd=r1:this.selectionStart=r1:(t1===_g?this._selectionDirection=j$1:this._selectionDirection===P$1&&(this._selectionDirection=j$1,this.selectionStart=t1),this.selectionEnd=r1)}};class Xo extends Io$2{initHiddenTextarea(){const _g=this.canvas&&oe$1(this.canvas.getElement())||v$1(),t1=_g.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o1=>{let[a1,u1]=o1;return t1.setAttribute(a1,u1)});const{top:r1,left:n1,fontSize:i1}=this._calcTextareaPosition();t1.style.cssText="position: absolute; top: ".concat(r1,"; left: ").concat(n1,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i1,";"),(this.hiddenTextareaContainer||_g.body).appendChild(t1),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o1=>{let[a1,u1]=o1;return t1.addEventListener(a1,this[u1].bind(this))}),this.hiddenTextarea=t1}blur(){this.abortCursorAnimation()}onKeyDown(_g){if(!this.isEditing)return;const t1=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(_g.keyCode in t1)this[t1[_g.keyCode]](_g);else{if(!(_g.keyCode in this.ctrlKeysMapDown)||!_g.ctrlKey&&!_g.metaKey)return;this[this.ctrlKeysMapDown[_g.keyCode]](_g)}_g.stopImmediatePropagation(),_g.preventDefault(),_g.keyCode>=33&&_g.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(_g){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:_g.keyCode in this.ctrlKeysMapUp&&(_g.ctrlKey||_g.metaKey)&&(this[this.ctrlKeysMapUp[_g.keyCode]](_g),_g.stopImmediatePropagation(),_g.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(_g){const t1=this.fromPaste;if(this.fromPaste=!1,_g&&_g.stopPropagation(),!this.isEditing)return;const r1=()=>{this.updateFromTextArea(),this.fire(H$2),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r1();const n1=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i1=this._text.length,o1=n1.length,a1=this.selectionStart,u1=this.selectionEnd,s1=a1!==u1;let l1,c1,d1,h1,f1=o1-i1;const g1=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),v1=a1>g1.selectionStart;s1?(c1=this._text.slice(a1,u1),f1+=u1-a1):o1<i1&&(c1=v1?this._text.slice(u1+f1,u1):this._text.slice(a1,a1-f1));const $1=n1.slice(g1.selectionEnd-f1,g1.selectionEnd);if(c1&&c1.length&&($1.length&&(l1=this.getSelectionStyles(a1,a1+1,!1),l1=$1.map(()=>l1[0])),s1?(d1=a1,h1=u1):v1?(d1=u1-c1.length,h1=u1):(d1=u1,h1=u1+c1.length),this.removeStyleFromTo(d1,h1)),$1.length){const{copyPasteData:y1}=m$2();t1&&$1.join("")===y1.copiedText&&!a.disableStyleCopyPaste&&(l1=y1.copiedTextStyle),this.insertNewStyleBlock($1,a1,l1)}r1()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(_g){let{target:t1}=_g;const{selectionStart:r1,selectionEnd:n1}=t1;this.compositionStart=r1,this.compositionEnd=n1,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:_g}=m$2();_g.copiedText=this.getSelectedText(),a.disableStyleCopyPaste?_g.copiedTextStyle=void 0:_g.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(_g,t1){let r1,n1=this._getLineLeftOffset(_g);return t1>0&&(r1=this.__charBounds[_g][t1-1],n1+=r1.left+r1.width),n1}getDownCursorOffset(_g,t1){const r1=this._getSelectionForOffset(_g,t1),n1=this.get2DCursorLocation(r1),i1=n1.lineIndex;if(i1===this._textLines.length-1||_g.metaKey||_g.keyCode===34)return this._text.length-r1;const o1=n1.charIndex,a1=this._getWidthBeforeCursor(i1,o1),u1=this._getIndexOnLine(i1+1,a1);return this._textLines[i1].slice(o1).length+u1+1+this.missingNewlineOffset(i1)}_getSelectionForOffset(_g,t1){return _g.shiftKey&&this.selectionStart!==this.selectionEnd&&t1?this.selectionEnd:this.selectionStart}getUpCursorOffset(_g,t1){const r1=this._getSelectionForOffset(_g,t1),n1=this.get2DCursorLocation(r1),i1=n1.lineIndex;if(i1===0||_g.metaKey||_g.keyCode===33)return-r1;const o1=n1.charIndex,a1=this._getWidthBeforeCursor(i1,o1),u1=this._getIndexOnLine(i1-1,a1),s1=this._textLines[i1].slice(0,o1),l1=this.missingNewlineOffset(i1-1);return-this._textLines[i1-1].length+u1-s1.length+(1-l1)}_getIndexOnLine(_g,t1){const r1=this._textLines[_g];let n1,i1,o1=this._getLineLeftOffset(_g),a1=0;for(let u1=0,s1=r1.length;u1<s1;u1++)if(n1=this.__charBounds[_g][u1].width,o1+=n1,o1>t1){i1=!0;const l1=o1-n1,c1=o1,d1=Math.abs(l1-t1);a1=Math.abs(c1-t1)<d1?u1:u1-1;break}return i1||(a1=r1.length-1),a1}moveCursorDown(_g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",_g)}moveCursorUp(_g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",_g)}_moveCursorUpOrDown(_g,t1){const r1=this["get".concat(_g,"CursorOffset")](t1,this._selectionDirection===j$1);if(t1.shiftKey?this.moveCursorWithShift(r1):this.moveCursorWithoutShift(r1),r1!==0){const n1=this.text.length;this.selectionStart=ts$2(0,this.selectionStart,n1),this.selectionEnd=ts$2(0,this.selectionEnd,n1),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(_g){const t1=this._selectionDirection===P$1?this.selectionStart+_g:this.selectionEnd+_g;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t1),_g!==0}moveCursorWithoutShift(_g){return _g<0?(this.selectionStart+=_g,this.selectionEnd=this.selectionStart):(this.selectionEnd+=_g,this.selectionStart=this.selectionEnd),_g!==0}moveCursorLeft(_g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",_g)}_move(_g,t1,r1){let n1;if(_g.altKey)n1=this["findWordBoundary".concat(r1)](this[t1]);else{if(!_g.metaKey&&_g.keyCode!==35&&_g.keyCode!==36)return this[t1]+=r1==="Left"?-1:1,!0;n1=this["findLineBoundary".concat(r1)](this[t1])}return n1!==void 0&&this[t1]!==n1&&(this[t1]=n1,!0)}_moveLeft(_g,t1){return this._move(_g,t1,"Left")}_moveRight(_g,t1){return this._move(_g,t1,"Right")}moveCursorLeftWithoutShift(_g){let t1=!0;return this._selectionDirection=P$1,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t1=this._moveLeft(_g,"selectionStart")),this.selectionEnd=this.selectionStart,t1}moveCursorLeftWithShift(_g){return this._selectionDirection===j$1&&this.selectionStart!==this.selectionEnd?this._moveLeft(_g,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=P$1,this._moveLeft(_g,"selectionStart")):void 0}moveCursorRight(_g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",_g)}_moveCursorLeftOrRight(_g,t1){const r1="moveCursor".concat(_g).concat(t1.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r1](t1)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(_g){return this._selectionDirection===P$1&&this.selectionStart!==this.selectionEnd?this._moveRight(_g,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=j$1,this._moveRight(_g,"selectionEnd")):void 0}moveCursorRightWithoutShift(_g){let t1=!0;return this._selectionDirection=j$1,this.selectionStart===this.selectionEnd?(t1=this._moveRight(_g,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t1}}const Wo$1=e1=>!!e1.button;let Yo$1=class extends Xo{constructor(){super(...arguments),t$3(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new Ro(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(_g){return this.draggableTextDelegate.onDragStart(_g)}canDrop(_g){return this.draggableTextDelegate.canDrop(_g)}onMouseDown(_g){if(!this.canvas)return;this.__newClickTime=+new Date;const t1=_g.pointer;this.isTripleClick(t1)&&(this.fire("tripleclick",_g),ye$3(_g.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t1,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(_g){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===_g.x&&this.__lastPointer.y===_g.y}doubleClickHandler(_g){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(_g.e))}tripleClickHandler(_g){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(_g.e))}_mouseDownHandler(_g){let{e:t1}=_g;this.canvas&&this.editable&&!Wo$1(t1)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t1)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t1)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(_g){let{e:t1}=_g;this.canvas&&this.editable&&!Wo$1(t1)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(_g){let{e:t1,transform:r1}=_g;const n1=this.draggableTextDelegate.end(t1);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i1=this.canvas._activeObject;if(i1&&i1!==this)return}!this.editable||this.group&&!this.group.interactive||r1&&r1.actionPerformed||Wo$1(t1)||n1||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t1),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(_g){const t1=this.getSelectionStartFromPointer(_g),r1=this.selectionStart,n1=this.selectionEnd;_g.shiftKey?this.setSelectionStartEndWithShift(r1,n1,t1):(this.selectionStart=t1,this.selectionEnd=t1),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(_g){const t1=this.canvas.getScenePoint(_g).transform(St$2(this.calcTransformMatrix())).add(new ht$1(-this._getLeftOffset(),-this._getTopOffset()));let r1=0,n1=0,i1=0;for(let s1=0;s1<this._textLines.length&&r1<=t1.y;s1++)r1+=this.getHeightOfLine(s1),i1=s1,s1>0&&(n1+=this._textLines[s1-1].length+this.missingNewlineOffset(s1-1));let o1=Math.abs(this._getLineLeftOffset(i1));const a1=this._textLines[i1].length,u1=this.__charBounds[i1];for(let s1=0;s1<a1;s1++){const l1=o1+u1[s1].kernedWidth;if(t1.x<=l1){Math.abs(t1.x-l1)<=Math.abs(t1.x-o1)&&n1++;break}o1=l1,n1++}return Math.min(this.flipX?a1-n1:n1,this._text.length)}};const Vo$1="moveCursorUp",Ho$1="moveCursorDown",Go="moveCursorLeft",zo="moveCursorRight",No="exitEditing",Uo=s$1({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:No,27:No,33:Vo$1,34:Ho$1,35:zo,36:Go,37:Go,38:Vo$1,39:zo,40:Ho$1},keysMapRtl:{9:No,27:No,33:Vo$1,34:Ho$1,35:Go,36:zo,37:zo,38:Vo$1,39:Go,40:Ho$1},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});let qo$1=class eS extends Yo$1{static getDefaults(){return s$1(s$1({},super.getDefaults()),eS.ownDefaults)}get type(){const _g=super.type;return _g==="itext"?"i-text":_g}constructor(_g,t1){super(_g,s$1(s$1({},eS.ownDefaults),t1)),this.initBehavior()}_set(_g,t1){return this.isEditing&&this._savedProps&&_g in this._savedProps?(this._savedProps[_g]=t1,this):(_g==="canvas"&&(this.canvas instanceof An&&this.canvas.textEditingManager.remove(this),t1 instanceof An&&t1.textEditingManager.add(this)),super._set(_g,t1))}setSelectionStart(_g){_g=Math.max(_g,0),this._updateAndFire("selectionStart",_g)}setSelectionEnd(_g){_g=Math.min(_g,this.text.length),this._updateAndFire("selectionEnd",_g)}_updateAndFire(_g,t1){this[_g]!==t1&&(this._fireSelectionChanged(),this[_g]=t1),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r1=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(_g,t1,r1)}setSelectionStyles(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(_g,t1,r1)}get2DCursorLocation(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t1=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(_g,t1)}render(_g){super.render(_g),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(_g){const t1=this.isEditing;this.isEditing=!1;const r1=super.toCanvasElement(_g);return this.isEditing=t1,r1}renderCursorOrSelection(){if(!this.isEditing)return;const _g=this.clearContextTop(!0);if(!_g)return;const t1=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(_g,t1):this.renderSelection(_g,t1),this.canvas.contextTopDirty=!0,_g.restore()}_getCursorBoundaries(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t1=arguments.length>1?arguments[1]:void 0;const r1=this._getLeftOffset(),n1=this._getTopOffset(),i1=this._getCursorBoundariesOffsets(_g,t1);return{left:r1,top:n1,leftOffset:i1.left,topOffset:i1.top}}_getCursorBoundariesOffsets(_g,t1){return t1?this.__getCursorBoundariesOffsets(_g):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(_g)}__getCursorBoundariesOffsets(_g){let t1=0,r1=0;const{charIndex:n1,lineIndex:i1}=this.get2DCursorLocation(_g);for(let s1=0;s1<i1;s1++)t1+=this.getHeightOfLine(s1);const o1=this._getLineLeftOffset(i1),a1=this.__charBounds[i1][n1];a1&&(r1=a1.left),this.charSpacing!==0&&n1===this._textLines[i1].length&&(r1-=this._getWidthOfCharSpacing());const u1={top:t1,left:o1+(r1>0?r1:0)};return this.direction==="rtl"&&(this.textAlign===j$1||this.textAlign===To$2||this.textAlign===ko?u1.left*=-1:this.textAlign===P$1||this.textAlign===Oo$1?u1.left=o1-(r1>0?r1:0):this.textAlign!==M$3&&this.textAlign!==Do$1||(u1.left=o1-(r1>0?r1:0))),u1}renderCursorAt(_g){const t1=this._getCursorBoundaries(_g,!0);this._renderCursor(this.canvas.contextTop,t1,_g)}renderCursor(_g,t1){this._renderCursor(_g,t1,this.selectionStart)}_renderCursor(_g,t1,r1){const n1=this.get2DCursorLocation(r1),i1=n1.lineIndex,o1=n1.charIndex>0?n1.charIndex-1:0,a1=this.getValueOfPropertyAt(i1,o1,"fontSize"),u1=this.getObjectScaling().x*this.canvas.getZoom(),s1=this.cursorWidth/u1,l1=this.getValueOfPropertyAt(i1,o1,"deltaY"),c1=t1.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i1)/this.lineHeight-a1*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(_g,t1),_g.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i1,o1,K$2),_g.globalAlpha=this._currentCursorOpacity,_g.fillRect(t1.left+t1.leftOffset-s1/2,c1+t1.top+l1,s1,a1)}renderSelection(_g,t1){const r1={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(_g,r1,t1)}renderDragSourceEffect(){const _g=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,_g,this._getCursorBoundaries(_g.selectionStart,!0))}renderDropTargetEffect(_g){const t1=this.getSelectionStartFromPointer(_g);this.renderCursorAt(t1)}_renderSelection(_g,t1,r1){const n1=t1.selectionStart,i1=t1.selectionEnd,o1=this.textAlign.includes(To$2),a1=this.get2DCursorLocation(n1),u1=this.get2DCursorLocation(i1),s1=a1.lineIndex,l1=u1.lineIndex,c1=a1.charIndex<0?0:a1.charIndex,d1=u1.charIndex<0?0:u1.charIndex;for(let h1=s1;h1<=l1;h1++){const f1=this._getLineLeftOffset(h1)||0;let g1=this.getHeightOfLine(h1),v1=0,$1=0,y1=0;if(h1===s1&&($1=this.__charBounds[s1][c1].left),h1>=s1&&h1<l1)y1=o1&&!this.isEndOfWrapping(h1)?this.width:this.getLineWidth(h1)||5;else if(h1===l1)if(d1===0)y1=this.__charBounds[l1][d1].left;else{const k1=this._getWidthOfCharSpacing();y1=this.__charBounds[l1][d1-1].left+this.__charBounds[l1][d1-1].width-k1}v1=g1,(this.lineHeight<1||h1===l1&&this.lineHeight>1)&&(g1/=this.lineHeight);let _1=r1.left+f1+$1,E1=g1,T1=0;const P1=y1-$1;this.inCompositionMode?(_g.fillStyle=this.compositionColor||"black",E1=1,T1=g1):_g.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===j$1||this.textAlign===To$2||this.textAlign===ko?_1=this.width-_1-P1:this.textAlign===P$1||this.textAlign===Oo$1?_1=r1.left+f1-y1:this.textAlign!==M$3&&this.textAlign!==Do$1||(_1=r1.left+f1-y1)),_g.fillRect(_1,r1.top+r1.topOffset+T1,P1,E1),r1.topOffset+=v1}}getCurrentCharFontSize(){const _g=this._getCurrentCharIndex();return this.getValueOfPropertyAt(_g.l,_g.c,"fontSize")}getCurrentCharColor(){const _g=this._getCurrentCharIndex();return this.getValueOfPropertyAt(_g.l,_g.c,K$2)}_getCurrentCharIndex(){const _g=this.get2DCursorLocation(this.selectionStart,!0),t1=_g.charIndex>0?_g.charIndex-1:0;return{l:_g.lineIndex,c:t1}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}};t$3(qo$1,"ownDefaults",Uo),t$3(qo$1,"type","IText"),tt$1.setClass(qo$1),tt$1.setClass(qo$1,"i-text");let Ko$1=class tS extends qo$1{static getDefaults(){return s$1(s$1({},super.getDefaults()),tS.ownDefaults)}constructor(_g,t1){super(_g,s$1(s$1({},tS.ownDefaults),t1))}static createControls(){return{controls:wi$1()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(To$2)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(_g){let t1=0,r1=0,n1=0;const i1={};for(let o1=0;o1<_g.graphemeLines.length;o1++)_g.graphemeText[n1]===`
`&&o1>0?(r1=0,n1++,t1++):!this.splitByGrapheme&&this._reSpaceAndTab.test(_g.graphemeText[n1])&&o1>0&&(r1++,n1++),i1[o1]={line:t1,offset:r1},n1+=_g.graphemeLines[o1].length,r1+=_g.graphemeLines[o1].length;return i1}styleHas(_g,t1){if(this._styleMap&&!this.isWrapping){const r1=this._styleMap[t1];r1&&(t1=r1.line)}return super.styleHas(_g,t1)}isEmptyStyles(_g){if(!this.styles)return!0;let t1,r1=0,n1=_g+1,i1=!1;const o1=this._styleMap[_g],a1=this._styleMap[_g+1];o1&&(_g=o1.line,r1=o1.offset),a1&&(n1=a1.line,i1=n1===_g,t1=a1.offset);const u1=_g===void 0?this.styles:{line:this.styles[_g]};for(const s1 in u1)for(const l1 in u1[s1]){const c1=parseInt(l1,10);if(c1>=r1&&(!i1||c1<t1))for(const d1 in u1[s1][l1])return!1}return!0}_getStyleDeclaration(_g,t1){if(this._styleMap&&!this.isWrapping){const r1=this._styleMap[_g];if(!r1)return{};_g=r1.line,t1=r1.offset+t1}return super._getStyleDeclaration(_g,t1)}_setStyleDeclaration(_g,t1,r1){const n1=this._styleMap[_g];super._setStyleDeclaration(n1.line,n1.offset+t1,r1)}_deleteStyleDeclaration(_g,t1){const r1=this._styleMap[_g];super._deleteStyleDeclaration(r1.line,r1.offset+t1)}_getLineStyle(_g){const t1=this._styleMap[_g];return!!this.styles[t1.line]}_setLineStyle(_g){const t1=this._styleMap[_g];super._setLineStyle(t1.line)}_wrapText(_g,t1){this.isWrapping=!0;const r1=this.getGraphemeDataForRender(_g),n1=[];for(let i1=0;i1<r1.wordsData.length;i1++)n1.push(...this._wrapLine(i1,t1,r1));return this.isWrapping=!1,n1}getGraphemeDataForRender(_g){const t1=this.splitByGrapheme,r1=t1?"":" ";let n1=0;return{wordsData:_g.map((i1,o1)=>{let a1=0;const u1=t1?this.graphemeSplit(i1):this.wordSplit(i1);return u1.length===0?[{word:[],width:0}]:u1.map(s1=>{const l1=t1?[s1]:this.graphemeSplit(s1),c1=this._measureWord(l1,o1,a1);return n1=Math.max(c1,n1),a1+=l1.length+r1.length,{word:l1,width:c1}})}),largestWordWidth:n1}}_measureWord(_g,t1){let r1,n1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i1=0;for(let o1=0,a1=_g.length;o1<a1;o1++)i1+=this._getGraphemeBox(_g[o1],t1,o1+n1,r1,!0).kernedWidth,r1=_g[o1];return i1}wordSplit(_g){return _g.split(this._wordJoiners)}_wrapLine(_g,t1,r1){let{largestWordWidth:n1,wordsData:i1}=r1,o1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a1=this._getWidthOfCharSpacing(),u1=this.splitByGrapheme,s1=[],l1=u1?"":" ";let c1=0,d1=[],h1=0,f1=0,g1=!0;t1-=o1;const v1=Math.max(t1,n1,this.dynamicMinWidth),$1=i1[_g];let y1;for(h1=0,y1=0;y1<$1.length;y1++){const{word:_1,width:E1}=$1[y1];h1+=_1.length,c1+=f1+E1-a1,c1>v1&&!g1?(s1.push(d1),d1=[],c1=E1,g1=!0):c1+=a1,g1||u1||d1.push(l1),d1=d1.concat(_1),f1=u1?0:this._measureWord([l1],_g,h1),h1++,g1=!1}return y1&&s1.push(d1),n1+o1>this.dynamicMinWidth&&(this.dynamicMinWidth=n1-a1+o1),s1}isEndOfWrapping(_g){return!this._styleMap[_g+1]||this._styleMap[_g+1].line!==this._styleMap[_g].line}missingNewlineOffset(_g,t1){return this.splitByGrapheme&&!t1?this.isEndOfWrapping(_g)?1:0:1}_splitTextIntoLines(_g){const t1=super._splitTextIntoLines(_g),r1=this._wrapText(t1.lines,this.width),n1=new Array(r1.length);for(let i1=0;i1<r1.length;i1++)n1[i1]=r1[i1].join("");return t1.lines=n1,t1.graphemeLines=r1,t1}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const _g=new Map;for(const t1 in this._styleMap){const r1=parseInt(t1,10);if(this._textLines[r1]){const n1=this._styleMap[t1].line;_g.set("".concat(n1),!0)}}for(const t1 in this.styles)_g.has(t1)||delete this.styles[t1]}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",..._g])}};t$3(Ko$1,"type","Textbox"),t$3(Ko$1,"textLayoutProperties",[...qo$1.textLayoutProperties,"width"]),t$3(Ko$1,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),tt$1.setClass(Ko$1);let Jo$1=class extends Or$1{shouldPerformLayout(_g){return!!_g.target.clipPath&&super.shouldPerformLayout(_g)}shouldLayoutClipPath(){return!1}calcLayoutResult(_g,t1){const{target:r1}=_g,{clipPath:n1,group:i1}=r1;if(!n1||!this.shouldPerformLayout(_g))return;const{width:o1,height:a1}=_e$2(Tr$1(r1,n1)),u1=new ht$1(o1,a1);if(n1.absolutePositioned)return{center:ke$1(n1.getRelativeCenterPoint(),void 0,i1?i1.calcTransformMatrix():void 0),size:u1};{const s1=n1.getRelativeCenterPoint().transform(r1.calcOwnMatrix(),!0);if(this.shouldPerformLayout(_g)){const{center:l1=new ht$1,correction:c1=new ht$1}=this.calcBoundingBox(t1,_g)||{};return{center:l1.add(s1),correction:c1.subtract(s1),size:u1}}return{center:r1.getRelativeCenterPoint().add(s1),size:u1}}}};t$3(Jo$1,"type","clip-path"),tt$1.setClass(Jo$1);let Zo$1=class extends Or$1{getInitialSize(_g,t1){let{target:r1}=_g,{size:n1}=t1;return new ht$1(r1.width||n1.x,r1.height||n1.y)}};t$3(Zo$1,"type","fixed"),tt$1.setClass(Zo$1);class Qo extends Er$2{subscribeTargets(_g){const t1=_g.target;_g.targets.reduce((r1,n1)=>(n1.parent&&r1.add(n1.parent),r1),new Set).forEach(r1=>{r1.layoutManager.subscribeTargets({target:r1,targets:[t1]})})}unsubscribeTargets(_g){const t1=_g.target,r1=t1.getObjects();_g.targets.reduce((n1,i1)=>(i1.parent&&n1.add(i1.parent),n1),new Set).forEach(n1=>{!r1.some(i1=>i1.parent===n1)&&n1.layoutManager.unsubscribeTargets({target:n1,targets:[t1]})})}}let $o$1=class rS extends Fr$1{static getDefaults(){return s$1(s$1({},super.getDefaults()),rS.ownDefaults)}constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,rS.ownDefaults),this.setOptions(t1);const{left:r1,top:n1,layoutManager:i1}=t1;this.groupInit(_g,{left:r1,top:n1,layoutManager:i1??new Qo})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];this.multiSelectionStacking==="selection-order"?this.add(...t1):t1.forEach(n1=>{const i1=this._objects.findIndex(a1=>a1.isInFrontOf(n1)),o1=i1===-1?this.size():i1;this.insertAt(o1,n1)})}canEnterGroup(_g){return this.getObjects().some(t1=>t1.isDescendantOf(_g)||_g.isDescendantOf(t1))?(h$2("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(_g)}enterGroup(_g,t1){_g.parent&&_g.parent===_g.group?_g.parent._exitGroup(_g):_g.group&&_g.parent!==_g.group&&_g.group.remove(_g),this._enterGroup(_g,t1)}exitGroup(_g,t1){this._exitGroup(_g,t1),_g.parent&&_g.parent._enterGroup(_g,!0)}_onAfterObjectsChange(_g,t1){super._onAfterObjectsChange(_g,t1);const r1=new Set;t1.forEach(n1=>{const{parent:i1}=n1;i1&&r1.add(i1)}),_g===wr$1?r1.forEach(n1=>{n1._onAfterObjectsChange(br$1,t1)}):r1.forEach(n1=>{n1._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(_g,t1,r1){_g.save(),_g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const n1=s$1(s$1({hasControls:!1},r1),{},{forActiveSelection:!0});for(let i1=0;i1<this._objects.length;i1++)this._objects[i1]._renderControls(_g,n1);super._renderControls(_g,t1),_g.restore()}};t$3($o$1,"type","ActiveSelection"),t$3($o$1,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),tt$1.setClass($o$1),tt$1.setClass($o$1,"activeSelection");let ta$1=class{constructor(){t$3(this,"resources",{})}applyFilters(_g,t1,r1,n1,i1){const o1=i1.getContext("2d");if(!o1)return;o1.drawImage(t1,0,0,r1,n1);const a1={sourceWidth:r1,sourceHeight:n1,imageData:o1.getImageData(0,0,r1,n1),originalEl:t1,originalImageData:o1.getImageData(0,0,r1,n1),canvasEl:i1,ctx:o1,filterBackend:this};_g.forEach(s1=>{s1.applyTo(a1)});const{imageData:u1}=a1;return u1.width===r1&&u1.height===n1||(i1.width=u1.width,i1.height=u1.height),o1.putImageData(u1,0,0),a1}},ea$1=class{constructor(){let{tileSize:_g=a.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t$3(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),t$3(this,"resources",{}),this.tileSize=_g,this.setupGLContext(_g,_g),this.captureGPUInfo()}setupGLContext(_g,t1){this.dispose(),this.createWebGLCanvas(_g,t1)}createWebGLCanvas(_g,t1){const r1=vt();r1.width=_g,r1.height=t1;const n1=r1.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n1&&(n1.clearColor(0,0,0,0),this.canvas=r1,this.gl=n1)}applyFilters(_g,t1,r1,n1,i1,o1){const a1=this.gl,u1=i1.getContext("2d");if(!a1||!u1)return;let s1;o1&&(s1=this.getCachedTexture(o1,t1));const l1={originalWidth:t1.width||t1.originalWidth||0,originalHeight:t1.height||t1.originalHeight||0,sourceWidth:r1,sourceHeight:n1,destinationWidth:r1,destinationHeight:n1,context:a1,sourceTexture:this.createTexture(a1,r1,n1,s1?void 0:t1),targetTexture:this.createTexture(a1,r1,n1),originalTexture:s1||this.createTexture(a1,r1,n1,s1?void 0:t1),passes:_g.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i1},c1=a1.createFramebuffer();return a1.bindFramebuffer(a1.FRAMEBUFFER,c1),_g.forEach(d1=>{d1&&d1.applyTo(l1)}),function(d1){const h1=d1.targetCanvas,f1=h1.width,g1=h1.height,v1=d1.destinationWidth,$1=d1.destinationHeight;f1===v1&&g1===$1||(h1.width=v1,h1.height=$1)}(l1),this.copyGLTo2D(a1,l1),a1.bindTexture(a1.TEXTURE_2D,null),a1.deleteTexture(l1.sourceTexture),a1.deleteTexture(l1.targetTexture),a1.deleteFramebuffer(c1),u1.setTransform(1,0,0,1,0,0),l1}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(_g,t1,r1,n1,i1){const{NEAREST:o1,TEXTURE_2D:a1,RGBA:u1,UNSIGNED_BYTE:s1,CLAMP_TO_EDGE:l1,TEXTURE_MAG_FILTER:c1,TEXTURE_MIN_FILTER:d1,TEXTURE_WRAP_S:h1,TEXTURE_WRAP_T:f1}=_g,g1=_g.createTexture();return _g.bindTexture(a1,g1),_g.texParameteri(a1,c1,i1||o1),_g.texParameteri(a1,d1,i1||o1),_g.texParameteri(a1,h1,l1),_g.texParameteri(a1,f1,l1),n1?_g.texImage2D(a1,0,u1,u1,s1,n1):_g.texImage2D(a1,0,u1,t1,r1,0,u1,s1,null),g1}getCachedTexture(_g,t1,r1){const{textureCache:n1}=this;if(n1[_g])return n1[_g];{const i1=this.createTexture(this.gl,t1.width,t1.height,t1,r1);return i1&&(n1[_g]=i1),i1}}evictCachesForKey(_g){this.textureCache[_g]&&(this.gl.deleteTexture(this.textureCache[_g]),delete this.textureCache[_g])}copyGLTo2D(_g,t1){const r1=_g.canvas,n1=t1.targetCanvas,i1=n1.getContext("2d");if(!i1)return;i1.translate(0,n1.height),i1.scale(1,-1);const o1=r1.height-n1.height;i1.drawImage(r1,0,o1,n1.width,n1.height,0,0,n1.width,n1.height)}copyGLTo2DPutImageData(_g,t1){const r1=t1.targetCanvas.getContext("2d"),n1=t1.destinationWidth,i1=t1.destinationHeight,o1=n1*i1*4;if(!r1)return;const a1=new Uint8Array(this.imageBuffer,0,o1),u1=new Uint8ClampedArray(this.imageBuffer,0,o1);_g.readPixels(0,0,n1,i1,_g.RGBA,_g.UNSIGNED_BYTE,a1);const s1=new ImageData(u1,n1,i1);r1.putImageData(s1,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const _g=this.gl,t1={renderer:"",vendor:""};if(!_g)return t1;const r1=_g.getExtension("WEBGL_debug_renderer_info");if(r1){const n1=_g.getParameter(r1.UNMASKED_RENDERER_WEBGL),i1=_g.getParameter(r1.UNMASKED_VENDOR_WEBGL);n1&&(t1.renderer=n1.toLowerCase()),i1&&(t1.vendor=i1.toLowerCase())}return this.gpuInfo=t1,t1}},sa$2;function ia$2(){const{WebGLProbe:e1}=m$2();return e1.queryWebGL(vt()),a.enableGLFiltering&&e1.isSupported(a.textureSize)?new ea$1({tileSize:a.textureSize}):new ta$1}function ra$1(){return!sa$2&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(sa$2=ia$2()),sa$2}const oa$2=["filters","resizeFilter","src","crossOrigin","type"],aa$2=["cropX","cropY"];let ha$1=class G2 extends Oi$2{static getDefaults(){return s$1(s$1({},super.getDefaults()),G2.ownDefaults)}constructor(_g,t1){super(),t$3(this,"_lastScaleX",1),t$3(this,"_lastScaleY",1),t$3(this,"_filterScalingX",1),t$3(this,"_filterScalingY",1),this.filters=[],Object.assign(this,G2.ownDefaults),this.setOptions(t1),this.cacheKey="texture".concat(mt$1()),this.setElement(typeof _g=="string"?(this.canvas&&oe$1(this.canvas.getElement())||v$1()).getElementById(_g):_g,t1)}getElement(){return this._element}setElement(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=_g,this._originalElement=_g,this._setWidthHeight(t1),_g.classList.add(G2.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(_g){const t1=ra$1(!1);t1 instanceof ea$1&&t1.evictCachesForKey(_g)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(_g=>{const t1=this[_g];t1&&m$2().dispose(t1),this[_g]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const _g=this.getElement();return _g?{width:_g.naturalWidth||_g.width,height:_g.naturalHeight||_g.height}:{width:0,height:0}}_stroke(_g){if(!this.stroke||this.strokeWidth===0)return;const t1=this.width/2,r1=this.height/2;_g.beginPath(),_g.moveTo(-t1,-r1),_g.lineTo(t1,-r1),_g.lineTo(t1,r1),_g.lineTo(-t1,r1),_g.lineTo(-t1,-r1),_g.closePath()}toObject(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t1=[];return this.filters.forEach(r1=>{r1&&t1.push(r1.toObject())}),s$1(s$1({},super.toObject([...aa$2,..._g])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t1},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const _g=[],t1=this._element,r1=-this.width/2,n1=-this.height/2;let i1=[],o1=[],a1="",u1="";if(!t1)return[];if(this.hasCrop()){const s1=mt$1();i1.push('<clipPath id="imageCrop_'+s1+`">
`,'	<rect x="'+r1+'" y="'+n1+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a1=' clip-path="url(#imageCrop_'+s1+')" '}if(this.imageSmoothing||(u1=' image-rendering="optimizeSpeed"'),_g.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r1-this.cropX,'" y="').concat(n1-this.cropY,'" width="').concat(t1.width||t1.naturalWidth,'" height="').concat(t1.height||t1.naturalHeight,'"').concat(u1).concat(a1,`></image>
`)),this.stroke||this.strokeDashArray){const s1=this.fill;this.fill=null,o1=['	<rect x="'.concat(r1,'" y="').concat(n1,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=s1}return i1=this.paintFirst!==K$2?i1.concat(o1,_g):i1.concat(_g,o1),i1}getSrc(_g){const t1=_g?this._element:this._originalElement;return t1?t1.toDataURL?t1.toDataURL():this.srcFromAttribute?t1.getAttribute("src")||"":t1.src:this.src||""}getSvgSrc(_g){return this.getSrc(_g)}setSrc(_g){let{crossOrigin:t1,signal:r1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Bt$2(_g,{crossOrigin:t1,signal:r1}).then(n1=>{t1!==void 0&&this.set({crossOrigin:t1}),this.setElement(n1)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const _g=this.resizeFilter,t1=this.minimumScaleTrigger,r1=this.getTotalObjectScaling(),n1=r1.x,i1=r1.y,o1=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!_g||n1>t1&&i1>t1)return this._element=o1,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n1,void(this._lastScaleY=i1);const a1=vt(),u1=o1.width,s1=o1.height;a1.width=u1,a1.height=s1,this._element=a1,this._lastScaleX=_g.scaleX=n1,this._lastScaleY=_g.scaleY=i1,ra$1().applyFilters([_g],o1,u1,s1,this._element),this._filterScalingX=a1.width/this._originalElement.width,this._filterScalingY=a1.height/this._originalElement.height}applyFilters(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(_g=_g.filter(i1=>i1&&!i1.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),_g.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t1=this._originalElement,r1=t1.naturalWidth||t1.width,n1=t1.naturalHeight||t1.height;if(this._element===this._originalElement){const i1=vt();i1.width=r1,i1.height=n1,this._element=i1,this._filteredEl=i1}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r1,n1),this._lastScaleX=1,this._lastScaleY=1);ra$1().applyFilters(_g,this._originalElement,r1,n1,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(_g){_g.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(_g),this._renderPaintInOrder(_g)}drawCacheOnCanvas(_g){_g.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(_g)}shouldCache(){return this.needsItsOwnCache()}_renderFill(_g){const t1=this._element;if(!t1)return;const r1=this._filterScalingX,n1=this._filterScalingY,i1=this.width,o1=this.height,a1=Math.max(this.cropX,0),u1=Math.max(this.cropY,0),s1=t1.naturalWidth||t1.width,l1=t1.naturalHeight||t1.height,c1=a1*r1,d1=u1*n1,h1=Math.min(i1*r1,s1-c1),f1=Math.min(o1*n1,l1-d1),g1=-i1/2,v1=-o1/2,$1=Math.min(i1,s1/r1-a1),y1=Math.min(o1,l1/n1-u1);t1&&_g.drawImage(t1,c1,d1,h1,f1,g1,v1,$1,y1)}_needsResize(){const _g=this.getTotalObjectScaling();return _g.x!==this._lastScaleX||_g.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:_g,height:t1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r1=this.getOriginalSize();this.width=_g||r1.width,this.height=t1||r1.height}parsePreserveAspectRatioAttribute(){const _g=Zt$1(this.preserveAspectRatio||""),t1=this.width,r1=this.height,n1={width:t1,height:r1};let i1,o1=this._element.width,a1=this._element.height,u1=1,s1=1,l1=0,c1=0,d1=0,h1=0;return!_g||_g.alignX===F$1&&_g.alignY===F$1?(u1=t1/o1,s1=r1/a1):(_g.meetOrSlice==="meet"&&(u1=s1=Lr(this._element,n1),i1=(t1-o1*u1)/2,_g.alignX==="Min"&&(l1=-i1),_g.alignX==="Max"&&(l1=i1),i1=(r1-a1*s1)/2,_g.alignY==="Min"&&(c1=-i1),_g.alignY==="Max"&&(c1=i1)),_g.meetOrSlice==="slice"&&(u1=s1=Rr$2(this._element,n1),i1=o1-t1/u1,_g.alignX==="Mid"&&(d1=i1/2),_g.alignX==="Max"&&(d1=i1),i1=a1-r1/s1,_g.alignY==="Mid"&&(h1=i1/2),_g.alignY==="Max"&&(h1=i1),o1=t1/u1,a1=r1/s1)),{width:o1,height:a1,scaleX:u1,scaleY:s1,offsetLeft:l1,offsetTop:c1,cropX:d1,cropY:h1}}static fromObject(_g,t1){let{filters:r1,resizeFilter:n1,src:i1,crossOrigin:o1,type:a1}=_g,u1=i$1(_g,oa$2);return Promise.all([Bt$2(i1,s$1(s$1({},t1),{},{crossOrigin:o1})),r1&&It$1(r1,t1),n1&&It$1([n1],t1),Xt$2(u1,t1)]).then(s1=>{let[l1,c1=[],[d1]=[],h1={}]=s1;return new this(l1,s$1(s$1({},u1),{},{src:i1,filters:c1,resizeFilter:d1},h1))})}static fromURL(_g){let{crossOrigin:t1=null,signal:r1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n1=arguments.length>2?arguments[2]:void 0;return Bt$2(_g,{crossOrigin:t1,signal:r1}).then(i1=>new this(i1,n1))}static async fromElement(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r1=arguments.length>2?arguments[2]:void 0;const n1=vr$1(_g,this.ATTRIBUTE_NAMES,r1);return this.fromURL(n1["xlink:href"],t1,n1).catch(i1=>(h$2("log","Unable to parse Image",i1),null))}};t$3(ha$1,"type","Image"),t$3(ha$1,"cacheProperties",[...Vs$1,...aa$2]),t$3(ha$1,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),t$3(ha$1,"CSS_CANVAS","canvas-img"),t$3(ha$1,"ATTRIBUTE_NAMES",[...Wi$2,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),tt$1.setClass(ha$1),tt$1.setSVGClass(ha$1);Ss$2(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ea$1=e1=>e1.webgl!==void 0,ja$2="precision highp float",Fa$1=`
    `.concat(ja$2,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),La$1=["type"],Ra=["type"],Ba$1=new RegExp(ja$2,"g");let Ia$1=class{get type(){return this.constructor.type}constructor(){let _g=i$1(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},La$1);Object.assign(this,this.constructor.defaults,_g)}getFragmentSource(){return Fa$1}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n1="highp"}}=m$2();n1!=="highp"&&(t1=t1.replace(Ba$1,ja$2.replace("highp",n1)));const i1=_g.createShader(_g.VERTEX_SHADER),o1=_g.createShader(_g.FRAGMENT_SHADER),a1=_g.createProgram();if(!i1||!o1||!a1)throw new c("Vertex, fragment shader or program creation error");if(_g.shaderSource(i1,r1),_g.compileShader(i1),!_g.getShaderParameter(i1,_g.COMPILE_STATUS))throw new c("Vertex shader compile error for ".concat(this.type,": ").concat(_g.getShaderInfoLog(i1)));if(_g.shaderSource(o1,t1),_g.compileShader(o1),!_g.getShaderParameter(o1,_g.COMPILE_STATUS))throw new c("Fragment shader compile error for ".concat(this.type,": ").concat(_g.getShaderInfoLog(o1)));if(_g.attachShader(a1,i1),_g.attachShader(a1,o1),_g.linkProgram(a1),!_g.getProgramParameter(a1,_g.LINK_STATUS))throw new c('Shader link error for "'.concat(this.type,'" ').concat(_g.getProgramInfoLog(a1)));const u1=this.getUniformLocations(_g,a1)||{};return u1.uStepW=_g.getUniformLocation(a1,"uStepW"),u1.uStepH=_g.getUniformLocation(a1,"uStepH"),{program:a1,attributeLocations:this.getAttributeLocations(_g,a1),uniformLocations:u1}}getAttributeLocations(_g,t1){return{aPosition:_g.getAttribLocation(t1,"aPosition")}}getUniformLocations(_g,t1){const r1=this.constructor.uniformLocations,n1={};for(let i1=0;i1<r1.length;i1++)n1[r1[i1]]=_g.getUniformLocation(t1,r1[i1]);return n1}sendAttributeData(_g,t1,r1){const n1=t1.aPosition,i1=_g.createBuffer();_g.bindBuffer(_g.ARRAY_BUFFER,i1),_g.enableVertexAttribArray(n1),_g.vertexAttribPointer(n1,2,_g.FLOAT,!1,0,0),_g.bufferData(_g.ARRAY_BUFFER,r1,_g.STATIC_DRAW)}_setupFrameBuffer(_g){const t1=_g.context;if(_g.passes>1){const r1=_g.destinationWidth,n1=_g.destinationHeight;_g.sourceWidth===r1&&_g.sourceHeight===n1||(t1.deleteTexture(_g.targetTexture),_g.targetTexture=_g.filterBackend.createTexture(t1,r1,n1)),t1.framebufferTexture2D(t1.FRAMEBUFFER,t1.COLOR_ATTACHMENT0,t1.TEXTURE_2D,_g.targetTexture,0)}else t1.bindFramebuffer(t1.FRAMEBUFFER,null),t1.finish()}_swapTextures(_g){_g.passes--,_g.pass++;const t1=_g.targetTexture;_g.targetTexture=_g.sourceTexture,_g.sourceTexture=t1}isNeutralState(_g){return!1}applyTo(_g){Ea$1(_g)?(this._setupFrameBuffer(_g),this.applyToWebGL(_g),this._swapTextures(_g)):this.applyTo2d(_g)}applyTo2d(_g){}getCacheKey(){return this.type}retrieveShader(_g){const t1=this.getCacheKey();return _g.programCache[t1]||(_g.programCache[t1]=this.createProgram(_g.context)),_g.programCache[t1]}applyToWebGL(_g){const t1=_g.context,r1=this.retrieveShader(_g);_g.pass===0&&_g.originalTexture?t1.bindTexture(t1.TEXTURE_2D,_g.originalTexture):t1.bindTexture(t1.TEXTURE_2D,_g.sourceTexture),t1.useProgram(r1.program),this.sendAttributeData(t1,r1.attributeLocations,_g.aPosition),t1.uniform1f(r1.uniformLocations.uStepW,1/_g.sourceWidth),t1.uniform1f(r1.uniformLocations.uStepH,1/_g.sourceHeight),this.sendUniformData(t1,r1.uniformLocations),t1.viewport(0,0,_g.destinationWidth,_g.destinationHeight),t1.drawArrays(t1.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(_g,t1,r1){_g.activeTexture(r1),_g.bindTexture(_g.TEXTURE_2D,t1),_g.activeTexture(_g.TEXTURE0)}unbindAdditionalTexture(_g,t1){_g.activeTexture(t1),_g.bindTexture(_g.TEXTURE_2D,null),_g.activeTexture(_g.TEXTURE0)}sendUniformData(_g,t1){}createHelpLayer(_g){if(!_g.helpLayer){const t1=vt();t1.width=_g.sourceWidth,t1.height=_g.sourceHeight,_g.helpLayer=t1}}toObject(){const _g=Object.keys(this.constructor.defaults);return s$1({type:this.type},_g.reduce((t1,r1)=>(t1[r1]=this[r1],t1),{}))}toJSON(){return this.toObject()}static async fromObject(_g,t1){return new this(i$1(_g,Ra))}};t$3(Ia$1,"type","BaseFilter"),t$3(Ia$1,"uniformLocations",[]);const Xa$2={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};let Wa$1=class extends Ia$1{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(Xa$2[this.mode],`
        }
      }
      `)}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=new qt(this.color).getSource(),n1=r1[0]*this.alpha,i1=r1[1]*this.alpha,o1=r1[2]*this.alpha,a1=1-this.alpha;for(let u1=0;u1<t1.length;u1+=4){const s1=t1[u1],l1=t1[u1+1],c1=t1[u1+2];switch(this.mode){case"multiply":t1[u1]=s1*n1/255,t1[u1+1]=l1*i1/255,t1[u1+2]=c1*o1/255;break;case"screen":t1[u1]=255-(255-s1)*(255-n1)/255,t1[u1+1]=255-(255-l1)*(255-i1)/255,t1[u1+2]=255-(255-c1)*(255-o1)/255;break;case"add":t1[u1]=s1+n1,t1[u1+1]=l1+i1,t1[u1+2]=c1+o1;break;case"difference":t1[u1]=Math.abs(s1-n1),t1[u1+1]=Math.abs(l1-i1),t1[u1+2]=Math.abs(c1-o1);break;case"subtract":t1[u1]=s1-n1,t1[u1+1]=l1-i1,t1[u1+2]=c1-o1;break;case"darken":t1[u1]=Math.min(s1,n1),t1[u1+1]=Math.min(l1,i1),t1[u1+2]=Math.min(c1,o1);break;case"lighten":t1[u1]=Math.max(s1,n1),t1[u1+1]=Math.max(l1,i1),t1[u1+2]=Math.max(c1,o1);break;case"overlay":t1[u1]=n1<128?2*s1*n1/255:255-2*(255-s1)*(255-n1)/255,t1[u1+1]=i1<128?2*l1*i1/255:255-2*(255-l1)*(255-i1)/255,t1[u1+2]=o1<128?2*c1*o1/255:255-2*(255-c1)*(255-o1)/255;break;case"exclusion":t1[u1]=n1+s1-2*n1*s1/255,t1[u1+1]=i1+l1-2*i1*l1/255,t1[u1+2]=o1+c1-2*o1*c1/255;break;case"tint":t1[u1]=n1+s1*a1,t1[u1+1]=i1+l1*a1,t1[u1+2]=o1+c1*a1}}}sendUniformData(_g,t1){const r1=new qt(this.color).getSource();r1[0]=this.alpha*r1[0]/255,r1[1]=this.alpha*r1[1]/255,r1[2]=this.alpha*r1[2]/255,r1[3]=this.alpha,_g.uniform4fv(t1.uColor,r1)}};t$3(Wa$1,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),t$3(Wa$1,"type","BlendColor"),t$3(Wa$1,"uniformLocations",["uColor"]),tt$1.setClass(Wa$1);const Ya$2={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},Va$2=["type","image"];let Ha$2=class extends Ia$1{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Ya$2[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(_g){const t1=_g.context,r1=this.createTexture(_g.filterBackend,this.image);this.bindAdditionalTexture(t1,r1,t1.TEXTURE1),super.applyToWebGL(_g),this.unbindAdditionalTexture(t1,t1.TEXTURE1)}createTexture(_g,t1){return _g.getCachedTexture(t1.cacheKey,t1.getElement())}calculateMatrix(){const _g=this.image,{width:t1,height:r1}=_g.getElement();return[1/_g.scaleX,0,0,0,1/_g.scaleY,0,-_g.left/t1,-_g.top/r1,1]}applyTo2d(_g){let{imageData:{data:t1,width:r1,height:n1},filterBackend:{resources:i1}}=_g;const o1=this.image;i1.blendImage||(i1.blendImage=vt());const a1=i1.blendImage,u1=a1.getContext("2d");a1.width!==r1||a1.height!==n1?(a1.width=r1,a1.height=n1):u1.clearRect(0,0,r1,n1),u1.setTransform(o1.scaleX,0,0,o1.scaleY,o1.left,o1.top),u1.drawImage(o1.getElement(),0,0,r1,n1);const s1=u1.getImageData(0,0,r1,n1).data;for(let l1=0;l1<t1.length;l1+=4){const c1=t1[l1],d1=t1[l1+1],h1=t1[l1+2],f1=t1[l1+3],g1=s1[l1],v1=s1[l1+1],$1=s1[l1+2],y1=s1[l1+3];switch(this.mode){case"multiply":t1[l1]=c1*g1/255,t1[l1+1]=d1*v1/255,t1[l1+2]=h1*$1/255,t1[l1+3]=f1*y1/255;break;case"mask":t1[l1+3]=y1}}}sendUniformData(_g,t1){const r1=this.calculateMatrix();_g.uniform1i(t1.uImage,1),_g.uniformMatrix3fv(t1.uTransformMatrix,!1,r1)}toObject(){return s$1(s$1({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(_g,t1){let{type:r1,image:n1}=_g,i1=i$1(_g,Va$2);return ha$1.fromObject(n1,t1).then(o1=>new this(s$1(s$1({},i1),{},{image:o1})))}};t$3(Ha$2,"type","BlendImage"),t$3(Ha$2,"defaults",{mode:"multiply",alpha:1}),t$3(Ha$2,"uniformLocations",["uTransformMatrix","uImage"]),tt$1.setClass(Ha$2);let Ga$1=class extends Ia$1{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(_g){Ea$1(_g)?(this.aspectRatio=_g.sourceWidth/_g.sourceHeight,_g.passes++,this._setupFrameBuffer(_g),this.horizontal=!0,this.applyToWebGL(_g),this._swapTextures(_g),this._setupFrameBuffer(_g),this.horizontal=!1,this.applyToWebGL(_g),this._swapTextures(_g)):this.applyTo2d(_g)}applyTo2d(_g){_g.imageData=this.simpleBlur(_g)}simpleBlur(_g){let{ctx:t1,imageData:r1,filterBackend:{resources:n1}}=_g;const{width:i1,height:o1}=r1;n1.blurLayer1||(n1.blurLayer1=vt(),n1.blurLayer2=vt());const a1=n1.blurLayer1,u1=n1.blurLayer2;a1.width===i1&&a1.height===o1||(u1.width=a1.width=i1,u1.height=a1.height=o1);const s1=a1.getContext("2d"),l1=u1.getContext("2d"),c1=15,d1=.06*this.blur*.5;let h1,f1,g1,v1;for(s1.putImageData(r1,0,0),l1.clearRect(0,0,i1,o1),v1=-15;v1<=c1;v1++)h1=(Math.random()-.5)/4,f1=v1/c1,g1=d1*f1*i1+h1,l1.globalAlpha=1-Math.abs(f1),l1.drawImage(a1,g1,h1),s1.drawImage(u1,0,0),l1.globalAlpha=1,l1.clearRect(0,0,u1.width,u1.height);for(v1=-15;v1<=c1;v1++)h1=(Math.random()-.5)/4,f1=v1/c1,g1=d1*f1*o1+h1,l1.globalAlpha=1-Math.abs(f1),l1.drawImage(a1,h1,g1),s1.drawImage(u1,0,0),l1.globalAlpha=1,l1.clearRect(0,0,u1.width,u1.height);t1.drawImage(a1,0,0);const $1=t1.getImageData(0,0,a1.width,a1.height);return s1.globalAlpha=1,s1.clearRect(0,0,a1.width,a1.height),$1}sendUniformData(_g,t1){const r1=this.chooseRightDelta();_g.uniform2fv(t1.uDelta,r1)}isNeutralState(){return this.blur===0}chooseRightDelta(){let _g=1;const t1=[0,0];this.horizontal?this.aspectRatio>1&&(_g=1/this.aspectRatio):this.aspectRatio<1&&(_g=this.aspectRatio);const r1=_g*this.blur*.12;return this.horizontal?t1[0]=r1:t1[1]=r1,t1}};t$3(Ga$1,"type","Blur"),t$3(Ga$1,"defaults",{blur:0}),t$3(Ga$1,"uniformLocations",["uDelta"]),tt$1.setClass(Ga$1);let za$1=class extends Ia$1{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=Math.round(255*this.brightness);for(let n1=0;n1<t1.length;n1+=4)t1[n1]=t1[n1]+r1,t1[n1+1]=t1[n1+1]+r1,t1[n1+2]=t1[n1+2]+r1}isNeutralState(){return this.brightness===0}sendUniformData(_g,t1){_g.uniform1f(t1.uBrightness,this.brightness)}};t$3(za$1,"type","Brightness"),t$3(za$1,"defaults",{brightness:0}),t$3(za$1,"uniformLocations",["uBrightness"]),tt$1.setClass(za$1);class Na extends Ia$1{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(_g){const t1=_g.imageData.data,r1=this.matrix,n1=this.colorsOnly;for(let i1=0;i1<t1.length;i1+=4){const o1=t1[i1],a1=t1[i1+1],u1=t1[i1+2];if(n1)t1[i1]=o1*r1[0]+a1*r1[1]+u1*r1[2]+255*r1[4],t1[i1+1]=o1*r1[5]+a1*r1[6]+u1*r1[7]+255*r1[9],t1[i1+2]=o1*r1[10]+a1*r1[11]+u1*r1[12]+255*r1[14];else{const s1=t1[i1+3];t1[i1]=o1*r1[0]+a1*r1[1]+u1*r1[2]+s1*r1[3]+255*r1[4],t1[i1+1]=o1*r1[5]+a1*r1[6]+u1*r1[7]+s1*r1[8]+255*r1[9],t1[i1+2]=o1*r1[10]+a1*r1[11]+u1*r1[12]+s1*r1[13]+255*r1[14],t1[i1+3]=o1*r1[15]+a1*r1[16]+u1*r1[17]+s1*r1[18]+255*r1[19]}}}sendUniformData(_g,t1){const r1=this.matrix,n1=[r1[0],r1[1],r1[2],r1[3],r1[5],r1[6],r1[7],r1[8],r1[10],r1[11],r1[12],r1[13],r1[15],r1[16],r1[17],r1[18]],i1=[r1[4],r1[9],r1[14],r1[19]];_g.uniformMatrix4fv(t1.uColorMatrix,!1,n1),_g.uniform4fv(t1.uConstants,i1)}toObject(){return s$1(s$1({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ua$1(e1,_g){var t1;const r1=(t$3(t1=class extends Na{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",e1),t$3(t1,"defaults",{colorsOnly:!1,matrix:_g}),t1);return tt$1.setClass(r1,e1),r1}t$3(Na,"type","ColorMatrix"),t$3(Na,"defaults",{matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0}),t$3(Na,"uniformLocations",["uColorMatrix","uConstants"]),tt$1.setClass(Na);const qa$2=Ua$1("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),Ka$2=Ua$1("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),Ja$2=Ua$1("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),Za$2=Ua$1("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),Qa$2=Ua$1("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),$a$1=Ua$1("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),th$1=Ua$1("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);let eh$1=class extends Ia$1{constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(_g),this.subFilters=_g.subFilters||[]}applyTo(_g){Ea$1(_g)&&(_g.passes+=this.subFilters.length-1),this.subFilters.forEach(t1=>{t1.applyTo(_g)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(_g=>_g.toObject())}}isNeutralState(){return!this.subFilters.some(_g=>!_g.isNeutralState())}static fromObject(_g,t1){return Promise.all((_g.subFilters||[]).map(r1=>tt$1.getClass(r1.type).fromObject(r1,t1))).then(r1=>new this({subFilters:r1}))}};t$3(eh$1,"type","Composed"),tt$1.setClass(eh$1);let sh$1=class extends Ia$1{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=Math.floor(255*this.contrast),n1=259*(r1+255)/(255*(259-r1));for(let i1=0;i1<t1.length;i1+=4)t1[i1]=n1*(t1[i1]-128)+128,t1[i1+1]=n1*(t1[i1+1]-128)+128,t1[i1+2]=n1*(t1[i1+2]-128)+128}sendUniformData(_g,t1){_g.uniform1f(t1.uContrast,this.contrast)}};t$3(sh$1,"type","Contrast"),t$3(sh$1,"defaults",{contrast:0}),t$3(sh$1,"uniformLocations",["uContrast"]),tt$1.setClass(sh$1);const ih$1={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};let rh$1=class extends Ia$1{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return ih$1[this.getCacheKey()]}applyTo2d(_g){const t1=_g.imageData,r1=t1.data,n1=this.matrix,i1=Math.round(Math.sqrt(n1.length)),o1=Math.floor(i1/2),a1=t1.width,u1=t1.height,s1=_g.ctx.createImageData(a1,u1),l1=s1.data,c1=this.opaque?1:0;let d1,h1,f1,g1,v1,$1,y1,_1,E1,T1,P1,k1,N1;for(P1=0;P1<u1;P1++)for(T1=0;T1<a1;T1++){for(v1=4*(P1*a1+T1),d1=0,h1=0,f1=0,g1=0,N1=0;N1<i1;N1++)for(k1=0;k1<i1;k1++)y1=P1+N1-o1,$1=T1+k1-o1,y1<0||y1>=u1||$1<0||$1>=a1||(_1=4*(y1*a1+$1),E1=n1[N1*i1+k1],d1+=r1[_1]*E1,h1+=r1[_1+1]*E1,f1+=r1[_1+2]*E1,c1||(g1+=r1[_1+3]*E1));l1[v1]=d1,l1[v1+1]=h1,l1[v1+2]=f1,l1[v1+3]=c1?r1[v1+3]:g1}_g.imageData=s1}sendUniformData(_g,t1){_g.uniform1fv(t1.uMatrix,this.matrix)}toObject(){return s$1(s$1({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}};t$3(rh$1,"type","Convolute"),t$3(rh$1,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),t$3(rh$1,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),tt$1.setClass(rh$1);const nh$1="Gamma";let oh$1=class extends Ia$1{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(_g),this.gamma=_g.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=this.gamma,n1=1/r1[0],i1=1/r1[1],o1=1/r1[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a1=this.rgbValues;for(let u1=0;u1<256;u1++)a1.r[u1]=255*Math.pow(u1/255,n1),a1.g[u1]=255*Math.pow(u1/255,i1),a1.b[u1]=255*Math.pow(u1/255,o1);for(let u1=0;u1<t1.length;u1+=4)t1[u1]=a1.r[t1[u1]],t1[u1+1]=a1.g[t1[u1+1]],t1[u1+2]=a1.b[t1[u1+2]]}sendUniformData(_g,t1){_g.uniform3fv(t1.uGamma,this.gamma)}isNeutralState(){const{gamma:_g}=this;return _g[0]===1&&_g[1]===1&&_g[2]===1}toObject(){return{type:nh$1,gamma:this.gamma.concat()}}};t$3(oh$1,"type",nh$1),t$3(oh$1,"defaults",{gamma:[1,1,1]}),t$3(oh$1,"uniformLocations",["uGamma"]),tt$1.setClass(oh$1);const ah={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};let hh$1=class extends Ia$1{applyTo2d(_g){let{imageData:{data:t1}}=_g;for(let r1,n1=0;n1<t1.length;n1+=4){switch(this.mode){case"average":r1=(t1[n1]+t1[n1+1]+t1[n1+2])/3;break;case"lightness":r1=(Math.min(t1[n1],t1[n1+1],t1[n1+2])+Math.max(t1[n1],t1[n1+1],t1[n1+2]))/2;break;case"luminosity":r1=.21*t1[n1]+.72*t1[n1+1]+.07*t1[n1+2]}t1[n1]=r1,t1[n1+1]=r1,t1[n1+2]=r1}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return ah[this.mode]}sendUniformData(_g,t1){_g.uniform1i(t1.uMode,1)}isNeutralState(){return!1}};t$3(hh$1,"type","Grayscale"),t$3(hh$1,"defaults",{mode:"average"}),t$3(hh$1,"uniformLocations",["uMode"]),tt$1.setClass(hh$1);let ch$1=class extends Na{calculateMatrix(){const _g=this.rotation*Math.PI,t1=ot$1(_g),r1=at(_g),n1=1/3,i1=Math.sqrt(n1)*r1,o1=1-t1;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=t1+o1/3,this.matrix[1]=n1*o1-i1,this.matrix[2]=n1*o1+i1,this.matrix[5]=n1*o1+i1,this.matrix[6]=t1+n1*o1,this.matrix[7]=n1*o1-i1,this.matrix[10]=n1*o1-i1,this.matrix[11]=n1*o1+i1,this.matrix[12]=t1+n1*o1}isNeutralState(){return this.rotation===0}applyTo(_g){this.calculateMatrix(),super.applyTo(_g)}toObject(){return{type:this.type,rotation:this.rotation}}};t$3(ch$1,"type","HueRotation"),t$3(ch$1,"defaults",{rotation:0}),tt$1.setClass(ch$1);let lh$1=class extends Ia$1{applyTo2d(_g){let{imageData:{data:t1}}=_g;for(let r1=0;r1<t1.length;r1+=4)t1[r1]=255-t1[r1],t1[r1+1]=255-t1[r1+1],t1[r1+2]=255-t1[r1+2],this.alpha&&(t1[r1+3]=255-t1[r1+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(_g,t1){_g.uniform1i(t1.uInvert,Number(this.invert)),_g.uniform1i(t1.uAlpha,Number(this.alpha))}};t$3(lh$1,"type","Invert"),t$3(lh$1,"defaults",{alpha:!1,invert:!0}),t$3(lh$1,"uniformLocations",["uInvert","uAlpha"]),tt$1.setClass(lh$1);let uh$1=class extends Ia$1{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=this.noise;for(let n1=0;n1<t1.length;n1+=4){const i1=(.5-Math.random())*r1;t1[n1]+=i1,t1[n1+1]+=i1,t1[n1+2]+=i1}}sendUniformData(_g,t1){_g.uniform1f(t1.uNoise,this.noise/255),_g.uniform1f(t1.uSeed,Math.random())}isNeutralState(){return this.noise===0}};t$3(uh$1,"type","Noise"),t$3(uh$1,"defaults",{noise:0}),t$3(uh$1,"uniformLocations",["uNoise","uSeed"]),tt$1.setClass(uh$1);let dh$1=class extends Ia$1{applyTo2d(_g){let{imageData:{data:t1,width:r1,height:n1}}=_g;for(let i1=0;i1<n1;i1+=this.blocksize)for(let o1=0;o1<r1;o1+=this.blocksize){const a1=4*i1*r1+4*o1,u1=t1[a1],s1=t1[a1+1],l1=t1[a1+2],c1=t1[a1+3];for(let d1=i1;d1<Math.min(i1+this.blocksize,n1);d1++)for(let h1=o1;h1<Math.min(o1+this.blocksize,r1);h1++){const f1=4*d1*r1+4*h1;t1[f1]=u1,t1[f1+1]=s1,t1[f1+2]=l1,t1[f1+3]=c1}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepW;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(_g,t1){_g.uniform1f(t1.uBlocksize,this.blocksize)}};t$3(dh$1,"type","Pixelate"),t$3(dh$1,"defaults",{blocksize:4}),t$3(dh$1,"uniformLocations",["uBlocksize"]),tt$1.setClass(dh$1);let gh$1=class extends Ia$1{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=255*this.distance,n1=new qt(this.color).getSource(),i1=[n1[0]-r1,n1[1]-r1,n1[2]-r1],o1=[n1[0]+r1,n1[1]+r1,n1[2]+r1];for(let a1=0;a1<t1.length;a1+=4){const u1=t1[a1],s1=t1[a1+1],l1=t1[a1+2];u1>i1[0]&&s1>i1[1]&&l1>i1[2]&&u1<o1[0]&&s1<o1[1]&&l1<o1[2]&&(t1[a1+3]=0)}}sendUniformData(_g,t1){const r1=new qt(this.color).getSource(),n1=this.distance,i1=[0+r1[0]/255-n1,0+r1[1]/255-n1,0+r1[2]/255-n1,1],o1=[r1[0]/255+n1,r1[1]/255+n1,r1[2]/255+n1,1];_g.uniform4fv(t1.uLow,i1),_g.uniform4fv(t1.uHigh,o1)}};t$3(gh$1,"type","RemoveColor"),t$3(gh$1,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),t$3(gh$1,"uniformLocations",["uLow","uHigh"]),tt$1.setClass(gh$1);class fh extends Ia$1{sendUniformData(_g,t1){_g.uniform2fv(t1.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_g.uniform1fv(t1.uTaps,this.taps)}getFilterWindow(){const _g=this.tempScale;return Math.ceil(this.lanczosLobes/_g)}getCacheKey(){const _g=this.getFilterWindow();return"".concat(this.type,"_").concat(_g)}getFragmentSource(){const _g=this.getFilterWindow();return this.generateShader(_g)}getTaps(){const _g=this.lanczosCreate(this.lanczosLobes),t1=this.tempScale,r1=this.getFilterWindow(),n1=new Array(r1);for(let i1=1;i1<=r1;i1++)n1[i1-1]=_g(i1*t1);return n1}generateShader(_g){const t1=new Array(_g);for(let r1=1;r1<=_g;r1++)t1[r1-1]="".concat(r1,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(_g,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t1.map((r1,n1)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r1,") * uTaps[").concat(n1,"] + texture2D(uTexture, vTexCoord - ").concat(r1,") * uTaps[").concat(n1,`];
              sum += 2.0 * uTaps[`).concat(n1,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(_g){_g.passes++,this.width=_g.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_g.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_g.destinationWidth=this.dW,super.applyTo(_g),_g.sourceWidth=_g.destinationWidth,this.height=_g.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_g.destinationHeight=this.dH,super.applyTo(_g),_g.sourceHeight=_g.destinationHeight}applyTo(_g){Ea$1(_g)?this.applyToForWebgl(_g):this.applyTo2d(_g)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(_g){return t1=>{if(t1>=_g||t1<=-_g)return 0;if(t1<11920929e-14&&t1>-11920929e-14)return 1;const r1=(t1*=Math.PI)/_g;return Math.sin(t1)/t1*Math.sin(r1)/r1}}applyTo2d(_g){const t1=_g.imageData,r1=this.scaleX,n1=this.scaleY;this.rcpScaleX=1/r1,this.rcpScaleY=1/n1;const i1=t1.width,o1=t1.height,a1=Math.round(i1*r1),u1=Math.round(o1*n1);let s1;s1=this.resizeType==="sliceHack"?this.sliceByTwo(_g,i1,o1,a1,u1):this.resizeType==="hermite"?this.hermiteFastResize(_g,i1,o1,a1,u1):this.resizeType==="bilinear"?this.bilinearFiltering(_g,i1,o1,a1,u1):this.resizeType==="lanczos"?this.lanczosResize(_g,i1,o1,a1,u1):new ImageData(a1,u1),_g.imageData=s1}sliceByTwo(_g,t1,r1,n1,i1){const o1=_g.imageData,a1=.5;let u1=!1,s1=!1,l1=t1*a1,c1=r1*a1;const d1=_g.filterBackend.resources;let h1=0,f1=0;const g1=t1;let v1=0;d1.sliceByTwo||(d1.sliceByTwo=vt());const $1=d1.sliceByTwo;($1.width<1.5*t1||$1.height<r1)&&($1.width=1.5*t1,$1.height=r1);const y1=$1.getContext("2d");for(y1.clearRect(0,0,1.5*t1,r1),y1.putImageData(o1,0,0),n1=Math.floor(n1),i1=Math.floor(i1);!u1||!s1;)t1=l1,r1=c1,n1<Math.floor(l1*a1)?l1=Math.floor(l1*a1):(l1=n1,u1=!0),i1<Math.floor(c1*a1)?c1=Math.floor(c1*a1):(c1=i1,s1=!0),y1.drawImage($1,h1,f1,t1,r1,g1,v1,l1,c1),h1=g1,f1=v1,v1+=c1;return y1.getImageData(h1,f1,n1,i1)}lanczosResize(_g,t1,r1,n1,i1){const o1=_g.imageData.data,a1=_g.ctx.createImageData(n1,i1),u1=a1.data,s1=this.lanczosCreate(this.lanczosLobes),l1=this.rcpScaleX,c1=this.rcpScaleY,d1=2/this.rcpScaleX,h1=2/this.rcpScaleY,f1=Math.ceil(l1*this.lanczosLobes/2),g1=Math.ceil(c1*this.lanczosLobes/2),v1={},$1={x:0,y:0},y1={x:0,y:0};return function _1(E1){let T1,P1,k1,N1,W1,H1,ty,ey,ly,oy,Q1;for($1.x=(E1+.5)*l1,y1.x=Math.floor($1.x),T1=0;T1<i1;T1++){for($1.y=(T1+.5)*c1,y1.y=Math.floor($1.y),W1=0,H1=0,ty=0,ey=0,ly=0,P1=y1.x-f1;P1<=y1.x+f1;P1++)if(!(P1<0||P1>=t1)){oy=Math.floor(1e3*Math.abs(P1-$1.x)),v1[oy]||(v1[oy]={});for(let U1=y1.y-g1;U1<=y1.y+g1;U1++)U1<0||U1>=r1||(Q1=Math.floor(1e3*Math.abs(U1-$1.y)),v1[oy][Q1]||(v1[oy][Q1]=s1(Math.sqrt(Math.pow(oy*d1,2)+Math.pow(Q1*h1,2))/1e3)),k1=v1[oy][Q1],k1>0&&(N1=4*(U1*t1+P1),W1+=k1,H1+=k1*o1[N1],ty+=k1*o1[N1+1],ey+=k1*o1[N1+2],ly+=k1*o1[N1+3]))}N1=4*(T1*n1+E1),u1[N1]=H1/W1,u1[N1+1]=ty/W1,u1[N1+2]=ey/W1,u1[N1+3]=ly/W1}return++E1<n1?_1(E1):a1}(0)}bilinearFiltering(_g,t1,r1,n1,i1){let o1,a1,u1,s1,l1,c1,d1,h1,f1,g1,v1,$1,y1,_1=0;const E1=this.rcpScaleX,T1=this.rcpScaleY,P1=4*(t1-1),k1=_g.imageData.data,N1=_g.ctx.createImageData(n1,i1),W1=N1.data;for(d1=0;d1<i1;d1++)for(h1=0;h1<n1;h1++)for(l1=Math.floor(E1*h1),c1=Math.floor(T1*d1),f1=E1*h1-l1,g1=T1*d1-c1,y1=4*(c1*t1+l1),v1=0;v1<4;v1++)o1=k1[y1+v1],a1=k1[y1+4+v1],u1=k1[y1+P1+v1],s1=k1[y1+P1+4+v1],$1=o1*(1-f1)*(1-g1)+a1*f1*(1-g1)+u1*g1*(1-f1)+s1*f1*g1,W1[_1++]=$1;return N1}hermiteFastResize(_g,t1,r1,n1,i1){const o1=this.rcpScaleX,a1=this.rcpScaleY,u1=Math.ceil(o1/2),s1=Math.ceil(a1/2),l1=_g.imageData.data,c1=_g.ctx.createImageData(n1,i1),d1=c1.data;for(let h1=0;h1<i1;h1++)for(let f1=0;f1<n1;f1++){const g1=4*(f1+h1*n1);let v1=0,$1=0,y1=0,_1=0,E1=0,T1=0,P1=0;const k1=(h1+.5)*a1;for(let N1=Math.floor(h1*a1);N1<(h1+1)*a1;N1++){const W1=Math.abs(k1-(N1+.5))/s1,H1=(f1+.5)*o1,ty=W1*W1;for(let ey=Math.floor(f1*o1);ey<(f1+1)*o1;ey++){let ly=Math.abs(H1-(ey+.5))/u1;const oy=Math.sqrt(ty+ly*ly);oy>1&&oy<-1||(v1=2*oy*oy*oy-3*oy*oy+1,v1>0&&(ly=4*(ey+N1*t1),P1+=v1*l1[ly+3],y1+=v1,l1[ly+3]<255&&(v1=v1*l1[ly+3]/250),_1+=v1*l1[ly],E1+=v1*l1[ly+1],T1+=v1*l1[ly+2],$1+=v1))}}d1[g1]=_1/$1,d1[g1+1]=E1/$1,d1[g1+2]=T1/$1,d1[g1+3]=P1/y1}return c1}}t$3(fh,"type","Resize"),t$3(fh,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),t$3(fh,"uniformLocations",["uDelta","uTaps"]),tt$1.setClass(fh);let ph$1=class extends Ia$1{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=-this.saturation;for(let n1=0;n1<t1.length;n1+=4){const i1=Math.max(t1[n1],t1[n1+1],t1[n1+2]);t1[n1]+=i1!==t1[n1]?(i1-t1[n1])*r1:0,t1[n1+1]+=i1!==t1[n1+1]?(i1-t1[n1+1])*r1:0,t1[n1+2]+=i1!==t1[n1+2]?(i1-t1[n1+2])*r1:0}}sendUniformData(_g,t1){_g.uniform1f(t1.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}};t$3(ph$1,"type","Saturation"),t$3(ph$1,"defaults",{saturation:0}),t$3(ph$1,"uniformLocations",["uSaturation"]),tt$1.setClass(ph$1);let mh$1=class extends Ia$1{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(_g){let{imageData:{data:t1}}=_g;const r1=-this.vibrance;for(let n1=0;n1<t1.length;n1+=4){const i1=Math.max(t1[n1],t1[n1+1],t1[n1+2]),o1=(t1[n1]+t1[n1+1]+t1[n1+2])/3,a1=2*Math.abs(i1-o1)/255*r1;t1[n1]+=i1!==t1[n1]?(i1-t1[n1])*a1:0,t1[n1+1]+=i1!==t1[n1+1]?(i1-t1[n1+1])*a1:0,t1[n1+2]+=i1!==t1[n1+2]?(i1-t1[n1+2])*a1:0}}sendUniformData(_g,t1){_g.uniform1f(t1.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}};t$3(mh$1,"type","Vibrance"),t$3(mh$1,"defaults",{vibrance:0}),t$3(mh$1,"uniformLocations",["uVibrance"]),tt$1.setClass(mh$1);var vh$1=Object.freeze({__proto__:null,BaseFilter:Ia$1,BlackWhite:th$1,BlendColor:Wa$1,BlendImage:Ha$2,Blur:Ga$1,Brightness:za$1,Brownie:qa$2,ColorMatrix:Na,Composed:eh$1,Contrast:sh$1,Convolute:rh$1,Gamma:oh$1,Grayscale:hh$1,HueRotation:ch$1,Invert:lh$1,Kodachrome:Ja$2,Noise:uh$1,Pixelate:dh$1,Polaroid:Qa$2,RemoveColor:gh$1,Resize:fh,Saturation:ph$1,Sepia:$a$1,Technicolor:Za$2,Vibrance:mh$1,Vintage:Ka$2});const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_VALUE,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=e1=>{if(toastTimeouts.has(e1))return;const _g=setTimeout(()=>{toastTimeouts.delete(e1),dispatch({type:"REMOVE_TOAST",toastId:e1})},TOAST_REMOVE_DELAY);toastTimeouts.set(e1,_g)},reducer=(e1,_g)=>{switch(_g.type){case"ADD_TOAST":return{...e1,toasts:[_g.toast,...e1.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...e1,toasts:e1.toasts.map(t1=>t1.id===_g.toast.id?{...t1,..._g.toast}:t1)};case"DISMISS_TOAST":{const{toastId:t1}=_g;return t1?addToRemoveQueue(t1):e1.toasts.forEach(r1=>{addToRemoveQueue(r1.id)}),{...e1,toasts:e1.toasts.map(r1=>r1.id===t1||t1===void 0?{...r1,open:!1}:r1)}}case"REMOVE_TOAST":return _g.toastId===void 0?{...e1,toasts:[]}:{...e1,toasts:e1.toasts.filter(t1=>t1.id!==_g.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(e1){memoryState=reducer(memoryState,e1),listeners.forEach(_g=>{_g(memoryState)})}function toast({...e1}){const _g=genId(),t1=n1=>dispatch({type:"UPDATE_TOAST",toast:{...n1,id:_g}}),r1=()=>dispatch({type:"DISMISS_TOAST",toastId:_g});return dispatch({type:"ADD_TOAST",toast:{...e1,id:_g,open:!0,onOpenChange:n1=>{n1||r1()}}}),{id:_g,dismiss:r1,update:t1}}function useToast(){const[e1,_g]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(_g),()=>{const t1=listeners.indexOf(_g);t1>-1&&listeners.splice(t1,1)}),[e1]),{...e1,toast,dismiss:t1=>dispatch({type:"DISMISS_TOAST",toastId:t1})}}function cn$1(...e1){return twMerge(clsx(e1))}function dataURItoBlob(e1){const _g=e1.split(",")[0].split(":")[1].split(";")[0],t1=atob(e1.split(",")[1]),r1=[];for(let n1=0;n1<t1.length;n1+=1)r1.push(t1.charCodeAt(n1));return new Blob([new Uint8Array(r1)],{type:_g})}async function urlToDataURI(e1){const t1=await(await fetch(e1,{method:"GET",mode:"cors",cache:"no-cache",headers:{Origin:window.location.origin}})).blob();return new Promise((r1,n1)=>{const i1=new FileReader;i1.onloadend=()=>{r1(i1.result)},i1.onerror=n1,i1.readAsDataURL(t1)})}function loadImage(e1,_g){return new Promise((t1,r1)=>{const n1=e1.src,i1=e1;i1.onload=t1,i1.onerror=o1=>{i1.src=n1,r1(o1)},i1.src=_g})}async function blobToImage(e1){const _g=URL.createObjectURL(e1),t1=new Image;return await loadImage(t1,_g),t1}function canvasToImage(e1){return new Promise((_g,t1)=>{const r1=new Image;r1.addEventListener("load",()=>{_g(r1)}),r1.addEventListener("error",n1=>{t1(n1)}),r1.src=e1.toDataURL()})}function srcToFile(e1,_g,t1){return fetch(e1).then(function(r1){return r1.arrayBuffer()}).then(function(r1){return new File([r1],_g,{type:t1})})}function randomNumberInRange(e1,_g){return Math.floor(Math.random()*(_g-e1+1))+e1}function base64ToBlob(e1){const _g=atob(e1),t1=new Array(_g.length);for(let i1=0;i1<_g.length;i1++)t1[i1]=_g.charCodeAt(i1);const r1=new Uint8Array(t1);return new Blob([r1],{type:"image/png"})}function isMidClick(e1){return e1.e.button===1}function drawLines(e1,_g,t1=BRUSH_COLOR){e1.strokeStyle=t1,e1.lineCap="round",e1.lineJoin="round",_g.forEach(r1=>{!(r1!=null&&r1.pts.length)||!r1.size||(e1.lineWidth=r1.size,e1.beginPath(),e1.moveTo(r1.pts[0].x,r1.pts[0].y),r1.pts.forEach(n1=>e1.lineTo(n1.x,n1.y)),e1.stroke())})}const generateMask=(e1,_g,t1,r1=[],n1="white")=>{const i1=document.createElement("canvas");i1.width=e1,i1.height=_g;const o1=i1.getContext("2d");if(!o1)throw new Error("could not retrieve mask canvas");return r1.forEach(a1=>{o1.drawImage(a1,0,0,e1,_g)}),t1.forEach(a1=>{drawLines(o1,a1,n1)}),i1},generateFromCanvas=async(e1,_g,t1,r1)=>new Promise(async(n1,i1)=>{try{const o1=predefinedRatios.find(W1=>W1.name===_g);if(!o1){console.error("Invalid aspect ratio"),i1(new Error("Invalid aspect ratio"));return}const{width:a1,height:u1}=o1,s1=new An(null),l1=new An(null,{width:a1,height:u1}),c1=new An(null,{width:a1,height:u1}),d1=new An(null,{width:a1,height:u1,backgroundColor:"#000"}),h1=JSON.parse(e1.data);console.log(h1);const f1=(t1-a1)/2,g1=(r1-u1)/2;s1.setWidth(a1),s1.setHeight(u1);let v1,$1,y1;await s1.loadFromJSON(h1);const _1=s1.getObjects();let E1,T1;for(const W1 of _1)E1=await W1.clone(),T1=await W1.clone(),console.log(E1),E1.set({left:E1.left-f1,top:E1.top-g1,scaleX:E1.scaleX,scaleY:E1.scaleY}),T1.set({left:T1.left-f1,top:T1.top-g1,scaleX:T1.scaleX,scaleY:T1.scaleY}),W1.type==="path"&&l1.add(E1),W1.type==="image"&&(c1.add(E1),W1.img_view==="fixed"&&d1.add(T1));l1.renderAll(),$1=l1.toDataURL({format:"png",quality:1,multiplier:1}),c1.renderAll(),v1=c1.toDataURL({format:"png",quality:1,multiplier:1}),d1.renderAll(),y1=d1.toDataURL({format:"png",quality:1,multiplier:1}),n1({targetMask:$1,targetFile:v1,staticElements:y1})}catch(o1){toast({variant:"destructive",title:"Uh oh! Something went wrong.",description:"Check your drawing canvas"}),console.error("Error loading canvas JSON or cloning objects:",o1),i1(o1)}}),convertToBase64=e1=>new Promise((_g,t1)=>{const r1=new FileReader;r1.onload=n1=>{var o1;const i1=(o1=n1.target)==null?void 0:o1.result;_g(i1)},r1.onerror=n1=>{t1(n1)},r1.readAsDataURL(e1)}),getLogLevelPriority=e1=>{switch(e1){case LOG_LEVELS.DEBUG:return 0;case LOG_LEVELS.INFO:return 1;case LOG_LEVELS.ERROR:return 2;default:return 0}},currentLogLevel="info",currentLogLevelPriority=getLogLevelPriority(currentLogLevel),getCallerInfo=()=>{const t1=new Error().stack.split(`
`)[3].trim(),r1=t1.match(/\((.*):(\d+):(\d+)\)/);if(r1)return`${r1[1]}:${r1[2]}`;{const n1=t1.match(/at\s+(.*):(\d+):(\d+)/);if(n1)return`${n1[1]}:${n1[2]}`}return"unknown"},debugLog=(e1,..._g)=>{if(getLogLevelPriority(e1)>=currentLogLevelPriority){const r1=getCallerInfo();console.log(`[${e1.toUpperCase()}] [${r1}] 
`,..._g)}},ToastProvider=Provider$1,ToastViewport=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Viewport$2,{ref:t1,className:cn$1("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e1),tabIndex:-1,..._g}));ToastViewport.displayName=Viewport$2.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:e1,variant:_g,...t1},r1)=>jsxRuntimeExports.jsx(Root2$5,{ref:r1,className:cn$1(toastVariants({variant:_g}),e1),tabIndex:-1,...t1}));Toast.displayName=Root2$5.displayName;const ToastAction=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Action$1,{ref:t1,className:cn$1("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e1),tabIndex:-1,..._g}));ToastAction.displayName=Action$1.displayName;const ToastClose=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Close$1,{ref:t1,className:cn$1("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e1),"toast-close":"",tabIndex:-1,..._g,children:jsxRuntimeExports.jsx(Cross2Icon,{className:"h-4 w-4"})}));ToastClose.displayName=Close$1.displayName;const ToastTitle=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Title$1,{ref:t1,className:cn$1("text-sm font-semibold [&+div]:text-xs",e1),tabIndex:-1,..._g}));ToastTitle.displayName=Title$1.displayName;const ToastDescription=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Description$1,{ref:t1,className:cn$1("text-sm opacity-90",e1),..._g,tabIndex:-1}));ToastDescription.displayName=Description$1.displayName;function Toaster(){const{toasts:e1}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[e1.map(function({id:_g,title:t1,description:r1,action:n1,...i1}){return jsxRuntimeExports.jsxs(Toast,{...i1,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[t1&&jsxRuntimeExports.jsx(ToastTitle,{children:t1}),r1&&jsxRuntimeExports.jsx(ToastDescription,{children:r1})]}),n1,jsxRuntimeExports.jsx(ToastClose,{})]},_g)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e1=>e1.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...e1)=>e1.filter((_g,t1,r1)=>!!_g&&r1.indexOf(_g)===t1).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:e1="currentColor",size:_g=24,strokeWidth:t1=2,absoluteStrokeWidth:r1,className:n1="",children:i1,iconNode:o1,...a1},u1)=>reactExports.createElement("svg",{ref:u1,...defaultAttributes,width:_g,height:_g,stroke:e1,strokeWidth:r1?Number(t1)*24/Number(_g):t1,className:mergeClasses("lucide",n1),...a1},[...o1.map(([s1,l1])=>reactExports.createElement(s1,l1)),...Array.isArray(i1)?i1:[i1]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(e1,_g)=>{const t1=reactExports.forwardRef(({className:r1,...n1},i1)=>reactExports.createElement(Icon$1,{ref:i1,iconNode:_g,className:mergeClasses(`lucide-${toKebabCase(e1)}`,r1),...n1}));return t1.displayName=`${e1}`,t1};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronsUpDown=createLucideIcon("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Copy=createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eraser=createLucideIcon("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Expand=createLucideIcon("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$1=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Images=createLucideIcon("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Keyboard=createLucideIcon("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Layers=createLucideIcon("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Paintbrush=createLucideIcon("Paintbrush",[["path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z",key:"m6k5sh"}],["path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7",key:"arzq70"}],["path",{d:"M14.5 17.5 4.5 15",key:"s7fvrz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Paperclip=createLucideIcon("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RectangleHorizontal=createLucideIcon("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RectangleVertical=createLucideIcon("RectangleVertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Redo=createLucideIcon("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Scissors=createLucideIcon("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Square=createLucideIcon("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Undo=createLucideIcon("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WandSparkles=createLucideIcon("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var define_import_meta_env_default$1={VITE_BACKEND:"https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",VITE_RUNPOD:"J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",VITE_BACKEND_RENDER_IMAGE:"https://api.runpod.ai/v2/robzzhxhypgvc0/runsync",VITE_DEBUG:"true",VITE_LOG_LEVEL:"info",BASE_URL:"/images-project",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function createJSONStorage(e1,_g){let t1;try{t1=e1()}catch{return}return{getItem:n1=>{var i1;const o1=u1=>u1===null?null:JSON.parse(u1,void 0),a1=(i1=t1.getItem(n1))!=null?i1:null;return a1 instanceof Promise?a1.then(o1):o1(a1)},setItem:(n1,i1)=>t1.setItem(n1,JSON.stringify(i1,void 0)),removeItem:n1=>t1.removeItem(n1)}}const toThenable=e1=>_g=>{try{const t1=e1(_g);return t1 instanceof Promise?t1:{then(r1){return toThenable(r1)(t1)},catch(r1){return this}}}catch(t1){return{then(r1){return this},catch(r1){return toThenable(r1)(t1)}}}},oldImpl=(e1,_g)=>(t1,r1,n1)=>{let i1={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v1=>v1,version:0,merge:(v1,$1)=>({...$1,...v1}),..._g},o1=!1;const a1=new Set,u1=new Set;let s1;try{s1=i1.getStorage()}catch{}if(!s1)return e1((...v1)=>{console.warn(`[zustand persist middleware] Unable to update item '${i1.name}', the given storage is currently unavailable.`),t1(...v1)},r1,n1);const l1=toThenable(i1.serialize),c1=()=>{const v1=i1.partialize({...r1()});let $1;const y1=l1({state:v1,version:i1.version}).then(_1=>s1.setItem(i1.name,_1)).catch(_1=>{$1=_1});if($1)throw $1;return y1},d1=n1.setState;n1.setState=(v1,$1)=>{d1(v1,$1),c1()};const h1=e1((...v1)=>{t1(...v1),c1()},r1,n1);let f1;const g1=()=>{var v1;if(!s1)return;o1=!1,a1.forEach(y1=>y1(r1()));const $1=((v1=i1.onRehydrateStorage)==null?void 0:v1.call(i1,r1()))||void 0;return toThenable(s1.getItem.bind(s1))(i1.name).then(y1=>{if(y1)return i1.deserialize(y1)}).then(y1=>{if(y1)if(typeof y1.version=="number"&&y1.version!==i1.version){if(i1.migrate)return i1.migrate(y1.state,y1.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y1.state}).then(y1=>{var _1;return f1=i1.merge(y1,(_1=r1())!=null?_1:h1),t1(f1,!0),c1()}).then(()=>{$1==null||$1(f1,void 0),o1=!0,u1.forEach(y1=>y1(f1))}).catch(y1=>{$1==null||$1(void 0,y1)})};return n1.persist={setOptions:v1=>{i1={...i1,...v1},v1.getStorage&&(s1=v1.getStorage())},clearStorage:()=>{s1==null||s1.removeItem(i1.name)},getOptions:()=>i1,rehydrate:()=>g1(),hasHydrated:()=>o1,onHydrate:v1=>(a1.add(v1),()=>{a1.delete(v1)}),onFinishHydration:v1=>(u1.add(v1),()=>{u1.delete(v1)})},g1(),f1||h1},newImpl=(e1,_g)=>(t1,r1,n1)=>{let i1={storage:createJSONStorage(()=>localStorage),partialize:g1=>g1,version:0,merge:(g1,v1)=>({...v1,...g1}),..._g},o1=!1;const a1=new Set,u1=new Set;let s1=i1.storage;if(!s1)return e1((...g1)=>{console.warn(`[zustand persist middleware] Unable to update item '${i1.name}', the given storage is currently unavailable.`),t1(...g1)},r1,n1);const l1=()=>{const g1=i1.partialize({...r1()});return s1.setItem(i1.name,{state:g1,version:i1.version})},c1=n1.setState;n1.setState=(g1,v1)=>{c1(g1,v1),l1()};const d1=e1((...g1)=>{t1(...g1),l1()},r1,n1);n1.getInitialState=()=>d1;let h1;const f1=()=>{var g1,v1;if(!s1)return;o1=!1,a1.forEach(y1=>{var _1;return y1((_1=r1())!=null?_1:d1)});const $1=((v1=i1.onRehydrateStorage)==null?void 0:v1.call(i1,(g1=r1())!=null?g1:d1))||void 0;return toThenable(s1.getItem.bind(s1))(i1.name).then(y1=>{if(y1)if(typeof y1.version=="number"&&y1.version!==i1.version){if(i1.migrate)return i1.migrate(y1.state,y1.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y1.state}).then(y1=>{var _1;return h1=i1.merge(y1,(_1=r1())!=null?_1:d1),t1(h1,!0),l1()}).then(()=>{$1==null||$1(h1,void 0),h1=r1(),o1=!0,u1.forEach(y1=>y1(h1))}).catch(y1=>{$1==null||$1(void 0,y1)})};return n1.persist={setOptions:g1=>{i1={...i1,...g1},g1.storage&&(s1=g1.storage)},clearStorage:()=>{s1==null||s1.removeItem(i1.name)},getOptions:()=>i1,rehydrate:()=>f1(),hasHydrated:()=>o1,onHydrate:g1=>(a1.add(g1),()=>{a1.delete(g1)}),onFinishHydration:g1=>(u1.add(g1),()=>{u1.delete(g1)})},i1.skipHydration||f1(),h1||d1},persistImpl=(e1,_g)=>"getStorage"in _g||"serialize"in _g||"deserialize"in _g?((define_import_meta_env_default$1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(e1,_g)):newImpl(e1,_g),persist=persistImpl;function shallow$1(e1,_g){if(Object.is(e1,_g))return!0;if(typeof e1!="object"||e1===null||typeof _g!="object"||_g===null)return!1;if(e1 instanceof Map&&_g instanceof Map){if(e1.size!==_g.size)return!1;for(const[r1,n1]of e1)if(!Object.is(n1,_g.get(r1)))return!1;return!0}if(e1 instanceof Set&&_g instanceof Set){if(e1.size!==_g.size)return!1;for(const r1 of e1)if(!_g.has(r1))return!1;return!0}const t1=Object.keys(e1);if(t1.length!==Object.keys(_g).length)return!1;for(const r1 of t1)if(!Object.prototype.hasOwnProperty.call(_g,r1)||!Object.is(e1[r1],_g[r1]))return!1;return!0}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(e1,..._g){throw new Error(`[Immer] minified error nr: ${e1}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft(e1){return!!e1&&!!e1[DRAFT_STATE]}function isDraftable(e1){var _g;return e1?isPlainObject$2(e1)||Array.isArray(e1)||!!e1[DRAFTABLE]||!!((_g=e1.constructor)!=null&&_g[DRAFTABLE])||isMap(e1)||isSet(e1):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject$2(e1){if(!e1||typeof e1!="object")return!1;const _g=getPrototypeOf$1(e1);if(_g===null)return!0;const t1=Object.hasOwnProperty.call(_g,"constructor")&&_g.constructor;return t1===Object?!0:typeof t1=="function"&&Function.toString.call(t1)===objectCtorString}function each(e1,_g){getArchtype(e1)===0?Reflect.ownKeys(e1).forEach(t1=>{_g(t1,e1[t1],e1)}):e1.forEach((t1,r1)=>_g(r1,t1,e1))}function getArchtype(e1){const _g=e1[DRAFT_STATE];return _g?_g.type_:Array.isArray(e1)?1:isMap(e1)?2:isSet(e1)?3:0}function has(e1,_g){return getArchtype(e1)===2?e1.has(_g):Object.prototype.hasOwnProperty.call(e1,_g)}function set$1(e1,_g,t1){const r1=getArchtype(e1);r1===2?e1.set(_g,t1):r1===3?e1.add(t1):e1[_g]=t1}function is$2(e1,_g){return e1===_g?e1!==0||1/e1===1/_g:e1!==e1&&_g!==_g}function isMap(e1){return e1 instanceof Map}function isSet(e1){return e1 instanceof Set}function latest(e1){return e1.copy_||e1.base_}function shallowCopy(e1,_g){if(isMap(e1))return new Map(e1);if(isSet(e1))return new Set(e1);if(Array.isArray(e1))return Array.prototype.slice.call(e1);const t1=isPlainObject$2(e1);if(_g===!0||_g==="class_only"&&!t1){const r1=Object.getOwnPropertyDescriptors(e1);delete r1[DRAFT_STATE];let n1=Reflect.ownKeys(r1);for(let i1=0;i1<n1.length;i1++){const o1=n1[i1],a1=r1[o1];a1.writable===!1&&(a1.writable=!0,a1.configurable=!0),(a1.get||a1.set)&&(r1[o1]={configurable:!0,writable:!0,enumerable:a1.enumerable,value:e1[o1]})}return Object.create(getPrototypeOf$1(e1),r1)}else{const r1=getPrototypeOf$1(e1);if(r1!==null&&t1)return{...e1};const n1=Object.create(r1);return Object.assign(n1,e1)}}function freeze(e1,_g=!1){return isFrozen(e1)||isDraft(e1)||!isDraftable(e1)||(getArchtype(e1)>1&&(e1.set=e1.add=e1.clear=e1.delete=dontMutateFrozenCollections),Object.freeze(e1),_g&&Object.entries(e1).forEach(([t1,r1])=>freeze(r1,!0))),e1}function dontMutateFrozenCollections(){die(2)}function isFrozen(e1){return Object.isFrozen(e1)}var plugins={};function getPlugin(e1){const _g=plugins[e1];return _g||die(0,e1),_g}var currentScope;function getCurrentScope(){return currentScope}function createScope(e1,_g){return{drafts_:[],parent_:e1,immer_:_g,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e1,_g){_g&&(getPlugin("Patches"),e1.patches_=[],e1.inversePatches_=[],e1.patchListener_=_g)}function revokeScope(e1){leaveScope(e1),e1.drafts_.forEach(revokeDraft),e1.drafts_=null}function leaveScope(e1){e1===currentScope&&(currentScope=e1.parent_)}function enterScope(e1){return currentScope=createScope(currentScope,e1)}function revokeDraft(e1){const _g=e1[DRAFT_STATE];_g.type_===0||_g.type_===1?_g.revoke_():_g.revoked_=!0}function processResult(e1,_g){_g.unfinalizedDrafts_=_g.drafts_.length;const t1=_g.drafts_[0];return e1!==void 0&&e1!==t1?(t1[DRAFT_STATE].modified_&&(revokeScope(_g),die(4)),isDraftable(e1)&&(e1=finalize(_g,e1),_g.parent_||maybeFreeze(_g,e1)),_g.patches_&&getPlugin("Patches").generateReplacementPatches_(t1[DRAFT_STATE].base_,e1,_g.patches_,_g.inversePatches_)):e1=finalize(_g,t1,[]),revokeScope(_g),_g.patches_&&_g.patchListener_(_g.patches_,_g.inversePatches_),e1!==NOTHING?e1:void 0}function finalize(e1,_g,t1){if(isFrozen(_g))return _g;const r1=_g[DRAFT_STATE];if(!r1)return each(_g,(n1,i1)=>finalizeProperty(e1,r1,_g,n1,i1,t1)),_g;if(r1.scope_!==e1)return _g;if(!r1.modified_)return maybeFreeze(e1,r1.base_,!0),r1.base_;if(!r1.finalized_){r1.finalized_=!0,r1.scope_.unfinalizedDrafts_--;const n1=r1.copy_;let i1=n1,o1=!1;r1.type_===3&&(i1=new Set(n1),n1.clear(),o1=!0),each(i1,(a1,u1)=>finalizeProperty(e1,r1,n1,a1,u1,t1,o1)),maybeFreeze(e1,n1,!1),t1&&e1.patches_&&getPlugin("Patches").generatePatches_(r1,t1,e1.patches_,e1.inversePatches_)}return r1.copy_}function finalizeProperty(e1,_g,t1,r1,n1,i1,o1){if(isDraft(n1)){const a1=i1&&_g&&_g.type_!==3&&!has(_g.assigned_,r1)?i1.concat(r1):void 0,u1=finalize(e1,n1,a1);if(set$1(t1,r1,u1),isDraft(u1))e1.canAutoFreeze_=!1;else return}else o1&&t1.add(n1);if(isDraftable(n1)&&!isFrozen(n1)){if(!e1.immer_.autoFreeze_&&e1.unfinalizedDrafts_<1)return;finalize(e1,n1),(!_g||!_g.scope_.parent_)&&typeof r1!="symbol"&&Object.prototype.propertyIsEnumerable.call(t1,r1)&&maybeFreeze(e1,n1)}}function maybeFreeze(e1,_g,t1=!1){!e1.parent_&&e1.immer_.autoFreeze_&&e1.canAutoFreeze_&&freeze(_g,t1)}function createProxyProxy(e1,_g){const t1=Array.isArray(e1),r1={type_:t1?1:0,scope_:_g?_g.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:_g,base_:e1,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n1=r1,i1=objectTraps;t1&&(n1=[r1],i1=arrayTraps);const{revoke:o1,proxy:a1}=Proxy.revocable(n1,i1);return r1.draft_=a1,r1.revoke_=o1,a1}var objectTraps={get(e1,_g){if(_g===DRAFT_STATE)return e1;const t1=latest(e1);if(!has(t1,_g))return readPropFromProto(e1,t1,_g);const r1=t1[_g];return e1.finalized_||!isDraftable(r1)?r1:r1===peek(e1.base_,_g)?(prepareCopy(e1),e1.copy_[_g]=createProxy(r1,e1)):r1},has(e1,_g){return _g in latest(e1)},ownKeys(e1){return Reflect.ownKeys(latest(e1))},set(e1,_g,t1){const r1=getDescriptorFromProto(latest(e1),_g);if(r1!=null&&r1.set)return r1.set.call(e1.draft_,t1),!0;if(!e1.modified_){const n1=peek(latest(e1),_g),i1=n1==null?void 0:n1[DRAFT_STATE];if(i1&&i1.base_===t1)return e1.copy_[_g]=t1,e1.assigned_[_g]=!1,!0;if(is$2(t1,n1)&&(t1!==void 0||has(e1.base_,_g)))return!0;prepareCopy(e1),markChanged(e1)}return e1.copy_[_g]===t1&&(t1!==void 0||_g in e1.copy_)||Number.isNaN(t1)&&Number.isNaN(e1.copy_[_g])||(e1.copy_[_g]=t1,e1.assigned_[_g]=!0),!0},deleteProperty(e1,_g){return peek(e1.base_,_g)!==void 0||_g in e1.base_?(e1.assigned_[_g]=!1,prepareCopy(e1),markChanged(e1)):delete e1.assigned_[_g],e1.copy_&&delete e1.copy_[_g],!0},getOwnPropertyDescriptor(e1,_g){const t1=latest(e1),r1=Reflect.getOwnPropertyDescriptor(t1,_g);return r1&&{writable:!0,configurable:e1.type_!==1||_g!=="length",enumerable:r1.enumerable,value:t1[_g]}},defineProperty(){die(11)},getPrototypeOf(e1){return getPrototypeOf$1(e1.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(e1,_g)=>{arrayTraps[e1]=function(){return arguments[0]=arguments[0][0],_g.apply(this,arguments)}});arrayTraps.deleteProperty=function(e1,_g){return arrayTraps.set.call(this,e1,_g,void 0)};arrayTraps.set=function(e1,_g,t1){return objectTraps.set.call(this,e1[0],_g,t1,e1[0])};function peek(e1,_g){const t1=e1[DRAFT_STATE];return(t1?latest(t1):e1)[_g]}function readPropFromProto(e1,_g,t1){var n1;const r1=getDescriptorFromProto(_g,t1);return r1?"value"in r1?r1.value:(n1=r1.get)==null?void 0:n1.call(e1.draft_):void 0}function getDescriptorFromProto(e1,_g){if(!(_g in e1))return;let t1=getPrototypeOf$1(e1);for(;t1;){const r1=Object.getOwnPropertyDescriptor(t1,_g);if(r1)return r1;t1=getPrototypeOf$1(t1)}}function markChanged(e1){e1.modified_||(e1.modified_=!0,e1.parent_&&markChanged(e1.parent_))}function prepareCopy(e1){e1.copy_||(e1.copy_=shallowCopy(e1.base_,e1.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(e1){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(_g,t1,r1)=>{if(typeof _g=="function"&&typeof t1!="function"){const i1=t1;t1=_g;const o1=this;return function(u1=i1,...s1){return o1.produce(u1,l1=>t1.call(this,l1,...s1))}}typeof t1!="function"&&die(6),r1!==void 0&&typeof r1!="function"&&die(7);let n1;if(isDraftable(_g)){const i1=enterScope(this),o1=createProxy(_g,void 0);let a1=!0;try{n1=t1(o1),a1=!1}finally{a1?revokeScope(i1):leaveScope(i1)}return usePatchesInScope(i1,r1),processResult(n1,i1)}else if(!_g||typeof _g!="object"){if(n1=t1(_g),n1===void 0&&(n1=_g),n1===NOTHING&&(n1=void 0),this.autoFreeze_&&freeze(n1,!0),r1){const i1=[],o1=[];getPlugin("Patches").generateReplacementPatches_(_g,n1,i1,o1),r1(i1,o1)}return n1}else die(1,_g)},this.produceWithPatches=(_g,t1)=>{if(typeof _g=="function")return(o1,...a1)=>this.produceWithPatches(o1,u1=>_g(u1,...a1));let r1,n1;return[this.produce(_g,t1,(o1,a1)=>{r1=o1,n1=a1}),r1,n1]},typeof(e1==null?void 0:e1.autoFreeze)=="boolean"&&this.setAutoFreeze(e1.autoFreeze),typeof(e1==null?void 0:e1.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e1.useStrictShallowCopy)}createDraft(e1){isDraftable(e1)||die(8),isDraft(e1)&&(e1=current(e1));const _g=enterScope(this),t1=createProxy(e1,void 0);return t1[DRAFT_STATE].isManual_=!0,leaveScope(_g),t1}finishDraft(e1,_g){const t1=e1&&e1[DRAFT_STATE];(!t1||!t1.isManual_)&&die(9);const{scope_:r1}=t1;return usePatchesInScope(r1,_g),processResult(void 0,r1)}setAutoFreeze(e1){this.autoFreeze_=e1}setUseStrictShallowCopy(e1){this.useStrictShallowCopy_=e1}applyPatches(e1,_g){let t1;for(t1=_g.length-1;t1>=0;t1--){const n1=_g[t1];if(n1.path.length===0&&n1.op==="replace"){e1=n1.value;break}}t1>-1&&(_g=_g.slice(t1+1));const r1=getPlugin("Patches").applyPatches_;return isDraft(e1)?r1(e1,_g):this.produce(e1,n1=>r1(n1,_g))}};function createProxy(e1,_g){const t1=isMap(e1)?getPlugin("MapSet").proxyMap_(e1,_g):isSet(e1)?getPlugin("MapSet").proxySet_(e1,_g):createProxyProxy(e1,_g);return(_g?_g.scope_:getCurrentScope()).drafts_.push(t1),t1}function current(e1){return isDraft(e1)||die(10,e1),currentImpl(e1)}function currentImpl(e1){if(!isDraftable(e1)||isFrozen(e1))return e1;const _g=e1[DRAFT_STATE];let t1;if(_g){if(!_g.modified_)return _g.base_;_g.finalized_=!0,t1=shallowCopy(e1,_g.scope_.immer_.useStrictShallowCopy_)}else t1=shallowCopy(e1,!0);return each(t1,(r1,n1)=>{set$1(t1,r1,currentImpl(n1))}),_g&&(_g.finalized_=!1),t1}var immer$1=new Immer2,produce=immer$1.produce;immer$1.produceWithPatches.bind(immer$1);immer$1.setAutoFreeze.bind(immer$1);immer$1.setUseStrictShallowCopy.bind(immer$1);immer$1.applyPatches.bind(immer$1);immer$1.createDraft.bind(immer$1);immer$1.finishDraft.bind(immer$1);function castDraft(e1){return e1}const immerImpl=e1=>(_g,t1,r1)=>(r1.setState=(n1,i1,...o1)=>{const a1=typeof n1=="function"?produce(n1):n1;return _g(a1,i1,...o1)},e1(r1.setState,t1,r1)),immer=immerImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$1(e1,_g){return e1===_g&&(e1!==0||1/e1===1/_g)||e1!==e1&&_g!==_g}var k$2=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m$1=e.useEffect,n$2=e.useLayoutEffect,p$2=e.useDebugValue;function q$1(e1,_g){var t1=_g(),r1=l({inst:{value:t1,getSnapshot:_g}}),n1=r1[0].inst,i1=r1[1];return n$2(function(){n1.value=t1,n1.getSnapshot=_g,r$2(n1)&&i1({inst:n1})},[e1,t1,_g]),m$1(function(){return r$2(n1)&&i1({inst:n1}),e1(function(){r$2(n1)&&i1({inst:n1})})},[e1]),p$2(t1),t1}function r$2(e1){var _g=e1.getSnapshot;e1=e1.value;try{var t1=_g();return!k$2(e1,t1)}catch{return!0}}function t$2(e1,_g){return _g()}var u$2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$2:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$2;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n$1=shimExports;function p$1(e1,_g){return e1===_g&&(e1!==0||1/e1===1/_g)||e1!==e1&&_g!==_g}var q=typeof Object.is=="function"?Object.is:p$1,r$1=n$1.useSyncExternalStore,t$1=h.useRef,u$1=h.useEffect,v=h.useMemo,w=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(e1,_g,t1,r1,n1){var i1=t$1(null);if(i1.current===null){var o1={hasValue:!1,value:null};i1.current=o1}else o1=i1.current;i1=v(function(){function u1(h1){if(!s1){if(s1=!0,l1=h1,h1=r1(h1),n1!==void 0&&o1.hasValue){var f1=o1.value;if(n1(f1,h1))return c1=f1}return c1=h1}if(f1=c1,q(l1,h1))return f1;var g1=r1(h1);return n1!==void 0&&n1(f1,g1)?f1:(l1=h1,c1=g1)}var s1=!1,l1,c1,d1=t1===void 0?null:t1;return[function(){return u1(_g())},d1===null?void 0:function(){return u1(d1())}]},[_g,t1,r1,n1]);var a1=r$1(e1,i1[0],i1[1]);return u$1(function(){o1.hasValue=!0,o1.value=a1},[a1]),w(a1),a1};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports);var define_import_meta_env_default={VITE_BACKEND:"https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",VITE_RUNPOD:"J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",VITE_BACKEND_RENDER_IMAGE:"https://api.runpod.ai/v2/robzzhxhypgvc0/runsync",VITE_DEBUG:"true",VITE_LOG_LEVEL:"info",BASE_URL:"/images-project",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const createStoreImpl=e1=>{let _g;const t1=new Set,r1=(l1,c1)=>{const d1=typeof l1=="function"?l1(_g):l1;if(!Object.is(d1,_g)){const h1=_g;_g=c1??(typeof d1!="object"||d1===null)?d1:Object.assign({},_g,d1),t1.forEach(f1=>f1(_g,h1))}},n1=()=>_g,u1={setState:r1,getState:n1,getInitialState:()=>s1,subscribe:l1=>(t1.add(l1),()=>t1.delete(l1)),destroy:()=>{(define_import_meta_env_default?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t1.clear()}},s1=_g=e1(r1,n1,u1);return u1},createStore=e1=>e1?createStoreImpl(e1):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity=e1=>e1;function useStoreWithEqualityFn(e1,_g=identity,t1){const r1=useSyncExternalStoreWithSelector(e1.subscribe,e1.getState,e1.getServerState||e1.getInitialState,_g,t1);return useDebugValue(r1),r1}const createWithEqualityFnImpl=(e1,_g)=>{const t1=createStore(e1),r1=(n1,i1=_g)=>useStoreWithEqualityFn(t1,n1,i1);return Object.assign(r1,t1),r1},createWithEqualityFn=(e1,_g)=>e1?createWithEqualityFnImpl(e1,_g):createWithEqualityFnImpl;var PluginName=(e1=>(e1.RemoveBG="RemoveBG",e1.AnimeSeg="AnimeSeg",e1.RealESRGAN="RealESRGAN",e1.GFPGAN="GFPGAN",e1.RestoreFormer="RestoreFormer",e1.InteractiveSeg="InteractiveSeg",e1))(PluginName||{}),SortBy=(e1=>(e1.NAME="name",e1.CTIME="ctime",e1.MTIME="mtime",e1))(SortBy||{}),SortOrder=(e1=>(e1.DESCENDING="desc",e1.ASCENDING="asc",e1))(SortOrder||{}),LDMSampler=(e1=>(e1.ddim="ddim",e1.plms="plms",e1))(LDMSampler||{}),CV2Flag=(e1=>(e1.INPAINT_NS="INPAINT_NS",e1.INPAINT_TELEA="INPAINT_TELEA",e1))(CV2Flag||{}),ExtenderDirection=(e1=>(e1.x="x",e1.y="y",e1.xy="xy",e1))(ExtenderDirection||{}),PowerPaintTask=(e1=>(e1.text_guided="text-guided",e1.shape_guided="shape-guided",e1.object_remove="object-remove",e1.outpainting="outpainting",e1))(PowerPaintTask||{});const paintByExampleConfig={plugins:[{name:"RemoveBG",support_gen_image:!0,support_gen_mask:!0}],modelInfos:[{name:"lama",path:"lama",model_type:"inpaint",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"cv2",path:"cv2",model_type:"inpaint",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"runwayml/stable-diffusion-v1-5",path:"runwayml/stable-diffusion-v1-5",model_type:"diffusers_sd",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!0,support_controlnet:!0,support_freeu:!0},{name:"Sanster/PowerPaint-V1-stable-diffusion-inpainting",path:"Sanster/PowerPaint-V1-stable-diffusion-inpainting",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"redstonehero/ReV_Animated_Inpainting",path:"redstonehero/ReV_Animated_Inpainting",model_type:"diffusers_sd",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!0,support_controlnet:!0,support_freeu:!0},{name:"Fantasy-Studio/Paint-by-Example",path:"Fantasy-Studio/Paint-by-Example",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1}],removeBGModel:"briaai/RMBG-1.4",removeBGModels:["u2net","u2netp","u2net_human_seg","u2net_cloth_seg","silueta","isnet-general-use","briaai/RMBG-1.4"],realesrganModel:"realesr-general-x4v3",realesrganModels:["realesr-general-x4v3","RealESRGAN_x4plus","RealESRGAN_x4plus_anime_6B"],interactiveSegModel:"vit_b",interactiveSegModels:["vit_b","vit_l","vit_h","sam_hq_vit_b","sam_hq_vit_l","sam_hq_vit_h","mobile_sam"],enableFileManager:!1,enableAutoSaving:!1,enableControlnet:!1,controlnetMethod:"",disableModelSwitch:!1,isDesktop:!1,samplers:["DPM++ 2M","DPM++ 2M Karras","DPM++ 2M SDE","DPM++ 2M SDE Karras","DPM++ SDE","DPM++ SDE Karras","DPM2","DPM2 Karras","DPM2 a","DPM2 a Karras","Euler","Euler a","Heun","LMS","LMS Karras","DDIM","PNDM","UniPC","LCM"]};function bind(e1,_g){return function(){return e1.apply(_g,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e1=>_g=>{const t1=toString.call(_g);return e1[t1]||(e1[t1]=t1.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e1=>(e1=e1.toLowerCase(),_g=>kindOf(_g)===e1),typeOfTest=e1=>_g=>typeof _g===e1,{isArray}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$2(e1){return e1!==null&&!isUndefined$1(e1)&&e1.constructor!==null&&!isUndefined$1(e1.constructor)&&isFunction$1(e1.constructor.isBuffer)&&e1.constructor.isBuffer(e1)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e1){let _g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?_g=ArrayBuffer.isView(e1):_g=e1&&e1.buffer&&isArrayBuffer(e1.buffer),_g}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=e1=>e1!==null&&typeof e1=="object",isBoolean$1=e1=>e1===!0||e1===!1,isPlainObject$1=e1=>{if(kindOf(e1)!=="object")return!1;const _g=getPrototypeOf(e1);return(_g===null||_g===Object.prototype||Object.getPrototypeOf(_g)===null)&&!(Symbol.toStringTag in e1)&&!(Symbol.iterator in e1)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e1=>isObject$1(e1)&&isFunction$1(e1.pipe),isFormData=e1=>{let _g;return e1&&(typeof FormData=="function"&&e1 instanceof FormData||isFunction$1(e1.append)&&((_g=kindOf(e1))==="formdata"||_g==="object"&&isFunction$1(e1.toString)&&e1.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e1=>e1.trim?e1.trim():e1.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(e1,_g,{allOwnKeys:t1=!1}={}){if(e1===null||typeof e1>"u")return;let r1,n1;if(typeof e1!="object"&&(e1=[e1]),isArray(e1))for(r1=0,n1=e1.length;r1<n1;r1++)_g.call(null,e1[r1],r1,e1);else{const i1=t1?Object.getOwnPropertyNames(e1):Object.keys(e1),o1=i1.length;let a1;for(r1=0;r1<o1;r1++)a1=i1[r1],_g.call(null,e1[a1],a1,e1)}}function findKey(e1,_g){_g=_g.toLowerCase();const t1=Object.keys(e1);let r1=t1.length,n1;for(;r1-- >0;)if(n1=t1[r1],_g===n1.toLowerCase())return n1;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e1=>!isUndefined$1(e1)&&e1!==_global;function merge(){const{caseless:e1}=isContextDefined(this)&&this||{},_g={},t1=(r1,n1)=>{const i1=e1&&findKey(_g,n1)||n1;isPlainObject$1(_g[i1])&&isPlainObject$1(r1)?_g[i1]=merge(_g[i1],r1):isPlainObject$1(r1)?_g[i1]=merge({},r1):isArray(r1)?_g[i1]=r1.slice():_g[i1]=r1};for(let r1=0,n1=arguments.length;r1<n1;r1++)arguments[r1]&&forEach$1(arguments[r1],t1);return _g}const extend=(e1,_g,t1,{allOwnKeys:r1}={})=>(forEach$1(_g,(n1,i1)=>{t1&&isFunction$1(n1)?e1[i1]=bind(n1,t1):e1[i1]=n1},{allOwnKeys:r1}),e1),stripBOM=e1=>(e1.charCodeAt(0)===65279&&(e1=e1.slice(1)),e1),inherits=(e1,_g,t1,r1)=>{e1.prototype=Object.create(_g.prototype,r1),e1.prototype.constructor=e1,Object.defineProperty(e1,"super",{value:_g.prototype}),t1&&Object.assign(e1.prototype,t1)},toFlatObject=(e1,_g,t1,r1)=>{let n1,i1,o1;const a1={};if(_g=_g||{},e1==null)return _g;do{for(n1=Object.getOwnPropertyNames(e1),i1=n1.length;i1-- >0;)o1=n1[i1],(!r1||r1(o1,e1,_g))&&!a1[o1]&&(_g[o1]=e1[o1],a1[o1]=!0);e1=t1!==!1&&getPrototypeOf(e1)}while(e1&&(!t1||t1(e1,_g))&&e1!==Object.prototype);return _g},endsWith=(e1,_g,t1)=>{e1=String(e1),(t1===void 0||t1>e1.length)&&(t1=e1.length),t1-=_g.length;const r1=e1.indexOf(_g,t1);return r1!==-1&&r1===t1},toArray=e1=>{if(!e1)return null;if(isArray(e1))return e1;let _g=e1.length;if(!isNumber(_g))return null;const t1=new Array(_g);for(;_g-- >0;)t1[_g]=e1[_g];return t1},isTypedArray=(e1=>_g=>e1&&_g instanceof e1)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e1,_g)=>{const r1=(e1&&e1[Symbol.iterator]).call(e1);let n1;for(;(n1=r1.next())&&!n1.done;){const i1=n1.value;_g.call(e1,i1[0],i1[1])}},matchAll=(e1,_g)=>{let t1;const r1=[];for(;(t1=e1.exec(_g))!==null;)r1.push(t1);return r1},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e1=>e1.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t1,r1,n1){return r1.toUpperCase()+n1}),hasOwnProperty=(({hasOwnProperty:e1})=>(_g,t1)=>e1.call(_g,t1))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e1,_g)=>{const t1=Object.getOwnPropertyDescriptors(e1),r1={};forEach$1(t1,(n1,i1)=>{let o1;(o1=_g(n1,i1,e1))!==!1&&(r1[i1]=o1||n1)}),Object.defineProperties(e1,r1)},freezeMethods=e1=>{reduceDescriptors(e1,(_g,t1)=>{if(isFunction$1(e1)&&["arguments","caller","callee"].indexOf(t1)!==-1)return!1;const r1=e1[t1];if(isFunction$1(r1)){if(_g.enumerable=!1,"writable"in _g){_g.writable=!1;return}_g.set||(_g.set=()=>{throw Error("Can not rewrite read-only method '"+t1+"'")})}})},toObjectSet=(e1,_g)=>{const t1={},r1=n1=>{n1.forEach(i1=>{t1[i1]=!0})};return isArray(e1)?r1(e1):r1(String(e1).split(_g)),t1},noop$2=()=>{},toFiniteNumber=(e1,_g)=>e1!=null&&Number.isFinite(e1=+e1)?e1:_g,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e1=16,_g=ALPHABET.ALPHA_DIGIT)=>{let t1="";const{length:r1}=_g;for(;e1--;)t1+=_g[Math.random()*r1|0];return t1};function isSpecCompliantForm(e1){return!!(e1&&isFunction$1(e1.append)&&e1[Symbol.toStringTag]==="FormData"&&e1[Symbol.iterator])}const toJSONObject=e1=>{const _g=new Array(10),t1=(r1,n1)=>{if(isObject$1(r1)){if(_g.indexOf(r1)>=0)return;if(!("toJSON"in r1)){_g[n1]=r1;const i1=isArray(r1)?[]:{};return forEach$1(r1,(o1,a1)=>{const u1=t1(o1,n1+1);!isUndefined$1(u1)&&(i1[a1]=u1)}),_g[n1]=void 0,i1}}return r1};return t1(e1,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e1=>e1&&(isObject$1(e1)||isFunction$1(e1))&&isFunction$1(e1.then)&&isFunction$1(e1.catch),utils$1={isArray,isArrayBuffer,isBuffer:isBuffer$2,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined:isUndefined$1,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(e1,_g,t1,r1,n1){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e1,this.name="AxiosError",_g&&(this.code=_g),t1&&(this.config=t1),r1&&(this.request=r1),n1&&(this.response=n1)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e1=>{descriptors[e1]={value:e1}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(e1,_g,t1,r1,n1,i1)=>{const o1=Object.create(prototype$1);return utils$1.toFlatObject(e1,o1,function(u1){return u1!==Error.prototype},a1=>a1!=="isAxiosError"),AxiosError.call(o1,e1.message,_g,t1,r1,n1),o1.cause=e1,o1.name=e1.name,i1&&Object.assign(o1,i1),o1};const httpAdapter=null;function isVisitable(e1){return utils$1.isPlainObject(e1)||utils$1.isArray(e1)}function removeBrackets(e1){return utils$1.endsWith(e1,"[]")?e1.slice(0,-2):e1}function renderKey(e1,_g,t1){return e1?e1.concat(_g).map(function(n1,i1){return n1=removeBrackets(n1),!t1&&i1?"["+n1+"]":n1}).join(t1?".":""):_g}function isFlatArray(e1){return utils$1.isArray(e1)&&!e1.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(_g){return/^is[A-Z]/.test(_g)});function toFormData(e1,_g,t1){if(!utils$1.isObject(e1))throw new TypeError("target must be an object");_g=_g||new FormData,t1=utils$1.toFlatObject(t1,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g1,v1){return!utils$1.isUndefined(v1[g1])});const r1=t1.metaTokens,n1=t1.visitor||l1,i1=t1.dots,o1=t1.indexes,u1=(t1.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(_g);if(!utils$1.isFunction(n1))throw new TypeError("visitor must be a function");function s1(f1){if(f1===null)return"";if(utils$1.isDate(f1))return f1.toISOString();if(!u1&&utils$1.isBlob(f1))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(f1)||utils$1.isTypedArray(f1)?u1&&typeof Blob=="function"?new Blob([f1]):Buffer.from(f1):f1}function l1(f1,g1,v1){let $1=f1;if(f1&&!v1&&typeof f1=="object"){if(utils$1.endsWith(g1,"{}"))g1=r1?g1:g1.slice(0,-2),f1=JSON.stringify(f1);else if(utils$1.isArray(f1)&&isFlatArray(f1)||(utils$1.isFileList(f1)||utils$1.endsWith(g1,"[]"))&&($1=utils$1.toArray(f1)))return g1=removeBrackets(g1),$1.forEach(function(_1,E1){!(utils$1.isUndefined(_1)||_1===null)&&_g.append(o1===!0?renderKey([g1],E1,i1):o1===null?g1:g1+"[]",s1(_1))}),!1}return isVisitable(f1)?!0:(_g.append(renderKey(v1,g1,i1),s1(f1)),!1)}const c1=[],d1=Object.assign(predicates,{defaultVisitor:l1,convertValue:s1,isVisitable});function h1(f1,g1){if(!utils$1.isUndefined(f1)){if(c1.indexOf(f1)!==-1)throw Error("Circular reference detected in "+g1.join("."));c1.push(f1),utils$1.forEach(f1,function($1,y1){(!(utils$1.isUndefined($1)||$1===null)&&n1.call(_g,$1,utils$1.isString(y1)?y1.trim():y1,g1,d1))===!0&&h1($1,g1?g1.concat(y1):[y1])}),c1.pop()}}if(!utils$1.isObject(e1))throw new TypeError("data must be an object");return h1(e1),_g}function encode$1(e1){const _g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e1).replace(/[!'()~]|%20|%00/g,function(r1){return _g[r1]})}function AxiosURLSearchParams(e1,_g){this._pairs=[],e1&&toFormData(e1,this,_g)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(_g,t1){this._pairs.push([_g,t1])};prototype.toString=function(_g){const t1=_g?function(r1){return _g.call(this,r1,encode$1)}:encode$1;return this._pairs.map(function(n1){return t1(n1[0])+"="+t1(n1[1])},"").join("&")};function encode(e1){return encodeURIComponent(e1).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e1,_g,t1){if(!_g)return e1;const r1=t1&&t1.encode||encode,n1=t1&&t1.serialize;let i1;if(n1?i1=n1(_g,t1):i1=utils$1.isURLSearchParams(_g)?_g.toString():new AxiosURLSearchParams(_g,t1).toString(r1),i1){const o1=e1.indexOf("#");o1!==-1&&(e1=e1.slice(0,o1)),e1+=(e1.indexOf("?")===-1?"?":"&")+i1}return e1}class InterceptorManager{constructor(){this.handlers=[]}use(_g,t1,r1){return this.handlers.push({fulfilled:_g,rejected:t1,synchronous:r1?r1.synchronous:!1,runWhen:r1?r1.runWhen:null}),this.handlers.length-1}eject(_g){this.handlers[_g]&&(this.handlers[_g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(_g){utils$1.forEach(this.handlers,function(r1){r1!==null&&_g(r1)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(e1=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(e1)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils,...platform$2};function toURLEncodedForm(e1,_g){return toFormData(e1,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(t1,r1,n1,i1){return platform$1.isNode&&utils$1.isBuffer(t1)?(this.append(r1,t1.toString("base64")),!1):i1.defaultVisitor.apply(this,arguments)}},_g))}function parsePropPath(e1){return utils$1.matchAll(/\w+|\[(\w*)]/g,e1).map(_g=>_g[0]==="[]"?"":_g[1]||_g[0])}function arrayToObject(e1){const _g={},t1=Object.keys(e1);let r1;const n1=t1.length;let i1;for(r1=0;r1<n1;r1++)i1=t1[r1],_g[i1]=e1[i1];return _g}function formDataToJSON(e1){function _g(t1,r1,n1,i1){let o1=t1[i1++];if(o1==="__proto__")return!0;const a1=Number.isFinite(+o1),u1=i1>=t1.length;return o1=!o1&&utils$1.isArray(n1)?n1.length:o1,u1?(utils$1.hasOwnProp(n1,o1)?n1[o1]=[n1[o1],r1]:n1[o1]=r1,!a1):((!n1[o1]||!utils$1.isObject(n1[o1]))&&(n1[o1]=[]),_g(t1,r1,n1[o1],i1)&&utils$1.isArray(n1[o1])&&(n1[o1]=arrayToObject(n1[o1])),!a1)}if(utils$1.isFormData(e1)&&utils$1.isFunction(e1.entries)){const t1={};return utils$1.forEachEntry(e1,(r1,n1)=>{_g(parsePropPath(r1),n1,t1,0)}),t1}return null}function stringifySafely(e1,_g,t1){if(utils$1.isString(e1))try{return(_g||JSON.parse)(e1),utils$1.trim(e1)}catch(r1){if(r1.name!=="SyntaxError")throw r1}return(t1||JSON.stringify)(e1)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(_g,t1){const r1=t1.getContentType()||"",n1=r1.indexOf("application/json")>-1,i1=utils$1.isObject(_g);if(i1&&utils$1.isHTMLForm(_g)&&(_g=new FormData(_g)),utils$1.isFormData(_g))return n1?JSON.stringify(formDataToJSON(_g)):_g;if(utils$1.isArrayBuffer(_g)||utils$1.isBuffer(_g)||utils$1.isStream(_g)||utils$1.isFile(_g)||utils$1.isBlob(_g)||utils$1.isReadableStream(_g))return _g;if(utils$1.isArrayBufferView(_g))return _g.buffer;if(utils$1.isURLSearchParams(_g))return t1.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),_g.toString();let a1;if(i1){if(r1.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(_g,this.formSerializer).toString();if((a1=utils$1.isFileList(_g))||r1.indexOf("multipart/form-data")>-1){const u1=this.env&&this.env.FormData;return toFormData(a1?{"files[]":_g}:_g,u1&&new u1,this.formSerializer)}}return i1||n1?(t1.setContentType("application/json",!1),stringifySafely(_g)):_g}],transformResponse:[function(_g){const t1=this.transitional||defaults$1.transitional,r1=t1&&t1.forcedJSONParsing,n1=this.responseType==="json";if(utils$1.isResponse(_g)||utils$1.isReadableStream(_g))return _g;if(_g&&utils$1.isString(_g)&&(r1&&!this.responseType||n1)){const o1=!(t1&&t1.silentJSONParsing)&&n1;try{return JSON.parse(_g)}catch(a1){if(o1)throw a1.name==="SyntaxError"?AxiosError.from(a1,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):a1}}return _g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(_g){return _g>=200&&_g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e1=>{defaults$1.headers[e1]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e1=>{const _g={};let t1,r1,n1;return e1&&e1.split(`
`).forEach(function(o1){n1=o1.indexOf(":"),t1=o1.substring(0,n1).trim().toLowerCase(),r1=o1.substring(n1+1).trim(),!(!t1||_g[t1]&&ignoreDuplicateOf[t1])&&(t1==="set-cookie"?_g[t1]?_g[t1].push(r1):_g[t1]=[r1]:_g[t1]=_g[t1]?_g[t1]+", "+r1:r1)}),_g},$internals=Symbol("internals");function normalizeHeader(e1){return e1&&String(e1).trim().toLowerCase()}function normalizeValue(e1){return e1===!1||e1==null?e1:utils$1.isArray(e1)?e1.map(normalizeValue):String(e1)}function parseTokens(e1){const _g=Object.create(null),t1=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r1;for(;r1=t1.exec(e1);)_g[r1[1]]=r1[2];return _g}const isValidHeaderName=e1=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e1.trim());function matchHeaderValue(e1,_g,t1,r1,n1){if(utils$1.isFunction(r1))return r1.call(this,_g,t1);if(n1&&(_g=t1),!!utils$1.isString(_g)){if(utils$1.isString(r1))return _g.indexOf(r1)!==-1;if(utils$1.isRegExp(r1))return r1.test(_g)}}function formatHeader(e1){return e1.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(_g,t1,r1)=>t1.toUpperCase()+r1)}function buildAccessors(e1,_g){const t1=utils$1.toCamelCase(" "+_g);["get","set","has"].forEach(r1=>{Object.defineProperty(e1,r1+t1,{value:function(n1,i1,o1){return this[r1].call(this,_g,n1,i1,o1)},configurable:!0})})}class AxiosHeaders{constructor(_g){_g&&this.set(_g)}set(_g,t1,r1){const n1=this;function i1(a1,u1,s1){const l1=normalizeHeader(u1);if(!l1)throw new Error("header name must be a non-empty string");const c1=utils$1.findKey(n1,l1);(!c1||n1[c1]===void 0||s1===!0||s1===void 0&&n1[c1]!==!1)&&(n1[c1||u1]=normalizeValue(a1))}const o1=(a1,u1)=>utils$1.forEach(a1,(s1,l1)=>i1(s1,l1,u1));if(utils$1.isPlainObject(_g)||_g instanceof this.constructor)o1(_g,t1);else if(utils$1.isString(_g)&&(_g=_g.trim())&&!isValidHeaderName(_g))o1(parseHeaders(_g),t1);else if(utils$1.isHeaders(_g))for(const[a1,u1]of _g.entries())i1(u1,a1,r1);else _g!=null&&i1(t1,_g,r1);return this}get(_g,t1){if(_g=normalizeHeader(_g),_g){const r1=utils$1.findKey(this,_g);if(r1){const n1=this[r1];if(!t1)return n1;if(t1===!0)return parseTokens(n1);if(utils$1.isFunction(t1))return t1.call(this,n1,r1);if(utils$1.isRegExp(t1))return t1.exec(n1);throw new TypeError("parser must be boolean|regexp|function")}}}has(_g,t1){if(_g=normalizeHeader(_g),_g){const r1=utils$1.findKey(this,_g);return!!(r1&&this[r1]!==void 0&&(!t1||matchHeaderValue(this,this[r1],r1,t1)))}return!1}delete(_g,t1){const r1=this;let n1=!1;function i1(o1){if(o1=normalizeHeader(o1),o1){const a1=utils$1.findKey(r1,o1);a1&&(!t1||matchHeaderValue(r1,r1[a1],a1,t1))&&(delete r1[a1],n1=!0)}}return utils$1.isArray(_g)?_g.forEach(i1):i1(_g),n1}clear(_g){const t1=Object.keys(this);let r1=t1.length,n1=!1;for(;r1--;){const i1=t1[r1];(!_g||matchHeaderValue(this,this[i1],i1,_g,!0))&&(delete this[i1],n1=!0)}return n1}normalize(_g){const t1=this,r1={};return utils$1.forEach(this,(n1,i1)=>{const o1=utils$1.findKey(r1,i1);if(o1){t1[o1]=normalizeValue(n1),delete t1[i1];return}const a1=_g?formatHeader(i1):String(i1).trim();a1!==i1&&delete t1[i1],t1[a1]=normalizeValue(n1),r1[a1]=!0}),this}concat(..._g){return this.constructor.concat(this,..._g)}toJSON(_g){const t1=Object.create(null);return utils$1.forEach(this,(r1,n1)=>{r1!=null&&r1!==!1&&(t1[n1]=_g&&utils$1.isArray(r1)?r1.join(", "):r1)}),t1}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([_g,t1])=>_g+": "+t1).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(_g){return _g instanceof this?_g:new this(_g)}static concat(_g,...t1){const r1=new this(_g);return t1.forEach(n1=>r1.set(n1)),r1}static accessor(_g){const r1=(this[$internals]=this[$internals]={accessors:{}}).accessors,n1=this.prototype;function i1(o1){const a1=normalizeHeader(o1);r1[a1]||(buildAccessors(n1,o1),r1[a1]=!0)}return utils$1.isArray(_g)?_g.forEach(i1):i1(_g),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:e1},_g)=>{let t1=_g[0].toUpperCase()+_g.slice(1);return{get:()=>e1,set(r1){this[t1]=r1}}});utils$1.freezeMethods(AxiosHeaders);function transformData(e1,_g){const t1=this||defaults$1,r1=_g||t1,n1=AxiosHeaders.from(r1.headers);let i1=r1.data;return utils$1.forEach(e1,function(a1){i1=a1.call(t1,i1,n1.normalize(),_g?_g.status:void 0)}),n1.normalize(),i1}function isCancel(e1){return!!(e1&&e1.__CANCEL__)}function CanceledError(e1,_g,t1){AxiosError.call(this,e1??"canceled",AxiosError.ERR_CANCELED,_g,t1),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(e1,_g,t1){const r1=t1.config.validateStatus;!t1.status||!r1||r1(t1.status)?e1(t1):_g(new AxiosError("Request failed with status code "+t1.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(t1.status/100)-4],t1.config,t1.request,t1))}function parseProtocol(e1){const _g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e1);return _g&&_g[1]||""}function speedometer(e1,_g){e1=e1||10;const t1=new Array(e1),r1=new Array(e1);let n1=0,i1=0,o1;return _g=_g!==void 0?_g:1e3,function(u1){const s1=Date.now(),l1=r1[i1];o1||(o1=s1),t1[n1]=u1,r1[n1]=s1;let c1=i1,d1=0;for(;c1!==n1;)d1+=t1[c1++],c1=c1%e1;if(n1=(n1+1)%e1,n1===i1&&(i1=(i1+1)%e1),s1-o1<_g)return;const h1=l1&&s1-l1;return h1?Math.round(d1*1e3/h1):void 0}}function throttle(e1,_g){let t1=0;const r1=1e3/_g;let n1=null;return function(){const o1=this===!0,a1=Date.now();if(o1||a1-t1>r1)return n1&&(clearTimeout(n1),n1=null),t1=a1,e1.apply(null,arguments);n1||(n1=setTimeout(()=>(n1=null,t1=Date.now(),e1.apply(null,arguments)),r1-(a1-t1)))}}const progressEventReducer=(e1,_g,t1=3)=>{let r1=0;const n1=speedometer(50,250);return throttle(i1=>{const o1=i1.loaded,a1=i1.lengthComputable?i1.total:void 0,u1=o1-r1,s1=n1(u1),l1=o1<=a1;r1=o1;const c1={loaded:o1,total:a1,progress:a1?o1/a1:void 0,bytes:u1,rate:s1||void 0,estimated:s1&&a1&&l1?(a1-o1)/s1:void 0,event:i1,lengthComputable:a1!=null};c1[_g?"download":"upload"]=!0,e1(c1)},t1)},isURLSameOrigin=platform$1.hasStandardBrowserEnv?function(){const _g=/(msie|trident)/i.test(navigator.userAgent),t1=document.createElement("a");let r1;function n1(i1){let o1=i1;return _g&&(t1.setAttribute("href",o1),o1=t1.href),t1.setAttribute("href",o1),{href:t1.href,protocol:t1.protocol?t1.protocol.replace(/:$/,""):"",host:t1.host,search:t1.search?t1.search.replace(/^\?/,""):"",hash:t1.hash?t1.hash.replace(/^#/,""):"",hostname:t1.hostname,port:t1.port,pathname:t1.pathname.charAt(0)==="/"?t1.pathname:"/"+t1.pathname}}return r1=n1(window.location.href),function(o1){const a1=utils$1.isString(o1)?n1(o1):o1;return a1.protocol===r1.protocol&&a1.host===r1.host}}():function(){return function(){return!0}}(),cookies=platform$1.hasStandardBrowserEnv?{write(e1,_g,t1,r1,n1,i1){const o1=[e1+"="+encodeURIComponent(_g)];utils$1.isNumber(t1)&&o1.push("expires="+new Date(t1).toGMTString()),utils$1.isString(r1)&&o1.push("path="+r1),utils$1.isString(n1)&&o1.push("domain="+n1),i1===!0&&o1.push("secure"),document.cookie=o1.join("; ")},read(e1){const _g=document.cookie.match(new RegExp("(^|;\\s*)("+e1+")=([^;]*)"));return _g?decodeURIComponent(_g[3]):null},remove(e1){this.write(e1,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e1){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e1)}function combineURLs(e1,_g){return _g?e1.replace(/\/?\/$/,"")+"/"+_g.replace(/^\/+/,""):e1}function buildFullPath(e1,_g){return e1&&!isAbsoluteURL(_g)?combineURLs(e1,_g):_g}const headersToObject=e1=>e1 instanceof AxiosHeaders?{...e1}:e1;function mergeConfig(e1,_g){_g=_g||{};const t1={};function r1(s1,l1,c1){return utils$1.isPlainObject(s1)&&utils$1.isPlainObject(l1)?utils$1.merge.call({caseless:c1},s1,l1):utils$1.isPlainObject(l1)?utils$1.merge({},l1):utils$1.isArray(l1)?l1.slice():l1}function n1(s1,l1,c1){if(utils$1.isUndefined(l1)){if(!utils$1.isUndefined(s1))return r1(void 0,s1,c1)}else return r1(s1,l1,c1)}function i1(s1,l1){if(!utils$1.isUndefined(l1))return r1(void 0,l1)}function o1(s1,l1){if(utils$1.isUndefined(l1)){if(!utils$1.isUndefined(s1))return r1(void 0,s1)}else return r1(void 0,l1)}function a1(s1,l1,c1){if(c1 in _g)return r1(s1,l1);if(c1 in e1)return r1(void 0,s1)}const u1={url:i1,method:i1,data:i1,baseURL:o1,transformRequest:o1,transformResponse:o1,paramsSerializer:o1,timeout:o1,timeoutMessage:o1,withCredentials:o1,withXSRFToken:o1,adapter:o1,responseType:o1,xsrfCookieName:o1,xsrfHeaderName:o1,onUploadProgress:o1,onDownloadProgress:o1,decompress:o1,maxContentLength:o1,maxBodyLength:o1,beforeRedirect:o1,transport:o1,httpAgent:o1,httpsAgent:o1,cancelToken:o1,socketPath:o1,responseEncoding:o1,validateStatus:a1,headers:(s1,l1)=>n1(headersToObject(s1),headersToObject(l1),!0)};return utils$1.forEach(Object.keys(Object.assign({},e1,_g)),function(l1){const c1=u1[l1]||n1,d1=c1(e1[l1],_g[l1],l1);utils$1.isUndefined(d1)&&c1!==a1||(t1[l1]=d1)}),t1}const resolveConfig=e1=>{const _g=mergeConfig({},e1);let{data:t1,withXSRFToken:r1,xsrfHeaderName:n1,xsrfCookieName:i1,headers:o1,auth:a1}=_g;_g.headers=o1=AxiosHeaders.from(o1),_g.url=buildURL(buildFullPath(_g.baseURL,_g.url),e1.params,e1.paramsSerializer),a1&&o1.set("Authorization","Basic "+btoa((a1.username||"")+":"+(a1.password?unescape(encodeURIComponent(a1.password)):"")));let u1;if(utils$1.isFormData(t1)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)o1.setContentType(void 0);else if((u1=o1.getContentType())!==!1){const[s1,...l1]=u1?u1.split(";").map(c1=>c1.trim()).filter(Boolean):[];o1.setContentType([s1||"multipart/form-data",...l1].join("; "))}}if(platform$1.hasStandardBrowserEnv&&(r1&&utils$1.isFunction(r1)&&(r1=r1(_g)),r1||r1!==!1&&isURLSameOrigin(_g.url))){const s1=n1&&i1&&cookies.read(i1);s1&&o1.set(n1,s1)}return _g},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e1){return new Promise(function(t1,r1){const n1=resolveConfig(e1);let i1=n1.data;const o1=AxiosHeaders.from(n1.headers).normalize();let{responseType:a1}=n1,u1;function s1(){n1.cancelToken&&n1.cancelToken.unsubscribe(u1),n1.signal&&n1.signal.removeEventListener("abort",u1)}let l1=new XMLHttpRequest;l1.open(n1.method.toUpperCase(),n1.url,!0),l1.timeout=n1.timeout;function c1(){if(!l1)return;const h1=AxiosHeaders.from("getAllResponseHeaders"in l1&&l1.getAllResponseHeaders()),g1={data:!a1||a1==="text"||a1==="json"?l1.responseText:l1.response,status:l1.status,statusText:l1.statusText,headers:h1,config:e1,request:l1};settle(function($1){t1($1),s1()},function($1){r1($1),s1()},g1),l1=null}"onloadend"in l1?l1.onloadend=c1:l1.onreadystatechange=function(){!l1||l1.readyState!==4||l1.status===0&&!(l1.responseURL&&l1.responseURL.indexOf("file:")===0)||setTimeout(c1)},l1.onabort=function(){l1&&(r1(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n1,l1)),l1=null)},l1.onerror=function(){r1(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n1,l1)),l1=null},l1.ontimeout=function(){let f1=n1.timeout?"timeout of "+n1.timeout+"ms exceeded":"timeout exceeded";const g1=n1.transitional||transitionalDefaults;n1.timeoutErrorMessage&&(f1=n1.timeoutErrorMessage),r1(new AxiosError(f1,g1.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n1,l1)),l1=null},i1===void 0&&o1.setContentType(null),"setRequestHeader"in l1&&utils$1.forEach(o1.toJSON(),function(f1,g1){l1.setRequestHeader(g1,f1)}),utils$1.isUndefined(n1.withCredentials)||(l1.withCredentials=!!n1.withCredentials),a1&&a1!=="json"&&(l1.responseType=n1.responseType),typeof n1.onDownloadProgress=="function"&&l1.addEventListener("progress",progressEventReducer(n1.onDownloadProgress,!0)),typeof n1.onUploadProgress=="function"&&l1.upload&&l1.upload.addEventListener("progress",progressEventReducer(n1.onUploadProgress)),(n1.cancelToken||n1.signal)&&(u1=h1=>{l1&&(r1(!h1||h1.type?new CanceledError(null,e1,l1):h1),l1.abort(),l1=null)},n1.cancelToken&&n1.cancelToken.subscribe(u1),n1.signal&&(n1.signal.aborted?u1():n1.signal.addEventListener("abort",u1)));const d1=parseProtocol(n1.url);if(d1&&platform$1.protocols.indexOf(d1)===-1){r1(new AxiosError("Unsupported protocol "+d1+":",AxiosError.ERR_BAD_REQUEST,e1));return}l1.send(i1||null)})},composeSignals=(e1,_g)=>{let t1=new AbortController,r1;const n1=function(u1){if(!r1){r1=!0,o1();const s1=u1 instanceof Error?u1:this.reason;t1.abort(s1 instanceof AxiosError?s1:new CanceledError(s1 instanceof Error?s1.message:s1))}};let i1=_g&&setTimeout(()=>{n1(new AxiosError(`timeout ${_g} of ms exceeded`,AxiosError.ETIMEDOUT))},_g);const o1=()=>{e1&&(i1&&clearTimeout(i1),i1=null,e1.forEach(u1=>{u1&&(u1.removeEventListener?u1.removeEventListener("abort",n1):u1.unsubscribe(n1))}),e1=null)};e1.forEach(u1=>u1&&u1.addEventListener&&u1.addEventListener("abort",n1));const{signal:a1}=t1;return a1.unsubscribe=o1,[a1,()=>{i1&&clearTimeout(i1),i1=null}]},streamChunk=function*(e1,_g){let t1=e1.byteLength;if(!_g||t1<_g){yield e1;return}let r1=0,n1;for(;r1<t1;)n1=r1+_g,yield e1.slice(r1,n1),r1=n1},readBytes=async function*(e1,_g,t1){for await(const r1 of e1)yield*streamChunk(ArrayBuffer.isView(r1)?r1:await t1(String(r1)),_g)},trackStream=(e1,_g,t1,r1,n1)=>{const i1=readBytes(e1,_g,n1);let o1=0;return new ReadableStream({type:"bytes",async pull(a1){const{done:u1,value:s1}=await i1.next();if(u1){a1.close(),r1();return}let l1=s1.byteLength;t1&&t1(o1+=l1),a1.enqueue(new Uint8Array(s1))},cancel(a1){return r1(a1),i1.return()}},{highWaterMark:2})},fetchProgressDecorator=(e1,_g)=>{const t1=e1!=null;return r1=>setTimeout(()=>_g({lengthComputable:t1,total:e1,loaded:r1}))},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(e1=>_g=>e1.encode(_g))(new TextEncoder):async e1=>new Uint8Array(await new Response(e1).arrayBuffer())),supportsRequestStream=isReadableStreamSupported&&(()=>{let e1=!1;const _g=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return e1=!0,"half"}}).headers.has("Content-Type");return e1&&!_g})(),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&!!(()=>{try{return utils$1.isReadableStream(new Response("").body)}catch{}})(),resolvers={stream:supportsResponseStream&&(e1=>e1.body)};isFetchSupported&&(e1=>{["text","arrayBuffer","blob","formData","stream"].forEach(_g=>{!resolvers[_g]&&(resolvers[_g]=utils$1.isFunction(e1[_g])?t1=>t1[_g]():(t1,r1)=>{throw new AxiosError(`Response type '${_g}' is not supported`,AxiosError.ERR_NOT_SUPPORT,r1)})})})(new Response);const getBodyLength=async e1=>{if(e1==null)return 0;if(utils$1.isBlob(e1))return e1.size;if(utils$1.isSpecCompliantForm(e1))return(await new Request(e1).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(e1))return e1.byteLength;if(utils$1.isURLSearchParams(e1)&&(e1=e1+""),utils$1.isString(e1))return(await encodeText(e1)).byteLength},resolveBodyLength=async(e1,_g)=>{const t1=utils$1.toFiniteNumber(e1.getContentLength());return t1??getBodyLength(_g)},fetchAdapter=isFetchSupported&&(async e1=>{let{url:_g,method:t1,data:r1,signal:n1,cancelToken:i1,timeout:o1,onDownloadProgress:a1,onUploadProgress:u1,responseType:s1,headers:l1,withCredentials:c1="same-origin",fetchOptions:d1}=resolveConfig(e1);s1=s1?(s1+"").toLowerCase():"text";let[h1,f1]=n1||i1||o1?composeSignals([n1,i1],o1):[],g1,v1;const $1=()=>{!g1&&setTimeout(()=>{h1&&h1.unsubscribe()}),g1=!0};let y1;try{if(u1&&supportsRequestStream&&t1!=="get"&&t1!=="head"&&(y1=await resolveBodyLength(l1,r1))!==0){let P1=new Request(_g,{method:"POST",body:r1,duplex:"half"}),k1;utils$1.isFormData(r1)&&(k1=P1.headers.get("content-type"))&&l1.setContentType(k1),P1.body&&(r1=trackStream(P1.body,DEFAULT_CHUNK_SIZE,fetchProgressDecorator(y1,progressEventReducer(u1)),null,encodeText))}utils$1.isString(c1)||(c1=c1?"cors":"omit"),v1=new Request(_g,{...d1,signal:h1,method:t1.toUpperCase(),headers:l1.normalize().toJSON(),body:r1,duplex:"half",withCredentials:c1});let _1=await fetch(v1);const E1=supportsResponseStream&&(s1==="stream"||s1==="response");if(supportsResponseStream&&(a1||E1)){const P1={};["status","statusText","headers"].forEach(N1=>{P1[N1]=_1[N1]});const k1=utils$1.toFiniteNumber(_1.headers.get("content-length"));_1=new Response(trackStream(_1.body,DEFAULT_CHUNK_SIZE,a1&&fetchProgressDecorator(k1,progressEventReducer(a1,!0)),E1&&$1,encodeText),P1)}s1=s1||"text";let T1=await resolvers[utils$1.findKey(resolvers,s1)||"text"](_1,e1);return!E1&&$1(),f1&&f1(),await new Promise((P1,k1)=>{settle(P1,k1,{data:T1,headers:AxiosHeaders.from(_1.headers),status:_1.status,statusText:_1.statusText,config:e1,request:v1})})}catch(_1){throw $1(),_1&&_1.name==="TypeError"&&/fetch/i.test(_1.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e1,v1),{cause:_1.cause||_1}):AxiosError.from(_1,_1&&_1.code,e1,v1)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(e1,_g)=>{if(e1){try{Object.defineProperty(e1,"name",{value:_g})}catch{}Object.defineProperty(e1,"adapterName",{value:_g})}});const renderReason=e1=>`- ${e1}`,isResolvedHandle=e1=>utils$1.isFunction(e1)||e1===null||e1===!1,adapters={getAdapter:e1=>{e1=utils$1.isArray(e1)?e1:[e1];const{length:_g}=e1;let t1,r1;const n1={};for(let i1=0;i1<_g;i1++){t1=e1[i1];let o1;if(r1=t1,!isResolvedHandle(t1)&&(r1=knownAdapters[(o1=String(t1)).toLowerCase()],r1===void 0))throw new AxiosError(`Unknown adapter '${o1}'`);if(r1)break;n1[o1||"#"+i1]=r1}if(!r1){const i1=Object.entries(n1).map(([a1,u1])=>`adapter ${a1} `+(u1===!1?"is not supported by the environment":"is not available in the build"));let o1=_g?i1.length>1?`since :
`+i1.map(renderReason).join(`
`):" "+renderReason(i1[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+o1,"ERR_NOT_SUPPORT")}return r1},adapters:knownAdapters};function throwIfCancellationRequested(e1){if(e1.cancelToken&&e1.cancelToken.throwIfRequested(),e1.signal&&e1.signal.aborted)throw new CanceledError(null,e1)}function dispatchRequest(e1){return throwIfCancellationRequested(e1),e1.headers=AxiosHeaders.from(e1.headers),e1.data=transformData.call(e1,e1.transformRequest),["post","put","patch"].indexOf(e1.method)!==-1&&e1.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e1.adapter||defaults$1.adapter)(e1).then(function(r1){return throwIfCancellationRequested(e1),r1.data=transformData.call(e1,e1.transformResponse,r1),r1.headers=AxiosHeaders.from(r1.headers),r1},function(r1){return isCancel(r1)||(throwIfCancellationRequested(e1),r1&&r1.response&&(r1.response.data=transformData.call(e1,e1.transformResponse,r1.response),r1.response.headers=AxiosHeaders.from(r1.response.headers))),Promise.reject(r1)})}const VERSION="1.7.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e1,_g)=>{validators$1[e1]=function(r1){return typeof r1===e1||"a"+(_g<1?"n ":" ")+e1}});const deprecatedWarnings={};validators$1.transitional=function(_g,t1,r1){function n1(i1,o1){return"[Axios v"+VERSION+"] Transitional option '"+i1+"'"+o1+(r1?". "+r1:"")}return(i1,o1,a1)=>{if(_g===!1)throw new AxiosError(n1(o1," has been removed"+(t1?" in "+t1:"")),AxiosError.ERR_DEPRECATED);return t1&&!deprecatedWarnings[o1]&&(deprecatedWarnings[o1]=!0,console.warn(n1(o1," has been deprecated since v"+t1+" and will be removed in the near future"))),_g?_g(i1,o1,a1):!0}};function assertOptions(e1,_g,t1){if(typeof e1!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const r1=Object.keys(e1);let n1=r1.length;for(;n1-- >0;){const i1=r1[n1],o1=_g[i1];if(o1){const a1=e1[i1],u1=a1===void 0||o1(a1,i1,e1);if(u1!==!0)throw new AxiosError("option "+i1+" must be "+u1,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(t1!==!0)throw new AxiosError("Unknown option "+i1,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(_g){this.defaults=_g,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(_g,t1){try{return await this._request(_g,t1)}catch(r1){if(r1 instanceof Error){let n1;Error.captureStackTrace?Error.captureStackTrace(n1={}):n1=new Error;const i1=n1.stack?n1.stack.replace(/^.+\n/,""):"";try{r1.stack?i1&&!String(r1.stack).endsWith(i1.replace(/^.+\n.+\n/,""))&&(r1.stack+=`
`+i1):r1.stack=i1}catch{}}throw r1}}_request(_g,t1){typeof _g=="string"?(t1=t1||{},t1.url=_g):t1=_g||{},t1=mergeConfig(this.defaults,t1);const{transitional:r1,paramsSerializer:n1,headers:i1}=t1;r1!==void 0&&validator.assertOptions(r1,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),n1!=null&&(utils$1.isFunction(n1)?t1.paramsSerializer={serialize:n1}:validator.assertOptions(n1,{encode:validators.function,serialize:validators.function},!0)),t1.method=(t1.method||this.defaults.method||"get").toLowerCase();let o1=i1&&utils$1.merge(i1.common,i1[t1.method]);i1&&utils$1.forEach(["delete","get","head","post","put","patch","common"],f1=>{delete i1[f1]}),t1.headers=AxiosHeaders.concat(o1,i1);const a1=[];let u1=!0;this.interceptors.request.forEach(function(g1){typeof g1.runWhen=="function"&&g1.runWhen(t1)===!1||(u1=u1&&g1.synchronous,a1.unshift(g1.fulfilled,g1.rejected))});const s1=[];this.interceptors.response.forEach(function(g1){s1.push(g1.fulfilled,g1.rejected)});let l1,c1=0,d1;if(!u1){const f1=[dispatchRequest.bind(this),void 0];for(f1.unshift.apply(f1,a1),f1.push.apply(f1,s1),d1=f1.length,l1=Promise.resolve(t1);c1<d1;)l1=l1.then(f1[c1++],f1[c1++]);return l1}d1=a1.length;let h1=t1;for(c1=0;c1<d1;){const f1=a1[c1++],g1=a1[c1++];try{h1=f1(h1)}catch(v1){g1.call(this,v1);break}}try{l1=dispatchRequest.call(this,h1)}catch(f1){return Promise.reject(f1)}for(c1=0,d1=s1.length;c1<d1;)l1=l1.then(s1[c1++],s1[c1++]);return l1}getUri(_g){_g=mergeConfig(this.defaults,_g);const t1=buildFullPath(_g.baseURL,_g.url);return buildURL(t1,_g.params,_g.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(_g){Axios.prototype[_g]=function(t1,r1){return this.request(mergeConfig(r1||{},{method:_g,url:t1,data:(r1||{}).data}))}});utils$1.forEach(["post","put","patch"],function(_g){function t1(r1){return function(i1,o1,a1){return this.request(mergeConfig(a1||{},{method:_g,headers:r1?{"Content-Type":"multipart/form-data"}:{},url:i1,data:o1}))}}Axios.prototype[_g]=t1(),Axios.prototype[_g+"Form"]=t1(!0)});class CancelToken{constructor(_g){if(typeof _g!="function")throw new TypeError("executor must be a function.");let t1;this.promise=new Promise(function(i1){t1=i1});const r1=this;this.promise.then(n1=>{if(!r1._listeners)return;let i1=r1._listeners.length;for(;i1-- >0;)r1._listeners[i1](n1);r1._listeners=null}),this.promise.then=n1=>{let i1;const o1=new Promise(a1=>{r1.subscribe(a1),i1=a1}).then(n1);return o1.cancel=function(){r1.unsubscribe(i1)},o1},_g(function(i1,o1,a1){r1.reason||(r1.reason=new CanceledError(i1,o1,a1),t1(r1.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(_g){if(this.reason){_g(this.reason);return}this._listeners?this._listeners.push(_g):this._listeners=[_g]}unsubscribe(_g){if(!this._listeners)return;const t1=this._listeners.indexOf(_g);t1!==-1&&this._listeners.splice(t1,1)}static source(){let _g;return{token:new CancelToken(function(n1){_g=n1}),cancel:_g}}}function spread(e1){return function(t1){return e1.apply(null,t1)}}function isAxiosError(e1){return utils$1.isObject(e1)&&e1.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([e1,_g])=>{HttpStatusCode[_g]=e1});function createInstance(e1){const _g=new Axios(e1),t1=bind(Axios.prototype.request,_g);return utils$1.extend(t1,Axios.prototype,_g,{allOwnKeys:!0}),utils$1.extend(t1,_g,null,{allOwnKeys:!0}),t1.create=function(n1){return createInstance(mergeConfig(e1,n1))},t1}const axios=createInstance(defaults$1);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(_g){return Promise.all(_g)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=e1=>formDataToJSON(utils$1.isHTMLForm(e1)?new FormData(e1):e1);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;const API_ENDPOINT="https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",API_ENDPOINT_RENDER_IMAGE="https://api.runpod.ai/v2/robzzhxhypgvc0/runsync",TOKEN="J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",api=axios.create({baseURL:API_ENDPOINT});async function renderImage(e1,_g,t1,r1){const n1=await convertToBase64(e1),i1=await convertToBase64(_g),o1=await fetch(`${API_ENDPOINT_RENDER_IMAGE}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${TOKEN}`},body:JSON.stringify({id:randomNumberInRange(1,65536),input:{action:"RenderImage",image:n1,image_objects:i1,prompt_positive:t1,prompt_negative:r1}})});if(o1.ok){const u1=await o1.json(),{output:s1}=u1;console.log(s1);const l1=base64ToBlob(s1.result[0]);return{blob:URL.createObjectURL(l1),seed:"42"}}const a1=await o1.json();throw new Error(`Something went wrong: ${a1.errors}`)}async function inpaint(e1,_g,t1,r1,n1,i1=null,o1){const a1=await convertToBase64(e1),u1=await convertToBase64(n1),s1=i1?await convertToBase64(i1):null,l1=await fetch(`${API_ENDPOINT}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${TOKEN}`},body:JSON.stringify({id:randomNumberInRange(1,65536),input:{image:a1,mask:u1,call_to_api:{api_call:"inpainting"},model:o1,ldm_steps:_g.ldmSteps,ldm_sampler:_g.ldmSampler,zits_wireframe:_g.zitsWireframe,cv2_flag:_g.cv2Flag,cv2_radius:_g.cv2Radius,hd_strategy:"Crop",hd_strategy_crop_triger_size:640,hd_strategy_crop_margin:128,hd_trategy_resize_imit:2048,prompt:_g.prompt,negative_prompt:_g.negativePrompt,use_croper:_g.showCropper,croper_x:t1.x,croper_y:t1.y,croper_height:t1.height,croper_width:t1.width,use_extender:_g.showExtender,extender_x:r1.x,extender_y:r1.y,extender_height:r1.height,extender_width:r1.width,sd_mask_blur:_g.sdMaskBlur,sd_strength:_g.sdStrength,sd_steps:_g.sdSteps,sd_guidance_scale:_g.sdGuidanceScale,sd_sampler:_g.sdSampler,sd_seed:_g.seedFixed?_g.seed:-1,sd_match_histograms:_g.sdMatchHistograms,sd_freeu:_g.enableFreeu,sd_freeu_config:_g.freeuConfig,sd_lcm_lora:_g.enableLCMLora,paint_by_example_example_image:s1,p2p_image_guidance_scale:_g.p2pImageGuidanceScale,enable_controlnet:_g.enableControlnet,controlnet_conditioning_scale:_g.controlnetConditioningScale,controlnet_method:_g.controlnetMethod?_g.controlnetMethod:"",powerpaint_task:_g.showExtender?PowerPaintTask.outpainting:_g.powerpaintTask}})});if(l1.ok){const d1=await l1.json(),{output:h1}=d1,f1=base64ToBlob(h1);return{blob:URL.createObjectURL(f1),seed:"42"}}const c1=await l1.json();throw new Error(`Something went wrong: ${c1.errors}`)}async function switchPluginModel(e1,_g){return api.post("/switch_plugin_model",{plugin_name:e1,model_name:_g})}async function runPlugin(e1,_g,t1,r1,n1,i1){const o1=await convertToBase64(t1),a1=await fetch(`${API_ENDPOINT}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${TOKEN}`},body:JSON.stringify({id:randomNumberInRange(1,65536),input:{call_to_api:{api_call:_g,plugin_name:_g,model_name:r1.removeBGModel},name:_g,image:o1,upscale:n1,clicks:i1}})});if(a1.ok){const s1=await a1.json(),{output:l1}=s1,c1=base64ToBlob(l1);return{blob:URL.createObjectURL(c1)}}const u1=await a1.json();throw new Error(u1)}async function postAdjustMask(e1,_g,t1){const r1=await convertToBase64(e1),n1=await fetch(`${API_ENDPOINT}/adjust_mask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mask:r1,operate:_g,kernel_size:t1})});if(n1.ok)return await n1.blob();const i1=await n1.json();throw new Error(i1)}const defaultValues={file:null,paintByExampleFile:null,customMask:null,imageHeight:0,imageWidth:0,clipWidth:0,clipHeight:0,scaledWidth:0,userWindowWidth:0,userWindowHeight:0,scaledHeight:0,aspectRatio:"16:9",isInpainting:!1,isPluginRunning:!1,isAdjustingMask:!1,disableShortCuts:!1,windowSize:{height:600,width:800},editorState:{baseBrushSize:DEFAULT_BRUSH_SIZE,brushSizeScale:1,renders:[],extraMasks:[],prevExtraMasks:[],temporaryMasks:[],lineGroups:[],lastLineGroup:[],curLineGroup:[],canvasGroups:[],currCanvasGroups:[],lastCanvasGroups:[],redoRenders:[],redoCurLines:[],redoLineGroups:[],redoCurCanvas:[]},interactiveSegState:{isInteractiveSeg:!1,tmpInteractiveSegMask:null,clicks:[]},cropperState:{x:0,y:0,width:512,height:512},extenderState:{x:0,y:0,width:512,height:512},isCropperExtenderResizing:!1,fileManagerState:{sortBy:SortBy.CTIME,sortOrder:SortOrder.DESCENDING,layout:"masonry",searchText:"",inputDirectory:"",outputDirectory:""},serverConfig:paintByExampleConfig,settings:{model:{name:"lama",path:"lama",model_type:"inpaint",support_controlnet:!1,support_strength:!1,support_outpainting:!1,controlnets:[],support_freeu:!1,support_lcm_lora:!1,is_single_file_diffusers:!1,need_prompt:!1},enableControlnet:!1,showCropper:!1,showExtender:!1,showDrawing:!1,showSelectable:!1,extenderDirection:ExtenderDirection.xy,enableDownloadMask:!1,enableManualInpainting:!1,enableUploadMask:!1,enableAutoExtractPrompt:!0,ldmSteps:30,ldmSampler:LDMSampler.ddim,zitsWireframe:!0,cv2Radius:5,cv2Flag:CV2Flag.INPAINT_NS,prompt:DEFAULT_POSITIVE_PROMPT,negativePrompt:DEFAULT_NEGATIVE_PROMPT,seed:42,seedFixed:!1,sdMaskBlur:12,sdStrength:1,sdSteps:50,sdGuidanceScale:7.5,sdSampler:"DPM++ 2M",sdMatchHistograms:!1,sdScale:1,p2pImageGuidanceScale:1.5,controlnetConditioningScale:.4,controlnetMethod:"lllyasviel/control_v11p_sd15_canny",enableLCMLora:!1,enableFreeu:!1,freeuConfig:{s1:.9,s2:.2,b1:1.2,b2:1.4},powerpaintTask:PowerPaintTask.text_guided,adjustMaskKernelSize:12}},useLanguageStore=createWithEqualityFn(e1=>({language:"",setLanguage:_g=>e1({language:_g})})),useStore=createWithEqualityFn()(persist(immer((e1,_g)=>({...defaultValues,showPrevMask:async()=>{if(_g().settings.showExtender)return;const{lastLineGroup:t1,curLineGroup:r1,prevExtraMasks:n1,extraMasks:i1}=_g().editorState;if(r1.length!==0||i1.length!==0)return;const{imageWidth:o1,imageHeight:a1}=_g(),u1=generateMask(o1,a1,[t1],n1,BRUSH_COLOR);try{const s1=await canvasToImage(u1);e1(l1=>{l1.editorState.temporaryMasks.push(s1)})}catch(s1){console.error(s1);return}},hidePrevMask:()=>{e1(t1=>{t1.editorState.temporaryMasks=[]})},getCurrentTargetFile:async()=>{const t1=_g().file,r1=_g().editorState.renders;let n1=t1;if(r1.length>0){const i1=r1[r1.length-1];n1=await srcToFile(i1.currentSrc,t1.name,t1.type)}return n1},runInpainting:async t1=>{const{isInpainting:r1,aspectRatio:n1,file:i1,paintByExampleFile:o1,imageWidth:a1,imageHeight:u1,settings:s1,cropperState:l1,extenderState:c1,userWindowWidth:d1,userWindowHeight:h1}=_g();if(r1||i1===null||_g().settings.model.support_outpainting&&s1.showExtender&&c1.height===u1&&c1.width===a1)return;const{lastLineGroup:f1,curLineGroup:g1,lineGroups:v1,renders:$1,prevExtraMasks:y1,extraMasks:_1,currCanvasGroups:E1}=_g().editorState;let T1=[],P1=[];if(E1.length===0){toast({variant:"destructive",description:"Please draw mask on picture"});return}const k1=[...v1,P1];e1(H1=>{H1.isInpainting=!0}),console.log("run inpainging");const{targetMask:N1,targetFile:W1}=await generateFromCanvas(E1[E1.length-1],n1,d1,h1);try{const H1=await inpaint(dataURItoBlob(W1),s1,l1,c1,dataURItoBlob(N1),o1,t1),{blob:ty,seed:ey}=H1;ey&&_g().setSeed(parseInt(ey,10));const ly=new Image;await loadImage(ly,ty);const oy=[...$1,ly];_g().setImageSize(ly.width,ly.height),_g().updateEditorState({renders:oy,lineGroups:k1,lastLineGroup:P1,curLineGroup:[],extraMasks:[],prevExtraMasks:T1})}catch(H1){toast({variant:"destructive",description:H1.message?H1.message:H1.toString()})}_g().resetRedoState(),e1(H1=>{H1.isInpainting=!1,H1.editorState.temporaryMasks=[]})},runImgRendering:async()=>{const{isInpainting:t1,aspectRatio:r1,userWindowWidth:n1,userWindowHeight:i1}=_g();if(t1)return;const{prompt:o1,negativePrompt:a1}=_g().settings,{renders:u1,currCanvasGroups:s1}=_g().editorState;if(!o1.trim()){toast({variant:"destructive",title:"Uh oh! Something went wrong.",description:"Please write a prompt"});return}e1(d1=>{d1.isInpainting=!0});const{targetFile:l1,staticElements:c1}=await generateFromCanvas(s1[s1.length-1],r1,n1,i1);console.log(l1),console.log(c1);try{const d1=await renderImage(dataURItoBlob(l1),dataURItoBlob(c1),o1,a1),{blob:h1,seed:f1}=d1;f1&&_g().setSeed(parseInt(f1,10));const g1=new Image;await loadImage(g1,h1);const v1=[...u1,g1];_g().setImageSize(g1.width,g1.height),_g().updateEditorState({renders:v1}),toast({description:"LOADED NEW IMAGE SUCCESS"})}catch(d1){toast({variant:"destructive",description:d1.message?d1.message:d1.toString()})}e1(d1=>{d1.isInpainting=!1,d1.editorState.temporaryMasks=[]})},runRenderablePlugin:async(t1,r1,n1={upscale:1})=>{const{renders:i1,lineGroups:o1}=_g().editorState;e1(a1=>{a1.isPluginRunning=!0});try{const a1=new Date,u1=await _g().getCurrentTargetFile(),s1=await runPlugin(t1,r1,u1,_g().serverConfig,n1.upscale),{blob:l1}=s1;if(t1){const h1=new Image;await loadImage(h1,l1),e1(f1=>{f1.editorState.extraMasks.push(h1)})}else{const h1=new Image;await loadImage(h1,l1),_g().setImageSize(h1.width,h1.height);const f1=[...i1,h1],g1=[...o1,[]];_g().updateEditorState({renders:f1,lineGroups:g1})}const d1=new Date().getTime()-a1.getTime();toast({description:`Run ${r1} successfully in ${d1/1e3}s`})}catch(a1){toast({variant:"destructive",description:a1.message?a1.message:a1.toString()})}e1(a1=>{a1.isPluginRunning=!1})},updateEditorState:t1=>{e1(r1=>{r1.editorState={...r1.editorState,...t1}})},cleanCurLineGroup:()=>{_g().updateEditorState({curLineGroup:[]})},handleCanvasMouseDown:t1=>{let r1=[];const n1=_g();n1.runMannually()&&(r1=[...n1.editorState.curLineGroup]),r1.push({size:n1.getBrushSize(),pts:[t1]}),e1(i1=>{i1.editorState.curLineGroup=r1})},handleSaveState:t1=>{let r1=[];r1=[..._g().editorState.currCanvasGroups],debugLog(LOG_LEVELS.DEBUG,`canvaGroup
`,r1);const i1=t1.toJSON(["lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","gradientAngle","selectable","hasControls","source","editable","top","left"]),o1=JSON.stringify(i1),u1={id:Date.now()+"_"+Math.floor(Math.random()*1e4),data:o1};debugLog(LOG_LEVELS.DEBUG,`newElement data
`,JSON.parse(u1.data)),r1.push(u1),e1(s1=>{s1.editorState.currCanvasGroups=r1})},handleCanvasMouseMove:t1=>{e1(r1=>{const n1=r1.editorState.curLineGroup;n1.length&&n1[n1.length-1].pts.push(t1)})},runMannually:()=>{const t1=_g();return t1.settings.enableManualInpainting||t1.settings.model.model_type!==MODEL_TYPE_INPAINT},getIsProcessing:()=>_g().isInpainting||_g().isPluginRunning||_g().isAdjustingMask,isSD:()=>_g().settings.model.model_type!==MODEL_TYPE_INPAINT,undoDisabled:()=>{const t1=_g().editorState;if(t1.renders.length>0)return!1;if(_g().runMannually()){if(t1.currCanvasGroups.length===0)return!0}else if(t1.renders.length===0)return!0;return!1},undo:()=>{_g().editorState.currCanvasGroups.length!==0?e1(t1=>{const r1=t1.editorState;if(r1.currCanvasGroups.length===0)return;r1.lastCanvasGroups=[];const n1=r1.currCanvasGroups.pop();debugLog(LOG_LEVELS.DEBUG,`lastSaved
`,JSON.parse(n1.data)),r1.redoCurCanvas.push(n1)}):e1(t1=>{const r1=t1.editorState;if(r1.renders.length===0||r1.lineGroups.length===0)return;const n1=r1.lineGroups.pop();r1.redoLineGroups.push(n1),r1.redoCurLines=[],r1.curLineGroup=[];const i1=r1.renders.pop();r1.redoRenders.push(i1)})},redoDisabled:()=>{const t1=_g().editorState;if(t1.redoRenders.length>0)return!1;if(_g().runMannually()){if(t1.redoCurCanvas.length===0)return!0}else if(t1.redoRenders.length===0)return!0;return!1},redo:()=>{_g().runMannually()&&_g().editorState.redoCurCanvas.length!==0?e1(t1=>{const r1=t1.editorState;if(r1.redoCurCanvas.length===0)return;const n1=r1.redoCurCanvas.pop();r1.currCanvasGroups.push(n1)}):e1(t1=>{const r1=t1.editorState;if(r1.redoRenders.length===0||r1.redoLineGroups.length===0)return;const n1=r1.redoLineGroups.pop();r1.lineGroups.push(n1),r1.curLineGroup=[];const i1=r1.redoRenders.pop();r1.renders.push(i1)})},resetRedoState:()=>{e1(t1=>{t1.editorState.redoCurLines=[],t1.editorState.redoLineGroups=[],t1.editorState.redoRenders=[]})},updateAppState:t1=>{e1(()=>t1)},getBrushSize:()=>_g().editorState.baseBrushSize*_g().editorState.brushSizeScale,showPromptInput:()=>{const t1=_g().settings.model;return t1.model_type!==MODEL_TYPE_INPAINT&&t1.name!==PAINT_BY_EXAMPLE},setServerConfig:t1=>{e1(r1=>{r1.serverConfig=t1,r1.settings.enableControlnet=t1.enableControlnet,r1.settings.controlnetMethod=t1.controlnetMethod})},updateServerConfig:t1=>{e1(r1=>{r1.serverConfig={...r1.serverConfig,...t1},console.log(r1.serverConfig)})},updateSettings:t1=>{e1(r1=>{r1.settings={...r1.settings,...t1}})},setModel:t1=>{e1(r1=>{r1.settings.model=t1,t1.support_controlnet&&!t1.controlnets.includes(r1.settings.controlnetMethod)&&(r1.settings.controlnetMethod=t1.controlnets[0])})},updateFileManagerState:t1=>{e1(r1=>{r1.fileManagerState={...r1.fileManagerState,...t1}})},updateInteractiveSegState:t1=>{e1(r1=>({...r1,interactiveSegState:{...r1.interactiveSegState,...t1}}))},resetInteractiveSegState:()=>{_g().updateInteractiveSegState(defaultValues.interactiveSegState)},handleInteractiveSegAccept:()=>{e1(t1=>{t1.interactiveSegState.tmpInteractiveSegMask&&t1.editorState.extraMasks.push(t1.interactiveSegState.tmpInteractiveSegMask),t1.interactiveSegState={...defaultValues.interactiveSegState}})},setIsInpainting:t1=>e1(r1=>{r1.isInpainting=t1}),setFile:async t1=>{e1(r1=>{r1.file=t1})},setCustomFile:t1=>e1(r1=>{r1.customMask=t1}),setBaseBrushSize:t1=>e1(r1=>{r1.editorState.baseBrushSize=t1}),decreaseBaseBrushSize:()=>{const t1=_g().editorState.baseBrushSize;let r1=t1;t1>10&&(r1=t1-10),t1<=10&&t1>0&&(r1=t1-3),_g().setBaseBrushSize(r1)},increaseBaseBrushSize:()=>{const t1=_g().editorState.baseBrushSize,r1=Math.min(t1+10,MAX_BRUSH_SIZE);_g().setBaseBrushSize(r1)},setImageSize:(t1,r1)=>{e1(n1=>{n1.imageWidth=t1,n1.imageHeight=r1,n1.editorState.brushSizeScale=Math.max(Math.min(t1,r1),512)/512}),_g().resetExtender(t1,r1)},setCropperX:t1=>e1(r1=>{r1.cropperState.x=t1}),setCropperY:t1=>e1(r1=>{r1.cropperState.y=t1}),setCropperWidth:t1=>e1(r1=>{r1.cropperState.width=t1}),setCropperHeight:t1=>e1(r1=>{r1.cropperState.height=t1}),setExtenderX:t1=>e1(r1=>{r1.extenderState.x=t1}),setExtenderY:t1=>e1(r1=>{r1.extenderState.y=t1}),setExtenderWidth:t1=>e1(r1=>{r1.extenderState.width=t1}),setExtenderHeight:t1=>e1(r1=>{r1.extenderState.height=t1}),setIsCropperExtenderResizing:t1=>e1(r1=>{r1.isCropperExtenderResizing=t1}),updateExtenderDirection:t1=>{console.log(`updateExtenderDirection: ${JSON.stringify(_g().extenderState)}`),e1(r1=>{r1.settings.extenderDirection=t1,r1.extenderState.x=0,r1.extenderState.y=0,r1.extenderState.width=r1.imageWidth,r1.extenderState.height=r1.imageHeight}),_g().updateExtenderByBuiltIn(t1,1.5)},updateExtenderByBuiltIn:(t1,r1)=>{const n1={...defaultValues.extenderState};let{x:i1,y:o1,width:a1,height:u1}=n1;const{imageWidth:s1,imageHeight:l1}=_g();switch(a1=s1,u1=l1,t1){case ExtenderDirection.x:i1=-Math.ceil(s1*(r1-1)/2),a1=Math.ceil(s1*r1);break;case ExtenderDirection.y:o1=-Math.ceil(l1*(r1-1)/2),u1=Math.ceil(l1*r1);break;case ExtenderDirection.xy:i1=-Math.ceil(s1*(r1-1)/2),o1=-Math.ceil(l1*(r1-1)/2),a1=Math.ceil(s1*r1),u1=Math.ceil(l1*r1);break}e1(c1=>{c1.extenderState.x=i1,c1.extenderState.y=o1,c1.extenderState.width=a1,c1.extenderState.height=u1})},resetExtender:(t1,r1)=>{e1(n1=>{n1.extenderState.x=0,n1.extenderState.y=0,n1.extenderState.width=t1,n1.extenderState.height=r1})},setSeed:t1=>e1(r1=>{r1.settings.seed=t1}),adjustMask:async t1=>{const{imageWidth:r1,imageHeight:n1}=_g(),{curLineGroup:i1,extraMasks:o1}=_g().editorState,{adjustMaskKernelSize:a1}=_g().settings;if(i1.length===0&&o1.length===0)return;e1(d1=>{d1.isAdjustingMask=!0});const u1=generateMask(r1,n1,[i1],o1,BRUSH_COLOR),s1=dataURItoBlob(u1.toDataURL()),l1=await postAdjustMask(s1,t1,a1),c1=await blobToImage(l1);e1(d1=>{d1.editorState.extraMasks=[c1],d1.editorState.curLineGroup=[]}),e1(d1=>{d1.isAdjustingMask=!1})},clearMask:()=>{e1(t1=>{t1.editorState.extraMasks=[],t1.editorState.curLineGroup=[]})}})),{name:"ZUSTAND_STATE",version:1,partialize:e1=>Object.fromEntries(Object.entries(e1).filter(([_g])=>["fileManagerState","settings"].includes(_g)))}),shallow$1),Input=reactExports.forwardRef(({className:e1,type:_g,...t1},r1)=>{const n1=useStore(a1=>a1.updateAppState),i1=()=>{n1({disableShortCuts:!0})},o1=()=>{n1({disableShortCuts:!1})};return jsxRuntimeExports.jsx("input",{type:_g,className:cn$1("flex h-8 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e1),ref:r1,autoComplete:"off",tabIndex:-1,onFocus:i1,onBlur:o1,...t1})});Input.displayName="Input";const NumberInput=reactExports.forwardRef(({numberValue:e1,allowFloat:_g,onNumberValueChange:t1,...r1},n1)=>{const[i1,o1]=reactExports.useState(e1.toString());reactExports.useEffect(()=>{i1!==e1.toString()+"."&&o1(e1.toString())},[e1]);const a1=u1=>{let l1=u1.target.value;if(_g){if(l1=l1.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1"),l1.length===0){t1(0);return}t1(parseFloat(l1))}else{if(l1=l1.replace(/\D/g,""),l1.length===0){t1(0);return}t1(parseInt(l1,10))}o1(l1)};return jsxRuntimeExports.jsx(Input,{ref:n1,value:i1,onInput:a1,...r1})});var useReactId=React$1.useId||(()=>{}),count$1=0;function useId(e1){const[_g,t1]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{e1||t1(r1=>r1??String(count$1++))},[e1]),e1||(_g?`radix-${_g}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=e1=>({x:e1,y:e1}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(e1,_g,t1){return max(e1,min(_g,t1))}function evaluate(e1,_g){return typeof e1=="function"?e1(_g):e1}function getSide(e1){return e1.split("-")[0]}function getAlignment(e1){return e1.split("-")[1]}function getOppositeAxis(e1){return e1==="x"?"y":"x"}function getAxisLength(e1){return e1==="y"?"height":"width"}function getSideAxis(e1){return["top","bottom"].includes(getSide(e1))?"y":"x"}function getAlignmentAxis(e1){return getOppositeAxis(getSideAxis(e1))}function getAlignmentSides(e1,_g,t1){t1===void 0&&(t1=!1);const r1=getAlignment(e1),n1=getAlignmentAxis(e1),i1=getAxisLength(n1);let o1=n1==="x"?r1===(t1?"end":"start")?"right":"left":r1==="start"?"bottom":"top";return _g.reference[i1]>_g.floating[i1]&&(o1=getOppositePlacement(o1)),[o1,getOppositePlacement(o1)]}function getExpandedPlacements(e1){const _g=getOppositePlacement(e1);return[getOppositeAlignmentPlacement(e1),_g,getOppositeAlignmentPlacement(_g)]}function getOppositeAlignmentPlacement(e1){return e1.replace(/start|end/g,_g=>oppositeAlignmentMap[_g])}function getSideList(e1,_g,t1){const r1=["left","right"],n1=["right","left"],i1=["top","bottom"],o1=["bottom","top"];switch(e1){case"top":case"bottom":return t1?_g?n1:r1:_g?r1:n1;case"left":case"right":return _g?i1:o1;default:return[]}}function getOppositeAxisPlacements(e1,_g,t1,r1){const n1=getAlignment(e1);let i1=getSideList(getSide(e1),t1==="start",r1);return n1&&(i1=i1.map(o1=>o1+"-"+n1),_g&&(i1=i1.concat(i1.map(getOppositeAlignmentPlacement)))),i1}function getOppositePlacement(e1){return e1.replace(/left|right|bottom|top/g,_g=>oppositeSideMap[_g])}function expandPaddingObject(e1){return{top:0,right:0,bottom:0,left:0,...e1}}function getPaddingObject(e1){return typeof e1!="number"?expandPaddingObject(e1):{top:e1,right:e1,bottom:e1,left:e1}}function rectToClientRect(e1){const{x:_g,y:t1,width:r1,height:n1}=e1;return{width:r1,height:n1,top:t1,left:_g,right:_g+r1,bottom:t1+n1,x:_g,y:t1}}function computeCoordsFromPlacement(e1,_g,t1){let{reference:r1,floating:n1}=e1;const i1=getSideAxis(_g),o1=getAlignmentAxis(_g),a1=getAxisLength(o1),u1=getSide(_g),s1=i1==="y",l1=r1.x+r1.width/2-n1.width/2,c1=r1.y+r1.height/2-n1.height/2,d1=r1[a1]/2-n1[a1]/2;let h1;switch(u1){case"top":h1={x:l1,y:r1.y-n1.height};break;case"bottom":h1={x:l1,y:r1.y+r1.height};break;case"right":h1={x:r1.x+r1.width,y:c1};break;case"left":h1={x:r1.x-n1.width,y:c1};break;default:h1={x:r1.x,y:r1.y}}switch(getAlignment(_g)){case"start":h1[o1]-=d1*(t1&&s1?-1:1);break;case"end":h1[o1]+=d1*(t1&&s1?-1:1);break}return h1}const computePosition$1=async(e1,_g,t1)=>{const{placement:r1="bottom",strategy:n1="absolute",middleware:i1=[],platform:o1}=t1,a1=i1.filter(Boolean),u1=await(o1.isRTL==null?void 0:o1.isRTL(_g));let s1=await o1.getElementRects({reference:e1,floating:_g,strategy:n1}),{x:l1,y:c1}=computeCoordsFromPlacement(s1,r1,u1),d1=r1,h1={},f1=0;for(let g1=0;g1<a1.length;g1++){const{name:v1,fn:$1}=a1[g1],{x:y1,y:_1,data:E1,reset:T1}=await $1({x:l1,y:c1,initialPlacement:r1,placement:d1,strategy:n1,middlewareData:h1,rects:s1,platform:o1,elements:{reference:e1,floating:_g}});l1=y1??l1,c1=_1??c1,h1={...h1,[v1]:{...h1[v1],...E1}},T1&&f1<=50&&(f1++,typeof T1=="object"&&(T1.placement&&(d1=T1.placement),T1.rects&&(s1=T1.rects===!0?await o1.getElementRects({reference:e1,floating:_g,strategy:n1}):T1.rects),{x:l1,y:c1}=computeCoordsFromPlacement(s1,d1,u1)),g1=-1)}return{x:l1,y:c1,placement:d1,strategy:n1,middlewareData:h1}};async function detectOverflow(e1,_g){var t1;_g===void 0&&(_g={});const{x:r1,y:n1,platform:i1,rects:o1,elements:a1,strategy:u1}=e1,{boundary:s1="clippingAncestors",rootBoundary:l1="viewport",elementContext:c1="floating",altBoundary:d1=!1,padding:h1=0}=evaluate(_g,e1),f1=getPaddingObject(h1),v1=a1[d1?c1==="floating"?"reference":"floating":c1],$1=rectToClientRect(await i1.getClippingRect({element:(t1=await(i1.isElement==null?void 0:i1.isElement(v1)))==null||t1?v1:v1.contextElement||await(i1.getDocumentElement==null?void 0:i1.getDocumentElement(a1.floating)),boundary:s1,rootBoundary:l1,strategy:u1})),y1=c1==="floating"?{x:r1,y:n1,width:o1.floating.width,height:o1.floating.height}:o1.reference,_1=await(i1.getOffsetParent==null?void 0:i1.getOffsetParent(a1.floating)),E1=await(i1.isElement==null?void 0:i1.isElement(_1))?await(i1.getScale==null?void 0:i1.getScale(_1))||{x:1,y:1}:{x:1,y:1},T1=rectToClientRect(i1.convertOffsetParentRelativeRectToViewportRelativeRect?await i1.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a1,rect:y1,offsetParent:_1,strategy:u1}):y1);return{top:($1.top-T1.top+f1.top)/E1.y,bottom:(T1.bottom-$1.bottom+f1.bottom)/E1.y,left:($1.left-T1.left+f1.left)/E1.x,right:(T1.right-$1.right+f1.right)/E1.x}}const arrow$3=e1=>({name:"arrow",options:e1,async fn(_g){const{x:t1,y:r1,placement:n1,rects:i1,platform:o1,elements:a1,middlewareData:u1}=_g,{element:s1,padding:l1=0}=evaluate(e1,_g)||{};if(s1==null)return{};const c1=getPaddingObject(l1),d1={x:t1,y:r1},h1=getAlignmentAxis(n1),f1=getAxisLength(h1),g1=await o1.getDimensions(s1),v1=h1==="y",$1=v1?"top":"left",y1=v1?"bottom":"right",_1=v1?"clientHeight":"clientWidth",E1=i1.reference[f1]+i1.reference[h1]-d1[h1]-i1.floating[f1],T1=d1[h1]-i1.reference[h1],P1=await(o1.getOffsetParent==null?void 0:o1.getOffsetParent(s1));let k1=P1?P1[_1]:0;(!k1||!await(o1.isElement==null?void 0:o1.isElement(P1)))&&(k1=a1.floating[_1]||i1.floating[f1]);const N1=E1/2-T1/2,W1=k1/2-g1[f1]/2-1,H1=min(c1[$1],W1),ty=min(c1[y1],W1),ey=H1,ly=k1-g1[f1]-ty,oy=k1/2-g1[f1]/2+N1,Q1=clamp$1(ey,oy,ly),U1=!u1.arrow&&getAlignment(n1)!=null&&oy!==Q1&&i1.reference[f1]/2-(oy<ey?H1:ty)-g1[f1]/2<0,V1=U1?oy<ey?oy-ey:oy-ly:0;return{[h1]:d1[h1]+V1,data:{[h1]:Q1,centerOffset:oy-Q1-V1,...U1&&{alignmentOffset:V1}},reset:U1}}}),flip$2=function(e1){return e1===void 0&&(e1={}),{name:"flip",options:e1,async fn(_g){var t1,r1;const{placement:n1,middlewareData:i1,rects:o1,initialPlacement:a1,platform:u1,elements:s1}=_g,{mainAxis:l1=!0,crossAxis:c1=!0,fallbackPlacements:d1,fallbackStrategy:h1="bestFit",fallbackAxisSideDirection:f1="none",flipAlignment:g1=!0,...v1}=evaluate(e1,_g);if((t1=i1.arrow)!=null&&t1.alignmentOffset)return{};const $1=getSide(n1),y1=getSideAxis(a1),_1=getSide(a1)===a1,E1=await(u1.isRTL==null?void 0:u1.isRTL(s1.floating)),T1=d1||(_1||!g1?[getOppositePlacement(a1)]:getExpandedPlacements(a1)),P1=f1!=="none";!d1&&P1&&T1.push(...getOppositeAxisPlacements(a1,g1,f1,E1));const k1=[a1,...T1],N1=await detectOverflow(_g,v1),W1=[];let H1=((r1=i1.flip)==null?void 0:r1.overflows)||[];if(l1&&W1.push(N1[$1]),c1){const oy=getAlignmentSides(n1,o1,E1);W1.push(N1[oy[0]],N1[oy[1]])}if(H1=[...H1,{placement:n1,overflows:W1}],!W1.every(oy=>oy<=0)){var ty,ey;const oy=(((ty=i1.flip)==null?void 0:ty.index)||0)+1,Q1=k1[oy];if(Q1)return{data:{index:oy,overflows:H1},reset:{placement:Q1}};let U1=(ey=H1.filter(V1=>V1.overflows[0]<=0).sort((V1,K1)=>V1.overflows[1]-K1.overflows[1])[0])==null?void 0:ey.placement;if(!U1)switch(h1){case"bestFit":{var ly;const V1=(ly=H1.filter(K1=>{if(P1){const J1=getSideAxis(K1.placement);return J1===y1||J1==="y"}return!0}).map(K1=>[K1.placement,K1.overflows.filter(J1=>J1>0).reduce((J1,hy)=>J1+hy,0)]).sort((K1,J1)=>K1[1]-J1[1])[0])==null?void 0:ly[0];V1&&(U1=V1);break}case"initialPlacement":U1=a1;break}if(n1!==U1)return{reset:{placement:U1}}}return{}}}};function getSideOffsets(e1,_g){return{top:e1.top-_g.height,right:e1.right-_g.width,bottom:e1.bottom-_g.height,left:e1.left-_g.width}}function isAnySideFullyClipped(e1){return sides.some(_g=>e1[_g]>=0)}const hide$2=function(e1){return e1===void 0&&(e1={}),{name:"hide",options:e1,async fn(_g){const{rects:t1}=_g,{strategy:r1="referenceHidden",...n1}=evaluate(e1,_g);switch(r1){case"referenceHidden":{const i1=await detectOverflow(_g,{...n1,elementContext:"reference"}),o1=getSideOffsets(i1,t1.reference);return{data:{referenceHiddenOffsets:o1,referenceHidden:isAnySideFullyClipped(o1)}}}case"escaped":{const i1=await detectOverflow(_g,{...n1,altBoundary:!0}),o1=getSideOffsets(i1,t1.floating);return{data:{escapedOffsets:o1,escaped:isAnySideFullyClipped(o1)}}}default:return{}}}}};async function convertValueToCoords(e1,_g){const{placement:t1,platform:r1,elements:n1}=e1,i1=await(r1.isRTL==null?void 0:r1.isRTL(n1.floating)),o1=getSide(t1),a1=getAlignment(t1),u1=getSideAxis(t1)==="y",s1=["left","top"].includes(o1)?-1:1,l1=i1&&u1?-1:1,c1=evaluate(_g,e1);let{mainAxis:d1,crossAxis:h1,alignmentAxis:f1}=typeof c1=="number"?{mainAxis:c1,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...c1};return a1&&typeof f1=="number"&&(h1=a1==="end"?f1*-1:f1),u1?{x:h1*l1,y:d1*s1}:{x:d1*s1,y:h1*l1}}const offset$2=function(e1){return e1===void 0&&(e1=0),{name:"offset",options:e1,async fn(_g){var t1,r1;const{x:n1,y:i1,placement:o1,middlewareData:a1}=_g,u1=await convertValueToCoords(_g,e1);return o1===((t1=a1.offset)==null?void 0:t1.placement)&&(r1=a1.arrow)!=null&&r1.alignmentOffset?{}:{x:n1+u1.x,y:i1+u1.y,data:{...u1,placement:o1}}}}},shift$2=function(e1){return e1===void 0&&(e1={}),{name:"shift",options:e1,async fn(_g){const{x:t1,y:r1,placement:n1}=_g,{mainAxis:i1=!0,crossAxis:o1=!1,limiter:a1={fn:v1=>{let{x:$1,y:y1}=v1;return{x:$1,y:y1}}},...u1}=evaluate(e1,_g),s1={x:t1,y:r1},l1=await detectOverflow(_g,u1),c1=getSideAxis(getSide(n1)),d1=getOppositeAxis(c1);let h1=s1[d1],f1=s1[c1];if(i1){const v1=d1==="y"?"top":"left",$1=d1==="y"?"bottom":"right",y1=h1+l1[v1],_1=h1-l1[$1];h1=clamp$1(y1,h1,_1)}if(o1){const v1=c1==="y"?"top":"left",$1=c1==="y"?"bottom":"right",y1=f1+l1[v1],_1=f1-l1[$1];f1=clamp$1(y1,f1,_1)}const g1=a1.fn({..._g,[d1]:h1,[c1]:f1});return{...g1,data:{x:g1.x-t1,y:g1.y-r1}}}}},limitShift$2=function(e1){return e1===void 0&&(e1={}),{options:e1,fn(_g){const{x:t1,y:r1,placement:n1,rects:i1,middlewareData:o1}=_g,{offset:a1=0,mainAxis:u1=!0,crossAxis:s1=!0}=evaluate(e1,_g),l1={x:t1,y:r1},c1=getSideAxis(n1),d1=getOppositeAxis(c1);let h1=l1[d1],f1=l1[c1];const g1=evaluate(a1,_g),v1=typeof g1=="number"?{mainAxis:g1,crossAxis:0}:{mainAxis:0,crossAxis:0,...g1};if(u1){const _1=d1==="y"?"height":"width",E1=i1.reference[d1]-i1.floating[_1]+v1.mainAxis,T1=i1.reference[d1]+i1.reference[_1]-v1.mainAxis;h1<E1?h1=E1:h1>T1&&(h1=T1)}if(s1){var $1,y1;const _1=d1==="y"?"width":"height",E1=["top","left"].includes(getSide(n1)),T1=i1.reference[c1]-i1.floating[_1]+(E1&&(($1=o1.offset)==null?void 0:$1[c1])||0)+(E1?0:v1.crossAxis),P1=i1.reference[c1]+i1.reference[_1]+(E1?0:((y1=o1.offset)==null?void 0:y1[c1])||0)-(E1?v1.crossAxis:0);f1<T1?f1=T1:f1>P1&&(f1=P1)}return{[d1]:h1,[c1]:f1}}}},size$2=function(e1){return e1===void 0&&(e1={}),{name:"size",options:e1,async fn(_g){const{placement:t1,rects:r1,platform:n1,elements:i1}=_g,{apply:o1=()=>{},...a1}=evaluate(e1,_g),u1=await detectOverflow(_g,a1),s1=getSide(t1),l1=getAlignment(t1),c1=getSideAxis(t1)==="y",{width:d1,height:h1}=r1.floating;let f1,g1;s1==="top"||s1==="bottom"?(f1=s1,g1=l1===(await(n1.isRTL==null?void 0:n1.isRTL(i1.floating))?"start":"end")?"left":"right"):(g1=s1,f1=l1==="end"?"top":"bottom");const v1=h1-u1.top-u1.bottom,$1=d1-u1.left-u1.right,y1=min(h1-u1[f1],v1),_1=min(d1-u1[g1],$1),E1=!_g.middlewareData.shift;let T1=y1,P1=_1;if(c1?P1=l1||E1?min(_1,$1):$1:T1=l1||E1?min(y1,v1):v1,E1&&!l1){const N1=max(u1.left,0),W1=max(u1.right,0),H1=max(u1.top,0),ty=max(u1.bottom,0);c1?P1=d1-2*(N1!==0||W1!==0?N1+W1:max(u1.left,u1.right)):T1=h1-2*(H1!==0||ty!==0?H1+ty:max(u1.top,u1.bottom))}await o1({..._g,availableWidth:P1,availableHeight:T1});const k1=await n1.getDimensions(i1.floating);return d1!==k1.width||h1!==k1.height?{reset:{rects:!0}}:{}}}};function getNodeName(e1){return isNode(e1)?(e1.nodeName||"").toLowerCase():"#document"}function getWindow(e1){var _g;return(e1==null||(_g=e1.ownerDocument)==null?void 0:_g.defaultView)||window}function getDocumentElement(e1){var _g;return(_g=(isNode(e1)?e1.ownerDocument:e1.document)||window.document)==null?void 0:_g.documentElement}function isNode(e1){return e1 instanceof Node||e1 instanceof getWindow(e1).Node}function isElement(e1){return e1 instanceof Element||e1 instanceof getWindow(e1).Element}function isHTMLElement$1(e1){return e1 instanceof HTMLElement||e1 instanceof getWindow(e1).HTMLElement}function isShadowRoot(e1){return typeof ShadowRoot>"u"?!1:e1 instanceof ShadowRoot||e1 instanceof getWindow(e1).ShadowRoot}function isOverflowElement(e1){const{overflow:_g,overflowX:t1,overflowY:r1,display:n1}=getComputedStyle$1(e1);return/auto|scroll|overlay|hidden|clip/.test(_g+r1+t1)&&!["inline","contents"].includes(n1)}function isTableElement(e1){return["table","td","th"].includes(getNodeName(e1))}function isTopLayer(e1){return[":popover-open",":modal"].some(_g=>{try{return e1.matches(_g)}catch{return!1}})}function isContainingBlock(e1){const _g=isWebKit(),t1=getComputedStyle$1(e1);return t1.transform!=="none"||t1.perspective!=="none"||(t1.containerType?t1.containerType!=="normal":!1)||!_g&&(t1.backdropFilter?t1.backdropFilter!=="none":!1)||!_g&&(t1.filter?t1.filter!=="none":!1)||["transform","perspective","filter"].some(r1=>(t1.willChange||"").includes(r1))||["paint","layout","strict","content"].some(r1=>(t1.contain||"").includes(r1))}function getContainingBlock(e1){let _g=getParentNode(e1);for(;isHTMLElement$1(_g)&&!isLastTraversableNode(_g);){if(isTopLayer(_g))return null;if(isContainingBlock(_g))return _g;_g=getParentNode(_g)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(e1){return["html","body","#document"].includes(getNodeName(e1))}function getComputedStyle$1(e1){return getWindow(e1).getComputedStyle(e1)}function getNodeScroll(e1){return isElement(e1)?{scrollLeft:e1.scrollLeft,scrollTop:e1.scrollTop}:{scrollLeft:e1.scrollX,scrollTop:e1.scrollY}}function getParentNode(e1){if(getNodeName(e1)==="html")return e1;const _g=e1.assignedSlot||e1.parentNode||isShadowRoot(e1)&&e1.host||getDocumentElement(e1);return isShadowRoot(_g)?_g.host:_g}function getNearestOverflowAncestor(e1){const _g=getParentNode(e1);return isLastTraversableNode(_g)?e1.ownerDocument?e1.ownerDocument.body:e1.body:isHTMLElement$1(_g)&&isOverflowElement(_g)?_g:getNearestOverflowAncestor(_g)}function getOverflowAncestors(e1,_g,t1){var r1;_g===void 0&&(_g=[]),t1===void 0&&(t1=!0);const n1=getNearestOverflowAncestor(e1),i1=n1===((r1=e1.ownerDocument)==null?void 0:r1.body),o1=getWindow(n1);return i1?_g.concat(o1,o1.visualViewport||[],isOverflowElement(n1)?n1:[],o1.frameElement&&t1?getOverflowAncestors(o1.frameElement):[]):_g.concat(n1,getOverflowAncestors(n1,[],t1))}function getCssDimensions(e1){const _g=getComputedStyle$1(e1);let t1=parseFloat(_g.width)||0,r1=parseFloat(_g.height)||0;const n1=isHTMLElement$1(e1),i1=n1?e1.offsetWidth:t1,o1=n1?e1.offsetHeight:r1,a1=round(t1)!==i1||round(r1)!==o1;return a1&&(t1=i1,r1=o1),{width:t1,height:r1,$:a1}}function unwrapElement(e1){return isElement(e1)?e1:e1.contextElement}function getScale(e1){const _g=unwrapElement(e1);if(!isHTMLElement$1(_g))return createCoords(1);const t1=_g.getBoundingClientRect(),{width:r1,height:n1,$:i1}=getCssDimensions(_g);let o1=(i1?round(t1.width):t1.width)/r1,a1=(i1?round(t1.height):t1.height)/n1;return(!o1||!Number.isFinite(o1))&&(o1=1),(!a1||!Number.isFinite(a1))&&(a1=1),{x:o1,y:a1}}const noOffsets=createCoords(0);function getVisualOffsets(e1){const _g=getWindow(e1);return!isWebKit()||!_g.visualViewport?noOffsets:{x:_g.visualViewport.offsetLeft,y:_g.visualViewport.offsetTop}}function shouldAddVisualOffsets(e1,_g,t1){return _g===void 0&&(_g=!1),!t1||_g&&t1!==getWindow(e1)?!1:_g}function getBoundingClientRect(e1,_g,t1,r1){_g===void 0&&(_g=!1),t1===void 0&&(t1=!1);const n1=e1.getBoundingClientRect(),i1=unwrapElement(e1);let o1=createCoords(1);_g&&(r1?isElement(r1)&&(o1=getScale(r1)):o1=getScale(e1));const a1=shouldAddVisualOffsets(i1,t1,r1)?getVisualOffsets(i1):createCoords(0);let u1=(n1.left+a1.x)/o1.x,s1=(n1.top+a1.y)/o1.y,l1=n1.width/o1.x,c1=n1.height/o1.y;if(i1){const d1=getWindow(i1),h1=r1&&isElement(r1)?getWindow(r1):r1;let f1=d1,g1=f1.frameElement;for(;g1&&r1&&h1!==f1;){const v1=getScale(g1),$1=g1.getBoundingClientRect(),y1=getComputedStyle$1(g1),_1=$1.left+(g1.clientLeft+parseFloat(y1.paddingLeft))*v1.x,E1=$1.top+(g1.clientTop+parseFloat(y1.paddingTop))*v1.y;u1*=v1.x,s1*=v1.y,l1*=v1.x,c1*=v1.y,u1+=_1,s1+=E1,f1=getWindow(g1),g1=f1.frameElement}}return rectToClientRect({width:l1,height:c1,x:u1,y:s1})}function convertOffsetParentRelativeRectToViewportRelativeRect(e1){let{elements:_g,rect:t1,offsetParent:r1,strategy:n1}=e1;const i1=n1==="fixed",o1=getDocumentElement(r1),a1=_g?isTopLayer(_g.floating):!1;if(r1===o1||a1&&i1)return t1;let u1={scrollLeft:0,scrollTop:0},s1=createCoords(1);const l1=createCoords(0),c1=isHTMLElement$1(r1);if((c1||!c1&&!i1)&&((getNodeName(r1)!=="body"||isOverflowElement(o1))&&(u1=getNodeScroll(r1)),isHTMLElement$1(r1))){const d1=getBoundingClientRect(r1);s1=getScale(r1),l1.x=d1.x+r1.clientLeft,l1.y=d1.y+r1.clientTop}return{width:t1.width*s1.x,height:t1.height*s1.y,x:t1.x*s1.x-u1.scrollLeft*s1.x+l1.x,y:t1.y*s1.y-u1.scrollTop*s1.y+l1.y}}function getClientRects(e1){return Array.from(e1.getClientRects())}function getWindowScrollBarX(e1){return getBoundingClientRect(getDocumentElement(e1)).left+getNodeScroll(e1).scrollLeft}function getDocumentRect(e1){const _g=getDocumentElement(e1),t1=getNodeScroll(e1),r1=e1.ownerDocument.body,n1=max(_g.scrollWidth,_g.clientWidth,r1.scrollWidth,r1.clientWidth),i1=max(_g.scrollHeight,_g.clientHeight,r1.scrollHeight,r1.clientHeight);let o1=-t1.scrollLeft+getWindowScrollBarX(e1);const a1=-t1.scrollTop;return getComputedStyle$1(r1).direction==="rtl"&&(o1+=max(_g.clientWidth,r1.clientWidth)-n1),{width:n1,height:i1,x:o1,y:a1}}function getViewportRect(e1,_g){const t1=getWindow(e1),r1=getDocumentElement(e1),n1=t1.visualViewport;let i1=r1.clientWidth,o1=r1.clientHeight,a1=0,u1=0;if(n1){i1=n1.width,o1=n1.height;const s1=isWebKit();(!s1||s1&&_g==="fixed")&&(a1=n1.offsetLeft,u1=n1.offsetTop)}return{width:i1,height:o1,x:a1,y:u1}}function getInnerBoundingClientRect(e1,_g){const t1=getBoundingClientRect(e1,!0,_g==="fixed"),r1=t1.top+e1.clientTop,n1=t1.left+e1.clientLeft,i1=isHTMLElement$1(e1)?getScale(e1):createCoords(1),o1=e1.clientWidth*i1.x,a1=e1.clientHeight*i1.y,u1=n1*i1.x,s1=r1*i1.y;return{width:o1,height:a1,x:u1,y:s1}}function getClientRectFromClippingAncestor(e1,_g,t1){let r1;if(_g==="viewport")r1=getViewportRect(e1,t1);else if(_g==="document")r1=getDocumentRect(getDocumentElement(e1));else if(isElement(_g))r1=getInnerBoundingClientRect(_g,t1);else{const n1=getVisualOffsets(e1);r1={..._g,x:_g.x-n1.x,y:_g.y-n1.y}}return rectToClientRect(r1)}function hasFixedPositionAncestor(e1,_g){const t1=getParentNode(e1);return t1===_g||!isElement(t1)||isLastTraversableNode(t1)?!1:getComputedStyle$1(t1).position==="fixed"||hasFixedPositionAncestor(t1,_g)}function getClippingElementAncestors(e1,_g){const t1=_g.get(e1);if(t1)return t1;let r1=getOverflowAncestors(e1,[],!1).filter(a1=>isElement(a1)&&getNodeName(a1)!=="body"),n1=null;const i1=getComputedStyle$1(e1).position==="fixed";let o1=i1?getParentNode(e1):e1;for(;isElement(o1)&&!isLastTraversableNode(o1);){const a1=getComputedStyle$1(o1),u1=isContainingBlock(o1);!u1&&a1.position==="fixed"&&(n1=null),(i1?!u1&&!n1:!u1&&a1.position==="static"&&!!n1&&["absolute","fixed"].includes(n1.position)||isOverflowElement(o1)&&!u1&&hasFixedPositionAncestor(e1,o1))?r1=r1.filter(l1=>l1!==o1):n1=a1,o1=getParentNode(o1)}return _g.set(e1,r1),r1}function getClippingRect(e1){let{element:_g,boundary:t1,rootBoundary:r1,strategy:n1}=e1;const o1=[...t1==="clippingAncestors"?isTopLayer(_g)?[]:getClippingElementAncestors(_g,this._c):[].concat(t1),r1],a1=o1[0],u1=o1.reduce((s1,l1)=>{const c1=getClientRectFromClippingAncestor(_g,l1,n1);return s1.top=max(c1.top,s1.top),s1.right=min(c1.right,s1.right),s1.bottom=min(c1.bottom,s1.bottom),s1.left=max(c1.left,s1.left),s1},getClientRectFromClippingAncestor(_g,a1,n1));return{width:u1.right-u1.left,height:u1.bottom-u1.top,x:u1.left,y:u1.top}}function getDimensions(e1){const{width:_g,height:t1}=getCssDimensions(e1);return{width:_g,height:t1}}function getRectRelativeToOffsetParent(e1,_g,t1){const r1=isHTMLElement$1(_g),n1=getDocumentElement(_g),i1=t1==="fixed",o1=getBoundingClientRect(e1,!0,i1,_g);let a1={scrollLeft:0,scrollTop:0};const u1=createCoords(0);if(r1||!r1&&!i1)if((getNodeName(_g)!=="body"||isOverflowElement(n1))&&(a1=getNodeScroll(_g)),r1){const c1=getBoundingClientRect(_g,!0,i1,_g);u1.x=c1.x+_g.clientLeft,u1.y=c1.y+_g.clientTop}else n1&&(u1.x=getWindowScrollBarX(n1));const s1=o1.left+a1.scrollLeft-u1.x,l1=o1.top+a1.scrollTop-u1.y;return{x:s1,y:l1,width:o1.width,height:o1.height}}function isStaticPositioned(e1){return getComputedStyle$1(e1).position==="static"}function getTrueOffsetParent(e1,_g){return!isHTMLElement$1(e1)||getComputedStyle$1(e1).position==="fixed"?null:_g?_g(e1):e1.offsetParent}function getOffsetParent(e1,_g){const t1=getWindow(e1);if(isTopLayer(e1))return t1;if(!isHTMLElement$1(e1)){let n1=getParentNode(e1);for(;n1&&!isLastTraversableNode(n1);){if(isElement(n1)&&!isStaticPositioned(n1))return n1;n1=getParentNode(n1)}return t1}let r1=getTrueOffsetParent(e1,_g);for(;r1&&isTableElement(r1)&&isStaticPositioned(r1);)r1=getTrueOffsetParent(r1,_g);return r1&&isLastTraversableNode(r1)&&isStaticPositioned(r1)&&!isContainingBlock(r1)?t1:r1||getContainingBlock(e1)||t1}const getElementRects=async function(e1){const _g=this.getOffsetParent||getOffsetParent,t1=this.getDimensions,r1=await t1(e1.floating);return{reference:getRectRelativeToOffsetParent(e1.reference,await _g(e1.floating),e1.strategy),floating:{x:0,y:0,width:r1.width,height:r1.height}}};function isRTL(e1){return getComputedStyle$1(e1).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(e1,_g){let t1=null,r1;const n1=getDocumentElement(e1);function i1(){var a1;clearTimeout(r1),(a1=t1)==null||a1.disconnect(),t1=null}function o1(a1,u1){a1===void 0&&(a1=!1),u1===void 0&&(u1=1),i1();const{left:s1,top:l1,width:c1,height:d1}=e1.getBoundingClientRect();if(a1||_g(),!c1||!d1)return;const h1=floor(l1),f1=floor(n1.clientWidth-(s1+c1)),g1=floor(n1.clientHeight-(l1+d1)),v1=floor(s1),y1={rootMargin:-h1+"px "+-f1+"px "+-g1+"px "+-v1+"px",threshold:max(0,min(1,u1))||1};let _1=!0;function E1(T1){const P1=T1[0].intersectionRatio;if(P1!==u1){if(!_1)return o1();P1?o1(!1,P1):r1=setTimeout(()=>{o1(!1,1e-7)},1e3)}_1=!1}try{t1=new IntersectionObserver(E1,{...y1,root:n1.ownerDocument})}catch{t1=new IntersectionObserver(E1,y1)}t1.observe(e1)}return o1(!0),i1}function autoUpdate(e1,_g,t1,r1){r1===void 0&&(r1={});const{ancestorScroll:n1=!0,ancestorResize:i1=!0,elementResize:o1=typeof ResizeObserver=="function",layoutShift:a1=typeof IntersectionObserver=="function",animationFrame:u1=!1}=r1,s1=unwrapElement(e1),l1=n1||i1?[...s1?getOverflowAncestors(s1):[],...getOverflowAncestors(_g)]:[];l1.forEach($1=>{n1&&$1.addEventListener("scroll",t1,{passive:!0}),i1&&$1.addEventListener("resize",t1)});const c1=s1&&a1?observeMove(s1,t1):null;let d1=-1,h1=null;o1&&(h1=new ResizeObserver($1=>{let[y1]=$1;y1&&y1.target===s1&&h1&&(h1.unobserve(_g),cancelAnimationFrame(d1),d1=requestAnimationFrame(()=>{var _1;(_1=h1)==null||_1.observe(_g)})),t1()}),s1&&!u1&&h1.observe(s1),h1.observe(_g));let f1,g1=u1?getBoundingClientRect(e1):null;u1&&v1();function v1(){const $1=getBoundingClientRect(e1);g1&&($1.x!==g1.x||$1.y!==g1.y||$1.width!==g1.width||$1.height!==g1.height)&&t1(),g1=$1,f1=requestAnimationFrame(v1)}return t1(),()=>{var $1;l1.forEach(y1=>{n1&&y1.removeEventListener("scroll",t1),i1&&y1.removeEventListener("resize",t1)}),c1==null||c1(),($1=h1)==null||$1.disconnect(),h1=null,u1&&cancelAnimationFrame(f1)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(e1,_g,t1)=>{const r1=new Map,n1={platform,...t1},i1={...n1.platform,_c:r1};return computePosition$1(e1,_g,{...n1,platform:i1})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$2(e1,_g){if(e1===_g)return!0;if(typeof e1!=typeof _g)return!1;if(typeof e1=="function"&&e1.toString()===_g.toString())return!0;let t1,r1,n1;if(e1&&_g&&typeof e1=="object"){if(Array.isArray(e1)){if(t1=e1.length,t1!==_g.length)return!1;for(r1=t1;r1--!==0;)if(!deepEqual$2(e1[r1],_g[r1]))return!1;return!0}if(n1=Object.keys(e1),t1=n1.length,t1!==Object.keys(_g).length)return!1;for(r1=t1;r1--!==0;)if(!{}.hasOwnProperty.call(_g,n1[r1]))return!1;for(r1=t1;r1--!==0;){const i1=n1[r1];if(!(i1==="_owner"&&e1.$$typeof)&&!deepEqual$2(e1[i1],_g[i1]))return!1}return!0}return e1!==e1&&_g!==_g}function getDPR(e1){return typeof window>"u"?1:(e1.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(e1,_g){const t1=getDPR(e1);return Math.round(_g*t1)/t1}function useLatestRef(e1){const _g=reactExports.useRef(e1);return index(()=>{_g.current=e1}),_g}function useFloating(e1){e1===void 0&&(e1={});const{placement:_g="bottom",strategy:t1="absolute",middleware:r1=[],platform:n1,elements:{reference:i1,floating:o1}={},transform:a1=!0,whileElementsMounted:u1,open:s1}=e1,[l1,c1]=reactExports.useState({x:0,y:0,strategy:t1,placement:_g,middlewareData:{},isPositioned:!1}),[d1,h1]=reactExports.useState(r1);deepEqual$2(d1,r1)||h1(r1);const[f1,g1]=reactExports.useState(null),[v1,$1]=reactExports.useState(null),y1=reactExports.useCallback(V1=>{V1!==P1.current&&(P1.current=V1,g1(V1))},[]),_1=reactExports.useCallback(V1=>{V1!==k1.current&&(k1.current=V1,$1(V1))},[]),E1=i1||f1,T1=o1||v1,P1=reactExports.useRef(null),k1=reactExports.useRef(null),N1=reactExports.useRef(l1),W1=u1!=null,H1=useLatestRef(u1),ty=useLatestRef(n1),ey=reactExports.useCallback(()=>{if(!P1.current||!k1.current)return;const V1={placement:_g,strategy:t1,middleware:d1};ty.current&&(V1.platform=ty.current),computePosition(P1.current,k1.current,V1).then(K1=>{const J1={...K1,isPositioned:!0};ly.current&&!deepEqual$2(N1.current,J1)&&(N1.current=J1,reactDomExports.flushSync(()=>{c1(J1)}))})},[d1,_g,t1,ty]);index(()=>{s1===!1&&N1.current.isPositioned&&(N1.current.isPositioned=!1,c1(V1=>({...V1,isPositioned:!1})))},[s1]);const ly=reactExports.useRef(!1);index(()=>(ly.current=!0,()=>{ly.current=!1}),[]),index(()=>{if(E1&&(P1.current=E1),T1&&(k1.current=T1),E1&&T1){if(H1.current)return H1.current(E1,T1,ey);ey()}},[E1,T1,ey,H1,W1]);const oy=reactExports.useMemo(()=>({reference:P1,floating:k1,setReference:y1,setFloating:_1}),[y1,_1]),Q1=reactExports.useMemo(()=>({reference:E1,floating:T1}),[E1,T1]),U1=reactExports.useMemo(()=>{const V1={position:t1,left:0,top:0};if(!Q1.floating)return V1;const K1=roundByDPR(Q1.floating,l1.x),J1=roundByDPR(Q1.floating,l1.y);return a1?{...V1,transform:"translate("+K1+"px, "+J1+"px)",...getDPR(Q1.floating)>=1.5&&{willChange:"transform"}}:{position:t1,left:K1,top:J1}},[t1,a1,Q1.floating,l1.x,l1.y]);return reactExports.useMemo(()=>({...l1,update:ey,refs:oy,elements:Q1,floatingStyles:U1}),[l1,ey,oy,Q1,U1])}const arrow$1=e1=>{function _g(t1){return{}.hasOwnProperty.call(t1,"current")}return{name:"arrow",options:e1,fn(t1){const{element:r1,padding:n1}=typeof e1=="function"?e1(t1):e1;return r1&&_g(r1)?r1.current!=null?arrow$2({element:r1.current,padding:n1}).fn(t1):{}:r1?arrow$2({element:r1,padding:n1}).fn(t1):{}}}},offset=(e1,_g)=>({...offset$1(e1),options:[e1,_g]}),shift=(e1,_g)=>({...shift$1(e1),options:[e1,_g]}),limitShift=(e1,_g)=>({...limitShift$1(e1),options:[e1,_g]}),flip=(e1,_g)=>({...flip$1(e1),options:[e1,_g]}),size=(e1,_g)=>({...size$1(e1),options:[e1,_g]}),hide=(e1,_g)=>({...hide$1(e1),options:[e1,_g]}),arrow=(e1,_g)=>({...arrow$1(e1),options:[e1,_g]});var NAME$3="Arrow",Arrow$1=reactExports.forwardRef((e1,_g)=>{const{children:t1,width:r1=10,height:n1=5,...i1}=e1;return jsxRuntimeExports.jsx(Primitive.svg,{...i1,ref:_g,width:r1,height:n1,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e1.asChild?t1:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$3;var Root$8=Arrow$1;function useSize(e1){const[_g,t1]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(e1){t1({width:e1.offsetWidth,height:e1.offsetHeight});const r1=new ResizeObserver(n1=>{if(!Array.isArray(n1)||!n1.length)return;const i1=n1[0];let o1,a1;if("borderBoxSize"in i1){const u1=i1.borderBoxSize,s1=Array.isArray(u1)?u1[0]:u1;o1=s1.inlineSize,a1=s1.blockSize}else o1=e1.offsetWidth,a1=e1.offsetHeight;t1({width:o1,height:a1})});return r1.observe(e1,{box:"border-box"}),()=>r1.unobserve(e1)}else t1(void 0)},[e1]),_g}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=e1=>{const{__scopePopper:_g,children:t1}=e1,[r1,n1]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:_g,anchor:r1,onAnchorChange:n1,children:t1})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$2="PopperAnchor",PopperAnchor=reactExports.forwardRef((e1,_g)=>{const{__scopePopper:t1,virtualRef:r1,...n1}=e1,i1=usePopperContext(ANCHOR_NAME$2,t1),o1=reactExports.useRef(null),a1=useComposedRefs(_g,o1);return reactExports.useEffect(()=>{i1.onAnchorChange((r1==null?void 0:r1.current)||o1.current)}),r1?null:jsxRuntimeExports.jsx(Primitive.div,{...n1,ref:a1})});PopperAnchor.displayName=ANCHOR_NAME$2;var CONTENT_NAME$8="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$8),PopperContent=reactExports.forwardRef((e1,_g)=>{var Ay,Uy,Gy,Wy,Yy,Vy;const{__scopePopper:t1,side:r1="bottom",sideOffset:n1=0,align:i1="center",alignOffset:o1=0,arrowPadding:a1=0,avoidCollisions:u1=!0,collisionBoundary:s1=[],collisionPadding:l1=0,sticky:c1="partial",hideWhenDetached:d1=!1,updatePositionStrategy:h1="optimized",onPlaced:f1,...g1}=e1,v1=usePopperContext(CONTENT_NAME$8,t1),[$1,y1]=reactExports.useState(null),_1=useComposedRefs(_g,p0=>y1(p0)),[E1,T1]=reactExports.useState(null),P1=useSize(E1),k1=(P1==null?void 0:P1.width)??0,N1=(P1==null?void 0:P1.height)??0,W1=r1+(i1!=="center"?"-"+i1:""),H1=typeof l1=="number"?l1:{top:0,right:0,bottom:0,left:0,...l1},ty=Array.isArray(s1)?s1:[s1],ey=ty.length>0,ly={padding:H1,boundary:ty.filter(isNotNull),altBoundary:ey},{refs:oy,floatingStyles:Q1,placement:U1,isPositioned:V1,middlewareData:K1}=useFloating({strategy:"fixed",placement:W1,whileElementsMounted:(...p0)=>autoUpdate(...p0,{animationFrame:h1==="always"}),elements:{reference:v1.anchor},middleware:[offset({mainAxis:n1+N1,alignmentAxis:o1}),u1&&shift({mainAxis:!0,crossAxis:!1,limiter:c1==="partial"?limitShift():void 0,...ly}),u1&&flip({...ly}),size({...ly,apply:({elements:p0,rects:y0,availableWidth:A0,availableHeight:lv})=>{const{width:R0,height:X1}=y0.reference,fy=p0.floating.style;fy.setProperty("--radix-popper-available-width",`${A0}px`),fy.setProperty("--radix-popper-available-height",`${lv}px`),fy.setProperty("--radix-popper-anchor-width",`${R0}px`),fy.setProperty("--radix-popper-anchor-height",`${X1}px`)}}),E1&&arrow({element:E1,padding:a1}),transformOrigin({arrowWidth:k1,arrowHeight:N1}),d1&&hide({strategy:"referenceHidden",...ly})]}),[J1,hy]=getSideAndAlignFromPlacement(U1),G1=useCallbackRef$1(f1);useLayoutEffect2(()=>{V1&&(G1==null||G1())},[V1,G1]);const Y1=(Ay=K1.arrow)==null?void 0:Ay.x,yy=(Uy=K1.arrow)==null?void 0:Uy.y,Oy=((Gy=K1.arrow)==null?void 0:Gy.centerOffset)!==0,[Ey,jy]=reactExports.useState();return useLayoutEffect2(()=>{$1&&jy(window.getComputedStyle($1).zIndex)},[$1]),jsxRuntimeExports.jsx("div",{ref:oy.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q1,transform:V1?Q1.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ey,"--radix-popper-transform-origin":[(Wy=K1.transformOrigin)==null?void 0:Wy.x,(Yy=K1.transformOrigin)==null?void 0:Yy.y].join(" "),...((Vy=K1.hide)==null?void 0:Vy.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e1.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:t1,placedSide:J1,onArrowChange:T1,arrowX:Y1,arrowY:yy,shouldHideArrow:Oy,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":J1,"data-align":hy,...g1,ref:_1,style:{...g1.style,animation:V1?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$8;var ARROW_NAME$5="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(_g,t1){const{__scopePopper:r1,...n1}=_g,i1=useContentContext(ARROW_NAME$5,r1),o1=OPPOSITE_SIDE[i1.placedSide];return jsxRuntimeExports.jsx("span",{ref:i1.onArrowChange,style:{position:"absolute",left:i1.arrowX,top:i1.arrowY,[o1]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i1.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i1.placedSide],visibility:i1.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$8,{...n1,ref:t1,style:{...n1.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$5;function isNotNull(e1){return e1!==null}var transformOrigin=e1=>({name:"transformOrigin",options:e1,fn(_g){var v1,$1,y1;const{placement:t1,rects:r1,middlewareData:n1}=_g,o1=((v1=n1.arrow)==null?void 0:v1.centerOffset)!==0,a1=o1?0:e1.arrowWidth,u1=o1?0:e1.arrowHeight,[s1,l1]=getSideAndAlignFromPlacement(t1),c1={start:"0%",center:"50%",end:"100%"}[l1],d1=((($1=n1.arrow)==null?void 0:$1.x)??0)+a1/2,h1=(((y1=n1.arrow)==null?void 0:y1.y)??0)+u1/2;let f1="",g1="";return s1==="bottom"?(f1=o1?c1:`${d1}px`,g1=`${-u1}px`):s1==="top"?(f1=o1?c1:`${d1}px`,g1=`${r1.floating.height+u1}px`):s1==="right"?(f1=`${-u1}px`,g1=o1?c1:`${h1}px`):s1==="left"&&(f1=`${r1.floating.width+u1}px`,g1=o1?c1:`${h1}px`),{data:{x:f1,y:g1}}}});function getSideAndAlignFromPlacement(e1){const[_g,t1="center"]=e1.split("-");return[_g,t1]}var Root2$4=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope$3=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=e1=>{const{__scopeTooltip:_g,delayDuration:t1=DEFAULT_DELAY_DURATION,skipDelayDuration:r1=300,disableHoverableContent:n1=!1,children:i1}=e1,[o1,a1]=reactExports.useState(!0),u1=reactExports.useRef(!1),s1=reactExports.useRef(0);return reactExports.useEffect(()=>{const l1=s1.current;return()=>window.clearTimeout(l1)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:_g,isOpenDelayed:o1,delayDuration:t1,onOpen:reactExports.useCallback(()=>{window.clearTimeout(s1.current),a1(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(s1.current),s1.current=window.setTimeout(()=>a1(!0),r1)},[r1]),isPointerInTransitRef:u1,onPointerInTransitChange:reactExports.useCallback(l1=>{u1.current=l1},[]),disableHoverableContent:n1,children:i1})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=e1=>{const{__scopeTooltip:_g,children:t1,open:r1,defaultOpen:n1=!1,onOpenChange:i1,disableHoverableContent:o1,delayDuration:a1}=e1,u1=useTooltipProviderContext(TOOLTIP_NAME,e1.__scopeTooltip),s1=usePopperScope$3(_g),[l1,c1]=reactExports.useState(null),d1=useId(),h1=reactExports.useRef(0),f1=o1??u1.disableHoverableContent,g1=a1??u1.delayDuration,v1=reactExports.useRef(!1),[$1=!1,y1]=useControllableState({prop:r1,defaultProp:n1,onChange:k1=>{k1?(u1.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):u1.onClose(),i1==null||i1(k1)}}),_1=reactExports.useMemo(()=>$1?v1.current?"delayed-open":"instant-open":"closed",[$1]),E1=reactExports.useCallback(()=>{window.clearTimeout(h1.current),v1.current=!1,y1(!0)},[y1]),T1=reactExports.useCallback(()=>{window.clearTimeout(h1.current),y1(!1)},[y1]),P1=reactExports.useCallback(()=>{window.clearTimeout(h1.current),h1.current=window.setTimeout(()=>{v1.current=!0,y1(!0)},g1)},[g1,y1]);return reactExports.useEffect(()=>()=>window.clearTimeout(h1.current),[]),jsxRuntimeExports.jsx(Root2$4,{...s1,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:_g,contentId:d1,open:$1,stateAttribute:_1,trigger:l1,onTriggerChange:c1,onTriggerEnter:reactExports.useCallback(()=>{u1.isOpenDelayed?P1():E1()},[u1.isOpenDelayed,P1,E1]),onTriggerLeave:reactExports.useCallback(()=>{f1?T1():window.clearTimeout(h1.current)},[T1,f1]),onOpen:E1,onClose:T1,disableHoverableContent:f1,children:t1})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME$6="TooltipTrigger",TooltipTrigger$1=reactExports.forwardRef((e1,_g)=>{const{__scopeTooltip:t1,...r1}=e1,n1=useTooltipContext(TRIGGER_NAME$6,t1),i1=useTooltipProviderContext(TRIGGER_NAME$6,t1),o1=usePopperScope$3(t1),a1=reactExports.useRef(null),u1=useComposedRefs(_g,a1,n1.onTriggerChange),s1=reactExports.useRef(!1),l1=reactExports.useRef(!1),c1=reactExports.useCallback(()=>s1.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",c1),[c1]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...o1,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":n1.open?n1.contentId:void 0,"data-state":n1.stateAttribute,...r1,ref:u1,onPointerMove:composeEventHandlers(e1.onPointerMove,d1=>{d1.pointerType!=="touch"&&!l1.current&&!i1.isPointerInTransitRef.current&&(n1.onTriggerEnter(),l1.current=!0)}),onPointerLeave:composeEventHandlers(e1.onPointerLeave,()=>{n1.onTriggerLeave(),l1.current=!1}),onPointerDown:composeEventHandlers(e1.onPointerDown,()=>{s1.current=!0,document.addEventListener("pointerup",c1,{once:!0})}),onFocus:composeEventHandlers(e1.onFocus,()=>{s1.current||n1.onOpen()}),onBlur:composeEventHandlers(e1.onBlur,n1.onClose),onClick:composeEventHandlers(e1.onClick,n1.onClose)})})});TooltipTrigger$1.displayName=TRIGGER_NAME$6;var PORTAL_NAME$6="TooltipPortal",[PortalProvider$3,usePortalContext$3]=createTooltipContext(PORTAL_NAME$6,{forceMount:void 0}),CONTENT_NAME$7="TooltipContent",TooltipContent$1=reactExports.forwardRef((e1,_g)=>{const t1=usePortalContext$3(CONTENT_NAME$7,e1.__scopeTooltip),{forceMount:r1=t1.forceMount,side:n1="top",...i1}=e1,o1=useTooltipContext(CONTENT_NAME$7,e1.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:r1||o1.open,children:o1.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:n1,...i1,ref:_g}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:n1,...i1,ref:_g})})}),TooltipContentHoverable=reactExports.forwardRef((e1,_g)=>{const t1=useTooltipContext(CONTENT_NAME$7,e1.__scopeTooltip),r1=useTooltipProviderContext(CONTENT_NAME$7,e1.__scopeTooltip),n1=reactExports.useRef(null),i1=useComposedRefs(_g,n1),[o1,a1]=reactExports.useState(null),{trigger:u1,onClose:s1}=t1,l1=n1.current,{onPointerInTransitChange:c1}=r1,d1=reactExports.useCallback(()=>{a1(null),c1(!1)},[c1]),h1=reactExports.useCallback((f1,g1)=>{const v1=f1.currentTarget,$1={x:f1.clientX,y:f1.clientY},y1=getExitSideFromRect($1,v1.getBoundingClientRect()),_1=getPaddedExitPoints($1,y1),E1=getPointsFromRect(g1.getBoundingClientRect()),T1=getHull([..._1,...E1]);a1(T1),c1(!0)},[c1]);return reactExports.useEffect(()=>()=>d1(),[d1]),reactExports.useEffect(()=>{if(u1&&l1){const f1=v1=>h1(v1,l1),g1=v1=>h1(v1,u1);return u1.addEventListener("pointerleave",f1),l1.addEventListener("pointerleave",g1),()=>{u1.removeEventListener("pointerleave",f1),l1.removeEventListener("pointerleave",g1)}}},[u1,l1,h1,d1]),reactExports.useEffect(()=>{if(o1){const f1=g1=>{const v1=g1.target,$1={x:g1.clientX,y:g1.clientY},y1=(u1==null?void 0:u1.contains(v1))||(l1==null?void 0:l1.contains(v1)),_1=!isPointInPolygon$1($1,o1);y1?d1():_1&&(d1(),s1())};return document.addEventListener("pointermove",f1),()=>document.removeEventListener("pointermove",f1)}},[u1,l1,o1,s1,d1]),jsxRuntimeExports.jsx(TooltipContentImpl,{...e1,ref:i1})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeTooltip:t1,children:r1,"aria-label":n1,onEscapeKeyDown:i1,onPointerDownOutside:o1,...a1}=e1,u1=useTooltipContext(CONTENT_NAME$7,t1),s1=usePopperScope$3(t1),{onClose:l1}=u1;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,l1),()=>document.removeEventListener(TOOLTIP_OPEN,l1)),[l1]),reactExports.useEffect(()=>{if(u1.trigger){const c1=d1=>{const h1=d1.target;h1!=null&&h1.contains(u1.trigger)&&l1()};return window.addEventListener("scroll",c1,{capture:!0}),()=>window.removeEventListener("scroll",c1,{capture:!0})}},[u1.trigger,l1]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i1,onPointerDownOutside:o1,onFocusOutside:c1=>c1.preventDefault(),onDismiss:l1,children:jsxRuntimeExports.jsxs(Content$2,{"data-state":u1.stateAttribute,...s1,...a1,ref:_g,style:{...a1.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:r1}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:t1,isInside:!0,children:jsxRuntimeExports.jsx(Root$9,{id:u1.contentId,role:"tooltip",children:n1||r1})})]})})});TooltipContent$1.displayName=CONTENT_NAME$7;var ARROW_NAME$4="TooltipArrow",TooltipArrow=reactExports.forwardRef((e1,_g)=>{const{__scopeTooltip:t1,...r1}=e1,n1=usePopperScope$3(t1);return useVisuallyHiddenContentContext(ARROW_NAME$4,t1).isInside?null:jsxRuntimeExports.jsx(Arrow,{...n1,...r1,ref:_g})});TooltipArrow.displayName=ARROW_NAME$4;function getExitSideFromRect(e1,_g){const t1=Math.abs(_g.top-e1.y),r1=Math.abs(_g.bottom-e1.y),n1=Math.abs(_g.right-e1.x),i1=Math.abs(_g.left-e1.x);switch(Math.min(t1,r1,n1,i1)){case i1:return"left";case n1:return"right";case t1:return"top";case r1:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(e1,_g,t1=5){const r1=[];switch(_g){case"top":r1.push({x:e1.x-t1,y:e1.y+t1},{x:e1.x+t1,y:e1.y+t1});break;case"bottom":r1.push({x:e1.x-t1,y:e1.y-t1},{x:e1.x+t1,y:e1.y-t1});break;case"left":r1.push({x:e1.x+t1,y:e1.y-t1},{x:e1.x+t1,y:e1.y+t1});break;case"right":r1.push({x:e1.x-t1,y:e1.y-t1},{x:e1.x-t1,y:e1.y+t1});break}return r1}function getPointsFromRect(e1){const{top:_g,right:t1,bottom:r1,left:n1}=e1;return[{x:n1,y:_g},{x:t1,y:_g},{x:t1,y:r1},{x:n1,y:r1}]}function isPointInPolygon$1(e1,_g){const{x:t1,y:r1}=e1;let n1=!1;for(let i1=0,o1=_g.length-1;i1<_g.length;o1=i1++){const a1=_g[i1].x,u1=_g[i1].y,s1=_g[o1].x,l1=_g[o1].y;u1>r1!=l1>r1&&t1<(s1-a1)*(r1-u1)/(l1-u1)+a1&&(n1=!n1)}return n1}function getHull(e1){const _g=e1.slice();return _g.sort((t1,r1)=>t1.x<r1.x?-1:t1.x>r1.x?1:t1.y<r1.y?-1:t1.y>r1.y?1:0),getHullPresorted(_g)}function getHullPresorted(e1){if(e1.length<=1)return e1.slice();const _g=[];for(let r1=0;r1<e1.length;r1++){const n1=e1[r1];for(;_g.length>=2;){const i1=_g[_g.length-1],o1=_g[_g.length-2];if((i1.x-o1.x)*(n1.y-o1.y)>=(i1.y-o1.y)*(n1.x-o1.x))_g.pop();else break}_g.push(n1)}_g.pop();const t1=[];for(let r1=e1.length-1;r1>=0;r1--){const n1=e1[r1];for(;t1.length>=2;){const i1=t1[t1.length-1],o1=t1[t1.length-2];if((i1.x-o1.x)*(n1.y-o1.y)>=(i1.y-o1.y)*(n1.x-o1.x))t1.pop();else break}t1.push(n1)}return t1.pop(),_g.length===1&&t1.length===1&&_g[0].x===t1[0].x&&_g[0].y===t1[0].y?_g:_g.concat(t1)}var Provider=TooltipProvider$1,Root3$2=Tooltip$1,Trigger$5=TooltipTrigger$1,Content2$5=TooltipContent$1;const TooltipProvider=Provider,Tooltip=Root3$2,TooltipTrigger=Trigger$5,TooltipContent=reactExports.forwardRef(({className:e1,sideOffset:_g=4,...t1},r1)=>jsxRuntimeExports.jsx(Content2$5,{ref:r1,sideOffset:_g,className:cn$1("z-50 border overflow-hidden rounded-md bg-background text-foreground px-3 py-1.5 text-xs animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e1),...t1}));TooltipContent.displayName=Content2$5.displayName;const buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:e1,variant:_g,size:t1,asChild:r1=!1,...n1},i1)=>{const o1=r1?Slot:"button";return jsxRuntimeExports.jsx(o1,{className:cn$1(buttonVariants({variant:_g,size:t1,className:e1}),"outline-none cursor-default select-none"),ref:i1,tabIndex:-1,...n1})});Button.displayName="Button";const IconButton=reactExports.forwardRef(({tooltip:e1,children:_g,...t1},r1)=>jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",...t1,ref:r1,tabIndex:-1,className:"cursor-default bg-background",children:jsxRuntimeExports.jsx("div",{className:"icon-button-icon-wrapper",children:_g})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:e1})})]})),ImageUploadButton=e1=>{const{onFileUpload:_g,children:t1,...r1}=e1,[n1]=reactExports.useState(`file-upload-${Math.random().toString()}`),i1=o1=>{var u1;const a1=(u1=o1.currentTarget.files)==null?void 0:u1[0];a1&&_g(a1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{htmlFor:n1,children:jsxRuntimeExports.jsx(IconButton,{...r1,asChild:!0,children:t1})}),jsxRuntimeExports.jsx(Input,{style:{display:"none"},id:n1,name:n1,type:"file",onChange:i1,accept:"image/png, image/jpeg"})]})};function useToggle$1(e1){const[_g,t1]=reactExports.useState(()=>e1),r1=reactExports.useCallback(n1=>t1(typeof n1=="boolean"?n1:i1=>!i1),[]);return[_g,r1]}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((e1,_g)=>{const{loop:t1=!1,trapped:r1=!1,onMountAutoFocus:n1,onUnmountAutoFocus:i1,...o1}=e1,[a1,u1]=reactExports.useState(null),s1=useCallbackRef$1(n1),l1=useCallbackRef$1(i1),c1=reactExports.useRef(null),d1=useComposedRefs(_g,g1=>u1(g1)),h1=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(r1){let g1=function(_1){if(h1.paused||!a1)return;const E1=_1.target;a1.contains(E1)?c1.current=E1:focus(c1.current,{select:!0})},v1=function(_1){if(h1.paused||!a1)return;const E1=_1.relatedTarget;E1!==null&&(a1.contains(E1)||focus(c1.current,{select:!0}))},$1=function(_1){if(document.activeElement===document.body)for(const T1 of _1)T1.removedNodes.length>0&&focus(a1)};document.addEventListener("focusin",g1),document.addEventListener("focusout",v1);const y1=new MutationObserver($1);return a1&&y1.observe(a1,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g1),document.removeEventListener("focusout",v1),y1.disconnect()}}},[r1,a1,h1.paused]),reactExports.useEffect(()=>{if(a1){focusScopesStack.add(h1);const g1=document.activeElement;if(!a1.contains(g1)){const $1=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);a1.addEventListener(AUTOFOCUS_ON_MOUNT,s1),a1.dispatchEvent($1),$1.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(a1)),{select:!0}),document.activeElement===g1&&focus(a1))}return()=>{a1.removeEventListener(AUTOFOCUS_ON_MOUNT,s1),setTimeout(()=>{const $1=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);a1.addEventListener(AUTOFOCUS_ON_UNMOUNT,l1),a1.dispatchEvent($1),$1.defaultPrevented||focus(g1??document.body,{select:!0}),a1.removeEventListener(AUTOFOCUS_ON_UNMOUNT,l1),focusScopesStack.remove(h1)},0)}}},[a1,s1,l1,h1]);const f1=reactExports.useCallback(g1=>{if(!t1&&!r1||h1.paused)return;const v1=g1.key==="Tab"&&!g1.altKey&&!g1.ctrlKey&&!g1.metaKey,$1=document.activeElement;if(v1&&$1){const y1=g1.currentTarget,[_1,E1]=getTabbableEdges(y1);_1&&E1?!g1.shiftKey&&$1===E1?(g1.preventDefault(),t1&&focus(_1,{select:!0})):g1.shiftKey&&$1===_1&&(g1.preventDefault(),t1&&focus(E1,{select:!0})):$1===y1&&g1.preventDefault()}},[t1,r1,h1.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...o1,ref:d1,onKeyDown:f1})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(e1,{select:_g=!1}={}){const t1=document.activeElement;for(const r1 of e1)if(focus(r1,{select:_g}),document.activeElement!==t1)return}function getTabbableEdges(e1){const _g=getTabbableCandidates(e1),t1=findVisible(_g,e1),r1=findVisible(_g.reverse(),e1);return[t1,r1]}function getTabbableCandidates(e1){const _g=[],t1=document.createTreeWalker(e1,NodeFilter.SHOW_ELEMENT,{acceptNode:r1=>{const n1=r1.tagName==="INPUT"&&r1.type==="hidden";return r1.disabled||r1.hidden||n1?NodeFilter.FILTER_SKIP:r1.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t1.nextNode();)_g.push(t1.currentNode);return _g}function findVisible(e1,_g){for(const t1 of e1)if(!isHidden(t1,{upTo:_g}))return t1}function isHidden(e1,{upTo:_g}){if(getComputedStyle(e1).visibility==="hidden")return!0;for(;e1;){if(_g!==void 0&&e1===_g)return!1;if(getComputedStyle(e1).display==="none")return!0;e1=e1.parentElement}return!1}function isSelectableInput(e1){return e1 instanceof HTMLInputElement&&"select"in e1}function focus(e1,{select:_g=!1}={}){if(e1&&e1.focus){const t1=document.activeElement;e1.focus({preventScroll:!0}),e1!==t1&&isSelectableInput(e1)&&_g&&e1.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let e1=[];return{add(_g){const t1=e1[0];_g!==t1&&(t1==null||t1.pause()),e1=arrayRemove(e1,_g),e1.unshift(_g)},remove(_g){var t1;e1=arrayRemove(e1,_g),(t1=e1[0])==null||t1.resume()}}}function arrayRemove(e1,_g){const t1=[...e1],r1=t1.indexOf(_g);return r1!==-1&&t1.splice(r1,1),t1}function removeLinks(e1){return e1.filter(_g=>_g.tagName!=="A")}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const e1=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e1[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",e1[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(_g=>_g.remove()),count--}},[])}function createFocusGuard(){const e1=document.createElement("span");return e1.setAttribute("data-radix-focus-guard",""),e1.tabIndex=0,e1.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e1}var __assign=function(){return __assign=Object.assign||function(_g){for(var t1,r1=1,n1=arguments.length;r1<n1;r1++){t1=arguments[r1];for(var i1 in t1)Object.prototype.hasOwnProperty.call(t1,i1)&&(_g[i1]=t1[i1])}return _g},__assign.apply(this,arguments)};function __rest(e1,_g){var t1={};for(var r1 in e1)Object.prototype.hasOwnProperty.call(e1,r1)&&_g.indexOf(r1)<0&&(t1[r1]=e1[r1]);if(e1!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n1=0,r1=Object.getOwnPropertySymbols(e1);n1<r1.length;n1++)_g.indexOf(r1[n1])<0&&Object.prototype.propertyIsEnumerable.call(e1,r1[n1])&&(t1[r1[n1]]=e1[r1[n1]]);return t1}function __spreadArray(e1,_g,t1){if(t1||arguments.length===2)for(var r1=0,n1=_g.length,i1;r1<n1;r1++)(i1||!(r1 in _g))&&(i1||(i1=Array.prototype.slice.call(_g,0,r1)),i1[r1]=_g[r1]);return e1.concat(i1||Array.prototype.slice.call(_g))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(e1,_g){return typeof e1=="function"?e1(_g):e1&&(e1.current=_g),e1}function useCallbackRef(e1,_g){var t1=reactExports.useState(function(){return{value:e1,callback:_g,facade:{get current(){return t1.value},set current(r1){var n1=t1.value;n1!==r1&&(t1.value=r1,t1.callback(r1,n1))}}}})[0];return t1.callback=_g,t1.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(e1,_g){var t1=useCallbackRef(null,function(r1){return e1.forEach(function(n1){return assignRef(n1,r1)})});return useIsomorphicLayoutEffect(function(){var r1=currentValues.get(t1);if(r1){var n1=new Set(r1),i1=new Set(e1),o1=t1.current;n1.forEach(function(a1){i1.has(a1)||assignRef(a1,null)}),i1.forEach(function(a1){n1.has(a1)||assignRef(a1,o1)})}currentValues.set(t1,e1)},[e1]),t1}function ItoI(e1){return e1}function innerCreateMedium(e1,_g){_g===void 0&&(_g=ItoI);var t1=[],r1=!1,n1={read:function(){if(r1)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t1.length?t1[t1.length-1]:e1},useMedium:function(i1){var o1=_g(i1,r1);return t1.push(o1),function(){t1=t1.filter(function(a1){return a1!==o1})}},assignSyncMedium:function(i1){for(r1=!0;t1.length;){var o1=t1;t1=[],o1.forEach(i1)}t1={push:function(a1){return i1(a1)},filter:function(){return t1}}},assignMedium:function(i1){r1=!0;var o1=[];if(t1.length){var a1=t1;t1=[],a1.forEach(i1),o1=t1}var u1=function(){var l1=o1;o1=[],l1.forEach(i1)},s1=function(){return Promise.resolve().then(u1)};s1(),t1={push:function(l1){o1.push(l1),s1()},filter:function(l1){return o1=o1.filter(l1),t1}}}};return n1}function createSidecarMedium(e1){e1===void 0&&(e1={});var _g=innerCreateMedium(null);return _g.options=__assign({async:!0,ssr:!1},e1),_g}var SideCar$2=function(e1){var _g=e1.sideCar,t1=__rest(e1,["sideCar"]);if(!_g)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r1=_g.read();if(!r1)throw new Error("Sidecar medium not found");return reactExports.createElement(r1,__assign({},t1))};SideCar$2.isSideCarExport=!0;function exportSidecar(e1,_g){return e1.useMedium(_g),SideCar$2}var effectCar$1=createSidecarMedium(),nothing$1=function(){},RemoveScroll$1=reactExports.forwardRef(function(e1,_g){var t1=reactExports.useRef(null),r1=reactExports.useState({onScrollCapture:nothing$1,onWheelCapture:nothing$1,onTouchMoveCapture:nothing$1}),n1=r1[0],i1=r1[1],o1=e1.forwardProps,a1=e1.children,u1=e1.className,s1=e1.removeScrollBar,l1=e1.enabled,c1=e1.shards,d1=e1.sideCar,h1=e1.noIsolation,f1=e1.inert,g1=e1.allowPinchZoom,v1=e1.as,$1=v1===void 0?"div":v1,y1=e1.gapMode,_1=__rest(e1,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E1=d1,T1=useMergeRefs([t1,_g]),P1=__assign(__assign({},_1),n1);return reactExports.createElement(reactExports.Fragment,null,l1&&reactExports.createElement(E1,{sideCar:effectCar$1,removeScrollBar:s1,shards:c1,noIsolation:h1,inert:f1,setCallbacks:i1,allowPinchZoom:!!g1,lockRef:t1,gapMode:y1}),o1?reactExports.cloneElement(reactExports.Children.only(a1),__assign(__assign({},P1),{ref:T1})):reactExports.createElement($1,__assign({},P1,{className:u1,ref:T1}),a1))});RemoveScroll$1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$1.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var e1=document.createElement("style");e1.type="text/css";var _g=getNonce();return _g&&e1.setAttribute("nonce",_g),e1}function injectStyles(e1,_g){e1.styleSheet?e1.styleSheet.cssText=_g:e1.appendChild(document.createTextNode(_g))}function insertStyleTag(e1){var _g=document.head||document.getElementsByTagName("head")[0];_g.appendChild(e1)}var stylesheetSingleton=function(){var e1=0,_g=null;return{add:function(t1){e1==0&&(_g=makeStyleTag())&&(injectStyles(_g,t1),insertStyleTag(_g)),e1++},remove:function(){e1--,!e1&&_g&&(_g.parentNode&&_g.parentNode.removeChild(_g),_g=null)}}},styleHookSingleton=function(){var e1=stylesheetSingleton();return function(_g,t1){reactExports.useEffect(function(){return e1.add(_g),function(){e1.remove()}},[_g&&t1])}},styleSingleton=function(){var e1=styleHookSingleton(),_g=function(t1){var r1=t1.styles,n1=t1.dynamic;return e1(r1,n1),null};return _g},zeroGap={left:0,top:0,right:0,gap:0},parse=function(e1){return parseInt(e1||"",10)||0},getOffset=function(e1){var _g=window.getComputedStyle(document.body),t1=_g[e1==="padding"?"paddingLeft":"marginLeft"],r1=_g[e1==="padding"?"paddingTop":"marginTop"],n1=_g[e1==="padding"?"paddingRight":"marginRight"];return[parse(t1),parse(r1),parse(n1)]},getGapWidth=function(e1){if(e1===void 0&&(e1="margin"),typeof window>"u")return zeroGap;var _g=getOffset(e1),t1=document.documentElement.clientWidth,r1=window.innerWidth;return{left:_g[0],top:_g[1],right:_g[2],gap:Math.max(0,r1-t1+_g[2]-_g[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(e1,_g,t1,r1){var n1=e1.left,i1=e1.top,o1=e1.right,a1=e1.gap;return t1===void 0&&(t1="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(r1,`;
   padding-right: `).concat(a1,"px ").concat(r1,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(r1,`;
    overscroll-behavior: contain;
    `).concat([_g&&"position: relative ".concat(r1,";"),t1==="margin"&&`
    padding-left: `.concat(n1,`px;
    padding-top: `).concat(i1,`px;
    padding-right: `).concat(o1,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a1,"px ").concat(r1,`;
    `),t1==="padding"&&"padding-right: ".concat(a1,"px ").concat(r1,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(a1,"px ").concat(r1,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(a1,"px ").concat(r1,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(r1,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(r1,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(a1,`px;
  }
`)},getCurrentUseCounter=function(){var e1=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(e1)?e1:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var e1=getCurrentUseCounter()-1;e1<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,e1.toString())}},[])},RemoveScrollBar=function(e1){var _g=e1.noRelative,t1=e1.noImportant,r1=e1.gapMode,n1=r1===void 0?"margin":r1;useLockAttribute();var i1=reactExports.useMemo(function(){return getGapWidth(n1)},[n1]);return reactExports.createElement(Style,{styles:getStyles(i1,!_g,n1,t1?"":"!important")})},passiveSupported$1=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){return passiveSupported$1=!0,!0}});window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveSupported$1=!1}var nonPassive$1=passiveSupported$1?{passive:!1}:!1,alwaysContainsScroll$1=function(e1){return e1.tagName==="TEXTAREA"},elementCanBeScrolled$1=function(e1,_g){var t1=window.getComputedStyle(e1);return t1[_g]!=="hidden"&&!(t1.overflowY===t1.overflowX&&!alwaysContainsScroll$1(e1)&&t1[_g]==="visible")},elementCouldBeVScrolled$1=function(e1){return elementCanBeScrolled$1(e1,"overflowY")},elementCouldBeHScrolled$1=function(e1){return elementCanBeScrolled$1(e1,"overflowX")},locationCouldBeScrolled$1=function(e1,_g){var t1=_g.ownerDocument,r1=_g;do{typeof ShadowRoot<"u"&&r1 instanceof ShadowRoot&&(r1=r1.host);var n1=elementCouldBeScrolled$1(e1,r1);if(n1){var i1=getScrollVariables$1(e1,r1),o1=i1[1],a1=i1[2];if(o1>a1)return!0}r1=r1.parentNode}while(r1&&r1!==t1.body);return!1},getVScrollVariables$1=function(e1){var _g=e1.scrollTop,t1=e1.scrollHeight,r1=e1.clientHeight;return[_g,t1,r1]},getHScrollVariables$1=function(e1){var _g=e1.scrollLeft,t1=e1.scrollWidth,r1=e1.clientWidth;return[_g,t1,r1]},elementCouldBeScrolled$1=function(e1,_g){return e1==="v"?elementCouldBeVScrolled$1(_g):elementCouldBeHScrolled$1(_g)},getScrollVariables$1=function(e1,_g){return e1==="v"?getVScrollVariables$1(_g):getHScrollVariables$1(_g)},getDirectionFactor$1=function(e1,_g){return e1==="h"&&_g==="rtl"?-1:1},handleScroll$1=function(e1,_g,t1,r1,n1){var i1=getDirectionFactor$1(e1,window.getComputedStyle(_g).direction),o1=i1*r1,a1=t1.target,u1=_g.contains(a1),s1=!1,l1=o1>0,c1=0,d1=0;do{var h1=getScrollVariables$1(e1,a1),f1=h1[0],g1=h1[1],v1=h1[2],$1=g1-v1-i1*f1;(f1||$1)&&elementCouldBeScrolled$1(e1,a1)&&(c1+=$1,d1+=f1),a1 instanceof ShadowRoot?a1=a1.host:a1=a1.parentNode}while(!u1&&a1!==document.body||u1&&(_g.contains(a1)||_g===a1));return(l1&&(Math.abs(c1)<1||!n1)||!l1&&(Math.abs(d1)<1||!n1))&&(s1=!0),s1},getTouchXY$1=function(e1){return"changedTouches"in e1?[e1.changedTouches[0].clientX,e1.changedTouches[0].clientY]:[0,0]},getDeltaXY$1=function(e1){return[e1.deltaX,e1.deltaY]},extractRef$1=function(e1){return e1&&"current"in e1?e1.current:e1},deltaCompare$1=function(e1,_g){return e1[0]===_g[0]&&e1[1]===_g[1]},generateStyle$1=function(e1){return`
  .block-interactivity-`.concat(e1,` {pointer-events: none;}
  .allow-interactivity-`).concat(e1,` {pointer-events: all;}
`)},idCounter$1=0,lockStack$1=[];function RemoveScrollSideCar$1(e1){var _g=reactExports.useRef([]),t1=reactExports.useRef([0,0]),r1=reactExports.useRef(),n1=reactExports.useState(idCounter$1++)[0],i1=reactExports.useState(styleSingleton)[0],o1=reactExports.useRef(e1);reactExports.useEffect(function(){o1.current=e1},[e1]),reactExports.useEffect(function(){if(e1.inert){document.body.classList.add("block-interactivity-".concat(n1));var g1=__spreadArray([e1.lockRef.current],(e1.shards||[]).map(extractRef$1),!0).filter(Boolean);return g1.forEach(function(v1){return v1.classList.add("allow-interactivity-".concat(n1))}),function(){document.body.classList.remove("block-interactivity-".concat(n1)),g1.forEach(function(v1){return v1.classList.remove("allow-interactivity-".concat(n1))})}}},[e1.inert,e1.lockRef.current,e1.shards]);var a1=reactExports.useCallback(function(g1,v1){if("touches"in g1&&g1.touches.length===2)return!o1.current.allowPinchZoom;var $1=getTouchXY$1(g1),y1=t1.current,_1="deltaX"in g1?g1.deltaX:y1[0]-$1[0],E1="deltaY"in g1?g1.deltaY:y1[1]-$1[1],T1,P1=g1.target,k1=Math.abs(_1)>Math.abs(E1)?"h":"v";if("touches"in g1&&k1==="h"&&P1.type==="range")return!1;var N1=locationCouldBeScrolled$1(k1,P1);if(!N1)return!0;if(N1?T1=k1:(T1=k1==="v"?"h":"v",N1=locationCouldBeScrolled$1(k1,P1)),!N1)return!1;if(!r1.current&&"changedTouches"in g1&&(_1||E1)&&(r1.current=T1),!T1)return!0;var W1=r1.current||T1;return handleScroll$1(W1,v1,g1,W1==="h"?_1:E1,!0)},[]),u1=reactExports.useCallback(function(g1){var v1=g1;if(!(!lockStack$1.length||lockStack$1[lockStack$1.length-1]!==i1)){var $1="deltaY"in v1?getDeltaXY$1(v1):getTouchXY$1(v1),y1=_g.current.filter(function(T1){return T1.name===v1.type&&(T1.target===v1.target||v1.target===T1.shadowParent)&&deltaCompare$1(T1.delta,$1)})[0];if(y1&&y1.should){v1.cancelable&&v1.preventDefault();return}if(!y1){var _1=(o1.current.shards||[]).map(extractRef$1).filter(Boolean).filter(function(T1){return T1.contains(v1.target)}),E1=_1.length>0?a1(v1,_1[0]):!o1.current.noIsolation;E1&&v1.cancelable&&v1.preventDefault()}}},[]),s1=reactExports.useCallback(function(g1,v1,$1,y1){var _1={name:g1,delta:v1,target:$1,should:y1,shadowParent:getOutermostShadowParent($1)};_g.current.push(_1),setTimeout(function(){_g.current=_g.current.filter(function(E1){return E1!==_1})},1)},[]),l1=reactExports.useCallback(function(g1){t1.current=getTouchXY$1(g1),r1.current=void 0},[]),c1=reactExports.useCallback(function(g1){s1(g1.type,getDeltaXY$1(g1),g1.target,a1(g1,e1.lockRef.current))},[]),d1=reactExports.useCallback(function(g1){s1(g1.type,getTouchXY$1(g1),g1.target,a1(g1,e1.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$1.push(i1),e1.setCallbacks({onScrollCapture:c1,onWheelCapture:c1,onTouchMoveCapture:d1}),document.addEventListener("wheel",u1,nonPassive$1),document.addEventListener("touchmove",u1,nonPassive$1),document.addEventListener("touchstart",l1,nonPassive$1),function(){lockStack$1=lockStack$1.filter(function(g1){return g1!==i1}),document.removeEventListener("wheel",u1,nonPassive$1),document.removeEventListener("touchmove",u1,nonPassive$1),document.removeEventListener("touchstart",l1,nonPassive$1)}},[]);var h1=e1.removeScrollBar,f1=e1.inert;return reactExports.createElement(reactExports.Fragment,null,f1?reactExports.createElement(i1,{styles:generateStyle$1(n1)}):null,h1?reactExports.createElement(RemoveScrollBar,{gapMode:e1.gapMode}):null)}function getOutermostShadowParent(e1){for(var _g=null;e1!==null;)e1 instanceof ShadowRoot&&(_g=e1.host,e1=e1.host),e1=e1.parentNode;return _g}const SideCar$1=exportSidecar(effectCar$1,RemoveScrollSideCar$1);var ReactRemoveScroll$1=reactExports.forwardRef(function(e1,_g){return reactExports.createElement(RemoveScroll$1,__assign({},e1,{ref:_g,sideCar:SideCar$1}))});ReactRemoveScroll$1.classNames=RemoveScroll$1.classNames;var getDefaultParent=function(e1){if(typeof document>"u")return null;var _g=Array.isArray(e1)?e1[0]:e1;return _g.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(e1){return e1&&(e1.host||unwrapHost(e1.parentNode))},correctTargets=function(e1,_g){return _g.map(function(t1){if(e1.contains(t1))return t1;var r1=unwrapHost(t1);return r1&&e1.contains(r1)?r1:(console.error("aria-hidden",t1,"in not contained inside",e1,". Doing nothing"),null)}).filter(function(t1){return!!t1})},applyAttributeToOthers=function(e1,_g,t1,r1){var n1=correctTargets(_g,Array.isArray(e1)?e1:[e1]);markerMap[t1]||(markerMap[t1]=new WeakMap);var i1=markerMap[t1],o1=[],a1=new Set,u1=new Set(n1),s1=function(c1){!c1||a1.has(c1)||(a1.add(c1),s1(c1.parentNode))};n1.forEach(s1);var l1=function(c1){!c1||u1.has(c1)||Array.prototype.forEach.call(c1.children,function(d1){if(a1.has(d1))l1(d1);else try{var h1=d1.getAttribute(r1),f1=h1!==null&&h1!=="false",g1=(counterMap.get(d1)||0)+1,v1=(i1.get(d1)||0)+1;counterMap.set(d1,g1),i1.set(d1,v1),o1.push(d1),g1===1&&f1&&uncontrolledNodes.set(d1,!0),v1===1&&d1.setAttribute(t1,"true"),f1||d1.setAttribute(r1,"true")}catch($1){console.error("aria-hidden: cannot operate on ",d1,$1)}})};return l1(_g),a1.clear(),lockCount++,function(){o1.forEach(function(c1){var d1=counterMap.get(c1)-1,h1=i1.get(c1)-1;counterMap.set(c1,d1),i1.set(c1,h1),d1||(uncontrolledNodes.has(c1)||c1.removeAttribute(r1),uncontrolledNodes.delete(c1)),h1||c1.removeAttribute(t1)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(e1,_g,t1){t1===void 0&&(t1="data-aria-hidden");var r1=Array.from(Array.isArray(e1)?e1:[e1]),n1=getDefaultParent(e1);return n1?(r1.push.apply(r1,Array.from(n1.querySelectorAll("[aria-live]"))),applyAttributeToOthers(r1,n1,t1,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=e1=>{const{__scopeDialog:_g,children:t1,open:r1,defaultOpen:n1,onOpenChange:i1,modal:o1=!0}=e1,a1=reactExports.useRef(null),u1=reactExports.useRef(null),[s1=!1,l1]=useControllableState({prop:r1,defaultProp:n1,onChange:i1});return jsxRuntimeExports.jsx(DialogProvider,{scope:_g,triggerRef:a1,contentRef:u1,contentId:useId(),titleId:useId(),descriptionId:useId(),open:s1,onOpenChange:l1,onOpenToggle:reactExports.useCallback(()=>l1(c1=>!c1),[l1]),modal:o1,children:t1})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME$5="DialogTrigger",DialogTrigger$1=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=useDialogContext(TRIGGER_NAME$5,t1),i1=useComposedRefs(_g,n1.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n1.open,"aria-controls":n1.contentId,"data-state":getState$2(n1.open),...r1,ref:i1,onClick:composeEventHandlers(e1.onClick,n1.onOpenToggle)})});DialogTrigger$1.displayName=TRIGGER_NAME$5;var PORTAL_NAME$5="DialogPortal",[PortalProvider$2,usePortalContext$2]=createDialogContext(PORTAL_NAME$5,{forceMount:void 0}),DialogPortal$1=e1=>{const{__scopeDialog:_g,forceMount:t1,children:r1,container:n1}=e1,i1=useDialogContext(PORTAL_NAME$5,_g);return jsxRuntimeExports.jsx(PortalProvider$2,{scope:_g,forceMount:t1,children:reactExports.Children.map(r1,o1=>jsxRuntimeExports.jsx(Presence,{present:t1||i1.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:n1,children:o1})}))})};DialogPortal$1.displayName=PORTAL_NAME$5;var OVERLAY_NAME$1="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((e1,_g)=>{const t1=usePortalContext$2(OVERLAY_NAME$1,e1.__scopeDialog),{forceMount:r1=t1.forceMount,...n1}=e1,i1=useDialogContext(OVERLAY_NAME$1,e1.__scopeDialog);return i1.modal?jsxRuntimeExports.jsx(Presence,{present:r1||i1.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...n1,ref:_g})}):null});DialogOverlay$1.displayName=OVERLAY_NAME$1;var DialogOverlayImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=useDialogContext(OVERLAY_NAME$1,t1);return jsxRuntimeExports.jsx(ReactRemoveScroll$1,{as:Slot,allowPinchZoom:!0,shards:[n1.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$2(n1.open),...r1,ref:_g,style:{pointerEvents:"auto",...r1.style}})})}),CONTENT_NAME$6="DialogContent",DialogContent$1=reactExports.forwardRef((e1,_g)=>{const t1=usePortalContext$2(CONTENT_NAME$6,e1.__scopeDialog),{forceMount:r1=t1.forceMount,...n1}=e1,i1=useDialogContext(CONTENT_NAME$6,e1.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:r1||i1.open,children:i1.modal?jsxRuntimeExports.jsx(DialogContentModal,{...n1,ref:_g}):jsxRuntimeExports.jsx(DialogContentNonModal,{...n1,ref:_g})})});DialogContent$1.displayName=CONTENT_NAME$6;var DialogContentModal=reactExports.forwardRef((e1,_g)=>{const t1=useDialogContext(CONTENT_NAME$6,e1.__scopeDialog),r1=reactExports.useRef(null),n1=useComposedRefs(_g,t1.contentRef,r1);return reactExports.useEffect(()=>{const i1=r1.current;if(i1)return hideOthers(i1)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...e1,ref:n1,trapFocus:t1.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(e1.onCloseAutoFocus,i1=>{var o1;i1.preventDefault(),(o1=t1.triggerRef.current)==null||o1.focus()}),onPointerDownOutside:composeEventHandlers(e1.onPointerDownOutside,i1=>{const o1=i1.detail.originalEvent,a1=o1.button===0&&o1.ctrlKey===!0;(o1.button===2||a1)&&i1.preventDefault()}),onFocusOutside:composeEventHandlers(e1.onFocusOutside,i1=>i1.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((e1,_g)=>{const t1=useDialogContext(CONTENT_NAME$6,e1.__scopeDialog),r1=reactExports.useRef(!1),n1=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...e1,ref:_g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i1=>{var o1,a1;(o1=e1.onCloseAutoFocus)==null||o1.call(e1,i1),i1.defaultPrevented||(r1.current||(a1=t1.triggerRef.current)==null||a1.focus(),i1.preventDefault()),r1.current=!1,n1.current=!1},onInteractOutside:i1=>{var u1,s1;(u1=e1.onInteractOutside)==null||u1.call(e1,i1),i1.defaultPrevented||(r1.current=!0,i1.detail.originalEvent.type==="pointerdown"&&(n1.current=!0));const o1=i1.target;((s1=t1.triggerRef.current)==null?void 0:s1.contains(o1))&&i1.preventDefault(),i1.detail.originalEvent.type==="focusin"&&n1.current&&i1.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,trapFocus:r1,onOpenAutoFocus:n1,onCloseAutoFocus:i1,...o1}=e1,a1=useDialogContext(CONTENT_NAME$6,t1),u1=reactExports.useRef(null),s1=useComposedRefs(_g,u1);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:r1,onMountAutoFocus:n1,onUnmountAutoFocus:i1,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:a1.contentId,"aria-describedby":a1.descriptionId,"aria-labelledby":a1.titleId,"data-state":getState$2(a1.open),...o1,ref:s1,onDismiss:()=>a1.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:a1.titleId}),jsxRuntimeExports.jsx(DescriptionWarning$1,{contentRef:u1,descriptionId:a1.descriptionId})]})]})}),TITLE_NAME$1="DialogTitle",DialogTitle$1=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=useDialogContext(TITLE_NAME$1,t1);return jsxRuntimeExports.jsx(Primitive.h2,{id:n1.titleId,...r1,ref:_g})});DialogTitle$1.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="DialogDescription",DialogDescription$1=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=useDialogContext(DESCRIPTION_NAME$1,t1);return jsxRuntimeExports.jsx(Primitive.p,{id:n1.descriptionId,...r1,ref:_g})});DialogDescription$1.displayName=DESCRIPTION_NAME$1;var CLOSE_NAME$1="DialogClose",DialogClose=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=useDialogContext(CLOSE_NAME$1,t1);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...r1,ref:_g,onClick:composeEventHandlers(e1.onClick,()=>n1.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME$1;function getState$2(e1){return e1?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$6,titleName:TITLE_NAME$1,docsSlug:"dialog"}),TitleWarning=({titleId:e1})=>{const _g=useWarningContext(TITLE_WARNING_NAME),t1=`\`${_g.contentName}\` requires a \`${_g.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${_g.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${_g.docsSlug}`;return reactExports.useEffect(()=>{e1&&(document.getElementById(e1)||console.error(t1))},[t1,e1]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning$1=({contentRef:e1,descriptionId:_g})=>{const r1=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var i1;const n1=(i1=e1.current)==null?void 0:i1.getAttribute("aria-describedby");_g&&n1&&(document.getElementById(_g)||console.warn(r1))},[r1,e1,_g]),null},Root$7=Dialog$1,Trigger$4=DialogTrigger$1,Portal$3=DialogPortal$1,Overlay=DialogOverlay$1,Content$1=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root$7,DialogTrigger=Trigger$4,DialogPortal=Portal$3,DialogOverlay=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Overlay,{ref:t1,className:cn$1("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e1),..._g}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:e1,children:_g,...t1},r1)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content$1,{ref:r1,className:cn$1("fixed left-[50%] top-[50%] z-50 flex flex-col w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e1,"outline-none"),onCloseAutoFocus:n1=>n1.preventDefault(),...t1,children:[_g,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(Cross2Icon,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content$1.displayName;const DialogHeader=({className:e1,..._g})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-1.5 text-center sm:text-left",e1),..._g});DialogHeader.displayName="DialogHeader";const DialogTitle=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Title,{ref:t1,className:cn$1("text-2xl font-semibold leading-none tracking-tight",e1),..._g}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Description,{ref:t1,className:cn$1("text-sm text-muted-foreground",e1),..._g}));DialogDescription.displayName=Description.displayName;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e1){for(var _g=1;_g<arguments.length;_g++){var t1=arguments[_g];for(var r1 in t1)Object.prototype.hasOwnProperty.call(t1,r1)&&(e1[r1]=t1[r1])}return e1},_extends$1.apply(this,arguments)}var reservedModifierKeywords=["shift","alt","meta","mod","ctrl"],mappedKeys={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function mapKey(e1){return(mappedKeys[e1]||e1).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function isHotkeyModifier(e1){return reservedModifierKeywords.includes(e1)}function parseKeysHookInput(e1,_g){return _g===void 0&&(_g=","),e1.split(_g)}function parseHotkey(e1,_g,t1){_g===void 0&&(_g="+");var r1=e1.toLocaleLowerCase().split(_g).map(function(o1){return mapKey(o1)}),n1={alt:r1.includes("alt"),ctrl:r1.includes("ctrl")||r1.includes("control"),shift:r1.includes("shift"),meta:r1.includes("meta"),mod:r1.includes("mod")},i1=r1.filter(function(o1){return!reservedModifierKeywords.includes(o1)});return _extends$1({},n1,{keys:i1,description:t1})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e1){e1.key!==void 0&&pushToCurrentlyPressedKeys([mapKey(e1.key),mapKey(e1.code)])}),document.addEventListener("keyup",function(e1){e1.key!==void 0&&removeFromCurrentlyPressedKeys([mapKey(e1.key),mapKey(e1.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){currentlyPressedKeys.clear()})})();var currentlyPressedKeys=new Set;function isReadonlyArray(e1){return Array.isArray(e1)}function isHotkeyPressed(e1,_g){_g===void 0&&(_g=",");var t1=isReadonlyArray(e1)?e1:e1.split(_g);return t1.every(function(r1){return currentlyPressedKeys.has(r1.trim().toLowerCase())})}function pushToCurrentlyPressedKeys(e1){var _g=Array.isArray(e1)?e1:[e1];currentlyPressedKeys.has("meta")&&currentlyPressedKeys.forEach(function(t1){return!isHotkeyModifier(t1)&&currentlyPressedKeys.delete(t1.toLowerCase())}),_g.forEach(function(t1){return currentlyPressedKeys.add(t1.toLowerCase())})}function removeFromCurrentlyPressedKeys(e1){var _g=Array.isArray(e1)?e1:[e1];e1==="meta"?currentlyPressedKeys.clear():_g.forEach(function(t1){return currentlyPressedKeys.delete(t1.toLowerCase())})}function maybePreventDefault(e1,_g,t1){(typeof t1=="function"&&t1(e1,_g)||t1===!0)&&e1.preventDefault()}function isHotkeyEnabled(e1,_g,t1){return typeof t1=="function"?t1(e1,_g):t1===!0||t1===void 0}function isKeyboardEventTriggeredByInput(e1){return isHotkeyEnabledOnTag(e1,["input","textarea","select"])}function isHotkeyEnabledOnTag(e1,_g){var t1=e1.target;_g===void 0&&(_g=!1);var r1=t1&&t1.tagName;return isReadonlyArray(_g)?!!(r1&&_g&&_g.some(function(n1){return n1.toLowerCase()===r1.toLowerCase()})):!!(r1&&_g&&_g===!0)}function isScopeActive(e1,_g){return e1.length===0&&_g?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):_g?e1.some(function(t1){return _g.includes(t1)})||e1.includes("*"):!0}var isHotkeyMatchingKeyboardEvent=function(_g,t1,r1){r1===void 0&&(r1=!1);var n1=t1.alt,i1=t1.meta,o1=t1.mod,a1=t1.shift,u1=t1.ctrl,s1=t1.keys,l1=_g.key,c1=_g.code,d1=_g.ctrlKey,h1=_g.metaKey,f1=_g.shiftKey,g1=_g.altKey,v1=mapKey(c1),$1=l1.toLowerCase();if(!(s1!=null&&s1.includes(v1))&&!(s1!=null&&s1.includes($1))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(v1))return!1;if(!r1){if(n1===!g1&&$1!=="alt"||a1===!f1&&$1!=="shift")return!1;if(o1){if(!h1&&!d1)return!1}else if(i1===!h1&&$1!=="meta"&&$1!=="os"||u1===!d1&&$1!=="ctrl"&&$1!=="control")return!1}return s1&&s1.length===1&&(s1.includes($1)||s1.includes(v1))?!0:s1?isHotkeyPressed(s1):!s1},BoundHotkeysProxyProvider=reactExports.createContext(void 0),useBoundHotkeysProxy=function(){return reactExports.useContext(BoundHotkeysProxyProvider)};function deepEqual$1(e1,_g){return e1&&_g&&typeof e1=="object"&&typeof _g=="object"?Object.keys(e1).length===Object.keys(_g).length&&Object.keys(e1).reduce(function(t1,r1){return t1&&deepEqual$1(e1[r1],_g[r1])},!0):e1===_g}var HotkeysContext=reactExports.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),useHotkeysContext=function(){return reactExports.useContext(HotkeysContext)};function useDeepEqualMemo(e1){var _g=reactExports.useRef(void 0);return deepEqual$1(_g.current,e1)||(_g.current=e1),_g.current}var stopPropagation=function(_g){_g.stopPropagation(),_g.preventDefault(),_g.stopImmediatePropagation()},useSafeLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useHotkeys(e1,_g,t1,r1){var n1=reactExports.useRef(null),i1=reactExports.useRef(!1),o1=t1 instanceof Array?r1 instanceof Array?void 0:r1:t1,a1=isReadonlyArray(e1)?e1.join(o1==null?void 0:o1.splitKey):e1,u1=t1 instanceof Array?t1:r1 instanceof Array?r1:void 0,s1=reactExports.useCallback(_g,u1??[]),l1=reactExports.useRef(s1);u1?l1.current=s1:l1.current=_g;var c1=useDeepEqualMemo(o1),d1=useHotkeysContext(),h1=d1.enabledScopes,f1=useBoundHotkeysProxy();return useSafeLayoutEffect(function(){if(!((c1==null?void 0:c1.enabled)===!1||!isScopeActive(h1,c1==null?void 0:c1.scopes))){var g1=function(E1,T1){var P1;if(T1===void 0&&(T1=!1),!(isKeyboardEventTriggeredByInput(E1)&&!isHotkeyEnabledOnTag(E1,c1==null?void 0:c1.enableOnFormTags))){if(n1.current!==null){var k1=n1.current.getRootNode();if((k1 instanceof Document||k1 instanceof ShadowRoot)&&k1.activeElement!==n1.current&&!n1.current.contains(k1.activeElement)){stopPropagation(E1);return}}(P1=E1.target)!=null&&P1.isContentEditable&&!(c1!=null&&c1.enableOnContentEditable)||parseKeysHookInput(a1,c1==null?void 0:c1.splitKey).forEach(function(N1){var W1,H1=parseHotkey(N1,c1==null?void 0:c1.combinationKey);if(isHotkeyMatchingKeyboardEvent(E1,H1,c1==null?void 0:c1.ignoreModifiers)||(W1=H1.keys)!=null&&W1.includes("*")){if(c1!=null&&c1.ignoreEventWhen!=null&&c1.ignoreEventWhen(E1)||T1&&i1.current)return;if(maybePreventDefault(E1,H1,c1==null?void 0:c1.preventDefault),!isHotkeyEnabled(E1,H1,c1==null?void 0:c1.enabled)){stopPropagation(E1);return}l1.current(E1,H1),T1||(i1.current=!0)}})}},v1=function(E1){E1.key!==void 0&&(pushToCurrentlyPressedKeys(mapKey(E1.code)),((c1==null?void 0:c1.keydown)===void 0&&(c1==null?void 0:c1.keyup)!==!0||c1!=null&&c1.keydown)&&g1(E1))},$1=function(E1){E1.key!==void 0&&(removeFromCurrentlyPressedKeys(mapKey(E1.code)),i1.current=!1,c1!=null&&c1.keyup&&g1(E1,!0))},y1=n1.current||(o1==null?void 0:o1.document)||document;return y1.addEventListener("keyup",$1),y1.addEventListener("keydown",v1),f1&&parseKeysHookInput(a1,c1==null?void 0:c1.splitKey).forEach(function(_1){return f1.addHotkey(parseHotkey(_1,c1==null?void 0:c1.combinationKey,c1==null?void 0:c1.description))}),function(){y1.removeEventListener("keyup",$1),y1.removeEventListener("keydown",v1),f1&&parseKeysHookInput(a1,c1==null?void 0:c1.splitKey).forEach(function(_1){return f1.removeHotkey(parseHotkey(_1,c1==null?void 0:c1.combinationKey,c1==null?void 0:c1.description))})}}},[a1,c1,h1]),n1}const useHotKey=(e1,_g,t1)=>{const r1=useStore(i1=>i1.disableShortCuts);return useHotkeys(e1,_g,{enabled:!r1},t1)};function warn(){if(console&&console.warn){for(var e1=arguments.length,_g=new Array(e1),t1=0;t1<e1;t1++)_g[t1]=arguments[t1];typeof _g[0]=="string"&&(_g[0]=`react-i18next:: ${_g[0]}`),console.warn(..._g)}}const alreadyWarned={};function warnOnce(){for(var e1=arguments.length,_g=new Array(e1),t1=0;t1<e1;t1++)_g[t1]=arguments[t1];typeof _g[0]=="string"&&alreadyWarned[_g[0]]||(typeof _g[0]=="string"&&(alreadyWarned[_g[0]]=new Date),warn(..._g))}const loadedClb=(e1,_g)=>()=>{if(e1.isInitialized)_g();else{const t1=()=>{setTimeout(()=>{e1.off("initialized",t1)},0),_g()};e1.on("initialized",t1)}};function loadNamespaces(e1,_g,t1){e1.loadNamespaces(_g,loadedClb(e1,t1))}function loadLanguages(e1,_g,t1,r1){typeof t1=="string"&&(t1=[t1]),t1.forEach(n1=>{e1.options.ns.indexOf(n1)<0&&e1.options.ns.push(n1)}),e1.loadLanguages(_g,loadedClb(e1,r1))}function oldI18nextHasLoadedNamespace(e1,_g){let t1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r1=_g.languages[0],n1=_g.options?_g.options.fallbackLng:!1,i1=_g.languages[_g.languages.length-1];if(r1.toLowerCase()==="cimode")return!0;const o1=(a1,u1)=>{const s1=_g.services.backendConnector.state[`${a1}|${u1}`];return s1===-1||s1===2};return t1.bindI18n&&t1.bindI18n.indexOf("languageChanging")>-1&&_g.services.backendConnector.backend&&_g.isLanguageChangingTo&&!o1(_g.isLanguageChangingTo,e1)?!1:!!(_g.hasResourceBundle(r1,e1)||!_g.services.backendConnector.backend||_g.options.resources&&!_g.options.partialBundledLanguages||o1(r1,e1)&&(!n1||o1(i1,e1)))}function hasLoadedNamespace(e1,_g){let t1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!_g.languages||!_g.languages.length?(warnOnce("i18n.languages were undefined or empty",_g.languages),!0):_g.options.ignoreJSONStructure!==void 0?_g.hasLoadedNamespace(e1,{lng:t1.lng,precheck:(n1,i1)=>{if(t1.bindI18n&&t1.bindI18n.indexOf("languageChanging")>-1&&n1.services.backendConnector.backend&&n1.isLanguageChangingTo&&!i1(n1.isLanguageChangingTo,e1))return!1}}):oldI18nextHasLoadedNamespace(e1,_g,t1)}const matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=e1=>htmlEntities[e1],unescape$1=e1=>e1.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions$1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};function setDefaults(){let e1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};defaultOptions$1={...defaultOptions$1,...e1}}function getDefaults$1(){return defaultOptions$1}let i18nInstance;function setI18n(e1){i18nInstance=e1}function getI18n(){return i18nInstance}const initReactI18next={type:"3rdParty",init(e1){setDefaults(e1.options.react),setI18n(e1)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(_g){_g.forEach(t1=>{this.usedNamespaces[t1]||(this.usedNamespaces[t1]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious$1=(e1,_g)=>{const t1=reactExports.useRef();return reactExports.useEffect(()=>{t1.current=e1},[e1,_g]),t1.current};function alwaysNewT(e1,_g,t1,r1){return e1.getFixedT(_g,t1,r1)}function useMemoizedT(e1,_g,t1,r1){return reactExports.useCallback(alwaysNewT(e1,_g,t1,r1),[e1,_g,t1,r1])}function useTranslation(e1){let _g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t1}=_g,{i18n:r1,defaultNS:n1}=reactExports.useContext(I18nContext)||{},i1=t1||r1||getI18n();if(i1&&!i1.reportNamespaces&&(i1.reportNamespaces=new ReportNamespaces),!i1){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const E1=(P1,k1)=>typeof k1=="string"?k1:k1&&typeof k1=="object"&&typeof k1.defaultValue=="string"?k1.defaultValue:Array.isArray(P1)?P1[P1.length-1]:P1,T1=[E1,{},!1];return T1.t=E1,T1.i18n={},T1.ready=!1,T1}i1.options.react&&i1.options.react.wait!==void 0&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o1={...getDefaults$1(),...i1.options.react,..._g},{useSuspense:a1,keyPrefix:u1}=o1;let s1=n1||i1.options&&i1.options.defaultNS;s1=typeof s1=="string"?[s1]:s1||["translation"],i1.reportNamespaces.addUsedNamespaces&&i1.reportNamespaces.addUsedNamespaces(s1);const l1=(i1.isInitialized||i1.initializedStoreOnce)&&s1.every(E1=>hasLoadedNamespace(E1,i1,o1)),c1=useMemoizedT(i1,_g.lng||null,o1.nsMode==="fallback"?s1:s1[0],u1),d1=()=>c1,h1=()=>alwaysNewT(i1,_g.lng||null,o1.nsMode==="fallback"?s1:s1[0],u1),[f1,g1]=reactExports.useState(d1);let v1=s1.join();_g.lng&&(v1=`${_g.lng}${v1}`);const $1=usePrevious$1(v1),y1=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:E1,bindI18nStore:T1}=o1;y1.current=!0,!l1&&!a1&&(_g.lng?loadLanguages(i1,_g.lng,s1,()=>{y1.current&&g1(h1)}):loadNamespaces(i1,s1,()=>{y1.current&&g1(h1)})),l1&&$1&&$1!==v1&&y1.current&&g1(h1);function P1(){y1.current&&g1(h1)}return E1&&i1&&i1.on(E1,P1),T1&&i1&&i1.store.on(T1,P1),()=>{y1.current=!1,E1&&i1&&E1.split(" ").forEach(k1=>i1.off(k1,P1)),T1&&i1&&T1.split(" ").forEach(k1=>i1.store.off(k1,P1))}},[i1,v1]),reactExports.useEffect(()=>{y1.current&&l1&&g1(d1)},[i1,u1,l1]);const _1=[f1,i1,l1];if(_1.t=f1,_1.i18n=i1,_1.ready=l1,l1||!l1&&!a1)return _1;throw new Promise(E1=>{_g.lng?loadLanguages(i1,_g.lng,s1,()=>E1()):loadNamespaces(i1,s1,()=>E1())})}function ShortCut(e1){const{content:_g,keys:t1}=e1;return jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("div",{children:_g}),jsxRuntimeExports.jsx("div",{className:"flex gap-[8px]",children:t1.map(r1=>jsxRuntimeExports.jsx("div",{className:"border px-2 py-1 rounded-lg",children:r1},r1))})]})}const isMac=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},CmdOrCtrl=()=>isMac()?"Cmd":"Ctrl";function Shortcuts(){const[e1,_g]=useToggle$1(!1),{t:t1}=useTranslation();return useHotKey("h",()=>{_g()}),jsxRuntimeExports.jsxs(Dialog,{open:e1,onOpenChange:_g,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(IconButton,{tooltip:"Hotkeys",children:jsxRuntimeExports.jsx(Keyboard,{})})}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Hotkeys"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-col pt-4",children:[jsxRuntimeExports.jsx(ShortCut,{content:t1("Pan"),keys:["Space + Drag"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Reset Zoom/Pan"),keys:["Esc"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Decrease Brush Size"),keys:["["]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Increase Brush Size"),keys:["]"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("View Original Image"),keys:["Hold Tab"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Undo"),keys:[CmdOrCtrl(),"Z"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Redo"),keys:[CmdOrCtrl(),"Shift","Z"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Copy Result"),keys:[CmdOrCtrl(),"C"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Paste Image"),keys:[CmdOrCtrl(),"V"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Trigger Manually Inpainting"),keys:["Shift","R"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Toggle Hotkeys Dialog"),keys:["H"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Toggle Settings Dialog"),keys:["S"]}),jsxRuntimeExports.jsx(ShortCut,{content:t1("Toggle File Manager"),keys:["F"]})]})]})})]})}var isCheckBoxInput=e1=>e1.type==="checkbox",isDateObject=e1=>e1 instanceof Date,isNullOrUndefined=e1=>e1==null;const isObjectType=e1=>typeof e1=="object";var isObject=e1=>!isNullOrUndefined(e1)&&!Array.isArray(e1)&&isObjectType(e1)&&!isDateObject(e1),getEventValue=e1=>isObject(e1)&&e1.target?isCheckBoxInput(e1.target)?e1.target.checked:e1.target.value:e1,getNodeParentName=e1=>e1.substring(0,e1.search(/\.\d+(\.|$)/))||e1,isNameInFieldArray=(e1,_g)=>e1.has(getNodeParentName(_g)),isPlainObject=e1=>{const _g=e1.constructor&&e1.constructor.prototype;return isObject(_g)&&_g.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(e1){let _g;const t1=Array.isArray(e1);if(e1 instanceof Date)_g=new Date(e1);else if(e1 instanceof Set)_g=new Set(e1);else if(!(isWeb&&(e1 instanceof Blob||e1 instanceof FileList))&&(t1||isObject(e1)))if(_g=t1?[]:{},!t1&&!isPlainObject(e1))_g=e1;else for(const r1 in e1)e1.hasOwnProperty(r1)&&(_g[r1]=cloneObject(e1[r1]));else return e1;return _g}var compact=e1=>Array.isArray(e1)?e1.filter(Boolean):[],isUndefined=e1=>e1===void 0,get$1=(e1,_g,t1)=>{if(!_g||!isObject(e1))return t1;const r1=compact(_g.split(/[,[\].]+?/)).reduce((n1,i1)=>isNullOrUndefined(n1)?n1:n1[i1],e1);return isUndefined(r1)||r1===e1?isUndefined(e1[_g])?t1:e1[_g]:r1},isBoolean=e1=>typeof e1=="boolean",isKey=e1=>/^\w*$/.test(e1),stringToPath=e1=>compact(e1.replace(/["|']|\]/g,"").split(/\.|\[/)),set=(e1,_g,t1)=>{let r1=-1;const n1=isKey(_g)?[_g]:stringToPath(_g),i1=n1.length,o1=i1-1;for(;++r1<i1;){const a1=n1[r1];let u1=t1;if(r1!==o1){const s1=e1[a1];u1=isObject(s1)||Array.isArray(s1)?s1:isNaN(+n1[r1+1])?{}:[]}if(a1==="__proto__")return;e1[a1]=u1,e1=e1[a1]}return e1};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext),FormProvider=e1=>{const{children:_g,...t1}=e1;return React.createElement(HookFormContext.Provider,{value:t1},_g)};var getProxyFormState=(e1,_g,t1,r1=!0)=>{const n1={defaultValues:_g._defaultValues};for(const i1 in e1)Object.defineProperty(n1,i1,{get:()=>{const o1=i1;return _g._proxyFormState[o1]!==VALIDATION_MODE.all&&(_g._proxyFormState[o1]=!r1||VALIDATION_MODE.all),t1&&(t1[o1]=!0),e1[o1]}});return n1},isEmptyObject=e1=>isObject(e1)&&!Object.keys(e1).length,shouldRenderFormState=(e1,_g,t1,r1)=>{t1(e1);const{name:n1,...i1}=e1;return isEmptyObject(i1)||Object.keys(i1).length>=Object.keys(_g).length||Object.keys(i1).find(o1=>_g[o1]===(!r1||VALIDATION_MODE.all))},convertToArrayPayload=e1=>Array.isArray(e1)?e1:[e1],shouldSubscribeByName=(e1,_g,t1)=>!e1||!_g||e1===_g||convertToArrayPayload(e1).some(r1=>r1&&(t1?r1===_g:r1.startsWith(_g)||_g.startsWith(r1)));function useSubscribe(e1){const _g=React.useRef(e1);_g.current=e1,React.useEffect(()=>{const t1=!e1.disabled&&_g.current.subject&&_g.current.subject.subscribe({next:_g.current.next});return()=>{t1&&t1.unsubscribe()}},[e1.disabled])}function useFormState(e1){const _g=useFormContext(),{control:t1=_g.control,disabled:r1,name:n1,exact:i1}=e1||{},[o1,a1]=React.useState(t1._formState),u1=React.useRef(!0),s1=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),l1=React.useRef(n1);return l1.current=n1,useSubscribe({disabled:r1,next:c1=>u1.current&&shouldSubscribeByName(l1.current,c1.name,i1)&&shouldRenderFormState(c1,s1.current,t1._updateFormState)&&a1({...t1._formState,...c1}),subject:t1._subjects.state}),React.useEffect(()=>(u1.current=!0,s1.current.isValid&&t1._updateValid(!0),()=>{u1.current=!1}),[t1]),getProxyFormState(o1,t1,s1.current,!1)}var isString=e1=>typeof e1=="string",generateWatchOutput=(e1,_g,t1,r1,n1)=>isString(e1)?(r1&&_g.watch.add(e1),get$1(t1,e1,n1)):Array.isArray(e1)?e1.map(i1=>(r1&&_g.watch.add(i1),get$1(t1,i1))):(r1&&(_g.watchAll=!0),t1);function useWatch(e1){const _g=useFormContext(),{control:t1=_g.control,name:r1,defaultValue:n1,disabled:i1,exact:o1}=e1||{},a1=React.useRef(r1);a1.current=r1,useSubscribe({disabled:i1,subject:t1._subjects.values,next:l1=>{shouldSubscribeByName(a1.current,l1.name,o1)&&s1(cloneObject(generateWatchOutput(a1.current,t1._names,l1.values||t1._formValues,!1,n1)))}});const[u1,s1]=React.useState(t1._getWatch(r1,n1));return React.useEffect(()=>t1._removeUnmounted()),u1}function useController(e1){const _g=useFormContext(),{name:t1,disabled:r1,control:n1=_g.control,shouldUnregister:i1}=e1,o1=isNameInFieldArray(n1._names.array,t1),a1=useWatch({control:n1,name:t1,defaultValue:get$1(n1._formValues,t1,get$1(n1._defaultValues,t1,e1.defaultValue)),exact:!0}),u1=useFormState({control:n1,name:t1}),s1=React.useRef(n1.register(t1,{...e1.rules,value:a1,...isBoolean(e1.disabled)?{disabled:e1.disabled}:{}}));return React.useEffect(()=>{const l1=n1._options.shouldUnregister||i1,c1=(d1,h1)=>{const f1=get$1(n1._fields,d1);f1&&f1._f&&(f1._f.mount=h1)};if(c1(t1,!0),l1){const d1=cloneObject(get$1(n1._options.defaultValues,t1));set(n1._defaultValues,t1,d1),isUndefined(get$1(n1._formValues,t1))&&set(n1._formValues,t1,d1)}return()=>{(o1?l1&&!n1._state.action:l1)?n1.unregister(t1):c1(t1,!1)}},[t1,n1,o1,i1]),React.useEffect(()=>{get$1(n1._fields,t1)&&n1._updateDisabledField({disabled:r1,fields:n1._fields,name:t1,value:get$1(n1._fields,t1)._f.value})},[r1,t1,n1]),{field:{name:t1,value:a1,...isBoolean(r1)||u1.disabled?{disabled:u1.disabled||r1}:{},onChange:React.useCallback(l1=>s1.current.onChange({target:{value:getEventValue(l1),name:t1},type:EVENTS.CHANGE}),[t1]),onBlur:React.useCallback(()=>s1.current.onBlur({target:{value:get$1(n1._formValues,t1),name:t1},type:EVENTS.BLUR}),[t1,n1]),ref:l1=>{const c1=get$1(n1._fields,t1);c1&&l1&&(c1._f.ref={focus:()=>l1.focus(),select:()=>l1.select(),setCustomValidity:d1=>l1.setCustomValidity(d1),reportValidity:()=>l1.reportValidity()})}},formState:u1,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get$1(u1.errors,t1)},isDirty:{enumerable:!0,get:()=>!!get$1(u1.dirtyFields,t1)},isTouched:{enumerable:!0,get:()=>!!get$1(u1.touchedFields,t1)},isValidating:{enumerable:!0,get:()=>!!get$1(u1.validatingFields,t1)},error:{enumerable:!0,get:()=>get$1(u1.errors,t1)}})}}const Controller=e1=>e1.render(useController(e1));var appendErrors=(e1,_g,t1,r1,n1)=>_g?{...t1[e1],types:{...t1[e1]&&t1[e1].types?t1[e1].types:{},[r1]:n1||!0}}:{},getValidationModes=e1=>({isOnSubmit:!e1||e1===VALIDATION_MODE.onSubmit,isOnBlur:e1===VALIDATION_MODE.onBlur,isOnChange:e1===VALIDATION_MODE.onChange,isOnAll:e1===VALIDATION_MODE.all,isOnTouch:e1===VALIDATION_MODE.onTouched}),isWatched=(e1,_g,t1)=>!t1&&(_g.watchAll||_g.watch.has(e1)||[..._g.watch].some(r1=>e1.startsWith(r1)&&/^\.\w+/.test(e1.slice(r1.length))));const iterateFieldsByAction=(e1,_g,t1,r1)=>{for(const n1 of t1||Object.keys(e1)){const i1=get$1(e1,n1);if(i1){const{_f:o1,...a1}=i1;if(o1){if(o1.refs&&o1.refs[0]&&_g(o1.refs[0],n1)&&!r1)break;if(o1.ref&&_g(o1.ref,o1.name)&&!r1)break;iterateFieldsByAction(a1,_g)}else isObject(a1)&&iterateFieldsByAction(a1,_g)}}};var updateFieldArrayRootError=(e1,_g,t1)=>{const r1=convertToArrayPayload(get$1(e1,t1));return set(r1,"root",_g[t1]),set(e1,t1,r1),e1},isFileInput=e1=>e1.type==="file",isFunction=e1=>typeof e1=="function",isHTMLElement=e1=>{if(!isWeb)return!1;const _g=e1?e1.ownerDocument:0;return e1 instanceof(_g&&_g.defaultView?_g.defaultView.HTMLElement:HTMLElement)},isMessage=e1=>isString(e1),isRadioInput=e1=>e1.type==="radio",isRegex=e1=>e1 instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=e1=>{if(Array.isArray(e1)){if(e1.length>1){const _g=e1.filter(t1=>t1&&t1.checked&&!t1.disabled).map(t1=>t1.value);return{value:_g,isValid:!!_g.length}}return e1[0].checked&&!e1[0].disabled?e1[0].attributes&&!isUndefined(e1[0].attributes.value)?isUndefined(e1[0].value)||e1[0].value===""?validResult:{value:e1[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=e1=>Array.isArray(e1)?e1.reduce((_g,t1)=>t1&&t1.checked&&!t1.disabled?{isValid:!0,value:t1.value}:_g,defaultReturn):defaultReturn;function getValidateError(e1,_g,t1="validate"){if(isMessage(e1)||Array.isArray(e1)&&e1.every(isMessage)||isBoolean(e1)&&!e1)return{type:t1,message:isMessage(e1)?e1:"",ref:_g}}var getValueAndMessage=e1=>isObject(e1)&&!isRegex(e1)?e1:{value:e1,message:""},validateField=async(e1,_g,t1,r1,n1)=>{const{ref:i1,refs:o1,required:a1,maxLength:u1,minLength:s1,min:l1,max:c1,pattern:d1,validate:h1,name:f1,valueAsNumber:g1,mount:v1,disabled:$1}=e1._f,y1=get$1(_g,f1);if(!v1||$1)return{};const _1=o1?o1[0]:i1,E1=ey=>{r1&&_1.reportValidity&&(_1.setCustomValidity(isBoolean(ey)?"":ey||""),_1.reportValidity())},T1={},P1=isRadioInput(i1),k1=isCheckBoxInput(i1),N1=P1||k1,W1=(g1||isFileInput(i1))&&isUndefined(i1.value)&&isUndefined(y1)||isHTMLElement(i1)&&i1.value===""||y1===""||Array.isArray(y1)&&!y1.length,H1=appendErrors.bind(null,f1,t1,T1),ty=(ey,ly,oy,Q1=INPUT_VALIDATION_RULES.maxLength,U1=INPUT_VALIDATION_RULES.minLength)=>{const V1=ey?ly:oy;T1[f1]={type:ey?Q1:U1,message:V1,ref:i1,...H1(ey?Q1:U1,V1)}};if(n1?!Array.isArray(y1)||!y1.length:a1&&(!N1&&(W1||isNullOrUndefined(y1))||isBoolean(y1)&&!y1||k1&&!getCheckboxValue(o1).isValid||P1&&!getRadioValue(o1).isValid)){const{value:ey,message:ly}=isMessage(a1)?{value:!!a1,message:a1}:getValueAndMessage(a1);if(ey&&(T1[f1]={type:INPUT_VALIDATION_RULES.required,message:ly,ref:_1,...H1(INPUT_VALIDATION_RULES.required,ly)},!t1))return E1(ly),T1}if(!W1&&(!isNullOrUndefined(l1)||!isNullOrUndefined(c1))){let ey,ly;const oy=getValueAndMessage(c1),Q1=getValueAndMessage(l1);if(!isNullOrUndefined(y1)&&!isNaN(y1)){const U1=i1.valueAsNumber||y1&&+y1;isNullOrUndefined(oy.value)||(ey=U1>oy.value),isNullOrUndefined(Q1.value)||(ly=U1<Q1.value)}else{const U1=i1.valueAsDate||new Date(y1),V1=hy=>new Date(new Date().toDateString()+" "+hy),K1=i1.type=="time",J1=i1.type=="week";isString(oy.value)&&y1&&(ey=K1?V1(y1)>V1(oy.value):J1?y1>oy.value:U1>new Date(oy.value)),isString(Q1.value)&&y1&&(ly=K1?V1(y1)<V1(Q1.value):J1?y1<Q1.value:U1<new Date(Q1.value))}if((ey||ly)&&(ty(!!ey,oy.message,Q1.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!t1))return E1(T1[f1].message),T1}if((u1||s1)&&!W1&&(isString(y1)||n1&&Array.isArray(y1))){const ey=getValueAndMessage(u1),ly=getValueAndMessage(s1),oy=!isNullOrUndefined(ey.value)&&y1.length>+ey.value,Q1=!isNullOrUndefined(ly.value)&&y1.length<+ly.value;if((oy||Q1)&&(ty(oy,ey.message,ly.message),!t1))return E1(T1[f1].message),T1}if(d1&&!W1&&isString(y1)){const{value:ey,message:ly}=getValueAndMessage(d1);if(isRegex(ey)&&!y1.match(ey)&&(T1[f1]={type:INPUT_VALIDATION_RULES.pattern,message:ly,ref:i1,...H1(INPUT_VALIDATION_RULES.pattern,ly)},!t1))return E1(ly),T1}if(h1){if(isFunction(h1)){const ey=await h1(y1,_g),ly=getValidateError(ey,_1);if(ly&&(T1[f1]={...ly,...H1(INPUT_VALIDATION_RULES.validate,ly.message)},!t1))return E1(ly.message),T1}else if(isObject(h1)){let ey={};for(const ly in h1){if(!isEmptyObject(ey)&&!t1)break;const oy=getValidateError(await h1[ly](y1,_g),_1,ly);oy&&(ey={...oy,...H1(ly,oy.message)},E1(oy.message),t1&&(T1[f1]=ey))}if(!isEmptyObject(ey)&&(T1[f1]={ref:_1,...ey},!t1))return T1}}return E1(!0),T1};function baseGet(e1,_g){const t1=_g.slice(0,-1).length;let r1=0;for(;r1<t1;)e1=isUndefined(e1)?r1++:e1[_g[r1++]];return e1}function isEmptyArray(e1){for(const _g in e1)if(e1.hasOwnProperty(_g)&&!isUndefined(e1[_g]))return!1;return!0}function unset(e1,_g){const t1=Array.isArray(_g)?_g:isKey(_g)?[_g]:stringToPath(_g),r1=t1.length===1?e1:baseGet(e1,t1),n1=t1.length-1,i1=t1[n1];return r1&&delete r1[i1],n1!==0&&(isObject(r1)&&isEmptyObject(r1)||Array.isArray(r1)&&isEmptyArray(r1))&&unset(e1,t1.slice(0,-1)),e1}var createSubject=()=>{let e1=[];return{get observers(){return e1},next:n1=>{for(const i1 of e1)i1.next&&i1.next(n1)},subscribe:n1=>(e1.push(n1),{unsubscribe:()=>{e1=e1.filter(i1=>i1!==n1)}}),unsubscribe:()=>{e1=[]}}},isPrimitive=e1=>isNullOrUndefined(e1)||!isObjectType(e1);function deepEqual(e1,_g){if(isPrimitive(e1)||isPrimitive(_g))return e1===_g;if(isDateObject(e1)&&isDateObject(_g))return e1.getTime()===_g.getTime();const t1=Object.keys(e1),r1=Object.keys(_g);if(t1.length!==r1.length)return!1;for(const n1 of t1){const i1=e1[n1];if(!r1.includes(n1))return!1;if(n1!=="ref"){const o1=_g[n1];if(isDateObject(i1)&&isDateObject(o1)||isObject(i1)&&isObject(o1)||Array.isArray(i1)&&Array.isArray(o1)?!deepEqual(i1,o1):i1!==o1)return!1}}return!0}var isMultipleSelect=e1=>e1.type==="select-multiple",isRadioOrCheckbox=e1=>isRadioInput(e1)||isCheckBoxInput(e1),live=e1=>isHTMLElement(e1)&&e1.isConnected,objectHasFunction=e1=>{for(const _g in e1)if(isFunction(e1[_g]))return!0;return!1};function markFieldsDirty(e1,_g={}){const t1=Array.isArray(e1);if(isObject(e1)||t1)for(const r1 in e1)Array.isArray(e1[r1])||isObject(e1[r1])&&!objectHasFunction(e1[r1])?(_g[r1]=Array.isArray(e1[r1])?[]:{},markFieldsDirty(e1[r1],_g[r1])):isNullOrUndefined(e1[r1])||(_g[r1]=!0);return _g}function getDirtyFieldsFromDefaultValues(e1,_g,t1){const r1=Array.isArray(e1);if(isObject(e1)||r1)for(const n1 in e1)Array.isArray(e1[n1])||isObject(e1[n1])&&!objectHasFunction(e1[n1])?isUndefined(_g)||isPrimitive(t1[n1])?t1[n1]=Array.isArray(e1[n1])?markFieldsDirty(e1[n1],[]):{...markFieldsDirty(e1[n1])}:getDirtyFieldsFromDefaultValues(e1[n1],isNullOrUndefined(_g)?{}:_g[n1],t1[n1]):t1[n1]=!deepEqual(e1[n1],_g[n1]);return t1}var getDirtyFields=(e1,_g)=>getDirtyFieldsFromDefaultValues(e1,_g,markFieldsDirty(_g)),getFieldValueAs=(e1,{valueAsNumber:_g,valueAsDate:t1,setValueAs:r1})=>isUndefined(e1)?e1:_g?e1===""?NaN:e1&&+e1:t1&&isString(e1)?new Date(e1):r1?r1(e1):e1;function getFieldValue(e1){const _g=e1.ref;if(!(e1.refs?e1.refs.every(t1=>t1.disabled):_g.disabled))return isFileInput(_g)?_g.files:isRadioInput(_g)?getRadioValue(e1.refs).value:isMultipleSelect(_g)?[..._g.selectedOptions].map(({value:t1})=>t1):isCheckBoxInput(_g)?getCheckboxValue(e1.refs).value:getFieldValueAs(isUndefined(_g.value)?e1.ref.value:_g.value,e1)}var getResolverOptions=(e1,_g,t1,r1)=>{const n1={};for(const i1 of e1){const o1=get$1(_g,i1);o1&&set(n1,i1,o1._f)}return{criteriaMode:t1,names:[...e1],fields:n1,shouldUseNativeValidation:r1}},getRuleValue=e1=>isUndefined(e1)?e1:isRegex(e1)?e1.source:isObject(e1)?isRegex(e1.value)?e1.value.source:e1.value:e1,hasValidation=e1=>e1.mount&&(e1.required||e1.min||e1.max||e1.maxLength||e1.minLength||e1.pattern||e1.validate);function schemaErrorLookup(e1,_g,t1){const r1=get$1(e1,t1);if(r1||isKey(t1))return{error:r1,name:t1};const n1=t1.split(".");for(;n1.length;){const i1=n1.join("."),o1=get$1(_g,i1),a1=get$1(e1,i1);if(o1&&!Array.isArray(o1)&&t1!==i1)return{name:t1};if(a1&&a1.type)return{name:i1,error:a1};n1.pop()}return{name:t1}}var skipValidation=(e1,_g,t1,r1,n1)=>n1.isOnAll?!1:!t1&&n1.isOnTouch?!(_g||e1):(t1?r1.isOnBlur:n1.isOnBlur)?!e1:(t1?r1.isOnChange:n1.isOnChange)?e1:!0,unsetEmptyArray=(e1,_g)=>!compact(get$1(e1,_g)).length&&unset(e1,_g);const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(e1={}){let _g={...defaultOptions,...e1},t1={submitCount:0,isDirty:!1,isLoading:isFunction(_g.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:_g.errors||{},disabled:_g.disabled||!1},r1={},n1=isObject(_g.defaultValues)||isObject(_g.values)?cloneObject(_g.defaultValues||_g.values)||{}:{},i1=_g.shouldUnregister?{}:cloneObject(n1),o1={action:!1,mount:!1,watch:!1},a1={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u1,s1=0;const l1={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},c1={values:createSubject(),array:createSubject(),state:createSubject()},d1=getValidationModes(_g.mode),h1=getValidationModes(_g.reValidateMode),f1=_g.criteriaMode===VALIDATION_MODE.all,g1=X1=>fy=>{clearTimeout(s1),s1=setTimeout(X1,fy)},v1=async X1=>{if(l1.isValid||X1){const fy=_g.resolver?isEmptyObject((await N1()).errors):await H1(r1,!0);fy!==t1.isValid&&c1.state.next({isValid:fy})}},$1=(X1,fy)=>{(l1.isValidating||l1.validatingFields)&&((X1||Array.from(a1.mount)).forEach(vy=>{vy&&(fy?set(t1.validatingFields,vy,fy):unset(t1.validatingFields,vy))}),c1.state.next({validatingFields:t1.validatingFields,isValidating:!isEmptyObject(t1.validatingFields)}))},y1=(X1,fy=[],vy,Dy,Ny=!0,Ty=!0)=>{if(Dy&&vy){if(o1.action=!0,Ty&&Array.isArray(get$1(r1,X1))){const Hy=vy(get$1(r1,X1),Dy.argA,Dy.argB);Ny&&set(r1,X1,Hy)}if(Ty&&Array.isArray(get$1(t1.errors,X1))){const Hy=vy(get$1(t1.errors,X1),Dy.argA,Dy.argB);Ny&&set(t1.errors,X1,Hy),unsetEmptyArray(t1.errors,X1)}if(l1.touchedFields&&Ty&&Array.isArray(get$1(t1.touchedFields,X1))){const Hy=vy(get$1(t1.touchedFields,X1),Dy.argA,Dy.argB);Ny&&set(t1.touchedFields,X1,Hy)}l1.dirtyFields&&(t1.dirtyFields=getDirtyFields(n1,i1)),c1.state.next({name:X1,isDirty:ey(X1,fy),dirtyFields:t1.dirtyFields,errors:t1.errors,isValid:t1.isValid})}else set(i1,X1,fy)},_1=(X1,fy)=>{set(t1.errors,X1,fy),c1.state.next({errors:t1.errors})},E1=X1=>{t1.errors=X1,c1.state.next({errors:t1.errors,isValid:!1})},T1=(X1,fy,vy,Dy)=>{const Ny=get$1(r1,X1);if(Ny){const Ty=get$1(i1,X1,isUndefined(vy)?get$1(n1,X1):vy);isUndefined(Ty)||Dy&&Dy.defaultChecked||fy?set(i1,X1,fy?Ty:getFieldValue(Ny._f)):Q1(X1,Ty),o1.mount&&v1()}},P1=(X1,fy,vy,Dy,Ny)=>{let Ty=!1,Hy=!1;const l0={name:X1},I0=!!(get$1(r1,X1)&&get$1(r1,X1)._f&&get$1(r1,X1)._f.disabled);if(!vy||Dy){l1.isDirty&&(Hy=t1.isDirty,t1.isDirty=l0.isDirty=ey(),Ty=Hy!==l0.isDirty);const $0=I0||deepEqual(get$1(n1,X1),fy);Hy=!!(!I0&&get$1(t1.dirtyFields,X1)),$0||I0?unset(t1.dirtyFields,X1):set(t1.dirtyFields,X1,!0),l0.dirtyFields=t1.dirtyFields,Ty=Ty||l1.dirtyFields&&Hy!==!$0}if(vy){const $0=get$1(t1.touchedFields,X1);$0||(set(t1.touchedFields,X1,vy),l0.touchedFields=t1.touchedFields,Ty=Ty||l1.touchedFields&&$0!==vy)}return Ty&&Ny&&c1.state.next(l0),Ty?l0:{}},k1=(X1,fy,vy,Dy)=>{const Ny=get$1(t1.errors,X1),Ty=l1.isValid&&isBoolean(fy)&&t1.isValid!==fy;if(e1.delayError&&vy?(u1=g1(()=>_1(X1,vy)),u1(e1.delayError)):(clearTimeout(s1),u1=null,vy?set(t1.errors,X1,vy):unset(t1.errors,X1)),(vy?!deepEqual(Ny,vy):Ny)||!isEmptyObject(Dy)||Ty){const Hy={...Dy,...Ty&&isBoolean(fy)?{isValid:fy}:{},errors:t1.errors,name:X1};t1={...t1,...Hy},c1.state.next(Hy)}},N1=async X1=>{$1(X1,!0);const fy=await _g.resolver(i1,_g.context,getResolverOptions(X1||a1.mount,r1,_g.criteriaMode,_g.shouldUseNativeValidation));return $1(X1),fy},W1=async X1=>{const{errors:fy}=await N1(X1);if(X1)for(const vy of X1){const Dy=get$1(fy,vy);Dy?set(t1.errors,vy,Dy):unset(t1.errors,vy)}else t1.errors=fy;return fy},H1=async(X1,fy,vy={valid:!0})=>{for(const Dy in X1){const Ny=X1[Dy];if(Ny){const{_f:Ty,...Hy}=Ny;if(Ty){const l0=a1.array.has(Ty.name);$1([Dy],!0);const I0=await validateField(Ny,i1,f1,_g.shouldUseNativeValidation&&!fy,l0);if($1([Dy]),I0[Ty.name]&&(vy.valid=!1,fy))break;!fy&&(get$1(I0,Ty.name)?l0?updateFieldArrayRootError(t1.errors,I0,Ty.name):set(t1.errors,Ty.name,I0[Ty.name]):unset(t1.errors,Ty.name))}Hy&&await H1(Hy,fy,vy)}}return vy.valid},ty=()=>{for(const X1 of a1.unMount){const fy=get$1(r1,X1);fy&&(fy._f.refs?fy._f.refs.every(vy=>!live(vy)):!live(fy._f.ref))&&jy(X1)}a1.unMount=new Set},ey=(X1,fy)=>(X1&&fy&&set(i1,X1,fy),!deepEqual(G1(),n1)),ly=(X1,fy,vy)=>generateWatchOutput(X1,a1,{...o1.mount?i1:isUndefined(fy)?n1:isString(X1)?{[X1]:fy}:fy},vy,fy),oy=X1=>compact(get$1(o1.mount?i1:n1,X1,e1.shouldUnregister?get$1(n1,X1,[]):[])),Q1=(X1,fy,vy={})=>{const Dy=get$1(r1,X1);let Ny=fy;if(Dy){const Ty=Dy._f;Ty&&(!Ty.disabled&&set(i1,X1,getFieldValueAs(fy,Ty)),Ny=isHTMLElement(Ty.ref)&&isNullOrUndefined(fy)?"":fy,isMultipleSelect(Ty.ref)?[...Ty.ref.options].forEach(Hy=>Hy.selected=Ny.includes(Hy.value)):Ty.refs?isCheckBoxInput(Ty.ref)?Ty.refs.length>1?Ty.refs.forEach(Hy=>(!Hy.defaultChecked||!Hy.disabled)&&(Hy.checked=Array.isArray(Ny)?!!Ny.find(l0=>l0===Hy.value):Ny===Hy.value)):Ty.refs[0]&&(Ty.refs[0].checked=!!Ny):Ty.refs.forEach(Hy=>Hy.checked=Hy.value===Ny):isFileInput(Ty.ref)?Ty.ref.value="":(Ty.ref.value=Ny,Ty.ref.type||c1.values.next({name:X1,values:{...i1}})))}(vy.shouldDirty||vy.shouldTouch)&&P1(X1,Ny,vy.shouldTouch,vy.shouldDirty,!0),vy.shouldValidate&&hy(X1)},U1=(X1,fy,vy)=>{for(const Dy in fy){const Ny=fy[Dy],Ty=`${X1}.${Dy}`,Hy=get$1(r1,Ty);(a1.array.has(X1)||!isPrimitive(Ny)||Hy&&!Hy._f)&&!isDateObject(Ny)?U1(Ty,Ny,vy):Q1(Ty,Ny,vy)}},V1=(X1,fy,vy={})=>{const Dy=get$1(r1,X1),Ny=a1.array.has(X1),Ty=cloneObject(fy);set(i1,X1,Ty),Ny?(c1.array.next({name:X1,values:{...i1}}),(l1.isDirty||l1.dirtyFields)&&vy.shouldDirty&&c1.state.next({name:X1,dirtyFields:getDirtyFields(n1,i1),isDirty:ey(X1,Ty)})):Dy&&!Dy._f&&!isNullOrUndefined(Ty)?U1(X1,Ty,vy):Q1(X1,Ty,vy),isWatched(X1,a1)&&c1.state.next({...t1}),c1.values.next({name:o1.mount?X1:void 0,values:{...i1}})},K1=async X1=>{o1.mount=!0;const fy=X1.target;let vy=fy.name,Dy=!0;const Ny=get$1(r1,vy),Ty=()=>fy.type?getFieldValue(Ny._f):getEventValue(X1),Hy=l0=>{Dy=Number.isNaN(l0)||l0===get$1(i1,vy,l0)};if(Ny){let l0,I0;const $0=Ty(),iv=X1.type===EVENTS.BLUR||X1.type===EVENTS.FOCUS_OUT,b0=!hasValidation(Ny._f)&&!_g.resolver&&!get$1(t1.errors,vy)&&!Ny._f.deps||skipValidation(iv,get$1(t1.touchedFields,vy),t1.isSubmitted,h1,d1),dv=isWatched(vy,a1,iv);set(i1,vy,$0),iv?(Ny._f.onBlur&&Ny._f.onBlur(X1),u1&&u1(0)):Ny._f.onChange&&Ny._f.onChange(X1);const i0=P1(vy,$0,iv,!1),nv=!isEmptyObject(i0)||dv;if(!iv&&c1.values.next({name:vy,type:X1.type,values:{...i1}}),b0)return l1.isValid&&v1(),nv&&c1.state.next({name:vy,...dv?{}:i0});if(!iv&&dv&&c1.state.next({...t1}),_g.resolver){const{errors:xv}=await N1([vy]);if(Hy($0),Dy){const Tv=schemaErrorLookup(t1.errors,r1,vy),qy=schemaErrorLookup(xv,r1,Tv.name||vy);l0=qy.error,vy=qy.name,I0=isEmptyObject(xv)}}else $1([vy],!0),l0=(await validateField(Ny,i1,f1,_g.shouldUseNativeValidation))[vy],$1([vy]),Hy($0),Dy&&(l0?I0=!1:l1.isValid&&(I0=await H1(r1,!0)));Dy&&(Ny._f.deps&&hy(Ny._f.deps),k1(vy,I0,l0,i0))}},J1=(X1,fy)=>{if(get$1(t1.errors,fy)&&X1.focus)return X1.focus(),1},hy=async(X1,fy={})=>{let vy,Dy;const Ny=convertToArrayPayload(X1);if(_g.resolver){const Ty=await W1(isUndefined(X1)?X1:Ny);vy=isEmptyObject(Ty),Dy=X1?!Ny.some(Hy=>get$1(Ty,Hy)):vy}else X1?(Dy=(await Promise.all(Ny.map(async Ty=>{const Hy=get$1(r1,Ty);return await H1(Hy&&Hy._f?{[Ty]:Hy}:Hy)}))).every(Boolean),!(!Dy&&!t1.isValid)&&v1()):Dy=vy=await H1(r1);return c1.state.next({...!isString(X1)||l1.isValid&&vy!==t1.isValid?{}:{name:X1},..._g.resolver||!X1?{isValid:vy}:{},errors:t1.errors}),fy.shouldFocus&&!Dy&&iterateFieldsByAction(r1,J1,X1?Ny:a1.mount),Dy},G1=X1=>{const fy={...o1.mount?i1:n1};return isUndefined(X1)?fy:isString(X1)?get$1(fy,X1):X1.map(vy=>get$1(fy,vy))},Y1=(X1,fy)=>({invalid:!!get$1((fy||t1).errors,X1),isDirty:!!get$1((fy||t1).dirtyFields,X1),error:get$1((fy||t1).errors,X1),isValidating:!!get$1(t1.validatingFields,X1),isTouched:!!get$1((fy||t1).touchedFields,X1)}),yy=X1=>{X1&&convertToArrayPayload(X1).forEach(fy=>unset(t1.errors,fy)),c1.state.next({errors:X1?t1.errors:{}})},Oy=(X1,fy,vy)=>{const Dy=(get$1(r1,X1,{_f:{}})._f||{}).ref,Ny=get$1(t1.errors,X1)||{},{ref:Ty,message:Hy,type:l0,...I0}=Ny;set(t1.errors,X1,{...I0,...fy,ref:Dy}),c1.state.next({name:X1,errors:t1.errors,isValid:!1}),vy&&vy.shouldFocus&&Dy&&Dy.focus&&Dy.focus()},Ey=(X1,fy)=>isFunction(X1)?c1.values.subscribe({next:vy=>X1(ly(void 0,fy),vy)}):ly(X1,fy,!0),jy=(X1,fy={})=>{for(const vy of X1?convertToArrayPayload(X1):a1.mount)a1.mount.delete(vy),a1.array.delete(vy),fy.keepValue||(unset(r1,vy),unset(i1,vy)),!fy.keepError&&unset(t1.errors,vy),!fy.keepDirty&&unset(t1.dirtyFields,vy),!fy.keepTouched&&unset(t1.touchedFields,vy),!fy.keepIsValidating&&unset(t1.validatingFields,vy),!_g.shouldUnregister&&!fy.keepDefaultValue&&unset(n1,vy);c1.values.next({values:{...i1}}),c1.state.next({...t1,...fy.keepDirty?{isDirty:ey()}:{}}),!fy.keepIsValid&&v1()},Ay=({disabled:X1,name:fy,field:vy,fields:Dy,value:Ny})=>{if(isBoolean(X1)&&o1.mount||X1){const Ty=X1?void 0:isUndefined(Ny)?getFieldValue(vy?vy._f:get$1(Dy,fy)._f):Ny;set(i1,fy,Ty),P1(fy,Ty,!1,!1,!0)}},Uy=(X1,fy={})=>{let vy=get$1(r1,X1);const Dy=isBoolean(fy.disabled);return set(r1,X1,{...vy||{},_f:{...vy&&vy._f?vy._f:{ref:{name:X1}},name:X1,mount:!0,...fy}}),a1.mount.add(X1),vy?Ay({field:vy,disabled:fy.disabled,name:X1,value:fy.value}):T1(X1,!0,fy.value),{...Dy?{disabled:fy.disabled}:{},..._g.progressive?{required:!!fy.required,min:getRuleValue(fy.min),max:getRuleValue(fy.max),minLength:getRuleValue(fy.minLength),maxLength:getRuleValue(fy.maxLength),pattern:getRuleValue(fy.pattern)}:{},name:X1,onChange:K1,onBlur:K1,ref:Ny=>{if(Ny){Uy(X1,fy),vy=get$1(r1,X1);const Ty=isUndefined(Ny.value)&&Ny.querySelectorAll&&Ny.querySelectorAll("input,select,textarea")[0]||Ny,Hy=isRadioOrCheckbox(Ty),l0=vy._f.refs||[];if(Hy?l0.find(I0=>I0===Ty):Ty===vy._f.ref)return;set(r1,X1,{_f:{...vy._f,...Hy?{refs:[...l0.filter(live),Ty,...Array.isArray(get$1(n1,X1))?[{}]:[]],ref:{type:Ty.type,name:X1}}:{ref:Ty}}}),T1(X1,!1,void 0,Ty)}else vy=get$1(r1,X1,{}),vy._f&&(vy._f.mount=!1),(_g.shouldUnregister||fy.shouldUnregister)&&!(isNameInFieldArray(a1.array,X1)&&o1.action)&&a1.unMount.add(X1)}}},Gy=()=>_g.shouldFocusError&&iterateFieldsByAction(r1,J1,a1.mount),Wy=X1=>{isBoolean(X1)&&(c1.state.next({disabled:X1}),iterateFieldsByAction(r1,(fy,vy)=>{const Dy=get$1(r1,vy);Dy&&(fy.disabled=Dy._f.disabled||X1,Array.isArray(Dy._f.refs)&&Dy._f.refs.forEach(Ny=>{Ny.disabled=Dy._f.disabled||X1}))},0,!1))},Yy=(X1,fy)=>async vy=>{let Dy;vy&&(vy.preventDefault&&vy.preventDefault(),vy.persist&&vy.persist());let Ny=cloneObject(i1);if(c1.state.next({isSubmitting:!0}),_g.resolver){const{errors:Ty,values:Hy}=await N1();t1.errors=Ty,Ny=Hy}else await H1(r1);if(unset(t1.errors,"root"),isEmptyObject(t1.errors)){c1.state.next({errors:{}});try{await X1(Ny,vy)}catch(Ty){Dy=Ty}}else fy&&await fy({...t1.errors},vy),Gy(),setTimeout(Gy);if(c1.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(t1.errors)&&!Dy,submitCount:t1.submitCount+1,errors:t1.errors}),Dy)throw Dy},Vy=(X1,fy={})=>{get$1(r1,X1)&&(isUndefined(fy.defaultValue)?V1(X1,cloneObject(get$1(n1,X1))):(V1(X1,fy.defaultValue),set(n1,X1,cloneObject(fy.defaultValue))),fy.keepTouched||unset(t1.touchedFields,X1),fy.keepDirty||(unset(t1.dirtyFields,X1),t1.isDirty=fy.defaultValue?ey(X1,cloneObject(get$1(n1,X1))):ey()),fy.keepError||(unset(t1.errors,X1),l1.isValid&&v1()),c1.state.next({...t1}))},p0=(X1,fy={})=>{const vy=X1?cloneObject(X1):n1,Dy=cloneObject(vy),Ny=isEmptyObject(X1),Ty=Ny?n1:Dy;if(fy.keepDefaultValues||(n1=vy),!fy.keepValues){if(fy.keepDirtyValues)for(const Hy of a1.mount)get$1(t1.dirtyFields,Hy)?set(Ty,Hy,get$1(i1,Hy)):V1(Hy,get$1(Ty,Hy));else{if(isWeb&&isUndefined(X1))for(const Hy of a1.mount){const l0=get$1(r1,Hy);if(l0&&l0._f){const I0=Array.isArray(l0._f.refs)?l0._f.refs[0]:l0._f.ref;if(isHTMLElement(I0)){const $0=I0.closest("form");if($0){$0.reset();break}}}}r1={}}i1=e1.shouldUnregister?fy.keepDefaultValues?cloneObject(n1):{}:cloneObject(Ty),c1.array.next({values:{...Ty}}),c1.values.next({values:{...Ty}})}a1={mount:fy.keepDirtyValues?a1.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o1.mount=!l1.isValid||!!fy.keepIsValid||!!fy.keepDirtyValues,o1.watch=!!e1.shouldUnregister,c1.state.next({submitCount:fy.keepSubmitCount?t1.submitCount:0,isDirty:Ny?!1:fy.keepDirty?t1.isDirty:!!(fy.keepDefaultValues&&!deepEqual(X1,n1)),isSubmitted:fy.keepIsSubmitted?t1.isSubmitted:!1,dirtyFields:Ny?{}:fy.keepDirtyValues?fy.keepDefaultValues&&i1?getDirtyFields(n1,i1):t1.dirtyFields:fy.keepDefaultValues&&X1?getDirtyFields(n1,X1):fy.keepDirty?t1.dirtyFields:{},touchedFields:fy.keepTouched?t1.touchedFields:{},errors:fy.keepErrors?t1.errors:{},isSubmitSuccessful:fy.keepIsSubmitSuccessful?t1.isSubmitSuccessful:!1,isSubmitting:!1})},y0=(X1,fy)=>p0(isFunction(X1)?X1(i1):X1,fy);return{control:{register:Uy,unregister:jy,getFieldState:Y1,handleSubmit:Yy,setError:Oy,_executeSchema:N1,_getWatch:ly,_getDirty:ey,_updateValid:v1,_removeUnmounted:ty,_updateFieldArray:y1,_updateDisabledField:Ay,_getFieldArray:oy,_reset:p0,_resetDefaultValues:()=>isFunction(_g.defaultValues)&&_g.defaultValues().then(X1=>{y0(X1,_g.resetOptions),c1.state.next({isLoading:!1})}),_updateFormState:X1=>{t1={...t1,...X1}},_disableForm:Wy,_subjects:c1,_proxyFormState:l1,_setErrors:E1,get _fields(){return r1},get _formValues(){return i1},get _state(){return o1},set _state(X1){o1=X1},get _defaultValues(){return n1},get _names(){return a1},set _names(X1){a1=X1},get _formState(){return t1},set _formState(X1){t1=X1},get _options(){return _g},set _options(X1){_g={..._g,...X1}}},trigger:hy,register:Uy,handleSubmit:Yy,watch:Ey,setValue:V1,getValues:G1,reset:y0,resetField:Vy,clearErrors:yy,unregister:jy,setError:Oy,setFocus:(X1,fy={})=>{const vy=get$1(r1,X1),Dy=vy&&vy._f;if(Dy){const Ny=Dy.refs?Dy.refs[0]:Dy.ref;Ny.focus&&(Ny.focus(),fy.shouldSelect&&Ny.select())}},getFieldState:Y1}}function useForm(e1={}){const _g=React.useRef(),t1=React.useRef(),[r1,n1]=React.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(e1.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e1.errors||{},disabled:e1.disabled||!1,defaultValues:isFunction(e1.defaultValues)?void 0:e1.defaultValues});_g.current||(_g.current={...createFormControl(e1),formState:r1});const i1=_g.current.control;return i1._options=e1,useSubscribe({subject:i1._subjects.state,next:o1=>{shouldRenderFormState(o1,i1._proxyFormState,i1._updateFormState,!0)&&n1({...i1._formState})}}),React.useEffect(()=>i1._disableForm(e1.disabled),[i1,e1.disabled]),React.useEffect(()=>{if(i1._proxyFormState.isDirty){const o1=i1._getDirty();o1!==r1.isDirty&&i1._subjects.state.next({isDirty:o1})}},[i1,r1.isDirty]),React.useEffect(()=>{e1.values&&!deepEqual(e1.values,t1.current)?(i1._reset(e1.values,i1._options.resetOptions),t1.current=e1.values,n1(o1=>({...o1}))):i1._resetDefaultValues()},[e1.values,i1]),React.useEffect(()=>{e1.errors&&i1._setErrors(e1.errors)},[e1.errors,i1]),React.useEffect(()=>{i1._state.mount||(i1._updateValid(),i1._state.mount=!0),i1._state.watch&&(i1._state.watch=!1,i1._subjects.state.next({...i1._formState})),i1._removeUnmounted()}),React.useEffect(()=>{e1.shouldUnregister&&i1._subjects.values.next({values:i1._getWatch()})},[e1.shouldUnregister,i1]),_g.current.formState=getProxyFormState(r1,i1),_g.current}const s=(e1,_g,t1)=>{if(e1&&"reportValidity"in e1){const r1=get$1(t1,_g);e1.setCustomValidity(r1&&r1.message||""),e1.reportValidity()}},o=(e1,_g)=>{for(const t1 in _g.fields){const r1=_g.fields[t1];r1&&r1.ref&&"reportValidity"in r1.ref?s(r1.ref,t1,e1):r1.refs&&r1.refs.forEach(n1=>s(n1,t1,e1))}},r=(e1,_g)=>{_g.shouldUseNativeValidation&&o(e1,_g);const t1={};for(const r1 in e1){const n1=get$1(_g.fields,r1),i1=Object.assign(e1[r1]||{},{ref:n1&&n1.ref});if(i(_g.names||Object.keys(e1),r1)){const o1=Object.assign({},get$1(t1,r1));set(o1,"root",i1),set(t1,r1,o1)}else set(t1,r1,i1)}return t1},i=(e1,_g)=>e1.some(t1=>t1.startsWith(_g+"."));var n=function(e1,_g){for(var t1={};e1.length;){var r1=e1[0],n1=r1.code,i1=r1.message,o1=r1.path.join(".");if(!t1[o1])if("unionErrors"in r1){var a1=r1.unionErrors[0].errors[0];t1[o1]={message:a1.message,type:a1.code}}else t1[o1]={message:i1,type:n1};if("unionErrors"in r1&&r1.unionErrors.forEach(function(l1){return l1.errors.forEach(function(c1){return e1.push(c1)})}),_g){var u1=t1[o1].types,s1=u1&&u1[r1.code];t1[o1]=appendErrors(o1,_g,t1,n1,s1?[].concat(s1,r1.message):r1.message)}e1.shift()}return t1},t=function(e1,_g,t1){return t1===void 0&&(t1={}),function(r1,n1,i1){try{return Promise.resolve(function(o1,a1){try{var u1=Promise.resolve(e1[t1.mode==="sync"?"parse":"parseAsync"](r1,_g)).then(function(s1){return i1.shouldUseNativeValidation&&o({},i1),{errors:{},values:t1.raw?r1:s1}})}catch(s1){return a1(s1)}return u1&&u1.then?u1.then(void 0,a1):u1}(0,function(o1){if(function(a1){return Array.isArray(a1==null?void 0:a1.errors)}(o1))return{values:{},errors:r(n(o1.errors,!i1.shouldUseNativeValidation&&i1.criteriaMode==="all"),i1)};throw o1}))}catch(o1){return Promise.reject(o1)}}},util;(function(e1){e1.assertEqual=n1=>n1;function _g(n1){}e1.assertIs=_g;function t1(n1){throw new Error}e1.assertNever=t1,e1.arrayToEnum=n1=>{const i1={};for(const o1 of n1)i1[o1]=o1;return i1},e1.getValidEnumValues=n1=>{const i1=e1.objectKeys(n1).filter(a1=>typeof n1[n1[a1]]!="number"),o1={};for(const a1 of i1)o1[a1]=n1[a1];return e1.objectValues(o1)},e1.objectValues=n1=>e1.objectKeys(n1).map(function(i1){return n1[i1]}),e1.objectKeys=typeof Object.keys=="function"?n1=>Object.keys(n1):n1=>{const i1=[];for(const o1 in n1)Object.prototype.hasOwnProperty.call(n1,o1)&&i1.push(o1);return i1},e1.find=(n1,i1)=>{for(const o1 of n1)if(i1(o1))return o1},e1.isInteger=typeof Number.isInteger=="function"?n1=>Number.isInteger(n1):n1=>typeof n1=="number"&&isFinite(n1)&&Math.floor(n1)===n1;function r1(n1,i1=" | "){return n1.map(o1=>typeof o1=="string"?`'${o1}'`:o1).join(i1)}e1.joinValues=r1,e1.jsonStringifyReplacer=(n1,i1)=>typeof i1=="bigint"?i1.toString():i1})(util||(util={}));var objectUtil;(function(e1){e1.mergeShapes=(_g,t1)=>({..._g,...t1})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e1=>{switch(typeof e1){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(e1)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(e1)?ZodParsedType.array:e1===null?ZodParsedType.null:e1.then&&typeof e1.then=="function"&&e1.catch&&typeof e1.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&e1 instanceof Map?ZodParsedType.map:typeof Set<"u"&&e1 instanceof Set?ZodParsedType.set:typeof Date<"u"&&e1 instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=e1=>JSON.stringify(e1,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(_g){super(),this.issues=[],this.addIssue=r1=>{this.issues=[...this.issues,r1]},this.addIssues=(r1=[])=>{this.issues=[...this.issues,...r1]};const t1=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t1):this.__proto__=t1,this.name="ZodError",this.issues=_g}get errors(){return this.issues}format(_g){const t1=_g||function(i1){return i1.message},r1={_errors:[]},n1=i1=>{for(const o1 of i1.issues)if(o1.code==="invalid_union")o1.unionErrors.map(n1);else if(o1.code==="invalid_return_type")n1(o1.returnTypeError);else if(o1.code==="invalid_arguments")n1(o1.argumentsError);else if(o1.path.length===0)r1._errors.push(t1(o1));else{let a1=r1,u1=0;for(;u1<o1.path.length;){const s1=o1.path[u1];u1===o1.path.length-1?(a1[s1]=a1[s1]||{_errors:[]},a1[s1]._errors.push(t1(o1))):a1[s1]=a1[s1]||{_errors:[]},a1=a1[s1],u1++}}};return n1(this),r1}static assert(_g){if(!(_g instanceof ZodError))throw new Error(`Not a ZodError: ${_g}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(_g=t1=>t1.message){const t1={},r1=[];for(const n1 of this.issues)n1.path.length>0?(t1[n1.path[0]]=t1[n1.path[0]]||[],t1[n1.path[0]].push(_g(n1))):r1.push(_g(n1));return{formErrors:r1,fieldErrors:t1}}get formErrors(){return this.flatten()}}ZodError.create=e1=>new ZodError(e1);const errorMap=(e1,_g)=>{let t1;switch(e1.code){case ZodIssueCode.invalid_type:e1.received===ZodParsedType.undefined?t1="Required":t1=`Expected ${e1.expected}, received ${e1.received}`;break;case ZodIssueCode.invalid_literal:t1=`Invalid literal value, expected ${JSON.stringify(e1.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:t1=`Unrecognized key(s) in object: ${util.joinValues(e1.keys,", ")}`;break;case ZodIssueCode.invalid_union:t1="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:t1=`Invalid discriminator value. Expected ${util.joinValues(e1.options)}`;break;case ZodIssueCode.invalid_enum_value:t1=`Invalid enum value. Expected ${util.joinValues(e1.options)}, received '${e1.received}'`;break;case ZodIssueCode.invalid_arguments:t1="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:t1="Invalid function return type";break;case ZodIssueCode.invalid_date:t1="Invalid date";break;case ZodIssueCode.invalid_string:typeof e1.validation=="object"?"includes"in e1.validation?(t1=`Invalid input: must include "${e1.validation.includes}"`,typeof e1.validation.position=="number"&&(t1=`${t1} at one or more positions greater than or equal to ${e1.validation.position}`)):"startsWith"in e1.validation?t1=`Invalid input: must start with "${e1.validation.startsWith}"`:"endsWith"in e1.validation?t1=`Invalid input: must end with "${e1.validation.endsWith}"`:util.assertNever(e1.validation):e1.validation!=="regex"?t1=`Invalid ${e1.validation}`:t1="Invalid";break;case ZodIssueCode.too_small:e1.type==="array"?t1=`Array must contain ${e1.exact?"exactly":e1.inclusive?"at least":"more than"} ${e1.minimum} element(s)`:e1.type==="string"?t1=`String must contain ${e1.exact?"exactly":e1.inclusive?"at least":"over"} ${e1.minimum} character(s)`:e1.type==="number"?t1=`Number must be ${e1.exact?"exactly equal to ":e1.inclusive?"greater than or equal to ":"greater than "}${e1.minimum}`:e1.type==="date"?t1=`Date must be ${e1.exact?"exactly equal to ":e1.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e1.minimum))}`:t1="Invalid input";break;case ZodIssueCode.too_big:e1.type==="array"?t1=`Array must contain ${e1.exact?"exactly":e1.inclusive?"at most":"less than"} ${e1.maximum} element(s)`:e1.type==="string"?t1=`String must contain ${e1.exact?"exactly":e1.inclusive?"at most":"under"} ${e1.maximum} character(s)`:e1.type==="number"?t1=`Number must be ${e1.exact?"exactly":e1.inclusive?"less than or equal to":"less than"} ${e1.maximum}`:e1.type==="bigint"?t1=`BigInt must be ${e1.exact?"exactly":e1.inclusive?"less than or equal to":"less than"} ${e1.maximum}`:e1.type==="date"?t1=`Date must be ${e1.exact?"exactly":e1.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e1.maximum))}`:t1="Invalid input";break;case ZodIssueCode.custom:t1="Invalid input";break;case ZodIssueCode.invalid_intersection_types:t1="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:t1=`Number must be a multiple of ${e1.multipleOf}`;break;case ZodIssueCode.not_finite:t1="Number must be finite";break;default:t1=_g.defaultError,util.assertNever(e1)}return{message:t1}};let overrideErrorMap=errorMap;function setErrorMap(e1){overrideErrorMap=e1}function getErrorMap(){return overrideErrorMap}const makeIssue=e1=>{const{data:_g,path:t1,errorMaps:r1,issueData:n1}=e1,i1=[...t1,...n1.path||[]],o1={...n1,path:i1};if(n1.message!==void 0)return{...n1,path:i1,message:n1.message};let a1="";const u1=r1.filter(s1=>!!s1).slice().reverse();for(const s1 of u1)a1=s1(o1,{data:_g,defaultError:a1}).message;return{...n1,path:i1,message:a1}},EMPTY_PATH=[];function addIssueToContext(e1,_g){const t1=getErrorMap(),r1=makeIssue({issueData:_g,data:e1.data,path:e1.path,errorMaps:[e1.common.contextualErrorMap,e1.schemaErrorMap,t1,t1===errorMap?void 0:errorMap].filter(n1=>!!n1)});e1.common.issues.push(r1)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(_g,t1){const r1=[];for(const n1 of t1){if(n1.status==="aborted")return INVALID;n1.status==="dirty"&&_g.dirty(),r1.push(n1.value)}return{status:_g.value,value:r1}}static async mergeObjectAsync(_g,t1){const r1=[];for(const n1 of t1){const i1=await n1.key,o1=await n1.value;r1.push({key:i1,value:o1})}return ParseStatus.mergeObjectSync(_g,r1)}static mergeObjectSync(_g,t1){const r1={};for(const n1 of t1){const{key:i1,value:o1}=n1;if(i1.status==="aborted"||o1.status==="aborted")return INVALID;i1.status==="dirty"&&_g.dirty(),o1.status==="dirty"&&_g.dirty(),i1.value!=="__proto__"&&(typeof o1.value<"u"||n1.alwaysSet)&&(r1[i1.value]=o1.value)}return{status:_g.value,value:r1}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=e1=>({status:"dirty",value:e1}),OK=e1=>({status:"valid",value:e1}),isAborted=e1=>e1.status==="aborted",isDirty=e1=>e1.status==="dirty",isValid=e1=>e1.status==="valid",isAsync=e1=>typeof Promise<"u"&&e1 instanceof Promise;function __classPrivateFieldGet(e1,_g,t1,r1){if(typeof _g=="function"?e1!==_g||!r1:!_g.has(e1))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _g.get(e1)}function __classPrivateFieldSet(e1,_g,t1,r1,n1){if(typeof _g=="function"?e1!==_g||!n1:!_g.has(e1))throw new TypeError("Cannot write private member to an object whose class did not declare it");return _g.set(e1,t1),t1}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(e1){e1.errToObj=_g=>typeof _g=="string"?{message:_g}:_g||{},e1.toString=_g=>typeof _g=="string"?_g:_g==null?void 0:_g.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(_g,t1,r1,n1){this._cachedPath=[],this.parent=_g,this.data=t1,this._path=r1,this._key=n1}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e1,_g)=>{if(isValid(_g))return{success:!0,data:_g.value};if(!e1.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t1=new ZodError(e1.common.issues);return this._error=t1,this._error}}};function processCreateParams(e1){if(!e1)return{};const{errorMap:_g,invalid_type_error:t1,required_error:r1,description:n1}=e1;if(_g&&(t1||r1))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return _g?{errorMap:_g,description:n1}:{errorMap:(o1,a1)=>{var u1,s1;const{message:l1}=e1;return o1.code==="invalid_enum_value"?{message:l1??a1.defaultError}:typeof a1.data>"u"?{message:(u1=l1??r1)!==null&&u1!==void 0?u1:a1.defaultError}:o1.code!=="invalid_type"?{message:a1.defaultError}:{message:(s1=l1??t1)!==null&&s1!==void 0?s1:a1.defaultError}},description:n1}}class ZodType{constructor(_g){this.spa=this.safeParseAsync,this._def=_g,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(_g){return getParsedType(_g.data)}_getOrReturnCtx(_g,t1){return t1||{common:_g.parent.common,data:_g.data,parsedType:getParsedType(_g.data),schemaErrorMap:this._def.errorMap,path:_g.path,parent:_g.parent}}_processInputParams(_g){return{status:new ParseStatus,ctx:{common:_g.parent.common,data:_g.data,parsedType:getParsedType(_g.data),schemaErrorMap:this._def.errorMap,path:_g.path,parent:_g.parent}}}_parseSync(_g){const t1=this._parse(_g);if(isAsync(t1))throw new Error("Synchronous parse encountered promise.");return t1}_parseAsync(_g){const t1=this._parse(_g);return Promise.resolve(t1)}parse(_g,t1){const r1=this.safeParse(_g,t1);if(r1.success)return r1.data;throw r1.error}safeParse(_g,t1){var r1;const n1={common:{issues:[],async:(r1=t1==null?void 0:t1.async)!==null&&r1!==void 0?r1:!1,contextualErrorMap:t1==null?void 0:t1.errorMap},path:(t1==null?void 0:t1.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:_g,parsedType:getParsedType(_g)},i1=this._parseSync({data:_g,path:n1.path,parent:n1});return handleResult(n1,i1)}async parseAsync(_g,t1){const r1=await this.safeParseAsync(_g,t1);if(r1.success)return r1.data;throw r1.error}async safeParseAsync(_g,t1){const r1={common:{issues:[],contextualErrorMap:t1==null?void 0:t1.errorMap,async:!0},path:(t1==null?void 0:t1.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:_g,parsedType:getParsedType(_g)},n1=this._parse({data:_g,path:r1.path,parent:r1}),i1=await(isAsync(n1)?n1:Promise.resolve(n1));return handleResult(r1,i1)}refine(_g,t1){const r1=n1=>typeof t1=="string"||typeof t1>"u"?{message:t1}:typeof t1=="function"?t1(n1):t1;return this._refinement((n1,i1)=>{const o1=_g(n1),a1=()=>i1.addIssue({code:ZodIssueCode.custom,...r1(n1)});return typeof Promise<"u"&&o1 instanceof Promise?o1.then(u1=>u1?!0:(a1(),!1)):o1?!0:(a1(),!1)})}refinement(_g,t1){return this._refinement((r1,n1)=>_g(r1)?!0:(n1.addIssue(typeof t1=="function"?t1(r1,n1):t1),!1))}_refinement(_g){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:_g}})}superRefine(_g){return this._refinement(_g)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(_g){return ZodUnion.create([this,_g],this._def)}and(_g){return ZodIntersection.create(this,_g,this._def)}transform(_g){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:_g}})}default(_g){const t1=typeof _g=="function"?_g:()=>_g;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:t1,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(_g){const t1=typeof _g=="function"?_g:()=>_g;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:t1,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(_g){const t1=this.constructor;return new t1({...this._def,description:_g})}pipe(_g){return ZodPipeline.create(this,_g)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(e1){let _g="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e1.precision?_g=`${_g}\\.\\d{${e1.precision}}`:e1.precision==null&&(_g=`${_g}(\\.\\d+)?`),_g}function timeRegex(e1){return new RegExp(`^${timeRegexSource(e1)}$`)}function datetimeRegex(e1){let _g=`${dateRegexSource}T${timeRegexSource(e1)}`;const t1=[];return t1.push(e1.local?"Z?":"Z"),e1.offset&&t1.push("([+-]\\d{2}:?\\d{2})"),_g=`${_g}(${t1.join("|")})`,new RegExp(`^${_g}$`)}function isValidIP(e1,_g){return!!((_g==="v4"||!_g)&&ipv4Regex.test(e1)||(_g==="v6"||!_g)&&ipv6Regex.test(e1))}class ZodString extends ZodType{_parse(_g){if(this._def.coerce&&(_g.data=String(_g.data)),this._getType(_g)!==ZodParsedType.string){const i1=this._getOrReturnCtx(_g);return addIssueToContext(i1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:i1.parsedType}),INVALID}const r1=new ParseStatus;let n1;for(const i1 of this._def.checks)if(i1.kind==="min")_g.data.length<i1.value&&(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.too_small,minimum:i1.value,type:"string",inclusive:!0,exact:!1,message:i1.message}),r1.dirty());else if(i1.kind==="max")_g.data.length>i1.value&&(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.too_big,maximum:i1.value,type:"string",inclusive:!0,exact:!1,message:i1.message}),r1.dirty());else if(i1.kind==="length"){const o1=_g.data.length>i1.value,a1=_g.data.length<i1.value;(o1||a1)&&(n1=this._getOrReturnCtx(_g,n1),o1?addIssueToContext(n1,{code:ZodIssueCode.too_big,maximum:i1.value,type:"string",inclusive:!0,exact:!0,message:i1.message}):a1&&addIssueToContext(n1,{code:ZodIssueCode.too_small,minimum:i1.value,type:"string",inclusive:!0,exact:!0,message:i1.message}),r1.dirty())}else if(i1.kind==="email")emailRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"email",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty());else if(i1.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"emoji",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty());else if(i1.kind==="uuid")uuidRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"uuid",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty());else if(i1.kind==="nanoid")nanoidRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty());else if(i1.kind==="cuid")cuidRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"cuid",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty());else if(i1.kind==="cuid2")cuid2Regex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty());else if(i1.kind==="ulid")ulidRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"ulid",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty());else if(i1.kind==="url")try{new URL(_g.data)}catch{n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"url",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty()}else i1.kind==="regex"?(i1.regex.lastIndex=0,i1.regex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"regex",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty())):i1.kind==="trim"?_g.data=_g.data.trim():i1.kind==="includes"?_g.data.includes(i1.value,i1.position)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.invalid_string,validation:{includes:i1.value,position:i1.position},message:i1.message}),r1.dirty()):i1.kind==="toLowerCase"?_g.data=_g.data.toLowerCase():i1.kind==="toUpperCase"?_g.data=_g.data.toUpperCase():i1.kind==="startsWith"?_g.data.startsWith(i1.value)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.invalid_string,validation:{startsWith:i1.value},message:i1.message}),r1.dirty()):i1.kind==="endsWith"?_g.data.endsWith(i1.value)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.invalid_string,validation:{endsWith:i1.value},message:i1.message}),r1.dirty()):i1.kind==="datetime"?datetimeRegex(i1).test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.invalid_string,validation:"datetime",message:i1.message}),r1.dirty()):i1.kind==="date"?dateRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.invalid_string,validation:"date",message:i1.message}),r1.dirty()):i1.kind==="time"?timeRegex(i1).test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.invalid_string,validation:"time",message:i1.message}),r1.dirty()):i1.kind==="duration"?durationRegex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"duration",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty()):i1.kind==="ip"?isValidIP(_g.data,i1.version)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"ip",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty()):i1.kind==="base64"?base64Regex.test(_g.data)||(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{validation:"base64",code:ZodIssueCode.invalid_string,message:i1.message}),r1.dirty()):util.assertNever(i1);return{status:r1.value,value:_g.data}}_regex(_g,t1,r1){return this.refinement(n1=>_g.test(n1),{validation:t1,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(r1)})}_addCheck(_g){return new ZodString({...this._def,checks:[...this._def.checks,_g]})}email(_g){return this._addCheck({kind:"email",...errorUtil.errToObj(_g)})}url(_g){return this._addCheck({kind:"url",...errorUtil.errToObj(_g)})}emoji(_g){return this._addCheck({kind:"emoji",...errorUtil.errToObj(_g)})}uuid(_g){return this._addCheck({kind:"uuid",...errorUtil.errToObj(_g)})}nanoid(_g){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(_g)})}cuid(_g){return this._addCheck({kind:"cuid",...errorUtil.errToObj(_g)})}cuid2(_g){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(_g)})}ulid(_g){return this._addCheck({kind:"ulid",...errorUtil.errToObj(_g)})}base64(_g){return this._addCheck({kind:"base64",...errorUtil.errToObj(_g)})}ip(_g){return this._addCheck({kind:"ip",...errorUtil.errToObj(_g)})}datetime(_g){var t1,r1;return typeof _g=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:_g}):this._addCheck({kind:"datetime",precision:typeof(_g==null?void 0:_g.precision)>"u"?null:_g==null?void 0:_g.precision,offset:(t1=_g==null?void 0:_g.offset)!==null&&t1!==void 0?t1:!1,local:(r1=_g==null?void 0:_g.local)!==null&&r1!==void 0?r1:!1,...errorUtil.errToObj(_g==null?void 0:_g.message)})}date(_g){return this._addCheck({kind:"date",message:_g})}time(_g){return typeof _g=="string"?this._addCheck({kind:"time",precision:null,message:_g}):this._addCheck({kind:"time",precision:typeof(_g==null?void 0:_g.precision)>"u"?null:_g==null?void 0:_g.precision,...errorUtil.errToObj(_g==null?void 0:_g.message)})}duration(_g){return this._addCheck({kind:"duration",...errorUtil.errToObj(_g)})}regex(_g,t1){return this._addCheck({kind:"regex",regex:_g,...errorUtil.errToObj(t1)})}includes(_g,t1){return this._addCheck({kind:"includes",value:_g,position:t1==null?void 0:t1.position,...errorUtil.errToObj(t1==null?void 0:t1.message)})}startsWith(_g,t1){return this._addCheck({kind:"startsWith",value:_g,...errorUtil.errToObj(t1)})}endsWith(_g,t1){return this._addCheck({kind:"endsWith",value:_g,...errorUtil.errToObj(t1)})}min(_g,t1){return this._addCheck({kind:"min",value:_g,...errorUtil.errToObj(t1)})}max(_g,t1){return this._addCheck({kind:"max",value:_g,...errorUtil.errToObj(t1)})}length(_g,t1){return this._addCheck({kind:"length",value:_g,...errorUtil.errToObj(t1)})}nonempty(_g){return this.min(1,errorUtil.errToObj(_g))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(_g=>_g.kind==="datetime")}get isDate(){return!!this._def.checks.find(_g=>_g.kind==="date")}get isTime(){return!!this._def.checks.find(_g=>_g.kind==="time")}get isDuration(){return!!this._def.checks.find(_g=>_g.kind==="duration")}get isEmail(){return!!this._def.checks.find(_g=>_g.kind==="email")}get isURL(){return!!this._def.checks.find(_g=>_g.kind==="url")}get isEmoji(){return!!this._def.checks.find(_g=>_g.kind==="emoji")}get isUUID(){return!!this._def.checks.find(_g=>_g.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(_g=>_g.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(_g=>_g.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(_g=>_g.kind==="cuid2")}get isULID(){return!!this._def.checks.find(_g=>_g.kind==="ulid")}get isIP(){return!!this._def.checks.find(_g=>_g.kind==="ip")}get isBase64(){return!!this._def.checks.find(_g=>_g.kind==="base64")}get minLength(){let _g=null;for(const t1 of this._def.checks)t1.kind==="min"&&(_g===null||t1.value>_g)&&(_g=t1.value);return _g}get maxLength(){let _g=null;for(const t1 of this._def.checks)t1.kind==="max"&&(_g===null||t1.value<_g)&&(_g=t1.value);return _g}}ZodString.create=e1=>{var _g;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(_g=e1==null?void 0:e1.coerce)!==null&&_g!==void 0?_g:!1,...processCreateParams(e1)})};function floatSafeRemainder(e1,_g){const t1=(e1.toString().split(".")[1]||"").length,r1=(_g.toString().split(".")[1]||"").length,n1=t1>r1?t1:r1,i1=parseInt(e1.toFixed(n1).replace(".","")),o1=parseInt(_g.toFixed(n1).replace(".",""));return i1%o1/Math.pow(10,n1)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(_g){if(this._def.coerce&&(_g.data=Number(_g.data)),this._getType(_g)!==ZodParsedType.number){const i1=this._getOrReturnCtx(_g);return addIssueToContext(i1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:i1.parsedType}),INVALID}let r1;const n1=new ParseStatus;for(const i1 of this._def.checks)i1.kind==="int"?util.isInteger(_g.data)||(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i1.message}),n1.dirty()):i1.kind==="min"?(i1.inclusive?_g.data<i1.value:_g.data<=i1.value)&&(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.too_small,minimum:i1.value,type:"number",inclusive:i1.inclusive,exact:!1,message:i1.message}),n1.dirty()):i1.kind==="max"?(i1.inclusive?_g.data>i1.value:_g.data>=i1.value)&&(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.too_big,maximum:i1.value,type:"number",inclusive:i1.inclusive,exact:!1,message:i1.message}),n1.dirty()):i1.kind==="multipleOf"?floatSafeRemainder(_g.data,i1.value)!==0&&(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.not_multiple_of,multipleOf:i1.value,message:i1.message}),n1.dirty()):i1.kind==="finite"?Number.isFinite(_g.data)||(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.not_finite,message:i1.message}),n1.dirty()):util.assertNever(i1);return{status:n1.value,value:_g.data}}gte(_g,t1){return this.setLimit("min",_g,!0,errorUtil.toString(t1))}gt(_g,t1){return this.setLimit("min",_g,!1,errorUtil.toString(t1))}lte(_g,t1){return this.setLimit("max",_g,!0,errorUtil.toString(t1))}lt(_g,t1){return this.setLimit("max",_g,!1,errorUtil.toString(t1))}setLimit(_g,t1,r1,n1){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:_g,value:t1,inclusive:r1,message:errorUtil.toString(n1)}]})}_addCheck(_g){return new ZodNumber({...this._def,checks:[...this._def.checks,_g]})}int(_g){return this._addCheck({kind:"int",message:errorUtil.toString(_g)})}positive(_g){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(_g)})}negative(_g){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(_g)})}nonpositive(_g){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(_g)})}nonnegative(_g){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(_g)})}multipleOf(_g,t1){return this._addCheck({kind:"multipleOf",value:_g,message:errorUtil.toString(t1)})}finite(_g){return this._addCheck({kind:"finite",message:errorUtil.toString(_g)})}safe(_g){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(_g)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(_g)})}get minValue(){let _g=null;for(const t1 of this._def.checks)t1.kind==="min"&&(_g===null||t1.value>_g)&&(_g=t1.value);return _g}get maxValue(){let _g=null;for(const t1 of this._def.checks)t1.kind==="max"&&(_g===null||t1.value<_g)&&(_g=t1.value);return _g}get isInt(){return!!this._def.checks.find(_g=>_g.kind==="int"||_g.kind==="multipleOf"&&util.isInteger(_g.value))}get isFinite(){let _g=null,t1=null;for(const r1 of this._def.checks){if(r1.kind==="finite"||r1.kind==="int"||r1.kind==="multipleOf")return!0;r1.kind==="min"?(t1===null||r1.value>t1)&&(t1=r1.value):r1.kind==="max"&&(_g===null||r1.value<_g)&&(_g=r1.value)}return Number.isFinite(t1)&&Number.isFinite(_g)}}ZodNumber.create=e1=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(e1==null?void 0:e1.coerce)||!1,...processCreateParams(e1)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(_g){if(this._def.coerce&&(_g.data=BigInt(_g.data)),this._getType(_g)!==ZodParsedType.bigint){const i1=this._getOrReturnCtx(_g);return addIssueToContext(i1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:i1.parsedType}),INVALID}let r1;const n1=new ParseStatus;for(const i1 of this._def.checks)i1.kind==="min"?(i1.inclusive?_g.data<i1.value:_g.data<=i1.value)&&(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.too_small,type:"bigint",minimum:i1.value,inclusive:i1.inclusive,message:i1.message}),n1.dirty()):i1.kind==="max"?(i1.inclusive?_g.data>i1.value:_g.data>=i1.value)&&(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.too_big,type:"bigint",maximum:i1.value,inclusive:i1.inclusive,message:i1.message}),n1.dirty()):i1.kind==="multipleOf"?_g.data%i1.value!==BigInt(0)&&(r1=this._getOrReturnCtx(_g,r1),addIssueToContext(r1,{code:ZodIssueCode.not_multiple_of,multipleOf:i1.value,message:i1.message}),n1.dirty()):util.assertNever(i1);return{status:n1.value,value:_g.data}}gte(_g,t1){return this.setLimit("min",_g,!0,errorUtil.toString(t1))}gt(_g,t1){return this.setLimit("min",_g,!1,errorUtil.toString(t1))}lte(_g,t1){return this.setLimit("max",_g,!0,errorUtil.toString(t1))}lt(_g,t1){return this.setLimit("max",_g,!1,errorUtil.toString(t1))}setLimit(_g,t1,r1,n1){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:_g,value:t1,inclusive:r1,message:errorUtil.toString(n1)}]})}_addCheck(_g){return new ZodBigInt({...this._def,checks:[...this._def.checks,_g]})}positive(_g){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(_g)})}negative(_g){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(_g)})}nonpositive(_g){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(_g)})}nonnegative(_g){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(_g)})}multipleOf(_g,t1){return this._addCheck({kind:"multipleOf",value:_g,message:errorUtil.toString(t1)})}get minValue(){let _g=null;for(const t1 of this._def.checks)t1.kind==="min"&&(_g===null||t1.value>_g)&&(_g=t1.value);return _g}get maxValue(){let _g=null;for(const t1 of this._def.checks)t1.kind==="max"&&(_g===null||t1.value<_g)&&(_g=t1.value);return _g}}ZodBigInt.create=e1=>{var _g;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(_g=e1==null?void 0:e1.coerce)!==null&&_g!==void 0?_g:!1,...processCreateParams(e1)})};class ZodBoolean extends ZodType{_parse(_g){if(this._def.coerce&&(_g.data=!!_g.data),this._getType(_g)!==ZodParsedType.boolean){const r1=this._getOrReturnCtx(_g);return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:r1.parsedType}),INVALID}return OK(_g.data)}}ZodBoolean.create=e1=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(e1==null?void 0:e1.coerce)||!1,...processCreateParams(e1)});class ZodDate extends ZodType{_parse(_g){if(this._def.coerce&&(_g.data=new Date(_g.data)),this._getType(_g)!==ZodParsedType.date){const i1=this._getOrReturnCtx(_g);return addIssueToContext(i1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:i1.parsedType}),INVALID}if(isNaN(_g.data.getTime())){const i1=this._getOrReturnCtx(_g);return addIssueToContext(i1,{code:ZodIssueCode.invalid_date}),INVALID}const r1=new ParseStatus;let n1;for(const i1 of this._def.checks)i1.kind==="min"?_g.data.getTime()<i1.value&&(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.too_small,message:i1.message,inclusive:!0,exact:!1,minimum:i1.value,type:"date"}),r1.dirty()):i1.kind==="max"?_g.data.getTime()>i1.value&&(n1=this._getOrReturnCtx(_g,n1),addIssueToContext(n1,{code:ZodIssueCode.too_big,message:i1.message,inclusive:!0,exact:!1,maximum:i1.value,type:"date"}),r1.dirty()):util.assertNever(i1);return{status:r1.value,value:new Date(_g.data.getTime())}}_addCheck(_g){return new ZodDate({...this._def,checks:[...this._def.checks,_g]})}min(_g,t1){return this._addCheck({kind:"min",value:_g.getTime(),message:errorUtil.toString(t1)})}max(_g,t1){return this._addCheck({kind:"max",value:_g.getTime(),message:errorUtil.toString(t1)})}get minDate(){let _g=null;for(const t1 of this._def.checks)t1.kind==="min"&&(_g===null||t1.value>_g)&&(_g=t1.value);return _g!=null?new Date(_g):null}get maxDate(){let _g=null;for(const t1 of this._def.checks)t1.kind==="max"&&(_g===null||t1.value<_g)&&(_g=t1.value);return _g!=null?new Date(_g):null}}ZodDate.create=e1=>new ZodDate({checks:[],coerce:(e1==null?void 0:e1.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(e1)});class ZodSymbol extends ZodType{_parse(_g){if(this._getType(_g)!==ZodParsedType.symbol){const r1=this._getOrReturnCtx(_g);return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:r1.parsedType}),INVALID}return OK(_g.data)}}ZodSymbol.create=e1=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(e1)});class ZodUndefined extends ZodType{_parse(_g){if(this._getType(_g)!==ZodParsedType.undefined){const r1=this._getOrReturnCtx(_g);return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:r1.parsedType}),INVALID}return OK(_g.data)}}ZodUndefined.create=e1=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(e1)});class ZodNull extends ZodType{_parse(_g){if(this._getType(_g)!==ZodParsedType.null){const r1=this._getOrReturnCtx(_g);return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:r1.parsedType}),INVALID}return OK(_g.data)}}ZodNull.create=e1=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(e1)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(_g){return OK(_g.data)}}ZodAny.create=e1=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(e1)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(_g){return OK(_g.data)}}ZodUnknown.create=e1=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(e1)});class ZodNever extends ZodType{_parse(_g){const t1=this._getOrReturnCtx(_g);return addIssueToContext(t1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:t1.parsedType}),INVALID}}ZodNever.create=e1=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(e1)});class ZodVoid extends ZodType{_parse(_g){if(this._getType(_g)!==ZodParsedType.undefined){const r1=this._getOrReturnCtx(_g);return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:r1.parsedType}),INVALID}return OK(_g.data)}}ZodVoid.create=e1=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(e1)});class ZodArray extends ZodType{_parse(_g){const{ctx:t1,status:r1}=this._processInputParams(_g),n1=this._def;if(t1.parsedType!==ZodParsedType.array)return addIssueToContext(t1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:t1.parsedType}),INVALID;if(n1.exactLength!==null){const o1=t1.data.length>n1.exactLength.value,a1=t1.data.length<n1.exactLength.value;(o1||a1)&&(addIssueToContext(t1,{code:o1?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:a1?n1.exactLength.value:void 0,maximum:o1?n1.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n1.exactLength.message}),r1.dirty())}if(n1.minLength!==null&&t1.data.length<n1.minLength.value&&(addIssueToContext(t1,{code:ZodIssueCode.too_small,minimum:n1.minLength.value,type:"array",inclusive:!0,exact:!1,message:n1.minLength.message}),r1.dirty()),n1.maxLength!==null&&t1.data.length>n1.maxLength.value&&(addIssueToContext(t1,{code:ZodIssueCode.too_big,maximum:n1.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n1.maxLength.message}),r1.dirty()),t1.common.async)return Promise.all([...t1.data].map((o1,a1)=>n1.type._parseAsync(new ParseInputLazyPath(t1,o1,t1.path,a1)))).then(o1=>ParseStatus.mergeArray(r1,o1));const i1=[...t1.data].map((o1,a1)=>n1.type._parseSync(new ParseInputLazyPath(t1,o1,t1.path,a1)));return ParseStatus.mergeArray(r1,i1)}get element(){return this._def.type}min(_g,t1){return new ZodArray({...this._def,minLength:{value:_g,message:errorUtil.toString(t1)}})}max(_g,t1){return new ZodArray({...this._def,maxLength:{value:_g,message:errorUtil.toString(t1)}})}length(_g,t1){return new ZodArray({...this._def,exactLength:{value:_g,message:errorUtil.toString(t1)}})}nonempty(_g){return this.min(1,_g)}}ZodArray.create=(e1,_g)=>new ZodArray({type:e1,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(_g)});function deepPartialify(e1){if(e1 instanceof ZodObject){const _g={};for(const t1 in e1.shape){const r1=e1.shape[t1];_g[t1]=ZodOptional.create(deepPartialify(r1))}return new ZodObject({...e1._def,shape:()=>_g})}else return e1 instanceof ZodArray?new ZodArray({...e1._def,type:deepPartialify(e1.element)}):e1 instanceof ZodOptional?ZodOptional.create(deepPartialify(e1.unwrap())):e1 instanceof ZodNullable?ZodNullable.create(deepPartialify(e1.unwrap())):e1 instanceof ZodTuple?ZodTuple.create(e1.items.map(_g=>deepPartialify(_g))):e1}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const _g=this._def.shape(),t1=util.objectKeys(_g);return this._cached={shape:_g,keys:t1}}_parse(_g){if(this._getType(_g)!==ZodParsedType.object){const s1=this._getOrReturnCtx(_g);return addIssueToContext(s1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:s1.parsedType}),INVALID}const{status:r1,ctx:n1}=this._processInputParams(_g),{shape:i1,keys:o1}=this._getCached(),a1=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const s1 in n1.data)o1.includes(s1)||a1.push(s1);const u1=[];for(const s1 of o1){const l1=i1[s1],c1=n1.data[s1];u1.push({key:{status:"valid",value:s1},value:l1._parse(new ParseInputLazyPath(n1,c1,n1.path,s1)),alwaysSet:s1 in n1.data})}if(this._def.catchall instanceof ZodNever){const s1=this._def.unknownKeys;if(s1==="passthrough")for(const l1 of a1)u1.push({key:{status:"valid",value:l1},value:{status:"valid",value:n1.data[l1]}});else if(s1==="strict")a1.length>0&&(addIssueToContext(n1,{code:ZodIssueCode.unrecognized_keys,keys:a1}),r1.dirty());else if(s1!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const s1=this._def.catchall;for(const l1 of a1){const c1=n1.data[l1];u1.push({key:{status:"valid",value:l1},value:s1._parse(new ParseInputLazyPath(n1,c1,n1.path,l1)),alwaysSet:l1 in n1.data})}}return n1.common.async?Promise.resolve().then(async()=>{const s1=[];for(const l1 of u1){const c1=await l1.key,d1=await l1.value;s1.push({key:c1,value:d1,alwaysSet:l1.alwaysSet})}return s1}).then(s1=>ParseStatus.mergeObjectSync(r1,s1)):ParseStatus.mergeObjectSync(r1,u1)}get shape(){return this._def.shape()}strict(_g){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",..._g!==void 0?{errorMap:(t1,r1)=>{var n1,i1,o1,a1;const u1=(o1=(i1=(n1=this._def).errorMap)===null||i1===void 0?void 0:i1.call(n1,t1,r1).message)!==null&&o1!==void 0?o1:r1.defaultError;return t1.code==="unrecognized_keys"?{message:(a1=errorUtil.errToObj(_g).message)!==null&&a1!==void 0?a1:u1}:{message:u1}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(_g){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),..._g})})}merge(_g){return new ZodObject({unknownKeys:_g._def.unknownKeys,catchall:_g._def.catchall,shape:()=>({...this._def.shape(),..._g._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(_g,t1){return this.augment({[_g]:t1})}catchall(_g){return new ZodObject({...this._def,catchall:_g})}pick(_g){const t1={};return util.objectKeys(_g).forEach(r1=>{_g[r1]&&this.shape[r1]&&(t1[r1]=this.shape[r1])}),new ZodObject({...this._def,shape:()=>t1})}omit(_g){const t1={};return util.objectKeys(this.shape).forEach(r1=>{_g[r1]||(t1[r1]=this.shape[r1])}),new ZodObject({...this._def,shape:()=>t1})}deepPartial(){return deepPartialify(this)}partial(_g){const t1={};return util.objectKeys(this.shape).forEach(r1=>{const n1=this.shape[r1];_g&&!_g[r1]?t1[r1]=n1:t1[r1]=n1.optional()}),new ZodObject({...this._def,shape:()=>t1})}required(_g){const t1={};return util.objectKeys(this.shape).forEach(r1=>{if(_g&&!_g[r1])t1[r1]=this.shape[r1];else{let i1=this.shape[r1];for(;i1 instanceof ZodOptional;)i1=i1._def.innerType;t1[r1]=i1}}),new ZodObject({...this._def,shape:()=>t1})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(e1,_g)=>new ZodObject({shape:()=>e1,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(_g)});ZodObject.strictCreate=(e1,_g)=>new ZodObject({shape:()=>e1,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(_g)});ZodObject.lazycreate=(e1,_g)=>new ZodObject({shape:e1,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(_g)});class ZodUnion extends ZodType{_parse(_g){const{ctx:t1}=this._processInputParams(_g),r1=this._def.options;function n1(i1){for(const a1 of i1)if(a1.result.status==="valid")return a1.result;for(const a1 of i1)if(a1.result.status==="dirty")return t1.common.issues.push(...a1.ctx.common.issues),a1.result;const o1=i1.map(a1=>new ZodError(a1.ctx.common.issues));return addIssueToContext(t1,{code:ZodIssueCode.invalid_union,unionErrors:o1}),INVALID}if(t1.common.async)return Promise.all(r1.map(async i1=>{const o1={...t1,common:{...t1.common,issues:[]},parent:null};return{result:await i1._parseAsync({data:t1.data,path:t1.path,parent:o1}),ctx:o1}})).then(n1);{let i1;const o1=[];for(const u1 of r1){const s1={...t1,common:{...t1.common,issues:[]},parent:null},l1=u1._parseSync({data:t1.data,path:t1.path,parent:s1});if(l1.status==="valid")return l1;l1.status==="dirty"&&!i1&&(i1={result:l1,ctx:s1}),s1.common.issues.length&&o1.push(s1.common.issues)}if(i1)return t1.common.issues.push(...i1.ctx.common.issues),i1.result;const a1=o1.map(u1=>new ZodError(u1));return addIssueToContext(t1,{code:ZodIssueCode.invalid_union,unionErrors:a1}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(e1,_g)=>new ZodUnion({options:e1,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(_g)});const getDiscriminator=e1=>e1 instanceof ZodLazy?getDiscriminator(e1.schema):e1 instanceof ZodEffects?getDiscriminator(e1.innerType()):e1 instanceof ZodLiteral?[e1.value]:e1 instanceof ZodEnum?e1.options:e1 instanceof ZodNativeEnum?util.objectValues(e1.enum):e1 instanceof ZodDefault?getDiscriminator(e1._def.innerType):e1 instanceof ZodUndefined?[void 0]:e1 instanceof ZodNull?[null]:e1 instanceof ZodOptional?[void 0,...getDiscriminator(e1.unwrap())]:e1 instanceof ZodNullable?[null,...getDiscriminator(e1.unwrap())]:e1 instanceof ZodBranded||e1 instanceof ZodReadonly?getDiscriminator(e1.unwrap()):e1 instanceof ZodCatch?getDiscriminator(e1._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(_g){const{ctx:t1}=this._processInputParams(_g);if(t1.parsedType!==ZodParsedType.object)return addIssueToContext(t1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:t1.parsedType}),INVALID;const r1=this.discriminator,n1=t1.data[r1],i1=this.optionsMap.get(n1);return i1?t1.common.async?i1._parseAsync({data:t1.data,path:t1.path,parent:t1}):i1._parseSync({data:t1.data,path:t1.path,parent:t1}):(addIssueToContext(t1,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r1]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(_g,t1,r1){const n1=new Map;for(const i1 of t1){const o1=getDiscriminator(i1.shape[_g]);if(!o1.length)throw new Error(`A discriminator value for key \`${_g}\` could not be extracted from all schema options`);for(const a1 of o1){if(n1.has(a1))throw new Error(`Discriminator property ${String(_g)} has duplicate value ${String(a1)}`);n1.set(a1,i1)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:_g,options:t1,optionsMap:n1,...processCreateParams(r1)})}}function mergeValues(e1,_g){const t1=getParsedType(e1),r1=getParsedType(_g);if(e1===_g)return{valid:!0,data:e1};if(t1===ZodParsedType.object&&r1===ZodParsedType.object){const n1=util.objectKeys(_g),i1=util.objectKeys(e1).filter(a1=>n1.indexOf(a1)!==-1),o1={...e1,..._g};for(const a1 of i1){const u1=mergeValues(e1[a1],_g[a1]);if(!u1.valid)return{valid:!1};o1[a1]=u1.data}return{valid:!0,data:o1}}else if(t1===ZodParsedType.array&&r1===ZodParsedType.array){if(e1.length!==_g.length)return{valid:!1};const n1=[];for(let i1=0;i1<e1.length;i1++){const o1=e1[i1],a1=_g[i1],u1=mergeValues(o1,a1);if(!u1.valid)return{valid:!1};n1.push(u1.data)}return{valid:!0,data:n1}}else return t1===ZodParsedType.date&&r1===ZodParsedType.date&&+e1==+_g?{valid:!0,data:e1}:{valid:!1}}class ZodIntersection extends ZodType{_parse(_g){const{status:t1,ctx:r1}=this._processInputParams(_g),n1=(i1,o1)=>{if(isAborted(i1)||isAborted(o1))return INVALID;const a1=mergeValues(i1.value,o1.value);return a1.valid?((isDirty(i1)||isDirty(o1))&&t1.dirty(),{status:t1.value,value:a1.data}):(addIssueToContext(r1,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return r1.common.async?Promise.all([this._def.left._parseAsync({data:r1.data,path:r1.path,parent:r1}),this._def.right._parseAsync({data:r1.data,path:r1.path,parent:r1})]).then(([i1,o1])=>n1(i1,o1)):n1(this._def.left._parseSync({data:r1.data,path:r1.path,parent:r1}),this._def.right._parseSync({data:r1.data,path:r1.path,parent:r1}))}}ZodIntersection.create=(e1,_g,t1)=>new ZodIntersection({left:e1,right:_g,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(t1)});class ZodTuple extends ZodType{_parse(_g){const{status:t1,ctx:r1}=this._processInputParams(_g);if(r1.parsedType!==ZodParsedType.array)return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r1.parsedType}),INVALID;if(r1.data.length<this._def.items.length)return addIssueToContext(r1,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&r1.data.length>this._def.items.length&&(addIssueToContext(r1,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t1.dirty());const i1=[...r1.data].map((o1,a1)=>{const u1=this._def.items[a1]||this._def.rest;return u1?u1._parse(new ParseInputLazyPath(r1,o1,r1.path,a1)):null}).filter(o1=>!!o1);return r1.common.async?Promise.all(i1).then(o1=>ParseStatus.mergeArray(t1,o1)):ParseStatus.mergeArray(t1,i1)}get items(){return this._def.items}rest(_g){return new ZodTuple({...this._def,rest:_g})}}ZodTuple.create=(e1,_g)=>{if(!Array.isArray(e1))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e1,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(_g)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(_g){const{status:t1,ctx:r1}=this._processInputParams(_g);if(r1.parsedType!==ZodParsedType.object)return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:r1.parsedType}),INVALID;const n1=[],i1=this._def.keyType,o1=this._def.valueType;for(const a1 in r1.data)n1.push({key:i1._parse(new ParseInputLazyPath(r1,a1,r1.path,a1)),value:o1._parse(new ParseInputLazyPath(r1,r1.data[a1],r1.path,a1)),alwaysSet:a1 in r1.data});return r1.common.async?ParseStatus.mergeObjectAsync(t1,n1):ParseStatus.mergeObjectSync(t1,n1)}get element(){return this._def.valueType}static create(_g,t1,r1){return t1 instanceof ZodType?new ZodRecord({keyType:_g,valueType:t1,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(r1)}):new ZodRecord({keyType:ZodString.create(),valueType:_g,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(t1)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(_g){const{status:t1,ctx:r1}=this._processInputParams(_g);if(r1.parsedType!==ZodParsedType.map)return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:r1.parsedType}),INVALID;const n1=this._def.keyType,i1=this._def.valueType,o1=[...r1.data.entries()].map(([a1,u1],s1)=>({key:n1._parse(new ParseInputLazyPath(r1,a1,r1.path,[s1,"key"])),value:i1._parse(new ParseInputLazyPath(r1,u1,r1.path,[s1,"value"]))}));if(r1.common.async){const a1=new Map;return Promise.resolve().then(async()=>{for(const u1 of o1){const s1=await u1.key,l1=await u1.value;if(s1.status==="aborted"||l1.status==="aborted")return INVALID;(s1.status==="dirty"||l1.status==="dirty")&&t1.dirty(),a1.set(s1.value,l1.value)}return{status:t1.value,value:a1}})}else{const a1=new Map;for(const u1 of o1){const s1=u1.key,l1=u1.value;if(s1.status==="aborted"||l1.status==="aborted")return INVALID;(s1.status==="dirty"||l1.status==="dirty")&&t1.dirty(),a1.set(s1.value,l1.value)}return{status:t1.value,value:a1}}}}ZodMap.create=(e1,_g,t1)=>new ZodMap({valueType:_g,keyType:e1,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(t1)});class ZodSet extends ZodType{_parse(_g){const{status:t1,ctx:r1}=this._processInputParams(_g);if(r1.parsedType!==ZodParsedType.set)return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:r1.parsedType}),INVALID;const n1=this._def;n1.minSize!==null&&r1.data.size<n1.minSize.value&&(addIssueToContext(r1,{code:ZodIssueCode.too_small,minimum:n1.minSize.value,type:"set",inclusive:!0,exact:!1,message:n1.minSize.message}),t1.dirty()),n1.maxSize!==null&&r1.data.size>n1.maxSize.value&&(addIssueToContext(r1,{code:ZodIssueCode.too_big,maximum:n1.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n1.maxSize.message}),t1.dirty());const i1=this._def.valueType;function o1(u1){const s1=new Set;for(const l1 of u1){if(l1.status==="aborted")return INVALID;l1.status==="dirty"&&t1.dirty(),s1.add(l1.value)}return{status:t1.value,value:s1}}const a1=[...r1.data.values()].map((u1,s1)=>i1._parse(new ParseInputLazyPath(r1,u1,r1.path,s1)));return r1.common.async?Promise.all(a1).then(u1=>o1(u1)):o1(a1)}min(_g,t1){return new ZodSet({...this._def,minSize:{value:_g,message:errorUtil.toString(t1)}})}max(_g,t1){return new ZodSet({...this._def,maxSize:{value:_g,message:errorUtil.toString(t1)}})}size(_g,t1){return this.min(_g,t1).max(_g,t1)}nonempty(_g){return this.min(1,_g)}}ZodSet.create=(e1,_g)=>new ZodSet({valueType:e1,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(_g)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(_g){const{ctx:t1}=this._processInputParams(_g);if(t1.parsedType!==ZodParsedType.function)return addIssueToContext(t1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:t1.parsedType}),INVALID;function r1(a1,u1){return makeIssue({data:a1,path:t1.path,errorMaps:[t1.common.contextualErrorMap,t1.schemaErrorMap,getErrorMap(),errorMap].filter(s1=>!!s1),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:u1}})}function n1(a1,u1){return makeIssue({data:a1,path:t1.path,errorMaps:[t1.common.contextualErrorMap,t1.schemaErrorMap,getErrorMap(),errorMap].filter(s1=>!!s1),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:u1}})}const i1={errorMap:t1.common.contextualErrorMap},o1=t1.data;if(this._def.returns instanceof ZodPromise){const a1=this;return OK(async function(...u1){const s1=new ZodError([]),l1=await a1._def.args.parseAsync(u1,i1).catch(h1=>{throw s1.addIssue(r1(u1,h1)),s1}),c1=await Reflect.apply(o1,this,l1);return await a1._def.returns._def.type.parseAsync(c1,i1).catch(h1=>{throw s1.addIssue(n1(c1,h1)),s1})})}else{const a1=this;return OK(function(...u1){const s1=a1._def.args.safeParse(u1,i1);if(!s1.success)throw new ZodError([r1(u1,s1.error)]);const l1=Reflect.apply(o1,this,s1.data),c1=a1._def.returns.safeParse(l1,i1);if(!c1.success)throw new ZodError([n1(l1,c1.error)]);return c1.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(..._g){return new ZodFunction({...this._def,args:ZodTuple.create(_g).rest(ZodUnknown.create())})}returns(_g){return new ZodFunction({...this._def,returns:_g})}implement(_g){return this.parse(_g)}strictImplement(_g){return this.parse(_g)}static create(_g,t1,r1){return new ZodFunction({args:_g||ZodTuple.create([]).rest(ZodUnknown.create()),returns:t1||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(r1)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(_g){const{ctx:t1}=this._processInputParams(_g);return this._def.getter()._parse({data:t1.data,path:t1.path,parent:t1})}}ZodLazy.create=(e1,_g)=>new ZodLazy({getter:e1,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(_g)});class ZodLiteral extends ZodType{_parse(_g){if(_g.data!==this._def.value){const t1=this._getOrReturnCtx(_g);return addIssueToContext(t1,{received:t1.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:_g.data}}get value(){return this._def.value}}ZodLiteral.create=(e1,_g)=>new ZodLiteral({value:e1,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(_g)});function createZodEnum(e1,_g){return new ZodEnum({values:e1,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(_g)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(_g){if(typeof _g.data!="string"){const t1=this._getOrReturnCtx(_g),r1=this._def.values;return addIssueToContext(t1,{expected:util.joinValues(r1),received:t1.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(_g.data)){const t1=this._getOrReturnCtx(_g),r1=this._def.values;return addIssueToContext(t1,{received:t1.data,code:ZodIssueCode.invalid_enum_value,options:r1}),INVALID}return OK(_g.data)}get options(){return this._def.values}get enum(){const _g={};for(const t1 of this._def.values)_g[t1]=t1;return _g}get Values(){const _g={};for(const t1 of this._def.values)_g[t1]=t1;return _g}get Enum(){const _g={};for(const t1 of this._def.values)_g[t1]=t1;return _g}extract(_g,t1=this._def){return ZodEnum.create(_g,{...this._def,...t1})}exclude(_g,t1=this._def){return ZodEnum.create(this.options.filter(r1=>!_g.includes(r1)),{...this._def,...t1})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(_g){const t1=util.getValidEnumValues(this._def.values),r1=this._getOrReturnCtx(_g);if(r1.parsedType!==ZodParsedType.string&&r1.parsedType!==ZodParsedType.number){const n1=util.objectValues(t1);return addIssueToContext(r1,{expected:util.joinValues(n1),received:r1.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(_g.data)){const n1=util.objectValues(t1);return addIssueToContext(r1,{received:r1.data,code:ZodIssueCode.invalid_enum_value,options:n1}),INVALID}return OK(_g.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(e1,_g)=>new ZodNativeEnum({values:e1,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(_g)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(_g){const{ctx:t1}=this._processInputParams(_g);if(t1.parsedType!==ZodParsedType.promise&&t1.common.async===!1)return addIssueToContext(t1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:t1.parsedType}),INVALID;const r1=t1.parsedType===ZodParsedType.promise?t1.data:Promise.resolve(t1.data);return OK(r1.then(n1=>this._def.type.parseAsync(n1,{path:t1.path,errorMap:t1.common.contextualErrorMap})))}}ZodPromise.create=(e1,_g)=>new ZodPromise({type:e1,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(_g)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(_g){const{status:t1,ctx:r1}=this._processInputParams(_g),n1=this._def.effect||null,i1={addIssue:o1=>{addIssueToContext(r1,o1),o1.fatal?t1.abort():t1.dirty()},get path(){return r1.path}};if(i1.addIssue=i1.addIssue.bind(i1),n1.type==="preprocess"){const o1=n1.transform(r1.data,i1);if(r1.common.async)return Promise.resolve(o1).then(async a1=>{if(t1.value==="aborted")return INVALID;const u1=await this._def.schema._parseAsync({data:a1,path:r1.path,parent:r1});return u1.status==="aborted"?INVALID:u1.status==="dirty"||t1.value==="dirty"?DIRTY(u1.value):u1});{if(t1.value==="aborted")return INVALID;const a1=this._def.schema._parseSync({data:o1,path:r1.path,parent:r1});return a1.status==="aborted"?INVALID:a1.status==="dirty"||t1.value==="dirty"?DIRTY(a1.value):a1}}if(n1.type==="refinement"){const o1=a1=>{const u1=n1.refinement(a1,i1);if(r1.common.async)return Promise.resolve(u1);if(u1 instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a1};if(r1.common.async===!1){const a1=this._def.schema._parseSync({data:r1.data,path:r1.path,parent:r1});return a1.status==="aborted"?INVALID:(a1.status==="dirty"&&t1.dirty(),o1(a1.value),{status:t1.value,value:a1.value})}else return this._def.schema._parseAsync({data:r1.data,path:r1.path,parent:r1}).then(a1=>a1.status==="aborted"?INVALID:(a1.status==="dirty"&&t1.dirty(),o1(a1.value).then(()=>({status:t1.value,value:a1.value}))))}if(n1.type==="transform")if(r1.common.async===!1){const o1=this._def.schema._parseSync({data:r1.data,path:r1.path,parent:r1});if(!isValid(o1))return o1;const a1=n1.transform(o1.value,i1);if(a1 instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t1.value,value:a1}}else return this._def.schema._parseAsync({data:r1.data,path:r1.path,parent:r1}).then(o1=>isValid(o1)?Promise.resolve(n1.transform(o1.value,i1)).then(a1=>({status:t1.value,value:a1})):o1);util.assertNever(n1)}}ZodEffects.create=(e1,_g,t1)=>new ZodEffects({schema:e1,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:_g,...processCreateParams(t1)});ZodEffects.createWithPreprocess=(e1,_g,t1)=>new ZodEffects({schema:_g,effect:{type:"preprocess",transform:e1},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(t1)});class ZodOptional extends ZodType{_parse(_g){return this._getType(_g)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(_g)}unwrap(){return this._def.innerType}}ZodOptional.create=(e1,_g)=>new ZodOptional({innerType:e1,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(_g)});class ZodNullable extends ZodType{_parse(_g){return this._getType(_g)===ZodParsedType.null?OK(null):this._def.innerType._parse(_g)}unwrap(){return this._def.innerType}}ZodNullable.create=(e1,_g)=>new ZodNullable({innerType:e1,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(_g)});class ZodDefault extends ZodType{_parse(_g){const{ctx:t1}=this._processInputParams(_g);let r1=t1.data;return t1.parsedType===ZodParsedType.undefined&&(r1=this._def.defaultValue()),this._def.innerType._parse({data:r1,path:t1.path,parent:t1})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e1,_g)=>new ZodDefault({innerType:e1,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof _g.default=="function"?_g.default:()=>_g.default,...processCreateParams(_g)});class ZodCatch extends ZodType{_parse(_g){const{ctx:t1}=this._processInputParams(_g),r1={...t1,common:{...t1.common,issues:[]}},n1=this._def.innerType._parse({data:r1.data,path:r1.path,parent:{...r1}});return isAsync(n1)?n1.then(i1=>({status:"valid",value:i1.status==="valid"?i1.value:this._def.catchValue({get error(){return new ZodError(r1.common.issues)},input:r1.data})})):{status:"valid",value:n1.status==="valid"?n1.value:this._def.catchValue({get error(){return new ZodError(r1.common.issues)},input:r1.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e1,_g)=>new ZodCatch({innerType:e1,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof _g.catch=="function"?_g.catch:()=>_g.catch,...processCreateParams(_g)});class ZodNaN extends ZodType{_parse(_g){if(this._getType(_g)!==ZodParsedType.nan){const r1=this._getOrReturnCtx(_g);return addIssueToContext(r1,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:r1.parsedType}),INVALID}return{status:"valid",value:_g.data}}}ZodNaN.create=e1=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(e1)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(_g){const{ctx:t1}=this._processInputParams(_g),r1=t1.data;return this._def.type._parse({data:r1,path:t1.path,parent:t1})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(_g){const{status:t1,ctx:r1}=this._processInputParams(_g);if(r1.common.async)return(async()=>{const i1=await this._def.in._parseAsync({data:r1.data,path:r1.path,parent:r1});return i1.status==="aborted"?INVALID:i1.status==="dirty"?(t1.dirty(),DIRTY(i1.value)):this._def.out._parseAsync({data:i1.value,path:r1.path,parent:r1})})();{const n1=this._def.in._parseSync({data:r1.data,path:r1.path,parent:r1});return n1.status==="aborted"?INVALID:n1.status==="dirty"?(t1.dirty(),{status:"dirty",value:n1.value}):this._def.out._parseSync({data:n1.value,path:r1.path,parent:r1})}}static create(_g,t1){return new ZodPipeline({in:_g,out:t1,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(_g){const t1=this._def.innerType._parse(_g),r1=n1=>(isValid(n1)&&(n1.value=Object.freeze(n1.value)),n1);return isAsync(t1)?t1.then(n1=>r1(n1)):r1(t1)}unwrap(){return this._def.innerType}}ZodReadonly.create=(e1,_g)=>new ZodReadonly({innerType:e1,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(_g)});function custom(e1,_g={},t1){return e1?ZodAny.create().superRefine((r1,n1)=>{var i1,o1;if(!e1(r1)){const a1=typeof _g=="function"?_g(r1):typeof _g=="string"?{message:_g}:_g,u1=(o1=(i1=a1.fatal)!==null&&i1!==void 0?i1:t1)!==null&&o1!==void 0?o1:!0,s1=typeof a1=="string"?{message:a1}:a1;n1.addIssue({code:"custom",...s1,fatal:u1})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(e1){e1.ZodString="ZodString",e1.ZodNumber="ZodNumber",e1.ZodNaN="ZodNaN",e1.ZodBigInt="ZodBigInt",e1.ZodBoolean="ZodBoolean",e1.ZodDate="ZodDate",e1.ZodSymbol="ZodSymbol",e1.ZodUndefined="ZodUndefined",e1.ZodNull="ZodNull",e1.ZodAny="ZodAny",e1.ZodUnknown="ZodUnknown",e1.ZodNever="ZodNever",e1.ZodVoid="ZodVoid",e1.ZodArray="ZodArray",e1.ZodObject="ZodObject",e1.ZodUnion="ZodUnion",e1.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e1.ZodIntersection="ZodIntersection",e1.ZodTuple="ZodTuple",e1.ZodRecord="ZodRecord",e1.ZodMap="ZodMap",e1.ZodSet="ZodSet",e1.ZodFunction="ZodFunction",e1.ZodLazy="ZodLazy",e1.ZodLiteral="ZodLiteral",e1.ZodEnum="ZodEnum",e1.ZodEffects="ZodEffects",e1.ZodNativeEnum="ZodNativeEnum",e1.ZodOptional="ZodOptional",e1.ZodNullable="ZodNullable",e1.ZodDefault="ZodDefault",e1.ZodCatch="ZodCatch",e1.ZodPromise="ZodPromise",e1.ZodBranded="ZodBranded",e1.ZodPipeline="ZodPipeline",e1.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(e1,_g={message:`Input not instance of ${e1.name}`})=>custom(t1=>t1 instanceof e1,_g),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:e1=>ZodString.create({...e1,coerce:!0}),number:e1=>ZodNumber.create({...e1,coerce:!0}),boolean:e1=>ZodBoolean.create({...e1,coerce:!0}),bigint:e1=>ZodBigInt.create({...e1,coerce:!0}),date:e1=>ZodDate.create({...e1,coerce:!0})},NEVER=INVALID;var z$1=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),NAME$2="Separator",DEFAULT_ORIENTATION="horizontal",ORIENTATIONS=["horizontal","vertical"],Separator$3=reactExports.forwardRef((e1,_g)=>{const{decorative:t1,orientation:r1=DEFAULT_ORIENTATION,...n1}=e1,i1=isValidOrientation(r1)?r1:DEFAULT_ORIENTATION,a1=t1?{role:"none"}:{"aria-orientation":i1==="vertical"?i1:void 0,role:"separator"};return jsxRuntimeExports.jsx(Primitive.div,{"data-orientation":i1,...a1,...n1,ref:_g})});Separator$3.displayName=NAME$2;function isValidOrientation(e1){return ORIENTATIONS.includes(e1)}var Root$6=Separator$3;const Separator$2=reactExports.forwardRef(({className:e1,orientation:_g="horizontal",decorative:t1=!0,...r1},n1)=>jsxRuntimeExports.jsx(Root$6,{ref:n1,decorative:t1,orientation:_g,className:cn$1("shrink-0 bg-border",_g==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e1),...r1}));Separator$2.displayName=Root$6.displayName;var NAME$1="Label",Label$3=reactExports.forwardRef((e1,_g)=>jsxRuntimeExports.jsx(Primitive.label,{...e1,ref:_g,onMouseDown:t1=>{var n1;t1.target.closest("button, input, select, textarea")||((n1=e1.onMouseDown)==null||n1.call(e1,t1),!t1.defaultPrevented&&t1.detail>1&&t1.preventDefault())}}));Label$3.displayName=NAME$1;var Root$5=Label$3;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$2=reactExports.forwardRef(({className:e1,disabled:_g,...t1},r1)=>jsxRuntimeExports.jsx(Root$5,{ref:r1,className:cn$1(labelVariants(),e1,_g?"opacity-50":"","select-none"),...t1}));Label$2.displayName=Root$5.displayName;const Form=FormProvider,FormFieldContext=reactExports.createContext({}),FormField=({...e1})=>jsxRuntimeExports.jsx(FormFieldContext.Provider,{value:{name:e1.name},children:jsxRuntimeExports.jsx(Controller,{...e1})}),useFormField=()=>{const e1=reactExports.useContext(FormFieldContext),_g=reactExports.useContext(FormItemContext),{getFieldState:t1,formState:r1}=useFormContext(),n1=t1(e1.name,r1);if(!e1)throw new Error("useFormField should be used within <FormField>");const{id:i1}=_g;return{id:i1,name:e1.name,formItemId:`${i1}-form-item`,formDescriptionId:`${i1}-form-item-description`,formMessageId:`${i1}-form-item-message`,...n1}},FormItemContext=reactExports.createContext({}),FormItem=reactExports.forwardRef(({className:e1,..._g},t1)=>{const r1=reactExports.useId();return jsxRuntimeExports.jsx(FormItemContext.Provider,{value:{id:r1},children:jsxRuntimeExports.jsx("div",{ref:t1,className:cn$1("space-y-2",e1),..._g})})});FormItem.displayName="FormItem";const FormLabel=reactExports.forwardRef(({className:e1,..._g},t1)=>{const{error:r1,formItemId:n1}=useFormField();return jsxRuntimeExports.jsx(Label$2,{ref:t1,className:cn$1(r1&&"text-destructive","text-sm",e1),htmlFor:n1,..._g})});FormLabel.displayName="FormLabel";const FormControl=reactExports.forwardRef(({...e1},_g)=>{const{error:t1,formItemId:r1,formDescriptionId:n1,formMessageId:i1}=useFormField();return jsxRuntimeExports.jsx(Slot,{ref:_g,id:r1,"aria-describedby":t1?`${n1} ${i1}`:`${n1}`,"aria-invalid":!!t1,...e1})});FormControl.displayName="FormControl";const FormDescription=reactExports.forwardRef(({className:e1,..._g},t1)=>{const{formDescriptionId:r1}=useFormField();return jsxRuntimeExports.jsx("p",{ref:t1,id:r1,className:cn$1("text-[0.8rem] text-muted-foreground",e1),..._g})});FormDescription.displayName="FormDescription";const FormMessage=reactExports.forwardRef(({className:e1,children:_g,...t1},r1)=>{const{error:n1,formMessageId:i1}=useFormField(),o1=n1?String(n1==null?void 0:n1.message):_g;return o1?jsxRuntimeExports.jsx("p",{ref:r1,id:i1,className:cn$1("text-[0.8rem] font-medium text-destructive",e1),...t1,children:o1}):null});FormMessage.displayName="FormMessage";function usePrevious(e1){const _g=reactExports.useRef({value:e1,previous:e1});return reactExports.useMemo(()=>(_g.current.value!==e1&&(_g.current.previous=_g.current.value,_g.current.value=e1),_g.current.previous),[e1])}var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((e1,_g)=>{const{__scopeSwitch:t1,name:r1,checked:n1,defaultChecked:i1,required:o1,disabled:a1,value:u1="on",onCheckedChange:s1,...l1}=e1,[c1,d1]=reactExports.useState(null),h1=useComposedRefs(_g,y1=>d1(y1)),f1=reactExports.useRef(!1),g1=c1?!!c1.closest("form"):!0,[v1=!1,$1]=useControllableState({prop:n1,defaultProp:i1,onChange:s1});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:t1,checked:v1,disabled:a1,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":v1,"aria-required":o1,"data-state":getState$1(v1),"data-disabled":a1?"":void 0,disabled:a1,value:u1,...l1,ref:h1,onClick:composeEventHandlers(e1.onClick,y1=>{$1(_1=>!_1),g1&&(f1.current=y1.isPropagationStopped(),f1.current||y1.stopPropagation())})}),g1&&jsxRuntimeExports.jsx(BubbleInput$1,{control:c1,bubbles:!f1.current,name:r1,value:u1,checked:v1,required:o1,disabled:a1,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME$2="SwitchThumb",SwitchThumb=reactExports.forwardRef((e1,_g)=>{const{__scopeSwitch:t1,...r1}=e1,n1=useSwitchContext(THUMB_NAME$2,t1);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState$1(n1.checked),"data-disabled":n1.disabled?"":void 0,...r1,ref:_g})});SwitchThumb.displayName=THUMB_NAME$2;var BubbleInput$1=e1=>{const{control:_g,checked:t1,bubbles:r1=!0,...n1}=e1,i1=reactExports.useRef(null),o1=usePrevious(t1),a1=useSize(_g);return reactExports.useEffect(()=>{const u1=i1.current,s1=window.HTMLInputElement.prototype,c1=Object.getOwnPropertyDescriptor(s1,"checked").set;if(o1!==t1&&c1){const d1=new Event("click",{bubbles:r1});c1.call(u1,t1),u1.dispatchEvent(d1)}},[o1,t1,r1]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t1,...n1,tabIndex:-1,ref:i1,style:{...e1.style,...a1,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState$1(e1){return e1?"checked":"unchecked"}var Root$4=Switch$1,Thumb$1=SwitchThumb;const Switch=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Root$4,{className:cn$1("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e1),tabIndex:-1,..._g,ref:t1,children:jsxRuntimeExports.jsx(Thumb$1,{className:cn$1("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=Root$4.displayName;var DirectionContext=reactExports.createContext(void 0);function useDirection(e1){const _g=reactExports.useContext(DirectionContext);return e1||_g||"ltr"}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$4,useCollection$4,createCollectionScope$4]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$4]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((e1,_g)=>jsxRuntimeExports.jsx(Collection$4.Provider,{scope:e1.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$4.Slot,{scope:e1.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...e1,ref:_g})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeRovingFocusGroup:t1,orientation:r1,loop:n1=!1,dir:i1,currentTabStopId:o1,defaultCurrentTabStopId:a1,onCurrentTabStopIdChange:u1,onEntryFocus:s1,preventScrollOnEntryFocus:l1=!1,...c1}=e1,d1=reactExports.useRef(null),h1=useComposedRefs(_g,d1),f1=useDirection(i1),[g1=null,v1]=useControllableState({prop:o1,defaultProp:a1,onChange:u1}),[$1,y1]=reactExports.useState(!1),_1=useCallbackRef$1(s1),E1=useCollection$4(t1),T1=reactExports.useRef(!1),[P1,k1]=reactExports.useState(0);return reactExports.useEffect(()=>{const N1=d1.current;if(N1)return N1.addEventListener(ENTRY_FOCUS,_1),()=>N1.removeEventListener(ENTRY_FOCUS,_1)},[_1]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:t1,orientation:r1,dir:f1,loop:n1,currentTabStopId:g1,onItemFocus:reactExports.useCallback(N1=>v1(N1),[v1]),onItemShiftTab:reactExports.useCallback(()=>y1(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>k1(N1=>N1+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>k1(N1=>N1-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:$1||P1===0?-1:0,"data-orientation":r1,...c1,ref:h1,style:{outline:"none",...e1.style},onMouseDown:composeEventHandlers(e1.onMouseDown,()=>{T1.current=!0}),onFocus:composeEventHandlers(e1.onFocus,N1=>{const W1=!T1.current;if(N1.target===N1.currentTarget&&W1&&!$1){const H1=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(N1.currentTarget.dispatchEvent(H1),!H1.defaultPrevented){const ty=E1().filter(U1=>U1.focusable),ey=ty.find(U1=>U1.active),ly=ty.find(U1=>U1.id===g1),Q1=[ey,ly,...ty].filter(Boolean).map(U1=>U1.ref.current);focusFirst$1(Q1,l1)}}T1.current=!1}),onBlur:composeEventHandlers(e1.onBlur,()=>y1(!1))})})}),ITEM_NAME$3="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((e1,_g)=>{const{__scopeRovingFocusGroup:t1,focusable:r1=!0,active:n1=!1,tabStopId:i1,...o1}=e1,a1=useId(),u1=i1||a1,s1=useRovingFocusContext(ITEM_NAME$3,t1),l1=s1.currentTabStopId===u1,c1=useCollection$4(t1),{onFocusableItemAdd:d1,onFocusableItemRemove:h1}=s1;return reactExports.useEffect(()=>{if(r1)return d1(),()=>h1()},[r1,d1,h1]),jsxRuntimeExports.jsx(Collection$4.ItemSlot,{scope:t1,id:u1,focusable:r1,active:n1,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:l1?0:-1,"data-orientation":s1.orientation,...o1,ref:_g,onMouseDown:composeEventHandlers(e1.onMouseDown,f1=>{r1?s1.onItemFocus(u1):f1.preventDefault()}),onFocus:composeEventHandlers(e1.onFocus,()=>s1.onItemFocus(u1)),onKeyDown:composeEventHandlers(e1.onKeyDown,f1=>{if(f1.key==="Tab"&&f1.shiftKey){s1.onItemShiftTab();return}if(f1.target!==f1.currentTarget)return;const g1=getFocusIntent(f1,s1.orientation,s1.dir);if(g1!==void 0){if(f1.metaKey||f1.ctrlKey||f1.altKey||f1.shiftKey)return;f1.preventDefault();let $1=c1().filter(y1=>y1.focusable).map(y1=>y1.ref.current);if(g1==="last")$1.reverse();else if(g1==="prev"||g1==="next"){g1==="prev"&&$1.reverse();const y1=$1.indexOf(f1.currentTarget);$1=s1.loop?wrapArray$3($1,y1+1):$1.slice(y1+1)}setTimeout(()=>focusFirst$1($1))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$3;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(e1,_g){return _g!=="rtl"?e1:e1==="ArrowLeft"?"ArrowRight":e1==="ArrowRight"?"ArrowLeft":e1}function getFocusIntent(e1,_g,t1){const r1=getDirectionAwareKey(e1.key,t1);if(!(_g==="vertical"&&["ArrowLeft","ArrowRight"].includes(r1))&&!(_g==="horizontal"&&["ArrowUp","ArrowDown"].includes(r1)))return MAP_KEY_TO_FOCUS_INTENT[r1]}function focusFirst$1(e1,_g=!1){const t1=document.activeElement;for(const r1 of e1)if(r1===t1||(r1.focus({preventScroll:_g}),document.activeElement!==t1))return}function wrapArray$3(e1,_g){return e1.map((t1,r1)=>e1[(_g+r1)%e1.length])}var Root$3=RovingFocusGroup,Item$1=RovingFocusGroupItem,TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope$2=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((e1,_g)=>{const{__scopeTabs:t1,value:r1,onValueChange:n1,defaultValue:i1,orientation:o1="horizontal",dir:a1,activationMode:u1="automatic",...s1}=e1,l1=useDirection(a1),[c1,d1]=useControllableState({prop:r1,onChange:n1,defaultProp:i1});return jsxRuntimeExports.jsx(TabsProvider,{scope:t1,baseId:useId(),value:c1,onValueChange:d1,orientation:o1,dir:l1,activationMode:u1,children:jsxRuntimeExports.jsx(Primitive.div,{dir:l1,"data-orientation":o1,...s1,ref:_g})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((e1,_g)=>{const{__scopeTabs:t1,loop:r1=!0,...n1}=e1,i1=useTabsContext(TAB_LIST_NAME,t1),o1=useRovingFocusGroupScope$2(t1);return jsxRuntimeExports.jsx(Root$3,{asChild:!0,...o1,orientation:i1.orientation,dir:i1.dir,loop:r1,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":i1.orientation,...n1,ref:_g})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME$4="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((e1,_g)=>{const{__scopeTabs:t1,value:r1,disabled:n1=!1,...i1}=e1,o1=useTabsContext(TRIGGER_NAME$4,t1),a1=useRovingFocusGroupScope$2(t1),u1=makeTriggerId(o1.baseId,r1),s1=makeContentId(o1.baseId,r1),l1=r1===o1.value;return jsxRuntimeExports.jsx(Item$1,{asChild:!0,...a1,focusable:!n1,active:l1,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":l1,"aria-controls":s1,"data-state":l1?"active":"inactive","data-disabled":n1?"":void 0,disabled:n1,id:u1,...i1,ref:_g,onMouseDown:composeEventHandlers(e1.onMouseDown,c1=>{!n1&&c1.button===0&&c1.ctrlKey===!1?o1.onValueChange(r1):c1.preventDefault()}),onKeyDown:composeEventHandlers(e1.onKeyDown,c1=>{[" ","Enter"].includes(c1.key)&&o1.onValueChange(r1)}),onFocus:composeEventHandlers(e1.onFocus,()=>{const c1=o1.activationMode!=="manual";!l1&&!n1&&c1&&o1.onValueChange(r1)})})})});TabsTrigger$1.displayName=TRIGGER_NAME$4;var CONTENT_NAME$5="TabsContent",TabsContent$1=reactExports.forwardRef((e1,_g)=>{const{__scopeTabs:t1,value:r1,forceMount:n1,children:i1,...o1}=e1,a1=useTabsContext(CONTENT_NAME$5,t1),u1=makeTriggerId(a1.baseId,r1),s1=makeContentId(a1.baseId,r1),l1=r1===a1.value,c1=reactExports.useRef(l1);return reactExports.useEffect(()=>{const d1=requestAnimationFrame(()=>c1.current=!1);return()=>cancelAnimationFrame(d1)},[]),jsxRuntimeExports.jsx(Presence,{present:n1||l1,children:({present:d1})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":l1?"active":"inactive","data-orientation":a1.orientation,role:"tabpanel","aria-labelledby":u1,hidden:!d1,id:s1,tabIndex:0,...o1,ref:_g,style:{...e1.style,animationDuration:c1.current?"0s":void 0},children:d1&&i1})})});TabsContent$1.displayName=CONTENT_NAME$5;function makeTriggerId(e1,_g){return`${e1}-trigger-${_g}`}function makeContentId(e1,_g){return`${e1}-content-${_g}`}var Root2$3=Tabs$1,List=TabsList$1,Trigger$3=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2$3,TabsList=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(List,{ref:t1,className:cn$1("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e1),tabIndex:-1,..._g}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Trigger$3,{ref:t1,className:cn$1("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e1),tabIndex:-1,..._g}));TabsTrigger.displayName=Trigger$3.displayName;const TabsContent=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Content,{ref:t1,className:cn$1("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e1),tabIndex:-1,..._g}));TabsContent.displayName=Content.displayName;function clamp(e1,[_g,t1]){return Math.min(t1,Math.max(_g,e1))}function useStateMachine(e1,_g){return reactExports.useReducer((t1,r1)=>_g[t1][r1]??t1,e1)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((e1,_g)=>{const{__scopeScrollArea:t1,type:r1="hover",dir:n1,scrollHideDelay:i1=600,...o1}=e1,[a1,u1]=reactExports.useState(null),[s1,l1]=reactExports.useState(null),[c1,d1]=reactExports.useState(null),[h1,f1]=reactExports.useState(null),[g1,v1]=reactExports.useState(null),[$1,y1]=reactExports.useState(0),[_1,E1]=reactExports.useState(0),[T1,P1]=reactExports.useState(!1),[k1,N1]=reactExports.useState(!1),W1=useComposedRefs(_g,ty=>u1(ty)),H1=useDirection(n1);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:t1,type:r1,dir:H1,scrollHideDelay:i1,scrollArea:a1,viewport:s1,onViewportChange:l1,content:c1,onContentChange:d1,scrollbarX:h1,onScrollbarXChange:f1,scrollbarXEnabled:T1,onScrollbarXEnabledChange:P1,scrollbarY:g1,onScrollbarYChange:v1,scrollbarYEnabled:k1,onScrollbarYEnabledChange:N1,onCornerWidthChange:y1,onCornerHeightChange:E1,children:jsxRuntimeExports.jsx(Primitive.div,{dir:H1,...o1,ref:W1,style:{position:"relative","--radix-scroll-area-corner-width":$1+"px","--radix-scroll-area-corner-height":_1+"px",...e1.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME$1="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((e1,_g)=>{const{__scopeScrollArea:t1,children:r1,nonce:n1,...i1}=e1,o1=useScrollAreaContext(VIEWPORT_NAME$1,t1),a1=reactExports.useRef(null),u1=useComposedRefs(_g,a1,o1.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n1}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...i1,ref:u1,style:{overflowX:o1.scrollbarXEnabled?"scroll":"hidden",overflowY:o1.scrollbarYEnabled?"scroll":"hidden",...e1.style},children:jsxRuntimeExports.jsx("div",{ref:o1.onContentChange,style:{minWidth:"100%",display:"table"},children:r1})})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME$1;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((e1,_g)=>{const{forceMount:t1,...r1}=e1,n1=useScrollAreaContext(SCROLLBAR_NAME,e1.__scopeScrollArea),{onScrollbarXEnabledChange:i1,onScrollbarYEnabledChange:o1}=n1,a1=e1.orientation==="horizontal";return reactExports.useEffect(()=>(a1?i1(!0):o1(!0),()=>{a1?i1(!1):o1(!1)}),[a1,i1,o1]),n1.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...r1,ref:_g,forceMount:t1}):n1.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...r1,ref:_g,forceMount:t1}):n1.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...r1,ref:_g,forceMount:t1}):n1.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...r1,ref:_g}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((e1,_g)=>{const{forceMount:t1,...r1}=e1,n1=useScrollAreaContext(SCROLLBAR_NAME,e1.__scopeScrollArea),[i1,o1]=reactExports.useState(!1);return reactExports.useEffect(()=>{const a1=n1.scrollArea;let u1=0;if(a1){const s1=()=>{window.clearTimeout(u1),o1(!0)},l1=()=>{u1=window.setTimeout(()=>o1(!1),n1.scrollHideDelay)};return a1.addEventListener("pointerenter",s1),a1.addEventListener("pointerleave",l1),()=>{window.clearTimeout(u1),a1.removeEventListener("pointerenter",s1),a1.removeEventListener("pointerleave",l1)}}},[n1.scrollArea,n1.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:t1||i1,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":i1?"visible":"hidden",...r1,ref:_g})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((e1,_g)=>{const{forceMount:t1,...r1}=e1,n1=useScrollAreaContext(SCROLLBAR_NAME,e1.__scopeScrollArea),i1=e1.orientation==="horizontal",o1=useDebounceCallback(()=>u1("SCROLL_END"),100),[a1,u1]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(a1==="idle"){const s1=window.setTimeout(()=>u1("HIDE"),n1.scrollHideDelay);return()=>window.clearTimeout(s1)}},[a1,n1.scrollHideDelay,u1]),reactExports.useEffect(()=>{const s1=n1.viewport,l1=i1?"scrollLeft":"scrollTop";if(s1){let c1=s1[l1];const d1=()=>{const h1=s1[l1];c1!==h1&&(u1("SCROLL"),o1()),c1=h1};return s1.addEventListener("scroll",d1),()=>s1.removeEventListener("scroll",d1)}},[n1.viewport,i1,u1,o1]),jsxRuntimeExports.jsx(Presence,{present:t1||a1!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":a1==="hidden"?"hidden":"visible",...r1,ref:_g,onPointerEnter:composeEventHandlers(e1.onPointerEnter,()=>u1("POINTER_ENTER")),onPointerLeave:composeEventHandlers(e1.onPointerLeave,()=>u1("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((e1,_g)=>{const t1=useScrollAreaContext(SCROLLBAR_NAME,e1.__scopeScrollArea),{forceMount:r1,...n1}=e1,[i1,o1]=reactExports.useState(!1),a1=e1.orientation==="horizontal",u1=useDebounceCallback(()=>{if(t1.viewport){const s1=t1.viewport.offsetWidth<t1.viewport.scrollWidth,l1=t1.viewport.offsetHeight<t1.viewport.scrollHeight;o1(a1?s1:l1)}},10);return useResizeObserver(t1.viewport,u1),useResizeObserver(t1.content,u1),jsxRuntimeExports.jsx(Presence,{present:r1||i1,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":i1?"visible":"hidden",...n1,ref:_g})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((e1,_g)=>{const{orientation:t1="vertical",...r1}=e1,n1=useScrollAreaContext(SCROLLBAR_NAME,e1.__scopeScrollArea),i1=reactExports.useRef(null),o1=reactExports.useRef(0),[a1,u1]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),s1=getThumbRatio(a1.viewport,a1.content),l1={...r1,sizes:a1,onSizesChange:u1,hasThumb:s1>0&&s1<1,onThumbChange:d1=>i1.current=d1,onThumbPointerUp:()=>o1.current=0,onThumbPointerDown:d1=>o1.current=d1};function c1(d1,h1){return getScrollPositionFromPointer(d1,o1.current,a1,h1)}return t1==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...l1,ref:_g,onThumbPositionChange:()=>{if(n1.viewport&&i1.current){const d1=n1.viewport.scrollLeft,h1=getThumbOffsetFromScroll(d1,a1,n1.dir);i1.current.style.transform=`translate3d(${h1}px, 0, 0)`}},onWheelScroll:d1=>{n1.viewport&&(n1.viewport.scrollLeft=d1)},onDragScroll:d1=>{n1.viewport&&(n1.viewport.scrollLeft=c1(d1,n1.dir))}}):t1==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...l1,ref:_g,onThumbPositionChange:()=>{if(n1.viewport&&i1.current){const d1=n1.viewport.scrollTop,h1=getThumbOffsetFromScroll(d1,a1);i1.current.style.transform=`translate3d(0, ${h1}px, 0)`}},onWheelScroll:d1=>{n1.viewport&&(n1.viewport.scrollTop=d1)},onDragScroll:d1=>{n1.viewport&&(n1.viewport.scrollTop=c1(d1))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((e1,_g)=>{const{sizes:t1,onSizesChange:r1,...n1}=e1,i1=useScrollAreaContext(SCROLLBAR_NAME,e1.__scopeScrollArea),[o1,a1]=reactExports.useState(),u1=reactExports.useRef(null),s1=useComposedRefs(_g,u1,i1.onScrollbarXChange);return reactExports.useEffect(()=>{u1.current&&a1(getComputedStyle(u1.current))},[u1]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...n1,ref:s1,sizes:t1,style:{bottom:0,left:i1.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i1.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(t1)+"px",...e1.style},onThumbPointerDown:l1=>e1.onThumbPointerDown(l1.x),onDragScroll:l1=>e1.onDragScroll(l1.x),onWheelScroll:(l1,c1)=>{if(i1.viewport){const d1=i1.viewport.scrollLeft+l1.deltaX;e1.onWheelScroll(d1),isScrollingWithinScrollbarBounds(d1,c1)&&l1.preventDefault()}},onResize:()=>{u1.current&&i1.viewport&&o1&&r1({content:i1.viewport.scrollWidth,viewport:i1.viewport.offsetWidth,scrollbar:{size:u1.current.clientWidth,paddingStart:toInt(o1.paddingLeft),paddingEnd:toInt(o1.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((e1,_g)=>{const{sizes:t1,onSizesChange:r1,...n1}=e1,i1=useScrollAreaContext(SCROLLBAR_NAME,e1.__scopeScrollArea),[o1,a1]=reactExports.useState(),u1=reactExports.useRef(null),s1=useComposedRefs(_g,u1,i1.onScrollbarYChange);return reactExports.useEffect(()=>{u1.current&&a1(getComputedStyle(u1.current))},[u1]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...n1,ref:s1,sizes:t1,style:{top:0,right:i1.dir==="ltr"?0:void 0,left:i1.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(t1)+"px",...e1.style},onThumbPointerDown:l1=>e1.onThumbPointerDown(l1.y),onDragScroll:l1=>e1.onDragScroll(l1.y),onWheelScroll:(l1,c1)=>{if(i1.viewport){const d1=i1.viewport.scrollTop+l1.deltaY;e1.onWheelScroll(d1),isScrollingWithinScrollbarBounds(d1,c1)&&l1.preventDefault()}},onResize:()=>{u1.current&&i1.viewport&&o1&&r1({content:i1.viewport.scrollHeight,viewport:i1.viewport.offsetHeight,scrollbar:{size:u1.current.clientHeight,paddingStart:toInt(o1.paddingTop),paddingEnd:toInt(o1.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeScrollArea:t1,sizes:r1,hasThumb:n1,onThumbChange:i1,onThumbPointerUp:o1,onThumbPointerDown:a1,onThumbPositionChange:u1,onDragScroll:s1,onWheelScroll:l1,onResize:c1,...d1}=e1,h1=useScrollAreaContext(SCROLLBAR_NAME,t1),[f1,g1]=reactExports.useState(null),v1=useComposedRefs(_g,W1=>g1(W1)),$1=reactExports.useRef(null),y1=reactExports.useRef(""),_1=h1.viewport,E1=r1.content-r1.viewport,T1=useCallbackRef$1(l1),P1=useCallbackRef$1(u1),k1=useDebounceCallback(c1,10);function N1(W1){if($1.current){const H1=W1.clientX-$1.current.left,ty=W1.clientY-$1.current.top;s1({x:H1,y:ty})}}return reactExports.useEffect(()=>{const W1=H1=>{const ty=H1.target;(f1==null?void 0:f1.contains(ty))&&T1(H1,E1)};return document.addEventListener("wheel",W1,{passive:!1}),()=>document.removeEventListener("wheel",W1,{passive:!1})},[_1,f1,E1,T1]),reactExports.useEffect(P1,[r1,P1]),useResizeObserver(f1,k1),useResizeObserver(h1.content,k1),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:t1,scrollbar:f1,hasThumb:n1,onThumbChange:useCallbackRef$1(i1),onThumbPointerUp:useCallbackRef$1(o1),onThumbPositionChange:P1,onThumbPointerDown:useCallbackRef$1(a1),children:jsxRuntimeExports.jsx(Primitive.div,{...d1,ref:v1,style:{position:"absolute",...d1.style},onPointerDown:composeEventHandlers(e1.onPointerDown,W1=>{W1.button===0&&(W1.target.setPointerCapture(W1.pointerId),$1.current=f1.getBoundingClientRect(),y1.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h1.viewport&&(h1.viewport.style.scrollBehavior="auto"),N1(W1))}),onPointerMove:composeEventHandlers(e1.onPointerMove,N1),onPointerUp:composeEventHandlers(e1.onPointerUp,W1=>{const H1=W1.target;H1.hasPointerCapture(W1.pointerId)&&H1.releasePointerCapture(W1.pointerId),document.body.style.webkitUserSelect=y1.current,h1.viewport&&(h1.viewport.style.scrollBehavior=""),$1.current=null})})})}),THUMB_NAME$1="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((e1,_g)=>{const{forceMount:t1,...r1}=e1,n1=useScrollbarContext(THUMB_NAME$1,e1.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:t1||n1.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:_g,...r1})})}),ScrollAreaThumbImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeScrollArea:t1,style:r1,...n1}=e1,i1=useScrollAreaContext(THUMB_NAME$1,t1),o1=useScrollbarContext(THUMB_NAME$1,t1),{onThumbPositionChange:a1}=o1,u1=useComposedRefs(_g,c1=>o1.onThumbChange(c1)),s1=reactExports.useRef(),l1=useDebounceCallback(()=>{s1.current&&(s1.current(),s1.current=void 0)},100);return reactExports.useEffect(()=>{const c1=i1.viewport;if(c1){const d1=()=>{if(l1(),!s1.current){const h1=addUnlinkedScrollListener(c1,a1);s1.current=h1,a1()}};return a1(),c1.addEventListener("scroll",d1),()=>c1.removeEventListener("scroll",d1)}},[i1.viewport,l1,a1]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":o1.hasThumb?"visible":"hidden",...n1,ref:u1,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r1},onPointerDownCapture:composeEventHandlers(e1.onPointerDownCapture,c1=>{const h1=c1.target.getBoundingClientRect(),f1=c1.clientX-h1.left,g1=c1.clientY-h1.top;o1.onThumbPointerDown({x:f1,y:g1})}),onPointerUp:composeEventHandlers(e1.onPointerUp,o1.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME$1;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((e1,_g)=>{const t1=useScrollAreaContext(CORNER_NAME,e1.__scopeScrollArea),r1=!!(t1.scrollbarX&&t1.scrollbarY);return t1.type!=="scroll"&&r1?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{...e1,ref:_g}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeScrollArea:t1,...r1}=e1,n1=useScrollAreaContext(CORNER_NAME,t1),[i1,o1]=reactExports.useState(0),[a1,u1]=reactExports.useState(0),s1=!!(i1&&a1);return useResizeObserver(n1.scrollbarX,()=>{var c1;const l1=((c1=n1.scrollbarX)==null?void 0:c1.offsetHeight)||0;n1.onCornerHeightChange(l1),u1(l1)}),useResizeObserver(n1.scrollbarY,()=>{var c1;const l1=((c1=n1.scrollbarY)==null?void 0:c1.offsetWidth)||0;n1.onCornerWidthChange(l1),o1(l1)}),s1?jsxRuntimeExports.jsx(Primitive.div,{...r1,ref:_g,style:{width:i1,height:a1,position:"absolute",right:n1.dir==="ltr"?0:void 0,left:n1.dir==="rtl"?0:void 0,bottom:0,...e1.style}}):null});function toInt(e1){return e1?parseInt(e1,10):0}function getThumbRatio(e1,_g){const t1=e1/_g;return isNaN(t1)?0:t1}function getThumbSize(e1){const _g=getThumbRatio(e1.viewport,e1.content),t1=e1.scrollbar.paddingStart+e1.scrollbar.paddingEnd,r1=(e1.scrollbar.size-t1)*_g;return Math.max(r1,18)}function getScrollPositionFromPointer(e1,_g,t1,r1="ltr"){const n1=getThumbSize(t1),i1=n1/2,o1=_g||i1,a1=n1-o1,u1=t1.scrollbar.paddingStart+o1,s1=t1.scrollbar.size-t1.scrollbar.paddingEnd-a1,l1=t1.content-t1.viewport,c1=r1==="ltr"?[0,l1]:[l1*-1,0];return linearScale$1([u1,s1],c1)(e1)}function getThumbOffsetFromScroll(e1,_g,t1="ltr"){const r1=getThumbSize(_g),n1=_g.scrollbar.paddingStart+_g.scrollbar.paddingEnd,i1=_g.scrollbar.size-n1,o1=_g.content-_g.viewport,a1=i1-r1,u1=t1==="ltr"?[0,o1]:[o1*-1,0],s1=clamp(e1,u1);return linearScale$1([0,o1],[0,a1])(s1)}function linearScale$1(e1,_g){return t1=>{if(e1[0]===e1[1]||_g[0]===_g[1])return _g[0];const r1=(_g[1]-_g[0])/(e1[1]-e1[0]);return _g[0]+r1*(t1-e1[0])}}function isScrollingWithinScrollbarBounds(e1,_g){return e1>0&&e1<_g}var addUnlinkedScrollListener=(e1,_g=()=>{})=>{let t1={left:e1.scrollLeft,top:e1.scrollTop},r1=0;return function n1(){const i1={left:e1.scrollLeft,top:e1.scrollTop},o1=t1.left!==i1.left,a1=t1.top!==i1.top;(o1||a1)&&_g(),t1=i1,r1=window.requestAnimationFrame(n1)}(),()=>window.cancelAnimationFrame(r1)};function useDebounceCallback(e1,_g){const t1=useCallbackRef$1(e1),r1=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(r1.current),[]),reactExports.useCallback(()=>{window.clearTimeout(r1.current),r1.current=window.setTimeout(t1,_g)},[t1,_g])}function useResizeObserver(e1,_g){const t1=useCallbackRef$1(_g);useLayoutEffect2(()=>{let r1=0;if(e1){const n1=new ResizeObserver(()=>{cancelAnimationFrame(r1),r1=window.requestAnimationFrame(t1)});return n1.observe(e1),()=>{window.cancelAnimationFrame(r1),n1.unobserve(e1)}}},[e1,t1])}var Root$2=ScrollArea$1,Viewport$1=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:e1,children:_g,...t1},r1)=>jsxRuntimeExports.jsxs(Root$2,{ref:r1,className:cn$1("relative overflow-hidden",e1),scrollHideDelay:400,...t1,children:[jsxRuntimeExports.jsx(Viewport$1,{className:"h-full w-full rounded-[inherit]",children:_g}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root$2.displayName;const ScrollBar=reactExports.forwardRef(({className:e1,orientation:_g="vertical",...t1},r1)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:r1,orientation:_g,className:cn$1("flex touch-none select-none transition-colors",_g==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",_g==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e1),...t1,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;var ROOT_NAME="AlertDialog",[createAlertDialogContext,createAlertDialogScope]=createContextScope(ROOT_NAME,[createDialogScope]),useDialogScope=createDialogScope(),AlertDialog$1=e1=>{const{__scopeAlertDialog:_g,...t1}=e1,r1=useDialogScope(_g);return jsxRuntimeExports.jsx(Root$7,{...r1,...t1,modal:!0})};AlertDialog$1.displayName=ROOT_NAME;var TRIGGER_NAME$3="AlertDialogTrigger",AlertDialogTrigger=reactExports.forwardRef((e1,_g)=>{const{__scopeAlertDialog:t1,...r1}=e1,n1=useDialogScope(t1);return jsxRuntimeExports.jsx(Trigger$4,{...n1,...r1,ref:_g})});AlertDialogTrigger.displayName=TRIGGER_NAME$3;var PORTAL_NAME$4="AlertDialogPortal",AlertDialogPortal$1=e1=>{const{__scopeAlertDialog:_g,...t1}=e1,r1=useDialogScope(_g);return jsxRuntimeExports.jsx(Portal$3,{...r1,...t1})};AlertDialogPortal$1.displayName=PORTAL_NAME$4;var OVERLAY_NAME="AlertDialogOverlay",AlertDialogOverlay$1=reactExports.forwardRef((e1,_g)=>{const{__scopeAlertDialog:t1,...r1}=e1,n1=useDialogScope(t1);return jsxRuntimeExports.jsx(Overlay,{...n1,...r1,ref:_g})});AlertDialogOverlay$1.displayName=OVERLAY_NAME;var CONTENT_NAME$4="AlertDialogContent",[AlertDialogContentProvider,useAlertDialogContentContext]=createAlertDialogContext(CONTENT_NAME$4),AlertDialogContent$1=reactExports.forwardRef((e1,_g)=>{const{__scopeAlertDialog:t1,children:r1,...n1}=e1,i1=useDialogScope(t1),o1=reactExports.useRef(null),a1=useComposedRefs(_g,o1),u1=reactExports.useRef(null);return jsxRuntimeExports.jsx(WarningProvider,{contentName:CONTENT_NAME$4,titleName:TITLE_NAME,docsSlug:"alert-dialog",children:jsxRuntimeExports.jsx(AlertDialogContentProvider,{scope:t1,cancelRef:u1,children:jsxRuntimeExports.jsxs(Content$1,{role:"alertdialog",...i1,...n1,ref:a1,onOpenAutoFocus:composeEventHandlers(n1.onOpenAutoFocus,s1=>{var l1;s1.preventDefault(),(l1=u1.current)==null||l1.focus({preventScroll:!0})}),onPointerDownOutside:s1=>s1.preventDefault(),onInteractOutside:s1=>s1.preventDefault(),children:[jsxRuntimeExports.jsx(Slottable,{children:r1}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:o1})]})})})});AlertDialogContent$1.displayName=CONTENT_NAME$4;var TITLE_NAME="AlertDialogTitle",AlertDialogTitle$1=reactExports.forwardRef((e1,_g)=>{const{__scopeAlertDialog:t1,...r1}=e1,n1=useDialogScope(t1);return jsxRuntimeExports.jsx(Title,{...n1,...r1,ref:_g})});AlertDialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="AlertDialogDescription",AlertDialogDescription$1=reactExports.forwardRef((e1,_g)=>{const{__scopeAlertDialog:t1,...r1}=e1,n1=useDialogScope(t1);return jsxRuntimeExports.jsx(Description,{...n1,...r1,ref:_g})});AlertDialogDescription$1.displayName=DESCRIPTION_NAME;var ACTION_NAME="AlertDialogAction",AlertDialogAction$1=reactExports.forwardRef((e1,_g)=>{const{__scopeAlertDialog:t1,...r1}=e1,n1=useDialogScope(t1);return jsxRuntimeExports.jsx(Close,{...n1,...r1,ref:_g})});AlertDialogAction$1.displayName=ACTION_NAME;var CANCEL_NAME="AlertDialogCancel",AlertDialogCancel$1=reactExports.forwardRef((e1,_g)=>{const{__scopeAlertDialog:t1,...r1}=e1,{cancelRef:n1}=useAlertDialogContentContext(CANCEL_NAME,t1),i1=useDialogScope(t1),o1=useComposedRefs(_g,n1);return jsxRuntimeExports.jsx(Close,{...i1,...r1,ref:o1})});AlertDialogCancel$1.displayName=CANCEL_NAME;var DescriptionWarning=({contentRef:e1})=>{const _g=`\`${CONTENT_NAME$4}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${CONTENT_NAME$4}\` by passing a \`${DESCRIPTION_NAME}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${CONTENT_NAME$4}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return reactExports.useEffect(()=>{var r1;document.getElementById((r1=e1.current)==null?void 0:r1.getAttribute("aria-describedby"))||console.warn(_g)},[_g,e1]),null},Root2$2=AlertDialog$1,Portal2$1=AlertDialogPortal$1,Overlay2=AlertDialogOverlay$1,Content2$4=AlertDialogContent$1,Action=AlertDialogAction$1,Cancel=AlertDialogCancel$1,Title2=AlertDialogTitle$1,Description2=AlertDialogDescription$1;const AlertDialog=Root2$2,AlertDialogPortal=Portal2$1,AlertDialogOverlay=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Overlay2,{className:cn$1("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e1),..._g,ref:t1}));AlertDialogOverlay.displayName=Overlay2.displayName;const AlertDialogContent=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsxs(AlertDialogPortal,{children:[jsxRuntimeExports.jsx(AlertDialogOverlay,{}),jsxRuntimeExports.jsx(Content2$4,{ref:t1,className:cn$1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e1),..._g})]}));AlertDialogContent.displayName=Content2$4.displayName;const AlertDialogHeader=({className:e1,..._g})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-2 text-center sm:text-left",e1),..._g});AlertDialogHeader.displayName="AlertDialogHeader";const AlertDialogTitle=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Title2,{ref:t1,className:cn$1("text-lg font-semibold",e1),..._g}));AlertDialogTitle.displayName=Title2.displayName;const AlertDialogDescription=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Description2,{ref:t1,className:cn$1("text-sm text-muted-foreground",e1),..._g}));AlertDialogDescription.displayName=Description2.displayName;const AlertDialogAction=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Action,{ref:t1,className:cn$1(buttonVariants(),e1),..._g}));AlertDialogAction.displayName=Action.displayName;const AlertDialogCancel=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Cancel,{ref:t1,className:cn$1(buttonVariants({variant:"outline"}),"mt-2 sm:mt-0",e1),..._g}));AlertDialogCancel.displayName=Cancel.displayName;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS$1=[" ","Enter"],SELECT_NAME="Select",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope(SELECT_NAME,[createCollectionScope$3,createPopperScope]),usePopperScope$2=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=e1=>{const{__scopeSelect:_g,children:t1,open:r1,defaultOpen:n1,onOpenChange:i1,value:o1,defaultValue:a1,onValueChange:u1,dir:s1,name:l1,autoComplete:c1,disabled:d1,required:h1}=e1,f1=usePopperScope$2(_g),[g1,v1]=reactExports.useState(null),[$1,y1]=reactExports.useState(null),[_1,E1]=reactExports.useState(!1),T1=useDirection(s1),[P1=!1,k1]=useControllableState({prop:r1,defaultProp:n1,onChange:i1}),[N1,W1]=useControllableState({prop:o1,defaultProp:a1,onChange:u1}),H1=reactExports.useRef(null),ty=g1?!!g1.closest("form"):!0,[ey,ly]=reactExports.useState(new Set),oy=Array.from(ey).map(Q1=>Q1.props.value).join(";");return jsxRuntimeExports.jsx(Root2$4,{...f1,children:jsxRuntimeExports.jsxs(SelectProvider,{required:h1,scope:_g,trigger:g1,onTriggerChange:v1,valueNode:$1,onValueNodeChange:y1,valueNodeHasChildren:_1,onValueNodeHasChildrenChange:E1,contentId:useId(),value:N1,onValueChange:W1,open:P1,onOpenChange:k1,dir:T1,triggerPointerDownPosRef:H1,disabled:d1,children:[jsxRuntimeExports.jsx(Collection$3.Provider,{scope:_g,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:e1.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Q1=>{ly(U1=>new Set(U1).add(Q1))},[]),onNativeOptionRemove:reactExports.useCallback(Q1=>{ly(U1=>{const V1=new Set(U1);return V1.delete(Q1),V1})},[]),children:t1})}),ty?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:h1,tabIndex:-1,name:l1,autoComplete:c1,value:N1,onChange:Q1=>W1(Q1.target.value),disabled:d1,children:[N1===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(ey)]},oy):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$2="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,disabled:r1=!1,...n1}=e1,i1=usePopperScope$2(t1),o1=useSelectContext(TRIGGER_NAME$2,t1),a1=o1.disabled||r1,u1=useComposedRefs(_g,o1.onTriggerChange),s1=useCollection$3(t1),[l1,c1,d1]=useTypeaheadSearch(f1=>{const g1=s1().filter(y1=>!y1.disabled),v1=g1.find(y1=>y1.value===o1.value),$1=findNextItem(g1,f1,v1);$1!==void 0&&o1.onValueChange($1.value)}),h1=()=>{a1||(o1.onOpenChange(!0),d1())};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...i1,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":o1.contentId,"aria-expanded":o1.open,"aria-required":o1.required,"aria-autocomplete":"none",dir:o1.dir,"data-state":o1.open?"open":"closed",disabled:a1,"data-disabled":a1?"":void 0,"data-placeholder":shouldShowPlaceholder(o1.value)?"":void 0,...n1,ref:u1,onClick:composeEventHandlers(n1.onClick,f1=>{f1.currentTarget.focus()}),onPointerDown:composeEventHandlers(n1.onPointerDown,f1=>{const g1=f1.target;g1.hasPointerCapture(f1.pointerId)&&g1.releasePointerCapture(f1.pointerId),f1.button===0&&f1.ctrlKey===!1&&(h1(),o1.triggerPointerDownPosRef.current={x:Math.round(f1.pageX),y:Math.round(f1.pageY)},f1.preventDefault())}),onKeyDown:composeEventHandlers(n1.onKeyDown,f1=>{const g1=l1.current!=="";!(f1.ctrlKey||f1.altKey||f1.metaKey)&&f1.key.length===1&&c1(f1.key),!(g1&&f1.key===" ")&&OPEN_KEYS.includes(f1.key)&&(h1(),f1.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$2;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,className:r1,style:n1,children:i1,placeholder:o1="",...a1}=e1,u1=useSelectContext(VALUE_NAME,t1),{onValueNodeHasChildrenChange:s1}=u1,l1=i1!==void 0,c1=useComposedRefs(_g,u1.onValueNodeChange);return useLayoutEffect2(()=>{s1(l1)},[s1,l1]),jsxRuntimeExports.jsx(Primitive.span,{...a1,ref:c1,style:{pointerEvents:"none"},children:shouldShowPlaceholder(u1.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o1}):i1})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,children:r1,...n1}=e1;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...n1,ref:_g,children:r1||"▼"})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME$3="SelectPortal",SelectPortal=e1=>jsxRuntimeExports.jsx(Portal$4,{asChild:!0,...e1});SelectPortal.displayName=PORTAL_NAME$3;var CONTENT_NAME$3="SelectContent",SelectContent$1=reactExports.forwardRef((e1,_g)=>{const t1=useSelectContext(CONTENT_NAME$3,e1.__scopeSelect),[r1,n1]=reactExports.useState();if(useLayoutEffect2(()=>{n1(new DocumentFragment)},[]),!t1.open){const i1=r1;return i1?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:e1.__scopeSelect,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:e1.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:e1.children})})}),i1):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...e1,ref:_g})});SelectContent$1.displayName=CONTENT_NAME$3;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$3),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,position:r1="item-aligned",onCloseAutoFocus:n1,onEscapeKeyDown:i1,onPointerDownOutside:o1,side:a1,sideOffset:u1,align:s1,alignOffset:l1,arrowPadding:c1,collisionBoundary:d1,collisionPadding:h1,sticky:f1,hideWhenDetached:g1,avoidCollisions:v1,...$1}=e1,y1=useSelectContext(CONTENT_NAME$3,t1),[_1,E1]=reactExports.useState(null),[T1,P1]=reactExports.useState(null),k1=useComposedRefs(_g,Ay=>E1(Ay)),[N1,W1]=reactExports.useState(null),[H1,ty]=reactExports.useState(null),ey=useCollection$3(t1),[ly,oy]=reactExports.useState(!1),Q1=reactExports.useRef(!1);reactExports.useEffect(()=>{if(_1)return hideOthers(_1)},[_1]),useFocusGuards();const U1=reactExports.useCallback(Ay=>{const[Uy,...Gy]=ey().map(Vy=>Vy.ref.current),[Wy]=Gy.slice(-1),Yy=document.activeElement;for(const Vy of Ay)if(Vy===Yy||(Vy==null||Vy.scrollIntoView({block:"nearest"}),Vy===Uy&&T1&&(T1.scrollTop=0),Vy===Wy&&T1&&(T1.scrollTop=T1.scrollHeight),Vy==null||Vy.focus(),document.activeElement!==Yy))return},[ey,T1]),V1=reactExports.useCallback(()=>U1([N1,_1]),[U1,N1,_1]);reactExports.useEffect(()=>{ly&&V1()},[ly,V1]);const{onOpenChange:K1,triggerPointerDownPosRef:J1}=y1;reactExports.useEffect(()=>{if(_1){let Ay={x:0,y:0};const Uy=Wy=>{var Yy,Vy;Ay={x:Math.abs(Math.round(Wy.pageX)-(((Yy=J1.current)==null?void 0:Yy.x)??0)),y:Math.abs(Math.round(Wy.pageY)-(((Vy=J1.current)==null?void 0:Vy.y)??0))}},Gy=Wy=>{Ay.x<=10&&Ay.y<=10?Wy.preventDefault():_1.contains(Wy.target)||K1(!1),document.removeEventListener("pointermove",Uy),J1.current=null};return J1.current!==null&&(document.addEventListener("pointermove",Uy),document.addEventListener("pointerup",Gy,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Uy),document.removeEventListener("pointerup",Gy,{capture:!0})}}},[_1,K1,J1]),reactExports.useEffect(()=>{const Ay=()=>K1(!1);return window.addEventListener("blur",Ay),window.addEventListener("resize",Ay),()=>{window.removeEventListener("blur",Ay),window.removeEventListener("resize",Ay)}},[K1]);const[hy,G1]=useTypeaheadSearch(Ay=>{const Uy=ey().filter(Yy=>!Yy.disabled),Gy=Uy.find(Yy=>Yy.ref.current===document.activeElement),Wy=findNextItem(Uy,Ay,Gy);Wy&&setTimeout(()=>Wy.ref.current.focus())}),Y1=reactExports.useCallback((Ay,Uy,Gy)=>{const Wy=!Q1.current&&!Gy;(y1.value!==void 0&&y1.value===Uy||Wy)&&(W1(Ay),Wy&&(Q1.current=!0))},[y1.value]),yy=reactExports.useCallback(()=>_1==null?void 0:_1.focus(),[_1]),Oy=reactExports.useCallback((Ay,Uy,Gy)=>{const Wy=!Q1.current&&!Gy;(y1.value!==void 0&&y1.value===Uy||Wy)&&ty(Ay)},[y1.value]),Ey=r1==="popper"?SelectPopperPosition:SelectItemAlignedPosition,jy=Ey===SelectPopperPosition?{side:a1,sideOffset:u1,align:s1,alignOffset:l1,arrowPadding:c1,collisionBoundary:d1,collisionPadding:h1,sticky:f1,hideWhenDetached:g1,avoidCollisions:v1}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:t1,content:_1,viewport:T1,onViewportChange:P1,itemRefCallback:Y1,selectedItem:N1,onItemLeave:yy,itemTextRefCallback:Oy,focusSelectedItem:V1,selectedItemText:H1,position:r1,isPositioned:ly,searchRef:hy,children:jsxRuntimeExports.jsx(ReactRemoveScroll$1,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:y1.open,onMountAutoFocus:Ay=>{Ay.preventDefault()},onUnmountAutoFocus:composeEventHandlers(n1,Ay=>{var Uy;(Uy=y1.trigger)==null||Uy.focus({preventScroll:!0}),Ay.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i1,onPointerDownOutside:o1,onFocusOutside:Ay=>Ay.preventDefault(),onDismiss:()=>y1.onOpenChange(!1),children:jsxRuntimeExports.jsx(Ey,{role:"listbox",id:y1.contentId,"data-state":y1.open?"open":"closed",dir:y1.dir,onContextMenu:Ay=>Ay.preventDefault(),...$1,...jy,onPlaced:()=>oy(!0),ref:k1,style:{display:"flex",flexDirection:"column",outline:"none",...$1.style},onKeyDown:composeEventHandlers($1.onKeyDown,Ay=>{const Uy=Ay.ctrlKey||Ay.altKey||Ay.metaKey;if(Ay.key==="Tab"&&Ay.preventDefault(),!Uy&&Ay.key.length===1&&G1(Ay.key),["ArrowUp","ArrowDown","Home","End"].includes(Ay.key)){let Wy=ey().filter(Yy=>!Yy.disabled).map(Yy=>Yy.ref.current);if(["ArrowUp","End"].includes(Ay.key)&&(Wy=Wy.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ay.key)){const Yy=Ay.target,Vy=Wy.indexOf(Yy);Wy=Wy.slice(Vy+1)}setTimeout(()=>U1(Wy)),Ay.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,onPlaced:r1,...n1}=e1,i1=useSelectContext(CONTENT_NAME$3,t1),o1=useSelectContentContext(CONTENT_NAME$3,t1),[a1,u1]=reactExports.useState(null),[s1,l1]=reactExports.useState(null),c1=useComposedRefs(_g,k1=>l1(k1)),d1=useCollection$3(t1),h1=reactExports.useRef(!1),f1=reactExports.useRef(!0),{viewport:g1,selectedItem:v1,selectedItemText:$1,focusSelectedItem:y1}=o1,_1=reactExports.useCallback(()=>{if(i1.trigger&&i1.valueNode&&a1&&s1&&g1&&v1&&$1){const k1=i1.trigger.getBoundingClientRect(),N1=s1.getBoundingClientRect(),W1=i1.valueNode.getBoundingClientRect(),H1=$1.getBoundingClientRect();if(i1.dir!=="rtl"){const Yy=H1.left-N1.left,Vy=W1.left-Yy,p0=k1.left-Vy,y0=k1.width+p0,A0=Math.max(y0,N1.width),lv=window.innerWidth-CONTENT_MARGIN,R0=clamp(Vy,[CONTENT_MARGIN,lv-A0]);a1.style.minWidth=y0+"px",a1.style.left=R0+"px"}else{const Yy=N1.right-H1.right,Vy=window.innerWidth-W1.right-Yy,p0=window.innerWidth-k1.right-Vy,y0=k1.width+p0,A0=Math.max(y0,N1.width),lv=window.innerWidth-CONTENT_MARGIN,R0=clamp(Vy,[CONTENT_MARGIN,lv-A0]);a1.style.minWidth=y0+"px",a1.style.right=R0+"px"}const ty=d1(),ey=window.innerHeight-CONTENT_MARGIN*2,ly=g1.scrollHeight,oy=window.getComputedStyle(s1),Q1=parseInt(oy.borderTopWidth,10),U1=parseInt(oy.paddingTop,10),V1=parseInt(oy.borderBottomWidth,10),K1=parseInt(oy.paddingBottom,10),J1=Q1+U1+ly+K1+V1,hy=Math.min(v1.offsetHeight*5,J1),G1=window.getComputedStyle(g1),Y1=parseInt(G1.paddingTop,10),yy=parseInt(G1.paddingBottom,10),Oy=k1.top+k1.height/2-CONTENT_MARGIN,Ey=ey-Oy,jy=v1.offsetHeight/2,Ay=v1.offsetTop+jy,Uy=Q1+U1+Ay,Gy=J1-Uy;if(Uy<=Oy){const Yy=v1===ty[ty.length-1].ref.current;a1.style.bottom="0px";const Vy=s1.clientHeight-g1.offsetTop-g1.offsetHeight,p0=Math.max(Ey,jy+(Yy?yy:0)+Vy+V1),y0=Uy+p0;a1.style.height=y0+"px"}else{const Yy=v1===ty[0].ref.current;a1.style.top="0px";const p0=Math.max(Oy,Q1+g1.offsetTop+(Yy?Y1:0)+jy)+Gy;a1.style.height=p0+"px",g1.scrollTop=Uy-Oy+g1.offsetTop}a1.style.margin=`${CONTENT_MARGIN}px 0`,a1.style.minHeight=hy+"px",a1.style.maxHeight=ey+"px",r1==null||r1(),requestAnimationFrame(()=>h1.current=!0)}},[d1,i1.trigger,i1.valueNode,a1,s1,g1,v1,$1,i1.dir,r1]);useLayoutEffect2(()=>_1(),[_1]);const[E1,T1]=reactExports.useState();useLayoutEffect2(()=>{s1&&T1(window.getComputedStyle(s1).zIndex)},[s1]);const P1=reactExports.useCallback(k1=>{k1&&f1.current===!0&&(_1(),y1==null||y1(),f1.current=!1)},[_1,y1]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:t1,contentWrapper:a1,shouldExpandOnScrollRef:h1,onScrollButtonChange:P1,children:jsxRuntimeExports.jsx("div",{ref:u1,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E1},children:jsxRuntimeExports.jsx(Primitive.div,{...n1,ref:c1,style:{boxSizing:"border-box",maxHeight:"100%",...n1.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,align:r1="start",collisionPadding:n1=CONTENT_MARGIN,...i1}=e1,o1=usePopperScope$2(t1);return jsxRuntimeExports.jsx(Content$2,{...o1,...i1,ref:_g,align:r1,collisionPadding:n1,style:{boxSizing:"border-box",...i1.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$3,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,nonce:r1,...n1}=e1,i1=useSelectContentContext(VIEWPORT_NAME,t1),o1=useSelectViewportContext(VIEWPORT_NAME,t1),a1=useComposedRefs(_g,i1.onViewportChange),u1=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r1}),jsxRuntimeExports.jsx(Collection$3.Slot,{scope:t1,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...n1,ref:a1,style:{position:"relative",flex:1,overflow:"auto",...n1.style},onScroll:composeEventHandlers(n1.onScroll,s1=>{const l1=s1.currentTarget,{contentWrapper:c1,shouldExpandOnScrollRef:d1}=o1;if(d1!=null&&d1.current&&c1){const h1=Math.abs(u1.current-l1.scrollTop);if(h1>0){const f1=window.innerHeight-CONTENT_MARGIN*2,g1=parseFloat(c1.style.minHeight),v1=parseFloat(c1.style.height),$1=Math.max(g1,v1);if($1<f1){const y1=$1+h1,_1=Math.min(f1,y1),E1=y1-_1;c1.style.height=_1+"px",c1.style.bottom==="0px"&&(l1.scrollTop=E1>0?E1:0,c1.style.justifyContent="flex-end")}}}u1.current=l1.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME$2="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME$2),SelectGroup$1=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,...r1}=e1,n1=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:t1,id:n1,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":n1,...r1,ref:_g})})});SelectGroup$1.displayName=GROUP_NAME$2;var LABEL_NAME$2="SelectLabel",SelectLabel$1=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,...r1}=e1,n1=useSelectGroupContext(LABEL_NAME$2,t1);return jsxRuntimeExports.jsx(Primitive.div,{id:n1.id,...r1,ref:_g})});SelectLabel$1.displayName=LABEL_NAME$2;var ITEM_NAME$2="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME$2),SelectItem$1=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,value:r1,disabled:n1=!1,textValue:i1,...o1}=e1,a1=useSelectContext(ITEM_NAME$2,t1),u1=useSelectContentContext(ITEM_NAME$2,t1),s1=a1.value===r1,[l1,c1]=reactExports.useState(i1??""),[d1,h1]=reactExports.useState(!1),f1=useComposedRefs(_g,$1=>{var y1;return(y1=u1.itemRefCallback)==null?void 0:y1.call(u1,$1,r1,n1)}),g1=useId(),v1=()=>{n1||(a1.onValueChange(r1),a1.onOpenChange(!1))};if(r1==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:t1,value:r1,disabled:n1,textId:g1,isSelected:s1,onItemTextChange:reactExports.useCallback($1=>{c1(y1=>y1||(($1==null?void 0:$1.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:t1,value:r1,disabled:n1,textValue:l1,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":g1,"data-highlighted":d1?"":void 0,"aria-selected":s1&&d1,"data-state":s1?"checked":"unchecked","aria-disabled":n1||void 0,"data-disabled":n1?"":void 0,tabIndex:n1?void 0:-1,...o1,ref:f1,onFocus:composeEventHandlers(o1.onFocus,()=>h1(!0)),onBlur:composeEventHandlers(o1.onBlur,()=>h1(!1)),onPointerUp:composeEventHandlers(o1.onPointerUp,v1),onPointerMove:composeEventHandlers(o1.onPointerMove,$1=>{var y1;n1?(y1=u1.onItemLeave)==null||y1.call(u1):$1.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(o1.onPointerLeave,$1=>{var y1;$1.currentTarget===document.activeElement&&((y1=u1.onItemLeave)==null||y1.call(u1))}),onKeyDown:composeEventHandlers(o1.onKeyDown,$1=>{var _1;((_1=u1.searchRef)==null?void 0:_1.current)!==""&&$1.key===" "||(SELECTION_KEYS$1.includes($1.key)&&v1(),$1.key===" "&&$1.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME$2;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,className:r1,style:n1,...i1}=e1,o1=useSelectContext(ITEM_TEXT_NAME,t1),a1=useSelectContentContext(ITEM_TEXT_NAME,t1),u1=useSelectItemContext(ITEM_TEXT_NAME,t1),s1=useSelectNativeOptionsContext(ITEM_TEXT_NAME,t1),[l1,c1]=reactExports.useState(null),d1=useComposedRefs(_g,$1=>c1($1),u1.onItemTextChange,$1=>{var y1;return(y1=a1.itemTextRefCallback)==null?void 0:y1.call(a1,$1,u1.value,u1.disabled)}),h1=l1==null?void 0:l1.textContent,f1=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:u1.value,disabled:u1.disabled,children:h1},u1.value),[u1.disabled,u1.value,h1]),{onNativeOptionAdd:g1,onNativeOptionRemove:v1}=s1;return useLayoutEffect2(()=>(g1(f1),()=>v1(f1)),[g1,v1,f1]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:u1.textId,...i1,ref:d1}),u1.isSelected&&o1.valueNode&&!o1.valueNodeHasChildren?reactDomExports.createPortal(i1.children,o1.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME$1="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,...r1}=e1;return useSelectItemContext(ITEM_INDICATOR_NAME$1,t1).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...r1,ref:_g}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((e1,_g)=>{const t1=useSelectContentContext(SCROLL_UP_BUTTON_NAME,e1.__scopeSelect),r1=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,e1.__scopeSelect),[n1,i1]=reactExports.useState(!1),o1=useComposedRefs(_g,r1.onScrollButtonChange);return useLayoutEffect2(()=>{if(t1.viewport&&t1.isPositioned){let a1=function(){const s1=u1.scrollTop>0;i1(s1)};const u1=t1.viewport;return a1(),u1.addEventListener("scroll",a1),()=>u1.removeEventListener("scroll",a1)}},[t1.viewport,t1.isPositioned]),n1?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...e1,ref:o1,onAutoScroll:()=>{const{viewport:a1,selectedItem:u1}=t1;a1&&u1&&(a1.scrollTop=a1.scrollTop-u1.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((e1,_g)=>{const t1=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,e1.__scopeSelect),r1=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,e1.__scopeSelect),[n1,i1]=reactExports.useState(!1),o1=useComposedRefs(_g,r1.onScrollButtonChange);return useLayoutEffect2(()=>{if(t1.viewport&&t1.isPositioned){let a1=function(){const s1=u1.scrollHeight-u1.clientHeight,l1=Math.ceil(u1.scrollTop)<s1;i1(l1)};const u1=t1.viewport;return a1(),u1.addEventListener("scroll",a1),()=>u1.removeEventListener("scroll",a1)}},[t1.viewport,t1.isPositioned]),n1?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...e1,ref:o1,onAutoScroll:()=>{const{viewport:a1,selectedItem:u1}=t1;a1&&u1&&(a1.scrollTop=a1.scrollTop+u1.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,onAutoScroll:r1,...n1}=e1,i1=useSelectContentContext("SelectScrollButton",t1),o1=reactExports.useRef(null),a1=useCollection$3(t1),u1=reactExports.useCallback(()=>{o1.current!==null&&(window.clearInterval(o1.current),o1.current=null)},[]);return reactExports.useEffect(()=>()=>u1(),[u1]),useLayoutEffect2(()=>{var l1;const s1=a1().find(c1=>c1.ref.current===document.activeElement);(l1=s1==null?void 0:s1.ref.current)==null||l1.scrollIntoView({block:"nearest"})},[a1]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...n1,ref:_g,style:{flexShrink:0,...n1.style},onPointerDown:composeEventHandlers(n1.onPointerDown,()=>{o1.current===null&&(o1.current=window.setInterval(r1,50))}),onPointerMove:composeEventHandlers(n1.onPointerMove,()=>{var s1;(s1=i1.onItemLeave)==null||s1.call(i1),o1.current===null&&(o1.current=window.setInterval(r1,50))}),onPointerLeave:composeEventHandlers(n1.onPointerLeave,()=>{u1()})})}),SEPARATOR_NAME$2="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,...r1}=e1;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...r1,ref:_g})});SelectSeparator$1.displayName=SEPARATOR_NAME$2;var ARROW_NAME$3="SelectArrow",SelectArrow=reactExports.forwardRef((e1,_g)=>{const{__scopeSelect:t1,...r1}=e1,n1=usePopperScope$2(t1),i1=useSelectContext(ARROW_NAME$3,t1),o1=useSelectContentContext(ARROW_NAME$3,t1);return i1.open&&o1.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...n1,...r1,ref:_g}):null});SelectArrow.displayName=ARROW_NAME$3;function shouldShowPlaceholder(e1){return e1===""||e1===void 0}var BubbleSelect=reactExports.forwardRef((e1,_g)=>{const{value:t1,...r1}=e1,n1=reactExports.useRef(null),i1=useComposedRefs(_g,n1),o1=usePrevious(t1);return reactExports.useEffect(()=>{const a1=n1.current,u1=window.HTMLSelectElement.prototype,l1=Object.getOwnPropertyDescriptor(u1,"value").set;if(o1!==t1&&l1){const c1=new Event("change",{bubbles:!0});l1.call(a1,t1),a1.dispatchEvent(c1)}},[o1,t1]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...r1,ref:i1,defaultValue:t1})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(e1){const _g=useCallbackRef$1(e1),t1=reactExports.useRef(""),r1=reactExports.useRef(0),n1=reactExports.useCallback(o1=>{const a1=t1.current+o1;_g(a1),function u1(s1){t1.current=s1,window.clearTimeout(r1.current),s1!==""&&(r1.current=window.setTimeout(()=>u1(""),1e3))}(a1)},[_g]),i1=reactExports.useCallback(()=>{t1.current="",window.clearTimeout(r1.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(r1.current),[]),[t1,n1,i1]}function findNextItem(e1,_g,t1){const n1=_g.length>1&&Array.from(_g).every(s1=>s1===_g[0])?_g[0]:_g,i1=t1?e1.indexOf(t1):-1;let o1=wrapArray$2(e1,Math.max(i1,0));n1.length===1&&(o1=o1.filter(s1=>s1!==t1));const u1=o1.find(s1=>s1.textValue.toLowerCase().startsWith(n1.toLowerCase()));return u1!==t1?u1:void 0}function wrapArray$2(e1,_g){return e1.map((t1,r1)=>e1[(_g+r1)%e1.length])}var Root2$1=Select$1,Trigger$2=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal$2=SelectPortal,Content2$3=SelectContent$1,Viewport=SelectViewport,Group$1=SelectGroup$1,Label$1=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator$1=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator$1=SelectSeparator$1;const Select=Root2$1,SelectGroup=Group$1,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:e1,children:_g,...t1},r1)=>jsxRuntimeExports.jsxs(Trigger$2,{ref:r1,className:cn$1("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e1),tabIndex:-1,...t1,children:[_g,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(CaretSortIcon,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$2.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:t1,className:cn$1("flex cursor-default items-center justify-center py-1",e1),..._g,children:jsxRuntimeExports.jsx(ChevronUpIcon,{})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:t1,className:cn$1("flex cursor-default items-center justify-center py-1",e1),..._g,children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:e1,children:_g,position:t1="popper",...r1},n1)=>jsxRuntimeExports.jsx(Portal$2,{children:jsxRuntimeExports.jsxs(Content2$3,{ref:n1,className:cn$1("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t1==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e1),position:t1,onCloseAutoFocus:i1=>i1.preventDefault(),...r1,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport,{className:cn$1("p-1",t1==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:_g}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2$3.displayName;const SelectLabel=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Label$1,{ref:t1,className:cn$1("px-2 py-1.5 text-sm font-semibold",e1),..._g}));SelectLabel.displayName=Label$1.displayName;const SelectItem=reactExports.forwardRef(({className:e1,children:_g,...t1},r1)=>jsxRuntimeExports.jsxs(Item,{ref:r1,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e1),...t1,children:[jsxRuntimeExports.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator$1,{children:jsxRuntimeExports.jsx(CheckIcon,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:_g})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Separator$1,{ref:t1,className:cn$1("-mx-1 my-1 h-px bg-muted",e1),..._g}));SelectSeparator.displayName=Separator$1.displayName;const formSchema=objectType({enableFileManager:booleanType(),inputDirectory:stringType(),outputDirectory:stringType(),enableDownloadMask:booleanType(),enableManualInpainting:booleanType(),enableUploadMask:booleanType(),enableAutoExtractPrompt:booleanType(),removeBGModel:stringType(),realesrganModel:stringType(),interactiveSegModel:stringType()}),TAB_GENERAL="General",TAB_MODEL="Model",TAB_PLUGINS="Plugins",TAB_NAMES=[TAB_MODEL,TAB_GENERAL,TAB_PLUGINS];function SettingsDialog(){const[e1,_g]=useToggle$1(!1),[t1,r1]=reactExports.useState(TAB_MODEL),[n1,i1,o1,a1,u1,s1,l1,c1]=useStore(Q1=>[Q1.updateAppState,Q1.settings,Q1.updateSettings,Q1.fileManagerState,Q1.setModel,Q1.serverConfig,Q1.updateServerConfig,Q1.setServerConfig]),{toast:d1}=useToast(),[h1,f1]=reactExports.useState(i1.model),[g1,v1]=reactExports.useState([]),$1=g1.length>0;reactExports.useEffect(()=>{f1(i1.model)},[i1.model]);const y1=useForm({resolver:t(formSchema),defaultValues:{enableDownloadMask:i1.enableDownloadMask,enableManualInpainting:i1.enableManualInpainting,enableUploadMask:i1.enableUploadMask,enableAutoExtractPrompt:i1.enableAutoExtractPrompt,inputDirectory:a1.inputDirectory,outputDirectory:a1.outputDirectory,removeBGModel:s1==null?void 0:s1.removeBGModel,realesrganModel:s1==null?void 0:s1.realesrganModel,interactiveSegModel:s1==null?void 0:s1.interactiveSegModel}});reactExports.useEffect(()=>{s1&&(c1(s1),y1.setValue("removeBGModel",s1.removeBGModel),y1.setValue("realesrganModel",s1.realesrganModel),y1.setValue("interactiveSegModel",s1.interactiveSegModel))},[y1,s1]);async function _1(Q1){o1({enableDownloadMask:Q1.enableDownloadMask,enableManualInpainting:Q1.enableManualInpainting,enableUploadMask:Q1.enableUploadMask,enableAutoExtractPrompt:Q1.enableAutoExtractPrompt});const U1=h1.name!==i1.model.name,V1=(s1==null?void 0:s1.removeBGModel)!==Q1.removeBGModel&&P1,K1=(s1==null?void 0:s1.realesrganModel)!==Q1.realesrganModel&&k1,J1=(s1==null?void 0:s1.interactiveSegModel)!==Q1.interactiveSegModel&&N1;if(U1||V1||K1||J1){const G1=[];if(U1&&G1.push(`Switching model from ${i1.model.name} to ${h1.name}`),V1&&G1.push(`Switching RemoveBG model from ${s1==null?void 0:s1.removeBGModel} to ${Q1.removeBGModel}`),K1&&G1.push(`Switching RealESRGAN model from ${s1==null?void 0:s1.realesrganModel} to ${Q1.realesrganModel}`),J1&&G1.push(`Switching ${PluginName.InteractiveSeg} model from ${s1==null?void 0:s1.interactiveSegModel} to ${Q1.interactiveSegModel}`),v1(G1),n1({disableShortCuts:!0}),U1)try{d1({title:`Switch to ${h1.name} success`}),u1(h1)}catch(Y1){d1({variant:"destructive",title:`Switch to ${h1.name} failed: ${Y1}`}),f1(i1.model)}if(V1)try{l1({removeBGModel:Q1.removeBGModel}),d1({title:`Switch to removeBG ${Q1.removeBGModel} success`})}catch(Y1){d1({variant:"destructive",title:`Switch RemoveBG model to ${Q1.removeBGModel} failed: ${Y1}`})}if(K1)try{const Y1=await switchPluginModel(PluginName.RealESRGAN,Q1.realesrganModel);if(Y1.status!==200)throw new Error(Y1.statusText)}catch(Y1){d1({variant:"destructive",title:`Switch RealESRGAN model to ${Q1.realesrganModel} failed: ${Y1}`})}if(J1)try{const Y1=await switchPluginModel(PluginName.InteractiveSeg,Q1.interactiveSegModel);if(Y1.status!==200)throw new Error(Y1.statusText)}catch(Y1){d1({variant:"destructive",title:`Switch ${PluginName.InteractiveSeg} model to ${Q1.interactiveSegModel} failed: ${Y1}`})}v1([]),n1({disableShortCuts:!1})}}useHotKey("s",()=>{_g(),e1&&_1(y1.getValues())},[e1,y1,h1,s1]);const E1=s1.modelInfos,T1=s1.plugins,P1=T1.some(Q1=>Q1.name===PluginName.RemoveBG),k1=T1.some(Q1=>Q1.name===PluginName.RealESRGAN),N1=T1.some(Q1=>Q1.name===PluginName.InteractiveSeg);function W1(Q1){_g(),Q1||_1(y1.getValues())}function H1(Q1){f1(Q1)}function ty(Q1){return E1?E1.filter(U1=>Q1.includes(U1.model_type)).map(U1=>jsxRuntimeExports.jsxs("div",{onClick:()=>H1(U1),className:"px-2",children:[jsxRuntimeExports.jsx("div",{className:cn$1([U1.name===h1.name?"bg-muted":"hover:bg-muted","rounded-md px-2 py-2","cursor-default"]),children:jsxRuntimeExports.jsx("div",{className:"text-base",children:U1.name})}),jsxRuntimeExports.jsx(Separator$2,{className:"my-1"})]},U1.name)):jsxRuntimeExports.jsx("div",{children:"Please download model first"})}function ey(){let Q1=MODEL_TYPE_INPAINT;for(let U1 of E1)if(h1.name===U1.name){Q1=U1.model_type,Q1===MODEL_TYPE_DIFFUSERS_SDXL&&(Q1=MODEL_TYPE_DIFFUSERS_SD),Q1===MODEL_TYPE_DIFFUSERS_SDXL_INPAINT&&(Q1=MODEL_TYPE_DIFFUSERS_SD_INPAINT);break}return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 w-[510px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 rounded-md",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Current Model"}),jsxRuntimeExports.jsx("div",{children:h1.name})]}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-4  rounded-md",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-1 items-center justify-start",children:jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Available models"})}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:Q1,children:[jsxRuntimeExports.jsxs(TabsList,{children:[jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_INPAINT,children:"Inpaint"}),jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_DIFFUSERS_SD,children:"Stable Diffusion"}),jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_DIFFUSERS_SD_INPAINT,children:"Stable Diffusion Inpaint"}),jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_OTHER,children:"Other Diffusion"})]}),jsxRuntimeExports.jsxs(ScrollArea,{className:"h-[240px] w-full mt-2 outline-none border rounded-lg",children:[jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_INPAINT,children:ty([MODEL_TYPE_INPAINT])}),jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_DIFFUSERS_SD,children:ty([MODEL_TYPE_DIFFUSERS_SD,MODEL_TYPE_DIFFUSERS_SDXL])}),jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_DIFFUSERS_SD_INPAINT,children:ty([MODEL_TYPE_DIFFUSERS_SD_INPAINT,MODEL_TYPE_DIFFUSERS_SDXL_INPAINT])}),jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_OTHER,children:ty([MODEL_TYPE_OTHER])})]})]})]})]})}function ly(){return jsxRuntimeExports.jsxs("div",{className:"space-y-4 w-[510px]",children:[jsxRuntimeExports.jsx(FormField,{control:y1.control,name:"enableManualInpainting",render:({field:Q1})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Enable manual inpainting"}),jsxRuntimeExports.jsx(FormDescription,{children:"For erase model, click a button to trigger inpainting after draw mask."})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:Q1.value,onCheckedChange:Q1.onChange})})]})}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsx(FormField,{control:y1.control,name:"enableDownloadMask",render:({field:Q1})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Enable download mask"}),jsxRuntimeExports.jsx(FormDescription,{children:"Also download the mask after save the inpainting result."})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:Q1.value,onCheckedChange:Q1.onChange})})]})}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsx(FormField,{control:y1.control,name:"enableAutoExtractPrompt",render:({field:Q1})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Enable auto extract prompt"}),jsxRuntimeExports.jsx(FormDescription,{children:"Automatically extract prompt/negativate prompt from the image meta."})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:Q1.value,onCheckedChange:Q1.onChange})})]})})]})}function oy(){return jsxRuntimeExports.jsxs("div",{className:"space-y-4 w-[510px]",children:[jsxRuntimeExports.jsx(FormField,{control:y1.control,name:"removeBGModel",render:({field:Q1})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Remove Background"}),jsxRuntimeExports.jsx(FormDescription,{children:"Remove background model"})]}),jsxRuntimeExports.jsxs(Select,{onValueChange:Q1.onChange,defaultValue:Q1.value,disabled:!P1,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select removebg model"})})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:s1==null?void 0:s1.removeBGModels.map(U1=>jsxRuntimeExports.jsx(SelectItem,{value:U1,children:U1},U1))})})]})]})}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsx(FormField,{control:y1.control,name:"realesrganModel",render:({field:Q1})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"RealESRGAN"}),jsxRuntimeExports.jsx(FormDescription,{children:"RealESRGAN Model"})]}),jsxRuntimeExports.jsxs(Select,{onValueChange:Q1.onChange,defaultValue:Q1.value,disabled:!k1,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select RealESRGAN model"})})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:s1==null?void 0:s1.realesrganModels.map(U1=>jsxRuntimeExports.jsx(SelectItem,{value:U1,children:U1},U1))})})]})]})}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsx(FormField,{control:y1.control,name:"interactiveSegModel",render:({field:Q1})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Interactive Segmentation"}),jsxRuntimeExports.jsx(FormDescription,{children:"Interactive Segmentation Model"})]}),jsxRuntimeExports.jsxs(Select,{onValueChange:Q1.onChange,defaultValue:Q1.value,disabled:!N1,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select interactive segmentation model"})})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:s1==null?void 0:s1.interactiveSegModels.map(U1=>jsxRuntimeExports.jsx(SelectItem,{value:U1,children:U1},U1))})})]})]})})]})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertDialog,{open:$1,children:jsxRuntimeExports.jsx(AlertDialogContent,{children:jsxRuntimeExports.jsx(AlertDialogHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{role:"status",children:[jsxRuntimeExports.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-primary",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Loading..."})]}),g1?jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:g1.map((Q1,U1)=>jsxRuntimeExports.jsx("div",{children:Q1},U1))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})})})}),jsxRuntimeExports.jsxs(Dialog,{open:e1,onOpenChange:W1,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(IconButton,{tooltip:"Settings",children:jsxRuntimeExports.jsx(Settings,{})})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-3xl h-[600px]",onOpenAutoFocus:Q1=>Q1.preventDefault(),children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Settings"}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row space-x-8 h-full",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col space-y-1",children:TAB_NAMES.map(Q1=>jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>r1(Q1),className:cn$1(t1===Q1?"bg-muted ":"hover:bg-muted","justify-start"),children:Q1},Q1))}),jsxRuntimeExports.jsx(Separator$2,{orientation:"vertical"}),jsxRuntimeExports.jsx(Form,{...y1,children:jsxRuntimeExports.jsx("div",{className:"flex w-full justify-center",children:jsxRuntimeExports.jsxs("form",{onSubmit:y1.handleSubmit(_1),children:[t1===TAB_MODEL?ey():jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),t1===TAB_GENERAL?ly():jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),t1===TAB_PLUGINS?oy():jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx("div",{className:"absolute right-10 bottom-6",children:jsxRuntimeExports.jsx(Button,{onClick:()=>W1(!1),children:"Ok"})})]})})})]})]})]})]})}var U$3=1,Y$1=.9,H$1=.8,J=.17,p=.1,u=.999,$=.9999,k$1=.99,m=/[\\\/_+.#"@\[\(\{&]/,B$1=/[\\\/_+.#"@\[\(\{&]/g,K$1=/[\s-]/,X$2=/[\s-]/g;function G$1(e1,_g,t1,r1,n1,i1,o1){if(i1===_g.length)return n1===e1.length?U$3:k$1;var a1=`${n1},${i1}`;if(o1[a1]!==void 0)return o1[a1];for(var u1=r1.charAt(i1),s1=t1.indexOf(u1,n1),l1=0,c1,d1,h1,f1;s1>=0;)c1=G$1(e1,_g,t1,r1,s1+1,i1+1,o1),c1>l1&&(s1===n1?c1*=U$3:m.test(e1.charAt(s1-1))?(c1*=H$1,h1=e1.slice(n1,s1-1).match(B$1),h1&&n1>0&&(c1*=Math.pow(u,h1.length))):K$1.test(e1.charAt(s1-1))?(c1*=Y$1,f1=e1.slice(n1,s1-1).match(X$2),f1&&n1>0&&(c1*=Math.pow(u,f1.length))):(c1*=J,n1>0&&(c1*=Math.pow(u,s1-n1))),e1.charAt(s1)!==_g.charAt(i1)&&(c1*=$)),(c1<p&&t1.charAt(s1-1)===r1.charAt(i1+1)||r1.charAt(i1+1)===r1.charAt(i1)&&t1.charAt(s1-1)!==r1.charAt(i1))&&(d1=G$1(e1,_g,t1,r1,s1+1,i1+2,o1),d1*p>c1&&(c1=d1*p)),c1>l1&&(l1=c1),s1=t1.indexOf(u1,s1+1);return o1[a1]=l1,l1}function D$1(e1){return e1.toLowerCase().replace(X$2," ")}function W(e1,_g,t1){return e1=t1&&t1.length>0?`${e1+" "+t1.join(" ")}`:e1,G$1(e1,_g,D$1(e1),D$1(_g),0,0,{})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e1){for(var _g=1;_g<arguments.length;_g++){var t1=arguments[_g];for(var r1 in t1)({}).hasOwnProperty.call(t1,r1)&&(e1[r1]=t1[r1])}return e1},_extends.apply(null,arguments)}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(e1,_g,{checkForDefaultPrevented:t1=!0}={}){return function(n1){if(e1==null||e1(n1),t1===!1||!n1.defaultPrevented)return _g==null?void 0:_g(n1)}}function $6ed0406888f73fc4$var$setRef(e1,_g){typeof e1=="function"?e1(_g):e1!=null&&(e1.current=_g)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...e1){return _g=>e1.forEach(t1=>$6ed0406888f73fc4$var$setRef(t1,_g))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...e1){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...e1),e1)}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(e1,_g=[]){let t1=[];function r1(i1,o1){const a1=reactExports.createContext(o1),u1=t1.length;t1=[...t1,o1];function s1(c1){const{scope:d1,children:h1,...f1}=c1,g1=(d1==null?void 0:d1[e1][u1])||a1,v1=reactExports.useMemo(()=>f1,Object.values(f1));return reactExports.createElement(g1.Provider,{value:v1},h1)}function l1(c1,d1){const h1=(d1==null?void 0:d1[e1][u1])||a1,f1=reactExports.useContext(h1);if(f1)return f1;if(o1!==void 0)return o1;throw new Error(`\`${c1}\` must be used within \`${i1}\``)}return s1.displayName=i1+"Provider",[s1,l1]}const n1=()=>{const i1=t1.map(o1=>reactExports.createContext(o1));return function(a1){const u1=(a1==null?void 0:a1[e1])||i1;return reactExports.useMemo(()=>({[`__scope${e1}`]:{...a1,[e1]:u1}}),[a1,u1])}};return n1.scopeName=e1,[r1,$c512c27ab02ef895$var$composeContextScopes(n1,..._g)]}function $c512c27ab02ef895$var$composeContextScopes(...e1){const _g=e1[0];if(e1.length===1)return _g;const t1=()=>{const r1=e1.map(n1=>({useScope:n1(),scopeName:n1.scopeName}));return function(i1){const o1=r1.reduce((a1,{useScope:u1,scopeName:s1})=>{const c1=u1(i1)[`__scope${s1}`];return{...a1,...c1}},{});return reactExports.useMemo(()=>({[`__scope${_g.scopeName}`]:o1}),[o1])}};return t1.scopeName=_g.scopeName,t1}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=React$1.useId||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(e1){const[_g,t1]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{e1||t1(r1=>r1??String($1746a345f3d73bb7$var$count++))},[e1]),e1||(_g?`radix-${_g}`:"")}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(e1){const _g=reactExports.useRef(e1);return reactExports.useEffect(()=>{_g.current=e1}),reactExports.useMemo(()=>(...t1)=>{var r1;return(r1=_g.current)===null||r1===void 0?void 0:r1.call(_g,...t1)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:e1,defaultProp:_g,onChange:t1=()=>{}}){const[r1,n1]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:_g,onChange:t1}),i1=e1!==void 0,o1=i1?e1:r1,a1=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(t1),u1=reactExports.useCallback(s1=>{if(i1){const c1=typeof s1=="function"?s1(e1):s1;c1!==e1&&a1(c1)}else n1(s1)},[i1,e1,n1,a1]);return[o1,u1]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:e1,onChange:_g}){const t1=reactExports.useState(e1),[r1]=t1,n1=reactExports.useRef(r1),i1=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_g);return reactExports.useEffect(()=>{n1.current!==r1&&(i1(r1),n1.current=r1)},[r1,n1,i1]),t1}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((e1,_g)=>{const{children:t1,...r1}=e1,n1=reactExports.Children.toArray(t1),i1=n1.find($5e63c961fc1ce211$var$isSlottable);if(i1){const o1=i1.props.children,a1=n1.map(u1=>u1===i1?reactExports.Children.count(o1)>1?reactExports.Children.only(null):reactExports.isValidElement(o1)?o1.props.children:null:u1);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},r1,{ref:_g}),reactExports.isValidElement(o1)?reactExports.cloneElement(o1,void 0,a1):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends({},r1,{ref:_g}),t1)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((e1,_g)=>{const{children:t1,...r1}=e1;return reactExports.isValidElement(t1)?reactExports.cloneElement(t1,{...$5e63c961fc1ce211$var$mergeProps(r1,t1.props),ref:_g?$6ed0406888f73fc4$export$43e446d32b3d21af(_g,t1.ref):t1.ref}):reactExports.Children.count(t1)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:e1})=>reactExports.createElement(reactExports.Fragment,null,e1);function $5e63c961fc1ce211$var$isSlottable(e1){return reactExports.isValidElement(e1)&&e1.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(e1,_g){const t1={..._g};for(const r1 in _g){const n1=e1[r1],i1=_g[r1];/^on[A-Z]/.test(r1)?n1&&i1?t1[r1]=(...a1)=>{i1(...a1),n1(...a1)}:n1&&(t1[r1]=n1):r1==="style"?t1[r1]={...n1,...i1}:r1==="className"&&(t1[r1]=[n1,i1].filter(Boolean).join(" "))}return{...e1,...t1}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((e1,_g)=>{const t1=reactExports.forwardRef((r1,n1)=>{const{asChild:i1,...o1}=r1,a1=i1?$5e63c961fc1ce211$export$8c6ed5c666ac1360:_g;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(a1,_extends({},o1,{ref:n1}))});return t1.displayName=`Primitive.${_g}`,{...e1,[_g]:t1}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(e1,_g){e1&&reactDomExports.flushSync(()=>e1.dispatchEvent(_g))}function $addc16e1bbe58fd0$export$3a72a57244d6e765(e1,_g=globalThis==null?void 0:globalThis.document){const t1=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(e1);reactExports.useEffect(()=>{const r1=n1=>{n1.key==="Escape"&&t1(n1)};return _g.addEventListener("keydown",r1),()=>_g.removeEventListener("keydown",r1)},[t1,_g])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((e1,_g)=>{var t1;const{disableOutsidePointerEvents:r1=!1,onEscapeKeyDown:n1,onPointerDownOutside:i1,onFocusOutside:o1,onInteractOutside:a1,onDismiss:u1,...s1}=e1,l1=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[c1,d1]=reactExports.useState(null),h1=(t1=c1==null?void 0:c1.ownerDocument)!==null&&t1!==void 0?t1:globalThis==null?void 0:globalThis.document,[,f1]=reactExports.useState({}),g1=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_g,N1=>d1(N1)),v1=Array.from(l1.layers),[$1]=[...l1.layersWithOutsidePointerEventsDisabled].slice(-1),y1=v1.indexOf($1),_1=c1?v1.indexOf(c1):-1,E1=l1.layersWithOutsidePointerEventsDisabled.size>0,T1=_1>=y1,P1=$5cb92bef7577960e$var$usePointerDownOutside(N1=>{const W1=N1.target,H1=[...l1.branches].some(ty=>ty.contains(W1));!T1||H1||(i1==null||i1(N1),a1==null||a1(N1),N1.defaultPrevented||u1==null||u1())},h1),k1=$5cb92bef7577960e$var$useFocusOutside(N1=>{const W1=N1.target;[...l1.branches].some(ty=>ty.contains(W1))||(o1==null||o1(N1),a1==null||a1(N1),N1.defaultPrevented||u1==null||u1())},h1);return $addc16e1bbe58fd0$export$3a72a57244d6e765(N1=>{_1===l1.layers.size-1&&(n1==null||n1(N1),!N1.defaultPrevented&&u1&&(N1.preventDefault(),u1()))},h1),reactExports.useEffect(()=>{if(c1)return r1&&(l1.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=h1.body.style.pointerEvents,h1.body.style.pointerEvents="none"),l1.layersWithOutsidePointerEventsDisabled.add(c1)),l1.layers.add(c1),$5cb92bef7577960e$var$dispatchUpdate(),()=>{r1&&l1.layersWithOutsidePointerEventsDisabled.size===1&&(h1.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[c1,h1,r1,l1]),reactExports.useEffect(()=>()=>{c1&&(l1.layers.delete(c1),l1.layersWithOutsidePointerEventsDisabled.delete(c1),$5cb92bef7577960e$var$dispatchUpdate())},[c1,l1]),reactExports.useEffect(()=>{const N1=()=>f1({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,N1),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,N1)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},s1,{ref:g1,style:{pointerEvents:E1?T1?"auto":"none":void 0,...e1.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(e1.onFocusCapture,k1.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(e1.onBlurCapture,k1.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(e1.onPointerDownCapture,P1.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(e1,_g=globalThis==null?void 0:globalThis.document){const t1=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(e1),r1=reactExports.useRef(!1),n1=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const i1=a1=>{if(a1.target&&!r1.current){let l1=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,t1,s1,{discrete:!0})};var u1=l1;const s1={originalEvent:a1};a1.pointerType==="touch"?(_g.removeEventListener("click",n1.current),n1.current=l1,_g.addEventListener("click",n1.current,{once:!0})):l1()}else _g.removeEventListener("click",n1.current);r1.current=!1},o1=window.setTimeout(()=>{_g.addEventListener("pointerdown",i1)},0);return()=>{window.clearTimeout(o1),_g.removeEventListener("pointerdown",i1),_g.removeEventListener("click",n1.current)}},[_g,t1]),{onPointerDownCapture:()=>r1.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(e1,_g=globalThis==null?void 0:globalThis.document){const t1=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(e1),r1=reactExports.useRef(!1);return reactExports.useEffect(()=>{const n1=i1=>{i1.target&&!r1.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,t1,{originalEvent:i1},{discrete:!1})};return _g.addEventListener("focusin",n1),()=>_g.removeEventListener("focusin",n1)},[_g,t1]),{onFocusCapture:()=>r1.current=!0,onBlurCapture:()=>r1.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const e1=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(e1)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(e1,_g,t1,{discrete:r1}){const n1=t1.originalEvent.target,i1=new CustomEvent(e1,{bubbles:!1,cancelable:!0,detail:t1});_g&&n1.addEventListener(e1,_g,{once:!0}),r1?$8927f6f2acc4f386$export$6d1a0317bde7de7f(n1,i1):n1.dispatchEvent(i1)}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((e1,_g)=>{const{loop:t1=!1,trapped:r1=!1,onMountAutoFocus:n1,onUnmountAutoFocus:i1,...o1}=e1,[a1,u1]=reactExports.useState(null),s1=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(n1),l1=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(i1),c1=reactExports.useRef(null),d1=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_g,g1=>u1(g1)),h1=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(r1){let y1=function(P1){if(h1.paused||!a1)return;const k1=P1.target;a1.contains(k1)?c1.current=k1:$d3863c46a17e8a28$var$focus(c1.current,{select:!0})},_1=function(P1){if(h1.paused||!a1)return;const k1=P1.relatedTarget;k1!==null&&(a1.contains(k1)||$d3863c46a17e8a28$var$focus(c1.current,{select:!0}))},E1=function(P1){if(document.activeElement===document.body)for(const N1 of P1)N1.removedNodes.length>0&&$d3863c46a17e8a28$var$focus(a1)};var g1=y1,v1=_1,$1=E1;document.addEventListener("focusin",y1),document.addEventListener("focusout",_1);const T1=new MutationObserver(E1);return a1&&T1.observe(a1,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y1),document.removeEventListener("focusout",_1),T1.disconnect()}}},[r1,a1,h1.paused]),reactExports.useEffect(()=>{if(a1){$d3863c46a17e8a28$var$focusScopesStack.add(h1);const g1=document.activeElement;if(!a1.contains(g1)){const $1=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);a1.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,s1),a1.dispatchEvent($1),$1.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(a1)),{select:!0}),document.activeElement===g1&&$d3863c46a17e8a28$var$focus(a1))}return()=>{a1.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,s1),setTimeout(()=>{const $1=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);a1.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,l1),a1.dispatchEvent($1),$1.defaultPrevented||$d3863c46a17e8a28$var$focus(g1??document.body,{select:!0}),a1.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,l1),$d3863c46a17e8a28$var$focusScopesStack.remove(h1)},0)}}},[a1,s1,l1,h1]);const f1=reactExports.useCallback(g1=>{if(!t1&&!r1||h1.paused)return;const v1=g1.key==="Tab"&&!g1.altKey&&!g1.ctrlKey&&!g1.metaKey,$1=document.activeElement;if(v1&&$1){const y1=g1.currentTarget,[_1,E1]=$d3863c46a17e8a28$var$getTabbableEdges(y1);_1&&E1?!g1.shiftKey&&$1===E1?(g1.preventDefault(),t1&&$d3863c46a17e8a28$var$focus(_1,{select:!0})):g1.shiftKey&&$1===_1&&(g1.preventDefault(),t1&&$d3863c46a17e8a28$var$focus(E1,{select:!0})):$1===y1&&g1.preventDefault()}},[t1,r1,h1.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({tabIndex:-1},o1,{ref:d1,onKeyDown:f1}))});function $d3863c46a17e8a28$var$focusFirst(e1,{select:_g=!1}={}){const t1=document.activeElement;for(const r1 of e1)if($d3863c46a17e8a28$var$focus(r1,{select:_g}),document.activeElement!==t1)return}function $d3863c46a17e8a28$var$getTabbableEdges(e1){const _g=$d3863c46a17e8a28$var$getTabbableCandidates(e1),t1=$d3863c46a17e8a28$var$findVisible(_g,e1),r1=$d3863c46a17e8a28$var$findVisible(_g.reverse(),e1);return[t1,r1]}function $d3863c46a17e8a28$var$getTabbableCandidates(e1){const _g=[],t1=document.createTreeWalker(e1,NodeFilter.SHOW_ELEMENT,{acceptNode:r1=>{const n1=r1.tagName==="INPUT"&&r1.type==="hidden";return r1.disabled||r1.hidden||n1?NodeFilter.FILTER_SKIP:r1.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t1.nextNode();)_g.push(t1.currentNode);return _g}function $d3863c46a17e8a28$var$findVisible(e1,_g){for(const t1 of e1)if(!$d3863c46a17e8a28$var$isHidden(t1,{upTo:_g}))return t1}function $d3863c46a17e8a28$var$isHidden(e1,{upTo:_g}){if(getComputedStyle(e1).visibility==="hidden")return!0;for(;e1;){if(_g!==void 0&&e1===_g)return!1;if(getComputedStyle(e1).display==="none")return!0;e1=e1.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(e1){return e1 instanceof HTMLInputElement&&"select"in e1}function $d3863c46a17e8a28$var$focus(e1,{select:_g=!1}={}){if(e1&&e1.focus){const t1=document.activeElement;e1.focus({preventScroll:!0}),e1!==t1&&$d3863c46a17e8a28$var$isSelectableInput(e1)&&_g&&e1.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let e1=[];return{add(_g){const t1=e1[0];_g!==t1&&(t1==null||t1.pause()),e1=$d3863c46a17e8a28$var$arrayRemove(e1,_g),e1.unshift(_g)},remove(_g){var t1;e1=$d3863c46a17e8a28$var$arrayRemove(e1,_g),(t1=e1[0])===null||t1===void 0||t1.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(e1,_g){const t1=[...e1],r1=t1.indexOf(_g);return r1!==-1&&t1.splice(r1,1),t1}function $d3863c46a17e8a28$var$removeLinks(e1){return e1.filter(_g=>_g.tagName!=="A")}const $f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((e1,_g)=>{var t1;const{container:r1=globalThis==null||(t1=globalThis.document)===null||t1===void 0?void 0:t1.body,...n1}=e1;return r1?$7SXl2$reactdom.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({},n1,{ref:_g})),r1):null});function $fe963b355347cc68$export$3e6543de14f8614f(e1,_g){return reactExports.useReducer((t1,r1)=>{const n1=_g[t1][r1];return n1??t1},e1)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=e1=>{const{present:_g,children:t1}=e1,r1=$921a889cee6df7e8$var$usePresence(_g),n1=typeof t1=="function"?t1({present:r1.isPresent}):reactExports.Children.only(t1),i1=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(r1.ref,n1.ref);return typeof t1=="function"||r1.isPresent?reactExports.cloneElement(n1,{ref:i1}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(e1){const[_g,t1]=reactExports.useState(),r1=reactExports.useRef({}),n1=reactExports.useRef(e1),i1=reactExports.useRef("none"),o1=e1?"mounted":"unmounted",[a1,u1]=$fe963b355347cc68$export$3e6543de14f8614f(o1,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const s1=$921a889cee6df7e8$var$getAnimationName(r1.current);i1.current=a1==="mounted"?s1:"none"},[a1]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const s1=r1.current,l1=n1.current;if(l1!==e1){const d1=i1.current,h1=$921a889cee6df7e8$var$getAnimationName(s1);e1?u1("MOUNT"):h1==="none"||(s1==null?void 0:s1.display)==="none"?u1("UNMOUNT"):u1(l1&&d1!==h1?"ANIMATION_OUT":"UNMOUNT"),n1.current=e1}},[e1,u1]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(_g){const s1=c1=>{const h1=$921a889cee6df7e8$var$getAnimationName(r1.current).includes(c1.animationName);c1.target===_g&&h1&&reactDomExports.flushSync(()=>u1("ANIMATION_END"))},l1=c1=>{c1.target===_g&&(i1.current=$921a889cee6df7e8$var$getAnimationName(r1.current))};return _g.addEventListener("animationstart",l1),_g.addEventListener("animationcancel",s1),_g.addEventListener("animationend",s1),()=>{_g.removeEventListener("animationstart",l1),_g.removeEventListener("animationcancel",s1),_g.removeEventListener("animationend",s1)}}else u1("ANIMATION_END")},[_g,u1]),{isPresent:["mounted","unmountSuspended"].includes(a1),ref:reactExports.useCallback(s1=>{s1&&(r1.current=getComputedStyle(s1)),t1(s1)},[])}}function $921a889cee6df7e8$var$getAnimationName(e1){return(e1==null?void 0:e1.animationName)||"none"}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var e1,_g;const t1=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e1=t1[0])!==null&&e1!==void 0?e1:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(_g=t1[1])!==null&&_g!==void 0?_g:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r1=>r1.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const e1=document.createElement("span");return e1.setAttribute("data-radix-focus-guard",""),e1.tabIndex=0,e1.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(e1,_g){var t1=reactExports.useRef(null),r1=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),n1=r1[0],i1=r1[1],o1=e1.forwardProps,a1=e1.children,u1=e1.className,s1=e1.removeScrollBar,l1=e1.enabled,c1=e1.shards,d1=e1.sideCar,h1=e1.noIsolation,f1=e1.inert,g1=e1.allowPinchZoom,v1=e1.as,$1=v1===void 0?"div":v1,y1=__rest(e1,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),_1=d1,E1=useMergeRefs([t1,_g]),T1=__assign(__assign({},y1),n1);return reactExports.createElement(reactExports.Fragment,null,l1&&reactExports.createElement(_1,{sideCar:effectCar,removeScrollBar:s1,shards:c1,noIsolation:h1,inert:f1,setCallbacks:i1,allowPinchZoom:!!g1,lockRef:t1}),o1?reactExports.cloneElement(reactExports.Children.only(a1),__assign(__assign({},T1),{ref:E1})):reactExports.createElement($1,__assign({},T1,{className:u1,ref:E1}),a1))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(e1){return e1.tagName==="TEXTAREA"},elementCanBeScrolled=function(e1,_g){var t1=window.getComputedStyle(e1);return t1[_g]!=="hidden"&&!(t1.overflowY===t1.overflowX&&!alwaysContainsScroll(e1)&&t1[_g]==="visible")},elementCouldBeVScrolled=function(e1){return elementCanBeScrolled(e1,"overflowY")},elementCouldBeHScrolled=function(e1){return elementCanBeScrolled(e1,"overflowX")},locationCouldBeScrolled=function(e1,_g){var t1=_g;do{typeof ShadowRoot<"u"&&t1 instanceof ShadowRoot&&(t1=t1.host);var r1=elementCouldBeScrolled(e1,t1);if(r1){var n1=getScrollVariables(e1,t1),i1=n1[1],o1=n1[2];if(i1>o1)return!0}t1=t1.parentNode}while(t1&&t1!==document.body);return!1},getVScrollVariables=function(e1){var _g=e1.scrollTop,t1=e1.scrollHeight,r1=e1.clientHeight;return[_g,t1,r1]},getHScrollVariables=function(e1){var _g=e1.scrollLeft,t1=e1.scrollWidth,r1=e1.clientWidth;return[_g,t1,r1]},elementCouldBeScrolled=function(e1,_g){return e1==="v"?elementCouldBeVScrolled(_g):elementCouldBeHScrolled(_g)},getScrollVariables=function(e1,_g){return e1==="v"?getVScrollVariables(_g):getHScrollVariables(_g)},getDirectionFactor=function(e1,_g){return e1==="h"&&_g==="rtl"?-1:1},handleScroll=function(e1,_g,t1,r1,n1){var i1=getDirectionFactor(e1,window.getComputedStyle(_g).direction),o1=i1*r1,a1=t1.target,u1=_g.contains(a1),s1=!1,l1=o1>0,c1=0,d1=0;do{var h1=getScrollVariables(e1,a1),f1=h1[0],g1=h1[1],v1=h1[2],$1=g1-v1-i1*f1;(f1||$1)&&elementCouldBeScrolled(e1,a1)&&(c1+=$1,d1+=f1),a1=a1.parentNode}while(!u1&&a1!==document.body||u1&&(_g.contains(a1)||_g===a1));return(l1&&(c1===0||!n1)||!l1&&(d1===0||!n1))&&(s1=!0),s1},getTouchXY=function(e1){return"changedTouches"in e1?[e1.changedTouches[0].clientX,e1.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(e1){return[e1.deltaX,e1.deltaY]},extractRef=function(e1){return e1&&"current"in e1?e1.current:e1},deltaCompare=function(e1,_g){return e1[0]===_g[0]&&e1[1]===_g[1]},generateStyle=function(e1){return`
  .block-interactivity-`.concat(e1,` {pointer-events: none;}
  .allow-interactivity-`).concat(e1,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(e1){var _g=reactExports.useRef([]),t1=reactExports.useRef([0,0]),r1=reactExports.useRef(),n1=reactExports.useState(idCounter++)[0],i1=reactExports.useState(function(){return styleSingleton()})[0],o1=reactExports.useRef(e1);reactExports.useEffect(function(){o1.current=e1},[e1]),reactExports.useEffect(function(){if(e1.inert){document.body.classList.add("block-interactivity-".concat(n1));var g1=__spreadArray([e1.lockRef.current],(e1.shards||[]).map(extractRef),!0).filter(Boolean);return g1.forEach(function(v1){return v1.classList.add("allow-interactivity-".concat(n1))}),function(){document.body.classList.remove("block-interactivity-".concat(n1)),g1.forEach(function(v1){return v1.classList.remove("allow-interactivity-".concat(n1))})}}},[e1.inert,e1.lockRef.current,e1.shards]);var a1=reactExports.useCallback(function(g1,v1){if("touches"in g1&&g1.touches.length===2)return!o1.current.allowPinchZoom;var $1=getTouchXY(g1),y1=t1.current,_1="deltaX"in g1?g1.deltaX:y1[0]-$1[0],E1="deltaY"in g1?g1.deltaY:y1[1]-$1[1],T1,P1=g1.target,k1=Math.abs(_1)>Math.abs(E1)?"h":"v";if("touches"in g1&&k1==="h"&&P1.type==="range")return!1;var N1=locationCouldBeScrolled(k1,P1);if(!N1)return!0;if(N1?T1=k1:(T1=k1==="v"?"h":"v",N1=locationCouldBeScrolled(k1,P1)),!N1)return!1;if(!r1.current&&"changedTouches"in g1&&(_1||E1)&&(r1.current=T1),!T1)return!0;var W1=r1.current||T1;return handleScroll(W1,v1,g1,W1==="h"?_1:E1,!0)},[]),u1=reactExports.useCallback(function(g1){var v1=g1;if(!(!lockStack.length||lockStack[lockStack.length-1]!==i1)){var $1="deltaY"in v1?getDeltaXY(v1):getTouchXY(v1),y1=_g.current.filter(function(T1){return T1.name===v1.type&&T1.target===v1.target&&deltaCompare(T1.delta,$1)})[0];if(y1&&y1.should){v1.cancelable&&v1.preventDefault();return}if(!y1){var _1=(o1.current.shards||[]).map(extractRef).filter(Boolean).filter(function(T1){return T1.contains(v1.target)}),E1=_1.length>0?a1(v1,_1[0]):!o1.current.noIsolation;E1&&v1.cancelable&&v1.preventDefault()}}},[]),s1=reactExports.useCallback(function(g1,v1,$1,y1){var _1={name:g1,delta:v1,target:$1,should:y1};_g.current.push(_1),setTimeout(function(){_g.current=_g.current.filter(function(E1){return E1!==_1})},1)},[]),l1=reactExports.useCallback(function(g1){t1.current=getTouchXY(g1),r1.current=void 0},[]),c1=reactExports.useCallback(function(g1){s1(g1.type,getDeltaXY(g1),g1.target,a1(g1,e1.lockRef.current))},[]),d1=reactExports.useCallback(function(g1){s1(g1.type,getTouchXY(g1),g1.target,a1(g1,e1.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(i1),e1.setCallbacks({onScrollCapture:c1,onWheelCapture:c1,onTouchMoveCapture:d1}),document.addEventListener("wheel",u1,nonPassive),document.addEventListener("touchmove",u1,nonPassive),document.addEventListener("touchstart",l1,nonPassive),function(){lockStack=lockStack.filter(function(g1){return g1!==i1}),document.removeEventListener("wheel",u1,nonPassive),document.removeEventListener("touchmove",u1,nonPassive),document.removeEventListener("touchstart",l1,nonPassive)}},[]);var h1=e1.removeScrollBar,f1=e1.inert;return reactExports.createElement(reactExports.Fragment,null,f1?reactExports.createElement(i1,{styles:generateStyle(n1)}):null,h1?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(e1,_g){return reactExports.createElement(RemoveScroll,__assign({},e1,{ref:_g,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $5d3850c4d0b4e6c7$var$DIALOG_NAME="Dialog",[$5d3850c4d0b4e6c7$var$createDialogContext,$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($5d3850c4d0b4e6c7$var$DIALOG_NAME),[$5d3850c4d0b4e6c7$var$DialogProvider,$5d3850c4d0b4e6c7$var$useDialogContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$DIALOG_NAME),$5d3850c4d0b4e6c7$export$3ddf2d174ce01153=e1=>{const{__scopeDialog:_g,children:t1,open:r1,defaultOpen:n1,onOpenChange:i1,modal:o1=!0}=e1,a1=reactExports.useRef(null),u1=reactExports.useRef(null),[s1=!1,l1]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:r1,defaultProp:n1,onChange:i1});return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogProvider,{scope:_g,triggerRef:a1,contentRef:u1,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),titleId:$1746a345f3d73bb7$export$f680877a34711e37(),descriptionId:$1746a345f3d73bb7$export$f680877a34711e37(),open:s1,onOpenChange:l1,onOpenToggle:reactExports.useCallback(()=>l1(c1=>!c1),[l1]),modal:o1},t1)},$5d3850c4d0b4e6c7$var$PORTAL_NAME="DialogPortal",[$5d3850c4d0b4e6c7$var$PortalProvider,$5d3850c4d0b4e6c7$var$usePortalContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,{forceMount:void 0}),$5d3850c4d0b4e6c7$export$dad7c95542bacce0=e1=>{const{__scopeDialog:_g,forceMount:t1,children:r1,container:n1}=e1,i1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,_g);return reactExports.createElement($5d3850c4d0b4e6c7$var$PortalProvider,{scope:_g,forceMount:t1},reactExports.Children.map(r1,o1=>reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:t1||i1.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:n1},o1))))},$5d3850c4d0b4e6c7$var$OVERLAY_NAME="DialogOverlay",$5d3850c4d0b4e6c7$export$bd1d06c79be19e17=reactExports.forwardRef((e1,_g)=>{const t1=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,e1.__scopeDialog),{forceMount:r1=t1.forceMount,...n1}=e1,i1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,e1.__scopeDialog);return i1.modal?reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:r1||i1.open},reactExports.createElement($5d3850c4d0b4e6c7$var$DialogOverlayImpl,_extends({},n1,{ref:_g}))):null}),$5d3850c4d0b4e6c7$var$DialogOverlayImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,t1);return reactExports.createElement(ReactRemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0,shards:[n1.contentRef]},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends({"data-state":$5d3850c4d0b4e6c7$var$getState(n1.open)},r1,{ref:_g,style:{pointerEvents:"auto",...r1.style}})))}),$5d3850c4d0b4e6c7$var$CONTENT_NAME="DialogContent",$5d3850c4d0b4e6c7$export$b6d9565de1e068cf=reactExports.forwardRef((e1,_g)=>{const t1=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,e1.__scopeDialog),{forceMount:r1=t1.forceMount,...n1}=e1,i1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,e1.__scopeDialog);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:r1||i1.open},i1.modal?reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentModal,_extends({},n1,{ref:_g})):reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentNonModal,_extends({},n1,{ref:_g})))}),$5d3850c4d0b4e6c7$var$DialogContentModal=reactExports.forwardRef((e1,_g)=>{const t1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,e1.__scopeDialog),r1=reactExports.useRef(null),n1=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_g,t1.contentRef,r1);return reactExports.useEffect(()=>{const i1=r1.current;if(i1)return hideOthers(i1)},[]),reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends({},e1,{ref:n1,trapFocus:t1.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(e1.onCloseAutoFocus,i1=>{var o1;i1.preventDefault(),(o1=t1.triggerRef.current)===null||o1===void 0||o1.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(e1.onPointerDownOutside,i1=>{const o1=i1.detail.originalEvent,a1=o1.button===0&&o1.ctrlKey===!0;(o1.button===2||a1)&&i1.preventDefault()}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(e1.onFocusOutside,i1=>i1.preventDefault())}))}),$5d3850c4d0b4e6c7$var$DialogContentNonModal=reactExports.forwardRef((e1,_g)=>{const t1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,e1.__scopeDialog),r1=reactExports.useRef(!1),n1=reactExports.useRef(!1);return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends({},e1,{ref:_g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i1=>{var o1;if((o1=e1.onCloseAutoFocus)===null||o1===void 0||o1.call(e1,i1),!i1.defaultPrevented){var a1;r1.current||(a1=t1.triggerRef.current)===null||a1===void 0||a1.focus(),i1.preventDefault()}r1.current=!1,n1.current=!1},onInteractOutside:i1=>{var o1,a1;(o1=e1.onInteractOutside)===null||o1===void 0||o1.call(e1,i1),i1.defaultPrevented||(r1.current=!0,i1.detail.originalEvent.type==="pointerdown"&&(n1.current=!0));const u1=i1.target;((a1=t1.triggerRef.current)===null||a1===void 0?void 0:a1.contains(u1))&&i1.preventDefault(),i1.detail.originalEvent.type==="focusin"&&n1.current&&i1.preventDefault()}}))}),$5d3850c4d0b4e6c7$var$DialogContentImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,trapFocus:r1,onOpenAutoFocus:n1,onCloseAutoFocus:i1,...o1}=e1,a1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,t1),u1=reactExports.useRef(null),s1=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_g,u1);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:r1,onMountAutoFocus:n1,onUnmountAutoFocus:i1},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,_extends({role:"dialog",id:a1.contentId,"aria-describedby":a1.descriptionId,"aria-labelledby":a1.titleId,"data-state":$5d3850c4d0b4e6c7$var$getState(a1.open)},o1,{ref:s1,onDismiss:()=>a1.onOpenChange(!1)}))),!1)}),$5d3850c4d0b4e6c7$var$TITLE_NAME="DialogTitle",$5d3850c4d0b4e6c7$export$16f7638e4a34b909=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TITLE_NAME,t1);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.h2,_extends({id:n1.titleId},r1,{ref:_g}))}),$5d3850c4d0b4e6c7$var$DESCRIPTION_NAME="DialogDescription",$5d3850c4d0b4e6c7$export$94e94c2ec2c954d5=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$DESCRIPTION_NAME,t1);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.p,_extends({id:n1.descriptionId},r1,{ref:_g}))}),$5d3850c4d0b4e6c7$var$CLOSE_NAME="DialogClose",$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac=reactExports.forwardRef((e1,_g)=>{const{__scopeDialog:t1,...r1}=e1,n1=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CLOSE_NAME,t1);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends({type:"button"},r1,{ref:_g,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(e1.onClick,()=>n1.onOpenChange(!1))}))});function $5d3850c4d0b4e6c7$var$getState(e1){return e1?"open":"closed"}const $5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9=$5d3850c4d0b4e6c7$export$3ddf2d174ce01153,$5d3850c4d0b4e6c7$export$602eac185826482c=$5d3850c4d0b4e6c7$export$dad7c95542bacce0,$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff=$5d3850c4d0b4e6c7$export$bd1d06c79be19e17,$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2=$5d3850c4d0b4e6c7$export$b6d9565de1e068cf;var V$1='[cmdk-group=""]',X$1='[cmdk-group-items=""]',ge='[cmdk-group-heading=""]',Y='[cmdk-item=""]',le$1=`${Y}:not([aria-disabled="true"])`,Q$2="cmdk-item-select",M$2="data-value",Re=(e1,_g,t1)=>W(e1,_g,t1),ue=reactExports.createContext(void 0),G=()=>reactExports.useContext(ue),de=reactExports.createContext(void 0),Z$1=()=>reactExports.useContext(de),fe$2=reactExports.createContext(void 0),me$1=reactExports.forwardRef((e1,_g)=>{let t1=k(()=>{var Y1,yy;return{search:"",value:(yy=(Y1=e1.value)!=null?Y1:e1.defaultValue)!=null?yy:"",filtered:{count:0,items:new Map,groups:new Set}}}),r1=k(()=>new Set),n1=k(()=>new Map),i1=k(()=>new Map),o1=k(()=>new Set),a1=pe(e1),{label:u1,children:s1,value:l1,onValueChange:c1,filter:d1,shouldFilter:h1,loop:f1,disablePointerSelection:g1=!1,vimBindings:v1=!0,...$1}=e1,y1=reactExports.useId(),_1=reactExports.useId(),E1=reactExports.useId(),T1=reactExports.useRef(null),P1=Me$1();T$1(()=>{if(l1!==void 0){let Y1=l1.trim();t1.current.value=Y1,k1.emit()}},[l1]),T$1(()=>{P1(6,ly)},[]);let k1=reactExports.useMemo(()=>({subscribe:Y1=>(o1.current.add(Y1),()=>o1.current.delete(Y1)),snapshot:()=>t1.current,setState:(Y1,yy,Oy)=>{var Ey,jy,Ay;if(!Object.is(t1.current[Y1],yy)){if(t1.current[Y1]=yy,Y1==="search")ey(),H1(),P1(1,ty);else if(Y1==="value"&&(Oy||P1(5,ly),((Ey=a1.current)==null?void 0:Ey.value)!==void 0)){let Uy=yy??"";(Ay=(jy=a1.current).onValueChange)==null||Ay.call(jy,Uy);return}k1.emit()}},emit:()=>{o1.current.forEach(Y1=>Y1())}}),[]),N1=reactExports.useMemo(()=>({value:(Y1,yy,Oy)=>{var Ey;yy!==((Ey=i1.current.get(Y1))==null?void 0:Ey.value)&&(i1.current.set(Y1,{value:yy,keywords:Oy}),t1.current.filtered.items.set(Y1,W1(yy,Oy)),P1(2,()=>{H1(),k1.emit()}))},item:(Y1,yy)=>(r1.current.add(Y1),yy&&(n1.current.has(yy)?n1.current.get(yy).add(Y1):n1.current.set(yy,new Set([Y1]))),P1(3,()=>{ey(),H1(),t1.current.value||ty(),k1.emit()}),()=>{i1.current.delete(Y1),r1.current.delete(Y1),t1.current.filtered.items.delete(Y1);let Oy=oy();P1(4,()=>{ey(),(Oy==null?void 0:Oy.getAttribute("id"))===Y1&&ty(),k1.emit()})}),group:Y1=>(n1.current.has(Y1)||n1.current.set(Y1,new Set),()=>{i1.current.delete(Y1),n1.current.delete(Y1)}),filter:()=>a1.current.shouldFilter,label:u1||e1["aria-label"],disablePointerSelection:g1,listId:y1,inputId:E1,labelId:_1,listInnerRef:T1}),[]);function W1(Y1,yy){var Oy,Ey;let jy=(Ey=(Oy=a1.current)==null?void 0:Oy.filter)!=null?Ey:Re;return Y1?jy(Y1,t1.current.search,yy):0}function H1(){if(!t1.current.search||a1.current.shouldFilter===!1)return;let Y1=t1.current.filtered.items,yy=[];t1.current.filtered.groups.forEach(Ey=>{let jy=n1.current.get(Ey),Ay=0;jy.forEach(Uy=>{let Gy=Y1.get(Uy);Ay=Math.max(Gy,Ay)}),yy.push([Ey,Ay])});let Oy=T1.current;Q1().sort((Ey,jy)=>{var Ay,Uy;let Gy=Ey.getAttribute("id"),Wy=jy.getAttribute("id");return((Ay=Y1.get(Wy))!=null?Ay:0)-((Uy=Y1.get(Gy))!=null?Uy:0)}).forEach(Ey=>{let jy=Ey.closest(X$1);jy?jy.appendChild(Ey.parentElement===jy?Ey:Ey.closest(`${X$1} > *`)):Oy.appendChild(Ey.parentElement===Oy?Ey:Ey.closest(`${X$1} > *`))}),yy.sort((Ey,jy)=>jy[1]-Ey[1]).forEach(Ey=>{let jy=T1.current.querySelector(`${V$1}[${M$2}="${encodeURIComponent(Ey[0])}"]`);jy==null||jy.parentElement.appendChild(jy)})}function ty(){let Y1=Q1().find(Oy=>Oy.getAttribute("aria-disabled")!=="true"),yy=Y1==null?void 0:Y1.getAttribute(M$2);k1.setState("value",yy||void 0)}function ey(){var Y1,yy,Oy,Ey;if(!t1.current.search||a1.current.shouldFilter===!1){t1.current.filtered.count=r1.current.size;return}t1.current.filtered.groups=new Set;let jy=0;for(let Ay of r1.current){let Uy=(yy=(Y1=i1.current.get(Ay))==null?void 0:Y1.value)!=null?yy:"",Gy=(Ey=(Oy=i1.current.get(Ay))==null?void 0:Oy.keywords)!=null?Ey:[],Wy=W1(Uy,Gy);t1.current.filtered.items.set(Ay,Wy),Wy>0&&jy++}for(let[Ay,Uy]of n1.current)for(let Gy of Uy)if(t1.current.filtered.items.get(Gy)>0){t1.current.filtered.groups.add(Ay);break}t1.current.filtered.count=jy}function ly(){var Y1,yy,Oy;let Ey=oy();Ey&&(((Y1=Ey.parentElement)==null?void 0:Y1.firstChild)===Ey&&((Oy=(yy=Ey.closest(V$1))==null?void 0:yy.querySelector(ge))==null||Oy.scrollIntoView({block:"nearest"})),Ey.scrollIntoView({block:"nearest"}))}function oy(){var Y1;return(Y1=T1.current)==null?void 0:Y1.querySelector(`${Y}[aria-selected="true"]`)}function Q1(){var Y1;return Array.from((Y1=T1.current)==null?void 0:Y1.querySelectorAll(le$1))}function U1(Y1){let yy=Q1()[Y1];yy&&k1.setState("value",yy.getAttribute(M$2))}function V1(Y1){var yy;let Oy=oy(),Ey=Q1(),jy=Ey.findIndex(Uy=>Uy===Oy),Ay=Ey[jy+Y1];(yy=a1.current)!=null&&yy.loop&&(Ay=jy+Y1<0?Ey[Ey.length-1]:jy+Y1===Ey.length?Ey[0]:Ey[jy+Y1]),Ay&&k1.setState("value",Ay.getAttribute(M$2))}function K1(Y1){let yy=oy(),Oy=yy==null?void 0:yy.closest(V$1),Ey;for(;Oy&&!Ey;)Oy=Y1>0?we$2(Oy,V$1):Ie(Oy,V$1),Ey=Oy==null?void 0:Oy.querySelector(le$1);Ey?k1.setState("value",Ey.getAttribute(M$2)):V1(Y1)}let J1=()=>U1(Q1().length-1),hy=Y1=>{Y1.preventDefault(),Y1.metaKey?J1():Y1.altKey?K1(1):V1(1)},G1=Y1=>{Y1.preventDefault(),Y1.metaKey?U1(0):Y1.altKey?K1(-1):V1(-1)};return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:_g,tabIndex:-1,...$1,"cmdk-root":"",onKeyDown:Y1=>{var yy;if((yy=$1.onKeyDown)==null||yy.call($1,Y1),!Y1.defaultPrevented)switch(Y1.key){case"n":case"j":{v1&&Y1.ctrlKey&&hy(Y1);break}case"ArrowDown":{hy(Y1);break}case"p":case"k":{v1&&Y1.ctrlKey&&G1(Y1);break}case"ArrowUp":{G1(Y1);break}case"Home":{Y1.preventDefault(),U1(0);break}case"End":{Y1.preventDefault(),J1();break}case"Enter":if(!Y1.nativeEvent.isComposing&&Y1.keyCode!==229){Y1.preventDefault();let Oy=oy();if(Oy){let Ey=new Event(Q$2);Oy.dispatchEvent(Ey)}}}}},reactExports.createElement("label",{"cmdk-label":"",htmlFor:N1.inputId,id:N1.labelId,style:De$2},u1),F(e1,Y1=>reactExports.createElement(de.Provider,{value:k1},reactExports.createElement(ue.Provider,{value:N1},Y1))))}),be$1=reactExports.forwardRef((e1,_g)=>{var t1,r1;let n1=reactExports.useId(),i1=reactExports.useRef(null),o1=reactExports.useContext(fe$2),a1=G(),u1=pe(e1),s1=(r1=(t1=u1.current)==null?void 0:t1.forceMount)!=null?r1:o1==null?void 0:o1.forceMount;T$1(()=>{if(!s1)return a1.item(n1,o1==null?void 0:o1.id)},[s1]);let l1=ve$1(n1,i1,[e1.value,e1.children,i1],e1.keywords),c1=Z$1(),d1=D(P1=>P1.value&&P1.value===l1.current),h1=D(P1=>s1||a1.filter()===!1?!0:P1.search?P1.filtered.items.get(n1)>0:!0);reactExports.useEffect(()=>{let P1=i1.current;if(!(!P1||e1.disabled))return P1.addEventListener(Q$2,f1),()=>P1.removeEventListener(Q$2,f1)},[h1,e1.onSelect,e1.disabled]);function f1(){var P1,k1;g1(),(k1=(P1=u1.current).onSelect)==null||k1.call(P1,l1.current)}function g1(){c1.setState("value",l1.current,!0)}if(!h1)return null;let{disabled:v1,value:$1,onSelect:y1,forceMount:_1,keywords:E1,...T1}=e1;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([i1,_g]),...T1,id:n1,"cmdk-item":"",role:"option","aria-disabled":!!v1,"aria-selected":!!d1,"data-disabled":!!v1,"data-selected":!!d1,onPointerMove:v1||a1.disablePointerSelection?void 0:g1,onClick:v1?void 0:f1},e1.children)}),he=reactExports.forwardRef((e1,_g)=>{let{heading:t1,children:r1,forceMount:n1,...i1}=e1,o1=reactExports.useId(),a1=reactExports.useRef(null),u1=reactExports.useRef(null),s1=reactExports.useId(),l1=G(),c1=D(h1=>n1||l1.filter()===!1?!0:h1.search?h1.filtered.groups.has(o1):!0);T$1(()=>l1.group(o1),[]),ve$1(o1,a1,[e1.value,e1.heading,u1]);let d1=reactExports.useMemo(()=>({id:o1,forceMount:n1}),[n1]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([a1,_g]),...i1,"cmdk-group":"",role:"presentation",hidden:c1?void 0:!0},t1&&reactExports.createElement("div",{ref:u1,"cmdk-group-heading":"","aria-hidden":!0,id:s1},t1),F(e1,h1=>reactExports.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t1?s1:void 0},reactExports.createElement(fe$2.Provider,{value:d1},h1))))}),ye$2=reactExports.forwardRef((e1,_g)=>{let{alwaysRender:t1,...r1}=e1,n1=reactExports.useRef(null),i1=D(o1=>!o1.search);return!t1&&!i1?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([n1,_g]),...r1,"cmdk-separator":"",role:"separator"})}),Ee$1=reactExports.forwardRef((e1,_g)=>{let{onValueChange:t1,...r1}=e1,n1=e1.value!=null,i1=Z$1(),o1=D(l1=>l1.search),a1=D(l1=>l1.value),u1=G(),s1=reactExports.useMemo(()=>{var l1;let c1=(l1=u1.listInnerRef.current)==null?void 0:l1.querySelector(`${Y}[${M$2}="${encodeURIComponent(a1)}"]`);return c1==null?void 0:c1.getAttribute("id")},[]);return reactExports.useEffect(()=>{e1.value!=null&&i1.setState("search",e1.value)},[e1.value]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.input,{ref:_g,...r1,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u1.listId,"aria-labelledby":u1.labelId,"aria-activedescendant":s1,id:u1.inputId,type:"text",value:n1?e1.value:o1,onChange:l1=>{n1||i1.setState("search",l1.target.value),t1==null||t1(l1.target.value)}})}),Se=reactExports.forwardRef((e1,_g)=>{let{children:t1,label:r1="Suggestions",...n1}=e1,i1=reactExports.useRef(null),o1=reactExports.useRef(null),a1=G();return reactExports.useEffect(()=>{if(o1.current&&i1.current){let u1=o1.current,s1=i1.current,l1,c1=new ResizeObserver(()=>{l1=requestAnimationFrame(()=>{let d1=u1.offsetHeight;s1.style.setProperty("--cmdk-list-height",d1.toFixed(1)+"px")})});return c1.observe(u1),()=>{cancelAnimationFrame(l1),c1.unobserve(u1)}}},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([i1,_g]),...n1,"cmdk-list":"",role:"listbox","aria-label":r1,id:a1.listId},F(e1,u1=>reactExports.createElement("div",{ref:N$1([o1,a1.listInnerRef]),"cmdk-list-sizer":""},u1)))}),Ce=reactExports.forwardRef((e1,_g)=>{let{open:t1,onOpenChange:r1,overlayClassName:n1,contentClassName:i1,container:o1,...a1}=e1;return reactExports.createElement($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,{open:t1,onOpenChange:r1},reactExports.createElement($5d3850c4d0b4e6c7$export$602eac185826482c,{container:o1},reactExports.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{"cmdk-overlay":"",className:n1}),reactExports.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{"aria-label":e1.label,"cmdk-dialog":"",className:i1},reactExports.createElement(me$1,{ref:_g,...a1}))))}),xe$1=reactExports.forwardRef((e1,_g)=>D(t1=>t1.filtered.count===0)?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:_g,...e1,"cmdk-empty":"",role:"presentation"}):null),Pe$1=reactExports.forwardRef((e1,_g)=>{let{progress:t1,children:r1,label:n1="Loading...",...i1}=e1;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:_g,...i1,"cmdk-loading":"",role:"progressbar","aria-valuenow":t1,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n1},F(e1,o1=>reactExports.createElement("div",{"aria-hidden":!0},o1)))}),He=Object.assign(me$1,{List:Se,Item:be$1,Input:Ee$1,Group:he,Separator:ye$2,Dialog:Ce,Empty:xe$1,Loading:Pe$1});function we$2(e1,_g){let t1=e1.nextElementSibling;for(;t1;){if(t1.matches(_g))return t1;t1=t1.nextElementSibling}}function Ie(e1,_g){let t1=e1.previousElementSibling;for(;t1;){if(t1.matches(_g))return t1;t1=t1.previousElementSibling}}function pe(e1){let _g=reactExports.useRef(e1);return T$1(()=>{_g.current=e1}),_g}var T$1=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect;function k(e1){let _g=reactExports.useRef();return _g.current===void 0&&(_g.current=e1()),_g}function N$1(e1){return _g=>{e1.forEach(t1=>{typeof t1=="function"?t1(_g):t1!=null&&(t1.current=_g)})}}function D(e1){let _g=Z$1(),t1=()=>e1(_g.snapshot());return reactExports.useSyncExternalStore(_g.subscribe,t1,t1)}function ve$1(e1,_g,t1,r1=[]){let n1=reactExports.useRef(),i1=G();return T$1(()=>{var o1;let a1=(()=>{var s1;for(let l1 of t1){if(typeof l1=="string")return l1.trim();if(typeof l1=="object"&&"current"in l1)return l1.current?(s1=l1.current.textContent)==null?void 0:s1.trim():n1.current}})(),u1=r1.map(s1=>s1.trim());i1.value(e1,a1,u1),(o1=_g.current)==null||o1.setAttribute(M$2,a1),n1.current=a1}),n1}var Me$1=()=>{let[e1,_g]=reactExports.useState(),t1=k(()=>new Map);return T$1(()=>{t1.current.forEach(r1=>r1()),t1.current=new Map},[e1]),(r1,n1)=>{t1.current.set(r1,n1),_g({})}};function Te(e1){let _g=e1.type;return typeof _g=="function"?_g(e1.props):"render"in _g?_g.render(e1.props):e1}function F({asChild:e1,children:_g},t1){return e1&&reactExports.isValidElement(_g)?reactExports.cloneElement(Te(_g),{ref:_g.ref},t1(_g.props.children)):t1(_g)}var De$2={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Command=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(He,{ref:t1,className:cn$1("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e1),..._g}));Command.displayName=He.displayName;const CommandInput=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[jsxRuntimeExports.jsx(Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),jsxRuntimeExports.jsx(He.Input,{ref:t1,className:cn$1("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e1),..._g})]}));CommandInput.displayName=He.Input.displayName;const CommandList=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(He.List,{ref:t1,className:cn$1("max-h-[300px] overflow-y-auto overflow-x-hidden",e1),..._g}));CommandList.displayName=He.List.displayName;const CommandEmpty=reactExports.forwardRef((e1,_g)=>jsxRuntimeExports.jsx(He.Empty,{ref:_g,className:"py-6 text-center text-sm",...e1}));CommandEmpty.displayName=He.Empty.displayName;const CommandGroup=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(He.Group,{ref:t1,className:cn$1("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e1),..._g}));CommandGroup.displayName=He.Group.displayName;const CommandSeparator=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(He.Separator,{ref:t1,className:cn$1("-mx-1 h-px bg-border",e1),..._g}));CommandSeparator.displayName=He.Separator.displayName;const CommandItem=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(He.Item,{ref:t1,className:cn$1("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",e1),..._g}));CommandItem.displayName=He.Item.displayName;var POPOVER_NAME="Popover",[createPopoverContext,createPopoverScope]=createContextScope(POPOVER_NAME,[createPopperScope]),usePopperScope$1=createPopperScope(),[PopoverProvider,usePopoverContext]=createPopoverContext(POPOVER_NAME),Popover$1=e1=>{const{__scopePopover:_g,children:t1,open:r1,defaultOpen:n1,onOpenChange:i1,modal:o1=!1}=e1,a1=usePopperScope$1(_g),u1=reactExports.useRef(null),[s1,l1]=reactExports.useState(!1),[c1=!1,d1]=useControllableState({prop:r1,defaultProp:n1,onChange:i1});return jsxRuntimeExports.jsx(Root2$4,{...a1,children:jsxRuntimeExports.jsx(PopoverProvider,{scope:_g,contentId:useId(),triggerRef:u1,open:c1,onOpenChange:d1,onOpenToggle:reactExports.useCallback(()=>d1(h1=>!h1),[d1]),hasCustomAnchor:s1,onCustomAnchorAdd:reactExports.useCallback(()=>l1(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>l1(!1),[]),modal:o1,children:t1})})};Popover$1.displayName=POPOVER_NAME;var ANCHOR_NAME$1="PopoverAnchor",PopoverAnchor=reactExports.forwardRef((e1,_g)=>{const{__scopePopover:t1,...r1}=e1,n1=usePopoverContext(ANCHOR_NAME$1,t1),i1=usePopperScope$1(t1),{onCustomAnchorAdd:o1,onCustomAnchorRemove:a1}=n1;return reactExports.useEffect(()=>(o1(),()=>a1()),[o1,a1]),jsxRuntimeExports.jsx(Anchor,{...i1,...r1,ref:_g})});PopoverAnchor.displayName=ANCHOR_NAME$1;var TRIGGER_NAME$1="PopoverTrigger",PopoverTrigger$1=reactExports.forwardRef((e1,_g)=>{const{__scopePopover:t1,...r1}=e1,n1=usePopoverContext(TRIGGER_NAME$1,t1),i1=usePopperScope$1(t1),o1=useComposedRefs(_g,n1.triggerRef),a1=jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n1.open,"aria-controls":n1.contentId,"data-state":getState(n1.open),...r1,ref:o1,onClick:composeEventHandlers(e1.onClick,n1.onOpenToggle)});return n1.hasCustomAnchor?a1:jsxRuntimeExports.jsx(Anchor,{asChild:!0,...i1,children:a1})});PopoverTrigger$1.displayName=TRIGGER_NAME$1;var PORTAL_NAME$2="PopoverPortal",[PortalProvider$1,usePortalContext$1]=createPopoverContext(PORTAL_NAME$2,{forceMount:void 0}),PopoverPortal=e1=>{const{__scopePopover:_g,forceMount:t1,children:r1,container:n1}=e1,i1=usePopoverContext(PORTAL_NAME$2,_g);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:_g,forceMount:t1,children:jsxRuntimeExports.jsx(Presence,{present:t1||i1.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:n1,children:r1})})})};PopoverPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$2="PopoverContent",PopoverContent$1=reactExports.forwardRef((e1,_g)=>{const t1=usePortalContext$1(CONTENT_NAME$2,e1.__scopePopover),{forceMount:r1=t1.forceMount,...n1}=e1,i1=usePopoverContext(CONTENT_NAME$2,e1.__scopePopover);return jsxRuntimeExports.jsx(Presence,{present:r1||i1.open,children:i1.modal?jsxRuntimeExports.jsx(PopoverContentModal,{...n1,ref:_g}):jsxRuntimeExports.jsx(PopoverContentNonModal,{...n1,ref:_g})})});PopoverContent$1.displayName=CONTENT_NAME$2;var PopoverContentModal=reactExports.forwardRef((e1,_g)=>{const t1=usePopoverContext(CONTENT_NAME$2,e1.__scopePopover),r1=reactExports.useRef(null),n1=useComposedRefs(_g,r1),i1=reactExports.useRef(!1);return reactExports.useEffect(()=>{const o1=r1.current;if(o1)return hideOthers(o1)},[]),jsxRuntimeExports.jsx(ReactRemoveScroll$1,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(PopoverContentImpl,{...e1,ref:n1,trapFocus:t1.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(e1.onCloseAutoFocus,o1=>{var a1;o1.preventDefault(),i1.current||(a1=t1.triggerRef.current)==null||a1.focus()}),onPointerDownOutside:composeEventHandlers(e1.onPointerDownOutside,o1=>{const a1=o1.detail.originalEvent,u1=a1.button===0&&a1.ctrlKey===!0,s1=a1.button===2||u1;i1.current=s1},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers(e1.onFocusOutside,o1=>o1.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=reactExports.forwardRef((e1,_g)=>{const t1=usePopoverContext(CONTENT_NAME$2,e1.__scopePopover),r1=reactExports.useRef(!1),n1=reactExports.useRef(!1);return jsxRuntimeExports.jsx(PopoverContentImpl,{...e1,ref:_g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i1=>{var o1,a1;(o1=e1.onCloseAutoFocus)==null||o1.call(e1,i1),i1.defaultPrevented||(r1.current||(a1=t1.triggerRef.current)==null||a1.focus(),i1.preventDefault()),r1.current=!1,n1.current=!1},onInteractOutside:i1=>{var u1,s1;(u1=e1.onInteractOutside)==null||u1.call(e1,i1),i1.defaultPrevented||(r1.current=!0,i1.detail.originalEvent.type==="pointerdown"&&(n1.current=!0));const o1=i1.target;((s1=t1.triggerRef.current)==null?void 0:s1.contains(o1))&&i1.preventDefault(),i1.detail.originalEvent.type==="focusin"&&n1.current&&i1.preventDefault()}})}),PopoverContentImpl=reactExports.forwardRef((e1,_g)=>{const{__scopePopover:t1,trapFocus:r1,onOpenAutoFocus:n1,onCloseAutoFocus:i1,disableOutsidePointerEvents:o1,onEscapeKeyDown:a1,onPointerDownOutside:u1,onFocusOutside:s1,onInteractOutside:l1,...c1}=e1,d1=usePopoverContext(CONTENT_NAME$2,t1),h1=usePopperScope$1(t1);return useFocusGuards(),jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:r1,onMountAutoFocus:n1,onUnmountAutoFocus:i1,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:o1,onInteractOutside:l1,onEscapeKeyDown:a1,onPointerDownOutside:u1,onFocusOutside:s1,onDismiss:()=>d1.onOpenChange(!1),children:jsxRuntimeExports.jsx(Content$2,{"data-state":getState(d1.open),role:"dialog",id:d1.contentId,...h1,...c1,ref:_g,style:{...c1.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CLOSE_NAME="PopoverClose",PopoverClose=reactExports.forwardRef((e1,_g)=>{const{__scopePopover:t1,...r1}=e1,n1=usePopoverContext(CLOSE_NAME,t1);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...r1,ref:_g,onClick:composeEventHandlers(e1.onClick,()=>n1.onOpenChange(!1))})});PopoverClose.displayName=CLOSE_NAME;var ARROW_NAME$2="PopoverArrow",PopoverArrow=reactExports.forwardRef((e1,_g)=>{const{__scopePopover:t1,...r1}=e1,n1=usePopperScope$1(t1);return jsxRuntimeExports.jsx(Arrow,{...n1,...r1,ref:_g})});PopoverArrow.displayName=ARROW_NAME$2;function getState(e1){return e1?"open":"closed"}var Root2=Popover$1,Trigger$1=PopoverTrigger$1,Portal$1=PopoverPortal,Content2$2=PopoverContent$1;const Popover=Root2,PopoverTrigger=Trigger$1,PopoverContent=reactExports.forwardRef(({className:e1,align:_g="center",sideOffset:t1=4,...r1},n1)=>jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsx(Content2$2,{ref:n1,align:_g,sideOffset:t1,className:cn$1("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e1),...r1})}));PopoverContent.displayName=Content2$2.displayName;const languages=[{label:"English",value:"en"},{label:"Español",value:"es"}];function LanguageSwitcher(){var o1;const[e1,_g]=useLanguageStore(a1=>[a1.language,a1.setLanguage]),{i18n:{changeLanguage:t1}}=useTranslation(),[r1,n1]=React.useState(!1),i1=a1=>{_g(a1),t1(a1),n1(!1)};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Popover,{open:r1,onOpenChange:n1,children:[jsxRuntimeExports.jsx(PopoverTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",role:"combobox",className:"w-[150px] justify-between",children:[e1?(o1=languages.find(a1=>a1.value===e1))==null?void 0:o1.label:"Select language",jsxRuntimeExports.jsx(ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),jsxRuntimeExports.jsx(PopoverContent,{className:"w-[150px] p-2",children:jsxRuntimeExports.jsx(Command,{children:jsxRuntimeExports.jsx(CommandList,{children:jsxRuntimeExports.jsx(CommandGroup,{heading:"Suggestions",children:languages.map(a1=>jsxRuntimeExports.jsxs(CommandItem,{onSelect:()=>i1(a1.value),children:[jsxRuntimeExports.jsx(Check,{className:`mr-2 h-4 w-4 ${a1.value===e1?"opacity-100":"opacity-0"}`}),a1.label]},a1.value))})})})})]})})}function useFirstMountState(){var e1=reactExports.useRef(!0);return e1.current?(e1.current=!1,!0):e1.current}var useUpdateEffect=function(e1,_g){var t1=useFirstMountState();reactExports.useEffect(function(){if(!t1)return e1()},_g)},noop$1=function(){};function on$1(e1){for(var _g=[],t1=1;t1<arguments.length;t1++)_g[t1-1]=arguments[t1];e1&&e1.addEventListener&&e1.addEventListener.apply(e1,_g)}function off(e1){for(var _g=[],t1=1;t1<arguments.length;t1++)_g[t1-1]=arguments[t1];e1&&e1.removeEventListener&&e1.removeEventListener.apply(e1,_g)}var isBrowser=typeof window<"u",toggleReducer=function(e1,_g){return typeof _g=="boolean"?_g:!e1},useToggle=function(e1){return reactExports.useReducer(toggleReducer,e1)},defaultEvents=["mousedown","touchstart"],useClickAway=function(e1,_g,t1){t1===void 0&&(t1=defaultEvents);var r1=reactExports.useRef(_g);reactExports.useEffect(function(){r1.current=_g},[_g]),reactExports.useEffect(function(){for(var n1=function(u1){var s1=e1.current;s1&&!s1.contains(u1.target)&&r1.current(u1)},i1=0,o1=t1;i1<o1.length;i1++){var a1=o1[i1];on$1(document,a1,n1)}return function(){for(var u1=0,s1=t1;u1<s1.length;u1++){var l1=s1[u1];off(document,l1,n1)}}},[t1,e1])},useEffectOnce=function(e1){reactExports.useEffect(e1,[])},defaultTarget=isBrowser?window:null,isListenerType1=function(e1){return!!e1.addEventListener},isListenerType2=function(e1){return!!e1.on},useEvent=function(e1,_g,t1,r1){t1===void 0&&(t1=defaultTarget),reactExports.useEffect(function(){if(_g&&t1)return isListenerType1(t1)?on$1(t1,e1,_g,r1):isListenerType2(t1)&&t1.on(e1,_g,r1),function(){isListenerType1(t1)?off(t1,e1,_g,r1):isListenerType2(t1)&&t1.off(e1,_g,r1)}},[e1,_g,t1,JSON.stringify(r1)])},createKeyPredicate=function(e1){return typeof e1=="function"?e1:typeof e1=="string"?function(_g){return _g.key===e1}:e1?function(){return!0}:function(){return!1}},useKey=function(e1,_g,t1,r1){_g===void 0&&(_g=noop$1),t1===void 0&&(t1={}),r1===void 0&&(r1=[e1]);var n1=t1.event,i1=n1===void 0?"keydown":n1,o1=t1.target,a1=t1.options,u1=reactExports.useMemo(function(){var s1=createKeyPredicate(e1),l1=function(c1){if(s1(c1))return _g(c1)};return l1},r1);useEvent(i1,u1,o1,a1)},useKeyPress=function(e1){var _g=reactExports.useState([!1,null]),t1=_g[0],r1=_g[1];return useKey(e1,function(n1){return r1([!0,n1])},{event:"keydown"},[t1]),useKey(e1,function(n1){return r1([!1,n1])},{event:"keyup"},[t1]),t1},useKeyPressEvent=function(e1,_g,t1,r1){r1===void 0&&(r1=useKeyPress);var n1=r1(e1),i1=n1[0],o1=n1[1];useUpdateEffect(function(){!i1&&t1?t1(o1):i1&&_g&&_g(o1)},[i1])},useUnmount=function(e1){var _g=reactExports.useRef(e1);_g.current=e1,useEffectOnce(function(){return function(){return _g.current()}})},useRafState=function(e1){var _g=reactExports.useRef(0),t1=reactExports.useState(e1),r1=t1[0],n1=t1[1],i1=reactExports.useCallback(function(o1){cancelAnimationFrame(_g.current),_g.current=requestAnimationFrame(function(){n1(o1)})},[]);return useUnmount(function(){cancelAnimationFrame(_g.current)}),[r1,i1]},useWindowSize=function(e1,_g){e1===void 0&&(e1=1/0),_g===void 0&&(_g=1/0);var t1=useRafState({width:isBrowser?window.innerWidth:e1,height:isBrowser?window.innerHeight:_g}),r1=t1[0],n1=t1[1];return reactExports.useEffect(function(){if(isBrowser){var i1=function(){n1({width:window.innerWidth,height:window.innerHeight})};return on$1(window,"resize",i1),function(){off(window,"resize",i1)}}},[]),r1};const Textarea=reactExports.forwardRef(({className:e1,..._g},t1)=>{const r1=useStore(o1=>o1.updateAppState),n1=()=>{r1({disableShortCuts:!0})},i1=()=>{r1({disableShortCuts:!1})};return jsxRuntimeExports.jsx("textarea",{className:cn$1("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50","overflow-auto",e1),tabIndex:-1,ref:t1,onFocus:n1,onBlur:i1,..._g})});Textarea.displayName="Textarea";const PromptInput=()=>{const[e1,_g,t1,r1,n1]=useStore(f1=>[f1.getIsProcessing(),f1.updateSettings,f1.runInpainting,f1.showPrevMask,f1.hidePrevMask]),i1=useStore(f1=>f1.settings.prompt),[o1,a1]=useToggle(!1),u1=reactExports.useRef(null);useClickAway(u1,()=>{u1!=null&&u1.current&&u1.current.blur()});const s1=f1=>{f1.preventDefault(),f1.stopPropagation();const g1=f1.target;_g({prompt:g1.value})},l1=()=>{},c1=f1=>{f1.key==="Enter"&&f1.ctrlKey&&i1.length},d1=()=>{r1()},h1=()=>{n1()};return jsxRuntimeExports.jsx("div",{className:"flex gap-4 relative w-full justify-center h-full",children:jsxRuntimeExports.jsxs("div",{className:"absolute flex gap-4",children:[jsxRuntimeExports.jsx(Textarea,{ref:u1,placeholder:"I want to repaint of...",className:cn$1(o1?"focus:overflow-y-auto":"overflow-y-hidden","min-h-[32px] h-[32px] overflow-x-hidden focus:h-[120px] overflow-y-hidden transition-[height] w-[500px] py-1 px-3 bg-background resize-none"),style:{scrollbarGutter:"stable"},value:i1,onInput:s1,onKeyUp:c1,onTransitionEnd:a1}),jsxRuntimeExports.jsx(Button,{size:"sm",onClick:l1,disabled:e1,onMouseEnter:d1,onMouseLeave:h1,children:"Paint"})]})})},Header=()=>{const[e1,_g,t1,r1,n1,i1,o1,a1,u1,s1,l1,c1,d1,h1]=useStore(f1=>[f1.file,f1.customMask,f1.isInpainting,f1.serverConfig,f1.runMannually(),f1.settings.enableUploadMask,f1.settings.model,f1.setFile,f1.setCustomFile,f1.runInpainting,f1.showPrevMask,f1.hidePrevMask,f1.imageHeight,f1.imageWidth]);return jsxRuntimeExports.jsxs("header",{className:"h-[60px] px-6 py-4 absolute top-[0] flex justify-between items-center w-full z-20 border-b backdrop-filter backdrop-blur-md bg-background/70",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:jsxRuntimeExports.jsx(ImageUploadButton,{disabled:t1,tooltip:"Upload image",onFileUpload:f1=>{a1(f1)},children:jsxRuntimeExports.jsx(Image$1,{})})}),jsxRuntimeExports.jsx(PromptInput,{}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(LanguageSwitcher,{}),jsxRuntimeExports.jsx(Shortcuts,{}),jsxRuntimeExports.jsx(SettingsDialog,{})]})]})};var SELECTION_KEYS=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS,"ArrowRight"],rtl:[...SELECTION_KEYS,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME$1="Menu",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(MENU_NAME$1),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME$1,[createCollectionScope$2,createPopperScope,createRovingFocusGroupScope]),usePopperScope=createPopperScope(),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME$1),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME$1),Menu$1=e1=>{const{__scopeMenu:_g,open:t1=!1,children:r1,dir:n1,onOpenChange:i1,modal:o1=!0}=e1,a1=usePopperScope(_g),[u1,s1]=reactExports.useState(null),l1=reactExports.useRef(!1),c1=useCallbackRef$1(i1),d1=useDirection(n1);return reactExports.useEffect(()=>{const h1=()=>{l1.current=!0,document.addEventListener("pointerdown",f1,{capture:!0,once:!0}),document.addEventListener("pointermove",f1,{capture:!0,once:!0})},f1=()=>l1.current=!1;return document.addEventListener("keydown",h1,{capture:!0}),()=>{document.removeEventListener("keydown",h1,{capture:!0}),document.removeEventListener("pointerdown",f1,{capture:!0}),document.removeEventListener("pointermove",f1,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$4,{...a1,children:jsxRuntimeExports.jsx(MenuProvider,{scope:_g,open:t1,onOpenChange:c1,content:u1,onContentChange:s1,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:_g,onClose:reactExports.useCallback(()=>c1(!1),[c1]),isUsingKeyboardRef:l1,dir:d1,modal:o1,children:r1})})})};Menu$1.displayName=MENU_NAME$1;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,...r1}=e1,n1=usePopperScope(t1);return jsxRuntimeExports.jsx(Anchor,{...n1,...r1,ref:_g})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$1="MenuPortal",[PortalProvider,usePortalContext]=createMenuContext(PORTAL_NAME$1,{forceMount:void 0}),MenuPortal=e1=>{const{__scopeMenu:_g,forceMount:t1,children:r1,container:n1}=e1,i1=useMenuContext(PORTAL_NAME$1,_g);return jsxRuntimeExports.jsx(PortalProvider,{scope:_g,forceMount:t1,children:jsxRuntimeExports.jsx(Presence,{present:t1||i1.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:n1,children:r1})})})};MenuPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$1),MenuContent=reactExports.forwardRef((e1,_g)=>{const t1=usePortalContext(CONTENT_NAME$1,e1.__scopeMenu),{forceMount:r1=t1.forceMount,...n1}=e1,i1=useMenuContext(CONTENT_NAME$1,e1.__scopeMenu),o1=useMenuRootContext(CONTENT_NAME$1,e1.__scopeMenu);return jsxRuntimeExports.jsx(Collection$2.Provider,{scope:e1.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:r1||i1.open,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:e1.__scopeMenu,children:o1.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...n1,ref:_g}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...n1,ref:_g})})})})}),MenuRootContentModal=reactExports.forwardRef((e1,_g)=>{const t1=useMenuContext(CONTENT_NAME$1,e1.__scopeMenu),r1=reactExports.useRef(null),n1=useComposedRefs(_g,r1);return reactExports.useEffect(()=>{const i1=r1.current;if(i1)return hideOthers(i1)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...e1,ref:n1,trapFocus:t1.open,disableOutsidePointerEvents:t1.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(e1.onFocusOutside,i1=>i1.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t1.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((e1,_g)=>{const t1=useMenuContext(CONTENT_NAME$1,e1.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...e1,ref:_g,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t1.onOpenChange(!1)})}),MenuContentImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,loop:r1=!1,trapFocus:n1,onOpenAutoFocus:i1,onCloseAutoFocus:o1,disableOutsidePointerEvents:a1,onEntryFocus:u1,onEscapeKeyDown:s1,onPointerDownOutside:l1,onFocusOutside:c1,onInteractOutside:d1,onDismiss:h1,disableOutsideScroll:f1,...g1}=e1,v1=useMenuContext(CONTENT_NAME$1,t1),$1=useMenuRootContext(CONTENT_NAME$1,t1),y1=usePopperScope(t1),_1=useRovingFocusGroupScope$1(t1),E1=useCollection$2(t1),[T1,P1]=reactExports.useState(null),k1=reactExports.useRef(null),N1=useComposedRefs(_g,k1,v1.onContentChange),W1=reactExports.useRef(0),H1=reactExports.useRef(""),ty=reactExports.useRef(0),ey=reactExports.useRef(null),ly=reactExports.useRef("right"),oy=reactExports.useRef(0),Q1=f1?ReactRemoveScroll$1:reactExports.Fragment,U1=f1?{as:Slot,allowPinchZoom:!0}:void 0,V1=J1=>{var Ay,Uy;const hy=H1.current+J1,G1=E1().filter(Gy=>!Gy.disabled),Y1=document.activeElement,yy=(Ay=G1.find(Gy=>Gy.ref.current===Y1))==null?void 0:Ay.textValue,Oy=G1.map(Gy=>Gy.textValue),Ey=getNextMatch(Oy,hy,yy),jy=(Uy=G1.find(Gy=>Gy.textValue===Ey))==null?void 0:Uy.ref.current;(function Gy(Wy){H1.current=Wy,window.clearTimeout(W1.current),Wy!==""&&(W1.current=window.setTimeout(()=>Gy(""),1e3))})(hy),jy&&setTimeout(()=>jy.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(W1.current),[]),useFocusGuards();const K1=reactExports.useCallback(J1=>{var G1,Y1;return ly.current===((G1=ey.current)==null?void 0:G1.side)&&isPointerInGraceArea(J1,(Y1=ey.current)==null?void 0:Y1.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:t1,searchRef:H1,onItemEnter:reactExports.useCallback(J1=>{K1(J1)&&J1.preventDefault()},[K1]),onItemLeave:reactExports.useCallback(J1=>{var hy;K1(J1)||((hy=k1.current)==null||hy.focus(),P1(null))},[K1]),onTriggerLeave:reactExports.useCallback(J1=>{K1(J1)&&J1.preventDefault()},[K1]),pointerGraceTimerRef:ty,onPointerGraceIntentChange:reactExports.useCallback(J1=>{ey.current=J1},[]),children:jsxRuntimeExports.jsx(Q1,{...U1,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:n1,onMountAutoFocus:composeEventHandlers(i1,J1=>{var hy;J1.preventDefault(),(hy=k1.current)==null||hy.focus({preventScroll:!0})}),onUnmountAutoFocus:o1,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:a1,onEscapeKeyDown:s1,onPointerDownOutside:l1,onFocusOutside:c1,onInteractOutside:d1,onDismiss:h1,children:jsxRuntimeExports.jsx(Root$3,{asChild:!0,..._1,dir:$1.dir,orientation:"vertical",loop:r1,currentTabStopId:T1,onCurrentTabStopIdChange:P1,onEntryFocus:composeEventHandlers(u1,J1=>{$1.isUsingKeyboardRef.current||J1.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content$2,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(v1.open),"data-radix-menu-content":"",dir:$1.dir,...y1,...g1,ref:N1,style:{outline:"none",...g1.style},onKeyDown:composeEventHandlers(g1.onKeyDown,J1=>{const G1=J1.target.closest("[data-radix-menu-content]")===J1.currentTarget,Y1=J1.ctrlKey||J1.altKey||J1.metaKey,yy=J1.key.length===1;G1&&(J1.key==="Tab"&&J1.preventDefault(),!Y1&&yy&&V1(J1.key));const Oy=k1.current;if(J1.target!==Oy||!FIRST_LAST_KEYS.includes(J1.key))return;J1.preventDefault();const jy=E1().filter(Ay=>!Ay.disabled).map(Ay=>Ay.ref.current);LAST_KEYS.includes(J1.key)&&jy.reverse(),focusFirst(jy)}),onBlur:composeEventHandlers(e1.onBlur,J1=>{J1.currentTarget.contains(J1.target)||(window.clearTimeout(W1.current),H1.current="")}),onPointerMove:composeEventHandlers(e1.onPointerMove,whenMouse(J1=>{const hy=J1.target,G1=oy.current!==J1.clientX;if(J1.currentTarget.contains(hy)&&G1){const Y1=J1.clientX>oy.current?"right":"left";ly.current=Y1,oy.current=J1.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$1;var GROUP_NAME$1="MenuGroup",MenuGroup=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,...r1}=e1;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...r1,ref:_g})});MenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="MenuLabel",MenuLabel=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,...r1}=e1;return jsxRuntimeExports.jsx(Primitive.div,{...r1,ref:_g})});MenuLabel.displayName=LABEL_NAME$1;var ITEM_NAME$1="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((e1,_g)=>{const{disabled:t1=!1,onSelect:r1,...n1}=e1,i1=reactExports.useRef(null),o1=useMenuRootContext(ITEM_NAME$1,e1.__scopeMenu),a1=useMenuContentContext(ITEM_NAME$1,e1.__scopeMenu),u1=useComposedRefs(_g,i1),s1=reactExports.useRef(!1),l1=()=>{const c1=i1.current;if(!t1&&c1){const d1=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});c1.addEventListener(ITEM_SELECT,h1=>r1==null?void 0:r1(h1),{once:!0}),dispatchDiscreteCustomEvent(c1,d1),d1.defaultPrevented?s1.current=!1:o1.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...n1,ref:u1,disabled:t1,onClick:composeEventHandlers(e1.onClick,l1),onPointerDown:c1=>{var d1;(d1=e1.onPointerDown)==null||d1.call(e1,c1),s1.current=!0},onPointerUp:composeEventHandlers(e1.onPointerUp,c1=>{var d1;s1.current||(d1=c1.currentTarget)==null||d1.click()}),onKeyDown:composeEventHandlers(e1.onKeyDown,c1=>{const d1=a1.searchRef.current!=="";t1||d1&&c1.key===" "||SELECTION_KEYS.includes(c1.key)&&(c1.currentTarget.click(),c1.preventDefault())})})});MenuItem.displayName=ITEM_NAME$1;var MenuItemImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,disabled:r1=!1,textValue:n1,...i1}=e1,o1=useMenuContentContext(ITEM_NAME$1,t1),a1=useRovingFocusGroupScope$1(t1),u1=reactExports.useRef(null),s1=useComposedRefs(_g,u1),[l1,c1]=reactExports.useState(!1),[d1,h1]=reactExports.useState("");return reactExports.useEffect(()=>{const f1=u1.current;f1&&h1((f1.textContent??"").trim())},[i1.children]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:t1,disabled:r1,textValue:n1??d1,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,...a1,focusable:!r1,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":l1?"":void 0,"aria-disabled":r1||void 0,"data-disabled":r1?"":void 0,...i1,ref:s1,onPointerMove:composeEventHandlers(e1.onPointerMove,whenMouse(f1=>{r1?o1.onItemLeave(f1):(o1.onItemEnter(f1),f1.defaultPrevented||f1.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(e1.onPointerLeave,whenMouse(f1=>o1.onItemLeave(f1))),onFocus:composeEventHandlers(e1.onFocus,()=>c1(!0)),onBlur:composeEventHandlers(e1.onBlur,()=>c1(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((e1,_g)=>{const{checked:t1=!1,onCheckedChange:r1,...n1}=e1;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:e1.__scopeMenu,checked:t1,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(t1)?"mixed":t1,...n1,ref:_g,"data-state":getCheckedState(t1),onSelect:composeEventHandlers(n1.onSelect,()=>r1==null?void 0:r1(isIndeterminate(t1)?!0:!t1),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((e1,_g)=>{const{value:t1,onValueChange:r1,...n1}=e1,i1=useCallbackRef$1(r1);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:e1.__scopeMenu,value:t1,onValueChange:i1,children:jsxRuntimeExports.jsx(MenuGroup,{...n1,ref:_g})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((e1,_g)=>{const{value:t1,...r1}=e1,n1=useRadioGroupContext(RADIO_ITEM_NAME$1,e1.__scopeMenu),i1=t1===n1.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:e1.__scopeMenu,checked:i1,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":i1,...r1,ref:_g,"data-state":getCheckedState(i1),onSelect:composeEventHandlers(r1.onSelect,()=>{var o1;return(o1=n1.onValueChange)==null?void 0:o1.call(n1,t1)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,forceMount:r1,...n1}=e1,i1=useItemIndicatorContext(ITEM_INDICATOR_NAME,t1);return jsxRuntimeExports.jsx(Presence,{present:r1||isIndeterminate(i1.checked)||i1.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...n1,ref:_g,"data-state":getCheckedState(i1.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME;var SEPARATOR_NAME$1="MenuSeparator",MenuSeparator=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,...r1}=e1;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...r1,ref:_g})});MenuSeparator.displayName=SEPARATOR_NAME$1;var ARROW_NAME$1="MenuArrow",MenuArrow=reactExports.forwardRef((e1,_g)=>{const{__scopeMenu:t1,...r1}=e1,n1=usePopperScope(t1);return jsxRuntimeExports.jsx(Arrow,{...n1,...r1,ref:_g})});MenuArrow.displayName=ARROW_NAME$1;var SUB_NAME$1="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME$1),MenuSub=e1=>{const{__scopeMenu:_g,children:t1,open:r1=!1,onOpenChange:n1}=e1,i1=useMenuContext(SUB_NAME$1,_g),o1=usePopperScope(_g),[a1,u1]=reactExports.useState(null),[s1,l1]=reactExports.useState(null),c1=useCallbackRef$1(n1);return reactExports.useEffect(()=>(i1.open===!1&&c1(!1),()=>c1(!1)),[i1.open,c1]),jsxRuntimeExports.jsx(Root2$4,{...o1,children:jsxRuntimeExports.jsx(MenuProvider,{scope:_g,open:r1,onOpenChange:c1,content:s1,onContentChange:l1,children:jsxRuntimeExports.jsx(MenuSubProvider,{scope:_g,contentId:useId(),triggerId:useId(),trigger:a1,onTriggerChange:u1,children:t1})})})};MenuSub.displayName=SUB_NAME$1;var SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((e1,_g)=>{const t1=useMenuContext(SUB_TRIGGER_NAME$1,e1.__scopeMenu),r1=useMenuRootContext(SUB_TRIGGER_NAME$1,e1.__scopeMenu),n1=useMenuSubContext(SUB_TRIGGER_NAME$1,e1.__scopeMenu),i1=useMenuContentContext(SUB_TRIGGER_NAME$1,e1.__scopeMenu),o1=reactExports.useRef(null),{pointerGraceTimerRef:a1,onPointerGraceIntentChange:u1}=i1,s1={__scopeMenu:e1.__scopeMenu},l1=reactExports.useCallback(()=>{o1.current&&window.clearTimeout(o1.current),o1.current=null},[]);return reactExports.useEffect(()=>l1,[l1]),reactExports.useEffect(()=>{const c1=a1.current;return()=>{window.clearTimeout(c1),u1(null)}},[a1,u1]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...s1,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:n1.triggerId,"aria-haspopup":"menu","aria-expanded":t1.open,"aria-controls":n1.contentId,"data-state":getOpenState(t1.open),...e1,ref:composeRefs(_g,n1.onTriggerChange),onClick:c1=>{var d1;(d1=e1.onClick)==null||d1.call(e1,c1),!(e1.disabled||c1.defaultPrevented)&&(c1.currentTarget.focus(),t1.open||t1.onOpenChange(!0))},onPointerMove:composeEventHandlers(e1.onPointerMove,whenMouse(c1=>{i1.onItemEnter(c1),!c1.defaultPrevented&&!e1.disabled&&!t1.open&&!o1.current&&(i1.onPointerGraceIntentChange(null),o1.current=window.setTimeout(()=>{t1.onOpenChange(!0),l1()},100))})),onPointerLeave:composeEventHandlers(e1.onPointerLeave,whenMouse(c1=>{var h1,f1;l1();const d1=(h1=t1.content)==null?void 0:h1.getBoundingClientRect();if(d1){const g1=(f1=t1.content)==null?void 0:f1.dataset.side,v1=g1==="right",$1=v1?-5:5,y1=d1[v1?"left":"right"],_1=d1[v1?"right":"left"];i1.onPointerGraceIntentChange({area:[{x:c1.clientX+$1,y:c1.clientY},{x:y1,y:d1.top},{x:_1,y:d1.top},{x:_1,y:d1.bottom},{x:y1,y:d1.bottom}],side:g1}),window.clearTimeout(a1.current),a1.current=window.setTimeout(()=>i1.onPointerGraceIntentChange(null),300)}else{if(i1.onTriggerLeave(c1),c1.defaultPrevented)return;i1.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(e1.onKeyDown,c1=>{var h1;const d1=i1.searchRef.current!=="";e1.disabled||d1&&c1.key===" "||SUB_OPEN_KEYS[r1.dir].includes(c1.key)&&(t1.onOpenChange(!0),(h1=t1.content)==null||h1.focus(),c1.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((e1,_g)=>{const t1=usePortalContext(CONTENT_NAME$1,e1.__scopeMenu),{forceMount:r1=t1.forceMount,...n1}=e1,i1=useMenuContext(CONTENT_NAME$1,e1.__scopeMenu),o1=useMenuRootContext(CONTENT_NAME$1,e1.__scopeMenu),a1=useMenuSubContext(SUB_CONTENT_NAME$1,e1.__scopeMenu),u1=reactExports.useRef(null),s1=useComposedRefs(_g,u1);return jsxRuntimeExports.jsx(Collection$2.Provider,{scope:e1.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:r1||i1.open,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:e1.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:a1.contentId,"aria-labelledby":a1.triggerId,...n1,ref:s1,align:"start",side:o1.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:l1=>{var c1;o1.isUsingKeyboardRef.current&&((c1=u1.current)==null||c1.focus()),l1.preventDefault()},onCloseAutoFocus:l1=>l1.preventDefault(),onFocusOutside:composeEventHandlers(e1.onFocusOutside,l1=>{l1.target!==a1.trigger&&i1.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(e1.onEscapeKeyDown,l1=>{o1.onClose(),l1.preventDefault()}),onKeyDown:composeEventHandlers(e1.onKeyDown,l1=>{var h1;const c1=l1.currentTarget.contains(l1.target),d1=SUB_CLOSE_KEYS[o1.dir].includes(l1.key);c1&&d1&&(i1.onOpenChange(!1),(h1=a1.trigger)==null||h1.focus(),l1.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(e1){return e1?"open":"closed"}function isIndeterminate(e1){return e1==="indeterminate"}function getCheckedState(e1){return isIndeterminate(e1)?"indeterminate":e1?"checked":"unchecked"}function focusFirst(e1){const _g=document.activeElement;for(const t1 of e1)if(t1===_g||(t1.focus(),document.activeElement!==_g))return}function wrapArray$1(e1,_g){return e1.map((t1,r1)=>e1[(_g+r1)%e1.length])}function getNextMatch(e1,_g,t1){const n1=_g.length>1&&Array.from(_g).every(s1=>s1===_g[0])?_g[0]:_g,i1=t1?e1.indexOf(t1):-1;let o1=wrapArray$1(e1,Math.max(i1,0));n1.length===1&&(o1=o1.filter(s1=>s1!==t1));const u1=o1.find(s1=>s1.toLowerCase().startsWith(n1.toLowerCase()));return u1!==t1?u1:void 0}function isPointInPolygon(e1,_g){const{x:t1,y:r1}=e1;let n1=!1;for(let i1=0,o1=_g.length-1;i1<_g.length;o1=i1++){const a1=_g[i1].x,u1=_g[i1].y,s1=_g[o1].x,l1=_g[o1].y;u1>r1!=l1>r1&&t1<(s1-a1)*(r1-u1)/(l1-u1)+a1&&(n1=!n1)}return n1}function isPointerInGraceArea(e1,_g){if(!_g)return!1;const t1={x:e1.clientX,y:e1.clientY};return isPointInPolygon(t1,_g)}function whenMouse(e1){return _g=>_g.pointerType==="mouse"?e1(_g):void 0}var Root3$1=Menu$1,Anchor2=MenuAnchor,Portal=MenuPortal,Content2$1=MenuContent,Group=MenuGroup,Label=MenuLabel,Item2=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator=MenuItemIndicator,Separator=MenuSeparator,Arrow2=MenuArrow,Sub=MenuSub,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,MENUBAR_NAME="Menubar",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(MENUBAR_NAME),[createMenubarContext,createMenubarScope]=createContextScope(MENUBAR_NAME,[createCollectionScope$1,createRovingFocusGroupScope]),useMenuScope=createMenuScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenubarContextProvider,useMenubarContext]=createMenubarContext(MENUBAR_NAME),Menubar$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,value:r1,onValueChange:n1,defaultValue:i1,loop:o1=!0,dir:a1,...u1}=e1,s1=useDirection(a1),l1=useRovingFocusGroupScope(t1),[c1="",d1]=useControllableState({prop:r1,onChange:n1,defaultProp:i1}),[h1,f1]=reactExports.useState(null);return jsxRuntimeExports.jsx(MenubarContextProvider,{scope:t1,value:c1,onMenuOpen:reactExports.useCallback(g1=>{d1(g1),f1(g1)},[d1]),onMenuClose:reactExports.useCallback(()=>d1(""),[d1]),onMenuToggle:reactExports.useCallback(g1=>{d1(v1=>v1?"":g1),f1(g1)},[d1]),dir:s1,loop:o1,children:jsxRuntimeExports.jsx(Collection$1.Provider,{scope:t1,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:t1,children:jsxRuntimeExports.jsx(Root$3,{asChild:!0,...l1,orientation:"horizontal",loop:o1,dir:s1,currentTabStopId:h1,onCurrentTabStopIdChange:f1,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menubar",...u1,ref:_g})})})})})});Menubar$2.displayName=MENUBAR_NAME;var MENU_NAME="MenubarMenu",[MenubarMenuProvider,useMenubarMenuContext]=createMenubarContext(MENU_NAME),MenubarMenu$2=e1=>{const{__scopeMenubar:_g,value:t1,...r1}=e1,n1=useId(),i1=t1||n1||"LEGACY_REACT_AUTO_VALUE",o1=useMenubarContext(MENU_NAME,_g),a1=useMenuScope(_g),u1=reactExports.useRef(null),s1=reactExports.useRef(!1),l1=o1.value===i1;return reactExports.useEffect(()=>{l1||(s1.current=!1)},[l1]),jsxRuntimeExports.jsx(MenubarMenuProvider,{scope:_g,value:i1,triggerId:useId(),triggerRef:u1,contentId:useId(),wasKeyboardTriggerOpenRef:s1,children:jsxRuntimeExports.jsx(Root3$1,{...a1,open:l1,onOpenChange:c1=>{c1||o1.onMenuClose()},modal:!1,dir:o1.dir,...r1})})};MenubarMenu$2.displayName=MENU_NAME;var TRIGGER_NAME="MenubarTrigger",MenubarTrigger$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,disabled:r1=!1,...n1}=e1,i1=useRovingFocusGroupScope(t1),o1=useMenuScope(t1),a1=useMenubarContext(TRIGGER_NAME,t1),u1=useMenubarMenuContext(TRIGGER_NAME,t1),s1=reactExports.useRef(null),l1=useComposedRefs(_g,s1,u1.triggerRef),[c1,d1]=reactExports.useState(!1),h1=a1.value===u1.value;return jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:t1,value:u1.value,disabled:r1,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,...i1,focusable:!r1,tabStopId:u1.value,children:jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...o1,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"menuitem",id:u1.triggerId,"aria-haspopup":"menu","aria-expanded":h1,"aria-controls":h1?u1.contentId:void 0,"data-highlighted":c1?"":void 0,"data-state":h1?"open":"closed","data-disabled":r1?"":void 0,disabled:r1,...n1,ref:l1,onPointerDown:composeEventHandlers(e1.onPointerDown,f1=>{!r1&&f1.button===0&&f1.ctrlKey===!1&&(a1.onMenuOpen(u1.value),h1||f1.preventDefault())}),onPointerEnter:composeEventHandlers(e1.onPointerEnter,()=>{var g1;!!a1.value&&!h1&&(a1.onMenuOpen(u1.value),(g1=s1.current)==null||g1.focus())}),onKeyDown:composeEventHandlers(e1.onKeyDown,f1=>{r1||(["Enter"," "].includes(f1.key)&&a1.onMenuToggle(u1.value),f1.key==="ArrowDown"&&a1.onMenuOpen(u1.value),["Enter"," ","ArrowDown"].includes(f1.key)&&(u1.wasKeyboardTriggerOpenRef.current=!0,f1.preventDefault()))}),onFocus:composeEventHandlers(e1.onFocus,()=>d1(!0)),onBlur:composeEventHandlers(e1.onBlur,()=>d1(!1))})})})})});MenubarTrigger$2.displayName=TRIGGER_NAME;var PORTAL_NAME="MenubarPortal",MenubarPortal=e1=>{const{__scopeMenubar:_g,...t1}=e1,r1=useMenuScope(_g);return jsxRuntimeExports.jsx(Portal,{...r1,...t1})};MenubarPortal.displayName=PORTAL_NAME;var CONTENT_NAME="MenubarContent",MenubarContent$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,align:r1="start",...n1}=e1,i1=useMenuScope(t1),o1=useMenubarContext(CONTENT_NAME,t1),a1=useMenubarMenuContext(CONTENT_NAME,t1),u1=useCollection$1(t1),s1=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$1,{id:a1.contentId,"aria-labelledby":a1.triggerId,"data-radix-menubar-content":"",...i1,...n1,ref:_g,align:r1,onCloseAutoFocus:composeEventHandlers(e1.onCloseAutoFocus,l1=>{var d1;!!!o1.value&&!s1.current&&((d1=a1.triggerRef.current)==null||d1.focus()),s1.current=!1,l1.preventDefault()}),onFocusOutside:composeEventHandlers(e1.onFocusOutside,l1=>{const c1=l1.target;u1().some(h1=>{var f1;return(f1=h1.ref.current)==null?void 0:f1.contains(c1)})&&l1.preventDefault()}),onInteractOutside:composeEventHandlers(e1.onInteractOutside,()=>{s1.current=!0}),onEntryFocus:l1=>{a1.wasKeyboardTriggerOpenRef.current||l1.preventDefault()},onKeyDown:composeEventHandlers(e1.onKeyDown,l1=>{if(["ArrowRight","ArrowLeft"].includes(l1.key)){const c1=l1.target,d1=c1.hasAttribute("data-radix-menubar-subtrigger"),h1=c1.closest("[data-radix-menubar-content]")!==l1.currentTarget,g1=(o1.dir==="rtl"?"ArrowRight":"ArrowLeft")===l1.key;if(!g1&&d1||h1&&g1)return;let y1=u1().filter(T1=>!T1.disabled).map(T1=>T1.value);g1&&y1.reverse();const _1=y1.indexOf(a1.value);y1=o1.loop?wrapArray(y1,_1+1):y1.slice(_1+1);const[E1]=y1;E1&&o1.onMenuOpen(E1)}},{checkForDefaultPrevented:!1}),style:{...e1.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});MenubarContent$2.displayName=CONTENT_NAME;var GROUP_NAME="MenubarGroup",MenubarGroup=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(Group,{...n1,...r1,ref:_g})});MenubarGroup.displayName=GROUP_NAME;var LABEL_NAME="MenubarLabel",MenubarLabel$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(Label,{...n1,...r1,ref:_g})});MenubarLabel$2.displayName=LABEL_NAME;var ITEM_NAME="MenubarItem",MenubarItem$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(Item2,{...n1,...r1,ref:_g})});MenubarItem$2.displayName=ITEM_NAME;var CHECKBOX_ITEM_NAME="MenubarCheckboxItem",MenubarCheckboxItem$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(CheckboxItem,{...n1,...r1,ref:_g})});MenubarCheckboxItem$2.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="MenubarRadioGroup",MenubarRadioGroup=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(RadioGroup,{...n1,...r1,ref:_g})});MenubarRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="MenubarRadioItem",MenubarRadioItem$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(RadioItem,{...n1,...r1,ref:_g})});MenubarRadioItem$2.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="MenubarItemIndicator",MenubarItemIndicator=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(ItemIndicator,{...n1,...r1,ref:_g})});MenubarItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME="MenubarSeparator",MenubarSeparator$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(Separator,{...n1,...r1,ref:_g})});MenubarSeparator$2.displayName=SEPARATOR_NAME;var ARROW_NAME="MenubarArrow",MenubarArrow=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(Arrow2,{...n1,...r1,ref:_g})});MenubarArrow.displayName=ARROW_NAME;var SUB_NAME="MenubarSub",MenubarSub$1=e1=>{const{__scopeMenubar:_g,children:t1,open:r1,onOpenChange:n1,defaultOpen:i1}=e1,o1=useMenuScope(_g),[a1=!1,u1]=useControllableState({prop:r1,defaultProp:i1,onChange:n1});return jsxRuntimeExports.jsx(Sub,{...o1,open:a1,onOpenChange:u1,children:t1})};MenubarSub$1.displayName=SUB_NAME;var SUB_TRIGGER_NAME="MenubarSubTrigger",MenubarSubTrigger$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(SubTrigger,{"data-radix-menubar-subtrigger":"",...n1,...r1,ref:_g})});MenubarSubTrigger$2.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="MenubarSubContent",MenubarSubContent$2=reactExports.forwardRef((e1,_g)=>{const{__scopeMenubar:t1,...r1}=e1,n1=useMenuScope(t1);return jsxRuntimeExports.jsx(SubContent,{...n1,"data-radix-menubar-content":"",...r1,ref:_g,style:{...e1.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});MenubarSubContent$2.displayName=SUB_CONTENT_NAME;function wrapArray(e1,_g){return e1.map((t1,r1)=>e1[(_g+r1)%e1.length])}var Root3=Menubar$2,Menu=MenubarMenu$2,Trigger=MenubarTrigger$2,Portal2=MenubarPortal,Content2=MenubarContent$2,Label2=MenubarLabel$2,Item3=MenubarItem$2,CheckboxItem2=MenubarCheckboxItem$2,RadioItem2=MenubarRadioItem$2,ItemIndicator2=MenubarItemIndicator,Separator2=MenubarSeparator$2,Sub2=MenubarSub$1,SubTrigger2=MenubarSubTrigger$2,SubContent2=MenubarSubContent$2;const MenubarMenu$1=Menu,Menubar$1=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Root3,{ref:t1,className:cn$1("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",e1),..._g}));Menubar$1.displayName=Root3.displayName;const MenubarTrigger$1=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Trigger,{ref:t1,className:cn$1("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e1),..._g}));MenubarTrigger$1.displayName=Trigger.displayName;const MenubarSubTrigger$1=reactExports.forwardRef(({className:e1,inset:_g,children:t1,...r1},n1)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:n1,className:cn$1("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",_g&&"pl-8",e1),...r1,children:[t1,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto h-4 w-4"})]}));MenubarSubTrigger$1.displayName=SubTrigger2.displayName;const MenubarSubContent$1=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(SubContent2,{ref:t1,className:cn$1("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e1),..._g}));MenubarSubContent$1.displayName=SubContent2.displayName;const MenubarContent$1=reactExports.forwardRef(({className:e1,align:_g="start",alignOffset:t1=-4,sideOffset:r1=8,...n1},i1)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2,{ref:i1,align:_g,alignOffset:t1,sideOffset:r1,className:cn$1("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e1),...n1})}));MenubarContent$1.displayName=Content2.displayName;const MenubarItem$1=reactExports.forwardRef(({className:e1,inset:_g,...t1},r1)=>jsxRuntimeExports.jsx(Item3,{ref:r1,className:cn$1("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_g&&"pl-8",e1),...t1}));MenubarItem$1.displayName=Item3.displayName;const MenubarCheckboxItem$1=reactExports.forwardRef(({className:e1,children:_g,checked:t1,...r1},n1)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:n1,className:cn$1("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e1),checked:t1,...r1,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),_g]}));MenubarCheckboxItem$1.displayName=CheckboxItem2.displayName;const MenubarRadioItem$1=reactExports.forwardRef(({className:e1,children:_g,...t1},r1)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:r1,className:cn$1("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e1),...t1,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),_g]}));MenubarRadioItem$1.displayName=RadioItem2.displayName;const MenubarLabel$1=reactExports.forwardRef(({className:e1,inset:_g,...t1},r1)=>jsxRuntimeExports.jsx(Label2,{ref:r1,className:cn$1("px-2 py-1.5 text-sm font-semibold",_g&&"pl-8",e1),...t1}));MenubarLabel$1.displayName=Label2.displayName;const MenubarSeparator$1=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Separator2,{ref:t1,className:cn$1("-mx-1 my-1 h-px bg-muted",e1),..._g}));MenubarSeparator$1.displayName=Separator2.displayName;const MenubarShortcut$1=({className:e1,..._g})=>jsxRuntimeExports.jsx("span",{className:cn$1("ml-auto text-xs tracking-widest text-muted-foreground",e1),..._g});MenubarShortcut$1.displayname="MenubarShortcut";function useImage(e1){const[_g,t1]=reactExports.useState(null),[r1,n1]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!e1)return;n1(!1);const i1=new Image;return(async()=>{let a1=null;if(typeof e1=="string"){const u1=await urlToDataURI(e1),s1=dataURItoBlob(u1);a1=new File([s1],"image",{type:s1.type})}else a1=e1;a1&&(i1.src=URL.createObjectURL(a1),i1.onload=()=>{n1(!0),t1(i1)})})(),()=>{i1.onload=null}},[e1]),[_g,r1]}var PAGE_KEYS=["PageUp","PageDown"],ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},SLIDER_NAME="Slider",[Collection,useCollection,createCollectionScope]=createCollection(SLIDER_NAME),[createSliderContext,createSliderScope]=createContextScope(SLIDER_NAME,[createCollectionScope]),[SliderProvider,useSliderContext]=createSliderContext(SLIDER_NAME),Slider$1=reactExports.forwardRef((e1,_g)=>{const{name:t1,min:r1=0,max:n1=100,step:i1=1,orientation:o1="horizontal",disabled:a1=!1,minStepsBetweenThumbs:u1=0,defaultValue:s1=[r1],value:l1,onValueChange:c1=()=>{},onValueCommit:d1=()=>{},inverted:h1=!1,...f1}=e1,g1=reactExports.useRef(new Set),v1=reactExports.useRef(0),y1=o1==="horizontal"?SliderHorizontal:SliderVertical,[_1=[],E1]=useControllableState({prop:l1,defaultProp:s1,onChange:H1=>{var ey;(ey=[...g1.current][v1.current])==null||ey.focus(),c1(H1)}}),T1=reactExports.useRef(_1);function P1(H1){const ty=getClosestValueIndex(_1,H1);W1(H1,ty)}function k1(H1){W1(H1,v1.current)}function N1(){const H1=T1.current[v1.current];_1[v1.current]!==H1&&d1(_1)}function W1(H1,ty,{commit:ey}={commit:!1}){const ly=getDecimalCount(i1),oy=roundValue(Math.round((H1-r1)/i1)*i1+r1,ly),Q1=clamp(oy,[r1,n1]);E1((U1=[])=>{const V1=getNextSortedValues(U1,Q1,ty);if(hasMinStepsBetweenValues(V1,u1*i1)){v1.current=V1.indexOf(Q1);const K1=String(V1)!==String(U1);return K1&&ey&&d1(V1),K1?V1:U1}else return U1})}return jsxRuntimeExports.jsx(SliderProvider,{scope:e1.__scopeSlider,name:t1,disabled:a1,min:r1,max:n1,valueIndexToChangeRef:v1,thumbs:g1.current,values:_1,orientation:o1,children:jsxRuntimeExports.jsx(Collection.Provider,{scope:e1.__scopeSlider,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:e1.__scopeSlider,children:jsxRuntimeExports.jsx(y1,{"aria-disabled":a1,"data-disabled":a1?"":void 0,...f1,ref:_g,onPointerDown:composeEventHandlers(f1.onPointerDown,()=>{a1||(T1.current=_1)}),min:r1,max:n1,inverted:h1,onSlideStart:a1?void 0:P1,onSlideMove:a1?void 0:k1,onSlideEnd:a1?void 0:N1,onHomeKeyDown:()=>!a1&&W1(r1,0,{commit:!0}),onEndKeyDown:()=>!a1&&W1(n1,_1.length-1,{commit:!0}),onStepKeyDown:({event:H1,direction:ty})=>{if(!a1){const oy=PAGE_KEYS.includes(H1.key)||H1.shiftKey&&ARROW_KEYS.includes(H1.key)?10:1,Q1=v1.current,U1=_1[Q1],V1=i1*oy*ty;W1(U1+V1,Q1,{commit:!0})}}})})})})});Slider$1.displayName=SLIDER_NAME;var[SliderOrientationProvider,useSliderOrientationContext]=createSliderContext(SLIDER_NAME,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SliderHorizontal=reactExports.forwardRef((e1,_g)=>{const{min:t1,max:r1,dir:n1,inverted:i1,onSlideStart:o1,onSlideMove:a1,onSlideEnd:u1,onStepKeyDown:s1,...l1}=e1,[c1,d1]=reactExports.useState(null),h1=useComposedRefs(_g,_1=>d1(_1)),f1=reactExports.useRef(),g1=useDirection(n1),v1=g1==="ltr",$1=v1&&!i1||!v1&&i1;function y1(_1){const E1=f1.current||c1.getBoundingClientRect(),T1=[0,E1.width],k1=linearScale(T1,$1?[t1,r1]:[r1,t1]);return f1.current=E1,k1(_1-E1.left)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:e1.__scopeSlider,startEdge:$1?"left":"right",endEdge:$1?"right":"left",direction:$1?1:-1,size:"width",children:jsxRuntimeExports.jsx(SliderImpl,{dir:g1,"data-orientation":"horizontal",...l1,ref:h1,style:{...l1.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_1=>{const E1=y1(_1.clientX);o1==null||o1(E1)},onSlideMove:_1=>{const E1=y1(_1.clientX);a1==null||a1(E1)},onSlideEnd:()=>{f1.current=void 0,u1==null||u1()},onStepKeyDown:_1=>{const T1=BACK_KEYS[$1?"from-left":"from-right"].includes(_1.key);s1==null||s1({event:_1,direction:T1?-1:1})}})})}),SliderVertical=reactExports.forwardRef((e1,_g)=>{const{min:t1,max:r1,inverted:n1,onSlideStart:i1,onSlideMove:o1,onSlideEnd:a1,onStepKeyDown:u1,...s1}=e1,l1=reactExports.useRef(null),c1=useComposedRefs(_g,l1),d1=reactExports.useRef(),h1=!n1;function f1(g1){const v1=d1.current||l1.current.getBoundingClientRect(),$1=[0,v1.height],_1=linearScale($1,h1?[r1,t1]:[t1,r1]);return d1.current=v1,_1(g1-v1.top)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:e1.__scopeSlider,startEdge:h1?"bottom":"top",endEdge:h1?"top":"bottom",size:"height",direction:h1?1:-1,children:jsxRuntimeExports.jsx(SliderImpl,{"data-orientation":"vertical",...s1,ref:c1,style:{...s1.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g1=>{const v1=f1(g1.clientY);i1==null||i1(v1)},onSlideMove:g1=>{const v1=f1(g1.clientY);o1==null||o1(v1)},onSlideEnd:()=>{d1.current=void 0,a1==null||a1()},onStepKeyDown:g1=>{const $1=BACK_KEYS[h1?"from-bottom":"from-top"].includes(g1.key);u1==null||u1({event:g1,direction:$1?-1:1})}})})}),SliderImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeSlider:t1,onSlideStart:r1,onSlideMove:n1,onSlideEnd:i1,onHomeKeyDown:o1,onEndKeyDown:a1,onStepKeyDown:u1,...s1}=e1,l1=useSliderContext(SLIDER_NAME,t1);return jsxRuntimeExports.jsx(Primitive.span,{...s1,ref:_g,onKeyDown:composeEventHandlers(e1.onKeyDown,c1=>{c1.key==="Home"?(o1(c1),c1.preventDefault()):c1.key==="End"?(a1(c1),c1.preventDefault()):PAGE_KEYS.concat(ARROW_KEYS).includes(c1.key)&&(u1(c1),c1.preventDefault())}),onPointerDown:composeEventHandlers(e1.onPointerDown,c1=>{const d1=c1.target;d1.setPointerCapture(c1.pointerId),c1.preventDefault(),l1.thumbs.has(d1)?d1.focus():r1(c1)}),onPointerMove:composeEventHandlers(e1.onPointerMove,c1=>{c1.target.hasPointerCapture(c1.pointerId)&&n1(c1)}),onPointerUp:composeEventHandlers(e1.onPointerUp,c1=>{const d1=c1.target;d1.hasPointerCapture(c1.pointerId)&&(d1.releasePointerCapture(c1.pointerId),i1(c1))})})}),TRACK_NAME="SliderTrack",SliderTrack=reactExports.forwardRef((e1,_g)=>{const{__scopeSlider:t1,...r1}=e1,n1=useSliderContext(TRACK_NAME,t1);return jsxRuntimeExports.jsx(Primitive.span,{"data-disabled":n1.disabled?"":void 0,"data-orientation":n1.orientation,...r1,ref:_g})});SliderTrack.displayName=TRACK_NAME;var RANGE_NAME="SliderRange",SliderRange=reactExports.forwardRef((e1,_g)=>{const{__scopeSlider:t1,...r1}=e1,n1=useSliderContext(RANGE_NAME,t1),i1=useSliderOrientationContext(RANGE_NAME,t1),o1=reactExports.useRef(null),a1=useComposedRefs(_g,o1),u1=n1.values.length,s1=n1.values.map(d1=>convertValueToPercentage(d1,n1.min,n1.max)),l1=u1>1?Math.min(...s1):0,c1=100-Math.max(...s1);return jsxRuntimeExports.jsx(Primitive.span,{"data-orientation":n1.orientation,"data-disabled":n1.disabled?"":void 0,...r1,ref:a1,style:{...e1.style,[i1.startEdge]:l1+"%",[i1.endEdge]:c1+"%"}})});SliderRange.displayName=RANGE_NAME;var THUMB_NAME="SliderThumb",SliderThumb=reactExports.forwardRef((e1,_g)=>{const t1=useCollection(e1.__scopeSlider),[r1,n1]=reactExports.useState(null),i1=useComposedRefs(_g,a1=>n1(a1)),o1=reactExports.useMemo(()=>r1?t1().findIndex(a1=>a1.ref.current===r1):-1,[t1,r1]);return jsxRuntimeExports.jsx(SliderThumbImpl,{...e1,ref:i1,index:o1})}),SliderThumbImpl=reactExports.forwardRef((e1,_g)=>{const{__scopeSlider:t1,index:r1,name:n1,...i1}=e1,o1=useSliderContext(THUMB_NAME,t1),a1=useSliderOrientationContext(THUMB_NAME,t1),[u1,s1]=reactExports.useState(null),l1=useComposedRefs(_g,y1=>s1(y1)),c1=u1?!!u1.closest("form"):!0,d1=useSize(u1),h1=o1.values[r1],f1=h1===void 0?0:convertValueToPercentage(h1,o1.min,o1.max),g1=getLabel(r1,o1.values.length),v1=d1==null?void 0:d1[a1.size],$1=v1?getThumbInBoundsOffset(v1,f1,a1.direction):0;return reactExports.useEffect(()=>{if(u1)return o1.thumbs.add(u1),()=>{o1.thumbs.delete(u1)}},[u1,o1.thumbs]),jsxRuntimeExports.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a1.startEdge]:`calc(${f1}% + ${$1}px)`},children:[jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:e1.__scopeSlider,children:jsxRuntimeExports.jsx(Primitive.span,{role:"slider","aria-label":e1["aria-label"]||g1,"aria-valuemin":o1.min,"aria-valuenow":h1,"aria-valuemax":o1.max,"aria-orientation":o1.orientation,"data-orientation":o1.orientation,"data-disabled":o1.disabled?"":void 0,tabIndex:o1.disabled?void 0:0,...i1,ref:l1,style:h1===void 0?{display:"none"}:e1.style,onFocus:composeEventHandlers(e1.onFocus,()=>{o1.valueIndexToChangeRef.current=r1})})}),c1&&jsxRuntimeExports.jsx(BubbleInput,{name:n1??(o1.name?o1.name+(o1.values.length>1?"[]":""):void 0),value:h1},r1)]})});SliderThumb.displayName=THUMB_NAME;var BubbleInput=e1=>{const{value:_g,...t1}=e1,r1=reactExports.useRef(null),n1=usePrevious(_g);return reactExports.useEffect(()=>{const i1=r1.current,o1=window.HTMLInputElement.prototype,u1=Object.getOwnPropertyDescriptor(o1,"value").set;if(n1!==_g&&u1){const s1=new Event("input",{bubbles:!0});u1.call(i1,_g),i1.dispatchEvent(s1)}},[n1,_g]),jsxRuntimeExports.jsx("input",{style:{display:"none"},...t1,ref:r1,defaultValue:_g})};function getNextSortedValues(e1=[],_g,t1){const r1=[...e1];return r1[t1]=_g,r1.sort((n1,i1)=>n1-i1)}function convertValueToPercentage(e1,_g,t1){const i1=100/(t1-_g)*(e1-_g);return clamp(i1,[0,100])}function getLabel(e1,_g){return _g>2?`Value ${e1+1} of ${_g}`:_g===2?["Minimum","Maximum"][e1]:void 0}function getClosestValueIndex(e1,_g){if(e1.length===1)return 0;const t1=e1.map(n1=>Math.abs(n1-_g)),r1=Math.min(...t1);return t1.indexOf(r1)}function getThumbInBoundsOffset(e1,_g,t1){const r1=e1/2,i1=linearScale([0,50],[0,r1]);return(r1-i1(_g)*t1)*t1}function getStepsBetweenValues(e1){return e1.slice(0,-1).map((_g,t1)=>e1[t1+1]-_g)}function hasMinStepsBetweenValues(e1,_g){if(_g>0){const t1=getStepsBetweenValues(e1);return Math.min(...t1)>=_g}return!0}function linearScale(e1,_g){return t1=>{if(e1[0]===e1[1]||_g[0]===_g[1])return _g[0];const r1=(_g[1]-_g[0])/(e1[1]-e1[0]);return _g[0]+r1*(t1-e1[0])}}function getDecimalCount(e1){return(String(e1).split(".")[1]||"").length}function roundValue(e1,_g){const t1=Math.pow(10,_g);return Math.round(e1*t1)/t1}var Root$1=Slider$1,Track=SliderTrack,Range=SliderRange,Thumb=SliderThumb;const Slider=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsxs(Root$1,{ref:t1,className:cn$1("relative flex w-full touch-none select-none items-center",e1),tabIndex:-1,..._g,children:[jsxRuntimeExports.jsx(Track,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20 data-[disabled]:cursor-not-allowed data-[disabled]:opacity-50",children:jsxRuntimeExports.jsx(Range,{className:"absolute h-full bg-primary data-[disabled]:cursor-not-allowed "})}),jsxRuntimeExports.jsx(Thumb,{tabIndex:-1,className:"block h-4 w-4 rounded-full border border-primary/60 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring data-[disabled]:cursor-not-allowed"})]}));Slider.displayName=Root$1.displayName;var NAME="Toggle",Toggle$1=reactExports.forwardRef((e1,_g)=>{const{pressed:t1,defaultPressed:r1=!1,onPressedChange:n1,...i1}=e1,[o1=!1,a1]=useControllableState({prop:t1,onChange:n1,defaultProp:r1});return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-pressed":o1,"data-state":o1?"on":"off","data-disabled":e1.disabled?"":void 0,...i1,ref:_g,onClick:composeEventHandlers(e1.onClick,()=>{e1.disabled||a1(!o1)})})});Toggle$1.displayName=NAME;var Root=Toggle$1;const toggleVariants=cva("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),Toggle=reactExports.forwardRef(({className:e1,variant:_g,size:t1,...r1},n1)=>jsxRuntimeExports.jsx(Root,{ref:n1,className:cn$1(toggleVariants({variant:_g,size:t1,className:e1})),...r1}));Toggle.displayName=Root.displayName;function iota$1(e1){for(var _g=new Array(e1),t1=0;t1<e1;++t1)_g[t1]=t1;return _g}var iota_1=iota$1;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(e1){return e1!=null&&(isBuffer$1(e1)||isSlowBuffer(e1)||!!e1._isBuffer)};function isBuffer$1(e1){return!!e1.constructor&&typeof e1.constructor.isBuffer=="function"&&e1.constructor.isBuffer(e1)}function isSlowBuffer(e1){return typeof e1.readFloatLE=="function"&&typeof e1.slice=="function"&&isBuffer$1(e1.slice(0,0))}var iota=iota_1,isBuffer=isBuffer_1,hasTypedArrays=typeof Float64Array<"u";function compare1st(e1,_g){return e1[0]-_g[0]}function order(){var e1=this.stride,_g=new Array(e1.length),t1;for(t1=0;t1<_g.length;++t1)_g[t1]=[Math.abs(e1[t1]),t1];_g.sort(compare1st);var r1=new Array(_g.length);for(t1=0;t1<r1.length;++t1)r1[t1]=_g[t1][1];return r1}function compileConstructor(e1,_g){var t1=["View",_g,"d",e1].join("");_g<0&&(t1="View_Nil"+e1);var r1=e1==="generic";if(_g===-1){var n1="function "+t1+"(a){this.data=a;};var proto="+t1+".prototype;proto.dtype='"+e1+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+t1+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+t1+"(a){return new "+t1+"(a);}",g1=new Function(n1);return g1()}else if(_g===0){var n1="function "+t1+"(a,d) {this.data = a;this.offset = d};var proto="+t1+".prototype;proto.dtype='"+e1+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+t1+"_copy() {return new "+t1+"(this.data,this.offset)};proto.pick=function "+t1+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+t1+"_get(){return "+(r1?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+t1+"_set(v){return "+(r1?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+t1+"(a,b,c,d){return new "+t1+"(a,d)}",g1=new Function("TrivialArray",n1);return g1(CACHED_CONSTRUCTORS[e1][0])}var n1=["'use strict'"],i1=iota(_g),o1=i1.map(function(v1){return"i"+v1}),a1="this.offset+"+i1.map(function(v1){return"this.stride["+v1+"]*i"+v1}).join("+"),u1=i1.map(function(v1){return"b"+v1}).join(","),s1=i1.map(function(v1){return"c"+v1}).join(",");n1.push("function "+t1+"(a,"+u1+","+s1+",d){this.data=a","this.shape=["+u1+"]","this.stride=["+s1+"]","this.offset=d|0}","var proto="+t1+".prototype","proto.dtype='"+e1+"'","proto.dimension="+_g),n1.push("Object.defineProperty(proto,'size',{get:function "+t1+"_size(){return "+i1.map(function(v1){return"this.shape["+v1+"]"}).join("*"),"}})"),_g===1?n1.push("proto.order=[0]"):(n1.push("Object.defineProperty(proto,'order',{get:"),_g<4?(n1.push("function "+t1+"_order(){"),_g===2?n1.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):_g===3&&n1.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):n1.push("ORDER})")),n1.push("proto.set=function "+t1+"_set("+o1.join(",")+",v){"),r1?n1.push("return this.data.set("+a1+",v)}"):n1.push("return this.data["+a1+"]=v}"),n1.push("proto.get=function "+t1+"_get("+o1.join(",")+"){"),r1?n1.push("return this.data.get("+a1+")}"):n1.push("return this.data["+a1+"]}"),n1.push("proto.index=function "+t1+"_index(",o1.join(),"){return "+a1+"}"),n1.push("proto.hi=function "+t1+"_hi("+o1.join(",")+"){return new "+t1+"(this.data,"+i1.map(function(v1){return["(typeof i",v1,"!=='number'||i",v1,"<0)?this.shape[",v1,"]:i",v1,"|0"].join("")}).join(",")+","+i1.map(function(v1){return"this.stride["+v1+"]"}).join(",")+",this.offset)}");var l1=i1.map(function(v1){return"a"+v1+"=this.shape["+v1+"]"}),c1=i1.map(function(v1){return"c"+v1+"=this.stride["+v1+"]"});n1.push("proto.lo=function "+t1+"_lo("+o1.join(",")+"){var b=this.offset,d=0,"+l1.join(",")+","+c1.join(","));for(var d1=0;d1<_g;++d1)n1.push("if(typeof i"+d1+"==='number'&&i"+d1+">=0){d=i"+d1+"|0;b+=c"+d1+"*d;a"+d1+"-=d}");n1.push("return new "+t1+"(this.data,"+i1.map(function(v1){return"a"+v1}).join(",")+","+i1.map(function(v1){return"c"+v1}).join(",")+",b)}"),n1.push("proto.step=function "+t1+"_step("+o1.join(",")+"){var "+i1.map(function(v1){return"a"+v1+"=this.shape["+v1+"]"}).join(",")+","+i1.map(function(v1){return"b"+v1+"=this.stride["+v1+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d1=0;d1<_g;++d1)n1.push("if(typeof i"+d1+"==='number'){d=i"+d1+"|0;if(d<0){c+=b"+d1+"*(a"+d1+"-1);a"+d1+"=ceil(-a"+d1+"/d)}else{a"+d1+"=ceil(a"+d1+"/d)}b"+d1+"*=d}");n1.push("return new "+t1+"(this.data,"+i1.map(function(v1){return"a"+v1}).join(",")+","+i1.map(function(v1){return"b"+v1}).join(",")+",c)}");for(var h1=new Array(_g),f1=new Array(_g),d1=0;d1<_g;++d1)h1[d1]="a[i"+d1+"]",f1[d1]="b[i"+d1+"]";n1.push("proto.transpose=function "+t1+"_transpose("+o1+"){"+o1.map(function(v1,$1){return v1+"=("+v1+"===undefined?"+$1+":"+v1+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+t1+"(this.data,"+h1.join(",")+","+f1.join(",")+",this.offset)}"),n1.push("proto.pick=function "+t1+"_pick("+o1+"){var a=[],b=[],c=this.offset");for(var d1=0;d1<_g;++d1)n1.push("if(typeof i"+d1+"==='number'&&i"+d1+">=0){c=(c+this.stride["+d1+"]*i"+d1+")|0}else{a.push(this.shape["+d1+"]);b.push(this.stride["+d1+"])}");n1.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),n1.push("return function construct_"+t1+"(data,shape,stride,offset){return new "+t1+"(data,"+i1.map(function(v1){return"shape["+v1+"]"}).join(",")+","+i1.map(function(v1){return"stride["+v1+"]"}).join(",")+",offset)}");var g1=new Function("CTOR_LIST","ORDER",n1.join(`
`));return g1(CACHED_CONSTRUCTORS[e1],order)}function arrayDType(e1){if(isBuffer(e1))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(e1)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e1)?"array":"generic"}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function wrappedNDArrayCtor(e1,_g,t1,r1){if(e1===void 0){var s1=CACHED_CONSTRUCTORS.array[0];return s1([])}else typeof e1=="number"&&(e1=[e1]);_g===void 0&&(_g=[e1.length]);var n1=_g.length;if(t1===void 0){t1=new Array(n1);for(var i1=n1-1,o1=1;i1>=0;--i1)t1[i1]=o1,o1*=_g[i1]}if(r1===void 0){r1=0;for(var i1=0;i1<n1;++i1)t1[i1]<0&&(r1-=(_g[i1]-1)*t1[i1])}for(var a1=arrayDType(e1),u1=CACHED_CONSTRUCTORS[a1];u1.length<=n1+1;)u1.push(compileConstructor(a1,u1.length-1));var s1=u1[n1+1];return s1(e1,_g,t1,r1)}var ndarray=wrappedNDArrayCtor;const ndarray4=getDefaultExportFromCjs(ndarray);/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var vd$1=Object.create,Pn$1=Object.defineProperty,_d$1=Object.getOwnPropertyDescriptor,Od$1=Object.getOwnPropertyNames,Id$1=Object.getPrototypeOf,Sd$1=Object.prototype.hasOwnProperty,L$1=(e1,_g)=>()=>(e1&&(_g=e1(e1=0)),_g),me=(e1,_g)=>()=>(_g||e1((_g={exports:{}}).exports,_g),_g.exports),Sr=(e1,_g)=>{for(var t1 in _g)Pn$1(e1,t1,{get:_g[t1],enumerable:!0})},Va$1=(e1,_g,t1,r1)=>{if(_g&&typeof _g=="object"||typeof _g=="function")for(let n1 of Od$1(_g))!Sd$1.call(e1,n1)&&n1!==t1&&Pn$1(e1,n1,{get:()=>_g[n1],enumerable:!(r1=_d$1(_g,n1))||r1.enumerable});return e1},Ar=(e1,_g,t1)=>(t1=e1!=null?vd$1(Id$1(e1)):{},Va$1(!e1||!e1.__esModule?Pn$1(t1,"default",{value:e1,enumerable:!0}):t1,e1)),ar=e1=>Va$1(Pn$1({},"__esModule",{value:!0}),e1),En,sr$1,Pr$1,Ad$1,Dn$1,Ln$1=L$1(()=>{En=new Map,sr$1=[],Pr$1=(e1,_g,t1)=>{if(_g&&typeof _g.init=="function"&&typeof _g.createInferenceSessionHandler=="function"){let r1=En.get(e1);if(r1===void 0)En.set(e1,{backend:_g,priority:t1});else{if(r1.priority>t1)return;if(r1.priority===t1&&r1.backend!==_g)throw new Error(`cannot register backend "${e1}" using priority ${t1}`)}if(t1>=0){let n1=sr$1.indexOf(e1);n1!==-1&&sr$1.splice(n1,1);for(let i1=0;i1<sr$1.length;i1++)if(En.get(sr$1[i1]).priority<=t1){sr$1.splice(i1,0,e1);return}sr$1.push(e1)}return}throw new TypeError("not a valid backend")},Ad$1=async e1=>{let _g=En.get(e1);if(!_g)return"backend not found.";if(_g.initialized)return _g.backend;if(_g.aborted)return _g.error;{let t1=!!_g.initPromise;try{return t1||(_g.initPromise=_g.backend.init(e1)),await _g.initPromise,_g.initialized=!0,_g.backend}catch(r1){return t1||(_g.error=`${r1}`,_g.aborted=!0),_g.error}finally{delete _g.initPromise}}},Dn$1=async e1=>{let _g=e1.executionProviders||[],t1=_g.map(u1=>typeof u1=="string"?u1:u1.name),r1=t1.length===0?sr$1:t1,n1,i1=[],o1=new Set;for(let u1 of r1){let s1=await Ad$1(u1);typeof s1=="string"?i1.push({name:u1,err:s1}):(n1||(n1=s1),n1===s1&&o1.add(u1))}if(!n1)throw new Error(`no available backend found. ERR: ${i1.map(u1=>`[${u1.name}] ${u1.err}`).join(", ")}`);for(let{name:u1,err:s1}of i1)t1.includes(u1)&&console.warn(`removing requested execution provider "${u1}" from session options because it is not available: ${s1}`);let a1=_g.filter(u1=>o1.has(typeof u1=="string"?u1:u1.name));return[n1,new Proxy(e1,{get:(u1,s1)=>s1==="executionProviders"?a1:Reflect.get(u1,s1)})]}}),Wa=L$1(()=>{Ln$1()}),Ha$1,qa$1=L$1(()=>{Ha$1="1.18.0"}),ja$1,ut$1,Vo=L$1(()=>{qa$1(),ja$1="warning",ut$1={wasm:{},webgl:{},webgpu:{},versions:{common:Ha$1},set logLevel(e1){if(e1!==void 0){if(typeof e1!="string"||["verbose","info","warning","error","fatal"].indexOf(e1)===-1)throw new Error(`Unsupported logging level: ${e1}`);ja$1=e1}},get logLevel(){return ja$1}},Object.defineProperty(ut$1,"logLevel",{enumerable:!0})}),Z,Ya$1=L$1(()=>{Vo(),Z=ut$1}),Xa$1,Ka$1,Ja$1=L$1(()=>{Xa$1=(e1,_g)=>{let t1=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);t1.width=e1.dims[3],t1.height=e1.dims[2];let r1=t1.getContext("2d");if(r1!=null){let n1,i1;(_g==null?void 0:_g.tensorLayout)!==void 0&&_g.tensorLayout==="NHWC"?(n1=e1.dims[2],i1=e1.dims[3]):(n1=e1.dims[3],i1=e1.dims[2]);let o1=(_g==null?void 0:_g.format)!==void 0?_g.format:"RGB",a1=_g==null?void 0:_g.norm,u1,s1;a1===void 0||a1.mean===void 0?u1=[255,255,255,255]:typeof a1.mean=="number"?u1=[a1.mean,a1.mean,a1.mean,a1.mean]:(u1=[a1.mean[0],a1.mean[1],a1.mean[2],0],a1.mean[3]!==void 0&&(u1[3]=a1.mean[3])),a1===void 0||a1.bias===void 0?s1=[0,0,0,0]:typeof a1.bias=="number"?s1=[a1.bias,a1.bias,a1.bias,a1.bias]:(s1=[a1.bias[0],a1.bias[1],a1.bias[2],0],a1.bias[3]!==void 0&&(s1[3]=a1.bias[3]));let l1=i1*n1,c1=0,d1=l1,h1=l1*2,f1=-1;o1==="RGBA"?(c1=0,d1=l1,h1=l1*2,f1=l1*3):o1==="RGB"?(c1=0,d1=l1,h1=l1*2):o1==="RBG"&&(c1=0,h1=l1,d1=l1*2);for(let g1=0;g1<i1;g1++)for(let v1=0;v1<n1;v1++){let $1=(e1.data[c1++]-s1[0])*u1[0],y1=(e1.data[d1++]-s1[1])*u1[1],_1=(e1.data[h1++]-s1[2])*u1[2],E1=f1===-1?255:(e1.data[f1++]-s1[3])*u1[3];r1.fillStyle="rgba("+$1+","+y1+","+_1+","+E1+")",r1.fillRect(v1,g1,1,1)}if("toDataURL"in t1)return t1.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ka$1=(e1,_g)=>{let t1=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),r1;if(t1!=null){let n1,i1,o1;(_g==null?void 0:_g.tensorLayout)!==void 0&&_g.tensorLayout==="NHWC"?(n1=e1.dims[2],i1=e1.dims[1],o1=e1.dims[3]):(n1=e1.dims[3],i1=e1.dims[2],o1=e1.dims[1]);let a1=_g!==void 0&&_g.format!==void 0?_g.format:"RGB",u1=_g==null?void 0:_g.norm,s1,l1;u1===void 0||u1.mean===void 0?s1=[255,255,255,255]:typeof u1.mean=="number"?s1=[u1.mean,u1.mean,u1.mean,u1.mean]:(s1=[u1.mean[0],u1.mean[1],u1.mean[2],255],u1.mean[3]!==void 0&&(s1[3]=u1.mean[3])),u1===void 0||u1.bias===void 0?l1=[0,0,0,0]:typeof u1.bias=="number"?l1=[u1.bias,u1.bias,u1.bias,u1.bias]:(l1=[u1.bias[0],u1.bias[1],u1.bias[2],0],u1.bias[3]!==void 0&&(l1[3]=u1.bias[3]));let c1=i1*n1;if(_g!==void 0&&(_g.format!==void 0&&o1===4&&_g.format!=="RGBA"||o1===3&&_g.format!=="RGB"&&_g.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d1=4,h1=0,f1=1,g1=2,v1=3,$1=0,y1=c1,_1=c1*2,E1=-1;a1==="RGBA"?($1=0,y1=c1,_1=c1*2,E1=c1*3):a1==="RGB"?($1=0,y1=c1,_1=c1*2):a1==="RBG"&&($1=0,_1=c1,y1=c1*2),r1=t1.createImageData(n1,i1);for(let T1=0;T1<i1*n1;h1+=d1,f1+=d1,g1+=d1,v1+=d1,T1++)r1.data[h1]=(e1.data[$1++]-l1[0])*s1[0],r1.data[f1]=(e1.data[y1++]-l1[1])*s1[1],r1.data[g1]=(e1.data[_1++]-l1[2])*s1[2],r1.data[v1]=E1===-1?255:(e1.data[E1++]-l1[3])*s1[3]}else throw new Error("Can not access image data");return r1}}),Wo,Za$1,Qa$1,es$1,ts$1,rs$1=L$1(()=>{Cn(),Wo=(e1,_g)=>{if(e1===void 0)throw new Error("Image buffer must be defined");if(_g.height===void 0||_g.width===void 0)throw new Error("Image height and width must be defined");if(_g.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:t1,width:r1}=_g,n1=_g.norm??{mean:255,bias:0},i1,o1;typeof n1.mean=="number"?i1=[n1.mean,n1.mean,n1.mean,n1.mean]:i1=[n1.mean[0],n1.mean[1],n1.mean[2],n1.mean[3]??255],typeof n1.bias=="number"?o1=[n1.bias,n1.bias,n1.bias,n1.bias]:o1=[n1.bias[0],n1.bias[1],n1.bias[2],n1.bias[3]??0];let a1=_g.format!==void 0?_g.format:"RGBA",u1=_g.tensorFormat!==void 0&&_g.tensorFormat!==void 0?_g.tensorFormat:"RGB",s1=t1*r1,l1=u1==="RGBA"?new Float32Array(s1*4):new Float32Array(s1*3),c1=4,d1=0,h1=1,f1=2,g1=3,v1=0,$1=s1,y1=s1*2,_1=-1;a1==="RGB"&&(c1=3,d1=0,h1=1,f1=2,g1=-1),u1==="RGBA"?_1=s1*3:u1==="RBG"?(v1=0,y1=s1,$1=s1*2):u1==="BGR"&&(y1=0,$1=s1,v1=s1*2);for(let E1=0;E1<s1;E1++,d1+=c1,f1+=c1,h1+=c1,g1+=c1)l1[v1++]=(e1[d1]+o1[0])/i1[0],l1[$1++]=(e1[h1]+o1[1])/i1[1],l1[y1++]=(e1[f1]+o1[2])/i1[2],_1!==-1&&g1!==-1&&(l1[_1++]=(e1[g1]+o1[3])/i1[3]);return u1==="RGBA"?new Je("float32",l1,[1,4,t1,r1]):new Je("float32",l1,[1,3,t1,r1])},Za$1=async(e1,_g)=>{let t1=typeof HTMLImageElement<"u"&&e1 instanceof HTMLImageElement,r1=typeof ImageData<"u"&&e1 instanceof ImageData,n1=typeof ImageBitmap<"u"&&e1 instanceof ImageBitmap,i1=typeof e1=="string",o1,a1=_g??{},u1=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},s1=l1=>l1 instanceof HTMLCanvasElement||l1 instanceof OffscreenCanvas?l1.getContext("2d"):null;if(t1){let l1=u1();l1.width=e1.width,l1.height=e1.height;let c1=s1(l1);if(c1!=null){let d1=e1.height,h1=e1.width;if(_g!==void 0&&_g.resizedHeight!==void 0&&_g.resizedWidth!==void 0&&(d1=_g.resizedHeight,h1=_g.resizedWidth),_g!==void 0){if(a1=_g,_g.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a1.tensorFormat="RGBA",a1.height=d1,a1.width=h1}else a1.tensorFormat="RGBA",a1.height=d1,a1.width=h1;c1.drawImage(e1,0,0),o1=c1.getImageData(0,0,h1,d1).data}else throw new Error("Can not access image data")}else if(r1){let l1,c1;if(_g!==void 0&&_g.resizedWidth!==void 0&&_g.resizedHeight!==void 0?(l1=_g.resizedHeight,c1=_g.resizedWidth):(l1=e1.height,c1=e1.width),_g!==void 0&&(a1=_g),a1.format="RGBA",a1.height=l1,a1.width=c1,_g!==void 0){let d1=u1();d1.width=c1,d1.height=l1;let h1=s1(d1);if(h1!=null)h1.putImageData(e1,0,0),o1=h1.getImageData(0,0,c1,l1).data;else throw new Error("Can not access image data")}else o1=e1.data}else if(n1){if(_g===void 0)throw new Error("Please provide image config with format for Imagebitmap");let l1=u1();l1.width=e1.width,l1.height=e1.height;let c1=s1(l1);if(c1!=null){let d1=e1.height,h1=e1.width;return c1.drawImage(e1,0,0,h1,d1),o1=c1.getImageData(0,0,h1,d1).data,a1.height=d1,a1.width=h1,Wo(o1,a1)}else throw new Error("Can not access image data")}else{if(i1)return new Promise((l1,c1)=>{let d1=u1(),h1=s1(d1);if(!e1||!h1)return c1();let f1=new Image;f1.crossOrigin="Anonymous",f1.src=e1,f1.onload=()=>{d1.width=f1.width,d1.height=f1.height,h1.drawImage(f1,0,0,d1.width,d1.height);let g1=h1.getImageData(0,0,d1.width,d1.height);a1.height=d1.height,a1.width=d1.width,l1(Wo(g1.data,a1))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(o1!==void 0)return Wo(o1,a1);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa$1=(e1,_g)=>{let{width:t1,height:r1,download:n1,dispose:i1}=_g,o1=[1,r1,t1,4];return new Je({location:"texture",type:"float32",texture:e1,dims:o1,download:n1,dispose:i1})},es$1=(e1,_g)=>{let{dataType:t1,dims:r1,download:n1,dispose:i1}=_g;return new Je({location:"gpu-buffer",type:t1??"float32",gpuBuffer:e1,dims:r1,download:n1,dispose:i1})},ts$1=(e1,_g,t1)=>new Je({location:"cpu-pinned",type:e1,data:_g,dims:t1??[_g.length]})}),ur$1,Qr$1,ns,os$1,is$1=L$1(()=>{ur$1=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr$1=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns=!1,os$1=()=>{if(!ns){ns=!0;let e1=typeof BigInt64Array<"u"&&BigInt64Array.from,_g=typeof BigUint64Array<"u"&&BigUint64Array.from,t1=typeof Float16Array<"u"&&Float16Array.from;e1&&(ur$1.set("int64",BigInt64Array),Qr$1.set(BigInt64Array,"int64")),_g&&(ur$1.set("uint64",BigUint64Array),Qr$1.set(BigUint64Array,"uint64")),t1?(ur$1.set("float16",Float16Array),Qr$1.set(Float16Array,"float16")):ur$1.set("float16",Uint16Array)}}}),as$1,ss$1,us$1=L$1(()=>{Cn(),as$1=e1=>{let _g=1;for(let t1=0;t1<e1.length;t1++){let r1=e1[t1];if(typeof r1!="number"||!Number.isSafeInteger(r1))throw new TypeError(`dims[${t1}] must be an integer, got: ${r1}`);if(r1<0)throw new RangeError(`dims[${t1}] must be a non-negative integer, got: ${r1}`);_g*=r1}return _g},ss$1=(e1,_g)=>{switch(e1.location){case"cpu":return new Je(e1.type,e1.data,_g);case"cpu-pinned":return new Je({location:"cpu-pinned",data:e1.data,type:e1.type,dims:_g});case"texture":return new Je({location:"texture",texture:e1.texture,type:e1.type,dims:_g});case"gpu-buffer":return new Je({location:"gpu-buffer",gpuBuffer:e1.gpuBuffer,type:e1.type,dims:_g});default:throw new Error(`tensorReshape: tensor location ${e1.location} is not supported`)}}}),Je,Cn=L$1(()=>{Ja$1(),rs$1(),is$1(),us$1(),Je=class{constructor(e1,_g,t1){os$1();let r1,n1;if(typeof e1=="object"&&"location"in e1)switch(this.dataLocation=e1.location,r1=e1.type,n1=e1.dims,e1.location){case"cpu-pinned":{let o1=ur$1.get(r1);if(!o1)throw new TypeError(`unsupported type "${r1}" to create tensor from pinned buffer`);if(!(e1.data instanceof o1))throw new TypeError(`buffer should be of type ${o1.name}`);this.cpuData=e1.data;break}case"texture":{if(r1!=="float32")throw new TypeError(`unsupported type "${r1}" to create tensor from texture`);this.gpuTextureData=e1.texture,this.downloader=e1.download,this.disposer=e1.dispose;break}case"gpu-buffer":{if(r1!=="float32"&&r1!=="float16"&&r1!=="int32"&&r1!=="int64"&&r1!=="uint32"&&r1!=="uint8"&&r1!=="bool")throw new TypeError(`unsupported type "${r1}" to create tensor from gpu buffer`);this.gpuBufferData=e1.gpuBuffer,this.downloader=e1.download,this.disposer=e1.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o1,a1;if(typeof e1=="string")if(r1=e1,a1=t1,e1==="string"){if(!Array.isArray(_g))throw new TypeError("A string tensor's data must be a string array.");o1=_g}else{let u1=ur$1.get(e1);if(u1===void 0)throw new TypeError(`Unsupported tensor type: ${e1}.`);if(Array.isArray(_g)){if(e1==="float16"&&u1===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e1==="uint64"||e1==="int64"?o1=u1.from(_g,BigInt):o1=u1.from(_g)}else if(_g instanceof u1)o1=_g;else throw new TypeError(`A ${r1} tensor's data must be type of ${u1}`)}else if(a1=_g,Array.isArray(e1)){if(e1.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let u1=typeof e1[0];if(u1==="string")r1="string",o1=e1;else if(u1==="boolean")r1="bool",o1=Uint8Array.from(e1);else throw new TypeError(`Invalid element type of data array: ${u1}.`)}else{let u1=Qr$1.get(e1.constructor);if(u1===void 0)throw new TypeError(`Unsupported type for tensor data: ${e1.constructor}.`);r1=u1,o1=e1}if(a1===void 0)a1=[o1.length];else if(!Array.isArray(a1))throw new TypeError("A tensor's dims must be a number array");n1=a1,this.cpuData=o1,this.dataLocation="cpu"}let i1=as$1(n1);if(this.cpuData&&i1!==this.cpuData.length)throw new Error(`Tensor's size(${i1}) does not match data length(${this.cpuData.length}).`);this.type=r1,this.dims=n1,this.size=i1}static async fromImage(e1,_g){return Za$1(e1,_g)}static fromTexture(e1,_g){return Qa$1(e1,_g)}static fromGpuBuffer(e1,_g){return es$1(e1,_g)}static fromPinnedBuffer(e1,_g,t1){return ts$1(e1,_g,t1)}toDataURL(e1){return Xa$1(this,e1)}toImageData(e1){return Ka$1(this,e1)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e1){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let _g=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=_g,e1&&this.disposer&&(this.disposer(),this.disposer=void 0),_g}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e1){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss$1(this,e1)}}}),Me,Fn$1=L$1(()=>{Cn(),Me=Je}),ls$1,fs$1,lr$1,fr$1,Ho=L$1(()=>{Vo(),ls$1=(e1,_g)=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||console.timeStamp(`${e1}::ORT::${_g}`)},fs$1=(e1,_g)=>{var n1;let t1=((n1=new Error().stack)==null?void 0:n1.split(/\r\n|\r|\n/g))||[],r1=!1;for(let i1=0;i1<t1.length;i1++){if(r1&&!t1[i1].includes("TRACE_FUNC")){let o1=`FUNC_${e1}::${t1[i1].trim().split(" ")[1]}`;_g&&(o1+=`::${_g}`),ls$1("CPU",o1);return}t1[i1].includes("TRACE_FUNC")&&(r1=!0)}},lr$1=e1=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("BEGIN",e1)},fr$1=e1=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("END",e1)}}),$n,cs$1=L$1(()=>{Ln$1(),Fn$1(),Ho(),$n=class uT{constructor(_g){this.handler=_g}async run(_g,t1,r1){lr$1();let n1={},i1={};if(typeof _g!="object"||_g===null||_g instanceof Me||Array.isArray(_g))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o1=!0;if(typeof t1=="object"){if(t1===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t1 instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t1)){if(t1.length===0)throw new TypeError("'fetches' cannot be an empty array.");o1=!1;for(let s1 of t1){if(typeof s1!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(s1)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s1}.`);n1[s1]=null}if(typeof r1=="object"&&r1!==null)i1=r1;else if(typeof r1<"u")throw new TypeError("'options' must be an object.")}else{let s1=!1,l1=Object.getOwnPropertyNames(t1);for(let c1 of this.outputNames)if(l1.indexOf(c1)!==-1){let d1=t1[c1];(d1===null||d1 instanceof Me)&&(s1=!0,o1=!1,n1[c1]=d1)}if(s1){if(typeof r1=="object"&&r1!==null)i1=r1;else if(typeof r1<"u")throw new TypeError("'options' must be an object.")}else i1=t1}}else if(typeof t1<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s1 of this.inputNames)if(typeof _g[s1]>"u")throw new Error(`input '${s1}' is missing in 'feeds'.`);if(o1)for(let s1 of this.outputNames)n1[s1]=null;let a1=await this.handler.run(_g,n1,i1),u1={};for(let s1 in a1)if(Object.hasOwnProperty.call(a1,s1)){let l1=a1[s1];l1 instanceof Me?u1[s1]=l1:u1[s1]=new Me(l1.type,l1.data,l1.dims)}return fr$1(),u1}async release(){return this.handler.dispose()}static async create(_g,t1,r1,n1){lr$1();let i1,o1={};if(typeof _g=="string"){if(i1=_g,typeof t1=="object"&&t1!==null)o1=t1;else if(typeof t1<"u")throw new TypeError("'options' must be an object.")}else if(_g instanceof Uint8Array){if(i1=_g,typeof t1=="object"&&t1!==null)o1=t1;else if(typeof t1<"u")throw new TypeError("'options' must be an object.")}else if(_g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_g instanceof SharedArrayBuffer){let l1=_g,c1=0,d1=_g.byteLength;if(typeof t1=="object"&&t1!==null)o1=t1;else if(typeof t1=="number"){if(c1=t1,!Number.isSafeInteger(c1))throw new RangeError("'byteOffset' must be an integer.");if(c1<0||c1>=l1.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${l1.byteLength}).`);if(d1=_g.byteLength-c1,typeof r1=="number"){if(d1=r1,!Number.isSafeInteger(d1))throw new RangeError("'byteLength' must be an integer.");if(d1<=0||c1+d1>l1.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${l1.byteLength-c1}].`);if(typeof n1=="object"&&n1!==null)o1=n1;else if(typeof n1<"u")throw new TypeError("'options' must be an object.")}else if(typeof r1<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t1<"u")throw new TypeError("'options' must be an object.");i1=new Uint8Array(l1,c1,d1)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[a1,u1]=await Dn$1(o1),s1=await a1.createInferenceSessionHandler(i1,u1);return fr$1(),new uT(s1)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd$1,ps$1=L$1(()=>{cs$1(),Pd$1=$n}),ds$1=L$1(()=>{}),hs$1=L$1(()=>{}),ms$1=L$1(()=>{}),bs$1=L$1(()=>{}),Ed$1,kn$1,gs$1=L$1(()=>{Ln$1(),Fn$1(),Ed$1="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn$1=class cT{constructor(_g,t1,r1){this.handler=_g,this.hasOptimizerModel=t1,this.hasEvalModel=r1}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(_g,t1){let r1=_g.evalModel||"",n1=_g.optimizerModel||"",i1=t1||{},[o1,a1]=await Dn$1(i1);if(o1.createTrainingSessionHandler){let u1=await o1.createTrainingSessionHandler(_g.checkpointState,_g.trainModel,r1,n1,a1);return new cT(u1,!!_g.optimizerModel,!!_g.evalModel)}else throw new Error(Ed$1)}typeNarrowingForRunStep(_g,t1,r1,n1,i1){let o1={},a1={};if(typeof r1!="object"||r1===null||r1 instanceof Me||Array.isArray(r1))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u1=!0;if(typeof n1=="object"){if(n1===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n1 instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n1)){if(n1.length===0)throw new TypeError("'fetches' cannot be an empty array.");u1=!1;for(let s1 of n1){if(typeof s1!="string")throw new TypeError("'fetches' must be a string array or an object.");if(t1.indexOf(s1)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s1}.`);o1[s1]=null}if(typeof i1=="object"&&i1!==null)a1=i1;else if(typeof i1<"u")throw new TypeError("'options' must be an object.")}else{let s1=!1,l1=Object.getOwnPropertyNames(n1);for(let c1 of t1)if(l1.indexOf(c1)!==-1){let d1=n1[c1];(d1===null||d1 instanceof Me)&&(s1=!0,u1=!1,o1[c1]=d1)}if(s1){if(typeof i1=="object"&&i1!==null)a1=i1;else if(typeof i1<"u")throw new TypeError("'options' must be an object.")}else a1=n1}}else if(typeof n1<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s1 of _g)if(typeof r1[s1]>"u")throw new Error(`input '${s1}' is missing in 'feeds'.`);if(u1)for(let s1 of t1)o1[s1]=null;return[o1,a1]}convertHandlerReturnTypeToMapOfTensors(_g){let t1={};for(let r1 in _g)if(Object.hasOwnProperty.call(_g,r1)){let n1=_g[r1];n1 instanceof Me?t1[r1]=n1:t1[r1]=new Me(n1.type,n1.data,n1.dims)}return t1}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(_g,t1,r1){let[n1,i1]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,_g,t1,r1),o1=await this.handler.runTrainStep(_g,n1,i1);return this.convertHandlerReturnTypeToMapOfTensors(o1)}async runOptimizerStep(_g){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(_g||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(_g,t1,r1){if(this.hasEvalModel){let[n1,i1]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,_g,t1,r1),o1=await this.handler.runEvalStep(_g,n1,i1);return this.convertHandlerReturnTypeToMapOfTensors(o1)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(_g=!0){return this.handler.getParametersSize(_g)}async loadParametersBuffer(_g,t1=!0){let r1=await this.getParametersSize(t1);if(_g.length!==4*r1)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(_g,t1)}async getContiguousParameters(_g=!0){return this.handler.getContiguousParameters(_g)}async release(){return this.handler.dispose()}}}),Dd$1,ys$1=L$1(()=>{gs$1(),Dd$1=kn$1}),qo={};Sr(qo,{InferenceSession:()=>Pd$1,TRACE:()=>ls$1,TRACE_FUNC_BEGIN:()=>lr$1,TRACE_FUNC_END:()=>fr$1,Tensor:()=>Me,TrainingSession:()=>Dd$1,env:()=>Z,registerBackend:()=>Pr$1});var Ot$1=L$1(()=>{Wa(),Ya$1(),ps$1(),Fn$1(),ds$1(),hs$1(),Ho(),ms$1(),bs$1(),ys$1()});function Xt$1(e1,_g,t1,r1){if(_g===void 0)return Cd$1(e1);if(t1===void 0)Bn$1(e1,_g);else if(typeof t1=="number"&&r1===void 0)Bn$1(e1,_g);else if(typeof t1=="string"&&r1===void 0)Bn$1(e1,t1,1,_g);else if(typeof t1=="string"&&typeof r1=="number")Bn$1(e1,t1,r1,_g);else throw new TypeError("input is valid")}function Cd$1(e1){return{verbose:Xt$1.verbose.bind(null,e1),info:Xt$1.info.bind(null,e1),warning:Xt$1.warning.bind(null,e1),error:Xt$1.error.bind(null,e1),fatal:Xt$1.fatal.bind(null,e1)}}function Bn$1(e1,_g,t1,r1){let n1=en$1[r1||""]||en$1[""];xs$1[e1]<xs$1[n1.minimalSeverity]||(n1.logDateTime&&(_g=`${new Date().toISOString()}|${_g}`),n1.logSourceLocation,Ld$1[n1.provider].log(e1,_g,r1))}var jo,Yo,xs$1,Ld$1,ws$1,en$1,ce,Rn$1,Mn$1,Gn$1,Nn$1,lt$1=L$1(()=>{jo=class{log(e1,_g,t1){}},Yo=class{log(e1,_g,t1){console.log(`${this.color(e1)} ${t1?"\x1B[35m"+t1+"\x1B[0m ":""}${_g}`)}color(e1){switch(e1){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${e1}`)}}},xs$1={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld$1={none:new jo,console:new Yo},ws$1={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en$1={"":ws$1},(e1=>{function _g(s1,l1){e1("verbose",s1,l1)}e1.verbose=_g;function t1(s1,l1){e1("info",s1,l1)}e1.info=t1;function r1(s1,l1){e1("warning",s1,l1)}e1.warning=r1;function n1(s1,l1){e1("error",s1,l1)}e1.error=n1;function i1(s1,l1){e1("fatal",s1,l1)}e1.fatal=i1;function o1(s1){en$1={},a1("",s1||{})}e1.reset=o1;function a1(s1,l1){if(s1==="*")o1(l1);else{let c1=en$1[s1]||ws$1;en$1[s1]={provider:l1.provider||c1.provider,minimalSeverity:l1.minimalSeverity||c1.minimalSeverity,logDateTime:l1.logDateTime===void 0?c1.logDateTime:l1.logDateTime,logSourceLocation:l1.logSourceLocation===void 0?c1.logSourceLocation:l1.logSourceLocation}}}e1.set=a1;function u1(s1){let l1={};s1.logLevel&&(l1.minimalSeverity=s1.logLevel),a1("",l1)}e1.setWithEnv=u1})(Xt$1||(Xt$1={})),ce=Xt$1,Rn$1=class{constructor(e1,_g,t1,r1,n1,i1){this.category=e1,this.name=_g,this.startTime=t1,this.endCallback=r1,this.timer=n1,this.ctx=i1}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn$1=class{constructor(e1,_g,t1,r1){this.category=e1,this.name=_g,this.startTime=t1,this.endTime=r1}},Gn$1=class{constructor(e1,_g,t1){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=e1===void 0?1e4:e1,this._flushBatchSize=_g===void 0?10:_g,this._flushIntervalInMilliseconds=t1===void 0?5e3:t1}static create(e1){return e1===void 0?new this:new this(e1.maxNumberEvents,e1.flushBatchSize,e1.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn$1(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(e1,_g,t1,r1){let n1=this._started?this.begin(e1,_g,r1):void 0,i1=!1,o1=t1();if(o1&&typeof o1.then=="function")return i1=!0,new Promise((a1,u1)=>{o1.then(async s1=>{n1&&await n1.end(),a1(s1)},async s1=>{n1&&await n1.end(),u1(s1)})});if(!i1&&n1){let a1=n1.end();if(a1&&typeof a1.then=="function")return new Promise((u1,s1)=>{a1.then(()=>{u1(o1)},l1=>{s1(l1)})})}return o1}begin(e1,_g,t1){if(!this._started)throw new Error("profiler is not started yet");if(t1===void 0){let r1=Nn$1();return this.flush(r1),new Rn$1(e1,_g,r1,n1=>this.endSync(n1))}else{let r1=t1.beginTimer();return new Rn$1(e1,_g,0,async n1=>this.end(n1),r1,t1)}}async end(e1){let _g=await e1.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(e1.category,e1.name,e1.startTime,_g)),this.flush(_g))}endSync(e1){let _g=Nn$1();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(e1.category,e1.name,e1.startTime,_g)),this.flush(_g))}logOneEvent(e1){ce.verbose(`Profiler.${e1.category}`,`${(e1.endTime-e1.startTime).toFixed(2)}ms on event '${e1.name}' at ${e1.endTime.toFixed(2)}`)}flush(e1){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e1-this._flushTime>=this._flushIntervalInMilliseconds){for(let _g=this._flushPointer;this._flushPointer<_g+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn$1()}}get started(){return this._started}},Nn$1=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs$1(e1,_g,t1){for(let r1 of t1){let n1=r1[0],i1=r1[1],o1=r1[2],a1=r1[3],u1=r1[4];if(e1.opType===n1){for(let s1 of _g)if((s1.domain===i1||s1.domain==="ai.onnx"&&i1==="")&&Fd$1(s1.version,o1))return{opImpl:a1,opInit:u1}}}throw new TypeError(`cannot resolve operator '${e1.opType}' with opsets: ${_g.map(r1=>`${r1.domain||"ai.onnx"} v${r1.version}`).join(", ")}`)}function Fd$1(e1,_g){if(_g.endsWith("+")){let t1=Number.parseInt(_g.substring(0,_g.length-1),10);return!isNaN(t1)&&t1<=e1}else if(_g.split("-").length===2){let t1=_g.split("-"),r1=Number.parseInt(t1[0],10),n1=Number.parseInt(t1[1],10);return!isNaN(r1)&&!isNaN(n1)&&r1<=e1&&e1<=n1}else return Number.parseInt(_g,10)===e1}var _s$1=L$1(()=>{}),Os$1=me(e1=>{e1.__esModule=!0;var _g=function(){function t1(r1){if(!r1)throw new TypeError("Invalid argument; `value` has no value.");this.value=t1.EMPTY,r1&&t1.isGuid(r1)&&(this.value=r1)}return t1.isGuid=function(r1){var n1=r1.toString();return r1&&(r1 instanceof t1||t1.validator.test(n1))},t1.create=function(){return new t1([t1.gen(2),t1.gen(1),t1.gen(1),t1.gen(1),t1.gen(3)].join("-"))},t1.createEmpty=function(){return new t1("emptyguid")},t1.parse=function(r1){return new t1(r1)},t1.raw=function(){return[t1.gen(2),t1.gen(1),t1.gen(1),t1.gen(1),t1.gen(3)].join("-")},t1.gen=function(r1){for(var n1="",i1=0;i1<r1;i1++)n1+=((1+Math.random())*65536|0).toString(16).substring(1);return n1},t1.prototype.equals=function(r1){return t1.isGuid(r1)&&this.value===r1.toString()},t1.prototype.isEmpty=function(){return this.value===t1.EMPTY},t1.prototype.toString=function(){return this.value},t1.prototype.toJSON=function(){return{value:this.value}},t1.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t1.EMPTY="00000000-0000-0000-0000-000000000000",t1}();e1.Guid=_g});function be(e1,_g,t1){this.low=e1|0,this.high=_g|0,this.unsigned=!!t1}function Xe(e1){return(e1&&e1.__isLong__)===!0}function Is$1(e1){var _g=Math.clz32(e1&-e1);return e1?31-_g:_g}function cr$1(e1,_g){var t1,r1,n1;return _g?(e1>>>=0,(n1=0<=e1&&e1<256)&&(r1=As$1[e1],r1)?r1:(t1=le(e1,0,!0),n1&&(As$1[e1]=t1),t1)):(e1|=0,(n1=-128<=e1&&e1<128)&&(r1=Ss$1[e1],r1)?r1:(t1=le(e1,e1<0?-1:0,!1),n1&&(Ss$1[e1]=t1),t1))}function ct(e1,_g){if(isNaN(e1))return _g?zt$1:It;if(_g){if(e1<0)return zt$1;if(e1>=Ls$1)return $s$1}else{if(e1<=-Es$1)return nt$1;if(e1+1>=Es$1)return Fs$1}return e1<0?ct(-e1,_g).neg():le(e1%Dr|0,e1/Dr|0,_g)}function le(e1,_g,t1){return new be(e1,_g,t1)}function Jo(e1,_g,t1){if(e1.length===0)throw Error("empty string");if(typeof _g=="number"?(t1=_g,_g=!1):_g=!!_g,e1==="NaN"||e1==="Infinity"||e1==="+Infinity"||e1==="-Infinity")return _g?zt$1:It;if(t1=t1||10,t1<2||36<t1)throw RangeError("radix");var r1;if((r1=e1.indexOf("-"))>0)throw Error("interior hyphen");if(r1===0)return Jo(e1.substring(1),_g,t1).neg();for(var n1=ct(Un$1(t1,8)),i1=It,o1=0;o1<e1.length;o1+=8){var a1=Math.min(8,e1.length-o1),u1=parseInt(e1.substring(o1,o1+a1),t1);if(a1<8){var s1=ct(Un$1(t1,a1));i1=i1.mul(s1).add(ct(u1))}else i1=i1.mul(n1),i1=i1.add(ct(u1))}return i1.unsigned=_g,i1}function St$1(e1,_g){return typeof e1=="number"?ct(e1,_g):typeof e1=="string"?Jo(e1,_g):le(e1.low,e1.high,typeof _g=="boolean"?_g:e1.unsigned)}var ft,Ss$1,As$1,Un$1,Ps$1,kd$1,Dr,Ls$1,Es$1,Ds$1,It,zt$1,Er$1,Cs$1,Ko,Fs$1,$s$1,nt$1,B,Vt,Zo=L$1(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=Xe,Ss$1={},As$1={},be.fromInt=cr$1,be.fromNumber=ct,be.fromBits=le,Un$1=Math.pow,be.fromString=Jo,be.fromValue=St$1,Ps$1=65536,kd$1=1<<24,Dr=Ps$1*Ps$1,Ls$1=Dr*Dr,Es$1=Ls$1/2,Ds$1=cr$1(kd$1),It=cr$1(0),be.ZERO=It,zt$1=cr$1(0,!0),be.UZERO=zt$1,Er$1=cr$1(1),be.ONE=Er$1,Cs$1=cr$1(1,!0),be.UONE=Cs$1,Ko=cr$1(-1),be.NEG_ONE=Ko,Fs$1=le(-1,2147483647,!1),be.MAX_VALUE=Fs$1,$s$1=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s$1,nt$1=le(0,-2147483648,!1),be.MIN_VALUE=nt$1,B=be.prototype,B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(e1){if(e1=e1||10,e1<2||36<e1)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt$1)){var _g=ct(e1),t1=this.div(_g),r1=t1.mul(_g).sub(this);return t1.toString(e1)+r1.toInt().toString(e1)}else return"-"+this.neg().toString(e1);for(var n1=ct(Un$1(e1,6),this.unsigned),i1=this,o1="";;){var a1=i1.div(n1),u1=i1.sub(a1.mul(n1)).toInt()>>>0,s1=u1.toString(e1);if(i1=a1,i1.isZero())return s1+o1;for(;s1.length<6;)s1="0"+s1;o1=""+s1+o1}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt$1)?64:this.neg().getNumBitsAbs();for(var e1=this.high!=0?this.high:this.low,_g=31;_g>0&&!(e1&1<<_g);_g--);return this.high!=0?_g+33:_g+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(e1){return Xe(e1)||(e1=St$1(e1)),this.unsigned!==e1.unsigned&&this.high>>>31===1&&e1.high>>>31===1?!1:this.high===e1.high&&this.low===e1.low},B.eq=B.equals,B.notEquals=function(e1){return!this.eq(e1)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(e1){return this.comp(e1)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(e1){return this.comp(e1)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(e1){return this.comp(e1)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(e1){return this.comp(e1)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(e1){if(Xe(e1)||(e1=St$1(e1)),this.eq(e1))return 0;var _g=this.isNegative(),t1=e1.isNegative();return _g&&!t1?-1:!_g&&t1?1:this.unsigned?e1.high>>>0>this.high>>>0||e1.high===this.high&&e1.low>>>0>this.low>>>0?-1:1:this.sub(e1).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt$1)?nt$1:this.not().add(Er$1)},B.neg=B.negate,B.add=function(e1){Xe(e1)||(e1=St$1(e1));var _g=this.high>>>16,t1=this.high&65535,r1=this.low>>>16,n1=this.low&65535,i1=e1.high>>>16,o1=e1.high&65535,a1=e1.low>>>16,u1=e1.low&65535,s1=0,l1=0,c1=0,d1=0;return d1+=n1+u1,c1+=d1>>>16,d1&=65535,c1+=r1+a1,l1+=c1>>>16,c1&=65535,l1+=t1+o1,s1+=l1>>>16,l1&=65535,s1+=_g+i1,s1&=65535,le(c1<<16|d1,s1<<16|l1,this.unsigned)},B.subtract=function(e1){return Xe(e1)||(e1=St$1(e1)),this.add(e1.neg())},B.sub=B.subtract,B.multiply=function(e1){if(this.isZero())return this;if(Xe(e1)||(e1=St$1(e1)),ft){var _g=ft.mul(this.low,this.high,e1.low,e1.high);return le(_g,ft.get_high(),this.unsigned)}if(e1.isZero())return this.unsigned?zt$1:It;if(this.eq(nt$1))return e1.isOdd()?nt$1:It;if(e1.eq(nt$1))return this.isOdd()?nt$1:It;if(this.isNegative())return e1.isNegative()?this.neg().mul(e1.neg()):this.neg().mul(e1).neg();if(e1.isNegative())return this.mul(e1.neg()).neg();if(this.lt(Ds$1)&&e1.lt(Ds$1))return ct(this.toNumber()*e1.toNumber(),this.unsigned);var t1=this.high>>>16,r1=this.high&65535,n1=this.low>>>16,i1=this.low&65535,o1=e1.high>>>16,a1=e1.high&65535,u1=e1.low>>>16,s1=e1.low&65535,l1=0,c1=0,d1=0,h1=0;return h1+=i1*s1,d1+=h1>>>16,h1&=65535,d1+=n1*s1,c1+=d1>>>16,d1&=65535,d1+=i1*u1,c1+=d1>>>16,d1&=65535,c1+=r1*s1,l1+=c1>>>16,c1&=65535,c1+=n1*u1,l1+=c1>>>16,c1&=65535,c1+=i1*a1,l1+=c1>>>16,c1&=65535,l1+=t1*s1+r1*u1+n1*a1+i1*o1,l1&=65535,le(d1<<16|h1,l1<<16|c1,this.unsigned)},B.mul=B.multiply,B.divide=function(e1){if(Xe(e1)||(e1=St$1(e1)),e1.isZero())throw Error("division by zero");if(ft){if(!this.unsigned&&this.high===-2147483648&&e1.low===-1&&e1.high===-1)return this;var _g=(this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,e1.low,e1.high);return le(_g,ft.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt$1:It;var t1,r1,n1;if(this.unsigned){if(e1.unsigned||(e1=e1.toUnsigned()),e1.gt(this))return zt$1;if(e1.gt(this.shru(1)))return Cs$1;n1=zt$1}else{if(this.eq(nt$1)){if(e1.eq(Er$1)||e1.eq(Ko))return nt$1;if(e1.eq(nt$1))return Er$1;var i1=this.shr(1);return t1=i1.div(e1).shl(1),t1.eq(It)?e1.isNegative()?Er$1:Ko:(r1=this.sub(e1.mul(t1)),n1=t1.add(r1.div(e1)),n1)}else if(e1.eq(nt$1))return this.unsigned?zt$1:It;if(this.isNegative())return e1.isNegative()?this.neg().div(e1.neg()):this.neg().div(e1).neg();if(e1.isNegative())return this.div(e1.neg()).neg();n1=It}for(r1=this;r1.gte(e1);){t1=Math.max(1,Math.floor(r1.toNumber()/e1.toNumber()));for(var o1=Math.ceil(Math.log(t1)/Math.LN2),a1=o1<=48?1:Un$1(2,o1-48),u1=ct(t1),s1=u1.mul(e1);s1.isNegative()||s1.gt(r1);)t1-=a1,u1=ct(t1,this.unsigned),s1=u1.mul(e1);u1.isZero()&&(u1=Er$1),n1=n1.add(u1),r1=r1.sub(s1)}return n1},B.div=B.divide,B.modulo=function(e1){if(Xe(e1)||(e1=St$1(e1)),ft){var _g=(this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,e1.low,e1.high);return le(_g,ft.get_high(),this.unsigned)}return this.sub(this.div(e1).mul(e1))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is$1(this.low):Is$1(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(e1){return Xe(e1)||(e1=St$1(e1)),le(this.low&e1.low,this.high&e1.high,this.unsigned)},B.or=function(e1){return Xe(e1)||(e1=St$1(e1)),le(this.low|e1.low,this.high|e1.high,this.unsigned)},B.xor=function(e1){return Xe(e1)||(e1=St$1(e1)),le(this.low^e1.low,this.high^e1.high,this.unsigned)},B.shiftLeft=function(e1){return Xe(e1)&&(e1=e1.toInt()),(e1&=63)===0?this:e1<32?le(this.low<<e1,this.high<<e1|this.low>>>32-e1,this.unsigned):le(0,this.low<<e1-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(e1){return Xe(e1)&&(e1=e1.toInt()),(e1&=63)===0?this:e1<32?le(this.low>>>e1|this.high<<32-e1,this.high>>e1,this.unsigned):le(this.high>>e1-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(e1){return Xe(e1)&&(e1=e1.toInt()),(e1&=63)===0?this:e1<32?le(this.low>>>e1|this.high<<32-e1,this.high>>>e1,this.unsigned):e1===32?le(this.high,0,this.unsigned):le(this.high>>>e1-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(e1){var _g;return Xe(e1)&&(e1=e1.toInt()),(e1&=63)===0?this:e1===32?le(this.high,this.low,this.unsigned):e1<32?(_g=32-e1,le(this.low<<e1|this.high>>>_g,this.high<<e1|this.low>>>_g,this.unsigned)):(e1-=32,_g=32-e1,le(this.high<<e1|this.low>>>_g,this.low<<e1|this.high>>>_g,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(e1){var _g;return Xe(e1)&&(e1=e1.toInt()),(e1&=63)===0?this:e1===32?le(this.high,this.low,this.unsigned):e1<32?(_g=32-e1,le(this.high<<_g|this.low>>>e1,this.low<<_g|this.high>>>e1,this.unsigned)):(e1-=32,_g=32-e1,le(this.low<<_g|this.high>>>e1,this.high<<_g|this.low>>>e1,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(e1){return e1?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var e1=this.high,_g=this.low;return[_g&255,_g>>>8&255,_g>>>16&255,_g>>>24,e1&255,e1>>>8&255,e1>>>16&255,e1>>>24]},B.toBytesBE=function(){var e1=this.high,_g=this.low;return[e1>>>24,e1>>>16&255,e1>>>8&255,e1&255,_g>>>24,_g>>>16&255,_g>>>8&255,_g&255]},be.fromBytes=function(e1,_g,t1){return t1?be.fromBytesLE(e1,_g):be.fromBytesBE(e1,_g)},be.fromBytesLE=function(e1,_g){return new be(e1[0]|e1[1]<<8|e1[2]<<16|e1[3]<<24,e1[4]|e1[5]<<8|e1[6]<<16|e1[7]<<24,_g)},be.fromBytesBE=function(e1,_g){return new be(e1[4]<<24|e1[5]<<16|e1[6]<<8|e1[7],e1[0]<<24|e1[1]<<16|e1[2]<<8|e1[3],_g)},Vt=be}),_$1,zn$1=L$1(()=>{_$1={},_$1.Offset,_$1.Table,_$1.SIZEOF_SHORT=2,_$1.SIZEOF_INT=4,_$1.FILE_IDENTIFIER_LENGTH=4,_$1.SIZE_PREFIX_LENGTH=4,_$1.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_$1.int32=new Int32Array(2),_$1.float32=new Float32Array(_$1.int32.buffer),_$1.float64=new Float64Array(_$1.int32.buffer),_$1.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_$1.Long=function(e1,_g){this.low=e1|0,this.high=_g|0},_$1.Long.create=function(e1,_g){return e1==0&&_g==0?_$1.Long.ZERO:new _$1.Long(e1,_g)},_$1.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_$1.Long.prototype.equals=function(e1){return this.low==e1.low&&this.high==e1.high},_$1.Long.ZERO=new _$1.Long(0,0),_$1.Builder=function(e1){if(e1)var _g=e1;else var _g=1024;this.bb=_$1.ByteBuffer.allocate(_g),this.space=_g,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_$1.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_$1.Builder.prototype.forceDefaults=function(e1){this.force_defaults=e1},_$1.Builder.prototype.dataBuffer=function(){return this.bb},_$1.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_$1.Builder.prototype.prep=function(e1,_g){e1>this.minalign&&(this.minalign=e1);for(var t1=~(this.bb.capacity()-this.space+_g)+1&e1-1;this.space<t1+e1+_g;){var r1=this.bb.capacity();this.bb=_$1.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r1}this.pad(t1)},_$1.Builder.prototype.pad=function(e1){for(var _g=0;_g<e1;_g++)this.bb.writeInt8(--this.space,0)},_$1.Builder.prototype.writeInt8=function(e1){this.bb.writeInt8(this.space-=1,e1)},_$1.Builder.prototype.writeInt16=function(e1){this.bb.writeInt16(this.space-=2,e1)},_$1.Builder.prototype.writeInt32=function(e1){this.bb.writeInt32(this.space-=4,e1)},_$1.Builder.prototype.writeInt64=function(e1){this.bb.writeInt64(this.space-=8,e1)},_$1.Builder.prototype.writeFloat32=function(e1){this.bb.writeFloat32(this.space-=4,e1)},_$1.Builder.prototype.writeFloat64=function(e1){this.bb.writeFloat64(this.space-=8,e1)},_$1.Builder.prototype.addInt8=function(e1){this.prep(1,0),this.writeInt8(e1)},_$1.Builder.prototype.addInt16=function(e1){this.prep(2,0),this.writeInt16(e1)},_$1.Builder.prototype.addInt32=function(e1){this.prep(4,0),this.writeInt32(e1)},_$1.Builder.prototype.addInt64=function(e1){this.prep(8,0),this.writeInt64(e1)},_$1.Builder.prototype.addFloat32=function(e1){this.prep(4,0),this.writeFloat32(e1)},_$1.Builder.prototype.addFloat64=function(e1){this.prep(8,0),this.writeFloat64(e1)},_$1.Builder.prototype.addFieldInt8=function(e1,_g,t1){(this.force_defaults||_g!=t1)&&(this.addInt8(_g),this.slot(e1))},_$1.Builder.prototype.addFieldInt16=function(e1,_g,t1){(this.force_defaults||_g!=t1)&&(this.addInt16(_g),this.slot(e1))},_$1.Builder.prototype.addFieldInt32=function(e1,_g,t1){(this.force_defaults||_g!=t1)&&(this.addInt32(_g),this.slot(e1))},_$1.Builder.prototype.addFieldInt64=function(e1,_g,t1){(this.force_defaults||!_g.equals(t1))&&(this.addInt64(_g),this.slot(e1))},_$1.Builder.prototype.addFieldFloat32=function(e1,_g,t1){(this.force_defaults||_g!=t1)&&(this.addFloat32(_g),this.slot(e1))},_$1.Builder.prototype.addFieldFloat64=function(e1,_g,t1){(this.force_defaults||_g!=t1)&&(this.addFloat64(_g),this.slot(e1))},_$1.Builder.prototype.addFieldOffset=function(e1,_g,t1){(this.force_defaults||_g!=t1)&&(this.addOffset(_g),this.slot(e1))},_$1.Builder.prototype.addFieldStruct=function(e1,_g,t1){_g!=t1&&(this.nested(_g),this.slot(e1))},_$1.Builder.prototype.nested=function(e1){if(e1!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_$1.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_$1.Builder.prototype.slot=function(e1){this.vtable[e1]=this.offset()},_$1.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_$1.Builder.growByteBuffer=function(e1){var _g=e1.capacity();if(_g&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var t1=_g<<1,r1=_$1.ByteBuffer.allocate(t1);return r1.setPosition(t1-_g),r1.bytes().set(e1.bytes(),t1-_g),r1},_$1.Builder.prototype.addOffset=function(e1){this.prep(_$1.SIZEOF_INT,0),this.writeInt32(this.offset()-e1+_$1.SIZEOF_INT)},_$1.Builder.prototype.startObject=function(e1){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e1;for(var _g=0;_g<e1;_g++)this.vtable[_g]=0;this.isNested=!0,this.object_start=this.offset()},_$1.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e1=this.offset(),_g=this.vtable_in_use-1;_g>=0&&this.vtable[_g]==0;_g--);for(var t1=_g+1;_g>=0;_g--)this.addInt16(this.vtable[_g]!=0?e1-this.vtable[_g]:0);var r1=2;this.addInt16(e1-this.object_start);var n1=(t1+r1)*_$1.SIZEOF_SHORT;this.addInt16(n1);var i1=0,o1=this.space;e:for(_g=0;_g<this.vtables.length;_g++){var a1=this.bb.capacity()-this.vtables[_g];if(n1==this.bb.readInt16(a1)){for(var u1=_$1.SIZEOF_SHORT;u1<n1;u1+=_$1.SIZEOF_SHORT)if(this.bb.readInt16(o1+u1)!=this.bb.readInt16(a1+u1))continue e;i1=this.vtables[_g];break}}return i1?(this.space=this.bb.capacity()-e1,this.bb.writeInt32(this.space,i1-e1)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e1,this.offset()-e1)),this.isNested=!1,e1},_$1.Builder.prototype.finish=function(e1,_g,t1){var r1=t1?_$1.SIZE_PREFIX_LENGTH:0;if(_g){var n1=_g;if(this.prep(this.minalign,_$1.SIZEOF_INT+_$1.FILE_IDENTIFIER_LENGTH+r1),n1.length!=_$1.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_$1.FILE_IDENTIFIER_LENGTH);for(var i1=_$1.FILE_IDENTIFIER_LENGTH-1;i1>=0;i1--)this.writeInt8(n1.charCodeAt(i1))}this.prep(this.minalign,_$1.SIZEOF_INT+r1),this.addOffset(e1),r1&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_$1.Builder.prototype.finishSizePrefixed=function(e1,_g){this.finish(e1,_g,!0)},_$1.Builder.prototype.requiredField=function(e1,_g){var t1=this.bb.capacity()-e1,r1=t1-this.bb.readInt32(t1),n1=this.bb.readInt16(r1+_g)!=0;if(!n1)throw new Error("FlatBuffers: field "+_g+" must be set")},_$1.Builder.prototype.startVector=function(e1,_g,t1){this.notNested(),this.vector_num_elems=_g,this.prep(_$1.SIZEOF_INT,e1*_g),this.prep(t1,e1*_g)},_$1.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_$1.Builder.prototype.createString=function(e1){if(e1 instanceof Uint8Array)var _g=e1;else for(var _g=[],t1=0;t1<e1.length;){var r1,n1=e1.charCodeAt(t1++);if(n1<55296||n1>=56320)r1=n1;else{var i1=e1.charCodeAt(t1++);r1=(n1<<10)+i1+-56613888}r1<128?_g.push(r1):(r1<2048?_g.push(r1>>6&31|192):(r1<65536?_g.push(r1>>12&15|224):_g.push(r1>>18&7|240,r1>>12&63|128),_g.push(r1>>6&63|128)),_g.push(r1&63|128))}this.addInt8(0),this.startVector(1,_g.length,1),this.bb.setPosition(this.space-=_g.length);for(var t1=0,o1=this.space,a1=this.bb.bytes();t1<_g.length;t1++)a1[o1++]=_g[t1];return this.endVector()},_$1.Builder.prototype.createLong=function(e1,_g){return _$1.Long.create(e1,_g)},_$1.ByteBuffer=function(e1){this.bytes_=e1,this.position_=0},_$1.ByteBuffer.allocate=function(e1){return new _$1.ByteBuffer(new Uint8Array(e1))},_$1.ByteBuffer.prototype.clear=function(){this.position_=0},_$1.ByteBuffer.prototype.bytes=function(){return this.bytes_},_$1.ByteBuffer.prototype.position=function(){return this.position_},_$1.ByteBuffer.prototype.setPosition=function(e1){this.position_=e1},_$1.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_$1.ByteBuffer.prototype.readInt8=function(e1){return this.readUint8(e1)<<24>>24},_$1.ByteBuffer.prototype.readUint8=function(e1){return this.bytes_[e1]},_$1.ByteBuffer.prototype.readInt16=function(e1){return this.readUint16(e1)<<16>>16},_$1.ByteBuffer.prototype.readUint16=function(e1){return this.bytes_[e1]|this.bytes_[e1+1]<<8},_$1.ByteBuffer.prototype.readInt32=function(e1){return this.bytes_[e1]|this.bytes_[e1+1]<<8|this.bytes_[e1+2]<<16|this.bytes_[e1+3]<<24},_$1.ByteBuffer.prototype.readUint32=function(e1){return this.readInt32(e1)>>>0},_$1.ByteBuffer.prototype.readInt64=function(e1){return new _$1.Long(this.readInt32(e1),this.readInt32(e1+4))},_$1.ByteBuffer.prototype.readUint64=function(e1){return new _$1.Long(this.readUint32(e1),this.readUint32(e1+4))},_$1.ByteBuffer.prototype.readFloat32=function(e1){return _$1.int32[0]=this.readInt32(e1),_$1.float32[0]},_$1.ByteBuffer.prototype.readFloat64=function(e1){return _$1.int32[_$1.isLittleEndian?0:1]=this.readInt32(e1),_$1.int32[_$1.isLittleEndian?1:0]=this.readInt32(e1+4),_$1.float64[0]},_$1.ByteBuffer.prototype.writeInt8=function(e1,_g){this.bytes_[e1]=_g},_$1.ByteBuffer.prototype.writeUint8=function(e1,_g){this.bytes_[e1]=_g},_$1.ByteBuffer.prototype.writeInt16=function(e1,_g){this.bytes_[e1]=_g,this.bytes_[e1+1]=_g>>8},_$1.ByteBuffer.prototype.writeUint16=function(e1,_g){this.bytes_[e1]=_g,this.bytes_[e1+1]=_g>>8},_$1.ByteBuffer.prototype.writeInt32=function(e1,_g){this.bytes_[e1]=_g,this.bytes_[e1+1]=_g>>8,this.bytes_[e1+2]=_g>>16,this.bytes_[e1+3]=_g>>24},_$1.ByteBuffer.prototype.writeUint32=function(e1,_g){this.bytes_[e1]=_g,this.bytes_[e1+1]=_g>>8,this.bytes_[e1+2]=_g>>16,this.bytes_[e1+3]=_g>>24},_$1.ByteBuffer.prototype.writeInt64=function(e1,_g){this.writeInt32(e1,_g.low),this.writeInt32(e1+4,_g.high)},_$1.ByteBuffer.prototype.writeUint64=function(e1,_g){this.writeUint32(e1,_g.low),this.writeUint32(e1+4,_g.high)},_$1.ByteBuffer.prototype.writeFloat32=function(e1,_g){_$1.float32[0]=_g,this.writeInt32(e1,_$1.int32[0])},_$1.ByteBuffer.prototype.writeFloat64=function(e1,_g){_$1.float64[0]=_g,this.writeInt32(e1,_$1.int32[_$1.isLittleEndian?0:1]),this.writeInt32(e1+4,_$1.int32[_$1.isLittleEndian?1:0])},_$1.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_$1.SIZEOF_INT+_$1.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e1="",_g=0;_g<_$1.FILE_IDENTIFIER_LENGTH;_g++)e1+=String.fromCharCode(this.readInt8(this.position_+_$1.SIZEOF_INT+_g));return e1},_$1.ByteBuffer.prototype.__offset=function(e1,_g){var t1=e1-this.readInt32(e1);return _g<this.readInt16(t1)?this.readInt16(t1+_g):0},_$1.ByteBuffer.prototype.__union=function(e1,_g){return e1.bb_pos=_g+this.readInt32(_g),e1.bb=this,e1},_$1.ByteBuffer.prototype.__string=function(e1,_g){e1+=this.readInt32(e1);var t1=this.readInt32(e1),r1="",n1=0;if(e1+=_$1.SIZEOF_INT,_g===_$1.Encoding.UTF8_BYTES)return this.bytes_.subarray(e1,e1+t1);for(;n1<t1;){var i1,o1=this.readUint8(e1+n1++);if(o1<192)i1=o1;else{var a1=this.readUint8(e1+n1++);if(o1<224)i1=(o1&31)<<6|a1&63;else{var u1=this.readUint8(e1+n1++);if(o1<240)i1=(o1&15)<<12|(a1&63)<<6|u1&63;else{var s1=this.readUint8(e1+n1++);i1=(o1&7)<<18|(a1&63)<<12|(u1&63)<<6|s1&63}}}i1<65536?r1+=String.fromCharCode(i1):(i1-=65536,r1+=String.fromCharCode((i1>>10)+55296,(i1&1023)+56320))}return r1},_$1.ByteBuffer.prototype.__indirect=function(e1){return e1+this.readInt32(e1)},_$1.ByteBuffer.prototype.__vector=function(e1){return e1+this.readInt32(e1)+_$1.SIZEOF_INT},_$1.ByteBuffer.prototype.__vector_len=function(e1){return this.readInt32(e1+this.readInt32(e1))},_$1.ByteBuffer.prototype.__has_identifier=function(e1){if(e1.length!=_$1.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_$1.FILE_IDENTIFIER_LENGTH);for(var _g=0;_g<_$1.FILE_IDENTIFIER_LENGTH;_g++)if(e1.charCodeAt(_g)!=this.readInt8(this.position_+_$1.SIZEOF_INT+_g))return!1;return!0},_$1.ByteBuffer.prototype.createLong=function(e1,_g){return _$1.Long.create(e1,_g)}}),V,tn$1=L$1(()=>{zn$1(),(e1=>{(_g=>{(t1=>{(r1=>(r1[r1.UNDEFINED=0]="UNDEFINED",r1[r1.FLOAT=1]="FLOAT",r1[r1.INT=2]="INT",r1[r1.STRING=3]="STRING",r1[r1.TENSOR=4]="TENSOR",r1[r1.GRAPH=5]="GRAPH",r1[r1.FLOATS=6]="FLOATS",r1[r1.INTS=7]="INTS",r1[r1.STRINGS=8]="STRINGS",r1[r1.TENSORS=9]="TENSORS",r1[r1.GRAPHS=10]="GRAPHS",r1[r1.SPARSE_TENSOR=11]="SPARSE_TENSOR",r1[r1.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(t1.AttributeType||(t1.AttributeType={}))})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{(r1=>(r1[r1.UNKNOWN=0]="UNKNOWN",r1[r1.VALUE=1]="VALUE",r1[r1.PARAM=2]="PARAM"))(t1.DimensionValueType||(t1.DimensionValueType={}))})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{(r1=>(r1[r1.UNDEFINED=0]="UNDEFINED",r1[r1.FLOAT=1]="FLOAT",r1[r1.UINT8=2]="UINT8",r1[r1.INT8=3]="INT8",r1[r1.UINT16=4]="UINT16",r1[r1.INT16=5]="INT16",r1[r1.INT32=6]="INT32",r1[r1.INT64=7]="INT64",r1[r1.STRING=8]="STRING",r1[r1.BOOL=9]="BOOL",r1[r1.FLOAT16=10]="FLOAT16",r1[r1.DOUBLE=11]="DOUBLE",r1[r1.UINT32=12]="UINT32",r1[r1.UINT64=13]="UINT64",r1[r1.COMPLEX64=14]="COMPLEX64",r1[r1.COMPLEX128=15]="COMPLEX128",r1[r1.BFLOAT16=16]="BFLOAT16",r1[r1.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",r1[r1.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",r1[r1.FLOAT8E5M2=19]="FLOAT8E5M2",r1[r1.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(t1.TensorDataType||(t1.TensorDataType={}))})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{(r1=>(r1[r1.Primitive=0]="Primitive",r1[r1.Fused=1]="Fused"))(t1.NodeType||(t1.NodeType={}))})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{(r1=>(r1[r1.NONE=0]="NONE",r1[r1.tensor_type=1]="tensor_type",r1[r1.sequence_type=2]="sequence_type",r1[r1.map_type=3]="map_type"))(t1.TypeInfoValue||(t1.TypeInfoValue={}))})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsShape(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsShape(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}dim(i1,o1){let a1=this.bb.__offset(this.bb_pos,4);return a1?(o1||new e1.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}dimLength(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startShape(i1){i1.startObject(1)}static addDim(i1,o1){i1.addFieldOffset(0,o1,0)}static createDimVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startDimVector(i1,o1){i1.startVector(4,o1,4)}static endShape(i1){return i1.endObject()}static createShape(i1,o1){return r1.startShape(i1),r1.addDim(i1,o1),r1.endShape(i1)}}t1.Shape=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsDimension(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsDimension(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}value(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?(i1||new e1.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}denotation(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?this.bb.__string(this.bb_pos+o1,i1):null}static startDimension(i1){i1.startObject(2)}static addValue(i1,o1){i1.addFieldOffset(0,o1,0)}static addDenotation(i1,o1){i1.addFieldOffset(1,o1,0)}static endDimension(i1){return i1.endObject()}static createDimension(i1,o1,a1){return r1.startDimension(i1),r1.addValue(i1,o1),r1.addDenotation(i1,a1),r1.endDimension(i1)}}t1.Dimension=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsDimensionValue(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsDimensionValue(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}dimType(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.readInt8(this.bb_pos+i1):0}dimValue(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.readInt64(this.bb_pos+i1):this.bb.createLong(0,0)}dimParam(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?this.bb.__string(this.bb_pos+o1,i1):null}static startDimensionValue(i1){i1.startObject(3)}static addDimType(i1,o1){i1.addFieldInt8(0,o1,0)}static addDimValue(i1,o1){i1.addFieldInt64(1,o1,i1.createLong(0,0))}static addDimParam(i1,o1){i1.addFieldOffset(2,o1,0)}static endDimensionValue(i1){return i1.endObject()}static createDimensionValue(i1,o1,a1,u1){return r1.startDimensionValue(i1),r1.addDimType(i1,o1),r1.addDimValue(i1,a1),r1.addDimParam(i1,u1),r1.endDimensionValue(i1)}}t1.DimensionValue=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsTensorTypeAndShape(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsTensorTypeAndShape(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}elemType(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.readInt32(this.bb_pos+i1):0}shape(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?(i1||new e1.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}static startTensorTypeAndShape(i1){i1.startObject(2)}static addElemType(i1,o1){i1.addFieldInt32(0,o1,0)}static addShape(i1,o1){i1.addFieldOffset(1,o1,0)}static endTensorTypeAndShape(i1){return i1.endObject()}static createTensorTypeAndShape(i1,o1,a1){return r1.startTensorTypeAndShape(i1),r1.addElemType(i1,o1),r1.addShape(i1,a1),r1.endTensorTypeAndShape(i1)}}t1.TensorTypeAndShape=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsMapType(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsMapType(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}keyType(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.readInt32(this.bb_pos+i1):0}valueType(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?(i1||new e1.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}static startMapType(i1){i1.startObject(2)}static addKeyType(i1,o1){i1.addFieldInt32(0,o1,0)}static addValueType(i1,o1){i1.addFieldOffset(1,o1,0)}static endMapType(i1){return i1.endObject()}static createMapType(i1,o1,a1){return r1.startMapType(i1),r1.addKeyType(i1,o1),r1.addValueType(i1,a1),r1.endMapType(i1)}}t1.MapType=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsSequenceType(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsSequenceType(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}elemType(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?(i1||new e1.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}static startSequenceType(i1){i1.startObject(1)}static addElemType(i1,o1){i1.addFieldOffset(0,o1,0)}static endSequenceType(i1){return i1.endObject()}static createSequenceType(i1,o1){return r1.startSequenceType(i1),r1.addElemType(i1,o1),r1.endSequenceType(i1)}}t1.SequenceType=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(i1,o1,a1,u1){return i1.prep(4,12),i1.writeInt32(u1),i1.writeInt32(a1),i1.writeInt32(o1),i1.offset()}}t1.EdgeEnd=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsNodeEdge(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsNodeEdge(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}nodeIndex(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.readUint32(this.bb_pos+i1):0}inputEdges(i1,o1){let a1=this.bb.__offset(this.bb_pos,6);return a1?(o1||new e1.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+a1)+i1*12,this.bb):null}inputEdgesLength(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.__vector_len(this.bb_pos+i1):0}outputEdges(i1,o1){let a1=this.bb.__offset(this.bb_pos,8);return a1?(o1||new e1.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+a1)+i1*12,this.bb):null}outputEdgesLength(){let i1=this.bb.__offset(this.bb_pos,8);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startNodeEdge(i1){i1.startObject(3)}static addNodeIndex(i1,o1){i1.addFieldInt32(0,o1,0)}static addInputEdges(i1,o1){i1.addFieldOffset(1,o1,0)}static startInputEdgesVector(i1,o1){i1.startVector(12,o1,4)}static addOutputEdges(i1,o1){i1.addFieldOffset(2,o1,0)}static startOutputEdgesVector(i1,o1){i1.startVector(12,o1,4)}static endNodeEdge(i1){return i1.endObject()}static createNodeEdge(i1,o1,a1,u1){return r1.startNodeEdge(i1),r1.addNodeIndex(i1,o1),r1.addInputEdges(i1,a1),r1.addOutputEdges(i1,u1),r1.endNodeEdge(i1)}}t1.NodeEdge=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsNode(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsNode(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}name(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}docString(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?this.bb.__string(this.bb_pos+o1,i1):null}domain(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?this.bb.__string(this.bb_pos+o1,i1):null}sinceVersion(){let i1=this.bb.__offset(this.bb_pos,10);return i1?this.bb.readInt32(this.bb_pos+i1):0}index(){let i1=this.bb.__offset(this.bb_pos,12);return i1?this.bb.readUint32(this.bb_pos+i1):0}opType(i1){let o1=this.bb.__offset(this.bb_pos,14);return o1?this.bb.__string(this.bb_pos+o1,i1):null}type(){let i1=this.bb.__offset(this.bb_pos,16);return i1?this.bb.readInt32(this.bb_pos+i1):0}executionProviderType(i1){let o1=this.bb.__offset(this.bb_pos,18);return o1?this.bb.__string(this.bb_pos+o1,i1):null}inputs(i1,o1){let a1=this.bb.__offset(this.bb_pos,20);return a1?this.bb.__string(this.bb.__vector(this.bb_pos+a1)+i1*4,o1):null}inputsLength(){let i1=this.bb.__offset(this.bb_pos,20);return i1?this.bb.__vector_len(this.bb_pos+i1):0}outputs(i1,o1){let a1=this.bb.__offset(this.bb_pos,22);return a1?this.bb.__string(this.bb.__vector(this.bb_pos+a1)+i1*4,o1):null}outputsLength(){let i1=this.bb.__offset(this.bb_pos,22);return i1?this.bb.__vector_len(this.bb_pos+i1):0}attributes(i1,o1){let a1=this.bb.__offset(this.bb_pos,24);return a1?(o1||new e1.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}attributesLength(){let i1=this.bb.__offset(this.bb_pos,24);return i1?this.bb.__vector_len(this.bb_pos+i1):0}inputArgCounts(i1){let o1=this.bb.__offset(this.bb_pos,26);return o1?this.bb.readInt32(this.bb.__vector(this.bb_pos+o1)+i1*4):0}inputArgCountsLength(){let i1=this.bb.__offset(this.bb_pos,26);return i1?this.bb.__vector_len(this.bb_pos+i1):0}inputArgCountsArray(){let i1=this.bb.__offset(this.bb_pos,26);return i1?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i1),this.bb.__vector_len(this.bb_pos+i1)):null}implicitInputs(i1,o1){let a1=this.bb.__offset(this.bb_pos,28);return a1?this.bb.__string(this.bb.__vector(this.bb_pos+a1)+i1*4,o1):null}implicitInputsLength(){let i1=this.bb.__offset(this.bb_pos,28);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startNode(i1){i1.startObject(13)}static addName(i1,o1){i1.addFieldOffset(0,o1,0)}static addDocString(i1,o1){i1.addFieldOffset(1,o1,0)}static addDomain(i1,o1){i1.addFieldOffset(2,o1,0)}static addSinceVersion(i1,o1){i1.addFieldInt32(3,o1,0)}static addIndex(i1,o1){i1.addFieldInt32(4,o1,0)}static addOpType(i1,o1){i1.addFieldOffset(5,o1,0)}static addType(i1,o1){i1.addFieldInt32(6,o1,0)}static addExecutionProviderType(i1,o1){i1.addFieldOffset(7,o1,0)}static addInputs(i1,o1){i1.addFieldOffset(8,o1,0)}static createInputsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startInputsVector(i1,o1){i1.startVector(4,o1,4)}static addOutputs(i1,o1){i1.addFieldOffset(9,o1,0)}static createOutputsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startOutputsVector(i1,o1){i1.startVector(4,o1,4)}static addAttributes(i1,o1){i1.addFieldOffset(10,o1,0)}static createAttributesVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startAttributesVector(i1,o1){i1.startVector(4,o1,4)}static addInputArgCounts(i1,o1){i1.addFieldOffset(11,o1,0)}static createInputArgCountsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addInt32(o1[a1]);return i1.endVector()}static startInputArgCountsVector(i1,o1){i1.startVector(4,o1,4)}static addImplicitInputs(i1,o1){i1.addFieldOffset(12,o1,0)}static createImplicitInputsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startImplicitInputsVector(i1,o1){i1.startVector(4,o1,4)}static endNode(i1){return i1.endObject()}static createNode(i1,o1,a1,u1,s1,l1,c1,d1,h1,f1,g1,v1,$1,y1){return r1.startNode(i1),r1.addName(i1,o1),r1.addDocString(i1,a1),r1.addDomain(i1,u1),r1.addSinceVersion(i1,s1),r1.addIndex(i1,l1),r1.addOpType(i1,c1),r1.addType(i1,d1),r1.addExecutionProviderType(i1,h1),r1.addInputs(i1,f1),r1.addOutputs(i1,g1),r1.addAttributes(i1,v1),r1.addInputArgCounts(i1,$1),r1.addImplicitInputs(i1,y1),r1.endNode(i1)}}t1.Node=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsValueInfo(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsValueInfo(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}name(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}docString(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?this.bb.__string(this.bb_pos+o1,i1):null}type(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?(i1||new e1.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}static startValueInfo(i1){i1.startObject(3)}static addName(i1,o1){i1.addFieldOffset(0,o1,0)}static addDocString(i1,o1){i1.addFieldOffset(1,o1,0)}static addType(i1,o1){i1.addFieldOffset(2,o1,0)}static endValueInfo(i1){return i1.endObject()}static createValueInfo(i1,o1,a1,u1){return r1.startValueInfo(i1),r1.addName(i1,o1),r1.addDocString(i1,a1),r1.addType(i1,u1),r1.endValueInfo(i1)}}t1.ValueInfo=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsTypeInfo(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsTypeInfo(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}denotation(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}valueType(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.readUint8(this.bb_pos+i1):0}value(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?this.bb.__union(i1,this.bb_pos+o1):null}static startTypeInfo(i1){i1.startObject(3)}static addDenotation(i1,o1){i1.addFieldOffset(0,o1,0)}static addValueType(i1,o1){i1.addFieldInt8(1,o1,0)}static addValue(i1,o1){i1.addFieldOffset(2,o1,0)}static endTypeInfo(i1){return i1.endObject()}static createTypeInfo(i1,o1,a1,u1){return r1.startTypeInfo(i1),r1.addDenotation(i1,o1),r1.addValueType(i1,a1),r1.addValue(i1,u1),r1.endTypeInfo(i1)}}t1.TypeInfo=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsOperatorSetId(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsOperatorSetId(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}domain(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}version(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.readInt64(this.bb_pos+i1):this.bb.createLong(0,0)}static startOperatorSetId(i1){i1.startObject(2)}static addDomain(i1,o1){i1.addFieldOffset(0,o1,0)}static addVersion(i1,o1){i1.addFieldInt64(1,o1,i1.createLong(0,0))}static endOperatorSetId(i1){return i1.endObject()}static createOperatorSetId(i1,o1,a1){return r1.startOperatorSetId(i1),r1.addDomain(i1,o1),r1.addVersion(i1,a1),r1.endOperatorSetId(i1)}}t1.OperatorSetId=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsTensor(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsTensor(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}name(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}docString(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?this.bb.__string(this.bb_pos+o1,i1):null}dims(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?this.bb.readInt64(this.bb.__vector(this.bb_pos+o1)+i1*8):this.bb.createLong(0,0)}dimsLength(){let i1=this.bb.__offset(this.bb_pos,8);return i1?this.bb.__vector_len(this.bb_pos+i1):0}dataType(){let i1=this.bb.__offset(this.bb_pos,10);return i1?this.bb.readInt32(this.bb_pos+i1):0}rawData(i1){let o1=this.bb.__offset(this.bb_pos,12);return o1?this.bb.readUint8(this.bb.__vector(this.bb_pos+o1)+i1):0}rawDataLength(){let i1=this.bb.__offset(this.bb_pos,12);return i1?this.bb.__vector_len(this.bb_pos+i1):0}rawDataArray(){let i1=this.bb.__offset(this.bb_pos,12);return i1?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i1),this.bb.__vector_len(this.bb_pos+i1)):null}stringData(i1,o1){let a1=this.bb.__offset(this.bb_pos,14);return a1?this.bb.__string(this.bb.__vector(this.bb_pos+a1)+i1*4,o1):null}stringDataLength(){let i1=this.bb.__offset(this.bb_pos,14);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startTensor(i1){i1.startObject(6)}static addName(i1,o1){i1.addFieldOffset(0,o1,0)}static addDocString(i1,o1){i1.addFieldOffset(1,o1,0)}static addDims(i1,o1){i1.addFieldOffset(2,o1,0)}static createDimsVector(i1,o1){i1.startVector(8,o1.length,8);for(let a1=o1.length-1;a1>=0;a1--)i1.addInt64(o1[a1]);return i1.endVector()}static startDimsVector(i1,o1){i1.startVector(8,o1,8)}static addDataType(i1,o1){i1.addFieldInt32(3,o1,0)}static addRawData(i1,o1){i1.addFieldOffset(4,o1,0)}static createRawDataVector(i1,o1){i1.startVector(1,o1.length,1);for(let a1=o1.length-1;a1>=0;a1--)i1.addInt8(o1[a1]);return i1.endVector()}static startRawDataVector(i1,o1){i1.startVector(1,o1,1)}static addStringData(i1,o1){i1.addFieldOffset(5,o1,0)}static createStringDataVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startStringDataVector(i1,o1){i1.startVector(4,o1,4)}static endTensor(i1){return i1.endObject()}static createTensor(i1,o1,a1,u1,s1,l1,c1){return r1.startTensor(i1),r1.addName(i1,o1),r1.addDocString(i1,a1),r1.addDims(i1,u1),r1.addDataType(i1,s1),r1.addRawData(i1,l1),r1.addStringData(i1,c1),r1.endTensor(i1)}}t1.Tensor=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsSparseTensor(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsSparseTensor(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}values(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?(i1||new e1.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}indices(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?(i1||new e1.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}dims(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?this.bb.readInt64(this.bb.__vector(this.bb_pos+o1)+i1*8):this.bb.createLong(0,0)}dimsLength(){let i1=this.bb.__offset(this.bb_pos,8);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startSparseTensor(i1){i1.startObject(3)}static addValues(i1,o1){i1.addFieldOffset(0,o1,0)}static addIndices(i1,o1){i1.addFieldOffset(1,o1,0)}static addDims(i1,o1){i1.addFieldOffset(2,o1,0)}static createDimsVector(i1,o1){i1.startVector(8,o1.length,8);for(let a1=o1.length-1;a1>=0;a1--)i1.addInt64(o1[a1]);return i1.endVector()}static startDimsVector(i1,o1){i1.startVector(8,o1,8)}static endSparseTensor(i1){return i1.endObject()}static createSparseTensor(i1,o1,a1,u1){return r1.startSparseTensor(i1),r1.addValues(i1,o1),r1.addIndices(i1,a1),r1.addDims(i1,u1),r1.endSparseTensor(i1)}}t1.SparseTensor=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsAttribute(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsAttribute(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}name(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}docString(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?this.bb.__string(this.bb_pos+o1,i1):null}type(){let i1=this.bb.__offset(this.bb_pos,8);return i1?this.bb.readInt32(this.bb_pos+i1):0}f(){let i1=this.bb.__offset(this.bb_pos,10);return i1?this.bb.readFloat32(this.bb_pos+i1):0}i(){let i1=this.bb.__offset(this.bb_pos,12);return i1?this.bb.readInt64(this.bb_pos+i1):this.bb.createLong(0,0)}s(i1){let o1=this.bb.__offset(this.bb_pos,14);return o1?this.bb.__string(this.bb_pos+o1,i1):null}t(i1){let o1=this.bb.__offset(this.bb_pos,16);return o1?(i1||new e1.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}g(i1){let o1=this.bb.__offset(this.bb_pos,18);return o1?(i1||new e1.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}floats(i1){let o1=this.bb.__offset(this.bb_pos,20);return o1?this.bb.readFloat32(this.bb.__vector(this.bb_pos+o1)+i1*4):0}floatsLength(){let i1=this.bb.__offset(this.bb_pos,20);return i1?this.bb.__vector_len(this.bb_pos+i1):0}floatsArray(){let i1=this.bb.__offset(this.bb_pos,20);return i1?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i1),this.bb.__vector_len(this.bb_pos+i1)):null}ints(i1){let o1=this.bb.__offset(this.bb_pos,22);return o1?this.bb.readInt64(this.bb.__vector(this.bb_pos+o1)+i1*8):this.bb.createLong(0,0)}intsLength(){let i1=this.bb.__offset(this.bb_pos,22);return i1?this.bb.__vector_len(this.bb_pos+i1):0}strings(i1,o1){let a1=this.bb.__offset(this.bb_pos,24);return a1?this.bb.__string(this.bb.__vector(this.bb_pos+a1)+i1*4,o1):null}stringsLength(){let i1=this.bb.__offset(this.bb_pos,24);return i1?this.bb.__vector_len(this.bb_pos+i1):0}tensors(i1,o1){let a1=this.bb.__offset(this.bb_pos,26);return a1?(o1||new e1.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}tensorsLength(){let i1=this.bb.__offset(this.bb_pos,26);return i1?this.bb.__vector_len(this.bb_pos+i1):0}graphs(i1,o1){let a1=this.bb.__offset(this.bb_pos,28);return a1?(o1||new e1.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}graphsLength(){let i1=this.bb.__offset(this.bb_pos,28);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startAttribute(i1){i1.startObject(13)}static addName(i1,o1){i1.addFieldOffset(0,o1,0)}static addDocString(i1,o1){i1.addFieldOffset(1,o1,0)}static addType(i1,o1){i1.addFieldInt32(2,o1,0)}static addF(i1,o1){i1.addFieldFloat32(3,o1,0)}static addI(i1,o1){i1.addFieldInt64(4,o1,i1.createLong(0,0))}static addS(i1,o1){i1.addFieldOffset(5,o1,0)}static addT(i1,o1){i1.addFieldOffset(6,o1,0)}static addG(i1,o1){i1.addFieldOffset(7,o1,0)}static addFloats(i1,o1){i1.addFieldOffset(8,o1,0)}static createFloatsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addFloat32(o1[a1]);return i1.endVector()}static startFloatsVector(i1,o1){i1.startVector(4,o1,4)}static addInts(i1,o1){i1.addFieldOffset(9,o1,0)}static createIntsVector(i1,o1){i1.startVector(8,o1.length,8);for(let a1=o1.length-1;a1>=0;a1--)i1.addInt64(o1[a1]);return i1.endVector()}static startIntsVector(i1,o1){i1.startVector(8,o1,8)}static addStrings(i1,o1){i1.addFieldOffset(10,o1,0)}static createStringsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startStringsVector(i1,o1){i1.startVector(4,o1,4)}static addTensors(i1,o1){i1.addFieldOffset(11,o1,0)}static createTensorsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startTensorsVector(i1,o1){i1.startVector(4,o1,4)}static addGraphs(i1,o1){i1.addFieldOffset(12,o1,0)}static createGraphsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startGraphsVector(i1,o1){i1.startVector(4,o1,4)}static endAttribute(i1){return i1.endObject()}static createAttribute(i1,o1,a1,u1,s1,l1,c1,d1,h1,f1,g1,v1,$1,y1){return r1.startAttribute(i1),r1.addName(i1,o1),r1.addDocString(i1,a1),r1.addType(i1,u1),r1.addF(i1,s1),r1.addI(i1,l1),r1.addS(i1,c1),r1.addT(i1,d1),r1.addG(i1,h1),r1.addFloats(i1,f1),r1.addInts(i1,g1),r1.addStrings(i1,v1),r1.addTensors(i1,$1),r1.addGraphs(i1,y1),r1.endAttribute(i1)}}t1.Attribute=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsGraph(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsGraph(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}initializers(i1,o1){let a1=this.bb.__offset(this.bb_pos,4);return a1?(o1||new e1.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}initializersLength(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.__vector_len(this.bb_pos+i1):0}nodeArgs(i1,o1){let a1=this.bb.__offset(this.bb_pos,6);return a1?(o1||new e1.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}nodeArgsLength(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.__vector_len(this.bb_pos+i1):0}nodes(i1,o1){let a1=this.bb.__offset(this.bb_pos,8);return a1?(o1||new e1.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}nodesLength(){let i1=this.bb.__offset(this.bb_pos,8);return i1?this.bb.__vector_len(this.bb_pos+i1):0}maxNodeIndex(){let i1=this.bb.__offset(this.bb_pos,10);return i1?this.bb.readUint32(this.bb_pos+i1):0}nodeEdges(i1,o1){let a1=this.bb.__offset(this.bb_pos,12);return a1?(o1||new e1.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}nodeEdgesLength(){let i1=this.bb.__offset(this.bb_pos,12);return i1?this.bb.__vector_len(this.bb_pos+i1):0}inputs(i1,o1){let a1=this.bb.__offset(this.bb_pos,14);return a1?this.bb.__string(this.bb.__vector(this.bb_pos+a1)+i1*4,o1):null}inputsLength(){let i1=this.bb.__offset(this.bb_pos,14);return i1?this.bb.__vector_len(this.bb_pos+i1):0}outputs(i1,o1){let a1=this.bb.__offset(this.bb_pos,16);return a1?this.bb.__string(this.bb.__vector(this.bb_pos+a1)+i1*4,o1):null}outputsLength(){let i1=this.bb.__offset(this.bb_pos,16);return i1?this.bb.__vector_len(this.bb_pos+i1):0}sparseInitializers(i1,o1){let a1=this.bb.__offset(this.bb_pos,18);return a1?(o1||new e1.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}sparseInitializersLength(){let i1=this.bb.__offset(this.bb_pos,18);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startGraph(i1){i1.startObject(8)}static addInitializers(i1,o1){i1.addFieldOffset(0,o1,0)}static createInitializersVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startInitializersVector(i1,o1){i1.startVector(4,o1,4)}static addNodeArgs(i1,o1){i1.addFieldOffset(1,o1,0)}static createNodeArgsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startNodeArgsVector(i1,o1){i1.startVector(4,o1,4)}static addNodes(i1,o1){i1.addFieldOffset(2,o1,0)}static createNodesVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startNodesVector(i1,o1){i1.startVector(4,o1,4)}static addMaxNodeIndex(i1,o1){i1.addFieldInt32(3,o1,0)}static addNodeEdges(i1,o1){i1.addFieldOffset(4,o1,0)}static createNodeEdgesVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startNodeEdgesVector(i1,o1){i1.startVector(4,o1,4)}static addInputs(i1,o1){i1.addFieldOffset(5,o1,0)}static createInputsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startInputsVector(i1,o1){i1.startVector(4,o1,4)}static addOutputs(i1,o1){i1.addFieldOffset(6,o1,0)}static createOutputsVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startOutputsVector(i1,o1){i1.startVector(4,o1,4)}static addSparseInitializers(i1,o1){i1.addFieldOffset(7,o1,0)}static createSparseInitializersVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startSparseInitializersVector(i1,o1){i1.startVector(4,o1,4)}static endGraph(i1){return i1.endObject()}static createGraph(i1,o1,a1,u1,s1,l1,c1,d1,h1){return r1.startGraph(i1),r1.addInitializers(i1,o1),r1.addNodeArgs(i1,a1),r1.addNodes(i1,u1),r1.addMaxNodeIndex(i1,s1),r1.addNodeEdges(i1,l1),r1.addInputs(i1,c1),r1.addOutputs(i1,d1),r1.addSparseInitializers(i1,h1),r1.endGraph(i1)}}t1.Graph=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsModel(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsModel(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}irVersion(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.readInt64(this.bb_pos+i1):this.bb.createLong(0,0)}opsetImport(i1,o1){let a1=this.bb.__offset(this.bb_pos,6);return a1?(o1||new e1.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}opsetImportLength(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.__vector_len(this.bb_pos+i1):0}producerName(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?this.bb.__string(this.bb_pos+o1,i1):null}producerVersion(i1){let o1=this.bb.__offset(this.bb_pos,10);return o1?this.bb.__string(this.bb_pos+o1,i1):null}domain(i1){let o1=this.bb.__offset(this.bb_pos,12);return o1?this.bb.__string(this.bb_pos+o1,i1):null}modelVersion(){let i1=this.bb.__offset(this.bb_pos,14);return i1?this.bb.readInt64(this.bb_pos+i1):this.bb.createLong(0,0)}docString(i1){let o1=this.bb.__offset(this.bb_pos,16);return o1?this.bb.__string(this.bb_pos+o1,i1):null}graph(i1){let o1=this.bb.__offset(this.bb_pos,18);return o1?(i1||new e1.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}graphDocString(i1){let o1=this.bb.__offset(this.bb_pos,20);return o1?this.bb.__string(this.bb_pos+o1,i1):null}static startModel(i1){i1.startObject(9)}static addIrVersion(i1,o1){i1.addFieldInt64(0,o1,i1.createLong(0,0))}static addOpsetImport(i1,o1){i1.addFieldOffset(1,o1,0)}static createOpsetImportVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startOpsetImportVector(i1,o1){i1.startVector(4,o1,4)}static addProducerName(i1,o1){i1.addFieldOffset(2,o1,0)}static addProducerVersion(i1,o1){i1.addFieldOffset(3,o1,0)}static addDomain(i1,o1){i1.addFieldOffset(4,o1,0)}static addModelVersion(i1,o1){i1.addFieldInt64(5,o1,i1.createLong(0,0))}static addDocString(i1,o1){i1.addFieldOffset(6,o1,0)}static addGraph(i1,o1){i1.addFieldOffset(7,o1,0)}static addGraphDocString(i1,o1){i1.addFieldOffset(8,o1,0)}static endModel(i1){return i1.endObject()}static createModel(i1,o1,a1,u1,s1,l1,c1,d1,h1,f1){return r1.startModel(i1),r1.addIrVersion(i1,o1),r1.addOpsetImport(i1,a1),r1.addProducerName(i1,u1),r1.addProducerVersion(i1,s1),r1.addDomain(i1,l1),r1.addModelVersion(i1,c1),r1.addDocString(i1,d1),r1.addGraph(i1,h1),r1.addGraphDocString(i1,f1),r1.endModel(i1)}}t1.Model=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsKernelCreateInfos(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsKernelCreateInfos(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}nodeIndices(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.readUint32(this.bb.__vector(this.bb_pos+o1)+i1*4):0}nodeIndicesLength(){let i1=this.bb.__offset(this.bb_pos,4);return i1?this.bb.__vector_len(this.bb_pos+i1):0}nodeIndicesArray(){let i1=this.bb.__offset(this.bb_pos,4);return i1?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i1),this.bb.__vector_len(this.bb_pos+i1)):null}kernelDefHashes(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?this.bb.readUint64(this.bb.__vector(this.bb_pos+o1)+i1*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startKernelCreateInfos(i1){i1.startObject(2)}static addNodeIndices(i1,o1){i1.addFieldOffset(0,o1,0)}static createNodeIndicesVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addInt32(o1[a1]);return i1.endVector()}static startNodeIndicesVector(i1,o1){i1.startVector(4,o1,4)}static addKernelDefHashes(i1,o1){i1.addFieldOffset(1,o1,0)}static createKernelDefHashesVector(i1,o1){i1.startVector(8,o1.length,8);for(let a1=o1.length-1;a1>=0;a1--)i1.addInt64(o1[a1]);return i1.endVector()}static startKernelDefHashesVector(i1,o1){i1.startVector(8,o1,8)}static endKernelCreateInfos(i1){return i1.endObject()}static createKernelCreateInfos(i1,o1,a1){return r1.startKernelCreateInfos(i1),r1.addNodeIndices(i1,o1),r1.addKernelDefHashes(i1,a1),r1.endKernelCreateInfos(i1)}}t1.KernelCreateInfos=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsSubGraphSessionState(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsSubGraphSessionState(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}graphId(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}sessionState(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?(i1||new e1.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}static startSubGraphSessionState(i1){i1.startObject(2)}static addGraphId(i1,o1){i1.addFieldOffset(0,o1,0)}static addSessionState(i1,o1){i1.addFieldOffset(1,o1,0)}static endSubGraphSessionState(i1){let o1=i1.endObject();return i1.requiredField(o1,4),o1}static createSubGraphSessionState(i1,o1,a1){return r1.startSubGraphSessionState(i1),r1.addGraphId(i1,o1),r1.addSessionState(i1,a1),r1.endSubGraphSessionState(i1)}}t1.SubGraphSessionState=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsSessionState(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsSessionState(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}kernels(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?(i1||new e1.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}subGraphSessionStates(i1,o1){let a1=this.bb.__offset(this.bb_pos,6);return a1?(o1||new e1.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a1)+i1*4),this.bb):null}subGraphSessionStatesLength(){let i1=this.bb.__offset(this.bb_pos,6);return i1?this.bb.__vector_len(this.bb_pos+i1):0}static startSessionState(i1){i1.startObject(2)}static addKernels(i1,o1){i1.addFieldOffset(0,o1,0)}static addSubGraphSessionStates(i1,o1){i1.addFieldOffset(1,o1,0)}static createSubGraphSessionStatesVector(i1,o1){i1.startVector(4,o1.length,4);for(let a1=o1.length-1;a1>=0;a1--)i1.addOffset(o1[a1]);return i1.endVector()}static startSubGraphSessionStatesVector(i1,o1){i1.startVector(4,o1,4)}static endSessionState(i1){return i1.endObject()}static createSessionState(i1,o1,a1){return r1.startSessionState(i1),r1.addKernels(i1,o1),r1.addSubGraphSessionStates(i1,a1),r1.endSessionState(i1)}}t1.SessionState=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={})),(e1=>{(_g=>{(t1=>{class r1{constructor(){this.bb=null,this.bb_pos=0}__init(i1,o1){return this.bb_pos=i1,this.bb=o1,this}static getRootAsInferenceSession(i1,o1){return(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static getSizePrefixedRootAsInferenceSession(i1,o1){return i1.setPosition(i1.position()+_$1.SIZE_PREFIX_LENGTH),(o1||new r1).__init(i1.readInt32(i1.position())+i1.position(),i1)}static bufferHasIdentifier(i1){return i1.__has_identifier("ORTM")}ortVersion(i1){let o1=this.bb.__offset(this.bb_pos,4);return o1?this.bb.__string(this.bb_pos+o1,i1):null}model(i1){let o1=this.bb.__offset(this.bb_pos,6);return o1?(i1||new e1.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}sessionState(i1){let o1=this.bb.__offset(this.bb_pos,8);return o1?(i1||new e1.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o1),this.bb):null}static startInferenceSession(i1){i1.startObject(3)}static addOrtVersion(i1,o1){i1.addFieldOffset(0,o1,0)}static addModel(i1,o1){i1.addFieldOffset(1,o1,0)}static addSessionState(i1,o1){i1.addFieldOffset(2,o1,0)}static endInferenceSession(i1){return i1.endObject()}static finishInferenceSessionBuffer(i1,o1){i1.finish(o1,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(i1,o1){i1.finish(o1,"ORTM",!0)}static createInferenceSession(i1,o1,a1,u1){return r1.startInferenceSession(i1),r1.addOrtVersion(i1,o1),r1.addModel(i1,a1),r1.addSessionState(i1,u1),r1.endInferenceSession(i1)}}t1.InferenceSession=r1})(_g.fbs||(_g.fbs={}))})(e1.experimental||(e1.experimental={}))})(V||(V={}))}),Bs$1=me((e1,_g)=>{_g.exports=t1;function t1(r1,n1){for(var i1=new Array(arguments.length-1),o1=0,a1=2,u1=!0;a1<arguments.length;)i1[o1++]=arguments[a1++];return new Promise(function(s1,l1){i1[o1]=function(c1){if(u1)if(u1=!1,c1)l1(c1);else{for(var d1=new Array(arguments.length-1),h1=0;h1<d1.length;)d1[h1++]=arguments[h1];s1.apply(null,d1)}};try{r1.apply(n1||null,i1)}catch(c1){u1&&(u1=!1,l1(c1))}})}}),Gs$1=me(e1=>{var _g=e1;_g.length=function(o1){var a1=o1.length;if(!a1)return 0;for(var u1=0;--a1%4>1&&o1.charAt(a1)==="=";)++u1;return Math.ceil(o1.length*3)/4-u1};var t1=new Array(64),r1=new Array(123);for(n1=0;n1<64;)r1[t1[n1]=n1<26?n1+65:n1<52?n1+71:n1<62?n1-4:n1-59|43]=n1++;var n1;_g.encode=function(o1,a1,u1){for(var s1=null,l1=[],c1=0,d1=0,h1;a1<u1;){var f1=o1[a1++];switch(d1){case 0:l1[c1++]=t1[f1>>2],h1=(f1&3)<<4,d1=1;break;case 1:l1[c1++]=t1[h1|f1>>4],h1=(f1&15)<<2,d1=2;break;case 2:l1[c1++]=t1[h1|f1>>6],l1[c1++]=t1[f1&63],d1=0;break}c1>8191&&((s1||(s1=[])).push(String.fromCharCode.apply(String,l1)),c1=0)}return d1&&(l1[c1++]=t1[h1],l1[c1++]=61,d1===1&&(l1[c1++]=61)),s1?(c1&&s1.push(String.fromCharCode.apply(String,l1.slice(0,c1))),s1.join("")):String.fromCharCode.apply(String,l1.slice(0,c1))};var i1="invalid encoding";_g.decode=function(o1,a1,u1){for(var s1=u1,l1=0,c1,d1=0;d1<o1.length;){var h1=o1.charCodeAt(d1++);if(h1===61&&l1>1)break;if((h1=r1[h1])===void 0)throw Error(i1);switch(l1){case 0:c1=h1,l1=1;break;case 1:a1[u1++]=c1<<2|(h1&48)>>4,c1=h1,l1=2;break;case 2:a1[u1++]=(c1&15)<<4|(h1&60)>>2,c1=h1,l1=3;break;case 3:a1[u1++]=(c1&3)<<6|h1,l1=0;break}}if(l1===1)throw Error(i1);return u1-s1},_g.test=function(o1){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(o1)}}),zs$1=me((e1,_g)=>{_g.exports=t1;function t1(){this._listeners={}}t1.prototype.on=function(r1,n1,i1){return(this._listeners[r1]||(this._listeners[r1]=[])).push({fn:n1,ctx:i1||this}),this},t1.prototype.off=function(r1,n1){if(r1===void 0)this._listeners={};else if(n1===void 0)this._listeners[r1]=[];else for(var i1=this._listeners[r1],o1=0;o1<i1.length;)i1[o1].fn===n1?i1.splice(o1,1):++o1;return this},t1.prototype.emit=function(r1){var n1=this._listeners[r1];if(n1){for(var i1=[],o1=1;o1<arguments.length;)i1.push(arguments[o1++]);for(o1=0;o1<n1.length;)n1[o1].fn.apply(n1[o1++].ctx,i1)}return this}}),Xs$1=me((e1,_g)=>{_g.exports=t1(t1);function t1(a1){return typeof Float32Array<"u"?function(){var u1=new Float32Array([-0]),s1=new Uint8Array(u1.buffer),l1=s1[3]===128;function c1(g1,v1,$1){u1[0]=g1,v1[$1]=s1[0],v1[$1+1]=s1[1],v1[$1+2]=s1[2],v1[$1+3]=s1[3]}function d1(g1,v1,$1){u1[0]=g1,v1[$1]=s1[3],v1[$1+1]=s1[2],v1[$1+2]=s1[1],v1[$1+3]=s1[0]}a1.writeFloatLE=l1?c1:d1,a1.writeFloatBE=l1?d1:c1;function h1(g1,v1){return s1[0]=g1[v1],s1[1]=g1[v1+1],s1[2]=g1[v1+2],s1[3]=g1[v1+3],u1[0]}function f1(g1,v1){return s1[3]=g1[v1],s1[2]=g1[v1+1],s1[1]=g1[v1+2],s1[0]=g1[v1+3],u1[0]}a1.readFloatLE=l1?h1:f1,a1.readFloatBE=l1?f1:h1}():function(){function u1(l1,c1,d1,h1){var f1=c1<0?1:0;if(f1&&(c1=-c1),c1===0)l1(1/c1>0?0:2147483648,d1,h1);else if(isNaN(c1))l1(2143289344,d1,h1);else if(c1>34028234663852886e22)l1((f1<<31|2139095040)>>>0,d1,h1);else if(c1<11754943508222875e-54)l1((f1<<31|Math.round(c1/1401298464324817e-60))>>>0,d1,h1);else{var g1=Math.floor(Math.log(c1)/Math.LN2),v1=Math.round(c1*Math.pow(2,-g1)*8388608)&8388607;l1((f1<<31|g1+127<<23|v1)>>>0,d1,h1)}}a1.writeFloatLE=u1.bind(null,r1),a1.writeFloatBE=u1.bind(null,n1);function s1(l1,c1,d1){var h1=l1(c1,d1),f1=(h1>>31)*2+1,g1=h1>>>23&255,v1=h1&8388607;return g1===255?v1?NaN:f1*(1/0):g1===0?f1*1401298464324817e-60*v1:f1*Math.pow(2,g1-150)*(v1+8388608)}a1.readFloatLE=s1.bind(null,i1),a1.readFloatBE=s1.bind(null,o1)}(),typeof Float64Array<"u"?function(){var u1=new Float64Array([-0]),s1=new Uint8Array(u1.buffer),l1=s1[7]===128;function c1(g1,v1,$1){u1[0]=g1,v1[$1]=s1[0],v1[$1+1]=s1[1],v1[$1+2]=s1[2],v1[$1+3]=s1[3],v1[$1+4]=s1[4],v1[$1+5]=s1[5],v1[$1+6]=s1[6],v1[$1+7]=s1[7]}function d1(g1,v1,$1){u1[0]=g1,v1[$1]=s1[7],v1[$1+1]=s1[6],v1[$1+2]=s1[5],v1[$1+3]=s1[4],v1[$1+4]=s1[3],v1[$1+5]=s1[2],v1[$1+6]=s1[1],v1[$1+7]=s1[0]}a1.writeDoubleLE=l1?c1:d1,a1.writeDoubleBE=l1?d1:c1;function h1(g1,v1){return s1[0]=g1[v1],s1[1]=g1[v1+1],s1[2]=g1[v1+2],s1[3]=g1[v1+3],s1[4]=g1[v1+4],s1[5]=g1[v1+5],s1[6]=g1[v1+6],s1[7]=g1[v1+7],u1[0]}function f1(g1,v1){return s1[7]=g1[v1],s1[6]=g1[v1+1],s1[5]=g1[v1+2],s1[4]=g1[v1+3],s1[3]=g1[v1+4],s1[2]=g1[v1+5],s1[1]=g1[v1+6],s1[0]=g1[v1+7],u1[0]}a1.readDoubleLE=l1?h1:f1,a1.readDoubleBE=l1?f1:h1}():function(){function u1(l1,c1,d1,h1,f1,g1){var v1=h1<0?1:0;if(v1&&(h1=-h1),h1===0)l1(0,f1,g1+c1),l1(1/h1>0?0:2147483648,f1,g1+d1);else if(isNaN(h1))l1(0,f1,g1+c1),l1(2146959360,f1,g1+d1);else if(h1>17976931348623157e292)l1(0,f1,g1+c1),l1((v1<<31|2146435072)>>>0,f1,g1+d1);else{var $1;if(h1<22250738585072014e-324)$1=h1/5e-324,l1($1>>>0,f1,g1+c1),l1((v1<<31|$1/4294967296)>>>0,f1,g1+d1);else{var y1=Math.floor(Math.log(h1)/Math.LN2);y1===1024&&(y1=1023),$1=h1*Math.pow(2,-y1),l1($1*4503599627370496>>>0,f1,g1+c1),l1((v1<<31|y1+1023<<20|$1*1048576&1048575)>>>0,f1,g1+d1)}}}a1.writeDoubleLE=u1.bind(null,r1,0,4),a1.writeDoubleBE=u1.bind(null,n1,4,0);function s1(l1,c1,d1,h1,f1){var g1=l1(h1,f1+c1),v1=l1(h1,f1+d1),$1=(v1>>31)*2+1,y1=v1>>>20&2047,_1=4294967296*(v1&1048575)+g1;return y1===2047?_1?NaN:$1*(1/0):y1===0?$1*5e-324*_1:$1*Math.pow(2,y1-1075)*(_1+4503599627370496)}a1.readDoubleLE=s1.bind(null,i1,0,4),a1.readDoubleBE=s1.bind(null,o1,4,0)}(),a1}function r1(a1,u1,s1){u1[s1]=a1&255,u1[s1+1]=a1>>>8&255,u1[s1+2]=a1>>>16&255,u1[s1+3]=a1>>>24}function n1(a1,u1,s1){u1[s1]=a1>>>24,u1[s1+1]=a1>>>16&255,u1[s1+2]=a1>>>8&255,u1[s1+3]=a1&255}function i1(a1,u1){return(a1[u1]|a1[u1+1]<<8|a1[u1+2]<<16|a1[u1+3]<<24)>>>0}function o1(a1,u1){return(a1[u1]<<24|a1[u1+1]<<16|a1[u1+2]<<8|a1[u1+3])>>>0}}),Ks$1=me((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e1){}return null}}),Zs$1=me(e1=>{var _g=e1;_g.length=function(t1){for(var r1=0,n1=0,i1=0;i1<t1.length;++i1)n1=t1.charCodeAt(i1),n1<128?r1+=1:n1<2048?r1+=2:(n1&64512)===55296&&(t1.charCodeAt(i1+1)&64512)===56320?(++i1,r1+=4):r1+=3;return r1},_g.read=function(t1,r1,n1){var i1=n1-r1;if(i1<1)return"";for(var o1=null,a1=[],u1=0,s1;r1<n1;)s1=t1[r1++],s1<128?a1[u1++]=s1:s1>191&&s1<224?a1[u1++]=(s1&31)<<6|t1[r1++]&63:s1>239&&s1<365?(s1=((s1&7)<<18|(t1[r1++]&63)<<12|(t1[r1++]&63)<<6|t1[r1++]&63)-65536,a1[u1++]=55296+(s1>>10),a1[u1++]=56320+(s1&1023)):a1[u1++]=(s1&15)<<12|(t1[r1++]&63)<<6|t1[r1++]&63,u1>8191&&((o1||(o1=[])).push(String.fromCharCode.apply(String,a1)),u1=0);return o1?(u1&&o1.push(String.fromCharCode.apply(String,a1.slice(0,u1))),o1.join("")):String.fromCharCode.apply(String,a1.slice(0,u1))},_g.write=function(t1,r1,n1){for(var i1=n1,o1,a1,u1=0;u1<t1.length;++u1)o1=t1.charCodeAt(u1),o1<128?r1[n1++]=o1:o1<2048?(r1[n1++]=o1>>6|192,r1[n1++]=o1&63|128):(o1&64512)===55296&&((a1=t1.charCodeAt(u1+1))&64512)===56320?(o1=65536+((o1&1023)<<10)+(a1&1023),++u1,r1[n1++]=o1>>18|240,r1[n1++]=o1>>12&63|128,r1[n1++]=o1>>6&63|128,r1[n1++]=o1&63|128):(r1[n1++]=o1>>12|224,r1[n1++]=o1>>6&63|128,r1[n1++]=o1&63|128);return n1-i1}}),eu$1=me((e1,_g)=>{_g.exports=t1;function t1(r1,n1,i1){var o1=i1||8192,a1=o1>>>1,u1=null,s1=o1;return function(l1){if(l1<1||l1>a1)return r1(l1);s1+l1>o1&&(u1=r1(o1),s1=0);var c1=n1.call(u1,s1,s1+=l1);return s1&7&&(s1=(s1|7)+1),c1}}}),ru$1=me((e1,_g)=>{_g.exports=r1;var t1=Jt();function r1(a1,u1){this.lo=a1>>>0,this.hi=u1>>>0}var n1=r1.zero=new r1(0,0);n1.toNumber=function(){return 0},n1.zzEncode=n1.zzDecode=function(){return this},n1.length=function(){return 1};var i1=r1.zeroHash="\0\0\0\0\0\0\0\0";r1.fromNumber=function(a1){if(a1===0)return n1;var u1=a1<0;u1&&(a1=-a1);var s1=a1>>>0,l1=(a1-s1)/4294967296>>>0;return u1&&(l1=~l1>>>0,s1=~s1>>>0,++s1>4294967295&&(s1=0,++l1>4294967295&&(l1=0))),new r1(s1,l1)},r1.from=function(a1){if(typeof a1=="number")return r1.fromNumber(a1);if(t1.isString(a1))if(t1.Long)a1=t1.Long.fromString(a1);else return r1.fromNumber(parseInt(a1,10));return a1.low||a1.high?new r1(a1.low>>>0,a1.high>>>0):n1},r1.prototype.toNumber=function(a1){if(!a1&&this.hi>>>31){var u1=~this.lo+1>>>0,s1=~this.hi>>>0;return u1||(s1=s1+1>>>0),-(u1+s1*4294967296)}return this.lo+this.hi*4294967296},r1.prototype.toLong=function(a1){return t1.Long?new t1.Long(this.lo|0,this.hi|0,!!a1):{low:this.lo|0,high:this.hi|0,unsigned:!!a1}};var o1=String.prototype.charCodeAt;r1.fromHash=function(a1){return a1===i1?n1:new r1((o1.call(a1,0)|o1.call(a1,1)<<8|o1.call(a1,2)<<16|o1.call(a1,3)<<24)>>>0,(o1.call(a1,4)|o1.call(a1,5)<<8|o1.call(a1,6)<<16|o1.call(a1,7)<<24)>>>0)},r1.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r1.prototype.zzEncode=function(){var a1=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^a1)>>>0,this.lo=(this.lo<<1^a1)>>>0,this},r1.prototype.zzDecode=function(){var a1=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^a1)>>>0,this.hi=(this.hi>>>1^a1)>>>0,this},r1.prototype.length=function(){var a1=this.lo,u1=(this.lo>>>28|this.hi<<4)>>>0,s1=this.hi>>>24;return s1===0?u1===0?a1<16384?a1<128?1:2:a1<2097152?3:4:u1<16384?u1<128?5:6:u1<2097152?7:8:s1<128?9:10}}),Jt=me(e1=>{var _g=e1;_g.asPromise=Bs$1(),_g.base64=Gs$1(),_g.EventEmitter=zs$1(),_g.float=Xs$1(),_g.inquire=Ks$1(),_g.utf8=Zs$1(),_g.pool=eu$1(),_g.LongBits=ru$1(),_g.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),_g.global=_g.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||e1,_g.emptyArray=Object.freeze?Object.freeze([]):[],_g.emptyObject=Object.freeze?Object.freeze({}):{},_g.isInteger=Number.isInteger||function(n1){return typeof n1=="number"&&isFinite(n1)&&Math.floor(n1)===n1},_g.isString=function(n1){return typeof n1=="string"||n1 instanceof String},_g.isObject=function(n1){return n1&&typeof n1=="object"},_g.isset=_g.isSet=function(n1,i1){var o1=n1[i1];return o1!=null&&n1.hasOwnProperty(i1)?typeof o1!="object"||(Array.isArray(o1)?o1.length:Object.keys(o1).length)>0:!1},_g.Buffer=function(){try{var n1=_g.inquire("buffer").Buffer;return n1.prototype.utf8Write?n1:null}catch{return null}}(),_g._Buffer_from=null,_g._Buffer_allocUnsafe=null,_g.newBuffer=function(n1){return typeof n1=="number"?_g.Buffer?_g._Buffer_allocUnsafe(n1):new _g.Array(n1):_g.Buffer?_g._Buffer_from(n1):typeof Uint8Array>"u"?n1:new Uint8Array(n1)},_g.Array=typeof Uint8Array<"u"?Uint8Array:Array,_g.Long=_g.global.dcodeIO&&_g.global.dcodeIO.Long||_g.global.Long||_g.inquire("long"),_g.key2Re=/^true|false|0|1$/,_g.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_g.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_g.longToHash=function(n1){return n1?_g.LongBits.from(n1).toHash():_g.LongBits.zeroHash},_g.longFromHash=function(n1,i1){var o1=_g.LongBits.fromHash(n1);return _g.Long?_g.Long.fromBits(o1.lo,o1.hi,i1):o1.toNumber(!!i1)};function t1(n1,i1,o1){for(var a1=Object.keys(i1),u1=0;u1<a1.length;++u1)(n1[a1[u1]]===void 0||!o1)&&(n1[a1[u1]]=i1[a1[u1]]);return n1}_g.merge=t1,_g.lcFirst=function(n1){return n1.charAt(0).toLowerCase()+n1.substring(1)};function r1(n1){function i1(o1,a1){if(!(this instanceof i1))return new i1(o1,a1);Object.defineProperty(this,"message",{get:function(){return o1}}),Error.captureStackTrace?Error.captureStackTrace(this,i1):Object.defineProperty(this,"stack",{value:new Error().stack||""}),a1&&t1(this,a1)}return i1.prototype=Object.create(Error.prototype,{constructor:{value:i1,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return n1},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),i1}_g.newError=r1,_g.ProtocolError=r1("ProtocolError"),_g.oneOfGetter=function(n1){for(var i1={},o1=0;o1<n1.length;++o1)i1[n1[o1]]=1;return function(){for(var a1=Object.keys(this),u1=a1.length-1;u1>-1;--u1)if(i1[a1[u1]]===1&&this[a1[u1]]!==void 0&&this[a1[u1]]!==null)return a1[u1]}},_g.oneOfSetter=function(n1){return function(i1){for(var o1=0;o1<n1.length;++o1)n1[o1]!==i1&&delete this[n1[o1]]}},_g.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_g._configure=function(){var n1=_g.Buffer;if(!n1){_g._Buffer_from=_g._Buffer_allocUnsafe=null;return}_g._Buffer_from=n1.from!==Uint8Array.from&&n1.from||function(i1,o1){return new n1(i1,o1)},_g._Buffer_allocUnsafe=n1.allocUnsafe||function(i1){return new n1(i1)}}}),si$1=me((e1,_g)=>{_g.exports=l1;var t1=Jt(),r1,n1=t1.LongBits,i1=t1.base64,o1=t1.utf8;function a1(y1,_1,E1){this.fn=y1,this.len=_1,this.next=void 0,this.val=E1}function u1(){}function s1(y1){this.head=y1.head,this.tail=y1.tail,this.len=y1.len,this.next=y1.states}function l1(){this.len=0,this.head=new a1(u1,0,0),this.tail=this.head,this.states=null}var c1=function(){return t1.Buffer?function(){return(l1.create=function(){return new r1})()}:function(){return new l1}};l1.create=c1(),l1.alloc=function(y1){return new t1.Array(y1)},t1.Array!==Array&&(l1.alloc=t1.pool(l1.alloc,t1.Array.prototype.subarray)),l1.prototype._push=function(y1,_1,E1){return this.tail=this.tail.next=new a1(y1,_1,E1),this.len+=_1,this};function d1(y1,_1,E1){_1[E1]=y1&255}function h1(y1,_1,E1){for(;y1>127;)_1[E1++]=y1&127|128,y1>>>=7;_1[E1]=y1}function f1(y1,_1){this.len=y1,this.next=void 0,this.val=_1}f1.prototype=Object.create(a1.prototype),f1.prototype.fn=h1,l1.prototype.uint32=function(y1){return this.len+=(this.tail=this.tail.next=new f1((y1=y1>>>0)<128?1:y1<16384?2:y1<2097152?3:y1<268435456?4:5,y1)).len,this},l1.prototype.int32=function(y1){return y1<0?this._push(g1,10,n1.fromNumber(y1)):this.uint32(y1)},l1.prototype.sint32=function(y1){return this.uint32((y1<<1^y1>>31)>>>0)};function g1(y1,_1,E1){for(;y1.hi;)_1[E1++]=y1.lo&127|128,y1.lo=(y1.lo>>>7|y1.hi<<25)>>>0,y1.hi>>>=7;for(;y1.lo>127;)_1[E1++]=y1.lo&127|128,y1.lo=y1.lo>>>7;_1[E1++]=y1.lo}l1.prototype.uint64=function(y1){var _1=n1.from(y1);return this._push(g1,_1.length(),_1)},l1.prototype.int64=l1.prototype.uint64,l1.prototype.sint64=function(y1){var _1=n1.from(y1).zzEncode();return this._push(g1,_1.length(),_1)},l1.prototype.bool=function(y1){return this._push(d1,1,y1?1:0)};function v1(y1,_1,E1){_1[E1]=y1&255,_1[E1+1]=y1>>>8&255,_1[E1+2]=y1>>>16&255,_1[E1+3]=y1>>>24}l1.prototype.fixed32=function(y1){return this._push(v1,4,y1>>>0)},l1.prototype.sfixed32=l1.prototype.fixed32,l1.prototype.fixed64=function(y1){var _1=n1.from(y1);return this._push(v1,4,_1.lo)._push(v1,4,_1.hi)},l1.prototype.sfixed64=l1.prototype.fixed64,l1.prototype.float=function(y1){return this._push(t1.float.writeFloatLE,4,y1)},l1.prototype.double=function(y1){return this._push(t1.float.writeDoubleLE,8,y1)};var $1=t1.Array.prototype.set?function(y1,_1,E1){_1.set(y1,E1)}:function(y1,_1,E1){for(var T1=0;T1<y1.length;++T1)_1[E1+T1]=y1[T1]};l1.prototype.bytes=function(y1){var _1=y1.length>>>0;if(!_1)return this._push(d1,1,0);if(t1.isString(y1)){var E1=l1.alloc(_1=i1.length(y1));i1.decode(y1,E1,0),y1=E1}return this.uint32(_1)._push($1,_1,y1)},l1.prototype.string=function(y1){var _1=o1.length(y1);return _1?this.uint32(_1)._push(o1.write,_1,y1):this._push(d1,1,0)},l1.prototype.fork=function(){return this.states=new s1(this),this.head=this.tail=new a1(u1,0,0),this.len=0,this},l1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a1(u1,0,0),this.len=0),this},l1.prototype.ldelim=function(){var y1=this.head,_1=this.tail,E1=this.len;return this.reset().uint32(E1),E1&&(this.tail.next=y1.next,this.tail=_1,this.len+=E1),this},l1.prototype.finish=function(){for(var y1=this.head.next,_1=this.constructor.alloc(this.len),E1=0;y1;)y1.fn(y1.val,_1,E1),E1+=y1.len,y1=y1.next;return _1},l1._configure=function(y1){r1=y1,l1.create=c1(),r1._configure()}}),cu$1=me((e1,_g)=>{_g.exports=n1;var t1=si$1();(n1.prototype=Object.create(t1.prototype)).constructor=n1;var r1=Jt();function n1(){t1.call(this)}n1._configure=function(){n1.alloc=r1._Buffer_allocUnsafe,n1.writeBytesBuffer=r1.Buffer&&r1.Buffer.prototype instanceof Uint8Array&&r1.Buffer.prototype.set.name==="set"?function(o1,a1,u1){a1.set(o1,u1)}:function(o1,a1,u1){if(o1.copy)o1.copy(a1,u1,0,o1.length);else for(var s1=0;s1<o1.length;)a1[u1++]=o1[s1++]}},n1.prototype.bytes=function(o1){r1.isString(o1)&&(o1=r1._Buffer_from(o1,"base64"));var a1=o1.length>>>0;return this.uint32(a1),a1&&this._push(n1.writeBytesBuffer,a1,o1),this};function i1(o1,a1,u1){o1.length<40?r1.utf8.write(o1,a1,u1):a1.utf8Write?a1.utf8Write(o1,u1):a1.write(o1,u1)}n1.prototype.string=function(o1){var a1=r1.Buffer.byteLength(o1);return this.uint32(a1),a1&&this._push(i1,a1,o1),this},n1._configure()}),fi$1=me((e1,_g)=>{_g.exports=a1;var t1=Jt(),r1,n1=t1.LongBits,i1=t1.utf8;function o1(h1,f1){return RangeError("index out of range: "+h1.pos+" + "+(f1||1)+" > "+h1.len)}function a1(h1){this.buf=h1,this.pos=0,this.len=h1.length}var u1=typeof Uint8Array<"u"?function(h1){if(h1 instanceof Uint8Array||Array.isArray(h1))return new a1(h1);throw Error("illegal buffer")}:function(h1){if(Array.isArray(h1))return new a1(h1);throw Error("illegal buffer")},s1=function(){return t1.Buffer?function(h1){return(a1.create=function(f1){return t1.Buffer.isBuffer(f1)?new r1(f1):u1(f1)})(h1)}:u1};a1.create=s1(),a1.prototype._slice=t1.Array.prototype.subarray||t1.Array.prototype.slice,a1.prototype.uint32=function(){var h1=4294967295;return function(){if(h1=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h1=(h1|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h1=(h1|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h1=(h1|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h1=(h1|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h1;if((this.pos+=5)>this.len)throw this.pos=this.len,o1(this,10);return h1}}(),a1.prototype.int32=function(){return this.uint32()|0},a1.prototype.sint32=function(){var h1=this.uint32();return h1>>>1^-(h1&1)|0};function l1(){var h1=new n1(0,0),f1=0;if(this.len-this.pos>4){for(;f1<4;++f1)if(h1.lo=(h1.lo|(this.buf[this.pos]&127)<<f1*7)>>>0,this.buf[this.pos++]<128)return h1;if(h1.lo=(h1.lo|(this.buf[this.pos]&127)<<28)>>>0,h1.hi=(h1.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return h1;f1=0}else{for(;f1<3;++f1){if(this.pos>=this.len)throw o1(this);if(h1.lo=(h1.lo|(this.buf[this.pos]&127)<<f1*7)>>>0,this.buf[this.pos++]<128)return h1}return h1.lo=(h1.lo|(this.buf[this.pos++]&127)<<f1*7)>>>0,h1}if(this.len-this.pos>4){for(;f1<5;++f1)if(h1.hi=(h1.hi|(this.buf[this.pos]&127)<<f1*7+3)>>>0,this.buf[this.pos++]<128)return h1}else for(;f1<5;++f1){if(this.pos>=this.len)throw o1(this);if(h1.hi=(h1.hi|(this.buf[this.pos]&127)<<f1*7+3)>>>0,this.buf[this.pos++]<128)return h1}throw Error("invalid varint encoding")}a1.prototype.bool=function(){return this.uint32()!==0};function c1(h1,f1){return(h1[f1-4]|h1[f1-3]<<8|h1[f1-2]<<16|h1[f1-1]<<24)>>>0}a1.prototype.fixed32=function(){if(this.pos+4>this.len)throw o1(this,4);return c1(this.buf,this.pos+=4)},a1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o1(this,4);return c1(this.buf,this.pos+=4)|0};function d1(){if(this.pos+8>this.len)throw o1(this,8);return new n1(c1(this.buf,this.pos+=4),c1(this.buf,this.pos+=4))}a1.prototype.float=function(){if(this.pos+4>this.len)throw o1(this,4);var h1=t1.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h1},a1.prototype.double=function(){if(this.pos+8>this.len)throw o1(this,4);var h1=t1.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h1},a1.prototype.bytes=function(){var h1=this.uint32(),f1=this.pos,g1=this.pos+h1;if(g1>this.len)throw o1(this,h1);if(this.pos+=h1,Array.isArray(this.buf))return this.buf.slice(f1,g1);if(f1===g1){var v1=t1.Buffer;return v1?v1.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,f1,g1)},a1.prototype.string=function(){var h1=this.bytes();return i1.read(h1,0,h1.length)},a1.prototype.skip=function(h1){if(typeof h1=="number"){if(this.pos+h1>this.len)throw o1(this,h1);this.pos+=h1}else do if(this.pos>=this.len)throw o1(this);while(this.buf[this.pos++]&128);return this},a1.prototype.skipType=function(h1){switch(h1){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(h1=this.uint32()&7)!==4;)this.skipType(h1);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h1+" at offset "+this.pos)}return this},a1._configure=function(h1){r1=h1,a1.create=s1(),r1._configure();var f1=t1.Long?"toLong":"toNumber";t1.merge(a1.prototype,{int64:function(){return l1.call(this)[f1](!1)},uint64:function(){return l1.call(this)[f1](!0)},sint64:function(){return l1.call(this).zzDecode()[f1](!1)},fixed64:function(){return d1.call(this)[f1](!0)},sfixed64:function(){return d1.call(this)[f1](!1)}})}}),xu=me((e1,_g)=>{_g.exports=n1;var t1=fi$1();(n1.prototype=Object.create(t1.prototype)).constructor=n1;var r1=Jt();function n1(i1){t1.call(this,i1)}n1._configure=function(){r1.Buffer&&(n1.prototype._slice=r1.Buffer.prototype.slice)},n1.prototype.string=function(){var i1=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i1,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i1,this.len))},n1._configure()}),vu$1=me((e1,_g)=>{_g.exports=r1;var t1=Jt();(r1.prototype=Object.create(t1.EventEmitter.prototype)).constructor=r1;function r1(n1,i1,o1){if(typeof n1!="function")throw TypeError("rpcImpl must be a function");t1.EventEmitter.call(this),this.rpcImpl=n1,this.requestDelimited=!!i1,this.responseDelimited=!!o1}r1.prototype.rpcCall=function n1(i1,o1,a1,u1,s1){if(!u1)throw TypeError("request must be specified");var l1=this;if(!s1)return t1.asPromise(n1,l1,i1,o1,a1,u1);if(!l1.rpcImpl){setTimeout(function(){s1(Error("already ended"))},0);return}try{return l1.rpcImpl(i1,o1[l1.requestDelimited?"encodeDelimited":"encode"](u1).finish(),function(c1,d1){if(c1)return l1.emit("error",c1,i1),s1(c1);if(d1===null){l1.end(!0);return}if(!(d1 instanceof a1))try{d1=a1[l1.responseDelimited?"decodeDelimited":"decode"](d1)}catch(h1){return l1.emit("error",h1,i1),s1(h1)}return l1.emit("data",d1,i1),s1(null,d1)})}catch(c1){l1.emit("error",c1,i1),setTimeout(function(){s1(c1)},0);return}},r1.prototype.end=function(n1){return this.rpcImpl&&(n1||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou$1=me(e1=>{var _g=e1;_g.Service=vu$1()}),Su$1=me((e1,_g)=>{_g.exports={}}),Eu$1=me(e1=>{var _g=e1;_g.build="minimal",_g.Writer=si$1(),_g.BufferWriter=cu$1(),_g.Reader=fi$1(),_g.BufferReader=xu(),_g.util=Jt(),_g.rpc=Ou$1(),_g.roots=Su$1(),_g.configure=t1;function t1(){_g.util._configure(),_g.Writer._configure(_g.BufferWriter),_g.Reader._configure(_g.BufferReader)}t1()}),Lu$1=me((e1,_g)=>{_g.exports=Eu$1()}),Cr=me((e1,_g)=>{var t1=Lu$1(),r1=t1.Reader,n1=t1.Writer,i1=t1.util,o1=t1.roots.default||(t1.roots.default={});o1.onnx=function(){var a1={};return a1.Version=function(){var u1={},s1=Object.create(u1);return s1[u1[0]="_START_VERSION"]=0,s1[u1[1]="IR_VERSION_2017_10_10"]=1,s1[u1[2]="IR_VERSION_2017_10_30"]=2,s1[u1[3]="IR_VERSION_2017_11_3"]=3,s1[u1[4]="IR_VERSION_2019_1_22"]=4,s1[u1[5]="IR_VERSION_2019_3_18"]=5,s1[u1[6]="IR_VERSION_2019_9_19"]=6,s1[u1[7]="IR_VERSION_2020_5_8"]=7,s1[u1[8]="IR_VERSION_2021_7_30"]=8,s1[u1[9]="IR_VERSION"]=9,s1}(),a1.AttributeProto=function(){function u1(s1){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.name="",u1.prototype.refAttrName="",u1.prototype.docString="",u1.prototype.type=0,u1.prototype.f=0,u1.prototype.i=i1.Long?i1.Long.fromBits(0,0,!1):0,u1.prototype.s=i1.newBuffer([]),u1.prototype.t=null,u1.prototype.g=null,u1.prototype.sparseTensor=null,u1.prototype.tp=null,u1.prototype.floats=i1.emptyArray,u1.prototype.ints=i1.emptyArray,u1.prototype.strings=i1.emptyArray,u1.prototype.tensors=i1.emptyArray,u1.prototype.graphs=i1.emptyArray,u1.prototype.sparseTensors=i1.emptyArray,u1.prototype.typeProtos=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.name!=null&&Object.hasOwnProperty.call(s1,"name")&&l1.uint32(10).string(s1.name),s1.f!=null&&Object.hasOwnProperty.call(s1,"f")&&l1.uint32(21).float(s1.f),s1.i!=null&&Object.hasOwnProperty.call(s1,"i")&&l1.uint32(24).int64(s1.i),s1.s!=null&&Object.hasOwnProperty.call(s1,"s")&&l1.uint32(34).bytes(s1.s),s1.t!=null&&Object.hasOwnProperty.call(s1,"t")&&o1.onnx.TensorProto.encode(s1.t,l1.uint32(42).fork()).ldelim(),s1.g!=null&&Object.hasOwnProperty.call(s1,"g")&&o1.onnx.GraphProto.encode(s1.g,l1.uint32(50).fork()).ldelim(),s1.floats!=null&&s1.floats.length){l1.uint32(58).fork();for(var c1=0;c1<s1.floats.length;++c1)l1.float(s1.floats[c1]);l1.ldelim()}if(s1.ints!=null&&s1.ints.length){l1.uint32(66).fork();for(var c1=0;c1<s1.ints.length;++c1)l1.int64(s1.ints[c1]);l1.ldelim()}if(s1.strings!=null&&s1.strings.length)for(var c1=0;c1<s1.strings.length;++c1)l1.uint32(74).bytes(s1.strings[c1]);if(s1.tensors!=null&&s1.tensors.length)for(var c1=0;c1<s1.tensors.length;++c1)o1.onnx.TensorProto.encode(s1.tensors[c1],l1.uint32(82).fork()).ldelim();if(s1.graphs!=null&&s1.graphs.length)for(var c1=0;c1<s1.graphs.length;++c1)o1.onnx.GraphProto.encode(s1.graphs[c1],l1.uint32(90).fork()).ldelim();if(s1.docString!=null&&Object.hasOwnProperty.call(s1,"docString")&&l1.uint32(106).string(s1.docString),s1.tp!=null&&Object.hasOwnProperty.call(s1,"tp")&&o1.onnx.TypeProto.encode(s1.tp,l1.uint32(114).fork()).ldelim(),s1.typeProtos!=null&&s1.typeProtos.length)for(var c1=0;c1<s1.typeProtos.length;++c1)o1.onnx.TypeProto.encode(s1.typeProtos[c1],l1.uint32(122).fork()).ldelim();if(s1.type!=null&&Object.hasOwnProperty.call(s1,"type")&&l1.uint32(160).int32(s1.type),s1.refAttrName!=null&&Object.hasOwnProperty.call(s1,"refAttrName")&&l1.uint32(170).string(s1.refAttrName),s1.sparseTensor!=null&&Object.hasOwnProperty.call(s1,"sparseTensor")&&o1.onnx.SparseTensorProto.encode(s1.sparseTensor,l1.uint32(178).fork()).ldelim(),s1.sparseTensors!=null&&s1.sparseTensors.length)for(var c1=0;c1<s1.sparseTensors.length;++c1)o1.onnx.SparseTensorProto.encode(s1.sparseTensors[c1],l1.uint32(186).fork()).ldelim();return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.AttributeProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.name=s1.string();break}case 21:{d1.refAttrName=s1.string();break}case 13:{d1.docString=s1.string();break}case 20:{d1.type=s1.int32();break}case 2:{d1.f=s1.float();break}case 3:{d1.i=s1.int64();break}case 4:{d1.s=s1.bytes();break}case 5:{d1.t=o1.onnx.TensorProto.decode(s1,s1.uint32());break}case 6:{d1.g=o1.onnx.GraphProto.decode(s1,s1.uint32());break}case 22:{d1.sparseTensor=o1.onnx.SparseTensorProto.decode(s1,s1.uint32());break}case 14:{d1.tp=o1.onnx.TypeProto.decode(s1,s1.uint32());break}case 7:{if(d1.floats&&d1.floats.length||(d1.floats=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.floats.push(s1.float());else d1.floats.push(s1.float());break}case 8:{if(d1.ints&&d1.ints.length||(d1.ints=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.ints.push(s1.int64());else d1.ints.push(s1.int64());break}case 9:{d1.strings&&d1.strings.length||(d1.strings=[]),d1.strings.push(s1.bytes());break}case 10:{d1.tensors&&d1.tensors.length||(d1.tensors=[]),d1.tensors.push(o1.onnx.TensorProto.decode(s1,s1.uint32()));break}case 11:{d1.graphs&&d1.graphs.length||(d1.graphs=[]),d1.graphs.push(o1.onnx.GraphProto.decode(s1,s1.uint32()));break}case 23:{d1.sparseTensors&&d1.sparseTensors.length||(d1.sparseTensors=[]),d1.sparseTensors.push(o1.onnx.SparseTensorProto.decode(s1,s1.uint32()));break}case 15:{d1.typeProtos&&d1.typeProtos.length||(d1.typeProtos=[]),d1.typeProtos.push(o1.onnx.TypeProto.decode(s1,s1.uint32()));break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.name!=null&&s1.hasOwnProperty("name")&&!i1.isString(s1.name))return"name: string expected";if(s1.refAttrName!=null&&s1.hasOwnProperty("refAttrName")&&!i1.isString(s1.refAttrName))return"refAttrName: string expected";if(s1.docString!=null&&s1.hasOwnProperty("docString")&&!i1.isString(s1.docString))return"docString: string expected";if(s1.type!=null&&s1.hasOwnProperty("type"))switch(s1.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(s1.f!=null&&s1.hasOwnProperty("f")&&typeof s1.f!="number")return"f: number expected";if(s1.i!=null&&s1.hasOwnProperty("i")&&!i1.isInteger(s1.i)&&!(s1.i&&i1.isInteger(s1.i.low)&&i1.isInteger(s1.i.high)))return"i: integer|Long expected";if(s1.s!=null&&s1.hasOwnProperty("s")&&!(s1.s&&typeof s1.s.length=="number"||i1.isString(s1.s)))return"s: buffer expected";if(s1.t!=null&&s1.hasOwnProperty("t")){var l1=o1.onnx.TensorProto.verify(s1.t);if(l1)return"t."+l1}if(s1.g!=null&&s1.hasOwnProperty("g")){var l1=o1.onnx.GraphProto.verify(s1.g);if(l1)return"g."+l1}if(s1.sparseTensor!=null&&s1.hasOwnProperty("sparseTensor")){var l1=o1.onnx.SparseTensorProto.verify(s1.sparseTensor);if(l1)return"sparseTensor."+l1}if(s1.tp!=null&&s1.hasOwnProperty("tp")){var l1=o1.onnx.TypeProto.verify(s1.tp);if(l1)return"tp."+l1}if(s1.floats!=null&&s1.hasOwnProperty("floats")){if(!Array.isArray(s1.floats))return"floats: array expected";for(var c1=0;c1<s1.floats.length;++c1)if(typeof s1.floats[c1]!="number")return"floats: number[] expected"}if(s1.ints!=null&&s1.hasOwnProperty("ints")){if(!Array.isArray(s1.ints))return"ints: array expected";for(var c1=0;c1<s1.ints.length;++c1)if(!i1.isInteger(s1.ints[c1])&&!(s1.ints[c1]&&i1.isInteger(s1.ints[c1].low)&&i1.isInteger(s1.ints[c1].high)))return"ints: integer|Long[] expected"}if(s1.strings!=null&&s1.hasOwnProperty("strings")){if(!Array.isArray(s1.strings))return"strings: array expected";for(var c1=0;c1<s1.strings.length;++c1)if(!(s1.strings[c1]&&typeof s1.strings[c1].length=="number"||i1.isString(s1.strings[c1])))return"strings: buffer[] expected"}if(s1.tensors!=null&&s1.hasOwnProperty("tensors")){if(!Array.isArray(s1.tensors))return"tensors: array expected";for(var c1=0;c1<s1.tensors.length;++c1){var l1=o1.onnx.TensorProto.verify(s1.tensors[c1]);if(l1)return"tensors."+l1}}if(s1.graphs!=null&&s1.hasOwnProperty("graphs")){if(!Array.isArray(s1.graphs))return"graphs: array expected";for(var c1=0;c1<s1.graphs.length;++c1){var l1=o1.onnx.GraphProto.verify(s1.graphs[c1]);if(l1)return"graphs."+l1}}if(s1.sparseTensors!=null&&s1.hasOwnProperty("sparseTensors")){if(!Array.isArray(s1.sparseTensors))return"sparseTensors: array expected";for(var c1=0;c1<s1.sparseTensors.length;++c1){var l1=o1.onnx.SparseTensorProto.verify(s1.sparseTensors[c1]);if(l1)return"sparseTensors."+l1}}if(s1.typeProtos!=null&&s1.hasOwnProperty("typeProtos")){if(!Array.isArray(s1.typeProtos))return"typeProtos: array expected";for(var c1=0;c1<s1.typeProtos.length;++c1){var l1=o1.onnx.TypeProto.verify(s1.typeProtos[c1]);if(l1)return"typeProtos."+l1}}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.AttributeProto)return s1;var l1=new o1.onnx.AttributeProto;switch(s1.name!=null&&(l1.name=String(s1.name)),s1.refAttrName!=null&&(l1.refAttrName=String(s1.refAttrName)),s1.docString!=null&&(l1.docString=String(s1.docString)),s1.type){default:if(typeof s1.type=="number"){l1.type=s1.type;break}break;case"UNDEFINED":case 0:l1.type=0;break;case"FLOAT":case 1:l1.type=1;break;case"INT":case 2:l1.type=2;break;case"STRING":case 3:l1.type=3;break;case"TENSOR":case 4:l1.type=4;break;case"GRAPH":case 5:l1.type=5;break;case"SPARSE_TENSOR":case 11:l1.type=11;break;case"TYPE_PROTO":case 13:l1.type=13;break;case"FLOATS":case 6:l1.type=6;break;case"INTS":case 7:l1.type=7;break;case"STRINGS":case 8:l1.type=8;break;case"TENSORS":case 9:l1.type=9;break;case"GRAPHS":case 10:l1.type=10;break;case"SPARSE_TENSORS":case 12:l1.type=12;break;case"TYPE_PROTOS":case 14:l1.type=14;break}if(s1.f!=null&&(l1.f=Number(s1.f)),s1.i!=null&&(i1.Long?(l1.i=i1.Long.fromValue(s1.i)).unsigned=!1:typeof s1.i=="string"?l1.i=parseInt(s1.i,10):typeof s1.i=="number"?l1.i=s1.i:typeof s1.i=="object"&&(l1.i=new i1.LongBits(s1.i.low>>>0,s1.i.high>>>0).toNumber())),s1.s!=null&&(typeof s1.s=="string"?i1.base64.decode(s1.s,l1.s=i1.newBuffer(i1.base64.length(s1.s)),0):s1.s.length>=0&&(l1.s=s1.s)),s1.t!=null){if(typeof s1.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");l1.t=o1.onnx.TensorProto.fromObject(s1.t)}if(s1.g!=null){if(typeof s1.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");l1.g=o1.onnx.GraphProto.fromObject(s1.g)}if(s1.sparseTensor!=null){if(typeof s1.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");l1.sparseTensor=o1.onnx.SparseTensorProto.fromObject(s1.sparseTensor)}if(s1.tp!=null){if(typeof s1.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");l1.tp=o1.onnx.TypeProto.fromObject(s1.tp)}if(s1.floats){if(!Array.isArray(s1.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");l1.floats=[];for(var c1=0;c1<s1.floats.length;++c1)l1.floats[c1]=Number(s1.floats[c1])}if(s1.ints){if(!Array.isArray(s1.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");l1.ints=[];for(var c1=0;c1<s1.ints.length;++c1)i1.Long?(l1.ints[c1]=i1.Long.fromValue(s1.ints[c1])).unsigned=!1:typeof s1.ints[c1]=="string"?l1.ints[c1]=parseInt(s1.ints[c1],10):typeof s1.ints[c1]=="number"?l1.ints[c1]=s1.ints[c1]:typeof s1.ints[c1]=="object"&&(l1.ints[c1]=new i1.LongBits(s1.ints[c1].low>>>0,s1.ints[c1].high>>>0).toNumber())}if(s1.strings){if(!Array.isArray(s1.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");l1.strings=[];for(var c1=0;c1<s1.strings.length;++c1)typeof s1.strings[c1]=="string"?i1.base64.decode(s1.strings[c1],l1.strings[c1]=i1.newBuffer(i1.base64.length(s1.strings[c1])),0):s1.strings[c1].length>=0&&(l1.strings[c1]=s1.strings[c1])}if(s1.tensors){if(!Array.isArray(s1.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");l1.tensors=[];for(var c1=0;c1<s1.tensors.length;++c1){if(typeof s1.tensors[c1]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");l1.tensors[c1]=o1.onnx.TensorProto.fromObject(s1.tensors[c1])}}if(s1.graphs){if(!Array.isArray(s1.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");l1.graphs=[];for(var c1=0;c1<s1.graphs.length;++c1){if(typeof s1.graphs[c1]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");l1.graphs[c1]=o1.onnx.GraphProto.fromObject(s1.graphs[c1])}}if(s1.sparseTensors){if(!Array.isArray(s1.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");l1.sparseTensors=[];for(var c1=0;c1<s1.sparseTensors.length;++c1){if(typeof s1.sparseTensors[c1]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");l1.sparseTensors[c1]=o1.onnx.SparseTensorProto.fromObject(s1.sparseTensors[c1])}}if(s1.typeProtos){if(!Array.isArray(s1.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");l1.typeProtos=[];for(var c1=0;c1<s1.typeProtos.length;++c1){if(typeof s1.typeProtos[c1]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");l1.typeProtos[c1]=o1.onnx.TypeProto.fromObject(s1.typeProtos[c1])}}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.floats=[],c1.ints=[],c1.strings=[],c1.tensors=[],c1.graphs=[],c1.typeProtos=[],c1.sparseTensors=[]),l1.defaults){if(c1.name="",c1.f=0,i1.Long){var d1=new i1.Long(0,0,!1);c1.i=l1.longs===String?d1.toString():l1.longs===Number?d1.toNumber():d1}else c1.i=l1.longs===String?"0":0;l1.bytes===String?c1.s="":(c1.s=[],l1.bytes!==Array&&(c1.s=i1.newBuffer(c1.s))),c1.t=null,c1.g=null,c1.docString="",c1.tp=null,c1.type=l1.enums===String?"UNDEFINED":0,c1.refAttrName="",c1.sparseTensor=null}if(s1.name!=null&&s1.hasOwnProperty("name")&&(c1.name=s1.name),s1.f!=null&&s1.hasOwnProperty("f")&&(c1.f=l1.json&&!isFinite(s1.f)?String(s1.f):s1.f),s1.i!=null&&s1.hasOwnProperty("i")&&(typeof s1.i=="number"?c1.i=l1.longs===String?String(s1.i):s1.i:c1.i=l1.longs===String?i1.Long.prototype.toString.call(s1.i):l1.longs===Number?new i1.LongBits(s1.i.low>>>0,s1.i.high>>>0).toNumber():s1.i),s1.s!=null&&s1.hasOwnProperty("s")&&(c1.s=l1.bytes===String?i1.base64.encode(s1.s,0,s1.s.length):l1.bytes===Array?Array.prototype.slice.call(s1.s):s1.s),s1.t!=null&&s1.hasOwnProperty("t")&&(c1.t=o1.onnx.TensorProto.toObject(s1.t,l1)),s1.g!=null&&s1.hasOwnProperty("g")&&(c1.g=o1.onnx.GraphProto.toObject(s1.g,l1)),s1.floats&&s1.floats.length){c1.floats=[];for(var h1=0;h1<s1.floats.length;++h1)c1.floats[h1]=l1.json&&!isFinite(s1.floats[h1])?String(s1.floats[h1]):s1.floats[h1]}if(s1.ints&&s1.ints.length){c1.ints=[];for(var h1=0;h1<s1.ints.length;++h1)typeof s1.ints[h1]=="number"?c1.ints[h1]=l1.longs===String?String(s1.ints[h1]):s1.ints[h1]:c1.ints[h1]=l1.longs===String?i1.Long.prototype.toString.call(s1.ints[h1]):l1.longs===Number?new i1.LongBits(s1.ints[h1].low>>>0,s1.ints[h1].high>>>0).toNumber():s1.ints[h1]}if(s1.strings&&s1.strings.length){c1.strings=[];for(var h1=0;h1<s1.strings.length;++h1)c1.strings[h1]=l1.bytes===String?i1.base64.encode(s1.strings[h1],0,s1.strings[h1].length):l1.bytes===Array?Array.prototype.slice.call(s1.strings[h1]):s1.strings[h1]}if(s1.tensors&&s1.tensors.length){c1.tensors=[];for(var h1=0;h1<s1.tensors.length;++h1)c1.tensors[h1]=o1.onnx.TensorProto.toObject(s1.tensors[h1],l1)}if(s1.graphs&&s1.graphs.length){c1.graphs=[];for(var h1=0;h1<s1.graphs.length;++h1)c1.graphs[h1]=o1.onnx.GraphProto.toObject(s1.graphs[h1],l1)}if(s1.docString!=null&&s1.hasOwnProperty("docString")&&(c1.docString=s1.docString),s1.tp!=null&&s1.hasOwnProperty("tp")&&(c1.tp=o1.onnx.TypeProto.toObject(s1.tp,l1)),s1.typeProtos&&s1.typeProtos.length){c1.typeProtos=[];for(var h1=0;h1<s1.typeProtos.length;++h1)c1.typeProtos[h1]=o1.onnx.TypeProto.toObject(s1.typeProtos[h1],l1)}if(s1.type!=null&&s1.hasOwnProperty("type")&&(c1.type=l1.enums===String?o1.onnx.AttributeProto.AttributeType[s1.type]===void 0?s1.type:o1.onnx.AttributeProto.AttributeType[s1.type]:s1.type),s1.refAttrName!=null&&s1.hasOwnProperty("refAttrName")&&(c1.refAttrName=s1.refAttrName),s1.sparseTensor!=null&&s1.hasOwnProperty("sparseTensor")&&(c1.sparseTensor=o1.onnx.SparseTensorProto.toObject(s1.sparseTensor,l1)),s1.sparseTensors&&s1.sparseTensors.length){c1.sparseTensors=[];for(var h1=0;h1<s1.sparseTensors.length;++h1)c1.sparseTensors[h1]=o1.onnx.SparseTensorProto.toObject(s1.sparseTensors[h1],l1)}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.AttributeProto"},u1.AttributeType=function(){var s1={},l1=Object.create(s1);return l1[s1[0]="UNDEFINED"]=0,l1[s1[1]="FLOAT"]=1,l1[s1[2]="INT"]=2,l1[s1[3]="STRING"]=3,l1[s1[4]="TENSOR"]=4,l1[s1[5]="GRAPH"]=5,l1[s1[11]="SPARSE_TENSOR"]=11,l1[s1[13]="TYPE_PROTO"]=13,l1[s1[6]="FLOATS"]=6,l1[s1[7]="INTS"]=7,l1[s1[8]="STRINGS"]=8,l1[s1[9]="TENSORS"]=9,l1[s1[10]="GRAPHS"]=10,l1[s1[12]="SPARSE_TENSORS"]=12,l1[s1[14]="TYPE_PROTOS"]=14,l1}(),u1}(),a1.ValueInfoProto=function(){function u1(s1){if(s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.name="",u1.prototype.type=null,u1.prototype.docString="",u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){return l1||(l1=n1.create()),s1.name!=null&&Object.hasOwnProperty.call(s1,"name")&&l1.uint32(10).string(s1.name),s1.type!=null&&Object.hasOwnProperty.call(s1,"type")&&o1.onnx.TypeProto.encode(s1.type,l1.uint32(18).fork()).ldelim(),s1.docString!=null&&Object.hasOwnProperty.call(s1,"docString")&&l1.uint32(26).string(s1.docString),l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.ValueInfoProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.name=s1.string();break}case 2:{d1.type=o1.onnx.TypeProto.decode(s1,s1.uint32());break}case 3:{d1.docString=s1.string();break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.name!=null&&s1.hasOwnProperty("name")&&!i1.isString(s1.name))return"name: string expected";if(s1.type!=null&&s1.hasOwnProperty("type")){var l1=o1.onnx.TypeProto.verify(s1.type);if(l1)return"type."+l1}return s1.docString!=null&&s1.hasOwnProperty("docString")&&!i1.isString(s1.docString)?"docString: string expected":null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.ValueInfoProto)return s1;var l1=new o1.onnx.ValueInfoProto;if(s1.name!=null&&(l1.name=String(s1.name)),s1.type!=null){if(typeof s1.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");l1.type=o1.onnx.TypeProto.fromObject(s1.type)}return s1.docString!=null&&(l1.docString=String(s1.docString)),l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};return l1.defaults&&(c1.name="",c1.type=null,c1.docString=""),s1.name!=null&&s1.hasOwnProperty("name")&&(c1.name=s1.name),s1.type!=null&&s1.hasOwnProperty("type")&&(c1.type=o1.onnx.TypeProto.toObject(s1.type,l1)),s1.docString!=null&&s1.hasOwnProperty("docString")&&(c1.docString=s1.docString),c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.ValueInfoProto"},u1}(),a1.NodeProto=function(){function u1(s1){if(this.input=[],this.output=[],this.attribute=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.input=i1.emptyArray,u1.prototype.output=i1.emptyArray,u1.prototype.name="",u1.prototype.opType="",u1.prototype.domain="",u1.prototype.attribute=i1.emptyArray,u1.prototype.docString="",u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.input!=null&&s1.input.length)for(var c1=0;c1<s1.input.length;++c1)l1.uint32(10).string(s1.input[c1]);if(s1.output!=null&&s1.output.length)for(var c1=0;c1<s1.output.length;++c1)l1.uint32(18).string(s1.output[c1]);if(s1.name!=null&&Object.hasOwnProperty.call(s1,"name")&&l1.uint32(26).string(s1.name),s1.opType!=null&&Object.hasOwnProperty.call(s1,"opType")&&l1.uint32(34).string(s1.opType),s1.attribute!=null&&s1.attribute.length)for(var c1=0;c1<s1.attribute.length;++c1)o1.onnx.AttributeProto.encode(s1.attribute[c1],l1.uint32(42).fork()).ldelim();return s1.docString!=null&&Object.hasOwnProperty.call(s1,"docString")&&l1.uint32(50).string(s1.docString),s1.domain!=null&&Object.hasOwnProperty.call(s1,"domain")&&l1.uint32(58).string(s1.domain),l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.NodeProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.input&&d1.input.length||(d1.input=[]),d1.input.push(s1.string());break}case 2:{d1.output&&d1.output.length||(d1.output=[]),d1.output.push(s1.string());break}case 3:{d1.name=s1.string();break}case 4:{d1.opType=s1.string();break}case 7:{d1.domain=s1.string();break}case 5:{d1.attribute&&d1.attribute.length||(d1.attribute=[]),d1.attribute.push(o1.onnx.AttributeProto.decode(s1,s1.uint32()));break}case 6:{d1.docString=s1.string();break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.input!=null&&s1.hasOwnProperty("input")){if(!Array.isArray(s1.input))return"input: array expected";for(var l1=0;l1<s1.input.length;++l1)if(!i1.isString(s1.input[l1]))return"input: string[] expected"}if(s1.output!=null&&s1.hasOwnProperty("output")){if(!Array.isArray(s1.output))return"output: array expected";for(var l1=0;l1<s1.output.length;++l1)if(!i1.isString(s1.output[l1]))return"output: string[] expected"}if(s1.name!=null&&s1.hasOwnProperty("name")&&!i1.isString(s1.name))return"name: string expected";if(s1.opType!=null&&s1.hasOwnProperty("opType")&&!i1.isString(s1.opType))return"opType: string expected";if(s1.domain!=null&&s1.hasOwnProperty("domain")&&!i1.isString(s1.domain))return"domain: string expected";if(s1.attribute!=null&&s1.hasOwnProperty("attribute")){if(!Array.isArray(s1.attribute))return"attribute: array expected";for(var l1=0;l1<s1.attribute.length;++l1){var c1=o1.onnx.AttributeProto.verify(s1.attribute[l1]);if(c1)return"attribute."+c1}}return s1.docString!=null&&s1.hasOwnProperty("docString")&&!i1.isString(s1.docString)?"docString: string expected":null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.NodeProto)return s1;var l1=new o1.onnx.NodeProto;if(s1.input){if(!Array.isArray(s1.input))throw TypeError(".onnx.NodeProto.input: array expected");l1.input=[];for(var c1=0;c1<s1.input.length;++c1)l1.input[c1]=String(s1.input[c1])}if(s1.output){if(!Array.isArray(s1.output))throw TypeError(".onnx.NodeProto.output: array expected");l1.output=[];for(var c1=0;c1<s1.output.length;++c1)l1.output[c1]=String(s1.output[c1])}if(s1.name!=null&&(l1.name=String(s1.name)),s1.opType!=null&&(l1.opType=String(s1.opType)),s1.domain!=null&&(l1.domain=String(s1.domain)),s1.attribute){if(!Array.isArray(s1.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");l1.attribute=[];for(var c1=0;c1<s1.attribute.length;++c1){if(typeof s1.attribute[c1]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");l1.attribute[c1]=o1.onnx.AttributeProto.fromObject(s1.attribute[c1])}}return s1.docString!=null&&(l1.docString=String(s1.docString)),l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.input=[],c1.output=[],c1.attribute=[]),l1.defaults&&(c1.name="",c1.opType="",c1.docString="",c1.domain=""),s1.input&&s1.input.length){c1.input=[];for(var d1=0;d1<s1.input.length;++d1)c1.input[d1]=s1.input[d1]}if(s1.output&&s1.output.length){c1.output=[];for(var d1=0;d1<s1.output.length;++d1)c1.output[d1]=s1.output[d1]}if(s1.name!=null&&s1.hasOwnProperty("name")&&(c1.name=s1.name),s1.opType!=null&&s1.hasOwnProperty("opType")&&(c1.opType=s1.opType),s1.attribute&&s1.attribute.length){c1.attribute=[];for(var d1=0;d1<s1.attribute.length;++d1)c1.attribute[d1]=o1.onnx.AttributeProto.toObject(s1.attribute[d1],l1)}return s1.docString!=null&&s1.hasOwnProperty("docString")&&(c1.docString=s1.docString),s1.domain!=null&&s1.hasOwnProperty("domain")&&(c1.domain=s1.domain),c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.NodeProto"},u1}(),a1.TrainingInfoProto=function(){function u1(s1){if(this.initializationBinding=[],this.updateBinding=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.initialization=null,u1.prototype.algorithm=null,u1.prototype.initializationBinding=i1.emptyArray,u1.prototype.updateBinding=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.initialization!=null&&Object.hasOwnProperty.call(s1,"initialization")&&o1.onnx.GraphProto.encode(s1.initialization,l1.uint32(10).fork()).ldelim(),s1.algorithm!=null&&Object.hasOwnProperty.call(s1,"algorithm")&&o1.onnx.GraphProto.encode(s1.algorithm,l1.uint32(18).fork()).ldelim(),s1.initializationBinding!=null&&s1.initializationBinding.length)for(var c1=0;c1<s1.initializationBinding.length;++c1)o1.onnx.StringStringEntryProto.encode(s1.initializationBinding[c1],l1.uint32(26).fork()).ldelim();if(s1.updateBinding!=null&&s1.updateBinding.length)for(var c1=0;c1<s1.updateBinding.length;++c1)o1.onnx.StringStringEntryProto.encode(s1.updateBinding[c1],l1.uint32(34).fork()).ldelim();return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.TrainingInfoProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.initialization=o1.onnx.GraphProto.decode(s1,s1.uint32());break}case 2:{d1.algorithm=o1.onnx.GraphProto.decode(s1,s1.uint32());break}case 3:{d1.initializationBinding&&d1.initializationBinding.length||(d1.initializationBinding=[]),d1.initializationBinding.push(o1.onnx.StringStringEntryProto.decode(s1,s1.uint32()));break}case 4:{d1.updateBinding&&d1.updateBinding.length||(d1.updateBinding=[]),d1.updateBinding.push(o1.onnx.StringStringEntryProto.decode(s1,s1.uint32()));break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.initialization!=null&&s1.hasOwnProperty("initialization")){var l1=o1.onnx.GraphProto.verify(s1.initialization);if(l1)return"initialization."+l1}if(s1.algorithm!=null&&s1.hasOwnProperty("algorithm")){var l1=o1.onnx.GraphProto.verify(s1.algorithm);if(l1)return"algorithm."+l1}if(s1.initializationBinding!=null&&s1.hasOwnProperty("initializationBinding")){if(!Array.isArray(s1.initializationBinding))return"initializationBinding: array expected";for(var c1=0;c1<s1.initializationBinding.length;++c1){var l1=o1.onnx.StringStringEntryProto.verify(s1.initializationBinding[c1]);if(l1)return"initializationBinding."+l1}}if(s1.updateBinding!=null&&s1.hasOwnProperty("updateBinding")){if(!Array.isArray(s1.updateBinding))return"updateBinding: array expected";for(var c1=0;c1<s1.updateBinding.length;++c1){var l1=o1.onnx.StringStringEntryProto.verify(s1.updateBinding[c1]);if(l1)return"updateBinding."+l1}}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.TrainingInfoProto)return s1;var l1=new o1.onnx.TrainingInfoProto;if(s1.initialization!=null){if(typeof s1.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");l1.initialization=o1.onnx.GraphProto.fromObject(s1.initialization)}if(s1.algorithm!=null){if(typeof s1.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");l1.algorithm=o1.onnx.GraphProto.fromObject(s1.algorithm)}if(s1.initializationBinding){if(!Array.isArray(s1.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");l1.initializationBinding=[];for(var c1=0;c1<s1.initializationBinding.length;++c1){if(typeof s1.initializationBinding[c1]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");l1.initializationBinding[c1]=o1.onnx.StringStringEntryProto.fromObject(s1.initializationBinding[c1])}}if(s1.updateBinding){if(!Array.isArray(s1.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");l1.updateBinding=[];for(var c1=0;c1<s1.updateBinding.length;++c1){if(typeof s1.updateBinding[c1]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");l1.updateBinding[c1]=o1.onnx.StringStringEntryProto.fromObject(s1.updateBinding[c1])}}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.initializationBinding=[],c1.updateBinding=[]),l1.defaults&&(c1.initialization=null,c1.algorithm=null),s1.initialization!=null&&s1.hasOwnProperty("initialization")&&(c1.initialization=o1.onnx.GraphProto.toObject(s1.initialization,l1)),s1.algorithm!=null&&s1.hasOwnProperty("algorithm")&&(c1.algorithm=o1.onnx.GraphProto.toObject(s1.algorithm,l1)),s1.initializationBinding&&s1.initializationBinding.length){c1.initializationBinding=[];for(var d1=0;d1<s1.initializationBinding.length;++d1)c1.initializationBinding[d1]=o1.onnx.StringStringEntryProto.toObject(s1.initializationBinding[d1],l1)}if(s1.updateBinding&&s1.updateBinding.length){c1.updateBinding=[];for(var d1=0;d1<s1.updateBinding.length;++d1)c1.updateBinding[d1]=o1.onnx.StringStringEntryProto.toObject(s1.updateBinding[d1],l1)}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.TrainingInfoProto"},u1}(),a1.ModelProto=function(){function u1(s1){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.irVersion=i1.Long?i1.Long.fromBits(0,0,!1):0,u1.prototype.opsetImport=i1.emptyArray,u1.prototype.producerName="",u1.prototype.producerVersion="",u1.prototype.domain="",u1.prototype.modelVersion=i1.Long?i1.Long.fromBits(0,0,!1):0,u1.prototype.docString="",u1.prototype.graph=null,u1.prototype.metadataProps=i1.emptyArray,u1.prototype.trainingInfo=i1.emptyArray,u1.prototype.functions=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.irVersion!=null&&Object.hasOwnProperty.call(s1,"irVersion")&&l1.uint32(8).int64(s1.irVersion),s1.producerName!=null&&Object.hasOwnProperty.call(s1,"producerName")&&l1.uint32(18).string(s1.producerName),s1.producerVersion!=null&&Object.hasOwnProperty.call(s1,"producerVersion")&&l1.uint32(26).string(s1.producerVersion),s1.domain!=null&&Object.hasOwnProperty.call(s1,"domain")&&l1.uint32(34).string(s1.domain),s1.modelVersion!=null&&Object.hasOwnProperty.call(s1,"modelVersion")&&l1.uint32(40).int64(s1.modelVersion),s1.docString!=null&&Object.hasOwnProperty.call(s1,"docString")&&l1.uint32(50).string(s1.docString),s1.graph!=null&&Object.hasOwnProperty.call(s1,"graph")&&o1.onnx.GraphProto.encode(s1.graph,l1.uint32(58).fork()).ldelim(),s1.opsetImport!=null&&s1.opsetImport.length)for(var c1=0;c1<s1.opsetImport.length;++c1)o1.onnx.OperatorSetIdProto.encode(s1.opsetImport[c1],l1.uint32(66).fork()).ldelim();if(s1.metadataProps!=null&&s1.metadataProps.length)for(var c1=0;c1<s1.metadataProps.length;++c1)o1.onnx.StringStringEntryProto.encode(s1.metadataProps[c1],l1.uint32(114).fork()).ldelim();if(s1.trainingInfo!=null&&s1.trainingInfo.length)for(var c1=0;c1<s1.trainingInfo.length;++c1)o1.onnx.TrainingInfoProto.encode(s1.trainingInfo[c1],l1.uint32(162).fork()).ldelim();if(s1.functions!=null&&s1.functions.length)for(var c1=0;c1<s1.functions.length;++c1)o1.onnx.FunctionProto.encode(s1.functions[c1],l1.uint32(202).fork()).ldelim();return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.ModelProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.irVersion=s1.int64();break}case 8:{d1.opsetImport&&d1.opsetImport.length||(d1.opsetImport=[]),d1.opsetImport.push(o1.onnx.OperatorSetIdProto.decode(s1,s1.uint32()));break}case 2:{d1.producerName=s1.string();break}case 3:{d1.producerVersion=s1.string();break}case 4:{d1.domain=s1.string();break}case 5:{d1.modelVersion=s1.int64();break}case 6:{d1.docString=s1.string();break}case 7:{d1.graph=o1.onnx.GraphProto.decode(s1,s1.uint32());break}case 14:{d1.metadataProps&&d1.metadataProps.length||(d1.metadataProps=[]),d1.metadataProps.push(o1.onnx.StringStringEntryProto.decode(s1,s1.uint32()));break}case 20:{d1.trainingInfo&&d1.trainingInfo.length||(d1.trainingInfo=[]),d1.trainingInfo.push(o1.onnx.TrainingInfoProto.decode(s1,s1.uint32()));break}case 25:{d1.functions&&d1.functions.length||(d1.functions=[]),d1.functions.push(o1.onnx.FunctionProto.decode(s1,s1.uint32()));break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.irVersion!=null&&s1.hasOwnProperty("irVersion")&&!i1.isInteger(s1.irVersion)&&!(s1.irVersion&&i1.isInteger(s1.irVersion.low)&&i1.isInteger(s1.irVersion.high)))return"irVersion: integer|Long expected";if(s1.opsetImport!=null&&s1.hasOwnProperty("opsetImport")){if(!Array.isArray(s1.opsetImport))return"opsetImport: array expected";for(var l1=0;l1<s1.opsetImport.length;++l1){var c1=o1.onnx.OperatorSetIdProto.verify(s1.opsetImport[l1]);if(c1)return"opsetImport."+c1}}if(s1.producerName!=null&&s1.hasOwnProperty("producerName")&&!i1.isString(s1.producerName))return"producerName: string expected";if(s1.producerVersion!=null&&s1.hasOwnProperty("producerVersion")&&!i1.isString(s1.producerVersion))return"producerVersion: string expected";if(s1.domain!=null&&s1.hasOwnProperty("domain")&&!i1.isString(s1.domain))return"domain: string expected";if(s1.modelVersion!=null&&s1.hasOwnProperty("modelVersion")&&!i1.isInteger(s1.modelVersion)&&!(s1.modelVersion&&i1.isInteger(s1.modelVersion.low)&&i1.isInteger(s1.modelVersion.high)))return"modelVersion: integer|Long expected";if(s1.docString!=null&&s1.hasOwnProperty("docString")&&!i1.isString(s1.docString))return"docString: string expected";if(s1.graph!=null&&s1.hasOwnProperty("graph")){var c1=o1.onnx.GraphProto.verify(s1.graph);if(c1)return"graph."+c1}if(s1.metadataProps!=null&&s1.hasOwnProperty("metadataProps")){if(!Array.isArray(s1.metadataProps))return"metadataProps: array expected";for(var l1=0;l1<s1.metadataProps.length;++l1){var c1=o1.onnx.StringStringEntryProto.verify(s1.metadataProps[l1]);if(c1)return"metadataProps."+c1}}if(s1.trainingInfo!=null&&s1.hasOwnProperty("trainingInfo")){if(!Array.isArray(s1.trainingInfo))return"trainingInfo: array expected";for(var l1=0;l1<s1.trainingInfo.length;++l1){var c1=o1.onnx.TrainingInfoProto.verify(s1.trainingInfo[l1]);if(c1)return"trainingInfo."+c1}}if(s1.functions!=null&&s1.hasOwnProperty("functions")){if(!Array.isArray(s1.functions))return"functions: array expected";for(var l1=0;l1<s1.functions.length;++l1){var c1=o1.onnx.FunctionProto.verify(s1.functions[l1]);if(c1)return"functions."+c1}}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.ModelProto)return s1;var l1=new o1.onnx.ModelProto;if(s1.irVersion!=null&&(i1.Long?(l1.irVersion=i1.Long.fromValue(s1.irVersion)).unsigned=!1:typeof s1.irVersion=="string"?l1.irVersion=parseInt(s1.irVersion,10):typeof s1.irVersion=="number"?l1.irVersion=s1.irVersion:typeof s1.irVersion=="object"&&(l1.irVersion=new i1.LongBits(s1.irVersion.low>>>0,s1.irVersion.high>>>0).toNumber())),s1.opsetImport){if(!Array.isArray(s1.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");l1.opsetImport=[];for(var c1=0;c1<s1.opsetImport.length;++c1){if(typeof s1.opsetImport[c1]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");l1.opsetImport[c1]=o1.onnx.OperatorSetIdProto.fromObject(s1.opsetImport[c1])}}if(s1.producerName!=null&&(l1.producerName=String(s1.producerName)),s1.producerVersion!=null&&(l1.producerVersion=String(s1.producerVersion)),s1.domain!=null&&(l1.domain=String(s1.domain)),s1.modelVersion!=null&&(i1.Long?(l1.modelVersion=i1.Long.fromValue(s1.modelVersion)).unsigned=!1:typeof s1.modelVersion=="string"?l1.modelVersion=parseInt(s1.modelVersion,10):typeof s1.modelVersion=="number"?l1.modelVersion=s1.modelVersion:typeof s1.modelVersion=="object"&&(l1.modelVersion=new i1.LongBits(s1.modelVersion.low>>>0,s1.modelVersion.high>>>0).toNumber())),s1.docString!=null&&(l1.docString=String(s1.docString)),s1.graph!=null){if(typeof s1.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");l1.graph=o1.onnx.GraphProto.fromObject(s1.graph)}if(s1.metadataProps){if(!Array.isArray(s1.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");l1.metadataProps=[];for(var c1=0;c1<s1.metadataProps.length;++c1){if(typeof s1.metadataProps[c1]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");l1.metadataProps[c1]=o1.onnx.StringStringEntryProto.fromObject(s1.metadataProps[c1])}}if(s1.trainingInfo){if(!Array.isArray(s1.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");l1.trainingInfo=[];for(var c1=0;c1<s1.trainingInfo.length;++c1){if(typeof s1.trainingInfo[c1]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");l1.trainingInfo[c1]=o1.onnx.TrainingInfoProto.fromObject(s1.trainingInfo[c1])}}if(s1.functions){if(!Array.isArray(s1.functions))throw TypeError(".onnx.ModelProto.functions: array expected");l1.functions=[];for(var c1=0;c1<s1.functions.length;++c1){if(typeof s1.functions[c1]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");l1.functions[c1]=o1.onnx.FunctionProto.fromObject(s1.functions[c1])}}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.opsetImport=[],c1.metadataProps=[],c1.trainingInfo=[],c1.functions=[]),l1.defaults){if(i1.Long){var d1=new i1.Long(0,0,!1);c1.irVersion=l1.longs===String?d1.toString():l1.longs===Number?d1.toNumber():d1}else c1.irVersion=l1.longs===String?"0":0;if(c1.producerName="",c1.producerVersion="",c1.domain="",i1.Long){var d1=new i1.Long(0,0,!1);c1.modelVersion=l1.longs===String?d1.toString():l1.longs===Number?d1.toNumber():d1}else c1.modelVersion=l1.longs===String?"0":0;c1.docString="",c1.graph=null}if(s1.irVersion!=null&&s1.hasOwnProperty("irVersion")&&(typeof s1.irVersion=="number"?c1.irVersion=l1.longs===String?String(s1.irVersion):s1.irVersion:c1.irVersion=l1.longs===String?i1.Long.prototype.toString.call(s1.irVersion):l1.longs===Number?new i1.LongBits(s1.irVersion.low>>>0,s1.irVersion.high>>>0).toNumber():s1.irVersion),s1.producerName!=null&&s1.hasOwnProperty("producerName")&&(c1.producerName=s1.producerName),s1.producerVersion!=null&&s1.hasOwnProperty("producerVersion")&&(c1.producerVersion=s1.producerVersion),s1.domain!=null&&s1.hasOwnProperty("domain")&&(c1.domain=s1.domain),s1.modelVersion!=null&&s1.hasOwnProperty("modelVersion")&&(typeof s1.modelVersion=="number"?c1.modelVersion=l1.longs===String?String(s1.modelVersion):s1.modelVersion:c1.modelVersion=l1.longs===String?i1.Long.prototype.toString.call(s1.modelVersion):l1.longs===Number?new i1.LongBits(s1.modelVersion.low>>>0,s1.modelVersion.high>>>0).toNumber():s1.modelVersion),s1.docString!=null&&s1.hasOwnProperty("docString")&&(c1.docString=s1.docString),s1.graph!=null&&s1.hasOwnProperty("graph")&&(c1.graph=o1.onnx.GraphProto.toObject(s1.graph,l1)),s1.opsetImport&&s1.opsetImport.length){c1.opsetImport=[];for(var h1=0;h1<s1.opsetImport.length;++h1)c1.opsetImport[h1]=o1.onnx.OperatorSetIdProto.toObject(s1.opsetImport[h1],l1)}if(s1.metadataProps&&s1.metadataProps.length){c1.metadataProps=[];for(var h1=0;h1<s1.metadataProps.length;++h1)c1.metadataProps[h1]=o1.onnx.StringStringEntryProto.toObject(s1.metadataProps[h1],l1)}if(s1.trainingInfo&&s1.trainingInfo.length){c1.trainingInfo=[];for(var h1=0;h1<s1.trainingInfo.length;++h1)c1.trainingInfo[h1]=o1.onnx.TrainingInfoProto.toObject(s1.trainingInfo[h1],l1)}if(s1.functions&&s1.functions.length){c1.functions=[];for(var h1=0;h1<s1.functions.length;++h1)c1.functions[h1]=o1.onnx.FunctionProto.toObject(s1.functions[h1],l1)}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.ModelProto"},u1}(),a1.StringStringEntryProto=function(){function u1(s1){if(s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.key="",u1.prototype.value="",u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){return l1||(l1=n1.create()),s1.key!=null&&Object.hasOwnProperty.call(s1,"key")&&l1.uint32(10).string(s1.key),s1.value!=null&&Object.hasOwnProperty.call(s1,"value")&&l1.uint32(18).string(s1.value),l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.StringStringEntryProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.key=s1.string();break}case 2:{d1.value=s1.string();break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){return typeof s1!="object"||s1===null?"object expected":s1.key!=null&&s1.hasOwnProperty("key")&&!i1.isString(s1.key)?"key: string expected":s1.value!=null&&s1.hasOwnProperty("value")&&!i1.isString(s1.value)?"value: string expected":null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.StringStringEntryProto)return s1;var l1=new o1.onnx.StringStringEntryProto;return s1.key!=null&&(l1.key=String(s1.key)),s1.value!=null&&(l1.value=String(s1.value)),l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};return l1.defaults&&(c1.key="",c1.value=""),s1.key!=null&&s1.hasOwnProperty("key")&&(c1.key=s1.key),s1.value!=null&&s1.hasOwnProperty("value")&&(c1.value=s1.value),c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.StringStringEntryProto"},u1}(),a1.TensorAnnotation=function(){function u1(s1){if(this.quantParameterTensorNames=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.tensorName="",u1.prototype.quantParameterTensorNames=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.tensorName!=null&&Object.hasOwnProperty.call(s1,"tensorName")&&l1.uint32(10).string(s1.tensorName),s1.quantParameterTensorNames!=null&&s1.quantParameterTensorNames.length)for(var c1=0;c1<s1.quantParameterTensorNames.length;++c1)o1.onnx.StringStringEntryProto.encode(s1.quantParameterTensorNames[c1],l1.uint32(18).fork()).ldelim();return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.TensorAnnotation;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.tensorName=s1.string();break}case 2:{d1.quantParameterTensorNames&&d1.quantParameterTensorNames.length||(d1.quantParameterTensorNames=[]),d1.quantParameterTensorNames.push(o1.onnx.StringStringEntryProto.decode(s1,s1.uint32()));break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.tensorName!=null&&s1.hasOwnProperty("tensorName")&&!i1.isString(s1.tensorName))return"tensorName: string expected";if(s1.quantParameterTensorNames!=null&&s1.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(s1.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var l1=0;l1<s1.quantParameterTensorNames.length;++l1){var c1=o1.onnx.StringStringEntryProto.verify(s1.quantParameterTensorNames[l1]);if(c1)return"quantParameterTensorNames."+c1}}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.TensorAnnotation)return s1;var l1=new o1.onnx.TensorAnnotation;if(s1.tensorName!=null&&(l1.tensorName=String(s1.tensorName)),s1.quantParameterTensorNames){if(!Array.isArray(s1.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");l1.quantParameterTensorNames=[];for(var c1=0;c1<s1.quantParameterTensorNames.length;++c1){if(typeof s1.quantParameterTensorNames[c1]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");l1.quantParameterTensorNames[c1]=o1.onnx.StringStringEntryProto.fromObject(s1.quantParameterTensorNames[c1])}}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.quantParameterTensorNames=[]),l1.defaults&&(c1.tensorName=""),s1.tensorName!=null&&s1.hasOwnProperty("tensorName")&&(c1.tensorName=s1.tensorName),s1.quantParameterTensorNames&&s1.quantParameterTensorNames.length){c1.quantParameterTensorNames=[];for(var d1=0;d1<s1.quantParameterTensorNames.length;++d1)c1.quantParameterTensorNames[d1]=o1.onnx.StringStringEntryProto.toObject(s1.quantParameterTensorNames[d1],l1)}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.TensorAnnotation"},u1}(),a1.GraphProto=function(){function u1(s1){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.node=i1.emptyArray,u1.prototype.name="",u1.prototype.initializer=i1.emptyArray,u1.prototype.sparseInitializer=i1.emptyArray,u1.prototype.docString="",u1.prototype.input=i1.emptyArray,u1.prototype.output=i1.emptyArray,u1.prototype.valueInfo=i1.emptyArray,u1.prototype.quantizationAnnotation=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.node!=null&&s1.node.length)for(var c1=0;c1<s1.node.length;++c1)o1.onnx.NodeProto.encode(s1.node[c1],l1.uint32(10).fork()).ldelim();if(s1.name!=null&&Object.hasOwnProperty.call(s1,"name")&&l1.uint32(18).string(s1.name),s1.initializer!=null&&s1.initializer.length)for(var c1=0;c1<s1.initializer.length;++c1)o1.onnx.TensorProto.encode(s1.initializer[c1],l1.uint32(42).fork()).ldelim();if(s1.docString!=null&&Object.hasOwnProperty.call(s1,"docString")&&l1.uint32(82).string(s1.docString),s1.input!=null&&s1.input.length)for(var c1=0;c1<s1.input.length;++c1)o1.onnx.ValueInfoProto.encode(s1.input[c1],l1.uint32(90).fork()).ldelim();if(s1.output!=null&&s1.output.length)for(var c1=0;c1<s1.output.length;++c1)o1.onnx.ValueInfoProto.encode(s1.output[c1],l1.uint32(98).fork()).ldelim();if(s1.valueInfo!=null&&s1.valueInfo.length)for(var c1=0;c1<s1.valueInfo.length;++c1)o1.onnx.ValueInfoProto.encode(s1.valueInfo[c1],l1.uint32(106).fork()).ldelim();if(s1.quantizationAnnotation!=null&&s1.quantizationAnnotation.length)for(var c1=0;c1<s1.quantizationAnnotation.length;++c1)o1.onnx.TensorAnnotation.encode(s1.quantizationAnnotation[c1],l1.uint32(114).fork()).ldelim();if(s1.sparseInitializer!=null&&s1.sparseInitializer.length)for(var c1=0;c1<s1.sparseInitializer.length;++c1)o1.onnx.SparseTensorProto.encode(s1.sparseInitializer[c1],l1.uint32(122).fork()).ldelim();return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.GraphProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.node&&d1.node.length||(d1.node=[]),d1.node.push(o1.onnx.NodeProto.decode(s1,s1.uint32()));break}case 2:{d1.name=s1.string();break}case 5:{d1.initializer&&d1.initializer.length||(d1.initializer=[]),d1.initializer.push(o1.onnx.TensorProto.decode(s1,s1.uint32()));break}case 15:{d1.sparseInitializer&&d1.sparseInitializer.length||(d1.sparseInitializer=[]),d1.sparseInitializer.push(o1.onnx.SparseTensorProto.decode(s1,s1.uint32()));break}case 10:{d1.docString=s1.string();break}case 11:{d1.input&&d1.input.length||(d1.input=[]),d1.input.push(o1.onnx.ValueInfoProto.decode(s1,s1.uint32()));break}case 12:{d1.output&&d1.output.length||(d1.output=[]),d1.output.push(o1.onnx.ValueInfoProto.decode(s1,s1.uint32()));break}case 13:{d1.valueInfo&&d1.valueInfo.length||(d1.valueInfo=[]),d1.valueInfo.push(o1.onnx.ValueInfoProto.decode(s1,s1.uint32()));break}case 14:{d1.quantizationAnnotation&&d1.quantizationAnnotation.length||(d1.quantizationAnnotation=[]),d1.quantizationAnnotation.push(o1.onnx.TensorAnnotation.decode(s1,s1.uint32()));break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.node!=null&&s1.hasOwnProperty("node")){if(!Array.isArray(s1.node))return"node: array expected";for(var l1=0;l1<s1.node.length;++l1){var c1=o1.onnx.NodeProto.verify(s1.node[l1]);if(c1)return"node."+c1}}if(s1.name!=null&&s1.hasOwnProperty("name")&&!i1.isString(s1.name))return"name: string expected";if(s1.initializer!=null&&s1.hasOwnProperty("initializer")){if(!Array.isArray(s1.initializer))return"initializer: array expected";for(var l1=0;l1<s1.initializer.length;++l1){var c1=o1.onnx.TensorProto.verify(s1.initializer[l1]);if(c1)return"initializer."+c1}}if(s1.sparseInitializer!=null&&s1.hasOwnProperty("sparseInitializer")){if(!Array.isArray(s1.sparseInitializer))return"sparseInitializer: array expected";for(var l1=0;l1<s1.sparseInitializer.length;++l1){var c1=o1.onnx.SparseTensorProto.verify(s1.sparseInitializer[l1]);if(c1)return"sparseInitializer."+c1}}if(s1.docString!=null&&s1.hasOwnProperty("docString")&&!i1.isString(s1.docString))return"docString: string expected";if(s1.input!=null&&s1.hasOwnProperty("input")){if(!Array.isArray(s1.input))return"input: array expected";for(var l1=0;l1<s1.input.length;++l1){var c1=o1.onnx.ValueInfoProto.verify(s1.input[l1]);if(c1)return"input."+c1}}if(s1.output!=null&&s1.hasOwnProperty("output")){if(!Array.isArray(s1.output))return"output: array expected";for(var l1=0;l1<s1.output.length;++l1){var c1=o1.onnx.ValueInfoProto.verify(s1.output[l1]);if(c1)return"output."+c1}}if(s1.valueInfo!=null&&s1.hasOwnProperty("valueInfo")){if(!Array.isArray(s1.valueInfo))return"valueInfo: array expected";for(var l1=0;l1<s1.valueInfo.length;++l1){var c1=o1.onnx.ValueInfoProto.verify(s1.valueInfo[l1]);if(c1)return"valueInfo."+c1}}if(s1.quantizationAnnotation!=null&&s1.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(s1.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var l1=0;l1<s1.quantizationAnnotation.length;++l1){var c1=o1.onnx.TensorAnnotation.verify(s1.quantizationAnnotation[l1]);if(c1)return"quantizationAnnotation."+c1}}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.GraphProto)return s1;var l1=new o1.onnx.GraphProto;if(s1.node){if(!Array.isArray(s1.node))throw TypeError(".onnx.GraphProto.node: array expected");l1.node=[];for(var c1=0;c1<s1.node.length;++c1){if(typeof s1.node[c1]!="object")throw TypeError(".onnx.GraphProto.node: object expected");l1.node[c1]=o1.onnx.NodeProto.fromObject(s1.node[c1])}}if(s1.name!=null&&(l1.name=String(s1.name)),s1.initializer){if(!Array.isArray(s1.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");l1.initializer=[];for(var c1=0;c1<s1.initializer.length;++c1){if(typeof s1.initializer[c1]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");l1.initializer[c1]=o1.onnx.TensorProto.fromObject(s1.initializer[c1])}}if(s1.sparseInitializer){if(!Array.isArray(s1.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");l1.sparseInitializer=[];for(var c1=0;c1<s1.sparseInitializer.length;++c1){if(typeof s1.sparseInitializer[c1]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");l1.sparseInitializer[c1]=o1.onnx.SparseTensorProto.fromObject(s1.sparseInitializer[c1])}}if(s1.docString!=null&&(l1.docString=String(s1.docString)),s1.input){if(!Array.isArray(s1.input))throw TypeError(".onnx.GraphProto.input: array expected");l1.input=[];for(var c1=0;c1<s1.input.length;++c1){if(typeof s1.input[c1]!="object")throw TypeError(".onnx.GraphProto.input: object expected");l1.input[c1]=o1.onnx.ValueInfoProto.fromObject(s1.input[c1])}}if(s1.output){if(!Array.isArray(s1.output))throw TypeError(".onnx.GraphProto.output: array expected");l1.output=[];for(var c1=0;c1<s1.output.length;++c1){if(typeof s1.output[c1]!="object")throw TypeError(".onnx.GraphProto.output: object expected");l1.output[c1]=o1.onnx.ValueInfoProto.fromObject(s1.output[c1])}}if(s1.valueInfo){if(!Array.isArray(s1.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");l1.valueInfo=[];for(var c1=0;c1<s1.valueInfo.length;++c1){if(typeof s1.valueInfo[c1]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");l1.valueInfo[c1]=o1.onnx.ValueInfoProto.fromObject(s1.valueInfo[c1])}}if(s1.quantizationAnnotation){if(!Array.isArray(s1.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");l1.quantizationAnnotation=[];for(var c1=0;c1<s1.quantizationAnnotation.length;++c1){if(typeof s1.quantizationAnnotation[c1]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");l1.quantizationAnnotation[c1]=o1.onnx.TensorAnnotation.fromObject(s1.quantizationAnnotation[c1])}}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.node=[],c1.initializer=[],c1.input=[],c1.output=[],c1.valueInfo=[],c1.quantizationAnnotation=[],c1.sparseInitializer=[]),l1.defaults&&(c1.name="",c1.docString=""),s1.node&&s1.node.length){c1.node=[];for(var d1=0;d1<s1.node.length;++d1)c1.node[d1]=o1.onnx.NodeProto.toObject(s1.node[d1],l1)}if(s1.name!=null&&s1.hasOwnProperty("name")&&(c1.name=s1.name),s1.initializer&&s1.initializer.length){c1.initializer=[];for(var d1=0;d1<s1.initializer.length;++d1)c1.initializer[d1]=o1.onnx.TensorProto.toObject(s1.initializer[d1],l1)}if(s1.docString!=null&&s1.hasOwnProperty("docString")&&(c1.docString=s1.docString),s1.input&&s1.input.length){c1.input=[];for(var d1=0;d1<s1.input.length;++d1)c1.input[d1]=o1.onnx.ValueInfoProto.toObject(s1.input[d1],l1)}if(s1.output&&s1.output.length){c1.output=[];for(var d1=0;d1<s1.output.length;++d1)c1.output[d1]=o1.onnx.ValueInfoProto.toObject(s1.output[d1],l1)}if(s1.valueInfo&&s1.valueInfo.length){c1.valueInfo=[];for(var d1=0;d1<s1.valueInfo.length;++d1)c1.valueInfo[d1]=o1.onnx.ValueInfoProto.toObject(s1.valueInfo[d1],l1)}if(s1.quantizationAnnotation&&s1.quantizationAnnotation.length){c1.quantizationAnnotation=[];for(var d1=0;d1<s1.quantizationAnnotation.length;++d1)c1.quantizationAnnotation[d1]=o1.onnx.TensorAnnotation.toObject(s1.quantizationAnnotation[d1],l1)}if(s1.sparseInitializer&&s1.sparseInitializer.length){c1.sparseInitializer=[];for(var d1=0;d1<s1.sparseInitializer.length;++d1)c1.sparseInitializer[d1]=o1.onnx.SparseTensorProto.toObject(s1.sparseInitializer[d1],l1)}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.GraphProto"},u1}(),a1.TensorProto=function(){function u1(s1){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.dims=i1.emptyArray,u1.prototype.dataType=0,u1.prototype.segment=null,u1.prototype.floatData=i1.emptyArray,u1.prototype.int32Data=i1.emptyArray,u1.prototype.stringData=i1.emptyArray,u1.prototype.int64Data=i1.emptyArray,u1.prototype.name="",u1.prototype.docString="",u1.prototype.rawData=i1.newBuffer([]),u1.prototype.externalData=i1.emptyArray,u1.prototype.dataLocation=0,u1.prototype.doubleData=i1.emptyArray,u1.prototype.uint64Data=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.dims!=null&&s1.dims.length){l1.uint32(10).fork();for(var c1=0;c1<s1.dims.length;++c1)l1.int64(s1.dims[c1]);l1.ldelim()}if(s1.dataType!=null&&Object.hasOwnProperty.call(s1,"dataType")&&l1.uint32(16).int32(s1.dataType),s1.segment!=null&&Object.hasOwnProperty.call(s1,"segment")&&o1.onnx.TensorProto.Segment.encode(s1.segment,l1.uint32(26).fork()).ldelim(),s1.floatData!=null&&s1.floatData.length){l1.uint32(34).fork();for(var c1=0;c1<s1.floatData.length;++c1)l1.float(s1.floatData[c1]);l1.ldelim()}if(s1.int32Data!=null&&s1.int32Data.length){l1.uint32(42).fork();for(var c1=0;c1<s1.int32Data.length;++c1)l1.int32(s1.int32Data[c1]);l1.ldelim()}if(s1.stringData!=null&&s1.stringData.length)for(var c1=0;c1<s1.stringData.length;++c1)l1.uint32(50).bytes(s1.stringData[c1]);if(s1.int64Data!=null&&s1.int64Data.length){l1.uint32(58).fork();for(var c1=0;c1<s1.int64Data.length;++c1)l1.int64(s1.int64Data[c1]);l1.ldelim()}if(s1.name!=null&&Object.hasOwnProperty.call(s1,"name")&&l1.uint32(66).string(s1.name),s1.rawData!=null&&Object.hasOwnProperty.call(s1,"rawData")&&l1.uint32(74).bytes(s1.rawData),s1.doubleData!=null&&s1.doubleData.length){l1.uint32(82).fork();for(var c1=0;c1<s1.doubleData.length;++c1)l1.double(s1.doubleData[c1]);l1.ldelim()}if(s1.uint64Data!=null&&s1.uint64Data.length){l1.uint32(90).fork();for(var c1=0;c1<s1.uint64Data.length;++c1)l1.uint64(s1.uint64Data[c1]);l1.ldelim()}if(s1.docString!=null&&Object.hasOwnProperty.call(s1,"docString")&&l1.uint32(98).string(s1.docString),s1.externalData!=null&&s1.externalData.length)for(var c1=0;c1<s1.externalData.length;++c1)o1.onnx.StringStringEntryProto.encode(s1.externalData[c1],l1.uint32(106).fork()).ldelim();return s1.dataLocation!=null&&Object.hasOwnProperty.call(s1,"dataLocation")&&l1.uint32(112).int32(s1.dataLocation),l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.TensorProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{if(d1.dims&&d1.dims.length||(d1.dims=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.dims.push(s1.int64());else d1.dims.push(s1.int64());break}case 2:{d1.dataType=s1.int32();break}case 3:{d1.segment=o1.onnx.TensorProto.Segment.decode(s1,s1.uint32());break}case 4:{if(d1.floatData&&d1.floatData.length||(d1.floatData=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.floatData.push(s1.float());else d1.floatData.push(s1.float());break}case 5:{if(d1.int32Data&&d1.int32Data.length||(d1.int32Data=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.int32Data.push(s1.int32());else d1.int32Data.push(s1.int32());break}case 6:{d1.stringData&&d1.stringData.length||(d1.stringData=[]),d1.stringData.push(s1.bytes());break}case 7:{if(d1.int64Data&&d1.int64Data.length||(d1.int64Data=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.int64Data.push(s1.int64());else d1.int64Data.push(s1.int64());break}case 8:{d1.name=s1.string();break}case 12:{d1.docString=s1.string();break}case 9:{d1.rawData=s1.bytes();break}case 13:{d1.externalData&&d1.externalData.length||(d1.externalData=[]),d1.externalData.push(o1.onnx.StringStringEntryProto.decode(s1,s1.uint32()));break}case 14:{d1.dataLocation=s1.int32();break}case 10:{if(d1.doubleData&&d1.doubleData.length||(d1.doubleData=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.doubleData.push(s1.double());else d1.doubleData.push(s1.double());break}case 11:{if(d1.uint64Data&&d1.uint64Data.length||(d1.uint64Data=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.uint64Data.push(s1.uint64());else d1.uint64Data.push(s1.uint64());break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.dims!=null&&s1.hasOwnProperty("dims")){if(!Array.isArray(s1.dims))return"dims: array expected";for(var l1=0;l1<s1.dims.length;++l1)if(!i1.isInteger(s1.dims[l1])&&!(s1.dims[l1]&&i1.isInteger(s1.dims[l1].low)&&i1.isInteger(s1.dims[l1].high)))return"dims: integer|Long[] expected"}if(s1.dataType!=null&&s1.hasOwnProperty("dataType")&&!i1.isInteger(s1.dataType))return"dataType: integer expected";if(s1.segment!=null&&s1.hasOwnProperty("segment")){var c1=o1.onnx.TensorProto.Segment.verify(s1.segment);if(c1)return"segment."+c1}if(s1.floatData!=null&&s1.hasOwnProperty("floatData")){if(!Array.isArray(s1.floatData))return"floatData: array expected";for(var l1=0;l1<s1.floatData.length;++l1)if(typeof s1.floatData[l1]!="number")return"floatData: number[] expected"}if(s1.int32Data!=null&&s1.hasOwnProperty("int32Data")){if(!Array.isArray(s1.int32Data))return"int32Data: array expected";for(var l1=0;l1<s1.int32Data.length;++l1)if(!i1.isInteger(s1.int32Data[l1]))return"int32Data: integer[] expected"}if(s1.stringData!=null&&s1.hasOwnProperty("stringData")){if(!Array.isArray(s1.stringData))return"stringData: array expected";for(var l1=0;l1<s1.stringData.length;++l1)if(!(s1.stringData[l1]&&typeof s1.stringData[l1].length=="number"||i1.isString(s1.stringData[l1])))return"stringData: buffer[] expected"}if(s1.int64Data!=null&&s1.hasOwnProperty("int64Data")){if(!Array.isArray(s1.int64Data))return"int64Data: array expected";for(var l1=0;l1<s1.int64Data.length;++l1)if(!i1.isInteger(s1.int64Data[l1])&&!(s1.int64Data[l1]&&i1.isInteger(s1.int64Data[l1].low)&&i1.isInteger(s1.int64Data[l1].high)))return"int64Data: integer|Long[] expected"}if(s1.name!=null&&s1.hasOwnProperty("name")&&!i1.isString(s1.name))return"name: string expected";if(s1.docString!=null&&s1.hasOwnProperty("docString")&&!i1.isString(s1.docString))return"docString: string expected";if(s1.rawData!=null&&s1.hasOwnProperty("rawData")&&!(s1.rawData&&typeof s1.rawData.length=="number"||i1.isString(s1.rawData)))return"rawData: buffer expected";if(s1.externalData!=null&&s1.hasOwnProperty("externalData")){if(!Array.isArray(s1.externalData))return"externalData: array expected";for(var l1=0;l1<s1.externalData.length;++l1){var c1=o1.onnx.StringStringEntryProto.verify(s1.externalData[l1]);if(c1)return"externalData."+c1}}if(s1.dataLocation!=null&&s1.hasOwnProperty("dataLocation"))switch(s1.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(s1.doubleData!=null&&s1.hasOwnProperty("doubleData")){if(!Array.isArray(s1.doubleData))return"doubleData: array expected";for(var l1=0;l1<s1.doubleData.length;++l1)if(typeof s1.doubleData[l1]!="number")return"doubleData: number[] expected"}if(s1.uint64Data!=null&&s1.hasOwnProperty("uint64Data")){if(!Array.isArray(s1.uint64Data))return"uint64Data: array expected";for(var l1=0;l1<s1.uint64Data.length;++l1)if(!i1.isInteger(s1.uint64Data[l1])&&!(s1.uint64Data[l1]&&i1.isInteger(s1.uint64Data[l1].low)&&i1.isInteger(s1.uint64Data[l1].high)))return"uint64Data: integer|Long[] expected"}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.TensorProto)return s1;var l1=new o1.onnx.TensorProto;if(s1.dims){if(!Array.isArray(s1.dims))throw TypeError(".onnx.TensorProto.dims: array expected");l1.dims=[];for(var c1=0;c1<s1.dims.length;++c1)i1.Long?(l1.dims[c1]=i1.Long.fromValue(s1.dims[c1])).unsigned=!1:typeof s1.dims[c1]=="string"?l1.dims[c1]=parseInt(s1.dims[c1],10):typeof s1.dims[c1]=="number"?l1.dims[c1]=s1.dims[c1]:typeof s1.dims[c1]=="object"&&(l1.dims[c1]=new i1.LongBits(s1.dims[c1].low>>>0,s1.dims[c1].high>>>0).toNumber())}if(s1.dataType!=null&&(l1.dataType=s1.dataType|0),s1.segment!=null){if(typeof s1.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");l1.segment=o1.onnx.TensorProto.Segment.fromObject(s1.segment)}if(s1.floatData){if(!Array.isArray(s1.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");l1.floatData=[];for(var c1=0;c1<s1.floatData.length;++c1)l1.floatData[c1]=Number(s1.floatData[c1])}if(s1.int32Data){if(!Array.isArray(s1.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");l1.int32Data=[];for(var c1=0;c1<s1.int32Data.length;++c1)l1.int32Data[c1]=s1.int32Data[c1]|0}if(s1.stringData){if(!Array.isArray(s1.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");l1.stringData=[];for(var c1=0;c1<s1.stringData.length;++c1)typeof s1.stringData[c1]=="string"?i1.base64.decode(s1.stringData[c1],l1.stringData[c1]=i1.newBuffer(i1.base64.length(s1.stringData[c1])),0):s1.stringData[c1].length>=0&&(l1.stringData[c1]=s1.stringData[c1])}if(s1.int64Data){if(!Array.isArray(s1.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");l1.int64Data=[];for(var c1=0;c1<s1.int64Data.length;++c1)i1.Long?(l1.int64Data[c1]=i1.Long.fromValue(s1.int64Data[c1])).unsigned=!1:typeof s1.int64Data[c1]=="string"?l1.int64Data[c1]=parseInt(s1.int64Data[c1],10):typeof s1.int64Data[c1]=="number"?l1.int64Data[c1]=s1.int64Data[c1]:typeof s1.int64Data[c1]=="object"&&(l1.int64Data[c1]=new i1.LongBits(s1.int64Data[c1].low>>>0,s1.int64Data[c1].high>>>0).toNumber())}if(s1.name!=null&&(l1.name=String(s1.name)),s1.docString!=null&&(l1.docString=String(s1.docString)),s1.rawData!=null&&(typeof s1.rawData=="string"?i1.base64.decode(s1.rawData,l1.rawData=i1.newBuffer(i1.base64.length(s1.rawData)),0):s1.rawData.length>=0&&(l1.rawData=s1.rawData)),s1.externalData){if(!Array.isArray(s1.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");l1.externalData=[];for(var c1=0;c1<s1.externalData.length;++c1){if(typeof s1.externalData[c1]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");l1.externalData[c1]=o1.onnx.StringStringEntryProto.fromObject(s1.externalData[c1])}}switch(s1.dataLocation){default:if(typeof s1.dataLocation=="number"){l1.dataLocation=s1.dataLocation;break}break;case"DEFAULT":case 0:l1.dataLocation=0;break;case"EXTERNAL":case 1:l1.dataLocation=1;break}if(s1.doubleData){if(!Array.isArray(s1.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");l1.doubleData=[];for(var c1=0;c1<s1.doubleData.length;++c1)l1.doubleData[c1]=Number(s1.doubleData[c1])}if(s1.uint64Data){if(!Array.isArray(s1.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");l1.uint64Data=[];for(var c1=0;c1<s1.uint64Data.length;++c1)i1.Long?(l1.uint64Data[c1]=i1.Long.fromValue(s1.uint64Data[c1])).unsigned=!0:typeof s1.uint64Data[c1]=="string"?l1.uint64Data[c1]=parseInt(s1.uint64Data[c1],10):typeof s1.uint64Data[c1]=="number"?l1.uint64Data[c1]=s1.uint64Data[c1]:typeof s1.uint64Data[c1]=="object"&&(l1.uint64Data[c1]=new i1.LongBits(s1.uint64Data[c1].low>>>0,s1.uint64Data[c1].high>>>0).toNumber(!0))}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.dims=[],c1.floatData=[],c1.int32Data=[],c1.stringData=[],c1.int64Data=[],c1.doubleData=[],c1.uint64Data=[],c1.externalData=[]),l1.defaults&&(c1.dataType=0,c1.segment=null,c1.name="",l1.bytes===String?c1.rawData="":(c1.rawData=[],l1.bytes!==Array&&(c1.rawData=i1.newBuffer(c1.rawData))),c1.docString="",c1.dataLocation=l1.enums===String?"DEFAULT":0),s1.dims&&s1.dims.length){c1.dims=[];for(var d1=0;d1<s1.dims.length;++d1)typeof s1.dims[d1]=="number"?c1.dims[d1]=l1.longs===String?String(s1.dims[d1]):s1.dims[d1]:c1.dims[d1]=l1.longs===String?i1.Long.prototype.toString.call(s1.dims[d1]):l1.longs===Number?new i1.LongBits(s1.dims[d1].low>>>0,s1.dims[d1].high>>>0).toNumber():s1.dims[d1]}if(s1.dataType!=null&&s1.hasOwnProperty("dataType")&&(c1.dataType=s1.dataType),s1.segment!=null&&s1.hasOwnProperty("segment")&&(c1.segment=o1.onnx.TensorProto.Segment.toObject(s1.segment,l1)),s1.floatData&&s1.floatData.length){c1.floatData=[];for(var d1=0;d1<s1.floatData.length;++d1)c1.floatData[d1]=l1.json&&!isFinite(s1.floatData[d1])?String(s1.floatData[d1]):s1.floatData[d1]}if(s1.int32Data&&s1.int32Data.length){c1.int32Data=[];for(var d1=0;d1<s1.int32Data.length;++d1)c1.int32Data[d1]=s1.int32Data[d1]}if(s1.stringData&&s1.stringData.length){c1.stringData=[];for(var d1=0;d1<s1.stringData.length;++d1)c1.stringData[d1]=l1.bytes===String?i1.base64.encode(s1.stringData[d1],0,s1.stringData[d1].length):l1.bytes===Array?Array.prototype.slice.call(s1.stringData[d1]):s1.stringData[d1]}if(s1.int64Data&&s1.int64Data.length){c1.int64Data=[];for(var d1=0;d1<s1.int64Data.length;++d1)typeof s1.int64Data[d1]=="number"?c1.int64Data[d1]=l1.longs===String?String(s1.int64Data[d1]):s1.int64Data[d1]:c1.int64Data[d1]=l1.longs===String?i1.Long.prototype.toString.call(s1.int64Data[d1]):l1.longs===Number?new i1.LongBits(s1.int64Data[d1].low>>>0,s1.int64Data[d1].high>>>0).toNumber():s1.int64Data[d1]}if(s1.name!=null&&s1.hasOwnProperty("name")&&(c1.name=s1.name),s1.rawData!=null&&s1.hasOwnProperty("rawData")&&(c1.rawData=l1.bytes===String?i1.base64.encode(s1.rawData,0,s1.rawData.length):l1.bytes===Array?Array.prototype.slice.call(s1.rawData):s1.rawData),s1.doubleData&&s1.doubleData.length){c1.doubleData=[];for(var d1=0;d1<s1.doubleData.length;++d1)c1.doubleData[d1]=l1.json&&!isFinite(s1.doubleData[d1])?String(s1.doubleData[d1]):s1.doubleData[d1]}if(s1.uint64Data&&s1.uint64Data.length){c1.uint64Data=[];for(var d1=0;d1<s1.uint64Data.length;++d1)typeof s1.uint64Data[d1]=="number"?c1.uint64Data[d1]=l1.longs===String?String(s1.uint64Data[d1]):s1.uint64Data[d1]:c1.uint64Data[d1]=l1.longs===String?i1.Long.prototype.toString.call(s1.uint64Data[d1]):l1.longs===Number?new i1.LongBits(s1.uint64Data[d1].low>>>0,s1.uint64Data[d1].high>>>0).toNumber(!0):s1.uint64Data[d1]}if(s1.docString!=null&&s1.hasOwnProperty("docString")&&(c1.docString=s1.docString),s1.externalData&&s1.externalData.length){c1.externalData=[];for(var d1=0;d1<s1.externalData.length;++d1)c1.externalData[d1]=o1.onnx.StringStringEntryProto.toObject(s1.externalData[d1],l1)}return s1.dataLocation!=null&&s1.hasOwnProperty("dataLocation")&&(c1.dataLocation=l1.enums===String?o1.onnx.TensorProto.DataLocation[s1.dataLocation]===void 0?s1.dataLocation:o1.onnx.TensorProto.DataLocation[s1.dataLocation]:s1.dataLocation),c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.TensorProto"},u1.DataType=function(){var s1={},l1=Object.create(s1);return l1[s1[0]="UNDEFINED"]=0,l1[s1[1]="FLOAT"]=1,l1[s1[2]="UINT8"]=2,l1[s1[3]="INT8"]=3,l1[s1[4]="UINT16"]=4,l1[s1[5]="INT16"]=5,l1[s1[6]="INT32"]=6,l1[s1[7]="INT64"]=7,l1[s1[8]="STRING"]=8,l1[s1[9]="BOOL"]=9,l1[s1[10]="FLOAT16"]=10,l1[s1[11]="DOUBLE"]=11,l1[s1[12]="UINT32"]=12,l1[s1[13]="UINT64"]=13,l1[s1[14]="COMPLEX64"]=14,l1[s1[15]="COMPLEX128"]=15,l1[s1[16]="BFLOAT16"]=16,l1[s1[17]="FLOAT8E4M3FN"]=17,l1[s1[18]="FLOAT8E4M3FNUZ"]=18,l1[s1[19]="FLOAT8E5M2"]=19,l1[s1[20]="FLOAT8E5M2FNUZ"]=20,l1}(),u1.Segment=function(){function s1(l1){if(l1)for(var c1=Object.keys(l1),d1=0;d1<c1.length;++d1)l1[c1[d1]]!=null&&(this[c1[d1]]=l1[c1[d1]])}return s1.prototype.begin=i1.Long?i1.Long.fromBits(0,0,!1):0,s1.prototype.end=i1.Long?i1.Long.fromBits(0,0,!1):0,s1.create=function(l1){return new s1(l1)},s1.encode=function(l1,c1){return c1||(c1=n1.create()),l1.begin!=null&&Object.hasOwnProperty.call(l1,"begin")&&c1.uint32(8).int64(l1.begin),l1.end!=null&&Object.hasOwnProperty.call(l1,"end")&&c1.uint32(16).int64(l1.end),c1},s1.encodeDelimited=function(l1,c1){return this.encode(l1,c1).ldelim()},s1.decode=function(l1,c1){l1 instanceof r1||(l1=r1.create(l1));for(var d1=c1===void 0?l1.len:l1.pos+c1,h1=new o1.onnx.TensorProto.Segment;l1.pos<d1;){var f1=l1.uint32();switch(f1>>>3){case 1:{h1.begin=l1.int64();break}case 2:{h1.end=l1.int64();break}default:l1.skipType(f1&7);break}}return h1},s1.decodeDelimited=function(l1){return l1 instanceof r1||(l1=new r1(l1)),this.decode(l1,l1.uint32())},s1.verify=function(l1){return typeof l1!="object"||l1===null?"object expected":l1.begin!=null&&l1.hasOwnProperty("begin")&&!i1.isInteger(l1.begin)&&!(l1.begin&&i1.isInteger(l1.begin.low)&&i1.isInteger(l1.begin.high))?"begin: integer|Long expected":l1.end!=null&&l1.hasOwnProperty("end")&&!i1.isInteger(l1.end)&&!(l1.end&&i1.isInteger(l1.end.low)&&i1.isInteger(l1.end.high))?"end: integer|Long expected":null},s1.fromObject=function(l1){if(l1 instanceof o1.onnx.TensorProto.Segment)return l1;var c1=new o1.onnx.TensorProto.Segment;return l1.begin!=null&&(i1.Long?(c1.begin=i1.Long.fromValue(l1.begin)).unsigned=!1:typeof l1.begin=="string"?c1.begin=parseInt(l1.begin,10):typeof l1.begin=="number"?c1.begin=l1.begin:typeof l1.begin=="object"&&(c1.begin=new i1.LongBits(l1.begin.low>>>0,l1.begin.high>>>0).toNumber())),l1.end!=null&&(i1.Long?(c1.end=i1.Long.fromValue(l1.end)).unsigned=!1:typeof l1.end=="string"?c1.end=parseInt(l1.end,10):typeof l1.end=="number"?c1.end=l1.end:typeof l1.end=="object"&&(c1.end=new i1.LongBits(l1.end.low>>>0,l1.end.high>>>0).toNumber())),c1},s1.toObject=function(l1,c1){c1||(c1={});var d1={};if(c1.defaults){if(i1.Long){var h1=new i1.Long(0,0,!1);d1.begin=c1.longs===String?h1.toString():c1.longs===Number?h1.toNumber():h1}else d1.begin=c1.longs===String?"0":0;if(i1.Long){var h1=new i1.Long(0,0,!1);d1.end=c1.longs===String?h1.toString():c1.longs===Number?h1.toNumber():h1}else d1.end=c1.longs===String?"0":0}return l1.begin!=null&&l1.hasOwnProperty("begin")&&(typeof l1.begin=="number"?d1.begin=c1.longs===String?String(l1.begin):l1.begin:d1.begin=c1.longs===String?i1.Long.prototype.toString.call(l1.begin):c1.longs===Number?new i1.LongBits(l1.begin.low>>>0,l1.begin.high>>>0).toNumber():l1.begin),l1.end!=null&&l1.hasOwnProperty("end")&&(typeof l1.end=="number"?d1.end=c1.longs===String?String(l1.end):l1.end:d1.end=c1.longs===String?i1.Long.prototype.toString.call(l1.end):c1.longs===Number?new i1.LongBits(l1.end.low>>>0,l1.end.high>>>0).toNumber():l1.end),d1},s1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},s1.getTypeUrl=function(l1){return l1===void 0&&(l1="type.googleapis.com"),l1+"/onnx.TensorProto.Segment"},s1}(),u1.DataLocation=function(){var s1={},l1=Object.create(s1);return l1[s1[0]="DEFAULT"]=0,l1[s1[1]="EXTERNAL"]=1,l1}(),u1}(),a1.SparseTensorProto=function(){function u1(s1){if(this.dims=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.values=null,u1.prototype.indices=null,u1.prototype.dims=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.values!=null&&Object.hasOwnProperty.call(s1,"values")&&o1.onnx.TensorProto.encode(s1.values,l1.uint32(10).fork()).ldelim(),s1.indices!=null&&Object.hasOwnProperty.call(s1,"indices")&&o1.onnx.TensorProto.encode(s1.indices,l1.uint32(18).fork()).ldelim(),s1.dims!=null&&s1.dims.length){l1.uint32(26).fork();for(var c1=0;c1<s1.dims.length;++c1)l1.int64(s1.dims[c1]);l1.ldelim()}return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.SparseTensorProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.values=o1.onnx.TensorProto.decode(s1,s1.uint32());break}case 2:{d1.indices=o1.onnx.TensorProto.decode(s1,s1.uint32());break}case 3:{if(d1.dims&&d1.dims.length||(d1.dims=[]),(h1&7)===2)for(var f1=s1.uint32()+s1.pos;s1.pos<f1;)d1.dims.push(s1.int64());else d1.dims.push(s1.int64());break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.values!=null&&s1.hasOwnProperty("values")){var l1=o1.onnx.TensorProto.verify(s1.values);if(l1)return"values."+l1}if(s1.indices!=null&&s1.hasOwnProperty("indices")){var l1=o1.onnx.TensorProto.verify(s1.indices);if(l1)return"indices."+l1}if(s1.dims!=null&&s1.hasOwnProperty("dims")){if(!Array.isArray(s1.dims))return"dims: array expected";for(var c1=0;c1<s1.dims.length;++c1)if(!i1.isInteger(s1.dims[c1])&&!(s1.dims[c1]&&i1.isInteger(s1.dims[c1].low)&&i1.isInteger(s1.dims[c1].high)))return"dims: integer|Long[] expected"}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.SparseTensorProto)return s1;var l1=new o1.onnx.SparseTensorProto;if(s1.values!=null){if(typeof s1.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");l1.values=o1.onnx.TensorProto.fromObject(s1.values)}if(s1.indices!=null){if(typeof s1.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");l1.indices=o1.onnx.TensorProto.fromObject(s1.indices)}if(s1.dims){if(!Array.isArray(s1.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");l1.dims=[];for(var c1=0;c1<s1.dims.length;++c1)i1.Long?(l1.dims[c1]=i1.Long.fromValue(s1.dims[c1])).unsigned=!1:typeof s1.dims[c1]=="string"?l1.dims[c1]=parseInt(s1.dims[c1],10):typeof s1.dims[c1]=="number"?l1.dims[c1]=s1.dims[c1]:typeof s1.dims[c1]=="object"&&(l1.dims[c1]=new i1.LongBits(s1.dims[c1].low>>>0,s1.dims[c1].high>>>0).toNumber())}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.dims=[]),l1.defaults&&(c1.values=null,c1.indices=null),s1.values!=null&&s1.hasOwnProperty("values")&&(c1.values=o1.onnx.TensorProto.toObject(s1.values,l1)),s1.indices!=null&&s1.hasOwnProperty("indices")&&(c1.indices=o1.onnx.TensorProto.toObject(s1.indices,l1)),s1.dims&&s1.dims.length){c1.dims=[];for(var d1=0;d1<s1.dims.length;++d1)typeof s1.dims[d1]=="number"?c1.dims[d1]=l1.longs===String?String(s1.dims[d1]):s1.dims[d1]:c1.dims[d1]=l1.longs===String?i1.Long.prototype.toString.call(s1.dims[d1]):l1.longs===Number?new i1.LongBits(s1.dims[d1].low>>>0,s1.dims[d1].high>>>0).toNumber():s1.dims[d1]}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.SparseTensorProto"},u1}(),a1.TensorShapeProto=function(){function u1(s1){if(this.dim=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.dim=i1.emptyArray,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.dim!=null&&s1.dim.length)for(var c1=0;c1<s1.dim.length;++c1)o1.onnx.TensorShapeProto.Dimension.encode(s1.dim[c1],l1.uint32(10).fork()).ldelim();return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.TensorShapeProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.dim&&d1.dim.length||(d1.dim=[]),d1.dim.push(o1.onnx.TensorShapeProto.Dimension.decode(s1,s1.uint32()));break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.dim!=null&&s1.hasOwnProperty("dim")){if(!Array.isArray(s1.dim))return"dim: array expected";for(var l1=0;l1<s1.dim.length;++l1){var c1=o1.onnx.TensorShapeProto.Dimension.verify(s1.dim[l1]);if(c1)return"dim."+c1}}return null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.TensorShapeProto)return s1;var l1=new o1.onnx.TensorShapeProto;if(s1.dim){if(!Array.isArray(s1.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");l1.dim=[];for(var c1=0;c1<s1.dim.length;++c1){if(typeof s1.dim[c1]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");l1.dim[c1]=o1.onnx.TensorShapeProto.Dimension.fromObject(s1.dim[c1])}}return l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.dim=[]),s1.dim&&s1.dim.length){c1.dim=[];for(var d1=0;d1<s1.dim.length;++d1)c1.dim[d1]=o1.onnx.TensorShapeProto.Dimension.toObject(s1.dim[d1],l1)}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.TensorShapeProto"},u1.Dimension=function(){function s1(c1){if(c1)for(var d1=Object.keys(c1),h1=0;h1<d1.length;++h1)c1[d1[h1]]!=null&&(this[d1[h1]]=c1[d1[h1]])}s1.prototype.dimValue=null,s1.prototype.dimParam=null,s1.prototype.denotation="";var l1;return Object.defineProperty(s1.prototype,"value",{get:i1.oneOfGetter(l1=["dimValue","dimParam"]),set:i1.oneOfSetter(l1)}),s1.create=function(c1){return new s1(c1)},s1.encode=function(c1,d1){return d1||(d1=n1.create()),c1.dimValue!=null&&Object.hasOwnProperty.call(c1,"dimValue")&&d1.uint32(8).int64(c1.dimValue),c1.dimParam!=null&&Object.hasOwnProperty.call(c1,"dimParam")&&d1.uint32(18).string(c1.dimParam),c1.denotation!=null&&Object.hasOwnProperty.call(c1,"denotation")&&d1.uint32(26).string(c1.denotation),d1},s1.encodeDelimited=function(c1,d1){return this.encode(c1,d1).ldelim()},s1.decode=function(c1,d1){c1 instanceof r1||(c1=r1.create(c1));for(var h1=d1===void 0?c1.len:c1.pos+d1,f1=new o1.onnx.TensorShapeProto.Dimension;c1.pos<h1;){var g1=c1.uint32();switch(g1>>>3){case 1:{f1.dimValue=c1.int64();break}case 2:{f1.dimParam=c1.string();break}case 3:{f1.denotation=c1.string();break}default:c1.skipType(g1&7);break}}return f1},s1.decodeDelimited=function(c1){return c1 instanceof r1||(c1=new r1(c1)),this.decode(c1,c1.uint32())},s1.verify=function(c1){if(typeof c1!="object"||c1===null)return"object expected";var d1={};if(c1.dimValue!=null&&c1.hasOwnProperty("dimValue")&&(d1.value=1,!i1.isInteger(c1.dimValue)&&!(c1.dimValue&&i1.isInteger(c1.dimValue.low)&&i1.isInteger(c1.dimValue.high))))return"dimValue: integer|Long expected";if(c1.dimParam!=null&&c1.hasOwnProperty("dimParam")){if(d1.value===1)return"value: multiple values";if(d1.value=1,!i1.isString(c1.dimParam))return"dimParam: string expected"}return c1.denotation!=null&&c1.hasOwnProperty("denotation")&&!i1.isString(c1.denotation)?"denotation: string expected":null},s1.fromObject=function(c1){if(c1 instanceof o1.onnx.TensorShapeProto.Dimension)return c1;var d1=new o1.onnx.TensorShapeProto.Dimension;return c1.dimValue!=null&&(i1.Long?(d1.dimValue=i1.Long.fromValue(c1.dimValue)).unsigned=!1:typeof c1.dimValue=="string"?d1.dimValue=parseInt(c1.dimValue,10):typeof c1.dimValue=="number"?d1.dimValue=c1.dimValue:typeof c1.dimValue=="object"&&(d1.dimValue=new i1.LongBits(c1.dimValue.low>>>0,c1.dimValue.high>>>0).toNumber())),c1.dimParam!=null&&(d1.dimParam=String(c1.dimParam)),c1.denotation!=null&&(d1.denotation=String(c1.denotation)),d1},s1.toObject=function(c1,d1){d1||(d1={});var h1={};return d1.defaults&&(h1.denotation=""),c1.dimValue!=null&&c1.hasOwnProperty("dimValue")&&(typeof c1.dimValue=="number"?h1.dimValue=d1.longs===String?String(c1.dimValue):c1.dimValue:h1.dimValue=d1.longs===String?i1.Long.prototype.toString.call(c1.dimValue):d1.longs===Number?new i1.LongBits(c1.dimValue.low>>>0,c1.dimValue.high>>>0).toNumber():c1.dimValue,d1.oneofs&&(h1.value="dimValue")),c1.dimParam!=null&&c1.hasOwnProperty("dimParam")&&(h1.dimParam=c1.dimParam,d1.oneofs&&(h1.value="dimParam")),c1.denotation!=null&&c1.hasOwnProperty("denotation")&&(h1.denotation=c1.denotation),h1},s1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},s1.getTypeUrl=function(c1){return c1===void 0&&(c1="type.googleapis.com"),c1+"/onnx.TensorShapeProto.Dimension"},s1}(),u1}(),a1.TypeProto=function(){function u1(l1){if(l1)for(var c1=Object.keys(l1),d1=0;d1<c1.length;++d1)l1[c1[d1]]!=null&&(this[c1[d1]]=l1[c1[d1]])}u1.prototype.tensorType=null,u1.prototype.sequenceType=null,u1.prototype.mapType=null,u1.prototype.optionalType=null,u1.prototype.sparseTensorType=null,u1.prototype.denotation="";var s1;return Object.defineProperty(u1.prototype,"value",{get:i1.oneOfGetter(s1=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:i1.oneOfSetter(s1)}),u1.create=function(l1){return new u1(l1)},u1.encode=function(l1,c1){return c1||(c1=n1.create()),l1.tensorType!=null&&Object.hasOwnProperty.call(l1,"tensorType")&&o1.onnx.TypeProto.Tensor.encode(l1.tensorType,c1.uint32(10).fork()).ldelim(),l1.sequenceType!=null&&Object.hasOwnProperty.call(l1,"sequenceType")&&o1.onnx.TypeProto.Sequence.encode(l1.sequenceType,c1.uint32(34).fork()).ldelim(),l1.mapType!=null&&Object.hasOwnProperty.call(l1,"mapType")&&o1.onnx.TypeProto.Map.encode(l1.mapType,c1.uint32(42).fork()).ldelim(),l1.denotation!=null&&Object.hasOwnProperty.call(l1,"denotation")&&c1.uint32(50).string(l1.denotation),l1.sparseTensorType!=null&&Object.hasOwnProperty.call(l1,"sparseTensorType")&&o1.onnx.TypeProto.SparseTensor.encode(l1.sparseTensorType,c1.uint32(66).fork()).ldelim(),l1.optionalType!=null&&Object.hasOwnProperty.call(l1,"optionalType")&&o1.onnx.TypeProto.Optional.encode(l1.optionalType,c1.uint32(74).fork()).ldelim(),c1},u1.encodeDelimited=function(l1,c1){return this.encode(l1,c1).ldelim()},u1.decode=function(l1,c1){l1 instanceof r1||(l1=r1.create(l1));for(var d1=c1===void 0?l1.len:l1.pos+c1,h1=new o1.onnx.TypeProto;l1.pos<d1;){var f1=l1.uint32();switch(f1>>>3){case 1:{h1.tensorType=o1.onnx.TypeProto.Tensor.decode(l1,l1.uint32());break}case 4:{h1.sequenceType=o1.onnx.TypeProto.Sequence.decode(l1,l1.uint32());break}case 5:{h1.mapType=o1.onnx.TypeProto.Map.decode(l1,l1.uint32());break}case 9:{h1.optionalType=o1.onnx.TypeProto.Optional.decode(l1,l1.uint32());break}case 8:{h1.sparseTensorType=o1.onnx.TypeProto.SparseTensor.decode(l1,l1.uint32());break}case 6:{h1.denotation=l1.string();break}default:l1.skipType(f1&7);break}}return h1},u1.decodeDelimited=function(l1){return l1 instanceof r1||(l1=new r1(l1)),this.decode(l1,l1.uint32())},u1.verify=function(l1){if(typeof l1!="object"||l1===null)return"object expected";var c1={};if(l1.tensorType!=null&&l1.hasOwnProperty("tensorType")){c1.value=1;{var d1=o1.onnx.TypeProto.Tensor.verify(l1.tensorType);if(d1)return"tensorType."+d1}}if(l1.sequenceType!=null&&l1.hasOwnProperty("sequenceType")){if(c1.value===1)return"value: multiple values";c1.value=1;{var d1=o1.onnx.TypeProto.Sequence.verify(l1.sequenceType);if(d1)return"sequenceType."+d1}}if(l1.mapType!=null&&l1.hasOwnProperty("mapType")){if(c1.value===1)return"value: multiple values";c1.value=1;{var d1=o1.onnx.TypeProto.Map.verify(l1.mapType);if(d1)return"mapType."+d1}}if(l1.optionalType!=null&&l1.hasOwnProperty("optionalType")){if(c1.value===1)return"value: multiple values";c1.value=1;{var d1=o1.onnx.TypeProto.Optional.verify(l1.optionalType);if(d1)return"optionalType."+d1}}if(l1.sparseTensorType!=null&&l1.hasOwnProperty("sparseTensorType")){if(c1.value===1)return"value: multiple values";c1.value=1;{var d1=o1.onnx.TypeProto.SparseTensor.verify(l1.sparseTensorType);if(d1)return"sparseTensorType."+d1}}return l1.denotation!=null&&l1.hasOwnProperty("denotation")&&!i1.isString(l1.denotation)?"denotation: string expected":null},u1.fromObject=function(l1){if(l1 instanceof o1.onnx.TypeProto)return l1;var c1=new o1.onnx.TypeProto;if(l1.tensorType!=null){if(typeof l1.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");c1.tensorType=o1.onnx.TypeProto.Tensor.fromObject(l1.tensorType)}if(l1.sequenceType!=null){if(typeof l1.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");c1.sequenceType=o1.onnx.TypeProto.Sequence.fromObject(l1.sequenceType)}if(l1.mapType!=null){if(typeof l1.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");c1.mapType=o1.onnx.TypeProto.Map.fromObject(l1.mapType)}if(l1.optionalType!=null){if(typeof l1.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");c1.optionalType=o1.onnx.TypeProto.Optional.fromObject(l1.optionalType)}if(l1.sparseTensorType!=null){if(typeof l1.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");c1.sparseTensorType=o1.onnx.TypeProto.SparseTensor.fromObject(l1.sparseTensorType)}return l1.denotation!=null&&(c1.denotation=String(l1.denotation)),c1},u1.toObject=function(l1,c1){c1||(c1={});var d1={};return c1.defaults&&(d1.denotation=""),l1.tensorType!=null&&l1.hasOwnProperty("tensorType")&&(d1.tensorType=o1.onnx.TypeProto.Tensor.toObject(l1.tensorType,c1),c1.oneofs&&(d1.value="tensorType")),l1.sequenceType!=null&&l1.hasOwnProperty("sequenceType")&&(d1.sequenceType=o1.onnx.TypeProto.Sequence.toObject(l1.sequenceType,c1),c1.oneofs&&(d1.value="sequenceType")),l1.mapType!=null&&l1.hasOwnProperty("mapType")&&(d1.mapType=o1.onnx.TypeProto.Map.toObject(l1.mapType,c1),c1.oneofs&&(d1.value="mapType")),l1.denotation!=null&&l1.hasOwnProperty("denotation")&&(d1.denotation=l1.denotation),l1.sparseTensorType!=null&&l1.hasOwnProperty("sparseTensorType")&&(d1.sparseTensorType=o1.onnx.TypeProto.SparseTensor.toObject(l1.sparseTensorType,c1),c1.oneofs&&(d1.value="sparseTensorType")),l1.optionalType!=null&&l1.hasOwnProperty("optionalType")&&(d1.optionalType=o1.onnx.TypeProto.Optional.toObject(l1.optionalType,c1),c1.oneofs&&(d1.value="optionalType")),d1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(l1){return l1===void 0&&(l1="type.googleapis.com"),l1+"/onnx.TypeProto"},u1.Tensor=function(){function l1(c1){if(c1)for(var d1=Object.keys(c1),h1=0;h1<d1.length;++h1)c1[d1[h1]]!=null&&(this[d1[h1]]=c1[d1[h1]])}return l1.prototype.elemType=0,l1.prototype.shape=null,l1.create=function(c1){return new l1(c1)},l1.encode=function(c1,d1){return d1||(d1=n1.create()),c1.elemType!=null&&Object.hasOwnProperty.call(c1,"elemType")&&d1.uint32(8).int32(c1.elemType),c1.shape!=null&&Object.hasOwnProperty.call(c1,"shape")&&o1.onnx.TensorShapeProto.encode(c1.shape,d1.uint32(18).fork()).ldelim(),d1},l1.encodeDelimited=function(c1,d1){return this.encode(c1,d1).ldelim()},l1.decode=function(c1,d1){c1 instanceof r1||(c1=r1.create(c1));for(var h1=d1===void 0?c1.len:c1.pos+d1,f1=new o1.onnx.TypeProto.Tensor;c1.pos<h1;){var g1=c1.uint32();switch(g1>>>3){case 1:{f1.elemType=c1.int32();break}case 2:{f1.shape=o1.onnx.TensorShapeProto.decode(c1,c1.uint32());break}default:c1.skipType(g1&7);break}}return f1},l1.decodeDelimited=function(c1){return c1 instanceof r1||(c1=new r1(c1)),this.decode(c1,c1.uint32())},l1.verify=function(c1){if(typeof c1!="object"||c1===null)return"object expected";if(c1.elemType!=null&&c1.hasOwnProperty("elemType")&&!i1.isInteger(c1.elemType))return"elemType: integer expected";if(c1.shape!=null&&c1.hasOwnProperty("shape")){var d1=o1.onnx.TensorShapeProto.verify(c1.shape);if(d1)return"shape."+d1}return null},l1.fromObject=function(c1){if(c1 instanceof o1.onnx.TypeProto.Tensor)return c1;var d1=new o1.onnx.TypeProto.Tensor;if(c1.elemType!=null&&(d1.elemType=c1.elemType|0),c1.shape!=null){if(typeof c1.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");d1.shape=o1.onnx.TensorShapeProto.fromObject(c1.shape)}return d1},l1.toObject=function(c1,d1){d1||(d1={});var h1={};return d1.defaults&&(h1.elemType=0,h1.shape=null),c1.elemType!=null&&c1.hasOwnProperty("elemType")&&(h1.elemType=c1.elemType),c1.shape!=null&&c1.hasOwnProperty("shape")&&(h1.shape=o1.onnx.TensorShapeProto.toObject(c1.shape,d1)),h1},l1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},l1.getTypeUrl=function(c1){return c1===void 0&&(c1="type.googleapis.com"),c1+"/onnx.TypeProto.Tensor"},l1}(),u1.Sequence=function(){function l1(c1){if(c1)for(var d1=Object.keys(c1),h1=0;h1<d1.length;++h1)c1[d1[h1]]!=null&&(this[d1[h1]]=c1[d1[h1]])}return l1.prototype.elemType=null,l1.create=function(c1){return new l1(c1)},l1.encode=function(c1,d1){return d1||(d1=n1.create()),c1.elemType!=null&&Object.hasOwnProperty.call(c1,"elemType")&&o1.onnx.TypeProto.encode(c1.elemType,d1.uint32(10).fork()).ldelim(),d1},l1.encodeDelimited=function(c1,d1){return this.encode(c1,d1).ldelim()},l1.decode=function(c1,d1){c1 instanceof r1||(c1=r1.create(c1));for(var h1=d1===void 0?c1.len:c1.pos+d1,f1=new o1.onnx.TypeProto.Sequence;c1.pos<h1;){var g1=c1.uint32();switch(g1>>>3){case 1:{f1.elemType=o1.onnx.TypeProto.decode(c1,c1.uint32());break}default:c1.skipType(g1&7);break}}return f1},l1.decodeDelimited=function(c1){return c1 instanceof r1||(c1=new r1(c1)),this.decode(c1,c1.uint32())},l1.verify=function(c1){if(typeof c1!="object"||c1===null)return"object expected";if(c1.elemType!=null&&c1.hasOwnProperty("elemType")){var d1=o1.onnx.TypeProto.verify(c1.elemType);if(d1)return"elemType."+d1}return null},l1.fromObject=function(c1){if(c1 instanceof o1.onnx.TypeProto.Sequence)return c1;var d1=new o1.onnx.TypeProto.Sequence;if(c1.elemType!=null){if(typeof c1.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");d1.elemType=o1.onnx.TypeProto.fromObject(c1.elemType)}return d1},l1.toObject=function(c1,d1){d1||(d1={});var h1={};return d1.defaults&&(h1.elemType=null),c1.elemType!=null&&c1.hasOwnProperty("elemType")&&(h1.elemType=o1.onnx.TypeProto.toObject(c1.elemType,d1)),h1},l1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},l1.getTypeUrl=function(c1){return c1===void 0&&(c1="type.googleapis.com"),c1+"/onnx.TypeProto.Sequence"},l1}(),u1.Map=function(){function l1(c1){if(c1)for(var d1=Object.keys(c1),h1=0;h1<d1.length;++h1)c1[d1[h1]]!=null&&(this[d1[h1]]=c1[d1[h1]])}return l1.prototype.keyType=0,l1.prototype.valueType=null,l1.create=function(c1){return new l1(c1)},l1.encode=function(c1,d1){return d1||(d1=n1.create()),c1.keyType!=null&&Object.hasOwnProperty.call(c1,"keyType")&&d1.uint32(8).int32(c1.keyType),c1.valueType!=null&&Object.hasOwnProperty.call(c1,"valueType")&&o1.onnx.TypeProto.encode(c1.valueType,d1.uint32(18).fork()).ldelim(),d1},l1.encodeDelimited=function(c1,d1){return this.encode(c1,d1).ldelim()},l1.decode=function(c1,d1){c1 instanceof r1||(c1=r1.create(c1));for(var h1=d1===void 0?c1.len:c1.pos+d1,f1=new o1.onnx.TypeProto.Map;c1.pos<h1;){var g1=c1.uint32();switch(g1>>>3){case 1:{f1.keyType=c1.int32();break}case 2:{f1.valueType=o1.onnx.TypeProto.decode(c1,c1.uint32());break}default:c1.skipType(g1&7);break}}return f1},l1.decodeDelimited=function(c1){return c1 instanceof r1||(c1=new r1(c1)),this.decode(c1,c1.uint32())},l1.verify=function(c1){if(typeof c1!="object"||c1===null)return"object expected";if(c1.keyType!=null&&c1.hasOwnProperty("keyType")&&!i1.isInteger(c1.keyType))return"keyType: integer expected";if(c1.valueType!=null&&c1.hasOwnProperty("valueType")){var d1=o1.onnx.TypeProto.verify(c1.valueType);if(d1)return"valueType."+d1}return null},l1.fromObject=function(c1){if(c1 instanceof o1.onnx.TypeProto.Map)return c1;var d1=new o1.onnx.TypeProto.Map;if(c1.keyType!=null&&(d1.keyType=c1.keyType|0),c1.valueType!=null){if(typeof c1.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");d1.valueType=o1.onnx.TypeProto.fromObject(c1.valueType)}return d1},l1.toObject=function(c1,d1){d1||(d1={});var h1={};return d1.defaults&&(h1.keyType=0,h1.valueType=null),c1.keyType!=null&&c1.hasOwnProperty("keyType")&&(h1.keyType=c1.keyType),c1.valueType!=null&&c1.hasOwnProperty("valueType")&&(h1.valueType=o1.onnx.TypeProto.toObject(c1.valueType,d1)),h1},l1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},l1.getTypeUrl=function(c1){return c1===void 0&&(c1="type.googleapis.com"),c1+"/onnx.TypeProto.Map"},l1}(),u1.Optional=function(){function l1(c1){if(c1)for(var d1=Object.keys(c1),h1=0;h1<d1.length;++h1)c1[d1[h1]]!=null&&(this[d1[h1]]=c1[d1[h1]])}return l1.prototype.elemType=null,l1.create=function(c1){return new l1(c1)},l1.encode=function(c1,d1){return d1||(d1=n1.create()),c1.elemType!=null&&Object.hasOwnProperty.call(c1,"elemType")&&o1.onnx.TypeProto.encode(c1.elemType,d1.uint32(10).fork()).ldelim(),d1},l1.encodeDelimited=function(c1,d1){return this.encode(c1,d1).ldelim()},l1.decode=function(c1,d1){c1 instanceof r1||(c1=r1.create(c1));for(var h1=d1===void 0?c1.len:c1.pos+d1,f1=new o1.onnx.TypeProto.Optional;c1.pos<h1;){var g1=c1.uint32();switch(g1>>>3){case 1:{f1.elemType=o1.onnx.TypeProto.decode(c1,c1.uint32());break}default:c1.skipType(g1&7);break}}return f1},l1.decodeDelimited=function(c1){return c1 instanceof r1||(c1=new r1(c1)),this.decode(c1,c1.uint32())},l1.verify=function(c1){if(typeof c1!="object"||c1===null)return"object expected";if(c1.elemType!=null&&c1.hasOwnProperty("elemType")){var d1=o1.onnx.TypeProto.verify(c1.elemType);if(d1)return"elemType."+d1}return null},l1.fromObject=function(c1){if(c1 instanceof o1.onnx.TypeProto.Optional)return c1;var d1=new o1.onnx.TypeProto.Optional;if(c1.elemType!=null){if(typeof c1.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");d1.elemType=o1.onnx.TypeProto.fromObject(c1.elemType)}return d1},l1.toObject=function(c1,d1){d1||(d1={});var h1={};return d1.defaults&&(h1.elemType=null),c1.elemType!=null&&c1.hasOwnProperty("elemType")&&(h1.elemType=o1.onnx.TypeProto.toObject(c1.elemType,d1)),h1},l1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},l1.getTypeUrl=function(c1){return c1===void 0&&(c1="type.googleapis.com"),c1+"/onnx.TypeProto.Optional"},l1}(),u1.SparseTensor=function(){function l1(c1){if(c1)for(var d1=Object.keys(c1),h1=0;h1<d1.length;++h1)c1[d1[h1]]!=null&&(this[d1[h1]]=c1[d1[h1]])}return l1.prototype.elemType=0,l1.prototype.shape=null,l1.create=function(c1){return new l1(c1)},l1.encode=function(c1,d1){return d1||(d1=n1.create()),c1.elemType!=null&&Object.hasOwnProperty.call(c1,"elemType")&&d1.uint32(8).int32(c1.elemType),c1.shape!=null&&Object.hasOwnProperty.call(c1,"shape")&&o1.onnx.TensorShapeProto.encode(c1.shape,d1.uint32(18).fork()).ldelim(),d1},l1.encodeDelimited=function(c1,d1){return this.encode(c1,d1).ldelim()},l1.decode=function(c1,d1){c1 instanceof r1||(c1=r1.create(c1));for(var h1=d1===void 0?c1.len:c1.pos+d1,f1=new o1.onnx.TypeProto.SparseTensor;c1.pos<h1;){var g1=c1.uint32();switch(g1>>>3){case 1:{f1.elemType=c1.int32();break}case 2:{f1.shape=o1.onnx.TensorShapeProto.decode(c1,c1.uint32());break}default:c1.skipType(g1&7);break}}return f1},l1.decodeDelimited=function(c1){return c1 instanceof r1||(c1=new r1(c1)),this.decode(c1,c1.uint32())},l1.verify=function(c1){if(typeof c1!="object"||c1===null)return"object expected";if(c1.elemType!=null&&c1.hasOwnProperty("elemType")&&!i1.isInteger(c1.elemType))return"elemType: integer expected";if(c1.shape!=null&&c1.hasOwnProperty("shape")){var d1=o1.onnx.TensorShapeProto.verify(c1.shape);if(d1)return"shape."+d1}return null},l1.fromObject=function(c1){if(c1 instanceof o1.onnx.TypeProto.SparseTensor)return c1;var d1=new o1.onnx.TypeProto.SparseTensor;if(c1.elemType!=null&&(d1.elemType=c1.elemType|0),c1.shape!=null){if(typeof c1.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");d1.shape=o1.onnx.TensorShapeProto.fromObject(c1.shape)}return d1},l1.toObject=function(c1,d1){d1||(d1={});var h1={};return d1.defaults&&(h1.elemType=0,h1.shape=null),c1.elemType!=null&&c1.hasOwnProperty("elemType")&&(h1.elemType=c1.elemType),c1.shape!=null&&c1.hasOwnProperty("shape")&&(h1.shape=o1.onnx.TensorShapeProto.toObject(c1.shape,d1)),h1},l1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},l1.getTypeUrl=function(c1){return c1===void 0&&(c1="type.googleapis.com"),c1+"/onnx.TypeProto.SparseTensor"},l1}(),u1}(),a1.OperatorSetIdProto=function(){function u1(s1){if(s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.domain="",u1.prototype.version=i1.Long?i1.Long.fromBits(0,0,!1):0,u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){return l1||(l1=n1.create()),s1.domain!=null&&Object.hasOwnProperty.call(s1,"domain")&&l1.uint32(10).string(s1.domain),s1.version!=null&&Object.hasOwnProperty.call(s1,"version")&&l1.uint32(16).int64(s1.version),l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.OperatorSetIdProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.domain=s1.string();break}case 2:{d1.version=s1.int64();break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){return typeof s1!="object"||s1===null?"object expected":s1.domain!=null&&s1.hasOwnProperty("domain")&&!i1.isString(s1.domain)?"domain: string expected":s1.version!=null&&s1.hasOwnProperty("version")&&!i1.isInteger(s1.version)&&!(s1.version&&i1.isInteger(s1.version.low)&&i1.isInteger(s1.version.high))?"version: integer|Long expected":null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.OperatorSetIdProto)return s1;var l1=new o1.onnx.OperatorSetIdProto;return s1.domain!=null&&(l1.domain=String(s1.domain)),s1.version!=null&&(i1.Long?(l1.version=i1.Long.fromValue(s1.version)).unsigned=!1:typeof s1.version=="string"?l1.version=parseInt(s1.version,10):typeof s1.version=="number"?l1.version=s1.version:typeof s1.version=="object"&&(l1.version=new i1.LongBits(s1.version.low>>>0,s1.version.high>>>0).toNumber())),l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if(l1.defaults)if(c1.domain="",i1.Long){var d1=new i1.Long(0,0,!1);c1.version=l1.longs===String?d1.toString():l1.longs===Number?d1.toNumber():d1}else c1.version=l1.longs===String?"0":0;return s1.domain!=null&&s1.hasOwnProperty("domain")&&(c1.domain=s1.domain),s1.version!=null&&s1.hasOwnProperty("version")&&(typeof s1.version=="number"?c1.version=l1.longs===String?String(s1.version):s1.version:c1.version=l1.longs===String?i1.Long.prototype.toString.call(s1.version):l1.longs===Number?new i1.LongBits(s1.version.low>>>0,s1.version.high>>>0).toNumber():s1.version),c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.OperatorSetIdProto"},u1}(),a1.OperatorStatus=function(){var u1={},s1=Object.create(u1);return s1[u1[0]="EXPERIMENTAL"]=0,s1[u1[1]="STABLE"]=1,s1}(),a1.FunctionProto=function(){function u1(s1){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],s1)for(var l1=Object.keys(s1),c1=0;c1<l1.length;++c1)s1[l1[c1]]!=null&&(this[l1[c1]]=s1[l1[c1]])}return u1.prototype.name="",u1.prototype.input=i1.emptyArray,u1.prototype.output=i1.emptyArray,u1.prototype.attribute=i1.emptyArray,u1.prototype.attributeProto=i1.emptyArray,u1.prototype.node=i1.emptyArray,u1.prototype.docString="",u1.prototype.opsetImport=i1.emptyArray,u1.prototype.domain="",u1.create=function(s1){return new u1(s1)},u1.encode=function(s1,l1){if(l1||(l1=n1.create()),s1.name!=null&&Object.hasOwnProperty.call(s1,"name")&&l1.uint32(10).string(s1.name),s1.input!=null&&s1.input.length)for(var c1=0;c1<s1.input.length;++c1)l1.uint32(34).string(s1.input[c1]);if(s1.output!=null&&s1.output.length)for(var c1=0;c1<s1.output.length;++c1)l1.uint32(42).string(s1.output[c1]);if(s1.attribute!=null&&s1.attribute.length)for(var c1=0;c1<s1.attribute.length;++c1)l1.uint32(50).string(s1.attribute[c1]);if(s1.node!=null&&s1.node.length)for(var c1=0;c1<s1.node.length;++c1)o1.onnx.NodeProto.encode(s1.node[c1],l1.uint32(58).fork()).ldelim();if(s1.docString!=null&&Object.hasOwnProperty.call(s1,"docString")&&l1.uint32(66).string(s1.docString),s1.opsetImport!=null&&s1.opsetImport.length)for(var c1=0;c1<s1.opsetImport.length;++c1)o1.onnx.OperatorSetIdProto.encode(s1.opsetImport[c1],l1.uint32(74).fork()).ldelim();if(s1.domain!=null&&Object.hasOwnProperty.call(s1,"domain")&&l1.uint32(82).string(s1.domain),s1.attributeProto!=null&&s1.attributeProto.length)for(var c1=0;c1<s1.attributeProto.length;++c1)o1.onnx.AttributeProto.encode(s1.attributeProto[c1],l1.uint32(90).fork()).ldelim();return l1},u1.encodeDelimited=function(s1,l1){return this.encode(s1,l1).ldelim()},u1.decode=function(s1,l1){s1 instanceof r1||(s1=r1.create(s1));for(var c1=l1===void 0?s1.len:s1.pos+l1,d1=new o1.onnx.FunctionProto;s1.pos<c1;){var h1=s1.uint32();switch(h1>>>3){case 1:{d1.name=s1.string();break}case 4:{d1.input&&d1.input.length||(d1.input=[]),d1.input.push(s1.string());break}case 5:{d1.output&&d1.output.length||(d1.output=[]),d1.output.push(s1.string());break}case 6:{d1.attribute&&d1.attribute.length||(d1.attribute=[]),d1.attribute.push(s1.string());break}case 11:{d1.attributeProto&&d1.attributeProto.length||(d1.attributeProto=[]),d1.attributeProto.push(o1.onnx.AttributeProto.decode(s1,s1.uint32()));break}case 7:{d1.node&&d1.node.length||(d1.node=[]),d1.node.push(o1.onnx.NodeProto.decode(s1,s1.uint32()));break}case 8:{d1.docString=s1.string();break}case 9:{d1.opsetImport&&d1.opsetImport.length||(d1.opsetImport=[]),d1.opsetImport.push(o1.onnx.OperatorSetIdProto.decode(s1,s1.uint32()));break}case 10:{d1.domain=s1.string();break}default:s1.skipType(h1&7);break}}return d1},u1.decodeDelimited=function(s1){return s1 instanceof r1||(s1=new r1(s1)),this.decode(s1,s1.uint32())},u1.verify=function(s1){if(typeof s1!="object"||s1===null)return"object expected";if(s1.name!=null&&s1.hasOwnProperty("name")&&!i1.isString(s1.name))return"name: string expected";if(s1.input!=null&&s1.hasOwnProperty("input")){if(!Array.isArray(s1.input))return"input: array expected";for(var l1=0;l1<s1.input.length;++l1)if(!i1.isString(s1.input[l1]))return"input: string[] expected"}if(s1.output!=null&&s1.hasOwnProperty("output")){if(!Array.isArray(s1.output))return"output: array expected";for(var l1=0;l1<s1.output.length;++l1)if(!i1.isString(s1.output[l1]))return"output: string[] expected"}if(s1.attribute!=null&&s1.hasOwnProperty("attribute")){if(!Array.isArray(s1.attribute))return"attribute: array expected";for(var l1=0;l1<s1.attribute.length;++l1)if(!i1.isString(s1.attribute[l1]))return"attribute: string[] expected"}if(s1.attributeProto!=null&&s1.hasOwnProperty("attributeProto")){if(!Array.isArray(s1.attributeProto))return"attributeProto: array expected";for(var l1=0;l1<s1.attributeProto.length;++l1){var c1=o1.onnx.AttributeProto.verify(s1.attributeProto[l1]);if(c1)return"attributeProto."+c1}}if(s1.node!=null&&s1.hasOwnProperty("node")){if(!Array.isArray(s1.node))return"node: array expected";for(var l1=0;l1<s1.node.length;++l1){var c1=o1.onnx.NodeProto.verify(s1.node[l1]);if(c1)return"node."+c1}}if(s1.docString!=null&&s1.hasOwnProperty("docString")&&!i1.isString(s1.docString))return"docString: string expected";if(s1.opsetImport!=null&&s1.hasOwnProperty("opsetImport")){if(!Array.isArray(s1.opsetImport))return"opsetImport: array expected";for(var l1=0;l1<s1.opsetImport.length;++l1){var c1=o1.onnx.OperatorSetIdProto.verify(s1.opsetImport[l1]);if(c1)return"opsetImport."+c1}}return s1.domain!=null&&s1.hasOwnProperty("domain")&&!i1.isString(s1.domain)?"domain: string expected":null},u1.fromObject=function(s1){if(s1 instanceof o1.onnx.FunctionProto)return s1;var l1=new o1.onnx.FunctionProto;if(s1.name!=null&&(l1.name=String(s1.name)),s1.input){if(!Array.isArray(s1.input))throw TypeError(".onnx.FunctionProto.input: array expected");l1.input=[];for(var c1=0;c1<s1.input.length;++c1)l1.input[c1]=String(s1.input[c1])}if(s1.output){if(!Array.isArray(s1.output))throw TypeError(".onnx.FunctionProto.output: array expected");l1.output=[];for(var c1=0;c1<s1.output.length;++c1)l1.output[c1]=String(s1.output[c1])}if(s1.attribute){if(!Array.isArray(s1.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");l1.attribute=[];for(var c1=0;c1<s1.attribute.length;++c1)l1.attribute[c1]=String(s1.attribute[c1])}if(s1.attributeProto){if(!Array.isArray(s1.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");l1.attributeProto=[];for(var c1=0;c1<s1.attributeProto.length;++c1){if(typeof s1.attributeProto[c1]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");l1.attributeProto[c1]=o1.onnx.AttributeProto.fromObject(s1.attributeProto[c1])}}if(s1.node){if(!Array.isArray(s1.node))throw TypeError(".onnx.FunctionProto.node: array expected");l1.node=[];for(var c1=0;c1<s1.node.length;++c1){if(typeof s1.node[c1]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");l1.node[c1]=o1.onnx.NodeProto.fromObject(s1.node[c1])}}if(s1.docString!=null&&(l1.docString=String(s1.docString)),s1.opsetImport){if(!Array.isArray(s1.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");l1.opsetImport=[];for(var c1=0;c1<s1.opsetImport.length;++c1){if(typeof s1.opsetImport[c1]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");l1.opsetImport[c1]=o1.onnx.OperatorSetIdProto.fromObject(s1.opsetImport[c1])}}return s1.domain!=null&&(l1.domain=String(s1.domain)),l1},u1.toObject=function(s1,l1){l1||(l1={});var c1={};if((l1.arrays||l1.defaults)&&(c1.input=[],c1.output=[],c1.attribute=[],c1.node=[],c1.opsetImport=[],c1.attributeProto=[]),l1.defaults&&(c1.name="",c1.docString="",c1.domain=""),s1.name!=null&&s1.hasOwnProperty("name")&&(c1.name=s1.name),s1.input&&s1.input.length){c1.input=[];for(var d1=0;d1<s1.input.length;++d1)c1.input[d1]=s1.input[d1]}if(s1.output&&s1.output.length){c1.output=[];for(var d1=0;d1<s1.output.length;++d1)c1.output[d1]=s1.output[d1]}if(s1.attribute&&s1.attribute.length){c1.attribute=[];for(var d1=0;d1<s1.attribute.length;++d1)c1.attribute[d1]=s1.attribute[d1]}if(s1.node&&s1.node.length){c1.node=[];for(var d1=0;d1<s1.node.length;++d1)c1.node[d1]=o1.onnx.NodeProto.toObject(s1.node[d1],l1)}if(s1.docString!=null&&s1.hasOwnProperty("docString")&&(c1.docString=s1.docString),s1.opsetImport&&s1.opsetImport.length){c1.opsetImport=[];for(var d1=0;d1<s1.opsetImport.length;++d1)c1.opsetImport[d1]=o1.onnx.OperatorSetIdProto.toObject(s1.opsetImport[d1],l1)}if(s1.domain!=null&&s1.hasOwnProperty("domain")&&(c1.domain=s1.domain),s1.attributeProto&&s1.attributeProto.length){c1.attributeProto=[];for(var d1=0;d1<s1.attributeProto.length;++d1)c1.attributeProto[d1]=o1.onnx.AttributeProto.toObject(s1.attributeProto[d1],l1)}return c1},u1.prototype.toJSON=function(){return this.constructor.toObject(this,t1.util.toJSONOptions)},u1.getTypeUrl=function(s1){return s1===void 0&&(s1="type.googleapis.com"),s1+"/onnx.FunctionProto"},u1}(),a1}(),_g.exports=o1});function Fr(e1,_g){if(!e1)throw new Error(typeof _g=="string"?_g:_g())}function sn$1(e1){return new TextDecoder().decode(e1)}var ye$1,hr$1,pi$1,Ze$1,jn$1,We$1,it,U$2,an$1,mr$1,br,gr$1,fe$1=L$1(()=>{zn$1(),Zo(),ye$1=Ar(Cr()),yr(),hr$1=class{static arraysEqual(e1,_g){if(e1.length!==_g.length)return!1;for(let t1=0;t1<e1.length;t1++)if(e1[t1]!==_g[t1])return!1;return!0}},pi$1=class{static preprocessInputShapes(e1,_g){let t1=e1.length===1?[1,e1[0]]:e1,r1=_g.length===1?[_g[0],1]:_g;return[t1,r1]}static postprocessOutputShape(e1,_g,t1){_g===1&&e1.splice(e1.length-2,1),t1===1&&e1.pop()}static calcMatMulShape(e1,_g){return e1[1]!==_g[0]?void 0:[e1[0],_g[1]]}},Ze$1=class Vw{static calcShape(_g,t1,r1=!1){let n1=_g.length,i1=t1.length;if(n1===0)return t1;if(i1===0)return _g;let o1=Math.max(_g.length,t1.length),a1=new Array(o1);if(r1){if(n1<2||i1<2)return;let u1=pi$1.calcMatMulShape([_g[n1-2],_g[n1-1]],[t1[i1-2],t1[i1-1]]);if(u1===void 0)return;[a1[o1-2],a1[o1-1]]=u1}for(let u1=r1?3:1;u1<=o1;u1++){let s1=n1-u1<0?1:_g[n1-u1],l1=i1-u1<0?1:t1[i1-u1];if(s1!==l1&&s1>1&&l1>1)return;a1[o1-u1]=Math.max(s1,l1)}return a1}static index(_g,t1){let r1=new Array(t1.length);return Vw.fillIndex(_g,t1,r1),r1}static fillIndex(_g,t1,r1){let n1=_g.length-t1.length;for(let i1=0;i1<t1.length;i1++)r1[i1]=_g[n1+i1]%t1[i1]}static calc(_g,t1,r1,n1,i1){let o1=Vw.calcShape(_g.dims,t1.dims);if(o1){if(n1&&!U$2.areEqual(o1,_g.dims))return;let a1=U$2.size(o1),u1=n1?_g:new $e(o1,i1||_g.type);if(o1.length===0)u1.set([],r1(_g.get([]),t1.get([])));else{let s1=new Array(o1.length),l1=new Array(_g.dims.length),c1=new Array(t1.dims.length),d1=0,h1=0,f1=!1,g1=!1;_g.dims.length===0&&(d1=_g.get([]),f1=!0),t1.dims.length===0&&(h1=t1.get([]),g1=!0);let v1;for(let $1=0;$1<a1;$1++){v1=$1;for(let y1=o1.length-1;y1>=0;y1--)s1[y1]=v1%o1[y1],v1=Math.floor(v1/o1[y1]);f1||(Vw.fillIndex(s1,_g.dims,l1),d1=_g.get(l1)),g1||(Vw.fillIndex(s1,t1.dims,c1),h1=t1.get(c1)),u1.set(s1,r1(d1,h1))}}return u1}}static isValidBroadcast(_g,t1){let r1=_g.length,n1=t1.length;if(r1>n1)return!1;for(let i1=1;i1<=r1;i1++)if(_g[r1-i1]!==1&&_g[r1-i1]!==t1[n1-i1])return!1;return!0}static getBroadcastDims(_g,t1){let r1=_g.length,n1=[];for(let i1=0;i1<r1;i1++){let o1=r1-1-i1,a1=_g[o1]||1;(t1[t1.length-1-i1]||1)>1&&a1===1&&n1.unshift(o1)}return n1}},jn$1=class{static getShapeOfGemmResult(e1,_g,t1,r1,n1){if(e1.length!==2||t1.length!==2)throw new Error("shape need to be of size 2");let i1,o1,a1;_g?(i1=e1[1],o1=e1[0]):(i1=e1[0],o1=e1[1]);let u1=-1;if(r1?(a1=t1[0],u1=1):(a1=t1[1],u1=0),t1[u1]!==o1)throw new Error("dimension mismatch");if(i1<=0||a1<=0||o1<=0)throw new Error("invalid shape specified");if(n1&&!Ze$1.isValidBroadcast(n1,[i1,a1]))throw new Error("gemm: invalid bias shape for broadcast");return[i1,a1,o1]}},We$1=class nS{static tensorDataTypeFromProto(_g){switch(_g){case ye$1.onnx.TensorProto.DataType.INT8:return"int8";case ye$1.onnx.TensorProto.DataType.UINT8:return"uint8";case ye$1.onnx.TensorProto.DataType.BOOL:return"bool";case ye$1.onnx.TensorProto.DataType.INT16:return"int16";case ye$1.onnx.TensorProto.DataType.UINT16:return"uint16";case ye$1.onnx.TensorProto.DataType.INT32:return"int32";case ye$1.onnx.TensorProto.DataType.UINT32:return"uint32";case ye$1.onnx.TensorProto.DataType.FLOAT:return"float32";case ye$1.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye$1.onnx.TensorProto.DataType.STRING:return"string";case ye$1.onnx.TensorProto.DataType.INT64:return"int32";case ye$1.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye$1.onnx.TensorProto.DataType[_g]}`)}}static tensorDataTypeStringToEnum(_g){switch(_g){case"int8":return ye$1.onnx.TensorProto.DataType.INT8;case"uint8":return ye$1.onnx.TensorProto.DataType.UINT8;case"bool":return ye$1.onnx.TensorProto.DataType.BOOL;case"int16":return ye$1.onnx.TensorProto.DataType.INT16;case"uint16":return ye$1.onnx.TensorProto.DataType.UINT16;case"int32":return ye$1.onnx.TensorProto.DataType.INT32;case"uint32":return ye$1.onnx.TensorProto.DataType.UINT32;case"float32":return ye$1.onnx.TensorProto.DataType.FLOAT;case"float64":return ye$1.onnx.TensorProto.DataType.DOUBLE;case"string":return ye$1.onnx.TensorProto.DataType.STRING;case"int64":return ye$1.onnx.TensorProto.DataType.INT64;case"uint64":return ye$1.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${_g}`)}}static tensorDimsFromProto(_g){return _g.map(t1=>Vt.isLong(t1)?t1.toNumber():t1)}static tensorValueTypeFromProto(_g){return{tensorType:nS.tensorDataTypeFromProto(_g.elemType),shape:{dims:nS.tensorDimsFromProto(_g.shape.dim.map(t1=>t1.dimValue))}}}static tensorDimsFromORTFormat(_g){let t1=[];for(let r1=0;r1<_g.dimsLength();r1++)t1.push(it.longToNumber(_g.dims(r1)));return t1}static tensorAttributesFromORTFormat(_g){let t1=[];for(let r1=0;r1<_g.attributesLength();r1++)t1.push(_g.attributes(r1));return t1}},it=class{static longToNumber(e1,_g){return Vt.isLong(e1)?e1.toNumber():e1 instanceof _$1.Long?Vt.fromValue({low:e1.low,high:e1.high,unsigned:_g??!1}).toNumber():e1}static isLong(e1){return Vt.isLong(e1)||e1 instanceof _$1.Long}},U$2=class wx{static size(_g){return wx.getSizeFromDimensionRange(_g,0,_g.length)}static sizeFromDimension(_g,t1){if(t1<0||t1>_g.length)throw new Error(`invalid dimension of ${t1} for sizeFromDimension as Tensor has ${_g.length} dimensions.`);return wx.getSizeFromDimensionRange(_g,t1,_g.length)}static sizeToDimension(_g,t1){if(t1<0||t1>_g.length)throw new Error(`invalid dimension of ${t1} for sizeToDimension as Tensor has ${_g.length} dimensions.`);return wx.getSizeFromDimensionRange(_g,0,t1)}static getSizeFromDimensionRange(_g,t1,r1){let n1=1;for(let i1=t1;i1<r1;i1++){if(_g[i1]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");n1*=_g[i1]}return n1}static computeStrides(_g){let t1=_g.length;if(t1===0)return[];if(t1===1)return[1];let r1=new Array(t1);r1[t1-1]=1,r1[t1-2]=_g[t1-1];for(let n1=t1-3;n1>=0;--n1)r1[n1]=r1[n1+1]*_g[n1+1];return r1}static transpose(_g){return _g.slice().reverse()}static indicesToOffset(_g,t1,r1){r1===void 0&&(r1=_g.length);let n1=0;for(let i1=0;i1<r1;++i1)n1+=t1[i1]*_g[i1];return n1}static offsetToIndices(_g,t1){let r1=t1.length;if(r1===0)return[];if(r1===1)return[_g*t1[0]];let n1=new Array(t1.length);for(let i1=0;i1<n1.length-1;++i1)n1[i1]=Math.floor(_g/t1[i1]),_g-=n1[i1]*t1[i1];return n1[n1.length-1]=_g,n1}static normalizeAxis(_g,t1){if(_g<-t1&&_g>=t1)throw new Error("unsupported axis for this operation.");return _g<0?_g+t1:_g}static normalizeAxes(_g,t1){return _g.map(r1=>this.normalizeAxis(r1,t1))}static incrementIndex(_g,t1,r1){if(t1.length===0||_g.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(r1===void 0)r1=t1.length;else if(r1<=0||r1>t1.length)throw new Error("Incorrect axis to increment on");for(let n1=r1-1;n1>=0&&(_g[n1]++,!(_g[n1]<t1[n1]));--n1)_g[n1]=0}static calculateReshapedDims(_g,t1){if(t1.length===0){if(_g.length===0||wx.size(_g)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let r1=t1.length,n1=new Array(r1),i1=-1,o1=1;for(let u1=0;u1<r1;u1++){if(t1[u1]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(t1[u1]===-1){if(i1!==-1)throw new Error("at most one dimension in shape hints can be -1");i1=u1}else{if(t1[u1]===0){if(u1>=_g.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");n1[u1]=_g[u1]}else n1[u1]=t1[u1];o1*=n1[u1]}}let a1=wx.size(_g);if(i1!==-1){if(a1%o1!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${_g}] Output shape: [${t1}]`);n1[i1]=a1/o1}else if(o1!==a1)throw new Error("reshapedDims and originalDims don't have matching sizes");return n1}static sortBasedOnPerm(_g,t1){return t1?t1.map(r1=>_g[r1]):_g.slice().reverse()}static padShape(_g,t1){let r1=_g.length;return _g.map((n1,i1)=>n1+t1[i1]+t1[i1+r1])}static areEqual(_g,t1){return _g.length!==t1.length?!1:_g.every((r1,n1)=>r1===t1[n1])}static validateDimsAndCalcSize(_g){if(_g.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let t1=1;for(let r1 of _g){if(!Number.isInteger(r1))throw new TypeError(`Invalid shape: ${r1} is not an integer`);if(r1<0||r1>2147483647)throw new TypeError(`Invalid shape: length ${r1} is not allowed`);t1*=r1}return t1}static flattenShape(_g,t1){t1<0&&(t1+=_g.length);let r1=_g.reduce((i1,o1)=>i1*o1,1),n1=_g.slice(t1).reduce((i1,o1)=>i1*o1,1);return[r1/n1,n1]}static squeezeShape(_g,t1){let r1=new Array;t1=wx.normalizeAxes(t1,_g.length);for(let n1=0;n1<_g.length;n1++){let i1=t1.indexOf(n1)>=0;if(i1&&_g[n1]!==1)throw new Error("squeeze an axis of size different than 1");(t1.length===0&&_g[n1]>1||t1.length>0&&!i1)&&r1.push(_g[n1])}return r1}static unsqueezeShape(_g,t1){let r1=new Array(_g.length+t1.length);r1.fill(0);for(let i1=0;i1<t1.length;i1++){let o1=wx.normalizeAxis(t1[i1],r1.length);if(o1>=r1.length)throw new Error("'axes' has an out of range axis");if(r1[o1]!==0)throw new Error("'axes' has a duplicate axis");r1[o1]=1}let n1=0;for(let i1=0;i1<r1.length;i1++)r1[i1]===0&&(r1[i1]=_g[n1++]);if(n1!==_g.length)throw new Error("the unsqueezed dimension could not be established");return r1}},an$1=class dT{static splitShape(_g,t1,r1,n1){if(r1.length===0){if(!n1)throw new Error("need to know number of outputs when the 'split' attribute is not specified");dT.determineSplit(_g[t1],n1,r1)}let i1=[],o1=[0];for(let a1=0;a1<r1.length;++a1){a1!==0&&o1.push(o1[a1-1]+r1[a1-1]);let u1=_g.slice();u1[t1]=r1[a1],i1.push(u1)}return[i1,o1]}static determineSplit(_g,t1,r1){if(_g%t1!==0)throw new Error("cannot split tensor to equal sized parts");for(let n1=0;n1<t1;++n1)r1.push(_g/t1)}},mr$1=class Ww{static adjustPoolAttributes(_g,t1,r1,n1,i1,o1){if(!_g&&r1.length!==t1.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(_g)for(let a1=0;a1<t1.length-2;a1++)a1>=r1.length?r1.push(t1[a1+2]):r1[a1]=t1[a1+2];for(let a1=0;a1<r1.length;a1++)if(a1<n1.length){if(n1[a1]<0)throw new Error("strides should be greater than or equal to 1")}else n1.push(1);for(let a1=0;a1<r1.length;a1++)if(a1<i1.length){if(i1[a1]<0)throw new Error("dilations should be greater than or equal to 1")}else i1.push(1);for(let a1=0;a1<r1.length*2;a1++)if(a1<o1.length){if(o1[a1]<0)throw new Error("pad should be greater than or equal to 1")}else o1.push(0);for(let a1=0;a1<r1.length;a1++){if(r1[a1]<=0)throw new Error("kernel shapes need to be greater than 0");if(o1[a1]>=r1[a1]||o1[a1+r1.length]>=r1[a1])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(_g,t1,r1,n1,i1,o1){if(o1){if(i1.length!==2*(_g.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(t1.length!==_g.length-2)throw new Error("length of strides should be the length of data dimensions");if(n1.length!==_g.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let a1=0;a1<_g.length-2;a1++)Ww.adjustPadAndReturnShape(_g[a1+2],t1[a1],r1[a1],n1[a1],i1,a1,a1+_g.length-2,o1)}}static computePoolOutputShape(_g,t1,r1,n1,i1,o1,a1){if(t1.length<=0)throw new Error("input shape must be of size greater than 0");let u1=[t1[0],t1[1]];return Ww.computeShapeHelper(_g,t1,u1,r1,n1,i1,o1,a1),u1}static computeConvOutputShape(_g,t1,r1,n1,i1,o1,a1){if(_g.length<=0||t1.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let u1=[_g[0],t1[0]];return Ww.computeShapeHelper(!1,_g,u1,r1,n1,i1,o1,a1),u1}static computeShapeHelper(_g,t1,r1,n1,i1,o1,a1,u1){if(_g)for(let s1=0;s1<t1.length-2;s1++)r1.push(1);else for(let s1=0;s1<t1.length-2;s1++)r1.push(Ww.adjustPadAndReturnShape(t1[s1+2],n1[s1],i1[s1],o1[s1],a1,s1,s1+t1.length-2,u1))}static adjustPadAndReturnShape(_g,t1,r1,n1,i1,o1,a1,u1){let s1=r1*(n1-1)+1;if(u1&&u1!=="NOTSET")switch(u1){case"VALID":return i1[o1]=0,i1[a1]=0,Math.floor((_g-s1)/t1+1);case"SAME_LOWER":case"SAME_UPPER":if(r1!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let l1=((_g+t1-1)/t1-1)*t1+n1-_g;return i1[o1]=Math.floor(u1==="SAME_LOWER"?(l1+1)/2:l1/2),i1[a1]=l1-i1[o1],Math.floor((_g+l1-n1)/t1+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((_g+i1[o1]+i1[a1]-s1)/t1+1)}},br=-34028234663852886e22,gr$1=34028234663852886e22});function Hd$1(e1){switch(e1){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${e1}`)}}function Fu$1(e1){switch(e1){case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.BOOL:return 1;case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT16:return 2;case ne.onnx.TensorProto.DataType.FLOAT:case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.UINT32:return 4;case ne.onnx.TensorProto.DataType.INT64:case ne.onnx.TensorProto.DataType.DOUBLE:case ne.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne.onnx.TensorProto.DataType[e1]}`)}}function qd$1(e1,_g){return new(Bu$1(_g))(e1)}function Bu$1(e1){switch(e1){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi$1(e1,_g){if(_g===ne.onnx.TensorProto.DataType.INT64||_g===di$1.TensorDataType.INT64){if(e1.greaterThanOrEqual(2147483648)||e1.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(_g===ne.onnx.TensorProto.DataType.UINT32||_g===di$1.TensorDataType.UINT32||_g===ne.onnx.TensorProto.DataType.UINT64||_g===di$1.TensorDataType.UINT64){if(e1.greaterThanOrEqual(4294967296)||e1.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ne.onnx.TensorProto.DataType[_g]}`);return e1.toNumber()}function $u$1(e1,_g,t1){switch(_g){case ne.onnx.TensorProto.DataType.BOOL:case ne.onnx.TensorProto.DataType.UINT8:return e1.getUint8(t1);case ne.onnx.TensorProto.DataType.INT8:return e1.getInt8(t1);case ne.onnx.TensorProto.DataType.UINT16:return e1.getUint16(t1,!0);case ne.onnx.TensorProto.DataType.INT16:return e1.getInt16(t1,!0);case ne.onnx.TensorProto.DataType.FLOAT:return e1.getFloat32(t1,!0);case ne.onnx.TensorProto.DataType.INT32:return e1.getInt32(t1,!0);case ne.onnx.TensorProto.DataType.UINT32:return e1.getUint32(t1,!0);case ne.onnx.TensorProto.DataType.INT64:return hi$1(Vt.fromBits(e1.getUint32(t1,!0),e1.getUint32(t1+4,!0),!1),_g);case ne.onnx.TensorProto.DataType.DOUBLE:return e1.getFloat64(t1,!0);case ne.onnx.TensorProto.DataType.UINT64:return hi$1(Vt.fromBits(e1.getUint32(t1,!0),e1.getUint32(t1+4,!0),!0),_g);default:throw new Error(`cannot read from DataView for type ${ne.onnx.TensorProto.DataType[_g]}`)}}var ku$1,ne,di$1,$e,yr=L$1(()=>{ku$1=Ar(Os$1()),Zo(),tn$1(),ne=Ar(Cr()),fe$1(),di$1=V.experimental.fbs,$e=class q2{constructor(_g,t1,r1,n1,i1,o1=ku$1.Guid.create()){this.dims=_g,this.type=t1,this.dataProvider=r1,this.asyncDataProvider=n1,this.cache=i1,this.dataId=o1,this.size=U$2.validateDimsAndCalcSize(_g);let a1=this.size,u1=r1===void 0&&n1===void 0&&i1===void 0;if(i1!==void 0&&i1.length!==a1)throw new RangeError("Input dims doesn't match data length.");if(t1==="string"){if(i1!==void 0&&(!Array.isArray(i1)||!i1.every(s1=>typeof s1=="string")))throw new TypeError("cache should be a string array");u1&&(this.cache=new Array(a1))}else{if(i1!==void 0){let s1=Bu$1(t1);if(!(i1 instanceof s1))throw new TypeError(`cache should be type ${s1.name}`)}if(u1){let s1=new ArrayBuffer(a1*Hd$1(t1));this.cache=qd$1(s1,t1)}}}get data(){if(this.cache===void 0){let _g=this.dataProvider(this.dataId);if(_g.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=_g}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(_g){return this.data[U$2.indicesToOffset(_g,this.strides)]}set(_g,t1){this.data[U$2.indicesToOffset(_g,this.strides)]=t1}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U$2.computeStrides(this.dims)),this._strides}static fromProto(_g){if(!_g)throw new Error("cannot construct Value from an empty tensor");let t1=We$1.tensorDataTypeFromProto(_g.dataType),r1=We$1.tensorDimsFromProto(_g.dims),n1=new q2(r1,t1);if(t1==="string")_g.stringData.forEach((i1,o1)=>{n1.data[o1]=sn$1(i1)});else if(_g.rawData&&typeof _g.rawData.byteLength=="number"&&_g.rawData.byteLength>0){let i1=n1.data,o1=new DataView(_g.rawData.buffer,_g.rawData.byteOffset,_g.rawData.byteLength),a1=Fu$1(_g.dataType),u1=_g.rawData.byteLength/a1;if(_g.rawData.byteLength%a1!==0)throw new Error("invalid buffer length");if(i1.length!==u1)throw new Error("buffer length mismatch");for(let s1=0;s1<u1;s1++){let l1=$u$1(o1,_g.dataType,s1*a1);i1[s1]=l1}}else{let i1;switch(_g.dataType){case ne.onnx.TensorProto.DataType.FLOAT:i1=_g.floatData;break;case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.INT16:case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.BOOL:i1=_g.int32Data;break;case ne.onnx.TensorProto.DataType.INT64:i1=_g.int64Data;break;case ne.onnx.TensorProto.DataType.DOUBLE:i1=_g.doubleData;break;case ne.onnx.TensorProto.DataType.UINT32:case ne.onnx.TensorProto.DataType.UINT64:i1=_g.uint64Data;break;default:throw new Error("unspecific error")}if(i1==null)throw new Error("failed to populate data from a tensorproto value");let o1=n1.data;if(o1.length!==i1.length)throw new Error("array length mismatch");for(let a1=0;a1<i1.length;a1++){let u1=i1[a1];Vt.isLong(u1)?o1[a1]=hi$1(u1,_g.dataType):o1[a1]=u1}}return n1}static fromData(_g,t1,r1){return new q2(t1,r1,void 0,void 0,_g)}static fromOrtTensor(_g){if(!_g)throw new Error("cannot construct Value from an empty tensor");let t1=We$1.tensorDimsFromORTFormat(_g),r1=We$1.tensorDataTypeFromProto(_g.dataType()),n1=new q2(t1,r1);if(r1==="string")for(let i1=0;i1<_g.stringDataLength();i1++)n1.data[i1]=_g.stringData(i1);else if(_g.rawDataArray()&&typeof _g.rawDataLength()=="number"&&_g.rawDataLength()>0){let i1=n1.data,o1=new DataView(_g.rawDataArray().buffer,_g.rawDataArray().byteOffset,_g.rawDataLength()),a1=Fu$1(_g.dataType()),u1=_g.rawDataLength()/a1;if(_g.rawDataLength()%a1!==0)throw new Error("invalid buffer length");if(i1.length!==u1)throw new Error("buffer length mismatch");for(let s1=0;s1<u1;s1++){let l1=$u$1(o1,_g.dataType(),s1*a1);i1[s1]=l1}}return n1}}});function H(e1){return e1===1?jd$1:Yd$1}function Nu$1(e1){let _g=H(e1);return`${_g.version}
      precision highp float;
      ${_g.attribute} vec3 position;
      ${_g.attribute} vec2 textureCoord;

      ${_g.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Ru$1(e1){let _g=H(e1);return`${_g.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${_g.varyingFrag} vec2 TexCoords;
    ${_g.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Mu$1(e1,_g){let t1=H(e1);return`
  void main() {
    int indices[${_g}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${t1.output} = result;
  }
  `}var jd$1,Yd$1,we$1=L$1(()=>{jd$1={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd$1={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L$1(()=>{});async function mi$1(e1,_g=r1=>0,t1){return new Promise((r1,n1)=>{let i1=0,o1=()=>{if(e1()){r1();return}i1++;let a1=_g(i1);setTimeout(o1,a1)};o1()})}function Yn$1(e1){return Fr(typeof e1<"u"&&e1.length!==0,()=>"empty string found for sampler name"),"get"+e1.charAt(0).toUpperCase()+e1.slice(1)}function Gu$1(e1){return Fr(typeof e1<"u"&&e1.length!==0,()=>"empty string found for sampler name"),"get"+e1.charAt(0).toUpperCase()+e1.slice(1)+"AtOutCoords"}function $r(e1,_g){let t1=JSON.parse(JSON.stringify(e1));return t1=_g,t1}function kr$1(e1,_g){return _g.map(t1=>e1[t1]).join(", ")}function Qe(e1){if(e1<=1)return"int";if(e1===2)return"ivec2";if(e1===3)return"ivec3";if(e1===4)return"ivec4";if(e1===5)return"ivec5";if(e1===6)return"ivec6";throw Error(`GPU for rank ${e1} is not yet supported`)}function Dt$1(e1=6){return["x","y","z","w","u","v"].slice(0,e1)}var Bt$1=L$1(()=>{fe$1()});function Xd$1(e1,_g){return Dt$1(_g).map(t1=>`${e1}.${t1}`)}function Br$1(e1,_g){return _g===1?[e1]:Xd$1(e1,_g)}function Nt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Tr=L$1(()=>{Bt$1()});function Jd(e1,_g,t1){if(e1===0)return"false";if(e1===1)return`rc > ${_g[0]}`;let r1="";for(let n1=e1-2;n1<e1;n1++)r1+=`${t1[n1]} >= ${_g[n1-e1+2]}`,n1<e1-1&&(r1+="||");return r1}function Zd(e1,_g){let t1=e1.length;if(t1===0)return"getA(), 0, 0, 0";if(t1===1)return`getA(rc),
            rc + 1 >= ${e1[0]} ? 0. : getA(rc + 1),
            0, 0`;let r1="r, c",n1="r, cp1",i1="rp1, c",o1="rp1, cp1",a1="";if(t1>2)for(let u1=0;u1<t1-2;++u1)a1=a1+`${_g[u1]},`;return`getA(${a1}${r1}),
          rEdge ? 0. : getA(${a1}${i1}),
          cEdge ? 0. : getA(${a1}${n1}),
          rEdge || cEdge ? 0. : getA(${a1}${o1})`}function Qd(e1,_g,t1,r1){return e1===0||e1===1?"":`
    int r = ${_g[e1-2]};
    int c = ${_g[e1-1]};
    int rp1 = ${_g[e1-2]} + 1;
    int cp1 = ${_g[e1-1]} + 1;
    bool rEdge = rp1 >= ${r1};
    bool cEdge = cp1 >= ${t1};
    `}var Uu$1,Kd$1,zu$1,Vu$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Uu$1={name:"pack",inputNames:["A"],inputTypes:[1]},Kd$1=(e1,_g)=>{let t1=H(e1.session.backend.glContext.version),r1=_g.dims,n1=r1.length,i1=_g.dims.length,o1=Qe(i1),a1=Br$1("rc",i1),u1=Qd(i1,a1,r1[r1.length-2],r1[r1.length-1]),s1;n1===0?s1=[1,1]:n1===1?s1=[r1[0],1]:s1=[r1[i1-1],r1[i1-2]];let l1=Jd(i1,s1,a1),c1=Zd(r1,a1),d1=`
        void main() {
          ${o1} rc = getOutputCoords();

          if(${l1}) {
            ${t1.output} = vec4(0);
          } else {
            ${u1}

            ${t1.output} = vec4(${c1});
          }
        }
      `;return{...Uu$1,hasMain:!0,output:{dims:_g.dims,type:_g.type,textureType:2},shaderSource:d1}},zu$1=(e1,_g)=>({...Uu$1,get:()=>Kd$1(e1,_g)})});function bi(e1){if(e1.length===0)return[1,1,1];let _g=1;for(let t1=0;t1<e1.length-2;++t1)_g*=e1[t1];return[_g,e1.length>1?e1[e1.length-2]:1,e1[e1.length-1]]}function Hu$1(e1,_g){let t1=!1;return e1.length===0||_g.length===0?t1=!0:e1.length<2||_g.length<2?t1=e1[e1.length-1]===_g[_g.length-1]:t1=e1[e1.length-1]===_g[_g.length-1]&&e1[e1.length-2]===_g[_g.length-2],t1}function rh(e1){let _g=U$2.computeStrides(e1),t1=["b","r","c"],r1="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${_g.map((n1,i1)=>{let o1=`int ${t1[i1]} = ${r1} / ${n1}`,a1=i1===_g.length-1?`int ${t1[i1+1]} = ${r1} - ${t1[i1]} * ${n1}`:`index -= ${t1[i1]} * ${n1}`;return`${o1}; ${a1};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function nh(e1){let _g=U$2.computeStrides(e1);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${_g[0]} + coords.z * ${_g[1]} + coords.y;
  }
`}var eh,th,Wu$1,qu$1=L$1(()=>{fe$1(),we$1(),ae(),Tr(),eh=e1=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${e1}`}),th=(e1,_g,t1,r1)=>{let n1=_g.dims,i1=r1,o1="";for(let s1=0;s1<4;s1++){let l1="";switch(s1){case 0:l1="outputCoords = rc;";break;case 1:l1="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:l1="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:l1="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}o1+=`
        ${l1}
        ${s1>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s1}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${s1>0?"}":""}
      `}let a1=H(e1.session.backend.glContext.version),u1=`
      ${rh(n1)}
      ${nh(i1)}
      ${Nt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${i1[2]};
        int cols = ${i1[1]};

        ${o1}
        ${a1.output} = result;
      }
    `;return{...t1,output:{dims:i1,type:_g.type,textureType:2},shaderSource:u1,hasMain:!0}},Wu$1=(e1,_g,t1)=>{let r1=eh(t1);return{...r1,get:()=>th(e1,_g,r1,t1)}}}),gi,ju$1=L$1(()=>{we$1(),ae(),gi=(e1,_g)=>{let t1=_g.shape,r1=H(e1.session.backend.glContext.version),n1=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${r1.texture2D}(X,TexCoords).r;
      ${r1.output} = encodeAsUint8(value);
    }`,i1={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:t1,type:_g.tensor.type,textureType:3},shaderSource:n1,hasMain:!0};return e1.executeProgram(i1,[_g.tensor])}});function ih(e1,_g){if(e1===1)return"rc";let t1="";for(let r1=0;r1<e1;r1++)t1+=_g[r1],r1<e1-1&&(t1+=",");return t1}var Yu$1,oh,Xu$1,Ku$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Yu$1={name:"unpack",inputNames:["A"],inputTypes:[2]},oh=(e1,_g)=>{let t1=_g.dims.length,r1=Br$1("rc",t1),n1=r1.slice(-2),i1=Qe(t1),o1=Nt(),a1=_g.dims.length===0?"":ih(t1,r1),u1=t1<=1?"rc":`vec2(${n1.join(",")})`,s1=H(e1.session.backend.glContext.version),l1=`
    ${o1}
    void main() {
      ${i1} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${a1});

       ${s1.output} = vec4(getChannel(packedInput, ${u1}), 0, 0, 0);
     }
   `;return{...Yu$1,hasMain:!0,output:{dims:_g.dims,type:_g.type,textureType:0},shaderSource:l1}},Xu$1=(e1,_g)=>({...Yu$1,get:()=>oh(e1,_g)})}),Xn$1,un,Kn$1,ln=L$1(()=>{lt$1(),Xn$1=class{constructor(e1,_g=1){if(_g===1)this.internalFormat=e1.R32F,this.format=e1.RED,this.textureType=e1.FLOAT,this.channelSize=_g;else if(_g===4)this.internalFormat=e1.RGBA32F,this.format=e1.RGBA,this.textureType=e1.FLOAT,this.channelSize=_g;else throw new Error(`Invalid number of channels: ${_g}`)}encode(e1,_g){let t1,r1;return e1.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),r1=new Float32Array(e1)),_g*this.channelSize>e1.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),r1=e1,t1=this.allocate(_g*this.channelSize),r1.forEach((n1,i1)=>t1[i1]=n1)):(r1=e1,t1=r1),t1}allocate(e1){return new Float32Array(e1*4)}decode(e1,_g){return this.channelSize===1?e1.filter((t1,r1)=>r1%4===0).subarray(0,_g):e1.subarray(0,_g)}},un=class{constructor(e1,_g=1,t1){if(_g!==1&&_g!==4)throw new Error(`Invalid number of channels: ${_g}`);this.internalFormat=e1.RGBA,this.format=e1.RGBA,this.channelSize=_g,this.textureType=t1||e1.FLOAT}encode(e1,_g){let t1=e1;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),t1=this.allocate(_g),e1.forEach((r1,n1)=>t1[n1*4]=r1)),t1}allocate(e1){return new Float32Array(e1*4)}decode(e1,_g){return this.channelSize===1?e1.filter((t1,r1)=>r1%4===0).subarray(0,_g):e1.subarray(0,_g)}},Kn$1=class{constructor(e1,_g=1){if(this.channelSize=4,_g===1)this.internalFormat=e1.ALPHA,this.format=e1.ALPHA,this.textureType=e1.UNSIGNED_BYTE,this.channelSize=_g;else if(_g===4)this.internalFormat=e1.RGBA,this.format=e1.RGBA,this.textureType=e1.UNSIGNED_BYTE,this.channelSize=_g;else throw new Error(`Invalid number of channels: ${_g}`)}encode(e1,_g){return new Uint8Array(e1.buffer,e1.byteOffset,e1.byteLength)}allocate(e1){return new Uint8Array(e1*this.channelSize)}decode(e1,_g){if(e1 instanceof Uint8Array)return e1.subarray(0,_g);throw new Error(`Invalid array type: ${e1.constructor}`)}}}),fn,Ju$1,yi,Zu$1=L$1(()=>{fe$1(),ae(),fn=(e1,_g,t1)=>{let r1=t1===0||t1===1?1:4,n1=t1===2,i1=t1===1||t1===2,o1=t1===4?_g.length-1:void 0,a1=t1===4?_g.map((u1,s1)=>s1===_g.length-1?u1*4:u1):void 0;return yi(e1,_g,r1,a1,{isPacked:n1,reverseWH:i1,breakAxis:o1})},Ju$1=(e1,_g,t1)=>{let r1=fn(e1,_g,t1);return[r1.width,r1.height]},yi=(e1,_g,t1=1,r1,n1)=>{let i1=!!(n1&&n1.isPacked),[o1,a1]=e1.computeTextureWH(i1&&r1||_g,n1),u1=_g.length,s1=_g.slice(0);if(u1===0&&(s1=[1]),t1===1)r1=_g;else if(i1){if(t1!==4)throw new Error("a packed texture must be 4-channel");r1=_g,u1>0&&(s1[u1-1]=Math.ceil(s1[u1-1]/2)),u1>1&&(s1[u1-2]=Math.ceil(s1[u1-2]/2))}else if(!r1)throw new Error("Unpacked shape is needed when using channels > 1");return{width:o1,height:a1,channels:t1,isPacked:i1,shape:s1,strides:U$2.computeStrides(s1),unpackedShape:r1,reversedWH:n1&&n1.reverseWH}}}),sh,Jn$1,el$1=L$1(()=>{lt$1(),yr(),fe$1(),Vu$1(),qu$1(),ju$1(),Ku$1(),ln(),Zu$1(),ae(),sh=(e1,_g)=>{let t1=_g.map(n1=>`${n1.unpackedShape.join(",")};${n1.width}x${n1.height}`).join("_"),r1=e1.name;return e1.cacheHint&&(r1+="["+e1.cacheHint+"]"),r1+=":"+t1,r1},Jn$1=class{constructor(e1){this.session=e1,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e1,_g){return Ju$1(this.session.layoutStrategy,e1,_g)}executeProgram(e1,_g){if(_g.length<e1.inputNames.length)throw new Error(`Input size mustn't be less than ${e1.inputNames.length}.`);if(e1.inputNames.length!==e1.inputTypes.length)throw new Error("input names size does not match input types");let t1=[];for(let u1=0;u1<e1.inputNames.length;++u1)t1[u1]=this.getOrCreateTextureData(_g[u1],e1.inputTypes[u1]);let r1=sh(e1,t1),n1=this.session.programManager.getArtifact(r1),i1=n1?n1.programInfo:typeof e1.get=="function"?e1.get():e1,o1=fn(this.session.layoutStrategy,i1.output.dims,i1.output.textureType),a1=this.createTextureData(o1,i1.output.type);return n1||(n1=this.session.programManager.build(i1,t1,a1),this.session.programManager.setArtifact(r1,n1)),this.runProgram(n1,t1,a1),a1}run(e1,_g){return this.executeProgram(e1,_g).tensor}runProgram(e1,_g,t1){for(let r1=0;r1<_g.length;++r1)if(!!_g[r1].isPacked!=(e1.programInfo.inputTypes[r1]===2))throw new Error(`input[${r1}] property packed inconsistent`);if(!!t1.isPacked!=(e1.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(e1,_g,t1)}getOrCreateTextureData(e1,_g){let t1=this.getTextureData(e1.dataId,_g===2);if(!t1&&(t1=this.getTextureData(e1.dataId,_g!==2),t1))return _g===2?this.pack(t1):this.unpack(t1);if(!t1){let r1=fn(this.session.layoutStrategy,e1.dims,_g);if(_g===4){let n1=e1.dims;if(n1.length===4){let i1=[n1[0],Math.ceil(n1[1]*n1[2]*n1[3]/4)],o1=fn(this.session.layoutStrategy,i1,_g),a1=e1.numberData;if(n1[1]*n1[2]*n1[3]%4!==0){let u1=n1[0],s1=n1[1]*n1[2]*n1[3],l1=Math.ceil(s1*1/4)*4,c1=u1*l1;a1=new Float32Array(c1);for(let d1=0;d1<u1;++d1){let h1=d1*s1,f1=d1*l1+d1%1*s1;a1.set(e1.numberData.subarray(h1,h1+s1),f1)}}return this.createTextureData(o1,e1.type,a1,e1,1)}}if(_g===2){let n1=yi(this.session.layoutStrategy,e1.dims,1,[],{reverseWH:!0}),i1=this.createTextureData(n1,e1.type,e1.numberData,e1,1);t1=this.pack(i1)}else t1=this.createTextureData(r1,e1.type,e1.numberData,e1,1)}return t1}createTextureDataFromLayoutBindTensor(e1,_g,t1,r1){return this.createTextureData(e1,_g,t1,r1,1)}createTextureData(e1,_g,t1,r1,n1){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e1)}]`);let i1=this.session.textureManager.createTextureFromLayout(_g,e1,t1,n1);return this.createTextureDataFromTexture(e1,_g,i1,r1)}reshapeUnpacked(e1,_g){let t1=this.getOrCreateTextureData(e1,0),r1={channels:t1.channels,height:t1.height,width:t1.width,shape:_g.length!==0?_g:[1],strides:U$2.computeStrides(_g),unpackedShape:_g};return this.createTextureDataFromTexture(r1,e1.type,t1.texture).tensor}reshapePacked(e1,_g){let t1=this.getOrCreateTextureData(e1,2);if(Hu$1(e1.dims,_g)){let a1={channels:t1.channels,height:t1.height,width:t1.width,shape:_g.length!==0?_g:[1],strides:U$2.computeStrides(_g),unpackedShape:_g,isPacked:!0};return this.createTextureDataFromTexture(a1,e1.type,t1.texture).tensor}let r1=bi(e1.dims),n1=bi(_g),i1=this.reshapePacked(e1,r1),o1=this.run(Wu$1(this,i1,n1),[i1]);return this.reshapePacked(o1,_g)}cast(e1,_g){let t1=this.getOrCreateTextureData(e1,0);return this.createTextureDataFromTexture(t1,_g,t1.texture).tensor}createTextureDataFromTexture(e1,_g,t1,r1,n1){let i1={...e1,tensor:r1||new $e(e1.unpackedShape,_g,o1=>this.readTexture(i1),async o1=>this.readTextureAsync(i1),void 0,n1),texture:t1};return this.setTextureData(i1.tensor.dataId,i1,e1.isPacked),i1}getTextureData(e1,_g=!1){return this.session.isInitializer(e1)?this.session.getTextureData(e1,_g):_g?this.packedTextureDataCache.get(e1):this.unpackedTextureDataCache.get(e1)}setTextureData(e1,_g,t1=!1){this.session.isInitializer(e1)?this.session.setTextureData(e1,_g,t1):(t1?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e1,_g)}isTextureLayoutCached(e1,_g=!1){return!!this.getTextureData(e1.dataId,_g)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e1=>this.session.textureManager.releaseTexture(e1)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e1=>this.session.textureManager.releaseTexture(e1)),this.unpackedTextureDataCache=new Map}readTexture(e1){return e1.isPacked?this.readTexture(this.unpack(e1)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e1,e1.tensor.type,e1.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e1))}async readTextureAsync(e1){return e1.isPacked?this.readTextureAsync(this.unpack(e1)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e1,e1.tensor.type,e1.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e1))}pack(e1){return this.executeProgram(zu$1(this,e1.tensor),[e1.tensor])}unpack(e1){return this.executeProgram(Xu$1(this,e1.tensor),[e1.tensor])}}}),Ti,Q$1,Ue$1=L$1(()=>{Ti=class{constructor(e1){Object.assign(this,e1)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e1=>`${this[e1]}`).join(";")),this.key}},Q$1=e1=>new Ti(e1)}),tl$1,rl$1,nl$1,uh,lh,ol$1=L$1(()=>{Ue$1(),we$1(),ae(),tl$1={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl$1=(e1,_g,t1)=>(lh(_g),[e1.run({...tl$1,cacheHint:t1.cacheKey,get:()=>uh(e1,_g,t1)},_g)]),nl$1=e1=>{let _g=e1.attributes.getFloat("epsilon",1e-5),t1=e1.attributes.getFloat("momentum",.9),r1=e1.attributes.getInt("spatial",1);return Q$1({epsilon:_g,momentum:t1,spatial:r1})},uh=(e1,_g,t1)=>{let r1=H(e1.session.backend.glContext.version),n1=_g[0].dims.length,[i1,o1]=e1.calculateTextureWidthAndHeight(_g[1].dims,0),a1=`
  float process(int[${n1}] indices) {
    vec2 position = offsetToCoords(indices[1], ${i1}, ${o1});
    float scale = getColorAsFloat(${r1.texture2D}(Scale, position));
    float mean = getColorAsFloat(${r1.texture2D}(Mean, position));
    float variance = getColorAsFloat(${r1.texture2D}(Variance, position));
    float b = getColorAsFloat(${r1.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${t1.epsilon})) ) + b;
  }`;return{...tl$1,output:{dims:_g[0].dims,type:_g[0].type,textureType:0},shaderSource:a1}},lh=e1=>{if(!e1||e1.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let _g=e1[0],t1=e1[1],r1=e1[2],n1=e1[3],i1=e1[4];if(_g.dims.length<3||t1.dims.length!==1||r1.dims.length!==1||n1.dims.length!==1||i1.dims.length!==1)throw new Error("invalid input shape.");if(t1.dims[0]!==_g.dims[1]||r1.dims[0]!==_g.dims[1]||n1.dims[0]!==_g.dims[1]||i1.dims[0]!==_g.dims[1])throw new Error("invalid input shape.");if(_g.type!=="float32"&&_g.type!=="float64"||t1.type!=="float32"&&t1.type!=="float64"||r1.type!=="float32"&&r1.type!=="float64"||n1.type!=="float32"&&n1.type!=="float64"||i1.type!=="float32"&&i1.type!=="float64")throw new Error("invalid input tensor types.")}}),Zn$1,dt,R,cn,Qn$1,Wt$1=L$1(()=>{Zn$1=class{constructor(e1,_g,t1,r1){this.glContext=e1,this.programInfo=_g,this.inputTextureLayouts=t1,this.outputTextureLayout=r1}},dt=class{constructor(e1){this.context=e1}},R=class{constructor(e1,_g){this.routineBody=e1,this.dependencies=_g}},cn=class{constructor(e1,_g,t1){this.name=e1,t1?this.dependencies=t1:this.dependencies=[],_g&&(this.routineBody=_g)}addDependency(e1){e1&&this.dependencies.push(e1)}},Qn$1=class{static returnOrderedNodes(e1){if(!e1||e1.length===0)return[];if(e1.length===1)return e1;let _g=new Set,t1=new Set,r1=new Array;return this.createOrderedNodes(e1,_g,t1,r1),r1}static createOrderedNodes(e1,_g,t1,r1){for(let n1=0;n1<e1.length;++n1)this.dfsTraverse(e1[n1],_g,t1,r1)}static dfsTraverse(e1,_g,t1,r1){if(!e1||t1.has(e1.name))return;if(_g.has(e1.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");_g.add(e1.name);let n1=e1.dependencies;if(n1&&n1.length>0)for(let i1=0;i1<n1.length;++i1)this.dfsTraverse(n1[i1],_g,t1,r1);r1.push(e1),t1.add(e1.name),_g.delete(e1.name)}}});function ch(){let e1="add_";return{body:`
  float ${e1}(float a, float b) {
    return a + b;
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:e1,type:0}}function ph(){let e1="div_";return{body:`
  float ${e1}(float a, float b) {
    return a / b;
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:e1,type:0}}function dh(){let e1="mul_";return{body:`
  float ${e1}(float a, float b) {
    return a * b;
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:e1,type:0}}function hh(){let e1="sub_";return{body:`
  float ${e1}(float a, float b) {
    return a - b;
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:e1,type:0}}function mh(){let e1="equal_";return{body:`
  float ${e1}(float a, float b) {
    return float(a == b);
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:e1,type:0}}function bh(){let e1="greater_";return{body:`
  float ${e1}(float a, float b) {
    return float(a > b);
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:e1,type:0}}function gh(){let e1="less_";return{body:`
  float ${e1}(float a, float b) {
    return float(a < b);
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:e1,type:0}}function yh(){let e1="and_";return{body:`
  float ${e1}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:e1,type:0}}function Th(){let e1="or_";return{body:`
  float ${e1}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:e1,type:0}}function xh(){let e1="xor_";return{body:`
  float ${e1}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:e1,type:0}}function wh(){return _h("pow")}function vh(){let e1="prelu_";return{body:`
  float ${e1}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${e1}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:e1,type:0}}function _h(e1){let _g=`${e1}_`;return{body:`
  float ${_g}(float a, float b) {
    return ${e1}(a, b);
  }
  vec4 ${_g}(vec4 v1, vec4 v2) {
    return ${e1}(v1, v2);
  }
  `,name:_g,type:0}}var ht,Oh,il$1,al$1,sl$1,ul$1,ll$1,fl$1,cl$1,pl$1,dl$1,hl$1,ml$1,bl$1,gl$1=L$1(()=>{fe$1(),Wt$1(),we$1(),ae(),ht=(e1,_g,t1,r1=_g[0].type,n1)=>{let i1=e1.session.pack?2:0;return{name:t1.name,inputNames:["A","B"],inputTypes:[i1,i1],cacheHint:n1,get:()=>Oh(e1,_g,t1,r1)}},Oh=(e1,_g,t1,r1=_g[0].type)=>{let n1=e1.session.pack?2:0,i1=!U$2.areEqual(_g[0].dims,_g[1].dims),o1=_g[0].dims,a1=e1.session.pack;if(i1){let l1=Ze$1.calcShape(_g[0].dims,_g[1].dims,!1);if(!l1)throw new Error("Can't perform binary op on the given tensors");o1=l1;let c1=o1.length,d1=_g[0].dims.length!==0?_g[0].dims.length:1,h1=_g[1].dims.length!==0?_g[1].dims.length:1,f1=_g[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",g1=_g[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",v1=H(e1.session.backend.glContext.version),$1=a1?`
      ${t1.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${t1.name}(a, b);
        ${v1.output} = result;
      }`:`
      ${t1.body}
      float process(int indices[${c1}]) {
        int aindices[${d1}];
        int bindices[${h1}];
        ${f1}
        ${g1}
        return ${t1.name}(_A(aindices), _B(bindices));
      }`;return{name:t1.name,inputNames:["A","B"],inputTypes:[n1,n1],output:{dims:o1,type:r1,textureType:n1},shaderSource:$1,hasMain:a1}}let u1=H(e1.session.backend.glContext.version),s1=`
    ${t1.body}
    void main() {
      vec4 v1 = ${u1.texture2D}(A, TexCoords);
      vec4 v2 = ${u1.texture2D}(B, TexCoords);
      vec4 result = ${t1.name}(v1, v2);
      ${u1.output} = result;
    }
    `;return{name:t1.name,inputNames:["A","B"],inputTypes:[n1,n1],output:{dims:_g[0].dims,type:r1,textureType:n1},shaderSource:s1,hasMain:!0}},il$1=(e1,_g)=>[e1.run(ht(e1,_g,ch()),_g)],al$1=(e1,_g)=>[e1.run(ht(e1,_g,yh(),"bool"),_g)],sl$1=(e1,_g)=>[e1.run(ht(e1,_g,ph()),_g)],ul$1=(e1,_g)=>[e1.run(ht(e1,_g,mh(),"bool"),_g)],ll$1=(e1,_g)=>[e1.run(ht(e1,_g,bh(),"bool"),_g)],fl$1=(e1,_g)=>[e1.run(ht(e1,_g,gh(),"bool"),_g)],cl$1=(e1,_g)=>[e1.run(ht(e1,_g,dh()),_g)],pl$1=(e1,_g)=>[e1.run(ht(e1,_g,Th(),"bool"),_g)],dl$1=(e1,_g)=>[e1.run(ht(e1,_g,wh()),_g)],hl$1=(e1,_g)=>[e1.run(ht(e1,_g,vh()),_g)],ml$1=(e1,_g)=>[e1.run(ht(e1,_g,hh()),_g)],bl$1=(e1,_g)=>[e1.run(ht(e1,_g,xh(),"bool"),_g)]}),yl$1,Tl$1,Sh,xl$1=L$1(()=>{fe$1(),yl$1=(e1,_g,t1)=>(Sh(_g),[e1.cast(_g[0],t1)]),Tl$1=e1=>We$1.tensorDataTypeFromProto(e1.attributes.getInt("to")),Sh=e1=>{if(!e1||e1.length!==1)throw new Error("Cast requires 1 input.");if(e1[0].type==="string")throw new Error("Invalid input type.")}}),Ah,Ph,wl$1,eo$1,vl$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Ah=(e1,_g)=>({name:"Concat (packed)",inputNames:Array.from({length:e1},(t1,r1)=>`X${r1}`),inputTypes:Array(e1).fill(2),cacheHint:_g}),Ph=(e1,_g,t1,r1)=>{let n1=t1[0].dims.slice();if(r1>=n1.length||r1<-1*n1.length)throw new Error("axis specified for concat doesn't match input dimensionality");r1<0&&(r1=n1.length+r1);let i1=n1.slice(0);for(let T1=1;T1<t1.length;T1++){let P1=t1[T1].dims.slice();for(let k1=0;k1<n1.length;k1++)if(k1===r1)i1[r1]+=P1[k1];else if(n1[k1]!==P1[k1])throw new Error("non concat dimensions must match")}let o1=i1.length,a1=Br$1("coords",o1),u1=Qe(o1),s1=Nt(),l1=t1.map(T1=>T1.dims),c1=Dt$1(o1),d1=new Array(l1.length-1);d1[0]=l1[0][r1];for(let T1=1;T1<d1.length;T1++)d1[T1]=d1[T1-1]+l1[T1][r1];let h1=c1[r1],f1=c1.slice(-2),g1=c1.join(),v1=`if (${h1} < ${d1[0]}) {
        return getChannel(
            getX0(${g1}), vec2(${f1.join()}));
        }`;for(let T1=1;T1<d1.length;T1++){let P1=d1[T1-1];v1+=`
            if (${h1} < ${d1[T1]}  && ${h1} >= ${d1[T1-1]}) {
              return getChannel(
                getX${T1}(${eo$1(c1,h1,P1)}),
                vec2(${eo$1(f1,h1,P1)}));
            }`}let $1=d1.length,y1=d1[d1.length-1];v1+=`
            return getChannel(
              getX${$1}(${eo$1(c1,h1,y1)}),
              vec2(${eo$1(f1,h1,y1)}));`;let _1=H(e1.session.backend.glContext.version),E1=`
          ${s1}
          float getValue(${c1.map(T1=>"int "+T1)}) {
            ${v1}
          }

          void main() {
            ${u1} coords = getOutputCoords();
            int lastDim = coords.${c1[o1-1]};
            coords.${c1[o1-1]} = coords.${c1[o1-2]};
            coords.${c1[o1-2]} = lastDim;

            vec4 result = vec4(getValue(${a1}), 0., 0., 0.);

            ${a1[o1-1]} = ${a1[o1-1]} + 1;
            if (${a1[o1-1]} < ${i1[o1-1]}) {
              result.g = getValue(${a1});
            }

            ${a1[o1-2]} = ${a1[o1-2]} + 1;
            if (${a1[o1-2]} < ${i1[o1-2]}) {
              result.a = getValue(${a1});
            }

            ${a1[o1-1]} = ${a1[o1-1]} - 1;
            if (${a1[o1-2]} < ${i1[o1-2]} &&
                ${a1[o1-1]} < ${i1[o1-1]}) {
              result.b = getValue(${a1});
            }
            ${_1.output} = result;
          }
        `;return{..._g,output:{dims:i1,type:t1[0].type,textureType:2},shaderSource:E1,hasMain:!0}},wl$1=(e1,_g,t1)=>{let r1=Ah(_g.length,t1.cacheKey);return{...r1,get:()=>Ph(e1,r1,_g,t1.axis)}},eo$1=(e1,_g,t1)=>{let r1=e1.indexOf(_g);return e1.map((n1,i1)=>i1===r1?`${n1} - ${t1}`:n1).join()}}),_l$1,Eh,Dh,Lh,Ol$1,Ch,Fh,$h,Il$1,kh,Sl$1=L$1(()=>{Ue$1(),ae(),vl$1(),_l$1=(e1,_g,t1)=>(kh(_g),e1.session.pack&&_g[0].dims.length>1?[e1.run(wl$1(e1,_g,t1),_g)]:[e1.run(Lh(e1,_g,t1),_g)]),Eh=(e1,_g)=>({name:"Concat",inputNames:Array.from({length:e1},(t1,r1)=>`X${r1}`),inputTypes:Array(e1).fill(0),cacheHint:_g}),Dh=(e1,_g,t1,r1)=>{let n1=t1[0].dims.slice();if(r1>=n1.length||r1<-1*n1.length)throw new Error("axis specified for concat doesn't match input dimensionality");r1<0&&(r1=n1.length+r1);let i1=n1.slice(0);for(let h1=1;h1<t1.length;h1++){let f1=t1[h1].dims.slice();for(let g1=0;g1<n1.length;g1++)if(g1===r1)i1[r1]+=f1[g1];else if(n1[g1]!==f1[g1])throw new Error("non concat dimensions must match")}let o1=i1.length,a1=new Array(t1.length),u1=0;for(let h1=0;h1<a1.length;++h1)u1+=t1[h1].dims[r1],a1[h1]=u1;let s1="";t1.length<5?s1=Ol$1(a1):s1=Ch(a1);let l1=Fh(t1.length,o1),c1=$h(a1),d1=`
        ${l1}
        ${c1}
        ${s1}
        float process(int indices[${o1}]) {
          int textureIndex = getTextureWhereDataResides (indices[${r1}]);

          if(textureIndex != 0) {
            indices[${r1}] = indices[${r1}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{..._g,output:{dims:i1,type:t1[0].type,textureType:0},shaderSource:d1}},Lh=(e1,_g,t1)=>{let r1=Eh(_g.length,t1.cacheKey);return{...r1,get:()=>Dh(e1,r1,_g,t1.axis)}},Ol$1=e1=>`int getTextureWhereDataResides(int index) {
      ${e1.map((_g,t1)=>`if(index<${_g}) {return ${t1};}
`).join("")}
    }`,Ch=e1=>Ol$1(e1),Fh=(e1,_g)=>{let t1=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${_g}]) {`];for(let r1=0;r1<e1;++r1)r1===0?t1.push(`	if (textureIndex == ${r1}) { return _X${r1}(indices); }`):r1===e1-1?t1.push(`	else { return _X${r1}(indices); }`):t1.push(`	else if (textureIndex == ${r1}) { return _X${r1}(indices); }`);return t1.push("	}"),t1.join(`
`)},$h=e1=>{let _g=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let t1=0;t1<e1.length;++t1)t1===0?_g.push(`	if (index == ${t1}) { return ${e1[t1]}; }`):t1===e1.length-1?_g.push(`	else { return ${e1[t1]}; }`):_g.push(`	else if (index == ${t1}) { return ${e1[t1]}; }`);return _g.push("	}"),_g.join(`
`)},Il$1=e1=>Q$1({axis:e1.attributes.getInt("axis")}),kh=e1=>{if(!e1||e1.length<1)throw new Error("too few inputs");let _g=e1[0].type,t1=e1[0].dims.length;if(_g==="string")throw new Error("string tensor is not supported yet");for(let r1 of e1){if(r1.type!==_g)throw new Error("input tensors should be one type");if(r1.dims.length!==t1)throw new Error("input tensors should have the same shape")}}});function Bh(){return mt("abs")}function Nh(){return mt("acos")}function Rh(){return mt("asin")}function Mh(){return mt("atan")}function Gh(){return mt("ceil")}function Uh(){return mt("cos")}function zh(e1){let _g="elu";return{body:`
  const float alpha = float(${e1});

  float ${_g}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${_g}_(vec4 v) {
    return vec4(${_g}_(v.x), ${_g}_(v.y), ${_g}_(v.z), ${_g}_(v.w));
  }
  `,name:_g,type:0}}function Vh(){return mt("exp")}function Wh(){return mt("floor")}function xi(e1,_g){let t1="clip";return{body:`
  const float min = float(${e1});
  const float max = float(${_g});

  float ${t1}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${t1}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:t1,type:0}}function Hh(){let e1="indentity";return{body:`
  float ${e1}_(float a) {
    return a;
  }
  vec4 ${e1}_(vec4 v) {
    return v;
  }
  `,name:e1,type:0}}function qh(e1){let _g="leakyRelu";return{body:`
  const float alpha = float(${e1});

  float ${_g}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${_g}_(vec4 v) {
    return vec4(${_g}_(v.x), ${_g}_(v.y), ${_g}_(v.z), ${_g}_(v.w));
  }
  `,name:_g,type:0}}function jh(){return mt("log")}function Yh(){let e1="neg";return{body:`
  float ${e1}_(float a) {
    return -a;
  }
  vec4 ${e1}_(vec4 v) {
    return -v;
  }
  `,name:e1,type:0}}function Xh(){let e1="not";return{body:`
  float ${e1}_(float a) {
    return float( ! bool(a) );
  }
  bool ${e1}_(bool a) {
    return !a;
  }
  vec4 ${e1}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${e1}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:e1,type:0}}function Kh(){return mt("sin")}function wi(){let e1="relu";return{body:`
  float ${e1}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${e1}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:e1,type:0}}function vi(){let e1="sigmoid";return{body:`
  float ${e1}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${e1}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:e1,type:0}}function Jh(){return mt("sqrt")}function Zh(){return mt("tan")}function Qh(){let e1="tanh";return{body:`
  float ${e1}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${e1}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:e1,type:0}}function mt(e1){return{body:`
  float ${e1}_(float a) {
    return ${e1}(a);
  }
  vec4 ${e1}_(vec4 v) {
    return ${e1}(v);
  }
  `,name:e1,type:0}}var em$1,Ee,Al$1,Pl$1,El$1,Dl$1,_i,Ll$1,Cl$1,tm$1,Fl$1,$l$1,kl$1,Bl$1,Nl$1,Rl$1,Oi$1,Ml$1,Gl$1,Ul$1,zl$1,Vl$1,Wl$1,Hl$1,ql$1,jl$1,Yl$1,Xl$1,Ii=L$1(()=>{Ue$1(),fe$1(),Wt$1(),we$1(),ae(),em$1=(e1,_g,t1,r1)=>{let n1=e1.session.pack?2:0,i1=H(e1.session.backend.glContext.version);return{..._g,output:{dims:t1.dims,type:t1.type,textureType:n1},shaderSource:`
     ${r1.body}
     void main() {
       vec4 v = ${i1.texture2D}(A, TexCoords);
       v = ${r1.name}_(v);
       ${i1.output} = v;
     }
     `,hasMain:!0}},Ee=(e1,_g,t1,r1)=>{let n1=e1.session.pack?2:0,i1={name:t1.name,inputTypes:[n1],inputNames:["A"],cacheHint:r1};return{...i1,get:()=>em$1(e1,i1,_g,t1)}},Al$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Bh()),_g)],Pl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Nh()),_g)],El$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Rh()),_g)],Dl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Mh()),_g)],_i=(e1,_g,t1)=>[e1.run(Ee(e1,_g[0],xi(t1.min,t1.max),t1.cacheKey),_g)],Ll$1=e1=>Q$1({min:e1.attributes.getFloat("min",br),max:e1.attributes.getFloat("max",gr$1)}),Cl$1=(e1,_g)=>{let t1=tm$1(e1,_g);return _i(e1,[_g[0]],t1)},tm$1=(e1,_g)=>{if(_g.length>=3&&(!e1.session.isInitializer(_g[1].dataId)||!e1.session.isInitializer(_g[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let t1=_g.length>=3?_g[1].numberData[0]:br,r1=_g.length>=3?_g[2].numberData[0]:gr$1;return Q$1({min:t1,max:r1})},Fl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Gh()),_g)],$l$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Uh()),_g)],kl$1=(e1,_g,t1)=>[e1.run(Ee(e1,_g[0],zh(t1.alpha),t1.cacheKey),_g)],Bl$1=e1=>Q$1({alpha:e1.attributes.getFloat("alpha",1)}),Nl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Vh()),_g)],Rl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Wh()),_g)],Oi$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Hh()),_g)],Ml$1=(e1,_g,t1)=>[e1.run(Ee(e1,_g[0],qh(t1.alpha),t1.cacheKey),_g)],Gl$1=e1=>Q$1({alpha:e1.attributes.getFloat("alpha",.01)}),Ul$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],jh()),_g)],zl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Yh()),_g)],Vl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Xh()),_g)],Wl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],wi()),_g)],Hl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],vi()),_g)],ql$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Kh()),_g)],jl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Jh()),_g)],Yl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Zh()),_g)],Xl$1=(e1,_g)=>[e1.run(Ee(e1,_g[0],Qh()),_g)]});function Rt(e1){let _g;switch(e1.activation){case"Relu":_g=wi();break;case"Sigmoid":_g=vi();break;case"Clip":_g=xi(e1.clipMin,e1.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let t1=_g.name,r1=_g.body,n1=`value = ${t1}_(value);`;return{activationFunction:r1,applyActivation:n1}}var Nr,xr=L$1(()=>{fe$1(),Ii(),Nr=e1=>{let _g=e1.getString("activation","");if(_g==="Clip"){let[t1,r1]=e1.getFloats("activation_params",[br,gr$1]);return{activation:_g,clipMax:r1,clipMin:t1,activationCacheKey:`${_g}:${t1},${r1}`}}return{activation:_g,activationCacheKey:_g}}}),nm$1,om$1,Kl$1,Jl$1=L$1(()=>{lt$1(),we$1(),ae(),to$1(),xr(),nm$1=(e1,_g)=>({name:"GroupedConv",inputNames:e1?["X","W","Bias"]:["X","W"],inputTypes:e1?[0,0,0]:[0,0],cacheHint:_g}),om$1=(e1,_g,t1,r1)=>{let n1=_g.length>2?"value += getBias(output_channel);":"",i1=_g[0].dims.slice(),o1=_g[1].dims.slice(),a1=o1[0]/r1.group;ce.verbose("GroupedConv",`autpPad:${r1.autoPad}, dilations:${r1.dilations}, group:${r1.group}, kernelShape:${r1.kernelShape}, pads:${r1.pads}, strides:${r1.strides}`);let u1=Rr$1(i1,o1,r1.dilations,r1.pads,r1.strides),s1=H(e1.session.backend.glContext.version),{activationFunction:l1,applyActivation:c1}=Rt(r1),d1=`
  const ivec2 strides = ivec2(${r1.strides[0]}, ${r1.strides[1]});
  const ivec2 pads = ivec2(${r1.pads[0]}, ${r1.pads[1]});
  ${l1}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${a1};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${o1[1]}; wInChannel++) {
      int input_channel = group_id * ${o1[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${o1[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${r1.dilations[0]};

        if (xHeight < 0 || xHeight >= ${i1[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${o1[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${r1.dilations[1]};
          if (xWidth < 0 || xWidth >= ${i1[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${n1}
    ${c1}
    ${s1.output} = vec4(value, .0, .0, .0);
  }
`;return{...t1,output:{dims:u1,type:_g[0].type,textureType:0},shaderSource:d1,hasMain:!0}},Kl$1=(e1,_g,t1)=>{let r1=nm$1(_g.length>2,t1.cacheKey);return{...r1,get:()=>om$1(e1,_g,r1,t1)}}}),im$1,am$1,Zl$1,Ql$1=L$1(()=>{we$1(),ae(),Tr(),im$1=e1=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:e1}),am$1=(e1,_g,t1,r1,n1,i1)=>{let o1=t1.dims,a1=r1.dims,u1=2,s1=3,l1=n1.length,c1=[a1[1]*a1[2]*a1[3],n1[2]*n1[3]],d1=a1[2]*a1[3],h1=Nt(),f1=H(e1.session.backend.glContext.version),g1="";for(let $1=0;$1<=1;$1++)for(let y1=0;y1<=1;y1++)g1+=`
            blockIndex = rc.x + ${y1};
            pos = rc.y + ${$1};

            if(blockIndex < ${c1[1]} && pos < ${c1[0]}) {
              offsetY = int(blockIndex / (${n1[l1-1]})) * ${i1.strides[0]} -
                ${i1.pads[0]};
              d0 = offsetY + ${i1.dilations[0]} * (imod(pos, ${d1}) / ${a1[2]});

              if(d0 < ${o1[u1]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${n1[l1-1]}) * ${i1.strides[1]} -
                  ${i1.pads[1]};
                d1 = offsetX + ${i1.dilations[1]} * imod(imod(pos, ${d1}), ${a1[2]});

                if(d1 < ${o1[s1]} && d1 >= 0) {

                  ch = int(float(pos)/ ${d1}.);
                    innerDims = vec2(d0, d1);
                    result[${$1*2+y1}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let v1=`
      ${h1}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${g1}
          ${f1.output} = result;
      }
            `;return{..._g,output:{dims:c1,type:t1.type,textureType:2},shaderSource:v1,hasMain:!0}},Zl$1=(e1,_g,t1,r1,n1)=>{let i1=im$1(n1.cacheKey);return{...i1,get:()=>am$1(e1,i1,_g,t1,r1,n1)}}});function um$1(e1,_g,t1){let r1=_g[0].dims,n1=_g[1].dims,i1=Ze$1.calcShape(r1,n1,!0);if(!i1)throw new Error("Can't use matmul on the given tensors");let o1=Qe(i1.length),a1=Dt$1(),{activationFunction:u1,applyActivation:s1}=Rt(t1),l1=_g.length>2,c1=l1?"value += getBiasForMatmul();":"",d1=l1?`${Ai(o1,a1,_g[2].dims,i1,!1)}`:"",h1=i1.length,f1=r1.length,g1=n1.length,v1=r1[r1.length-1],$1=`
    ${u1}
    ${d1}
    float process(int indices[${h1}]) {
        int a[${f1}];
        int b[${g1}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${v1}; ++k) {
            a[${f1-1}] = k;
            b[${g1-2}] = k;
            value += _A(a) * _B(b);
        }
        ${c1}
        ${s1}
        return value;
    }`;return{...e1,output:{dims:i1,type:_g[0].type,textureType:0},shaderSource:$1}}function Si(e1,_g){let t1=sm$1(e1.length>2,_g.activationCacheKey);return{...t1,get:()=>um$1(t1,e1,_g)}}function Ai(e1,_g,t1,r1,n1){let i1="",o1=t1.length,a1=r1.length,u1=a1-o1;a1<2&&o1>0?i1="coords":i1=t1.map((d1,h1)=>`coords.${_g[h1+u1]}`).join(", ");let s1=Ze$1.getBroadcastDims(t1,r1).map(d1=>`coords.${_g[d1+u1]} = 0;`).join(`
`),l1=U$2.size(t1)===1,c1="vec4(outputValue.xx, outputValue.yy)";return l1&&(c1="vec4(outputValue.x)"),n1?`
vec4 getBiasForMatmul() {
  ${e1} coords = getOutputCoords();
  ${s1}
  vec4 outputValue = getBias(${i1});
  return ${c1};
}`:`
float getBiasForMatmul() {
  ${e1} coords = getOutputCoords();
  ${s1}
  return getBias(coords.x);
}`}var ef$1,tf$1,sm$1,lm$1,ro$1=L$1(()=>{fe$1(),ae(),Bt$1(),xr(),Pi$1(),ef$1=(e1,_g,t1)=>(lm$1(_g),e1.session.pack?[e1.run(no$1(e1,_g,t1),_g)]:[e1.run(Si(_g,t1),_g)]),tf$1=e1=>Nr(e1.attributes),sm$1=(e1,_g)=>({name:"MatMul",inputNames:e1?["A","B","Bias"]:["A","B"],inputTypes:e1?[0,0,0]:[0,0],cacheHint:_g}),lm$1=e1=>{if(!e1||e1.length!==2)throw new Error("MatMul requires 2 inputs.");if(e1[0].dims[e1[0].dims.length-1]!==e1[1].dims[e1[1].dims.length-2])throw new Error("shared dimension does not match.");if(e1[0].type!=="float32"&&e1[0].type!=="float64"||e1[1].type!=="float32"&&e1[1].type!=="float64")throw new Error("inputs should be float type");if(e1[0].type!==e1[1].type)throw new Error("inputs types should match")}});function pm$1(e1,_g,t1,r1){let n1=[],i1=[],o1=t1[0].dims,a1=t1[1].dims,u1=o1.length,s1=a1.length,l1=r1.length,c1=l1-u1,d1=l1-s1;n1=o1.map((y1,_1)=>`coords.${_g[_1+c1]}`),n1[u1-1]="i*2",n1.join(", "),i1=a1.map((y1,_1)=>`coords.${_g[_1+d1]}`),i1[s1-2]="i*2",i1.join(", ");let h1=Ze$1.getBroadcastDims(o1,r1),f1=Ze$1.getBroadcastDims(a1,r1),g1=h1.map(y1=>`coords.${_g[y1+c1]} = 0;`).join(`
`),v1=f1.map(y1=>`coords.${_g[y1+d1]} = 0;`).join(`
`),$1=`int lastDim = coords.${_g[l1-1]};
  coords.${_g[l1-1]} = coords.${_g[l1-2]};
  coords.${_g[l1-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${e1} coords = getOutputCoords();
  ${$1}
  ${g1}
  vec4 outputValue = getA(${n1});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${e1} coords = getOutputCoords();
  ${$1}
  ${v1}
  vec4 outputValue = getB(${i1});
  return outputValue;
}`}function dm$1(e1,_g){let t1="";for(let r1=0;r1<_g-2;r1++)t1+=`rc.${e1[r1]}, `;return t1+=`rc.${e1[_g-2]}, i*2`,t1}function hm$1(e1,_g){let t1="";for(let r1=0;r1<_g-2;r1++)t1+=`rc.${e1[r1]}, `;return t1+=`i*2, rc.${e1[_g-1]}`,t1}var fm$1,cm$1,no$1,Pi$1=L$1(()=>{fe$1(),we$1(),ae(),Bt$1(),xr(),ro$1(),fm$1=(e1,_g)=>({name:"MatMul (packed)",inputNames:e1?["A","B","Bias"]:["A","B"],inputTypes:e1?[2,2,2]:[2,2],cacheHint:_g}),cm$1=(e1,_g,t1,r1)=>{let n1=t1.length>2,i1=n1?"value += getBiasForMatmul();":"",o1=t1[0].dims,a1=t1[1].dims,u1=Ze$1.calcShape(o1,a1,!0),s1=!U$2.areEqual(t1[0].dims,t1[1].dims);if(!u1)throw new Error("Can't use matmul on the given tensors");let l1=o1[o1.length-1],c1=Math.ceil(l1/2),d1=o1.length,h1=a1.length,f1=H(e1.session.backend.glContext.version),g1=Qe(u1.length),v1=u1.length,$1=Dt$1(),{activationFunction:y1,applyActivation:_1}=Rt(r1),E1=n1?`${Ai(g1,$1,t1[2].dims,u1,!0)}`:"",T1=s1?`${pm$1(g1,$1,t1,u1)}`:"",P1=s1?"getAAtOutCoordsMatmul(i)":`getA(${dm$1($1,d1)})`,k1=s1?"getBAtOutCoordsMatmul(i)":`getB(${hm$1($1,h1)})`,N1=s1?"":`${g1} rc =
          getOutputCoords(); int lastDim = rc.${$1[v1-1]}; rc.${$1[v1-1]} =
          rc.${$1[v1-2]}; rc.${$1[v1-2]} = lastDim;
      `,W1=`
            ${T1}
            ${E1}
            ${y1}
            void main() {
              ${N1}

              vec4 value = vec4(0);
              for (int i = 0; i < ${c1}; i++) {
                vec4 a = ${P1};
                vec4 b = ${k1};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${i1}
              ${_1}
              ${f1.output} = value;
            }`;return{..._g,output:{dims:u1,type:t1[0].type,textureType:2},shaderSource:W1,hasMain:!0}},no$1=(e1,_g,t1)=>{let r1=fm$1(_g.length>2,t1.activationCacheKey);return{...r1,get:()=>cm$1(e1,r1,_g,t1)}}}),rf$1,nf$1=L$1(()=>{to$1(),Ql$1(),Pi$1(),rf$1=(e1,_g,t1)=>{let r1=_g[0].dims,n1=_g[1].dims,i1=Rr$1(r1,n1,t1.dilations,t1.pads,t1.strides),o1=e1.run(Zl$1(e1,_g[0],_g[1],i1,t1),[_g[0]]),a1=e1.reshapePacked(_g[1],[n1[0],n1[1]*n1[2]*n1[3]]),u1=_g.length===3?[a1,o1,_g[2]]:[a1,o1],s1=e1.run(no$1(e1,u1,t1),u1);return e1.reshapePacked(s1,i1)}}),mm$1,bm$1,of$1,Ei,Di$1=L$1(()=>{ae(),mm$1=e1=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:e1}),bm$1=(e1,_g,t1,r1,n1,i1)=>{let o1=t1.dims,a1=r1.dims,u1=n1.length,s1=Ei(o1,a1,n1,4),l1=`
        const int XC = ${o1[1]};
        const int XH = ${o1[2]};
        const int XW = ${o1[3]};
        const int KH = ${i1.kernelShape[0]};
        const int KW = ${i1.kernelShape[1]};
        const int dilationH = ${i1.dilations[0]};
        const int dilationW = ${i1.dilations[1]};
        const int strideH = ${i1.strides[0]};
        const int strideW = ${i1.strides[1]};
        const int padH = ${i1.pads[0]};
        const int padW = ${i1.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${u1}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${o1.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{..._g,output:{dims:s1,type:t1.type,textureType:4},shaderSource:l1}},of$1=(e1,_g,t1,r1,n1)=>{let i1=mm$1(n1.cacheKey);return{...i1,get:()=>bm$1(e1,i1,_g,t1,r1,n1)}},Ei=(e1,_g,t1,r1=4)=>[t1[0],t1[2],t1[3],Math.ceil(e1[1]*_g[2]*_g[3]/r1)]}),gm$1,ym$1,af$1,sf$1=L$1(()=>{fe$1(),we$1(),ae(),xr(),Di$1(),gm$1=(e1,_g)=>({name:"ConvDotProduct",inputNames:e1?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:e1?[0,4,0]:[0,4],cacheKey:_g.activationCacheKey}),ym$1=(e1,_g,t1,r1,n1)=>{let i1=t1[0].dims,o1=t1[1].dims,a1=[o1[0],Math.ceil(i1[1]*o1[2]*o1[3]/4)],u1=Ei(i1,o1,r1),[s1,l1]=e1.calculateTextureWidthAndHeight(a1,4),c1=U$2.computeStrides(u1),[d1,h1]=e1.calculateTextureWidthAndHeight(u1,4),f1=r1.length,g1=t1.length<3?"0.0":"_B(b)",v1=Math.ceil(i1[1]*o1[2]*o1[3]/4),{activationFunction:$1,applyActivation:y1}=Rt(n1),_1=H(e1.session.backend.glContext.version),E1=`
${$1}
float process(int indices[${f1}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${c1[0]} + im2col[1] * ${c1[1]} + im2col[2] * ${c1[2]};
  int kernelOffset = indices[1] * ${a1[1]};
  float value = ${g1};
  for (int i = 0; i < ${v1}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${d1}, ${h1});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${s1}, ${l1});
    value += dot(${_1.texture2D}(Im2Col, im2colCoords), ${_1.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${y1}
  return value;
}`;return{..._g,output:{dims:r1,type:t1[0].type,textureType:0},shaderSource:E1}},af$1=(e1,_g,t1,r1)=>{let n1=gm$1(_g.length>2,r1);return{...n1,get:()=>ym$1(e1,n1,_g,t1,r1)}}}),Rr$1,Li$1,Tm$1,xm$1,wm$1,vm,Ci,_m$1,to$1=L$1(()=>{Ue$1(),fe$1(),Jl$1(),nf$1(),sf$1(),xr(),Di$1(),ro$1(),Rr$1=(e1,_g,t1,r1,n1)=>{let i1=e1[0],o1=e1.slice(2),a1=o1.length,u1=_g[0],s1=_g.slice(2).map((c1,d1)=>c1+(c1-1)*(t1[d1]-1)),l1=o1.map((c1,d1)=>c1+r1[d1]+r1[d1+a1]).map((c1,d1)=>Math.floor((c1-s1[d1]+n1[d1])/n1[d1]));return[i1,u1].concat(...l1)},Li$1=(e1,_g,t1)=>(_m$1(_g,t1),Tm$1(e1,_g,t1)),Tm$1=(e1,_g,t1)=>{let r1=vm(t1,_g),n1=e1.session.pack,i1=r1.kernelShape[0]===1&&r1.kernelShape[1]===1;return r1.group>1?[e1.run(Kl$1(e1,_g,r1),_g)]:i1&&n1?[xm$1(e1,_g,r1)]:n1&&_g[0].dims.length===4&&_g[0].dims[0]===1&&!i1?[rf$1(e1,_g,r1)]:[wm$1(e1,_g,r1)]},xm$1=(e1,_g,t1)=>{let r1=_g[0].dims,n1=_g[1].dims,i1=Rr$1(r1,n1,t1.dilations,t1.pads,t1.strides),o1=e1.reshapeUnpacked(_g[0],[r1[1],r1[2]*r1[3]]),a1=e1.reshapeUnpacked(_g[1],[n1[0],n1[1]]),u1=_g.length>2?[a1,o1,_g[2]]:[a1,o1],s1=e1.run(Si(u1,t1),u1);return e1.reshapeUnpacked(s1,i1)},wm$1=(e1,_g,t1)=>{let r1=_g[0].dims,n1=_g[1].dims,i1=Rr$1(r1,n1,t1.dilations,t1.pads,t1.strides),o1=e1.run(of$1(e1,_g[0],_g[1],i1,t1),[_g[0]]),a1=_g.length===3?[o1,_g[1],_g[2]]:[o1,_g[1]];return e1.run(af$1(e1,_g,i1,t1),a1)},vm=(e1,_g)=>{let t1=e1.kernelShape.slice();if(e1.kernelShape.length===0)for(let i1=2;i1<_g[1].dims.length;++i1)t1.push(_g[1].dims[i1]);let r1=e1.pads.slice();mr$1.adjustPadsBasedOnAutoPad(_g[0].dims,e1.strides,e1.dilations,t1,r1,e1.autoPad);let n1=Object.assign({},e1);return Object.assign(n1,{kernelShape:t1,pads:r1,cacheKey:e1.cacheKey}),n1},Ci=e1=>{let _g=e1.attributes,t1=Nr(_g),r1=_g.getString("auto_pad","NOTSET"),n1=_g.getInts("dilations",[1,1]),i1=_g.getInt("group",1),o1=_g.getInts("kernel_shape",[]),a1=_g.getInts("pads",[0,0,0,0]),u1=_g.getInts("strides",[1,1]);return Q$1({autoPad:r1,dilations:n1,group:i1,kernelShape:o1,pads:a1,strides:u1,...t1})},_m$1=(e1,_g)=>{if(!e1||e1.length!==2&&e1.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e1[0].dims.length!==4||e1[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let t1=e1[0].dims[1],r1=e1[1].dims[1]*_g.group;if(t1!==r1)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e1.length===3&&(e1[2].dims.length!==1||e1[1].dims[0]!==e1[2].dims[0]))throw new Error("invalid bias");let n1=e1[0].dims.length-2;if(_g.dilations.length!==n1)throw new Error(`dilations should be ${n1}D`);if(_g.strides.length!==n1)throw new Error(`strides should be ${n1}D`);if(_g.pads.length!==n1*2)throw new Error(`pads should be ${n1*2}D`);if(_g.kernelShape.length!==0&&_g.kernelShape.length!==e1[1].dims.length-2)throw new Error("invalid kernel shape");if(e1[0].type!=="float32"||e1[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(e1.length===3&&e1[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Om$1,Im$1,Sm$1,uf$1,Am$1,Pm$1,Em$1,Dm$1,Lm$1,Cm$1,lf$1,Fm$1,ff$1=L$1(()=>{Ue$1(),we$1(),ae(),xr(),Om$1=(e1,_g,t1,r1,n1,i1)=>(e1-1)*_g+t1+(r1-1)*n1+1-i1,Im$1=(e1,_g,t1,r1,n1)=>{let i1=Math.floor(e1/2);_g==="SAME_UPPER"?(t1[r1]=i1,t1[n1]=e1-i1):_g==="SAME_LOWER"&&(t1[r1]=e1-i1,t1[n1]=i1)},Sm$1=(e1,_g,t1,r1,n1,i1,o1,a1)=>{let u1=e1.length-2,s1=a1.length===0;for(let l1=0;l1<u1;++l1){let c1=s1?e1[l1+2]*i1[l1]:a1[l1],d1=Om$1(e1[l1+2],i1[l1],n1[l1],_g[l1],t1[l1],c1);Im$1(d1,r1,n1,l1,l1+u1),s1&&a1.push(i1[l1]*(e1[l1+2]-1)+o1[l1]+(_g[l1]-1)*t1[l1]+1-n1[l1]-n1[l1+u1])}},uf$1=(e1,_g,t1)=>(Fm$1(_g,t1),Am$1(e1,_g,t1)),Am$1=(e1,_g,t1)=>{let r1=Cm$1(t1,_g);return[Lm$1(e1,_g,r1)]},Pm$1=(e1,_g)=>({name:"ConvTranspose",inputNames:e1?["X","W","B"]:["X","W"],inputTypes:e1?[0,0,0]:[0,0],cacheHint:_g}),Em$1=(e1,_g,t1,r1)=>{let n1=_g.length>2?"getB(output_channel)":"0.0",i1=_g[0].dims,o1=_g[1].dims,a1=o1[1],u1=o1[0]/r1.group,s1=[_g[0].dims[0],_g[1].dims[1]*r1.group,...r1.outputShape],l1=H(e1.session.backend.glContext.version),{activationFunction:c1,applyActivation:d1}=Rt(r1),h1=`
  const ivec2 strides = ivec2(${r1.strides[0]}, ${r1.strides[1]});
  const ivec2 pads = ivec2(${r1.pads[0]}, ${r1.pads[1]});
  ${c1}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${a1};
    int wOutChannel = output_channel - group_id * ${a1};

    float value = ${n1};
    for (int inChannelOffset = 0; inChannelOffset < ${u1}; inChannelOffset++) {
      int input_channel = group_id * ${u1} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${o1[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${o1[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${r1.dilations[0]}, wHOff * ${r1.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${i1[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${i1[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${d1}
    ${l1.output} = vec4(value, .0, .0, .0);
  }
`;return{...t1,output:{dims:s1,type:_g[0].type,textureType:0},shaderSource:h1,hasMain:!0}},Dm$1=(e1,_g,t1)=>{let r1=Pm$1(_g.length>2,t1.cacheKey);return{...r1,get:()=>Em$1(e1,_g,r1,t1)}},Lm$1=(e1,_g,t1)=>e1.run(Dm$1(e1,_g,t1),_g),Cm$1=(e1,_g)=>{let t1=e1.kernelShape.slice();if(e1.kernelShape.length===0)for(let a1=2;a1<_g[1].dims.length;++a1)t1.push(_g[1].dims[a1]);let r1=e1.pads.slice(),n1=e1.outputShape.slice(),i1=_g[0].dims;Sm$1(i1,t1,e1.dilations,e1.autoPad,r1,e1.strides,e1.outputPadding,n1);let o1=Object.assign({},e1);return Object.assign(o1,{kernelShape:t1,pads:r1,outputShape:n1,cacheKey:e1.cacheKey}),o1},lf$1=e1=>{let _g=e1.attributes,t1=Nr(_g),r1=_g.getString("auto_pad","NOTSET"),n1=_g.getInts("dilations",[1,1]),i1=_g.getInt("group",1),o1=_g.getInts("kernel_shape",[]),a1=_g.getInts("output_padding",[0,0]),u1=_g.getInts("output_shape",[]),s1=_g.getInts("pads",[0,0,0,0]),l1=_g.getInts("strides",[1,1]);return Q$1({autoPad:r1,dilations:n1,group:i1,kernelShape:o1,outputPadding:a1,outputShape:u1,pads:s1,strides:l1,...t1})},Fm$1=(e1,_g)=>{if(!e1||e1.length!==2&&e1.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e1[0].dims.length!==4||e1[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let t1=e1[0].dims[1],r1=e1[1].dims[0];if(t1!==r1)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let n1=e1[1].dims[1]*_g.group;if(e1.length===3&&(e1[2].dims.length!==1||e1[2].dims[0]!==n1))throw new Error("invalid bias");let i1=e1[0].dims.length-2;if(_g.dilations.length!==i1)throw new Error(`dilations should be ${i1}D`);if(_g.strides.length!==i1)throw new Error(`strides should be ${i1}D`);if(_g.pads.length!==i1*2)throw new Error(`pads should be ${i1*2}D`);if(_g.outputPadding.length!==i1)throw new Error(`output_padding should be ${i1}D`);if(_g.kernelShape.length!==0&&_g.kernelShape.length!==e1[1].dims.length-2)throw new Error("invalid kernel shape");if(_g.outputShape.length!==0&&_g.outputShape.length!==e1[0].dims.length-2)throw new Error("invalid output shape");if(e1[0].type!=="float32"||e1[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(e1.length===3&&e1[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf,wr,pf$1,$m$1,df,km$1,Bm$1,Nm$1,oo$1=L$1(()=>{Ue$1(),fe$1(),ae(),cf={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr=(e1,_g,t1)=>(Nm$1(_g),[e1.run({...cf,cacheHint:t1.cacheKey,get:()=>$m$1(e1,_g[0],t1.perm)},_g)]),pf$1=e1=>Q$1({perm:e1.attributes.getInts("perm",[])}),$m$1=(e1,_g,t1)=>{let r1=_g.dims;t1=df(r1,t1);let n1=km$1(r1,t1),i1=r1.length,o1=`
      ${Bm$1("perm",t1,i1)}
      float process(int indices[${i1}]) {
        int a[${i1}];
        perm(a, indices);
        return _A(a);
      }`;return{...cf,output:{dims:n1,type:_g.type,textureType:0},shaderSource:o1}},df=(e1,_g)=>(_g&&_g.length!==e1.length&&(_g=[...e1.keys()].reverse()),_g),km$1=(e1,_g)=>(_g=df(e1,_g),U$2.sortBasedOnPerm(e1,_g)),Bm$1=(e1,_g,t1)=>{let r1=[];r1.push(`void ${e1}(out int a[${t1}], int src[${t1}]) {`);for(let n1=0;n1<t1;++n1)r1.push(`	a[${_g[n1]}]=src[${n1}];`);return r1.push("	}"),r1.join(`
`)},Nm$1=e1=>{if(!e1||e1.length!==1)throw new Error("Transpose requires 1 input.");if(e1[0].type!=="float32"&&e1[0].type!=="float64")throw new Error("input should be float tensor")}}),hf$1,mf$1,Rm$1,bf=L$1(()=>{oo$1(),hf$1=(e1,_g,t1)=>{Rm$1(_g);let r1=t1.blocksize,n1=r1*r1,i1=t1.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],o1=t1.mode==="DCR"?[_g[0].dims[0],r1,r1,_g[0].dims[1]/n1,_g[0].dims[2],_g[0].dims[3]]:[_g[0].dims[0],_g[0].dims[1]/n1,r1,r1,_g[0].dims[2],_g[0].dims[3]],a1=e1.reshapeUnpacked(_g[0],o1),u1={perm:i1,cacheKey:`${i1}`},[s1]=wr(e1,[a1],u1),l1=[_g[0].dims[0],_g[0].dims[1]/n1,_g[0].dims[2]*r1,_g[0].dims[3]*r1];return[e1.reshapeUnpacked(s1,l1)]},mf$1=e1=>{let _g=e1.attributes.getInt("blocksize");if(_g<1)throw new Error(`blocksize must be >= 1, but got : ${_g} for DepthToSpace`);let t1=e1.attributes.getString("mode","DCR");if(t1!=="DCR"&&t1!=="CRD")throw new Error(`unrecognized mode: ${t1} for DepthToSpace`);return{mode:t1,blocksize:_g}},Rm$1=e1=>{if(e1.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${e1.length}`);if(e1[0].type==="string"||e1[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf,yf,Mm$1,Tf=L$1(()=>{fe$1(),gf=(e1,_g,t1)=>{Mm$1(_g,t1);let r1=U$2.flattenShape(_g[0].dims,t1);return[e1.reshapeUnpacked(_g[0],r1)]},yf=e1=>e1.attributes.getInt("axis",1),Mm$1=(e1,_g)=>{if(!e1||e1.length!==1)throw new Error("Flatten requires 1 input.");let t1=e1[0].dims.length;if(t1===0)throw new Error("scalar tensor is not supported.");if(_g<-t1||_g>t1)throw new Error("Invalid axis");if(e1[0].type==="string")throw new Error("string tensor is not supported.")}}),Qt,pn=L$1(()=>{Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf,wf,Gm$1,Um$1,zm$1,Vm$1,vf=L$1(()=>{Ue$1(),pn(),fe$1(),ae(),xf=(e1,_g,t1)=>(Vm$1(_g,t1.axis),[e1.run(zm$1(e1,_g,t1),_g)]),wf=e1=>Q$1({axis:e1.attributes.getInt("axis",0)}),Gm$1={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um$1=(e1,_g,t1,r1)=>{let n1=t1[0].dims.slice(),i1=t1[1].dims.slice(),o1=new Array(n1.length+i1.length-1);r1=U$2.normalizeAxis(r1,n1.length);let a1=[];for(let d1=0;d1<o1.length;d1++)d1<r1?(o1[d1]=n1[d1],a1.push(`inputIdx[${d1}] = outputIdx[${d1}];`)):d1<r1+i1.length?(o1[d1]=i1[d1-r1],a1.push(`indexDataIdx[${d1-r1}] = outputIdx[${d1}];`)):(o1[d1]=n1[d1-i1.length+1],a1.push(`inputIdx[${d1-i1.length+1}] = outputIdx[${d1}];`));let u1=o1.length||1,s1=n1.length,l1=i1.length||1,c1=`
      float process(int outputIdx[${u1}]) {
        int inputIdx[${s1}];
        int indexDataIdx[${l1}];
        indexDataIdx[0] = 0;
        ${a1.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${r1}] = idx < 0 ? idx + ${n1[r1]} : idx;
        return _A(inputIdx);
      }`;return{..._g,output:{dims:o1,type:t1[0].type,textureType:0},shaderSource:c1}},zm$1=(e1,_g,t1)=>{let r1={...Gm$1,cacheHint:t1.cacheKey};return{...r1,get:()=>Um$1(e1,r1,_g,t1.axis)}},Vm$1=(e1,_g)=>{if(!e1||e1.length!==2)throw new Error("Gather requires 2 inputs.");let t1=e1[0].dims.length;if(t1<1)throw new Error("Invalid input shape.");if(_g<-t1||_g>t1-1)throw new Error("Invalid axis.");if(Qt.indexOf(e1[0].type)===-1)throw new Error("Invaid input type.");if(e1[1].type!=="int32"&&e1[1].type!=="int16")throw new Error("Invaid input type.")}}),Fi$1,_f,Of,If,Wm$1,Hm$1,qm$1,Sf=L$1(()=>{Ue$1(),fe$1(),ae(),Fi$1=(e1,_g,t1)=>(qm$1(_g,t1),[e1.run(Wm$1(_g,t1),_g)]),_f=(e1,_g)=>{let t1=e1.attributes.getInt("transA",0)!==0,r1=e1.attributes.getInt("transB",0)!==0,n1=e1.attributes.getFloat("alpha",1),i1=e1.attributes.getFloat("beta",1);return Q$1({transA:t1,transB:r1,alpha:n1,beta:i1,isOptionalC:_g})},Of=e1=>_f(e1,!1),If=e1=>_f(e1,!0),Wm$1=(e1,_g)=>{let t1={name:"Gemm",inputNames:e1.length===3?["A","B","C"]:["A","B"],inputTypes:e1.length===3?[0,0,0]:[0,0],key:_g.cacheKey};return{...t1,get:()=>Hm$1(t1,e1,_g)}},Hm$1=(e1,_g,t1)=>{let r1=_g[0].dims.slice(),n1=_g[1].dims.slice(),[i1,o1]=jn$1.getShapeOfGemmResult(r1,t1.transA,n1,t1.transB,_g.length===3?_g[2].dims:void 0),a1=[i1,o1];if(!a1)throw new Error("Can't use gemm on the given tensors");let u1=r1[r1.length-1],s1="";t1.transA&&(u1=r1[0]),t1.transA&&t1.transB?s1="value += _A_T(a) * _B_T(b);":t1.transA&&!t1.transB?s1="value += _A_T(a) * _B(b);":!t1.transA&&t1.transB?s1="value += _A(a) * _B_T(b);":!t1.transA&&!t1.transB&&(s1="value += _A(a) * _B(b);");let l1=a1.length,c1=_g.length===3?`int c[${_g[2].dims.length}];`:"",d1=_g.length===3?"bcastIndices_C(indices, c);":"",h1=_g.length===3?"value += beta * _C(c);":"",f1=`
      float process(int indices[${l1}]) {
          int a[${l1}];
          int b[${l1}];
          ${c1}

          copyVec(indices, a);
          copyVec(indices, b);
          ${d1}

          float value = 0.0;
          for (int k=0; k<${u1}; ++k) {
              a[${l1-1}] = k;
              b[${l1-2}] = k;
              ${s1}
          }

          value = value * alpha;
          ${h1}
          return value;
      }`;return{...e1,output:{dims:a1,type:_g[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:t1.alpha},{name:"beta",type:"float",data:t1.beta}],shaderSource:f1}},qm$1=(e1,_g)=>{if(!e1)throw new Error("Input is missing");if(_g.isOptionalC&&(e1.length<2||e1.length>3))throw new Error("Invaid input shape.");if(!_g.isOptionalC&&e1.length!==3)throw new Error("Gemm requires 3 inputs");if(e1.length===3&&e1[2].dims.length!==1&&e1[2].dims.length!==2)throw new Error("Invalid input shape of C");if(e1[0].type!=="float32"&&e1[0].type!=="float64"||e1[1].type!=="float32"&&e1[1].type!=="float64"||e1.length===3&&e1[2].type!=="float32"&&e1[2].type!=="float64")throw new Error("Invalid input type.");if(e1[0].type!==e1[1].type||e1.length===3&&e1[0].type!==e1[2].type)throw new Error("Input types are mismatched")}}),Af,Pf,jm$1,Ym$1,Xm$1,Km$1,Jm$1,Ef=L$1(()=>{Ue$1(),ae(),Af=(e1,_g,t1)=>(Jm$1(_g),[e1.run(Xm$1(e1,_g,t1),_g)]),Pf=e1=>{let _g=e1.attributes.getFloat("scale"),t1=e1.attributes.getFloats("bias");return Q$1({scale:_g,bias:t1})},jm$1={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym$1=(e1,_g,t1,r1)=>{let n1=t1[0].dims.slice(),i1=n1.length,o1=`
      ${Km$1(r1.bias.length)}
      float process(int indices[${i1}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{..._g,output:{dims:n1,type:t1[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:r1.bias.length,data:r1.bias},{name:"scale",type:"float",data:r1.scale}],shaderSource:o1}},Xm$1=(e1,_g,t1)=>{let r1={...jm$1,cacheHint:t1.cacheKey};return{...r1,get:()=>Ym$1(e1,r1,_g,t1)}},Km$1=e1=>{let _g=[`float getBias(float bias[${e1}], int channel) {`];for(let t1=0;t1<e1;++t1)t1===0?_g.push(`	if (channel == ${t1}) { return bias[${t1}]; }`):t1===e1-1?_g.push(`	else { return bias[${t1}]; }`):_g.push(`	else if (channel == ${t1}) { return bias[${t1}]; }`);return _g.push("	}"),_g.join(`
`)},Jm$1=e1=>{if(!e1||e1.length!==1)throw new Error("ImageScaler requires 1 input.");if(e1[0].dims.length!==4)throw new Error("Invalid input shape.");if(e1[0].type!=="float32"&&e1[0].type!=="float64")throw new Error("Invalid input type.")}}),Lf,Cf,Df,Zm$1,Qm$1,eb,tb,rb,nb,Ff=L$1(()=>{we$1(),ae(),Lf=(e1,_g,t1)=>{nb(_g);let r1=e1.run(Qm$1(_g[0]),_g);return[e1.run(rb(e1,_g[0],t1,r1.dims),[_g[0],r1,_g[1],_g[2]])]},Cf=e1=>e1.attributes.getFloat("epsilon",1e-5),Df={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm$1=(e1,_g)=>{let t1=_g.dims.slice(),r1=t1[1],n1=t1[2]*t1[3],i1=[t1[0],r1],o1=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${t1[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${t1[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${n1});
        temp = 0.0;
        for(int a2=0; a2<${t1[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${t1[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${n1});

        return v;
      }`;return{...e1,output:{dims:i1,type:_g.type,textureType:4},shaderSource:o1}},Qm$1=e1=>({...Df,get:()=>Zm$1(Df,e1)}),eb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb=(e1,_g,t1,r1,n1)=>{let i1=H(e1.session.backend.glContext.version),[o1,a1]=e1.calculateTextureWidthAndHeight(n1,4),[u1,s1]=[o1/4,a1],l1=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${u1}, ${s1});
        return ${i1.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{..._g,output:{dims:t1.dims,type:t1.type,textureType:0},variables:[{name:"epsilon",type:"float",data:r1}],shaderSource:l1}},rb=(e1,_g,t1,r1)=>{let n1={...eb,cacheHint:`${t1}`};return{...n1,get:()=>tb(e1,n1,_g,t1,r1)}},nb=e1=>{if(!e1||e1.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let _g=e1[0],t1=e1[1],r1=e1[2];if(_g.dims.length<3||t1.dims.length!==1||r1.dims.length!==1)throw new Error("Invalid input shape.");if(t1.dims[0]!==_g.dims[1]||r1.dims[0]!==_g.dims[1])throw new Error("Input shapes are mismatched.");if(_g.type!=="float32"&&_g.type!=="float64"||t1.type!=="float32"&&t1.type!=="float64"||r1.type!=="float32"&&r1.type!=="float64")throw new Error("Invalid input type.");if(e1[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ob(e1,_g){let t1=e1[0].dims[1],r1=e1[0].dims.length,n1=-Math.floor((_g.size-1)/2),i1=Math.ceil((_g.size-1)/2),o1=`float(${_g.alpha}) / float(${_g.size})`,a1=`float(${_g.bias})`,u1=`float(${_g.beta})`,s1=`
    float process(int indices[${r1}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${n1}; i <= ${i1}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${t1}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${a1} + ${o1} * square_sum, ${u1});
    }`;return{...Bf,cacheHint:_g.cacheKey,output:{dims:e1[0].dims,type:e1[0].type,textureType:0},shaderSource:s1}}function ib(e1,_g){return{...Bf,cacheHint:_g.cacheKey,get:()=>ob(e1,_g)}}var $f,kf,Bf,ab,Nf=L$1(()=>{Ue$1(),ae(),$f=(e1,_g,t1)=>(ab(_g),[e1.run(ib(_g,t1),_g)]),kf=e1=>{let _g=e1.attributes.getFloat("alpha",1e-4),t1=e1.attributes.getFloat("beta",.75),r1=e1.attributes.getFloat("bias",1),n1=e1.attributes.getInt("size");return Q$1({alpha:_g,beta:t1,bias:r1,size:n1})},Bf={name:"LRN",inputNames:["X"],inputTypes:[0]},ab=e1=>{if(!e1||e1.length!==1)throw new Error("LRN requires 1 input.");if(e1[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(e1[0].type!=="float32")throw new Error("input should be float type")}}),sb,$i,Rf,Mf,Gf,ub,lb,fb,cb,pb,db,hb,mb,Uf=L$1(()=>{Ue$1(),fe$1(),we$1(),ae(),sb={name:"Pad",inputNames:["A"],inputTypes:[0]},$i=(e1,_g,t1)=>(fb(_g),[e1.run({...sb,cacheHint:t1.cacheKey,get:()=>lb(e1,_g[0],t1)},_g)]),Rf=e1=>{let _g=e1.attributes.getString("mode","constant"),t1=e1.attributes.getFloat("value",0),r1=e1.attributes.getInts("pads");return Q$1({mode:_g,value:t1,pads:r1})},Mf=(e1,_g,t1)=>{cb(_g);let r1=ub(e1,_g,t1);return $i(e1,[_g[0]],r1)},Gf=e1=>e1.attributes.getString("mode","constant"),ub=(e1,_g,t1)=>{if(!e1.session.isInitializer(_g[1].dataId)||_g.length>=3&&!e1.session.isInitializer(_g[2].dataId))throw new Error("dynamic pad attributes are not allowed");let r1=Array.from(_g[1].integerData),n1=_g.length>=3?_g[2].floatData[0]:0;return Q$1({mode:t1,pads:r1,value:n1})},lb=(e1,_g,t1)=>{let r1=U$2.padShape(_g.dims.slice(),t1.pads),n1=r1.length,i1=`
      ${pb(e1,_g,t1)}
      float process(int[${n1}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:r1,type:_g.type,textureType:0},shaderSource:i1}},fb=e1=>{if(!e1||e1.length!==1)throw new Error("Pad requires 1 input");if(e1[0].type!=="float32"&&e1[0].type!=="float64")throw new Error("Invalid input type.")},cb=e1=>{if(!e1||e1.length!==2&&e1.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(e1[1].type!=="int32")throw new Error("Invalid input type.");if(e1.length>=3&&e1[2].type==="string")throw new Error("Invalid input type.")},pb=(e1,_g,t1)=>{let r1=H(e1.session.backend.glContext.version),[n1,i1]=e1.calculateTextureWidthAndHeight(_g.dims,0),o1=U$2.computeStrides(_g.dims);switch(t1.mode){case"constant":return db(r1,_g.dims,o1,n1,i1,t1.pads,t1.value);case"reflect":return hb(r1,_g.dims,o1,n1,i1,t1.pads);case"edge":return mb(r1,_g.dims,o1,n1,i1,t1.pads);default:throw new Error("Invalid mode")}},db=(e1,_g,t1,r1,n1,i1,o1)=>{let a1=_g.length,u1="";for(let s1=a1-1;s1>=0;--s1)u1+=`
        k = m[${s1}] - ${i1[s1]};
        if (k < 0)  return constant;
        if (k >= ${_g[s1]}) return constant;
        offset += k * ${t1[s1]};
        `;return`
      float padA(int m[${a1}]) {
        const float constant = float(${o1});
        int offset = 0;
        int k = 0;
        ${u1}
        vec2 coords = offsetToCoords(offset, ${r1}, ${n1});
        float value = getColorAsFloat(${e1.texture2D}(A, coords));
        return value;
      }
      `},hb=(e1,_g,t1,r1,n1,i1)=>{let o1=_g.length,a1="";for(let u1=o1-1;u1>=0;--u1)a1+=`
        k = m[${u1}] - ${i1[u1]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(_g[u1]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${_g[u1]}) { k = _2n_1 - k; }
        }
        offset += k * ${t1[u1]};
        `;return`
      float padA(int m[${o1}]) {
        int offset = 0;
        int k = 0;
        ${a1}
        vec2 coords = offsetToCoords(offset, ${r1}, ${n1});
        float value = getColorAsFloat(${e1.texture2D}(A, coords));
        return value;
      }
      `},mb=(e1,_g,t1,r1,n1,i1)=>{let o1=_g.length,a1="";for(let u1=o1-1;u1>=0;--u1)a1+=`
        k = m[${u1}] - ${i1[u1]};
        if (k < 0)  k = 0;
        if (k >= ${_g[u1]}) k = ${_g[u1]-1};
        offset += k * ${t1[u1]};
      `;return`
      float padA(int m[${o1}]) {
        int offset = 0;
        int k = 0;
        ${a1}
        vec2 coords = offsetToCoords(offset, ${r1}, ${n1});
        float value = getColorAsFloat(${e1.texture2D}(A, coords));
        return value;
      }
      `}}),Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,Jf,bb,zf,Zf,ao$1,Qf,io$1,gb,ec=L$1(()=>{Ue$1(),fe$1(),ae(),Vf=(e1,_g,t1)=>{ao$1(_g);let r1={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:t1.cacheKey};return[e1.run({...r1,get:()=>Hf(_g,r1,!1,t1)},_g)]},Wf=e1=>{let _g=e1.attributes.getString("auto_pad","NOTSET"),t1=e1.attributes.getInt("ceil_mode",0),r1=e1.attributes.getInt("count_include_pad",0)!==0,n1=e1.attributes.getInts("kernel_shape"),i1=e1.attributes.getInts("strides",[]),o1=e1.attributes.getInts("pads",[]);if(t1!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q$1({autoPad:_g,ceilMode:t1,countIncludePad:r1,kernelShape:n1,strides:i1,pads:o1})},Hf=(e1,_g,t1,r1)=>{let[n1,i1]=Jf(e1,r1,t1),o1=U$2.size(n1.kernelShape),a1="value += _X(x);",u1="";n1.countIncludePad?u1+=`value /= float(${o1});`:u1+=`value /= float(${o1} - pad);`;let s1=`
        ${Qf(e1[0].dims,n1,a1,u1,"0.0")}
      `;return{..._g,output:{dims:i1,type:e1[0].type,textureType:0},shaderSource:s1}},qf=(e1,_g,t1)=>{ao$1(_g);let r1={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${t1.countIncludePad}`};return[e1.run({...r1,get:()=>Hf(_g,r1,!0,t1)},_g)]},jf=e1=>{let _g=e1.attributes.getInt("count_include_pad",0)!==0;return Q$1({autoPad:"",ceilMode:0,countIncludePad:_g,kernelShape:[],strides:[],pads:[]})},Yf=(e1,_g,t1)=>{ao$1(_g);let r1={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:t1.cacheKey};return[e1.run({...r1,get:()=>Kf(_g,r1,!1,t1)},_g)]},Xf=e1=>{let _g=e1.attributes.getString("auto_pad","NOTSET"),t1=e1.attributes.getInt("ceil_mode",0),r1=e1.attributes.getInts("kernel_shape"),n1=e1.attributes.getInts("strides",[]),i1=e1.attributes.getInts("pads",[]),o1=e1.attributes.getInt("storage_order",0),a1=e1.attributes.getInts("dilations",[]);if(o1!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(t1!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q$1({autoPad:_g,ceilMode:t1,countIncludePad:!1,kernelShape:r1,strides:n1,pads:i1,storageOrder:o1,dilations:a1})},Kf=(e1,_g,t1,r1)=>{let[n1,i1]=Jf(e1,r1,t1),o1=`
      value = max(_X(x), value);
    `,a1="",u1=`
      ${Qf(e1[0].dims,n1,o1,a1,"-1e5")}
    `;return{..._g,output:{dims:i1,type:e1[0].type,textureType:0},shaderSource:u1}},Jf=(e1,_g,t1)=>{let r1=e1[0].dims.slice(),n1=Object.hasOwnProperty.call(_g,"dilations"),i1=_g.kernelShape.slice(),o1=_g.strides.slice(),a1=n1?_g.dilations.slice():[],u1=_g.pads.slice();mr$1.adjustPoolAttributes(t1,r1,i1,o1,a1,u1);let s1=mr$1.computePoolOutputShape(t1,r1,o1,a1,i1,u1,_g.autoPad),l1=Object.assign({},_g);return n1?Object.assign(l1,{kernelShape:i1,strides:o1,pads:u1,dilations:a1,cacheKey:_g.cacheKey}):Object.assign(l1,{kernelShape:i1,strides:o1,pads:u1,cacheKey:_g.cacheKey}),[l1,s1]},bb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf=(e1,_g)=>(ao$1(_g),[e1.run({...zf,get:()=>Kf(_g,zf,!0,bb)},_g)]),ao$1=e1=>{if(!e1||e1.length!==1)throw new Error("Pool ops requires 1 input.");if(e1[0].type!=="float32"&&e1[0].type!=="float64")throw new Error("Invalid input type.")},Qf=(e1,_g,t1,r1,n1)=>{let i1=e1.length;if(_g.kernelShape.length<=2){let o1=_g.kernelShape[_g.kernelShape.length-1],a1=_g.strides[_g.strides.length-1],u1=_g.pads[_g.pads.length/2-1],s1=_g.pads[_g.pads.length-1],l1=e1[i1-1],c1="",d1="",h1="";if(u1+s1!==0?c1=`
          for (int i = 0; i < ${o1}; i++) {
            x[${i1} - 1] = indices[${i1} - 1] * ${a1} - ${u1} + i;
            if (x[${i1} - 1] < 0 || x[${i1} - 1] >= ${l1}) {
              pad++;
              continue;
            }
            ${t1}
          }`:c1=`
          for (int i = 0; i < ${o1}; i++) {
            x[${i1} - 1] = indices[${i1} - 1] * ${a1} - ${u1} + i;
            ${t1}
          }`,_g.kernelShape.length===2){let f1=_g.kernelShape[_g.kernelShape.length-2],g1=_g.strides[_g.strides.length-2],v1=_g.pads[_g.pads.length/2-2],$1=_g.pads[_g.pads.length-2],y1=e1[i1-2];v1+$1!==0?d1=`
            for (int j = 0; j < ${f1}; j++) {
              x[${i1} - 2] = indices[${i1} - 2] * ${g1} - ${v1} + j;
              if (x[${i1} - 2] < 0 || x[${i1} - 2] >= ${y1}) {
                pad+= ${o1};
                continue;
              }
          `:d1=`
            for (int j = 0; j < ${f1}; j++) {
              x[${i1} - 2] = indices[${i1} - 2] * ${g1} - ${v1} + j;
            `,h1=`
          }
        `}return`
        float process(int indices[${i1}]) {
          int x[${i1}];
          copyVec(indices, x);

          float value = ${n1};
          int pad = 0;
          ${d1}
          ${c1}
          ${h1}
          ${r1}
          return value;
        }
      `}else{let o1=U$2.size(_g.kernelShape),a1=U$2.computeStrides(_g.kernelShape),u1=a1.length,s1=_g.pads.length,l1=gb(u1),c1=io$1(e1,"inputDims"),d1=io$1(_g.pads,"pads"),h1=io$1(a1,"kernelStrides"),f1=io$1(_g.strides,"strides"),g1=_g.pads.reduce(($1,y1)=>$1+y1),v1="";return g1?v1=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${t1}
          }`:v1=`
          }
          ${t1}
        `,`
        ${l1}
        float process(int indices[${i1}]) {
          int x[${i1}];
          copyVec(indices, x);
          int offset[${u1}];
          int pads[${s1}];
          int inputDims[${i1}];
          int kernelStrides[${u1}];
          int strides[${u1}];
          ${d1}
          ${c1}
          ${f1}
          ${h1}

          float value = ${n1};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${o1}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${i1} - ${u1}; j < ${i1}; j++) {
              x[j] = indices[j] * strides[j - ${i1} + ${u1}]
                + offset[j - ${i1} + ${u1}] - pads[j - 2];
              ${v1}
          }
          ${r1}

          return value;
        }
      `}},io$1=(e1,_g)=>{let t1="";for(let r1=0;r1<e1.length;r1++)t1+=`
      ${_g}[${r1}] = ${e1[r1]};
    `;return t1},gb=e1=>`
  void offsetToIndices(int offset, int[${e1}] strides, out int[${e1}] indices) {
    if (${e1} == 0) {
      return;
    }
    for (int i = 0; i < ${e1} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${e1} - 1] = offset;
  }`}),vr,er,yb,Tb,tc,rc,nc$1,oc$1,ic$1,ac$1,sc$1,uc$1=L$1(()=>{Ue$1(),pn(),fe$1(),ae(),vr=(e1,_g,t1,r1,n1)=>{Tb(_g);let i1={name:r1,inputNames:["A"],inputTypes:[0]};return[e1.run({...i1,cacheHint:t1.cacheKey,get:()=>yb(e1,_g,t1,r1,n1,i1)},_g)]},er=e1=>{let _g=e1.attributes.getInts("axes",[]),t1=e1.attributes.getInt("keepdims",1)===1;return Q$1({axes:_g,keepDims:t1})},yb=(e1,_g,t1,r1,n1,i1)=>{let o1=[],a1=_g[0].dims.length||1,u1=[],s1=U$2.normalizeAxes(t1.axes,_g[0].dims.length),l1=n1(_g,s1),c1=l1[1];for(let h1=0;h1<_g[0].dims.length;h1++)s1.indexOf(h1)>=0||s1.length===0?(t1.keepDims&&o1.push(1),c1=`
          for(int j${h1} = 0; j${h1} < ${_g[0].dims[h1]}; j${h1}++) {
            inputIdx[${h1}] = j${h1};
            ${c1}
          }`):(u1.push(`inputIdx[${h1}] = outputIdx[${o1.length}];`),o1.push(_g[0].dims[h1]));let d1=`
      float process(int outputIdx[${o1.length||1}]) {
        float value;                 // final result
        int inputIdx[${a1}];      // addressing input data
        ${u1.join(`
`)}
        ${l1[0]}       // init ops for reduce max/min
        ${c1}
        ${l1[2]}       // final computation for reduce mean
        return value;
      }`;return{...i1,output:{dims:o1,type:_g[0].type,textureType:0},shaderSource:d1}},Tb=e1=>{if(!e1||e1.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt.indexOf(e1[0].type)===-1)throw new Error("Invalid input type.")},tc=(e1,_g,t1)=>vr(e1,_g,t1,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(e1,_g,t1)=>vr(e1,_g,t1,"ReduceMean",(r1,n1)=>{let i1=1;for(let o1=0;o1<r1[0].dims.length;o1++)(n1.indexOf(o1)>=0||n1.length===0)&&(i1*=r1[0].dims[o1]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${i1}.;`]}),nc$1=(e1,_g,t1)=>vr(e1,_g,t1,"ReduceMax",(r1,n1)=>{let i1=[];for(let o1=0;o1<r1[0].dims.length;o1++)(n1.indexOf(o1)>=0||n1.length===0)&&i1.push(`inputIdx[${o1}] = 0;`);return[`${i1.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc$1=(e1,_g,t1)=>vr(e1,_g,t1,"ReduceMin",(r1,n1)=>{let i1=[];for(let o1=0;o1<r1[0].dims.length;o1++)(n1.indexOf(o1)>=0||n1.length===0)&&i1.push(`inputIdx[${o1}] = 0;`);return[`${i1.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic$1=(e1,_g,t1)=>vr(e1,_g,t1,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac$1=(e1,_g,t1)=>vr(e1,_g,t1,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc$1=(e1,_g,t1)=>vr(e1,_g,t1,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc$1,fc$1=L$1(()=>{fe$1(),lc$1=(e1,_g)=>{let t1=U$2.calculateReshapedDims(_g[0].dims,_g[1].integerData);return e1.session.pack?[e1.reshapePacked(_g[0],t1)]:[e1.reshapeUnpacked(_g[0],t1)]}}),cc$1,ki,pc$1,dc$1,dn,xb,Bi$1,so$1,Ni=L$1(()=>{Ue$1(),we$1(),ae(),cc$1={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(e1,_g,t1)=>(Bi$1(_g,t1),[e1.run({...cc$1,cacheHint:t1.cacheKey,get:()=>xb(e1,_g,t1)},_g)]),pc$1=e1=>dn(e1,7),dc$1=e1=>dn(e1,9),dn=(e1,_g)=>{let t1=_g>=10,r1=e1.attributes.getString("mode","nearest");if(r1!=="nearest"&&r1!=="linear"&&(_g<11||r1!=="cubic"))throw new Error(`unrecognized mode: ${r1}`);let n1=[];_g<9&&(n1=e1.attributes.getFloats("scales"),so$1(n1,r1,t1));let i1=e1.attributes.getFloat("extrapolation_value",0),o1=_g>10?e1.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(o1)===-1)throw new Error(`coordinate_transform_mode '${o1}' is not supported`);let a1=o1==="tf_crop_and_resize",u1=a1,s1=r1==="nearest"&&_g>=11?e1.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(s1)===-1)throw new Error(`nearest_mode '${s1}' is not supported`);let l1=e1.attributes.getFloat("cubic_coeff_a",-.75),c1=e1.attributes.getInt("exclude_outside",0)!==0;if(c1&&r1!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let d1=_g<11?!0:r1==="nearest"&&o1==="asymmetric"&&s1==="floor",h1=0,f1=0,g1=0;return _g>10?e1.inputs.length>2?(h1=1,f1=2,g1=3):(f1=1,g1=2):_g===9&&(f1=1),Q$1({opset:_g,isResize:t1,mode:r1,scales:n1,extrapolationValue:i1,coordinateTransformMode:o1,useExtrapolation:u1,needRoiInput:a1,nearestMode:s1,cubicCoefficientA:l1,excludeOutside:c1,useNearest2xOptimization:d1,roiInputIdx:h1,scalesInputIdx:f1,sizesInputIdx:g1})},xb=(e1,_g,t1)=>{let r1=H(e1.session.backend.glContext.version),[n1,i1]=e1.calculateTextureWidthAndHeight(_g[0].dims,0),o1=_g[0].dims.map((g1,v1)=>Math.floor(g1*t1.scales[v1])),[a1,u1]=e1.calculateTextureWidthAndHeight(o1,0),s1=o1.length,l1=new Array(s1),c1=new Array(s1),d1=`
      int output_pitches[${s1}];
      int input_pitches[${s1}];
      `;for(let g1=s1-1;g1>=0;g1--)l1[g1]=g1===s1-1?1:l1[g1+1]*o1[g1+1],c1[g1]=g1===s1-1?1:c1[g1+1]*_g[0].dims[g1+1],d1+=`
        output_pitches[${g1}] = ${l1[g1]};
        input_pitches[${g1}] = ${c1[g1]};
        `;let h1=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${n1}, ${i1});
        float value = getColorAsFloat(${r1.texture2D}(X, coords));
        return value;
      }
      `,f1=t1.mode==="nearest"?`
    ${h1}
    float process(int indices[${s1}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a1}, ${u1});

      ${d1}

      int d, m;
      for (int dim = 0; dim < ${s1}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:s1===4?`
    ${h1}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a1}, ${u1});

      ${d1}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${_g[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${h1}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a1}, ${u1});

      ${d1}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${_g[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...cc$1,output:{dims:o1,type:_g[0].type,textureType:0},shaderSource:f1,variables:[{name:"scales",type:"int",arrayLength:t1.scales.length,data:t1.scales.map(g1=>Math.ceil(g1))}]}},Bi$1=(e1,_g)=>{if(!e1||_g.opset<9&&e1.length!==1||_g.opset>=9&&_g.opset<11&&e1.length!==2||_g.opset>=11&&e1.length<2)throw new Error("invalid inputs.");if(_g.scales.length>0&&e1[0].dims.length!==_g.scales.length)throw new Error("Invalid input shape.");if(e1[0].type==="string")throw new Error("Invalid input tensor types.")},so$1=(e1,_g,t1)=>{if(t1){for(let r1 of e1)if(r1<=0)throw new Error("Scale value should be greater than 0.")}else for(let r1 of e1)if(r1<1)throw new Error("Scale value should be greater than or equal to 1.");if((_g==="linear"||_g==="cubic")&&e1.length!==2&&(e1.length!==4||e1[0]!==1||e1[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${t1?"Resize":"Upsample"} opeartor.`)}}),Ri$1,Mi$1,hc,mc$1,wb,vb,_b,Ob,bc$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Ni(),Ri$1={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi$1=(e1,_g,t1)=>(Bi$1(_g,t1),[e1.run({...Ri$1,cacheHint:t1.cacheKey,get:()=>wb(e1,_g,t1)},_g)]),hc=e1=>dn(e1,10),mc$1=e1=>dn(e1,11),wb=(e1,_g,t1)=>{let r1=H(e1.session.backend.glContext.version),[n1,i1]=vb(_g,t1);if(n1.every(y1=>y1===1)&&t1.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri$1,output:{dims:i1,type:_g[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${r1.texture2D}(X, TexCoords);
                    ${r1.output} = v;
                }`};let o1=i1.length;if(o1<2)throw new Error(`output dimension should be at least 2, but got ${o1}`);let a1=i1[o1-2],u1=i1[o1-1],s1=_g[0].dims;if(o1!==s1.length)throw new Error(`output dimension should match input ${s1.length}, but got ${o1}`);let l1=s1[o1-2],c1=s1[o1-1],d1=n1[o1-2],h1=n1[o1-1],f1="";if(t1.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${t1.mode}'`);switch(t1.coordinateTransformMode){case"asymmetric":f1=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":f1=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":f1=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${u1}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${a1}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${u1}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${a1}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":f1=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${u1}.0 - 1.0, ${a1}.0 - 1.0, ${u1}.0 - 1.0,
                            ${a1}.0 - 1.0);
                        vec4 original = vec4(${c1}.0 - 1.0, ${l1}.0 - 1.0, ${c1}.0 - 1.0,
                            ${l1}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${t1.coordinateTransformMode}'`)}let g1=Qe(o1),v1=Nt(),$1=`
            const vec2 inputWH = vec2(${l1}.0, ${c1}.0);
            const vec4 scaleWHWH = vec4(float(${d1}), float(${h1}), float(${d1}), float(${h1}));
            ${v1}
            ${f1}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${g1} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${a1-1};
                bool hasNextCol = rc.z < ${u1-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${r1.output} = vec4(newValue);
            }
        `;return{...Ri$1,output:{dims:i1,type:_g[0].type,textureType:2},hasMain:!0,shaderSource:$1}},vb=(e1,_g)=>{let t1=e1[0].dims,r1=_g.scales,n1;if(r1.length===0){let o1=e1[_g.scalesInputIdx];if(o1&&o1.size!==0){if(e1[_g.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");r1=_b(o1,_g.mode,_g.isResize)}else{let a1=e1[_g.sizesInputIdx];if(!a1||a1.size===0)throw new Error("Either scales or sizes MUST be provided as input.");n1=Array.from(a1.integerData),r1=Ob(n1,t1,_g.mode,_g.isResize)}}else if(e1[_g.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let i1=n1||t1.map((o1,a1)=>Math.floor(o1*r1[a1]));return[r1,i1]},_b=(e1,_g,t1)=>{let r1=Array.from(e1.floatData);return so$1(r1,_g,t1),r1},Ob=(e1,_g,t1,r1)=>{let n1=_g.length,i1=new Array(n1);for(let o1=0,a1=n1;o1<a1;o1++)if(_g[o1]===0){if(e1[o1]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");i1[o1]=1}else i1[o1]=e1[o1]/_g[o1];return so$1(i1,t1,r1),i1}}),gc$1,Ib,yc$1=L$1(()=>{yr(),gc$1=(e1,_g)=>(Ib(_g),[new $e([_g[0].dims.length],"int32",void 0,void 0,new Int32Array(_g[0].dims))]),Ib=e1=>{if(!e1||e1.length!==1)throw new Error("Shape requires 1 input.")}}),Gi$1,Tc$1,xc$1,wc$1,Sb,vc$1,Ab,Pb,_c$1=L$1(()=>{Ue$1(),pn(),fe$1(),ae(),Gi$1={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc$1=(e1,_g,t1)=>(Sb(_g),[e1.run({...Gi$1,cacheHint:t1.cacheKey,get:()=>wc$1(e1,_g[0],t1)},_g)]),xc$1=e1=>{let _g=e1.attributes.getInts("starts"),t1=e1.attributes.getInts("ends"),r1=e1.attributes.getInts("axes",[]);return Q$1({starts:_g,ends:t1,axes:r1})},wc$1=(e1,_g,t1)=>{let r1=t1.axes.length===0?_g.dims.slice(0).map((l1,c1)=>c1):t1.axes,n1=U$2.normalizeAxes(r1,_g.dims.length),i1=t1.starts.map((l1,c1)=>l1>_g.dims[n1[c1]]-1?_g.dims[n1[c1]]:U$2.normalizeAxis(l1,_g.dims[n1[c1]])),o1=t1.ends.map((l1,c1)=>l1>_g.dims[n1[c1]]-1?_g.dims[n1[c1]]:U$2.normalizeAxis(l1,_g.dims[n1[c1]])),a1=_g.dims.slice(),u1=[];for(let l1=0;l1<n1.length;l1++)a1[n1[l1]]=o1[l1]-i1[l1],i1[l1]>0&&u1.push(`outputIdx[${n1[l1]}] += ${i1[l1]};`);let s1=`
      float process(int outputIdx[${a1.length}]) {
        ${u1.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Gi$1,output:{dims:a1,type:_g.type,textureType:0},shaderSource:s1}},Sb=e1=>{if(!e1||e1.length!==1)throw new Error("Slice requires 1 input.");if(Qt.indexOf(e1[0].type)===-1)throw new Error("Invalid input type.")},vc$1=(e1,_g)=>{Pb(_g);let t1=Ab(e1,_g);return[e1.run({...Gi$1,cacheHint:t1.cacheKey,get:()=>wc$1(e1,_g[0],t1)},[_g[0]])]},Ab=(e1,_g)=>{if(!e1.session.isInitializer(_g[1].dataId)||!e1.session.isInitializer(_g[2].dataId)||_g.length>=4&&!e1.session.isInitializer(_g[3].dataId)||_g.length>=5&&!e1.session.isInitializer(_g[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(_g.length>=5&&_g[4].integerData.some(o1=>o1!==1))throw new Error("currently non-1 steps is not supported for Slice");let t1=Array.from(_g[1].integerData),r1=Array.from(_g[2].integerData),n1=_g.length>=4?Array.from(_g[3].integerData):[],i1=`${n1};${t1};${r1}`;return{starts:t1,ends:r1,axes:n1,cacheKey:i1}},Pb=e1=>{if(!e1||e1.length<3||e1.length>5)throw new Error("Invalid input number.");if(e1[1].type!=="int32"||e1[1].dims.length!==1)throw new Error("Invalid input type.");if(e1[2].type!=="int32"||e1[2].dims.length!==1)throw new Error("Invalid input type.");if(e1.length>=4&&(e1[3].type!=="int32"||e1[3].dims.length!==1))throw new Error("Invalid input type.");if(e1.length>=5&&(e1[4].type!=="int32"||e1[4].dims.length!==1))throw new Error("Invalid input type.")}}),Oc$1,Ic$1,Sc$1,Ac$1,Pc$1,Ec$1,Dc$1,Lc$1,Eb,Db,Lb,Cc$1,Fc$1=L$1(()=>{Ue$1(),fe$1(),we$1(),ae(),oo$1(),Oc$1={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic$1={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc$1={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac$1=(e1,_g,t1)=>{Cc$1(_g);let r1=_g[0].dims.slice(),n1=U$2.normalizeAxis(t1.axis,r1.length),i1=U$2.sizeToDimension(r1,n1),o1=U$2.sizeFromDimension(r1,n1);return Lc$1(e1,_g,t1,i1,o1)},Pc$1=e1=>Q$1({axis:e1.attributes.getInt("axis",1)}),Ec$1=e1=>Q$1({axis:e1.attributes.getInt("axis",-1)}),Dc$1=(e1,_g,t1)=>{Cc$1(_g);let r1=_g[0].dims.slice(),n1=U$2.normalizeAxis(t1.axis,r1.length),i1=r1.length,o1=n1!==i1-1,a1=[],u1=[],s1=[],l1;o1&&(u1=Array.from({length:i1}).map((f1,g1)=>g1),u1[n1]=i1-1,u1[i1-1]=n1,u1.map(f1=>a1.push(r1[f1])),l1=Q$1({perm:u1}),s1=wr(e1,_g,l1));let c1=o1?U$2.sizeToDimension(a1,i1-1):U$2.sizeToDimension(r1,i1-1),d1=o1?U$2.sizeFromDimension(a1,i1-1):U$2.sizeFromDimension(r1,i1-1),h1=Lc$1(e1,o1?s1:_g,t1,c1,d1);return o1?wr(e1,h1,l1):h1},Lc$1=(e1,_g,t1,r1,n1)=>{let i1=Eb(e1,_g[0],r1,n1,[r1]),o1=e1.run({...Oc$1,cacheHint:t1.cacheKey,get:()=>i1},_g),a1=Db(e1,_g[0],r1,n1,i1.output.dims,[r1]),u1=e1.run({...Ic$1,cacheHint:t1.cacheKey,get:()=>a1},[_g[0],o1]),s1=Lb(e1,_g[0],r1,n1,i1.output.dims,a1.output.dims);return[e1.run({...Sc$1,cacheHint:t1.cacheKey,get:()=>s1},[_g[0],o1,u1])]},Eb=(e1,_g,t1,r1,n1)=>{let[i1,o1]=e1.calculateTextureWidthAndHeight(_g.dims,0),a1=n1.length;if(t1<1||r1<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(n1.length!==1)throw new Error("Dimensionality of the output should be 1");if(n1[0]!==t1)throw new Error("Shape of the output should be equal to logical row count");let u1=H(e1.session.backend.glContext.version),s1=`
      float process(int[${a1}] indices) {
        int logical_row_start_offset = indices[0] * ${r1};

        float max = getColorAsFloat(${u1.texture2D}(A, offsetToCoords(logical_row_start_offset, ${i1},
        ${o1} )));
        for(int i=1; i<${r1}; ++i)
        {
          float current = getColorAsFloat(${u1.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${i1}, ${o1})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Oc$1,output:{dims:n1,type:_g.type,textureType:0},shaderSource:s1}},Db=(e1,_g,t1,r1,n1,i1)=>{let[o1,a1]=e1.calculateTextureWidthAndHeight(_g.dims,0),u1=i1.length;if(t1<1||r1<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(i1.length!==1)throw new Error("Dimensionality of the output should be 1");if(i1[0]!==t1)throw new Error("Shape of the output should be equal to logical row count");if(n1.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(n1[0]!==t1)throw new Error("Shape of the intermediate results should be equal to logical row count");let s1=H(e1.session.backend.glContext.version),l1=`
      float process(int[${u1}] indices) {
        int logical_row_start_offset = indices[0] * ${r1};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${r1}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${s1.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${o1}, ${a1}))) - max);
        }

        return norm_factor;
      }`;return{...Ic$1,output:{dims:i1,type:_g.type,textureType:0},shaderSource:l1}},Lb=(e1,_g,t1,r1,n1,i1)=>{let[o1,a1]=e1.calculateTextureWidthAndHeight(_g.dims,0),u1=_g.dims.length;if(t1<1||r1<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(n1.length!==1||i1.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(n1[0]!==t1||i1[0]!==t1)throw new Error("Shape of the intermediate results should be equal to logical row count");let s1=`
      float process(int[${u1}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${o1}, ${a1});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${r1};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Sc$1,output:{dims:_g.dims,type:_g.type,textureType:0},shaderSource:s1}},Cc$1=e1=>{if(!e1||e1.length!==1)throw new Error("Softmax requires 1 input.");if(e1[0].type!=="float32"&&e1[0].type!=="float64")throw new Error("Invalid input type")}}),$c$1,kc$1,Bc$1,Cb,Fb,$b,Nc$1=L$1(()=>{Ue$1(),fe$1(),ae(),$c$1={name:"Split",inputNames:["A"],inputTypes:[0]},kc$1=(e1,_g,t1)=>{$b(_g);let r1=U$2.normalizeAxis(t1.axis,_g[0].dims.length),n1=Cb(e1,_g,r1,t1),i1=[];for(let o1=0;o1<n1;++o1)i1.push(e1.run({...$c$1,cacheHint:`${t1.cacheKey};${o1}`,get:()=>Fb(e1,_g[0],t1,r1,o1)},_g));return i1},Bc$1=e1=>{let _g=e1.attributes.getInt("axis",0),t1=e1.attributes.getInts("split",[]),r1=e1.outputs.length;return Q$1({axis:_g,split:t1,numOutputs:r1})},Cb=(e1,_g,t1,r1)=>{let[,n1]=an$1.splitShape(_g[0].dims,t1,r1.split,r1.numOutputs);return n1.length},Fb=(e1,_g,t1,r1,n1)=>{let[i1,o1]=an$1.splitShape(_g.dims,r1,t1.split,t1.numOutputs),a1=o1[n1],u1=i1[n1],s1=`
      float process(int indices[${u1.length}]) {
        indices[${r1}] += ${a1};
        return _A(indices);
      }
    `;return{...$c$1,cacheHint:`${t1.cacheKey}:${n1}`,output:{dims:u1,type:_g.type,textureType:0},shaderSource:s1}},$b=e1=>{if(!e1||e1.length!==1)throw new Error("Split requires one input.");if(e1[0].type!=="int8"&&e1[0].type!=="uint8"&&e1[0].type!=="int16"&&e1[0].type!=="uint16"&&e1[0].type!=="int32"&&e1[0].type!=="uint32"&&e1[0].type!=="float32"&&e1[0].type!=="float64"&&e1[0].type!=="bool")throw new Error("Invalid input type.")}}),Ui$1,Rc$1,Mc$1,kb,Bb,Gc$1=L$1(()=>{fe$1(),Ui$1=(e1,_g,t1)=>{kb(_g);let r1=U$2.squeezeShape(_g[0].dims,t1);return[e1.reshapeUnpacked(_g[0],r1)]},Rc$1=(e1,_g)=>(Bb(_g),Ui$1(e1,[_g[0]],Array.from(_g[1].integerData))),Mc$1=e1=>e1.attributes.getInts("axes"),kb=e1=>{if(!e1||e1.length!==1)throw new Error("Squeeze requires 1 input.");if(e1[0].type==="string")throw new Error("invalid input tensor types.")},Bb=e1=>{if(!e1||e1.length!==2)throw new Error("Squeeze requires 2 inputs.");if(e1[1].type!=="int32")throw new Error("Invalid input type.")}}),Uc$1,Nb,Rb,zc$1=L$1(()=>{we$1(),ae(),Uc$1=(e1,_g)=>{Rb(_g);let t1={name:"Sum",inputNames:_g.map((r1,n1)=>`X${n1}`),inputTypes:new Array(_g.length).fill(0)};return[e1.run({...t1,get:()=>Nb(e1,_g,t1)},_g)]},Nb=(e1,_g,t1)=>{let r1=H(e1.session.backend.glContext.version),n1=_g[0].dims.slice(),i1=`
      void main() {
        vec4 result = ${_g.map((o1,a1)=>`${r1.texture2D}(X${a1},TexCoords)`).join(" + ")};
        ${r1.output} = result;
      }
    `;return{...t1,output:{dims:n1,type:_g[0].type,textureType:0},hasMain:!0,shaderSource:i1}},Rb=e1=>{if(!e1||e1.length===0)throw new Error("Sum requires inputs.");let _g=e1[0].dims.length;for(let t1=1;t1<e1.length;t1++){if(_g!==e1[t1].dims.length)throw new Error("Input shapes are mismatched.");for(let r1=0;r1<_g;r1++)if(e1[0].dims[r1]!==e1[t1].dims[r1])throw new Error("Input shapes are not matched.")}if(e1[0].type!=="float32"&&e1[0].type!=="float64")throw new Error("Invalid input type.");for(let t1=1;t1<e1.length;t1++)if(e1[0].type!==e1[t1].type)throw new Error("Input types are not matched.")}}),Vc$1,Mb,Gb,Wc$1=L$1(()=>{pn(),ae(),Vc$1=(e1,_g)=>{Gb(_g);let t1={name:"Tile",inputNames:["A"],inputTypes:[0]};return[e1.run({...t1,get:()=>Mb(e1,_g,t1)},_g)]},Mb=(e1,_g,t1)=>{let r1=_g[0].dims.slice(),n1=new Array(r1.length),i1=[];for(let u1=0;u1<r1.length;u1++)n1[u1]=r1[u1]*_g[1].numberData[u1],i1.push(`inputIdx[${u1}] = int(mod(float(outputIdx[${u1}]), ${r1[u1]}.));`);let o1=n1.length,a1=`
      float process(int outputIdx[${o1}]) {
        int inputIdx[${o1}];
        ${i1.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...t1,output:{dims:n1,type:_g[0].type,textureType:0},shaderSource:a1}},Gb=e1=>{if(!e1||e1.length!==2)throw new Error("Tile requires 2 input.");if(e1[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(e1[1].dims[0]!==e1[0].dims.length)throw new Error("Invalid input shape.");if(Qt.indexOf(e1[0].type)===-1)throw new Error("Invalid input type.");if(e1[1].type!=="int32"&&e1[1].type!=="int16")throw new Error("Invalid repeat type.")}}),zi$1,Hc$1,qc$1,Ub,zb,jc$1=L$1(()=>{fe$1(),zi$1=(e1,_g,t1)=>{Ub(_g);let r1=U$2.unsqueezeShape(_g[0].dims,t1);return[e1.reshapeUnpacked(_g[0],r1)]},Hc$1=(e1,_g)=>(zb(_g),zi$1(e1,[_g[0]],Array.from(_g[1].integerData))),qc$1=e1=>e1.attributes.getInts("axes"),Ub=e1=>{if(!e1||e1.length!==1)throw new Error("Unsqueeze requires 1 input.");if(e1[0].type==="string")throw new Error("invalid input tensor types.")},zb=e1=>{if(!e1||e1.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(e1[1].type!=="int32")throw new Error("Invalid input type.")}}),Yc$1,Xc$1=L$1(()=>{ol$1(),gl$1(),xl$1(),Sl$1(),to$1(),ff$1(),bf(),Tf(),vf(),Sf(),Ef(),Ff(),Nf(),ro$1(),Uf(),ec(),uc$1(),fc$1(),bc$1(),yc$1(),_c$1(),Fc$1(),Nc$1(),Gc$1(),zc$1(),Wc$1(),oo$1(),Ii(),jc$1(),Ni(),Yc$1=[["Abs","","6+",Al$1],["Acos","","7+",Pl$1],["Add","","7+",il$1],["And","","7+",al$1],["Asin","","7+",El$1],["Atan","","7+",Dl$1],["AveragePool","","7+",Vf,Wf],["BatchNormalization","","7+",rl$1,nl$1],["Cast","","6+",yl$1,Tl$1],["Ceil","","6+",Fl$1],["Clip","","6-10",_i,Ll$1],["Clip","","11+",Cl$1],["Concat","","4+",_l$1,Il$1],["Conv","","1+",Li$1,Ci],["ConvTranspose","","1+",uf$1,lf$1],["Cos","","7+",$l$1],["Div","","7+",sl$1],["Dropout","","7+",Oi$1],["DepthToSpace","","1+",hf$1,mf$1],["Equal","","7+",ul$1],["Elu","","6+",kl$1,Bl$1],["Exp","","6+",Nl$1],["Flatten","","1+",gf,yf],["Floor","","6+",Rl$1],["FusedConv","com.microsoft","1+",Li$1,Ci],["Gather","","1+",xf,wf],["Gemm","","7-10",Fi$1,Of],["Gemm","","11+",Fi$1,If],["GlobalAveragePool","","1+",qf,jf],["GlobalMaxPool","","1+",Zf],["Greater","","7+",ll$1],["Identity","","1+",Oi$1],["ImageScaler","","1+",Af,Pf],["InstanceNormalization","","6+",Lf,Cf],["LeakyRelu","","6+",Ml$1,Gl$1],["Less","","7+",fl$1],["LRN","","1+",$f,kf],["Log","","6+",Ul$1],["MatMul","","1+",ef$1,tf$1],["MaxPool","","1+",Yf,Xf],["Mul","","7+",cl$1],["Neg","","6+",zl$1],["Not","","1+",Vl$1],["Or","","7+",pl$1],["Pad","","2-10",$i,Rf],["Pad","","11+",Mf,Gf],["Pow","","7+",dl$1],["PRelu","","7+",hl$1],["ReduceLogSum","","1+",ac$1,er],["ReduceMax","","1+",nc$1,er],["ReduceMean","","1+",rc,er],["ReduceMin","","1+",oc$1,er],["ReduceProd","","1+",ic$1,er],["ReduceSum","","1-12",tc,er],["ReduceSumSquare","","1+",sc$1,er],["Relu","","6+",Wl$1],["Reshape","","5+",lc$1],["Resize","","10",Mi$1,hc],["Resize","","11+",Mi$1,mc$1],["Shape","","1+",gc$1],["Sigmoid","","6+",Hl$1],["Sin","","7+",ql$1],["Slice","","10+",vc$1],["Slice","","1-9",Tc$1,xc$1],["Softmax","","1-12",Ac$1,Pc$1],["Softmax","","13+",Dc$1,Ec$1],["Split","","2-12",kc$1,Bc$1],["Sqrt","","6+",jl$1],["Squeeze","","1-12",Ui$1,Mc$1],["Squeeze","","13+",Rc$1],["Sub","","7+",ml$1],["Sum","","6+",Uc$1],["Tan","","7+",Yl$1],["Tanh","","6+",Xl$1],["Tile","","6+",Vc$1],["Transpose","","1+",wr,pf$1],["Upsample","","7-8",ki,pc$1],["Upsample","","9",ki,dc$1],["Unsqueeze","","1-12",zi$1,qc$1],["Unsqueeze","","13+",Hc$1],["Xor","","7+",bl$1]]});function Jc$1(e1){let _g={},t1;for(;(t1=Kc$1.exec(e1))!==null;){let r1=t1[3].split(",").map(n1=>{let i1=n1.trim().split(" ");return i1&&i1.length===2?{type:i1[0],name:i1[1]}:null}).filter(n1=>n1!==null);_g[t1[2]]={params:r1,body:t1[4]}}for(let r1 in _g){let n1=Vb.replace("__FUNC__",r1),i1=new RegExp(n1,"gm");for(;(t1=i1.exec(e1))!==null;){let o1=t1[1],a1=t1[2],u1=t1[3].split(","),s1=o1?`${o1} ${a1};`:"",l1=_g[r1].body,c1="";_g[r1].params.forEach((h1,f1)=>{h1&&(c1+=`${h1.type} ${h1.name} = ${u1[f1]};
`)}),l1=`${c1}
 ${l1}`,l1=l1.replace("return",`${a1} = `);let d1=`
      ${s1}
      {
        ${l1}
      }
      `;e1=e1.replace(t1[0],d1)}}return e1=e1.replace(Kc$1,""),e1}var Kc$1,Vb,Zc$1=L$1(()=>{Kc$1=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr(e1,_g){let t1=[],r1=[];for(let n1=0;n1<e1.length;++n1)e1[n1]!==1&&(t1.push(e1[n1]),r1.push(n1));return{newShape:t1,keptDims:r1}}function qb(e1){if(e1.length===0)return 1;let _g=e1[0];for(let t1=1;t1<e1.length;t1++)_g*=e1[t1];return _g}function Qc$1(e1){let _g=Math.ceil(Math.sqrt(e1));return[_g,Math.ceil(e1/_g)]}var uo$1,Vi=L$1(()=>{lt$1(),fe$1(),uo$1=class{constructor(e1){this.maxTextureSize=e1}computeTextureWH(e1,_g){let t1=this.computeTexture(e1,_g);return _g&&_g.isPacked&&(t1[0]/=2,t1[1]/=2),_g&&_g.reverseWH?[t1[1],t1[0]]:t1}computeTexture(e1,_g){let t1=_g&&_g.isPacked;if(e1.length===0)return t1?[2,2]:[1,1];let r1=this.maxTextureSize;if(_g&&_g.breakAxis!==void 0){let o1=_g.breakAxis>=e1.length?1:e1.slice(_g.breakAxis).reduce((u1,s1)=>u1*s1),a1=_g.breakAxis<=0?1:e1.slice(0,_g.breakAxis).reduce((u1,s1)=>u1*s1);if(o1>r1||a1>r1)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${e1}, breakAxis:${_g.breakAxis}`);else return[o1,a1]}let n1=e1.slice(0);t1&&(r1=r1*2,n1=n1.map((o1,a1)=>a1>=n1.length-2?n1[a1]%2===0?n1[a1]:n1[a1]+1:n1[a1]),n1.length===1&&(n1=[2,n1[0]])),n1.length!==2&&(n1=Mr(n1).newShape);let i1=qb(n1);return n1.length<=1&&i1<=r1?[1,i1]:n1.length===2&&n1[0]<=r1&&n1[1]<=r1?n1:n1.length===3&&n1[0]*n1[1]<=r1&&n1[2]<=r1?[n1[0]*n1[1],n1[2]]:n1.length===3&&n1[0]<=r1&&n1[1]*n1[2]<=r1?[n1[0],n1[1]*n1[2]]:n1.length===4&&n1[0]*n1[1]*n1[2]<=r1&&n1[3]<=r1?[n1[0]*n1[1]*n1[2],n1[3]]:n1.length===4&&n1[0]<=r1&&n1[1]*n1[2]*n1[3]<=r1?[n1[0],n1[1]*n1[2]*n1[3]]:t1?Qc$1(i1/4).map(o1=>o1*2):Qc$1(i1)}}}),lo$1,ep$1=L$1(()=>{fe$1(),Wt$1(),we$1(),Vi(),Bt$1(),lo$1=class extends dt{constructor(e1){super(e1)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let e1="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${e1}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let e1="coordsToOffset";return{coordsToOffset:new R(`
      int ${e1}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let e1=this.context.outputTextureLayout;return e1.isPacked?this.getPackedOutputSamplingSnippet(e1):this.getUnpackedOutputSamplingSnippet(e1)}getPackedOutputSamplingSnippet(e1){let _g=e1.unpackedShape,t1=[e1.width,e1.height],r1={},n1="getOutputCoords";switch(_g.length){case 0:r1[n1]=this.getOutputScalarCoords();break;case 1:r1[n1]=this.getOutputPacked1DCoords(_g,t1);break;case 2:r1[n1]=this.getOutputPacked2DCoords(_g,t1);break;case 3:r1[n1]=this.getOutputPacked3DCoords(_g,t1);break;default:r1[n1]=this.getOutputPackedNDCoords(_g,t1)}let i1=`
      void setOutput(vec4 val) {
        ${H(this.context.glContext.version).output} = val;
      }
    `,o1="floatTextureSetRGBA";return r1[o1]=new R(i1),r1}getUnpackedOutputSamplingSnippet(e1){let _g=e1.unpackedShape,t1=[e1.width,e1.height],r1={},n1="getOutputCoords";switch(_g.length){case 0:r1[n1]=this.getOutputScalarCoords();break;case 1:r1[n1]=this.getOutputUnpacked1DCoords(_g,t1);break;case 2:r1[n1]=this.getOutputUnpacked2DCoords(_g,t1);break;case 3:r1[n1]=this.getOutputUnpacked3DCoords(_g,t1);break;case 4:r1[n1]=this.getOutputUnpacked4DCoords(_g,t1);break;case 5:r1[n1]=this.getOutputUnpacked5DCoords(_g,t1);break;case 6:r1[n1]=this.getOutputUnpacked6DCoords(_g,t1);break;default:throw new Error(`Unsupported output dimensionality: ${_g.length}`)}let i1=`
        void setOutput(float val) {
          ${H(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,o1="floatTextureSetR";return r1[o1]=new R(i1),r1}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(e1,_g){let t1=_g,r1="";return t1[0]===1?(r1=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${t1[1]}.0);
          }
        `,new R(r1)):t1[1]===1?(r1=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${t1[0]}.0);
          }
        `,new R(r1)):(r1=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${t1[0]}, ${t1[1]}));
          return 2 * (resTexRC.y * ${t1[0]} + resTexRC.x);
        }
      `,new R(r1))}getOutputPacked2DCoords(e1,_g){let t1="";if(hr$1.arraysEqual(e1,_g))return t1=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${_g[0]}, ${_g[1]}));
        }
      `,new R(t1);let r1=_g,n1=Math.ceil(e1[1]/2);return t1=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r1[0]}, ${r1[1]}));

          int index = resTexRC.y * ${r1[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${n1}) * 2;
          int c = 2 * (index / ${n1});

          return ivec2(r, c);
        }
      `,new R(t1)}getOutputPacked3DCoords(e1,_g){let t1=[_g[0],_g[1]],r1=Math.ceil(e1[2]/2),n1=r1*Math.ceil(e1[1]/2),i1=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t1[0]}, ${t1[1]}));
          int index = resTexRC.y * ${t1[0]} + resTexRC.x;

          int b = index / ${n1};
          index -= b * ${n1};

          // reverse r and c order for packed texture
          int r = imod(index, ${r1}) * 2;
          int c = 2 * (index / ${r1});

          return ivec3(b, r, c);
        }
      `;return new R(i1)}getOutputPackedNDCoords(e1,_g){let t1=[_g[0],_g[1]],r1=Math.ceil(e1[e1.length-1]/2),n1=r1*Math.ceil(e1[e1.length-2]/2),i1=n1,o1="",a1="b, r, c";for(let s1=2;s1<e1.length-1;s1++)i1*=e1[e1.length-s1-1],o1=`
      int b${s1} = index / ${i1};
      index -= b${s1} * ${i1};
    `+o1,a1=`b${s1}, `+a1;let u1=`
      ivec${e1.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${t1[0]}, ${t1[1]}));
        int index = resTexRC.y * ${t1[0]} + resTexRC.x;

        ${o1}

        int b = index / ${n1};
        index -= b * ${n1};

        // reverse r and c order for packed texture
        int r = imod(index, ${r1}) * 2;
        int c = 2 * (index / ${r1});

        return ivec${e1.length}(${a1});
      }
    `;return new R(u1)}getOutputUnpacked1DCoords(e1,_g){let t1=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${_g[0]}, ${_g[1]}));
          return resTexRC.y * ${_g[0]} + resTexRC.x;
        }
      `;return new R(t1)}getOutputUnpacked2DCoords(e1,_g){let t1=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${_g[0]}, ${_g[1]}));
          int index = resTexRC.y * ${_g[0]} + resTexRC.x;
          int r = index / ${e1[1]};
          int c = index - r * ${e1[1]};
          return ivec2(r, c);
        }
      `;return new R(t1)}getOutputUnpacked3DCoords(e1,_g){let t1="",r1=e1.length,n1=null;r1<2&&(n1=[]),n1=new Array(r1-1),n1[r1-2]=e1[r1-1];for(let a1=r1-3;a1>=0;--a1)n1[a1]=n1[a1+1]*e1[a1+1];let i1=["r","c","d"],o1=n1.map((a1,u1)=>{let s1=`int ${i1[u1]} = index / ${a1}`,l1=u1===n1.length-1?`int ${i1[u1+1]} = index - ${i1[u1]} * ${a1}`:`index -= ${i1[u1]} * ${a1}`;return`${s1}; ${l1};`}).join("");return t1=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${_g[0]}, ${_g[1]}));
          int index = resTexRC.y * ${_g[0]} + resTexRC.x;
          ${o1}
          return ivec3(r, c, d);
        }
      `,new R(t1)}getOutputUnpacked4DCoords(e1,_g){let t1="",r1=e1.length,n1=null;r1<2&&(n1=[]),n1=new Array(r1-1),n1[r1-2]=e1[r1-1];for(let a1=r1-3;a1>=0;--a1)n1[a1]=n1[a1+1]*e1[a1+1];let i1=["r","c","d","d2"],o1=n1.map((a1,u1)=>{let s1=`int ${i1[u1]} = index / ${a1}`,l1=u1===n1.length-1?`int ${i1[u1+1]} = index - ${i1[u1]} * ${a1}`:`index -= ${i1[u1]} * ${a1}`;return`${s1}; ${l1};`}).join("");return t1=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${_g[0]}, ${_g[1]}));
          int index = resTexRC.y * ${_g[0]} + resTexRC.x;
          ${o1}
          return ivec4(r, c, d, d2);
        }
      `,new R(t1)}getOutputUnpacked5DCoords(e1,_g){let t1="",r1=e1.length,n1=null;r1<2&&(n1=[]),n1=new Array(r1-1),n1[r1-2]=e1[r1-1];for(let a1=r1-3;a1>=0;--a1)n1[a1]=n1[a1+1]*e1[a1+1];let i1=["r","c","d","d2","d3"],o1=n1.map((a1,u1)=>{let s1=`int ${i1[u1]} = index / ${a1}`,l1=u1===n1.length-1?`int ${i1[u1+1]} = index - ${i1[u1]} * ${a1}`:`index -= ${i1[u1]} * ${a1}`;return`${s1}; ${l1};`}).join("");return t1=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${_g[0]}, ${_g[1]}));
          int index = resTexRC.y * ${_g[0]} + resTexRC.x;
          ${o1}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(t1)}getOutputUnpacked6DCoords(e1,_g){let t1="",r1=e1.length,n1=null;r1<2&&(n1=[]),n1=new Array(r1-1),n1[r1-2]=e1[r1-1];for(let a1=r1-3;a1>=0;--a1)n1[a1]=n1[a1+1]*e1[a1+1];let i1=["r","c","d","d2","d3","d4"],o1=n1.map((a1,u1)=>{let s1=`int ${i1[u1]} = index / ${a1}`,l1=u1===n1.length-1?`int ${i1[u1+1]} = index - ${i1[u1]} * ${a1}`:`index -= ${i1[u1]} * ${a1}`;return`${s1}; ${l1};`}).join("");return t1=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${_g[0]}, ${_g[1]}));
         int index = resTexRC.y * ${_g[0]} + resTexRC.x;
         ${o1}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(t1)}getCommonUtilFuncs(){let e1={},_g="uvFromFlat";e1[_g]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),_g="packedUVfrom1D",e1[_g]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),_g="packedUVfrom2D",e1[_g]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),_g="packedUVfrom3D",e1[_g]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),_g="sampleTexture";let t1=H(this.context.glContext.version);return e1[_g]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${t1.texture2D}(textureSampler, uv).r;
        }`),e1}getInputsSamplingSnippets(){let e1={},_g=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((t1,r1)=>{let n1=this.context.inputTextureLayouts[r1],i1=Yn$1(t1);n1.isPacked?e1[i1]=this.getPackedSamplerFromInput(i1,t1,n1):e1[i1]=this.getUnpackedSamplerFromInput(i1,t1,n1);let o1=Gu$1(t1);n1.unpackedShape.length<=_g.unpackedShape.length&&(n1.isPacked?e1[o1]=this.getPackedSamplerAtOutputCoords(o1,n1,_g,t1):e1[o1]=this.getUnpackedSamplerAtOutputCoords(o1,n1,_g,t1))}),e1}getPackedSamplerAtOutputCoords(e1,_g,t1,r1){let n1=_g.unpackedShape,i1=t1.unpackedShape,o1=Yn$1(r1),a1=n1.length,u1=i1.length,s1=Ze$1.getBroadcastDims(n1,i1),l1=Qe(u1),c1=u1-a1,d1,h1=Dt$1();a1===0?d1="":u1<2&&s1.length>=1?d1="coords = 0;":d1=s1.map(E1=>`coords.${h1[E1+c1]} = 0;`).join(`
`);let f1="";u1<2&&a1>0?f1="coords":f1=n1.map((E1,T1)=>`coords.${h1[T1+c1]}`).join(", ");let g1="return outputValue;",v1=U$2.size(n1)===1,$1=U$2.size(i1)===1;if(a1===1&&!v1&&!$1)g1=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(v1&&!$1)u1===1?g1=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:g1=`
          return vec4(outputValue.x);
        `;else if(s1.length){let E1=a1-2,T1=a1-1;s1.indexOf(E1)>-1&&s1.indexOf(T1)>-1?g1="return vec4(outputValue.x);":s1.indexOf(E1)>-1?g1="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s1.indexOf(T1)>-1&&(g1="return vec4(outputValue.xx, outputValue.zz);")}let y1=`
        int lastDim = coords.${h1[u1-1]};
        coords.${h1[u1-1]} = coords.${h1[u1-2]};
        coords.${h1[u1-2]} = lastDim;
      `,_1=`
      vec4 ${e1}() {
        ${l1} coords = getOutputCoords();
        ${y1}
        ${d1}
        vec4 outputValue = ${o1}(${f1});
        ${g1}
      }
    `;return new R(_1,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(e1,_g,t1,r1){let n1=[t1.width,t1.height],i1=[_g.width,_g.height],o1=_g.unpackedShape.length,a1=t1.unpackedShape.length,u1=_g.unpackedShape,s1=t1.unpackedShape,l1=Yn$1(r1);if(o1===a1&&hr$1.arraysEqual(i1,n1)){let y1=`
          float ${e1}() {
            return sampleTexture(${r1}, TexCoords);
          }
        `;return new R(y1,["coordinates.sampleTexture"])}let c1=Qe(a1),d1=Ze$1.getBroadcastDims(u1,s1),h1=a1-o1,f1,g1=Dt$1();o1===0?f1="":a1<2&&d1.length>=1?f1="coords = 0;":f1=d1.map(y1=>`coords.${g1[y1+h1]} = 0;`).join(`
`);let v1="";a1<2&&o1>0?v1="coords":v1=_g.unpackedShape.map((y1,_1)=>`coords.${g1[_1+h1]}`).join(", ");let $1=`
        float ${e1}() {
          ${c1} coords = getOutputCoords();
          ${f1}
          return ${l1}(${v1});
        }
      `;return new R($1,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(e1,_g,t1){switch(t1.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e1,_g);case 1:return this.getPackedSampler1D(e1,_g,t1);case 2:return this.getPackedSampler2D(e1,_g,t1);case 3:return this.getPackedSampler3D(e1,_g,t1);default:return this.getPackedSamplerND(e1,_g,t1)}}getUnpackedSamplerFromInput(e1,_g,t1){let r1=t1.unpackedShape;switch(r1.length){case 0:return this.getUnpackedSamplerScalar(e1,_g,t1);case 1:return this.getUnpackedSampler1D(e1,_g,t1);case 2:return this.getUnpackedSampler2D(e1,_g,t1);case 3:return this.getUnpackedSampler3D(e1,_g,t1);case 4:return this.getUnpackedSampler4D(e1,_g,t1);case 5:return this.getUnpackedSampler5D(e1,_g,t1);case 6:return this.getUnpackedSampler6D(e1,_g,t1);default:throw new Error(`Unsupported dimension ${r1.length}-D`)}}getPackedSamplerScalar(e1,_g){let t1=H(this.context.glContext.version),r1=`
          vec4 ${e1}() {
            return ${t1.texture2D}(${_g}, halfCR);
          }
        `;return new R(r1)}getPackedSampler1D(e1,_g,t1){let r1=[t1.width,t1.height],n1=[r1[1],r1[0]],i1=H(this.context.glContext.version),o1=`vec4 ${e1}(int index) {
      vec2 uv = packedUVfrom1D(
      ${n1[0]}, ${n1[1]}, index);
      return ${i1.texture2D}(${_g}, uv);
    }`;return new R(o1,["coordinates.packedUVfrom1D"])}getPackedSampler2D(e1,_g,t1){let r1=t1.unpackedShape,n1=[t1.width,t1.height],i1=H(this.context.glContext.version),o1=n1[0],a1=n1[1];if(n1!=null&&hr$1.arraysEqual(r1,n1)){let c1=`vec4 ${e1}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a1}.0, ${o1}.0);
        return ${i1.texture2D}(${_g}, uv);
      }`;return new R(c1)}let u1=n1,s1=Math.ceil(r1[1]/2),l1=`vec4 ${e1}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u1[1]}, ${u1[0]}, ${s1}, row, col);
      return ${i1.texture2D}(${_g}, uv);
    }`;return new R(l1,["coordinates.packedUVfrom2D"])}getPackedSampler3D(e1,_g,t1){let r1=t1.unpackedShape,n1=[t1.width,t1.height],i1=[n1[0],n1[1]],o1=H(this.context.glContext.version);if(r1[0]===1){let d1=r1.slice(1),h1=[1,2],f1=$r(r1,d1),g1=["b","row","col"],v1=JSON.parse(JSON.stringify(t1));v1.unpackedShape=f1;let $1=this.getPackedSamplerFromInput(e1,_g,v1),y1=`${$1.routineBody}
      vec4 ${e1}(int b, int row, int col) {
        return ${e1}(${kr$1(g1,h1)});
      } `;return new R(y1,$1.dependencies)}let a1=i1[0],u1=i1[1],s1=Math.ceil(r1[2]/2),l1=s1*Math.ceil(r1[1]/2),c1=`vec4 ${e1}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u1}, ${a1}, ${l1}, ${s1}, b, row, col);
      return ${o1.texture2D}(${_g}, uv);}`;return new R(c1,["coordinates.packedUVfrom3D"])}getPackedSamplerND(e1,_g,t1){let r1=t1.unpackedShape,n1=r1.length,i1=[t1.width,t1.height],o1=H(this.context.glContext.version),a1=[i1[0],i1[1]],u1=a1[1],s1=a1[0],l1=Math.ceil(r1[n1-1]/2),c1=l1*Math.ceil(r1[n1-2]/2),d1="int b, int row, int col",h1=`b * ${c1} + (row / 2) * ${l1} + (col / 2)`;for(let g1=2;g1<n1-1;g1++)d1=`int b${g1}, `+d1,c1*=r1[n1-g1-1],h1=`b${g1} * ${c1} + `+h1;let f1=`vec4 ${e1}(${d1}) {
      int index = ${h1};
      int texR = index / ${s1};
      int texC = index - texR * ${s1};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s1}, ${u1});
      return ${o1.texture2D}(${_g}, uv);
    }`;return new R(f1)}getUnpackedSamplerScalar(e1,_g,t1){let[r1,n1]=[t1.width,t1.height];if(r1===1&&n1===1){let o1=`
          float ${e1}() {
            return sampleTexture(${_g}, halfCR);
          }
        `;return new R(o1,["coordinates.sampleTexture"])}let i1=`
        float ${e1}() {
          int offset_${_g} = coordsToOffset(TexCoords, ${r1}, ${n1});
          vec2 uv = uvFromFlat(${r1}, ${n1}, offset_${_g});
          return sampleTexture(${_g}, uv);
        }
      `;return new R(i1,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(e1,_g,t1){let r1=t1.width,n1=t1.height;if(n1===1&&r1===1){let o1=`
        float ${e1}(int index) {
          return sampleTexture(${_g}, halfCR);
        }
      `;return new R(o1,["coordinates.sampleTexture"])}if(n1===1){let o1=`
          float ${e1}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${r1}.0, 0.5);
            return sampleTexture(${_g}, uv);
          }
        `;return new R(o1,["coordinates.sampleTexture"])}if(r1===1){let o1=`
          float ${e1}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${n1}.0);
            return sampleTexture(${_g}, uv);
          }
        `;return new R(o1,["coordinates.sampleTexture"])}let i1=`
        float ${e1}(int index) {
          vec2 uv = uvFromFlat(${r1}, ${n1}, index);
          return sampleTexture(${_g}, uv);
        }
      `;return new R(i1,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(e1,_g,t1){let r1=t1.unpackedShape,n1=[t1.height,t1.width];if(n1!=null&&hr$1.arraysEqual(r1,n1)){let c1=n1[1],d1=n1[0],h1=`
          float ${e1}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${c1}.0, ${d1}.0);
            return sampleTexture(${_g}, uv);
          }
        `;return new R(h1,["coordinates.sampleTexture"])}let{newShape:i1,keptDims:o1}=Mr(r1),a1=i1;if(a1.length<r1.length){let c1=$r(r1,a1),d1=JSON.parse(JSON.stringify(t1));d1.unpackedShape=c1;let h1=["col","row"],f1=`
          ${this.getUnpackedSamplerFromInput(e1,_g,d1).routineBody}
          float ${e1}(int row, int col) {
            return ${e1}(${kr$1(h1,o1)});
          }
        `;return new R(f1,["coordinates.sampleTexture"])}let u1=n1[1],s1=n1[0];if(s1===1){let c1=`
          float ${e1}(int row, int col) {
            int offset_${_g} = coordsToOffset(TexCoords, ${u1}, ${s1});
            float index = dot(vec3(row, col, offset_${_g}), vec3(${r1[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${u1}.0);
            return sampleTexture(${_g}, uv);
          }
        `;return new R(c1,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(u1===1){let c1=`
          float ${e1}(int row, int col) {
            int offset_${_g} = coordsToOffset(TexCoords, ${u1}, ${s1});
            float index = dot(vec3(row, col, offset_${_g}), vec3(${r1[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${s1}.0, 0.5);
            return sampleTexture(${_g}, uv);
          }
        `;return new R(c1,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let l1=`
        float ${e1}(int row, int col) {
          int index = col * ${r1[1]} + row;
          vec2 uv = uvFromFlat(${u1}, ${s1}, index);
          return sampleTexture(${_g}, uv);
        }
      `;return new R(l1,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(e1,_g,t1){let r1=t1.unpackedShape,n1=r1[1]*r1[2],i1=r1[2],{newShape:o1,keptDims:a1}=Mr(r1),u1=o1;if(u1.length<r1.length){let d1=$r(r1,u1),h1=["batch","col","row"],f1=JSON.parse(JSON.stringify(t1));f1.unpackedShape=d1;let g1=this.getUnpackedSamplerFromInput(e1,_g,f1),v1=a1.reverse(),$1=`
          ${g1.routineBody}
          float ${e1}(int batch, int row, int col) {
            return ${e1}(${kr$1(h1,v1)});
          }
        `;return new R($1,g1.dependencies)}let s1=t1.width,l1=t1.height,c1=`
          float ${e1}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${n1} + col * ${i1} + row;
            vec2 uv = uvFromFlat(${s1}, ${l1}, index);
            return sampleTexture(${_g}, uv);
          }
      `;return new R(c1,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(e1,_g,t1){let r1=t1.unpackedShape,n1=r1[3],i1=r1[2]*n1,o1=r1[1]*i1,a1=t1.width,u1=t1.height,s1=`
        float ${e1}(int row, int col, int depth, int depth2) {
          int index = row * ${o1} + col * ${i1} +
              depth2 * ${n1} + depth;
          vec2 uv = uvFromFlat(${a1}, ${u1}, index);
          return sampleTexture(${_g}, uv);
        }
      `;return new R(s1,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(e1,_g,t1){let r1=t1.unpackedShape,n1=r1[4],i1=r1[3]*n1,o1=r1[2]*i1,a1=r1[1]*o1,{newShape:u1,keptDims:s1}=Mr(r1);if(u1.length<r1.length){let h1=$r(r1,u1),f1=["row","col","depth","depth2","depth3"],g1=JSON.parse(JSON.stringify(t1));g1.unpackedShape=h1;let v1=`
          ${this.getUnpackedSamplerFromInput(e1,_g,g1).routineBody}
          float ${e1}(int row, int col, int depth, int depth2, int depth3) {
            return ${e1}(${kr$1(f1,s1)});
          }
        `;return new R(v1,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let l1=t1.width,c1=t1.height,d1=`
        float ${e1}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${a1} + col * ${o1} + depth * ${i1} +
          depth3 * ${n1} + depth2;
          vec2 uv = uvFromFlat(${l1}, ${c1}, index);
          return sampleTexture(${_g}, uv);
        }
      `;return new R(d1,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(e1,_g,t1){let r1=t1.unpackedShape,n1=r1[5],i1=r1[4]*n1,o1=r1[3]*i1,a1=r1[2]*o1,u1=r1[1]*a1,{newShape:s1,keptDims:l1}=Mr(r1);if(s1.length<r1.length){let f1=$r(r1,s1),g1=["row","col","depth","depth2","depth3","depth4"],v1=JSON.parse(JSON.stringify(t1));v1.unpackedShape=f1;let $1=`
            ${this.getUnpackedSamplerFromInput(e1,_g,v1).routineBody}
            float ${e1}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${e1}(${kr$1(g1,l1)});
            }
          `;return new R($1,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let c1=t1.width,d1=t1.height,h1=`
          float ${e1}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${u1} + col * ${a1} + depth * ${o1} +
            depth2 * ${i1} + depth3 * ${n1} + depth4;
            vec2 uv = uvFromFlat(${c1}, ${d1}, index);
            return sampleTexture(${_g}, uv);
          }
        `;return new R(h1,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let e1=this.context.outputTextureLayout,_g=e1.shape.length,t1=e1.strides,r1=e1.width,n1=e1.height,i1=[];for(let a1=0;a1<_g-1;++a1)i1.push(`
        c[${a1}] = offset / ${t1[a1]};`),i1.push(`
        offset -= c[${a1}] * ${t1[a1]};`);i1.push(`
        c[${_g-1}] = offset;`);let o1=`
      void toVec(vec2 texCoords, out int c[${_g}]) {
        int offset = coordsToOffset(texCoords, ${r1}, ${n1});
        ${i1.join("")}
      }
      void toVec(int offset, out int c[${_g}]) {
        ${i1.join("")}
      }
    `;return{toVec:new R(o1,["coordinates.coordsToOffset"])}}valueFrom(){let e1={};return this.context.programInfo.inputNames.forEach((_g,t1)=>{let r1=this.context.inputTextureLayouts[t1],n1=(r1.unpackedShape.length>0?r1.unpackedShape:r1.shape).length,i1=`_${_g}`;e1[i1]=new R(this.getValueFromSingle(_g,n1,r1.width,r1.height,!1),[`shapeUtils.indicesToOffset${i1}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),i1=i1+"_T",e1[i1]=new R(this.getValueFromSingle(_g,n1,r1.width,r1.height,!0),[`shapeUtils.indicesToOffset${i1}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),e1}getValueFromSingle(e1,_g,t1,r1,n1){let i1=`_${e1}`;n1&&(i1=i1+"_T");let o1=H(this.context.glContext.version);return`
        float ${i1}(int m[${_g}]) {
          int offset = indicesToOffset${i1}(m);
          vec2 coords = offsetToCoords(offset, ${t1}, ${r1});
          float value = getColorAsFloat(${o1.texture2D}(${e1}, coords));
          return value;
        }
        `}getPackedValueFrom(e1,_g,t1,r1,n1){let i1=`_${e1}_Pack`;n1&&(i1=i1+"_T");let o1=H(this.context.glContext.version);return`
        vec4 ${i1}(int m[${_g}]) {
          int offset = indicesToOffset_${e1}(m);
          vec2 coords = offsetToCoords(offset, ${t1}, ${r1});
          return ${o1.texture2D}(${e1}, coords);
        }
        `}}}),fo$1,tp$1=L$1(()=>{Wt$1(),fo$1=class iS extends dt{constructor(_g){super(_g)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let _g=iS.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${_g}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let _g=iS.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${_g}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let _g=new ArrayBuffer(4),t1=new Uint32Array(_g),r1=new Uint8Array(_g);if(t1[0]=3735928559,r1[0]===239)return!0;if(r1[0]===222)return!1;throw new Error("unknown endianness")}}}),co$1,rp$1=L$1(()=>{Wt$1(),we$1(),co$1=class extends dt{constructor(e1){super(e1)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let e1=H(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${e1.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),po$1,np$1=L$1(()=>{Wt$1(),po$1=class Hw extends dt{constructor(_g){super(_g)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let _g=this.context.outputTextureLayout.shape.length,t1={};return this.context.programInfo.inputNames.forEach((r1,n1)=>{let i1=this.context.inputTextureLayouts[n1].unpackedShape;if(i1.length<=_g){let o1=i1.length,a1=_g-o1,u1=`bcastIndices_${r1}`,s1="";for(let c1=0;c1<o1;++c1)s1+=`
          realIndices[${c1}] = int( mod(float(bcastedIndices[${a1+c1}]), ${i1[c1]}.0) );
          `;let l1=`
        void ${u1} (int bcastedIndices[${_g}], out int realIndices[${o1}]) {
          ${s1}
        }
        `;t1[u1]=new R(l1)}}),t1}bcastMatmulIndex(){let _g=this.context.outputTextureLayout.shape.length,t1={};return this.context.programInfo.inputNames.forEach((r1,n1)=>{let i1=this.context.inputTextureLayouts[n1].shape;if(!(i1.length<2||i1.length>_g)){let o1=i1.length,a1=_g-o1,u1=`bcastMatmulIndices_${r1}`,s1="";for(let c1=0;c1<o1-2;++c1)s1+=`
          realIndices[${c1}] = int( mod(float(bcastedIndices[${a1+c1}]), ${i1[c1]}.0) );
          `;let l1=`
        void ${u1}(int bcastedIndices[${_g}], out int realIndices[${o1}]) {
          ${s1}
          realIndices[${o1-1}] = bcastedIndices[${_g-1}];
          realIndices[${o1-2}] = bcastedIndices[${_g-2}];
        }
        `;t1[u1]=new R(l1)}}),t1}indicesToOffset(){let _g={};return this.context.programInfo.inputNames.forEach((t1,r1)=>{let n1=this.context.inputTextureLayouts[r1].shape,i1=this.context.inputTextureLayouts[r1].strides,o1=n1.length,a1=`indicesToOffset_${t1}`;_g[a1]=new R(Hw.indexToOffsetSingle(a1,o1,i1)),a1=`indicesToOffset_${t1}_T`,_g[a1]=new R(Hw.indexToOffsetSingle(a1,o1,i1.slice().reverse()))}),_g}static indexToOffsetSingle(_g,t1,r1){let n1="";for(let i1=t1-1;i1>=0;--i1)n1+=`
        offset += indices[${i1}] * ${r1[i1]};
        `;return`
      int ${_g}(int indices[${t1}]) {
        int offset = 0;
        ${n1}
        return offset;
      }
      `}offsetToIndices(){let _g={};return this.context.programInfo.inputNames.forEach((t1,r1)=>{let n1=this.context.inputTextureLayouts[r1].shape,i1=this.context.inputTextureLayouts[r1].strides,o1=n1.length,a1=`offsetToIndices_${t1}`;_g[a1]=new R(Hw.offsetToIndicesSingle(a1,o1,i1)),a1=`offsetToIndices_${t1}_T`,_g[a1]=new R(Hw.offsetToIndicesSingle(a1,o1,i1.slice().reverse()))}),_g}static offsetToIndicesSingle(_g,t1,r1){let n1=[];for(let i1=0;i1<t1-1;++i1)n1.push(`
      indices[${i1}] = offset / ${r1[i1]};`),n1.push(`
        offset -= indices[${i1}] * ${r1[i1]};`);return n1.push(`
      indices[${t1-1}] = offset;`),`
      void ${_g}(int offset, out int indices[${t1}]) {
        ${n1.join("")}
      }
      `}incrementIndices(){let _g={};return this.context.programInfo.inputNames.forEach((t1,r1)=>{let n1=this.context.inputTextureLayouts[r1].shape,i1=n1.length,o1=`incrementIndices_${t1}`,a1="";for(let s1=0;s1<i1;++s1)a1+=`
        shape[${s1}] = ${n1[s1]};`;let u1=`
        void ${o1}(int axis, out int indices[${i1}]) {
          int shape[${i1}];
          ${a1};
          for(int i = ${i1} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;_g[o1]=new R(u1)}),_g}}}),ho$1,op$1=L$1(()=>{Wt$1(),ho$1=class extends dt{constructor(e1){super(e1)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let e1=this.context.outputTextureLayout.shape.length,_g={add:"+=",sub:"-=",mul:"*=",div:"/="},t1={};for(let r1 in _g){let n1=`${r1}Vec`,i1="";for(let a1=0;a1<e1;++a1)i1+=`
          dest[${a1}] ${_g[r1]} src[${a1}];
          `;let o1=`
        void ${n1}(int src[${e1}], out int dest[${e1}]) {
          ${i1}
        }
        `;t1[n1]=new R(o1)}return t1}copyVec(){let e1=this.context.outputTextureLayout.shape.length,_g="";for(let r1=0;r1<e1;++r1)_g+=`
        dest[${r1}] = src[${r1}];
        `;let t1=`
      void copyVec(int src[${e1}], out int dest[${e1}]) {
        ${_g}
      }
      `;return{copyVec:new R(t1)}}setVecItem(){let e1=this.context.outputTextureLayout.shape.length,_g=`
        if(index < 0)
            index =${e1} + index;
        if (index == 0)
            m[0] = value;
        `;for(let r1=1;r1<e1-1;++r1)_g+=`
        else if (index == ${r1})
            m[${r1}] = value;
            `;_g+=`
        else
            m[${e1-1}] = value;
        `;let t1=`
      void setVecItem(out int m[${e1}], int index, int value) {
        ${_g}
      }
        `;return{setVecItem:new R(t1)}}getVecItem(){let e1=this.context.outputTextureLayout.shape.length,_g=`
        if(index < 0)
            index = ${e1} + index;
        if (index == 0)
            return m[0];
      `;for(let r1=1;r1<e1-1;++r1)_g+=`
        else if (index == ${r1})
            return m[${r1}];
      `;_g+=`
        else
            return m[${e1-1}];
        `;let t1=`
      int getVecItem(int m[${e1}], int index) {
        ${_g}
      }
    `;return{getVecItem:new R(t1)}}}}),Wi$1,ip$1=L$1(()=>{ep$1(),tp$1(),rp$1(),np$1(),op$1(),Wi$1={encoding:fo$1,fragcolor:co$1,vec:ho$1,shapeUtils:po$1,coordinates:lo$1}}),mo$1,ap$1=L$1(()=>{Wt$1(),Zc$1(),ip$1(),we$1(),mo$1=class{constructor(e1,_g,t1,r1){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn$1(e1,_g,t1,r1),Object.keys(Wi$1).forEach(i1=>{let o1=new Wi$1[i1](this.context);this.libs[i1]=o1});let n1=this.glslLibRoutineDependencyGraph;for(let i1 in this.libs){let o1=this.libs[i1].getFunctions();for(let a1 in o1){let u1=i1+"."+a1,s1;n1[u1]?(s1=n1[u1],s1.routineBody=o1[a1].routineBody):(s1=new cn(u1,o1[a1].routineBody),n1[u1]=s1);let l1=o1[a1].dependencies;if(l1)for(let c1=0;c1<l1.length;++c1)if(n1[l1[c1]])s1.addDependency(n1[l1[c1]]);else{let d1=new cn(l1[c1]);n1[l1[c1]]=d1,s1.addDependency(d1)}}}}preprocess(){let e1=this.context.programInfo,_g=e1.shaderSource;return this.context.programInfo.hasMain||(_g=`${_g}
      ${Mu$1(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),_g=Jc$1(_g),`${Ru$1(this.context.glContext.version)}
    ${this.getUniforms(e1.inputNames,e1.variables)}
    ${this.getImports(_g)}
    ${_g}`}getImports(e1){let _g=this.selectGlslLibRoutinesToBeIncluded(e1);if(_g.length===0)return"";let t1="";for(let r1=0;r1<_g.length;++r1)if(_g[r1].routineBody)t1+=_g[r1].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${_g[r1].name}`);return t1}selectGlslLibRoutinesToBeIncluded(e1){let _g=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(t1=>{let r1=t1.split(".")[1];e1.indexOf(r1)!==-1&&_g.push(this.glslLibRoutineDependencyGraph[t1])}),Qn$1.returnOrderedNodes(_g)}getUniforms(e1,_g){let t1=[];if(e1)for(let r1 of e1)t1.push(`uniform sampler2D ${r1};`);if(_g)for(let r1 of _g)t1.push(`uniform ${r1.type} ${r1.name}${r1.arrayLength?`[${r1.arrayLength}]`:""};`);return t1.join(`
`)}}}),bo$1,sp$1=L$1(()=>{Ot$1(),lt$1(),ap$1(),we$1(),bo$1=class{constructor(e1,_g,t1){this.profiler=e1,this.glContext=_g,this.textureLayoutStrategy=t1,this.repo=new Map,this.attributesBound=!1}getArtifact(e1){return this.repo.get(e1)}setArtifact(e1,_g){this.repo.set(e1,_g)}run(e1,_g,t1){this.profiler.event("op",`ProgramManager.run ${e1.programInfo.name??"unknown kernel"}`,()=>{let r1=this.glContext.gl,n1=e1.program;r1.useProgram(n1);try{this.bindOutput(t1),this.attributesBound||this.bindAttributes(e1.attribLocations),this.bindUniforms(e1.uniformLocations,e1.programInfo.variables??[],_g)}catch(i1){throw ce.error("ProgramManager",e1.programInfo.shaderSource),i1}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(e1=>this.glContext.deleteProgram(e1.program))}build(e1,_g,t1){return this.profiler.event("backend","ProgramManager.build",()=>{let r1=new mo$1(this.glContext,e1,_g,t1),n1=r1.preprocess(),i1=this.compile(n1);return{programInfo:e1,program:i1,uniformLocations:this.getUniformLocations(i1,r1.context.programInfo.inputNames,r1.context.programInfo.variables),attribLocations:this.getAttribLocations(i1)}})}compile(e1){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let r1=Nu$1(this.glContext.version);this.vertexShader=this.glContext.compileShader(r1,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${e1}
`);let _g=this.glContext.compileShader(e1,this.glContext.gl.FRAGMENT_SHADER),t1=this.glContext.createProgram(this.vertexShader,_g);return this.glContext.deleteShader(_g),t1}bindOutput(e1){let _g=e1.width,t1=e1.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${_g}/${t1}, shape=${e1.shape}, type=${e1.tensor.type}`),this.glContext.attachFramebuffer(e1.texture,_g,t1)}bindAttributes(e1){let _g=e1.position,t1=e1.textureCoord;this.glContext.setVertexAttributes(_g,t1),this.attributesBound=!0}bindUniforms(e1,_g,t1){var i1;let r1=this.glContext.gl,n1=0;for(let{name:o1,type:a1,location:u1,arrayLength:s1}of e1){let l1=(i1=_g.find(c1=>c1.name===o1))==null?void 0:i1.data;if(a1!=="sampler2D"&&!l1)throw new Error(`variable '${o1}' does not have data defined in program info`);switch(a1){case"sampler2D":this.bindTexture(t1[n1],u1,n1),n1++;break;case"float":s1?r1.uniform1fv(u1,l1):r1.uniform1f(u1,l1);break;case"int":s1?r1.uniform1iv(u1,l1):r1.uniform1i(u1,l1);break;default:throw new Error(`Uniform not implemented: ${a1}`)}}}bindTexture(e1,_g,t1){this.glContext.bindTextureToUniform(e1.texture,t1,_g)}getAttribLocations(e1){return{position:this.getAttribLocation(e1,"position"),textureCoord:this.getAttribLocation(e1,"textureCoord")}}getUniformLocations(e1,_g,t1){let r1=[];if(_g)for(let n1 of _g)r1.push({name:n1,type:"sampler2D",location:this.getUniformLocation(e1,n1)});if(t1)for(let n1 of t1)r1.push({...n1,location:this.getUniformLocation(e1,n1.name)});return r1}getUniformLocation(e1,_g){let t1=this.glContext.gl.getUniformLocation(e1,_g);if(t1===null)throw new Error(`Uniform ${_g} not found.`);return t1}getAttribLocation(e1,_g){return this.glContext.gl.getAttribLocation(e1,_g)}}}),go$1,up$1=L$1(()=>{lt$1(),ln(),go$1=class{constructor(e1,_g,t1,r1){this.glContext=e1,this.layoutStrategy=_g,this.profiler=t1,this.config=r1,this.pendingRead=new Map,r1.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(e1,_g,t1,r1){let n1=this.toEncoderType(e1),i1=this.glContext.getEncoder(n1,_g.channels||1,r1);if(_g.isPacked&&r1===1)throw new Error("not implemented");let o1=_g.width,a1=_g.height,u1,s1;if(this.config.reuseTextures){u1=`${o1}x${a1}_${i1.format}_${i1.internalFormat}_${i1.textureType}`,s1=this.inUseTextures.get(u1),s1||(s1=[],this.inUseTextures.set(u1,s1));let c1=this.idleTextures.get(u1);if(c1&&c1.length>0){let d1=c1.pop();return s1.push(d1),r1===1&&this.glContext.updateTexture(d1,o1,a1,i1,this.toTextureData(e1,t1)),d1}}ce.verbose("TextureManager",`Creating new texture of size ${_g.width}x${_g.height}`);let l1=this.glContext.allocateTexture(o1,a1,i1,this.toTextureData(e1,t1));return this.config.reuseTextures&&(s1.push(l1),this.textureLookup.set(l1,u1)),l1}readTexture(e1,_g,t1){return t1||(t1=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let r1=e1.shape.reduce((i1,o1)=>i1*o1)*t1,n1=this.glContext.readTexture(e1.texture,e1.width,e1.height,r1,this.toEncoderType(_g),t1);return this.toTensorData(_g,n1)})}async readTextureAsync(e1,_g,t1){let r1=e1.tensor.dataId;if(t1||(t1=1),this.pendingRead.has(r1)){let n1=this.pendingRead.get(r1);return new Promise(i1=>n1==null?void 0:n1.push(i1))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(r1,[]);let n1=e1.shape.reduce((u1,s1)=>u1*s1)*t1;await this.glContext.createAndWaitForFence();let i1=this.glContext.readTexture(e1.texture,e1.width,e1.height,n1,this.toEncoderType(_g),t1),o1=this.toTensorData(_g,i1),a1=this.pendingRead.get(r1);return this.pendingRead.delete(r1),a1==null||a1.forEach(u1=>u1(o1)),o1})}readUint8TextureAsFloat(e1){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let _g=e1.shape.reduce((r1,n1)=>r1*n1),t1=this.glContext.readTexture(e1.texture,e1.width,e1.height,_g*4,"byte",4);return new Float32Array(t1.buffer,t1.byteOffset,_g)})}releaseTexture(e1,_g){let t1;if(this.config.reuseTextures&&(t1=this.textureLookup.get(e1.texture),t1)){_g&&this.textureLookup.delete(t1);let r1=this.inUseTextures.get(t1);if(r1){let n1=r1.indexOf(e1.texture);if(n1!==-1){r1.splice(n1,1);let i1=this.idleTextures.get(t1);i1||(i1=[],this.idleTextures.set(t1,i1)),i1.push(e1.texture)}}}(!t1||_g)&&(ce.verbose("TextureManager",`Deleting texture of size ${e1.width}x${e1.height}`),this.glContext.deleteTexture(e1.texture))}toTensorData(e1,_g){switch(e1){case"int16":return _g instanceof Int16Array?_g:Int16Array.from(_g);case"int32":return _g instanceof Int32Array?_g:Int32Array.from(_g);case"int8":return _g instanceof Int8Array?_g:Int8Array.from(_g);case"uint16":return _g instanceof Uint16Array?_g:Uint16Array.from(_g);case"uint32":return _g instanceof Uint32Array?_g:Uint32Array.from(_g);case"uint8":case"bool":return _g instanceof Uint8Array?_g:Uint8Array.from(_g);case"float32":return _g instanceof Float32Array?_g:Float32Array.from(_g);case"float64":return _g instanceof Float64Array?_g:Float64Array.from(_g);default:throw new Error(`TensorData type ${e1} is not supported`)}}toTextureData(e1,_g){if(_g)return _g instanceof Float32Array?_g:new Float32Array(_g)}toEncoderType(e1){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo$1,lp$1=L$1(()=>{lt$1(),_s$1(),el$1(),Xc$1(),sp$1(),Vi(),up$1(),yo$1=class{constructor(e1,_g){this.backend=e1,this.context=_g,this.layoutStrategy=new uo$1(e1.glContext.maxTextureSize),this.programManager=new bo$1(this.context.profiler,e1.glContext,this.layoutStrategy),this.textureManager=new go$1(e1.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:e1.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=e1.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn$1(this)}onGraphInitialized(e1){let _g=e1.getValues().filter(t1=>t1.from===-1&&t1.tensor).map(t1=>t1.tensor.dataId);this.initializers=new Set(_g)}isInitializer(e1){return this.initializers?this.initializers.has(e1):!1}addInitializer(e1){this.initializers.add(e1)}getTextureData(e1,_g){return _g?this.packedTextureDataCache.get(e1):this.unpackedTextureDataCache.get(e1)}setTextureData(e1,_g,t1=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),t1?this.packedTextureDataCache.set(e1,_g):this.unpackedTextureDataCache.set(e1,_g)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e1=>this.textureManager.releaseTexture(e1,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e1=>this.textureManager.releaseTexture(e1,!0)),this.unpackedTextureDataCache=new Map}resolve(e1,_g,t1){let r1=vs$1(e1,_g,Yc$1);return{impl:r1.opImpl,context:r1.opInit?r1.opInit(e1,t1):e1}}}});function jb(e1){let _g=0;for(;_g<e1.length&&e1[_g]();++_g);return _g-1}var hn,fp$1=L$1(()=>{Ot$1(),ln(),ln(),Bt$1(),hn=class{constructor(e1,_g){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e1,this.version=_g,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(e1,_g,t1,r1){let n1=this.gl,i1=n1.createTexture();n1.bindTexture(n1.TEXTURE_2D,i1),n1.texParameteri(n1.TEXTURE_2D,n1.TEXTURE_MIN_FILTER,n1.NEAREST),n1.texParameteri(n1.TEXTURE_2D,n1.TEXTURE_MAG_FILTER,n1.NEAREST),n1.texParameteri(n1.TEXTURE_2D,n1.TEXTURE_WRAP_S,n1.CLAMP_TO_EDGE),n1.texParameteri(n1.TEXTURE_2D,n1.TEXTURE_WRAP_T,n1.CLAMP_TO_EDGE);let o1=r1?t1.encode(r1,e1*_g):null;return n1.texImage2D(n1.TEXTURE_2D,0,t1.internalFormat,e1,_g,0,t1.format,t1.textureType,o1),this.checkError(),i1}updateTexture(e1,_g,t1,r1,n1){let i1=this.gl;i1.bindTexture(i1.TEXTURE_2D,e1);let o1=r1.encode(n1,_g*t1);i1.texSubImage2D(i1.TEXTURE_2D,0,0,0,_g,t1,r1.format,r1.textureType,o1),this.checkError()}attachFramebuffer(e1,_g,t1){let r1=this.gl;r1.bindTexture(r1.TEXTURE_2D,e1),r1.bindFramebuffer(r1.FRAMEBUFFER,this.framebuffer),r1.framebufferTexture2D(r1.FRAMEBUFFER,r1.COLOR_ATTACHMENT0,r1.TEXTURE_2D,e1,0),this.checkError(),r1.viewport(0,0,_g,t1),r1.scissor(0,0,_g,t1)}readTexture(e1,_g,t1,r1,n1,i1){let o1=this.gl;i1||(i1=1),this.frameBufferBound||this.attachFramebuffer(e1,_g,t1);let a1=this.getEncoder(n1,i1),u1=a1.allocate(_g*t1);return o1.bindTexture(o1.TEXTURE_2D,e1),o1.framebufferTexture2D(o1.FRAMEBUFFER,o1.COLOR_ATTACHMENT0,o1.TEXTURE_2D,e1,0),o1.readPixels(0,0,_g,t1,o1.RGBA,a1.textureType,u1),this.checkError(),a1.decode(u1,r1)}isFramebufferReady(){return!0}getActiveTexture(){let e1=this.gl;return`TEXTURE${e1.getParameter(this.gl.ACTIVE_TEXTURE)-e1.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(e1,_g){let t1=this.gl;t1.vertexAttribPointer(e1,3,t1.FLOAT,!1,20,0),t1.enableVertexAttribArray(e1),_g!==-1&&(t1.vertexAttribPointer(_g,2,t1.FLOAT,!1,20,12),t1.enableVertexAttribArray(_g)),this.checkError()}createProgram(e1,_g){let t1=this.gl,r1=t1.createProgram();return t1.attachShader(r1,e1),t1.attachShader(r1,_g),t1.linkProgram(r1),r1}compileShader(e1,_g){let t1=this.gl,r1=t1.createShader(_g);if(!r1)throw new Error(`createShader() returned null with type ${_g}`);if(t1.shaderSource(r1,e1),t1.compileShader(r1),t1.getShaderParameter(r1,t1.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${t1.getShaderInfoLog(r1)}
Shader source:
${e1}`);return r1}deleteShader(e1){this.gl.deleteShader(e1)}bindTextureToUniform(e1,_g,t1){let r1=this.gl;r1.activeTexture(r1.TEXTURE0+_g),this.checkError(),r1.bindTexture(r1.TEXTURE_2D,e1),this.checkError(),r1.uniform1i(t1,_g),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let e1=this.gl,_g=e1.getError(),t1="";switch(_g){case e1.NO_ERROR:return;case e1.INVALID_ENUM:t1="INVALID_ENUM";break;case e1.INVALID_VALUE:t1="INVALID_VALUE";break;case e1.INVALID_OPERATION:t1="INVALID_OPERATION";break;case e1.INVALID_FRAMEBUFFER_OPERATION:t1="INVALID_FRAMEBUFFER_OPERATION";break;case e1.OUT_OF_MEMORY:t1="OUT_OF_MEMORY";break;case e1.CONTEXT_LOST_WEBGL:t1="CONTEXT_LOST_WEBGL";break;default:t1=`Unknown WebGL Error: ${_g.toString(16)}`}throw new Error(t1)}}deleteTexture(e1){this.gl.deleteTexture(e1)}deleteProgram(e1){this.gl.deleteProgram(e1)}getEncoder(e1,_g,t1=0){if(this.version===2)return new Xn$1(this.gl,_g);switch(e1){case"float":return t1===1||this.isRenderFloat32Supported?new un(this.gl,_g):new un(this.gl,_g,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn$1(this.gl,_g);default:throw new Error(`Invalid dataType: ${e1}`)}}clearActiveTextures(){let e1=this.gl;for(let _g=0;_g<this.maxTextureImageUnits;++_g)e1.activeTexture(e1.TEXTURE0+_g),e1.bindTexture(e1.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let e1=this.gl;e1.bindFramebuffer(e1.FRAMEBUFFER,null),e1.deleteFramebuffer(this.framebuffer),e1.bindBuffer(e1.ARRAY_BUFFER,null),e1.deleteBuffer(this.vertexbuffer),e1.bindBuffer(e1.ELEMENT_ARRAY_BUFFER,null),e1.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let e1=this.gl,_g=e1.createBuffer();if(!_g)throw new Error("createBuffer() returned null");let t1=this.createDefaultGeometry();return e1.bindBuffer(e1.ARRAY_BUFFER,_g),e1.bufferData(e1.ARRAY_BUFFER,t1,e1.STATIC_DRAW),this.checkError(),_g}createFramebuffer(){let e1=this.gl.createFramebuffer();if(!e1)throw new Error("createFramebuffer returned null");return e1}queryVitalParameters(){let e1=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e1.getParameter(e1.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e1.getParameter(e1.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let e1=this.gl,_g=e1.createTexture();e1.bindTexture(e1.TEXTURE_2D,_g);let t1=this.version===2?e1.RGBA32F:e1.RGBA;e1.texImage2D(e1.TEXTURE_2D,0,t1,1,1,0,e1.RGBA,e1.FLOAT,null);let r1=e1.createFramebuffer();e1.bindFramebuffer(e1.FRAMEBUFFER,r1),e1.framebufferTexture2D(e1.FRAMEBUFFER,e1.COLOR_ATTACHMENT0,e1.TEXTURE_2D,_g,0);let n1=e1.checkFramebufferStatus(e1.FRAMEBUFFER)===e1.FRAMEBUFFER_COMPLETE;return e1.bindTexture(e1.TEXTURE_2D,null),e1.bindFramebuffer(e1.FRAMEBUFFER,null),e1.deleteTexture(_g),e1.deleteFramebuffer(r1),n1}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let e1=this.gl,_g,t1,r1,n1,i1;try{_g=e1.createTexture(),t1=e1.createFramebuffer(),e1.bindTexture(e1.TEXTURE_2D,_g);let o1=this.version===2?e1.RGBA32F:e1.RGBA;return e1.texImage2D(e1.TEXTURE_2D,0,o1,1,1,0,e1.RGBA,e1.FLOAT,null),e1.bindFramebuffer(e1.FRAMEBUFFER,t1),e1.framebufferTexture2D(e1.FRAMEBUFFER,e1.COLOR_ATTACHMENT0,e1.TEXTURE_2D,_g,0),e1.enable(e1.BLEND),r1=e1.createShader(e1.VERTEX_SHADER),!r1||(e1.shaderSource(r1,"void main(){}"),e1.compileShader(r1),n1=e1.createShader(e1.FRAGMENT_SHADER),!n1)||(e1.shaderSource(n1,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),e1.compileShader(n1),i1=e1.createProgram(),!i1)?!1:(e1.attachShader(i1,r1),e1.attachShader(i1,n1),e1.linkProgram(i1),e1.useProgram(i1),e1.drawArrays(e1.POINTS,0,1),e1.getError()===e1.NO_ERROR)}finally{e1.disable(e1.BLEND),i1&&e1.deleteProgram(i1),r1&&e1.deleteShader(r1),n1&&e1.deleteShader(n1),t1&&(e1.bindFramebuffer(e1.FRAMEBUFFER,null),e1.deleteFramebuffer(t1)),_g&&(e1.bindTexture(e1.TEXTURE_2D,null),e1.deleteTexture(_g))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e1=this.gl,_g=this.disjointTimerQueryWebgl2Extension,t1=e1.createQuery();return e1.beginQuery(_g.TIME_ELAPSED_EXT,t1),t1}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e1=this.gl,_g=this.disjointTimerQueryWebgl2Extension;e1.endQuery(_g.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(e1){let _g=!1,t1=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let r1=this.gl,n1=this.disjointTimerQueryWebgl2Extension;_g=r1.getQueryParameter(e1,r1.QUERY_RESULT_AVAILABLE),t1=r1.getParameter(n1.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return _g&&!t1}getTimerResult(e1){let _g=0;if(this.version===2){let t1=this.gl;_g=t1.getQueryParameter(e1,t1.QUERY_RESULT),t1.deleteQuery(e1)}else throw new Error("WebGL1 profiling currently not supported");return _g/1e6}async waitForQueryAndGetTime(e1){return await mi$1(()=>this.isTimerResultAvailable(e1)),this.getTimerResult(e1)}async createAndWaitForFence(){let e1=this.createFence(this.gl);return this.pollFence(e1)}createFence(e1){let _g,t1=e1,r1=t1.fenceSync(t1.SYNC_GPU_COMMANDS_COMPLETE,0);return e1.flush(),r1===null?_g=()=>!0:_g=()=>{let n1=t1.clientWaitSync(r1,0,0);return n1===t1.ALREADY_SIGNALED||n1===t1.CONDITION_SATISFIED},{query:r1,isFencePassed:_g}}async pollFence(e1){return new Promise(_g=>{this.addItemToPoll(()=>e1.isFencePassed(),()=>_g())})}pollItems(){let e1=jb(this.itemsToPoll.map(_g=>_g.isDoneFn));for(let _g=0;_g<=e1;++_g){let{resolveFn:t1}=this.itemsToPoll[_g];t1()}this.itemsToPoll=this.itemsToPoll.slice(e1+1)}async addItemToPoll(e1,_g){this.itemsToPoll.push({isDoneFn:e1,resolveFn:_g}),!(this.itemsToPoll.length>1)&&await mi$1(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Hi$1(e1){let _g;if((!e1||e1==="webgl2")&&"webgl2"in Gr?_g=Gr.webgl2:(!e1||e1==="webgl")&&"webgl"in Gr&&(_g=Gr.webgl),!_g)try{let r1=Xb();_g=cp$1(r1,e1)}catch{let r1=Yb();_g=cp$1(r1,e1)}e1=e1||_g.version===1?"webgl":"webgl2";let t1=_g.gl;return Gr[e1]=_g,t1.isContextLost()?(delete Gr[e1],Hi$1(e1)):(t1.disable(t1.DEPTH_TEST),t1.disable(t1.STENCIL_TEST),t1.disable(t1.BLEND),t1.disable(t1.DITHER),t1.disable(t1.POLYGON_OFFSET_FILL),t1.disable(t1.SAMPLE_COVERAGE),t1.enable(t1.SCISSOR_TEST),t1.enable(t1.CULL_FACE),t1.cullFace(t1.BACK),_g)}function cp$1(e1,_g){let t1={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},r1,n1=t1;if((!_g||_g==="webgl2")&&(r1=e1.getContext("webgl2",n1),r1))try{return new hn(r1,2)}catch(i1){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${i1}`)}if((!_g||_g==="webgl")&&(r1=e1.getContext("webgl",n1)||e1.getContext("experimental-webgl",n1),r1))try{return new hn(r1,1)}catch(i1){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${i1}`)}throw new Error("WebGL is not supported")}function Yb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let e1=document.createElement("canvas");return e1.width=1,e1.height=1,e1}function Xb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr,pp$1=L$1(()=>{lt$1(),fp$1(),Gr={}}),To$1,dp$1=L$1(()=>{Ot$1(),lt$1(),lp$1(),pp$1(),To$1=class{get contextId(){return Z.webgl.contextId}set contextId(e1){Z.webgl.contextId=e1}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(e1){Z.webgl.matmulMaxBatchSize=e1}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(e1){Z.webgl.textureCacheMode=e1}get pack(){return Z.webgl.pack}set pack(e1){Z.webgl.pack=e1}get async(){return Z.webgl.async}set async(e1){Z.webgl.async=e1}initialize(){try{return this.glContext=Hi$1(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(e1){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${e1}`),!1}}createSessionHandler(e1){return new yo$1(this,e1)}dispose(){this.glContext.dispose()}}});async function qi$1(e1){if(e1){let _g=typeof e1=="string"?[e1]:e1;for(let t1 of _g){let r1=hp$1.get(t1);if(r1)return r1;let n1=await Jb(t1);if(n1)return n1}}else return qi$1(["webgl"]);throw new Error("no available backend to use")}async function Jb(e1){let _g=Kb;if(typeof _g[e1]<"u"&&Zb(_g[e1])){let t1=_g[e1],r1=t1.initialize();if(typeof r1=="object"&&"then"in r1&&(r1=await r1),r1)return hp$1.set(e1,t1),t1}}function Zb(e1){let _g=e1;return"initialize"in _g&&typeof _g.initialize=="function"&&"createSessionHandler"in _g&&typeof _g.createSessionHandler=="function"&&"dispose"in _g&&typeof _g.dispose=="function"}var hp$1,Kb,mp$1=L$1(()=>{dp$1(),hp$1=new Map,Kb={webgl:new To$1}}),ji$1,xo$1,bp=L$1(()=>{lt$1(),ji$1=class{constructor(e1,_g){this.op=e1,this.node=_g}},xo$1=class{constructor(e1,_g,t1){this.graph=e1,this.profiler=t1,this.initialize(_g)}initialize(e1){this.profiler.event("session","ExecutionPlan.initialize",()=>{let _g=this.graph.getNodes();if(_g.length!==e1.length)throw new Error("The size of nodes and OPs do not match.");this._ops=e1.map((t1,r1)=>new ji$1(t1,_g[r1])),this.reset(),this._starter=[],this._ops.forEach((t1,r1)=>{let n1=!0;for(let i1 of t1.node.inputs)if(!this._values[i1]&&this.graph.getInputIndices().indexOf(i1)===-1){n1=!1;break}n1&&this._starter.push(r1)})})}reset(){this._values=this.graph.getValues().map(e1=>e1.tensor)}async execute(e1,_g){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let t1=e1.createInferenceHandler(),r1=this.graph.getInputIndices();if(_g.length!==r1.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${_g.length} expected: ${r1.length}`);_g.forEach((s1,l1)=>{let c1=r1[l1];this._values[c1]=s1});let n1=this._starter.slice(0),i1=this.graph.getValues(),o1=this.graph.getNodes(),a1=0;for(;a1<n1.length;){let s1=n1[a1++],l1=this._ops[s1],c1=l1.node.inputs.map(g1=>this._values[g1]);if(c1.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${l1.node}`);let d1=c1;ce.verbose("ExecPlan",`Runing op:${l1.node.name} (${d1.map((g1,v1)=>`'${l1.node.inputs[v1]}': ${g1.type}[${g1.dims.join(",")}]`).join(", ")})`);let h1=await this.profiler.event("node",l1.node.name,async()=>l1.op.impl(t1,d1,l1.op.context));if(h1.length!==l1.node.outputs.length)throw new Error("the size of output does not match model definition.");h1.forEach((g1,v1)=>{let $1=l1.node.outputs[v1];if(this._values[$1])throw new Error(`output [${$1}] already has value: op:${l1.node.name}`);this._values[$1]=g1});let f1=new Set;h1.forEach((g1,v1)=>{let $1=l1.node.outputs[v1];for(let y1 of i1[$1].to){let _1=o1[y1],E1=!0;for(let T1 of _1.inputs)if(!this._values[T1]){E1=!1;break}E1&&f1.add(y1)}}),n1.push(...f1)}let u1=[];for(let s1=0;s1<this.graph.getOutputIndices().length;s1++){let l1=this.graph.getOutputIndices()[s1],c1=this._values[l1];if(c1===void 0)throw new Error(`required output [${l1}] does not have value`);l1===0?await c1.getData():c1.data,u1.push(c1)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),t1.dispose(),u1})}}}),oe,bt,mn,gp$1=L$1(()=>{tn$1(),oe=Ar(Cr()),yr(),fe$1(),bt=V.experimental.fbs,mn=class Gw{constructor(_g){if(this._attributes=new Map,_g!=null){for(let t1 of _g)t1 instanceof oe.onnx.AttributeProto?this._attributes.set(t1.name,[Gw.getValue(t1),Gw.getType(t1)]):t1 instanceof bt.Attribute&&this._attributes.set(t1.name(),[Gw.getValue(t1),Gw.getType(t1)]);if(this._attributes.size<_g.length)throw new Error("duplicated attribute names")}}set(_g,t1,r1){this._attributes.set(_g,[r1,t1])}delete(_g){this._attributes.delete(_g)}getFloat(_g,t1){return this.get(_g,"float",t1)}getInt(_g,t1){return this.get(_g,"int",t1)}getString(_g,t1){return this.get(_g,"string",t1)}getTensor(_g,t1){return this.get(_g,"tensor",t1)}getFloats(_g,t1){return this.get(_g,"floats",t1)}getInts(_g,t1){return this.get(_g,"ints",t1)}getStrings(_g,t1){return this.get(_g,"strings",t1)}getTensors(_g,t1){return this.get(_g,"tensors",t1)}get(_g,t1,r1){let n1=this._attributes.get(_g);if(n1===void 0){if(r1!==void 0)return r1;throw new Error(`required attribute not found: ${_g}`)}if(n1[1]!==t1)throw new Error(`type mismatch: expected ${t1} but got ${n1[1]}`);return n1[0]}static getType(_g){let t1=_g instanceof oe.onnx.AttributeProto?_g.type:_g.type();switch(t1){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[t1]}`)}}static getValue(_g){let t1=_g instanceof oe.onnx.AttributeProto?_g.type:_g.type();if(t1===oe.onnx.AttributeProto.AttributeType.GRAPH||t1===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let r1=this.getValueNoCheck(_g);if(t1===oe.onnx.AttributeProto.AttributeType.INT&&it.isLong(r1))return it.longToNumber(r1);if(t1===oe.onnx.AttributeProto.AttributeType.INTS){let n1=r1,i1=new Array(n1.length);for(let o1=0;o1<n1.length;o1++){let a1=n1[o1];i1[o1]=it.longToNumber(a1)}return i1}if(t1===oe.onnx.AttributeProto.AttributeType.TENSOR)return _g instanceof oe.onnx.AttributeProto?$e.fromProto(r1):$e.fromOrtTensor(r1);if(t1===oe.onnx.AttributeProto.AttributeType.TENSORS){if(_g instanceof oe.onnx.AttributeProto)return r1.map(n1=>$e.fromProto(n1));if(_g instanceof bt.Attribute)return r1.map(n1=>$e.fromOrtTensor(n1))}return t1===oe.onnx.AttributeProto.AttributeType.STRING&&_g instanceof oe.onnx.AttributeProto?sn$1(r1):t1===oe.onnx.AttributeProto.AttributeType.STRINGS&&_g instanceof oe.onnx.AttributeProto?r1.map(sn$1):r1}static getValueNoCheck(_g){return _g instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(_g):this.getValueNoCheckFromOrtFormat(_g)}static getValueNoCheckFromOnnxFormat(_g){switch(_g.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return _g.f;case oe.onnx.AttributeProto.AttributeType.INT:return _g.i;case oe.onnx.AttributeProto.AttributeType.STRING:return _g.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return _g.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return _g.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return _g.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return _g.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return _g.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return _g.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return _g.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[_g.type]}`)}}static getValueNoCheckFromOrtFormat(_g){switch(_g.type()){case bt.AttributeType.FLOAT:return _g.f();case bt.AttributeType.INT:return _g.i();case bt.AttributeType.STRING:return _g.s();case bt.AttributeType.TENSOR:return _g.t();case bt.AttributeType.GRAPH:return _g.g();case bt.AttributeType.FLOATS:return _g.floatsArray();case bt.AttributeType.INTS:{let t1=[];for(let r1=0;r1<_g.intsLength();r1++)t1.push(_g.ints(r1));return t1}case bt.AttributeType.STRINGS:{let t1=[];for(let r1=0;r1<_g.stringsLength();r1++)t1.push(_g.strings(r1));return t1}case bt.AttributeType.TENSORS:{let t1=[];for(let r1=0;r1<_g.tensorsLength();r1++)t1.push(_g.tensors(r1));return t1}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[_g.type()]}`)}}}}),Xi$1,wo$1,Ki$1,Mt$1,vo$1,Yi$1,yp$1=L$1(()=>{gp$1(),tn$1(),Xi$1=Ar(Cr()),yr(),fe$1(),wo$1=V.experimental.fbs,Ki$1={from:(e1,_g)=>new Yi$1(e1,_g)},Mt$1=class{constructor(e1){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e1&&(this.type=We$1.tensorValueTypeFromProto(e1.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo$1=class{constructor(e1,_g){e1 instanceof Xi$1.onnx.NodeProto?(this.name=e1.name,this.opType=e1.opType,this.attributes=new mn(e1.attribute)):e1 instanceof wo$1.Node&&(this.name=_g??e1.name(),this.opType=e1.opType(),this.attributes=new mn(We$1.tensorAttributesFromORTFormat(e1))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi$1=class{constructor(e1,_g){if(!e1)throw new TypeError("graph is empty");this.buildGraph(e1),this.transformGraph(_g),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(e1){if(e1 instanceof Xi$1.onnx.GraphProto)this.buildGraphFromOnnxFormat(e1);else if(e1 instanceof wo$1.Graph)this.buildGraphFromOrtFormat(e1);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(e1){let _g=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let t1=new Map;if(!e1.input)throw new Error("missing information in graph: input");let r1=[];for(let n1 of e1.input){if(_g.has(n1.name))throw new Error(`duplicated input name: ${n1.name}`);let i1=this._allData.push(new Mt$1(n1))-1;_g.set(n1.name,i1),r1.push(n1.name)}if(!e1.initializer)throw new Error("missing information in graph: initializer");for(let n1 of e1.initializer){let i1=_g.get(n1.name);if(i1===void 0){let o1=new Mt$1;o1.type={shape:{dims:We$1.tensorDimsFromProto(n1.dims)},tensorType:We$1.tensorDataTypeFromProto(n1.dataType)},i1=this._allData.push(o1)-1,_g.set(n1.name,i1)}this._allData[i1]._from=-1,this._allData[i1].tensor=$e.fromProto(n1)}for(let n1=0;n1<this._allData.length;n1++)this._allData[n1].tensor||(this._allInputIndices.push(n1),this._allInputNames.push(r1[n1]));if(!e1.output)throw new Error("missing information in graph: output");for(let n1 of e1.output){if(_g.has(n1.name))throw new Error(`duplicated output name: ${n1.name}`);let i1=this._allData.push(new Mt$1(n1))-1;_g.set(n1.name,i1),this._allOutputIndices.push(i1),this._allOutputNames.push(n1.name)}if(!e1.node)throw new Error("missing information in graph: node");for(let n1 of e1.node){if(!n1.name)for(let o1=0;;o1++){let a1=`unnamed_${n1.opType}_${o1}`;if(!t1.has(a1)){n1.name=a1;break}}if(t1.has(n1.name))throw new Error(`duplicated node name: ${n1.name}`);let i1=this._nodes.push(new vo$1(n1))-1;t1.set(n1.name,i1)}for(let n1=0;n1<this._nodes.length;n1++){let i1=this._nodes[n1],o1=e1.node[n1];if(!o1.output)throw new Error(`missing output for node: ${o1.name}`);for(let a1 of o1.output){let u1=_g.get(a1);if(typeof u1>"u"&&(u1=this._allData.push(new Mt$1)-1,_g.set(a1,u1)),i1.outputs.push(u1),this._allData[u1]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${u1}`);if(this._allData[u1]._from=n1,o1.opType==="Constant"){if(!o1.attribute||o1.attribute.length!==1||!o1.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!o1.output||o1.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");i1.outputs.pop(),i1.executeNode=!1,this._allData[u1]._from=-1,this._allData[u1].tensor=$e.fromProto(o1.attribute[0].t)}}}for(let n1=0;n1<this._nodes.length;n1++){let i1=this._nodes[n1],o1=e1.node[n1];if(!o1.input)throw new Error(`missing input for node: ${o1.name}`);for(let a1 of o1.input){let u1=_g.get(a1);if(typeof u1>"u"){if(a1===""&&(o1.input.length===3||o1.input.length===4)&&o1.opType==="Resize")continue;throw new Error(`unrecognized input '${a1}' for node: ${o1.name}`)}i1.inputs.push(u1),this._allData[u1]._to.push(n1)}}return!0}buildGraphFromOrtFormat(e1){var n1,i1,o1;let _g=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let t1=new Map,r1=[];for(let a1=0;a1<e1.inputsLength();a1++){let u1=e1.inputs(a1);if(_g.has(u1))throw new Error(`duplicated input name: ${u1}`);for(let s1=0;s1<e1.nodeArgsLength();s1++)if(((n1=e1.nodeArgs(s1))==null?void 0:n1.name())===u1){let l1=new Mt$1;if(((o1=(i1=e1.nodeArgs(s1))==null?void 0:i1.type())==null?void 0:o1.valueType())!==wo$1.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let c1=e1.nodeArgs(s1).type().value(new wo$1.TensorTypeAndShape),d1=We$1.tensorDataTypeFromProto(c1.elemType()),h1=c1.shape(),f1=[];for(let v1=0;v1<h1.dimLength();v1++)f1.push(it.longToNumber(h1.dim(v1).value().dimValue()));l1.type={shape:{dims:f1},tensorType:d1};let g1=this._allData.push(l1)-1;_g.set(u1,g1),r1.push(u1)}}for(let a1=0;a1<e1.initializersLength();a1++){let u1=e1.initializers(a1),s1=_g.get(u1.name());if(s1===void 0){let l1=new Mt$1,c1=We$1.tensorDimsFromORTFormat(u1),d1=We$1.tensorDataTypeFromProto(u1.dataType());l1.type={shape:{dims:c1},tensorType:d1},s1=this._allData.push(l1)-1,_g.set(u1.name(),s1)}this._allData[s1]._from=-1,this._allData[s1].tensor=$e.fromOrtTensor(u1)}for(let a1=0;a1<this._allData.length;a1++)this._allData[a1].tensor||(this._allInputIndices.push(a1),this._allInputNames.push(r1[a1]));for(let a1=0;a1<e1.outputsLength();a1++){let u1=e1.outputs(a1);if(_g.has(u1))throw new Error(`duplicated output name: ${u1}`);let s1=this._allData.push(new Mt$1)-1;_g.set(u1,s1),this._allOutputIndices.push(s1),this._allOutputNames.push(u1)}if(!e1.nodes)throw new Error("missing information in graph: node");for(let a1=0;a1<e1.nodesLength();a1++){let u1=e1.nodes(a1),s1=u1.name();if(!s1)for(let c1=0;s1=`unnamed_${u1.opType()}_${c1}`,!!t1.has(s1);c1++);if(t1.has(s1))throw new Error(`duplicated node name: ${s1}`);let l1=this._nodes.push(new vo$1(u1,s1))-1;t1.set(s1,l1)}for(let a1=0;a1<this._nodes.length;a1++){let u1=this._nodes[a1],s1=e1.nodes(a1);if(s1==null)throw new Error(`No node exists at index ${a1}`);if((s1==null?void 0:s1.outputsLength())===0)throw new Error(`missing output for node: ${s1.name}`);for(let l1=0;l1<(s1==null?void 0:s1.outputsLength());l1++){let c1=s1==null?void 0:s1.outputs(l1),d1=_g.get(c1);if(typeof d1>"u"&&(d1=this._allData.push(new Mt$1)-1,_g.set(c1,d1)),u1.outputs.push(d1),this._allData[d1]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${d1}`);if(this._allData[d1]._from=a1,s1.opType()==="Constant"){if(s1.attributesLength()!==1||!s1.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(s1.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");u1.outputs.pop(),u1.executeNode=!1,this._allData[d1]._from=-1,this._allData[d1].tensor=$e.fromOrtTensor(s1.attributes(0).t())}}}for(let a1=0;a1<this._nodes.length;a1++){let u1=this._nodes[a1],s1=e1.nodes(a1);if(s1.inputsLength()===0)throw new Error(`missing input for node: ${s1.name}`);for(let l1=0;l1<s1.inputsLength();l1++){let c1=s1.inputs(l1),d1=_g.get(c1);if(typeof d1>"u")throw new Error(`unrecognized input '${c1}' for node: ${s1.name()}`);u1.inputs.push(d1),this._allData[d1]._to.push(a1)}}}checkIsAcyclic(){let e1=new Set;this._allInputIndices.forEach(r1=>{this._allData[r1]._to.forEach(n1=>{e1.add(n1)})});let _g=Array.from(e1),t1=new Array(this._nodes.length).fill("white");for(;_g.length>0;){let r1=_g.pop();t1[r1]==="gray"?t1[r1]="black":(_g.push(r1),t1[r1]="gray",this._nodes[r1].outputs.forEach(n1=>{let i1=this._allData[n1];if(typeof i1.tensor<"u")throw new Error("node outputs should not be initialized");if(i1._from!==r1)throw new Error("from property of the Value object doesn't match index of Node being processed");i1._to.forEach(o1=>{if(t1[o1]==="gray")throw new Error("model graph is cyclic");t1[o1]==="white"&&_g.push(o1)})}))}}transformGraph(e1){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e1&&e1.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let e1=0,_g=new Array(this._nodes.length,0),t1=0;for(let r1=0;r1<this._nodes.length;r1++)_g[r1]=t1,this._nodes[r1].executeNode?(t1!==r1&&(this._nodes[t1]=this._nodes[r1]),t1++):this._nodes[r1].outputs.forEach(n1=>{this._allData[n1]._from=-2});this._nodes.splice(t1,this._nodes.length-t1);for(let r1=0;r1<this._allData.length;r1++){let n1=this._allData[r1];n1._from!==void 0&&n1._from!==-1&&n1._from!==-2&&(n1._from=_g[n1._from]);for(let i1=0;i1<n1._to.length;i1++)if(n1._to[i1]>=0)n1._to[i1]=_g[n1._to[i1]];else throw new Error("Trying to update a removed node")}e1=0;for(let r1=0;r1<this._allData.length;r1++){if(this._allData[r1].from===-2&&this._allOutputIndices.indexOf(r1+e1)===-1){e1++,this._allData.splice(r1,1),r1--;continue}if(e1>0){let n1=-1;this._allData[r1].from!==void 0&&this._allData[r1].from!==-1?(n1=this._nodes[this._allData[r1].from].outputs.indexOf(r1+e1),n1!==-1&&(this._nodes[this._allData[r1].from].outputs[n1]=r1)):(n1=this._allInputIndices.indexOf(r1+e1),n1!==-1&&(this._allInputIndices[n1]=r1)),this._allData[r1].to.forEach(i1=>{n1=this._nodes[i1].inputs.indexOf(r1+e1),n1!==-1&&(this._nodes[i1].inputs[n1]=r1)}),this._allData[r1].to.length===0&&(n1=this._allOutputIndices.indexOf(r1+e1),n1!==-1&&(this._allOutputIndices[n1]=r1))}}}deleteNode(e1){let _g=this._nodes[e1];if(_g.outputs.length>1){for(let o1=1;o1<_g.outputs.length;o1++)if(this._allData[_g.outputs[o1]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}_g.executeNode=!1;let t1=_g.inputs[0],r1=_g.outputs[0],n1=this._allData[r1].to;for(let o1=0;o1<_g.inputs.length;o1++){let a1=this._allData[_g.inputs[o1]].to.indexOf(e1);if(a1===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[_g.inputs[o1]].to.splice(a1,1)}this._allData[r1]._to=[];let i1=this._allOutputIndices.indexOf(r1);if(i1!==-1&&(this._allOutputIndices[i1]=t1),n1&&n1.length>0)for(let o1 of n1){let a1=this._nodes[o1].inputs.indexOf(r1);if(a1===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[o1].inputs[a1]=t1,this._allData[t1].to.push(o1)}}removeAllDropoutNodes(){let e1=0;for(let _g of this._nodes){if(_g.opType==="Dropout"){if(_g.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(_g.outputs.length!==1&&_g.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(_g.outputs.length===2&&this._allData[_g.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(e1)}e1++}}removeAllIdentityNodes(){let e1=0;for(let _g of this._nodes)_g.opType==="Identity"&&this.deleteNode(e1),e1++}isActivation(e1){switch(e1.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let e1 of this._nodes)if(e1.opType==="Conv"){let _g=this._allData[e1.outputs[0]]._to;if(_g.length===1&&this.isActivation(this._nodes[_g[0]])){let t1=this._nodes[_g[0]];if(t1.opType==="Clip")if(t1.inputs.length===1)try{e1.attributes.set("activation_params","floats",[t1.attributes.getFloat("min"),t1.attributes.getFloat("max")])}catch{e1.attributes.set("activation_params","floats",[br,gr$1])}else if(t1.inputs.length>=3&&this._allData[t1.inputs[1]].tensor!==void 0&&this._allData[t1.inputs[2]].tensor!==void 0)e1.attributes.set("activation_params","floats",[this._allData[t1.inputs[1]].tensor.floatData[0],this._allData[t1.inputs[2]].tensor.floatData[0]]);else continue;e1.attributes.set("activation","string",t1.opType),this.deleteNode(_g[0])}}}}}),Tp$1,Qb,_o$1,xp$1=L$1(()=>{zn$1(),yp$1(),tn$1(),Tp$1=Ar(Cr()),fe$1(),Qb=V.experimental.fbs,_o$1=class{constructor(){}load(e1,_g,t1){let r1;if(!t1)try{this.loadFromOnnxFormat(e1,_g);return}catch(n1){if(t1!==void 0)throw n1;r1=n1}try{this.loadFromOrtFormat(e1,_g)}catch(n1){throw t1!==void 0?n1:new Error(`Failed to load model as ONNX format: ${r1}
as ORT format: ${n1}`)}}loadFromOnnxFormat(e1,_g){let t1=Tp$1.onnx.ModelProto.decode(e1);if(it.longToNumber(t1.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=t1.opsetImport.map(r1=>({domain:r1.domain,version:it.longToNumber(r1.version)})),this._graph=Ki$1.from(t1.graph,_g)}loadFromOrtFormat(e1,_g){let t1=new _$1.ByteBuffer(e1),r1=Qb.InferenceSession.getRootAsInferenceSession(t1).model();if(it.longToNumber(r1.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let n1=0;n1<r1.opsetImportLength();n1++){let i1=r1.opsetImport(n1);this._opsets.push({domain:i1==null?void 0:i1.domain(),version:it.longToNumber(i1.version())})}this._graph=Ki$1.from(r1.graph(),_g)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo,wp$1=L$1(()=>{mp$1(),bp(),lt$1(),xp$1(),Oo=class{constructor(e1={}){this._initialized=!1,this.backendHint=e1.backendHint,this.profiler=Gn$1.create(e1.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(e1,_g,t1){await this.profiler.event("session","Session.loadModel",async()=>{let r1=await qi$1(this.backendHint);if(this.sessionHandler=r1.createSessionHandler(this.context),this._model=new _o$1,typeof e1=="string"){let n1=e1.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let i1=await(void 0)(e1);this.initialize(i1,n1)}else{let i1=await(await fetch(e1)).arrayBuffer();this.initialize(new Uint8Array(i1),n1)}}else if(ArrayBuffer.isView(e1))this.initialize(e1);else{let n1=new Uint8Array(e1,_g||0,t1||e1.byteLength);this.initialize(n1)}})}initialize(e1,_g){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let t1=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(e1,t1,_g),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo$1(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(e1){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let _g=this.normalizeAndValidateInputs(e1),t1=await this._executionPlan.execute(this.sessionHandler,_g);return this.createOutput(t1)})}normalizeAndValidateInputs(e1){let _g=this._model.graph.getInputNames();if(Array.isArray(e1)){if(e1.length!==_g.length)throw new Error(`incorrect input array length: expected ${_g.length} but got ${e1.length}`)}else{if(e1.size!==_g.length)throw new Error(`incorrect input map size: expected ${_g.length} but got ${e1.size}`);let t1=new Array(e1.size),r1=0;for(let n1=0;n1<_g.length;++n1){let i1=e1.get(_g[n1]);if(!i1)throw new Error(`missing input tensor for: '${name}'`);t1[r1++]=i1}e1=t1}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let t1=this._model.graph.getInputIndices(),r1=this._model.graph.getValues(),n1=new Array(t1.length);for(let i1=0;i1<t1.length;++i1){let o1=r1[t1[i1]];n1[i1]=o1.type.shape.dims,this.context.graphInputTypes.push(o1.type.tensorType),this.context.graphInputDims.push(e1[i1].dims)}this.validateInputTensorDims(n1,e1,!0)}else this.validateInputTensorDims(this.context.graphInputDims,e1,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,e1),e1}validateInputTensorTypes(e1,_g){for(let t1=0;t1<_g.length;t1++){let r1=e1[t1],n1=_g[t1].type;if(r1!==n1)throw new Error(`input tensor[${t1}] check failed: expected type '${r1}' but got ${n1}`)}}validateInputTensorDims(e1,_g,t1){for(let r1=0;r1<_g.length;r1++){let n1=e1[r1],i1=_g[r1].dims;if(!this.compareTensorDims(n1,i1,t1))throw new Error(`input tensor[${r1}] check failed: expected shape '[${n1.join(",")}]' but got [${i1.join(",")}]`)}}compareTensorDims(e1,_g,t1){if(e1.length!==_g.length)return!1;for(let r1=0;r1<e1.length;++r1)if(e1[r1]!==_g[r1]&&(!t1||e1[r1]!==0))return!1;return!0}createOutput(e1){let _g=this._model.graph.getOutputNames();if(e1.length!==_g.length)throw new Error("expected number of outputs do not match number of generated outputs");let t1=new Map;for(let r1=0;r1<_g.length;++r1)t1.set(_g[r1],e1[r1]);return t1}initializeOps(e1){let _g=e1.getNodes();this._ops=new Array(_g.length);for(let t1=0;t1<_g.length;t1++)this._ops[t1]=this.sessionHandler.resolve(_g[t1],this._model.opsets,e1)}}}),Io$1,vp$1=L$1(()=>{Ot$1(),yr(),Io$1=class{constructor(e1){this.session=e1,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(e1,_g,t1){let r1=new Map;for(let o1 in e1)if(Object.hasOwnProperty.call(e1,o1)){let a1=e1[o1];r1.set(o1,new $e(a1.dims,a1.type,void 0,void 0,a1.data))}let n1=await this.session.run(r1),i1={};return n1.forEach((o1,a1)=>{i1[a1]=new Me(o1.type,o1.data,o1.dims)}),i1}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p$1={};Sr(_p$1,{onnxjsBackend:()=>tg});var Ji$1,tg,Op$1=L$1(()=>{wp$1(),vp$1(),Ji$1=class{async init(){}async createInferenceSessionHandler(e1,_g){let t1=new Oo(_g);return typeof e1=="string"?await t1.loadModel(e1):await t1.loadModel(e1),new Io$1(t1)}},tg=new Ji$1}),Zi$1={};Sr(Zi$1,{createReadStream:()=>Ip$1,readFile:()=>rg,readFileSync:()=>ng});var rg,ng,Ip$1,Qi$1=L$1(()=>{rg=void 0,ng=void 0,Ip$1=void 0}),ea={};Sr(ea,{join:()=>og});var og,ta=L$1(()=>{og=void 0}),Pp$1=me((e1,_g)=>{var t1=(()=>{var n1;var r1=typeof document<"u"?(n1=document.currentScript)==null?void 0:n1.src:void 0;return typeof __filename<"u"&&(r1||(r1=__filename)),function(i1={}){var o1=i1,a1,u1,s1=new Promise((z1,ay)=>{a1=z1,u1=ay}),l1=Object.assign({},o1),c1="./this.program",d1=typeof window=="object",h1=typeof importScripts=="function",f1=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",g1="",v1,$1,y1;if(f1){var _1=(Qi$1(),ar(Zi$1)),E1=(ta(),ar(ea));g1=h1?E1.dirname(g1)+"/":__dirname+"/",v1=(z1,ay)=>(z1=Y1(z1)?new URL(z1):E1.normalize(z1),_1.readFileSync(z1,ay?void 0:"utf8")),y1=z1=>(z1=v1(z1,!0),z1.buffer||(z1=new Uint8Array(z1)),z1),$1=(z1,ay,cy,wy=!0)=>{z1=Y1(z1)?new URL(z1):E1.normalize(z1),_1.readFile(z1,wy?void 0:"utf8",(Cy,r0)=>{Cy?cy(Cy):ay(wy?r0.buffer:r0)})},!o1.thisProgram&&1<process.argv.length&&(c1=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(d1||h1)&&(h1?g1=self.location.href:typeof document<"u"&&document.currentScript&&(g1=document.currentScript.src),r1&&(g1=r1),g1.startsWith("blob:")?g1="":g1=g1.substr(0,g1.replace(/[?#].*/,"").lastIndexOf("/")+1),v1=z1=>{var ay=new XMLHttpRequest;return ay.open("GET",z1,!1),ay.send(null),ay.responseText},h1&&(y1=z1=>{var ay=new XMLHttpRequest;return ay.open("GET",z1,!1),ay.responseType="arraybuffer",ay.send(null),new Uint8Array(ay.response)}),$1=(z1,ay,cy)=>{var wy=new XMLHttpRequest;wy.open("GET",z1,!0),wy.responseType="arraybuffer",wy.onload=()=>{wy.status==200||wy.status==0&&wy.response?ay(wy.response):cy()},wy.onerror=cy,wy.send(null)});var T1=console.log.bind(console),P1=console.error.bind(console);Object.assign(o1,l1),l1=null;var k1,N1=!1,W1,H1,ty,ey,ly;function oy(){var z1=k1.buffer;o1.HEAP8=W1=new Int8Array(z1),o1.HEAP16=new Int16Array(z1),o1.HEAPU8=H1=new Uint8Array(z1),o1.HEAPU16=new Uint16Array(z1),o1.HEAP32=ty=new Int32Array(z1),o1.HEAPU32=ey=new Uint32Array(z1),o1.HEAPF32=new Float32Array(z1),o1.HEAPF64=ly=new Float64Array(z1)}var Q1=[],U1=[],V1=[],K1=0,J1=null;function hy(z1){throw z1="Aborted("+z1+")",P1(z1),N1=!0,z1=new WebAssembly.RuntimeError(z1+". Build with -sASSERTIONS for more info."),u1(z1),z1}var G1=z1=>z1.startsWith("data:application/octet-stream;base64,"),Y1=z1=>z1.startsWith("file://"),yy;if(yy="ort-wasm.wasm",!G1(yy)){var Oy=yy;yy=o1.locateFile?o1.locateFile(Oy,g1):g1+Oy}function Ey(z1){if(y1)return y1(z1);throw"both async and sync fetching of the wasm failed"}function jy(z1){if(d1||h1){if(typeof fetch=="function"&&!Y1(z1))return fetch(z1,{credentials:"same-origin"}).then(ay=>{if(!ay.ok)throw`failed to load wasm binary file at '${z1}'`;return ay.arrayBuffer()}).catch(()=>Ey(z1));if($1)return new Promise((ay,cy)=>{$1(z1,wy=>ay(new Uint8Array(wy)),cy)})}return Promise.resolve().then(()=>Ey(z1))}function Ay(z1,ay,cy){return jy(z1).then(wy=>WebAssembly.instantiate(wy,ay)).then(cy,wy=>{P1(`failed to asynchronously prepare wasm: ${wy}`),hy(wy)})}function Uy(z1,ay){var cy=yy;return typeof WebAssembly.instantiateStreaming!="function"||G1(cy)||Y1(cy)||f1||typeof fetch!="function"?Ay(cy,z1,ay):fetch(cy,{credentials:"same-origin"}).then(wy=>WebAssembly.instantiateStreaming(wy,z1).then(ay,function(Cy){return P1(`wasm streaming compile failed: ${Cy}`),P1("falling back to ArrayBuffer instantiation"),Ay(cy,z1,ay)}))}var Gy,Wy={798088:(z1,ay,cy,wy)=>{if(typeof o1>"u"||!o1.ya)return 1;if(z1=A0(z1>>>0),z1.startsWith("./")&&(z1=z1.substring(2)),z1=o1.ya.get(z1),!z1)return 2;if(ay>>>=0,cy>>>=0,ay+cy>z1.byteLength)return 3;try{return H1.set(z1.subarray(ay,ay+cy),wy>>>0>>>0),0}catch{return 4}}};class Yy{constructor(ay){this.wa=ay-24}}var Vy=0,p0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,y0=(z1,ay,cy)=>{ay>>>=0;var wy=ay+cy;for(cy=ay;z1[cy]&&!(cy>=wy);)++cy;if(16<cy-ay&&z1.buffer&&p0)return p0.decode(z1.subarray(ay,cy));for(wy="";ay<cy;){var Cy=z1[ay++];if(Cy&128){var r0=z1[ay++]&63;if((Cy&224)==192)wy+=String.fromCharCode((Cy&31)<<6|r0);else{var v0=z1[ay++]&63;Cy=(Cy&240)==224?(Cy&15)<<12|r0<<6|v0:(Cy&7)<<18|r0<<12|v0<<6|z1[ay++]&63,65536>Cy?wy+=String.fromCharCode(Cy):(Cy-=65536,wy+=String.fromCharCode(55296|Cy>>10,56320|Cy&1023))}}else wy+=String.fromCharCode(Cy)}return wy},A0=(z1,ay)=>(z1>>>=0)?y0(H1,z1,ay):"",lv=z1=>{for(var ay=0,cy=0;cy<z1.length;++cy){var wy=z1.charCodeAt(cy);127>=wy?ay++:2047>=wy?ay+=2:55296<=wy&&57343>=wy?(ay+=4,++cy):ay+=3}return ay},R0=(z1,ay,cy,wy)=>{if(cy>>>=0,!(0<wy))return 0;var Cy=cy;wy=cy+wy-1;for(var r0=0;r0<z1.length;++r0){var v0=z1.charCodeAt(r0);if(55296<=v0&&57343>=v0){var Q0=z1.charCodeAt(++r0);v0=65536+((v0&1023)<<10)|Q0&1023}if(127>=v0){if(cy>=wy)break;ay[cy++>>>0]=v0}else{if(2047>=v0){if(cy+1>=wy)break;ay[cy++>>>0]=192|v0>>6}else{if(65535>=v0){if(cy+2>=wy)break;ay[cy++>>>0]=224|v0>>12}else{if(cy+3>=wy)break;ay[cy++>>>0]=240|v0>>18,ay[cy++>>>0]=128|v0>>12&63}ay[cy++>>>0]=128|v0>>6&63}ay[cy++>>>0]=128|v0&63}}return ay[cy>>>0]=0,cy-Cy},X1=z1=>z1%4===0&&(z1%100!==0||z1%400===0),fy=[0,31,60,91,121,152,182,213,244,274,305,335],vy=[0,31,59,90,120,151,181,212,243,273,304,334],Dy=[],Ny={},Ty=()=>{if(!Hy){var z1={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c1||"./this.program"},ay;for(ay in Ny)Ny[ay]===void 0?delete z1[ay]:z1[ay]=Ny[ay];var cy=[];for(ay in z1)cy.push(`${ay}=${z1[ay]}`);Hy=cy}return Hy},Hy,l0=[null,[],[]],I0=[31,29,31,30,31,30,31,31,30,31,30,31],$0=[31,28,31,30,31,30,31,31,30,31,30,31];function iv(z1){var ay=Array(lv(z1)+1);return R0(z1,ay,0,ay.length),ay}function b0(z1,ay,cy,wy){function Cy(gy,T0,C0){for(gy=typeof gy=="number"?gy.toString():gy||"";gy.length<T0;)gy=C0[0]+gy;return gy}function r0(gy,T0){return Cy(gy,T0,"0")}function v0(gy,T0){function C0(Hv){return 0>Hv?-1:0<Hv?1:0}var q0;return(q0=C0(gy.getFullYear()-T0.getFullYear()))===0&&(q0=C0(gy.getMonth()-T0.getMonth()))===0&&(q0=C0(gy.getDate()-T0.getDate())),q0}function Q0(gy){switch(gy.getDay()){case 0:return new Date(gy.getFullYear()-1,11,29);case 1:return gy;case 2:return new Date(gy.getFullYear(),0,3);case 3:return new Date(gy.getFullYear(),0,2);case 4:return new Date(gy.getFullYear(),0,1);case 5:return new Date(gy.getFullYear()-1,11,31);case 6:return new Date(gy.getFullYear()-1,11,30)}}function hv(gy){var T0=gy.sa;for(gy=new Date(new Date(gy.ta+1900,0,1).getTime());0<T0;){var C0=gy.getMonth(),q0=(X1(gy.getFullYear())?I0:$0)[C0];if(T0>q0-gy.getDate())T0-=q0-gy.getDate()+1,gy.setDate(1),11>C0?gy.setMonth(C0+1):(gy.setMonth(0),gy.setFullYear(gy.getFullYear()+1));else{gy.setDate(gy.getDate()+T0);break}}return C0=new Date(gy.getFullYear()+1,0,4),T0=Q0(new Date(gy.getFullYear(),0,4)),C0=Q0(C0),0>=v0(T0,gy)?0>=v0(C0,gy)?gy.getFullYear()+1:gy.getFullYear():gy.getFullYear()-1}z1>>>=0,ay>>>=0,cy>>>=0,wy>>>=0;var uv=ey[wy+40>>>2>>>0];wy={Ba:ty[wy>>>2>>>0],Aa:ty[wy+4>>>2>>>0],ua:ty[wy+8>>>2>>>0],xa:ty[wy+12>>>2>>>0],va:ty[wy+16>>>2>>>0],ta:ty[wy+20>>>2>>>0],na:ty[wy+24>>>2>>>0],sa:ty[wy+28>>>2>>>0],Da:ty[wy+32>>>2>>>0],za:ty[wy+36>>>2>>>0],Ca:uv?A0(uv):""},cy=A0(cy),uv={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var J0 in uv)cy=cy.replace(new RegExp(J0,"g"),uv[J0]);var Wv="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),yv="January February March April May June July August September October November December".split(" ");uv={"%a":gy=>Wv[gy.na].substring(0,3),"%A":gy=>Wv[gy.na],"%b":gy=>yv[gy.va].substring(0,3),"%B":gy=>yv[gy.va],"%C":gy=>r0((gy.ta+1900)/100|0,2),"%d":gy=>r0(gy.xa,2),"%e":gy=>Cy(gy.xa,2," "),"%g":gy=>hv(gy).toString().substring(2),"%G":hv,"%H":gy=>r0(gy.ua,2),"%I":gy=>(gy=gy.ua,gy==0?gy=12:12<gy&&(gy-=12),r0(gy,2)),"%j":gy=>{for(var T0=0,C0=0;C0<=gy.va-1;T0+=(X1(gy.ta+1900)?I0:$0)[C0++]);return r0(gy.xa+T0,3)},"%m":gy=>r0(gy.va+1,2),"%M":gy=>r0(gy.Aa,2),"%n":()=>`
`,"%p":gy=>0<=gy.ua&&12>gy.ua?"AM":"PM","%S":gy=>r0(gy.Ba,2),"%t":()=>"	","%u":gy=>gy.na||7,"%U":gy=>r0(Math.floor((gy.sa+7-gy.na)/7),2),"%V":gy=>{var T0=Math.floor((gy.sa+7-(gy.na+6)%7)/7);if(2>=(gy.na+371-gy.sa-2)%7&&T0++,T0)T0==53&&(C0=(gy.na+371-gy.sa)%7,C0==4||C0==3&&X1(gy.ta)||(T0=1));else{T0=52;var C0=(gy.na+7-gy.sa-1)%7;(C0==4||C0==5&&X1(gy.ta%400-1))&&T0++}return r0(T0,2)},"%w":gy=>gy.na,"%W":gy=>r0(Math.floor((gy.sa+7-(gy.na+6)%7)/7),2),"%y":gy=>(gy.ta+1900).toString().substring(2),"%Y":gy=>gy.ta+1900,"%z":gy=>{gy=gy.za;var T0=0<=gy;return gy=Math.abs(gy)/60,(T0?"+":"-")+("0000"+(gy/60*100+gy%60)).slice(-4)},"%Z":gy=>gy.Ca,"%%":()=>"%"},cy=cy.replace(/%%/g,"\0\0");for(J0 in uv)cy.includes(J0)&&(cy=cy.replace(new RegExp(J0,"g"),uv[J0](wy)));return cy=cy.replace(/\0\0/g,"%"),J0=iv(cy),J0.length>ay?0:(W1.set(J0,z1>>>0),J0.length-1)}var dv={a:function(z1,ay,cy){z1>>>=0;var wy=new Yy(z1);throw ey[wy.wa+16>>>2>>>0]=0,ey[wy.wa+4>>>2>>>0]=ay>>>0,ey[wy.wa+8>>>2>>>0]=cy>>>0,Vy=z1,Vy},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(z1,ay,cy){return ay>>>=0,H1.copyWithin(z1>>>0>>>0,ay>>>0,ay+(cy>>>0)>>>0)},n:function(z1,ay,cy){z1=ay+2097152>>>0<4194305-!!z1?(z1>>>0)+4294967296*ay:NaN,cy>>>=0,z1=new Date(1e3*z1),ty[cy>>>2>>>0]=z1.getUTCSeconds(),ty[cy+4>>>2>>>0]=z1.getUTCMinutes(),ty[cy+8>>>2>>>0]=z1.getUTCHours(),ty[cy+12>>>2>>>0]=z1.getUTCDate(),ty[cy+16>>>2>>>0]=z1.getUTCMonth(),ty[cy+20>>>2>>>0]=z1.getUTCFullYear()-1900,ty[cy+24>>>2>>>0]=z1.getUTCDay(),ty[cy+28>>>2>>>0]=(z1.getTime()-Date.UTC(z1.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(z1,ay,cy){z1=ay+2097152>>>0<4194305-!!z1?(z1>>>0)+4294967296*ay:NaN,cy>>>=0,z1=new Date(1e3*z1),ty[cy>>>2>>>0]=z1.getSeconds(),ty[cy+4>>>2>>>0]=z1.getMinutes(),ty[cy+8>>>2>>>0]=z1.getHours(),ty[cy+12>>>2>>>0]=z1.getDate(),ty[cy+16>>>2>>>0]=z1.getMonth(),ty[cy+20>>>2>>>0]=z1.getFullYear()-1900,ty[cy+24>>>2>>>0]=z1.getDay(),ty[cy+28>>>2>>>0]=(X1(z1.getFullYear())?fy:vy)[z1.getMonth()]+z1.getDate()-1|0,ty[cy+36>>>2>>>0]=-(60*z1.getTimezoneOffset()),ay=new Date(z1.getFullYear(),6,1).getTimezoneOffset();var wy=new Date(z1.getFullYear(),0,1).getTimezoneOffset();ty[cy+32>>>2>>>0]=(ay!=wy&&z1.getTimezoneOffset()==Math.min(wy,ay))|0},p:function(z1){z1>>>=0;var ay=new Date(ty[z1+20>>>2>>>0]+1900,ty[z1+16>>>2>>>0],ty[z1+12>>>2>>>0],ty[z1+8>>>2>>>0],ty[z1+4>>>2>>>0],ty[z1>>>2>>>0],0),cy=ty[z1+32>>>2>>>0],wy=ay.getTimezoneOffset(),Cy=new Date(ay.getFullYear(),6,1).getTimezoneOffset(),r0=new Date(ay.getFullYear(),0,1).getTimezoneOffset(),v0=Math.min(r0,Cy);return 0>cy?ty[z1+32>>>2>>>0]=+(Cy!=r0&&v0==wy):0<cy!=(v0==wy)&&(Cy=Math.max(r0,Cy),ay.setTime(ay.getTime()+6e4*((0<cy?v0:Cy)-wy))),ty[z1+24>>>2>>>0]=ay.getDay(),ty[z1+28>>>2>>>0]=(X1(ay.getFullYear())?fy:vy)[ay.getMonth()]+ay.getDate()-1|0,ty[z1>>>2>>>0]=ay.getSeconds(),ty[z1+4>>>2>>>0]=ay.getMinutes(),ty[z1+8>>>2>>>0]=ay.getHours(),ty[z1+12>>>2>>>0]=ay.getDate(),ty[z1+16>>>2>>>0]=ay.getMonth(),ty[z1+20>>>2>>>0]=ay.getYear(),z1=ay.getTime(),z1=isNaN(z1)?-1:z1/1e3,nv((Gy=z1,1<=+Math.abs(Gy)?0<Gy?+Math.floor(Gy/4294967296)>>>0:~~+Math.ceil((Gy-+(~~Gy>>>0))/4294967296)>>>0:0)),z1>>>0},l:function(){return-52},m:function(){},t:function(z1,ay,cy,wy){cy>>>=0,wy>>>=0;var Cy=new Date().getFullYear(),r0=new Date(Cy,0,1),v0=new Date(Cy,6,1);Cy=r0.getTimezoneOffset();var Q0=v0.getTimezoneOffset();ey[z1>>>0>>>2>>>0]=60*Math.max(Cy,Q0),ty[ay>>>0>>>2>>>0]=+(Cy!=Q0),z1=hv=>hv.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],r0=z1(r0),v0=z1(v0),Q0<Cy?(R0(r0,H1,cy,17),R0(v0,H1,wy,17)):(R0(r0,H1,wy,17),R0(v0,H1,cy,17))},d:()=>{hy("")},B:function(z1,ay,cy){z1>>>=0,ay>>>=0,cy>>>=0,Dy.length=0;for(var wy;wy=H1[ay++>>>0];){var Cy=wy!=105;Cy&=wy!=112,cy+=Cy&&cy%8?4:0,Dy.push(wy==112?ey[cy>>>2>>>0]:wy==105?ty[cy>>>2>>>0]:ly[cy>>>3>>>0]),cy+=Cy?8:4}return Wy[z1](...Dy)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(z1){z1>>>=0;var ay=H1.length;if(4294901760<z1)return!1;for(var cy=1;4>=cy;cy*=2){var wy=ay*(1+.2/cy);wy=Math.min(wy,z1+100663296);var Cy=Math;wy=Math.max(z1,wy);e:{Cy=(Cy.min.call(Cy,4294901760,wy+(65536-wy%65536)%65536)-k1.buffer.byteLength+65535)/65536;try{k1.grow(Cy),oy();var r0=1;break e}catch{}r0=void 0}if(r0)return!0}return!1},C:function(z1,ay){z1>>>=0,ay>>>=0;var cy=0;return Ty().forEach((wy,Cy)=>{var r0=ay+cy;for(Cy=ey[z1+4*Cy>>>2>>>0]=r0,r0=0;r0<wy.length;++r0)W1[Cy++>>>0]=wy.charCodeAt(r0);W1[Cy>>>0]=0,cy+=wy.length+1}),0},D:function(z1,ay){z1>>>=0,ay>>>=0;var cy=Ty();ey[z1>>>2>>>0]=cy.length;var wy=0;return cy.forEach(Cy=>wy+=Cy.length+1),ey[ay>>>2>>>0]=wy,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(z1,ay,cy,wy){ay>>>=0,cy>>>=0,wy>>>=0;for(var Cy=0,r0=0;r0<cy;r0++){var v0=ey[ay>>>2>>>0],Q0=ey[ay+4>>>2>>>0];ay+=8;for(var hv=0;hv<Q0;hv++){var uv=H1[v0+hv>>>0],J0=l0[z1];uv===0||uv===10?((z1===1?T1:P1)(y0(J0,0)),J0.length=0):J0.push(uv)}Cy+=Q0}return ey[wy>>>2>>>0]=Cy,0},r:b0,c:function(z1,ay,cy,wy){return b0(z1>>>0,ay>>>0,cy>>>0,wy>>>0)}},i0=function(){function z1(cy){return i0=cy.exports,i0=Iv(),k1=i0.K,oy(),U1.unshift(i0.L),K1--,K1==0&&J1&&(cy=J1,J1=null,cy()),i0}var ay={a:dv};if(K1++,o1.instantiateWasm)try{return o1.instantiateWasm(ay,z1)}catch(cy){P1(`Module.instantiateWasm callback failed with error: ${cy}`),u1(cy)}return Uy(ay,function(cy){z1(cy.instance)}).catch(u1),{}}();o1._OrtInit=(z1,ay)=>(o1._OrtInit=i0.M)(z1,ay),o1._OrtGetLastError=(z1,ay)=>(o1._OrtGetLastError=i0.N)(z1,ay),o1._OrtCreateSessionOptions=(z1,ay,cy,wy,Cy,r0,v0,Q0,hv,uv)=>(o1._OrtCreateSessionOptions=i0.O)(z1,ay,cy,wy,Cy,r0,v0,Q0,hv,uv),o1._OrtAppendExecutionProvider=(z1,ay)=>(o1._OrtAppendExecutionProvider=i0.P)(z1,ay),o1._OrtAddFreeDimensionOverride=(z1,ay,cy)=>(o1._OrtAddFreeDimensionOverride=i0.Q)(z1,ay,cy),o1._OrtAddSessionConfigEntry=(z1,ay,cy)=>(o1._OrtAddSessionConfigEntry=i0.R)(z1,ay,cy),o1._OrtReleaseSessionOptions=z1=>(o1._OrtReleaseSessionOptions=i0.S)(z1),o1._OrtCreateSession=(z1,ay,cy)=>(o1._OrtCreateSession=i0.T)(z1,ay,cy),o1._OrtReleaseSession=z1=>(o1._OrtReleaseSession=i0.U)(z1),o1._OrtGetInputOutputCount=(z1,ay,cy)=>(o1._OrtGetInputOutputCount=i0.V)(z1,ay,cy),o1._OrtGetInputName=(z1,ay)=>(o1._OrtGetInputName=i0.W)(z1,ay),o1._OrtGetOutputName=(z1,ay)=>(o1._OrtGetOutputName=i0.X)(z1,ay),o1._OrtFree=z1=>(o1._OrtFree=i0.Y)(z1),o1._OrtCreateTensor=(z1,ay,cy,wy,Cy,r0)=>(o1._OrtCreateTensor=i0.Z)(z1,ay,cy,wy,Cy,r0),o1._OrtGetTensorData=(z1,ay,cy,wy,Cy)=>(o1._OrtGetTensorData=i0._)(z1,ay,cy,wy,Cy),o1._OrtReleaseTensor=z1=>(o1._OrtReleaseTensor=i0.$)(z1),o1._OrtCreateRunOptions=(z1,ay,cy,wy)=>(o1._OrtCreateRunOptions=i0.aa)(z1,ay,cy,wy),o1._OrtAddRunConfigEntry=(z1,ay,cy)=>(o1._OrtAddRunConfigEntry=i0.ba)(z1,ay,cy),o1._OrtReleaseRunOptions=z1=>(o1._OrtReleaseRunOptions=i0.ca)(z1),o1._OrtCreateBinding=z1=>(o1._OrtCreateBinding=i0.da)(z1),o1._OrtBindInput=(z1,ay,cy)=>(o1._OrtBindInput=i0.ea)(z1,ay,cy),o1._OrtBindOutput=(z1,ay,cy,wy)=>(o1._OrtBindOutput=i0.fa)(z1,ay,cy,wy),o1._OrtClearBoundOutputs=z1=>(o1._OrtClearBoundOutputs=i0.ga)(z1),o1._OrtReleaseBinding=z1=>(o1._OrtReleaseBinding=i0.ha)(z1),o1._OrtRunWithBinding=(z1,ay,cy,wy,Cy)=>(o1._OrtRunWithBinding=i0.ia)(z1,ay,cy,wy,Cy),o1._OrtRun=(z1,ay,cy,wy,Cy,r0,v0,Q0)=>(o1._OrtRun=i0.ja)(z1,ay,cy,wy,Cy,r0,v0,Q0),o1._OrtEndProfiling=z1=>(o1._OrtEndProfiling=i0.ka)(z1),o1._malloc=z1=>(o1._malloc=i0.la)(z1),o1._free=z1=>(o1._free=i0.ma)(z1);var nv=z1=>(nv=i0.oa)(z1),xv=z1=>(xv=i0.pa)(z1),Tv=z1=>(Tv=i0.qa)(z1),qy=()=>(qy=i0.ra)();function Iv(){var z1=i0;z1=Object.assign({},z1);var ay=cy=>wy=>cy(wy)>>>0;return z1.la=ay(z1.la),z1.qa=ay(z1.qa),z1.ra=(cy=>()=>cy()>>>0)(z1.ra),z1}o1.stackSave=()=>qy(),o1.stackRestore=z1=>xv(z1),o1.stackAlloc=z1=>Tv(z1),o1.UTF8ToString=A0,o1.stringToUTF8=(z1,ay,cy)=>R0(z1,H1,ay,cy),o1.lengthBytesUTF8=lv;var u0;J1=function z1(){u0||ov(),u0||(J1=z1)};function ov(){if(!(0<K1)){if(o1.preRun)for(typeof o1.preRun=="function"&&(o1.preRun=[o1.preRun]);o1.preRun.length;){var z1=o1.preRun.shift();Q1.unshift(z1)}for(;0<Q1.length;)Q1.shift()(o1);if(!(0<K1||u0||(u0=!0,o1.calledRun=!0,N1))){for(;0<U1.length;)U1.shift()(o1);for(a1(o1);0<V1.length;)V1.shift()(o1)}}}return ov(),s1}})();typeof e1=="object"&&typeof _g=="object"?_g.exports=t1:typeof define=="function"&&define.amd&&define([],()=>t1)}),Ep$1=me(()=>{}),Dp$1=me(()=>{}),Lp$1={};Sr(Lp$1,{cpus:()=>ig});var ig,Cp$1=L$1(()=>{ig=void 0}),kp$1=me((e1,_g)=>{var t1=(()=>{var n1;var r1=typeof document<"u"?(n1=document.currentScript)==null?void 0:n1.src:void 0;return typeof __filename<"u"&&(r1||(r1=__filename)),function(i1={}){function o1(){return V1.buffer!=G1.buffer&&jy(),G1}function a1(){return V1.buffer!=G1.buffer&&jy(),Y1}function u1(){return V1.buffer!=G1.buffer&&jy(),yy}function s1(){return V1.buffer!=G1.buffer&&jy(),Oy}function l1(){return V1.buffer!=G1.buffer&&jy(),Ey}var c1=i1,d1,h1,f1=new Promise((R1,b1)=>{d1=R1,h1=b1}),g1=Object.assign({},c1),v1="./this.program",$1=(R1,b1)=>{throw b1},y1=typeof window=="object",_1=typeof importScripts=="function",E1=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T1=c1.ENVIRONMENT_IS_PTHREAD||!1,P1="";function k1(R1){return c1.locateFile?c1.locateFile(R1,P1):P1+R1}var N1,W1,H1;if(E1){var ty=(Qi$1(),ar(Zi$1)),ey=(ta(),ar(ea));P1=_1?ey.dirname(P1)+"/":__dirname+"/",N1=(R1,b1)=>(R1=lv(R1)?new URL(R1):ey.normalize(R1),ty.readFileSync(R1,b1?void 0:"utf8")),H1=R1=>(R1=N1(R1,!0),R1.buffer||(R1=new Uint8Array(R1)),R1),W1=(R1,b1,S1,A1=!0)=>{R1=lv(R1)?new URL(R1):ey.normalize(R1),ty.readFile(R1,A1?void 0:"utf8",(M1,F1)=>{M1?S1(M1):b1(A1?F1.buffer:F1)})},!c1.thisProgram&&1<process.argv.length&&(v1=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),$1=(R1,b1)=>{throw process.exitCode=R1,b1},global.Worker=Ep$1().Worker}else(y1||_1)&&(_1?P1=self.location.href:typeof document<"u"&&document.currentScript&&(P1=document.currentScript.src),typeof r1<"u"&&r1&&(P1=r1),P1.startsWith("blob:")?P1="":P1=P1.substr(0,P1.replace(/[?#].*/,"").lastIndexOf("/")+1),E1||(N1=R1=>{var b1=new XMLHttpRequest;return b1.open("GET",R1,!1),b1.send(null),b1.responseText},_1&&(H1=R1=>{var b1=new XMLHttpRequest;return b1.open("GET",R1,!1),b1.responseType="arraybuffer",b1.send(null),new Uint8Array(b1.response)}),W1=(R1,b1,S1)=>{var A1=new XMLHttpRequest;A1.open("GET",R1,!0),A1.responseType="arraybuffer",A1.onload=()=>{A1.status==200||A1.status==0&&A1.response?b1(A1.response):S1()},A1.onerror=S1,A1.send(null)}));E1&&typeof performance>"u"&&(global.performance=Dp$1().performance);var ly=console.log.bind(console),oy=console.error.bind(console);E1&&(ly=(...R1)=>ty.writeSync(1,R1.join(" ")+`
`),oy=(...R1)=>ty.writeSync(2,R1.join(" ")+`
`));var Q1=ly,U1=oy;Object.assign(c1,g1),g1=null;var V1,K1,J1=!1,hy,G1,Y1,yy,Oy,Ey;function jy(){var R1=V1.buffer;c1.HEAP8=G1=new Int8Array(R1),c1.HEAP16=new Int16Array(R1),c1.HEAPU8=Y1=new Uint8Array(R1),c1.HEAPU16=new Uint16Array(R1),c1.HEAP32=yy=new Int32Array(R1),c1.HEAPU32=Oy=new Uint32Array(R1),c1.HEAPF32=new Float32Array(R1),c1.HEAPF64=Ey=new Float64Array(R1)}var Ay=16777216;if(T1)V1=c1.wasmMemory;else if(c1.wasmMemory)V1=c1.wasmMemory;else if(V1=new WebAssembly.Memory({initial:Ay/65536,maximum:65536,shared:!0}),!(V1.buffer instanceof SharedArrayBuffer))throw U1("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),E1&&U1("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");jy(),Ay=V1.buffer.byteLength;var Uy=[],Gy=[],Wy=[],Yy=0,Vy=null;function p0(){if(Yy--,Yy==0&&Vy){var R1=Vy;Vy=null,R1()}}function y0(R1){throw R1="Aborted("+R1+")",U1(R1),J1=!0,hy=1,R1=new WebAssembly.RuntimeError(R1+". Build with -sASSERTIONS for more info."),h1(R1),R1}var A0=R1=>R1.startsWith("data:application/octet-stream;base64,"),lv=R1=>R1.startsWith("file://"),R0;R0="ort-wasm-threaded.wasm",A0(R0)||(R0=k1(R0));function X1(R1){if(H1)return H1(R1);throw"both async and sync fetching of the wasm failed"}function fy(R1){if(y1||_1){if(typeof fetch=="function"&&!lv(R1))return fetch(R1,{credentials:"same-origin"}).then(b1=>{if(!b1.ok)throw`failed to load wasm binary file at '${R1}'`;return b1.arrayBuffer()}).catch(()=>X1(R1));if(W1)return new Promise((b1,S1)=>{W1(R1,A1=>b1(new Uint8Array(A1)),S1)})}return Promise.resolve().then(()=>X1(R1))}function vy(R1,b1,S1){return fy(R1).then(A1=>WebAssembly.instantiate(A1,b1)).then(S1,A1=>{U1(`failed to asynchronously prepare wasm: ${A1}`),y0(A1)})}function Dy(R1,b1){var S1=R0;return typeof WebAssembly.instantiateStreaming!="function"||A0(S1)||lv(S1)||E1||typeof fetch!="function"?vy(S1,R1,b1):fetch(S1,{credentials:"same-origin"}).then(A1=>WebAssembly.instantiateStreaming(A1,R1).then(b1,function(M1){return U1(`wasm streaming compile failed: ${M1}`),U1("falling back to ArrayBuffer instantiation"),vy(S1,R1,b1)}))}var Ny,Ty={799444:(R1,b1,S1,A1)=>{if(typeof c1>"u"||!c1.bb)return 1;if(R1=Q0(R1>>>0),R1.startsWith("./")&&(R1=R1.substring(2)),R1=c1.bb.get(R1),!R1)return 2;if(b1>>>=0,S1>>>=0,A1>>>=0,b1+S1>R1.byteLength)return 3;try{return a1().set(R1.subarray(b1,b1+S1),A1>>>0),0}catch{return 4}}};function Hy(R1){this.name="ExitStatus",this.message=`Program terminated with exit(${R1})`,this.status=R1}var l0=R1=>{R1.terminate(),R1.onmessage=()=>{}},I0=R1=>{qy.Oa.length==0&&(xv(),qy.Xa(qy.Oa[0]));var b1=qy.Oa.pop();if(!b1)return 6;qy.Pa.push(b1),qy.La[R1.Na]=b1,b1.Na=R1.Na;var S1={cmd:"run",start_routine:R1.gb,arg:R1.cb,pthread_ptr:R1.Na};return E1&&b1.unref(),b1.postMessage(S1,R1.mb),0},$0=0,iv=R1=>{var b1=Pv();return R1=R1(),Ov(b1),R1},b0=(R1,b1,...S1)=>iv(()=>{for(var A1=S1.length,M1=M$(8*A1),F1=M1>>>3,ry=0;ry<S1.length;ry++){var _y=S1[ry];l1()[F1+ry>>>0]=_y}return k$(R1,0,A1,M1,b1)});function dv(R1){var b1;if(T1)return b0(0,1,R1);hy=R1,0<$0||(qy.hb(),(b1=c1.onExit)==null||b1.call(c1,R1),J1=!0),$1(R1,new Hy(R1))}var i0=R1=>{if(hy=R1,T1)throw u0(R1),"unwind";dv(R1)};function nv(){for(var R1=c1.numThreads;R1--;)xv();Uy.unshift(()=>{Yy++,Tv(()=>p0())})}function xv(){var R1=k1("ort-wasm-threaded.worker.js");R1=new Worker(R1),qy.Oa.push(R1)}function Tv(R1){T1?R1():Promise.all(qy.Oa.map(qy.Xa)).then(R1)}var qy={Oa:[],Pa:[],ab:[],La:{},Va(){T1?(qy.receiveObjectTransfer=qy.fb,qy.threadInitTLS=qy.$a,qy.setExitStatus=qy.Za):nv()},Za:R1=>hy=R1,pb:["$terminateWorker"],hb:()=>{for(var R1 of qy.Pa)l0(R1);for(R1 of qy.Oa)l0(R1);qy.Oa=[],qy.Pa=[],qy.La=[]},Ya:R1=>{var b1=R1.Na;delete qy.La[b1],qy.Oa.push(R1),qy.Pa.splice(qy.Pa.indexOf(R1),1),R1.Na=0,Fv(b1)},fb(){},$a(){qy.ab.forEach(R1=>R1())},Xa:R1=>new Promise(b1=>{R1.onmessage=F1=>{F1=F1.data;var ry=F1.cmd;if(F1.targetThread&&F1.targetThread!=V$()){var _y=qy.La[F1.targetThread];_y?_y.postMessage(F1,F1.transferList):U1(`Internal error! Worker sent a message "${ry}" to target pthread ${F1.targetThread}, but that thread no longer exists!`)}else ry==="checkMailbox"?Fy():ry==="spawnThread"?I0(F1):ry==="cleanupThread"?qy.Ya(qy.La[F1.thread]):ry==="killThread"?(F1=F1.thread,ry=qy.La[F1],delete qy.La[F1],l0(ry),Fv(F1),qy.Pa.splice(qy.Pa.indexOf(ry),1),ry.Na=0):ry==="cancelThread"?qy.La[F1.thread].postMessage({cmd:"cancel"}):ry==="loaded"?(R1.loaded=!0,E1&&!R1.Na&&R1.unref(),b1(R1)):ry==="alert"?alert(`Thread ${F1.threadId}: ${F1.text}`):F1.target==="setimmediate"?R1.postMessage(F1):ry==="callHandler"?c1[F1.handler](...F1.args):ry&&U1(`worker sent an unknown command ${ry}`)},R1.onerror=F1=>{throw U1(`worker sent an error! ${F1.filename}:${F1.lineno}: ${F1.message}`),F1},E1&&(R1.on("message",F1=>R1.onmessage({data:F1})),R1.on("error",F1=>R1.onerror(F1)));var S1=[],A1=["onExit"],M1;for(M1 of A1)c1.hasOwnProperty(M1)&&S1.push(M1);R1.postMessage({cmd:"load",handlers:S1,urlOrBlob:c1.mainScriptUrlOrBlob||r1,wasmMemory:V1,wasmModule:K1})})};c1.PThread=qy;var Iv=R1=>{for(;0<R1.length;)R1.shift()(c1)};c1.establishStackSpace=()=>{var R1=V$(),b1=s1()[R1+52>>>2>>>0];R1=s1()[R1+56>>>2>>>0],w$(b1,b1-R1),Ov(b1)};function u0(R1){if(T1)return b0(1,0,R1);i0(R1)}var ov=[],z1;c1.invokeEntryPoint=(R1,b1)=>{$0=0;var S1=ov[R1];S1||(R1>=ov.length&&(ov.length=R1+1),ov[R1]=S1=z1.get(R1)),R1=S1(b1),0<$0?qy.Za(R1):wv(R1)};class ay{constructor(b1){this.Ua=b1-24}Va(b1,S1){s1()[this.Ua+16>>>2>>>0]=0,s1()[this.Ua+4>>>2>>>0]=b1,s1()[this.Ua+8>>>2>>>0]=S1}}var cy=0;function wy(R1,b1,S1,A1){return T1?b0(2,1,R1,b1,S1,A1):Cy(R1,b1,S1,A1)}function Cy(R1,b1,S1,A1){if(R1>>>=0,b1>>>=0,S1>>>=0,A1>>>=0,typeof SharedArrayBuffer>"u")return U1("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var M1=[];return T1&&M1.length===0?wy(R1,b1,S1,A1):(R1={gb:S1,Na:R1,cb:A1,mb:M1},T1?(R1.ob="spawnThread",postMessage(R1,M1),0):I0(R1))}var r0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,v0=(R1,b1,S1)=>{b1>>>=0;var A1=b1+S1;for(S1=b1;R1[S1]&&!(S1>=A1);)++S1;if(16<S1-b1&&R1.buffer&&r0)return r0.decode(R1.buffer instanceof SharedArrayBuffer?R1.slice(b1,S1):R1.subarray(b1,S1));for(A1="";b1<S1;){var M1=R1[b1++];if(M1&128){var F1=R1[b1++]&63;if((M1&224)==192)A1+=String.fromCharCode((M1&31)<<6|F1);else{var ry=R1[b1++]&63;M1=(M1&240)==224?(M1&15)<<12|F1<<6|ry:(M1&7)<<18|F1<<12|ry<<6|R1[b1++]&63,65536>M1?A1+=String.fromCharCode(M1):(M1-=65536,A1+=String.fromCharCode(55296|M1>>10,56320|M1&1023))}}else A1+=String.fromCharCode(M1)}return A1},Q0=(R1,b1)=>(R1>>>=0)?v0(a1(),R1,b1):"";function hv(R1,b1,S1){return T1?b0(3,1,R1,b1,S1):0}function uv(R1,b1){if(T1)return b0(4,1,R1,b1)}var J0=R1=>{for(var b1=0,S1=0;S1<R1.length;++S1){var A1=R1.charCodeAt(S1);127>=A1?b1++:2047>=A1?b1+=2:55296<=A1&&57343>=A1?(b1+=4,++S1):b1+=3}return b1},Wv=(R1,b1,S1,A1)=>{if(S1>>>=0,!(0<A1))return 0;var M1=S1;A1=S1+A1-1;for(var F1=0;F1<R1.length;++F1){var ry=R1.charCodeAt(F1);if(55296<=ry&&57343>=ry){var _y=R1.charCodeAt(++F1);ry=65536+((ry&1023)<<10)|_y&1023}if(127>=ry){if(S1>=A1)break;b1[S1++>>>0]=ry}else{if(2047>=ry){if(S1+1>=A1)break;b1[S1++>>>0]=192|ry>>6}else{if(65535>=ry){if(S1+2>=A1)break;b1[S1++>>>0]=224|ry>>12}else{if(S1+3>=A1)break;b1[S1++>>>0]=240|ry>>18,b1[S1++>>>0]=128|ry>>12&63}b1[S1++>>>0]=128|ry>>6&63}b1[S1++>>>0]=128|ry&63}}return b1[S1>>>0]=0,S1-M1},yv=(R1,b1,S1)=>Wv(R1,a1(),b1,S1);function gy(R1,b1){if(T1)return b0(5,1,R1,b1)}function T0(R1,b1,S1){if(T1)return b0(6,1,R1,b1,S1)}function C0(R1,b1,S1){return T1?b0(7,1,R1,b1,S1):0}function q0(R1,b1){if(T1)return b0(8,1,R1,b1)}function Hv(R1,b1,S1){if(T1)return b0(9,1,R1,b1,S1)}function Cv(R1,b1,S1,A1){if(T1)return b0(10,1,R1,b1,S1,A1)}function $$(R1,b1,S1,A1){if(T1)return b0(11,1,R1,b1,S1,A1)}function b$(R1,b1,S1,A1){if(T1)return b0(12,1,R1,b1,S1,A1)}function I$(R1){if(T1)return b0(13,1,R1)}function Lv(R1,b1){if(T1)return b0(14,1,R1,b1)}function u$(R1,b1,S1){if(T1)return b0(15,1,R1,b1,S1)}function sy(R1){R1>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(u1(),R1>>>2,R1).value.then(Fy),R1+=128,Atomics.store(u1(),R1>>>2,1))}c1.__emscripten_thread_mailbox_await=sy;var Fy=()=>{var R1=V$();if(R1&&(sy(R1),R1=x$,!J1))try{if(R1(),!(0<$0))try{T1?wv(hy):i0(hy)}catch(b1){b1 instanceof Hy||b1=="unwind"||$1(1,b1)}}catch(b1){b1 instanceof Hy||b1=="unwind"||$1(1,b1)}};c1.checkMailbox=Fy;var e0=[],E0=R1=>R1%4===0&&(R1%100!==0||R1%400===0),D0=[0,31,60,91,121,152,182,213,244,274,305,335],sv=[0,31,59,90,120,151,181,212,243,273,304,334];function B0(R1,b1,S1,A1,M1,F1,ry,_y){return T1?b0(16,1,R1,b1,S1,A1,M1,F1,ry,_y):-52}function P0(R1,b1,S1,A1,M1,F1,ry){if(T1)return b0(17,1,R1,b1,S1,A1,M1,F1,ry)}var H0=[],pv={},Z0=()=>{if(!cv){var R1={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v1||"./this.program"},b1;for(b1 in pv)pv[b1]===void 0?delete R1[b1]:R1[b1]=pv[b1];var S1=[];for(b1 in R1)S1.push(`${b1}=${R1[b1]}`);cv=S1}return cv},cv;function x0(R1,b1){if(T1)return b0(18,1,R1,b1);R1>>>=0,b1>>>=0;var S1=0;return Z0().forEach((A1,M1)=>{var F1=b1+S1;for(M1=s1()[R1+4*M1>>>2>>>0]=F1,F1=0;F1<A1.length;++F1)o1()[M1++>>>0]=A1.charCodeAt(F1);o1()[M1>>>0]=0,S1+=A1.length+1}),0}function ev(R1,b1){if(T1)return b0(19,1,R1,b1);R1>>>=0,b1>>>=0;var S1=Z0();s1()[R1>>>2>>>0]=S1.length;var A1=0;return S1.forEach(M1=>A1+=M1.length+1),s1()[b1>>>2>>>0]=A1,0}function Dv(R1){return T1?b0(20,1,R1):52}function fv(R1,b1,S1,A1){return T1?b0(21,1,R1,b1,S1,A1):52}function n$(R1,b1,S1,A1,M1){return T1?b0(22,1,R1,b1,S1,A1,M1):70}var f0=[null,[],[]];function vv(R1,b1,S1,A1){if(T1)return b0(23,1,R1,b1,S1,A1);b1>>>=0,S1>>>=0,A1>>>=0;for(var M1=0,F1=0;F1<S1;F1++){var ry=s1()[b1>>>2>>>0],_y=s1()[b1+4>>>2>>>0];b1+=8;for(var ky=0;ky<_y;ky++){var zy=a1()[ry+ky>>>0],By=f0[R1];zy===0||zy===10?((R1===1?Q1:U1)(v0(By,0)),By.length=0):By.push(zy)}M1+=_y}return s1()[A1>>>2>>>0]=M1,0}var mv=[31,29,31,30,31,30,31,31,30,31,30,31],Gv=[31,28,31,30,31,30,31,31,30,31,30,31];function qv(R1){var b1=Array(J0(R1)+1);return Wv(R1,b1,0,b1.length),b1}var c$=(R1,b1)=>{o1().set(R1,b1>>>0)};function U$(R1,b1,S1,A1){function M1(my,py,Xy){for(my=typeof my=="number"?my.toString():my||"";my.length<py;)my=Xy[0]+my;return my}function F1(my,py){return M1(my,py,"0")}function ry(my,py){function Xy(j0){return 0>j0?-1:0<j0?1:0}var Qy;return(Qy=Xy(my.getFullYear()-py.getFullYear()))===0&&(Qy=Xy(my.getMonth()-py.getMonth()))===0&&(Qy=Xy(my.getDate()-py.getDate())),Qy}function _y(my){switch(my.getDay()){case 0:return new Date(my.getFullYear()-1,11,29);case 1:return my;case 2:return new Date(my.getFullYear(),0,3);case 3:return new Date(my.getFullYear(),0,2);case 4:return new Date(my.getFullYear(),0,1);case 5:return new Date(my.getFullYear()-1,11,31);case 6:return new Date(my.getFullYear()-1,11,30)}}function ky(my){var py=my.Qa;for(my=new Date(new Date(my.Ra+1900,0,1).getTime());0<py;){var Xy=my.getMonth(),Qy=(E0(my.getFullYear())?mv:Gv)[Xy];if(py>Qy-my.getDate())py-=Qy-my.getDate()+1,my.setDate(1),11>Xy?my.setMonth(Xy+1):(my.setMonth(0),my.setFullYear(my.getFullYear()+1));else{my.setDate(my.getDate()+py);break}}return Xy=new Date(my.getFullYear()+1,0,4),py=_y(new Date(my.getFullYear(),0,4)),Xy=_y(Xy),0>=ry(py,my)?0>=ry(Xy,my)?my.getFullYear()+1:my.getFullYear():my.getFullYear()-1}R1>>>=0,b1>>>=0,S1>>>=0,A1>>>=0;var zy=s1()[A1+40>>>2>>>0];A1={kb:u1()[A1>>>2>>>0],jb:u1()[A1+4>>>2>>>0],Sa:u1()[A1+8>>>2>>>0],Wa:u1()[A1+12>>>2>>>0],Ta:u1()[A1+16>>>2>>>0],Ra:u1()[A1+20>>>2>>>0],Ma:u1()[A1+24>>>2>>>0],Qa:u1()[A1+28>>>2>>>0],qb:u1()[A1+32>>>2>>>0],ib:u1()[A1+36>>>2>>>0],lb:zy?Q0(zy):""},S1=Q0(S1),zy={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var By in zy)S1=S1.replace(new RegExp(By,"g"),zy[By]);var a0="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),N0="January February March April May June July August September October November December".split(" ");zy={"%a":my=>a0[my.Ma].substring(0,3),"%A":my=>a0[my.Ma],"%b":my=>N0[my.Ta].substring(0,3),"%B":my=>N0[my.Ta],"%C":my=>F1((my.Ra+1900)/100|0,2),"%d":my=>F1(my.Wa,2),"%e":my=>M1(my.Wa,2," "),"%g":my=>ky(my).toString().substring(2),"%G":ky,"%H":my=>F1(my.Sa,2),"%I":my=>(my=my.Sa,my==0?my=12:12<my&&(my-=12),F1(my,2)),"%j":my=>{for(var py=0,Xy=0;Xy<=my.Ta-1;py+=(E0(my.Ra+1900)?mv:Gv)[Xy++]);return F1(my.Wa+py,3)},"%m":my=>F1(my.Ta+1,2),"%M":my=>F1(my.jb,2),"%n":()=>`
`,"%p":my=>0<=my.Sa&&12>my.Sa?"AM":"PM","%S":my=>F1(my.kb,2),"%t":()=>"	","%u":my=>my.Ma||7,"%U":my=>F1(Math.floor((my.Qa+7-my.Ma)/7),2),"%V":my=>{var py=Math.floor((my.Qa+7-(my.Ma+6)%7)/7);if(2>=(my.Ma+371-my.Qa-2)%7&&py++,py)py==53&&(Xy=(my.Ma+371-my.Qa)%7,Xy==4||Xy==3&&E0(my.Ra)||(py=1));else{py=52;var Xy=(my.Ma+7-my.Qa-1)%7;(Xy==4||Xy==5&&E0(my.Ra%400-1))&&py++}return F1(py,2)},"%w":my=>my.Ma,"%W":my=>F1(Math.floor((my.Qa+7-(my.Ma+6)%7)/7),2),"%y":my=>(my.Ra+1900).toString().substring(2),"%Y":my=>my.Ra+1900,"%z":my=>{my=my.ib;var py=0<=my;return my=Math.abs(my)/60,(py?"+":"-")+("0000"+(my/60*100+my%60)).slice(-4)},"%Z":my=>my.lb,"%%":()=>"%"},S1=S1.replace(/%%/g,"\0\0");for(By in zy)S1.includes(By)&&(S1=S1.replace(new RegExp(By,"g"),zy[By](A1)));return S1=S1.replace(/\0\0/g,"%"),By=qv(S1),By.length>b1?0:(c$(By,R1),By.length-1)}qy.Va();var ex=[dv,u0,wy,hv,uv,gy,T0,C0,q0,Hv,Cv,$$,b$,I$,Lv,u$,B0,P0,x0,ev,Dv,fv,n$,vv],P$={b:function(R1,b1,S1){throw R1>>>=0,new ay(R1).Va(b1>>>0,S1>>>0),cy=R1,cy},L:function(R1){c0(R1>>>0,!_1,1,!y1,131072,!1),qy.$a()},j:function(R1){R1>>>=0,T1?postMessage({cmd:"cleanupThread",thread:R1}):qy.Ya(qy.La[R1])},H:Cy,h:hv,S:uv,D:gy,F:T0,T:C0,Q:q0,J:Hv,P:Cv,n:$$,E:b$,B:I$,R:Lv,C:u$,p:()=>1,z:function(R1,b1){R1>>>=0,R1==b1>>>0?setTimeout(Fy):T1?postMessage({targetThread:R1,cmd:"checkMailbox"}):(R1=qy.La[R1])&&R1.postMessage({cmd:"checkMailbox"})},I:function(R1,b1,S1,A1,M1){b1>>>=0,S1>>>=0,e0.length=A1,M1=M1>>>0>>>3;for(var F1=0;F1<A1;F1++)e0[F1]=l1()[M1+F1>>>0];return R1=b1?Ty[b1]:ex[R1],qy.eb=S1,S1=R1(...e0),qy.eb=0,S1},K:sy,o:function(R1){E1&&qy.La[R1>>>0].ref()},s:function(R1,b1,S1){R1=b1+2097152>>>0<4194305-!!R1?(R1>>>0)+4294967296*b1:NaN,S1>>>=0,R1=new Date(1e3*R1),u1()[S1>>>2>>>0]=R1.getUTCSeconds(),u1()[S1+4>>>2>>>0]=R1.getUTCMinutes(),u1()[S1+8>>>2>>>0]=R1.getUTCHours(),u1()[S1+12>>>2>>>0]=R1.getUTCDate(),u1()[S1+16>>>2>>>0]=R1.getUTCMonth(),u1()[S1+20>>>2>>>0]=R1.getUTCFullYear()-1900,u1()[S1+24>>>2>>>0]=R1.getUTCDay(),R1=(R1.getTime()-Date.UTC(R1.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,u1()[S1+28>>>2>>>0]=R1},t:function(R1,b1,S1){R1=b1+2097152>>>0<4194305-!!R1?(R1>>>0)+4294967296*b1:NaN,S1>>>=0,R1=new Date(1e3*R1),u1()[S1>>>2>>>0]=R1.getSeconds(),u1()[S1+4>>>2>>>0]=R1.getMinutes(),u1()[S1+8>>>2>>>0]=R1.getHours(),u1()[S1+12>>>2>>>0]=R1.getDate(),u1()[S1+16>>>2>>>0]=R1.getMonth(),u1()[S1+20>>>2>>>0]=R1.getFullYear()-1900,u1()[S1+24>>>2>>>0]=R1.getDay(),b1=(E0(R1.getFullYear())?D0:sv)[R1.getMonth()]+R1.getDate()-1|0,u1()[S1+28>>>2>>>0]=b1,u1()[S1+36>>>2>>>0]=-(60*R1.getTimezoneOffset()),b1=new Date(R1.getFullYear(),6,1).getTimezoneOffset();var A1=new Date(R1.getFullYear(),0,1).getTimezoneOffset();R1=(b1!=A1&&R1.getTimezoneOffset()==Math.min(A1,b1))|0,u1()[S1+32>>>2>>>0]=R1},u:function(R1){R1>>>=0;var b1=new Date(u1()[R1+20>>>2>>>0]+1900,u1()[R1+16>>>2>>>0],u1()[R1+12>>>2>>>0],u1()[R1+8>>>2>>>0],u1()[R1+4>>>2>>>0],u1()[R1>>>2>>>0],0),S1=u1()[R1+32>>>2>>>0],A1=b1.getTimezoneOffset(),M1=new Date(b1.getFullYear(),6,1).getTimezoneOffset(),F1=new Date(b1.getFullYear(),0,1).getTimezoneOffset(),ry=Math.min(F1,M1);return 0>S1?u1()[R1+32>>>2>>>0]=+(M1!=F1&&ry==A1):0<S1!=(ry==A1)&&(M1=Math.max(F1,M1),b1.setTime(b1.getTime()+6e4*((0<S1?ry:M1)-A1))),u1()[R1+24>>>2>>>0]=b1.getDay(),S1=(E0(b1.getFullYear())?D0:sv)[b1.getMonth()]+b1.getDate()-1|0,u1()[R1+28>>>2>>>0]=S1,u1()[R1>>>2>>>0]=b1.getSeconds(),u1()[R1+4>>>2>>>0]=b1.getMinutes(),u1()[R1+8>>>2>>>0]=b1.getHours(),u1()[R1+12>>>2>>>0]=b1.getDate(),u1()[R1+16>>>2>>>0]=b1.getMonth(),u1()[R1+20>>>2>>>0]=b1.getYear(),R1=b1.getTime(),R1=isNaN(R1)?-1:R1/1e3,d$((Ny=R1,1<=+Math.abs(Ny)?0<Ny?+Math.floor(Ny/4294967296)>>>0:~~+Math.ceil((Ny-+(~~Ny>>>0))/4294967296)>>>0:0)),R1>>>0},q:B0,r:P0,y:function(R1,b1,S1,A1){R1>>>=0,b1>>>=0,S1>>>=0,A1>>>=0;var M1=new Date().getFullYear(),F1=new Date(M1,0,1),ry=new Date(M1,6,1);M1=F1.getTimezoneOffset();var _y=ry.getTimezoneOffset(),ky=Math.max(M1,_y);s1()[R1>>>2>>>0]=60*ky,u1()[b1>>>2>>>0]=+(M1!=_y),R1=zy=>zy.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],F1=R1(F1),ry=R1(ry),_y<M1?(yv(F1,S1,17),yv(ry,A1,17)):(yv(F1,A1,17),yv(ry,S1,17))},c:()=>{y0("")},O:function(R1,b1,S1){R1>>>=0,b1>>>=0,S1>>>=0,H0.length=0;for(var A1;A1=a1()[b1++>>>0];){var M1=A1!=105;M1&=A1!=112,S1+=M1&&S1%8?4:0,H0.push(A1==112?s1()[S1>>>2>>>0]:A1==105?u1()[S1>>>2>>>0]:l1()[S1>>>3>>>0]),S1+=M1?8:4}return Ty[R1](...H0)},k:()=>{},i:()=>Date.now(),U:()=>{throw $0+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>E1?(Cp$1(),ar(Lp$1)).cpus().length:navigator.hardwareConcurrency,x:function(R1){R1>>>=0;var b1=a1().length;if(R1<=b1||4294901760<R1)return!1;for(var S1=1;4>=S1;S1*=2){var A1=b1*(1+.2/S1);A1=Math.min(A1,R1+100663296);var M1=Math;A1=Math.max(R1,A1);e:{M1=(M1.min.call(M1,4294901760,A1+(65536-A1%65536)%65536)-V1.buffer.byteLength+65535)/65536;try{V1.grow(M1),jy();var F1=1;break e}catch{}F1=void 0}if(F1)return!0}return!1},M:x0,N:ev,G:i0,g:Dv,m:fv,v:n$,l:vv,a:V1||c1.wasmMemory,w:U$,d:function(R1,b1,S1,A1){return U$(R1>>>0,b1>>>0,S1>>>0,A1>>>0)}},s0=function(){function R1(S1,A1){return s0=S1.exports,s0=Nv(),qy.ab.push(s0.ya),z1=s0.za,Gy.unshift(s0.V),K1=A1,p0(),s0}var b1={a:P$};if(Yy++,c1.instantiateWasm)try{return c1.instantiateWasm(b1,R1)}catch(S1){U1(`Module.instantiateWasm callback failed with error: ${S1}`),h1(S1)}return Dy(b1,function(S1){R1(S1.instance,S1.module)}).catch(h1),{}}();c1._OrtInit=(R1,b1)=>(c1._OrtInit=s0.W)(R1,b1),c1._OrtGetLastError=(R1,b1)=>(c1._OrtGetLastError=s0.X)(R1,b1),c1._OrtCreateSessionOptions=(R1,b1,S1,A1,M1,F1,ry,_y,ky,zy)=>(c1._OrtCreateSessionOptions=s0.Y)(R1,b1,S1,A1,M1,F1,ry,_y,ky,zy),c1._OrtAppendExecutionProvider=(R1,b1)=>(c1._OrtAppendExecutionProvider=s0.Z)(R1,b1),c1._OrtAddFreeDimensionOverride=(R1,b1,S1)=>(c1._OrtAddFreeDimensionOverride=s0._)(R1,b1,S1),c1._OrtAddSessionConfigEntry=(R1,b1,S1)=>(c1._OrtAddSessionConfigEntry=s0.$)(R1,b1,S1),c1._OrtReleaseSessionOptions=R1=>(c1._OrtReleaseSessionOptions=s0.aa)(R1),c1._OrtCreateSession=(R1,b1,S1)=>(c1._OrtCreateSession=s0.ba)(R1,b1,S1),c1._OrtReleaseSession=R1=>(c1._OrtReleaseSession=s0.ca)(R1),c1._OrtGetInputOutputCount=(R1,b1,S1)=>(c1._OrtGetInputOutputCount=s0.da)(R1,b1,S1),c1._OrtGetInputName=(R1,b1)=>(c1._OrtGetInputName=s0.ea)(R1,b1),c1._OrtGetOutputName=(R1,b1)=>(c1._OrtGetOutputName=s0.fa)(R1,b1),c1._OrtFree=R1=>(c1._OrtFree=s0.ga)(R1),c1._OrtCreateTensor=(R1,b1,S1,A1,M1,F1)=>(c1._OrtCreateTensor=s0.ha)(R1,b1,S1,A1,M1,F1),c1._OrtGetTensorData=(R1,b1,S1,A1,M1)=>(c1._OrtGetTensorData=s0.ia)(R1,b1,S1,A1,M1),c1._OrtReleaseTensor=R1=>(c1._OrtReleaseTensor=s0.ja)(R1),c1._OrtCreateRunOptions=(R1,b1,S1,A1)=>(c1._OrtCreateRunOptions=s0.ka)(R1,b1,S1,A1),c1._OrtAddRunConfigEntry=(R1,b1,S1)=>(c1._OrtAddRunConfigEntry=s0.la)(R1,b1,S1),c1._OrtReleaseRunOptions=R1=>(c1._OrtReleaseRunOptions=s0.ma)(R1),c1._OrtCreateBinding=R1=>(c1._OrtCreateBinding=s0.na)(R1),c1._OrtBindInput=(R1,b1,S1)=>(c1._OrtBindInput=s0.oa)(R1,b1,S1),c1._OrtBindOutput=(R1,b1,S1,A1)=>(c1._OrtBindOutput=s0.pa)(R1,b1,S1,A1),c1._OrtClearBoundOutputs=R1=>(c1._OrtClearBoundOutputs=s0.qa)(R1),c1._OrtReleaseBinding=R1=>(c1._OrtReleaseBinding=s0.ra)(R1),c1._OrtRunWithBinding=(R1,b1,S1,A1,M1)=>(c1._OrtRunWithBinding=s0.sa)(R1,b1,S1,A1,M1),c1._OrtRun=(R1,b1,S1,A1,M1,F1,ry,_y)=>(c1._OrtRun=s0.ta)(R1,b1,S1,A1,M1,F1,ry,_y),c1._OrtEndProfiling=R1=>(c1._OrtEndProfiling=s0.ua)(R1);var V$=c1._pthread_self=()=>(V$=c1._pthread_self=s0.va)();c1._malloc=R1=>(c1._malloc=s0.wa)(R1),c1._free=R1=>(c1._free=s0.xa)(R1),c1.__emscripten_tls_init=()=>(c1.__emscripten_tls_init=s0.ya)();var c0=c1.__emscripten_thread_init=(R1,b1,S1,A1,M1,F1)=>(c0=c1.__emscripten_thread_init=s0.Aa)(R1,b1,S1,A1,M1,F1);c1.__emscripten_thread_crashed=()=>(c1.__emscripten_thread_crashed=s0.Ba)();var k$=(R1,b1,S1,A1,M1)=>(k$=s0.Ca)(R1,b1,S1,A1,M1),Fv=R1=>(Fv=s0.Da)(R1),wv=c1.__emscripten_thread_exit=R1=>(wv=c1.__emscripten_thread_exit=s0.Ea)(R1),x$=()=>(x$=s0.Fa)(),d$=R1=>(d$=s0.Ga)(R1),w$=(R1,b1)=>(w$=s0.Ha)(R1,b1),Ov=R1=>(Ov=s0.Ia)(R1),M$=R1=>(M$=s0.Ja)(R1),Pv=()=>(Pv=s0.Ka)();function Nv(){var R1=s0;R1=Object.assign({},R1);var b1=A1=>()=>A1()>>>0,S1=A1=>M1=>A1(M1)>>>0;return R1.va=b1(R1.va),R1.wa=S1(R1.wa),R1.emscripten_main_runtime_thread_id=b1(R1.emscripten_main_runtime_thread_id),R1.Ja=S1(R1.Ja),R1.Ka=b1(R1.Ka),R1}c1.wasmMemory=V1,c1.stackSave=()=>Pv(),c1.stackRestore=R1=>Ov(R1),c1.stackAlloc=R1=>M$(R1),c1.keepRuntimeAlive=()=>0<$0,c1.UTF8ToString=Q0,c1.stringToUTF8=yv,c1.lengthBytesUTF8=J0,c1.ExitStatus=Hy,c1.PThread=qy;var _$;Vy=function R1(){_$||Kv(),_$||(Vy=R1)};function Kv(){if(!(0<Yy))if(T1)d1(c1),T1||Iv(Gy),startWorker(c1);else{if(c1.preRun)for(typeof c1.preRun=="function"&&(c1.preRun=[c1.preRun]);c1.preRun.length;)Uy.unshift(c1.preRun.shift());Iv(Uy),0<Yy||_$||(_$=!0,c1.calledRun=!0,J1||(T1||Iv(Gy),d1(c1),T1||Iv(Wy)))}}return Kv(),f1}})();typeof e1=="object"&&typeof _g=="object"?_g.exports=t1:typeof define=="function"&&define.amd&&define([],()=>t1)}),Bp$1=me((e1,_g)=>{_g.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp$1,sg,oa$1,ia$1,So$1,Np$1,ug,lg,fg,Mp$1,De$1,Ur=L$1(()=>{Rp$1=Pp$1(),sg=kp$1(),ia$1=!1,So$1=!1,Np$1=!1,ug=e1=>{if(e1===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e1+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e1+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg=(e1,_g)=>e1?_g?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":_g?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp$1=async e1=>{if(ia$1)return Promise.resolve();if(So$1)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np$1)throw new Error("previous call to 'initializeWebAssembly()' failed.");So$1=!0;let _g=e1.initTimeout,t1=e1.numThreads,r1=e1.simd,n1=ug(t1),i1=r1&&lg(),o1=e1.wasmPaths,a1=typeof o1=="string"?o1:void 0,u1=fg(i1,n1),s1=typeof o1=="object"?o1[u1]:void 0,l1=!1,c1=[];if(_g>0&&c1.push(new Promise(d1=>{setTimeout(()=>{l1=!0,d1()},_g)})),c1.push(new Promise((d1,h1)=>{let f1=n1?sg:Rp$1,g1={locateFile:(v1,$1)=>n1&&v1.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp$1()],{type:"text/javascript"})):v1.endsWith(".wasm")?s1||(a1??$1)+u1:$1+v1};if(n1)if(g1.numThreads=t1,typeof Blob>"u")g1.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v1=`var ortWasmThreaded=${f1.toString()};`;g1.mainScriptUrlOrBlob=new Blob([v1],{type:"text/javascript"})}f1(g1).then(v1=>{So$1=!1,ia$1=!0,oa$1=v1,d1()},v1=>{So$1=!1,Np$1=!0,h1(v1)})})),await Promise.race(c1),l1)throw new Error(`WebAssembly backend initializing failed due to timeout: ${_g}ms`)},De$1=()=>{if(ia$1&&oa$1)return oa$1;throw new Error("WebAssembly is not initialized yet.")}}),ve,bn,_e$1,Ao=L$1(()=>{Ur(),ve=(e1,_g)=>{let t1=De$1(),r1=t1.lengthBytesUTF8(e1)+1,n1=t1._malloc(r1);return t1.stringToUTF8(e1,n1,r1),_g.push(n1),n1},bn=(e1,_g,t1,r1)=>{if(typeof e1=="object"&&e1!==null){if(t1.has(e1))throw new Error("Circular reference in options");t1.add(e1)}Object.entries(e1).forEach(([n1,i1])=>{let o1=_g?_g+n1:n1;if(typeof i1=="object")bn(i1,o1+".",t1,r1);else if(typeof i1=="string"||typeof i1=="number")r1(o1,i1.toString());else if(typeof i1=="boolean")r1(o1,i1?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof i1}`)})},_e$1=e1=>{let _g=De$1(),t1=_g.stackSave();try{let r1=_g.stackAlloc(8);_g._OrtGetLastError(r1,r1+4);let n1=_g.HEAP32[r1/4],i1=_g.HEAPU32[r1/4+1],o1=i1?_g.UTF8ToString(i1):"";throw new Error(`${e1} ERROR_CODE: ${n1}, ERROR_MESSAGE: ${o1}`)}finally{_g.stackRestore(t1)}}}),Gp$1,Up$1=L$1(()=>{Ur(),Ao(),Gp$1=e1=>{let _g=De$1(),t1=0,r1=[],n1=e1||{};try{if((e1==null?void 0:e1.logSeverityLevel)===void 0)n1.logSeverityLevel=2;else if(typeof e1.logSeverityLevel!="number"||!Number.isInteger(e1.logSeverityLevel)||e1.logSeverityLevel<0||e1.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e1.logSeverityLevel}`);if((e1==null?void 0:e1.logVerbosityLevel)===void 0)n1.logVerbosityLevel=0;else if(typeof e1.logVerbosityLevel!="number"||!Number.isInteger(e1.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e1.logVerbosityLevel}`);(e1==null?void 0:e1.terminate)===void 0&&(n1.terminate=!1);let i1=0;return(e1==null?void 0:e1.tag)!==void 0&&(i1=ve(e1.tag,r1)),t1=_g._OrtCreateRunOptions(n1.logSeverityLevel,n1.logVerbosityLevel,!!n1.terminate,i1),t1===0&&_e$1("Can't create run options."),(e1==null?void 0:e1.extra)!==void 0&&bn(e1.extra,"",new WeakSet,(o1,a1)=>{let u1=ve(o1,r1),s1=ve(a1,r1);_g._OrtAddRunConfigEntry(t1,u1,s1)!==0&&_e$1(`Can't set a run config entry: ${o1} - ${a1}.`)}),[t1,r1]}catch(i1){throw t1!==0&&_g._OrtReleaseRunOptions(t1),r1.forEach(o1=>_g._free(o1)),i1}}}),cg,pg,dg,hg,zp$1,Vp$1=L$1(()=>{Ur(),Ao(),cg=e1=>{switch(e1){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e1}`)}},pg=e1=>{switch(e1){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e1}`)}},dg=e1=>{e1.extra||(e1.extra={}),e1.extra.session||(e1.extra.session={});let _g=e1.extra.session;_g.use_ort_model_bytes_directly||(_g.use_ort_model_bytes_directly="1"),e1.executionProviders&&e1.executionProviders.some(t1=>(typeof t1=="string"?t1:t1.name)==="webgpu")&&(e1.enableMemPattern=!1)},hg=(e1,_g,t1)=>{for(let r1 of _g){let n1=typeof r1=="string"?r1:r1.name;switch(n1){case"webnn":if(n1="WEBNN",typeof r1!="string"){let o1=r1;if(o1!=null&&o1.deviceType){let a1=ve("deviceType",t1),u1=ve(o1.deviceType,t1);De$1()._OrtAddSessionConfigEntry(e1,a1,u1)!==0&&_e$1(`Can't set a session config entry: 'deviceType' - ${o1.deviceType}.`)}if(o1!=null&&o1.numThreads){let a1=o1.numThreads;(typeof a1!="number"||!Number.isInteger(a1)||a1<0)&&(a1=0);let u1=ve("numThreads",t1),s1=ve(a1.toString(),t1);De$1()._OrtAddSessionConfigEntry(e1,u1,s1)!==0&&_e$1(`Can't set a session config entry: 'numThreads' - ${o1.numThreads}.`)}if(o1!=null&&o1.powerPreference){let a1=ve("powerPreference",t1),u1=ve(o1.powerPreference,t1);De$1()._OrtAddSessionConfigEntry(e1,a1,u1)!==0&&_e$1(`Can't set a session config entry: 'powerPreference' - ${o1.powerPreference}.`)}}break;case"webgpu":if(n1="JS",typeof r1!="string"){let o1=r1;if(o1!=null&&o1.preferredLayout){if(o1.preferredLayout!=="NCHW"&&o1.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${o1.preferredLayout}`);let a1=ve("preferredLayout",t1),u1=ve(o1.preferredLayout,t1);De$1()._OrtAddSessionConfigEntry(e1,a1,u1)!==0&&_e$1(`Can't set a session config entry: 'preferredLayout' - ${o1.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${n1}`)}let i1=ve(n1,t1);De$1()._OrtAppendExecutionProvider(e1,i1)!==0&&_e$1(`Can't append execution provider: ${n1}.`)}},zp$1=e1=>{let _g=De$1(),t1=0,r1=[],n1=e1||{};dg(n1);try{let i1=cg(n1.graphOptimizationLevel??"all"),o1=pg(n1.executionMode??"sequential"),a1=typeof n1.logId=="string"?ve(n1.logId,r1):0,u1=n1.logSeverityLevel??2;if(!Number.isInteger(u1)||u1<0||u1>4)throw new Error(`log serverity level is not valid: ${u1}`);let s1=n1.logVerbosityLevel??0;if(!Number.isInteger(s1)||s1<0||s1>4)throw new Error(`log verbosity level is not valid: ${s1}`);let l1=typeof n1.optimizedModelFilePath=="string"?ve(n1.optimizedModelFilePath,r1):0;if(t1=_g._OrtCreateSessionOptions(i1,!!n1.enableCpuMemArena,!!n1.enableMemPattern,o1,!!n1.enableProfiling,0,a1,u1,s1,l1),t1===0&&_e$1("Can't create session options."),n1.executionProviders&&hg(t1,n1.executionProviders,r1),n1.enableGraphCapture!==void 0){if(typeof n1.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${n1.enableGraphCapture}`);let c1=ve("enableGraphCapture",r1),d1=ve(n1.enableGraphCapture.toString(),r1);_g._OrtAddSessionConfigEntry(t1,c1,d1)!==0&&_e$1(`Can't set a session config entry: 'enableGraphCapture' - ${n1.enableGraphCapture}.`)}if(n1.freeDimensionOverrides)for(let[c1,d1]of Object.entries(n1.freeDimensionOverrides)){if(typeof c1!="string")throw new Error(`free dimension override name must be a string: ${c1}`);if(typeof d1!="number"||!Number.isInteger(d1)||d1<0)throw new Error(`free dimension override value must be a non-negative integer: ${d1}`);let h1=ve(c1,r1);_g._OrtAddFreeDimensionOverride(t1,h1,d1)!==0&&_e$1(`Can't set a free dimension override: ${c1} - ${d1}.`)}return n1.extra!==void 0&&bn(n1.extra,"",new WeakSet,(c1,d1)=>{let h1=ve(c1,r1),f1=ve(d1,r1);_g._OrtAddSessionConfigEntry(t1,h1,f1)!==0&&_e$1(`Can't set a session config entry: ${c1} - ${d1}.`)}),[t1,r1]}catch(i1){throw t1!==0&&_g._OrtReleaseSessionOptions(t1),r1.forEach(o1=>_g._free(o1)),i1}}}),aa$1,Wp$1,sa$1,Hp$1,qp$1,Po,jp$1,ua$1=L$1(()=>{aa$1=e1=>{switch(e1){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e1}`)}},Wp$1=e1=>{switch(e1){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e1}`)}},sa$1=e1=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e1],Hp$1=e1=>{switch(e1){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e1}`)}},qp$1=e1=>{switch(e1){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e1}`)}},Po=e1=>e1==="float32"||e1==="float16"||e1==="int32"||e1==="int64"||e1==="uint32"||e1==="uint8"||e1==="bool",jp$1=e1=>{switch(e1){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e1}`)}}}),gn,la$1=L$1(()=>{gn=async e1=>{if(typeof e1=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e1))}catch(_g){if(_g.code==="ERR_FS_FILE_TOO_LARGE"){let t1=(void 0)(e1),r1=[];for await(let n1 of t1)r1.push(n1);return new Uint8Array(Buffer.concat(r1))}throw _g}else{let _g=await fetch(e1);if(!_g.ok)throw new Error(`failed to load external data file: ${e1}`);let t1=_g.headers.get("Content-Length"),r1=t1?parseInt(t1,10):0;if(r1<1073741824)return new Uint8Array(await _g.arrayBuffer());{if(!_g.body)throw new Error(`failed to load external data file: ${e1}, no response body.`);let n1=_g.body.getReader(),i1;try{i1=new ArrayBuffer(r1)}catch(a1){if(a1 instanceof RangeError){let u1=Math.ceil(r1/65536);i1=new WebAssembly.Memory({initial:u1,maximum:u1}).buffer}else throw a1}let o1=0;for(;;){let{done:a1,value:u1}=await n1.read();if(a1)break;let s1=u1.byteLength;new Uint8Array(i1,o1,s1).set(u1),o1+=s1}return new Uint8Array(i1,0,r1)}}else return e1 instanceof Blob?new Uint8Array(await e1.arrayBuffer()):e1 instanceof Uint8Array?e1:new Uint8Array(e1)}}),mg,Xp$1,Kp$1,zr$1,bg,fa$1,Jp$1,Zp$1,Yp$1,Qp$1,ed$1,td$1,rd$1=L$1(()=>{Up$1(),Vp$1(),ua$1(),Ur(),Ao(),la$1(),mg=(e1,_g)=>{De$1()._OrtInit(e1,_g)!==0&&_e$1("Can't initialize onnxruntime.")},Xp$1=async e1=>{mg(e1.wasm.numThreads,qp$1(e1.logLevel))},Kp$1=async(e1,_g)=>{},zr$1=new Map,bg=e1=>{let _g=De$1(),t1=_g.stackSave();try{let r1=_g.stackAlloc(8);return _g._OrtGetInputOutputCount(e1,r1,r1+4)!==0&&_e$1("Can't get session input/output count."),[_g.HEAP32[r1/4],_g.HEAP32[r1/4+1]]}finally{_g.stackRestore(t1)}},fa$1=e1=>{let _g=De$1(),t1=_g._malloc(e1.byteLength);if(t1===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e1.byteLength}.`);return _g.HEAPU8.set(e1,t1),[t1,e1.byteLength]},Jp$1=async(e1,_g)=>{var l1;let t1,r1,n1=De$1();Array.isArray(e1)?[t1,r1]=e1:e1.buffer===n1.HEAPU8.buffer?[t1,r1]=[e1.byteOffset,e1.byteLength]:[t1,r1]=fa$1(e1);let i1=0,o1=0,a1=[],u1=[],s1=[];try{if([o1,a1]=zp$1(_g),(_g==null?void 0:_g.externalData)&&n1.mountExternalData){let y1=[];for(let _1 of _g.externalData){let E1=typeof _1=="string"?_1:_1.path;y1.push(gn(typeof _1=="string"?_1:_1.data).then(T1=>{n1.mountExternalData(E1,T1)}))}await Promise.all(y1)}i1=await n1._OrtCreateSession(t1,r1,o1),i1===0&&_e$1("Can't create a session.");let[c1,d1]=bg(i1),h1=!!(_g!=null&&_g.enableGraphCapture),f1=[],g1=[],v1=[];for(let y1=0;y1<c1;y1++){let _1=n1._OrtGetInputName(i1,y1);_1===0&&_e$1("Can't get an input name."),u1.push(_1),f1.push(n1.UTF8ToString(_1))}for(let y1=0;y1<d1;y1++){let _1=n1._OrtGetOutputName(i1,y1);_1===0&&_e$1("Can't get an output name."),s1.push(_1);let E1=n1.UTF8ToString(_1);g1.push(E1)}return zr$1.set(i1,[i1,u1,s1,null,h1,!1]),[i1,f1,g1]}catch(c1){throw u1.forEach(d1=>n1._OrtFree(d1)),s1.forEach(d1=>n1._OrtFree(d1)),i1!==0&&n1._OrtReleaseSession(i1),c1}finally{n1._free(t1),o1!==0&&n1._OrtReleaseSessionOptions(o1),a1.forEach(c1=>n1._free(c1)),(l1=n1.unmountExternalData)==null||l1.call(n1)}},Zp$1=e1=>{var u1;let _g=De$1(),t1=zr$1.get(e1);if(!t1)throw new Error(`cannot release session. invalid session id: ${e1}`);let[r1,n1,i1,o1,a1]=t1;o1&&(a1&&_g._OrtClearBoundOutputs(o1.handle),_g._OrtReleaseBinding(o1.handle)),(u1=_g.jsepOnReleaseSession)==null||u1.call(_g,e1),n1.forEach(s1=>_g._OrtFree(s1)),i1.forEach(s1=>_g._OrtFree(s1)),_g._OrtReleaseSession(r1),zr$1.delete(e1)},Yp$1=(e1,_g,t1,r1,n1,i1=!1)=>{if(!e1){_g.push(0);return}let o1=De$1(),a1=e1[0],u1=e1[1],s1=e1[3],l1,c1;if(a1==="string"&&s1==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(i1&&s1!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${n1} when enableGraphCapture is true.`);if(s1==="gpu-buffer"){let f1=e1[2].gpuBuffer,g1=sa$1(aa$1(a1));c1=u1.reduce(($1,y1)=>$1*y1,1)*g1;let v1=o1.jsepRegisterBuffer;if(!v1)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');l1=v1(r1,n1,f1,c1)}else{let f1=e1[2];if(Array.isArray(f1)){c1=4*f1.length,l1=o1._malloc(c1),t1.push(l1);let g1=l1/4;for(let v1=0;v1<f1.length;v1++){if(typeof f1[v1]!="string")throw new TypeError(`tensor data at index ${v1} is not a string`);o1.HEAPU32[g1++]=ve(f1[v1],t1)}}else c1=f1.byteLength,l1=o1._malloc(c1),t1.push(l1),o1.HEAPU8.set(new Uint8Array(f1.buffer,f1.byteOffset,c1),l1)}let d1=o1.stackSave(),h1=o1.stackAlloc(4*u1.length);try{let f1=h1/4;u1.forEach(v1=>o1.HEAP32[f1++]=v1);let g1=o1._OrtCreateTensor(aa$1(a1),l1,c1,h1,u1.length,jp$1(s1));g1===0&&_e$1(`Can't create tensor for input/output. session=${r1}, index=${n1}.`),_g.push(g1)}finally{o1.stackRestore(d1)}},Qp$1=async(e1,_g,t1,r1,n1,i1)=>{var W1;let o1=De$1(),a1=zr$1.get(e1);if(!a1)throw new Error(`cannot run inference. invalid session id: ${e1}`);let u1=a1[0],s1=a1[1],l1=a1[2],c1=a1[3],d1=a1[4];a1[5];let h1=_g.length,f1=r1.length,g1=0,v1=[],$1=[],y1=[],_1=[],E1=o1.stackSave(),T1=o1.stackAlloc(h1*4),P1=o1.stackAlloc(h1*4),k1=o1.stackAlloc(f1*4),N1=o1.stackAlloc(f1*4);try{[g1,v1]=Gp$1(i1);for(let U1=0;U1<h1;U1++)Yp$1(t1[U1],$1,_1,e1,_g[U1],d1);for(let U1=0;U1<f1;U1++)Yp$1(n1[U1],y1,_1,e1,h1+r1[U1],d1);let H1=T1/4,ty=P1/4,ey=k1/4,ly=N1/4;for(let U1=0;U1<h1;U1++)o1.HEAPU32[H1++]=$1[U1],o1.HEAPU32[ty++]=s1[_g[U1]];for(let U1=0;U1<f1;U1++)o1.HEAPU32[ey++]=y1[U1],o1.HEAPU32[ly++]=l1[r1[U1]];(W1=o1.jsepOnRunStart)==null||W1.call(o1,u1);let oy;oy=await o1._OrtRun(u1,P1,T1,h1,N1,f1,k1,g1),oy!==0&&_e$1("failed to call OrtRun().");let Q1=[];for(let U1=0;U1<f1;U1++){let V1=o1.HEAPU32[k1/4+U1];if(V1===y1[U1]){Q1.push(n1[U1]);continue}let K1=o1.stackSave(),J1=o1.stackAlloc(4*4),hy=!1,G1,Y1=0;try{o1._OrtGetTensorData(V1,J1,J1+4,J1+8,J1+12)!==0&&_e$1(`Can't access output tensor data on index ${U1}.`);let yy=J1/4,Oy=o1.HEAPU32[yy++];Y1=o1.HEAPU32[yy++];let Ey=o1.HEAPU32[yy++],jy=o1.HEAPU32[yy++],Ay=[];for(let Wy=0;Wy<jy;Wy++)Ay.push(o1.HEAPU32[Ey/4+Wy]);o1._OrtFree(Ey);let Uy=Ay.reduce((Wy,Yy)=>Wy*Yy,1);G1=Wp$1(Oy);let Gy=c1==null?void 0:c1.outputPreferredLocations[r1[U1]];if(G1==="string"){if(Gy==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Wy=[],Yy=Y1/4;for(let Vy=0;Vy<Uy;Vy++){let p0=o1.HEAPU32[Yy++],y0=Vy===Uy-1?void 0:o1.HEAPU32[Yy]-p0;Wy.push(o1.UTF8ToString(p0,y0))}Q1.push([G1,Ay,Wy,"cpu"])}else if(Gy==="gpu-buffer"&&Uy>0){let Wy=o1.jsepGetBuffer;if(!Wy)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Yy=Wy(Y1),Vy=sa$1(Oy);if(Vy===void 0||!Po(G1))throw new Error(`Unsupported data type: ${G1}`);hy=!0,Q1.push([G1,Ay,{gpuBuffer:Yy,download:o1.jsepCreateDownloader(Yy,Uy*Vy,G1),dispose:()=>{o1._OrtReleaseTensor(V1)}},"gpu-buffer"])}else{let Wy=Hp$1(G1),Yy=new Wy(Uy);new Uint8Array(Yy.buffer,Yy.byteOffset,Yy.byteLength).set(o1.HEAPU8.subarray(Y1,Y1+Yy.byteLength)),Q1.push([G1,Ay,Yy,"cpu"])}}finally{o1.stackRestore(K1),G1==="string"&&Y1&&o1._free(Y1),hy||o1._OrtReleaseTensor(V1)}}return c1&&!d1&&(o1._OrtClearBoundOutputs(c1.handle),zr$1.set(e1,[u1,s1,l1,c1,d1,!1])),Q1}finally{o1.stackRestore(E1),$1.forEach(H1=>o1._OrtReleaseTensor(H1)),y1.forEach(H1=>o1._OrtReleaseTensor(H1)),_1.forEach(H1=>o1._free(H1)),g1!==0&&o1._OrtReleaseRunOptions(g1),v1.forEach(H1=>o1._free(H1))}},ed$1=e1=>{let _g=De$1(),t1=zr$1.get(e1);if(!t1)throw new Error("invalid session id");let r1=t1[0],n1=_g._OrtEndProfiling(r1);n1===0&&_e$1("Can't get an profile file name."),_g._OrtFree(n1)},td$1=e1=>{let _g=[];for(let t1 of e1){let r1=t1[2];!Array.isArray(r1)&&"buffer"in r1&&_g.push(r1.buffer)}return _g}}),nd$1=me((e1,_g)=>{_g.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r,gt$1,yn,Do,Lo,ca$1,pa$1,Vr,Wr,Tg,Eo,od$1,id$1,ad$1,sd$1,ud$1,ld$1,fd$1,da$1=L$1(()=>{var e1;Ot$1(),rd$1(),Ur(),_r=()=>!!Z.wasm.proxy&&typeof document<"u",yn=!1,Do=!1,Lo=!1,pa$1=new Map,Vr=(_g,t1)=>{let r1=pa$1.get(_g);r1?r1.push(t1):pa$1.set(_g,[t1])},Wr=()=>{if(yn||!Do||Lo||!gt$1)throw new Error("worker not ready")},Tg=_g=>{switch(_g.data.type){case"init-wasm":yn=!1,_g.data.err?(Lo=!0,ca$1[1](_g.data.err)):(Do=!0,ca$1[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t1=pa$1.get(_g.data.type);_g.data.err?t1.shift()[1](_g.data.err):t1.shift()[0](_g.data.out);break}}},Eo=typeof document<"u"?(e1=document==null?void 0:document.currentScript)==null?void 0:e1.src:void 0,od$1=async()=>{if(!Do){if(yn)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo)throw new Error("previous call to 'initWasm()' failed.");if(yn=!0,_r())return Z.wasm.wasmPaths===void 0&&Eo&&Eo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Eo.substr(0,+Eo.lastIndexOf("/")+1)),new Promise((_g,t1)=>{gt$1==null||gt$1.terminate();let r1=URL.createObjectURL(new Blob([nd$1()],{type:"text/javascript"}));gt$1=new Worker(r1,{name:"ort-wasm-proxy-worker"}),gt$1.onerror=i1=>t1(i1),gt$1.onmessage=Tg,URL.revokeObjectURL(r1),ca$1=[_g,t1];let n1={type:"init-wasm",in:Z};gt$1.postMessage(n1)});try{await Mp$1(Z.wasm),await Xp$1(Z),Do=!0}catch(_g){throw Lo=!0,_g}finally{yn=!1}}},id$1=async _g=>{if(_r())return Wr(),new Promise((t1,r1)=>{Vr("init-ep",[t1,r1]);let n1={type:"init-ep",in:{epName:_g,env:Z}};gt$1.postMessage(n1)});await Kp$1(Z,_g)},ad$1=async _g=>_r()?(Wr(),new Promise((t1,r1)=>{Vr("copy-from",[t1,r1]);let n1={type:"copy-from",in:{buffer:_g}};gt$1.postMessage(n1,[_g.buffer])})):fa$1(_g),sd$1=async(_g,t1)=>{if(_r()){if(t1!=null&&t1.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((r1,n1)=>{Vr("create",[r1,n1]);let i1={type:"create",in:{model:_g,options:{...t1}}},o1=[];_g instanceof Uint8Array&&o1.push(_g.buffer),gt$1.postMessage(i1,o1)})}else return Jp$1(_g,t1)},ud$1=async _g=>{if(_r())return Wr(),new Promise((t1,r1)=>{Vr("release",[t1,r1]);let n1={type:"release",in:_g};gt$1.postMessage(n1)});Zp$1(_g)},ld$1=async(_g,t1,r1,n1,i1,o1)=>{if(_r()){if(r1.some(a1=>a1[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i1.some(a1=>a1))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise((a1,u1)=>{Vr("run",[a1,u1]);let s1=r1,l1={type:"run",in:{sessionId:_g,inputIndices:t1,inputs:s1,outputIndices:n1,options:o1}};gt$1.postMessage(l1,td$1(s1))})}else return Qp$1(_g,t1,r1,n1,i1,o1)},fd$1=async _g=>{if(_r())return Wr(),new Promise((t1,r1)=>{Vr("end-profiling",[t1,r1]);let n1={type:"end-profiling",in:_g};gt$1.postMessage(n1)});ed$1(_g)}}),cd$1,xg,Co$1,pd$1=L$1(()=>{Ot$1(),da$1(),ua$1(),la$1(),cd$1=(e1,_g)=>{switch(e1.location){case"cpu":return[e1.type,e1.dims,e1.data,"cpu"];case"gpu-buffer":return[e1.type,e1.dims,{gpuBuffer:e1.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e1.location} for ${_g()}`)}},xg=e1=>{switch(e1[3]){case"cpu":return new Me(e1[0],e1[2],e1[1]);case"gpu-buffer":{let _g=e1[0];if(!Po(_g))throw new Error(`not supported data type: ${_g} for deserializing GPU tensor`);let{gpuBuffer:t1,download:r1,dispose:n1}=e1[2];return Me.fromGpuBuffer(t1,{dataType:_g,dims:e1[1],download:r1,dispose:n1})}default:throw new Error(`invalid data location: ${e1[3]}`)}},Co$1=class{async fetchModelAndCopyToWasmMemory(e1){return ad$1(await gn(e1))}async loadModel(e1,_g){lr$1();let t1;typeof e1=="string"?typeof process<"u"&&process.versions&&process.versions.node?t1=await gn(e1):t1=await this.fetchModelAndCopyToWasmMemory(e1):t1=e1,[this.sessionId,this.inputNames,this.outputNames]=await sd$1(t1,_g),fr$1()}async dispose(){return ud$1(this.sessionId)}async run(e1,_g,t1){lr$1();let r1=[],n1=[];Object.entries(e1).forEach(c1=>{let d1=c1[0],h1=c1[1],f1=this.inputNames.indexOf(d1);if(f1===-1)throw new Error(`invalid input '${d1}'`);r1.push(h1),n1.push(f1)});let i1=[],o1=[];Object.entries(_g).forEach(c1=>{let d1=c1[0],h1=c1[1],f1=this.outputNames.indexOf(d1);if(f1===-1)throw new Error(`invalid output '${d1}'`);i1.push(h1),o1.push(f1)});let a1=r1.map((c1,d1)=>cd$1(c1,()=>`input "${this.inputNames[n1[d1]]}"`)),u1=i1.map((c1,d1)=>c1?cd$1(c1,()=>`output "${this.outputNames[o1[d1]]}"`):null),s1=await ld$1(this.sessionId,n1,a1,o1,u1,t1),l1={};for(let c1=0;c1<s1.length;c1++)l1[this.outputNames[o1[c1]]]=i1[c1]??xg(s1[c1]);return fr$1(),l1}startProfiling(){}endProfiling(){fd$1(this.sessionId)}}}),wg,Fo,dd$1=L$1(()=>{Ot$1(),da$1(),pd$1(),wg=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let e1=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((e1||1)/2))}},Fo=class{async init(e1){wg(),await od$1(),await id$1(e1)}async createInferenceSessionHandler(e1,_g){let t1=new Co$1;return await t1.loadModel(e1,_g),Promise.resolve(t1)}}}),hd$1={};Sr(hd$1,{wasmBackend:()=>vg});var vg,md$1=L$1(()=>{dd$1(),vg=new Fo});Ot$1();Ot$1();Ot$1();var Ts$1="1.18.0",jO=qo;{let e1=(Op$1(),ar(_p$1)).onnxjsBackend;Pr$1("webgl",e1,-10)}{let e1=(md$1(),ar(hd$1)).wasmBackend;Pr$1("cpu",e1,10),Pr$1("wasm",e1,10)}Object.defineProperty(Z.versions,"web",{value:Ts$1,enumerable:!0});/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/const ort_cpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return Pd$1},get TRACE(){return ls$1},get TRACE_FUNC_BEGIN(){return lr$1},get TRACE_FUNC_END(){return fr$1},get Tensor(){return Me},get TrainingSession(){return Dd$1},default:jO,get env(){return Z},get registerBackend(){return Pr$1}},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var Oi=Object.defineProperty,nc=Object.getOwnPropertyDescriptor,ic=Object.getOwnPropertyNames,oc=Object.prototype.hasOwnProperty,j=(e1,_g)=>()=>(e1&&(_g=e1(e1=0)),_g),Er=(e1,_g)=>()=>(_g||e1((_g={exports:{}}).exports,_g),_g.exports),kr=(e1,_g)=>{for(var t1 in _g)Oi(e1,t1,{get:_g[t1],enumerable:!0})},ac=(e1,_g,t1,r1)=>{if(_g&&typeof _g=="object"||typeof _g=="function")for(let n1 of ic(_g))!oc.call(e1,n1)&&n1!==t1&&Oi(e1,n1,{get:()=>_g[n1],enumerable:!(r1=nc(_g,n1))||r1.enumerable});return e1},sr=e1=>ac(Oi({},"__esModule",{value:!0}),e1),kn,ur,lr,sc,On,Pn=j(()=>{kn=new Map,ur=[],lr=(e1,_g,t1)=>{if(_g&&typeof _g.init=="function"&&typeof _g.createInferenceSessionHandler=="function"){let r1=kn.get(e1);if(r1===void 0)kn.set(e1,{backend:_g,priority:t1});else{if(r1.priority>t1)return;if(r1.priority===t1&&r1.backend!==_g)throw new Error(`cannot register backend "${e1}" using priority ${t1}`)}if(t1>=0){let n1=ur.indexOf(e1);n1!==-1&&ur.splice(n1,1);for(let i1=0;i1<ur.length;i1++)if(kn.get(ur[i1]).priority<=t1){ur.splice(i1,0,e1);return}ur.push(e1)}return}throw new TypeError("not a valid backend")},sc=async e1=>{let _g=kn.get(e1);if(!_g)return"backend not found.";if(_g.initialized)return _g.backend;if(_g.aborted)return _g.error;{let t1=!!_g.initPromise;try{return t1||(_g.initPromise=_g.backend.init(e1)),await _g.initPromise,_g.initialized=!0,_g.backend}catch(r1){return t1||(_g.error=`${r1}`,_g.aborted=!0),_g.error}finally{delete _g.initPromise}}},On=async e1=>{let _g=e1.executionProviders||[],t1=_g.map(u1=>typeof u1=="string"?u1:u1.name),r1=t1.length===0?ur:t1,n1,i1=[],o1=new Set;for(let u1 of r1){let s1=await sc(u1);typeof s1=="string"?i1.push({name:u1,err:s1}):(n1||(n1=s1),n1===s1&&o1.add(u1))}if(!n1)throw new Error(`no available backend found. ERR: ${i1.map(u1=>`[${u1.name}] ${u1.err}`).join(", ")}`);for(let{name:u1,err:s1}of i1)t1.includes(u1)&&console.warn(`removing requested execution provider "${u1}" from session options because it is not available: ${s1}`);let a1=_g.filter(u1=>o1.has(typeof u1=="string"?u1:u1.name));return[n1,new Proxy(e1,{get:(u1,s1)=>s1==="executionProviders"?a1:Reflect.get(u1,s1)})]}}),ra=j(()=>{Pn()}),na,ia=j(()=>{na="1.18.0"}),oa,gt,Pi=j(()=>{ia(),oa="warning",gt={wasm:{},webgl:{},webgpu:{},versions:{common:na},set logLevel(e1){if(e1!==void 0){if(typeof e1!="string"||["verbose","info","warning","error","fatal"].indexOf(e1)===-1)throw new Error(`Unsupported logging level: ${e1}`);oa=e1}},get logLevel(){return oa}},Object.defineProperty(gt,"logLevel",{enumerable:!0})}),ke,aa=j(()=>{Pi(),ke=gt}),sa,ua,la=j(()=>{sa=(e1,_g)=>{let t1=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);t1.width=e1.dims[3],t1.height=e1.dims[2];let r1=t1.getContext("2d");if(r1!=null){let n1,i1;(_g==null?void 0:_g.tensorLayout)!==void 0&&_g.tensorLayout==="NHWC"?(n1=e1.dims[2],i1=e1.dims[3]):(n1=e1.dims[3],i1=e1.dims[2]);let o1=(_g==null?void 0:_g.format)!==void 0?_g.format:"RGB",a1=_g==null?void 0:_g.norm,u1,s1;a1===void 0||a1.mean===void 0?u1=[255,255,255,255]:typeof a1.mean=="number"?u1=[a1.mean,a1.mean,a1.mean,a1.mean]:(u1=[a1.mean[0],a1.mean[1],a1.mean[2],0],a1.mean[3]!==void 0&&(u1[3]=a1.mean[3])),a1===void 0||a1.bias===void 0?s1=[0,0,0,0]:typeof a1.bias=="number"?s1=[a1.bias,a1.bias,a1.bias,a1.bias]:(s1=[a1.bias[0],a1.bias[1],a1.bias[2],0],a1.bias[3]!==void 0&&(s1[3]=a1.bias[3]));let l1=i1*n1,c1=0,d1=l1,h1=l1*2,f1=-1;o1==="RGBA"?(c1=0,d1=l1,h1=l1*2,f1=l1*3):o1==="RGB"?(c1=0,d1=l1,h1=l1*2):o1==="RBG"&&(c1=0,h1=l1,d1=l1*2);for(let g1=0;g1<i1;g1++)for(let v1=0;v1<n1;v1++){let $1=(e1.data[c1++]-s1[0])*u1[0],y1=(e1.data[d1++]-s1[1])*u1[1],_1=(e1.data[h1++]-s1[2])*u1[2],E1=f1===-1?255:(e1.data[f1++]-s1[3])*u1[3];r1.fillStyle="rgba("+$1+","+y1+","+_1+","+E1+")",r1.fillRect(v1,g1,1,1)}if("toDataURL"in t1)return t1.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ua=(e1,_g)=>{let t1=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),r1;if(t1!=null){let n1,i1,o1;(_g==null?void 0:_g.tensorLayout)!==void 0&&_g.tensorLayout==="NHWC"?(n1=e1.dims[2],i1=e1.dims[1],o1=e1.dims[3]):(n1=e1.dims[3],i1=e1.dims[2],o1=e1.dims[1]);let a1=_g!==void 0&&_g.format!==void 0?_g.format:"RGB",u1=_g==null?void 0:_g.norm,s1,l1;u1===void 0||u1.mean===void 0?s1=[255,255,255,255]:typeof u1.mean=="number"?s1=[u1.mean,u1.mean,u1.mean,u1.mean]:(s1=[u1.mean[0],u1.mean[1],u1.mean[2],255],u1.mean[3]!==void 0&&(s1[3]=u1.mean[3])),u1===void 0||u1.bias===void 0?l1=[0,0,0,0]:typeof u1.bias=="number"?l1=[u1.bias,u1.bias,u1.bias,u1.bias]:(l1=[u1.bias[0],u1.bias[1],u1.bias[2],0],u1.bias[3]!==void 0&&(l1[3]=u1.bias[3]));let c1=i1*n1;if(_g!==void 0&&(_g.format!==void 0&&o1===4&&_g.format!=="RGBA"||o1===3&&_g.format!=="RGB"&&_g.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d1=4,h1=0,f1=1,g1=2,v1=3,$1=0,y1=c1,_1=c1*2,E1=-1;a1==="RGBA"?($1=0,y1=c1,_1=c1*2,E1=c1*3):a1==="RGB"?($1=0,y1=c1,_1=c1*2):a1==="RBG"&&($1=0,_1=c1,y1=c1*2),r1=t1.createImageData(n1,i1);for(let T1=0;T1<i1*n1;h1+=d1,f1+=d1,g1+=d1,v1+=d1,T1++)r1.data[h1]=(e1.data[$1++]-l1[0])*s1[0],r1.data[f1]=(e1.data[y1++]-l1[1])*s1[1],r1.data[g1]=(e1.data[_1++]-l1[2])*s1[2],r1.data[v1]=E1===-1?255:(e1.data[E1++]-l1[3])*s1[3]}else throw new Error("Can not access image data");return r1}}),Ri,da,ca,pa,ma,fa=j(()=>{Rn(),Ri=(e1,_g)=>{if(e1===void 0)throw new Error("Image buffer must be defined");if(_g.height===void 0||_g.width===void 0)throw new Error("Image height and width must be defined");if(_g.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:t1,width:r1}=_g,n1=_g.norm??{mean:255,bias:0},i1,o1;typeof n1.mean=="number"?i1=[n1.mean,n1.mean,n1.mean,n1.mean]:i1=[n1.mean[0],n1.mean[1],n1.mean[2],n1.mean[3]??255],typeof n1.bias=="number"?o1=[n1.bias,n1.bias,n1.bias,n1.bias]:o1=[n1.bias[0],n1.bias[1],n1.bias[2],n1.bias[3]??0];let a1=_g.format!==void 0?_g.format:"RGBA",u1=_g.tensorFormat!==void 0&&_g.tensorFormat!==void 0?_g.tensorFormat:"RGB",s1=t1*r1,l1=u1==="RGBA"?new Float32Array(s1*4):new Float32Array(s1*3),c1=4,d1=0,h1=1,f1=2,g1=3,v1=0,$1=s1,y1=s1*2,_1=-1;a1==="RGB"&&(c1=3,d1=0,h1=1,f1=2,g1=-1),u1==="RGBA"?_1=s1*3:u1==="RBG"?(v1=0,y1=s1,$1=s1*2):u1==="BGR"&&(y1=0,$1=s1,v1=s1*2);for(let E1=0;E1<s1;E1++,d1+=c1,f1+=c1,h1+=c1,g1+=c1)l1[v1++]=(e1[d1]+o1[0])/i1[0],l1[$1++]=(e1[h1]+o1[1])/i1[1],l1[y1++]=(e1[f1]+o1[2])/i1[2],_1!==-1&&g1!==-1&&(l1[_1++]=(e1[g1]+o1[3])/i1[3]);return u1==="RGBA"?new ot("float32",l1,[1,4,t1,r1]):new ot("float32",l1,[1,3,t1,r1])},da=async(e1,_g)=>{let t1=typeof HTMLImageElement<"u"&&e1 instanceof HTMLImageElement,r1=typeof ImageData<"u"&&e1 instanceof ImageData,n1=typeof ImageBitmap<"u"&&e1 instanceof ImageBitmap,i1=typeof e1=="string",o1,a1=_g??{},u1=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},s1=l1=>l1 instanceof HTMLCanvasElement||l1 instanceof OffscreenCanvas?l1.getContext("2d"):null;if(t1){let l1=u1();l1.width=e1.width,l1.height=e1.height;let c1=s1(l1);if(c1!=null){let d1=e1.height,h1=e1.width;if(_g!==void 0&&_g.resizedHeight!==void 0&&_g.resizedWidth!==void 0&&(d1=_g.resizedHeight,h1=_g.resizedWidth),_g!==void 0){if(a1=_g,_g.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a1.tensorFormat="RGBA",a1.height=d1,a1.width=h1}else a1.tensorFormat="RGBA",a1.height=d1,a1.width=h1;c1.drawImage(e1,0,0),o1=c1.getImageData(0,0,h1,d1).data}else throw new Error("Can not access image data")}else if(r1){let l1,c1;if(_g!==void 0&&_g.resizedWidth!==void 0&&_g.resizedHeight!==void 0?(l1=_g.resizedHeight,c1=_g.resizedWidth):(l1=e1.height,c1=e1.width),_g!==void 0&&(a1=_g),a1.format="RGBA",a1.height=l1,a1.width=c1,_g!==void 0){let d1=u1();d1.width=c1,d1.height=l1;let h1=s1(d1);if(h1!=null)h1.putImageData(e1,0,0),o1=h1.getImageData(0,0,c1,l1).data;else throw new Error("Can not access image data")}else o1=e1.data}else if(n1){if(_g===void 0)throw new Error("Please provide image config with format for Imagebitmap");let l1=u1();l1.width=e1.width,l1.height=e1.height;let c1=s1(l1);if(c1!=null){let d1=e1.height,h1=e1.width;return c1.drawImage(e1,0,0,h1,d1),o1=c1.getImageData(0,0,h1,d1).data,a1.height=d1,a1.width=h1,Ri(o1,a1)}else throw new Error("Can not access image data")}else{if(i1)return new Promise((l1,c1)=>{let d1=u1(),h1=s1(d1);if(!e1||!h1)return c1();let f1=new Image;f1.crossOrigin="Anonymous",f1.src=e1,f1.onload=()=>{d1.width=f1.width,d1.height=f1.height,h1.drawImage(f1,0,0,d1.width,d1.height);let g1=h1.getImageData(0,0,d1.width,d1.height);a1.height=d1.height,a1.width=d1.width,l1(Ri(g1.data,a1))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(o1!==void 0)return Ri(o1,a1);throw new Error("Input data provided is not supported - aborted tensor creation")},ca=(e1,_g)=>{let{width:t1,height:r1,download:n1,dispose:i1}=_g,o1=[1,r1,t1,4];return new ot({location:"texture",type:"float32",texture:e1,dims:o1,download:n1,dispose:i1})},pa=(e1,_g)=>{let{dataType:t1,dims:r1,download:n1,dispose:i1}=_g;return new ot({location:"gpu-buffer",type:t1??"float32",gpuBuffer:e1,dims:r1,download:n1,dispose:i1})},ma=(e1,_g,t1)=>new ot({location:"cpu-pinned",type:e1,data:_g,dims:t1??[_g.length]})}),dr,Qr,ha,ga,ya=j(()=>{dr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ha=!1,ga=()=>{if(!ha){ha=!0;let e1=typeof BigInt64Array<"u"&&BigInt64Array.from,_g=typeof BigUint64Array<"u"&&BigUint64Array.from,t1=typeof Float16Array<"u"&&Float16Array.from;e1&&(dr.set("int64",BigInt64Array),Qr.set(BigInt64Array,"int64")),_g&&(dr.set("uint64",BigUint64Array),Qr.set(BigUint64Array,"uint64")),t1?(dr.set("float16",Float16Array),Qr.set(Float16Array,"float16")):dr.set("float16",Uint16Array)}}}),ba,va,wa=j(()=>{Rn(),ba=e1=>{let _g=1;for(let t1=0;t1<e1.length;t1++){let r1=e1[t1];if(typeof r1!="number"||!Number.isSafeInteger(r1))throw new TypeError(`dims[${t1}] must be an integer, got: ${r1}`);if(r1<0)throw new RangeError(`dims[${t1}] must be a non-negative integer, got: ${r1}`);_g*=r1}return _g},va=(e1,_g)=>{switch(e1.location){case"cpu":return new ot(e1.type,e1.data,_g);case"cpu-pinned":return new ot({location:"cpu-pinned",data:e1.data,type:e1.type,dims:_g});case"texture":return new ot({location:"texture",texture:e1.texture,type:e1.type,dims:_g});case"gpu-buffer":return new ot({location:"gpu-buffer",gpuBuffer:e1.gpuBuffer,type:e1.type,dims:_g});default:throw new Error(`tensorReshape: tensor location ${e1.location} is not supported`)}}}),ot,Rn=j(()=>{la(),fa(),ya(),wa(),ot=class{constructor(e1,_g,t1){ga();let r1,n1;if(typeof e1=="object"&&"location"in e1)switch(this.dataLocation=e1.location,r1=e1.type,n1=e1.dims,e1.location){case"cpu-pinned":{let o1=dr.get(r1);if(!o1)throw new TypeError(`unsupported type "${r1}" to create tensor from pinned buffer`);if(!(e1.data instanceof o1))throw new TypeError(`buffer should be of type ${o1.name}`);this.cpuData=e1.data;break}case"texture":{if(r1!=="float32")throw new TypeError(`unsupported type "${r1}" to create tensor from texture`);this.gpuTextureData=e1.texture,this.downloader=e1.download,this.disposer=e1.dispose;break}case"gpu-buffer":{if(r1!=="float32"&&r1!=="float16"&&r1!=="int32"&&r1!=="int64"&&r1!=="uint32"&&r1!=="uint8"&&r1!=="bool")throw new TypeError(`unsupported type "${r1}" to create tensor from gpu buffer`);this.gpuBufferData=e1.gpuBuffer,this.downloader=e1.download,this.disposer=e1.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o1,a1;if(typeof e1=="string")if(r1=e1,a1=t1,e1==="string"){if(!Array.isArray(_g))throw new TypeError("A string tensor's data must be a string array.");o1=_g}else{let u1=dr.get(e1);if(u1===void 0)throw new TypeError(`Unsupported tensor type: ${e1}.`);if(Array.isArray(_g)){if(e1==="float16"&&u1===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e1==="uint64"||e1==="int64"?o1=u1.from(_g,BigInt):o1=u1.from(_g)}else if(_g instanceof u1)o1=_g;else throw new TypeError(`A ${r1} tensor's data must be type of ${u1}`)}else if(a1=_g,Array.isArray(e1)){if(e1.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let u1=typeof e1[0];if(u1==="string")r1="string",o1=e1;else if(u1==="boolean")r1="bool",o1=Uint8Array.from(e1);else throw new TypeError(`Invalid element type of data array: ${u1}.`)}else{let u1=Qr.get(e1.constructor);if(u1===void 0)throw new TypeError(`Unsupported type for tensor data: ${e1.constructor}.`);r1=u1,o1=e1}if(a1===void 0)a1=[o1.length];else if(!Array.isArray(a1))throw new TypeError("A tensor's dims must be a number array");n1=a1,this.cpuData=o1,this.dataLocation="cpu"}let i1=ba(n1);if(this.cpuData&&i1!==this.cpuData.length)throw new Error(`Tensor's size(${i1}) does not match data length(${this.cpuData.length}).`);this.type=r1,this.dims=n1,this.size=i1}static async fromImage(e1,_g){return da(e1,_g)}static fromTexture(e1,_g){return ca(e1,_g)}static fromGpuBuffer(e1,_g){return pa(e1,_g)}static fromPinnedBuffer(e1,_g,t1){return ma(e1,_g,t1)}toDataURL(e1){return sa(this,e1)}toImageData(e1){return ua(this,e1)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e1){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let _g=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=_g,e1&&this.disposer&&(this.disposer(),this.disposer=void 0),_g}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e1){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return va(this,e1)}}}),tt,zn=j(()=>{Rn(),tt=ot}),Bn,$a,yt,ut,zi=j(()=>{Pi(),Bn=(e1,_g)=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||console.timeStamp(`${e1}::ORT::${_g}`)},$a=(e1,_g)=>{var n1;let t1=((n1=new Error().stack)==null?void 0:n1.split(/\r\n|\r|\n/g))||[],r1=!1;for(let i1=0;i1<t1.length;i1++){if(r1&&!t1[i1].includes("TRACE_FUNC")){let o1=`FUNC_${e1}::${t1[i1].trim().split(" ")[1]}`;_g&&(o1+=`::${_g}`),Bn("CPU",o1);return}t1[i1].includes("TRACE_FUNC")&&(r1=!0)}},yt=e1=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("BEGIN",e1)},ut=e1=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("END",e1)}}),Dn,_a=j(()=>{Pn(),zn(),zi(),Dn=class pT{constructor(_g){this.handler=_g}async run(_g,t1,r1){yt();let n1={},i1={};if(typeof _g!="object"||_g===null||_g instanceof tt||Array.isArray(_g))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o1=!0;if(typeof t1=="object"){if(t1===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t1 instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t1)){if(t1.length===0)throw new TypeError("'fetches' cannot be an empty array.");o1=!1;for(let s1 of t1){if(typeof s1!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(s1)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s1}.`);n1[s1]=null}if(typeof r1=="object"&&r1!==null)i1=r1;else if(typeof r1<"u")throw new TypeError("'options' must be an object.")}else{let s1=!1,l1=Object.getOwnPropertyNames(t1);for(let c1 of this.outputNames)if(l1.indexOf(c1)!==-1){let d1=t1[c1];(d1===null||d1 instanceof tt)&&(s1=!0,o1=!1,n1[c1]=d1)}if(s1){if(typeof r1=="object"&&r1!==null)i1=r1;else if(typeof r1<"u")throw new TypeError("'options' must be an object.")}else i1=t1}}else if(typeof t1<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s1 of this.inputNames)if(typeof _g[s1]>"u")throw new Error(`input '${s1}' is missing in 'feeds'.`);if(o1)for(let s1 of this.outputNames)n1[s1]=null;let a1=await this.handler.run(_g,n1,i1),u1={};for(let s1 in a1)if(Object.hasOwnProperty.call(a1,s1)){let l1=a1[s1];l1 instanceof tt?u1[s1]=l1:u1[s1]=new tt(l1.type,l1.data,l1.dims)}return ut(),u1}async release(){return this.handler.dispose()}static async create(_g,t1,r1,n1){yt();let i1,o1={};if(typeof _g=="string"){if(i1=_g,typeof t1=="object"&&t1!==null)o1=t1;else if(typeof t1<"u")throw new TypeError("'options' must be an object.")}else if(_g instanceof Uint8Array){if(i1=_g,typeof t1=="object"&&t1!==null)o1=t1;else if(typeof t1<"u")throw new TypeError("'options' must be an object.")}else if(_g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_g instanceof SharedArrayBuffer){let l1=_g,c1=0,d1=_g.byteLength;if(typeof t1=="object"&&t1!==null)o1=t1;else if(typeof t1=="number"){if(c1=t1,!Number.isSafeInteger(c1))throw new RangeError("'byteOffset' must be an integer.");if(c1<0||c1>=l1.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${l1.byteLength}).`);if(d1=_g.byteLength-c1,typeof r1=="number"){if(d1=r1,!Number.isSafeInteger(d1))throw new RangeError("'byteLength' must be an integer.");if(d1<=0||c1+d1>l1.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${l1.byteLength-c1}].`);if(typeof n1=="object"&&n1!==null)o1=n1;else if(typeof n1<"u")throw new TypeError("'options' must be an object.")}else if(typeof r1<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t1<"u")throw new TypeError("'options' must be an object.");i1=new Uint8Array(l1,c1,d1)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[a1,u1]=await On(o1),s1=await a1.createInferenceSessionHandler(i1,u1);return ut(),new pT(s1)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),uc,xa=j(()=>{_a(),uc=Dn}),Sa=j(()=>{}),Ca=j(()=>{}),Ia=j(()=>{}),Ta=j(()=>{}),lc,Mn,Aa=j(()=>{Pn(),zn(),lc="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Mn=class fT{constructor(_g,t1,r1){this.handler=_g,this.hasOptimizerModel=t1,this.hasEvalModel=r1}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(_g,t1){let r1=_g.evalModel||"",n1=_g.optimizerModel||"",i1=t1||{},[o1,a1]=await On(i1);if(o1.createTrainingSessionHandler){let u1=await o1.createTrainingSessionHandler(_g.checkpointState,_g.trainModel,r1,n1,a1);return new fT(u1,!!_g.optimizerModel,!!_g.evalModel)}else throw new Error(lc)}typeNarrowingForRunStep(_g,t1,r1,n1,i1){let o1={},a1={};if(typeof r1!="object"||r1===null||r1 instanceof tt||Array.isArray(r1))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u1=!0;if(typeof n1=="object"){if(n1===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n1 instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n1)){if(n1.length===0)throw new TypeError("'fetches' cannot be an empty array.");u1=!1;for(let s1 of n1){if(typeof s1!="string")throw new TypeError("'fetches' must be a string array or an object.");if(t1.indexOf(s1)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s1}.`);o1[s1]=null}if(typeof i1=="object"&&i1!==null)a1=i1;else if(typeof i1<"u")throw new TypeError("'options' must be an object.")}else{let s1=!1,l1=Object.getOwnPropertyNames(n1);for(let c1 of t1)if(l1.indexOf(c1)!==-1){let d1=n1[c1];(d1===null||d1 instanceof tt)&&(s1=!0,u1=!1,o1[c1]=d1)}if(s1){if(typeof i1=="object"&&i1!==null)a1=i1;else if(typeof i1<"u")throw new TypeError("'options' must be an object.")}else a1=n1}}else if(typeof n1<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s1 of _g)if(typeof r1[s1]>"u")throw new Error(`input '${s1}' is missing in 'feeds'.`);if(u1)for(let s1 of t1)o1[s1]=null;return[o1,a1]}convertHandlerReturnTypeToMapOfTensors(_g){let t1={};for(let r1 in _g)if(Object.hasOwnProperty.call(_g,r1)){let n1=_g[r1];n1 instanceof tt?t1[r1]=n1:t1[r1]=new tt(n1.type,n1.data,n1.dims)}return t1}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(_g,t1,r1){let[n1,i1]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,_g,t1,r1),o1=await this.handler.runTrainStep(_g,n1,i1);return this.convertHandlerReturnTypeToMapOfTensors(o1)}async runOptimizerStep(_g){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(_g||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(_g,t1,r1){if(this.hasEvalModel){let[n1,i1]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,_g,t1,r1),o1=await this.handler.runEvalStep(_g,n1,i1);return this.convertHandlerReturnTypeToMapOfTensors(o1)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(_g=!0){return this.handler.getParametersSize(_g)}async loadParametersBuffer(_g,t1=!0){let r1=await this.getParametersSize(t1);if(_g.length!==4*r1)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(_g,t1)}async getContiguousParameters(_g=!0){return this.handler.getContiguousParameters(_g)}async release(){return this.handler.dispose()}}}),dc,Ea=j(()=>{Aa(),dc=Mn}),Bi={};kr(Bi,{InferenceSession:()=>uc,TRACE:()=>Bn,TRACE_FUNC_BEGIN:()=>yt,TRACE_FUNC_END:()=>ut,Tensor:()=>tt,TrainingSession:()=>dc,env:()=>ke,registerBackend:()=>lr});var _t=j(()=>{ra(),aa(),xa(),zn(),Sa(),Ca(),zi(),Ia(),Ta(),Ea()}),Di={};kr(Di,{createReadStream:()=>Oa,readFile:()=>cc,readFileSync:()=>pc});var cc,pc,Oa,Mi=j(()=>{cc=void 0,pc=void 0,Oa=void 0}),Ui={};kr(Ui,{join:()=>mc});var mc,Wi=j(()=>{mc=void 0}),za=Er((e1,_g)=>{var t1=(()=>{var n1;var r1=typeof document<"u"?(n1=document.currentScript)==null?void 0:n1.src:void 0;return typeof __filename<"u"&&(r1||(r1=__filename)),function(i1={}){var o1=i1,a1,u1,s1=new Promise((b1,S1)=>{a1=b1,u1=S1});o1.mountExternalData=(b1,S1)=>{(o1.eb||(o1.eb=new Map)).set(b1,S1)},o1.unmountExternalData=()=>{delete o1.eb};let l1=()=>{let b1=(A1,M1,F1)=>(...ry)=>{let _y=q0,ky=M1==null?void 0:M1();ry=A1(...ry);let zy=M1==null?void 0:M1();return ky!==zy&&(A1=zy,F1(ky),M1=F1=null),q0!=_y?sy():ry},S1=A1=>async(...M1)=>{var F1;try{if(o1.cb)throw Error("Session already started");let ry=o1.cb={xb:M1[0],errors:[]},_y=await A1(...M1);if(o1.cb!==ry)throw Error("Session mismatch");(F1=o1.kb)==null||F1.flush();let ky=ry.errors;if(0<ky.length){let zy=await Promise.all(ky);if(zy=zy.filter(By=>By),0<zy.length)throw Error(zy.join(`
`))}return _y}finally{o1.cb=null}};o1._OrtCreateSession=b1(o1._OrtCreateSession,()=>o1._OrtCreateSession,A1=>o1._OrtCreateSession=A1),o1._OrtRun=S1(b1(o1._OrtRun,()=>o1._OrtRun,A1=>o1._OrtRun=A1)),o1._OrtRunWithBinding=S1(b1(o1._OrtRunWithBinding,()=>o1._OrtRunWithBinding,A1=>o1._OrtRunWithBinding=A1)),o1._OrtBindInput=b1(o1._OrtBindInput,()=>o1._OrtBindInput,A1=>o1._OrtBindInput=A1),l1=void 0};o1.jsepInit=(b1,S1)=>{if(l1==null||l1(),b1==="webgpu"){[o1.kb,o1.pb,o1.tb,o1.lb,o1.sb,o1.Ra,o1.ub,o1.wb,o1.qb,o1.rb,o1.vb]=S1;let A1=o1.kb;o1.jsepRegisterBuffer=(M1,F1,ry,_y)=>A1.registerBuffer(M1,F1,ry,_y),o1.jsepGetBuffer=M1=>A1.getBuffer(M1),o1.jsepCreateDownloader=(M1,F1,ry)=>A1.createDownloader(M1,F1,ry),o1.jsepOnReleaseSession=M1=>{A1.onReleaseSession(M1)},o1.jsepOnRunStart=M1=>A1.onRunStart(M1)}};var c1=Object.assign({},o1),d1="./this.program",h1=(b1,S1)=>{throw S1},f1=typeof window=="object",g1=typeof importScripts=="function",v1=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",$1="",y1,_1,E1;if(v1){var T1=(Mi(),sr(Di)),P1=(Wi(),sr(Ui));$1=g1?P1.dirname($1)+"/":__dirname+"/",y1=(b1,S1)=>(b1=Wy(b1)?new URL(b1):P1.normalize(b1),T1.readFileSync(b1,S1?void 0:"utf8")),E1=b1=>(b1=y1(b1,!0),b1.buffer||(b1=new Uint8Array(b1)),b1),_1=(b1,S1,A1,M1=!0)=>{b1=Wy(b1)?new URL(b1):P1.normalize(b1),T1.readFile(b1,M1?void 0:"utf8",(F1,ry)=>{F1?A1(F1):S1(M1?ry.buffer:ry)})},!o1.thisProgram&&1<process.argv.length&&(d1=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),h1=(b1,S1)=>{throw process.exitCode=b1,S1}}else(f1||g1)&&(g1?$1=self.location.href:typeof document<"u"&&document.currentScript&&($1=document.currentScript.src),r1&&($1=r1),$1.startsWith("blob:")?$1="":$1=$1.substr(0,$1.replace(/[?#].*/,"").lastIndexOf("/")+1),y1=b1=>{var S1=new XMLHttpRequest;return S1.open("GET",b1,!1),S1.send(null),S1.responseText},g1&&(E1=b1=>{var S1=new XMLHttpRequest;return S1.open("GET",b1,!1),S1.responseType="arraybuffer",S1.send(null),new Uint8Array(S1.response)}),_1=(b1,S1,A1)=>{var M1=new XMLHttpRequest;M1.open("GET",b1,!0),M1.responseType="arraybuffer",M1.onload=()=>{M1.status==200||M1.status==0&&M1.response?S1(M1.response):A1()},M1.onerror=A1,M1.send(null)});var k1=console.log.bind(console),N1=console.error.bind(console);Object.assign(o1,c1),c1=null;var W1,H1=!1,ty,ey,ly,oy,Q1,U1,V1,K1,J1,hy,G1;function Y1(){var b1=W1.buffer;o1.HEAP8=ey=new Int8Array(b1),o1.HEAP16=oy=new Int16Array(b1),o1.HEAPU8=ly=new Uint8Array(b1),o1.HEAPU16=Q1=new Uint16Array(b1),o1.HEAP32=U1=new Int32Array(b1),o1.HEAPU32=V1=new Uint32Array(b1),o1.HEAPF32=K1=new Float32Array(b1),o1.HEAPF64=G1=new Float64Array(b1),o1.HEAP64=J1=new BigInt64Array(b1),o1.HEAPU64=hy=new BigUint64Array(b1)}var yy=[],Oy=[],Ey=[],jy=0,Ay=null;function Uy(b1){throw b1="Aborted("+b1+")",N1(b1),H1=!0,ty=1,b1=new WebAssembly.RuntimeError(b1+". Build with -sASSERTIONS for more info."),u1(b1),b1}var Gy=b1=>b1.startsWith("data:application/octet-stream;base64,"),Wy=b1=>b1.startsWith("file://"),Yy;if(Yy="ort-wasm-simd.wasm",!Gy(Yy)){var Vy=Yy;Yy=o1.locateFile?o1.locateFile(Vy,$1):$1+Vy}function p0(b1){if(E1)return E1(b1);throw"both async and sync fetching of the wasm failed"}function y0(b1){if(f1||g1){if(typeof fetch=="function"&&!Wy(b1))return fetch(b1,{credentials:"same-origin"}).then(S1=>{if(!S1.ok)throw`failed to load wasm binary file at '${b1}'`;return S1.arrayBuffer()}).catch(()=>p0(b1));if(_1)return new Promise((S1,A1)=>{_1(b1,M1=>S1(new Uint8Array(M1)),A1)})}return Promise.resolve().then(()=>p0(b1))}function A0(b1,S1,A1){return y0(b1).then(M1=>WebAssembly.instantiate(M1,S1)).then(A1,M1=>{N1(`failed to asynchronously prepare wasm: ${M1}`),Uy(M1)})}function lv(b1,S1){var A1=Yy;return typeof WebAssembly.instantiateStreaming!="function"||Gy(A1)||Wy(A1)||v1||typeof fetch!="function"?A0(A1,b1,S1):fetch(A1,{credentials:"same-origin"}).then(M1=>WebAssembly.instantiateStreaming(M1,b1).then(S1,function(F1){return N1(`wasm streaming compile failed: ${F1}`),N1("falling back to ArrayBuffer instantiation"),A0(A1,b1,S1)}))}var R0={824920:(b1,S1,A1,M1)=>{if(typeof o1>"u"||!o1.eb)return 1;if(b1=Ty(b1>>>0),b1.startsWith("./")&&(b1=b1.substring(2)),b1=o1.eb.get(b1),!b1)return 2;if(S1>>>=0,A1>>>=0,S1+A1>b1.byteLength)return 3;try{return ly.set(b1.subarray(S1,S1+A1),M1>>>0>>>0),0}catch{return 4}},825421:()=>{o1.qb()},825452:()=>{o1.rb()},825481:()=>{o1.vb()},825506:b1=>o1.pb(b1),825539:b1=>o1.tb(b1),825571:(b1,S1,A1)=>{o1.lb(b1,S1,A1,!0)},825610:(b1,S1,A1)=>{o1.lb(b1,S1,A1)},825643:b1=>{o1.Ra("Abs",b1,void 0)},825694:b1=>{o1.Ra("Neg",b1,void 0)},825745:b1=>{o1.Ra("Floor",b1,void 0)},825798:b1=>{o1.Ra("Ceil",b1,void 0)},825850:b1=>{o1.Ra("Reciprocal",b1,void 0)},825908:b1=>{o1.Ra("Sqrt",b1,void 0)},825960:b1=>{o1.Ra("Exp",b1,void 0)},826011:b1=>{o1.Ra("Erf",b1,void 0)},826062:b1=>{o1.Ra("Sigmoid",b1,void 0)},826117:(b1,S1,A1)=>{o1.Ra("HardSigmoid",b1,{alpha:S1,beta:A1})},826196:b1=>{o1.Ra("Log",b1,void 0)},826247:b1=>{o1.Ra("Sin",b1,void 0)},826298:b1=>{o1.Ra("Cos",b1,void 0)},826349:b1=>{o1.Ra("Tan",b1,void 0)},826400:b1=>{o1.Ra("Asin",b1,void 0)},826452:b1=>{o1.Ra("Acos",b1,void 0)},826504:b1=>{o1.Ra("Atan",b1,void 0)},826556:b1=>{o1.Ra("Sinh",b1,void 0)},826608:b1=>{o1.Ra("Cosh",b1,void 0)},826660:b1=>{o1.Ra("Asinh",b1,void 0)},826713:b1=>{o1.Ra("Acosh",b1,void 0)},826766:b1=>{o1.Ra("Atanh",b1,void 0)},826819:b1=>{o1.Ra("Tanh",b1,void 0)},826871:b1=>{o1.Ra("Not",b1,void 0)},826922:(b1,S1,A1)=>{o1.Ra("Clip",b1,{min:S1,max:A1})},826991:b1=>{o1.Ra("Clip",b1,void 0)},827043:(b1,S1)=>{o1.Ra("Elu",b1,{alpha:S1})},827101:b1=>{o1.Ra("Relu",b1,void 0)},827153:(b1,S1)=>{o1.Ra("LeakyRelu",b1,{alpha:S1})},827217:(b1,S1)=>{o1.Ra("ThresholdedRelu",b1,{alpha:S1})},827287:(b1,S1)=>{o1.Ra("Cast",b1,{to:S1})},827345:b1=>{o1.Ra("Add",b1,void 0)},827396:b1=>{o1.Ra("Sub",b1,void 0)},827447:b1=>{o1.Ra("Mul",b1,void 0)},827498:b1=>{o1.Ra("Div",b1,void 0)},827549:b1=>{o1.Ra("Pow",b1,void 0)},827600:b1=>{o1.Ra("Equal",b1,void 0)},827653:b1=>{o1.Ra("Greater",b1,void 0)},827708:b1=>{o1.Ra("GreaterOrEqual",b1,void 0)},827770:b1=>{o1.Ra("Less",b1,void 0)},827822:b1=>{o1.Ra("LessOrEqual",b1,void 0)},827881:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceMean",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},828040:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceMax",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},828198:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceMin",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},828356:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceProd",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},828515:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceSum",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},828673:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceL1",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},828830:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceL2",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},828987:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceLogSum",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},829148:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceSumSquare",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},829312:(b1,S1,A1,M1,F1)=>{o1.Ra("ReduceLogSumExp",b1,{keepDims:!!S1,noopWithEmptyAxes:!!A1,axes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},829476:b1=>{o1.Ra("Where",b1,void 0)},829529:(b1,S1,A1)=>{o1.Ra("Transpose",b1,{perm:S1?Array.from(U1.subarray(S1>>>0,A1>>>0)):[]})},829637:(b1,S1,A1,M1)=>{o1.Ra("DepthToSpace",b1,{blocksize:S1,mode:Ty(A1),format:M1?"NHWC":"NCHW"})},829770:(b1,S1,A1,M1)=>{o1.Ra("DepthToSpace",b1,{blocksize:S1,mode:Ty(A1),format:M1?"NHWC":"NCHW"})},829903:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py,Xy)=>{o1.Ra("ConvTranspose",b1,{format:zy?"NHWC":"NCHW",autoPad:S1,dilations:[A1],group:M1,kernelShape:[F1],pads:[ry,_y],strides:[ky],wIsConst:()=>!!ey[By>>>0],outputPadding:a0?Array.from(U1.subarray(a0>>>0,N0>>>0)):[],outputShape:my?Array.from(U1.subarray(my>>>0,py>>>0)):[],activation:Ty(Xy)})},830304:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py)=>{o1.Ra("ConvTranspose",b1,{format:ky?"NHWC":"NCHW",autoPad:S1,dilations:Array.from(U1.subarray(A1>>>0,(A1>>>0)+2>>>0)),group:M1,kernelShape:Array.from(U1.subarray(F1>>>0,(F1>>>0)+2>>>0)),pads:Array.from(U1.subarray(ry>>>0,(ry>>>0)+4>>>0)),strides:Array.from(U1.subarray(_y>>>0,(_y>>>0)+2>>>0)),wIsConst:()=>!!ey[zy>>>0],outputPadding:By?Array.from(U1.subarray(By>>>0,a0>>>0)):[],outputShape:N0?Array.from(U1.subarray(N0>>>0,my>>>0)):[],activation:Ty(py)})},830869:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py,Xy)=>{o1.Ra("ConvTranspose",b1,{format:zy?"NHWC":"NCHW",autoPad:S1,dilations:[A1],group:M1,kernelShape:[F1],pads:[ry,_y],strides:[ky],wIsConst:()=>!!ey[By>>>0],outputPadding:a0?Array.from(U1.subarray(a0>>>0,N0>>>0)):[],outputShape:my?Array.from(U1.subarray(my>>>0,py>>>0)):[],activation:Ty(Xy)})},831270:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py)=>{o1.Ra("ConvTranspose",b1,{format:ky?"NHWC":"NCHW",autoPad:S1,dilations:Array.from(U1.subarray(A1>>>0,(A1>>>0)+2>>>0)),group:M1,kernelShape:Array.from(U1.subarray(F1>>>0,(F1>>>0)+2>>>0)),pads:Array.from(U1.subarray(ry>>>0,(ry>>>0)+4>>>0)),strides:Array.from(U1.subarray(_y>>>0,(_y>>>0)+2>>>0)),wIsConst:()=>!!ey[zy>>>0],outputPadding:By?Array.from(U1.subarray(By>>>0,a0>>>0)):[],outputShape:N0?Array.from(U1.subarray(N0>>>0,my>>>0)):[],activation:Ty(py)})},831835:(b1,S1)=>{o1.Ra("GlobalAveragePool",b1,{format:S1?"NHWC":"NCHW"})},831926:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py,Xy,Qy)=>{o1.Ra("AveragePool",b1,{format:Qy?"NHWC":"NCHW",auto_pad:S1,ceil_mode:A1,count_include_pad:M1,storage_order:F1,dilations:[ry,_y],kernel_shape:[ky,zy],pads:[By,a0,N0,my],strides:[py,Xy]})},832210:(b1,S1)=>{o1.Ra("GlobalAveragePool",b1,{format:S1?"NHWC":"NCHW"})},832301:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py,Xy,Qy)=>{o1.Ra("AveragePool",b1,{format:Qy?"NHWC":"NCHW",auto_pad:S1,ceil_mode:A1,count_include_pad:M1,storage_order:F1,dilations:[ry,_y],kernel_shape:[ky,zy],pads:[By,a0,N0,my],strides:[py,Xy]})},832585:(b1,S1)=>{o1.Ra("GlobalMaxPool",b1,{format:S1?"NHWC":"NCHW"})},832672:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py,Xy,Qy)=>{o1.Ra("MaxPool",b1,{format:Qy?"NHWC":"NCHW",auto_pad:S1,ceil_mode:A1,count_include_pad:M1,storage_order:F1,dilations:[ry,_y],kernel_shape:[ky,zy],pads:[By,a0,N0,my],strides:[py,Xy]})},832952:(b1,S1)=>{o1.Ra("GlobalMaxPool",b1,{format:S1?"NHWC":"NCHW"})},833039:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py,Xy,Qy)=>{o1.Ra("MaxPool",b1,{format:Qy?"NHWC":"NCHW",auto_pad:S1,ceil_mode:A1,count_include_pad:M1,storage_order:F1,dilations:[ry,_y],kernel_shape:[ky,zy],pads:[By,a0,N0,my],strides:[py,Xy]})},833319:(b1,S1,A1,M1,F1)=>{o1.Ra("Gemm",b1,{alpha:S1,beta:A1,transA:M1,transB:F1})},833423:b1=>{o1.Ra("MatMul",b1,void 0)},833477:(b1,S1,A1,M1)=>{o1.Ra("ArgMax",b1,{keepDims:!!S1,selectLastIndex:!!A1,axis:M1})},833585:(b1,S1,A1,M1)=>{o1.Ra("ArgMin",b1,{keepDims:!!S1,selectLastIndex:!!A1,axis:M1})},833693:(b1,S1)=>{o1.Ra("Softmax",b1,{axis:S1})},833756:(b1,S1)=>{o1.Ra("Concat",b1,{axis:S1})},833816:(b1,S1,A1,M1,F1)=>{o1.Ra("Split",b1,{axis:S1,numOutputs:A1,splitSizes:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},833956:b1=>{o1.Ra("Expand",b1,void 0)},834010:(b1,S1)=>{o1.Ra("Gather",b1,{axis:Number(S1)})},834081:(b1,S1)=>{o1.Ra("GatherElements",b1,{axis:Number(S1)})},834160:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0)=>{o1.Ra("Resize",b1,{antialias:S1,axes:A1?Array.from(U1.subarray(A1>>>0,M1>>>0)):[],coordinateTransformMode:Ty(F1),cubicCoeffA:ry,excludeOutside:_y,extrapolationValue:ky,keepAspectRatioPolicy:Ty(zy),mode:Ty(By),nearestMode:Ty(a0)})},834506:(b1,S1,A1,M1,F1,ry,_y)=>{o1.Ra("Slice",b1,{starts:S1?Array.from(U1.subarray(S1>>>0,A1>>>0)):[],ends:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[],axes:ry?Array.from(U1.subarray(ry>>>0,_y>>>0)):[]})},834722:b1=>{o1.Ra("Tile",b1,void 0)},834774:(b1,S1,A1,M1)=>{o1.Ra("LayerNormalization",b1,{axis:S1,epsilon:A1,simplified:!!M1})},834885:(b1,S1,A1)=>{o1.Ra("InstanceNormalization",b1,{epsilon:S1,format:A1?"NHWC":"NCHW"})},834999:(b1,S1,A1)=>{o1.Ra("InstanceNormalization",b1,{epsilon:S1,format:A1?"NHWC":"NCHW"})},835113:b1=>{o1.Ra("Range",b1,void 0)},835166:(b1,S1)=>{o1.Ra("Einsum",b1,{equation:Ty(S1)})},835247:(b1,S1,A1,M1,F1)=>{o1.Ra("Pad",b1,{mode:S1,value:A1,pads:M1?Array.from(U1.subarray(M1>>>0,F1>>>0)):[]})},835374:(b1,S1,A1,M1,F1,ry)=>{o1.Ra("BatchNormalization",b1,{epsilon:S1,momentum:A1,spatial:!!F1,trainingMode:!!M1,format:ry?"NHWC":"NCHW"})},835543:(b1,S1,A1,M1,F1,ry)=>{o1.Ra("BatchNormalization",b1,{epsilon:S1,momentum:A1,spatial:!!F1,trainingMode:!!M1,format:ry?"NHWC":"NCHW"})},835712:(b1,S1,A1)=>{o1.Ra("CumSum",b1,{exclusive:Number(S1),reverse:Number(A1)})},835809:(b1,S1,A1,M1,F1,ry,_y,ky,zy)=>{o1.Ra("Attention",b1,{numHeads:S1,isUnidirectional:A1,maskFilterValue:M1,scale:F1,doRotary:ry,qkvHiddenSizes:_y?Array.from(U1.subarray(Number(ky)>>>0,Number(ky)+_y>>>0)):[],pastPresentShareBuffer:!!zy})},836081:b1=>{o1.Ra("BiasAdd",b1,void 0)},836136:b1=>{o1.Ra("BiasSplitGelu",b1,void 0)},836197:b1=>{o1.Ra("FastGelu",b1,void 0)},836253:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my)=>{o1.Ra("Conv",b1,{format:zy?"NHWC":"NCHW",auto_pad:S1,dilations:[A1],group:M1,kernel_shape:[F1],pads:ry?Array.from(U1.subarray(ry>>>0,_y>>>0)):[],strides:[ky],w_is_const:()=>!!ey[By>>>0],activation:Ty(a0),activation_params:N0?Array.from(K1.subarray(N0>>>0,my>>>0)):[]})},836623:(b1,S1,A1,M1,F1,ry,_y,ky,zy,By,a0,N0,my,py,Xy,Qy)=>{o1.Ra("Conv",b1,{format:N0?"NHWC":"NCHW",auto_pad:S1,dilations:[A1,M1],group:F1,kernel_shape:[ry,_y],pads:ky?Array.from(U1.subarray(ky>>>0,zy>>>0)):[],strides:[By,a0],w_is_const:()=>!!ey[my>>>0],activation:Ty(py),activation_params:Xy?Array.from(K1.subarray(Xy>>>0,Qy>>>0)):[]})},837014:b1=>{o1.Ra("Gelu",b1,void 0)},837066:(b1,S1,A1,M1,F1,ry)=>{o1.Ra("MatMulNBits",b1,{k:S1,n:A1,accuracyLevel:M1,bits:F1,blockSize:ry})},837193:(b1,S1,A1,M1,F1,ry)=>{o1.Ra("MultiHeadAttention",b1,{numHeads:S1,isUnidirectional:A1,maskFilterValue:M1,scale:F1,doRotary:ry})},837352:(b1,S1,A1,M1,F1)=>{o1.Ra("RotaryEmbedding",b1,{interleaved:!!S1,numHeads:A1,rotaryEmbeddingDim:M1,scale:F1})},837491:(b1,S1,A1)=>{o1.Ra("SkipLayerNormalization",b1,{epsilon:S1,simplified:!!A1})},837593:(b1,S1,A1)=>{o1.Ra("SkipLayerNormalization",b1,{epsilon:S1,simplified:!!A1})},837695:(b1,S1,A1,M1)=>{o1.Ra("LayerNormalization",b1,{axis:S1,epsilon:A1,simplified:!!M1})},837806:b1=>{o1.ub(b1)},837840:(b1,S1)=>o1.wb(b1,S1,o1.cb.xb,o1.cb.errors)};function X1(b1){this.name="ExitStatus",this.message=`Program terminated with exit(${b1})`,this.status=b1}class fy{constructor(S1){this.hb=S1-24}}var vy=0,Dy=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ny=(b1,S1,A1)=>{S1>>>=0;var M1=S1+A1;for(A1=S1;b1[A1]&&!(A1>=M1);)++A1;if(16<A1-S1&&b1.buffer&&Dy)return Dy.decode(b1.subarray(S1,A1));for(M1="";S1<A1;){var F1=b1[S1++];if(F1&128){var ry=b1[S1++]&63;if((F1&224)==192)M1+=String.fromCharCode((F1&31)<<6|ry);else{var _y=b1[S1++]&63;F1=(F1&240)==224?(F1&15)<<12|ry<<6|_y:(F1&7)<<18|ry<<12|_y<<6|b1[S1++]&63,65536>F1?M1+=String.fromCharCode(F1):(F1-=65536,M1+=String.fromCharCode(55296|F1>>10,56320|F1&1023))}}else M1+=String.fromCharCode(F1)}return M1},Ty=(b1,S1)=>(b1>>>=0)?Ny(ly,b1,S1):"",Hy=b1=>{for(var S1=0,A1=0;A1<b1.length;++A1){var M1=b1.charCodeAt(A1);127>=M1?S1++:2047>=M1?S1+=2:55296<=M1&&57343>=M1?(S1+=4,++A1):S1+=3}return S1},l0=(b1,S1,A1,M1)=>{if(A1>>>=0,!(0<M1))return 0;var F1=A1;M1=A1+M1-1;for(var ry=0;ry<b1.length;++ry){var _y=b1.charCodeAt(ry);if(55296<=_y&&57343>=_y){var ky=b1.charCodeAt(++ry);_y=65536+((_y&1023)<<10)|ky&1023}if(127>=_y){if(A1>=M1)break;S1[A1++>>>0]=_y}else{if(2047>=_y){if(A1+1>=M1)break;S1[A1++>>>0]=192|_y>>6}else{if(65535>=_y){if(A1+2>=M1)break;S1[A1++>>>0]=224|_y>>12}else{if(A1+3>=M1)break;S1[A1++>>>0]=240|_y>>18,S1[A1++>>>0]=128|_y>>12&63}S1[A1++>>>0]=128|_y>>6&63}S1[A1++>>>0]=128|_y&63}}return S1[A1>>>0]=0,A1-F1},I0,$0=b1=>{for(var S1="";ly[b1>>>0];)S1+=I0[ly[b1++>>>0]];return S1},iv={},b0={},dv;function i0(b1,S1,A1={}){var M1=S1.name;if(!b1)throw new dv(`type "${M1}" must have a positive integer typeid pointer`);if(b0.hasOwnProperty(b1)){if(A1.nb)return;throw new dv(`Cannot register type '${M1}' twice`)}b0[b1]=S1,iv.hasOwnProperty(b1)&&(S1=iv[b1],delete iv[b1],S1.forEach(F1=>F1()))}function nv(b1,S1,A1={}){if(!("argPackAdvance"in S1))throw new TypeError("registerType registeredInstance requires argPackAdvance");return i0(b1,S1,A1)}var xv=(b1,S1,A1)=>{switch(S1){case 1:return A1?M1=>ey[M1>>>0]:M1=>ly[M1>>>0];case 2:return A1?M1=>oy[M1>>>1>>>0]:M1=>Q1[M1>>>1>>>0];case 4:return A1?M1=>U1[M1>>>2>>>0]:M1=>V1[M1>>>2>>>0];case 8:return A1?M1=>J1[M1>>>3]:M1=>hy[M1>>>3];default:throw new TypeError(`invalid integer width (${S1}): ${b1}`)}},Tv=[],qy=[];function Iv(b1){b1>>>=0,9<b1&&--qy[b1+1]===0&&(qy[b1]=void 0,Tv.push(b1))}var u0=b1=>{if(!b1)throw new dv("Cannot use deleted val. handle = "+b1);return qy[b1]},ov=b1=>{switch(b1){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let S1=Tv.pop()||qy.length;return qy[S1]=b1,qy[S1+1]=1,S1}};function z1(b1){return this.fromWireType(V1[b1>>>2>>>0])}var ay={name:"emscripten::val",fromWireType:b1=>{var S1=u0(b1);return Iv(b1),S1},toWireType:(b1,S1)=>ov(S1),argPackAdvance:8,readValueFromPointer:z1,bb:null},cy=(b1,S1)=>{switch(S1){case 4:return function(A1){return this.fromWireType(K1[A1>>>2>>>0])};case 8:return function(A1){return this.fromWireType(G1[A1>>>3>>>0])};default:throw new TypeError(`invalid float width (${S1}): ${b1}`)}},wy=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Cy=(b1,S1)=>{for(var A1=b1>>1,M1=A1+S1/2;!(A1>=M1)&&Q1[A1>>>0];)++A1;if(A1<<=1,32<A1-b1&&wy)return wy.decode(ly.subarray(b1>>>0,A1>>>0));for(A1="",M1=0;!(M1>=S1/2);++M1){var F1=oy[b1+2*M1>>>1>>>0];if(F1==0)break;A1+=String.fromCharCode(F1)}return A1},r0=(b1,S1,A1)=>{if(A1??(A1=2147483647),2>A1)return 0;A1-=2;var M1=S1;A1=A1<2*b1.length?A1/2:b1.length;for(var F1=0;F1<A1;++F1)oy[S1>>>1>>>0]=b1.charCodeAt(F1),S1+=2;return oy[S1>>>1>>>0]=0,S1-M1},v0=b1=>2*b1.length,Q0=(b1,S1)=>{for(var A1=0,M1="";!(A1>=S1/4);){var F1=U1[b1+4*A1>>>2>>>0];if(F1==0)break;++A1,65536<=F1?(F1-=65536,M1+=String.fromCharCode(55296|F1>>10,56320|F1&1023)):M1+=String.fromCharCode(F1)}return M1},hv=(b1,S1,A1)=>{if(S1>>>=0,A1??(A1=2147483647),4>A1)return 0;var M1=S1;A1=M1+A1-4;for(var F1=0;F1<b1.length;++F1){var ry=b1.charCodeAt(F1);if(55296<=ry&&57343>=ry){var _y=b1.charCodeAt(++F1);ry=65536+((ry&1023)<<10)|_y&1023}if(U1[S1>>>2>>>0]=ry,S1+=4,S1+4>A1)break}return U1[S1>>>2>>>0]=0,S1-M1},uv=b1=>{for(var S1=0,A1=0;A1<b1.length;++A1){var M1=b1.charCodeAt(A1);55296<=M1&&57343>=M1&&++A1,S1+=4}return S1},J0=(b1,S1)=>{var A1=b0[b1];if(A1===void 0)throw b1=k$(b1),A1=$0(b1),wv(b1),new dv(`${S1} has unknown type ${A1}`);return A1},Wv=(b1,S1,A1)=>{var M1=[];return b1=b1.toWireType(M1,A1),M1.length&&(V1[S1>>>2>>>0]=ov(M1)),b1},yv=b1=>{try{b1()}catch(S1){Uy(S1)}},gy=b1=>{var S1;if(!H1)try{b1();try{ty=ty=b1=ty,(S1=o1.onExit)==null||S1.call(o1,b1),H1=!0,h1(b1,new X1(b1))}catch(A1){A1 instanceof X1||A1=="unwind"||h1(1,A1)}}catch(A1){A1 instanceof X1||A1=="unwind"||h1(1,A1)}};function T0(){var b1=c0,S1={};for(let[A1,M1]of Object.entries(b1))S1[A1]=typeof M1=="function"?(...F1)=>{Cv.push(A1);try{return M1(...F1)}finally{H1||(Cv.pop(),q0&&C0===1&&Cv.length===0&&(C0=0,yv(M$),typeof Fibers<"u"&&Fibers.Db()))}}:M1;return S1}var C0=0,q0=null,Hv=0,Cv=[],$$={},b$={},I$=0,Lv=null,u$=[];function sy(){return new Promise((b1,S1)=>{Lv={resolve:b1,reject:S1}})}function Fy(){var b1=Fv(65548),S1=b1+12;V1[b1>>>2>>>0]=S1,V1[b1+4>>>2>>>0]=S1+65536,S1=Cv[0];var A1=$$[S1];return A1===void 0&&(A1=I$++,$$[S1]=A1,b$[A1]=S1),U1[b1+8>>>2>>>0]=A1,b1}function e0(b1){if(!H1){if(C0===0){var S1=!1,A1=!1;b1((M1=0)=>{if(!H1&&(Hv=M1,S1=!0,A1)){C0=2,yv(()=>Pv(q0)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),M1=!1;try{var F1=(0,c0[b$[U1[q0+8>>>2>>>0]]])()}catch(ky){F1=ky,M1=!0}var ry=!1;if(!q0){var _y=Lv;_y&&(Lv=null,(M1?_y.reject:_y.resolve)(F1),ry=!0)}if(M1&&!ry)throw F1}}),A1=!0,S1||(C0=1,q0=Fy(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),yv(()=>Ov(q0)))}else C0===2?(C0=0,yv(Nv),wv(q0),q0=null,u$.forEach(gy)):Uy(`invalid state: ${C0}`);return Hv}}function E0(b1){return e0(S1=>{b1().then(S1)})}var D0=[],sv={},B0=b1=>{var S1=sv[b1];return S1===void 0?$0(b1):S1},P0=()=>typeof globalThis=="object"?globalThis:Function("return this")(),H0=b1=>{var S1=D0.length;return D0.push(b1),S1},pv=(b1,S1)=>{for(var A1=Array(b1),M1=0;M1<b1;++M1)A1[M1]=J0(V1[S1+4*M1>>>2>>>0],"parameter "+M1);return A1},Z0=(b1,S1)=>Object.defineProperty(S1,"name",{value:b1});function cv(b1){var S1=Function;if(!(S1 instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof S1} which is not a function`);var A1=Z0(S1.name||"unknownFunctionName",function(){});return A1.prototype=S1.prototype,A1=new A1,b1=S1.apply(A1,b1),b1 instanceof Object?b1:A1}var x0=b1=>b1%4===0&&(b1%100!==0||b1%400===0),ev=[0,31,60,91,121,152,182,213,244,274,305,335],Dv=[0,31,59,90,120,151,181,212,243,273,304,334],fv=[],n$=(b1,S1)=>{fv.length=0;for(var A1;A1=ly[b1++>>>0];){var M1=A1!=105;M1&=A1!=112,S1+=M1&&S1%8?4:0,fv.push(A1==112?V1[S1>>>2>>>0]:A1==106?J1[S1>>>3]:A1==105?U1[S1>>>2>>>0]:G1[S1>>>3>>>0]),S1+=M1?8:4}return fv},f0={},vv=()=>{if(!mv){var b1={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d1||"./this.program"},S1;for(S1 in f0)f0[S1]===void 0?delete b1[S1]:b1[S1]=f0[S1];var A1=[];for(S1 in b1)A1.push(`${S1}=${b1[S1]}`);mv=A1}return mv},mv,Gv=[null,[],[]],qv=[31,29,31,30,31,30,31,31,30,31,30,31],c$=[31,28,31,30,31,30,31,31,30,31,30,31];function U$(b1){var S1=Array(Hy(b1)+1);return l0(b1,S1,0,S1.length),S1}function ex(b1,S1,A1,M1){function F1(py,Xy,Qy){for(py=typeof py=="number"?py.toString():py||"";py.length<Xy;)py=Qy[0]+py;return py}function ry(py,Xy){return F1(py,Xy,"0")}function _y(py,Xy){function Qy(D$){return 0>D$?-1:0<D$?1:0}var j0;return(j0=Qy(py.getFullYear()-Xy.getFullYear()))===0&&(j0=Qy(py.getMonth()-Xy.getMonth()))===0&&(j0=Qy(py.getDate()-Xy.getDate())),j0}function ky(py){switch(py.getDay()){case 0:return new Date(py.getFullYear()-1,11,29);case 1:return py;case 2:return new Date(py.getFullYear(),0,3);case 3:return new Date(py.getFullYear(),0,2);case 4:return new Date(py.getFullYear(),0,1);case 5:return new Date(py.getFullYear()-1,11,31);case 6:return new Date(py.getFullYear()-1,11,30)}}function zy(py){var Xy=py.$a;for(py=new Date(new Date(py.ab+1900,0,1).getTime());0<Xy;){var Qy=py.getMonth(),j0=(x0(py.getFullYear())?qv:c$)[Qy];if(Xy>j0-py.getDate())Xy-=j0-py.getDate()+1,py.setDate(1),11>Qy?py.setMonth(Qy+1):(py.setMonth(0),py.setFullYear(py.getFullYear()+1));else{py.setDate(py.getDate()+Xy);break}}return Qy=new Date(py.getFullYear()+1,0,4),Xy=ky(new Date(py.getFullYear(),0,4)),Qy=ky(Qy),0>=_y(Xy,py)?0>=_y(Qy,py)?py.getFullYear()+1:py.getFullYear():py.getFullYear()-1}b1>>>=0,S1>>>=0,A1>>>=0,M1>>>=0;var By=V1[M1+40>>>2>>>0];M1={Ab:U1[M1>>>2>>>0],zb:U1[M1+4>>>2>>>0],fb:U1[M1+8>>>2>>>0],jb:U1[M1+12>>>2>>>0],gb:U1[M1+16>>>2>>>0],ab:U1[M1+20>>>2>>>0],Va:U1[M1+24>>>2>>>0],$a:U1[M1+28>>>2>>>0],Cb:U1[M1+32>>>2>>>0],yb:U1[M1+36>>>2>>>0],Bb:By?Ty(By):""},A1=Ty(A1),By={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var a0 in By)A1=A1.replace(new RegExp(a0,"g"),By[a0]);var N0="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),my="January February March April May June July August September October November December".split(" ");By={"%a":py=>N0[py.Va].substring(0,3),"%A":py=>N0[py.Va],"%b":py=>my[py.gb].substring(0,3),"%B":py=>my[py.gb],"%C":py=>ry((py.ab+1900)/100|0,2),"%d":py=>ry(py.jb,2),"%e":py=>F1(py.jb,2," "),"%g":py=>zy(py).toString().substring(2),"%G":zy,"%H":py=>ry(py.fb,2),"%I":py=>(py=py.fb,py==0?py=12:12<py&&(py-=12),ry(py,2)),"%j":py=>{for(var Xy=0,Qy=0;Qy<=py.gb-1;Xy+=(x0(py.ab+1900)?qv:c$)[Qy++]);return ry(py.jb+Xy,3)},"%m":py=>ry(py.gb+1,2),"%M":py=>ry(py.zb,2),"%n":()=>`
`,"%p":py=>0<=py.fb&&12>py.fb?"AM":"PM","%S":py=>ry(py.Ab,2),"%t":()=>"	","%u":py=>py.Va||7,"%U":py=>ry(Math.floor((py.$a+7-py.Va)/7),2),"%V":py=>{var Xy=Math.floor((py.$a+7-(py.Va+6)%7)/7);if(2>=(py.Va+371-py.$a-2)%7&&Xy++,Xy)Xy==53&&(Qy=(py.Va+371-py.$a)%7,Qy==4||Qy==3&&x0(py.ab)||(Xy=1));else{Xy=52;var Qy=(py.Va+7-py.$a-1)%7;(Qy==4||Qy==5&&x0(py.ab%400-1))&&Xy++}return ry(Xy,2)},"%w":py=>py.Va,"%W":py=>ry(Math.floor((py.$a+7-(py.Va+6)%7)/7),2),"%y":py=>(py.ab+1900).toString().substring(2),"%Y":py=>py.ab+1900,"%z":py=>{py=py.yb;var Xy=0<=py;return py=Math.abs(py)/60,(Xy?"+":"-")+("0000"+(py/60*100+py%60)).slice(-4)},"%Z":py=>py.Bb,"%%":()=>"%"},A1=A1.replace(/%%/g,"\0\0");for(a0 in By)A1.includes(a0)&&(A1=A1.replace(new RegExp(a0,"g"),By[a0](M1)));return A1=A1.replace(/\0\0/g,"%"),a0=U$(A1),a0.length>S1?0:(ey.set(a0,b1>>>0),a0.length-1)}for(var P$=Array(256),s0=0;256>s0;++s0)P$[s0]=String.fromCharCode(s0);I0=P$,dv=o1.BindingError=class extends Error{constructor(b1){super(b1),this.name="BindingError"}},o1.InternalError=class extends Error{constructor(b1){super(b1),this.name="InternalError"}},qy.push(0,1,void 0,1,null,1,!0,1,!1,1),o1.count_emval_handles=()=>qy.length/2-5-Tv.length;var V$={ia:function(b1,S1,A1){return E0(async()=>{await o1.sb(b1,S1,A1)})},a:function(b1,S1,A1){b1>>>=0;var M1=new fy(b1);throw V1[M1.hb+16>>>2>>>0]=0,V1[M1.hb+4>>>2>>>0]=S1>>>0,V1[M1.hb+8>>>2>>>0]=A1>>>0,vy=b1,vy},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(b1,S1,A1){S1=$0(S1>>>0),nv(b1>>>0,{name:S1,fromWireType:M1=>M1,toWireType:function(M1,F1){if(typeof F1!="bigint"&&typeof F1!="number")throw F1===null?F1="null":(M1=typeof F1,F1=M1==="object"||M1==="array"||M1==="function"?F1.toString():""+F1),new TypeError(`Cannot convert "${F1}" to ${this.name}`);return typeof F1=="number"&&(F1=BigInt(F1)),F1},argPackAdvance:8,readValueFromPointer:xv(S1,A1>>>0,S1.indexOf("u")==-1),bb:null})},K:function(b1,S1,A1,M1){S1=$0(S1>>>0),nv(b1>>>0,{name:S1,fromWireType:function(F1){return!!F1},toWireType:function(F1,ry){return ry?A1:M1},argPackAdvance:8,readValueFromPointer:function(F1){return this.fromWireType(ly[F1>>>0])},bb:null})},J:function(b1){return nv(b1>>>0,ay)},B:function(b1,S1,A1){S1=$0(S1>>>0),nv(b1>>>0,{name:S1,fromWireType:M1=>M1,toWireType:(M1,F1)=>F1,argPackAdvance:8,readValueFromPointer:cy(S1,A1>>>0),bb:null})},s:function(b1,S1,A1,M1,F1){if(b1>>>=0,A1>>>=0,S1=$0(S1>>>0),F1===-1&&(F1=4294967295),F1=ky=>ky,M1===0){var ry=32-8*A1;F1=ky=>ky<<ry>>>ry}var _y=S1.includes("unsigned")?function(ky,zy){return zy>>>0}:function(ky,zy){return zy};nv(b1,{name:S1,fromWireType:F1,toWireType:_y,argPackAdvance:8,readValueFromPointer:xv(S1,A1,M1!==0),bb:null})},o:function(b1,S1,A1){function M1(ry){return new F1(ey.buffer,V1[ry+4>>>2>>>0],V1[ry>>>2>>>0])}var F1=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][S1];A1=$0(A1>>>0),nv(b1>>>0,{name:A1,fromWireType:M1,argPackAdvance:8,readValueFromPointer:M1},{nb:!0})},D:function(b1,S1){S1=$0(S1>>>0);var A1=S1==="std::string";nv(b1>>>0,{name:S1,fromWireType:function(M1){var F1=V1[M1>>>2>>>0],ry=M1+4;if(A1)for(var _y=ry,ky=0;ky<=F1;++ky){var zy=ry+ky;if(ky==F1||ly[zy>>>0]==0){if(_y=Ty(_y,zy-_y),By===void 0)var By=_y;else By+="\0",By+=_y;_y=zy+1}}else{for(By=Array(F1),ky=0;ky<F1;++ky)By[ky]=String.fromCharCode(ly[ry+ky>>>0]);By=By.join("")}return wv(M1),By},toWireType:function(M1,F1){F1 instanceof ArrayBuffer&&(F1=new Uint8Array(F1));var ry=typeof F1=="string";if(!(ry||F1 instanceof Uint8Array||F1 instanceof Uint8ClampedArray||F1 instanceof Int8Array))throw new dv("Cannot pass non-string to std::string");var _y=A1&&ry?Hy(F1):F1.length,ky=Fv(4+_y+1),zy=ky+4;if(V1[ky>>>2>>>0]=_y,A1&&ry)l0(F1,ly,zy,_y+1);else if(ry)for(ry=0;ry<_y;++ry){var By=F1.charCodeAt(ry);if(255<By)throw wv(zy),new dv("String has UTF-16 code units that do not fit in 8 bits");ly[zy+ry>>>0]=By}else for(ry=0;ry<_y;++ry)ly[zy+ry>>>0]=F1[ry];return M1!==null&&M1.push(wv,ky),ky},argPackAdvance:8,readValueFromPointer:z1,bb(M1){wv(M1)}})},x:function(b1,S1,A1){if(S1>>>=0,A1>>>=0,A1=$0(A1),S1===2)var M1=Cy,F1=r0,ry=v0,_y=ky=>Q1[ky>>>1>>>0];else S1===4&&(M1=Q0,F1=hv,ry=uv,_y=ky=>V1[ky>>>2>>>0]);nv(b1>>>0,{name:A1,fromWireType:ky=>{for(var zy=V1[ky>>>2>>>0],By,a0=ky+4,N0=0;N0<=zy;++N0){var my=ky+4+N0*S1;(N0==zy||_y(my)==0)&&(a0=M1(a0,my-a0),By===void 0?By=a0:(By+="\0",By+=a0),a0=my+S1)}return wv(ky),By},toWireType:(ky,zy)=>{if(typeof zy!="string")throw new dv(`Cannot pass non-string to C++ string type ${A1}`);var By=ry(zy),a0=Fv(4+By+S1);return V1[a0>>>2>>>0]=By/S1,F1(zy,a0+4,By+S1),ky!==null&&ky.push(wv,a0),a0},argPackAdvance:8,readValueFromPointer:z1,bb(ky){wv(ky)}})},L:function(b1,S1){S1=$0(S1>>>0),nv(b1>>>0,{ob:!0,name:S1,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(b1,S1,A1){return S1>>>=0,A1>>>=0,b1=u0(b1>>>0),S1=J0(S1,"emval::as"),Wv(S1,A1,b1)},w:function(b1){return b1>>>=0,E0(()=>(b1=u0(b1),b1.then(ov)))},n:function(b1,S1,A1,M1){return A1>>>=0,M1>>>=0,b1=D0[b1>>>0],S1=u0(S1>>>0),b1(null,S1,A1,M1)},j:function(b1,S1,A1,M1,F1){return A1>>>=0,M1>>>=0,F1>>>=0,b1=D0[b1>>>0],S1=u0(S1>>>0),A1=B0(A1),b1(S1,S1[A1],M1,F1)},b:Iv,A:function(b1,S1){return S1>>>=0,b1=u0(b1>>>0),S1=u0(S1),b1==S1},m:function(b1){return b1>>>=0,b1===0?ov(P0()):(b1=B0(b1),ov(P0()[b1]))},i:function(b1,S1,A1){S1=pv(b1,S1>>>0);var M1=S1.shift();b1--;var F1=`return function (obj, func, destructorsRef, args) {
`,ry=0,_y=[];A1===0&&_y.push("obj");for(var ky=["retType"],zy=[M1],By=0;By<b1;++By)_y.push("arg"+By),ky.push("argType"+By),zy.push(S1[By]),F1+=`  var arg${By} = argType${By}.readValueFromPointer(args${ry?"+"+ry:""});
`,ry+=S1[By].argPackAdvance;return F1+=`  var rv = ${A1===1?"new func":"func.call"}(${_y.join(", ")});
`,M1.ob||(ky.push("emval_returnValue"),zy.push(Wv),F1+=`  return emval_returnValue(retType, destructorsRef, rv);
`),ky.push(F1+`};
`),b1=cv(ky)(...zy),A1=`methodCaller<(${S1.map(a0=>a0.name).join(", ")}) => ${M1.name}>`,H0(Z0(A1,b1))},r:function(b1,S1){return S1>>>=0,b1=u0(b1>>>0),S1=u0(S1),ov(b1[S1])},e:function(b1){b1>>>=0,9<b1&&(qy[b1+1]+=1)},t:function(){return ov([])},l:function(b1){b1=u0(b1>>>0);for(var S1=Array(b1.length),A1=0;A1<b1.length;A1++)S1[A1]=b1[A1];return ov(S1)},f:function(b1){return ov(B0(b1>>>0))},k:function(){return ov({})},h:function(b1){b1>>>=0;for(var S1=u0(b1);S1.length;){var A1=S1.pop();S1.pop()(A1)}Iv(b1)},g:function(b1,S1,A1){S1>>>=0,A1>>>=0,b1=u0(b1>>>0),S1=u0(S1),A1=u0(A1),b1[S1]=A1},c:function(b1,S1){return S1>>>=0,b1=J0(b1>>>0,"_emval_take_value"),b1=b1.readValueFromPointer(S1),ov(b1)},W:function(b1,S1){b1=-9007199254740992>b1||9007199254740992<b1?NaN:Number(b1),S1>>>=0,b1=new Date(1e3*b1),U1[S1>>>2>>>0]=b1.getUTCSeconds(),U1[S1+4>>>2>>>0]=b1.getUTCMinutes(),U1[S1+8>>>2>>>0]=b1.getUTCHours(),U1[S1+12>>>2>>>0]=b1.getUTCDate(),U1[S1+16>>>2>>>0]=b1.getUTCMonth(),U1[S1+20>>>2>>>0]=b1.getUTCFullYear()-1900,U1[S1+24>>>2>>>0]=b1.getUTCDay(),U1[S1+28>>>2>>>0]=(b1.getTime()-Date.UTC(b1.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(b1,S1){b1=-9007199254740992>b1||9007199254740992<b1?NaN:Number(b1),S1>>>=0,b1=new Date(1e3*b1),U1[S1>>>2>>>0]=b1.getSeconds(),U1[S1+4>>>2>>>0]=b1.getMinutes(),U1[S1+8>>>2>>>0]=b1.getHours(),U1[S1+12>>>2>>>0]=b1.getDate(),U1[S1+16>>>2>>>0]=b1.getMonth(),U1[S1+20>>>2>>>0]=b1.getFullYear()-1900,U1[S1+24>>>2>>>0]=b1.getDay(),U1[S1+28>>>2>>>0]=(x0(b1.getFullYear())?ev:Dv)[b1.getMonth()]+b1.getDate()-1|0,U1[S1+36>>>2>>>0]=-(60*b1.getTimezoneOffset());var A1=new Date(b1.getFullYear(),6,1).getTimezoneOffset(),M1=new Date(b1.getFullYear(),0,1).getTimezoneOffset();U1[S1+32>>>2>>>0]=(A1!=M1&&b1.getTimezoneOffset()==Math.min(M1,A1))|0},Y:function(b1){b1>>>=0;var S1=new Date(U1[b1+20>>>2>>>0]+1900,U1[b1+16>>>2>>>0],U1[b1+12>>>2>>>0],U1[b1+8>>>2>>>0],U1[b1+4>>>2>>>0],U1[b1>>>2>>>0],0),A1=U1[b1+32>>>2>>>0],M1=S1.getTimezoneOffset(),F1=new Date(S1.getFullYear(),6,1).getTimezoneOffset(),ry=new Date(S1.getFullYear(),0,1).getTimezoneOffset(),_y=Math.min(ry,F1);return 0>A1?U1[b1+32>>>2>>>0]=+(F1!=ry&&_y==M1):0<A1!=(_y==M1)&&(F1=Math.max(ry,F1),S1.setTime(S1.getTime()+6e4*((0<A1?_y:F1)-M1))),U1[b1+24>>>2>>>0]=S1.getDay(),U1[b1+28>>>2>>>0]=(x0(S1.getFullYear())?ev:Dv)[S1.getMonth()]+S1.getDate()-1|0,U1[b1>>>2>>>0]=S1.getSeconds(),U1[b1+4>>>2>>>0]=S1.getMinutes(),U1[b1+8>>>2>>>0]=S1.getHours(),U1[b1+12>>>2>>>0]=S1.getDate(),U1[b1+16>>>2>>>0]=S1.getMonth(),U1[b1+20>>>2>>>0]=S1.getYear(),b1=S1.getTime(),BigInt(isNaN(b1)?-1:b1/1e3)},U:function(){return-52},V:function(){},N:function(b1,S1,A1,M1){A1>>>=0,M1>>>=0;var F1=new Date().getFullYear(),ry=new Date(F1,0,1),_y=new Date(F1,6,1);F1=ry.getTimezoneOffset();var ky=_y.getTimezoneOffset();V1[b1>>>0>>>2>>>0]=60*Math.max(F1,ky),U1[S1>>>0>>>2>>>0]=+(F1!=ky),b1=zy=>zy.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],ry=b1(ry),_y=b1(_y),ky<F1?(l0(ry,ly,A1,17),l0(_y,ly,M1,17)):(l0(ry,ly,M1,17),l0(_y,ly,A1,17))},v:()=>{Uy("")},d:function(b1,S1,A1){return b1>>>=0,S1=n$(S1>>>0,A1>>>0),R0[b1](...S1)},I:function(b1,S1,A1){return b1>>>=0,S1=n$(S1>>>0,A1>>>0),R0[b1](...S1)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(b1){b1>>>=0;var S1=ly.length;if(4294901760<b1)return!1;for(var A1=1;4>=A1;A1*=2){var M1=S1*(1+.2/A1);M1=Math.min(M1,b1+100663296);var F1=Math;M1=Math.max(b1,M1);e:{F1=(F1.min.call(F1,4294901760,M1+(65536-M1%65536)%65536)-W1.buffer.byteLength+65535)/65536;try{W1.grow(F1),Y1();var ry=1;break e}catch{}ry=void 0}if(ry)return!0}return!1},$:function(b1,S1){b1>>>=0,S1>>>=0;var A1=0;return vv().forEach((M1,F1)=>{var ry=S1+A1;for(F1=V1[b1+4*F1>>>2>>>0]=ry,ry=0;ry<M1.length;++ry)ey[F1++>>>0]=M1.charCodeAt(ry);ey[F1>>>0]=0,A1+=M1.length+1}),0},aa:function(b1,S1){b1>>>=0,S1>>>=0;var A1=vv();V1[b1>>>2>>>0]=A1.length;var M1=0;return A1.forEach(F1=>M1+=F1.length+1),V1[S1>>>2>>>0]=M1,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(b1,S1,A1,M1){S1>>>=0,A1>>>=0,M1>>>=0;for(var F1=0,ry=0;ry<A1;ry++){var _y=V1[S1>>>2>>>0],ky=V1[S1+4>>>2>>>0];S1+=8;for(var zy=0;zy<ky;zy++){var By=ly[_y+zy>>>0],a0=Gv[b1];By===0||By===10?((b1===1?k1:N1)(Ny(a0,0)),a0.length=0):a0.push(By)}F1+=ky}return V1[M1>>>2>>>0]=F1,0},fa:ex,p:function(b1,S1,A1,M1){return ex(b1>>>0,S1>>>0,A1>>>0,M1>>>0)}},c0=function(){function b1(A1){return c0=A1.exports,c0=T0(),c0=_$(),W1=c0.ja,Y1(),Oy.unshift(c0.ka),jy--,jy==0&&Ay&&(A1=Ay,Ay=null,A1()),c0}var S1={a:V$};if(jy++,o1.instantiateWasm)try{return o1.instantiateWasm(S1,b1)}catch(A1){N1(`Module.instantiateWasm callback failed with error: ${A1}`),u1(A1)}return lv(S1,function(A1){b1(A1.instance)}).catch(u1),{}}(),k$=b1=>(k$=c0.la)(b1);o1._OrtInit=(b1,S1)=>(o1._OrtInit=c0.ma)(b1,S1),o1._OrtGetLastError=(b1,S1)=>(o1._OrtGetLastError=c0.na)(b1,S1),o1._OrtCreateSessionOptions=(b1,S1,A1,M1,F1,ry,_y,ky,zy,By)=>(o1._OrtCreateSessionOptions=c0.oa)(b1,S1,A1,M1,F1,ry,_y,ky,zy,By),o1._OrtAppendExecutionProvider=(b1,S1)=>(o1._OrtAppendExecutionProvider=c0.pa)(b1,S1),o1._OrtAddFreeDimensionOverride=(b1,S1,A1)=>(o1._OrtAddFreeDimensionOverride=c0.qa)(b1,S1,A1),o1._OrtAddSessionConfigEntry=(b1,S1,A1)=>(o1._OrtAddSessionConfigEntry=c0.ra)(b1,S1,A1),o1._OrtReleaseSessionOptions=b1=>(o1._OrtReleaseSessionOptions=c0.sa)(b1),o1._OrtCreateSession=(b1,S1,A1)=>(o1._OrtCreateSession=c0.ta)(b1,S1,A1),o1._OrtReleaseSession=b1=>(o1._OrtReleaseSession=c0.ua)(b1),o1._OrtGetInputOutputCount=(b1,S1,A1)=>(o1._OrtGetInputOutputCount=c0.va)(b1,S1,A1),o1._OrtGetInputName=(b1,S1)=>(o1._OrtGetInputName=c0.wa)(b1,S1),o1._OrtGetOutputName=(b1,S1)=>(o1._OrtGetOutputName=c0.xa)(b1,S1),o1._OrtFree=b1=>(o1._OrtFree=c0.ya)(b1),o1._OrtCreateTensor=(b1,S1,A1,M1,F1,ry)=>(o1._OrtCreateTensor=c0.za)(b1,S1,A1,M1,F1,ry),o1._OrtGetTensorData=(b1,S1,A1,M1,F1)=>(o1._OrtGetTensorData=c0.Aa)(b1,S1,A1,M1,F1),o1._OrtReleaseTensor=b1=>(o1._OrtReleaseTensor=c0.Ba)(b1),o1._OrtCreateRunOptions=(b1,S1,A1,M1)=>(o1._OrtCreateRunOptions=c0.Ca)(b1,S1,A1,M1),o1._OrtAddRunConfigEntry=(b1,S1,A1)=>(o1._OrtAddRunConfigEntry=c0.Da)(b1,S1,A1),o1._OrtReleaseRunOptions=b1=>(o1._OrtReleaseRunOptions=c0.Ea)(b1),o1._OrtCreateBinding=b1=>(o1._OrtCreateBinding=c0.Fa)(b1),o1._OrtBindInput=(b1,S1,A1)=>(o1._OrtBindInput=c0.Ga)(b1,S1,A1),o1._OrtBindOutput=(b1,S1,A1,M1)=>(o1._OrtBindOutput=c0.Ha)(b1,S1,A1,M1),o1._OrtClearBoundOutputs=b1=>(o1._OrtClearBoundOutputs=c0.Ia)(b1),o1._OrtReleaseBinding=b1=>(o1._OrtReleaseBinding=c0.Ja)(b1),o1._OrtRunWithBinding=(b1,S1,A1,M1,F1)=>(o1._OrtRunWithBinding=c0.Ka)(b1,S1,A1,M1,F1),o1._OrtRun=(b1,S1,A1,M1,F1,ry,_y,ky)=>(o1._OrtRun=c0.La)(b1,S1,A1,M1,F1,ry,_y,ky),o1._OrtEndProfiling=b1=>(o1._OrtEndProfiling=c0.Ma)(b1),o1._JsepOutput=(b1,S1,A1)=>(o1._JsepOutput=c0.Na)(b1,S1,A1),o1._JsepGetNodeName=b1=>(o1._JsepGetNodeName=c0.Oa)(b1);var Fv=o1._malloc=b1=>(Fv=o1._malloc=c0.Pa)(b1),wv=o1._free=b1=>(wv=o1._free=c0.Qa)(b1),x$=b1=>(x$=c0.Sa)(b1),d$=b1=>(d$=c0.Ta)(b1),w$=()=>(w$=c0.Ua)(),Ov=b1=>(Ov=c0.Wa)(b1),M$=()=>(M$=c0.Xa)(),Pv=b1=>(Pv=c0.Ya)(b1),Nv=()=>(Nv=c0.Za)();o1.___start_em_js=837952,o1.___stop_em_js=838113;function _$(){var b1=c0;b1=Object.assign({},b1);var S1=A1=>M1=>A1(M1)>>>0;return b1.la=S1(b1.la),b1.Pa=S1(b1.Pa),b1.Ta=S1(b1.Ta),b1.Ua=(A1=>()=>A1()>>>0)(b1.Ua),b1}o1.stackSave=()=>w$(),o1.stackRestore=b1=>x$(b1),o1.stackAlloc=b1=>d$(b1),o1.UTF8ToString=Ty,o1.stringToUTF8=(b1,S1,A1)=>l0(b1,ly,S1,A1),o1.lengthBytesUTF8=Hy;var Kv;Ay=function b1(){Kv||R1(),Kv||(Ay=b1)};function R1(){if(!(0<jy)){if(o1.preRun)for(typeof o1.preRun=="function"&&(o1.preRun=[o1.preRun]);o1.preRun.length;){var b1=o1.preRun.shift();yy.unshift(b1)}for(;0<yy.length;)yy.shift()(o1);if(!(0<jy||Kv||(Kv=!0,o1.calledRun=!0,H1))){for(;0<Oy.length;)Oy.shift()(o1);for(a1(o1);0<Ey.length;)Ey.shift()(o1)}}}return R1(),s1}})();typeof e1=="object"&&typeof _g=="object"?_g.exports=t1:typeof define=="function"&&define.amd&&define([],()=>t1)}),Ba=Er(()=>{}),Da=Er(()=>{}),Ma={};kr(Ma,{cpus:()=>fc});var fc,Ua=j(()=>{fc=void 0}),Va=Er((e1,_g)=>{var t1=(()=>{var n1;var r1=typeof document<"u"?(n1=document.currentScript)==null?void 0:n1.src:void 0;return typeof __filename<"u"&&(r1||(r1=__filename)),function(i1={}){function o1(){return G1.buffer!=Ey.buffer&&A0(),Ey}function a1(){return G1.buffer!=Ey.buffer&&A0(),jy}function u1(){return G1.buffer!=Ey.buffer&&A0(),Ay}function s1(){return G1.buffer!=Ey.buffer&&A0(),Uy}function l1(){return G1.buffer!=Ey.buffer&&A0(),Gy}function c1(){return G1.buffer!=Ey.buffer&&A0(),Wy}function d1(){return G1.buffer!=Ey.buffer&&A0(),Yy}function h1(){return G1.buffer!=Ey.buffer&&A0(),y0}var f1=i1,g1,v1,$1=new Promise((w1,C1)=>{g1=w1,v1=C1});f1.mountExternalData=(w1,C1)=>{(f1.Db||(f1.Db=new Map)).set(w1,C1)},f1.unmountExternalData=()=>{delete f1.Db};let y1=()=>{let w1=(I1,j1,q1)=>(...iy)=>{let xy=Nv,Ly=j1==null?void 0:j1();iy=I1(...iy);let Jy=j1==null?void 0:j1();return Ly!==Jy&&(I1=Jy,q1(Ly),j1=q1=null),Nv!=xy?F1():iy},C1=I1=>async(...j1)=>{var q1;try{if(f1.Cb)throw Error("Session already started");let iy=f1.Cb={ec:j1[0],errors:[]},xy=await I1(...j1);if(f1.Cb!==iy)throw Error("Session mismatch");(q1=f1.Kb)==null||q1.flush();let Ly=iy.errors;if(0<Ly.length){let Jy=await Promise.all(Ly);if(Jy=Jy.filter(Ky=>Ky),0<Jy.length)throw Error(Jy.join(`
`))}return xy}finally{f1.Cb=null}};f1._OrtCreateSession=w1(f1._OrtCreateSession,()=>f1._OrtCreateSession,I1=>f1._OrtCreateSession=I1),f1._OrtRun=C1(w1(f1._OrtRun,()=>f1._OrtRun,I1=>f1._OrtRun=I1)),f1._OrtRunWithBinding=C1(w1(f1._OrtRunWithBinding,()=>f1._OrtRunWithBinding,I1=>f1._OrtRunWithBinding=I1)),f1._OrtBindInput=w1(f1._OrtBindInput,()=>f1._OrtBindInput,I1=>f1._OrtBindInput=I1),y1=void 0};f1.jsepInit=(w1,C1)=>{if(y1==null||y1(),w1==="webgpu"){[f1.Kb,f1.Wb,f1.$b,f1.Lb,f1.Zb,f1.ob,f1.ac,f1.cc,f1.Xb,f1.Yb,f1.bc]=C1;let I1=f1.Kb;f1.jsepRegisterBuffer=(j1,q1,iy,xy)=>I1.registerBuffer(j1,q1,iy,xy),f1.jsepGetBuffer=j1=>I1.getBuffer(j1),f1.jsepCreateDownloader=(j1,q1,iy)=>I1.createDownloader(j1,q1,iy),f1.jsepOnReleaseSession=j1=>{I1.onReleaseSession(j1)},f1.jsepOnRunStart=j1=>I1.onRunStart(j1)}};var _1=Object.assign({},f1),E1="./this.program",T1=(w1,C1)=>{throw C1},P1=typeof window=="object",k1=typeof importScripts=="function",N1=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",W1=f1.ENVIRONMENT_IS_PTHREAD||!1,H1="";function ty(w1){return f1.locateFile?f1.locateFile(w1,H1):H1+w1}var ey,ly,oy;if(N1){var Q1=(Mi(),sr(Di)),U1=(Wi(),sr(Ui));H1=k1?U1.dirname(H1)+"/":__dirname+"/",ey=(w1,C1)=>(w1=l0(w1)?new URL(w1):U1.normalize(w1),Q1.readFileSync(w1,C1?void 0:"utf8")),oy=w1=>(w1=ey(w1,!0),w1.buffer||(w1=new Uint8Array(w1)),w1),ly=(w1,C1,I1,j1=!0)=>{w1=l0(w1)?new URL(w1):U1.normalize(w1),Q1.readFile(w1,j1?void 0:"utf8",(q1,iy)=>{q1?I1(q1):C1(j1?iy.buffer:iy)})},!f1.thisProgram&&1<process.argv.length&&(E1=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),T1=(w1,C1)=>{throw process.exitCode=w1,C1},global.Worker=Ba().Worker}else(P1||k1)&&(k1?H1=self.location.href:typeof document<"u"&&document.currentScript&&(H1=document.currentScript.src),typeof r1<"u"&&r1&&(H1=r1),H1.startsWith("blob:")?H1="":H1=H1.substr(0,H1.replace(/[?#].*/,"").lastIndexOf("/")+1),N1||(ey=w1=>{var C1=new XMLHttpRequest;return C1.open("GET",w1,!1),C1.send(null),C1.responseText},k1&&(oy=w1=>{var C1=new XMLHttpRequest;return C1.open("GET",w1,!1),C1.responseType="arraybuffer",C1.send(null),new Uint8Array(C1.response)}),ly=(w1,C1,I1)=>{var j1=new XMLHttpRequest;j1.open("GET",w1,!0),j1.responseType="arraybuffer",j1.onload=()=>{j1.status==200||j1.status==0&&j1.response?C1(j1.response):I1()},j1.onerror=I1,j1.send(null)}));N1&&typeof performance>"u"&&(global.performance=Da().performance);var V1=console.log.bind(console),K1=console.error.bind(console);N1&&(V1=(...w1)=>Q1.writeSync(1,w1.join(" ")+`
`),K1=(...w1)=>Q1.writeSync(2,w1.join(" ")+`
`));var J1=V1,hy=K1;Object.assign(f1,_1),_1=null;var G1,Y1,yy=!1,Oy,Ey,jy,Ay,Uy,Gy,Wy,Yy,Vy,p0,y0;function A0(){var w1=G1.buffer;f1.HEAP8=Ey=new Int8Array(w1),f1.HEAP16=Ay=new Int16Array(w1),f1.HEAPU8=jy=new Uint8Array(w1),f1.HEAPU16=Uy=new Uint16Array(w1),f1.HEAP32=Gy=new Int32Array(w1),f1.HEAPU32=Wy=new Uint32Array(w1),f1.HEAPF32=Yy=new Float32Array(w1),f1.HEAPF64=y0=new Float64Array(w1),f1.HEAP64=Vy=new BigInt64Array(w1),f1.HEAPU64=p0=new BigUint64Array(w1)}var lv=16777216;if(W1)G1=f1.wasmMemory;else if(f1.wasmMemory)G1=f1.wasmMemory;else if(G1=new WebAssembly.Memory({initial:lv/65536,maximum:65536,shared:!0}),!(G1.buffer instanceof SharedArrayBuffer))throw hy("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),N1&&hy("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");A0(),lv=G1.buffer.byteLength;var R0=[],X1=[],fy=[],vy=0,Dy=null;function Ny(){if(vy--,vy==0&&Dy){var w1=Dy;Dy=null,w1()}}function Ty(w1){throw w1="Aborted("+w1+")",hy(w1),yy=!0,Oy=1,w1=new WebAssembly.RuntimeError(w1+". Build with -sASSERTIONS for more info."),v1(w1),w1}var Hy=w1=>w1.startsWith("data:application/octet-stream;base64,"),l0=w1=>w1.startsWith("file://"),I0;I0="ort-wasm-simd-threaded.wasm",Hy(I0)||(I0=ty(I0));function $0(w1){if(oy)return oy(w1);throw"both async and sync fetching of the wasm failed"}function iv(w1){if(P1||k1){if(typeof fetch=="function"&&!l0(w1))return fetch(w1,{credentials:"same-origin"}).then(C1=>{if(!C1.ok)throw`failed to load wasm binary file at '${w1}'`;return C1.arrayBuffer()}).catch(()=>$0(w1));if(ly)return new Promise((C1,I1)=>{ly(w1,j1=>C1(new Uint8Array(j1)),I1)})}return Promise.resolve().then(()=>$0(w1))}function b0(w1,C1,I1){return iv(w1).then(j1=>WebAssembly.instantiate(j1,C1)).then(I1,j1=>{hy(`failed to asynchronously prepare wasm: ${j1}`),Ty(j1)})}function dv(w1,C1){var I1=I0;return typeof WebAssembly.instantiateStreaming!="function"||Hy(I1)||l0(I1)||N1||typeof fetch!="function"?b0(I1,w1,C1):fetch(I1,{credentials:"same-origin"}).then(j1=>WebAssembly.instantiateStreaming(j1,w1).then(C1,function(q1){return hy(`wasm streaming compile failed: ${q1}`),hy("falling back to ArrayBuffer instantiation"),b0(I1,w1,C1)}))}var i0={826468:(w1,C1,I1,j1)=>{if(typeof f1>"u"||!f1.Db)return 1;if(w1=gy(w1>>>0),w1.startsWith("./")&&(w1=w1.substring(2)),w1=f1.Db.get(w1),!w1)return 2;if(C1>>>=0,I1>>>=0,j1>>>=0,C1+I1>w1.byteLength)return 3;try{return a1().set(w1.subarray(C1,C1+I1),j1>>>0),0}catch{return 4}},826969:()=>{f1.Xb()},827e3:()=>{f1.Yb()},827029:()=>{f1.bc()},827054:w1=>f1.Wb(w1),827087:w1=>f1.$b(w1),827119:(w1,C1,I1)=>{f1.Lb(w1,C1,I1,!0)},827158:(w1,C1,I1)=>{f1.Lb(w1,C1,I1)},827191:w1=>{f1.ob("Abs",w1,void 0)},827242:w1=>{f1.ob("Neg",w1,void 0)},827293:w1=>{f1.ob("Floor",w1,void 0)},827346:w1=>{f1.ob("Ceil",w1,void 0)},827398:w1=>{f1.ob("Reciprocal",w1,void 0)},827456:w1=>{f1.ob("Sqrt",w1,void 0)},827508:w1=>{f1.ob("Exp",w1,void 0)},827559:w1=>{f1.ob("Erf",w1,void 0)},827610:w1=>{f1.ob("Sigmoid",w1,void 0)},827665:(w1,C1,I1)=>{f1.ob("HardSigmoid",w1,{alpha:C1,beta:I1})},827744:w1=>{f1.ob("Log",w1,void 0)},827795:w1=>{f1.ob("Sin",w1,void 0)},827846:w1=>{f1.ob("Cos",w1,void 0)},827897:w1=>{f1.ob("Tan",w1,void 0)},827948:w1=>{f1.ob("Asin",w1,void 0)},828e3:w1=>{f1.ob("Acos",w1,void 0)},828052:w1=>{f1.ob("Atan",w1,void 0)},828104:w1=>{f1.ob("Sinh",w1,void 0)},828156:w1=>{f1.ob("Cosh",w1,void 0)},828208:w1=>{f1.ob("Asinh",w1,void 0)},828261:w1=>{f1.ob("Acosh",w1,void 0)},828314:w1=>{f1.ob("Atanh",w1,void 0)},828367:w1=>{f1.ob("Tanh",w1,void 0)},828419:w1=>{f1.ob("Not",w1,void 0)},828470:(w1,C1,I1)=>{f1.ob("Clip",w1,{min:C1,max:I1})},828539:w1=>{f1.ob("Clip",w1,void 0)},828591:(w1,C1)=>{f1.ob("Elu",w1,{alpha:C1})},828649:w1=>{f1.ob("Relu",w1,void 0)},828701:(w1,C1)=>{f1.ob("LeakyRelu",w1,{alpha:C1})},828765:(w1,C1)=>{f1.ob("ThresholdedRelu",w1,{alpha:C1})},828835:(w1,C1)=>{f1.ob("Cast",w1,{to:C1})},828893:w1=>{f1.ob("Add",w1,void 0)},828944:w1=>{f1.ob("Sub",w1,void 0)},828995:w1=>{f1.ob("Mul",w1,void 0)},829046:w1=>{f1.ob("Div",w1,void 0)},829097:w1=>{f1.ob("Pow",w1,void 0)},829148:w1=>{f1.ob("Equal",w1,void 0)},829201:w1=>{f1.ob("Greater",w1,void 0)},829256:w1=>{f1.ob("GreaterOrEqual",w1,void 0)},829318:w1=>{f1.ob("Less",w1,void 0)},829370:w1=>{f1.ob("LessOrEqual",w1,void 0)},829429:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceMean",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},829588:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceMax",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},829746:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceMin",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},829904:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceProd",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},830063:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceSum",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},830221:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceL1",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},830378:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceL2",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},830535:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceLogSum",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},830696:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceSumSquare",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},830860:(w1,C1,I1,j1,q1)=>{f1.ob("ReduceLogSumExp",w1,{keepDims:!!C1,noopWithEmptyAxes:!!I1,axes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},831024:w1=>{f1.ob("Where",w1,void 0)},831077:(w1,C1,I1)=>{f1.ob("Transpose",w1,{perm:C1?Array.from(l1().subarray(C1>>>0,I1>>>0)):[]})},831185:(w1,C1,I1,j1)=>{f1.ob("DepthToSpace",w1,{blocksize:C1,mode:gy(I1),format:j1?"NHWC":"NCHW"})},831318:(w1,C1,I1,j1)=>{f1.ob("DepthToSpace",w1,{blocksize:C1,mode:gy(I1),format:j1?"NHWC":"NCHW"})},831451:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by,w0)=>{f1.ob("ConvTranspose",w1,{format:Jy?"NHWC":"NCHW",autoPad:C1,dilations:[I1],group:j1,kernelShape:[q1],pads:[iy,xy],strides:[Ly],wIsConst:()=>!!o1()[Ky>>>0],outputPadding:d0?Array.from(l1().subarray(d0>>>0,G0>>>0)):[],outputShape:V0?Array.from(l1().subarray(V0>>>0,by>>>0)):[],activation:gy(w0)})},831852:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by)=>{f1.ob("ConvTranspose",w1,{format:Ly?"NHWC":"NCHW",autoPad:C1,dilations:Array.from(l1().subarray(I1>>>0,(I1>>>0)+2>>>0)),group:j1,kernelShape:Array.from(l1().subarray(q1>>>0,(q1>>>0)+2>>>0)),pads:Array.from(l1().subarray(iy>>>0,(iy>>>0)+4>>>0)),strides:Array.from(l1().subarray(xy>>>0,(xy>>>0)+2>>>0)),wIsConst:()=>!!o1()[Jy>>>0],outputPadding:Ky?Array.from(l1().subarray(Ky>>>0,d0>>>0)):[],outputShape:G0?Array.from(l1().subarray(G0>>>0,V0>>>0)):[],activation:gy(by)})},832417:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by,w0)=>{f1.ob("ConvTranspose",w1,{format:Jy?"NHWC":"NCHW",autoPad:C1,dilations:[I1],group:j1,kernelShape:[q1],pads:[iy,xy],strides:[Ly],wIsConst:()=>!!o1()[Ky>>>0],outputPadding:d0?Array.from(l1().subarray(d0>>>0,G0>>>0)):[],outputShape:V0?Array.from(l1().subarray(V0>>>0,by>>>0)):[],activation:gy(w0)})},832818:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by)=>{f1.ob("ConvTranspose",w1,{format:Ly?"NHWC":"NCHW",autoPad:C1,dilations:Array.from(l1().subarray(I1>>>0,(I1>>>0)+2>>>0)),group:j1,kernelShape:Array.from(l1().subarray(q1>>>0,(q1>>>0)+2>>>0)),pads:Array.from(l1().subarray(iy>>>0,(iy>>>0)+4>>>0)),strides:Array.from(l1().subarray(xy>>>0,(xy>>>0)+2>>>0)),wIsConst:()=>!!o1()[Jy>>>0],outputPadding:Ky?Array.from(l1().subarray(Ky>>>0,d0>>>0)):[],outputShape:G0?Array.from(l1().subarray(G0>>>0,V0>>>0)):[],activation:gy(by)})},833383:(w1,C1)=>{f1.ob("GlobalAveragePool",w1,{format:C1?"NHWC":"NCHW"})},833474:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by,w0,z0)=>{f1.ob("AveragePool",w1,{format:z0?"NHWC":"NCHW",auto_pad:C1,ceil_mode:I1,count_include_pad:j1,storage_order:q1,dilations:[iy,xy],kernel_shape:[Ly,Jy],pads:[Ky,d0,G0,V0],strides:[by,w0]})},833758:(w1,C1)=>{f1.ob("GlobalAveragePool",w1,{format:C1?"NHWC":"NCHW"})},833849:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by,w0,z0)=>{f1.ob("AveragePool",w1,{format:z0?"NHWC":"NCHW",auto_pad:C1,ceil_mode:I1,count_include_pad:j1,storage_order:q1,dilations:[iy,xy],kernel_shape:[Ly,Jy],pads:[Ky,d0,G0,V0],strides:[by,w0]})},834133:(w1,C1)=>{f1.ob("GlobalMaxPool",w1,{format:C1?"NHWC":"NCHW"})},834220:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by,w0,z0)=>{f1.ob("MaxPool",w1,{format:z0?"NHWC":"NCHW",auto_pad:C1,ceil_mode:I1,count_include_pad:j1,storage_order:q1,dilations:[iy,xy],kernel_shape:[Ly,Jy],pads:[Ky,d0,G0,V0],strides:[by,w0]})},834500:(w1,C1)=>{f1.ob("GlobalMaxPool",w1,{format:C1?"NHWC":"NCHW"})},834587:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by,w0,z0)=>{f1.ob("MaxPool",w1,{format:z0?"NHWC":"NCHW",auto_pad:C1,ceil_mode:I1,count_include_pad:j1,storage_order:q1,dilations:[iy,xy],kernel_shape:[Ly,Jy],pads:[Ky,d0,G0,V0],strides:[by,w0]})},834867:(w1,C1,I1,j1,q1)=>{f1.ob("Gemm",w1,{alpha:C1,beta:I1,transA:j1,transB:q1})},834971:w1=>{f1.ob("MatMul",w1,void 0)},835025:(w1,C1,I1,j1)=>{f1.ob("ArgMax",w1,{keepDims:!!C1,selectLastIndex:!!I1,axis:j1})},835133:(w1,C1,I1,j1)=>{f1.ob("ArgMin",w1,{keepDims:!!C1,selectLastIndex:!!I1,axis:j1})},835241:(w1,C1)=>{f1.ob("Softmax",w1,{axis:C1})},835304:(w1,C1)=>{f1.ob("Concat",w1,{axis:C1})},835364:(w1,C1,I1,j1,q1)=>{f1.ob("Split",w1,{axis:C1,numOutputs:I1,splitSizes:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},835504:w1=>{f1.ob("Expand",w1,void 0)},835558:(w1,C1)=>{f1.ob("Gather",w1,{axis:Number(C1)})},835629:(w1,C1)=>{f1.ob("GatherElements",w1,{axis:Number(C1)})},835708:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0)=>{f1.ob("Resize",w1,{antialias:C1,axes:I1?Array.from(l1().subarray(I1>>>0,j1>>>0)):[],coordinateTransformMode:gy(q1),cubicCoeffA:iy,excludeOutside:xy,extrapolationValue:Ly,keepAspectRatioPolicy:gy(Jy),mode:gy(Ky),nearestMode:gy(d0)})},836054:(w1,C1,I1,j1,q1,iy,xy)=>{f1.ob("Slice",w1,{starts:C1?Array.from(l1().subarray(C1>>>0,I1>>>0)):[],ends:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[],axes:iy?Array.from(l1().subarray(iy>>>0,xy>>>0)):[]})},836270:w1=>{f1.ob("Tile",w1,void 0)},836322:(w1,C1,I1,j1)=>{f1.ob("LayerNormalization",w1,{axis:C1,epsilon:I1,simplified:!!j1})},836433:(w1,C1,I1)=>{f1.ob("InstanceNormalization",w1,{epsilon:C1,format:I1?"NHWC":"NCHW"})},836547:(w1,C1,I1)=>{f1.ob("InstanceNormalization",w1,{epsilon:C1,format:I1?"NHWC":"NCHW"})},836661:w1=>{f1.ob("Range",w1,void 0)},836714:(w1,C1)=>{f1.ob("Einsum",w1,{equation:gy(C1)})},836795:(w1,C1,I1,j1,q1)=>{f1.ob("Pad",w1,{mode:C1,value:I1,pads:j1?Array.from(l1().subarray(j1>>>0,q1>>>0)):[]})},836922:(w1,C1,I1,j1,q1,iy)=>{f1.ob("BatchNormalization",w1,{epsilon:C1,momentum:I1,spatial:!!q1,trainingMode:!!j1,format:iy?"NHWC":"NCHW"})},837091:(w1,C1,I1,j1,q1,iy)=>{f1.ob("BatchNormalization",w1,{epsilon:C1,momentum:I1,spatial:!!q1,trainingMode:!!j1,format:iy?"NHWC":"NCHW"})},837260:(w1,C1,I1)=>{f1.ob("CumSum",w1,{exclusive:Number(C1),reverse:Number(I1)})},837357:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy)=>{f1.ob("Attention",w1,{numHeads:C1,isUnidirectional:I1,maskFilterValue:j1,scale:q1,doRotary:iy,qkvHiddenSizes:xy?Array.from(l1().subarray(Number(Ly)>>>0,Number(Ly)+xy>>>0)):[],pastPresentShareBuffer:!!Jy})},837629:w1=>{f1.ob("BiasAdd",w1,void 0)},837684:w1=>{f1.ob("BiasSplitGelu",w1,void 0)},837745:w1=>{f1.ob("FastGelu",w1,void 0)},837801:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0)=>{f1.ob("Conv",w1,{format:Jy?"NHWC":"NCHW",auto_pad:C1,dilations:[I1],group:j1,kernel_shape:[q1],pads:iy?Array.from(l1().subarray(iy>>>0,xy>>>0)):[],strides:[Ly],w_is_const:()=>!!o1()[Ky>>>0],activation:gy(d0),activation_params:G0?Array.from(d1().subarray(G0>>>0,V0>>>0)):[]})},838171:(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky,d0,G0,V0,by,w0,z0)=>{f1.ob("Conv",w1,{format:G0?"NHWC":"NCHW",auto_pad:C1,dilations:[I1,j1],group:q1,kernel_shape:[iy,xy],pads:Ly?Array.from(l1().subarray(Ly>>>0,Jy>>>0)):[],strides:[Ky,d0],w_is_const:()=>!!o1()[V0>>>0],activation:gy(by),activation_params:w0?Array.from(d1().subarray(w0>>>0,z0>>>0)):[]})},838562:w1=>{f1.ob("Gelu",w1,void 0)},838614:(w1,C1,I1,j1,q1,iy)=>{f1.ob("MatMulNBits",w1,{k:C1,n:I1,accuracyLevel:j1,bits:q1,blockSize:iy})},838741:(w1,C1,I1,j1,q1,iy)=>{f1.ob("MultiHeadAttention",w1,{numHeads:C1,isUnidirectional:I1,maskFilterValue:j1,scale:q1,doRotary:iy})},838900:(w1,C1,I1,j1,q1)=>{f1.ob("RotaryEmbedding",w1,{interleaved:!!C1,numHeads:I1,rotaryEmbeddingDim:j1,scale:q1})},839039:(w1,C1,I1)=>{f1.ob("SkipLayerNormalization",w1,{epsilon:C1,simplified:!!I1})},839141:(w1,C1,I1)=>{f1.ob("SkipLayerNormalization",w1,{epsilon:C1,simplified:!!I1})},839243:(w1,C1,I1,j1)=>{f1.ob("LayerNormalization",w1,{axis:C1,epsilon:I1,simplified:!!j1})},839354:w1=>{f1.ac(w1)},839388:(w1,C1)=>f1.cc(w1,C1,f1.Cb.ec,f1.Cb.errors)};function nv(w1){this.name="ExitStatus",this.message=`Program terminated with exit(${w1})`,this.status=w1}var xv=w1=>{w1.terminate(),w1.onmessage=()=>{}},Tv=w1=>{Cy.xb.length==0&&(cy(),Cy.Mb(Cy.xb[0]));var C1=Cy.xb.pop();if(!C1)return 6;Cy.yb.push(C1),Cy.ub[w1.wb]=C1,C1.wb=w1.wb;var I1={cmd:"run",start_routine:w1.fc,arg:w1.Rb,pthread_ptr:w1.wb};return N1&&C1.unref(),C1.postMessage(I1,w1.mc),0},qy=0,Iv=w1=>{var C1=Sw();return w1=w1(),tx(C1),w1},u0=(w1,C1,...I1)=>Iv(()=>{for(var j1=2*I1.length,q1=G$(8*j1),iy=q1>>>3,xy=0;xy<I1.length;xy++){var Ly=I1[xy];typeof Ly=="bigint"?(Vy[iy+2*xy]=1n,Vy[iy+2*xy+1]=Ly):(Vy[iy+2*xy]=0n,h1()[iy+2*xy+1>>>0]=Ly)}return Wx(w1,0,j1,q1,C1)});function ov(w1){var C1;if(W1)return u0(0,1,w1);Oy=w1,0<qy||(Cy.hc(),(C1=f1.onExit)==null||C1.call(f1,w1),yy=!0),T1(w1,new nv(w1))}var z1=w1=>{if(Oy=w1,W1)throw v0(w1),"unwind";ov(w1)};function ay(){for(var w1=f1.numThreads;w1--;)cy();R0.unshift(()=>{vy++,wy(()=>Ny())})}function cy(){var w1=ty("ort-wasm-simd-threaded.worker.js");w1=new Worker(w1),Cy.xb.push(w1)}function wy(w1){W1?w1():Promise.all(Cy.xb.map(Cy.Mb)).then(w1)}var Cy={xb:[],yb:[],Qb:[],ub:{},Gb(){W1?(Cy.receiveObjectTransfer=Cy.dc,Cy.threadInitTLS=Cy.Pb,Cy.setExitStatus=Cy.Ob):ay()},Ob:w1=>Oy=w1,pc:["$terminateWorker"],hc:()=>{for(var w1 of Cy.yb)xv(w1);for(w1 of Cy.xb)xv(w1);Cy.xb=[],Cy.yb=[],Cy.ub=[]},Nb:w1=>{var C1=w1.wb;delete Cy.ub[C1],Cy.xb.push(w1),Cy.yb.splice(Cy.yb.indexOf(w1),1),w1.wb=0,xw(C1)},dc(){},Pb(){Cy.Qb.forEach(w1=>w1())},Mb:w1=>new Promise(C1=>{w1.onmessage=iy=>{iy=iy.data;var xy=iy.cmd;if(iy.targetThread&&iy.targetThread!=tv()){var Ly=Cy.ub[iy.targetThread];Ly?Ly.postMessage(iy,iy.transferList):hy(`Internal error! Worker sent a message "${xy}" to target pthread ${iy.targetThread}, but that thread no longer exists!`)}else xy==="checkMailbox"?wv():xy==="spawnThread"?Tv(iy):xy==="cleanupThread"?Cy.Nb(Cy.ub[iy.thread]):xy==="killThread"?(iy=iy.thread,xy=Cy.ub[iy],delete Cy.ub[iy],xv(xy),xw(iy),Cy.yb.splice(Cy.yb.indexOf(xy),1),xy.wb=0):xy==="cancelThread"?Cy.ub[iy.thread].postMessage({cmd:"cancel"}):xy==="loaded"?(w1.loaded=!0,N1&&!w1.wb&&w1.unref(),C1(w1)):xy==="alert"?alert(`Thread ${iy.threadId}: ${iy.text}`):iy.target==="setimmediate"?w1.postMessage(iy):xy==="callHandler"?f1[iy.handler](...iy.args):xy&&hy(`worker sent an unknown command ${xy}`)},w1.onerror=iy=>{throw hy(`worker sent an error! ${iy.filename}:${iy.lineno}: ${iy.message}`),iy},N1&&(w1.on("message",iy=>w1.onmessage({data:iy})),w1.on("error",iy=>w1.onerror(iy)));var I1=[],j1=["onExit"],q1;for(q1 of j1)f1.hasOwnProperty(q1)&&I1.push(q1);w1.postMessage({cmd:"load",handlers:I1,urlOrBlob:f1.mainScriptUrlOrBlob||r1,wasmMemory:G1,wasmModule:Y1})})};f1.PThread=Cy;var r0=w1=>{for(;0<w1.length;)w1.shift()(f1)};f1.establishStackSpace=()=>{var w1=tv(),C1=c1()[w1+52>>>2>>>0];w1=c1()[w1+56>>>2>>>0],_w(C1,C1-w1),tx(C1)};function v0(w1){if(W1)return u0(1,0,w1);z1(w1)}f1.invokeEntryPoint=(w1,C1)=>{qy=0,w1=Ew(w1,C1),0<qy?Cy.Ob(w1):ww(w1)};class Q0{constructor(C1){this.Ib=C1-24}Gb(C1,I1){c1()[this.Ib+16>>>2>>>0]=0,c1()[this.Ib+4>>>2>>>0]=C1,c1()[this.Ib+8>>>2>>>0]=I1}}var hv=0;function uv(w1,C1,I1,j1){return W1?u0(2,1,w1,C1,I1,j1):J0(w1,C1,I1,j1)}function J0(w1,C1,I1,j1){if(w1>>>=0,C1>>>=0,I1>>>=0,j1>>>=0,typeof SharedArrayBuffer>"u")return hy("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var q1=[];return W1&&q1.length===0?uv(w1,C1,I1,j1):(w1={fc:I1,wb:w1,Rb:j1,mc:q1},W1?(w1.oc="spawnThread",postMessage(w1,q1),0):Tv(w1))}var Wv=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,yv=(w1,C1,I1)=>{C1>>>=0;var j1=C1+I1;for(I1=C1;w1[I1]&&!(I1>=j1);)++I1;if(16<I1-C1&&w1.buffer&&Wv)return Wv.decode(w1.buffer instanceof SharedArrayBuffer?w1.slice(C1,I1):w1.subarray(C1,I1));for(j1="";C1<I1;){var q1=w1[C1++];if(q1&128){var iy=w1[C1++]&63;if((q1&224)==192)j1+=String.fromCharCode((q1&31)<<6|iy);else{var xy=w1[C1++]&63;q1=(q1&240)==224?(q1&15)<<12|iy<<6|xy:(q1&7)<<18|iy<<12|xy<<6|w1[C1++]&63,65536>q1?j1+=String.fromCharCode(q1):(q1-=65536,j1+=String.fromCharCode(55296|q1>>10,56320|q1&1023))}}else j1+=String.fromCharCode(q1)}return j1},gy=(w1,C1)=>(w1>>>=0)?yv(a1(),w1,C1):"";function T0(w1,C1,I1){return W1?u0(3,1,w1,C1,I1):0}function C0(w1,C1){if(W1)return u0(4,1,w1,C1)}var q0=w1=>{for(var C1=0,I1=0;I1<w1.length;++I1){var j1=w1.charCodeAt(I1);127>=j1?C1++:2047>=j1?C1+=2:55296<=j1&&57343>=j1?(C1+=4,++I1):C1+=3}return C1},Hv=(w1,C1,I1,j1)=>{if(I1>>>=0,!(0<j1))return 0;var q1=I1;j1=I1+j1-1;for(var iy=0;iy<w1.length;++iy){var xy=w1.charCodeAt(iy);if(55296<=xy&&57343>=xy){var Ly=w1.charCodeAt(++iy);xy=65536+((xy&1023)<<10)|Ly&1023}if(127>=xy){if(I1>=j1)break;C1[I1++>>>0]=xy}else{if(2047>=xy){if(I1+1>=j1)break;C1[I1++>>>0]=192|xy>>6}else{if(65535>=xy){if(I1+2>=j1)break;C1[I1++>>>0]=224|xy>>12}else{if(I1+3>=j1)break;C1[I1++>>>0]=240|xy>>18,C1[I1++>>>0]=128|xy>>12&63}C1[I1++>>>0]=128|xy>>6&63}C1[I1++>>>0]=128|xy&63}}return C1[I1>>>0]=0,I1-q1},Cv=(w1,C1,I1)=>Hv(w1,a1(),C1,I1);function $$(w1,C1){if(W1)return u0(5,1,w1,C1)}function b$(w1,C1,I1){if(W1)return u0(6,1,w1,C1,I1)}function I$(w1,C1,I1){return W1?u0(7,1,w1,C1,I1):0}function Lv(w1,C1){if(W1)return u0(8,1,w1,C1)}function u$(w1,C1,I1){if(W1)return u0(9,1,w1,C1,I1)}function sy(w1,C1,I1,j1){if(W1)return u0(10,1,w1,C1,I1,j1)}function Fy(w1,C1,I1,j1){if(W1)return u0(11,1,w1,C1,I1,j1)}function e0(w1,C1,I1,j1){if(W1)return u0(12,1,w1,C1,I1,j1)}function E0(w1){if(W1)return u0(13,1,w1)}function D0(w1,C1){if(W1)return u0(14,1,w1,C1)}function sv(w1,C1,I1){if(W1)return u0(15,1,w1,C1,I1)}var B0,P0=w1=>{for(var C1="";a1()[w1>>>0];)C1+=B0[a1()[w1++>>>0]];return C1},H0={},pv={},Z0;function cv(w1,C1,I1={}){var j1=C1.name;if(!w1)throw new Z0(`type "${j1}" must have a positive integer typeid pointer`);if(pv.hasOwnProperty(w1)){if(I1.Ub)return;throw new Z0(`Cannot register type '${j1}' twice`)}pv[w1]=C1,H0.hasOwnProperty(w1)&&(C1=H0[w1],delete H0[w1],C1.forEach(q1=>q1()))}function x0(w1,C1,I1={}){if(!("argPackAdvance"in C1))throw new TypeError("registerType registeredInstance requires argPackAdvance");return cv(w1,C1,I1)}var ev=(w1,C1,I1)=>{switch(C1){case 1:return I1?j1=>o1()[j1>>>0]:j1=>a1()[j1>>>0];case 2:return I1?j1=>u1()[j1>>>1>>>0]:j1=>s1()[j1>>>1>>>0];case 4:return I1?j1=>l1()[j1>>>2>>>0]:j1=>c1()[j1>>>2>>>0];case 8:return I1?j1=>Vy[j1>>>3]:j1=>p0[j1>>>3];default:throw new TypeError(`invalid integer width (${C1}): ${w1}`)}},Dv=[],fv=[];function n$(w1){w1>>>=0,9<w1&&--fv[w1+1]===0&&(fv[w1]=void 0,Dv.push(w1))}var f0=w1=>{if(!w1)throw new Z0("Cannot use deleted val. handle = "+w1);return fv[w1]},vv=w1=>{switch(w1){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let C1=Dv.pop()||fv.length;return fv[C1]=w1,fv[C1+1]=1,C1}};function mv(w1){return this.fromWireType(c1()[w1>>>2>>>0])}var Gv={name:"emscripten::val",fromWireType:w1=>{var C1=f0(w1);return n$(w1),C1},toWireType:(w1,C1)=>vv(C1),argPackAdvance:8,readValueFromPointer:mv,Bb:null},qv=(w1,C1)=>{switch(C1){case 4:return function(I1){return this.fromWireType(d1()[I1>>>2>>>0])};case 8:return function(I1){return this.fromWireType(h1()[I1>>>3>>>0])};default:throw new TypeError(`invalid float width (${C1}): ${w1}`)}},c$=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,U$=(w1,C1)=>{for(var I1=w1>>1,j1=I1+C1/2;!(I1>=j1)&&s1()[I1>>>0];)++I1;if(I1<<=1,32<I1-w1&&c$)return c$.decode(a1().slice(w1,I1));for(I1="",j1=0;!(j1>=C1/2);++j1){var q1=u1()[w1+2*j1>>>1>>>0];if(q1==0)break;I1+=String.fromCharCode(q1)}return I1},ex=(w1,C1,I1)=>{if(I1??(I1=2147483647),2>I1)return 0;I1-=2;var j1=C1;I1=I1<2*w1.length?I1/2:w1.length;for(var q1=0;q1<I1;++q1){var iy=w1.charCodeAt(q1);u1()[C1>>>1>>>0]=iy,C1+=2}return u1()[C1>>>1>>>0]=0,C1-j1},P$=w1=>2*w1.length,s0=(w1,C1)=>{for(var I1=0,j1="";!(I1>=C1/4);){var q1=l1()[w1+4*I1>>>2>>>0];if(q1==0)break;++I1,65536<=q1?(q1-=65536,j1+=String.fromCharCode(55296|q1>>10,56320|q1&1023)):j1+=String.fromCharCode(q1)}return j1},V$=(w1,C1,I1)=>{if(C1>>>=0,I1??(I1=2147483647),4>I1)return 0;var j1=C1;I1=j1+I1-4;for(var q1=0;q1<w1.length;++q1){var iy=w1.charCodeAt(q1);if(55296<=iy&&57343>=iy){var xy=w1.charCodeAt(++q1);iy=65536+((iy&1023)<<10)|xy&1023}if(l1()[C1>>>2>>>0]=iy,C1+=4,C1+4>I1)break}return l1()[C1>>>2>>>0]=0,C1-j1},c0=w1=>{for(var C1=0,I1=0;I1<w1.length;++I1){var j1=w1.charCodeAt(I1);55296<=j1&&57343>=j1&&++I1,C1+=4}return C1},k$=w1=>{if(!yy)try{if(w1(),!(0<qy))try{W1?ww(Oy):z1(Oy)}catch(C1){C1 instanceof nv||C1=="unwind"||T1(1,C1)}}catch(C1){C1 instanceof nv||C1=="unwind"||T1(1,C1)}};function Fv(w1){w1>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(l1(),w1>>>2,w1).value.then(wv),w1+=128,Atomics.store(l1(),w1>>>2,1))}f1.__emscripten_thread_mailbox_await=Fv;var wv=()=>{var w1=tv();w1&&(Fv(w1),k$(o2))};f1.checkMailbox=wv;var x$=[],d$=(w1,C1)=>{var I1=pv[w1];if(I1===void 0)throw w1=Vx(w1),I1=P0(w1),i$(w1),new Z0(`${C1} has unknown type ${I1}`);return I1},w$=(w1,C1,I1)=>{var j1=[];return w1=w1.toWireType(j1,I1),j1.length&&(c1()[C1>>>2>>>0]=vv(j1)),w1},Ov=w1=>{try{w1()}catch(C1){Ty(C1)}};function M$(){var w1=n0,C1={};for(let[I1,j1]of Object.entries(w1))C1[I1]=typeof j1=="function"?(...q1)=>{Kv.push(I1);try{return j1(...q1)}finally{yy||(Kv.pop(),Nv&&Pv===1&&Kv.length===0&&(Pv=0,qy+=1,Ov(Hx),typeof Fibers<"u"&&Fibers.rc()))}}:j1;return C1}var Pv=0,Nv=null,_$=0,Kv=[],R1={},b1={},S1=0,A1=null,M1=[];function F1(){return new Promise((w1,C1)=>{A1={resolve:w1,reject:C1}})}function ry(){var w1=p$(65548),C1=w1+12;c1()[w1>>>2>>>0]=C1,c1()[w1+4>>>2>>>0]=C1+65536,C1=Kv[0];var I1=R1[C1];return I1===void 0&&(I1=S1++,R1[C1]=I1,b1[I1]=C1),C1=I1,l1()[w1+8>>>2>>>0]=C1,w1}function _y(){var w1=l1()[Nv+8>>>2>>>0];return w1=n0[b1[w1]],--qy,w1()}function ky(w1){if(!yy){if(Pv===0){var C1=!1,I1=!1;w1((j1=0)=>{if(!yy&&(_$=j1,C1=!0,I1)){Pv=2,Ov(()=>Gx(Nv)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),j1=!1;try{var q1=_y()}catch(Ly){q1=Ly,j1=!0}var iy=!1;if(!Nv){var xy=A1;xy&&(A1=null,(j1?xy.reject:xy.resolve)(q1),iy=!0)}if(j1&&!iy)throw q1}}),I1=!0,C1||(Pv=1,Nv=ry(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Ov(()=>Tw(Nv)))}else Pv===2?(Pv=0,Ov(Cw),i$(Nv),Nv=null,M1.forEach(k$)):Ty(`invalid state: ${Pv}`);return _$}}function zy(w1){return ky(C1=>{w1().then(C1)})}var By=[],a0={},N0=w1=>{var C1=a0[w1];return C1===void 0?P0(w1):C1},my=()=>typeof globalThis=="object"?globalThis:Function("return this")(),py=w1=>{var C1=By.length;return By.push(w1),C1},Xy=(w1,C1)=>{for(var I1=Array(w1),j1=0;j1<w1;++j1)I1[j1]=d$(c1()[C1+4*j1>>>2>>>0],"parameter "+j1);return I1},Qy=(w1,C1)=>Object.defineProperty(C1,"name",{value:w1});function j0(w1){var C1=Function;if(!(C1 instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof C1} which is not a function`);var I1=Qy(C1.name||"unknownFunctionName",function(){});return I1.prototype=C1.prototype,I1=new I1,w1=C1.apply(I1,w1),w1 instanceof Object?w1:I1}var D$=w1=>w1%4===0&&(w1%100!==0||w1%400===0),Yw=[0,31,60,91,121,152,182,213,244,274,305,335],Xw=[0,31,59,90,120,151,181,212,243,273,304,334];function Qw(w1,C1,I1,j1,q1,iy,xy){return W1?u0(16,1,w1,C1,I1,j1,q1,iy,xy):-52}function Jw(w1,C1,I1,j1,q1,iy){if(W1)return u0(17,1,w1,C1,I1,j1,q1,iy)}var fw=[],hw=(w1,C1)=>{fw.length=0;for(var I1;I1=a1()[w1++>>>0];){var j1=I1!=105;j1&=I1!=112,C1+=j1&&C1%8?4:0,fw.push(I1==112?c1()[C1>>>2>>>0]:I1==106?Vy[C1>>>3]:I1==105?l1()[C1>>>2>>>0]:h1()[C1>>>3>>>0]),C1+=j1?8:4}return fw},mw={},_v=()=>{if(!Ox){var w1={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E1||"./this.program"},C1;for(C1 in mw)mw[C1]===void 0?delete w1[C1]:w1[C1]=mw[C1];var I1=[];for(C1 in w1)I1.push(`${C1}=${w1[C1]}`);Ox=I1}return Ox},Ox;function W$(w1,C1){if(W1)return u0(18,1,w1,C1);w1>>>=0,C1>>>=0;var I1=0;return _v().forEach((j1,q1)=>{var iy=C1+I1;for(q1=c1()[w1+4*q1>>>2>>>0]=iy,iy=0;iy<j1.length;++iy)o1()[q1++>>>0]=j1.charCodeAt(iy);o1()[q1>>>0]=0,I1+=j1.length+1}),0}function gw(w1,C1){if(W1)return u0(19,1,w1,C1);w1>>>=0,C1>>>=0;var I1=_v();c1()[w1>>>2>>>0]=I1.length;var j1=0;return I1.forEach(q1=>j1+=q1.length+1),c1()[C1>>>2>>>0]=j1,0}function zx(w1){return W1?u0(20,1,w1):52}function Zv(w1,C1,I1,j1){return W1?u0(21,1,w1,C1,I1,j1):52}function yw(w1,C1,I1,j1){return W1?u0(22,1,w1,C1,I1,j1):70}var e2=[null,[],[]];function vw(w1,C1,I1,j1){if(W1)return u0(23,1,w1,C1,I1,j1);C1>>>=0,I1>>>=0,j1>>>=0;for(var q1=0,iy=0;iy<I1;iy++){var xy=c1()[C1>>>2>>>0],Ly=c1()[C1+4>>>2>>>0];C1+=8;for(var Jy=0;Jy<Ly;Jy++){var Ky=a1()[xy+Jy>>>0],d0=e2[w1];Ky===0||Ky===10?((w1===1?J1:hy)(yv(d0,0)),d0.length=0):d0.push(Ky)}q1+=Ly}return c1()[j1>>>2>>>0]=q1,0}var $w=[31,29,31,30,31,30,31,31,30,31,30,31],bw=[31,28,31,30,31,30,31,31,30,31,30,31];function t2(w1){var C1=Array(q0(w1)+1);return Hv(w1,C1,0,C1.length),C1}var Yv=(w1,C1)=>{o1().set(w1,C1>>>0)};function r2(w1,C1,I1,j1){function q1(by,w0,z0){for(by=typeof by=="number"?by.toString():by||"";by.length<w0;)by=z0[0]+by;return by}function iy(by,w0){return q1(by,w0,"0")}function xy(by,w0){function z0(N$){return 0>N$?-1:0<N$?1:0}var q$;return(q$=z0(by.getFullYear()-w0.getFullYear()))===0&&(q$=z0(by.getMonth()-w0.getMonth()))===0&&(q$=z0(by.getDate()-w0.getDate())),q$}function Ly(by){switch(by.getDay()){case 0:return new Date(by.getFullYear()-1,11,29);case 1:return by;case 2:return new Date(by.getFullYear(),0,3);case 3:return new Date(by.getFullYear(),0,2);case 4:return new Date(by.getFullYear(),0,1);case 5:return new Date(by.getFullYear()-1,11,31);case 6:return new Date(by.getFullYear()-1,11,30)}}function Jy(by){var w0=by.zb;for(by=new Date(new Date(by.Ab+1900,0,1).getTime());0<w0;){var z0=by.getMonth(),q$=(D$(by.getFullYear())?$w:bw)[z0];if(w0>q$-by.getDate())w0-=q$-by.getDate()+1,by.setDate(1),11>z0?by.setMonth(z0+1):(by.setMonth(0),by.setFullYear(by.getFullYear()+1));else{by.setDate(by.getDate()+w0);break}}return z0=new Date(by.getFullYear()+1,0,4),w0=Ly(new Date(by.getFullYear(),0,4)),z0=Ly(z0),0>=xy(w0,by)?0>=xy(z0,by)?by.getFullYear()+1:by.getFullYear():by.getFullYear()-1}w1>>>=0,C1>>>=0,I1>>>=0,j1>>>=0;var Ky=c1()[j1+40>>>2>>>0];j1={kc:l1()[j1>>>2>>>0],jc:l1()[j1+4>>>2>>>0],Eb:l1()[j1+8>>>2>>>0],Jb:l1()[j1+12>>>2>>>0],Fb:l1()[j1+16>>>2>>>0],Ab:l1()[j1+20>>>2>>>0],vb:l1()[j1+24>>>2>>>0],zb:l1()[j1+28>>>2>>>0],qc:l1()[j1+32>>>2>>>0],ic:l1()[j1+36>>>2>>>0],lc:Ky?gy(Ky):""},I1=gy(I1),Ky={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var d0 in Ky)I1=I1.replace(new RegExp(d0,"g"),Ky[d0]);var G0="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),V0="January February March April May June July August September October November December".split(" ");Ky={"%a":by=>G0[by.vb].substring(0,3),"%A":by=>G0[by.vb],"%b":by=>V0[by.Fb].substring(0,3),"%B":by=>V0[by.Fb],"%C":by=>iy((by.Ab+1900)/100|0,2),"%d":by=>iy(by.Jb,2),"%e":by=>q1(by.Jb,2," "),"%g":by=>Jy(by).toString().substring(2),"%G":Jy,"%H":by=>iy(by.Eb,2),"%I":by=>(by=by.Eb,by==0?by=12:12<by&&(by-=12),iy(by,2)),"%j":by=>{for(var w0=0,z0=0;z0<=by.Fb-1;w0+=(D$(by.Ab+1900)?$w:bw)[z0++]);return iy(by.Jb+w0,3)},"%m":by=>iy(by.Fb+1,2),"%M":by=>iy(by.jc,2),"%n":()=>`
`,"%p":by=>0<=by.Eb&&12>by.Eb?"AM":"PM","%S":by=>iy(by.kc,2),"%t":()=>"	","%u":by=>by.vb||7,"%U":by=>iy(Math.floor((by.zb+7-by.vb)/7),2),"%V":by=>{var w0=Math.floor((by.zb+7-(by.vb+6)%7)/7);if(2>=(by.vb+371-by.zb-2)%7&&w0++,w0)w0==53&&(z0=(by.vb+371-by.zb)%7,z0==4||z0==3&&D$(by.Ab)||(w0=1));else{w0=52;var z0=(by.vb+7-by.zb-1)%7;(z0==4||z0==5&&D$(by.Ab%400-1))&&w0++}return iy(w0,2)},"%w":by=>by.vb,"%W":by=>iy(Math.floor((by.zb+7-(by.vb+6)%7)/7),2),"%y":by=>(by.Ab+1900).toString().substring(2),"%Y":by=>by.Ab+1900,"%z":by=>{by=by.ic;var w0=0<=by;return by=Math.abs(by)/60,(w0?"+":"-")+("0000"+(by/60*100+by%60)).slice(-4)},"%Z":by=>by.lc,"%%":()=>"%"},I1=I1.replace(/%%/g,"\0\0");for(d0 in Ky)I1.includes(d0)&&(I1=I1.replace(new RegExp(d0,"g"),Ky[d0](j1)));return I1=I1.replace(/\0\0/g,"%"),d0=t2(I1),d0.length>C1?0:(Yv(d0,w1),d0.length-1)}Cy.Gb();for(var Xv=Array(256),Ux=0;256>Ux;++Ux)Xv[Ux]=String.fromCharCode(Ux);B0=Xv,Z0=f1.BindingError=class extends Error{constructor(w1){super(w1),this.name="BindingError"}},f1.InternalError=class extends Error{constructor(w1){super(w1),this.name="InternalError"}},fv.push(0,1,void 0,1,null,1,!0,1,!1,1),f1.count_emval_handles=()=>fv.length/2-5-Dv.length;var n2=[ov,v0,uv,T0,C0,$$,b$,I$,Lv,u$,sy,Fy,e0,E0,D0,sv,Qw,Jw,W$,gw,zx,Zv,yw,vw],H$={ua:function(w1,C1,I1){return zy(async()=>{await f1.Zb(w1,C1,I1)})},b:function(w1,C1,I1){throw w1>>>=0,new Q0(w1).Gb(C1>>>0,I1>>>0),hv=w1,hv},ia:function(w1){i2(w1>>>0,!k1,1,!P1,131072,!1),Cy.Pb()},G:function(w1){w1>>>=0,W1?postMessage({cmd:"cleanupThread",thread:w1}):Cy.Nb(Cy.ub[w1])},_:J0,A:T0,pa:C0,W:$$,Y:b$,qa:I$,na:Lv,fa:u$,ma:sy,K:Fy,X:e0,U:E0,oa:D0,V:sv,E:function(w1,C1,I1){w1>>>=0,I1>>>=0,C1=P0(C1>>>0),x0(w1,{name:C1,fromWireType:j1=>j1,toWireType:function(j1,q1){if(typeof q1!="bigint"&&typeof q1!="number")throw q1===null?q1="null":(j1=typeof q1,q1=j1==="object"||j1==="array"||j1==="function"?q1.toString():""+q1),new TypeError(`Cannot convert "${q1}" to ${this.name}`);return typeof q1=="number"&&(q1=BigInt(q1)),q1},argPackAdvance:8,readValueFromPointer:ev(C1,I1,C1.indexOf("u")==-1),Bb:null})},O:function(w1,C1,I1,j1){w1>>>=0,C1=P0(C1>>>0),x0(w1,{name:C1,fromWireType:function(q1){return!!q1},toWireType:function(q1,iy){return iy?I1:j1},argPackAdvance:8,readValueFromPointer:function(q1){return this.fromWireType(a1()[q1>>>0])},Bb:null})},N:function(w1){return x0(w1>>>0,Gv)},D:function(w1,C1,I1){w1>>>=0,I1>>>=0,C1=P0(C1>>>0),x0(w1,{name:C1,fromWireType:j1=>j1,toWireType:(j1,q1)=>q1,argPackAdvance:8,readValueFromPointer:qv(C1,I1),Bb:null})},t:function(w1,C1,I1,j1,q1){if(w1>>>=0,I1>>>=0,C1=P0(C1>>>0),q1===-1&&(q1=4294967295),q1=Ly=>Ly,j1===0){var iy=32-8*I1;q1=Ly=>Ly<<iy>>>iy}var xy=C1.includes("unsigned")?function(Ly,Jy){return Jy>>>0}:function(Ly,Jy){return Jy};x0(w1,{name:C1,fromWireType:q1,toWireType:xy,argPackAdvance:8,readValueFromPointer:ev(C1,I1,j1!==0),Bb:null})},p:function(w1,C1,I1){function j1(iy){var xy=c1()[iy>>>2>>>0];return iy=c1()[iy+4>>>2>>>0],new q1(o1().buffer,iy,xy)}w1>>>=0;var q1=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][C1];I1=P0(I1>>>0),x0(w1,{name:I1,fromWireType:j1,argPackAdvance:8,readValueFromPointer:j1},{Ub:!0})},F:function(w1,C1){w1>>>=0,C1=P0(C1>>>0);var I1=C1==="std::string";x0(w1,{name:C1,fromWireType:function(j1){var q1=c1()[j1>>>2>>>0],iy=j1+4;if(I1)for(var xy=iy,Ly=0;Ly<=q1;++Ly){var Jy=iy+Ly;if(Ly==q1||a1()[Jy>>>0]==0){if(xy=gy(xy,Jy-xy),Ky===void 0)var Ky=xy;else Ky+="\0",Ky+=xy;xy=Jy+1}}else{for(Ky=Array(q1),Ly=0;Ly<q1;++Ly)Ky[Ly]=String.fromCharCode(a1()[iy+Ly>>>0]);Ky=Ky.join("")}return i$(j1),Ky},toWireType:function(j1,q1){q1 instanceof ArrayBuffer&&(q1=new Uint8Array(q1));var iy=typeof q1=="string";if(!(iy||q1 instanceof Uint8Array||q1 instanceof Uint8ClampedArray||q1 instanceof Int8Array))throw new Z0("Cannot pass non-string to std::string");var xy=I1&&iy?q0(q1):q1.length,Ly=p$(4+xy+1),Jy=Ly+4;if(c1()[Ly>>>2>>>0]=xy,I1&&iy)Cv(q1,Jy,xy+1);else if(iy)for(iy=0;iy<xy;++iy){var Ky=q1.charCodeAt(iy);if(255<Ky)throw i$(Jy),new Z0("String has UTF-16 code units that do not fit in 8 bits");a1()[Jy+iy>>>0]=Ky}else for(iy=0;iy<xy;++iy)a1()[Jy+iy>>>0]=q1[iy];return j1!==null&&j1.push(i$,Ly),Ly},argPackAdvance:8,readValueFromPointer:mv,Bb(j1){i$(j1)}})},z:function(w1,C1,I1){if(w1>>>=0,C1>>>=0,I1>>>=0,I1=P0(I1),C1===2)var j1=U$,q1=ex,iy=P$,xy=Ly=>s1()[Ly>>>1>>>0];else C1===4&&(j1=s0,q1=V$,iy=c0,xy=Ly=>c1()[Ly>>>2>>>0]);x0(w1,{name:I1,fromWireType:Ly=>{for(var Jy=c1()[Ly>>>2>>>0],Ky,d0=Ly+4,G0=0;G0<=Jy;++G0){var V0=Ly+4+G0*C1;(G0==Jy||xy(V0)==0)&&(d0=j1(d0,V0-d0),Ky===void 0?Ky=d0:(Ky+="\0",Ky+=d0),d0=V0+C1)}return i$(Ly),Ky},toWireType:(Ly,Jy)=>{if(typeof Jy!="string")throw new Z0(`Cannot pass non-string to C++ string type ${I1}`);var Ky=iy(Jy),d0=p$(4+Ky+C1);return c1()[d0>>>2>>>0]=Ky/C1,q1(Jy,d0+4,Ky+C1),Ly!==null&&Ly.push(i$,d0),d0},argPackAdvance:8,readValueFromPointer:mv,Bb(Ly){i$(Ly)}})},P:function(w1,C1){w1>>>=0,C1=P0(C1>>>0),x0(w1,{Vb:!0,name:C1,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(w1,C1){w1>>>=0,w1==C1>>>0?setTimeout(wv):W1?postMessage({targetThread:w1,cmd:"checkMailbox"}):(w1=Cy.ub[w1])&&w1.postMessage({cmd:"checkMailbox"})},$:function(w1,C1,I1,j1,q1){C1>>>=0,I1>>>=0,j1/=2,x$.length=j1,q1=q1>>>0>>>3;for(var iy=0;iy<j1;iy++)x$[iy]=Vy[q1+2*iy]?Vy[q1+2*iy+1]:h1()[q1+2*iy+1>>>0];return w1=C1?i0[C1]:n2[w1],Cy.Sb=I1,I1=w1(...x$),Cy.Sb=0,I1},ha:Fv,sa:function(w1){N1&&Cy.ub[w1>>>0].ref()},w:function(w1,C1,I1){return C1>>>=0,I1>>>=0,w1=f0(w1>>>0),C1=d$(C1,"emval::as"),w$(C1,I1,w1)},y:function(w1){return w1>>>=0,zy(()=>(w1=f0(w1),w1.then(vv)))},o:function(w1,C1,I1,j1){return I1>>>=0,j1>>>=0,w1=By[w1>>>0],C1=f0(C1>>>0),w1(null,C1,I1,j1)},k:function(w1,C1,I1,j1,q1){return I1>>>=0,j1>>>=0,q1>>>=0,w1=By[w1>>>0],C1=f0(C1>>>0),I1=N0(I1),w1(C1,C1[I1],j1,q1)},c:n$,C:function(w1,C1){return C1>>>=0,w1=f0(w1>>>0),C1=f0(C1),w1==C1},n:function(w1){return w1>>>=0,w1===0?vv(my()):(w1=N0(w1),vv(my()[w1]))},j:function(w1,C1,I1){C1=Xy(w1,C1>>>0);var j1=C1.shift();w1--;var q1=`return function (obj, func, destructorsRef, args) {
`,iy=0,xy=[];I1===0&&xy.push("obj");for(var Ly=["retType"],Jy=[j1],Ky=0;Ky<w1;++Ky)xy.push("arg"+Ky),Ly.push("argType"+Ky),Jy.push(C1[Ky]),q1+=`  var arg${Ky} = argType${Ky}.readValueFromPointer(args${iy?"+"+iy:""});
`,iy+=C1[Ky].argPackAdvance;return q1+=`  var rv = ${I1===1?"new func":"func.call"}(${xy.join(", ")});
`,j1.Vb||(Ly.push("emval_returnValue"),Jy.push(w$),q1+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Ly.push(q1+`};
`),w1=j0(Ly)(...Jy),I1=`methodCaller<(${C1.map(d0=>d0.name).join(", ")}) => ${j1.name}>`,py(Qy(I1,w1))},s:function(w1,C1){return C1>>>=0,w1=f0(w1>>>0),C1=f0(C1),vv(w1[C1])},d:function(w1){w1>>>=0,9<w1&&(fv[w1+1]+=1)},v:function(){return vv([])},m:function(w1){w1=f0(w1>>>0);for(var C1=Array(w1.length),I1=0;I1<w1.length;I1++)C1[I1]=w1[I1];return vv(C1)},g:function(w1){return vv(N0(w1>>>0))},l:function(){return vv({})},i:function(w1){w1>>>=0;for(var C1=f0(w1);C1.length;){var I1=C1.pop();C1.pop()(I1)}n$(w1)},h:function(w1,C1,I1){C1>>>=0,I1>>>=0,w1=f0(w1>>>0),C1=f0(C1),I1=f0(I1),w1[C1]=I1},e:function(w1,C1){return C1>>>=0,w1=d$(w1>>>0,"_emval_take_value"),w1=w1.readValueFromPointer(C1),vv(w1)},ca:function(w1,C1){w1=-9007199254740992>w1||9007199254740992<w1?NaN:Number(w1),C1>>>=0,w1=new Date(1e3*w1),l1()[C1>>>2>>>0]=w1.getUTCSeconds(),l1()[C1+4>>>2>>>0]=w1.getUTCMinutes(),l1()[C1+8>>>2>>>0]=w1.getUTCHours(),l1()[C1+12>>>2>>>0]=w1.getUTCDate(),l1()[C1+16>>>2>>>0]=w1.getUTCMonth(),l1()[C1+20>>>2>>>0]=w1.getUTCFullYear()-1900,l1()[C1+24>>>2>>>0]=w1.getUTCDay(),w1=(w1.getTime()-Date.UTC(w1.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,l1()[C1+28>>>2>>>0]=w1},da:function(w1,C1){w1=-9007199254740992>w1||9007199254740992<w1?NaN:Number(w1),C1>>>=0,w1=new Date(1e3*w1),l1()[C1>>>2>>>0]=w1.getSeconds(),l1()[C1+4>>>2>>>0]=w1.getMinutes(),l1()[C1+8>>>2>>>0]=w1.getHours(),l1()[C1+12>>>2>>>0]=w1.getDate(),l1()[C1+16>>>2>>>0]=w1.getMonth(),l1()[C1+20>>>2>>>0]=w1.getFullYear()-1900,l1()[C1+24>>>2>>>0]=w1.getDay();var I1=(D$(w1.getFullYear())?Yw:Xw)[w1.getMonth()]+w1.getDate()-1|0;l1()[C1+28>>>2>>>0]=I1,l1()[C1+36>>>2>>>0]=-(60*w1.getTimezoneOffset()),I1=new Date(w1.getFullYear(),6,1).getTimezoneOffset();var j1=new Date(w1.getFullYear(),0,1).getTimezoneOffset();w1=(I1!=j1&&w1.getTimezoneOffset()==Math.min(j1,I1))|0,l1()[C1+32>>>2>>>0]=w1},ea:function(w1){w1>>>=0;var C1=new Date(l1()[w1+20>>>2>>>0]+1900,l1()[w1+16>>>2>>>0],l1()[w1+12>>>2>>>0],l1()[w1+8>>>2>>>0],l1()[w1+4>>>2>>>0],l1()[w1>>>2>>>0],0),I1=l1()[w1+32>>>2>>>0],j1=C1.getTimezoneOffset(),q1=new Date(C1.getFullYear(),6,1).getTimezoneOffset(),iy=new Date(C1.getFullYear(),0,1).getTimezoneOffset(),xy=Math.min(iy,q1);return 0>I1?l1()[w1+32>>>2>>>0]=+(q1!=iy&&xy==j1):0<I1!=(xy==j1)&&(q1=Math.max(iy,q1),C1.setTime(C1.getTime()+6e4*((0<I1?xy:q1)-j1))),l1()[w1+24>>>2>>>0]=C1.getDay(),I1=(D$(C1.getFullYear())?Yw:Xw)[C1.getMonth()]+C1.getDate()-1|0,l1()[w1+28>>>2>>>0]=I1,l1()[w1>>>2>>>0]=C1.getSeconds(),l1()[w1+4>>>2>>>0]=C1.getMinutes(),l1()[w1+8>>>2>>>0]=C1.getHours(),l1()[w1+12>>>2>>>0]=C1.getDate(),l1()[w1+16>>>2>>>0]=C1.getMonth(),l1()[w1+20>>>2>>>0]=C1.getYear(),w1=C1.getTime(),BigInt(isNaN(w1)?-1:w1/1e3)},aa:Qw,ba:Jw,R:function(w1,C1,I1,j1){w1>>>=0,C1>>>=0,I1>>>=0,j1>>>=0;var q1=new Date().getFullYear(),iy=new Date(q1,0,1),xy=new Date(q1,6,1);q1=iy.getTimezoneOffset();var Ly=xy.getTimezoneOffset(),Jy=Math.max(q1,Ly);c1()[w1>>>2>>>0]=60*Jy,l1()[C1>>>2>>>0]=+(q1!=Ly),w1=Ky=>Ky.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],iy=w1(iy),xy=w1(xy),Ly<q1?(Cv(iy,I1,17),Cv(xy,j1,17)):(Cv(iy,j1,17),Cv(xy,I1,17))},q:()=>{Ty("")},f:function(w1,C1,I1){return w1>>>=0,C1=hw(C1>>>0,I1>>>0),i0[w1](...C1)},M:function(w1,C1,I1){return w1>>>=0,C1=hw(C1>>>0,I1>>>0),i0[w1](...C1)},H:()=>{},L:()=>Date.now(),ra:()=>{throw qy+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>N1?(Ua(),sr(Ma)).cpus().length:navigator.hardwareConcurrency,Q:function(w1){w1>>>=0;var C1=a1().length;if(w1<=C1||4294901760<w1)return!1;for(var I1=1;4>=I1;I1*=2){var j1=C1*(1+.2/I1);j1=Math.min(j1,w1+100663296);var q1=Math;j1=Math.max(w1,j1);e:{q1=(q1.min.call(q1,4294901760,j1+(65536-j1%65536)%65536)-G1.buffer.byteLength+65535)/65536;try{G1.grow(q1),A0();var iy=1;break e}catch{}iy=void 0}if(iy)return!0}return!1},ja:W$,la:gw,Z:z1,B:zx,J:Zv,ga:yw,I:vw,a:G1||f1.wasmMemory,ka:r2,r:function(w1,C1,I1,j1){return r2(w1>>>0,C1>>>0,I1>>>0,j1>>>0)}},n0=function(){function w1(I1,j1){return n0=I1.exports,n0=M$(),n0=Z2(),Cy.Qb.push(n0.cb),X1.unshift(n0.va),Y1=j1,Ny(),n0}var C1={a:H$};if(vy++,f1.instantiateWasm)try{return f1.instantiateWasm(C1,w1)}catch(I1){hy(`Module.instantiateWasm callback failed with error: ${I1}`),v1(I1)}return dv(C1,function(I1){w1(I1.instance,I1.module)}).catch(v1),{}}(),Vx=w1=>(Vx=n0.wa)(w1);f1.__embind_initialize_bindings=()=>(f1.__embind_initialize_bindings=n0.xa)(),f1._OrtInit=(w1,C1)=>(f1._OrtInit=n0.ya)(w1,C1),f1._OrtGetLastError=(w1,C1)=>(f1._OrtGetLastError=n0.za)(w1,C1),f1._OrtCreateSessionOptions=(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky)=>(f1._OrtCreateSessionOptions=n0.Aa)(w1,C1,I1,j1,q1,iy,xy,Ly,Jy,Ky),f1._OrtAppendExecutionProvider=(w1,C1)=>(f1._OrtAppendExecutionProvider=n0.Ba)(w1,C1),f1._OrtAddFreeDimensionOverride=(w1,C1,I1)=>(f1._OrtAddFreeDimensionOverride=n0.Ca)(w1,C1,I1),f1._OrtAddSessionConfigEntry=(w1,C1,I1)=>(f1._OrtAddSessionConfigEntry=n0.Da)(w1,C1,I1),f1._OrtReleaseSessionOptions=w1=>(f1._OrtReleaseSessionOptions=n0.Ea)(w1),f1._OrtCreateSession=(w1,C1,I1)=>(f1._OrtCreateSession=n0.Fa)(w1,C1,I1),f1._OrtReleaseSession=w1=>(f1._OrtReleaseSession=n0.Ga)(w1),f1._OrtGetInputOutputCount=(w1,C1,I1)=>(f1._OrtGetInputOutputCount=n0.Ha)(w1,C1,I1),f1._OrtGetInputName=(w1,C1)=>(f1._OrtGetInputName=n0.Ia)(w1,C1),f1._OrtGetOutputName=(w1,C1)=>(f1._OrtGetOutputName=n0.Ja)(w1,C1),f1._OrtFree=w1=>(f1._OrtFree=n0.Ka)(w1),f1._OrtCreateTensor=(w1,C1,I1,j1,q1,iy)=>(f1._OrtCreateTensor=n0.La)(w1,C1,I1,j1,q1,iy),f1._OrtGetTensorData=(w1,C1,I1,j1,q1)=>(f1._OrtGetTensorData=n0.Ma)(w1,C1,I1,j1,q1),f1._OrtReleaseTensor=w1=>(f1._OrtReleaseTensor=n0.Na)(w1),f1._OrtCreateRunOptions=(w1,C1,I1,j1)=>(f1._OrtCreateRunOptions=n0.Oa)(w1,C1,I1,j1),f1._OrtAddRunConfigEntry=(w1,C1,I1)=>(f1._OrtAddRunConfigEntry=n0.Pa)(w1,C1,I1),f1._OrtReleaseRunOptions=w1=>(f1._OrtReleaseRunOptions=n0.Qa)(w1),f1._OrtCreateBinding=w1=>(f1._OrtCreateBinding=n0.Ra)(w1),f1._OrtBindInput=(w1,C1,I1)=>(f1._OrtBindInput=n0.Sa)(w1,C1,I1),f1._OrtBindOutput=(w1,C1,I1,j1)=>(f1._OrtBindOutput=n0.Ta)(w1,C1,I1,j1),f1._OrtClearBoundOutputs=w1=>(f1._OrtClearBoundOutputs=n0.Ua)(w1),f1._OrtReleaseBinding=w1=>(f1._OrtReleaseBinding=n0.Va)(w1),f1._OrtRunWithBinding=(w1,C1,I1,j1,q1)=>(f1._OrtRunWithBinding=n0.Wa)(w1,C1,I1,j1,q1),f1._OrtRun=(w1,C1,I1,j1,q1,iy,xy,Ly)=>(f1._OrtRun=n0.Xa)(w1,C1,I1,j1,q1,iy,xy,Ly),f1._OrtEndProfiling=w1=>(f1._OrtEndProfiling=n0.Ya)(w1),f1._JsepOutput=(w1,C1,I1)=>(f1._JsepOutput=n0.Za)(w1,C1,I1),f1._JsepGetNodeName=w1=>(f1._JsepGetNodeName=n0._a)(w1);var tv=f1._pthread_self=()=>(tv=f1._pthread_self=n0.$a)(),p$=f1._malloc=w1=>(p$=f1._malloc=n0.ab)(w1),i$=f1._free=w1=>(i$=f1._free=n0.bb)(w1);f1.__emscripten_tls_init=()=>(f1.__emscripten_tls_init=n0.cb)();var i2=f1.__emscripten_thread_init=(w1,C1,I1,j1,q1,iy)=>(i2=f1.__emscripten_thread_init=n0.eb)(w1,C1,I1,j1,q1,iy);f1.__emscripten_thread_crashed=()=>(f1.__emscripten_thread_crashed=n0.fb)();var Wx=(w1,C1,I1,j1,q1)=>(Wx=n0.gb)(w1,C1,I1,j1,q1),xw=w1=>(xw=n0.hb)(w1),ww=f1.__emscripten_thread_exit=w1=>(ww=f1.__emscripten_thread_exit=n0.ib)(w1),o2=()=>(o2=n0.jb)(),_w=(w1,C1)=>(_w=n0.kb)(w1,C1),tx=w1=>(tx=n0.lb)(w1),G$=w1=>(G$=n0.mb)(w1),Sw=()=>(Sw=n0.nb)(),Ew=f1.dynCall_ii=(w1,C1)=>(Ew=f1.dynCall_ii=n0.pb)(w1,C1),Tw=w1=>(Tw=n0.qb)(w1),Hx=()=>(Hx=n0.rb)(),Gx=w1=>(Gx=n0.sb)(w1),Cw=()=>(Cw=n0.tb)();f1.___start_em_js=839500,f1.___stop_em_js=839661;function Z2(){var w1=n0;w1=Object.assign({},w1);var C1=j1=>q1=>j1(q1)>>>0,I1=j1=>()=>j1()>>>0;return w1.wa=C1(w1.wa),w1.$a=I1(w1.$a),w1.ab=C1(w1.ab),w1.emscripten_main_runtime_thread_id=I1(w1.emscripten_main_runtime_thread_id),w1.mb=C1(w1.mb),w1.nb=I1(w1.nb),w1}f1.wasmMemory=G1,f1.stackSave=()=>Sw(),f1.stackRestore=w1=>tx(w1),f1.stackAlloc=w1=>G$(w1),f1.keepRuntimeAlive=()=>0<qy,f1.UTF8ToString=gy,f1.stringToUTF8=Cv,f1.lengthBytesUTF8=q0,f1.ExitStatus=nv,f1.PThread=Cy;var fx;Dy=function w1(){fx||qx(),fx||(Dy=w1)};function qx(){if(!(0<vy))if(W1)g1(f1),W1||r0(X1),startWorker(f1);else{if(f1.preRun)for(typeof f1.preRun=="function"&&(f1.preRun=[f1.preRun]);f1.preRun.length;)R0.unshift(f1.preRun.shift());r0(R0),0<vy||fx||(fx=!0,f1.calledRun=!0,yy||(W1||r0(X1),g1(f1),W1||r0(fy)))}}return qx(),$1}})();typeof e1=="object"&&typeof _g=="object"?_g.exports=t1:typeof define=="function"&&define.amd&&define([],()=>t1)}),Ha=Er((e1,_g)=>{_g.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),La,gc,Hi,Gi,Un,Ga,yc,bc,vc,Fa,Fe,Or=j(()=>{La=za(),gc=Va(),Gi=!1,Un=!1,Ga=!1,yc=e1=>{if(e1===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e1+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e1+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},bc=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},vc=(e1,_g)=>e1?_g?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":_g?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Fa=async e1=>{if(Gi)return Promise.resolve();if(Un)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ga)throw new Error("previous call to 'initializeWebAssembly()' failed.");Un=!0;let _g=e1.initTimeout,t1=e1.numThreads,r1=e1.simd,n1=yc(t1),i1=r1&&bc(),o1=e1.wasmPaths,a1=typeof o1=="string"?o1:void 0,u1=vc(i1,n1),s1=typeof o1=="object"?o1[u1]:void 0,l1=!1,c1=[];if(_g>0&&c1.push(new Promise(d1=>{setTimeout(()=>{l1=!0,d1()},_g)})),c1.push(new Promise((d1,h1)=>{let f1=n1?gc:La,g1={locateFile:(v1,$1)=>{if(n1&&v1.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Ha()],{type:"text/javascript"}));if(v1.endsWith(".wasm")){if(s1)return s1;let y1=a1??$1;return u1==="ort-wasm-simd.wasm"?y1+"ort-wasm-simd.jsep.wasm":u1==="ort-wasm-simd-threaded.wasm"?y1+"ort-wasm-simd-threaded.jsep.wasm":y1+u1}return $1+v1}};if(n1)if(g1.numThreads=t1,typeof Blob>"u")g1.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v1=`var ortWasmThreaded=${f1.toString()};`;g1.mainScriptUrlOrBlob=new Blob([v1],{type:"text/javascript"})}f1(g1).then(v1=>{Un=!1,Gi=!0,Hi=v1,d1()},v1=>{Un=!1,Ga=!0,h1(v1)})})),await Promise.race(c1),l1)throw new Error(`WebAssembly backend initializing failed due to timeout: ${_g}ms`)},Fe=()=>{if(Gi&&Hi)return Hi;throw new Error("WebAssembly is not initialized yet.")}}),qe,Jr,We,Wn=j(()=>{Or(),qe=(e1,_g)=>{let t1=Fe(),r1=t1.lengthBytesUTF8(e1)+1,n1=t1._malloc(r1);return t1.stringToUTF8(e1,n1,r1),_g.push(n1),n1},Jr=(e1,_g,t1,r1)=>{if(typeof e1=="object"&&e1!==null){if(t1.has(e1))throw new Error("Circular reference in options");t1.add(e1)}Object.entries(e1).forEach(([n1,i1])=>{let o1=_g?_g+n1:n1;if(typeof i1=="object")Jr(i1,o1+".",t1,r1);else if(typeof i1=="string"||typeof i1=="number")r1(o1,i1.toString());else if(typeof i1=="boolean")r1(o1,i1?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof i1}`)})},We=e1=>{let _g=Fe(),t1=_g.stackSave();try{let r1=_g.stackAlloc(8);_g._OrtGetLastError(r1,r1+4);let n1=_g.HEAP32[r1/4],i1=_g.HEAPU32[r1/4+1],o1=i1?_g.UTF8ToString(i1):"";throw new Error(`${e1} ERROR_CODE: ${n1}, ERROR_MESSAGE: ${o1}`)}finally{_g.stackRestore(t1)}}}),qa,ja=j(()=>{Or(),Wn(),qa=e1=>{let _g=Fe(),t1=0,r1=[],n1=e1||{};try{if((e1==null?void 0:e1.logSeverityLevel)===void 0)n1.logSeverityLevel=2;else if(typeof e1.logSeverityLevel!="number"||!Number.isInteger(e1.logSeverityLevel)||e1.logSeverityLevel<0||e1.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e1.logSeverityLevel}`);if((e1==null?void 0:e1.logVerbosityLevel)===void 0)n1.logVerbosityLevel=0;else if(typeof e1.logVerbosityLevel!="number"||!Number.isInteger(e1.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e1.logVerbosityLevel}`);(e1==null?void 0:e1.terminate)===void 0&&(n1.terminate=!1);let i1=0;return(e1==null?void 0:e1.tag)!==void 0&&(i1=qe(e1.tag,r1)),t1=_g._OrtCreateRunOptions(n1.logSeverityLevel,n1.logVerbosityLevel,!!n1.terminate,i1),t1===0&&We("Can't create run options."),(e1==null?void 0:e1.extra)!==void 0&&Jr(e1.extra,"",new WeakSet,(o1,a1)=>{let u1=qe(o1,r1),s1=qe(a1,r1);_g._OrtAddRunConfigEntry(t1,u1,s1)!==0&&We(`Can't set a run config entry: ${o1} - ${a1}.`)}),[t1,r1]}catch(i1){throw t1!==0&&_g._OrtReleaseRunOptions(t1),r1.forEach(o1=>_g._free(o1)),i1}}}),wc,$c,_c,xc,Ka,Ya=j(()=>{Or(),Wn(),wc=e1=>{switch(e1){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e1}`)}},$c=e1=>{switch(e1){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e1}`)}},_c=e1=>{e1.extra||(e1.extra={}),e1.extra.session||(e1.extra.session={});let _g=e1.extra.session;_g.use_ort_model_bytes_directly||(_g.use_ort_model_bytes_directly="1"),e1.executionProviders&&e1.executionProviders.some(t1=>(typeof t1=="string"?t1:t1.name)==="webgpu")&&(e1.enableMemPattern=!1)},xc=(e1,_g,t1)=>{for(let r1 of _g){let n1=typeof r1=="string"?r1:r1.name;switch(n1){case"webnn":if(n1="WEBNN",typeof r1!="string"){let o1=r1;if(o1!=null&&o1.deviceType){let a1=qe("deviceType",t1),u1=qe(o1.deviceType,t1);Fe()._OrtAddSessionConfigEntry(e1,a1,u1)!==0&&We(`Can't set a session config entry: 'deviceType' - ${o1.deviceType}.`)}if(o1!=null&&o1.numThreads){let a1=o1.numThreads;(typeof a1!="number"||!Number.isInteger(a1)||a1<0)&&(a1=0);let u1=qe("numThreads",t1),s1=qe(a1.toString(),t1);Fe()._OrtAddSessionConfigEntry(e1,u1,s1)!==0&&We(`Can't set a session config entry: 'numThreads' - ${o1.numThreads}.`)}if(o1!=null&&o1.powerPreference){let a1=qe("powerPreference",t1),u1=qe(o1.powerPreference,t1);Fe()._OrtAddSessionConfigEntry(e1,a1,u1)!==0&&We(`Can't set a session config entry: 'powerPreference' - ${o1.powerPreference}.`)}}break;case"webgpu":if(n1="JS",typeof r1!="string"){let o1=r1;if(o1!=null&&o1.preferredLayout){if(o1.preferredLayout!=="NCHW"&&o1.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${o1.preferredLayout}`);let a1=qe("preferredLayout",t1),u1=qe(o1.preferredLayout,t1);Fe()._OrtAddSessionConfigEntry(e1,a1,u1)!==0&&We(`Can't set a session config entry: 'preferredLayout' - ${o1.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${n1}`)}let i1=qe(n1,t1);Fe()._OrtAppendExecutionProvider(e1,i1)!==0&&We(`Can't append execution provider: ${n1}.`)}},Ka=e1=>{let _g=Fe(),t1=0,r1=[],n1=e1||{};_c(n1);try{let i1=wc(n1.graphOptimizationLevel??"all"),o1=$c(n1.executionMode??"sequential"),a1=typeof n1.logId=="string"?qe(n1.logId,r1):0,u1=n1.logSeverityLevel??2;if(!Number.isInteger(u1)||u1<0||u1>4)throw new Error(`log serverity level is not valid: ${u1}`);let s1=n1.logVerbosityLevel??0;if(!Number.isInteger(s1)||s1<0||s1>4)throw new Error(`log verbosity level is not valid: ${s1}`);let l1=typeof n1.optimizedModelFilePath=="string"?qe(n1.optimizedModelFilePath,r1):0;if(t1=_g._OrtCreateSessionOptions(i1,!!n1.enableCpuMemArena,!!n1.enableMemPattern,o1,!!n1.enableProfiling,0,a1,u1,s1,l1),t1===0&&We("Can't create session options."),n1.executionProviders&&xc(t1,n1.executionProviders,r1),n1.enableGraphCapture!==void 0){if(typeof n1.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${n1.enableGraphCapture}`);let c1=qe("enableGraphCapture",r1),d1=qe(n1.enableGraphCapture.toString(),r1);_g._OrtAddSessionConfigEntry(t1,c1,d1)!==0&&We(`Can't set a session config entry: 'enableGraphCapture' - ${n1.enableGraphCapture}.`)}if(n1.freeDimensionOverrides)for(let[c1,d1]of Object.entries(n1.freeDimensionOverrides)){if(typeof c1!="string")throw new Error(`free dimension override name must be a string: ${c1}`);if(typeof d1!="number"||!Number.isInteger(d1)||d1<0)throw new Error(`free dimension override value must be a non-negative integer: ${d1}`);let h1=qe(c1,r1);_g._OrtAddFreeDimensionOverride(t1,h1,d1)!==0&&We(`Can't set a free dimension override: ${c1} - ${d1}.`)}return n1.extra!==void 0&&Jr(n1.extra,"",new WeakSet,(c1,d1)=>{let h1=qe(c1,r1),f1=qe(d1,r1);_g._OrtAddSessionConfigEntry(t1,h1,f1)!==0&&We(`Can't set a session config entry: ${c1} - ${d1}.`)}),[t1,r1]}catch(i1){throw t1!==0&&_g._OrtReleaseSessionOptions(t1),r1.forEach(o1=>_g._free(o1)),i1}}}),Li,Yt,cr,Nn,en,Vn,Fi,ye=j(()=>{Li=e1=>{switch(e1){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e1}`)}},Yt=e1=>{switch(e1){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e1}`)}},cr=e1=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e1],Nn=e1=>{switch(e1){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e1}`)}},en=e1=>{switch(e1){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e1}`)}},Vn=e1=>e1==="float32"||e1==="float16"||e1==="int32"||e1==="int64"||e1==="uint32"||e1==="uint8"||e1==="bool",Fi=e1=>{switch(e1){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e1}`)}}}),tn,qi=j(()=>{tn=async e1=>{if(typeof e1=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e1))}catch(_g){if(_g.code==="ERR_FS_FILE_TOO_LARGE"){let t1=(void 0)(e1),r1=[];for await(let n1 of t1)r1.push(n1);return new Uint8Array(Buffer.concat(r1))}throw _g}else{let _g=await fetch(e1);if(!_g.ok)throw new Error(`failed to load external data file: ${e1}`);let t1=_g.headers.get("Content-Length"),r1=t1?parseInt(t1,10):0;if(r1<1073741824)return new Uint8Array(await _g.arrayBuffer());{if(!_g.body)throw new Error(`failed to load external data file: ${e1}, no response body.`);let n1=_g.body.getReader(),i1;try{i1=new ArrayBuffer(r1)}catch(a1){if(a1 instanceof RangeError){let u1=Math.ceil(r1/65536);i1=new WebAssembly.Memory({initial:u1,maximum:u1}).buffer}else throw a1}let o1=0;for(;;){let{done:a1,value:u1}=await n1.read();if(a1)break;let s1=u1.byteLength;new Uint8Array(i1,o1,s1).set(u1),o1+=s1}return new Uint8Array(i1,0,r1)}}else return e1 instanceof Blob?new Uint8Array(await e1.arrayBuffer()):e1 instanceof Uint8Array?e1:new Uint8Array(e1)}}),Sc,Cc,Xa,Za,Qa,Ic,Ne,Xt=j(()=>{ye(),Sc=["V","I","W","E","F"],Cc=(e1,_g)=>{console.log(`[${Sc[e1]},${new Date().toISOString()}]${_g}`)},Qa=(e1,_g)=>{Xa=e1,Za=_g},Ic=(e1,_g)=>{let t1=en(e1),r1=en(Xa);t1>=r1&&Cc(t1,typeof _g=="function"?_g():_g)},Ne=(...e1)=>{Za&&Ic(...e1)}}),Ja,es=j(()=>{ye(),Ja=(e1,_g)=>new(Nn(_g))(e1)}),Hn=j(()=>{}),ts,ji,Ki,Tc,Ac,rs,Xi,Yi,is,os=j(()=>{Xt(),Hn(),ts=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),ji=[],Ki=e1=>Math.ceil(e1/16)*16,Tc=e1=>{for(let _g=0;_g<ji.length;_g++){let t1=ji[_g];if(e1<=t1)return t1}return Math.ceil(e1/16)*16},Ac=1,rs=()=>Ac++,Xi=async(e1,_g,t1,r1)=>{let n1=Ki(t1),i1=e1.device.createBuffer({size:n1,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let o1=e1.getCommandEncoder();e1.endComputePass(),o1.copyBufferToBuffer(_g,0,i1,0,n1),e1.flush(),await i1.mapAsync(GPUMapMode.READ);let a1=i1.getMappedRange();if(r1){let u1=r1();return u1.set(new Uint8Array(a1,0,t1)),u1}else return new Uint8Array(a1.slice(0,t1))}finally{i1.destroy()}},Yi=class{constructor(e1){this.backend=e1,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[_g]of ts)ji.push(_g),this.freeBuffers.set(_g,[]),this.freeUniformBuffers.set(_g,[])}upload(e1,_g){let t1=_g.buffer,r1=_g.byteOffset,n1=_g.byteLength,i1=Ki(n1),o1=this.storageCache.get(e1);if(!o1)throw new Error("gpu data for uploading does not exist");if(o1.originalSize!==n1)throw new Error(`inconsistent data size. gpu data size=${o1.originalSize}, data size=${n1}`);let a1=this.backend.device.createBuffer({mappedAtCreation:!0,size:i1,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),u1=a1.getMappedRange();new Uint8Array(u1).set(new Uint8Array(t1,r1,n1)),a1.unmap();let s1=this.backend.getCommandEncoder();this.backend.endComputePass(),s1.copyBufferToBuffer(a1,0,o1.gpuData.buffer,0,i1),Ne("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e1})`),this.buffersForUploadingPending.push(a1)}memcpy(e1,_g){let t1=this.storageCache.get(e1);if(!t1)throw new Error("source gpu data for memcpy does not exist");let r1=this.storageCache.get(_g);if(!r1)throw new Error("destination gpu data for memcpy does not exist");if(t1.originalSize!==r1.originalSize)throw new Error("inconsistent source and destination gpu data size");let n1=Ki(t1.originalSize),i1=this.backend.getCommandEncoder();this.backend.endComputePass(),i1.copyBufferToBuffer(t1.gpuData.buffer,0,r1.gpuData.buffer,0,n1)}registerExternalBuffer(e1,_g,t1){let r1;if(t1){if(r1=this.externalBuffers.get(t1),r1===void 0)throw new Error("previous buffer is not registered");if(e1===t1)return Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${_g}) => id=${r1}, buffer is the same, skip.`),r1;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`);this.externalBuffers.delete(t1)}else r1=rs();return this.storageCache.set(r1,{gpuData:{id:r1,type:0,buffer:e1},originalSize:_g}),this.externalBuffers.set(e1,r1),Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${_g}) => id=${r1}, registered.`),r1}unregisterExternalBuffer(e1){let _g=this.externalBuffers.get(e1);_g!==void 0&&(this.storageCache.delete(_g),this.externalBuffers.delete(e1),Ne("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${_g}`))}create(e1,_g=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let t1=Tc(e1),r1,n1=(_g&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,i1=(_g&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(n1||i1){let a1=(n1?this.freeBuffers:this.freeUniformBuffers).get(t1);a1?a1.length>0?r1=a1.pop():r1=this.backend.device.createBuffer({size:t1,usage:_g}):r1=this.backend.device.createBuffer({size:t1,usage:_g})}else r1=this.backend.device.createBuffer({size:t1,usage:_g});let o1={id:rs(),type:0,buffer:r1};return this.storageCache.set(o1.id,{gpuData:o1,originalSize:e1}),Ne("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e1}) => id=${o1.id}`),o1}get(e1){var _g;return(_g=this.storageCache.get(e1))==null?void 0:_g.gpuData}release(e1){let _g=this.storageCache.get(e1);if(!_g)throw new Error("releasing data does not exist");return Ne("verbose",()=>`[WebGPU] GpuDataManager.release(id=${e1}), gpuDataId=${_g.gpuData.id}`),this.storageCache.delete(e1),this.buffersPending.push(_g.gpuData.buffer),_g.originalSize}async download(e1,_g){let t1=this.storageCache.get(e1);if(!t1)throw new Error("data does not exist");await Xi(this.backend,t1.gpuData.buffer,t1.originalSize,_g)}refreshPendingBuffers(){for(let e1 of this.buffersForUploadingPending)e1.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e1 of this.buffersPending){let _g=ts.get(e1.size);if((e1.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let t1=this.freeBuffers.get(e1.size)||[];_g===void 0||t1.length>=_g?e1.destroy():t1.push(e1)}else if((e1.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let t1=this.freeUniformBuffers.get(e1.size)||[];_g===void 0||t1.length>=_g?e1.destroy():t1.push(e1)}else e1.destroy()}this.buffersPending=[]}else{let e1=this.capturedPendingBuffers.get(this.backend.currentSessionId);e1||(e1=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e1));for(let _g of this.buffersPending)e1.push(_g);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e1=>{e1.forEach(_g=>{_g.destroy()})}),this.freeUniformBuffers.forEach(e1=>{e1.forEach(_g=>{_g.destroy()})}),this.storageCache.forEach(e1=>{e1.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e1=>{e1.forEach(_g=>{_g.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(e1){let _g=this.capturedPendingBuffers.get(e1);_g&&(_g.forEach(t1=>{t1.destroy()}),this.capturedPendingBuffers.delete(e1))}},is=(...e1)=>new Yi(...e1)}),Zi,we,Ze=j(()=>{Zi=class{constructor(e1){Object.assign(this,e1)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e1=>`${this[e1]}`).join(";")),this.key}},we=e1=>new Zi(e1)}),Qi,zt,M$1,pr,Gn,Ln,Fn,xe=j(()=>{Qi=class{static calcMatMulShape(e1,_g){return e1[1]!==_g[0]?void 0:[e1[0],_g[1]]}},zt=class{static calcShape(e1,_g,t1=!1){let r1=e1.length,n1=_g.length;if(r1===0)return _g;if(n1===0)return e1;let i1=Math.max(e1.length,_g.length),o1=new Array(i1);if(t1){if(r1<2||n1<2)return;let a1=Qi.calcMatMulShape([e1[r1-2],e1[r1-1]],[_g[n1-2],_g[n1-1]]);if(a1===void 0)return;[o1[i1-2],o1[i1-1]]=a1}for(let a1=t1?3:1;a1<=i1;a1++){let u1=r1-a1<0?1:e1[r1-a1],s1=n1-a1<0?1:_g[n1-a1];if(u1!==s1&&u1>1&&s1>1)return;let l1=Math.max(u1,s1);if(u1&&s1)o1[i1-a1]=Math.max(u1,s1);else{if(l1>1)return;o1[i1-a1]=0}}return o1}static isValidBroadcast(e1,_g){let t1=e1.length,r1=_g.length;if(t1>r1)return!1;for(let n1=1;n1<=t1;n1++)if(e1[t1-n1]!==1&&e1[t1-n1]!==_g[r1-n1])return!1;return!0}},M$1=class K2{static size(_g){return K2.getSizeFromDimensionRange(_g,0,_g.length)}static convertShape(_g,t1=4){let r1=_g.length;if(r1===0)return[];let n1=new Array(r1),i1=r1-1;for(;i1>=0;){if(_g[i1]%t1===0){n1[i1]=_g[i1]/t1;break}if(t1%_g[i1]!==0)throw new Error("cannot convert shape");n1[i1]=1,t1/=_g[i1],i1--}for(i1--;i1>=0;i1--)n1[i1]=_g[i1];return n1}static sizeFromDimension(_g,t1){if(t1<0||t1>_g.length)throw new Error(`invalid dimension of ${t1} for sizeFromDimension as Tensor has ${_g.length} dimensions.`);return K2.getSizeFromDimensionRange(_g,t1,_g.length)}static sizeToDimension(_g,t1){if(t1<0||t1>_g.length)throw new Error(`invalid dimension of ${t1} for sizeToDimension as Tensor has ${_g.length} dimensions.`);return K2.getSizeFromDimensionRange(_g,0,t1)}static getSizeFromDimensionRange(_g,t1,r1){let n1=1;for(let i1=t1;i1<r1;i1++){if(_g[i1]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");n1*=_g[i1]}return n1}static computeStrides(_g){let t1=_g.length;if(t1===0)return[];if(t1===1)return[1];let r1=new Array(t1);r1[t1-1]=1,r1[t1-2]=_g[t1-1];for(let n1=t1-3;n1>=0;--n1)r1[n1]=r1[n1+1]*_g[n1+1];return r1}static normalizeAxis(_g,t1){if(_g<-t1&&_g>=t1)throw new Error("unsupported axis for this operation.");return _g<0?_g+t1:_g}static normalizeAxes(_g,t1){return _g.map(r1=>this.normalizeAxis(r1,t1??_g.length))}static sortBasedOnPerm(_g,t1){return t1?t1.map(r1=>_g[r1]):_g.slice().reverse()}static padShape(_g,t1){let r1=_g.length;return _g.map((n1,i1)=>n1+t1[i1]+t1[i1+r1])}static areEqual(_g,t1){return _g.length!==t1.length?!1:_g.every((r1,n1)=>r1===t1[n1])}},pr=class qw{static adjustPoolAttributes(_g,t1,r1,n1,i1,o1){if(!_g&&r1.length!==t1.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(_g)for(let a1=0;a1<t1.length-2;a1++)a1>=r1.length?r1.push(t1[a1+2]):r1[a1]=t1[a1+2];for(let a1=0;a1<r1.length;a1++)if(a1<n1.length){if(n1[a1]<0)throw new Error("strides should be greater than or equal to 1")}else n1.push(1);for(let a1=0;a1<r1.length;a1++)if(a1<i1.length){if(i1[a1]<0)throw new Error("dilations should be greater than or equal to 1")}else i1.push(1);for(let a1=0;a1<r1.length*2;a1++)if(a1<o1.length){if(o1[a1]<0)throw new Error("pad should be greater than or equal to 1")}else o1.push(0);for(let a1=0;a1<r1.length;a1++){if(r1[a1]<=0)throw new Error("kernel shapes need to be greater than 0");if(o1[a1]>=r1[a1]||o1[a1+r1.length]>=r1[a1])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(_g,t1,r1,n1,i1,o1,a1){if(a1){if(i1.length!==2*(_g.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(t1.length!==_g.length-2)throw new Error("length of strides should be the length of data dimensions");if(n1.length!==_g.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let u1=0;u1<_g.length-2;u1++)qw.adjustPadAndReturnShape(_g[u1+(o1?1:2)],t1[u1],r1[u1],n1[u1],i1,u1,u1+_g.length-2,a1)}}static computePoolOutputShape(_g,t1,r1,n1,i1,o1,a1){if(t1.length<=0)throw new Error("input shape must be of size greater than 0");let u1=[t1[0],t1[1]];return qw.computeShapeHelper(_g,t1,u1,r1,n1,i1,o1,a1),u1}static computeConvOutputShape(_g,t1,r1,n1,i1,o1,a1){if(_g.length<=0||t1.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let u1=[_g[0],t1[0]];return qw.computeShapeHelper(!1,_g,u1,r1,n1,i1,o1,a1),u1}static computeShapeHelper(_g,t1,r1,n1,i1,o1,a1,u1){if(_g)for(let s1=0;s1<t1.length-2;s1++)r1.push(1);else for(let s1=0;s1<t1.length-2;s1++)r1.push(qw.adjustPadAndReturnShape(t1[s1+2],n1[s1],i1[s1],o1[s1],a1,s1,s1+t1.length-2,u1))}static adjustPadAndReturnShape(_g,t1,r1,n1,i1,o1,a1,u1){let s1=r1*(n1-1)+1;if(u1&&u1!=="NOTSET")switch(u1){case"VALID":return i1[o1]=0,i1[a1]=0,Math.floor((_g-s1)/t1+1);case"SAME_LOWER":case"SAME_UPPER":if(r1!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let l1=((_g+t1-1)/t1-1)*t1+n1-_g;return i1[o1]=Math.floor(u1==="SAME_LOWER"?(l1+1)/2:l1/2),i1[a1]=l1-i1[o1],Math.floor((_g+l1-n1)/t1+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((_g+i1[o1]+i1[a1]-s1)/t1+1)}},Gn=class{static getShapeOfGemmResult(e1,_g,t1,r1,n1){if(e1.length!==2||t1.length!==2)throw new Error("shape need to be of size 2");let i1,o1,a1;_g?(i1=e1[1],o1=e1[0]):(i1=e1[0],o1=e1[1]);let u1=-1;if(r1?(a1=t1[0],u1=1):(a1=t1[1],u1=0),t1[u1]!==o1)throw new Error("dimension mismatch");if(i1<=0||a1<=0||o1<=0)throw new Error("invalid shape specified");if(n1&&!zt.isValidBroadcast(n1,[i1,a1]))throw new Error("gemm: invalid bias shape for broadcast");return[i1,a1,o1]}},Ln=-34028234663852886e22,Fn=34028234663852886e22}),mr,eo,De,rt,X,Ue,At,fr,Et,fe,to,U$1,K,qn,Ji,as,Pr,_e=j(()=>{ye(),xe(),mr=64,eo=(e1,_g)=>{if(_g===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e1){case 10:return _g>1?`vec${_g}<f16>`:"f16";case 1:return _g>1?`vec${_g}<f32>`:"f32";case 6:return _g>1?`vec${_g}<i32>`:"i32";case 12:return _g>1?`vec${_g}<u32>`:"u32";case 7:if(_g>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(_g>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(_g!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e1}`)}},De=(e1,_g=1)=>{let t1=eo(e1,_g);return typeof t1=="string"?t1:t1[0]},rt=(e1,_g=1)=>{let t1=eo(e1,_g);return typeof t1=="string"?t1:t1[1]},X=(...e1)=>{let _g=[];return e1.forEach(t1=>{t1.length!==0&&_g.push({type:12,data:t1},{type:12,data:M$1.computeStrides(t1)})}),_g},Ue=e1=>e1%4===0?4:e1%2===0?2:1,At=(e1="f32",_g,t1="0")=>!_g||_g===1?`${e1}(${t1})`:`vec${_g}<${e1}>(${t1})`,fr=(e1,_g,t1)=>e1==="f32"?t1:_g===1?`f32(${t1})`:`vec${_g}<f32>(${t1})`,Et=(e1,_g)=>_g===4?`(${e1}.x + ${e1}.y + ${e1}.z + ${e1}.w)`:_g===2?`(${e1}.x + ${e1}.y)`:_g===3?`(${e1}.x + ${e1}.y + ${e1}.z)`:e1,fe=(e1,_g,t1,r1)=>e1.startsWith("uniforms.")&&t1>4?typeof _g=="string"?r1==="f16"?`${e1}[(${_g}) / 8][(${_g}) % 8 / 4][(${_g}) % 8 % 4]`:`${e1}[(${_g}) / 4][(${_g}) % 4]`:r1==="f16"?`${e1}[${Math.floor(_g/8)}][${Math.floor(_g%8/4)}][${_g%8%4}]`:`${e1}[${Math.floor(_g/4)}][${_g%4}]`:t1>1?`${e1}[${_g}]`:e1,to=(e1,_g,t1,r1,n1)=>{let i1=typeof t1=="number",o1=i1?t1:t1.length,a1=[...new Array(o1).keys()],u1=o1<2?"u32":o1<=4?`vec${o1}<u32>`:`array<u32, ${o1}>`,s1=eo(_g,n1),l1=typeof s1=="string"?s1:s1[1],c1=typeof s1=="string"?s1:s1[0],d1={indices:u1,value:l1,storage:c1,tensor:_g},h1=G1=>typeof G1=="string"?G1:`${G1}u`,f1={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},g1=i1?"uniforms.":"",v1=`${g1}${e1}_shape`,$1=`${g1}${e1}_strides`,y1="";for(let G1=0;G1<o1-1;G1++)y1+=`
    let dim${G1} = current / ${fe($1,G1,o1)};
    let rest${G1} = current % ${fe($1,G1,o1)};
    indices[${G1}] = dim${G1};
    current = rest${G1};
    `;y1+=`indices[${o1-1}] = current;`;let _1=o1<2?"":`
  fn o2i_${e1}(offset: u32) -> ${d1.indices} {
    var indices: ${d1.indices};
    var current = offset;
    ${y1}
    return indices;
  }`,E1=G1=>(f1.offsetToIndices=!0,o1<2?G1:`o2i_${e1}(${G1})`),T1=[];if(o1>=2)for(let G1=o1-1;G1>=0;G1--)T1.push(`${fe($1,G1,o1)} * (indices[${G1}])`);let P1=o1<2?"":`
  fn i2o_${e1}(indices: ${d1.indices}) -> u32 {
    return ${T1.join("+")};
  }`,k1=G1=>(f1.indicesToOffset=!0,o1<2?G1:`i2o_${e1}(${G1})`),N1=(...G1)=>o1===0?"0u":`${d1.indices}(${G1.map(h1).join(",")})`,W1=(G1,Y1)=>o1<2?`${G1}`:`${fe(G1,Y1,o1)}`,H1=(G1,Y1,yy)=>o1<2?`${G1}=${yy};`:`${fe(G1,Y1,o1)}=${yy};`,ty={},ey=(G1,Y1)=>{f1.broadcastedIndicesToOffset=!0;let yy=`${Y1.name}broadcastedIndicesTo${e1}Offset`;if(yy in ty)return`${yy}(${G1})`;let Oy=[];for(let Ey=o1-1;Ey>=0;Ey--){let jy=Y1.indicesGet("outputIndices",Ey+Y1.rank-o1);Oy.push(`${W1($1,Ey)} * (${jy} % ${W1(v1,Ey)})`)}return ty[yy]=`fn ${yy}(outputIndices: ${Y1.type.indices}) -> u32 {
             return ${Oy.length>0?Oy.join("+"):"0u"};
           }`,`${yy}(${G1})`},ly=(G1,Y1)=>(()=>{if(d1.storage===d1.value)return`${e1}[${G1}]=${Y1};`;if(d1.storage==="vec2<u32>"&&d1.value==="i32")return`${e1}[${G1}]=vec2<u32>(u32(${Y1}), select(0u, 0xFFFFFFFFu, ${Y1} < 0));`;if(d1.storage==="vec2<u32>"&&d1.value==="u32")return`${e1}[${G1}]=vec2<u32>(u32(${Y1}), 0u);`;if(d1.storage==="u32"&&d1.value==="vec4<bool>")return`${e1}[${G1}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${Y1}));`;throw new Error(`not supported combination of storage type ${d1.storage} and value type ${d1.value} yet`)})(),oy=G1=>(()=>{if(d1.storage===d1.value)return`${e1}[${G1}]`;if(d1.storage==="vec2<u32>"&&d1.value==="i32")return`i32(${e1}[${G1}].x)`;if(d1.storage==="vec2<u32>"&&d1.value==="u32")return`u32(${e1}[${G1}].x)`;if(d1.storage==="u32"&&d1.value==="vec4<bool>")return`vec4<bool>(bool(${e1}[${G1}] & 0xFFu), bool(${e1}[${G1}] & 0xFF00u), bool(${e1}[${G1}] & 0xFF0000u), bool(${e1}[${G1}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${d1.storage} and value type ${d1.value} yet`)})(),Q1=o1<2?"":`
  fn get_${e1}ByIndices(indices: ${d1.indices}) -> ${l1} {
    return ${oy(`i2o_${e1}(indices)`)};
  }`,U1=o1<2?"":(()=>{let G1=a1.map(yy=>`d${yy}: u32`).join(", "),Y1=a1.map(yy=>`d${yy}`).join(", ");return`
  fn get_${e1}(${G1}) -> ${l1} {
    return get_${e1}ByIndices(${N1(Y1)});
  }`})(),V1=(...G1)=>{if(G1.length!==o1)throw new Error(`indices length must be ${o1}`);let Y1=G1.map(h1).join(",");return o1===0?oy("0u"):o1===1?oy(Y1[0]):(f1.get=!0,f1.getByIndices=!0,f1.indicesToOffset=!0,`get_${e1}(${Y1})`)},K1=G1=>o1<2?oy(G1):(f1.getByIndices=!0,f1.indicesToOffset=!0,`get_${e1}ByIndices(${G1})`),J1=o1<2?"":`
  fn set_${e1}ByIndices(indices: ${d1.indices}, value: ${l1}) {
    ${ly(`i2o_${e1}(indices)`,"value")}
  }`,hy=o1<2?"":(()=>{let G1=a1.map(yy=>`d${yy}: u32`).join(", "),Y1=a1.map(yy=>`d${yy}`).join(", ");return`
  fn set_${e1}(${G1}, value: ${l1}) {
    set_${e1}ByIndices(${N1(Y1)}, value);
  }`})();return{impl:()=>{let G1=[],Y1=!1;return f1.offsetToIndices&&(G1.push(_1),Y1=!0),f1.indicesToOffset&&(G1.push(P1),Y1=!0),f1.broadcastedIndicesToOffset&&(Object.values(ty).forEach(yy=>G1.push(yy)),Y1=!0),f1.set&&(G1.push(hy),Y1=!0),f1.setByIndices&&(G1.push(J1),Y1=!0),f1.get&&(G1.push(U1),Y1=!0),f1.getByIndices&&(G1.push(Q1),Y1=!0),!i1&&Y1&&G1.unshift(`const ${v1} = ${d1.indices}(${t1.join(",")});`,`const ${$1} = ${d1.indices}(${M$1.computeStrides(t1).join(",")});`),G1.join(`
`)},type:d1,offsetToIndices:E1,indicesToOffset:k1,broadcastedIndicesToOffset:ey,indices:N1,indicesGet:W1,indicesSet:H1,set:(...G1)=>{if(G1.length!==o1+1)throw new Error(`indices length must be ${o1}`);let Y1=G1[o1];if(typeof Y1!="string")throw new Error("value must be string");let yy=G1.slice(0,o1).map(h1).join(",");return o1===0?ly("0u",Y1):o1===1?ly(yy[0],Y1):(f1.set=!0,f1.setByIndices=!0,f1.indicesToOffset=!0,`set_${e1}(${yy}, ${Y1})`)},setByOffset:ly,setByIndices:(G1,Y1)=>o1<2?ly(G1,Y1):(f1.setByIndices=!0,f1.indicesToOffset=!0,`set_${e1}ByIndices(${G1}, ${Y1});`),get:V1,getByOffset:oy,getByIndices:K1,usage:r1,name:e1,strides:$1,shape:v1,rank:o1}},U$1=(e1,_g,t1,r1=1)=>to(e1,_g,t1,"input",r1),K=(e1,_g,t1,r1=1)=>to(e1,_g,t1,"output",r1),qn=(e1,_g,t1,r1=1)=>to(e1,_g,t1,"internal",r1),Ji=class{constructor(e1,_g){this.normalizedDispatchGroup=e1,this.limits=_g,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e1){return`if (global_idx >= ${typeof e1=="number"?`${e1}u`:e1}) { return; }`}mainStart(e1=mr){let _g=typeof e1=="number"?e1:e1[0],t1=typeof e1=="number"?1:e1[1],r1=typeof e1=="number"?1:e1[2];if(_g>this.limits.maxComputeWorkgroupSizeX||t1>this.limits.maxComputeWorkgroupSizeY||r1>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${_g}, ${t1}, ${r1}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(_g*t1*r1>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${_g}, ${t1}, ${r1}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let n1=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,i1=n1?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,o1=n1?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${_g*t1*r1}u + local_idx;`;return`@compute @workgroup_size(${_g}, ${t1}, ${r1})
  fn main(${i1}) {
    ${o1}
  `}appendVariableUniforms(e1){e1.rank!==0&&(e1.shape.startsWith("uniforms.")&&this.uniforms.push({name:e1.shape.replace("uniforms.",""),type:"u32",length:e1.rank}),e1.strides.startsWith("uniforms.")&&this.uniforms.push({name:e1.strides.replace("uniforms.",""),type:"u32",length:e1.rank}))}declareVariable(e1,_g){if(e1.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e1),this.appendVariableUniforms(e1);let t1=e1.usage==="input"?"read":"read_write",r1=e1.type.storage;return`@group(0) @binding(${_g}) var<storage, ${t1}> ${e1.name}: array<${r1}>;`}declareVariables(...e1){return e1.map(_g=>this.declareVariable(_g,this.variableIndex++)).join(`
`)}registerInternalVariable(e1){if(e1.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e1),this.appendVariableUniforms(e1)}registerInternalVariables(...e1){return e1.forEach(_g=>this.registerInternalVariable(_g)),this}registerUniform(e1,_g,t1=1){return this.uniforms.push({name:e1,type:_g,length:t1}),this}registerUniforms(e1){return this.uniforms=this.uniforms.concat(e1),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e1=[];for(let{name:_g,type:t1,length:r1}of this.uniforms)if(r1&&r1>4)t1==="f16"?e1.push(`@align(16) ${_g}:array<mat2x4<${t1}>, ${Math.ceil(r1/8)}>`):e1.push(`${_g}:array<vec4<${t1}>, ${Math.ceil(r1/4)}>`);else{let n1=r1==null||r1===1?t1:`vec${r1}<${t1}>`;e1.push(`${_g}:${n1}`)}return`
      struct Uniforms { ${e1.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e1=>e1.impl()).join(`
`)+this.internalVariables.map(e1=>e1.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e1=_g=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(_g)];return this.uniforms.map(_g=>[e1(_g.type),_g.length??1])}},as=(e1,_g)=>new Ji(e1,_g),Pr=(e1,_g)=>{let t1=e1.length,r1=[];for(let n1=0;n1<t1;n1++){let i1=t1-1-n1,o1=e1[i1]||1;(_g[_g.length-1-n1]||1)>1&&o1===1&&r1.unshift(i1)}return r1}}),Ec,ss,kc,Oc,xt,us,ls,Rr=j(()=>{ye(),xe(),Ze(),_e(),Ec=e1=>{if(!e1||e1.length!==1)throw new Error("Transpose requires 1 input.")},ss=(e1,_g)=>_g&&_g.length!==e1?[...new Array(e1).keys()].reverse():_g,kc=(e1,_g)=>M$1.sortBasedOnPerm(e1,ss(e1.length,_g)),Oc=(e1,_g,t1,r1)=>{let n1=[];n1.push(`fn perm(i: ${r1.type.indices}) -> ${t1.type.indices} {
    var a: ${t1.type.indices};`);for(let i1=0;i1<_g;++i1)n1.push(t1.indicesSet("a",e1[i1],`i[${i1}]`));return n1.push("return a;}"),n1.join(`
`)},xt=(e1,_g)=>{let t1=e1.dataType,r1=e1.dims.length,n1=ss(r1,_g),i1=kc(e1.dims,n1),o1=K("output",t1,i1.length),a1=U$1("a",t1,r1),u1=s1=>`
  ${s1.registerUniform("output_size","u32").declareVariables(a1,o1)}

  ${Oc(n1,r1,a1,o1)}

  ${s1.mainStart()}
    ${s1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${o1.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${o1.setByOffset("global_idx",a1.getByIndices("aIndices"))}
  }`;return{name:"Transpose",shaderCache:{hint:`${_g}`,inputDependencies:["rank"]},getRunData:s1=>{let l1=M$1.size(i1);return{outputs:[{dims:i1,dataType:s1[0].dataType}],dispatchGroup:{x:Math.ceil(l1/64)},programUniforms:[{type:12,data:l1},...X(s1[0].dims,i1)]}},getShaderSource:u1}},us=(e1,_g)=>{Ec(e1.inputs),e1.compute(xt(e1.inputs[0],_g.perm))},ls=e1=>we({perm:e1.perm})}),Pc,Rc,zc,Bc,Dc,Mc,Uc,Wc,Nc,Vc,Bt,ds,cs,ps,ms,fs,hs,gs,ys,bs,vs,ws=j(()=>{ye(),xe(),_e(),jn(),Rr(),Pc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Rc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},zc={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Bc={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Dc=(e1,_g)=>{let t1=[];for(let r1=_g-e1;r1<_g;++r1)t1.push(r1);return t1},Mc=(e1,_g)=>{let t1=[],r1=e1.length;for(let i1=0;i1<r1;i1++)_g.indexOf(i1)===-1&&t1.push(e1[i1]);let n1=_g.map(i1=>e1[i1]);return[t1,n1]},Uc=(e1,_g)=>{let t1=e1.length+_g.length,r1=[],n1=0;for(let i1=0;i1<t1;i1++)_g.indexOf(i1)===-1?r1.push(e1[n1++]):r1.push(1);return r1},Wc=(e1,_g)=>{for(let t1=0;t1<e1.length;++t1)if(e1[e1.length-t1-1]!==_g-1-t1)return!1;return!0},Nc=(e1,_g)=>{let t1=[];if(!Wc(e1,_g)){for(let r1=0;r1<_g;++r1)e1.indexOf(r1)===-1&&t1.push(r1);e1.forEach(r1=>t1.push(r1))}return t1},Vc=(e1,_g,t1,r1,n1,i1,o1)=>{let a1=t1[0].dims,u1=M$1.size(i1),s1=M$1.size(o1),l1=U$1("_A",t1[0].dataType,a1),c1=K("output",n1,i1),d1=32,h1=`
          var<workgroup> aBestValues : array<f32, ${d1}>;
       `;return{name:e1,shaderCache:_g,getShaderSource:f1=>`
        ${f1.registerUniform("reduceSize","u32").declareVariables(l1,c1)}
        ${h1}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${f1.mainStart(d1)}

          let outputIndex = global_idx / ${d1};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${zc[r1]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${d1}) {
           let candidate = f32(${l1.getByOffset("offset + k")});
           bestValue = ${Pc[r1]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${d1}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Rc[r1]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${c1.setByOffset("outputIndex",`${r1==="mean"?`${c1.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${c1.type.storage}(${Bc[r1]})`}`)};
         }
        }`,getRunData:()=>({outputs:[{dims:i1,dataType:n1}],dispatchGroup:{x:u1},programUniforms:[{type:12,data:s1}]})}},Bt=(e1,_g,t1,r1)=>{let n1=e1.inputs.length===1?t1:ro(e1.inputs,t1),i1=n1.axes;i1.length===0&&!n1.noopWithEmptyAxes&&(i1=e1.inputs[0].dims.map((h1,f1)=>f1));let o1=M$1.normalizeAxes(i1,e1.inputs[0].dims.length),a1=o1,u1=e1.inputs[0],s1=Nc(a1,e1.inputs[0].dims.length);s1.length>0&&(u1=e1.compute(xt(e1.inputs[0],s1),{inputs:[0],outputs:[-1]})[0],a1=Dc(a1.length,u1.dims.length));let[l1,c1]=Mc(u1.dims,a1),d1=l1;n1.keepDims&&(d1=Uc(l1,o1)),e1.compute(Vc(_g,{hint:n1.cacheKey,inputDependencies:["type"]},[u1],r1,e1.inputs[0].dataType,d1,c1),{inputs:[u1]})},ds=(e1,_g)=>{Bt(e1,"ReduceMeanShared",_g,"mean")},cs=(e1,_g)=>{Bt(e1,"ReduceL1Shared",_g,"l1")},ps=(e1,_g)=>{Bt(e1,"ReduceL2Shared",_g,"l2")},ms=(e1,_g)=>{Bt(e1,"ReduceLogSumExpShared",_g,"logSumExp")},fs=(e1,_g)=>{Bt(e1,"ReduceMaxShared",_g,"max")},hs=(e1,_g)=>{Bt(e1,"ReduceMinShared",_g,"min")},gs=(e1,_g)=>{Bt(e1,"ReduceProdShared",_g,"prod")},ys=(e1,_g)=>{Bt(e1,"ReduceSumShared",_g,"sum")},bs=(e1,_g)=>{Bt(e1,"ReduceSumSquareShared",_g,"sumSquare")},vs=(e1,_g)=>{Bt(e1,"ReduceLogSumShared",_g,"logSum")}}),Dt,Hc,Kn,ro,Mt,Gc,Lc,Fc,qc,jc,Kc,Yc,Xc,Zc,Qc,Ut,$s,_s,xs,Ss,Cs,Is,Ts,As,Es,ks,jn=j(()=>{ye(),xe(),Ze(),_e(),ws(),Dt=e1=>{if(!e1||e1.length===0||e1.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e1.length===2&&e1[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Hc=e1=>["","",`var value = ${e1.getByIndices("input_indices")};`,""],Kn=(e1,_g,t1,r1,n1,i1,o1=!1,a1=!1)=>{let u1=[],s1=t1[0].dims,l1=s1.length,c1=M$1.normalizeAxes(n1,l1),d1=!a1&&c1.length===0;s1.forEach((g1,v1)=>{d1||c1.indexOf(v1)>=0?o1&&u1.push(1):u1.push(g1)});let h1=u1.length,f1=M$1.size(u1);return{name:e1,shaderCache:_g,getShaderSource:g1=>{let v1=[],$1=U$1("_A",t1[0].dataType,l1),y1=K("output",i1,h1),_1=r1($1,y1,c1),E1=_1[2];for(let T1=0,P1=0;T1<l1;T1++)d1||c1.indexOf(T1)>=0?(o1&&P1++,E1=`for(var j${T1}: u32 = 0; j${T1} < ${s1[T1]}; j${T1}++) {
                  ${_1[2].includes("last_index")?`let last_index = j${T1};`:""}
                  ${$1.indicesSet("input_indices",T1,`j${T1}`)}
                  ${E1}
                }`):(v1.push(`${$1.indicesSet("input_indices",T1,y1.indicesGet("output_indices",P1))};`),P1++);return`

        ${g1.registerUniform("output_size","u32").declareVariables($1,y1)}

        ${g1.mainStart()}
          ${g1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${$1.type.indices};
          let output_indices = ${y1.offsetToIndices("global_idx")};

          ${v1.join(`
`)}
          ${_1[0]}       // init ops for reduce max/min
          ${_1[1]}
          ${E1}
          ${_1[3]}
          ${_1.length===4?y1.setByOffset("global_idx","value"):_1.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:u1,dataType:i1}],dispatchGroup:{x:Math.ceil(f1/64)},programUniforms:[{type:12,data:f1},...X(s1,u1)]})}},ro=(e1,_g)=>{let t1=[];return e1[1].dims[0]>0&&e1[1].getBigInt64Array().forEach(r1=>t1.push(Number(r1))),we({axes:t1,keepDims:_g.keepDims,noopWithEmptyAxes:_g.noopWithEmptyAxes})},Mt=(e1,_g,t1,r1)=>{let n1=e1.inputs,i1=n1.length===1?t1:ro(n1,t1);e1.compute(Kn(_g,{hint:i1.cacheKey,inputDependencies:["rank"]},[n1[0]],i1.noopWithEmptyAxes&&i1.axes.length===0?Hc:r1,i1.axes,n1[0].dataType,i1.keepDims,i1.noopWithEmptyAxes),{inputs:[0]})},Gc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceLogSum",_g,(t1,r1)=>[`var value = ${r1.type.storage}(0);`,"",`value += ${t1.getByIndices("input_indices")};`,"value = log(value);"])},Lc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceL1",_g,(t1,r1)=>[`var value = ${r1.type.storage}(0);`,"",`value += abs(${t1.getByIndices("input_indices")});`,""])},Fc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceL2",_g,(t1,r1)=>[`var t = ${r1.type.value}(0); var value = ${r1.type.value}(0);`,"",`t = ${t1.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},qc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceLogSumExp",_g,(t1,r1)=>[`var value = ${r1.type.storage}(0);`,"",`value += exp(${t1.getByIndices("input_indices")});`,"value = log(value);"])},jc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceMax",_g,(t1,r1,n1)=>{let i1=[];for(let o1=0;o1<t1.rank;o1++)(n1.indexOf(o1)>=0||n1.length===0)&&i1.push(t1.indicesSet("input_indices",o1,0));return[`${i1.join(`
`)}`,`var value = ${t1.getByIndices("input_indices")};`,`value = max(value, ${t1.getByIndices("input_indices")});`,""]})},Kc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceMean",_g,(t1,r1,n1)=>{let i1=1;for(let o1=0;o1<t1.rank;o1++)(n1.indexOf(o1)>=0||n1.length===0)&&(i1*=e1.inputs[0].dims[o1]);return["var sum = f32(0);","",`sum += f32(${t1.getByIndices("input_indices")});`,`let value = ${r1.type.value}(sum / ${i1});`]})},Yc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceMin",_g,(t1,r1,n1)=>{let i1=[];for(let o1=0;o1<t1.rank;o1++)(n1.indexOf(o1)>=0||n1.length===0)&&i1.push(`input_indices[${o1}] = 0;`);return[`${i1.join(`
`)}`,`var value = ${t1.getByIndices("input_indices")};`,`value = min(value, ${t1.getByIndices("input_indices")});`,""]})},Xc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceProd",_g,(t1,r1)=>[`var value = ${r1.type.storage}(1);`,"",`value *= ${t1.getByIndices("input_indices")};`,""])},Zc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceSum",_g,(t1,r1)=>[`var value = ${r1.type.storage}(0);`,"",`value += ${t1.getByIndices("input_indices")};`,""])},Qc=(e1,_g)=>{Dt(e1.inputs),Mt(e1,"ReduceSumSquare",_g,(t1,r1)=>[`var t = ${r1.type.value}(0); var value = ${r1.type.value}(0);`,"",`t = ${t1.getByIndices("input_indices")}; value += t * t;`,""])},Ut=(e1,_g,t1)=>{if(_g.length===0)return t1;let r1=1,n1=1;for(let i1=0;i1<_g.length;i1++)_g.indexOf(i1)===-1?r1*=e1[i1]:n1*=e1[i1];return n1<32&&r1>1024},$s=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Kc(e1,_g):ds(e1,_g)},_s=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Lc(e1,_g):cs(e1,_g)},xs=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Fc(e1,_g):ps(e1,_g)},Ss=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?qc(e1,_g):ms(e1,_g)},Cs=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?jc(e1,_g):fs(e1,_g)},Is=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Yc(e1,_g):hs(e1,_g)},Ts=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Xc(e1,_g):gs(e1,_g)},As=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Zc(e1,_g):ys(e1,_g)},Es=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Qc(e1,_g):bs(e1,_g)},ks=(e1,_g)=>{Ut(e1.inputs[0].dims,_g.axes,_g.noopWithEmptyAxes)?Gc(e1,_g):vs(e1,_g)}}),Os,Ps,Rs,no,zs=j(()=>{ye(),Ze(),jn(),Os=e1=>{if(!e1||e1.length===0||e1.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e1[0].dataType!==1)throw new Error("Invalid input type.")},Ps=(e1,_g)=>{Os(e1.inputs);let t1=(r1,n1,i1)=>{let o1=[];for(let a1=0;a1<r1.rank;a1++)(i1.indexOf(a1)>=0||i1.length===0)&&o1.push(`input_indices[${a1}] = 0;`);return[`${o1.join(`
`)}`,`var value = ${r1.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${r1.getByIndices("input_indices")} ${_g.selectLastIndex>0?"<=":"<"} value) {
         value = ${r1.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",n1.setByOffset("global_idx","best_index")]};e1.compute(Kn("ArgMin",{hint:_g.cacheKey,inputDependencies:["rank"]},[e1.inputs[0]],t1,[_g.axis],7,_g.keepDims),{inputs:[0]})},Rs=(e1,_g)=>{Os(e1.inputs);let t1=(r1,n1,i1)=>{let o1=[];for(let a1=0;a1<r1.rank;a1++)(i1.indexOf(a1)>=0||i1.length===0)&&o1.push(`input_indices[${a1}] = 0;`);return[`${o1.join(`
`)}`,`var value = ${r1.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${r1.getByIndices("input_indices")} ${_g.selectLastIndex>0?">=":">"} value) {
         value = ${r1.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",n1.setByOffset("global_idx","best_index")]};e1.compute(Kn("argMax",{hint:_g.cacheKey,inputDependencies:["rank"]},[e1.inputs[0]],t1,[_g.axis],7,_g.keepDims),{inputs:[0]})},no=e1=>we(e1)}),Jc,ep,tp,Yn,Bs,Ds,io=j(()=>{ye(),xe(),Ze(),_e(),Jc=(e1,_g)=>{if(!e1||e1.length<1)throw new Error("too few inputs");let t1=0,r1=e1[t1],n1=r1.dataType,i1=r1.dims.length;e1.forEach((o1,a1)=>{if(a1!==t1){if(o1.dataType!==n1)throw new Error("input tensors should be one type");if(o1.dims.length!==i1)throw new Error("input tensors should have the same shape");o1.dims.forEach((u1,s1)=>{if(s1!==_g&&u1!==r1.dims[s1])throw new Error("non concat dimensions must match")})}})},ep=(e1,_g)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e1}u>(${_g});
    for (var i: u32 = 0u; i < ${e1}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e1}u;
  }`,tp=(e1,_g)=>{let t1=e1.length,r1=[];for(let n1=0;n1<t1;++n1){let i1=_g.setByOffset("global_idx",e1[n1].getByIndices("indices"));t1===1?r1.push(i1):n1===0?r1.push(`if (inputIndex == ${n1}u) { ${i1} }`):n1===t1-1?r1.push(`else { ${i1} }`):r1.push(`else if (inputIndex == ${n1}) { ${i1} }`)}return r1.join(`
`)},Yn=(e1,_g,t1,r1)=>{let n1=M$1.size(t1),i1=new Array(e1.length),o1=new Array(e1.length),a1=0,u1=[],s1=[],l1=[{type:12,data:n1}];for(let g1=0;g1<e1.length;++g1)a1+=e1[g1].dims[_g],i1[g1]=a1,s1.push(e1[g1].dims.length),o1[g1]=U$1(`input${g1}`,r1,s1[g1]),u1.push("rank"),l1.push({type:12,data:i1[g1]});for(let g1=0;g1<e1.length;++g1)l1.push(...X(e1[g1].dims));l1.push(...X(t1));let c1=K("output",r1,t1.length),d1=c1.indicesGet("indices",_g),h1=Array.from(Array(i1.length).keys()).map(g1=>`uniforms.sizeInConcatAxis${g1}`).join(","),f1=g1=>`

  ${(()=>{g1.registerUniform("outputSize","u32");for(let v1=0;v1<e1.length;v1++)g1.registerUniform(`sizeInConcatAxis${v1}`,"u32");return g1.declareVariables(...o1,c1)})()}

  ${ep(i1.length,h1)}

  ${g1.mainStart()}
    ${g1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${c1.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${d1});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${i1.length}u>(${h1});
      ${d1} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${tp(o1,c1)}
  }`;return{name:"Concat",shaderCache:{hint:`${_g}`,inputDependencies:u1},getRunData:()=>({outputs:[{dims:t1,dataType:r1}],dispatchGroup:{x:Math.ceil(n1/64)},programUniforms:l1}),getShaderSource:f1}},Bs=(e1,_g)=>{let t1=e1.inputs,r1=t1[0].dims,n1=M$1.normalizeAxis(_g.axis,r1.length);Jc(t1,n1);let i1=r1.slice();i1[n1]=t1.reduce((a1,u1)=>a1+(u1.dims.length>n1?u1.dims[n1]:0),0);let o1=t1.filter(a1=>M$1.size(a1.dims)>0);e1.compute(Yn(o1,n1,i1,t1[0].dataType),{inputs:o1})},Ds=e1=>we({axis:e1.axis})}),rp,np,ip,op,Xn,ap,Ms,oo=j(()=>{ye(),Hn(),_e(),io(),rp=(e1,_g)=>{let t1=e1[0],r1=e1[1],n1=e1[2],i1=e1[3],o1=e1[4],a1=e1[5];if(o1&&a1)throw new Error("Attention cannot have both past and relative_position_bias");if(t1.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let u1=t1.dims[0],s1=t1.dims[1],l1=t1.dims[2];if(n1.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(r1.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(r1.dims[0]!==l1)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(n1.dims[0]!==r1.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let c1=n1.dims[0]/3,d1=c1,h1=d1;if(_g.qkvHiddenSizes.length>0){if(_g.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let _1 of _g.qkvHiddenSizes)if(_1%_g.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");c1=_g.qkvHiddenSizes[0],d1=_g.qkvHiddenSizes[1],h1=_g.qkvHiddenSizes[2]}let f1=s1;if(c1!==d1)throw new Error("qkv_hidden_sizes first element should be same as the second");if(n1.dims[0]!==c1+d1+h1)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let g1=0;if(o1){if(d1!==h1)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(o1.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(o1.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(o1.dims[1]!==u1)throw new Error('Input "past" second dimension must be batch_size');if(o1.dims[2]!==_g.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(o1.dims[4]!==d1/_g.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');_g.pastPresentShareBuffer||(g1=o1.dims[3])}let v1=f1+g1,$1=-1,y1=0;if(i1)throw new Error("Mask not supported");if(o1)throw new Error("past is not supported");return{batchSize:u1,sequenceLength:s1,pastSequenceLength:g1,kvSequenceLength:f1,totalSequenceLength:v1,maxSequenceLength:$1,inputHiddenSize:l1,hiddenSize:c1,vHiddenSize:h1,headSize:Math.floor(c1/_g.numHeads),vHeadSize:Math.floor(h1/_g.numHeads),numHeads:_g.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:_g.maskFilterValue,maskType:y1,scale:_g.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},np=(e1,_g,t1,r1)=>{let n1=Ue(r1),i1=64,o1=r1/n1;o1<i1?i1=1:o1/8<64&&(i1=Math.ceil(o1/8));let a1=Math.ceil(r1/n1/i1),u1=[{type:_g.dataType,data:1/r1},{type:12,data:o1},{type:12,data:a1}],s1=De(_g.dataType,n1),l1=rt(1,n1),c1=d1=>{let h1=K("x",_g.dataType,_g.dims,n1),f1=[{name:"d_inv",type:rt(_g.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${i1}>;
  var<workgroup> thread_sum: array<f32, ${i1}>;
  ${d1.registerUniforms(f1).declareVariables(h1)}
  ${d1.mainStart([i1,1,1])}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = workgroup_id.x * uniforms.d_comp + local_offset;

    var thread_max_vector = ${l1}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      thread_max_vector = max(${l1}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(n1){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${n1}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${i1}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${l1}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      sum_vector += exp(${l1}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(n1){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${n1}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${i1}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        x[offset + i] = ${h1.type.value}(uniforms.d_inv);
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        var f32input = ${l1}(x[offset + i]);
        x[offset + i] = ${h1.type.value}(exp(f32input - max_value) / sum);
      }
    }
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${i1};${s1};${n1}`},getShaderSource:c1,getRunData:()=>({outputs:[],dispatchGroup:{x:t1},programUniforms:u1})}},ip=(e1,_g,t1,r1,n1,i1,o1)=>{let a1=o1+n1.kvSequenceLength,u1=[n1.batchSize,n1.numHeads,n1.sequenceLength,a1],s1=i1.scale===0?1/Math.sqrt(n1.headSize):i1.scale,l1=Ue(n1.headSize),c1=n1.headSize/l1,d1=12,h1={x:Math.ceil(a1/d1),y:Math.ceil(n1.sequenceLength/d1),z:n1.batchSize*n1.numHeads},f1=[{type:12,data:n1.sequenceLength},{type:12,data:c1},{type:12,data:a1},{type:12,data:n1.numHeads},{type:1,data:s1}],g1=r1?["type","type","type"]:["type","type"],v1=$1=>{let y1=U$1("q",_g.dataType,_g.dims,l1),_1=U$1("key",t1.dataType,t1.dims,l1),E1=[y1,_1];r1&&E1.push(U$1("relative_position_bias",r1.dataType,r1.dims));let T1=K("output",_g.dataType,u1),P1=rt(1,l1),k1=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`
  const TILE_SIZE = ${d1}u;

  var<workgroup> tileQ: array<${y1.type.storage}, ${d1*d1}>;
  var<workgroup> tileK: array<${y1.type.storage}, ${d1*d1}>;
  ${$1.registerUniforms(k1).declareVariables(...E1,T1)}
  ${$1.mainStart([d1,d1,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;
    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;

    var value = ${P1}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
        value += ${P1}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    let headOffset = headIdx * uniforms.M * uniforms.N;
    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(l1){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${l1}`)}})()};
        output[outputIdx] = ${T1.type.value} (sum * uniforms.alpha) + ${r1?"relative_position_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${l1}`,inputDependencies:g1},getRunData:()=>({outputs:[{dims:u1,dataType:_g.dataType,gpuDataType:0}],dispatchGroup:h1,programUniforms:f1}),getShaderSource:v1}},op=(e1,_g,t1,r1,n1)=>{let i1=n1+r1.kvSequenceLength,o1=[r1.batchSize,r1.sequenceLength,r1.vHiddenSize],a1=12,u1={x:Math.ceil(r1.vHeadSize/a1),y:Math.ceil(r1.sequenceLength/a1),z:r1.batchSize*r1.numHeads},s1=[{type:12,data:r1.sequenceLength},{type:12,data:i1},{type:12,data:r1.vHeadSize},{type:12,data:r1.numHeads},{type:12,data:r1.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:o1,dataType:_g.dataType,gpuDataType:0}],dispatchGroup:u1,programUniforms:s1}),getShaderSource:l1=>{let c1=U$1("probs",_g.dataType,_g.dims),d1=U$1("v",t1.dataType,t1.dims),h1=K("output",_g.dataType,o1),f1=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`
  const TILE_SIZE = ${a1}u;
  var<workgroup> tileQ: array<${c1.type.value}, ${a1*a1}>;
  var<workgroup> tileK: array<${c1.type.value}, ${a1*a1}>;
  ${l1.registerUniforms(f1).declareVariables(c1,d1,h1)}
  ${l1.mainStart([a1,a1,1])}
   let headIdx = workgroup_id.z;
   let m = global_id.y;
   let n = global_id.x;

   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;
   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;

   var value = ${c1.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
     if (m < uniforms.M && w + local_id.x < uniforms.K) {
       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
     }
     if (n < uniforms.N && w + local_id.y < uniforms.K) {
       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];
     }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + currentBatchHeadNumber * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`}}},Xn=(e1,_g,t1,r1,n1,i1,o1,a1,u1,s1,l1)=>{let c1=e1.outputCount>1,d1=e1.outputCount>2,h1=c1&&d1?s1.pastSequenceLength:0,f1=h1+s1.kvSequenceLength,g1=[s1.batchSize,s1.numHeads,f1,s1.headSize],v1=o1?[o1,t1]:[t1],$1=c1?e1.compute(Yn(v1,2,g1,t1.dataType),{inputs:v1,outputs:[1]})[0]:t1,y1=[s1.batchSize,s1.numHeads,f1,s1.headSize],_1=a1?[a1,r1]:[r1],E1=d1?e1.compute(Yn(_1,2,y1,r1.dataType),{inputs:_1,outputs:[2]})[0]:r1,T1=[_g,$1];u1&&T1.push(u1);let P1=e1.compute(ip(e1,_g,$1,u1,s1,l1,h1),{inputs:T1,outputs:[-1]})[0];e1.compute(np(e1,P1,s1.batchSize*s1.numHeads*s1.sequenceLength,f1),{inputs:[P1],outputs:[]});let k1=[P1,E1];e1.compute(op(e1,P1,E1,s1,h1),{inputs:k1,outputs:[0]})},ap=(e1,_g)=>{let t1=[_g.batchSize,_g.numHeads,_g.sequenceLength,_g.headSize],r1=_g.sequenceLength,n1=_g.inputHiddenSize,i1=_g.headSize,o1=12,a1={x:Math.ceil(_g.headSize/o1),y:Math.ceil(_g.sequenceLength/o1),z:_g.batchSize*_g.numHeads},u1=[e1.inputs[0],e1.inputs[1],e1.inputs[2]],s1=[{type:12,data:r1},{type:12,data:n1},{type:12,data:i1},{type:12,data:_g.numHeads},{type:12,data:_g.headSize},{type:12,data:_g.hiddenSize},{type:12,data:_g.hiddenSize+_g.hiddenSize+_g.vHiddenSize}],l1=c1=>{let d1=K("output_q",u1[0].dataType,t1),h1=K("output_k",u1[0].dataType,t1),f1=K("output_v",u1[0].dataType,t1),g1=U$1("input",u1[0].dataType,u1[0].dims),v1=U$1("weight",u1[1].dataType,u1[1].dims),$1=U$1("bias",u1[2].dataType,u1[2].dims),y1=g1.type.storage,_1=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${o1}u;
  var<workgroup> tileInput: array<${y1}, ${o1*o1}>;
  var<workgroup> tileWeightQ: array<${y1}, ${o1*o1}>;
  var<workgroup> tileWeightK: array<${y1}, ${o1*o1}>;
  var<workgroup> tileWeightV: array<${y1}, ${o1*o1}>;
  ${c1.registerUniforms(_1).declareVariables(g1,v1,$1,d1,h1,f1)}
  ${c1.mainStart([o1,o1,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${y1}(0);
    var valueK = ${y1}(0);
    var valueV = ${y1}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e1.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:t1,dataType:e1.inputs[0].dataType,gpuDataType:0},{dims:t1,dataType:e1.inputs[0].dataType,gpuDataType:0},{dims:t1,dataType:e1.inputs[0].dataType,gpuDataType:0}],dispatchGroup:a1,programUniforms:s1}),getShaderSource:l1},{inputs:u1,outputs:[-1,-1,-1]})},Ms=(e1,_g)=>{let t1=rp(e1.inputs,_g),[r1,n1,i1]=ap(e1,t1);return Xn(e1,r1,n1,i1,e1.inputs[4],void 0,void 0,void 0,e1.inputs[5],t1,_g)}}),sp,up,lp,Us,Ws=j(()=>{_t(),ye(),xe(),Ze(),_e(),sp=(e1,_g)=>{if(!e1||e1.length!==5)throw new Error("BatchNormalization requires 5 inputs");let t1=(r1,n1,i1)=>{let o1=n1.length;if(o1!==r1.length)throw new Error(`${i1}: num dimensions != ${o1}`);n1.forEach((a1,u1)=>{if(a1!==r1[u1])throw new Error(`${i1}: dim[${u1}] do not match`)})};if(e1[0].dims.length>1){let r1=_g.format==="NHWC"?_g.spatial?e1[0].dims.slice(-1):e1[0].dims.slice(-1).concat(e1[0].dims.slice(1,e1[0].dims.length-1)):e1[0].dims.slice(1,_g.spatial?2:void 0);t1(e1[1].dims,r1,"Invalid input scale"),t1(e1[2].dims,r1,"Invalid input B"),t1(e1[3].dims,r1,"Invalid input mean"),t1(e1[4].dims,r1,"Invalid input var")}else t1(e1[1].dims,[1],"Invalid input scale"),t1(e1[2].dims,[1],"Invalid input B"),t1(e1[3].dims,[1],"Invalid input mean"),t1(e1[4].dims,[1],"Invalid input var")},up=(e1,_g)=>{let{epsilon:t1,spatial:r1,format:n1}=_g,i1=e1[0].dims,o1=r1?Ue(i1[i1.length-1]):1,a1=n1==="NHWC"&&i1.length>1?o1:1,u1=M$1.size(i1)/o1,s1=r1,l1=s1?i1.length:i1,c1=U$1("x",e1[0].dataType,e1[0].dims,o1),d1=U$1("scale",e1[1].dataType,e1[1].dims,a1),h1=U$1("bias",e1[2].dataType,e1[2].dims,a1),f1=U$1("inputMean",e1[3].dataType,e1[3].dims,a1),g1=U$1("inputVar",e1[4].dataType,e1[4].dims,a1),v1=K("y",e1[0].dataType,l1,o1),$1=()=>{let _1="";if(r1)_1=`let cOffset = ${i1.length===1?"0u":n1==="NHWC"?`outputIndices[${i1.length-1}] / ${o1}`:"outputIndices[1]"};`;else if(n1==="NCHW")_1=`
            ${v1.indicesSet("outputIndices","0","0")}
            let cOffset = ${v1.indicesToOffset("outputIndices")};`;else{_1=`var cIndices = ${d1.type.indices}(0);
                       cIndices[0] = outputIndices[${i1.length-1}];`;for(let E1=1;E1<d1.rank;E1++)_1+=`cIndices[${E1}] = outputIndices[${E1}];`;_1+=`let cOffset = ${d1.indicesToOffset("cIndices")};`}return _1},y1=_1=>`
  const epsilon = ${t1};
  ${_1.registerUniform("outputSize","u32").declareVariables(c1,d1,h1,f1,g1,v1)}
  ${_1.mainStart()}
  ${_1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${v1.offsetToIndices(`global_idx * ${o1}`)};
    ${$1()}
    let scale = ${d1.getByOffset("cOffset")};
    let bias = ${h1.getByOffset("cOffset")};
    let inputMean = ${f1.getByOffset("cOffset")};
    let inputVar = ${g1.getByOffset("cOffset")};
    let x = ${c1.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${v1.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${_g.epsilon}_${_g.format}_${r1}_${o1}`,inputDependencies:s1?["rank","type","type","type","type"]:void 0},getShaderSource:y1,getRunData:()=>({outputs:[{dims:e1[0].dims,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(u1/64)},programUniforms:s1?[{type:12,data:u1},...X(i1)]:[{type:12,data:u1}]})}},lp=e1=>we(e1),Us=(e1,_g)=>{let{inputs:t1,outputCount:r1}=e1,n1=lp({..._g,outputCount:r1});if(ke.webgpu.validateInputContent&&sp(t1,n1),_g.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e1.compute(up(t1,n1))}}),dp,cp,Ns,Vs=j(()=>{xe(),_e(),dp=e1=>{if(e1[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e1[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e1[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e1[0].dims[2]!==e1[1].dims[0])throw new Error("last dimension of input and bias are not the same")},cp=e1=>{let _g=e1[0].dims,t1=e1[0].dims[2],r1=M$1.size(_g)/4,n1=e1[0].dataType,i1=U$1("input",n1,_g,4),o1=U$1("bias",n1,[t1],4),a1=U$1("residual",n1,_g,4),u1=K("output",n1,_g,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:_g,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(r1/64)}}),getShaderSource:s1=>`
  const channels = ${t1}u / 4;
  ${s1.declareVariables(i1,o1,a1,u1)}

  ${s1.mainStart()}
    ${s1.guardAgainstOutOfBoundsWorkgroupSizes(r1)}
    let value = ${i1.getByOffset("global_idx")}
      + ${o1.getByOffset("global_idx % channels")} + ${a1.getByOffset("global_idx")};
    ${u1.setByOffset("global_idx","value")}
  }`}},Ns=e1=>{dp(e1.inputs),e1.compute(cp(e1.inputs))}}),pp,Pe,Hs,Gs,Ls,Fs,qs,js,Ks,Ys,Xs,mp,Zs,Qs,Js,eu,Zn,tu,Qn,ru,nu,iu,ou,au,su,uu,lu,du,cu,pu,mu,fu,hu,gu,yu,bu,vu,ao,so,wu,$u,_u,Jn=j(()=>{ye(),xe(),Ze(),_e(),pp=(e1,_g,t1,r1,n1,i1)=>{let o1=Math.ceil(_g/4),a1="";typeof n1=="string"?a1=`${n1}(a)`:a1=n1("a");let u1=U$1("inputData",t1,[o1],4),s1=K("outputData",r1,[o1],4);return`
      ${e1.registerUniform("vec_size","u32").declareVariables(u1,s1)}

  ${i1??""}

  ${e1.mainStart()}
    ${e1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${u1.getByOffset("global_idx")};
    ${s1.setByOffset("global_idx",a1)}
  }`},Pe=(e1,_g,t1,r1,n1,i1=e1.dataType)=>({name:_g,shaderCache:{hint:n1,inputDependencies:["type"]},getShaderSource:o1=>pp(o1,M$1.size(e1.dims),e1.dataType,i1,t1,r1),getRunData:o1=>({outputs:[{dims:e1.dims,dataType:i1}],dispatchGroup:{x:Math.ceil(M$1.size(o1[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M$1.size(e1.dims)/4)}]})}),Hs=e1=>{e1.compute(Pe(e1.inputs[0],"Abs","abs"))},Gs=e1=>{e1.compute(Pe(e1.inputs[0],"Acos","acos"))},Ls=e1=>{e1.compute(Pe(e1.inputs[0],"Acosh","acosh"))},Fs=e1=>{e1.compute(Pe(e1.inputs[0],"Asin","asin"))},qs=e1=>{e1.compute(Pe(e1.inputs[0],"Asinh","asinh"))},js=e1=>{e1.compute(Pe(e1.inputs[0],"Atan","atan"))},Ks=e1=>{e1.compute(Pe(e1.inputs[0],"Atanh","atanh"))},Ys=e1=>we(e1),Xs=(e1,_g)=>{let t1;switch(_g.to){case 10:t1="vec4<f16>";break;case 1:t1="vec4<f32>";break;case 12:t1="vec4<u32>";break;case 6:t1="vec4<i32>";break;case 9:t1="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${_g.to}`)}e1.compute(Pe(e1.inputs[0],"Cast",t1,void 0,_g.cacheKey,_g.to))},mp=e1=>{let _g=e1.length>=2&&e1[1].data!==0?e1[1].getFloat32Array()[0]:Ln,t1=e1.length>=3&&e1[2].data!==0?e1[2].getFloat32Array()[0]:Fn;return we({min:_g,max:t1})},Zs=(e1,_g)=>{let t1=e1.inputs.length===1?_g:mp(e1.inputs),r1=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"Clip",n1=>`clamp(${n1}, clip_min_, clip_max_)`,`
    const clip_min_: vec4<${r1}> = vec4(${r1}(${t1.min}));
    const clip_max_: vec4<${r1}> = vec4(${r1}(${t1.max}));
`,t1.cacheKey),{inputs:[0]})},Qs=e1=>{e1.compute(Pe(e1.inputs[0],"Ceil","ceil"))},Js=e1=>{e1.compute(Pe(e1.inputs[0],"Cos","cos"))},eu=e1=>{e1.compute(Pe(e1.inputs[0],"Cosh","cosh"))},Zn=e1=>we(e1),tu=(e1,_g)=>{let t1=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"Elu",r1=>`elu_vf32(${r1})`,`
  const elu_alpha_ = ${t1}(${_g.alpha});

  fn elu_f32(a: ${t1}) -> ${t1} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${t1}>) -> vec4<${t1}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,_g.cacheKey))},Qn=(e1="f32")=>`
const r0: ${e1} = 0.3275911;
const r1: ${e1} = 0.254829592;
const r2: ${e1} = -0.284496736;
const r3: ${e1} = 1.421413741;
const r4: ${e1} = -1.453152027;
const r5: ${e1} = 1.061405429;

fn erf_vf32(v: vec4<${e1}>) -> vec4<${e1}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,ru=e1=>{let _g=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"Erf",t1=>`erf_vf32(${t1})`,Qn(_g)))},nu=e1=>{e1.compute(Pe(e1.inputs[0],"Exp","exp"))},iu=e1=>{e1.compute(Pe(e1.inputs[0],"Floor","floor"))},ou=e1=>{let _g=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"Gelu",t1=>`0.5 * ${t1} * (1.0 + erf_vf32(${t1} * 0.7071067811865475))`,Qn(_g)))},au=(e1,_g)=>{let t1=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"LeakyRelu",r1=>`select(leaky_relu_alpha_ * ${r1}, ${r1}, ${r1} >= vec4<${t1}>(0.0))`,`const leaky_relu_alpha_ = ${t1}(${_g.alpha});`,_g.cacheKey))},su=e1=>{e1.compute(Pe(e1.inputs[0],"Not",_g=>`!${_g}`))},uu=e1=>{e1.compute(Pe(e1.inputs[0],"Neg",_g=>`-${_g}`))},lu=e1=>{e1.compute(Pe(e1.inputs[0],"Reciprocal",_g=>`1.0/${_g}`))},du=e1=>{let _g=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"Relu",t1=>`select(vec4<${_g}>(0.0), ${t1}, ${t1} > vec4<${_g}>(0.0))`))},cu=e1=>{e1.compute(Pe(e1.inputs[0],"Sigmoid",_g=>`(1.0 / (1.0 + exp(-${_g})))`))},pu=e1=>we(e1),mu=(e1,_g)=>{let t1=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"HardSigmoid",r1=>`max(vec4<${t1}>(0.0), min(vec4<${t1}>(1.0), ${_g.alpha} * ${r1} + vec4<${t1}>(${_g.beta})))`,void 0,_g.cacheKey))},fu=e1=>{e1.compute(Pe(e1.inputs[0],"Sin","sin"))},hu=e1=>{e1.compute(Pe(e1.inputs[0],"Sinh","sinh"))},gu=e1=>{e1.compute(Pe(e1.inputs[0],"Sqrt","sqrt"))},yu=e1=>{e1.compute(Pe(e1.inputs[0],"Tan","tan"))},bu=e1=>`sign(${e1}) * (1 - exp(-2 * abs(${e1}))) / (1 + exp(-2 * abs(${e1})))`,vu=e1=>{e1.compute(Pe(e1.inputs[0],"Tanh",bu))},ao=(e1="f32")=>`
const fast_gelu_a: ${e1} = 0.5;
const fast_gelu_b: ${e1} = 0.7978845608028654;
const fast_gelu_c: ${e1} = 0.035677408136300125;

fn tanh_v(v: vec4<${e1}>) -> vec4<${e1}> {
  return ${bu("v")};
}
`,so=e1=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e1} * (fast_gelu_c * ${e1} * ${e1} + fast_gelu_b))) * ${e1}`,wu=e1=>{let _g=rt(e1.inputs[0].dataType);e1.compute(Pe(e1.inputs[0],"FastGelu",so,ao(_g),void 0,e1.inputs[0].dataType))},$u=(e1,_g)=>{let t1=rt(e1.inputs[0].dataType);return e1.compute(Pe(e1.inputs[0],"ThresholdedRelu",r1=>`select(vec4<${t1}>(0.0), ${r1}, ${r1} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${t1}>(${_g.alpha});`,_g.cacheKey)),0},_u=e1=>{e1.compute(Pe(e1.inputs[0],"Log","log"))}}),fp,hp,Su,Cu=j(()=>{xe(),_e(),Jn(),fp=e1=>{if(e1[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e1[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e1[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e1[0].dims[2]!==e1[1].dims[0])throw new Error("last dimension of input and bias are not the same")},hp=e1=>{let _g=e1[0].dims.slice();_g[2]=_g[2]/2;let t1=U$1("input",e1[0].dataType,e1[0].dims,4),r1=U$1("bias",e1[0].dataType,[e1[0].dims[2]],4),n1=K("output",e1[0].dataType,_g,4),i1=M$1.size(_g)/4,o1=De(e1[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:_g,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(i1/64)}}),getShaderSource:a1=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e1[0].dims[2]/4/2}u;

  ${a1.declareVariables(t1,r1,n1)}

  ${Qn(o1)}

  ${a1.mainStart()}
    ${a1.guardAgainstOutOfBoundsWorkgroupSizes(i1)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${n1.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},Su=e1=>{fp(e1.inputs),e1.compute(hp(e1.inputs))}}),gp,yp,Wt,Iu,Tu,Au,Eu,ku,Ou,Pu,Ru,zu,Bu,Du=j(()=>{ye(),xe(),_e(),gp=(e1,_g,t1,r1,n1,i1,o1,a1,u1,s1,l1,c1)=>{let d1,h1;typeof a1=="string"?d1=h1=(y1,_1)=>`${a1}((${y1}),(${_1}))`:typeof a1=="function"?d1=h1=a1:(d1=a1.scalar,h1=a1.vector);let f1=K("outputData",l1,r1.length,4),g1=U$1("aData",u1,_g.length,4),v1=U$1("bData",s1,t1.length,4),$1;if(n1)if(i1){let y1=M$1.size(_g)===1,_1=M$1.size(t1)===1,E1=_g.length>0&&_g[_g.length-1]%4===0,T1=t1.length>0&&t1[t1.length-1]%4===0;y1||_1?$1=f1.setByOffset("global_idx",h1(y1?`${g1.type.value}(${g1.getByOffset("0")}.x)`:g1.getByOffset("global_idx"),_1?`${v1.type.value}(${v1.getByOffset("0")}.x)`:v1.getByOffset("global_idx"))):$1=`
            let outputIndices = ${f1.offsetToIndices("global_idx * 4u")};
            let offsetA = ${g1.broadcastedIndicesToOffset("outputIndices",f1)};
            let offsetB = ${v1.broadcastedIndicesToOffset("outputIndices",f1)};
            ${f1.setByOffset("global_idx",h1(o1||E1?g1.getByOffset("offsetA / 4u"):`${g1.type.value}(${g1.getByOffset("offsetA / 4u")}[offsetA % 4u])`,o1||T1?v1.getByOffset("offsetB / 4u"):`${v1.type.value}(${v1.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else $1=f1.setByOffset("global_idx",h1(g1.getByOffset("global_idx"),v1.getByOffset("global_idx")));else{if(!i1)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let y1=(_1,E1,T1="")=>{let P1=`aData[indexA${E1}][componentA${E1}]`,k1=`bData[indexB${E1}][componentB${E1}]`;return`
            let outputIndices${E1} = ${f1.offsetToIndices(`global_idx * 4u + ${E1}u`)};
            let offsetA${E1} = ${g1.broadcastedIndicesToOffset(`outputIndices${E1}`,f1)};
            let offsetB${E1} = ${v1.broadcastedIndicesToOffset(`outputIndices${E1}`,f1)};
            let indexA${E1} = offsetA${E1} / 4u;
            let indexB${E1} = offsetB${E1} / 4u;
            let componentA${E1} = offsetA${E1} % 4u;
            let componentB${E1} = offsetB${E1} % 4u;
            ${_1}[${E1}] = ${T1}(${d1(P1,k1)});
          `};l1===9?$1=`
            var data = vec4<u32>(0);
            ${y1("data",0,"u32")}
            ${y1("data",1,"u32")}
            ${y1("data",2,"u32")}
            ${y1("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:$1=`
            ${y1("outputData[global_idx]",0)}
            ${y1("outputData[global_idx]",1)}
            ${y1("outputData[global_idx]",2)}
            ${y1("outputData[global_idx]",3)}
          `}return`
        ${e1.registerUniform("vec_size","u32").declareVariables(g1,v1,f1)}

        ${c1??""}

        ${e1.mainStart()}
        ${e1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${$1}
      }`},yp=(e1,_g,t1,r1,n1,i1,o1=t1.dataType)=>{let a1=!M$1.areEqual(t1.dims,r1.dims),u1=t1.dims,s1=M$1.size(t1.dims),l1=!1,c1=!1,d1=[a1];if(a1){let h1=zt.calcShape(t1.dims,r1.dims,!1);if(!h1)throw new Error("Can't perform binary op on the given tensors");u1=h1,s1=M$1.size(u1);let f1=M$1.size(t1.dims)===1,g1=M$1.size(r1.dims)===1,v1=t1.dims.length>0&&t1.dims[t1.dims.length-1]%4===0,$1=r1.dims.length>0&&r1.dims[r1.dims.length-1]%4===0;d1.push(f1),d1.push(g1),d1.push(v1),d1.push($1);let y1=1;for(let _1=1;_1<u1.length;_1++){let E1=t1.dims[t1.dims.length-_1]??1,T1=r1.dims[r1.dims.length-_1]??1;if(E1===T1)y1*=E1;else break}y1%4===0?(c1=!0,l1=!0):(f1||g1||v1||$1)&&(l1=!0)}else l1=!0;return d1.push(l1),{name:e1,shaderCache:{hint:_g+d1.map(h1=>h1.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:h1=>gp(h1,t1.dims,r1.dims,u1,l1,a1,c1,n1,t1.dataType,r1.dataType,o1,i1),getRunData:()=>({outputs:[{dims:u1,dataType:o1}],dispatchGroup:{x:Math.ceil(s1/64/4)},programUniforms:[{type:12,data:Math.ceil(M$1.size(u1)/4)},...X(t1.dims,r1.dims,u1)]})}},Wt=(e1,_g,t1,r1,n1,i1)=>{e1.compute(yp(_g,n1??"",e1.inputs[0],e1.inputs[1],t1,r1,i1))},Iu=e1=>{Wt(e1,"Add",(_g,t1)=>`${_g}+${t1}`)},Tu=e1=>{Wt(e1,"Div",(_g,t1)=>`${_g}/${t1}`)},Au=e1=>{Wt(e1,"Equal",{scalar:(_g,t1)=>`u32(${_g}==${t1})`,vector:(_g,t1)=>`vec4<u32>(${_g}==${t1})`},void 0,void 0,9)},Eu=e1=>{Wt(e1,"Mul",(_g,t1)=>`${_g}*${t1}`)},ku=e1=>{let _g=U$1("input",e1.inputs[0].dataType,e1.inputs[0].dims).type.value;Wt(e1,"Pow",{scalar:(t1,r1)=>`pow_custom(${t1},${r1})`,vector:(t1,r1)=>`pow_vector_custom(${t1},${r1})`},`
    fn pow_custom(a : ${_g}, b : ${_g}) -> ${_g} {
      if (b == ${_g}(0.0)) {
        return ${_g}(1.0);
      } else if (a < ${_g}(0.0) && f32(b) != floor(f32(b))) {
        return ${_g}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${_g}(1.0), round(f32(abs(b) % ${_g}(2.0))) != 1.0) * ${_g}(${_g==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${_g}>, b : vec4<${_g}>) -> vec4<${_g}> {
      // TODO: implement vectorized pow
      return vec4<${_g}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},Ou=e1=>{Wt(e1,"Sub",(_g,t1)=>`${_g}-${t1}`)},Pu=e1=>{Wt(e1,"Greater",{scalar:(_g,t1)=>`u32(${_g}>${t1})`,vector:(_g,t1)=>`vec4<u32>(${_g}>${t1})`},void 0,void 0,9)},Ru=e1=>{Wt(e1,"Less",{scalar:(_g,t1)=>`u32(${_g}<${t1})`,vector:(_g,t1)=>`vec4<u32>(${_g}<${t1})`},void 0,void 0,9)},zu=e1=>{Wt(e1,"GreaterOrEqual",{scalar:(_g,t1)=>`u32(${_g}>=${t1})`,vector:(_g,t1)=>`vec4<u32>(${_g}>=${t1})`},void 0,void 0,9)},Bu=e1=>{Wt(e1,"LessOrEqual",{scalar:(_g,t1)=>`u32(${_g}<=${t1})`,vector:(_g,t1)=>`vec4<u32>(${_g}<=${t1})`},void 0,void 0,9)}}),kt,Ot,Pt,ei,Zt=j(()=>{ye(),xe(),kt=(e1,_g,t1="f32")=>{switch(e1.activation){case"Relu":return`value = max(value, ${_g}(0.0));`;case"Sigmoid":return`value = (${_g}(1.0) / (${_g}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${_g}(${t1}(uniforms.clip_min)), ${_g}(${t1}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${_g}(0.0), min(${_g}(1.0), ${t1}(uniforms.alpha) * value + ${t1}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${t1}(uniforms.alpha) * value, value, value >= ${_g}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${e1.activation}`)}},Ot=(e1,_g)=>{e1.activation==="Clip"?_g.push({type:1,data:e1.clipMax},{type:1,data:e1.clipMin}):e1.activation==="HardSigmoid"?_g.push({type:1,data:e1.alpha},{type:1,data:e1.beta}):e1.activation==="LeakyRelu"&&_g.push({type:1,data:e1.alpha})},Pt=(e1,_g)=>{e1.activation==="Clip"?_g.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e1.activation==="HardSigmoid"?_g.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e1.activation==="LeakyRelu"&&_g.push({name:"alpha",type:"f32"})},ei=e1=>{let _g=(e1==null?void 0:e1.activation)||"";if(_g==="HardSigmoid"){let[t1,r1]=(e1==null?void 0:e1.activation_params)||[.2,.5];return{activation:_g,alpha:t1,beta:r1}}else if(_g==="Clip"){let[t1,r1]=(e1==null?void 0:e1.activation_params)||[Ln,Fn];return{activation:_g,clipMax:r1,clipMin:t1}}else if(_g==="LeakyRelu"){let[t1]=(e1==null?void 0:e1.activation_params)||[.01];return{activation:_g,alpha:t1}}return{activation:_g}}}),nt,ti,ri=j(()=>{nt=(e1,_g)=>{switch(e1){case 1:return _g;case 2:return`vec2<${_g}>`;case 3:return`vec3<${_g}>`;case 4:return`vec4<${_g}>`;default:throw new Error(`${e1}-component is not supported.`)}},ti=e1=>`
      ${e1?"value = value + getBiasByOutputCoords(coords);":""}
      `}),ni,uo=j(()=>{ni=e1=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e1}.x), i32(${e1}.y), i32(${e1}.z), 1));
}
`}),vp,wp,rn,Mu,$p,nn,_p,ii,on=j(()=>{ye(),xe(),_e(),Zt(),ri(),vp=(e1,_g)=>e1?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${_g?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${_g?", batchIndices":""});
        `,wp=(e1,_g)=>e1?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${_g===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${_g===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${_g===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,rn=(e1,_g,t1="f32",r1,n1=!1,i1=32,o1=!1,a1=32)=>{let u1=_g[1]*e1[1],s1=_g[0]*e1[0],l1=n1?u1:i1,c1=n1?i1:u1,d1=l1/_g[0],h1=i1/_g[1];if(!((n1&&d1===4&&e1[1]===4||!n1&&(d1===3||d1===4))&&l1%_g[0]===0&&i1%_g[1]===0&&e1[0]===4))throw new Error(`If transposeA ${n1} is true, innerElementSize ${d1} and workPerThread[1] ${e1[1]} must be 4.
      Otherwise, innerElementSize ${d1} must be 3 or 4.
  tileAWidth ${l1} must be divisible by workgroupSize[0]${_g[0]}. tileInner ${i1} must be divisible by workgroupSize[1] ${_g[1]}. colPerThread ${e1[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${d1}<${t1}>, ${l1/d1}>, ${c1}>;
var<workgroup> mm_Bsub: array<array<vec4<${t1}>, ${s1/e1[0]}>, ${i1}>;

const rowPerThread = ${e1[1]};
const colPerThread = ${e1[0]};
const innerElementSize = ${d1};
const tileInner = ${i1};

@compute @workgroup_size(${_g[0]}, ${_g[1]}, ${_g[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${o1?"0":"i32(globalId.z)"};
  ${r1?`let batchIndices = ${r1.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${u1};

  let num_tiles = ${o1?`${Math.ceil(a1/i1)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${o1?`i32(globalId.z) * ${a1}`:"0"};

  var acc: array<vec4<${t1}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${h1};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${vp(n1,r1)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${h1}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${r1?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${d1===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${wp(n1,d1)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Mu=(e1,_g)=>e1?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${_g?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${_g?", batchIndices":""});
            `,$p=e1=>e1?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",nn=(e1,_g,t1="f32",r1,n1=!1,i1=32,o1=!1,a1=32,u1=!1)=>{let s1=e1[1]*_g[1],l1=e1[0]*_g[0],c1=n1?s1:i1,d1=n1?i1:s1;if(!(d1%_g[1]===0&&c1%_g[0]===0&&i1%_g[1]===0))throw new Error(`tileAHight ${d1} must be divisible by workgroupSize[1]${_g[1]}, tileAWidth ${c1} must be divisible by workgroupSize[0]${_g[0]}, tileInner ${i1} must be divisible by workgroupSize[1]${_g[1]}`);let h1=d1/_g[1],f1=c1/_g[0],g1=i1/_g[1],v1=u1?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${s1};
    let globalColStart = i32(workgroupId.x) * ${l1};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${d1}; inputRow = inputRow + ${_g[1]}) {
        for (var inputCol = localCol; inputCol < ${c1}; inputCol = inputCol + ${_g[0]}) {
          ${Mu(n1,r1)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${i1}; inputRow = inputRow + ${_g[1]}) {
            for (var inputCol = localCol; inputCol < ${l1}; inputCol = inputCol + ${_g[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${r1?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${t1}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${_g[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${n1?`mm_Asub[k][localRow + innerRow * ${_g[1]}];`:`mm_Asub[localRow + innerRow * ${_g[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${_g[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${_g[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${s1};

let tileRowA = i32(localId.y) * ${h1};
let tileColA = i32(localId.x) * ${f1};
let tileRowB = i32(localId.y) * ${g1};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${h1}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${f1}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Mu(n1,r1)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${g1}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${r1?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${t1}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${$p(n1)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${t1}, ${c1}>, ${d1}>;
  var<workgroup> mm_Bsub : array<array<${t1}, ${l1}>, ${i1}>;
  const rowPerThread = ${e1[1]};
  const colPerThread = ${e1[0]};
  const tileInner = ${i1};

@compute @workgroup_size(${_g[0]}, ${_g[1]}, ${_g[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${o1?"0":"i32(globalId.z)"};
    ${r1?`let batchIndices = ${r1.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${o1?`${Math.ceil(a1/i1)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${o1?`i32(globalId.z) * ${a1}`:"0"};

    var acc : array<array<${t1}, colPerThread>, rowPerThread>;

    // Without this initialization strange values show up in acc.
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = 0.0;
      }
    }
    ${v1}
  }
`},_p=(e1,_g,t1,r1,n1,i1=!1)=>{let[o1,a1,u1]=n1,[s1,l1,c1,d1]=r1,h1=Pr(o1,u1),f1=Pr(a1,u1),g1=De(r1[0].type.tensor),v1=()=>{let y1=l1.rank,_1=s1.rank,E1=`var aIndices: ${l1.type.indices};`;for(let T1=y1-2-1,P1=_1-1;T1>=0;T1--,P1--)E1+=`
aIndices[${T1}] = ${_1>1?`batchIndices[${P1}]`:"batchIndices"};`;return h1.forEach(T1=>{E1+=`
aIndices[${T1}] = 0;`}),E1+=`
aIndices[${y1-2}] = u32(row);
                   aIndices[${y1-1}] = u32(colIn);`,E1},$1=()=>{let y1=c1.rank,_1=s1.rank,E1=`var bIndices: ${c1.type.indices};`;for(let T1=y1-2-1,P1=_1-1;T1>=0;T1--,P1--)E1+=`
bIndices[${T1}] = ${_1>1?`batchIndices[${P1}]`:"batchIndices"};`;return f1.forEach(T1=>{E1+=`
bIndices[${T1}] = 0;`}),E1+=`
bIndices[${y1-2}] = u32(row);
                   bIndices[${y1-1}] = u32(colIn);`,E1};return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${s1.type.indices}) -> ${nt(e1,g1)} {
      var value = ${nt(e1,g1)}(0.0);
      let col = colIn * ${e1};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        ${v1()}
        value = ${l1.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${s1.type.indices}) -> ${nt(e1,g1)} {
      var value = ${nt(e1,g1)}(0.0);
      let col = colIn * ${e1};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        ${$1()}
        value = ${c1.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${nt(e1,g1)}) {
      let col = colIn * ${e1};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${_g?`value = value + ${i1?"bias[colIn]":`${nt(e1,g1)}(bias[row])`};`:""}
        ${t1}
        ${d1.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},ii=(e1,_g,t1,r1,n1=!1)=>{let i1=e1[0].dims,o1=e1[1].dims,a1=i1.slice(0,-2),u1=o1.slice(0,-2),s1=r1?r1.slice(0,-2):t1.slice(0,-2),l1=M$1.size(s1),c1=i1[i1.length-2],d1=i1[i1.length-1],h1=o1[o1.length-1],f1=d1%4===0&&h1%4===0,g1=c1<=8?[4,1,1]:[4,4,1],v1=[8,8,1],$1=[Math.ceil(h1/v1[0]/g1[0]),Math.ceil(c1/v1[1]/g1[1]),Math.ceil(l1/v1[2]/g1[2])],y1=f1?4:1,_1=[...a1,c1,d1/y1],E1=_1.length,T1=[...u1,d1,h1/y1],P1=T1.length,k1=[l1,c1,h1/y1],N1=[{type:6,data:c1},{type:6,data:h1},{type:6,data:d1}];Ot(_g,N1),N1.push(...X(s1,_1,T1));let W1=["rank","rank"],H1=e1.length>2;H1&&(N1.push(...X(e1[2].dims)),W1.push("rank")),N1.push(...X(k1));let ty=ey=>{let ly=s1.length,oy=qn("batchDims",e1[0].dataType,ly,1),Q1=De(e1[0].dataType),U1=U$1("a",e1[0].dataType,E1,y1),V1=U$1("b",e1[1].dataType,P1,y1),K1=K("result",e1[0].dataType,k1.length,y1),J1=[U1,V1];if(H1){let Oy=n1?y1:1;J1.push(U$1("bias",e1[2].dataType,e1[2].dims.length,Oy))}let hy=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Pt(_g,hy);let G1=De(K1.type.tensor),Y1=kt(_g,K1.type.value,G1),yy=_p(y1,H1,Y1,[oy,U1,V1,K1],[a1,u1,s1],n1);return`
  ${ey.registerUniforms(hy).registerInternalVariables(oy).declareVariables(...J1,K1)}
  ${yy}
  ${f1?rn(g1,v1,Q1,oy):nn(g1,v1,Q1,oy)}
                   `};return{name:"MatMul",shaderCache:{hint:`${g1};${_g.activation};${f1};${n1}`,inputDependencies:W1},getRunData:()=>({outputs:[{dims:t1,dataType:e1[0].dataType}],dispatchGroup:{x:$1[0],y:$1[1],z:$1[2]},programUniforms:N1}),getShaderSource:ty}}}),xp,Uu,Wu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),xp=(e1,_g,t1,r1,n1=!1,i1,o1=4,a1=4,u1=4,s1="f32")=>{let l1=W1=>{switch(W1){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${s1}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${W1} is not supported.`)}},c1=W1=>{switch(W1){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${W1} is not supported.`)}},d1=e1?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,h1=e1?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,f1=e1?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",g1=e1?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",v1=e1?"row":"col",$1=e1?"col":"row",y1=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e1?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${v1} / outWidth;
    let outCol = ${v1} % outWidth;

    let WRow = ${$1} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${$1} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${$1} % inChannels;
    var resData = ${nt(o1,s1)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${f1} && xCol >= 0 && xCol < ${g1}) {
      ${d1}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${l1(o1)}
    }
    return resData;`,_1=e1?_g&&r1?`
    let col = colIn * ${o1};
    ${y1}`:`
    let col = colIn * ${o1};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${y1}
    }
    return ${nt(o1,s1)}(0.0);`:r1&&t1?`
    let col = colIn * ${o1};
    ${y1}`:`
    let col = colIn * ${o1};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${y1}
    }
    return ${nt(o1,s1)}(0.0);`,E1=`${c1(a1)}`,T1=nt(u1,s1),P1=nt(e1?o1:a1,s1),k1=nt(e1?a1:o1,s1),N1=kt(i1,T1,s1);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${P1} {
      ${e1?_1:E1}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${k1} {
      ${e1?E1:_1}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${T1}) {
      let col = colIn * ${u1};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e1?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${h1}
      ${ti(n1)}
      ${N1}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},Uu=(e1,_g,t1,r1,n1,i1,o1,a1)=>{let u1=_g.format==="NHWC",s1=u1?e1[0].dims[3]:e1[0].dims[1],l1=t1[0],c1=u1?t1[2]:t1[3],d1=u1?t1[1]:t1[2],h1=u1?t1[3]:t1[1],f1=u1&&(s1%4===0||s1%3===0)&&h1%4===0,g1=u1?h1:c1*d1,v1=u1?c1*d1:h1,$1=[8,8,1],y1=r1<=8?[4,1,1]:[4,4,1],_1=[Math.ceil(g1/$1[0]/y1[0]),Math.ceil(v1/$1[1]/y1[1]),Math.ceil(l1/$1[2]/y1[2])];Ne("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${_1}`);let E1=f1?u1&&s1%4!==0?3:4:1,T1=$1[1]*y1[1],P1=$1[0]*y1[0],k1=Math.max($1[0]*E1,$1[1]),N1=r1%T1===0,W1=n1%P1===0,H1=i1%k1===0,ty=f1?[E1,4,4]:[1,1,1],ey=[{type:6,data:r1},{type:6,data:n1},{type:6,data:i1},{type:6,data:[_g.pads[0],_g.pads[1]]},{type:6,data:_g.strides},{type:6,data:_g.dilations}];Ot(_g,ey),ey.push(...X(e1[0].dims,e1[1].dims));let ly=["rank","rank"];o1&&(ey.push(...X(e1[2].dims)),ly.push("rank")),ey.push(...X(t1));let oy=Q1=>{let U1=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Pt(_g,U1);let V1=f1?4:1,K1=De(e1[0].dataType),J1=`
      fn setOutputAtIndex(flatIndex : i32, value : ${f1?`vec4<${K1}>`:K1}) {
        result[flatIndex] = ${f1?`vec4<${K1}>`:K1}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${f1?`vec4<${K1}>`:K1}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${f1?"/ 4":""}, value);
      }`,hy=U$1("x",e1[0].dataType,e1[0].dims.length,E1===3?1:E1),G1=U$1("w",e1[1].dataType,e1[1].dims.length,V1),Y1=[hy,G1],yy=K("result",e1[0].dataType,t1.length,V1);if(o1){let Oy=U$1("bias",e1[2].dataType,e1[2].dims.length,V1);Y1.push(Oy),J1+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${f1?`vec4<${K1}>`:K1} {
          return bias[coords.${u1?"w":"y"}${f1?"/ 4":""}];
        }`}return`
        ${ni("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${Q1.registerUniforms(U1).declareVariables(...Y1,yy)}
        ${J1}
        ${xp(u1,N1,W1,H1,o1,_g,ty[0],ty[1],ty[2],K1)}
        ${f1?rn(y1,$1,K1,void 0,!u1,k1):nn(y1,$1,K1,void 0,!u1,k1,!1,void 0,a1)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${_g.cacheKey};${E1};${f1};${N1};${W1};${H1};${T1};${P1};${k1}`,inputDependencies:ly},getRunData:()=>({outputs:[{dims:t1,dataType:e1[0].dataType}],dispatchGroup:{x:_1[0],y:_1[1],z:_1[2]},programUniforms:ey}),getShaderSource:oy}}}),lo,Nu,Vu=j(()=>{ye(),xe(),_e(),co(),Zt(),lo=(e1,_g,t1)=>{let r1=e1.length>2,n1=r1?"value += b[output_channel];":"",i1=e1[0].dims,o1=e1[1].dims,a1=o1[0]/_g.group,u1=_g.format==="NHWC",s1=oi(i1,o1,_g.dilations,_g.pads,_g.strides,u1),l1=M$1.size(s1),c1=[{type:12,data:l1},{type:12,data:_g.dilations},{type:12,data:[_g.strides[0],_g.strides[1]]},{type:12,data:[_g.pads[0],_g.pads[1]]},{type:12,data:a1}];Ot(_g,c1),c1.push(...X(i1,o1));let d1=["rank","rank"];r1&&(c1.push(...X(e1[2].dims)),d1.push("rank")),c1.push(...X(s1));let h1=f1=>{let g1=K("output",e1[0].dataType,s1.length),v1=De(g1.type.tensor),$1=kt(_g,g1.type.value,v1),y1=U$1("x",e1[0].dataType,i1.length),_1=U$1("w",e1[1].dataType,o1.length),E1=[y1,_1];r1&&E1.push(U$1("b",e1[2].dataType,e1[2].dims.length));let T1=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:_g.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Pt(_g,T1),`
  ${f1.registerUniforms(T1).declareVariables(...E1,g1)}

  ${f1.mainStart()}
    ${f1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${g1.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${u1?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${u1?1:2}], outputIndices[${u1?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel / uniforms.output_channels_per_group;

    var value: ${g1.type.value} = ${g1.type.value}(0);
    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[${u1?1:2}]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[${u1?2:3}]) {
            continue;
          }

          let xVal = ${u1?y1.get("batch","xHeight","xWidth","input_channel"):y1.get("batch","input_channel","xHeight","xWidth")};
          let wVal = ${_1.get("output_channel","wInChannel","wHeight","wWidth")};
          value += xVal*wVal;
        }
      }
    }
    ${n1}
    ${$1}
    ${g1.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:_g.cacheKey,inputDependencies:d1},getRunData:()=>({outputs:[{dims:t1?t1(s1):s1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(l1/64)},programUniforms:c1}),getShaderSource:h1}},Nu=(e1,_g,t1)=>{let r1=e1.length>2,n1=Ue(t1[3]),i1=Ue(t1[2]),o1=M$1.size(t1)/n1/i1,a1=[e1[0].dims[0],e1[0].dims[1],e1[0].dims[2],e1[0].dims[3]/n1],u1=[e1[1].dims[0],e1[1].dims[1],e1[1].dims[2],e1[1].dims[3]/n1],s1=[t1[0],t1[1],t1[2],t1[3]/n1],l1=[{type:12,data:o1},{type:6,data:[_g.strides[0],_g.strides[1]]},{type:6,data:[_g.pads[0],_g.pads[1]]}];Ot(_g,l1),l1.push(...X(a1,u1,s1));let c1=(i1-1)*_g.strides[1]+u1[1],d1=h1=>{let f1=K("output",e1[0].dataType,s1.length,n1),g1=De(f1.type.tensor),v1=kt(_g,f1.type.value,g1),$1=U$1("x",e1[0].dataType,a1.length,n1),y1=U$1("w",e1[1].dataType,u1.length,n1),_1=[$1,y1];r1&&_1.push(U$1("b",e1[2].dataType,e1[2].dims,n1));let E1=r1?"value += b[output_channel];":"",T1=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Pt(_g,T1),`
  ${h1.registerUniforms(T1).declareVariables(..._1,f1)}
  ${h1.mainStart()}
    ${h1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${i1}u;
    let col = (index1 % width1) * ${i1}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${$1.type.value}, ${c1}>;
    var values: array<${f1.type.value}, ${i1}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${u1[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${c1}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${$1.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${$1.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${u1[1]}; w_width++) {
          let w_val = ${y1.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${i1}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${i1}u; i++) {
      var value = values[i];
      ${E1}
      ${v1}
      ${f1.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${_g.cacheKey};${n1};${i1};${c1};${u1[0]};${u1[1]}`,inputDependencies:r1?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:t1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(o1/64)},programUniforms:l1}),getShaderSource:d1}}}),po,Sp,Hu,mo=j(()=>{ye(),xe(),on(),_e(),Zt(),po=(e1,_g,t1,r1,n1=!1)=>{let i1=e1[0].dims,o1=e1[1].dims,a1=i1[i1.length-2],u1=o1[o1.length-1],s1=i1[i1.length-1],l1=Ue(u1),c1=Ue(s1),d1=Ue(a1),h1=M$1.size(t1)/l1/d1,f1=e1.length>2,g1=r1?r1.slice(0,-2):t1.slice(0,-2),v1=[M$1.size(g1),a1,u1],$1=[{type:12,data:h1},{type:12,data:a1},{type:12,data:u1},{type:12,data:s1}];Ot(_g,$1),$1.push(...X(g1,i1,o1)),f1&&$1.push(...X(e1[2].dims)),$1.push(...X(v1));let y1=_1=>{let E1=qn("batch_dims",e1[0].dataType,g1.length),T1=U$1("a",e1[0].dataType,i1.length,c1),P1=U$1("b",e1[1].dataType,o1.length,l1),k1=K("output",e1[0].dataType,v1.length,l1),N1=De(k1.type.tensor),W1=kt(_g,k1.type.value,N1),H1=[T1,P1],ty="";if(f1){let J1=n1?l1:1;H1.push(U$1("bias",e1[2].dataType,e1[2].dims.length,J1)),ty=`${n1?`value += bias[col / ${J1}];`:`value += ${k1.type.value}(bias[row + i]);`}`}let ey=i1.slice(0,-2),ly=o1.slice(0,-2),oy=Pr(ey,g1),Q1=Pr(ly,g1),U1=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Pt(_g,U1);let V1=(J1,hy)=>{let G1=J1.rank,Y1=J1.name;if(G1===2)return`var ${Y1}_indices = ${J1.type.indices}(0u, 0u);`;let yy=E1.rank,Oy=`var ${Y1}_indices: ${J1.type.indices};`;for(let Ey=G1-2-1,jy=yy-1;Ey>=0;Ey--,jy--)Oy+=`
${Y1}_indices[${Ey}] = ${yy>1?`batch_indices[${jy}]`:"batch_indices"};`;return hy.forEach(Ey=>{Oy+=`
${Y1}_indices[${Ey}] = 0;`}),Oy+=`${Y1}_indices[${G1-2}] = 0u;
                     ${Y1}_indices[${G1-1}] = 0u;`,Oy},K1=()=>{let J1=`var a_data: ${T1.type.value};`;for(let hy=0;hy<c1;hy++)J1+=`
              let b_data${hy} = b[(b_offset + (k + ${hy}) * uniforms.N + col) / ${l1}];`;for(let hy=0;hy<d1;hy++){J1+=`a_data = a[(a_offset + (row + ${hy}) * uniforms.K + k) / ${c1}];`;for(let G1=0;G1<c1;G1++)J1+=`
            values[${hy}] = fma(${P1.type.value}(a_data${c1===1?"":`[${G1}]`}), b_data${G1}, values[${hy}]);
`}return J1};return`
  ${_1.registerUniforms(U1).registerInternalVariables(E1).declareVariables(...H1,k1)}
  ${_1.mainStart()}
    ${_1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${l1})) * ${l1};
    var index1 = global_idx / (uniforms.N / ${l1});
    let stride1 = uniforms.M / ${d1};
    let row = (index1 % stride1) * ${d1};
    let batch = index1 / stride1;

    ${t1.length===2?"":`let batch_indices = ${E1.offsetToIndices("batch")};`}
    ${V1(T1,oy)}
    let a_offset = ${T1.indicesToOffset("a_indices")};
    ${V1(P1,Q1)}
    let b_offset = ${P1.indicesToOffset("b_indices")};
    var values: array<${k1.type.value}, ${d1}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${c1}) {
      ${K1()}
    }
    for (var i = 0u; i < ${d1}u; i++) {
      var value = values[i];
      ${ty}
      ${W1}
      let cur_indices = ${k1.type.indices}(batch, row + i, col);
      let offset = ${k1.indicesToOffset("cur_indices")};
      ${k1.setByOffset(`offset / ${l1}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${_g.activation};${l1};${c1};${d1};${n1}`,inputDependencies:f1?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:t1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(h1/64)},programUniforms:$1}),getShaderSource:y1}},Sp=e1=>{if(!e1||e1.length!==2)throw new Error("MatMul requires 2 inputs.");if(e1[0].dims[e1[0].dims.length-1]!==e1[1].dims[e1[1].dims.length-2])throw new Error("shared dimension does not match.")},Hu=e1=>{Sp(e1.inputs);let _g=zt.calcShape(e1.inputs[0].dims,e1.inputs[1].dims,!0);if(!_g)throw new Error("Can't use matmul on the given tensors");let t1=_g[_g.length-1],r1=e1.inputs[0].dims[e1.inputs[0].dims.length-1];t1<8&&r1<8?e1.compute(po(e1.inputs,{activation:""},_g)):e1.compute(ii(e1.inputs,{activation:""},_g))}}),oi,fo,Cp,Gu,ho,Ip,Tp,go,co=j(()=>{xe(),Wu(),on(),Vu(),Zt(),mo(),Rr(),oi=(e1,_g,t1,r1,n1,i1)=>{let o1=e1[0],a1=e1.slice(i1?1:2,i1?3:4),u1=a1.length,s1=_g[0],l1=_g.slice(2).map((d1,h1)=>d1+(d1-1)*(t1[h1]-1)),c1=a1.map((d1,h1)=>d1+r1[h1]+r1[h1+u1]).map((d1,h1)=>Math.floor((d1-l1[h1]+n1[h1])/n1[h1]));return c1.splice(0,0,o1),c1.splice(i1?3:1,0,s1),c1},fo=[2,3,1,0],Cp=(e1,_g)=>{if(!e1||e1.length!==2&&e1.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e1[0].dims.length!==4&&e1[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e1[0].dims.length!==e1[1].dims.length)throw new Error("filter does not have same dimension as input");let t1=e1[0].dims[_g.format==="NHWC"?e1[0].dims.length-1:1],r1=e1[1].dims[1]*_g.group;if(t1!==r1)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e1.length===3&&(e1[2].dims.length!==1||e1[1].dims[0]!==e1[2].dims[0]))throw new Error("invalid bias");let n1=e1[0].dims.length-2;if(_g.dilations.length!==n1)throw new Error(`dilations should be ${n1}D`);if(_g.strides.length!==n1)throw new Error(`strides should be ${n1}D`);if(_g.pads.length!==n1*2)throw new Error(`pads should be ${n1*2}D`);if(_g.kernelShape.length!==0&&_g.kernelShape.length!==e1[1].dims.length-2)throw new Error("invalid kernel shape")},Gu=(e1,_g)=>{let t1=e1.kernelShape.slice();for(let i1=2;i1<_g[1].dims.length;++i1)t1[i1-2]===0&&(t1[i1-2]=_g[1].dims[i1]);let r1=e1.pads.slice();pr.adjustPadsBasedOnAutoPad(_g[0].dims,e1.strides,e1.dilations,t1,r1,e1.format==="NHWC",e1.autoPad);let n1=Object.assign({},e1);return Object.assign(n1,{kernelShape:t1,pads:r1}),n1},ho=e1=>{let _g=ei(e1),t1=e1.format,r1=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e1.auto_pad],n1=e1.dilations,i1=e1.group,o1=e1.kernel_shape,a1=e1.pads,u1=e1.strides,s1=e1.w_is_const();return{autoPad:r1,format:t1,dilations:n1,group:i1,kernelShape:o1,pads:a1,strides:u1,wIsConst:s1,..._g,cacheKey:`${e1.format};${_g.activation};`}},Ip=(e1,_g,t1)=>{let r1=Gu(t1,_g),n1=t1.format==="NHWC";if(t1.group!==1){if(!e1.adapterInfo.isArchitecture("ampere")&&n1&&_g[1].dims[0]===t1.group&&_g[1].dims[1]===1&&t1.dilations[0]===1&&t1.dilations[1]===1){let P1=oi(_g[0].dims,_g[1].dims,t1.dilations,r1.pads,t1.strides,n1),k1=e1.kernelCustomData.wT??e1.compute(xt(_g[1],fo),{inputs:[1],outputs:[t1.wIsConst?-2:-1]})[0];t1.wIsConst&&!e1.kernelCustomData.wT&&(e1.kernelCustomData.wT=k1);let N1=[_g[0],k1];_g.length===3&&N1.push(_g[2]),e1.compute(Nu(N1,r1,P1),{inputs:N1})}else e1.compute(lo(_g,r1));return}let i1=_g.length===3,o1=_g[0].dims[n1?1:2],a1=_g[0].dims[n1?2:3],u1=_g[0].dims[n1?3:1],s1=_g[1].dims[2],l1=_g[1].dims[3],c1=oi(_g[0].dims,_g[1].dims,t1.dilations,r1.pads,t1.strides,n1),d1=c1[n1?1:2],h1=c1[n1?2:3],f1=c1[n1?3:1],g1=n1&&s1===o1&&l1===a1&&t1.pads[0]===0&&t1.pads[1]===0;if(g1||s1===1&&l1===1&&t1.dilations[0]===1&&t1.dilations[1]===1&&t1.strides[0]===1&&t1.strides[1]===1&&t1.pads[0]===0&&t1.pads[1]===0){let P1=c1[0],k1,N1,W1,H1=[];if(n1){let ly=e1.kernelCustomData.wT??e1.compute(xt(_g[1],fo),{inputs:[1],outputs:[t1.wIsConst?-2:-1]})[0];if(t1.wIsConst&&!e1.kernelCustomData.wT&&(e1.kernelCustomData.wT=ly),g1){let oy=o1*a1*u1;k1=_g[0].reshape([1,P1,oy]),N1=ly.reshape([1,oy,f1]),W1=[1,P1,f1]}else k1=_g[0].reshape([P1,o1*a1,u1]),N1=ly.reshape([1,u1,f1]),W1=[P1,d1*h1,f1];H1.push(k1),H1.push(N1)}else k1=_g[0].reshape([P1,u1,o1*a1]),N1=_g[1].reshape([1,f1,u1]),W1=[P1,f1,d1*h1],H1.push(N1),H1.push(k1);i1&&H1.push(_g[2]);let ty=W1[2],ey=H1[0].dims[H1[0].dims.length-1];ty<8&&ey<8?e1.compute(po(H1,r1,c1,W1,n1),{inputs:H1}):e1.compute(ii(H1,r1,c1,W1,n1),{inputs:H1});return}let v1=!0,$1=e1.kernelCustomData.wT??e1.compute(xt(_g[1],fo),{inputs:[1],outputs:[t1.wIsConst?-2:-1]})[0];t1.wIsConst&&!e1.kernelCustomData.wT&&(e1.kernelCustomData.wT=$1);let y1=[_g[0],$1];i1&&y1.push(_g[2]);let _1=n1?d1*h1:f1,E1=n1?f1:d1*h1,T1=s1*l1*u1;e1.compute(Uu(y1,r1,c1,_1,E1,T1,i1,v1),{inputs:y1})},Tp=(e1,_g)=>{let t1=_g.format==="NHWC",r1=[e1.inputs[0].reshape(t1?[e1.inputs[0].dims[0],1,e1.inputs[0].dims[1],e1.inputs[0].dims[2]]:[e1.inputs[0].dims[0],e1.inputs[0].dims[1],1,e1.inputs[0].dims[2]]),e1.inputs[1].reshape([e1.inputs[1].dims[0],e1.inputs[1].dims[1],1,e1.inputs[1].dims[2]])];e1.inputs.length===3&&r1.push(e1.inputs[2]);let n1=[0,_g.pads[0],0,_g.pads[1]],i1=[1].concat(_g.strides),o1=[1].concat(_g.dilations),a1=[1].concat(_g.kernelShape),u1=Gu({..._g,pads:n1,strides:i1,dilations:o1,kernelShape:a1},r1);e1.compute(lo(r1,u1,s1=>t1?[s1[0],s1[2],s1[3]]:[]))},go=(e1,_g)=>{Cp(e1.inputs,_g),e1.inputs[0].dims.length===3?Tp(e1,_g):Ip(e1,e1.inputs,_g)}}),Ap,Lu,Fu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),Ap=(e1,_g=!1,t1,r1,n1=4)=>{let i1=v1=>{switch(v1){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];
            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];
            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];
            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];
            return ${r1}(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${v1} is not supported.`)}},o1=e1?`
      let coord = vec4<i32>(batch, iXR, iXC, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, iXR, iXC);
      `,a1=e1?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,u1=e1?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",s1=e1?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",l1=e1?"row":"col",c1=e1?"col":"row",d1=`
      let inChannels = ${e1?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let outWidth = ${e1?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      let outRow = ${l1} / outWidth;
      let outCol = ${l1} % outWidth;

      let WRow = ${c1} / (uniforms.filter_dims[1] * inChannels);
      let WCol = ${c1} / inChannels % uniforms.filter_dims[1];
      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(${u1}) || fract(xR) > 0.0) {
        return ${r1}(0.0);
      }
      if (xC < 0.0 || xC >= f32(${s1}) || fract(xC) > 0.0) {
        return ${r1}(0.0);
      }
      let iXR = i32(xR);
      let iXC = i32(xC);
      let xCh = ${c1} % inChannels;
      ${o1}
      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${n1}];`,h1=e1?`
      let col = colIn * ${n1};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
        ${d1}
      }
      return ${r1}(0.0);`:`
      let col = colIn * ${n1};
      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
        ${d1}
      }
      return ${r1}(0.0);`,f1=`
      let col = colIn * ${n1};
      let inChannels = ${e1?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);
      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];
      if (${e1?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {
        let rowInner = row % inChannels;
        let coord = vec4<i32>(coordX, coordY, col, rowInner);
        ${i1(n1)}
      }
      return ${r1}(0.0);
      `,g1=kt(t1,r1);return`
  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${r1} {
    ${e1?h1:f1}
  }

  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${r1} {
    ${e1?f1:h1}
  }

  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${r1}) {
    let col = colIn * ${n1};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
      var value = valueInput;
      let outWidth = ${e1?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${a1}
      ${ti(_g)}
      ${g1}
      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${n1}] = value;
    }
  }`},Lu=(e1,_g,t1,r1,n1,i1,o1,a1)=>{let u1=_g.format==="NHWC",s1=u1?e1[0].dims[3]:e1[0].dims[1],l1=t1[0],c1=u1?t1[2]:t1[3],d1=u1?t1[1]:t1[2],h1=u1?t1[3]:t1[1],f1=u1&&s1%4===0&&s1%3&&h1%4===0,g1=u1?h1:c1*d1,v1=u1?c1*d1:h1,$1=[8,8,1],y1=r1<=8?[4,1,1]:[4,4,1],_1=[Math.ceil(g1/$1[0]/y1[0]),Math.ceil(v1/$1[1]/y1[1]),Math.ceil(l1/$1[2]/y1[2])];Ne("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${_1}`);let E1=f1?4:1,T1=Math.max($1[0]*E1,$1[1]),P1=f1?4:1,k1=[_g.kernelShape[u1?1:2],_g.kernelShape[u1?2:3]],N1=[k1[0]+(_g.dilations[0]<=1?0:(k1[0]-1)*(_g.dilations[0]-1)),k1[1]+(_g.dilations[1]<=1?0:(k1[1]-1)*(_g.dilations[1]-1))],W1=[N1[0]-1-Math.floor((_g.pads[0]+_g.pads[2])/2),N1[1]-1-Math.floor((_g.pads[1]+_g.pads[3])/2)],H1=[{type:6,data:r1},{type:6,data:n1},{type:6,data:i1},{type:6,data:_g.strides},{type:6,data:_g.dilations},{type:6,data:k1},{type:6,data:W1}];Ot(_g,H1),H1.push(...X(e1[0].dims,e1[1].dims));let ty=["rank","rank"];o1&&(H1.push(...X(e1[2].dims)),ty.push("rank")),H1.push(...X(t1));let ey=ly=>{let oy=U$1("x",e1[0].dataType,e1[0].dims.length,P1),Q1=U$1("w",e1[1].dataType,e1[1].dims.length,1),U1=K("result",e1[0].dataType,t1.length,P1),V1=[oy,Q1],K1="";if(o1){let G1=U$1("bias",e1[2].dataType,e1[2].dims.length,P1);V1.push(G1),K1+=`
          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${G1.type.value} {
            return bias[coords.${u1?"w":"y"}${f1?"/ 4":""}];
          }`}let J1=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:k1.length},{name:"pads",type:"i32",length:W1.length}];Pt(_g,J1);let hy=De(e1[0].dataType,1);if(hy!=="f16"&&hy!=="f32")throw new Error(`elemType ${hy} is not supported.`);return`
        ${ni("uniforms.result_strides")}
        ${ly.registerUniforms(J1).declareVariables(...V1,U1)};
        ${K1}
        ${Ap(u1,o1,_g,oy.type.value,E1)}
        ${f1?rn(y1,$1,hy,void 0,!u1,T1):nn(y1,$1,hy,void 0,!u1,T1,!1,void 0,a1)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${_g.cacheKey};${y1};${$1};${f1}`,inputDependencies:ty},getRunData:()=>({outputs:[{dims:t1,dataType:e1[0].dataType}],dispatchGroup:{x:_1[0],y:_1[1],z:_1[2]},programUniforms:H1}),getShaderSource:ey}}}),Ep,yo,qu=j(()=>{ye(),Xt(),xe(),_e(),Ep=(e1,_g,t1,r1,n1,i1=!1,o1,a1,u1=!1)=>{let s1=u1?1:2,l1=u1?2:3,c1=u1?3:1,d1=i1?2:1,h1=`
  fn setOutputAtIndex(flatIndex : u32, value : ${i1?`vec4<${o1}>`:o1}) {
    result[flatIndex] = ${i1?`vec4<${o1}>`:o1}(value);
  }`;r1&&(h1+=`
    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${i1?`vec4<${o1}>`:o1} {
      return bias[coords.${u1?"w":"y"}${i1?"/ 4":""}];
    }`);let f1=i1?4:1,g1=U$1("W",_g[1].dataType,_g[1].dims.length,f1),v1=U$1("Dy",_g[0].dataType,_g[0].dims.length,f1),$1=[v1,g1];r1&&$1.push(U$1("bias",_g[2].dataType,[t1[c1]].length,f1));let y1=K("result",_g[0].dataType,t1.length,f1),_1=`{
        let batch: u32 = ${n1?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];
        let r = ${n1?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];
        let c = ${n1?"global_id.y":"workgroup_id.y"} * ${d1};
        let d1: u32 = ${n1?"global_id.x":"workgroup_id.x"} * 4;

        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd: array<vec4<${o1}>, ${d1}>;
        for (var i = 0; i < ${d1}; i++) {
          dotProd[i] = vec4<${o1}>(0.0);
        }
        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {
          var dyR = (${o1}(dyCorner.x) + ${o1}(wR)) / ${o1}(uniforms.strides.x);
          let wRPerm = uniforms.filter_dims[0] - 1 - wR;
          if (dyR < 0.0 || dyR >= ${o1}(uniforms.Dy_shape[1]) ||
              fract(dyR) > 0.0 || wRPerm < 0) {
            continue;
          }
          let idyR: u32 = u32(dyR);

          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {
            let dyC = (${o1}(dyCorner.y) + ${o1}(wC)) / ${o1}(uniforms.strides.y);
            let dyC2 = (${o1}(dyCorner.y) + 1.0 + ${o1}(wC)) / ${o1}(uniforms.strides.y);
            let wCPerm = uniforms.filter_dims[1] - 1 - wC;
            if (wCPerm < 0) {
              continue;
            }
            var bDyCVal = true;
            var bDyCVal2 = true;
            if (dyC < 0.0 || dyC >= ${o1}(uniforms.Dy_shape[2]) ||
                fract(dyC) > 0.0) {
              bDyCVal = false;
            }
            if (dyC2 < 0.0 || dyC2 >= ${o1}(uniforms.Dy_shape[2]) ||
                fract(dyC2) > 0.0) {
              bDyCVal2 = false;
            }

            let idyC: u32 = u32(dyC);
            let idyC2: u32 = u32(dyC2);
            if (bDyCVal && bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${v1.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${o1}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;

                xValue =  ${v1.get("batch","idyR","idyC2","d2")};

                dotProd[1] = dotProd[1] + vec4<${o1}>(dot(xValue, wValue0),
                                                    dot(xValue, wValue1),
                                                    dot(xValue, wValue2),
                                                    dot(xValue, wValue3));
              }
            } else if (bDyCVal) {
              let d2Length = uniforms.Dy_shape[${c1}];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${v1.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${o1}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;
              }
            } else if (bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${g1.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${v1.get("batch","idyR","idyC2","d2")};
                let tmpval = vec4<${o1}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[1] = dotProd[1] + tmpval;
              }
            }
          }
        }

        for (var i: u32 = 0; i < ${d1}; i = i + 1) {
          let value = dotProd[i] + ${r1?"bias[c+i]":`vec4<${o1}>(0.0)`};
          ${y1.set("batch","r","c + i","d1","value")};
        }
      }`,E1=`
          let outputIndices = ${y1.offsetToIndices("global_idx")};
          let batch = ${y1.indicesGet("outputIndices",0)};
          let d1 = ${y1.indicesGet("outputIndices",c1)};
          let r = ${y1.indicesGet("outputIndices",s1)};
          let c = ${y1.indicesGet("outputIndices",l1)};
          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
          let dyRCorner = dyCorner.x;
          let dyCCorner = dyCorner.y;
          let groupId = d1 / uniforms.output_channels_per_group;
          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
          // ? = to be determined. : = across all values in that axis.
          var dotProd = ${o1}(0.0);
          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
            if (wR % uniforms.dilations.x != 0) {
              continue;
            }
            let dyR = (${o1}(dyRCorner) + ${o1}(wR)) / ${o1}(uniforms.strides[0]);
            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
            if (dyR < 0.0 || dyR >= ${o1}(uniforms.Dy_shape[${s1}]) || fract(dyR) > 0.0 ||
                wRPerm < 0) {
              continue;
            }
            let idyR: u32 = u32(dyR);

            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
              if (wC % uniforms.dilations.y != 0) {
                continue;
              }
              let dyC = (${o1}(dyCCorner) + ${o1}(wC)) / ${o1}(uniforms.strides.y);
              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
              if (dyC < 0.0 || dyC >= ${o1}(uniforms.Dy_shape[${l1}]) ||
                  fract(dyC) > 0.0 || wCPerm < 0) {
                continue;
              }
              let idyC: u32 = u32(dyC);
              var inputChannel = groupId * uniforms.input_channels_per_group;
              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {
                let xValue = ${u1?v1.get("batch","idyR","idyC","inputChannel"):v1.get("batch","inputChannel","idyR","idyC")};
                let wValue = ${g1.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};
                dotProd = dotProd + xValue * wValue;
                inputChannel = inputChannel + 1;
              }
            }
          }
          let value = dotProd + ${r1?"bias[d1]":`${o1}(0.0)`};
          ${y1.setByOffset("global_idx","value")};
        `;return`
  ${e1.registerUniforms(a1).declareVariables(...$1,y1)}
  ${h1}

    ${e1.mainStart()}
    ${e1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
  ${i1?_1:E1}}`},yo=(e1,_g,t1)=>{let r1=e1.length>2,n1=_g.outputShape,i1=M$1.size(n1),o1=[Math.ceil(i1/64),1,1];Ne("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${o1}`);let a1=_g.format==="NHWC",u1=["rank","rank"],s1=[_g.strides[0],_g.strides[1]],l1=[_g.kernelShape[a1?1:2],_g.kernelShape[a1?2:3]],c1=[_g.dilations[0],_g.dilations[1]],d1=[l1[0]+(_g.dilations[0]<=1?0:(_g.kernelShape[a1?1:2]-1)*(_g.dilations[0]-1)),l1[1]+(_g.dilations[1]<=1?0:(_g.kernelShape[a1?2:3]-1)*(_g.dilations[1]-1))],h1=[d1[0]-1-Math.floor((_g.pads[0]+_g.pads[2])/2),d1[1]-1-Math.floor(_g.pads[1]+_g.pads[3])/2],f1=!1,g1=_g.group,v1=e1[1].dims,$1=v1[0]/g1,y1=v1[1],_1=[{type:12,data:i1},{type:12,data:s1},{type:12,data:l1},{type:12,data:c1},{type:12,data:d1},{type:6,data:h1},{type:12,data:$1},{type:12,data:y1},...X(e1[0].dims,e1[1].dims)];r1&&(_1.push(...X(e1[2].dims)),u1.push("rank")),_1.push(...X(n1));let E1=o1[1]===1&&o1[2]===1,T1=P1=>{let k1=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:s1.length},{name:"filter_dims",type:"u32",length:l1.length},{name:"dilations",type:"u32",length:l1.length},{name:"effective_filter_dims",type:"u32",length:d1.length},{name:"pads",type:"i32",length:h1.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],N1=De(e1[0].dataType);return`${Ep(P1,e1,n1,r1,E1,f1,N1,k1,a1)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${_g.cacheKey};`,inputDependencies:u1},getRunData:()=>({dispatchGroup:{x:o1[0],y:o1[1],z:o1[2]},outputs:[{dims:t1?t1(n1):n1,dataType:e1[0].dataType}],programUniforms:_1}),getShaderSource:T1}}}),kp,Op,Pp,ju,Ku,Rp,zp,Bp,Dp,Yu,Xu=j(()=>{Fu(),qu(),Zt(),Rr(),kp=(e1,_g,t1,r1,n1,i1)=>(e1-1)*_g+t1+(r1-1)*n1+1-i1,Op=(e1,_g,t1,r1,n1)=>{let i1=Math.floor(e1/2);_g==="SAME_UPPER"?(t1[r1]=i1,t1[n1]=e1-i1):_g==="SAME_LOWER"&&(t1[r1]=e1-i1,t1[n1]=i1)},Pp=(e1,_g,t1,r1,n1,i1,o1,a1,u1,s1)=>{let l1=e1.length-2,c1=s1.length===0;if(u1.length===0)for(let f1=0;f1<l1;++f1)u1.push(0);let d1=e1[0],h1=_g[a1?3:1]*n1;for(let f1=0,g1=e1.length-l1-(a1?1:0);f1<l1;++f1,++g1){let v1=e1[g1],$1=c1?v1*o1[f1]:s1[f1],y1=kp(v1,o1[f1],i1[f1],_g[g1],t1[f1],$1);Op(y1,r1,i1,f1,f1+l1),c1&&s1.push(o1[f1]*(v1-1)+u1[f1]+(_g[g1]-1)*t1[f1]+1-i1[f1]-i1[f1+l1])}s1.splice(0,0,d1),s1.splice(a1?3:1,0,h1)},ju=(e1,_g)=>{let t1=e1.kernelShape.slice();if(e1.kernelShape.length===0||e1.kernelShape.reduce((c1,d1)=>c1*d1,1)===0){t1.length=0;for(let c1=2;c1<_g[1].dims.length;++c1)t1.push(_g[1].dims[c1])}let r1=e1.format==="NHWC";t1.splice(0,0,_g[1].dims[0]),t1.splice(r1?3:1,0,_g[1].dims[1]);let n1=e1.pads.slice(),i1=e1.outputShape.slice(),o1=e1.outputPadding.slice(),a1=_g[0].dims,u1=e1.dilations.slice();if(u1.reduce((c1,d1)=>c1+d1,0)===0){let c1=_g[0].dims.length-2;u1=new Array(c1).fill(1)}let s1=e1.strides.slice();if(s1.reduce((c1,d1)=>c1+d1,0)===0){let c1=_g[0].dims.length-2;s1=new Array(c1).fill(1)}Pp(a1,t1,u1,e1.autoPad,e1.group,n1,s1,r1,o1,i1);let l1=Object.assign({},e1);return Object.assign(l1,{kernelShape:t1,pads:n1,outputPadding:o1,outputShape:i1,dilations:u1,strides:s1}),l1},Ku=e1=>{let _g=ei(e1),t1=e1.format,r1=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e1.autoPad>"u"?0:e1.autoPad],n1=e1.dilations,i1=e1.group,o1=e1.kernelShape,a1=e1.pads,u1=e1.strides,s1=e1.wIsConst(),l1=e1.outputPadding,c1=e1.outputShape;return{autoPad:r1,format:t1,dilations:n1,group:i1,kernelShape:o1,outputPadding:l1,outputShape:c1,pads:a1,strides:u1,wIsConst:s1,..._g,cacheKey:`${e1.format};${_g.activation};`}},Rp=(e1,_g)=>{if(!e1||e1.length!==2&&e1.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e1[0].dims.length!==4&&e1[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e1[0].dims.length!==e1[1].dims.length)throw new Error("filter does not have same dimension as input");let t1=e1[0].dims[_g.format==="NHWC"?e1[0].dims.length-1:1],r1=e1[1].dims[0];if(t1!==r1)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let n1=e1[1].dims[1]*_g.group;if(e1.length===3&&(e1[2].dims.length!==1||e1[2].dims[0]!==n1))throw new Error("invalid bias");let i1=e1[0].dims.length-2;if(_g.dilations.reduce((o1,a1)=>o1+a1,0)>0&&_g.dilations.length!==i1)throw new Error(`dilations should be ${i1}D`);if(_g.strides.reduce((o1,a1)=>o1+a1,0)>0&&_g.strides.length!==i1)throw new Error(`strides should be ${i1}D`);if(_g.pads.reduce((o1,a1)=>o1+a1,0)>0&&_g.pads.length!==i1*2)throw new Error(`pads should be ${i1*2}D`);if(_g.outputPadding.length!==i1&&_g.outputPadding.length!==0)throw new Error(`output_padding should be ${i1}D`);if(_g.kernelShape.reduce((o1,a1)=>o1+a1,0)>0&&_g.kernelShape.length!==0&&_g.kernelShape.length!==e1[1].dims.length-2)throw new Error("invalid kernel shape");if(_g.outputShape.length!==0&&_g.outputShape.length!==e1[0].dims.length-2)throw new Error("invalid output shape")},zp=[2,3,1,0],Bp=(e1,_g,t1)=>{let r1=ju(t1,_g),n1=t1.format==="NHWC",i1=r1.outputShape,o1=i1[n1?3:1],a1=_g[0].dims[n1?3:1];if(r1.group!==1||o1===1&&a1===1){e1.compute(yo(_g,r1));return}let u1=i1[n1?1:2],s1=i1[n1?2:3],l1=_g[1].dims[2],c1=_g[1].dims[3],d1=n1?u1*s1:o1,h1=n1?o1:u1*s1,f1=l1*c1*a1,g1=!0,v1=e1.kernelCustomData.wT??e1.compute(xt(_g[1],zp),{inputs:[1],outputs:[t1.wIsConst?-2:-1]})[0];t1.wIsConst&&!e1.kernelCustomData.wT&&(e1.kernelCustomData.wT=v1);let $1=[_g[0],v1],y1=_g.length===3;y1&&(!n1&&_g[2].dims.length===1?$1.push(_g[2].reshape([_g[2].dims[0],1,1])):$1.push(_g[2])),e1.compute(Lu($1,r1,i1,d1,h1,f1,y1,g1),{inputs:$1})},Dp=(e1,_g)=>{let t1=_g.format==="NHWC",r1=[e1.inputs[0].reshape(t1?[e1.inputs[0].dims[0],1,e1.inputs[0].dims[1],e1.inputs[0].dims[2]]:[e1.inputs[0].dims[0],e1.inputs[0].dims[1],1,e1.inputs[0].dims[2]]),e1.inputs[1].reshape([e1.inputs[1].dims[0],e1.inputs[1].dims[1],1,e1.inputs[1].dims[2]])];e1.inputs.length===3&&r1.push(e1.inputs[2]);let n1=_g.kernelShape;(n1.length===0||n1[0]===0)&&(n1=[e1.inputs[1].dims[2]]);let i1=_g.dilations;(i1.length===0||i1[0]===0)&&(i1=[1]);let o1=_g.strides;(o1.length===0||o1[0]===0)&&(o1=[1]);let a1=_g.pads;a1.length===0&&(a1=[0,0]),a1=[0,a1[0],0,a1[1]],o1=[1].concat(o1),i1=[1].concat(i1),n1=[1].concat(n1);let u1=ju({..._g,pads:a1,strides:o1,dilations:i1,kernelShape:n1},r1);e1.compute(yo(r1,u1,s1=>t1?[s1[0],s1[2],s1[3]]:[s1[0],s1[1],s1[3]]))},Yu=(e1,_g)=>{Rp(e1.inputs,_g),e1.inputs[0].dims.length===3?Dp(e1,_g):Bp(e1,e1.inputs,_g)}}),Mp,Zu,Qu,Ju=j(()=>{ye(),xe(),Ze(),_e(),Mp=(e1,_g,t1,r1)=>{let n1=M$1.size(_g),i1=_g.length,o1=U$1("input",e1,i1),a1=K("output",e1,i1),u1=t1.dataType===6?t1.getInt32Array()[0]:Number(t1.getBigInt64Array()[0]),s1=M$1.normalizeAxis(u1,i1),l1=c1=>{let d1=` i32(${o1.indicesGet("inputIndices","uniforms.axis")}) `,h1=fe("uniforms.input_shape","uniforms.axis",i1),f1=r1.reverse?d1+(r1.exclusive?" + 1":""):"0",g1=r1.reverse?h1:d1+(r1.exclusive?"":" + 1");return`
                ${c1.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(o1,a1)}
                ${c1.mainStart()}
                  ${c1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${a1.offsetToIndices("global_idx")};
                  var sum = ${a1.type.value}(0);
                  let first : i32 = ${f1};
                  let last : i32 = ${g1};
                  for (var i : i32 = first; i < last; i++) {
                    ${o1.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${o1.getByIndices("inputIndices")};
                  }
                  ${a1.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:r1.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:_g,dataType:e1}],dispatchGroup:{x:Math.ceil(n1/64)},programUniforms:[{type:12,data:n1},{type:12,data:s1},...X(_g,_g)]}),getShaderSource:l1}},Zu=(e1,_g)=>{let t1=e1.inputs[0].dims,r1=e1.inputs[0].dataType,n1=e1.inputs[1];e1.compute(Mp(r1,t1,n1,_g),{inputs:[0]})},Qu=e1=>{let _g=e1.exclusive===1,t1=e1.reverse===1;return we({exclusive:_g,reverse:t1})}}),Up,Wp,Np,el,tl,rl=j(()=>{ye(),xe(),Ze(),_e(),Up=e1=>{if(!e1||e1.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e1[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Wp=(e1,_g,t1,r1)=>{let n1=[];n1.push(`fn perm(i: ${r1.type.indices}) -> ${t1.type.indices} {
    var a: ${t1.type.indices};`);for(let i1=0;i1<_g;++i1)n1.push(t1.indicesSet("a",e1[i1],`i[${i1}]`));return n1.push("return a;}"),n1.join(`
`)},Np=(e1,_g)=>{let t1,r1,n1,i1,o1,a1,u1=_g.format==="NHWC",s1=_g.blocksize,l1=_g.mode==="DCR";u1?([t1,r1,n1,i1]=e1.dims,o1=l1?[t1,r1,n1,s1,s1,i1/s1**2]:[t1,r1,n1,i1/s1**2,s1,s1],a1=l1?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([t1,r1,n1,i1]=[e1.dims[0],e1.dims[2],e1.dims[3],e1.dims[1]],o1=l1?[t1,s1,s1,i1/s1**2,r1,n1]:[t1,i1/s1**2,s1,s1,r1,n1],a1=l1?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let c1=e1.reshape(o1),d1=c1.dims.length,h1=e1.dataType,f1=U$1("a",h1,d1),g1=K("output",h1,d1),v1=$1=>`
  ${$1.registerUniform("output_size","u32").declareVariables(f1,g1)}

  ${Wp(a1,d1,f1,g1)}

  ${$1.mainStart()}
    ${$1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${g1.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${g1.setByOffset("global_idx",f1.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e1.dims};${_g.blocksize};${_g.mode}`,inputDependencies:["rank"]},getRunData:$1=>{let y1=u1?[t1,r1*s1,n1*s1,i1/s1**2]:[t1,i1/s1**2,r1*s1,n1*s1],_1=M$1.size(y1),E1=c1.dims,T1=M$1.sortBasedOnPerm(E1,a1);return{outputs:[{dims:y1,dataType:$1[0].dataType}],dispatchGroup:{x:Math.ceil(_1/64)},programUniforms:[{type:12,data:_1},...X(E1,T1)]}},getShaderSource:v1}},el=(e1,_g)=>{Up(e1.inputs),e1.compute(Np(e1.inputs[0],_g))},tl=e1=>we({blocksize:e1.blocksize,mode:e1.mode,format:e1.format})}),bo,ai,nl,Vp,Hp,vo,wo,il,Gp,ol,al,sl=j(()=>{ye(),xe(),Ze(),_e(),bo="[a-zA-Z]|\\.\\.\\.",ai="("+bo+")+",nl="^"+ai+"$",Vp="("+ai+",)*"+ai,Hp="^"+Vp+"$",vo=class{constructor(e1=-1){this.symbolToIndices=new Map,this.inputIndex=e1}addSymbol(e1,_g){let t1=this.symbolToIndices.get(e1);t1===void 0?t1=[_g]:t1.push(_g),this.symbolToIndices.set(e1,t1)}},wo=class{constructor(e1,_g){var n1;this.equation=_g,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[t1,r1]=_g.includes("->")?_g.split("->",2):[_g,""];if(!t1.match(RegExp(Hp)))throw new Error("Invalid LHS term");if(t1.split(",").forEach((i1,o1)=>{let a1=e1[o1].dims.slice();if(!i1.match(RegExp(nl)))throw new Error("Invalid LHS term");let u1=this.processTerm(i1,!0,a1,o1);this.lhs.push(u1)}),r1==="")r1+=[...this.symbolToInfo.entries()].filter(([i1,o1])=>o1.count===1||i1==="...").map(([i1])=>i1).join("");else if(!r1.match(RegExp(ai)))throw new Error("Invalid RHS");(n1=r1.match(RegExp(bo,"g")))==null||n1.forEach(i1=>{if(i1==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let o1=this.symbolToInfo.get(i1);if(o1===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(o1.dimValue)}}),this.rhs=this.processTerm(r1,!1,this.outputDims)}addSymbol(e1,_g,t1){let r1=this.symbolToInfo.get(e1);if(r1!==void 0){if(r1.dimValue!==_g&&r1.count!==1)throw new Error("Dimension mismatch");r1.count++,r1.inputIndices.push(t1)}else r1={count:1,dimValue:_g,inputIndices:[t1]};this.symbolToInfo.set(e1,r1)}processTerm(e1,_g,t1,r1=-1){let n1=t1.length,i1=!1,o1=[],a1=0;if(!e1.match(RegExp(nl))&&!_g&&e1!=="")throw new Error("Invalid LHS term");let u1=e1.match(RegExp(bo,"g")),s1=new vo(r1);return u1==null||u1.forEach((l1,c1)=>{if(l1==="..."){if(i1)throw new Error("Only one ellipsis is allowed per input term");i1=!0;let d1=n1-u1.length+1;if(d1<0)throw new Error("Ellipsis out of bounds");if(o1=t1.slice(a1,a1+d1),this.hasEllipsis){if(this.ellipsisDims.length!==o1.length||this.ellipsisDims.toString()!==o1.toString())throw new Error("Ellipsis dimensions mismatch")}else if(_g)this.hasEllipsis=!0,this.ellipsisDims=o1;else throw new Error("Ellipsis must be specified in the LHS");for(let h1=0;h1<o1.length;h1++){let f1=String.fromCharCode(48+h1);s1.addSymbol(f1,c1+h1),this.addSymbol(f1,t1[a1++],r1)}}else s1.addSymbol(l1,c1+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(l1,t1[a1++],r1)}),s1}},il=e1=>e1+"_max",Gp=(e1,_g,t1,r1)=>{let n1=e1.map(s1=>s1.length).map((s1,l1)=>U$1(`input${l1}`,_g,s1)),i1=M$1.size(r1),o1=K("output",_g,r1.length),a1=[...t1.symbolToInfo.keys()].filter(s1=>!t1.rhs.symbolToIndices.has(s1)),u1=s1=>{let l1=[],c1="var prod = 1.0;",d1="var sum = 0.0;",h1="sum += prod;",f1=[],g1=[],v1=[],$1=[],y1=t1.symbolToInfo.size===t1.rhs.symbolToIndices.size;t1.symbolToInfo.forEach((E1,T1)=>{var P1;if(t1.rhs.symbolToIndices.has(T1)){let k1=(P1=t1.rhs.symbolToIndices.get(T1))==null?void 0:P1[0];k1!==void 0&&t1.lhs.forEach((N1,W1)=>{if(E1.inputIndices.includes(W1)){let H1=N1.symbolToIndices.get(T1);if(H1===void 0)throw new Error("Invalid symbol error");H1.forEach(ty=>{l1.push(`${n1[W1].indicesSet(`input${W1}Indices`,ty,o1.indicesGet("outputIndices",k1))}`)})}})}else t1.lhs.forEach((k1,N1)=>{if(E1.inputIndices.includes(N1)){let W1=k1.symbolToIndices.get(T1);if(W1===void 0)throw new Error("Invalid symbol error");W1.forEach(H1=>{f1.push(`${n1[N1].indicesSet(`input${N1}Indices`,H1,`${T1}`)}`)}),$1.push(`prod *= ${n1[N1].getByIndices(`input${N1}Indices`)};`)}}),g1.push(`for(var ${T1}: u32 = 0; ${T1} < uniforms.${il(T1)}; ${T1}++) {`),v1.push("}")});let _1=y1?[...l1,`let sum = ${n1.map((E1,T1)=>E1.getByIndices(`input${T1}Indices`)).join(" * ")};`]:[...l1,d1,...g1,...f1,c1,...$1,h1,...v1];return`
            ${s1.registerUniforms(a1.map(E1=>({name:`${il(E1)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...n1,o1)}

            ${s1.mainStart()}
            ${s1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${o1.offsetToIndices("global_idx")};
            ${n1.map((E1,T1)=>`var input${T1}Indices: ${n1[T1].type.indices};`).join(`
`)}
            ${_1.join(`
`)};
            ${o1.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:t1.equation,inputDependencies:e1.map(()=>"rank")},getRunData:()=>{let s1=a1.filter(c1=>t1.symbolToInfo.has(c1)).map(c1=>{var d1;return{type:12,data:((d1=t1.symbolToInfo.get(c1))==null?void 0:d1.dimValue)||0}});s1.push({type:12,data:i1});let l1=e1.map((c1,d1)=>[...X(c1)]).reduce((c1,d1)=>c1.concat(d1),s1);return l1.push(...X(r1)),{outputs:[{dims:r1,dataType:_g}],dispatchGroup:{x:Math.ceil(i1/64)},programUniforms:l1}},getShaderSource:u1}},ol=(e1,_g)=>{let t1=new wo(e1.inputs,_g.equation),r1=t1.outputDims,n1=e1.inputs.map((i1,o1)=>i1.dims);e1.compute(Gp(n1,e1.inputs[0].dataType,t1,r1))},al=e1=>{let _g=e1.equation.replace(/\s+/g,"");return we({equation:_g})}}),Lp,ul,Fp,qp,ll,dl=j(()=>{ye(),xe(),_e(),Lp=e1=>{if(!e1||e1.length!==2)throw new Error("Expand requires 2 input.");let _g=e1[0].dims,t1=Array.from(e1[1].getBigInt64Array(),Number),r1=t1.length<_g.length?0:t1.length-_g.length,n1=_g.length<t1.length?0:_g.length-t1.length;for(;r1<t1.length&&n1<_g.length;++r1,++n1)if(t1[r1]!==_g[n1]&&t1[r1]!==1&&_g[n1]!==1)throw new Error("Expand requires shape to be broadcastable to input")},ul=(e1,_g)=>{let t1=e1.length-_g.length,r1=[];for(let n1=0;n1<t1;++n1)r1.push(e1[n1]);for(let n1=0;n1<_g.length;++n1)r1.push(_g[n1]===1?e1[n1+t1]:_g[n1]);return r1},Fp=(e1,_g)=>e1.length>_g.length?ul(e1,_g):ul(_g,e1),qp=e1=>{let _g=e1[0].dims,t1=Array.from(e1[1].getBigInt64Array(),Number),r1=Fp(_g,t1),n1=e1[0].dataType,i1=n1===9?4:1,o1=Math.ceil(M$1.size(r1)/i1),a1=s1=>{let l1=U$1("input",n1,_g.length,i1),c1=K("output",n1,r1.length,i1),d1;if(n1===9){let h1=(f1,g1,v1="")=>`
          let outputIndices${g1} = ${c1.offsetToIndices(`outputOffset + ${g1}u`)};
          let offset${g1} = ${l1.broadcastedIndicesToOffset(`outputIndices${g1}`,c1)};
          let index${g1} = offset${g1} / 4u;
          let component${g1} = offset${g1} % 4u;
          ${f1}[${g1}] = ${v1}(${l1.getByOffset(`index${g1}`)}[component${g1}]);
        `;d1=`
        let outputOffset = global_idx * ${i1};
        var data = vec4<u32>(0);
        ${h1("data",0,"u32")}
        ${h1("data",1,"u32")}
        ${h1("data",2,"u32")}
        ${h1("data",3,"u32")}
        ${c1.setByOffset("global_idx","data")}
      }`}else d1=`
        let outputIndices = ${c1.offsetToIndices("global_idx")};
        let inputOffset = ${l1.broadcastedIndicesToOffset("outputIndices",c1)};
        ${c1.setByOffset("global_idx",l1.getByOffset("inputOffset"))}
      }`;return`
    ${s1.registerUniform("vec_size","u32").declareVariables(l1,c1)}
    ${s1.mainStart()}
    ${s1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${d1}`},u1=[{type:12,data:o1},...X(_g,r1)];return{name:"Expand",shaderCache:{hint:`${r1.length}`,inputDependencies:["rank"]},getShaderSource:a1,getRunData:()=>({outputs:[{dims:r1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(o1/64)},programUniforms:u1})}},ll=e1=>{Lp(e1.inputs),e1.compute(qp(e1.inputs),{inputs:[0]})}}),jp,cl,pl=j(()=>{ye(),xe(),_e(),Jn(),jp=e1=>{let _g=e1[0].dataType,t1=M$1.size(e1[0].dims),r1=M$1.size(e1[1].dims),n1=r1%4===0,i1=o1=>{let a1=U$1("x",_g,[1],4),u1=U$1("bias",_g,[1],4),s1=K("y",_g,[1],4),l1=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],c1=h1=>`
      let bias${h1}_offset: u32 = (global_idx * 4 + ${h1}) % uniforms.bias_size;
      let bias${h1} = ${u1.getByOffset(`bias${h1}_offset / 4`)}[bias${h1}_offset % 4];`,d1=n1?`
      let bias = ${u1.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${c1(0)}${c1(1)}${c1(2)}${c1(3)}
      let bias = ${a1.type.value}(bias0, bias1, bias2, bias3);`;return`${o1.registerUniforms(l1).declareVariables(a1,u1,s1)}

    ${ao(rt(_g))}

    ${o1.mainStart(mr)}
      ${o1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${a1.getByOffset("global_idx")};
      ${d1}
      let x_in = x + bias;
      ${s1.setByOffset("global_idx",so("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${n1}`,inputDependencies:["type","type"]},getShaderSource:i1,getRunData:o1=>({outputs:[{dims:o1[0].dims,dataType:o1[0].dataType}],programUniforms:[{type:12,data:Math.ceil(t1/4)},{type:12,data:r1}],dispatchGroup:{x:Math.ceil(t1/mr/4)}})}},cl=e1=>{e1.inputs.length<2||M$1.size(e1.inputs[1].dims)===0?wu(e1):e1.compute(jp(e1.inputs))}}),Kp,Yp,ml,fl,hl=j(()=>{ye(),xe(),Ze(),_e(),Kp=e1=>{if(!e1||e1.length!==2)throw new Error("Gather requires 2 inputs.")},Yp=(e1,_g)=>{let t1=e1[0].dims,r1=e1[1].dims,n1=t1.length,i1=M$1.normalizeAxis(_g.axis,n1),o1=t1.slice(0);o1.splice(i1,1,...r1);let a1=t1[i1],u1=e1[0].dataType===9?4:1,s1=Math.ceil(M$1.size(o1)/u1),l1=[{type:12,data:s1},{type:6,data:a1},{type:12,data:i1},...X(e1[0].dims,e1[1].dims,o1)],c1=d1=>{let h1=U$1("data",e1[0].dataType,e1[0].dims.length,u1),f1=U$1("inputIndices",e1[1].dataType,e1[1].dims.length),g1=K("output",e1[0].dataType,o1.length,u1),v1=y1=>{let _1=r1.length,E1=`var indicesIndices${y1}  = ${f1.type.indices}(0);`;for(let T1=0;T1<_1;T1++)E1+=`${_1>1?`indicesIndices${y1}[${T1}]`:`indicesIndices${y1}`} = ${o1.length>1?`outputIndices${y1}[uniforms.axis + ${T1}]`:`outputIndices${y1}`};`;E1+=`
          var idx${y1} = ${f1.getByIndices(`indicesIndices${y1}`)};
          if (idx${y1} < 0) {
            idx${y1} = idx${y1} + uniforms.axisDimLimit;
          }
          var dataIndices${y1} : ${h1.type.indices};
        `;for(let T1=0,P1=0;T1<n1;T1++)T1===i1?(E1+=`${n1>1?`dataIndices${y1}[${T1}]`:`dataIndices${y1}`} = u32(idx${y1});`,P1+=_1):(E1+=`${n1>1?`dataIndices${y1}[${T1}]`:`dataIndices${y1}`} = ${o1.length>1?`outputIndices${y1}[${P1}]`:`outputIndices${y1}`};`,P1++);return E1},$1;if(e1[0].dataType===9){let y1=(_1,E1,T1="")=>`
          let outputIndices${E1} = ${g1.offsetToIndices(`outputOffset + ${E1}u`)};
          ${v1(E1)};
          let offset${E1} = ${h1.indicesToOffset(`dataIndices${E1}`)};
          let index${E1} = offset${E1} / 4u;
          let component${E1} = offset${E1} % 4u;
          ${_1}[${E1}] = ${T1}(${h1.getByOffset(`index${E1}`)}[component${E1}]);
        `;$1=`
        let outputOffset = global_idx * ${u1};
        var value = vec4<u32>(0);
        ${y1("value",0,"u32")}
        ${y1("value",1,"u32")}
        ${y1("value",2,"u32")}
        ${y1("value",3,"u32")}
        ${g1.setByOffset("global_idx","value")}
      `}else $1=`
      let outputIndices = ${g1.offsetToIndices("global_idx")};
      ${v1("")};
      let value = ${h1.getByIndices("dataIndices")};
      ${g1.setByOffset("global_idx","value")};
      `;return`
      ${d1.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(h1,f1,g1)}
      ${d1.mainStart()}
        ${d1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${$1}
      }`};return{name:"Gather",shaderCache:{hint:_g.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:o1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(s1/64)},programUniforms:l1}),getShaderSource:c1}},ml=e1=>we({axis:e1.axis}),fl=(e1,_g)=>{let t1=e1.inputs;Kp(t1),e1.compute(Yp(e1.inputs,_g))}}),Xp,Zp,gl,yl,bl=j(()=>{ye(),xe(),Ze(),_e(),Xp=e1=>{if(!e1||e1.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e1[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e1[0].dims.length!==e1[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},Zp=(e1,_g)=>{let t1=e1[0].dims,r1=e1[0].dataType,n1=t1.length,i1=e1[1].dims,o1=e1[1].dataType,a1=M$1.normalizeAxis(_g.axis,n1),u1=t1[a1],s1=i1.slice(0),l1=M$1.size(s1),c1=U$1("input",r1,n1),d1=U$1("indicesInput",o1,i1.length),h1=K("output",r1,s1.length),f1=[{type:12,data:l1},{type:6,data:u1},{type:12,data:a1}];return f1.push(...X(t1,i1,s1)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:s1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(l1/64)},programUniforms:f1}),getShaderSource:g1=>`
      ${g1.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(c1,d1,h1)}
      ${g1.mainStart()}
      ${g1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${h1.offsetToIndices("global_idx")};

      var idx = ${d1.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${c1.type.indices}(outputIndices);
      ${c1.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${c1.getByIndices("inputIndices")};

      ${h1.setByOffset("global_idx","value")};
  }`}},gl=e1=>we({axis:e1.axis}),yl=(e1,_g)=>{let t1=e1.inputs;Xp(t1),e1.compute(Zp(e1.inputs,_g))}}),Qp,Jp,vl,wl,$l=j(()=>{ye(),xe(),_e(),Qp=e1=>{if(!e1)throw new Error("Input is missing");if(e1.length<2||e1.length>3)throw new Error("Invaid input number.");if(e1.length===3&&e1[2].dims.length>2)throw new Error("Invalid input shape of C");if(e1[0].dataType!==e1[1].dataType||e1.length===3&&e1[0].dataType!==e1[2].dataType)throw new Error("Input types are mismatched")},Jp=(e1,_g)=>{let t1=e1[0].dims.slice(),r1=e1[1].dims.slice(),[n1,i1,o1]=Gn.getShapeOfGemmResult(t1,_g.transA,r1,_g.transB,e1.length===3?e1[2].dims:void 0),a1=[n1,i1];if(!a1)throw new Error("Can't use gemm on the given tensors");let u1=M$1.size(a1),s1=[{type:12,data:u1},{type:12,data:n1},{type:12,data:i1},{type:12,data:o1},{type:1,data:_g.alpha},{type:1,data:_g.beta}],l1=["type","type"];e1.length===3&&(s1.push(...X(e1[2].dims)),l1.push("rank")),s1.push(...X(a1));let c1=d1=>{let h1="";_g.transA&&_g.transB?h1="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":_g.transA&&!_g.transB?h1="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!_g.transA&&_g.transB?h1="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!_g.transA&&!_g.transB&&(h1="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let f1=_g.alpha===1?"":"value *= uniforms.alpha;",g1=U$1("a",e1[0].dataType,e1[0].dims),v1=U$1("b",e1[1].dataType,e1[1].dims),$1=g1.type.value,y1=null,_1=[g1,v1];e1.length===3&&(y1=U$1("c",e1[2].dataType,e1[2].dims.length),_1.push(y1));let E1=K("output",e1[0].dataType,a1.length);_1.push(E1);let T1=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${d1.registerUniforms(T1).declareVariables(..._1)}

  ${d1.mainStart()}
    ${d1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${$1}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${h1}
    }

    ${f1}
    ${y1!=null?`let cOffset = ${y1.broadcastedIndicesToOffset("vec2(m, n)",E1)}; value += ${$1}(uniforms.beta) * ${y1.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`};return{name:"Gemm",shaderCache:{hint:`${_g.cacheKey}`,inputDependencies:l1},getRunData:()=>({outputs:[{dims:a1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(u1/64)},programUniforms:s1}),getShaderSource:c1}},vl=e1=>{let _g=e1.transA,t1=e1.transB,r1=e1.alpha,n1=e1.beta;return{transA:_g,transB:t1,alpha:r1,beta:n1,cacheKey:`${e1.transA};${e1.transB};${e1.alpha===1}`}},wl=(e1,_g)=>{Qp(e1.inputs),e1.compute(Jp(e1.inputs,_g))}}),em,tm,rm,_l,xl=j(()=>{ye(),xe(),_e(),em=(e1,_g)=>{let t1=e1[0].dims,r1=t1,n1=2,i1=M$1.sizeToDimension(t1,n1),o1=M$1.sizeFromDimension(t1,n1),a1=Ue(o1),u1=o1/a1,s1=[t1[0],t1[1],u1],l1=["rank","type","type"],c1=[{type:12,data:o1},{type:12,data:u1}];c1.push(...X(s1,s1));let d1=h1=>{let f1=U$1("x",e1[0].dataType,s1.length,a1),g1=U$1("scale",e1[1].dataType,e1[1].dims),v1=U$1("bias",e1[2].dataType,e1[2].dims),$1=K("output",e1[0].dataType,s1.length,a1),y1=[f1,g1,v1,$1],_1=f1.type.value,E1=a1===1?"f32":`vec${a1}<f32>`,T1=64,P1=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`
  var<workgroup> meanShared : f32;
  var<workgroup> squaredNormShared : f32;
  var<workgroup> workgroupShared : array<${E1}, ${T1}>;
  const workgroupSize = ${T1}u;
  ${h1.registerUniforms(P1).declareVariables(...y1)}
  ${h1.mainStart(T1)}
    let norm = global_idx / workgroupSize;
    let batch = norm / uniforms.x_shape[1];
    let channel = norm % uniforms.x_shape[1];
    let localIndex = local_id.x;

    // initialize workgroup memory
    var initial = ${E1}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      initial = initial + ${E1}(${f1.get("batch","channel","h")});
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the mean of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      meanShared = ${Et("workgroupShared[0]",a1)} / f32(uniforms.normSize);
    }
    workgroupBarrier();

    // reinitialize workgroup memory.
    initial = ${E1}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let deviation =  ${E1}(${f1.get("batch","channel","h")}) - ${E1}(meanShared);
      initial = initial + deviation * deviation;
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the sum of square of deviation of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      squaredNormShared = ${Et("workgroupShared[0]",a1)};
    }
    workgroupBarrier();

    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${_g.epsilon}));
    let channelScale = invStdDev * f32(${g1.getByOffset("channel")});
    let channelShift = f32(${v1.getByOffset("channel")}) - meanShared * channelScale;
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let value = ${f1.get("batch","channel","h")} * ${_1}(${E1}(channelScale)) + ${_1}(${E1}(channelShift));
      ${$1.set("batch","channel","h","value")};
    }
  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${_g.epsilon};${a1}`,inputDependencies:l1},getRunData:()=>({outputs:[{dims:r1,dataType:e1[0].dataType}],dispatchGroup:{x:i1},programUniforms:c1}),getShaderSource:d1}},tm=(e1,_g,t1,r1,n1,i1,o1,a1)=>{let u1=Ue(o1),s1=64,l1=u1===1?"vec2f":`mat2x${u1}f`,c1=u1===1?"f32":`vec${u1}f`,d1=(P1,k1)=>`${l1}(${P1}, ${k1})`,h1=n1*o1/u1,f1=Math.ceil(i1/s1),g1=["type"],v1=[{type:12,data:f1},{type:12,data:i1},{type:12,data:Math.floor(o1/u1)},{type:12,data:Math.floor(i1*o1/u1)}],$1=P1=>{let k1=U$1("input",_g.dataType,_g.dims,u1);return`
  ${P1.declareVariables(k1)}
  @group(0) @binding(1) var<storage, read_write> output : array<${l1}>;
  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};
  @group(0) @binding(2) var<uniform> uniforms: Uniforms;

  ${P1.mainStart(s1)}
    let currentImageNumber = global_idx / ${s1} / uniforms.C;
    let currentChannelNumber = (global_idx / ${s1}) % uniforms.C;
    let wgOffset = local_id.x * uniforms.wg_size;
    if (wgOffset >= uniforms.H) {
        return;
    }
    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);

    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;
    var sum = ${At("f32",u1)};
    var squaredSum = ${At("f32",u1)};
    for (var i: u32 = wgOffset; i < wgMax; i++) {
        let value = ${c1}(input[offset + i * uniforms.C]);
        sum += value;
        squaredSum += value * value;
    }
    output[global_idx] = ${d1("sum","squaredSum")};
  }`},y1=e1.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${u1}`,inputDependencies:g1},getRunData:()=>({outputs:[{dims:[n1,o1,s1,2],dataType:1}],dispatchGroup:{x:n1*o1/u1},programUniforms:v1}),getShaderSource:$1},{inputs:[_g],outputs:[-1]})[0],_1=[{type:12,data:h1},{type:12,data:i1},{type:12,data:Math.floor(o1/u1)},{type:12,data:Math.floor(s1*o1/u1)}],E1=["type","type","type"],T1=P1=>{let k1=U$1("scale",t1.dataType,t1.dims,u1),N1=U$1("bias",r1.dataType,r1.dims,u1);return`
  @group(0) @binding(0) var<storage, read> input : array<${l1}>;
  @group(0) @binding(1) var<storage, read> scale : array<${k1.type.storage}>;
  @group(0) @binding(2) var<storage, read> bias : array<${N1.type.storage}>;
  @group(0) @binding(3) var<storage, read_write> output : array<${l1}>;
  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};
  @group(0) @binding(4) var<uniform> uniforms: Uniforms;

  ${P1.mainStart()}
    ${P1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}
    let currentImageNumber = global_idx / uniforms.C;
    let currentChannelNumber = global_idx % uniforms.C;

    let offset = currentImageNumber * uniforms.image_size;
    var sum = ${At("f32",u1)};
    var squaredSum = ${At("f32",u1)};
    for (var i: u32 = 0; i < min(${s1}, uniforms.H); i++) {
        let value = input[offset + i + currentChannelNumber * ${s1}];
        sum += value[0];
        squaredSum += value[1];
    }
    sum = sum / f32(uniforms.H);
    squaredSum = squaredSum / f32(uniforms.H);
    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${a1}));
    let channelScale = invStdDev * ${c1}(scale[currentChannelNumber]);
    let channelShift = ${c1}(bias[currentChannelNumber]) - sum * channelScale;

    output[global_idx] = ${d1("channelScale","channelShift")};
  }`};return e1.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${u1};${a1}`,inputDependencies:E1},getRunData:()=>({outputs:[{dims:[n1,o1,2],dataType:1}],dispatchGroup:{x:Math.ceil(h1/64)},programUniforms:_1}),getShaderSource:T1},{inputs:[y1,t1,r1],outputs:[-1]})[0]},rm=(e1,_g,t1)=>{let r1=_g[0].dims,n1=r1,i1=r1[0],o1=r1[r1.length-1],a1=M$1.sizeFromDimension(r1,1)/o1,u1=Ue(o1),s1=M$1.size(n1)/u1,l1=[{type:12,data:a1},{type:12,data:Math.floor(o1/u1)}],c1=["type","type"],d1=tm(e1,_g[0],_g[1],_g[2],i1,a1,o1,t1.epsilon),h1=f1=>{let g1=De(_g[0].dataType),v1=u1===1?"vec2f":`mat2x${u1}f`,$1=u1===1?g1:`vec${u1}<${g1}>`,y1=U$1("input",_g[0].dataType,_g[0].dims,u1),_1=K("output",_g[0].dataType,n1,u1);return`
  @group(0) @binding(0) var<storage, read> input : array<${y1.type.storage}>;
  @group(0) @binding(1) var<storage, read> scaleInput : array<${v1}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${_1.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${f1.mainStart()}
    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);
    let currentChannelNumber = global_idx % uniforms.C;

    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;
    let scale = scaleInput[scaleOffset];
    output[global_idx] = fma(input[global_idx], ${$1}(scale[0]), ${$1}(scale[1]));
  }`};e1.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${u1}`,inputDependencies:c1},getRunData:()=>({outputs:[{dims:n1,dataType:_g[0].dataType}],dispatchGroup:{x:Math.ceil(s1/64)},programUniforms:l1}),getShaderSource:h1},{inputs:[_g[0],d1]})},_l=(e1,_g)=>{_g.format==="NHWC"?rm(e1,e1.inputs,_g):e1.compute(em(e1.inputs,_g))}}),nm,im,Sl,Cl=j(()=>{ye(),xe(),_e(),nm=e1=>{if(!e1||e1.length<2)throw new Error("layerNorm requires at least 2 inputs.")},im=(e1,_g,t1)=>{let r1=_g.simplified,n1=e1[0].dims,i1=e1[1],o1=!r1&&e1[2],a1=n1,u1=M$1.normalizeAxis(_g.axis,n1.length),s1=M$1.sizeToDimension(n1,u1),l1=M$1.sizeFromDimension(n1,u1),c1=M$1.size(i1.dims),d1=o1?M$1.size(o1.dims):0;if(c1!==l1||o1&&d1!==l1)throw new Error(`Size of X.shape()[axis:] == ${l1}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${c1} and bias size of ${d1}`);let h1=[];for(let T1=0;T1<n1.length;++T1)T1<u1?h1.push(n1[T1]):h1.push(1);let f1=Ue(l1),g1=["type","type"],v1=[{type:12,data:s1},{type:1,data:l1},{type:12,data:Math.floor(l1/f1)},{type:1,data:_g.epsilon}];o1&&g1.push("type");let $1=t1>1,y1=t1>2,_1=T1=>{let P1=De(e1[0].dataType),k1=[U$1("x",e1[0].dataType,e1[0].dims,f1),U$1("scale",i1.dataType,i1.dims,f1)];o1&&k1.push(U$1("bias",o1.dataType,o1.dims,f1)),k1.push(K("output",e1[0].dataType,a1,f1)),$1&&k1.push(K("mean_data_output",1,h1)),y1&&k1.push(K("inv_std_output",1,h1));let N1=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${T1.registerUniforms(N1).declareVariables(...k1)}
  ${T1.mainStart()}
    ${T1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${At("f32",f1)};
    var mean_square_vector = ${At("f32",f1)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${fr(P1,f1,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Et("mean_vector",f1)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Et("mean_square_vector",f1)} / uniforms.norm_size ${r1?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${fr(P1,f1,"x[j + offset]")};
      let f32scale = ${fr(P1,f1,"scale[j]")};
      output[j + offset] = ${k1[0].type.value}((f32input ${r1?"":"- mean"}) * inv_std_dev * f32scale
        ${o1?`+ ${fr(P1,f1,"bias[j]")}`:""}
      );
    }

    ${$1?"mean_data_output[global_idx] = mean":""};
    ${y1?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},E1=[{dims:a1,dataType:e1[0].dataType}];return $1&&E1.push({dims:h1,dataType:1}),y1&&E1.push({dims:h1,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${f1};${t1};${r1}`,inputDependencies:g1},getRunData:()=>({outputs:E1,dispatchGroup:{x:Math.ceil(s1/64)},programUniforms:v1}),getShaderSource:_1}},Sl=(e1,_g)=>{nm(e1.inputs),e1.compute(im(e1.inputs,_g,e1.outputCount))}}),om,am,Il,Tl,Al=j(()=>{ye(),xe(),Ze(),_e(),om=(e1,_g)=>{if(e1.length<3||e1.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let t1=e1[0],r1=t1.dims.length;if(t1.dims[r1-1]!==_g.k)throw new Error("The last dim of input shape does not match the k value");let n1=Math.floor((_g.k+_g.blockSize-1)/_g.blockSize),i1=_g.blockSize/8*_g.bits,o1=e1[1];if(!M$1.areEqual(o1.dims,[_g.n,n1,i1]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let a1=e1[2].dims;if(M$1.size(a1)!==_g.n*n1)throw new Error("scales input size error.");if(e1.length===4){let u1=e1[3].dims,s1=_g.bits>4?_g.n*n1:_g.n*Math.floor((n1+1)/2);if(M$1.size(u1)!==s1)throw new Error("zeroPoints input size error.")}},am=(e1,_g,t1,r1)=>{let n1=e1[0].dims,i1=n1.length,o1=Math.floor((_g.k+_g.blockSize-1)/_g.blockSize),a1=n1[i1-2],u1=_g.k,s1=_g.n,l1=n1.slice(0,i1-2),c1=M$1.size(l1),d1=_g.blockSize/8*_g.bits/4,h1=e1[0].dataType,f1=Ue(a1),g1=Ue(_g.k),v1=Ue(d1),$1=cr(h1),y1=a1*o1*$1,_1=Math.floor(r1/y1),E1=o1<=t1[0]&&_1>0,T1=!E1||_1>=4?Ue(s1):_1>=2&&Ue(s1)>=2?2:1,P1=l1.concat([a1,s1]),k1=M$1.size(P1)/T1/f1,N1=E1?[]:[{type:12,data:k1},{type:12,data:_g.blockSize}],W1=[c1,a1,u1/g1],H1=M$1.convertShape(e1[1].dims).slice();H1.splice(-1,1,d1/v1),N1.push(...X(W1)),N1.push(...X(H1)),N1.push(...X(e1[2].dims)),e1.length===4&&N1.push(...X(M$1.convertShape(e1[3].dims)));let ty=[c1,a1,s1/T1];N1.push(...X(ty));let ey=ly=>{let oy=W1.length,Q1=U$1("a",e1[0].dataType,oy,g1),U1=U$1("b",12,H1.length,v1),V1=U$1("scales",e1[2].dataType,e1[2].dims.length),K1=[Q1,U1,V1],J1=e1.length===4?U$1("zero_points",12,e1[3].dims.length):void 0;J1&&K1.push(J1);let hy=ty.length,G1=K("output",e1[0].dataType,hy,T1),Y1=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],yy=De(e1[0].dataType),Oy=(()=>{switch(g1){case 1:return`array<${yy}, 8>`;case 2:return`mat4x2<${yy}>`;case 4:return`mat2x4<${yy}>`;default:throw new Error(`${g1}-component is not supported.`)}})(),Ey=`
        for (var word: u32 = 0; word < ${d1}; word += ${v1}) {
          ${U1.indicesSet("b_indices","2","word")};
          let b_data = ${U1.getByIndices("b_indices")};
          for (var i: u32 = 0; i < ${v1}; i++) {
            let b_value: u32 = ${v1===1?"b_data":"b_data[word + i]"};
            let b_mask: u32 = 0x0F0F0F0Fu;
            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);
            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);
            let b_quantized_values = ${Oy}(${Array.from({length:4},(Ay,Uy)=>`${yy}(b_value_lower[${Uy}]), ${yy}(b_value_upper[${Uy}])`).join(", ")});
            let b_dequantized_values = ${g1===1?`${Oy}(${Array.from({length:8},(Ay,Uy)=>`(b_quantized_values[${Uy}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${Oy}(${Array(8).fill("zero_point").join(",")})) * scale;`};
            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8
            for (var m: u32 = 0; m < ${E1?a1:f1}u; m++) {
              ${Q1.indicesSet("a_indices",oy-2,E1?"m":`row * ${f1} + m`)};
              ${Q1.indicesSet("a_indices",oy-1,"word_offset")};
              var input_offset = ${Q1.indicesToOffset("a_indices")};
              var a_data: ${Oy};
              for (var j: u32 = 0; j < ${8/g1}; j++) {
                a_data[j] = ${Q1.getByOffset("input_offset")};
                input_offset++;
              }
              ${E1?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${T1>1?"[c]":""} += ${Array.from({length:8/g1},(Ay,Uy)=>`${g1===1?`a_data[${Uy}] * b_dequantized_values[${Uy}]`:`dot(a_data[${Uy}], b_dequantized_values[${Uy}])`}`).join(" + ")};
            }
            word_offset += ${8/g1};
          }
        }`,jy=J1?`
          zero_point_offset += 4;
          if (zero_point_offset == 32) {
            zero_point_offset = 0;
            zero_point_index++;
            zero_point_word = ${J1.getByOffset("zero_point_index")};
          }`:"";return E1?`
        var<workgroup> workgroup_shared: array<${G1.type.value}, ${a1*o1}>;
        ${ly.declareVariables(...K1,G1)}
        ${ly.mainStart([o1,1,1])}
          var a_indices: ${Q1.type.indices};
          var block = local_id.x;
          var col = workgroup_id.y;
          var batch = workgroup_id.z;
          ${Q1.indicesSet("a_indices","0","batch")};
          // Two zero points are packed into one byte when uniforms.bits is 4.
          for (var c: u32 = 0; c < ${T1}; c++) {
            let col_times_components_plus_c = col * ${T1} + c;
              ${J1?`
            var zero_point_bytes_per_col: u32 = (${o1} + 1) / 2;
            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);
            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;
            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;
            var zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            var zero_point_word: u32 = ${J1.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}
            var b_indices: ${U1.type.indices};
            ${U1.indicesSet("b_indices","0","col_times_components_plus_c")};
            // The scale and zero points are computed per block.
            var scales_index = col_times_components_plus_c * ${o1} + block;
            let scale = ${V1.getByOffset("scales_index")};
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${yy}(${J1?"(zero_point_word) & 0xFu":8});
            ${U1.indicesSet("b_indices","1","block")};
            var word_offset: u32 = block * ${_g.blockSize/g1};
            var workgroup_shared_offset: u32 = block * ${a1};
            ${Ey}
          }
          workgroupBarrier();
          if (local_id.x == 0u) {
            var output_indices: ${G1.type.indices};
            ${G1.indicesSet("output_indices","0","batch")};
            ${G1.indicesSet("output_indices",hy-1,"col")};
            ${G1.indicesSet("output_indices",hy-2,"0")};
            var output_offset = ${G1.indicesToOffset("output_indices")};
            for (var m: u32 = 0u; m < ${a1}u; m++) {
              var output_value: ${G1.type.value} = ${G1.type.value}(0);
              var workgroup_shared_offset: u32 = m;
              for (var b: u32 = 0u; b < ${o1}u; b++) {
                output_value += workgroup_shared[workgroup_shared_offset];
                workgroup_shared_offset += ${a1};
              }
              ${G1.setByOffset("output_offset","output_value")};
              output_offset += ${s1/T1};
            }
          }
        }`:`
        ${ly.registerUniforms(Y1).declareVariables(...K1,G1)}
        ${ly.mainStart()}
          ${ly.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var output_values: array<${G1.type.value}, ${f1}>;
          var output_indices = ${G1.offsetToIndices("global_idx")};
          var col = ${G1.indicesGet("output_indices",hy-1)};
          var row = ${G1.indicesGet("output_indices",hy-2)};
          var a_indices: ${Q1.type.indices} = output_indices;
          // Two zero points are packed into one byte because uniforms.bits <= 4.
          // zero_point_offset is either 0 or 4. It is bit offset within one byte.
          // TODO support zero_point_offset for bits > 4
          ${J1?`
          var zero_point_abs_offset = col * ${T1} * ((${o1} + 1) / 2);
          var zero_point_index: u32 = zero_point_abs_offset / 4;
          var zero_point_word: u32 = ${J1.getByOffset("zero_point_index")};
          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}
          var scale_index = col * ${o1*T1};
          var b_indices: ${U1.type.indices};
          for (var c: u32 = 0; c < ${T1}; c++) {
            ${U1.indicesSet("b_indices","0",`col * ${T1} + c`)};
            var block_offset: u32 = 0;
            for (var block: u32 = 0; block < ${o1}; block++) {
              // The scale and zero points are computed per block.
              let scale = ${V1.getByOffset("scale_index")};
              // The default zero point is 8 for unsigned 4-bit quantization.
              let zero_point = ${yy}(${J1?"extractBits(zero_point_word, zero_point_offset, 4)":8});
              ${U1.indicesSet("b_indices","1","block")};
              var word_offset: u32 = block_offset;
              ${Ey}
              scale_index++;
              ${jy}
              block_offset += uniforms.block_size / ${g1};
            }
            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.
            ${J1?`if (zero_point_offset % 8 > 0) {
                ${jy}
              }`:""}
            }
            for (var k: u32 = 0u; k < ${f1}u; k++) {
              ${G1.indicesSet("output_indices",hy-2,`${f1} * row + k`)};
              ${G1.setByIndices("output_indices","output_values[k]")}
            }
        }`};return{name:E1?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${_g.cacheKey};${a1};${h1};${e1.length}`,inputDependencies:Array(e1.length).fill("rank")},getRunData:()=>({outputs:[{dims:P1,dataType:h1}],name:E1?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:E1?{x:1,y:Math.ceil(s1/T1),z:c1}:{x:Math.ceil(k1/64)},programUniforms:N1}),getShaderSource:ey}},Il=(e1,_g)=>{om(e1.inputs,_g);let t1=e1.getMaxComputeWorkgroupSizes(),r1=e1.getMaxComputeWorkgroupStoragesize();e1.compute(am(e1.inputs,_g,t1,r1))},Tl=e1=>we(e1)}),lt,sm,kl,El,um,$o,Ol,Pl=j(()=>{ye(),xe(),Ze(),Hn(),oo(),_e(),Rr(),lt=(e1,_g)=>e1.length>_g&&e1[_g].dims.length>0&&M$1.size(e1[_g].dims)>0?e1[_g]:void 0,sm=(e1,_g)=>{let t1=e1[0],r1=lt(e1,1),n1=lt(e1,2),i1=lt(e1,3),o1=lt(e1,4),a1=lt(e1,5),u1=lt(e1,6),s1=lt(e1,7);if(t1.dims.length!==3&&t1.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let l1=!1,c1=t1.dims[0],d1=t1.dims[1],h1=t1.dims.length===3?l1?t1.dims[2]/3:t1.dims[2]:_g.numHeads*t1.dims[4],f1=d1,g1=0,v1=0,$1=Math.floor(h1/_g.numHeads);if(u1&&s1){if(u1.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(u1.dims[0]!==c1||u1.dims[1]!==_g.numHeads||u1.dims[3]!==$1)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(s1.dims[0]!==c1||s1.dims[1]!==_g.numHeads||s1.dims[3]!==$1)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(u1.dims[2]!==s1.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(s1.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');g1=u1.dims[2],v1=u1.dims[2]}else if(u1||s1)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let y1;if(r1){if(t1.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(r1.dims.length<3||r1.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(t1.dims[0]!==r1.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(r1.dims.length===3){if(r1.dims[2]!==t1.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');y1=2,f1=r1.dims[1]}else if(r1.dims.length===5){if(r1.dims[2]!==_g.numHeads||r1.dims[3]!==2||r1.dims[4]!==$1)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(n1)throw new Error('Expect "value" be none when "key" has packed kv format.');y1=5,f1=r1.dims[1]}else{if(r1.dims[1]!==_g.numHeads||r1.dims[3]!==$1)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');y1=0,f1=r1.dims[2]}}else{if(t1.dims.length!==3&&t1.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(t1.dims.length===5&&(t1.dims[2]!==_g.numHeads||t1.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');y1=3}if(i1){if(i1.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(n1&&t1.dims.length===5&&t1.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let _1=0;if(o1){_1=8;let N1=o1.dims;throw N1.length===1?N1[0]===c1?_1=1:N1[0]===3*c1+2&&(_1=3):N1.length===2&&N1[0]===c1&&N1[1]===f1&&(_1=5),_1===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)'):new Error("Mask not supported")}let E1=!1,T1=h1;if(n1){if(n1.dims.length!==3&&n1.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(t1.dims[0]!==n1.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(n1.dims.length===3){if(f1!==n1.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');T1=n1.dims[2]}else{if(f1!==n1.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');T1=n1.dims[1]*n1.dims[3],E1=!0}}let P1=g1+f1,k1=!1;if(o1)throw new Error("Key padding mask is not supported");if(a1){if(a1.dims.length!==4)throw new Error('Input "relative_position_bias" is expected to have 4 dimensions');if(a1.dims[0]!==c1&&a1.dims[0]!==1||a1.dims[1]!==_g.numHeads||a1.dims[2]!==d1||a1.dims[3]!==P1)throw new Error('Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)')}return{batchSize:c1,sequenceLength:d1,pastSequenceLength:g1,kvSequenceLength:f1,totalSequenceLength:P1,maxSequenceLength:v1,inputHiddenSize:0,hiddenSize:h1,vHiddenSize:T1,headSize:$1,vHeadSize:Math.floor(T1/_g.numHeads),numHeads:_g.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:_g.maskFilterValue,maskType:_1,scale:_g.scale,broadcastResPosBias:k1,passPastInKv:E1,qkvFormat:y1}},kl=e1=>we({...e1}),El=we({perm:[0,2,1,3]}),um=(e1,_g,t1,r1,n1,i1,o1)=>{let a1=[r1,n1,i1],u1=M$1.size(a1),s1=[{type:12,data:u1},{type:12,data:o1},{type:12,data:i1}],l1=c1=>{let d1=K("qkv_with_bias",_g.dataType,a1),h1=U$1("qkv",_g.dataType,a1),f1=U$1("bias",t1.dataType,a1),g1=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${c1.registerUniforms(g1).declareVariables(h1,f1,d1)}
  ${c1.mainStart()}
    ${c1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e1.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a1,dataType:_g.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(u1/64)},programUniforms:s1}),getShaderSource:l1},{inputs:[_g,t1],outputs:[-1]})[0]},$o=(e1,_g,t1,r1,n1,i1,o1,a1)=>{let u1=i1;if(o1){if(r1===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return u1=um(e1,i1,o1,_g,r1,t1*n1,a1),u1=u1.reshape([_g,r1,t1,n1]),e1.compute(xt(u1,El.perm),{inputs:[u1],outputs:[-1]})[0]}else return i1.dims.length===3&&(u1=i1.reshape([_g,r1,t1,n1])),e1.compute(xt(u1,El.perm),{inputs:[u1],outputs:[-1]})[0]},Ol=(e1,_g)=>{let t1=sm(e1.inputs,_g),r1=e1.inputs[0],n1=lt(e1.inputs,1),i1=lt(e1.inputs,2),o1=lt(e1.inputs,3),a1=lt(e1.inputs,4),u1=lt(e1.inputs,5),s1=lt(e1.inputs,6),l1=lt(e1.inputs,7);if(r1.dims.length===5)throw new Error("Packed QKV is not implemented");if((n1==null?void 0:n1.dims.length)===5)throw new Error("Packed KV is not implemented");let c1=n1&&i1&&n1.dims.length===4&&i1.dims.length===4,d1=$o(e1,t1.batchSize,t1.numHeads,t1.sequenceLength,t1.headSize,r1,o1,0);if(c1)return Xn(e1,d1,n1,i1,a1,void 0,s1,l1,u1,t1,_g);if(!n1||!i1)throw new Error("key and value must be provided");let h1=$o(e1,t1.batchSize,t1.numHeads,t1.kvSequenceLength,t1.headSize,n1,o1,t1.hiddenSize),f1=$o(e1,t1.batchSize,t1.numHeads,t1.kvSequenceLength,t1.vHeadSize,i1,o1,2*t1.hiddenSize);Xn(e1,d1,h1,f1,a1,void 0,s1,l1,u1,t1,_g)}}),lm,dm,cm,pm,mm,fm,hm,gm,Rl,zl=j(()=>{ye(),xe(),_e(),lm=e1=>{if(!e1||e1.length<1)throw new Error("Too few inputs");if(e1[0].dataType!==1&&e1[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e1.length>=2){let _g=e1[0].dims.length*2===e1[1].dims[0];if(e1.length===4&&(_g=e1[3].dims[0]*2===e1[1].dims[0]),!_g)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},dm=(e1,_g,t1)=>{let r1="";for(let n1=_g-1;n1>=0;--n1)r1+=`
            k = i32(${e1.indicesGet("indices",n1)}) - ${fe("uniforms.pads",n1,t1)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${fe("uniforms.x_shape",n1,_g)})) {
              break;
            }
            offset += k * i32(${fe("uniforms.x_strides",n1,_g)});
        `;return`
          value = ${e1.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${r1}
            value = x[offset];
          }
      `},cm=(e1,_g,t1)=>{let r1="";for(let n1=_g-1;n1>=0;--n1)r1+=`
                k = i32(${e1.indicesGet("indices",n1)}) - ${fe("uniforms.pads",n1,t1)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",n1,_g)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${fe("uniforms.x_shape",n1,_g)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${fe("uniforms.x_strides",n1,_g)});
            `;return`
              var offset = 0;
              var k = 0;
              ${r1}
              value = x[offset];
          `},pm=(e1,_g,t1)=>{let r1="";for(let n1=_g-1;n1>=0;--n1)r1+=`
                k = i32(${e1.indicesGet("indices",n1)}) - ${fe("uniforms.pads",n1,t1)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${fe("uniforms.x_shape",n1,_g)})) {
                  k = i32(${fe("uniforms.x_shape",n1,_g)}) - 1;
                }
                offset += k * i32(${fe("uniforms.x_strides",n1,_g)});
            `;return`
              var offset = 0;
              var k = 0;
              ${r1}
              value = x[offset];
          `},mm=(e1,_g,t1)=>{let r1="";for(let n1=_g-1;n1>=0;--n1)r1+=`
                k = i32(${e1.indicesGet("indices",n1)}) - ${fe("uniforms.pads",n1,t1)};
                if (k < 0)  {
                  k += i32(${fe("uniforms.x_shape",n1,_g)}]);
                }
                if (k >= i32(${fe("uniforms.x_shape",n1,_g)})) {
                  k -= i32(${fe("uniforms.x_shape",n1,_g)});
                }
                offset += k * i32(${fe("uniforms.x_strides",n1,_g)});
            `;return`
              var offset = 0;
              var k = 0;
              ${r1}
              value = x[offset];
          `},fm=(e1,_g,t1)=>{switch(t1.mode){case 0:return dm(e1,_g,t1.pads.length);case 1:return cm(e1,_g,t1.pads.length);case 2:return pm(e1,_g,t1.pads.length);case 3:return mm(e1,_g,t1.pads.length);default:throw new Error("Invalid mode")}},hm=(e1,_g)=>{let t1=M$1.padShape(e1[0].dims.slice(),_g.pads),r1=e1[0].dims,n1=M$1.size(t1),i1=[{type:12,data:n1},{type:6,data:_g.pads}];_g.mode===0&&i1.push({type:e1[0].dataType,data:_g.value}),i1.push(...X(e1[0].dims,t1));let o1=["rank"],a1=u1=>{let s1=K("output",e1[0].dataType,t1.length),l1=U$1("x",e1[0].dataType,r1.length),c1=l1.type.value,d1=fm(s1,r1.length,_g),h1=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:_g.pads.length}];return _g.mode===0&&h1.push({name:"constant_value",type:c1}),`
            ${u1.registerUniforms(h1).declareVariables(l1,s1)}
            ${u1.mainStart()}
            ${u1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${s1.offsetToIndices("global_idx")};

            var value = ${c1}(0);
            ${d1}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${_g.mode}`,inputDependencies:o1},getRunData:()=>({outputs:[{dims:t1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(M$1.size(t1)/64)},programUniforms:i1}),getShaderSource:a1}},gm=(e1,_g)=>{if(e1.length>1){let t1=e1[1].getBigInt64Array(),r1=e1.length>=3&&e1[2].data?e1[2].getFloat32Array()[0]:0,n1=e1[0].dims.length,i1=new Int32Array(2*n1).fill(0);if(e1.length>=4){let a1=e1[3].getBigInt64Array();for(let u1=0;u1<a1.length;u1++)i1[Number(a1[u1])]=Number(t1[u1]),i1[Number(a1[u1])+n1]=Number(t1[u1+a1.length])}else t1.forEach((a1,u1)=>i1[Number(u1)]=Number(a1));let o1=[];return i1.forEach(a1=>o1.push(a1)),{mode:_g.mode,value:r1,pads:o1}}else return _g},Rl=(e1,_g)=>{lm(e1.inputs);let t1=gm(e1.inputs,_g);e1.compute(hm(e1.inputs,t1),{inputs:[0]})}}),si,Bl,Dl,Ml,Ul,ym,bm,Wl,Nl,Vl,Hl,Gl,Ll,Fl,ql,jl,Kl,Yl,Xl,Zl=j(()=>{_t(),ye(),xe(),_e(),si=e1=>{if(ke.webgpu.validateInputContent&&(!e1||e1.length!==1))throw new Error("Pool ops requires 1 input.")},Bl=(e1,_g,t1)=>{let r1=_g.format==="NHWC",n1=e1.dims.slice();r1&&n1.splice(1,0,n1.pop());let i1=Object.hasOwnProperty.call(_g,"dilations"),o1=_g.kernelShape.slice(),a1=_g.strides.slice(),u1=i1?_g.dilations.slice():[],s1=_g.pads.slice();pr.adjustPoolAttributes(t1,n1,o1,a1,u1,s1);let l1=pr.computePoolOutputShape(t1,n1,a1,u1,o1,s1,_g.autoPad),c1=Object.assign({},_g);i1?Object.assign(c1,{kernelShape:o1,strides:a1,pads:s1,dilations:u1,cacheKey:_g.cacheKey}):Object.assign(c1,{kernelShape:o1,strides:a1,pads:s1,cacheKey:_g.cacheKey});let d1=l1.slice();return d1.push(d1.splice(1,1)[0]),[c1,r1?d1:l1]},Dl=(e1,_g)=>{let t1=_g.format==="NHWC",r1=M$1.size(e1),n1=M$1.size(_g.kernelShape),i1=[{type:12,data:r1},{type:12,data:n1}],o1=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(_g.kernelShape.length<=2){let a1=_g.kernelShape[_g.kernelShape.length-1],u1=_g.strides[_g.strides.length-1],s1=_g.pads[_g.pads.length/2-1],l1=_g.pads[_g.pads.length-1],c1=!!(s1+l1);i1.push({type:12,data:a1},{type:12,data:u1},{type:12,data:s1},{type:12,data:l1}),o1.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let d1=!1;if(_g.kernelShape.length===2){let h1=_g.kernelShape[_g.kernelShape.length-2],f1=_g.strides[_g.strides.length-2],g1=_g.pads[_g.pads.length/2-2],v1=_g.pads[_g.pads.length-2];d1=!!(g1+v1),i1.push({type:12,data:h1},{type:12,data:f1},{type:12,data:g1},{type:12,data:v1}),o1.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[i1,o1,!0,c1,d1]}else{if(t1)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let a1=M$1.computeStrides(_g.kernelShape);i1.push({type:12,data:a1},{type:12,data:_g.pads},{type:12,data:_g.strides}),o1.push({name:"kernelStrides",type:"u32",length:a1.length},{name:"pads",type:"u32",length:_g.pads.length},{name:"strides",type:"u32",length:_g.strides.length});let u1=_g.pads.reduce((s1,l1)=>s1+l1);return[i1,o1,!!u1,!1,!1]}},Ml=(e1,_g,t1,r1,n1,i1,o1,a1,u1,s1,l1,c1)=>{let d1=n1.format==="NHWC",h1=_g.type.value,f1=K("output",_g.type.tensor,r1);if(n1.kernelShape.length<=2){let g1="",v1="",$1="",y1=t1-(d1?2:1);if(l1?g1=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${y1}] = indices[${y1}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${y1}] < 0 || xIndices[${y1}]
                      >= uniforms.x_shape[${y1}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${_g.indicesToOffset("xIndices")}];
                  ${i1}
                }`:g1=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${y1}] = indices[${y1}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${_g.indicesToOffset("xIndices")}];
                  ${i1}
                }`,n1.kernelShape.length===2){let _1=t1-(d1?3:2);c1?v1=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${_1}] = indices[${_1}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${_1}] < 0 || xIndices[${_1}] >= uniforms.x_shape[${_1}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:v1=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${_1}] = indices[${_1}] * uniforms.sh - uniforms.phStart + j;
                `,$1=`
              }
            `}return`
            ${e1.registerUniforms(u1).declareVariables(_g,f1)}

            ${e1.mainStart()}
              ${e1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${f1.offsetToIndices("global_idx")};
              var xIndices = ${f1.offsetToIndices("global_idx")};

              var value = ${h1}(${a1});
              var pad = 0;
              ${v1}
              ${g1}
              ${$1}
              ${o1}

              output[global_idx] = value;
            }`}else{if(d1)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let g1=n1.kernelShape.length,v1=n1.pads.length,$1="";return s1?$1=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${_g.indicesToOffset("xIndices")}];
                ${i1}
              }`:$1=`
              }
              let x_val = x[${_g.indicesToOffset("xIndices")}];
              ${i1}
            `,`
            ${e1.registerUniforms(u1).declareVariables(_g,f1)}

            ${e1.mainStart()}
              ${e1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${f1.offsetToIndices("global_idx")};
              var xIndices = ${f1.offsetToIndices("global_idx")};

              var offsets: array<u32, ${g1}>;

              var value = ${h1}(${a1});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${g1-1}u; j++) {
                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",g1)};
                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",g1)};
                }
                offsets[${g1-1}] = offset;

                isPad = false;
                for (var j = ${t1-g1}u; j < ${t1}u; j++) {
                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${t1-g1}u`,g1)}
                    + offsets[j - ${t1-g1}u] - ${fe("uniforms.pads","j - 2u",v1)};
                  ${$1}
              }
              ${o1}

              output[global_idx] = value;
            }`}},Ul=e1=>`${e1.format};${e1.ceilMode};${e1.autoPad};${e1.kernelShape.length}`,ym=e1=>`${Ul(e1)};${e1.countIncludePad}`,bm=e1=>`${Ul(e1)};${e1.storageOrder};${e1.dilations}`,Wl=e1=>({format:e1.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e1.auto_pad],ceilMode:e1.ceil_mode,kernelShape:e1.kernel_shape,strides:e1.strides,pads:e1.pads}),Nl=(e1,_g,t1,r1)=>{let[n1,i1]=Bl(_g,r1,t1),o1=U$1("x",_g.dataType,_g.dims.length),a1=o1.type.value,u1="value += x_val;",s1="";n1.countIncludePad?s1+=`value /= ${a1}(uniforms.kernelSize);`:s1+=`value /= ${a1}(i32(uniforms.kernelSize) - pad);`;let[l1,c1,d1,h1,f1]=Dl(i1,n1);l1.push(...X(_g.dims,i1));let g1=["rank"];return{name:e1,shaderCache:{hint:`${r1.cacheKey};${d1};${h1};${f1}`,inputDependencies:g1},getRunData:()=>({outputs:[{dims:i1,dataType:_g.dataType}],dispatchGroup:{x:Math.ceil(M$1.size(i1)/64)},programUniforms:l1}),getShaderSource:v1=>Ml(v1,o1,_g.dims.length,i1.length,n1,u1,s1,0,c1,d1,h1,f1)}},Vl=e1=>{let _g=e1.count_include_pad!==0,t1=Wl(e1);if(t1.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let r1={countIncludePad:_g,...t1,cacheKey:""};return{...r1,cacheKey:ym(r1)}},Hl=(e1,_g)=>{si(e1.inputs),e1.compute(Nl("AveragePool",e1.inputs[0],!1,_g))},Gl={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},Ll=e1=>{let _g=e1.format;return{format:_g,...Gl,cacheKey:_g}},Fl=(e1,_g)=>{si(e1.inputs),e1.compute(Nl("GlobalAveragePool",e1.inputs[0],!0,_g))},ql=(e1,_g,t1,r1)=>{let[n1,i1]=Bl(_g,r1,t1),o1=`
      value = max(x_val, value);
    `,a1="",u1=U$1("x",_g.dataType,_g.dims.length),s1=["rank"],[l1,c1,d1,h1,f1]=Dl(i1,n1);return l1.push(...X(_g.dims,i1)),{name:e1,shaderCache:{hint:`${r1.cacheKey};${d1};${h1};${f1}`,inputDependencies:s1},getRunData:()=>({outputs:[{dims:i1,dataType:_g.dataType}],dispatchGroup:{x:Math.ceil(M$1.size(i1)/64)},programUniforms:l1}),getShaderSource:g1=>Ml(g1,u1,_g.dims.length,i1.length,n1,o1,a1,_g.dataType===10?-65504:-1e5,c1,d1,h1,f1)}},jl=(e1,_g)=>{si(e1.inputs),e1.compute(ql("MaxPool",e1.inputs[0],!1,_g))},Kl=e1=>{let _g=e1.storage_order,t1=e1.dilations,r1=Wl(e1);if(_g!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(r1.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let n1={storageOrder:_g,dilations:t1,...r1,cacheKey:""};return{...n1,cacheKey:bm(n1)}},Yl=e1=>{let _g=e1.format;return{format:_g,...Gl,cacheKey:_g}},Xl=(e1,_g)=>{si(e1.inputs),e1.compute(ql("GlobalMaxPool",e1.inputs[0],!0,_g))}}),wm,$m,Ql,Jl=j(()=>{_t(),ye(),_e(),wm=(e1,_g,t1)=>{let r1=e1===_g,n1=e1<_g&&t1<0,i1=e1>_g&&t1>0;if(r1||n1||i1)throw new Error("Range these inputs' contents are invalid.")},$m=(e1,_g,t1,r1)=>{let n1=Math.abs(Math.ceil((_g-e1)/t1)),i1=[n1],o1=n1,a1=[{type:12,data:o1},{type:r1,data:e1},{type:r1,data:t1},...X(i1)],u1=s1=>{let l1=K("output",r1,i1.length),c1=l1.type.value,d1=[{name:"outputSize",type:"u32"},{name:"start",type:c1},{name:"delta",type:c1}];return`
        ${s1.registerUniforms(d1).declareVariables(l1)}
        ${s1.mainStart()}
        ${s1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${c1}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${r1}`},getShaderSource:u1,getRunData:()=>({outputs:[{dims:i1,dataType:r1}],dispatchGroup:{x:Math.ceil(o1/64)},programUniforms:a1})}},Ql=e1=>{let _g=0,t1=0,r1=0;e1.inputs[0].dataType===6?(_g=e1.inputs[0].getInt32Array()[0],t1=e1.inputs[1].getInt32Array()[0],r1=e1.inputs[2].getInt32Array()[0]):e1.inputs[0].dataType===1&&(_g=e1.inputs[0].getFloat32Array()[0],t1=e1.inputs[1].getFloat32Array()[0],r1=e1.inputs[2].getFloat32Array()[0]),ke.webgpu.validateInputContent&&wm(_g,t1,r1),e1.compute($m(_g,t1,r1,e1.inputs[0].dataType),{inputs:[]})}}),_m,xm,Sm,Cm,Im,Tm,Am,Em,km,Om,Pm,ed,Rm,zm,Bm,Dm,Mm,td,rd,nd=j(()=>{ye(),xe(),Ze(),_e(),_m=(e1,_g)=>{if(e1.every(t1=>t1>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e1.length>0){if(_g.mode==="linear"){if(!(e1.length===2||e1.length===3||e1.length===4&&e1[0]===1&&e1[1]===1||e1.length===4&&e1[0]===1&&e1[3]===1||e1.length===5&&e1[0]===1&&e1[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(_g.mode==="cubic"&&!(e1.length===2||e1.length===4&&e1[0]===1&&e1[1]===1||e1.length===4&&e1[0]===1&&e1[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},xm=(e1,_g,t1)=>{_g.every(n1=>n1>=0&&n1<t1||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let r1=new Array(t1).fill(1);return _g.forEach((n1,i1)=>r1[n1]=e1[i1]),r1},Sm=(e1,_g,t1,r1,n1,i1)=>{let[o1,a1,u1]=t1>10?[1,2,3]:[-1,e1.length>1?1:-1,-1],s1=e1[0].dims.length;if(o1>0&&e1.length>o1&&e1[o1].dims.length>0)e1[o1].getFloat32Array().forEach(l1=>i1.push(l1));else if(_g.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(a1>0&&e1.length>a1&&e1[a1].dims.length>0){if(e1[a1].getFloat32Array().forEach(l1=>r1.push(l1)),r1.length!==0&&r1.length!==s1&&t1>=18&&r1.length!==_g.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");_m(r1,_g),_g.axes.length>0&&xm(r1,_g.axes,s1).forEach((l1,c1)=>r1[c1]=l1)}if(u1>0&&e1.length>u1&&(e1[u1].getBigInt64Array().forEach(l1=>n1.push(Number(l1))),n1.length!==s1||t1>=18&&n1.length===_g.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(_g.axes.length>0){if(r1.length!==_g.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(n1.length!==_g.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof r1<"u"&&typeof n1<"u"&&r1.length>0&&n1.length>s1)throw new Error("Resize requires only of scales or sizes to be specified")},Cm=(e1,_g)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${_g} { `+(()=>{switch(e1){case"asymmetric":return`return ${_g}(xResized) / ${_g}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${_g}(xResized) + 0.5) / ${_g}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${_g}(xResized) + 0.5) / ${_g}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating
                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
                    // offset-by-one error later in floor().
                    let whole = ${_g}(xResized * (lengthOriginal - 1) / (lengthResized - 1));
                    let fract =
                        ${_g}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${_g}(lengthResized - 1);
                    return whole + fract;
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${_g}(roiStart) * ${_g}(lengthOriginal - 1) +
                        (${_g}(xResized) * ${_g}(roiEnd - roiStart) * ${_g}(lengthOriginal - 1)) /
                        ${_g}(lengthResized - 1);
                  } else {
                    return 0.5 * ${_g}(roiStart + roiEnd) * ${_g}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${_g}xScale * ${_g}(lengthResized);
                  const adjustment = ${_g}(lengthResized) / outputWidth;
                  const center = ${_g}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${_g}(xResized) + 0.5) / ${_g}(xScale)) - 0.5;`;case"half_pixel":return`return ((${_g}(xResized) + 0.5) / ${_g}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e1} is not supported`)}})()+"}",Im=(e1,_g,t1)=>`fn getNearestPixelFromOriginal(xOriginal: ${t1}, isDownSample: bool) -> ${t1} {`+(()=>{switch(e1){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(_g<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e1} is not supported`)}})()+"}",Tm=(e1,_g,t1)=>{let r1=new Array(t1).fill(0).concat(new Array(t1).fill(1)),n1=e1.length===0?r1:e1.slice();return _g.length>0?(_g.forEach((i1,o1)=>{r1[i1]=n1[o1],r1[o1+t1]=n1[_g.length+o1]}),r1):n1},Am=(e1,_g,t1,r1)=>{let n1=[];if(t1.length>0)if(r1.length>0){if(e1.forEach(i1=>n1.push(i1)),Math.max(...r1)>e1.length)throw new Error("axes is out of bound");r1.forEach((i1,o1)=>n1[i1]=t1[o1])}else t1.forEach(i1=>n1.push(i1));else{if(_g.length===0)throw new Error("Resize requires either scales or sizes.");n1=e1.map((i1,o1)=>Math.round(i1*_g[o1]))}return n1},Em=(e1,_g,t1)=>{let r1=(()=>{switch(t1.keepAspectRatioPolicy){case"not_larger":return t1.axes.length>0?Math.min(...t1.axes.map(i1=>_g[i1]),Number.MAX_VALUE):Math.min(..._g,Number.MAX_VALUE);case"not_smaller":return t1.axes.length>0?Math.max(...t1.axes.map(i1=>_g[i1]),Number.MIN_VALUE):Math.max(..._g,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${t1.keepAspectRatioPolicy} is not supported`)}})();_g.fill(1,0,_g.length);let n1=e1.slice();return t1.axes.length>0?(t1.axes.forEach(i1=>_g[i1]=r1),t1.axes.forEach(i1=>n1[i1]=Math.round(e1[i1]*_g[i1]))):(_g.fill(r1,0,_g.length),n1.forEach((i1,o1)=>n1[o1]=Math.round(i1*_g[o1]))),n1},km=(e1,_g,t1,r1,n1)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e1.type.indices}) -> array<${e1.type.value}, ${t1.length}> {
      var original_indices: array<${e1.type.value}, ${t1.length}>;
      for (var i:u32 = 0; i < ${t1.length}; i++) {
        var output_index = ${e1.indicesGet("output_indices","i")};
        var scale = ${fe("uniforms.scales","i",r1)};
        var roi_low = ${fe("uniforms.roi","i",n1)};
        var roi_hi = ${fe("uniforms.roi",`i + ${_g.length}`,n1)};
        if (scale == 1.0) {
          original_indices[i] = ${e1.type.value}(output_index);
        } else {
          var input_shape_i = ${fe("uniforms.input_shape","i",_g.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",t1.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,Om=(e1,_g,t1,r1,n1,i1,o1)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${_g.type.indices}) -> ${e1.type.indices} {
      var input_indices: ${e1.type.indices};
      for (var i:u32 = 0; i < ${r1.length}; i++) {
        var output_index = ${_g.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${fe("uniforms.scales","i",n1)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${fe("uniforms.roi","i",i1)};
          var roi_hi = ${fe("uniforms.roi",`i + ${t1.length}`,i1)};
          var input_shape_i = ${fe("uniforms.input_shape","i",t1.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",r1.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${o1} || (original_idx >= 0 && original_idx < ${_g.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${_g.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e1.indicesSet("input_indices","i"," input_index")}
      }
      return input_indices;
    }`,Pm=(e1,_g)=>`
    fn checkInputIndices(input_indices: ${e1.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${_g.length}; i++) {
        var input_index = ${e1.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",_g.length)}) {
          return false;
        }
      }
      return true;
    }`,ed=(e1,_g,t1,r1)=>e1.rank>r1?`
    ${e1.indicesSet("input_indices",_g,"channel")};
    ${e1.indicesSet("input_indices",t1,"batch")};
`:"",Rm=(e1,_g,t1,r1,n1)=>{let[i1,o1,a1,u1]=t1.length===2?[-1,0,1,-1]:[0,2,3,1],s1=e1.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${s1} {
      var input_indices: ${e1.type.indices};
      ${e1.indicesSet("input_indices",o1,`max(0, min(row, ${t1[o1]} - 1))`)};
      ${e1.indicesSet("input_indices",a1,`max(0, min(col, ${t1[a1]} - 1))`)};
      ${ed(e1,u1,i1,2)}
      return ${e1.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${_g.type.indices}) -> ${s1} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${s1} = originalIndices[${o1}];
      var col:${s1} = originalIndices[${a1}];
      ${r1?`if (row < 0 || row > (${t1[o1]} - 1) || col < 0 || col > (${t1[a1]} - 1)) {
        return ${n1};
      }`:""};
      row = max(0, min(row, ${t1[o1]} - 1));
      col = max(0, min(col, ${t1[a1]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${t1.length>2?`u32(originalIndices[${u1}])`:"0"};
      var batch: u32 =  ${t1.length>2?`u32(originalIndices[${i1}])`:"0"};
      var x11: ${s1} = getInputValue(batch, channel, row1, col1);
      var x12: ${s1} = getInputValue(batch, channel, row1, col2);
      var x21: ${s1} = getInputValue(batch, channel, row2, col1);
      var x22: ${s1} = getInputValue(batch, channel, row2, col2);
      var dx1: ${s1} = abs(row - ${s1}(row1));
      var dx2: ${s1} = abs(${s1}(row2) - row);
      var dy1: ${s1} = abs(col - ${s1}(col1));
      var dy2: ${s1} = abs(${s1}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},zm=(e1,_g,t1,r1,n1,i1,o1,a1,u1,s1)=>{let l1=t1.length===2,[c1,d1]=l1?[0,1]:[2,3],h1=e1.type.value,f1=g1=>{let v1=g1===c1?"row":"col";return`
      fn ${v1}CubicInterpolation(input_indices: ${e1.type.indices}, output_indices: ${_g.type.indices}) -> ${h1} {
        var output_index = ${_g.indicesGet("output_indices",g1)};
        var originalIdx: ${h1} = getOriginalCoordinateFromResizedCoordinate(output_index, ${n1[g1]},
        ${r1[g1]}, ${t1[g1]}, ${i1[g1]}, ${i1[g1]} + ${t1.length});
        var fractOriginalIdx: ${h1} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${a1} && (originalIdx < 0 || originalIdx > (${t1[g1]} - 1))) {
          return ${u1};
        }
        var data: array<${h1}, 4> = array<${h1}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${v1}: ${h1} = originalIdx + ${h1}(i);
          if (${v1} < 0 || ${v1} >= ${t1[g1]}) {
            ${s1?`coefs[i + 1] = 0.0;
                        continue;`:a1?`return ${u1};`:`${v1} = max(0, min(${v1}, ${t1[g1]} - 1));`};
          }
        var input_indices_copy: ${e1.type.indices} = input_indices;
          ${e1.indicesSet("input_indices_copy",g1,`u32(${v1})`)};
          data[i + 1] = ${g1===c1?e1.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${f1(c1)};
    ${f1(d1)};
  fn getCubicInterpolationCoefs(s: ${h1}) -> array<${h1}, 4> {
    var absS = abs(s);
    var coeffs: array<${h1}, 4> = array<${h1}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${h1} = 1.0 - absS;
    var twoMinusAbsS: ${h1} = 2.0 - absS;
    var onePlusAbsS: ${h1} = 1.0 + absS;
    coeffs[0] = ((${o1} * onePlusAbsS - 5 * ${o1}) * onePlusAbsS + 8 * ${o1}) * onePlusAbsS - 4 * ${o1};
    coeffs[1] = ((${o1} + 2) * absS - (${o1} + 3)) * absS * absS + 1;
    coeffs[2] = ((${o1} + 2) * oneMinusAbsS - (${o1} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${o1} * twoMinusAbsS - 5 * ${o1}) * twoMinusAbsS + 8 * ${o1}) * twoMinusAbsS - 4 * ${o1};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${h1}, 4>, coefs: array<${h1}, 4>) -> ${h1} {
    var coefsSum: ${h1} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${_g.type.indices}) -> ${h1} {
    var input_indices: ${e1.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},Bm=(e1,_g,t1,r1,n1)=>{let[i1,o1,a1,u1,s1]=t1.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],l1=e1.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${l1} {
      var input_indices: ${e1.type.indices};
      ${e1.indicesSet("input_indices",o1,`max(0, min(depth, ${t1[o1]} - 1))`)};
      ${e1.indicesSet("input_indices",a1,`max(0, min(height, ${t1[a1]} - 1))`)};
      ${e1.indicesSet("input_indices",u1,`max(0, min(width, ${t1[u1]} - 1))`)};
      ${ed(e1,s1,i1,3)}
      return ${e1.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${_g.type.indices}) -> ${l1} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${l1} = originalIndices[${o1}];
      var height:${l1} = originalIndices[${a1}];
      var width:${l1} = originalIndices[${u1}];
      ${r1?`if (depth < 0 || depth > (${t1[o1]} - 1) || height < 0 || height > (${t1[a1]} - 1) || width < 0 || (width > ${t1[u1]} - 1)) {
      return ${n1};
        }`:""};

    depth = max(0, min(depth, ${t1[o1]} - 1));
      height = max(0, min(height, ${t1[a1]} - 1));
      width = max(0, min(width, ${t1[u1]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${t1.length>3?`u32(originalIndices[${s1}])`:"0"};
      var batch: u32 =  ${t1.length>3?`u32(originalIndices[${i1}])`:"0"};

      var x111: ${l1} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${l1} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${l1} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${l1} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${l1} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${l1} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${l1} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${l1} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${l1} = abs(depth - ${l1}(depth1));
      var dx2: ${l1} = abs(${l1}(depth2) - depth);
      var dy1: ${l1} = abs(height - ${l1}(height1));
      var dy2: ${l1} = abs(${l1}(height2) - height);
      var dz1: ${l1} = abs(width - ${l1}(width1));
      var dz2: ${l1} = abs(${l1}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},Dm=(e1,_g,t1,r1,n1,i1)=>{let o1=e1.dims,a1=Tm(i1,_g.axes,o1.length),u1=Am(o1,r1,n1,_g.axes),s1=r1.slice();r1.length===0&&(s1=o1.map((y1,_1)=>y1===0?1:u1[_1]/y1),_g.keepAspectRatioPolicy!=="stretch"&&(u1=Em(o1,s1,_g)));let l1=K("output",e1.dataType,u1.length),c1=U$1("input",e1.dataType,o1.length),d1=M$1.size(u1),h1=o1.length===u1.length&&o1.every((y1,_1)=>y1===u1[_1]),f1=_g.coordinateTransformMode==="tf_crop_and_resize",g1=_g.extrapolationValue,v1=c1.type.value,$1=y1=>`
      ${h1?"":`
      ${Cm(_g.coordinateTransformMode,v1)};
      ${(()=>{switch(_g.mode){case"nearest":return`
              ${Pm(c1,o1)};
              ${Im(_g.nearestMode,t1,v1)};
              ${Om(c1,l1,o1,u1,s1.length,a1.length,f1)};
              `;case"linear":return`
              ${km(l1,o1,u1,s1.length,a1.length)};
              ${(()=>{if(o1.length===2||o1.length===4)return`${Rm(c1,l1,o1,f1,g1)}`;if(o1.length===3||o1.length===5)return`${Bm(c1,l1,o1,f1,g1)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(o1.length===2||o1.length===4)return`${zm(c1,l1,o1,u1,s1,a1,_g.cubicCoeffA,f1,_g.extrapolationValue,_g.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${y1.registerUniform("output_size","u32").registerUniform("scales","f32",s1.length).registerUniform("roi","f32",a1.length).declareVariables(c1,l1)}
      ${y1.mainStart()}
        ${y1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${h1?"output[global_idx] = input[global_idx];":`
        let output_indices = ${l1.offsetToIndices("global_idx")};
        var input_indices: ${c1.type.indices};
        ${(()=>{switch(_g.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${c1.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${_g.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${o1.length===2||o1.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${_g.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${_g.cacheKey}|${t1}|${s1.length>0?s1:""}|${n1.length>0?n1:""}|${a1.length>0?a1:""}|${h1}|${o1}`,inputDependencies:["rank"]},getShaderSource:$1,getRunData:()=>({outputs:[{dims:u1,dataType:e1.dataType}],dispatchGroup:{x:Math.ceil(d1/64)},programUniforms:[{type:12,data:d1},{type:1,data:s1},{type:1,data:a1},...X(o1,u1)]})}},Mm=e1=>{let _g=e1.customDataBuffer;return new Uint32Array(_g,_g.byteOffset,1)[0]},td=(e1,_g)=>{let t1=[],r1=[],n1=[],i1=Mm(e1);if(_g.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");Sm(e1.inputs,_g,i1,t1,r1,n1),e1.compute(Dm(e1.inputs[0],_g,i1,t1,r1,n1),{inputs:[0]})},rd=e1=>{let _g=e1.antialias,t1=e1.axes,r1=e1.coordinateTransformMode,n1=e1.cubicCoeffA,i1=e1.excludeOutside!==0,o1=e1.extrapolationValue,a1=e1.keepAspectRatioPolicy,u1=e1.mode,s1=e1.nearestMode===""?"simple":e1.nearestMode;return we({antialias:_g,axes:t1,coordinateTransformMode:r1,cubicCoeffA:n1,excludeOutside:i1,extrapolationValue:o1,keepAspectRatioPolicy:a1,mode:u1,nearestMode:s1})}}),Um,Wm,id,od=j(()=>{ye(),xe(),Ze(),_e(),Um=(e1,_g)=>{let[t1,r1,n1,i1]=e1,{numHeads:o1,rotaryEmbeddingDim:a1}=_g;if(t1.dims.length!==3&&t1.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${t1.dims.length}`);if(!M$1.areEqual(r1.dims,[])&&!M$1.areEqual(r1.dims,[1])&&r1.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${r1.dims.length}`);if(n1.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${n1.dims.length}`);if(i1.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${i1.dims.length}`);if(!M$1.areEqual(n1.dims,i1.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(a1>0&&o1===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let u1=t1.dims[0],s1=t1.dims[t1.dims.length-2],l1=n1.dims[0],c1=M$1.sizeFromDimension(t1.dims,1)/s1,d1=a1===0?n1.dims[1]*2:c1/o1;if(a1>d1)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(r1.dims.length===2){if(u1!==r1.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${r1.dims[0]}`);if(s1!==r1.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${r1.dims[1]}`)}if(d1/2!==n1.dims[1]&&a1/2!==n1.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${n1.dims[1]}`);if(s1>l1)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Wm=(e1,_g)=>{let{interleaved:t1,numHeads:r1,rotaryEmbeddingDim:n1,scale:i1}=_g,o1=e1[0].dims[0],a1=M$1.sizeFromDimension(e1[0].dims,1),u1=e1[0].dims[e1[0].dims.length-2],s1=a1/u1,l1=e1[2].dims[1],c1=n1===0?l1*2:s1/r1,d1=new Array(o1,u1,s1/c1,c1-l1),h1=M$1.computeStrides(d1),f1=[{type:1,data:i1},{type:12,data:d1},{type:12,data:h1},...e1[0].dims.length===3?new Array({type:12,data:[a1,s1,c1,1]}):[],...e1[0].dims.length===4?new Array({type:12,data:[a1,c1,u1*c1,1]}):[],...X(e1[0].dims,e1[1].dims,e1[2].dims,e1[3].dims,e1[0].dims)],g1=v1=>{let $1=U$1("input",e1[0].dataType,e1[0].dims.length),y1=U$1("position_ids",e1[1].dataType,e1[1].dims.length),_1=U$1("cos_cache",e1[2].dataType,e1[2].dims.length),E1=U$1("sin_cache",e1[3].dataType,e1[3].dims.length),T1=K("output",e1[0].dataType,e1[0].dims.length);return v1.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:d1.length},{name:"global_strides",type:"u32",length:h1.length},{name:"input_output_strides",type:"u32",length:h1.length}]),`
        ${v1.declareVariables($1,y1,_1,E1,T1)}

        ${v1.mainStart(mr)}
          let half_rotary_emb_dim = uniforms.${_1.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${v1.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${y1.broadcastedIndicesToOffset("bsnh.xy",K("",y1.type.tensor,2))};
            let position_id =
                u32(${y1.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${t1});
            let j = i + select(half_rotary_emb_dim, 1, ${t1});
            let re = ${$1.getByOffset("i")} * ${_1.get("position_id","bsnh[3]")} -
                ${$1.getByOffset("j")} * ${E1.get("position_id","bsnh[3]")};
            ${T1.setByOffset("i","re")}
            let im = ${$1.getByOffset("i")} * ${E1.get("position_id","bsnh[3]")} +
                ${$1.getByOffset("j")} * ${_1.get("position_id","bsnh[3]")};
            ${T1.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${T1.setByOffset("k",$1.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:we({interleaved:t1}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:g1,getRunData:()=>({outputs:[{dims:e1[0].dims,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(M$1.size(d1)/mr)},programUniforms:f1})}},id=(e1,_g)=>{Um(e1.inputs,_g),e1.compute(Wm(e1.inputs,_g))}}),Nm,Vm,ad,sd=j(()=>{ye(),xe(),_e(),Nm=e1=>{if(!e1||e1.length<3)throw new Error("layerNorm requires at least 3 inputs.");let _g=e1[0],t1=e1[1],r1=e1[2];if(_g.dataType!==t1.dataType||_g.dataType!==r1.dataType)throw new Error("All inputs must have the same data type");if(_g.dims.length!==3&&_g.dims.length!==2)throw new Error("Input must be 2D or 3D");if(t1.dims.length!==3&&t1.dims.length!==2)throw new Error("Skip must be 2D or 3D");let n1=_g.dims[_g.dims.length-1],i1=_g.dims[_g.dims.length-2];if(t1.dims[t1.dims.length-1]!==n1)throw new Error("Skip must have the same hidden size as input");if(t1.dims[t1.dims.length-2]!==i1)throw new Error("Skip must have the same sequence length as input");if(r1.dims.length!==1)throw new Error("Gamma must be 1D");if(r1.dims[r1.dims.length-1]!==n1)throw new Error("Gamma must have the same hidden size as input");if(e1.length>3){let o1=e1[3];if(o1.dims.length!==1)throw new Error("Beta must be 1D");if(o1.dims[o1.dims.length-1]!==n1)throw new Error("Beta must have the same hidden size as input")}if(e1.length>4){let o1=e1[4];if(o1.dims.length!==1)throw new Error("Bias must be 1D");if(o1.dims[o1.dims.length-1]!==n1)throw new Error("Bias must have the same hidden size as input")}},Vm=(e1,_g,t1,r1)=>{let n1=_g.simplified,i1=e1[0].dims,o1=M$1.size(i1),a1=i1,u1=o1,s1=i1.slice(-1)[0],l1=r1?i1.slice(0,-1).concat(1):[],c1=!n1&&e1.length>3,d1=e1.length>4,h1=r1&&t1>1,f1=r1&&t1>2,g1=t1>3,v1=Ue(s1),$1=[{type:12,data:u1},{type:12,data:v1},{type:12,data:s1},{type:1,data:_g.epsilon}],y1=E1=>{let T1=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],P1=[U$1("x",e1[0].dataType,e1[0].dims,v1),U$1("skip",e1[1].dataType,e1[1].dims,v1),U$1("gamma",e1[2].dataType,e1[2].dims,v1)];c1&&P1.push(U$1("beta",e1[3].dataType,e1[3].dims,v1)),d1&&P1.push(U$1("bias",e1[4].dataType,e1[4].dims,v1)),P1.push(K("output",e1[0].dataType,a1,v1)),h1&&P1.push(K("mean_output",1,l1)),f1&&P1.push(K("inv_std_output",1,l1)),g1&&P1.push(K("input_skip_bias_sum",e1[0].dataType,a1,v1));let k1=De(e1[0].dataType);return`

      ${E1.registerUniforms(T1).declareVariables(...P1)}

      ${E1.mainStart()}
        ${E1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}
        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        let offset = global_idx * hidden_size_vectorized;
        var sum = ${At("f32",v1)};
        var squareSum = ${At("f32",v1)};
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${d1?"bias[i]":k1+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${g1?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${fr(k1,v1,"value")};
          sum += f32_value;
          squareSum += f32_value * f32_value;
        }
        let mean = ${Et("sum",v1)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Et("squareSum",v1)} / f32(uniforms.hidden_size) ${n1?"":"- mean * mean"} + uniforms.epsilon);
        ${h1?"mean_output[global_idx] = mean;":""}
        ${f1?"inv_std_output[global_idx] = inv_std_dev;":""}
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          output[offset + i] = (output[offset + i] ${n1?"":`- ${k1}(mean)`}) * ${k1}(inv_std_dev) * gamma[i] ${c1?"+ beta[i]":""};
        }
      }`},_1=[{dims:a1,dataType:e1[0].dataType}];return t1>1&&_1.push({dims:l1,dataType:1}),t1>2&&_1.push({dims:l1,dataType:1}),t1>3&&_1.push({dims:i1,dataType:e1[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${v1};${h1};${f1};${g1}`,inputDependencies:e1.map((E1,T1)=>"type")},getShaderSource:y1,getRunData:()=>({outputs:_1,dispatchGroup:{x:Math.ceil(u1/s1/64)},programUniforms:$1})}},ad=(e1,_g)=>{Nm(e1.inputs);let t1=[0];e1.outputCount>1&&t1.push(-3),e1.outputCount>2&&t1.push(-3),e1.outputCount>3&&t1.push(3),e1.compute(Vm(e1.inputs,_g,e1.outputCount,!1),{outputs:t1})}}),Hm,ui,Gm,ud,Lm,Fm,ld,dd,cd=j(()=>{ye(),xe(),Ze(),_e(),Hm=(e1,_g)=>{if(!e1||e1.length<1)throw new Error("too few inputs");if(_g.axes.length!==0){if(_g.axes.length!==_g.starts.length||_g.axes.length!==_g.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(_g.starts.length!==_g.ends.length)throw new Error("starts and ends must have the same length");e1.slice(1).forEach((t1,r1)=>{if(e1[r1+1].dataType!==6&&e1[r1+1].dataType!==7)throw new Error(`Input ${r1} must be an array of int32 or int64`)})},ui=(e1,_g)=>{let t1=[];if(e1.length>_g)if(e1[_g].dataType===7)e1[_g].getBigInt64Array().forEach(r1=>t1.push(Number(r1)));else if(e1[_g].dataType===6)e1[_g].getInt32Array().forEach(r1=>t1.push(Number(r1)));else throw new Error(`Input ${_g} must be an array of int32 or int64`);return t1},Gm=(e1,_g)=>{if(e1.length>1){let t1=ui(e1,1),r1=ui(e1,2),n1=ui(e1,3);return n1.length===0&&(n1=[...Array(e1[0].dims.length).keys()]),we({starts:t1,ends:r1,axes:n1})}else return _g},ud=(e1,_g,t1,r1,n1)=>{let i1=e1;return e1<0&&(i1+=t1[r1[_g]]),n1[_g]<0?Math.max(0,Math.min(i1,t1[r1[_g]]-1)):Math.max(0,Math.min(i1,t1[r1[_g]]))},Lm=(e1,_g,t1)=>`fn calculateInputIndices(output_indices: ${_g.type.indices}) -> ${e1.type.indices} {
          var input_indices: ${e1.type.indices};
          var carry = 0u;
          for (var i = ${t1.length}; i >= 0; i--) {
            let input_shape_i = ${fe("uniforms.input_shape","i",t1.length)};
            let steps_i = ${fe("uniforms.steps","i",t1.length)};
            let signs_i = ${fe("uniforms.signs","i",t1.length)};
            let starts_i = ${fe("uniforms.starts","i",t1.length)};
            var output_index = ${_g.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e1.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,Fm=(e1,_g)=>{let t1=e1[0].dims,r1=M$1.size(t1),n1=_g.axes.length>0?M$1.normalizeAxes(_g.axes,t1.length):[...Array(t1.length).keys()],i1=ui(e1,4);i1.forEach($1=>$1!==0||(()=>{throw new Error("step cannot be 0")})),i1.length===0&&(i1=Array(n1.length).fill(1));let o1=_g.starts.map(($1,y1)=>ud($1,y1,t1,n1,i1)),a1=_g.ends.map(($1,y1)=>ud($1,y1,t1,n1,i1));if(n1.length!==o1.length||n1.length!==a1.length)throw new Error("start, ends and axes should have the same number of elements");if(n1.length!==t1.length)for(let $1=0;$1<t1.length;++$1)n1.includes($1)||(o1.splice($1,0,0),a1.splice($1,0,t1[$1]),i1.splice($1,0,1));let u1=i1.map($1=>Math.sign($1));i1.forEach(($1,y1,_1)=>{if($1<0){let E1=(a1[y1]-o1[y1])/$1,T1=o1[y1],P1=T1+E1*i1[y1];o1[y1]=P1,a1[y1]=T1,_1[y1]=-$1}});let s1=t1.slice(0);n1.forEach(($1,y1)=>{s1[$1]=Math.ceil((a1[$1]-o1[$1])/i1[$1])});let l1={dims:s1,dataType:e1[0].dataType},c1=K("output",e1[0].dataType,s1.length),d1=U$1("input",e1[0].dataType,e1[0].dims.length),h1=M$1.size(s1),f1=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:o1.length},{name:"signs",type:"i32",length:u1.length},{name:"steps",type:"u32",length:i1.length}],g1=[{type:12,data:h1},{type:12,data:o1},{type:6,data:u1},{type:12,data:i1},...X(e1[0].dims,s1)],v1=$1=>`
      ${$1.registerUniforms(f1).declareVariables(d1,c1)}
        ${Lm(d1,c1,t1)}
        ${$1.mainStart()}
          ${$1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${c1.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${c1.setByOffset("global_idx",d1.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${u1.length}_${o1.length}_${i1.length}`,inputDependencies:["rank"]},getShaderSource:v1,getRunData:()=>({outputs:[l1],dispatchGroup:{x:Math.ceil(r1/64)},programUniforms:g1})}},ld=(e1,_g)=>{Hm(e1.inputs,_g);let t1=Gm(e1.inputs,_g);e1.compute(Fm(e1.inputs,t1),{inputs:[0]})},dd=e1=>{let _g=e1.starts,t1=e1.ends,r1=e1.axes;return we({starts:_g,ends:t1,axes:r1})}}),qm,jm,pd,md,fd=j(()=>{ye(),xe(),Ze(),_e(),qm=e1=>{if(!e1||e1.length!==1)throw new Error("Softmax op requires 1 input.")},jm=(e1,_g)=>{let t1=e1.dims,r1=M$1.size(t1),n1=64,i1=_g.axis;if(i1<0&&(i1=t1.length+i1),i1<t1.length-1)throw new Error("softmax only supports last axis for now.");let o1=t1[i1],a1=r1/o1,u1=Ue(o1),s1=o1/u1,l1=(v1,$1)=>$1===4?`max(max(${v1}.x, ${v1}.y), max(${v1}.z, ${v1}.w))`:$1===2?`max(${v1}.x, ${v1}.y)`:$1===3?`max(max(${v1}.x, ${v1}.y), ${v1}.z)`:v1,c1=U$1("x",e1.dataType,e1.dims,u1),d1=K("result",e1.dataType,e1.dims,u1),h1=c1.type.value,f1=De(e1.dataType)==="f32"?`var threadMax = ${h1}(-3.402823e+38f);`:`var threadMax = ${h1}(-65504.0h);`,g1=v1=>`
      var<workgroup> rowMaxShared : ${h1};
      var<workgroup> rowSumShared : ${h1};
      var<workgroup> threadShared : array<${h1}, ${n1}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${h1} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${h1}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${v1.registerUniform("packedCols","i32").declareVariables(c1,d1)}
      ${v1.mainStart()}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${n1};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${f1}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${h1}(${l1("threadShared[0]",u1)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${h1}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${h1}(${Et("threadShared[0]",u1)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`;return{name:"Softmax",shaderCache:{hint:`${u1}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:t1,dataType:e1.dataType}],dispatchGroup:{x:a1},programUniforms:[{type:6,data:s1}]}),getShaderSource:g1}},pd=(e1,_g)=>{qm(e1.inputs),e1.compute(jm(e1.inputs[0],_g))},md=e1=>we({axis:e1.axis})}),Km,Ym,Xm,Zm,Qm,hd,gd,yd=j(()=>{ye(),xe(),Ze(),_e(),Km=e1=>{if(!e1||e1.length<1)throw new Error("too few inputs")},Ym=(e1,_g)=>{let t1=[],r1=_g.numOutputs;return e1[1].dims[0]>0&&(e1[1].getBigInt64Array().forEach(n1=>t1.push(Number(n1))),r1=t1.length),we({numOutputs:r1,axis:_g.axis,splitSizes:t1})},Xm=e1=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e1}u; i += 1u ) {
    if (index < ${fe("uniforms.size_in_split_axis","i",e1)}) {
        return i;
    }
    }
    return ${e1}u;
}`,Zm=e1=>{let _g=e1.length,t1=[];for(let r1=0;r1<_g;++r1){let n1=e1[r1].setByIndices("indices","input[global_idx]");_g===1?t1.push(n1):r1===0?t1.push(`if (output_number == ${r1}u) { ${n1} }`):r1===_g-1?t1.push(`else { ${n1} }`):t1.push(`else if (output_number == ${r1}) { ${n1} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e1[0].type.indices}, global_idx: u32) {
        ${t1.join(`
`)}
      }`},Qm=(e1,_g)=>{let t1=e1[0].dims,r1=M$1.size(t1),n1=e1[0].dataType,i1=M$1.normalizeAxis(_g.axis,t1.length),o1=new Array(_g.numOutputs),a1=U$1("input",n1,t1.length),u1=new Array(_g.numOutputs),s1=[],l1=[],c1=0,d1=[{type:12,data:r1}];for(let f1=0;f1<_g.numOutputs;f1++){c1+=_g.splitSizes[f1],u1[f1]=c1;let g1=t1.slice();g1[_g.axis]=_g.splitSizes[f1],l1.push(g1),o1[f1]=K(`output${f1}`,n1,g1.length),s1.push({dims:l1[f1],dataType:e1[0].dataType})}d1.push({type:12,data:u1},...X(t1,...l1));let h1=f1=>`
  ${f1.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",u1.length).declareVariables(a1,...o1)}
  ${Xm(u1.length)}
  ${Zm(o1)}

  ${f1.mainStart()}
    ${f1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${a1.offsetToIndices("global_idx")};
    var index = ${a1.indicesGet("indices",i1)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",u1.length)};
      ${a1.indicesSet("indices",i1,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:_g.cacheKey,inputDependencies:["rank"]},getShaderSource:h1,getRunData:()=>({outputs:s1,dispatchGroup:{x:Math.ceil(r1/64)},programUniforms:d1})}},hd=(e1,_g)=>{Km(e1.inputs);let t1=e1.inputs.length===1?_g:Ym(e1.inputs,_g);e1.compute(Qm(e1.inputs,t1),{inputs:[0]})},gd=e1=>{let _g=e1.axis,t1=e1.splitSizes,r1=e1.numOutputs<0?t1.length:e1.numOutputs;if(r1!==t1.length)throw new Error("numOutputs and splitSizes lengh must be equal");return we({axis:_g,numOutputs:r1,splitSizes:t1})}}),bd,Jm,ef,tf,vd,wd=j(()=>{ye(),xe(),_e(),bd=e1=>Array.from(e1.getBigInt64Array(),Number),Jm=e1=>{if(!e1||e1.length!==2)throw new Error("Tile requires 2 inputs.");if(e1[0].dataType!==1&&e1[0].dataType!==6&&e1[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e1[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e1[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(bd(e1[1]).length!==e1[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},ef=(e1,_g)=>{let t1=[];for(let r1=0;r1<e1.length;++r1)t1.push(e1[r1]*_g[r1]);return t1},tf=e1=>{let _g=e1[0].dims,t1=bd(e1[1]),r1=ef(_g,t1),n1=M$1.size(r1),i1=e1[0].dataType,o1=U$1("input",i1,_g.length),a1=K("output",i1,r1.length),u1=s1=>`
      const inputShape = ${o1.indices(..._g)};
      ${s1.registerUniform("output_size","u32").declareVariables(o1,a1)}
      ${s1.mainStart()}
      ${s1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${a1.offsetToIndices("global_idx")};
      var input_indices: ${o1.type.indices};
      for (var i = 0; i < ${_g.length}; i++) {
        let input_dim_i = ${o1.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${a1.indicesGet("output_indices","i")}  % input_dim_i;

        ${o1.indicesSet("input_indices","i","input_dim_value")}
      }
      ${a1.setByOffset("global_idx",o1.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${t1}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:r1,dataType:e1[0].dataType}],dispatchGroup:{x:Math.ceil(n1/64)},programUniforms:[{type:12,data:n1},...X(e1[0].dims,r1)]}),getShaderSource:u1}},vd=e1=>{Jm(e1.inputs),e1.compute(tf(e1.inputs),{inputs:[0]})}}),rf,nf,$d,_d=j(()=>{ye(),xe(),_e(),rf=(e1,_g,t1,r1,n1)=>{let i1=K("output_data",n1,t1.length,4),o1=U$1("a_data",_g[1].dataType,_g[1].dims.length,4),a1=U$1("b_data",_g[2].dataType,_g[2].dims.length,4),u1=U$1("c_data",_g[0].dataType,_g[0].dims.length,4),s1,l1=(c1,d1,h1)=>`select(${d1}, ${c1}, ${h1})`;if(!r1)s1=i1.setByOffset("global_idx",l1(o1.getByOffset("global_idx"),a1.getByOffset("global_idx"),u1.getByOffset("global_idx")));else{let c1=(d1,h1,f1="")=>{let g1=`a_data[index_a${h1}][component_a${h1}]`,v1=`b_data[index_b${h1}][component_b${h1}]`,$1=`bool(c_data[index_c${h1}] & (0xffu << (component_c${h1} * 8)))`;return`
            let output_indices${h1} = ${i1.offsetToIndices(`global_idx * 4u + ${h1}u`)};
            let offset_a${h1} = ${o1.broadcastedIndicesToOffset(`output_indices${h1}`,i1)};
            let offset_b${h1} = ${a1.broadcastedIndicesToOffset(`output_indices${h1}`,i1)};
            let offset_c${h1} = ${u1.broadcastedIndicesToOffset(`output_indices${h1}`,i1)};
            let index_a${h1} = offset_a${h1} / 4u;
            let index_b${h1} = offset_b${h1} / 4u;
            let index_c${h1} = offset_c${h1} / 4u;
            let component_a${h1} = offset_a${h1} % 4u;
            let component_b${h1} = offset_b${h1} % 4u;
            let component_c${h1} = offset_c${h1} % 4u;
            ${d1}[${h1}] = ${f1}(${l1(g1,v1,$1)});
          `};n1===9?s1=`
            var data = vec4<u32>(0);
            ${c1("data",0,"u32")}
            ${c1("data",1,"u32")}
            ${c1("data",2,"u32")}
            ${c1("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:s1=`
            ${c1("output_data[global_idx]",0)}
            ${c1("output_data[global_idx]",1)}
            ${c1("output_data[global_idx]",2)}
            ${c1("output_data[global_idx]",3)}
          `}return`
        ${e1.registerUniform("vec_size","u32").declareVariables(u1,o1,a1,i1)}
        ${e1.mainStart()}
        ${e1.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${s1}
      }`},nf=e1=>{let _g=e1[1].dims,t1=e1[2].dims,r1=e1[0].dims,n1=e1[1].dataType,i1=!(M$1.areEqual(_g,t1)&&M$1.areEqual(t1,r1)),o1=_g,a1=M$1.size(_g);if(i1){let s1=zt.calcShape(zt.calcShape(_g,t1,!1),r1,!1);if(!s1)throw new Error("Can't perform where op on the given tensors");o1=s1,a1=M$1.size(o1)}let u1=Math.ceil(a1/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:s1=>rf(s1,e1,o1,i1,n1),getRunData:()=>({outputs:[{dims:o1,dataType:n1}],dispatchGroup:{x:Math.ceil(a1/64/4)},programUniforms:[{type:12,data:u1},...X(r1,_g,t1,o1)]})}},$d=e1=>{e1.compute(nf(e1.inputs))}}),xd,Sd=j(()=>{zs(),oo(),Ws(),Vs(),Cu(),Du(),io(),co(),Xu(),Ju(),rl(),sl(),dl(),pl(),hl(),bl(),$l(),xl(),Cl(),mo(),Al(),Pl(),zl(),Zl(),Jl(),jn(),nd(),od(),sd(),cd(),fd(),yd(),wd(),Rr(),Jn(),_d(),xd=new Map([["Abs",[Hs]],["Acos",[Gs]],["Acosh",[Ls]],["Add",[Iu]],["ArgMax",[Rs,no]],["ArgMin",[Ps,no]],["Asin",[Fs]],["Asinh",[qs]],["Atan",[js]],["Atanh",[Ks]],["Attention",[Ms]],["AveragePool",[Hl,Vl]],["BatchNormalization",[Us]],["BiasAdd",[Ns]],["BiasSplitGelu",[Su]],["Cast",[Xs,Ys]],["Ceil",[Qs]],["Clip",[Zs]],["Concat",[Bs,Ds]],["Conv",[go,ho]],["ConvTranspose",[Yu,Ku]],["Cos",[Js]],["Cosh",[eu]],["CumSum",[Zu,Qu]],["DepthToSpace",[el,tl]],["Div",[Tu]],["Einsum",[ol,al]],["Elu",[tu,Zn]],["Equal",[Au]],["Erf",[ru]],["Exp",[nu]],["Expand",[ll]],["FastGelu",[cl]],["Floor",[iu]],["FusedConv",[go,ho]],["Gather",[fl,ml]],["GatherElements",[yl,gl]],["Gelu",[ou]],["Gemm",[wl,vl]],["GlobalAveragePool",[Fl,Ll]],["GlobalMaxPool",[Xl,Yl]],["Greater",[Pu]],["GreaterOrEqual",[zu]],["HardSigmoid",[mu,pu]],["InstanceNormalization",[_l]],["LayerNormalization",[Sl]],["LeakyRelu",[au,Zn]],["Less",[Ru]],["LessOrEqual",[Bu]],["Log",[_u]],["MatMul",[Hu]],["MatMulNBits",[Il,Tl]],["MaxPool",[jl,Kl]],["Mul",[Eu]],["MultiHeadAttention",[Ol,kl]],["Neg",[uu]],["Not",[su]],["Pad",[Rl]],["Pow",[ku]],["Range",[Ql]],["Reciprocal",[lu]],["ReduceMin",[Is]],["ReduceMean",[$s]],["ReduceMax",[Cs]],["ReduceSum",[As]],["ReduceProd",[Ts]],["ReduceL1",[_s]],["ReduceL2",[xs]],["ReduceLogSum",[ks]],["ReduceLogSumExp",[Ss]],["ReduceSumSquare",[Es]],["Relu",[du]],["Resize",[td,rd]],["RotaryEmbedding",[id]],["Sigmoid",[cu]],["Sin",[fu]],["Sinh",[hu]],["Slice",[ld,dd]],["SkipLayerNormalization",[ad]],["Split",[hd,gd]],["Sqrt",[gu]],["Softmax",[pd,md]],["Sub",[Ou]],["Tan",[yu]],["Tanh",[vu]],["ThresholdedRelu",[$u,Zn]],["Tile",[vd]],["Transpose",[us,ls]],["Where",[$d]]])}),li,Cd=j(()=>{_t(),Xt(),_e(),li=class{constructor(e1){this.backend=e1,this.repo=new Map,this.attributesBound=!1}getArtifact(e1){return this.repo.get(e1)}setArtifact(e1,_g){this.repo.set(e1,_g)}run(e1,_g,t1,r1,n1){yt(e1.programInfo.name);let i1=this.backend.device,o1=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let a1=[];for(let s1 of _g)a1.push({binding:a1.length,resource:{buffer:s1.buffer}});for(let s1 of t1)a1.push({binding:a1.length,resource:{buffer:s1.buffer}});n1&&a1.push({binding:a1.length,resource:n1});let u1=i1.createBindGroup({layout:e1.computePipeline.getBindGroupLayout(0),entries:a1,label:e1.programInfo.name});if(this.backend.sessionStatus==="capturing"){let s1={kernelId:this.backend.currentKernelId,computePipeline:e1.computePipeline,bindGroup:u1,dispatchGroup:r1};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(s1)}o1.setPipeline(e1.computePipeline),o1.setBindGroup(0,u1),o1.dispatchWorkgroups(...r1),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ut(e1.programInfo.name)}dispose(){}build(e1,_g){yt(e1.name);let t1=this.backend.device,r1=[];t1.features.has("shader-f16")&&r1.push("enable f16;");let n1=as(_g,this.backend.device.limits),i1=e1.getShaderSource(n1),o1=`${r1.join(`
`)}
${n1.additionalImplementations}
${i1}`,a1=t1.createShaderModule({code:o1,label:e1.name});Ne("verbose",()=>`[WebGPU] ${e1.name} shader code: ${o1}`);let u1=t1.createComputePipeline({compute:{module:a1,entryPoint:"main"},layout:"auto",label:e1.name});return ut(e1.name),{programInfo:e1,computePipeline:u1,uniformVariablesInfo:n1.variablesInfo}}normalizeDispatchGroupSize(e1){let _g=typeof e1=="number"?e1:e1.x,t1=typeof e1=="number"?1:e1.y||1,r1=typeof e1=="number"?1:e1.z||1,n1=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(_g<=n1&&t1<=n1&&r1<=n1)return[_g,t1,r1];let i1=_g*t1*r1,o1=Math.ceil(Math.sqrt(i1));if(o1>n1){if(o1=Math.ceil(Math.cbrt(i1)),o1>n1)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[o1,o1,o1]}else return[o1,o1,1]}}}),of,af,_o,di,Id=j(()=>{_t(),ye(),Xt(),es(),os(),Sd(),Cd(),of=(e1,_g)=>{if(_g.length!==e1.length)throw new Error(`inputDependencies length ${_g.length} is not equal to inputTensors length ${e1.length}.`);let t1=[];for(let r1=0;r1<e1.length;++r1){let n1=e1[r1].dataType;switch(_g[r1]){case"none":{t1.push("");break}case"type":{t1.push(`${n1}`);break}case"rank":{let i1=e1[r1].dims.length;t1.push(`${n1};${i1}`);break}case"dims":{let i1=e1[r1].dims.join(",");t1.push(`${n1};${i1}`);break}default:throw new Error(`unsupported input dependency: ${_g[r1]}`)}}return t1.join("|")},af=(e1,_g,t1)=>{var n1,i1;let r1=e1.name;return(n1=e1.shaderCache)!=null&&n1.hint&&(r1+="["+e1.shaderCache.hint+"]"),r1+=":"+t1+`:${of(_g,((i1=e1.shaderCache)==null?void 0:i1.inputDependencies)??new Array(_g.length).fill("dims"))}`,r1},_o=class{constructor(e1){e1&&(this.architecture=e1.architecture,this.vendor=e1.vendor)}isArchitecture(e1){return this.architecture===e1}isVendor(e1){return this.vendor===e1}},di=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e1=this.kernelCustomData.get(this.currentKernelId);return e1||(e1={},this.kernelCustomData.set(this.currentKernelId,e1)),e1}async initialize(e1,_g){this.env=e1;let t1=[],r1={requiredLimits:{maxComputeWorkgroupStorageSize:_g.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:_g.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:_g.limits.maxStorageBufferBindingSize,maxBufferSize:_g.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:_g.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:_g.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:_g.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:_g.limits.maxComputeWorkgroupSizeZ},requiredFeatures:t1};_g.features.has("chromium-experimental-timestamp-query-inside-passes")?t1.push("chromium-experimental-timestamp-query-inside-passes"):_g.features.has("timestamp-query")&&t1.push("timestamp-query"),_g.features.has("shader-f16")&&t1.push("shader-f16"),this.device=await _g.requestDevice(r1),this.adapterInfo=new _o(await _g.requestAdapterInfo()),this.gpuDataManager=is(this),this.programManager=new li(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,Qa(e1.logLevel,!!e1.debug),this.device.onuncapturederror=n1=>{n1.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${n1.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:_g,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e1=this.getCommandEncoder(),_g={};this.queryType==="at-passes"&&(_g.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e1.beginComputePass(_g)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;yt(),this.endComputePass();let e1;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e1=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e1,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e1,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e1.mapAsync(GPUMapMode.READ).then(()=>{var r1;let _g=new BigUint64Array(e1.getMappedRange()),t1=this.pendingQueries.get(e1);for(let n1=0;n1<_g.length/2;n1++){let i1=t1[n1],o1=i1.kernelId,a1=this.kernels.get(o1),u1=a1.kernelType,s1=a1.kernelName,l1=i1.programName,c1=i1.inputTensorViews,d1=i1.outputTensorViews,h1=_g[n1*2],f1=_g[n1*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=h1);let g1=Number(h1-this.queryTimeBase),v1=Number(f1-this.queryTimeBase);if(!Number.isSafeInteger(g1)||!Number.isSafeInteger(v1))throw new RangeError("incorrect timestamp range");if((r1=this.env.webgpu.profiling)!=null&&r1.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:c1.map($1=>({dims:$1.dims,dataType:Yt($1.dataType)})),outputsMetadata:d1.map($1=>({dims:$1.dims,dataType:Yt($1.dataType)})),kernelId:o1,kernelType:u1,kernelName:s1,programName:l1,startTime:g1,endTime:v1});else{let $1="";c1.forEach((_1,E1)=>{$1+=`input[${E1}]: [${_1.dims}] | ${Yt(_1.dataType)}, `});let y1="";d1.forEach((_1,E1)=>{y1+=`output[${E1}]: [${_1.dims}] | ${Yt(_1.dataType)}, `}),console.log(`[profiling] kernel "${o1}|${u1}|${s1}|${l1}" ${$1}${y1}execution time: ${v1-g1} ns`)}Bn("GPU",`${l1}::${h1}::${f1}`)}e1.unmap(),this.pendingQueries.delete(e1)}),ut()}run(e1,_g,t1,r1,n1,i1){yt(e1.name);let o1=[];for(let y1=0;y1<_g.length;++y1){let _1=_g[y1].data;if(_1===0)continue;let E1=this.gpuDataManager.get(_1);if(!E1)throw new Error(`no GPU data for input: ${_1}`);o1.push(E1)}let{outputs:a1,dispatchGroup:u1,programUniforms:s1}=e1.getRunData(_g),l1=t1.length===0?a1.map((y1,_1)=>_1):t1;if(l1.length!==a1.length)throw new Error(`Output size ${l1.length} must be equal to ${a1.length}.`);let c1=[],d1=[];for(let y1=0;y1<a1.length;++y1){if(!Number.isInteger(l1[y1])||l1[y1]<-3||l1[y1]>=i1)throw new Error(`Invalid output index: ${l1[y1]}`);if(l1[y1]===-3)continue;let _1=l1[y1]===-1,E1=l1[y1]===-2,T1=_1||E1?n1(a1[y1].dataType,a1[y1].dims):r1(l1[y1],a1[y1].dataType,a1[y1].dims);if(c1.push(T1),T1.data===0)continue;let P1=this.gpuDataManager.get(T1.data);if(!P1)throw new Error(`no GPU data for output: ${T1.data}`);if(_1&&this.temporaryData.push(P1),E1){let k1=this.kernelPersistentData.get(this.currentKernelId);k1||(k1=[],this.kernelPersistentData.set(this.currentKernelId,k1)),k1.push(P1)}d1.push(P1)}if(o1.length!==_g.length||d1.length!==c1.length){if(d1.length===0)return ut(e1.name),c1;throw new Error(`Program ${e1.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let h1;if(s1){let y1=0,_1=[];s1.forEach(k1=>{let N1=typeof k1.data=="number"?[k1.data]:k1.data;if(N1.length===0)return;let W1=k1.type===10?2:4,H1,ty;k1.type===10?(ty=N1.length>4?16:N1.length>2?8:N1.length*W1,H1=N1.length>4?16:W1*N1.length):(ty=N1.length<=2?N1.length*W1:16,H1=16),y1=Math.ceil(y1/ty)*ty,_1.push(y1);let ey=k1.type===10?8:4;y1+=N1.length>4?Math.ceil(N1.length/ey)*H1:N1.length*W1});let E1=16;y1=Math.ceil(y1/E1)*E1;let T1=new ArrayBuffer(y1);s1.forEach((k1,N1)=>{let W1=_1[N1],H1=typeof k1.data=="number"?[k1.data]:k1.data;if(k1.type===6)new Int32Array(T1,W1,H1.length).set(H1);else if(k1.type===12)new Uint32Array(T1,W1,H1.length).set(H1);else if(k1.type===10)new Uint16Array(T1,W1,H1.length).set(H1);else if(k1.type===1)new Float32Array(T1,W1,H1.length).set(H1);else throw new Error(`Unsupported uniform type: ${Yt(k1.type)}`)});let P1=this.gpuDataManager.create(y1,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(P1.buffer,0,T1,0,y1),this.gpuDataManager.release(P1.id),h1={offset:0,size:y1,buffer:P1.buffer}}let f1=this.programManager.normalizeDispatchGroupSize(u1),g1=f1[1]===1&&f1[2]===1,v1=af(e1,_g,g1),$1=this.programManager.getArtifact(v1);if($1||($1=this.programManager.build(e1,f1),this.programManager.setArtifact(v1,$1),Ne("info",()=>`[artifact] key: ${v1}, programName: ${e1.name}`)),s1&&$1.uniformVariablesInfo){if(s1.length!==$1.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${$1.uniformVariablesInfo.length}, got ${s1.length} in program "${$1.programInfo.name}".`);for(let y1=0;y1<s1.length;y1++){let _1=s1[y1],E1=_1.type,T1=typeof _1.data=="number"?1:_1.data.length,[P1,k1]=$1.uniformVariablesInfo[y1];if(E1!==P1||T1!==k1)throw new Error(`Uniform variable ${y1} mismatch: expect type ${P1} with size ${k1}, got type ${E1} with size ${T1} in program "${$1.programInfo.name}".`)}}if(Ne("info",()=>`[ProgramManager] run "${e1.name}" (key=${v1}) with ${f1[0]}x${f1[1]}x${f1[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let y1={kernelId:this.currentKernelId,programName:$1.programInfo.name,inputTensorViews:_g,outputTensorViews:c1};this.pendingKernels.push(y1),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(y1)}return this.programManager.run($1,o1,d1,f1,h1),ut(e1.name),c1}upload(e1,_g){this.gpuDataManager.upload(e1,_g)}memcpy(e1,_g){this.gpuDataManager.memcpy(e1,_g)}async download(e1,_g){await this.gpuDataManager.download(e1,_g)}alloc(e1){return this.gpuDataManager.create(e1).id}free(e1){return this.gpuDataManager.release(e1)}createKernel(e1,_g,t1,r1){let n1=xd.get(e1);if(!n1)throw new Error(`kernel not implemented: ${e1}`);let i1={kernelType:e1,kernelName:r1,kernelEntry:n1[0],attributes:[n1[1],t1]};this.kernels.set(_g,i1)}releaseKernel(e1){let _g=this.kernelPersistentData.get(e1);if(_g){for(let t1 of _g)this.gpuDataManager.release(t1.id);this.kernelPersistentData.delete(e1)}this.kernelCustomData.delete(e1),this.kernels.delete(e1)}computeKernel(e1,_g,t1){let r1=this.kernels.get(e1);if(!r1)throw new Error(`kernel not created: ${e1}`);let n1=r1.kernelType,i1=r1.kernelName,o1=r1.kernelEntry,a1=r1.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${n1}] ${i1}" is not allowed to be called recursively`);this.currentKernelId=e1,a1[0]&&(a1[1]=a1[0](a1[1]),a1[0]=void 0),Ne("info",()=>`[WebGPU] Start to run kernel "[${n1}] ${i1}"...`);let u1=this.env.debug;this.temporaryData=[];try{return u1&&this.device.pushErrorScope("validation"),o1(_g,a1[1]),0}catch(s1){return t1.push(Promise.resolve(`[WebGPU] Kernel "[${n1}] ${i1}" failed. ${s1}`)),1}finally{u1&&t1.push(this.device.popErrorScope().then(s1=>s1?`GPU validation error for kernel "[${n1}] ${i1}": ${s1.message}`:null));for(let s1 of this.temporaryData)this.gpuDataManager.release(s1.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e1,_g,t1,r1){let n1=this.sessionExternalDataMapping.get(e1);n1||(n1=new Map,this.sessionExternalDataMapping.set(e1,n1));let i1=n1.get(_g),o1=this.gpuDataManager.registerExternalBuffer(t1,r1,i1==null?void 0:i1[1]);return n1.set(_g,[o1,t1]),o1}unregisterBuffers(e1){let _g=this.sessionExternalDataMapping.get(e1);_g&&(_g.forEach(t1=>this.gpuDataManager.unregisterExternalBuffer(t1[1])),this.sessionExternalDataMapping.delete(e1))}getBuffer(e1){let _g=this.gpuDataManager.get(e1);if(!_g)throw new Error(`no GPU data for buffer: ${e1}`);return _g.buffer}createDownloader(e1,_g,t1){return async()=>{let r1=await Xi(this,e1,_g);return Ja(r1.buffer,t1)}}writeTimestamp(e1){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e1)}setQueryType(){var e1;this.queryType="none",(((e1=this.env.webgpu.profiling)==null?void 0:e1.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ne("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ne("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ne("info","replay"),this.sessionStatus="replaying";let e1=this.capturedCommandList.get(this.currentSessionId),_g=this.capturedPendingKernels.get(this.currentSessionId),t1=e1.length;this.pendingKernels=[];for(let r1=0;r1<t1;r1++){let n1=this.getComputePassEncoder(),i1=e1[r1];this.writeTimestamp(this.pendingDispatchNumber*2),n1.setPipeline(i1.computePipeline),n1.setBindGroup(0,i1.bindGroup),n1.dispatchWorkgroups(...i1.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(_g[r1]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(e1){this.unregisterBuffers(e1),this.capturedCommandList.has(e1)&&this.capturedCommandList.delete(e1),this.capturedPendingKernels.has(e1)&&this.capturedPendingKernels.delete(e1),this.gpuDataManager.onReleaseSession(e1)}onRunStart(e1){this.currentSessionId=e1,this.setQueryType()}}}),Td={};kr(Td,{init:()=>sf});var an,xo,sf,Ad=j(()=>{ye(),Id(),Xt(),xe(),an=class hT{constructor(_g,t1,r1,n1){this.module=_g,this.dataType=t1,this.data=r1,this.dims=n1}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let _g=M$1.size(this.dims);return _g===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,_g)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let _g=M$1.size(this.dims);return _g===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,_g)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let _g=M$1.size(this.dims);return _g===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,_g)}reshape(_g){if(M$1.size(_g)!==M$1.size(this.dims))throw new Error("Invalid new shape");return new hT(this.module,this.dataType,this.data,_g)}},xo=class{constructor(e1,_g,t1){this.module=e1,this.backend=_g,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=_g.adapterInfo;let r1=e1.HEAPU32,n1=t1>>>2;this.opKernelContext=r1[n1++];let i1=r1[n1++];this.outputCount=r1[n1++],this.customDataOffset=r1[n1++],this.customDataSize=r1[n1++];let o1=[];for(let a1=0;a1<i1;a1++){let u1=r1[n1++],s1=r1[n1++],l1=r1[n1++],c1=[];for(let d1=0;d1<l1;d1++)c1.push(r1[n1++]);o1.push(new an(e1,u1,s1,c1))}this.inputs=o1}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(e1,_g){var o1;let t1=((o1=_g==null?void 0:_g.inputs)==null?void 0:o1.map(a1=>typeof a1=="number"?this.inputs[a1]:a1))??this.inputs,r1=(_g==null?void 0:_g.outputs)??[],n1=(a1,u1,s1)=>new an(this.module,u1,this.output(a1,s1),s1),i1=(a1,u1)=>{let s1=cr(a1);if(!s1)throw new Error(`Unsupported data type: ${a1}`);let l1=s1*M$1.size(u1),c1=l1>0?this.backend.gpuDataManager.create(l1).id:0;return new an(this.module,a1,c1,u1)};return this.backend.run(e1,t1,r1,n1,i1,this.outputCount)}output(e1,_g){let t1=this.module.stackSave();try{let r1=this.module.stackAlloc((1+_g.length)*4),n1=r1>>2;this.module.HEAPU32[n1++]=_g.length;for(let i1=0;i1<_g.length;i1++)this.module.HEAPU32[n1++]=_g[i1];return this.module._JsepOutput(this.opKernelContext,e1,r1)}catch(r1){throw new Error(`Failed to generate kernel's output[${e1}] with dims [${_g}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${r1}`)}finally{this.module.stackRestore(t1)}}},sf=async(e1,_g,t1,r1)=>{let n1=_g.jsepInit;if(!n1)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e1==="webgpu"){let i1=new di;await i1.initialize(t1,r1),n1("webgpu",[i1,o1=>i1.alloc(o1),o1=>i1.free(o1),(o1,a1,u1,s1=!1)=>{if(s1)Ne("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${o1}, dst=${a1}, size=${u1}`),i1.memcpy(o1,a1);else{Ne("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${o1}, gpuDataId=${a1}, size=${u1}`);let l1=_g.HEAPU8.subarray(o1>>>0,(o1>>>0)+u1);i1.upload(a1,l1)}},async(o1,a1,u1)=>{Ne("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${o1}, dataOffset=${a1}, size=${u1}`),await i1.download(o1,()=>_g.HEAPU8.subarray(a1>>>0,(a1>>>0)+u1))},(o1,a1,u1)=>i1.createKernel(o1,a1,u1,_g.UTF8ToString(_g._JsepGetNodeName(a1))),o1=>i1.releaseKernel(o1),(o1,a1,u1,s1)=>{Ne("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${u1}, kernel=${o1}, contextDataOffset=${a1}`);let l1=new xo(_g,i1,a1);return i1.computeKernel(o1,l1,s1)},()=>i1.captureBegin(),()=>i1.captureEnd(),()=>i1.replay()])}else n1("webnn")}}),uf,kd,Od,hr,lf,So,Pd,Rd,Ed,zd,Bd,Dd,Md=j(()=>{ja(),Ya(),ye(),Or(),Wn(),qi(),uf=(e1,_g)=>{Fe()._OrtInit(e1,_g)!==0&&We("Can't initialize onnxruntime.")},kd=async e1=>{uf(e1.wasm.numThreads,en(e1.logLevel))},Od=async(e1,_g)=>{{let t1=(Ad(),sr(Td)).init;if(_g==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let r1=e1.webgpu.adapter;if(r1){if(typeof r1.limits!="object"||typeof r1.features!="object"||typeof r1.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let n1=e1.webgpu.powerPreference;if(n1!==void 0&&n1!=="low-power"&&n1!=="high-performance")throw new Error(`Invalid powerPreference setting: "${n1}"`);let i1=e1.webgpu.forceFallbackAdapter;if(i1!==void 0&&typeof i1!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${i1}"`);if(r1=await navigator.gpu.requestAdapter({powerPreference:n1,forceFallbackAdapter:i1}),!r1)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}if(!e1.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await t1("webgpu",Fe(),e1,r1)}if(_g==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await t1("webnn",Fe(),e1)}}},hr=new Map,lf=e1=>{let _g=Fe(),t1=_g.stackSave();try{let r1=_g.stackAlloc(8);return _g._OrtGetInputOutputCount(e1,r1,r1+4)!==0&&We("Can't get session input/output count."),[_g.HEAP32[r1/4],_g.HEAP32[r1/4+1]]}finally{_g.stackRestore(t1)}},So=e1=>{let _g=Fe(),t1=_g._malloc(e1.byteLength);if(t1===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e1.byteLength}.`);return _g.HEAPU8.set(e1,t1),[t1,e1.byteLength]},Pd=async(e1,_g)=>{var c1,d1;let t1,r1,n1=Fe();Array.isArray(e1)?[t1,r1]=e1:e1.buffer===n1.HEAPU8.buffer?[t1,r1]=[e1.byteOffset,e1.byteLength]:[t1,r1]=So(e1);let i1=0,o1=0,a1=0,u1=[],s1=[],l1=[];try{if([o1,u1]=Ka(_g),(_g==null?void 0:_g.externalData)&&n1.mountExternalData){let E1=[];for(let T1 of _g.externalData){let P1=typeof T1=="string"?T1:T1.path;E1.push(tn(typeof T1=="string"?T1:T1.data).then(k1=>{n1.mountExternalData(P1,k1)}))}await Promise.all(E1)}i1=await n1._OrtCreateSession(t1,r1,o1),i1===0&&We("Can't create a session.");let[h1,f1]=lf(i1),g1=!!(_g!=null&&_g.enableGraphCapture),v1=[],$1=[],y1=[];for(let E1=0;E1<h1;E1++){let T1=n1._OrtGetInputName(i1,E1);T1===0&&We("Can't get an input name."),s1.push(T1),v1.push(n1.UTF8ToString(T1))}for(let E1=0;E1<f1;E1++){let T1=n1._OrtGetOutputName(i1,E1);T1===0&&We("Can't get an output name."),l1.push(T1);let P1=n1.UTF8ToString(T1);$1.push(P1);{if(g1&&(_g==null?void 0:_g.preferredOutputLocation)===void 0){y1.push("gpu-buffer");continue}let k1=typeof(_g==null?void 0:_g.preferredOutputLocation)=="string"?_g.preferredOutputLocation:((c1=_g==null?void 0:_g.preferredOutputLocation)==null?void 0:c1[P1])??"cpu";if(k1!=="cpu"&&k1!=="cpu-pinned"&&k1!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${k1}.`);if(g1&&k1!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${k1}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);y1.push(k1)}}let _1=null;return y1.some(E1=>E1==="gpu-buffer")&&(a1=n1._OrtCreateBinding(i1),a1===0&&We("Can't create IO binding."),_1={handle:a1,outputPreferredLocations:y1,outputPreferredLocationsEncoded:y1.map(E1=>Fi(E1))}),hr.set(i1,[i1,s1,l1,_1,g1,!1]),[i1,v1,$1]}catch(h1){throw s1.forEach(f1=>n1._OrtFree(f1)),l1.forEach(f1=>n1._OrtFree(f1)),a1!==0&&n1._OrtReleaseBinding(a1),i1!==0&&n1._OrtReleaseSession(i1),h1}finally{n1._free(t1),o1!==0&&n1._OrtReleaseSessionOptions(o1),u1.forEach(h1=>n1._free(h1)),(d1=n1.unmountExternalData)==null||d1.call(n1)}},Rd=e1=>{var u1;let _g=Fe(),t1=hr.get(e1);if(!t1)throw new Error(`cannot release session. invalid session id: ${e1}`);let[r1,n1,i1,o1,a1]=t1;o1&&(a1&&_g._OrtClearBoundOutputs(o1.handle),_g._OrtReleaseBinding(o1.handle)),(u1=_g.jsepOnReleaseSession)==null||u1.call(_g,e1),n1.forEach(s1=>_g._OrtFree(s1)),i1.forEach(s1=>_g._OrtFree(s1)),_g._OrtReleaseSession(r1),hr.delete(e1)},Ed=(e1,_g,t1,r1,n1,i1=!1)=>{if(!e1){_g.push(0);return}let o1=Fe(),a1=e1[0],u1=e1[1],s1=e1[3],l1,c1;if(a1==="string"&&s1==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(i1&&s1!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${n1} when enableGraphCapture is true.`);if(s1==="gpu-buffer"){let f1=e1[2].gpuBuffer,g1=cr(Li(a1));c1=u1.reduce(($1,y1)=>$1*y1,1)*g1;let v1=o1.jsepRegisterBuffer;if(!v1)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');l1=v1(r1,n1,f1,c1)}else{let f1=e1[2];if(Array.isArray(f1)){c1=4*f1.length,l1=o1._malloc(c1),t1.push(l1);let g1=l1/4;for(let v1=0;v1<f1.length;v1++){if(typeof f1[v1]!="string")throw new TypeError(`tensor data at index ${v1} is not a string`);o1.HEAPU32[g1++]=qe(f1[v1],t1)}}else c1=f1.byteLength,l1=o1._malloc(c1),t1.push(l1),o1.HEAPU8.set(new Uint8Array(f1.buffer,f1.byteOffset,c1),l1)}let d1=o1.stackSave(),h1=o1.stackAlloc(4*u1.length);try{let f1=h1/4;u1.forEach(v1=>o1.HEAP32[f1++]=v1);let g1=o1._OrtCreateTensor(Li(a1),l1,c1,h1,u1.length,Fi(s1));g1===0&&We(`Can't create tensor for input/output. session=${r1}, index=${n1}.`),_g.push(g1)}finally{o1.stackRestore(d1)}},zd=async(e1,_g,t1,r1,n1,i1)=>{var H1,ty;let o1=Fe(),a1=hr.get(e1);if(!a1)throw new Error(`cannot run inference. invalid session id: ${e1}`);let u1=a1[0],s1=a1[1],l1=a1[2],c1=a1[3],d1=a1[4],h1=a1[5],f1=_g.length,g1=r1.length,v1=0,$1=[],y1=[],_1=[],E1=[],T1=o1.stackSave(),P1=o1.stackAlloc(f1*4),k1=o1.stackAlloc(f1*4),N1=o1.stackAlloc(g1*4),W1=o1.stackAlloc(g1*4);try{[v1,$1]=qa(i1);for(let K1=0;K1<f1;K1++)Ed(t1[K1],y1,E1,e1,_g[K1],d1);for(let K1=0;K1<g1;K1++)Ed(n1[K1],_1,E1,e1,f1+r1[K1],d1);let ey=P1/4,ly=k1/4,oy=N1/4,Q1=W1/4;for(let K1=0;K1<f1;K1++)o1.HEAPU32[ey++]=y1[K1],o1.HEAPU32[ly++]=s1[_g[K1]];for(let K1=0;K1<g1;K1++)o1.HEAPU32[oy++]=_1[K1],o1.HEAPU32[Q1++]=l1[r1[K1]];if(c1&&!h1){let{handle:K1,outputPreferredLocations:J1,outputPreferredLocationsEncoded:hy}=c1;if(s1.length!==f1)throw new Error(`input count from feeds (${f1}) is expected to be always equal to model's input count (${s1.length}).`);for(let G1=0;G1<f1;G1++){let Y1=_g[G1];await o1._OrtBindInput(K1,s1[Y1],y1[G1])!==0&&We(`Can't bind input[${G1}] for session=${e1}.`)}for(let G1=0;G1<g1;G1++){let Y1=r1[G1];(H1=n1[G1])!=null&&H1[3]?o1._OrtBindOutput(K1,l1[Y1],_1[G1],0)!==0&&We(`Can't bind pre-allocated output[${G1}] for session=${e1}.`):o1._OrtBindOutput(K1,l1[Y1],0,hy[Y1])!==0&&We(`Can't bind output[${G1}] to ${J1[G1]} for session=${e1}.`)}hr.set(e1,[u1,s1,l1,c1,d1,!0])}(ty=o1.jsepOnRunStart)==null||ty.call(o1,u1);let U1;c1?U1=await o1._OrtRunWithBinding(u1,c1.handle,g1,N1,v1):U1=await o1._OrtRun(u1,k1,P1,f1,W1,g1,N1,v1),U1!==0&&We("failed to call OrtRun().");let V1=[];for(let K1=0;K1<g1;K1++){let J1=o1.HEAPU32[N1/4+K1];if(J1===_1[K1]){V1.push(n1[K1]);continue}let hy=o1.stackSave(),G1=o1.stackAlloc(4*4),Y1=!1,yy,Oy=0;try{o1._OrtGetTensorData(J1,G1,G1+4,G1+8,G1+12)!==0&&We(`Can't access output tensor data on index ${K1}.`);let Ey=G1/4,jy=o1.HEAPU32[Ey++];Oy=o1.HEAPU32[Ey++];let Ay=o1.HEAPU32[Ey++],Uy=o1.HEAPU32[Ey++],Gy=[];for(let Vy=0;Vy<Uy;Vy++)Gy.push(o1.HEAPU32[Ay/4+Vy]);o1._OrtFree(Ay);let Wy=Gy.reduce((Vy,p0)=>Vy*p0,1);yy=Yt(jy);let Yy=c1==null?void 0:c1.outputPreferredLocations[r1[K1]];if(yy==="string"){if(Yy==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Vy=[],p0=Oy/4;for(let y0=0;y0<Wy;y0++){let A0=o1.HEAPU32[p0++],lv=y0===Wy-1?void 0:o1.HEAPU32[p0]-A0;Vy.push(o1.UTF8ToString(A0,lv))}V1.push([yy,Gy,Vy,"cpu"])}else if(Yy==="gpu-buffer"&&Wy>0){let Vy=o1.jsepGetBuffer;if(!Vy)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let p0=Vy(Oy),y0=cr(jy);if(y0===void 0||!Vn(yy))throw new Error(`Unsupported data type: ${yy}`);Y1=!0,V1.push([yy,Gy,{gpuBuffer:p0,download:o1.jsepCreateDownloader(p0,Wy*y0,yy),dispose:()=>{o1._OrtReleaseTensor(J1)}},"gpu-buffer"])}else{let Vy=Nn(yy),p0=new Vy(Wy);new Uint8Array(p0.buffer,p0.byteOffset,p0.byteLength).set(o1.HEAPU8.subarray(Oy,Oy+p0.byteLength)),V1.push([yy,Gy,p0,"cpu"])}}finally{o1.stackRestore(hy),yy==="string"&&Oy&&o1._free(Oy),Y1||o1._OrtReleaseTensor(J1)}}return c1&&!d1&&(o1._OrtClearBoundOutputs(c1.handle),hr.set(e1,[u1,s1,l1,c1,d1,!1])),V1}finally{o1.stackRestore(T1),y1.forEach(ey=>o1._OrtReleaseTensor(ey)),_1.forEach(ey=>o1._OrtReleaseTensor(ey)),E1.forEach(ey=>o1._free(ey)),v1!==0&&o1._OrtReleaseRunOptions(v1),$1.forEach(ey=>o1._free(ey))}},Bd=e1=>{let _g=Fe(),t1=hr.get(e1);if(!t1)throw new Error("invalid session id");let r1=t1[0],n1=_g._OrtEndProfiling(r1);n1===0&&We("Can't get an profile file name."),_g._OrtFree(n1)},Dd=e1=>{let _g=[];for(let t1 of e1){let r1=t1[2];!Array.isArray(r1)&&"buffer"in r1&&_g.push(r1.buffer)}return _g}}),Ud=Er((e1,_g)=>{_g.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var ao=Object.defineProperty;var nl=Object.getOwnPropertyDescriptor;var ol=Object.getOwnPropertyNames;var il=Object.prototype.hasOwnProperty;var Y=(e,t)=>()=>(e&&(t=e(e=0)),t);var Wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gn=(e,t)=>{for(var r in t)ao(e,r,{get:t[r],enumerable:!0})},al=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ol(t))!il.call(e,i)&&i!==r&&ao(e,i,{get:()=>t[i],enumerable:!(o=nl(t,i))||o.enumerable});return e};var wr=e=>al(ao({},"__esModule",{value:!0}),e);var so={};gn(so,{createReadStream:()=>Ai,readFile:()=>sl,readFileSync:()=>ul});var sl,ul,Ai,uo=Y(()=>{sl=void 0,ul=void 0,Ai=void 0});var lo={};gn(lo,{join:()=>dl});var dl,co=Y(()=>{dl=void 0});var Ei=Wr((Ti,po)=>{"use strict";var Ii=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){var r=t,o,i,u=new Promise((s,m)=>{o=s,i=m});r.mountExternalData=(s,m)=>{(r.eb||(r.eb=new Map)).set(s,m)},r.unmountExternalData=()=>{delete r.eb};let a=()=>{let s=(g,$,T)=>(...B)=>{let H=dt,q=$?.();B=g(...B);let te=$?.();return q!==te&&(g=te,T(q),$=T=null),dt!=H?tn():B},m=g=>async(...$)=>{try{if(r.cb)throw Error("Session already started");let T=r.cb={xb:$[0],errors:[]},B=await g(...$);if(r.cb!==T)throw Error("Session mismatch");r.kb?.flush();let H=T.errors;if(0<H.length){let q=await Promise.all(H);if(q=q.filter(te=>te),0<q.length)throw Error(q.join(`\n`))}return B}finally{r.cb=null}};r._OrtCreateSession=s(r._OrtCreateSession,()=>r._OrtCreateSession,g=>r._OrtCreateSession=g),r._OrtRun=m(s(r._OrtRun,()=>r._OrtRun,g=>r._OrtRun=g)),r._OrtRunWithBinding=m(s(r._OrtRunWithBinding,()=>r._OrtRunWithBinding,g=>r._OrtRunWithBinding=g)),r._OrtBindInput=s(r._OrtBindInput,()=>r._OrtBindInput,g=>r._OrtBindInput=g),a=void 0};r.jsepInit=(s,m)=>{if(a?.(),s==="webgpu"){[r.kb,r.pb,r.tb,r.lb,r.sb,r.Ra,r.ub,r.wb,r.qb,r.rb,r.vb]=m;let g=r.kb;r.jsepRegisterBuffer=($,T,B,H)=>g.registerBuffer($,T,B,H),r.jsepGetBuffer=$=>g.getBuffer($),r.jsepCreateDownloader=($,T,B)=>g.createDownloader($,T,B),r.jsepOnReleaseSession=$=>{g.onReleaseSession($)},r.jsepOnRunStart=$=>g.onRunStart($)}};var c=Object.assign({},r),p="./this.program",h=(s,m)=>{throw m},d=typeof window=="object",y=typeof importScripts=="function",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_="",v,S,A;if(w){var I=(uo(),wr(so)),x=(co(),wr(lo));_=y?x.dirname(_)+"/":__dirname+"/",v=(s,m)=>(s=Ke(s)?new URL(s):x.normalize(s),I.readFileSync(s,m?void 0:"utf8")),A=s=>(s=v(s,!0),s.buffer||(s=new Uint8Array(s)),s),S=(s,m,g,$=!0)=>{s=Ke(s)?new URL(s):x.normalize(s),I.readFile(s,$?void 0:"utf8",(T,B)=>{T?g(T):m($?B.buffer:B)})},!r.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(s,m)=>{throw process.exitCode=s,m}}else(d||y)&&(y?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),e&&(_=e),_.startsWith("blob:")?_="":_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),v=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.send(null),m.responseText},y&&(A=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),S=(s,m,g)=>{var $=new XMLHttpRequest;$.open("GET",s,!0),$.responseType="arraybuffer",$.onload=()=>{$.status==200||$.status==0&&$.response?m($.response):g()},$.onerror=g,$.send(null)});var E=console.log.bind(console),P=console.error.bind(console);Object.assign(r,c),c=null;var O,R=!1,L,N,K,Q,he,W,se,Ce,We,ee,ae;function Ae(){var s=O.buffer;r.HEAP8=N=new Int8Array(s),r.HEAP16=Q=new Int16Array(s),r.HEAPU8=K=new Uint8Array(s),r.HEAPU16=he=new Uint16Array(s),r.HEAP32=W=new Int32Array(s),r.HEAPU32=se=new Uint32Array(s),r.HEAPF32=Ce=new Float32Array(s),r.HEAPF64=ae=new Float64Array(s),r.HEAP64=We=new BigInt64Array(s),r.HEAPU64=ee=new BigUint64Array(s)}var me=[],ie=[],ue=[],le=0,qe=null,G=null;function ne(s){throw s="Aborted("+s+")",P(s),R=!0,L=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),i(s),s}var xe=s=>s.startsWith("data:application/octet-stream;base64,"),Ke=s=>s.startsWith("file://"),Be;if(Be="ort-wasm-simd.wasm",!xe(Be)){var Ge=Be;Be=r.locateFile?r.locateFile(Ge,_):_+Ge}function Ut(s){if(A)return A(s);throw"both async and sync fetching of the wasm failed"}function Ne(s){if(d||y){if(typeof fetch=="function"&&!Ke(s))return fetch(s,{credentials:"same-origin"}).then(m=>{if(!m.ok)throw`failed to load wasm binary file at \'${s}\'`;return m.arrayBuffer()}).catch(()=>Ut(s));if(S)return new Promise((m,g)=>{S(s,$=>m(new Uint8Array($)),g)})}return Promise.resolve().then(()=>Ut(s))}function Ye(s,m,g){return Ne(s).then($=>WebAssembly.instantiate($,m)).then(g,$=>{P(`failed to asynchronously prepare wasm: ${$}`),ne($)})}function mt(s,m){var g=Be;return typeof WebAssembly.instantiateStreaming!="function"||xe(g)||Ke(g)||w||typeof fetch!="function"?Ye(g,s,m):fetch(g,{credentials:"same-origin"}).then($=>WebAssembly.instantiateStreaming($,s).then(m,function(T){return P(`wasm streaming compile failed: ${T}`),P("falling back to ArrayBuffer instantiation"),Ye(g,s,m)}))}var Rt={824920:(s,m,g,$)=>{if(typeof r>"u"||!r.eb)return 1;if(s=je(s>>>0),s.startsWith("./")&&(s=s.substring(2)),s=r.eb.get(s),!s)return 2;if(m>>>=0,g>>>=0,m+g>s.byteLength)return 3;try{return K.set(s.subarray(m,m+g),$>>>0>>>0),0}catch{return 4}},825421:()=>{r.qb()},825452:()=>{r.rb()},825481:()=>{r.vb()},825506:s=>r.pb(s),825539:s=>r.tb(s),825571:(s,m,g)=>{r.lb(s,m,g,!0)},825610:(s,m,g)=>{r.lb(s,m,g)},825643:s=>{r.Ra("Abs",s,void 0)},825694:s=>{r.Ra("Neg",s,void 0)},825745:s=>{r.Ra("Floor",s,void 0)},825798:s=>{r.Ra("Ceil",s,void 0)},825850:s=>{r.Ra("Reciprocal",s,void 0)},825908:s=>{r.Ra("Sqrt",s,void 0)},825960:s=>{r.Ra("Exp",s,void 0)},826011:s=>{r.Ra("Erf",s,void 0)},826062:s=>{r.Ra("Sigmoid",s,void 0)},826117:(s,m,g)=>{r.Ra("HardSigmoid",s,{alpha:m,beta:g})},826196:s=>{r.Ra("Log",s,void 0)},826247:s=>{r.Ra("Sin",s,void 0)},826298:s=>{r.Ra("Cos",s,void 0)},826349:s=>{r.Ra("Tan",s,void 0)},826400:s=>{r.Ra("Asin",s,void 0)},826452:s=>{r.Ra("Acos",s,void 0)},826504:s=>{r.Ra("Atan",s,void 0)},826556:s=>{r.Ra("Sinh",s,void 0)},826608:s=>{r.Ra("Cosh",s,void 0)},826660:s=>{r.Ra("Asinh",s,void 0)},826713:s=>{r.Ra("Acosh",s,void 0)},826766:s=>{r.Ra("Atanh",s,void 0)},826819:s=>{r.Ra("Tanh",s,void 0)},826871:s=>{r.Ra("Not",s,void 0)},826922:(s,m,g)=>{r.Ra("Clip",s,{min:m,max:g})},826991:s=>{r.Ra("Clip",s,void 0)},827043:(s,m)=>{r.Ra("Elu",s,{alpha:m})},827101:s=>{r.Ra("Relu",s,void 0)},827153:(s,m)=>{r.Ra("LeakyRelu",s,{alpha:m})},827217:(s,m)=>{r.Ra("ThresholdedRelu",s,{alpha:m})},827287:(s,m)=>{r.Ra("Cast",s,{to:m})},827345:s=>{r.Ra("Add",s,void 0)},827396:s=>{r.Ra("Sub",s,void 0)},827447:s=>{r.Ra("Mul",s,void 0)},827498:s=>{r.Ra("Div",s,void 0)},827549:s=>{r.Ra("Pow",s,void 0)},827600:s=>{r.Ra("Equal",s,void 0)},827653:s=>{r.Ra("Greater",s,void 0)},827708:s=>{r.Ra("GreaterOrEqual",s,void 0)},827770:s=>{r.Ra("Less",s,void 0)},827822:s=>{r.Ra("LessOrEqual",s,void 0)},827881:(s,m,g,$,T)=>{r.Ra("ReduceMean",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828040:(s,m,g,$,T)=>{r.Ra("ReduceMax",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828198:(s,m,g,$,T)=>{r.Ra("ReduceMin",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828356:(s,m,g,$,T)=>{r.Ra("ReduceProd",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828515:(s,m,g,$,T)=>{r.Ra("ReduceSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828673:(s,m,g,$,T)=>{r.Ra("ReduceL1",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828830:(s,m,g,$,T)=>{r.Ra("ReduceL2",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828987:(s,m,g,$,T)=>{r.Ra("ReduceLogSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829148:(s,m,g,$,T)=>{r.Ra("ReduceSumSquare",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829312:(s,m,g,$,T)=>{r.Ra("ReduceLogSumExp",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829476:s=>{r.Ra("Where",s,void 0)},829529:(s,m,g)=>{r.Ra("Transpose",s,{perm:m?Array.from(W.subarray(m>>>0,g>>>0)):[]})},829637:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829770:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829903:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},830304:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},830869:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},831270:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},831835:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},831926:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832210:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},832301:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832585:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},832672:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832952:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},833039:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},833319:(s,m,g,$,T)=>{r.Ra("Gemm",s,{alpha:m,beta:g,transA:$,transB:T})},833423:s=>{r.Ra("MatMul",s,void 0)},833477:(s,m,g,$)=>{r.Ra("ArgMax",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833585:(s,m,g,$)=>{r.Ra("ArgMin",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833693:(s,m)=>{r.Ra("Softmax",s,{axis:m})},833756:(s,m)=>{r.Ra("Concat",s,{axis:m})},833816:(s,m,g,$,T)=>{r.Ra("Split",s,{axis:m,numOutputs:g,splitSizes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},833956:s=>{r.Ra("Expand",s,void 0)},834010:(s,m)=>{r.Ra("Gather",s,{axis:Number(m)})},834081:(s,m)=>{r.Ra("GatherElements",s,{axis:Number(m)})},834160:(s,m,g,$,T,B,H,q,te,X,de)=>{r.Ra("Resize",s,{antialias:m,axes:g?Array.from(W.subarray(g>>>0,$>>>0)):[],coordinateTransformMode:je(T),cubicCoeffA:B,excludeOutside:H,extrapolationValue:q,keepAspectRatioPolicy:je(te),mode:je(X),nearestMode:je(de)})},834506:(s,m,g,$,T,B,H)=>{r.Ra("Slice",s,{starts:m?Array.from(W.subarray(m>>>0,g>>>0)):[],ends:$?Array.from(W.subarray($>>>0,T>>>0)):[],axes:B?Array.from(W.subarray(B>>>0,H>>>0)):[]})},834722:s=>{r.Ra("Tile",s,void 0)},834774:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},834885:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},834999:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},835113:s=>{r.Ra("Range",s,void 0)},835166:(s,m)=>{r.Ra("Einsum",s,{equation:je(m)})},835247:(s,m,g,$,T)=>{r.Ra("Pad",s,{mode:m,value:g,pads:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},835374:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835543:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835712:(s,m,g)=>{r.Ra("CumSum",s,{exclusive:Number(m),reverse:Number(g)})},835809:(s,m,g,$,T,B,H,q,te)=>{r.Ra("Attention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B,qkvHiddenSizes:H?Array.from(W.subarray(Number(q)>>>0,Number(q)+H>>>0)):[],pastPresentShareBuffer:!!te})},836081:s=>{r.Ra("BiasAdd",s,void 0)},836136:s=>{r.Ra("BiasSplitGelu",s,void 0)},836197:s=>{r.Ra("FastGelu",s,void 0)},836253:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe)=>{r.Ra("Conv",s,{format:te?"NHWC":"NCHW",auto_pad:m,dilations:[g],group:$,kernel_shape:[T],pads:B?Array.from(W.subarray(B>>>0,H>>>0)):[],strides:[q],w_is_const:()=>!!N[X>>>0],activation:je(de),activation_params:Ee?Array.from(Ce.subarray(Ee>>>0,Oe>>>0)):[]})},836623:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("Conv",s,{format:Ee?"NHWC":"NCHW",auto_pad:m,dilations:[g,$],group:T,kernel_shape:[B,H],pads:q?Array.from(W.subarray(q>>>0,te>>>0)):[],strides:[X,de],w_is_const:()=>!!N[Oe>>>0],activation:je(D),activation_params:be?Array.from(Ce.subarray(be>>>0,Ie>>>0)):[]})},837014:s=>{r.Ra("Gelu",s,void 0)},837066:(s,m,g,$,T,B)=>{r.Ra("MatMulNBits",s,{k:m,n:g,accuracyLevel:$,bits:T,blockSize:B})},837193:(s,m,g,$,T,B)=>{r.Ra("MultiHeadAttention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B})},837352:(s,m,g,$,T)=>{r.Ra("RotaryEmbedding",s,{interleaved:!!m,numHeads:g,rotaryEmbeddingDim:$,scale:T})},837491:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837593:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837695:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},837806:s=>{r.ub(s)},837840:(s,m)=>r.wb(s,m,r.cb.xb,r.cb.errors)};function qt(s){this.name="ExitStatus",this.message=`Program terminated with exit(${s})`,this.status=s}class Vt{constructor(m){this.hb=m-24}}var sr=0,jt=0,xr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Kt=(s,m,g)=>{m>>>=0;var $=m+g;for(g=m;s[g]&&!(g>=$);)++g;if(16<g-m&&s.buffer&&xr)return xr.decode(s.subarray(m,g));for($="";m<g;){var T=s[m++];if(T&128){var B=s[m++]&63;if((T&224)==192)$+=String.fromCharCode((T&31)<<6|B);else{var H=s[m++]&63;T=(T&240)==224?(T&15)<<12|B<<6|H:(T&7)<<18|B<<12|H<<6|s[m++]&63,65536>T?$+=String.fromCharCode(T):(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023))}}else $+=String.fromCharCode(T)}return $},je=(s,m)=>(s>>>=0)?Kt(K,s,m):"",Wt=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);127>=$?m++:2047>=$?m+=2:55296<=$&&57343>=$?(m+=4,++g):m+=3}return m},at=(s,m,g,$)=>{if(g>>>=0,!(0<$))return 0;var T=g;$=g+$-1;for(var B=0;B<s.length;++B){var H=s.charCodeAt(B);if(55296<=H&&57343>=H){var q=s.charCodeAt(++B);H=65536+((H&1023)<<10)|q&1023}if(127>=H){if(g>=$)break;m[g++>>>0]=H}else{if(2047>=H){if(g+1>=$)break;m[g++>>>0]=192|H>>6}else{if(65535>=H){if(g+2>=$)break;m[g++>>>0]=224|H>>12}else{if(g+3>=$)break;m[g++>>>0]=240|H>>18,m[g++>>>0]=128|H>>12&63}m[g++>>>0]=128|H>>6&63}m[g++>>>0]=128|H&63}}return m[g>>>0]=0,g-T},Cr,ft=s=>{for(var m="";K[s>>>0];)m+=Cr[K[s++>>>0]];return m},ur={},Ar={},Ir={},st;function Tr(s,m,g={}){var $=m.name;if(!s)throw new st(`type "${$}" must have a positive integer typeid pointer`);if(Ar.hasOwnProperty(s)){if(g.nb)return;throw new st(`Cannot register type \'${$}\' twice`)}Ar[s]=m,delete Ir[s],ur.hasOwnProperty(s)&&(m=ur[s],delete ur[s],m.forEach(T=>T()))}function ht(s,m,g={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Tr(s,m,g)}var bt=(s,m,g)=>{switch(m){case 1:return g?$=>N[$>>>0]:$=>K[$>>>0];case 2:return g?$=>Q[$>>>1>>>0]:$=>he[$>>>1>>>0];case 4:return g?$=>W[$>>>2>>>0]:$=>se[$>>>2>>>0];case 8:return g?$=>We[$>>>3]:$=>ee[$>>>3];default:throw new TypeError(`invalid integer width (${m}): ${s}`)}},Er=[],Te=[];function dr(s){s>>>=0,9<s&&--Te[s+1]===0&&(Te[s]=void 0,Er.push(s))}var Xe=s=>{if(!s)throw new st("Cannot use deleted val. handle = "+s);return Te[s]},ut=s=>{switch(s){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let m=Er.pop()||Te.length;return Te[m]=s,Te[m+1]=1,m}};function lr(s){return this.fromWireType(se[s>>>2>>>0])}var Fn={name:"emscripten::val",fromWireType:s=>{var m=Xe(s);return dr(s),m},toWireType:(s,m)=>ut(m),argPackAdvance:8,readValueFromPointer:lr,bb:null},ge=(s,m)=>{switch(m){case 4:return function(g){return this.fromWireType(Ce[g>>>2>>>0])};case 8:return function(g){return this.fromWireType(ae[g>>>3>>>0])};default:throw new TypeError(`invalid float width (${m}): ${s}`)}},Yt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jr=(s,m)=>{for(var g=s>>1,$=g+m/2;!(g>=$)&&he[g>>>0];)++g;if(g<<=1,32<g-s&&Yt)return Yt.decode(K.subarray(s>>>0,g>>>0));for(g="",$=0;!($>=m/2);++$){var T=Q[s+2*$>>>1>>>0];if(T==0)break;g+=String.fromCharCode(T)}return g},qn=(s,m,g)=>{if(g??=2147483647,2>g)return 0;g-=2;var $=m;g=g<2*s.length?g/2:s.length;for(var T=0;T<g;++T)Q[m>>>1>>>0]=s.charCodeAt(T),m+=2;return Q[m>>>1>>>0]=0,m-$},Kr=s=>2*s.length,jn=(s,m)=>{for(var g=0,$="";!(g>=m/4);){var T=W[s+4*g>>>2>>>0];if(T==0)break;++g,65536<=T?(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023)):$+=String.fromCharCode(T)}return $},Yr=(s,m,g)=>{if(m>>>=0,g??=2147483647,4>g)return 0;var $=m;g=$+g-4;for(var T=0;T<s.length;++T){var B=s.charCodeAt(T);if(55296<=B&&57343>=B){var H=s.charCodeAt(++T);B=65536+((B&1023)<<10)|H&1023}if(W[m>>>2>>>0]=B,m+=4,m+4>g)break}return W[m>>>2>>>0]=0,m-$},Zr=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);55296<=$&&57343>=$&&++g,m+=4}return m},cr=(s,m)=>{var g=Ar[s];if(g===void 0)throw s=Mr(s),g=ft(s),rt(s),new st(`${m} has unknown type ${g}`);return g},Pr=(s,m,g)=>{var $=[];return s=s.toWireType($,g),$.length&&(se[m>>>2>>>0]=ut($)),s},He=s=>{try{s()}catch(m){ne(m)}},Xr=s=>{if(!R)try{s();try{L=L=s=L,r.onExit?.(s),R=!0,h(s,new qt(s))}catch(m){m instanceof qt||m=="unwind"||h(1,m)}}catch(m){m instanceof qt||m=="unwind"||h(1,m)}};function Qr(){var s=pe,m={};for(let[g,$]of Object.entries(s))m[g]=typeof $=="function"?(...T)=>{Zt.push(g);try{return $(...T)}finally{R||(Zt.pop(),dt&&gt===1&&Zt.length===0&&(gt=0,He(dn),typeof Fibers<"u"&&Fibers.Db()))}}:$;return m}var gt=0,dt=null,Bt=0,Zt=[],kr={},Or={},Jr=0,pr=null,en=[];function tn(){return new Promise((s,m)=>{pr={resolve:s,reject:m}})}function rn(){var s=Nt(65548),m=s+12;se[s>>>2>>>0]=m,se[s+4>>>2>>>0]=m+65536,m=Zt[0];var g=kr[m];return g===void 0&&(g=Jr++,kr[m]=g,Or[g]=m),W[s+8>>>2>>>0]=g,s}function nn(s){if(!R){if(gt===0){var m=!1,g=!1;s(($=0)=>{if(!R&&(Bt=$,m=!0,g)){gt=2,He(()=>vt(dt)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),$=!1;try{var T=(0,pe[Or[W[dt+8>>>2>>>0]]])()}catch(q){T=q,$=!0}var B=!1;if(!dt){var H=pr;H&&(pr=null,($?H.reject:H.resolve)(T),B=!0)}if($&&!B)throw T}}),g=!0,m||(gt=1,dt=rn(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),He(()=>Jt(dt)))}else gt===2?(gt=0,He(ct),rt(dt),dt=null,en.forEach(Xr)):ne(`invalid state: ${gt}`);return Bt}}function Rr(s){return nn(m=>{s().then(m)})}var Xt=[],on={},nt=s=>{var m=on[s];return m===void 0?ft(s):m},mr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Br=s=>{var m=Xt.length;return Xt.push(s),m},Kn=(s,m)=>{for(var g=Array(s),$=0;$<s;++$)g[$]=cr(se[m+4*$>>>2>>>0],"parameter "+$);return g},wt=(s,m)=>Object.defineProperty(m,"name",{value:s});function Yn(s){var m=Function;if(!(m instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof m} which is not a function`);var g=wt(m.name||"unknownFunctionName",function(){});return g.prototype=m.prototype,g=new g,s=m.apply(g,s),s instanceof Object?s:g}var Je=s=>s%4===0&&(s%100!==0||s%400===0),Dr=[0,31,60,91,121,152,182,213,244,274,305,335],fr=[0,31,59,90,120,151,181,212,243,273,304,334],lt=[],hr=(s,m)=>{lt.length=0;for(var g;g=K[s++>>>0];){var $=g!=105;$&=g!=112,m+=$&&m%8?4:0,lt.push(g==112?se[m>>>2>>>0]:g==106?We[m>>>3]:g==105?W[m>>>2>>>0]:ae[m>>>3>>>0]),m+=$?8:4}return lt},Qe={},ot=()=>{if(!Qt){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},m;for(m in Qe)Qe[m]===void 0?delete s[m]:s[m]=Qe[m];var g=[];for(m in s)g.push(`${m}=${s[m]}`);Qt=g}return Qt},Qt,Zn=[null,[],[]],an=[31,29,31,30,31,30,31,31,30,31,30,31],zr=[31,28,31,30,31,30,31,31,30,31,30,31];function Xn(s){var m=Array(Wt(s)+1);return at(s,m,0,m.length),m}function sn(s,m,g,$){function T(D,be,Ie){for(D=typeof D=="number"?D.toString():D||"";D.length<be;)D=Ie[0]+D;return D}function B(D,be){return T(D,be,"0")}function H(D,be){function Ie(Mt){return 0>Mt?-1:0<Mt?1:0}var zt;return(zt=Ie(D.getFullYear()-be.getFullYear()))===0&&(zt=Ie(D.getMonth()-be.getMonth()))===0&&(zt=Ie(D.getDate()-be.getDate())),zt}function q(D){switch(D.getDay()){case 0:return new Date(D.getFullYear()-1,11,29);case 1:return D;case 2:return new Date(D.getFullYear(),0,3);case 3:return new Date(D.getFullYear(),0,2);case 4:return new Date(D.getFullYear(),0,1);case 5:return new Date(D.getFullYear()-1,11,31);case 6:return new Date(D.getFullYear()-1,11,30)}}function te(D){var be=D.$a;for(D=new Date(new Date(D.ab+1900,0,1).getTime());0<be;){var Ie=D.getMonth(),zt=(Je(D.getFullYear())?an:zr)[Ie];if(be>zt-D.getDate())be-=zt-D.getDate()+1,D.setDate(1),11>Ie?D.setMonth(Ie+1):(D.setMonth(0),D.setFullYear(D.getFullYear()+1));else{D.setDate(D.getDate()+be);break}}return Ie=new Date(D.getFullYear()+1,0,4),be=q(new Date(D.getFullYear(),0,4)),Ie=q(Ie),0>=H(be,D)?0>=H(Ie,D)?D.getFullYear()+1:D.getFullYear():D.getFullYear()-1}s>>>=0,m>>>=0,g>>>=0,$>>>=0;var X=se[$+40>>>2>>>0];$={Ab:W[$>>>2>>>0],zb:W[$+4>>>2>>>0],fb:W[$+8>>>2>>>0],jb:W[$+12>>>2>>>0],gb:W[$+16>>>2>>>0],ab:W[$+20>>>2>>>0],Va:W[$+24>>>2>>>0],$a:W[$+28>>>2>>>0],Cb:W[$+32>>>2>>>0],yb:W[$+36>>>2>>>0],Bb:X?je(X):""},g=je(g),X={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var de in X)g=g.replace(new RegExp(de,"g"),X[de]);var Ee="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Oe="January February March April May June July August September October November December".split(" ");X={"%a":D=>Ee[D.Va].substring(0,3),"%A":D=>Ee[D.Va],"%b":D=>Oe[D.gb].substring(0,3),"%B":D=>Oe[D.gb],"%C":D=>B((D.ab+1900)/100|0,2),"%d":D=>B(D.jb,2),"%e":D=>T(D.jb,2," "),"%g":D=>te(D).toString().substring(2),"%G":te,"%H":D=>B(D.fb,2),"%I":D=>(D=D.fb,D==0?D=12:12<D&&(D-=12),B(D,2)),"%j":D=>{for(var be=0,Ie=0;Ie<=D.gb-1;be+=(Je(D.ab+1900)?an:zr)[Ie++]);return B(D.jb+be,3)},"%m":D=>B(D.gb+1,2),"%M":D=>B(D.zb,2),"%n":()=>`\n`,"%p":D=>0<=D.fb&&12>D.fb?"AM":"PM","%S":D=>B(D.Ab,2),"%t":()=>"	","%u":D=>D.Va||7,"%U":D=>B(Math.floor((D.$a+7-D.Va)/7),2),"%V":D=>{var be=Math.floor((D.$a+7-(D.Va+6)%7)/7);if(2>=(D.Va+371-D.$a-2)%7&&be++,be)be==53&&(Ie=(D.Va+371-D.$a)%7,Ie==4||Ie==3&&Je(D.ab)||(be=1));else{be=52;var Ie=(D.Va+7-D.$a-1)%7;(Ie==4||Ie==5&&Je(D.ab%400-1))&&be++}return B(be,2)},"%w":D=>D.Va,"%W":D=>B(Math.floor((D.$a+7-(D.Va+6)%7)/7),2),"%y":D=>(D.ab+1900).toString().substring(2),"%Y":D=>D.ab+1900,"%z":D=>{D=D.yb;var be=0<=D;return D=Math.abs(D)/60,(be?"+":"-")+("0000"+(D/60*100+D%60)).slice(-4)},"%Z":D=>D.Bb,"%%":()=>"%"},g=g.replace(/%%/g,"\\0\\0");for(de in X)g.includes(de)&&(g=g.replace(new RegExp(de,"g"),X[de]($)));return g=g.replace(/\\0\\0/g,"%"),de=Xn(g),de.length>m?0:(N.set(de,s>>>0),de.length-1)}for(var un=Array(256),gr=0;256>gr;++gr)un[gr]=String.fromCharCode(gr);Cr=un,st=r.BindingError=class extends Error{constructor(s){super(s),this.name="BindingError"}},r.InternalError=class extends Error{constructor(s){super(s),this.name="InternalError"}},Te.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=()=>Te.length/2-5-Er.length;var Qn={ia:function(s,m,g){return Rr(async()=>{await r.sb(s,m,g)})},a:function(s,m,g){s>>>=0;var $=new Vt(s);throw se[$.hb+16>>>2>>>0]=0,se[$.hb+4>>>2>>>0]=m>>>0,se[$.hb+8>>>2>>>0]=g>>>0,sr=s,jt++,sr},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:function($,T){if(typeof T!="bigint"&&typeof T!="number")throw T===null?T="null":($=typeof T,T=$==="object"||$==="array"||$==="function"?T.toString():""+T),new TypeError(`Cannot convert "${T}" to ${this.name}`);return typeof T=="number"&&(T=BigInt(T)),T},argPackAdvance:8,readValueFromPointer:bt(m,g>>>0,m.indexOf("u")==-1),bb:null})},K:function(s,m,g,$){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:function(T){return!!T},toWireType:function(T,B){return B?g:$},argPackAdvance:8,readValueFromPointer:function(T){return this.fromWireType(K[T>>>0])},bb:null})},J:function(s){return ht(s>>>0,Fn)},B:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:($,T)=>T,argPackAdvance:8,readValueFromPointer:ge(m,g>>>0),bb:null})},s:function(s,m,g,$,T){if(s>>>=0,g>>>=0,m=ft(m>>>0),T===-1&&(T=4294967295),T=q=>q,$===0){var B=32-8*g;T=q=>q<<B>>>B}var H=m.includes("unsigned")?function(q,te){return te>>>0}:function(q,te){return te};ht(s,{name:m,fromWireType:T,toWireType:H,argPackAdvance:8,readValueFromPointer:bt(m,g,$!==0),bb:null})},o:function(s,m,g){function $(B){return new T(N.buffer,se[B+4>>>2>>>0],se[B>>>2>>>0])}var T=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][m];g=ft(g>>>0),ht(s>>>0,{name:g,fromWireType:$,argPackAdvance:8,readValueFromPointer:$},{nb:!0})},D:function(s,m){m=ft(m>>>0);var g=m==="std::string";ht(s>>>0,{name:m,fromWireType:function($){var T=se[$>>>2>>>0],B=$+4;if(g)for(var H=B,q=0;q<=T;++q){var te=B+q;if(q==T||K[te>>>0]==0){if(H=je(H,te-H),X===void 0)var X=H;else X+=String.fromCharCode(0),X+=H;H=te+1}}else{for(X=Array(T),q=0;q<T;++q)X[q]=String.fromCharCode(K[B+q>>>0]);X=X.join("")}return rt($),X},toWireType:function($,T){T instanceof ArrayBuffer&&(T=new Uint8Array(T));var B=typeof T=="string";if(!(B||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int8Array))throw new st("Cannot pass non-string to std::string");var H=g&&B?Wt(T):T.length,q=Nt(4+H+1),te=q+4;if(se[q>>>2>>>0]=H,g&&B)at(T,K,te,H+1);else if(B)for(B=0;B<H;++B){var X=T.charCodeAt(B);if(255<X)throw rt(te),new st("String has UTF-16 code units that do not fit in 8 bits");K[te+B>>>0]=X}else for(B=0;B<H;++B)K[te+B>>>0]=T[B];return $!==null&&$.push(rt,q),q},argPackAdvance:8,readValueFromPointer:lr,bb($){rt($)}})},x:function(s,m,g){if(m>>>=0,g>>>=0,g=ft(g),m===2)var $=jr,T=qn,B=Kr,H=q=>he[q>>>1>>>0];else m===4&&($=jn,T=Yr,B=Zr,H=q=>se[q>>>2>>>0]);ht(s>>>0,{name:g,fromWireType:q=>{for(var te=se[q>>>2>>>0],X,de=q+4,Ee=0;Ee<=te;++Ee){var Oe=q+4+Ee*m;(Ee==te||H(Oe)==0)&&(de=$(de,Oe-de),X===void 0?X=de:(X+=String.fromCharCode(0),X+=de),de=Oe+m)}return rt(q),X},toWireType:(q,te)=>{if(typeof te!="string")throw new st(`Cannot pass non-string to C++ string type ${g}`);var X=B(te),de=Nt(4+X+m);return se[de>>>2>>>0]=X/m,T(te,de+4,X+m),q!==null&&q.push(rt,de),de},argPackAdvance:8,readValueFromPointer:lr,bb(q){rt(q)}})},L:function(s,m){m=ft(m>>>0),ht(s>>>0,{ob:!0,name:m,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(s,m,g){return m>>>=0,g>>>=0,s=Xe(s>>>0),m=cr(m,"emval::as"),Pr(m,g,s)},w:function(s){return s>>>=0,Rr(()=>(s=Xe(s),s.then(ut)))},n:function(s,m,g,$){return g>>>=0,$>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),s(null,m,g,$)},j:function(s,m,g,$,T){return g>>>=0,$>>>=0,T>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),g=nt(g),s(m,m[g],$,T)},b:dr,A:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),s==m},m:function(s){return s>>>=0,s===0?ut(mr()):(s=nt(s),ut(mr()[s]))},i:function(s,m,g){m=Kn(s,m>>>0);var $=m.shift();s--;var T=`return function (obj, func, destructorsRef, args) {\n`,B=0,H=[];g===0&&H.push("obj");for(var q=["retType"],te=[$],X=0;X<s;++X)H.push("arg"+X),q.push("argType"+X),te.push(m[X]),T+=`  var arg${X} = argType${X}.readValueFromPointer(args${B?"+"+B:""});\n`,B+=m[X].argPackAdvance;return T+=`  var rv = ${g===1?"new func":"func.call"}(${H.join(", ")});\n`,$.ob||(q.push("emval_returnValue"),te.push(Pr),T+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),q.push(T+`};\n`),s=Yn(q)(...te),g=`methodCaller<(${m.map(de=>de.name).join(", ")}) => ${$.name}>`,Br(wt(g,s))},r:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),ut(s[m])},e:function(s){s>>>=0,9<s&&(Te[s+1]+=1)},t:function(){return ut([])},l:function(s){s=Xe(s>>>0);for(var m=Array(s.length),g=0;g<s.length;g++)m[g]=s[g];return ut(m)},f:function(s){return ut(nt(s>>>0))},k:function(){return ut({})},h:function(s){s>>>=0;for(var m=Xe(s);m.length;){var g=m.pop();m.pop()(g)}dr(s)},g:function(s,m,g){m>>>=0,g>>>=0,s=Xe(s>>>0),m=Xe(m),g=Xe(g),s[m]=g},c:function(s,m){return m>>>=0,s=cr(s>>>0,"_emval_take_value"),s=s.readValueFromPointer(m),ut(s)},W:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getUTCSeconds(),W[m+4>>>2>>>0]=s.getUTCMinutes(),W[m+8>>>2>>>0]=s.getUTCHours(),W[m+12>>>2>>>0]=s.getUTCDate(),W[m+16>>>2>>>0]=s.getUTCMonth(),W[m+20>>>2>>>0]=s.getUTCFullYear()-1900,W[m+24>>>2>>>0]=s.getUTCDay(),W[m+28>>>2>>>0]=(s.getTime()-Date.UTC(s.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getSeconds(),W[m+4>>>2>>>0]=s.getMinutes(),W[m+8>>>2>>>0]=s.getHours(),W[m+12>>>2>>>0]=s.getDate(),W[m+16>>>2>>>0]=s.getMonth(),W[m+20>>>2>>>0]=s.getFullYear()-1900,W[m+24>>>2>>>0]=s.getDay(),W[m+28>>>2>>>0]=(Je(s.getFullYear())?Dr:fr)[s.getMonth()]+s.getDate()-1|0,W[m+36>>>2>>>0]=-(60*s.getTimezoneOffset());var g=new Date(s.getFullYear(),6,1).getTimezoneOffset(),$=new Date(s.getFullYear(),0,1).getTimezoneOffset();W[m+32>>>2>>>0]=(g!=$&&s.getTimezoneOffset()==Math.min($,g))|0},Y:function(s){s>>>=0;var m=new Date(W[s+20>>>2>>>0]+1900,W[s+16>>>2>>>0],W[s+12>>>2>>>0],W[s+8>>>2>>>0],W[s+4>>>2>>>0],W[s>>>2>>>0],0),g=W[s+32>>>2>>>0],$=m.getTimezoneOffset(),T=new Date(m.getFullYear(),6,1).getTimezoneOffset(),B=new Date(m.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(B,T);return 0>g?W[s+32>>>2>>>0]=+(T!=B&&H==$):0<g!=(H==$)&&(T=Math.max(B,T),m.setTime(m.getTime()+6e4*((0<g?H:T)-$))),W[s+24>>>2>>>0]=m.getDay(),W[s+28>>>2>>>0]=(Je(m.getFullYear())?Dr:fr)[m.getMonth()]+m.getDate()-1|0,W[s>>>2>>>0]=m.getSeconds(),W[s+4>>>2>>>0]=m.getMinutes(),W[s+8>>>2>>>0]=m.getHours(),W[s+12>>>2>>>0]=m.getDate(),W[s+16>>>2>>>0]=m.getMonth(),W[s+20>>>2>>>0]=m.getYear(),s=m.getTime(),BigInt(isNaN(s)?-1:s/1e3)},U:function(){return-52},V:function(){},N:function(s,m,g,$){g>>>=0,$>>>=0;var T=new Date().getFullYear(),B=new Date(T,0,1),H=new Date(T,6,1);T=B.getTimezoneOffset();var q=H.getTimezoneOffset();se[s>>>0>>>2>>>0]=60*Math.max(T,q),W[m>>>0>>>2>>>0]=+(T!=q),s=te=>te.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],B=s(B),H=s(H),q<T?(at(B,K,g,17),at(H,K,$,17)):(at(B,K,$,17),at(H,K,g,17))},v:()=>{ne("")},d:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},I:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(s){s>>>=0;var m=K.length;if(4294901760<s)return!1;for(var g=1;4>=g;g*=2){var $=m*(1+.2/g);$=Math.min($,s+100663296);var T=Math;$=Math.max(s,$);e:{T=(T.min.call(T,4294901760,$+(65536-$%65536)%65536)-O.buffer.byteLength+65535)/65536;try{O.grow(T),Ae();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},$:function(s,m){s>>>=0,m>>>=0;var g=0;return ot().forEach(($,T)=>{var B=m+g;for(T=se[s+4*T>>>2>>>0]=B,B=0;B<$.length;++B)N[T++>>>0]=$.charCodeAt(B);N[T>>>0]=0,g+=$.length+1}),0},aa:function(s,m){s>>>=0,m>>>=0;var g=ot();se[s>>>2>>>0]=g.length;var $=0;return g.forEach(T=>$+=T.length+1),se[m>>>2>>>0]=$,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(s,m,g,$){m>>>=0,g>>>=0,$>>>=0;for(var T=0,B=0;B<g;B++){var H=se[m>>>2>>>0],q=se[m+4>>>2>>>0];m+=8;for(var te=0;te<q;te++){var X=K[H+te>>>0],de=Zn[s];X===0||X===10?((s===1?E:P)(Kt(de,0)),de.length=0):de.push(X)}T+=q}return se[$>>>2>>>0]=T,0},fa:sn,p:function(s,m,g,$){return sn(s>>>0,m>>>0,g>>>0,$>>>0)}},pe=function(){function s(g){return pe=g.exports,pe=Qr(),pe=ln(),O=pe.ja,Ae(),ie.unshift(pe.ka),le--,le==0&&(qe!==null&&(clearInterval(qe),qe=null),G&&(g=G,G=null,g())),pe}var m={a:Qn};if(le++,r.instantiateWasm)try{return r.instantiateWasm(m,s)}catch(g){P(`Module.instantiateWasm callback failed with error: ${g}`),i(g)}return mt(m,function(g){s(g.instance)}).catch(i),{}}(),Mr=s=>(Mr=pe.la)(s);r._OrtInit=(s,m)=>(r._OrtInit=pe.ma)(s,m),r._OrtGetLastError=(s,m)=>(r._OrtGetLastError=pe.na)(s,m),r._OrtCreateSessionOptions=(s,m,g,$,T,B,H,q,te,X)=>(r._OrtCreateSessionOptions=pe.oa)(s,m,g,$,T,B,H,q,te,X),r._OrtAppendExecutionProvider=(s,m)=>(r._OrtAppendExecutionProvider=pe.pa)(s,m),r._OrtAddFreeDimensionOverride=(s,m,g)=>(r._OrtAddFreeDimensionOverride=pe.qa)(s,m,g),r._OrtAddSessionConfigEntry=(s,m,g)=>(r._OrtAddSessionConfigEntry=pe.ra)(s,m,g),r._OrtReleaseSessionOptions=s=>(r._OrtReleaseSessionOptions=pe.sa)(s),r._OrtCreateSession=(s,m,g)=>(r._OrtCreateSession=pe.ta)(s,m,g),r._OrtReleaseSession=s=>(r._OrtReleaseSession=pe.ua)(s),r._OrtGetInputOutputCount=(s,m,g)=>(r._OrtGetInputOutputCount=pe.va)(s,m,g),r._OrtGetInputName=(s,m)=>(r._OrtGetInputName=pe.wa)(s,m),r._OrtGetOutputName=(s,m)=>(r._OrtGetOutputName=pe.xa)(s,m),r._OrtFree=s=>(r._OrtFree=pe.ya)(s),r._OrtCreateTensor=(s,m,g,$,T,B)=>(r._OrtCreateTensor=pe.za)(s,m,g,$,T,B),r._OrtGetTensorData=(s,m,g,$,T)=>(r._OrtGetTensorData=pe.Aa)(s,m,g,$,T),r._OrtReleaseTensor=s=>(r._OrtReleaseTensor=pe.Ba)(s),r._OrtCreateRunOptions=(s,m,g,$)=>(r._OrtCreateRunOptions=pe.Ca)(s,m,g,$),r._OrtAddRunConfigEntry=(s,m,g)=>(r._OrtAddRunConfigEntry=pe.Da)(s,m,g),r._OrtReleaseRunOptions=s=>(r._OrtReleaseRunOptions=pe.Ea)(s),r._OrtCreateBinding=s=>(r._OrtCreateBinding=pe.Fa)(s),r._OrtBindInput=(s,m,g)=>(r._OrtBindInput=pe.Ga)(s,m,g),r._OrtBindOutput=(s,m,g,$)=>(r._OrtBindOutput=pe.Ha)(s,m,g,$),r._OrtClearBoundOutputs=s=>(r._OrtClearBoundOutputs=pe.Ia)(s),r._OrtReleaseBinding=s=>(r._OrtReleaseBinding=pe.Ja)(s),r._OrtRunWithBinding=(s,m,g,$,T)=>(r._OrtRunWithBinding=pe.Ka)(s,m,g,$,T),r._OrtRun=(s,m,g,$,T,B,H,q)=>(r._OrtRun=pe.La)(s,m,g,$,T,B,H,q),r._OrtEndProfiling=s=>(r._OrtEndProfiling=pe.Ma)(s),r._JsepOutput=(s,m,g)=>(r._JsepOutput=pe.Na)(s,m,g),r._JsepGetNodeName=s=>(r._JsepGetNodeName=pe.Oa)(s);var Nt=r._malloc=s=>(Nt=r._malloc=pe.Pa)(s),rt=r._free=s=>(rt=r._free=pe.Qa)(s),yr=s=>(yr=pe.Sa)(s),br=s=>(br=pe.Ta)(s),Ur=()=>(Ur=pe.Ua)(),Jt=s=>(Jt=pe.Wa)(s),dn=()=>(dn=pe.Xa)(),vt=s=>(vt=pe.Ya)(s),ct=()=>(ct=pe.Za)();r.___start_em_js=837952,r.___stop_em_js=838113;function ln(){var s=pe;s=Object.assign({},s);var m=g=>$=>g($)>>>0;return s.la=m(s.la),s.Pa=m(s.Pa),s.Ta=m(s.Ta),s.Ua=(g=>()=>g()>>>0)(s.Ua),s}r.stackSave=()=>Ur(),r.stackRestore=s=>yr(s),r.stackAlloc=s=>br(s),r.UTF8ToString=je,r.stringToUTF8=(s,m,g)=>at(s,K,m,g),r.lengthBytesUTF8=Wt;var Dt;G=function s(){Dt||Vr(),Dt||(G=s)};function Vr(){if(!(0<le)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var s=r.preRun.shift();me.unshift(s)}for(;0<me.length;)me.shift()(r);if(!(0<le||Dt||(Dt=!0,r.calledRun=!0,R))){for(;0<ie.length;)ie.shift()(r);for(o(r);0<ue.length;)ue.shift()(r)}}}return Vr(),u}})();typeof Ti=="object"&&typeof po=="object"?po.exports=Ii:typeof define=="function"&&define.amd&&define([],()=>Ii)});var Pi=Wr(()=>{});var ki=Wr(()=>{});var Oi={};gn(Oi,{cpus:()=>ll});var ll,Ri=Y(()=>{ll=void 0});var zi=Wr((Di,mo)=>{"use strict";var Bi=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){function r(){return ae.buffer!=ue.buffer&&Ne(),ue}function o(){return ae.buffer!=ue.buffer&&Ne(),le}function i(){return ae.buffer!=ue.buffer&&Ne(),qe}function u(){return ae.buffer!=ue.buffer&&Ne(),G}function a(){return ae.buffer!=ue.buffer&&Ne(),ne}function c(){return ae.buffer!=ue.buffer&&Ne(),xe}function p(){return ae.buffer!=ue.buffer&&Ne(),Ke}function h(){return ae.buffer!=ue.buffer&&Ne(),Ut}var d=t,y,w,_=new Promise((n,l)=>{y=n,w=l});d.mountExternalData=(n,l)=>{(d.Db||(d.Db=new Map)).set(n,l)},d.unmountExternalData=()=>{delete d.Db};let v=()=>{let n=(f,b,C)=>(...k)=>{let V=ct,F=b?.();k=f(...k);let re=b?.();return F!==re&&(f=re,C(F),b=C=null),ct!=V?T():k},l=f=>async(...b)=>{try{if(d.Cb)throw Error("Session already started");let C=d.Cb={ec:b[0],errors:[]},k=await f(...b);if(d.Cb!==C)throw Error("Session mismatch");d.Kb?.flush();let V=C.errors;if(0<V.length){let F=await Promise.all(V);if(F=F.filter(re=>re),0<F.length)throw Error(F.join(`\n`))}return k}finally{d.Cb=null}};d._OrtCreateSession=n(d._OrtCreateSession,()=>d._OrtCreateSession,f=>d._OrtCreateSession=f),d._OrtRun=l(n(d._OrtRun,()=>d._OrtRun,f=>d._OrtRun=f)),d._OrtRunWithBinding=l(n(d._OrtRunWithBinding,()=>d._OrtRunWithBinding,f=>d._OrtRunWithBinding=f)),d._OrtBindInput=n(d._OrtBindInput,()=>d._OrtBindInput,f=>d._OrtBindInput=f),v=void 0};d.jsepInit=(n,l)=>{if(v?.(),n==="webgpu"){[d.Kb,d.Wb,d.$b,d.Lb,d.Zb,d.ob,d.ac,d.cc,d.Xb,d.Yb,d.bc]=l;let f=d.Kb;d.jsepRegisterBuffer=(b,C,k,V)=>f.registerBuffer(b,C,k,V),d.jsepGetBuffer=b=>f.getBuffer(b),d.jsepCreateDownloader=(b,C,k)=>f.createDownloader(b,C,k),d.jsepOnReleaseSession=b=>{f.onReleaseSession(b)},d.jsepOnRunStart=b=>f.onRunStart(b)}};var S=Object.assign({},d),A="./this.program",I=(n,l)=>{throw l},x=typeof window=="object",E=typeof importScripts=="function",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O=d.ENVIRONMENT_IS_PTHREAD||!1,R="";function L(n){return d.locateFile?d.locateFile(n,R):R+n}var N,K,Q;if(P){var he=(uo(),wr(so)),W=(co(),wr(lo));R=E?W.dirname(R)+"/":__dirname+"/",N=(n,l)=>(n=Wt(n)?new URL(n):W.normalize(n),he.readFileSync(n,l?void 0:"utf8")),Q=n=>(n=N(n,!0),n.buffer||(n=new Uint8Array(n)),n),K=(n,l,f,b=!0)=>{n=Wt(n)?new URL(n):W.normalize(n),he.readFile(n,b?void 0:"utf8",(C,k)=>{C?f(C):l(b?k.buffer:k)})},!d.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),I=(n,l)=>{throw process.exitCode=n,l},global.Worker=Pi().Worker}else(x||E)&&(E?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),typeof e<"u"&&e&&(R=e),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),P||(N=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.send(null),l.responseText},E&&(Q=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),K=(n,l,f)=>{var b=new XMLHttpRequest;b.open("GET",n,!0),b.responseType="arraybuffer",b.onload=()=>{b.status==200||b.status==0&&b.response?l(b.response):f()},b.onerror=f,b.send(null)}));P&&typeof performance>"u"&&(global.performance=ki().performance);var se=console.log.bind(console),Ce=console.error.bind(console);P&&(se=(...n)=>he.writeSync(1,n.join(" ")+`\n`),Ce=(...n)=>he.writeSync(2,n.join(" ")+`\n`));var We=se,ee=Ce;Object.assign(d,S),S=null;var ae,Ae,me=!1,ie,ue,le,qe,G,ne,xe,Ke,Be,Ge,Ut;function Ne(){var n=ae.buffer;d.HEAP8=ue=new Int8Array(n),d.HEAP16=qe=new Int16Array(n),d.HEAPU8=le=new Uint8Array(n),d.HEAPU16=G=new Uint16Array(n),d.HEAP32=ne=new Int32Array(n),d.HEAPU32=xe=new Uint32Array(n),d.HEAPF32=Ke=new Float32Array(n),d.HEAPF64=Ut=new Float64Array(n),d.HEAP64=Be=new BigInt64Array(n),d.HEAPU64=Ge=new BigUint64Array(n)}var Ye=16777216;if(O)ae=d.wasmMemory;else if(d.wasmMemory)ae=d.wasmMemory;else if(ae=new WebAssembly.Memory({initial:Ye/65536,maximum:65536,shared:!0}),!(ae.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),P&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ne(),Ye=ae.buffer.byteLength;var mt=[],Rt=[],qt=[],Vt=0,sr=null,jt=null;function xr(){if(Vt--,Vt==0&&(sr!==null&&(clearInterval(sr),sr=null),jt)){var n=jt;jt=null,n()}}function Kt(n){throw n="Aborted("+n+")",ee(n),me=!0,ie=1,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),w(n),n}var je=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),at;at="ort-wasm-simd-threaded.wasm",je(at)||(at=L(at));function Cr(n){if(Q)return Q(n);throw"both async and sync fetching of the wasm failed"}function ft(n){if(x||E){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw`failed to load wasm binary file at \'${n}\'`;return l.arrayBuffer()}).catch(()=>Cr(n));if(K)return new Promise((l,f)=>{K(n,b=>l(new Uint8Array(b)),f)})}return Promise.resolve().then(()=>Cr(n))}function ur(n,l,f){return ft(n).then(b=>WebAssembly.instantiate(b,l)).then(f,b=>{ee(`failed to asynchronously prepare wasm: ${b}`),Kt(b)})}function Ar(n,l){var f=at;return typeof WebAssembly.instantiateStreaming!="function"||je(f)||Wt(f)||P||typeof fetch!="function"?ur(f,n,l):fetch(f,{credentials:"same-origin"}).then(b=>WebAssembly.instantiateStreaming(b,n).then(l,function(C){return ee(`wasm streaming compile failed: ${C}`),ee("falling back to ArrayBuffer instantiation"),ur(f,n,l)}))}var Ir={826468:(n,l,f,b)=>{if(typeof d>"u"||!d.Db)return 1;if(n=He(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=d.Db.get(n),!n)return 2;if(l>>>=0,f>>>=0,b>>>=0,l+f>n.byteLength)return 3;try{return o().set(n.subarray(l,l+f),b>>>0),0}catch{return 4}},826969:()=>{d.Xb()},827e3:()=>{d.Yb()},827029:()=>{d.bc()},827054:n=>d.Wb(n),827087:n=>d.$b(n),827119:(n,l,f)=>{d.Lb(n,l,f,!0)},827158:(n,l,f)=>{d.Lb(n,l,f)},827191:n=>{d.ob("Abs",n,void 0)},827242:n=>{d.ob("Neg",n,void 0)},827293:n=>{d.ob("Floor",n,void 0)},827346:n=>{d.ob("Ceil",n,void 0)},827398:n=>{d.ob("Reciprocal",n,void 0)},827456:n=>{d.ob("Sqrt",n,void 0)},827508:n=>{d.ob("Exp",n,void 0)},827559:n=>{d.ob("Erf",n,void 0)},827610:n=>{d.ob("Sigmoid",n,void 0)},827665:(n,l,f)=>{d.ob("HardSigmoid",n,{alpha:l,beta:f})},827744:n=>{d.ob("Log",n,void 0)},827795:n=>{d.ob("Sin",n,void 0)},827846:n=>{d.ob("Cos",n,void 0)},827897:n=>{d.ob("Tan",n,void 0)},827948:n=>{d.ob("Asin",n,void 0)},828e3:n=>{d.ob("Acos",n,void 0)},828052:n=>{d.ob("Atan",n,void 0)},828104:n=>{d.ob("Sinh",n,void 0)},828156:n=>{d.ob("Cosh",n,void 0)},828208:n=>{d.ob("Asinh",n,void 0)},828261:n=>{d.ob("Acosh",n,void 0)},828314:n=>{d.ob("Atanh",n,void 0)},828367:n=>{d.ob("Tanh",n,void 0)},828419:n=>{d.ob("Not",n,void 0)},828470:(n,l,f)=>{d.ob("Clip",n,{min:l,max:f})},828539:n=>{d.ob("Clip",n,void 0)},828591:(n,l)=>{d.ob("Elu",n,{alpha:l})},828649:n=>{d.ob("Relu",n,void 0)},828701:(n,l)=>{d.ob("LeakyRelu",n,{alpha:l})},828765:(n,l)=>{d.ob("ThresholdedRelu",n,{alpha:l})},828835:(n,l)=>{d.ob("Cast",n,{to:l})},828893:n=>{d.ob("Add",n,void 0)},828944:n=>{d.ob("Sub",n,void 0)},828995:n=>{d.ob("Mul",n,void 0)},829046:n=>{d.ob("Div",n,void 0)},829097:n=>{d.ob("Pow",n,void 0)},829148:n=>{d.ob("Equal",n,void 0)},829201:n=>{d.ob("Greater",n,void 0)},829256:n=>{d.ob("GreaterOrEqual",n,void 0)},829318:n=>{d.ob("Less",n,void 0)},829370:n=>{d.ob("LessOrEqual",n,void 0)},829429:(n,l,f,b,C)=>{d.ob("ReduceMean",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829588:(n,l,f,b,C)=>{d.ob("ReduceMax",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829746:(n,l,f,b,C)=>{d.ob("ReduceMin",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829904:(n,l,f,b,C)=>{d.ob("ReduceProd",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830063:(n,l,f,b,C)=>{d.ob("ReduceSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830221:(n,l,f,b,C)=>{d.ob("ReduceL1",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830378:(n,l,f,b,C)=>{d.ob("ReduceL2",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830535:(n,l,f,b,C)=>{d.ob("ReduceLogSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830696:(n,l,f,b,C)=>{d.ob("ReduceSumSquare",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830860:(n,l,f,b,C)=>{d.ob("ReduceLogSumExp",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},831024:n=>{d.ob("Where",n,void 0)},831077:(n,l,f)=>{d.ob("Transpose",n,{perm:l?Array.from(a().subarray(l>>>0,f>>>0)):[]})},831185:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831318:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831451:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},831852:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},832417:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},832818:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},833383:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833474:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},833758:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833849:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834133:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834220:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834500:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834587:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834867:(n,l,f,b,C)=>{d.ob("Gemm",n,{alpha:l,beta:f,transA:b,transB:C})},834971:n=>{d.ob("MatMul",n,void 0)},835025:(n,l,f,b)=>{d.ob("ArgMax",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835133:(n,l,f,b)=>{d.ob("ArgMin",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835241:(n,l)=>{d.ob("Softmax",n,{axis:l})},835304:(n,l)=>{d.ob("Concat",n,{axis:l})},835364:(n,l,f,b,C)=>{d.ob("Split",n,{axis:l,numOutputs:f,splitSizes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},835504:n=>{d.ob("Expand",n,void 0)},835558:(n,l)=>{d.ob("Gather",n,{axis:Number(l)})},835629:(n,l)=>{d.ob("GatherElements",n,{axis:Number(l)})},835708:(n,l,f,b,C,k,V,F,re,J,ce)=>{d.ob("Resize",n,{antialias:l,axes:f?Array.from(a().subarray(f>>>0,b>>>0)):[],coordinateTransformMode:He(C),cubicCoeffA:k,excludeOutside:V,extrapolationValue:F,keepAspectRatioPolicy:He(re),mode:He(J),nearestMode:He(ce)})},836054:(n,l,f,b,C,k,V)=>{d.ob("Slice",n,{starts:l?Array.from(a().subarray(l>>>0,f>>>0)):[],ends:b?Array.from(a().subarray(b>>>0,C>>>0)):[],axes:k?Array.from(a().subarray(k>>>0,V>>>0)):[]})},836270:n=>{d.ob("Tile",n,void 0)},836322:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},836433:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836547:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836661:n=>{d.ob("Range",n,void 0)},836714:(n,l)=>{d.ob("Einsum",n,{equation:He(l)})},836795:(n,l,f,b,C)=>{d.ob("Pad",n,{mode:l,value:f,pads:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},836922:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837091:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837260:(n,l,f)=>{d.ob("CumSum",n,{exclusive:Number(l),reverse:Number(f)})},837357:(n,l,f,b,C,k,V,F,re)=>{d.ob("Attention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k,qkvHiddenSizes:V?Array.from(a().subarray(Number(F)>>>0,Number(F)+V>>>0)):[],pastPresentShareBuffer:!!re})},837629:n=>{d.ob("BiasAdd",n,void 0)},837684:n=>{d.ob("BiasSplitGelu",n,void 0)},837745:n=>{d.ob("FastGelu",n,void 0)},837801:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze)=>{d.ob("Conv",n,{format:re?"NHWC":"NCHW",auto_pad:l,dilations:[f],group:b,kernel_shape:[C],pads:k?Array.from(a().subarray(k>>>0,V>>>0)):[],strides:[F],w_is_const:()=>!!r()[J>>>0],activation:He(ce),activation_params:Re?Array.from(p().subarray(Re>>>0,ze>>>0)):[]})},838171:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("Conv",n,{format:Re?"NHWC":"NCHW",auto_pad:l,dilations:[f,b],group:C,kernel_shape:[k,V],pads:F?Array.from(a().subarray(F>>>0,re>>>0)):[],strides:[J,ce],w_is_const:()=>!!r()[ze>>>0],activation:He(z),activation_params:we?Array.from(p().subarray(we>>>0,Pe>>>0)):[]})},838562:n=>{d.ob("Gelu",n,void 0)},838614:(n,l,f,b,C,k)=>{d.ob("MatMulNBits",n,{k:l,n:f,accuracyLevel:b,bits:C,blockSize:k})},838741:(n,l,f,b,C,k)=>{d.ob("MultiHeadAttention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k})},838900:(n,l,f,b,C)=>{d.ob("RotaryEmbedding",n,{interleaved:!!l,numHeads:f,rotaryEmbeddingDim:b,scale:C})},839039:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839141:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839243:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},839354:n=>{d.ac(n)},839388:(n,l)=>d.cc(n,l,d.Cb.ec,d.Cb.errors)};function st(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Tr=n=>{n.terminate(),n.onmessage=()=>{}},ht=n=>{ge.xb.length==0&&(lr(),ge.Mb(ge.xb[0]));var l=ge.xb.pop();if(!l)return 6;ge.yb.push(l),ge.ub[n.wb]=l,l.wb=n.wb;var f={cmd:"run",start_routine:n.fc,arg:n.Rb,pthread_ptr:n.wb};return P&&l.unref(),l.postMessage(f,n.mc),0},bt=0,Er=n=>{var l=io();return n=n(),fn(l),n},Te=(n,l,...f)=>Er(()=>{for(var b=2*f.length,C=oo(8*b),k=C>>>3,V=0;V<f.length;V++){var F=f[V];typeof F=="bigint"?(Be[k+2*V]=1n,Be[k+2*V+1]=F):(Be[k+2*V]=0n,h()[k+2*V+1>>>0]=F)}return gi(n,0,b,C,l)});function dr(n){if(O)return Te(0,1,n);ie=n,0<bt||(ge.hc(),d.onExit?.(n),me=!0),I(n,new st(n))}var Xe=n=>{if(ie=n,O)throw jr(n),"unwind";dr(n)};function ut(){for(var n=d.numThreads;n--;)lr();mt.unshift(()=>{Vt++,Fn(()=>xr())})}function lr(){var n=L("ort-wasm-simd-threaded.worker.js");n=new Worker(n),ge.xb.push(n)}function Fn(n){O?n():Promise.all(ge.xb.map(ge.Mb)).then(n)}var ge={xb:[],yb:[],Qb:[],ub:{},Gb(){O?(ge.receiveObjectTransfer=ge.dc,ge.threadInitTLS=ge.Pb,ge.setExitStatus=ge.Ob):ut()},Ob:n=>ie=n,pc:["$terminateWorker"],hc:()=>{for(var n of ge.yb)Tr(n);for(n of ge.xb)Tr(n);ge.xb=[],ge.yb=[],ge.ub=[]},Nb:n=>{var l=n.wb;delete ge.ub[l],ge.xb.push(n),ge.yb.splice(ge.yb.indexOf(n),1),n.wb=0,ro(l)},dc(){},Pb(){ge.Qb.forEach(n=>n())},Mb:n=>new Promise(l=>{n.onmessage=k=>{k=k.data;var V=k.cmd;if(k.targetThread&&k.targetThread!=pn()){var F=ge.ub[k.targetThread];F?F.postMessage(k,k.transferList):ee(`Internal error! Worker sent a message "${V}" to target pthread ${k.targetThread}, but that thread no longer exists!`)}else V==="checkMailbox"?rt():V==="spawnThread"?ht(k):V==="cleanupThread"?ge.Nb(ge.ub[k.thread]):V==="killThread"?(k=k.thread,V=ge.ub[k],delete ge.ub[k],Tr(V),ro(k),ge.yb.splice(ge.yb.indexOf(V),1),V.wb=0):V==="cancelThread"?ge.ub[k.thread].postMessage({cmd:"cancel"}):V==="loaded"?(n.loaded=!0,P&&!n.wb&&n.unref(),l(n)):V==="alert"?alert(`Thread ${k.threadId}: ${k.text}`):k.target==="setimmediate"?n.postMessage(k):V==="callHandler"?d[k.handler](...k.args):V&&ee(`worker sent an unknown command ${V}`)},n.onerror=k=>{throw ee(`worker sent an error! ${k.filename}:${k.lineno}: ${k.message}`),k},P&&(n.on("message",k=>n.onmessage({data:k})),n.on("error",k=>n.onerror(k)));var f=[],b=["onExit"],C;for(C of b)d.hasOwnProperty(C)&&f.push(C);n.postMessage({cmd:"load",handlers:f,urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:ae,wasmModule:Ae})})};d.PThread=ge;var Yt=n=>{for(;0<n.length;)n.shift()(d)};d.establishStackSpace=()=>{var n=pn(),l=c()[n+52>>>2>>>0];n=c()[n+56>>>2>>>0],bi(l,l-n),fn(l)};function jr(n){if(O)return Te(1,0,n);Xe(n)}d.invokeEntryPoint=(n,l)=>{bt=0,n=wi(n,l),0<bt?ge.Ob(n):no(n)};class qn{constructor(l){this.Ib=l-24}Gb(l,f){c()[this.Ib+16>>>2>>>0]=0,c()[this.Ib+4>>>2>>>0]=l,c()[this.Ib+8>>>2>>>0]=f}}var Kr=0,jn=0;function Yr(n,l,f,b){return O?Te(2,1,n,l,f,b):Zr(n,l,f,b)}function Zr(n,l,f,b){if(n>>>=0,l>>>=0,f>>>=0,b>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var C=[];return O&&C.length===0?Yr(n,l,f,b):(n={fc:f,wb:n,Rb:b,mc:C},O?(n.oc="spawnThread",postMessage(n,C),0):ht(n))}var cr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Pr=(n,l,f)=>{l>>>=0;var b=l+f;for(f=l;n[f]&&!(f>=b);)++f;if(16<f-l&&n.buffer&&cr)return cr.decode(n.buffer instanceof SharedArrayBuffer?n.slice(l,f):n.subarray(l,f));for(b="";l<f;){var C=n[l++];if(C&128){var k=n[l++]&63;if((C&224)==192)b+=String.fromCharCode((C&31)<<6|k);else{var V=n[l++]&63;C=(C&240)==224?(C&15)<<12|k<<6|V:(C&7)<<18|k<<12|V<<6|n[l++]&63,65536>C?b+=String.fromCharCode(C):(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023))}}else b+=String.fromCharCode(C)}return b},He=(n,l)=>(n>>>=0)?Pr(o(),n,l):"";function Xr(n,l,f){return O?Te(3,1,n,l,f):0}function Qr(n,l){if(O)return Te(4,1,n,l)}var gt=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);127>=b?l++:2047>=b?l+=2:55296<=b&&57343>=b?(l+=4,++f):l+=3}return l},dt=(n,l,f,b)=>{if(f>>>=0,!(0<b))return 0;var C=f;b=f+b-1;for(var k=0;k<n.length;++k){var V=n.charCodeAt(k);if(55296<=V&&57343>=V){var F=n.charCodeAt(++k);V=65536+((V&1023)<<10)|F&1023}if(127>=V){if(f>=b)break;l[f++>>>0]=V}else{if(2047>=V){if(f+1>=b)break;l[f++>>>0]=192|V>>6}else{if(65535>=V){if(f+2>=b)break;l[f++>>>0]=224|V>>12}else{if(f+3>=b)break;l[f++>>>0]=240|V>>18,l[f++>>>0]=128|V>>12&63}l[f++>>>0]=128|V>>6&63}l[f++>>>0]=128|V&63}}return l[f>>>0]=0,f-C},Bt=(n,l,f)=>dt(n,o(),l,f);function Zt(n,l){if(O)return Te(5,1,n,l)}function kr(n,l,f){if(O)return Te(6,1,n,l,f)}function Or(n,l,f){return O?Te(7,1,n,l,f):0}function Jr(n,l){if(O)return Te(8,1,n,l)}function pr(n,l,f){if(O)return Te(9,1,n,l,f)}function en(n,l,f,b){if(O)return Te(10,1,n,l,f,b)}function tn(n,l,f,b){if(O)return Te(11,1,n,l,f,b)}function rn(n,l,f,b){if(O)return Te(12,1,n,l,f,b)}function nn(n){if(O)return Te(13,1,n)}function Rr(n,l){if(O)return Te(14,1,n,l)}function Xt(n,l,f){if(O)return Te(15,1,n,l,f)}var on,nt=n=>{for(var l="";o()[n>>>0];)l+=on[o()[n++>>>0]];return l},mr={},Br={},Kn={},wt;function Yn(n,l,f={}){var b=l.name;if(!n)throw new wt(`type "${b}" must have a positive integer typeid pointer`);if(Br.hasOwnProperty(n)){if(f.Ub)return;throw new wt(`Cannot register type \'${b}\' twice`)}Br[n]=l,delete Kn[n],mr.hasOwnProperty(n)&&(l=mr[n],delete mr[n],l.forEach(C=>C()))}function Je(n,l,f={}){if(!("argPackAdvance"in l))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Yn(n,l,f)}var Dr=(n,l,f)=>{switch(l){case 1:return f?b=>r()[b>>>0]:b=>o()[b>>>0];case 2:return f?b=>i()[b>>>1>>>0]:b=>u()[b>>>1>>>0];case 4:return f?b=>a()[b>>>2>>>0]:b=>c()[b>>>2>>>0];case 8:return f?b=>Be[b>>>3]:b=>Ge[b>>>3];default:throw new TypeError(`invalid integer width (${l}): ${n}`)}},fr=[],lt=[];function hr(n){n>>>=0,9<n&&--lt[n+1]===0&&(lt[n]=void 0,fr.push(n))}var Qe=n=>{if(!n)throw new wt("Cannot use deleted val. handle = "+n);return lt[n]},ot=n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let l=fr.pop()||lt.length;return lt[l]=n,lt[l+1]=1,l}};function Qt(n){return this.fromWireType(c()[n>>>2>>>0])}var Zn={name:"emscripten::val",fromWireType:n=>{var l=Qe(n);return hr(n),l},toWireType:(n,l)=>ot(l),argPackAdvance:8,readValueFromPointer:Qt,Bb:null},an=(n,l)=>{switch(l){case 4:return function(f){return this.fromWireType(p()[f>>>2>>>0])};case 8:return function(f){return this.fromWireType(h()[f>>>3>>>0])};default:throw new TypeError(`invalid float width (${l}): ${n}`)}},zr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Xn=(n,l)=>{for(var f=n>>1,b=f+l/2;!(f>=b)&&u()[f>>>0];)++f;if(f<<=1,32<f-n&&zr)return zr.decode(o().slice(n,f));for(f="",b=0;!(b>=l/2);++b){var C=i()[n+2*b>>>1>>>0];if(C==0)break;f+=String.fromCharCode(C)}return f},sn=(n,l,f)=>{if(f??=2147483647,2>f)return 0;f-=2;var b=l;f=f<2*n.length?f/2:n.length;for(var C=0;C<f;++C){var k=n.charCodeAt(C);i()[l>>>1>>>0]=k,l+=2}return i()[l>>>1>>>0]=0,l-b},un=n=>2*n.length,gr=(n,l)=>{for(var f=0,b="";!(f>=l/4);){var C=a()[n+4*f>>>2>>>0];if(C==0)break;++f,65536<=C?(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023)):b+=String.fromCharCode(C)}return b},Qn=(n,l,f)=>{if(l>>>=0,f??=2147483647,4>f)return 0;var b=l;f=b+f-4;for(var C=0;C<n.length;++C){var k=n.charCodeAt(C);if(55296<=k&&57343>=k){var V=n.charCodeAt(++C);k=65536+((k&1023)<<10)|V&1023}if(a()[l>>>2>>>0]=k,l+=4,l+4>f)break}return a()[l>>>2>>>0]=0,l-b},pe=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);55296<=b&&57343>=b&&++f,l+=4}return l},Mr=n=>{if(!me)try{if(n(),!(0<bt))try{O?no(ie):Xe(ie)}catch(l){l instanceof st||l=="unwind"||I(1,l)}}catch(l){l instanceof st||l=="unwind"||I(1,l)}};function Nt(n){n>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(a(),n>>>2,n).value.then(rt),n+=128,Atomics.store(a(),n>>>2,1))}d.__emscripten_thread_mailbox_await=Nt;var rt=()=>{var n=pn();n&&(Nt(n),Mr(yi))};d.checkMailbox=rt;var yr=[],br=(n,l)=>{var f=Br[n];if(f===void 0)throw n=fi(n),f=nt(n),At(n),new wt(`${l} has unknown type ${f}`);return f},Ur=(n,l,f)=>{var b=[];return n=n.toWireType(b,f),b.length&&(c()[l>>>2>>>0]=ot(b)),n},Jt=n=>{try{n()}catch(l){Kt(l)}};function dn(){var n=oe,l={};for(let[f,b]of Object.entries(n))l[f]=typeof b=="function"?(...C)=>{Dt.push(f);try{return b(...C)}finally{me||(Dt.pop(),ct&&vt===1&&Dt.length===0&&(vt=0,bt+=1,Jt($i),typeof Fibers<"u"&&Fibers.rc()))}}:b;return l}var vt=0,ct=null,ln=0,Dt=[],Vr={},s={},m=0,g=null,$=[];function T(){return new Promise((n,l)=>{g={resolve:n,reject:l}})}function B(){var n=mn(65548),l=n+12;c()[n>>>2>>>0]=l,c()[n+4>>>2>>>0]=l+65536,l=Dt[0];var f=Vr[l];return f===void 0&&(f=m++,Vr[l]=f,s[f]=l),l=f,a()[n+8>>>2>>>0]=l,n}function H(){var n=a()[ct+8>>>2>>>0];return n=oe[s[n]],--bt,n()}function q(n){if(!me){if(vt===0){var l=!1,f=!1;n((b=0)=>{if(!me&&(ln=b,l=!0,f)){vt=2,Jt(()=>_i(ct)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),b=!1;try{var C=H()}catch(F){C=F,b=!0}var k=!1;if(!ct){var V=g;V&&(g=null,(b?V.reject:V.resolve)(C),k=!0)}if(b&&!k)throw C}}),f=!0,l||(vt=1,ct=B(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Jt(()=>vi(ct)))}else vt===2?(vt=0,Jt(Si),At(ct),ct=null,$.forEach(Mr)):Kt(`invalid state: ${vt}`);return ln}}function te(n){return q(l=>{n().then(l)})}var X=[],de={},Ee=n=>{var l=de[n];return l===void 0?nt(n):l},Oe=()=>typeof globalThis=="object"?globalThis:Function("return this")(),D=n=>{var l=X.length;return X.push(n),l},be=(n,l)=>{for(var f=Array(n),b=0;b<n;++b)f[b]=br(c()[l+4*b>>>2>>>0],"parameter "+b);return f},Ie=(n,l)=>Object.defineProperty(l,"name",{value:n});function zt(n){var l=Function;if(!(l instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof l} which is not a function`);var f=Ie(l.name||"unknownFunctionName",function(){});return f.prototype=l.prototype,f=new f,n=l.apply(f,n),n instanceof Object?n:f}var Mt=n=>n%4===0&&(n%100!==0||n%400===0),Qo=[0,31,60,91,121,152,182,213,244,274,305,335],Jo=[0,31,59,90,120,151,181,212,243,273,304,334];function ei(n,l,f,b,C,k,V){return O?Te(16,1,n,l,f,b,C,k,V):-52}function ti(n,l,f,b,C,k){if(O)return Te(17,1,n,l,f,b,C,k)}var Jn=[],ri=(n,l)=>{Jn.length=0;for(var f;f=o()[n++>>>0];){var b=f!=105;b&=f!=112,l+=b&&l%8?4:0,Jn.push(f==112?c()[l>>>2>>>0]:f==106?Be[l>>>3]:f==105?a()[l>>>2>>>0]:h()[l>>>3>>>0]),l+=b?8:4}return Jn},eo={},ni=()=>{if(!to){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},l;for(l in eo)eo[l]===void 0?delete n[l]:n[l]=eo[l];var f=[];for(l in n)f.push(`${l}=${n[l]}`);to=f}return to},to;function oi(n,l){if(O)return Te(18,1,n,l);n>>>=0,l>>>=0;var f=0;return ni().forEach((b,C)=>{var k=l+f;for(C=c()[n+4*C>>>2>>>0]=k,k=0;k<b.length;++k)r()[C++>>>0]=b.charCodeAt(k);r()[C>>>0]=0,f+=b.length+1}),0}function ii(n,l){if(O)return Te(19,1,n,l);n>>>=0,l>>>=0;var f=ni();c()[n>>>2>>>0]=f.length;var b=0;return f.forEach(C=>b+=C.length+1),c()[l>>>2>>>0]=b,0}function ai(n){return O?Te(20,1,n):52}function si(n,l,f,b){return O?Te(21,1,n,l,f,b):52}function ui(n,l,f,b){return O?Te(22,1,n,l,f,b):70}var Xd=[null,[],[]];function di(n,l,f,b){if(O)return Te(23,1,n,l,f,b);l>>>=0,f>>>=0,b>>>=0;for(var C=0,k=0;k<f;k++){var V=c()[l>>>2>>>0],F=c()[l+4>>>2>>>0];l+=8;for(var re=0;re<F;re++){var J=o()[V+re>>>0],ce=Xd[n];J===0||J===10?((n===1?We:ee)(Pr(ce,0)),ce.length=0):ce.push(J)}C+=F}return c()[b>>>2>>>0]=C,0}var li=[31,29,31,30,31,30,31,31,30,31,30,31],ci=[31,28,31,30,31,30,31,31,30,31,30,31];function Qd(n){var l=Array(gt(n)+1);return dt(n,l,0,l.length),l}var Jd=(n,l)=>{r().set(n,l>>>0)};function pi(n,l,f,b){function C(z,we,Pe){for(z=typeof z=="number"?z.toString():z||"";z.length<we;)z=Pe[0]+z;return z}function k(z,we){return C(z,we,"0")}function V(z,we){function Pe(Ci){return 0>Ci?-1:0<Ci?1:0}var er;return(er=Pe(z.getFullYear()-we.getFullYear()))===0&&(er=Pe(z.getMonth()-we.getMonth()))===0&&(er=Pe(z.getDate()-we.getDate())),er}function F(z){switch(z.getDay()){case 0:return new Date(z.getFullYear()-1,11,29);case 1:return z;case 2:return new Date(z.getFullYear(),0,3);case 3:return new Date(z.getFullYear(),0,2);case 4:return new Date(z.getFullYear(),0,1);case 5:return new Date(z.getFullYear()-1,11,31);case 6:return new Date(z.getFullYear()-1,11,30)}}function re(z){var we=z.zb;for(z=new Date(new Date(z.Ab+1900,0,1).getTime());0<we;){var Pe=z.getMonth(),er=(Mt(z.getFullYear())?li:ci)[Pe];if(we>er-z.getDate())we-=er-z.getDate()+1,z.setDate(1),11>Pe?z.setMonth(Pe+1):(z.setMonth(0),z.setFullYear(z.getFullYear()+1));else{z.setDate(z.getDate()+we);break}}return Pe=new Date(z.getFullYear()+1,0,4),we=F(new Date(z.getFullYear(),0,4)),Pe=F(Pe),0>=V(we,z)?0>=V(Pe,z)?z.getFullYear()+1:z.getFullYear():z.getFullYear()-1}n>>>=0,l>>>=0,f>>>=0,b>>>=0;var J=c()[b+40>>>2>>>0];b={kc:a()[b>>>2>>>0],jc:a()[b+4>>>2>>>0],Eb:a()[b+8>>>2>>>0],Jb:a()[b+12>>>2>>>0],Fb:a()[b+16>>>2>>>0],Ab:a()[b+20>>>2>>>0],vb:a()[b+24>>>2>>>0],zb:a()[b+28>>>2>>>0],qc:a()[b+32>>>2>>>0],ic:a()[b+36>>>2>>>0],lc:J?He(J):""},f=He(f),J={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ce in J)f=f.replace(new RegExp(ce,"g"),J[ce]);var Re="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ze="January February March April May June July August September October November December".split(" ");J={"%a":z=>Re[z.vb].substring(0,3),"%A":z=>Re[z.vb],"%b":z=>ze[z.Fb].substring(0,3),"%B":z=>ze[z.Fb],"%C":z=>k((z.Ab+1900)/100|0,2),"%d":z=>k(z.Jb,2),"%e":z=>C(z.Jb,2," "),"%g":z=>re(z).toString().substring(2),"%G":re,"%H":z=>k(z.Eb,2),"%I":z=>(z=z.Eb,z==0?z=12:12<z&&(z-=12),k(z,2)),"%j":z=>{for(var we=0,Pe=0;Pe<=z.Fb-1;we+=(Mt(z.Ab+1900)?li:ci)[Pe++]);return k(z.Jb+we,3)},"%m":z=>k(z.Fb+1,2),"%M":z=>k(z.jc,2),"%n":()=>`\n`,"%p":z=>0<=z.Eb&&12>z.Eb?"AM":"PM","%S":z=>k(z.kc,2),"%t":()=>"	","%u":z=>z.vb||7,"%U":z=>k(Math.floor((z.zb+7-z.vb)/7),2),"%V":z=>{var we=Math.floor((z.zb+7-(z.vb+6)%7)/7);if(2>=(z.vb+371-z.zb-2)%7&&we++,we)we==53&&(Pe=(z.vb+371-z.zb)%7,Pe==4||Pe==3&&Mt(z.Ab)||(we=1));else{we=52;var Pe=(z.vb+7-z.zb-1)%7;(Pe==4||Pe==5&&Mt(z.Ab%400-1))&&we++}return k(we,2)},"%w":z=>z.vb,"%W":z=>k(Math.floor((z.zb+7-(z.vb+6)%7)/7),2),"%y":z=>(z.Ab+1900).toString().substring(2),"%Y":z=>z.Ab+1900,"%z":z=>{z=z.ic;var we=0<=z;return z=Math.abs(z)/60,(we?"+":"-")+("0000"+(z/60*100+z%60)).slice(-4)},"%Z":z=>z.lc,"%%":()=>"%"},f=f.replace(/%%/g,"\\0\\0");for(ce in J)f.includes(ce)&&(f=f.replace(new RegExp(ce,"g"),J[ce](b)));return f=f.replace(/\\0\\0/g,"%"),ce=Qd(f),ce.length>l?0:(Jd(ce,n),ce.length-1)}ge.Gb();for(var mi=Array(256),cn=0;256>cn;++cn)mi[cn]=String.fromCharCode(cn);on=mi,wt=d.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},d.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},lt.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=()=>lt.length/2-5-fr.length;var el=[dr,jr,Yr,Xr,Qr,Zt,kr,Or,Jr,pr,en,tn,rn,nn,Rr,Xt,ei,ti,oi,ii,ai,si,ui,di],tl={ua:function(n,l,f){return te(async()=>{await d.Zb(n,l,f)})},b:function(n,l,f){throw n>>>=0,new qn(n).Gb(l>>>0,f>>>0),Kr=n,jn++,Kr},ia:function(n){hi(n>>>0,!E,1,!x,131072,!1),ge.Pb()},G:function(n){n>>>=0,O?postMessage({cmd:"cleanupThread",thread:n}):ge.Nb(ge.ub[n])},_:Zr,A:Xr,pa:Qr,W:Zt,Y:kr,qa:Or,na:Jr,fa:pr,ma:en,K:tn,X:rn,U:nn,oa:Rr,V:Xt,E:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:function(b,C){if(typeof C!="bigint"&&typeof C!="number")throw C===null?C="null":(b=typeof C,C=b==="object"||b==="array"||b==="function"?C.toString():""+C),new TypeError(`Cannot convert "${C}" to ${this.name}`);return typeof C=="number"&&(C=BigInt(C)),C},argPackAdvance:8,readValueFromPointer:Dr(l,f,l.indexOf("u")==-1),Bb:null})},O:function(n,l,f,b){n>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:function(C){return!!C},toWireType:function(C,k){return k?f:b},argPackAdvance:8,readValueFromPointer:function(C){return this.fromWireType(o()[C>>>0])},Bb:null})},N:function(n){return Je(n>>>0,Zn)},D:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:(b,C)=>C,argPackAdvance:8,readValueFromPointer:an(l,f),Bb:null})},t:function(n,l,f,b,C){if(n>>>=0,f>>>=0,l=nt(l>>>0),C===-1&&(C=4294967295),C=F=>F,b===0){var k=32-8*f;C=F=>F<<k>>>k}var V=l.includes("unsigned")?function(F,re){return re>>>0}:function(F,re){return re};Je(n,{name:l,fromWireType:C,toWireType:V,argPackAdvance:8,readValueFromPointer:Dr(l,f,b!==0),Bb:null})},p:function(n,l,f){function b(k){var V=c()[k>>>2>>>0];return k=c()[k+4>>>2>>>0],new C(r().buffer,k,V)}n>>>=0;var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][l];f=nt(f>>>0),Je(n,{name:f,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{Ub:!0})},F:function(n,l){n>>>=0,l=nt(l>>>0);var f=l==="std::string";Je(n,{name:l,fromWireType:function(b){var C=c()[b>>>2>>>0],k=b+4;if(f)for(var V=k,F=0;F<=C;++F){var re=k+F;if(F==C||o()[re>>>0]==0){if(V=He(V,re-V),J===void 0)var J=V;else J+=String.fromCharCode(0),J+=V;V=re+1}}else{for(J=Array(C),F=0;F<C;++F)J[F]=String.fromCharCode(o()[k+F>>>0]);J=J.join("")}return At(b),J},toWireType:function(b,C){C instanceof ArrayBuffer&&(C=new Uint8Array(C));var k=typeof C=="string";if(!(k||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int8Array))throw new wt("Cannot pass non-string to std::string");var V=f&&k?gt(C):C.length,F=mn(4+V+1),re=F+4;if(c()[F>>>2>>>0]=V,f&&k)Bt(C,re,V+1);else if(k)for(k=0;k<V;++k){var J=C.charCodeAt(k);if(255<J)throw At(re),new wt("String has UTF-16 code units that do not fit in 8 bits");o()[re+k>>>0]=J}else for(k=0;k<V;++k)o()[re+k>>>0]=C[k];return b!==null&&b.push(At,F),F},argPackAdvance:8,readValueFromPointer:Qt,Bb(b){At(b)}})},z:function(n,l,f){if(n>>>=0,l>>>=0,f>>>=0,f=nt(f),l===2)var b=Xn,C=sn,k=un,V=F=>u()[F>>>1>>>0];else l===4&&(b=gr,C=Qn,k=pe,V=F=>c()[F>>>2>>>0]);Je(n,{name:f,fromWireType:F=>{for(var re=c()[F>>>2>>>0],J,ce=F+4,Re=0;Re<=re;++Re){var ze=F+4+Re*l;(Re==re||V(ze)==0)&&(ce=b(ce,ze-ce),J===void 0?J=ce:(J+=String.fromCharCode(0),J+=ce),ce=ze+l)}return At(F),J},toWireType:(F,re)=>{if(typeof re!="string")throw new wt(`Cannot pass non-string to C++ string type ${f}`);var J=k(re),ce=mn(4+J+l);return c()[ce>>>2>>>0]=J/l,C(re,ce+4,J+l),F!==null&&F.push(At,ce),ce},argPackAdvance:8,readValueFromPointer:Qt,Bb(F){At(F)}})},P:function(n,l){n>>>=0,l=nt(l>>>0),Je(n,{Vb:!0,name:l,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(n,l){n>>>=0,n==l>>>0?setTimeout(rt):O?postMessage({targetThread:n,cmd:"checkMailbox"}):(n=ge.ub[n])&&n.postMessage({cmd:"checkMailbox"})},$:function(n,l,f,b,C){l>>>=0,f>>>=0,b/=2,yr.length=b,C=C>>>0>>>3;for(var k=0;k<b;k++)yr[k]=Be[C+2*k]?Be[C+2*k+1]:h()[C+2*k+1>>>0];return n=l?Ir[l]:el[n],ge.Sb=f,f=n(...yr),ge.Sb=0,f},ha:Nt,sa:function(n){P&&ge.ub[n>>>0].ref()},w:function(n,l,f){return l>>>=0,f>>>=0,n=Qe(n>>>0),l=br(l,"emval::as"),Ur(l,f,n)},y:function(n){return n>>>=0,te(()=>(n=Qe(n),n.then(ot)))},o:function(n,l,f,b){return f>>>=0,b>>>=0,n=X[n>>>0],l=Qe(l>>>0),n(null,l,f,b)},k:function(n,l,f,b,C){return f>>>=0,b>>>=0,C>>>=0,n=X[n>>>0],l=Qe(l>>>0),f=Ee(f),n(l,l[f],b,C)},c:hr,C:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),n==l},n:function(n){return n>>>=0,n===0?ot(Oe()):(n=Ee(n),ot(Oe()[n]))},j:function(n,l,f){l=be(n,l>>>0);var b=l.shift();n--;var C=`return function (obj, func, destructorsRef, args) {\n`,k=0,V=[];f===0&&V.push("obj");for(var F=["retType"],re=[b],J=0;J<n;++J)V.push("arg"+J),F.push("argType"+J),re.push(l[J]),C+=`  var arg${J} = argType${J}.readValueFromPointer(args${k?"+"+k:""});\n`,k+=l[J].argPackAdvance;return C+=`  var rv = ${f===1?"new func":"func.call"}(${V.join(", ")});\n`,b.Vb||(F.push("emval_returnValue"),re.push(Ur),C+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),F.push(C+`};\n`),n=zt(F)(...re),f=`methodCaller<(${l.map(ce=>ce.name).join(", ")}) => ${b.name}>`,D(Ie(f,n))},s:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),ot(n[l])},d:function(n){n>>>=0,9<n&&(lt[n+1]+=1)},v:function(){return ot([])},m:function(n){n=Qe(n>>>0);for(var l=Array(n.length),f=0;f<n.length;f++)l[f]=n[f];return ot(l)},g:function(n){return ot(Ee(n>>>0))},l:function(){return ot({})},i:function(n){n>>>=0;for(var l=Qe(n);l.length;){var f=l.pop();l.pop()(f)}hr(n)},h:function(n,l,f){l>>>=0,f>>>=0,n=Qe(n>>>0),l=Qe(l),f=Qe(f),n[l]=f},e:function(n,l){return l>>>=0,n=br(n>>>0,"_emval_take_value"),n=n.readValueFromPointer(l),ot(n)},ca:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getUTCSeconds(),a()[l+4>>>2>>>0]=n.getUTCMinutes(),a()[l+8>>>2>>>0]=n.getUTCHours(),a()[l+12>>>2>>>0]=n.getUTCDate(),a()[l+16>>>2>>>0]=n.getUTCMonth(),a()[l+20>>>2>>>0]=n.getUTCFullYear()-1900,a()[l+24>>>2>>>0]=n.getUTCDay(),n=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[l+28>>>2>>>0]=n},da:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getSeconds(),a()[l+4>>>2>>>0]=n.getMinutes(),a()[l+8>>>2>>>0]=n.getHours(),a()[l+12>>>2>>>0]=n.getDate(),a()[l+16>>>2>>>0]=n.getMonth(),a()[l+20>>>2>>>0]=n.getFullYear()-1900,a()[l+24>>>2>>>0]=n.getDay();var f=(Mt(n.getFullYear())?Qo:Jo)[n.getMonth()]+n.getDate()-1|0;a()[l+28>>>2>>>0]=f,a()[l+36>>>2>>>0]=-(60*n.getTimezoneOffset()),f=new Date(n.getFullYear(),6,1).getTimezoneOffset();var b=new Date(n.getFullYear(),0,1).getTimezoneOffset();n=(f!=b&&n.getTimezoneOffset()==Math.min(b,f))|0,a()[l+32>>>2>>>0]=n},ea:function(n){n>>>=0;var l=new Date(a()[n+20>>>2>>>0]+1900,a()[n+16>>>2>>>0],a()[n+12>>>2>>>0],a()[n+8>>>2>>>0],a()[n+4>>>2>>>0],a()[n>>>2>>>0],0),f=a()[n+32>>>2>>>0],b=l.getTimezoneOffset(),C=new Date(l.getFullYear(),6,1).getTimezoneOffset(),k=new Date(l.getFullYear(),0,1).getTimezoneOffset(),V=Math.min(k,C);return 0>f?a()[n+32>>>2>>>0]=+(C!=k&&V==b):0<f!=(V==b)&&(C=Math.max(k,C),l.setTime(l.getTime()+6e4*((0<f?V:C)-b))),a()[n+24>>>2>>>0]=l.getDay(),f=(Mt(l.getFullYear())?Qo:Jo)[l.getMonth()]+l.getDate()-1|0,a()[n+28>>>2>>>0]=f,a()[n>>>2>>>0]=l.getSeconds(),a()[n+4>>>2>>>0]=l.getMinutes(),a()[n+8>>>2>>>0]=l.getHours(),a()[n+12>>>2>>>0]=l.getDate(),a()[n+16>>>2>>>0]=l.getMonth(),a()[n+20>>>2>>>0]=l.getYear(),n=l.getTime(),BigInt(isNaN(n)?-1:n/1e3)},aa:ei,ba:ti,R:function(n,l,f,b){n>>>=0,l>>>=0,f>>>=0,b>>>=0;var C=new Date().getFullYear(),k=new Date(C,0,1),V=new Date(C,6,1);C=k.getTimezoneOffset();var F=V.getTimezoneOffset(),re=Math.max(C,F);c()[n>>>2>>>0]=60*re,a()[l>>>2>>>0]=+(C!=F),n=J=>J.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],k=n(k),V=n(V),F<C?(Bt(k,f,17),Bt(V,b,17)):(Bt(k,b,17),Bt(V,f,17))},q:()=>{Kt("")},f:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},M:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},H:()=>{},L:()=>Date.now(),ra:()=>{throw bt+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>P?(Ri(),wr(Oi)).cpus().length:navigator.hardwareConcurrency,Q:function(n){n>>>=0;var l=o().length;if(n<=l||4294901760<n)return!1;for(var f=1;4>=f;f*=2){var b=l*(1+.2/f);b=Math.min(b,n+100663296);var C=Math;b=Math.max(n,b);e:{C=(C.min.call(C,4294901760,b+(65536-b%65536)%65536)-ae.buffer.byteLength+65535)/65536;try{ae.grow(C),Ne();var k=1;break e}catch{}k=void 0}if(k)return!0}return!1},ja:oi,la:ii,Z:Xe,B:ai,J:si,ga:ui,I:di,a:ae||d.wasmMemory,ka:pi,r:function(n,l,f,b){return pi(n>>>0,l>>>0,f>>>0,b>>>0)}},oe=function(){function n(f,b){return oe=f.exports,oe=dn(),oe=rl(),ge.Qb.push(oe.cb),Rt.unshift(oe.va),Ae=b,xr(),oe}var l={a:tl};if(Vt++,d.instantiateWasm)try{return d.instantiateWasm(l,n)}catch(f){ee(`Module.instantiateWasm callback failed with error: ${f}`),w(f)}return Ar(l,function(f){n(f.instance,f.module)}).catch(w),{}}(),fi=n=>(fi=oe.wa)(n);d.__embind_initialize_bindings=()=>(d.__embind_initialize_bindings=oe.xa)(),d._OrtInit=(n,l)=>(d._OrtInit=oe.ya)(n,l),d._OrtGetLastError=(n,l)=>(d._OrtGetLastError=oe.za)(n,l),d._OrtCreateSessionOptions=(n,l,f,b,C,k,V,F,re,J)=>(d._OrtCreateSessionOptions=oe.Aa)(n,l,f,b,C,k,V,F,re,J),d._OrtAppendExecutionProvider=(n,l)=>(d._OrtAppendExecutionProvider=oe.Ba)(n,l),d._OrtAddFreeDimensionOverride=(n,l,f)=>(d._OrtAddFreeDimensionOverride=oe.Ca)(n,l,f),d._OrtAddSessionConfigEntry=(n,l,f)=>(d._OrtAddSessionConfigEntry=oe.Da)(n,l,f),d._OrtReleaseSessionOptions=n=>(d._OrtReleaseSessionOptions=oe.Ea)(n),d._OrtCreateSession=(n,l,f)=>(d._OrtCreateSession=oe.Fa)(n,l,f),d._OrtReleaseSession=n=>(d._OrtReleaseSession=oe.Ga)(n),d._OrtGetInputOutputCount=(n,l,f)=>(d._OrtGetInputOutputCount=oe.Ha)(n,l,f),d._OrtGetInputName=(n,l)=>(d._OrtGetInputName=oe.Ia)(n,l),d._OrtGetOutputName=(n,l)=>(d._OrtGetOutputName=oe.Ja)(n,l),d._OrtFree=n=>(d._OrtFree=oe.Ka)(n),d._OrtCreateTensor=(n,l,f,b,C,k)=>(d._OrtCreateTensor=oe.La)(n,l,f,b,C,k),d._OrtGetTensorData=(n,l,f,b,C)=>(d._OrtGetTensorData=oe.Ma)(n,l,f,b,C),d._OrtReleaseTensor=n=>(d._OrtReleaseTensor=oe.Na)(n),d._OrtCreateRunOptions=(n,l,f,b)=>(d._OrtCreateRunOptions=oe.Oa)(n,l,f,b),d._OrtAddRunConfigEntry=(n,l,f)=>(d._OrtAddRunConfigEntry=oe.Pa)(n,l,f),d._OrtReleaseRunOptions=n=>(d._OrtReleaseRunOptions=oe.Qa)(n),d._OrtCreateBinding=n=>(d._OrtCreateBinding=oe.Ra)(n),d._OrtBindInput=(n,l,f)=>(d._OrtBindInput=oe.Sa)(n,l,f),d._OrtBindOutput=(n,l,f,b)=>(d._OrtBindOutput=oe.Ta)(n,l,f,b),d._OrtClearBoundOutputs=n=>(d._OrtClearBoundOutputs=oe.Ua)(n),d._OrtReleaseBinding=n=>(d._OrtReleaseBinding=oe.Va)(n),d._OrtRunWithBinding=(n,l,f,b,C)=>(d._OrtRunWithBinding=oe.Wa)(n,l,f,b,C),d._OrtRun=(n,l,f,b,C,k,V,F)=>(d._OrtRun=oe.Xa)(n,l,f,b,C,k,V,F),d._OrtEndProfiling=n=>(d._OrtEndProfiling=oe.Ya)(n),d._JsepOutput=(n,l,f)=>(d._JsepOutput=oe.Za)(n,l,f),d._JsepGetNodeName=n=>(d._JsepGetNodeName=oe._a)(n);var pn=d._pthread_self=()=>(pn=d._pthread_self=oe.$a)(),mn=d._malloc=n=>(mn=d._malloc=oe.ab)(n),At=d._free=n=>(At=d._free=oe.bb)(n);d.__emscripten_tls_init=()=>(d.__emscripten_tls_init=oe.cb)();var hi=d.__emscripten_thread_init=(n,l,f,b,C,k)=>(hi=d.__emscripten_thread_init=oe.eb)(n,l,f,b,C,k);d.__emscripten_thread_crashed=()=>(d.__emscripten_thread_crashed=oe.fb)();var gi=(n,l,f,b,C)=>(gi=oe.gb)(n,l,f,b,C),ro=n=>(ro=oe.hb)(n),no=d.__emscripten_thread_exit=n=>(no=d.__emscripten_thread_exit=oe.ib)(n),yi=()=>(yi=oe.jb)(),bi=(n,l)=>(bi=oe.kb)(n,l),fn=n=>(fn=oe.lb)(n),oo=n=>(oo=oe.mb)(n),io=()=>(io=oe.nb)(),wi=d.dynCall_ii=(n,l)=>(wi=d.dynCall_ii=oe.pb)(n,l),vi=n=>(vi=oe.qb)(n),$i=()=>($i=oe.rb)(),_i=n=>(_i=oe.sb)(n),Si=()=>(Si=oe.tb)();d.___start_em_js=839500,d.___stop_em_js=839661;function rl(){var n=oe;n=Object.assign({},n);var l=b=>C=>b(C)>>>0,f=b=>()=>b()>>>0;return n.wa=l(n.wa),n.$a=f(n.$a),n.ab=l(n.ab),n.emscripten_main_runtime_thread_id=f(n.emscripten_main_runtime_thread_id),n.mb=l(n.mb),n.nb=f(n.nb),n}d.wasmMemory=ae,d.stackSave=()=>io(),d.stackRestore=n=>fn(n),d.stackAlloc=n=>oo(n),d.keepRuntimeAlive=()=>0<bt,d.UTF8ToString=He,d.stringToUTF8=Bt,d.lengthBytesUTF8=gt,d.ExitStatus=st,d.PThread=ge;var hn;jt=function n(){hn||xi(),hn||(jt=n)};function xi(){if(!(0<Vt))if(O)y(d),O||Yt(Rt),startWorker(d);else{if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)mt.unshift(d.preRun.shift());Yt(mt),0<Vt||hn||(hn=!0,d.calledRun=!0,me||(O||Yt(Rt),y(d),O||Yt(qt)))}}return xi(),_}})();typeof Di=="object"&&typeof mo=="object"?mo.exports=Bi:typeof define=="function"&&define.amd&&define([],()=>Bi)});var Mi=Wr((gm,cl)=>{cl.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var go,Gt,tr,bn,Gr,Hi,yo,ye=Y(()=>{"use strict";go=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Gt=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},tr=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],bn=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Gr=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Hi=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",yo=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}});var wn=Y(()=>{"use strict"});var Fi=Y(()=>{"use strict";wn()});var qi,ji=Y(()=>{"use strict";qi="1.18.0"});var Ki,pt,bo=Y(()=>{"use strict";ji();Ki="warning",pt={wasm:{},webgl:{},webgpu:{},versions:{common:qi},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Ki=e}},get logLevel(){return Ki}};Object.defineProperty(pt,"logLevel",{enumerable:!0})});var vr,Yi=Y(()=>{"use strict";bo();vr=pt});var Zi=Y(()=>{"use strict"});var Xi=Y(()=>{"use strict";vn()});var Ji=Y(()=>{"use strict"});var ea=Y(()=>{"use strict";vn()});var vn=Y(()=>{"use strict";Zi();Xi();Ji();ea()});var $n=Y(()=>{"use strict";vn()});var wo,ta,rr,Ht,vo=Y(()=>{"use strict";bo();wo=(e,t)=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||console.timeStamp(`${e}::ORT::${t}`)},ta=(e,t)=>{let r=new Error().stack?.split(/\\r\\n|\\r|\\n/g)||[],o=!1;for(let i=0;i<r.length;i++){if(o&&!r[i].includes("TRACE_FUNC")){let u=`FUNC_${e}::${r[i].trim().split(" ")[1]}`;t&&(u+=`::${t}`),wo("CPU",u);return}r[i].includes("TRACE_FUNC")&&(o=!0)}},rr=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("BEGIN",e)},Ht=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("END",e)}});var ra=Y(()=>{"use strict";wn();$n();vo()});var na=Y(()=>{"use strict";ra()});var oa=Y(()=>{"use strict"});var ia=Y(()=>{"use strict"});var aa=Y(()=>{"use strict"});var sa=Y(()=>{"use strict"});var ua=Y(()=>{"use strict";wn();$n()});var da=Y(()=>{"use strict";ua()});var $r=Y(()=>{"use strict";Fi();Yi();na();$n();oa();ia();vo();aa();sa();da()});var _l,Sl,la,ca,pa,xl,Ve,Lt=Y(()=>{"use strict";ye();_l=["V","I","W","E","F"],Sl=(e,t)=>{console.log(`[${_l[e]},${new Date().toISOString()}]${t}`)},pa=(e,t)=>{la=e,ca=t},xl=(e,t)=>{let r=Gr(e),o=Gr(la);r>=o&&Sl(r,typeof t=="function"?t():t)},Ve=(...e)=>{ca&&xl(...e)}});var ma,fa=Y(()=>{"use strict";ye();ma=(e,t)=>new(bn(t))(e)});var _n=Y(()=>{"use strict"});var ha,$o,_o,Cl,Al,ga,xo,So,ba,wa=Y(()=>{"use strict";Lt();_n();ha=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),$o=[],_o=e=>Math.ceil(e/16)*16,Cl=e=>{for(let t=0;t<$o.length;t++){let r=$o[t];if(e<=r)return r}return Math.ceil(e/16)*16},Al=1,ga=()=>Al++,xo=async(e,t,r,o)=>{let i=_o(r),u=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,u,0,i),e.flush(),await u.mapAsync(GPUMapMode.READ);let c=u.getMappedRange();if(o){let p=o();return p.set(new Uint8Array(c,0,r)),p}else return new Uint8Array(c.slice(0,r))}finally{u.destroy()}},So=class{constructor(t){this.backend=t;this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[r]of ha)$o.push(r),this.freeBuffers.set(r,[]),this.freeUniformBuffers.set(r,[])}upload(t,r){let o=r.buffer,i=r.byteOffset,u=r.byteLength,a=_o(u),c=this.storageCache.get(t);if(!c)throw new Error("gpu data for uploading does not exist");if(c.originalSize!==u)throw new Error(`inconsistent data size. gpu data size=${c.originalSize}, data size=${u}`);let p=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),h=p.getMappedRange();new Uint8Array(h).set(new Uint8Array(o,i,u)),p.unmap();let d=this.backend.getCommandEncoder();this.backend.endComputePass(),d.copyBufferToBuffer(p,0,c.gpuData.buffer,0,a),Ve("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${t})`),this.buffersForUploadingPending.push(p)}memcpy(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("source gpu data for memcpy does not exist");let i=this.storageCache.get(r);if(!i)throw new Error("destination gpu data for memcpy does not exist");if(o.originalSize!==i.originalSize)throw new Error("inconsistent source and destination gpu data size");let u=_o(o.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(o.gpuData.buffer,0,i.gpuData.buffer,0,u)}registerExternalBuffer(t,r,o){let i;if(o){if(i=this.externalBuffers.get(o),i===void 0)throw new Error("previous buffer is not registered");if(t===o)return Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, buffer is the same, skip.`),i;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.\n             Please use the previous external buffer!`);this.externalBuffers.delete(o)}else i=ga();return this.storageCache.set(i,{gpuData:{id:i,type:0,buffer:t},originalSize:r}),this.externalBuffers.set(t,i),Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, registered.`),i}unregisterExternalBuffer(t){let r=this.externalBuffers.get(t);r!==void 0&&(this.storageCache.delete(r),this.externalBuffers.delete(t),Ve("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${r}`))}create(t,r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let o=Cl(t),i,u=(r&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,a=(r&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(u||a){let h=(u?this.freeBuffers:this.freeUniformBuffers).get(o);h?h.length>0?i=h.pop():i=this.backend.device.createBuffer({size:o,usage:r}):i=this.backend.device.createBuffer({size:o,usage:r})}else i=this.backend.device.createBuffer({size:o,usage:r});let c={id:ga(),type:0,buffer:i};return this.storageCache.set(c.id,{gpuData:c,originalSize:t}),Ve("verbose",()=>`[WebGPU] GpuDataManager.create(size=${t}) => id=${c.id}`),c}get(t){return this.storageCache.get(t)?.gpuData}release(t){let r=this.storageCache.get(t);if(!r)throw new Error("releasing data does not exist");return Ve("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("data does not exist");await xo(this.backend,o.gpuData.buffer,o.originalSize,r)}refreshPendingBuffers(){for(let t of this.buffersForUploadingPending)t.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let t of this.buffersPending){let r=ha.get(t.size);if((t.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let o=this.freeBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else if((t.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let o=this.freeUniformBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else t.destroy()}this.buffersPending=[]}else{let t=this.capturedPendingBuffers.get(this.backend.currentSessionId);t||(t=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,t));for(let r of this.buffersPending)t.push(r);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.freeUniformBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache.forEach(t=>{t.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(t){let r=this.capturedPendingBuffers.get(t);r&&(r.forEach(o=>{o.destroy()}),this.capturedPendingBuffers.delete(t))}},ba=(...e)=>new So(...e)});var Co,ve,Ze=Y(()=>{"use strict";Co=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ve=e=>new Co(e)});var Ao,It,M,nr,Sn,xn,Cn,Se=Y(()=>{"use strict";Ao=class{static calcMatMulShape(t,r){return t[1]!==r[0]?void 0:[t[0],r[1]]}},It=class{static calcShape(t,r,o=!1){let i=t.length,u=r.length;if(i===0)return r;if(u===0)return t;let a=Math.max(t.length,r.length),c=new Array(a);if(o){if(i<2||u<2)return;let p=Ao.calcMatMulShape([t[i-2],t[i-1]],[r[u-2],r[u-1]]);if(p===void 0)return;[c[a-2],c[a-1]]=p}for(let p=o?3:1;p<=a;p++){let h=i-p<0?1:t[i-p],d=u-p<0?1:r[u-p];if(h!==d&&h>1&&d>1)return;let y=Math.max(h,d);if(h&&d)c[a-p]=Math.max(h,d);else{if(y>1)return;c[a-p]=0}}return c}static isValidBroadcast(t,r){let o=t.length,i=r.length;if(o>i)return!1;for(let u=1;u<=o;u++)if(t[o-u]!==1&&t[o-u]!==r[i-u])return!1;return!0}},M=class e{static size(t){return e.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let o=t.length;if(o===0)return[];let i=new Array(o),u=o-1;for(;u>=0;){if(t[u]%r===0){i[u]=t[u]/r;break}if(r%t[u]!==0)throw new Error("cannot convert shape");i[u]=1,r/=t[u],u--}for(u--;u>=0;u--)i[u]=t[u];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,o){let i=1;for(let u=r;u<o;u++){if(t[u]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=t[u]}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let o=new Array(r);o[r-1]=1,o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];return o}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(o=>this.normalizeAxis(o,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(o=>t[o]):t.slice().reverse()}static padShape(t,r){let o=t.length;return t.map((i,u)=>i+r[u]+r[u+o])}static areEqual(t,r){return t.length!==r.length?!1:t.every((o,i)=>o===r[i])}},nr=class e{static adjustPoolAttributes(t,r,o,i,u,a){if(!t&&o.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let c=0;c<r.length-2;c++)c>=o.length?o.push(r[c+2]):o[c]=r[c+2];for(let c=0;c<o.length;c++)if(c<i.length){if(i[c]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let c=0;c<o.length;c++)if(c<u.length){if(u[c]<0)throw new Error("dilations should be greater than or equal to 1")}else u.push(1);for(let c=0;c<o.length*2;c++)if(c<a.length){if(a[c]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let c=0;c<o.length;c++){if(o[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[c]>=o[c]||a[c+o.length]>=o[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,o,i,u,a,c){if(c){if(u.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let p=0;p<t.length-2;p++)e.adjustPadAndReturnShape(t[p+(a?1:2)],r[p],o[p],i[p],u,p,p+t.length-2,c)}}static computePoolOutputShape(t,r,o,i,u,a,c){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let p=[r[0],r[1]];return e.computeShapeHelper(t,r,p,o,i,u,a,c),p}static computeConvOutputShape(t,r,o,i,u,a,c){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[t[0],r[0]];return e.computeShapeHelper(!1,t,p,o,i,u,a,c),p}static computeShapeHelper(t,r,o,i,u,a,c,p){if(t)for(let h=0;h<r.length-2;h++)o.push(1);else for(let h=0;h<r.length-2;h++)o.push(e.adjustPadAndReturnShape(r[h+2],i[h],u[h],a[h],c,h,h+r.length-2,p))}static adjustPadAndReturnShape(t,r,o,i,u,a,c,p){let h=o*(i-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return u[a]=0,u[c]=0,Math.floor((t-h)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let y=((t+r-1)/r-1)*r+i-t;return u[a]=Math.floor(p==="SAME_LOWER"?(y+1)/2:y/2),u[c]=y-u[a],Math.floor((t+y-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+u[a]+u[c]-h)/r+1)}},Sn=class{static getShapeOfGemmResult(t,r,o,i,u){if(t.length!==2||o.length!==2)throw new Error("shape need to be of size 2");let a,c,p;r?(a=t[1],c=t[0]):(a=t[0],c=t[1]);let h=-1;if(i?(p=o[0],h=1):(p=o[1],h=0),o[h]!==c)throw new Error("dimension mismatch");if(a<=0||p<=0||c<=0)throw new Error("invalid shape specified");if(u&&!It.isValidBroadcast(u,[a,p]))throw new Error("gemm: invalid bias shape for broadcast");return[a,p,c]}},xn=-34028234663852886e22,Cn=34028234663852886e22});var or,To,De,et,Z,Me,$t,ir,_t,fe,Eo,U,j,An,Io,va,_r,_e=Y(()=>{"use strict";ye();Se();or=64,To=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e}`)}},De=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[0]},et=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[1]},Z=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:M.computeStrides(r)})}),t},Me=e=>e%4===0?4:e%2===0?2:1,$t=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,ir=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,_t=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,fe=(e,t,r,o)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?o==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:o==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,Eo=(e,t,r,o,i)=>{let u=typeof r=="number",a=u?r:r.length,c=[...new Array(a).keys()],p=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,h=To(t,i),d=typeof h=="string"?h:h[1],y=typeof h=="string"?h:h[0],w={indices:p,value:d,storage:y,tensor:t},_=G=>typeof G=="string"?G:`${G}u`,v={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},S=u?"uniforms.":"",A=`${S}${e}_shape`,I=`${S}${e}_strides`,x="";for(let G=0;G<a-1;G++)x+=`\n    let dim${G} = current / ${fe(I,G,a)};\n    let rest${G} = current % ${fe(I,G,a)};\n    indices[${G}] = dim${G};\n    current = rest${G};\n    `;x+=`indices[${a-1}] = current;`;let E=a<2?"":`\n  fn o2i_${e}(offset: u32) -> ${w.indices} {\n    var indices: ${w.indices};\n    var current = offset;\n    ${x}\n    return indices;\n  }`,P=G=>(v.offsetToIndices=!0,a<2?G:`o2i_${e}(${G})`),O=[];if(a>=2)for(let G=a-1;G>=0;G--)O.push(`${fe(I,G,a)} * (indices[${G}])`);let R=a<2?"":`\n  fn i2o_${e}(indices: ${w.indices}) -> u32 {\n    return ${O.join("+")};\n  }`,L=G=>(v.indicesToOffset=!0,a<2?G:`i2o_${e}(${G})`),N=(...G)=>a===0?"0u":`${w.indices}(${G.map(_).join(",")})`,K=(G,ne)=>a<2?`${G}`:`${fe(G,ne,a)}`,Q=(G,ne,xe)=>a<2?`${G}=${xe};`:`${fe(G,ne,a)}=${xe};`,he={},W=(G,ne)=>{v.broadcastedIndicesToOffset=!0;let xe=`${ne.name}broadcastedIndicesTo${e}Offset`;if(xe in he)return`${xe}(${G})`;let Ke=[];for(let Be=a-1;Be>=0;Be--){let Ge=ne.indicesGet("outputIndices",Be+ne.rank-a);Ke.push(`${K(I,Be)} * (${Ge} % ${K(A,Be)})`)}return he[xe]=`fn ${xe}(outputIndices: ${ne.type.indices}) -> u32 {\n             return ${Ke.length>0?Ke.join("+"):"0u"};\n           }`,`${xe}(${G})`},se=(G,ne)=>(()=>{if(w.storage===w.value)return`${e}[${G}]=${ne};`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`${e}[${G}]=vec2<u32>(u32(${ne}), select(0u, 0xFFFFFFFFu, ${ne} < 0));`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`${e}[${G}]=vec2<u32>(u32(${ne}), 0u);`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`${e}[${G}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${ne}));`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),Ce=G=>(()=>{if(w.storage===w.value)return`${e}[${G}]`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`i32(${e}[${G}].x)`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`u32(${e}[${G}].x)`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${G}] & 0xFFu), bool(${e}[${G}] & 0xFF00u), bool(${e}[${G}] & 0xFF0000u), bool(${e}[${G}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),We=a<2?"":`\n  fn get_${e}ByIndices(indices: ${w.indices}) -> ${d} {\n    return ${Ce(`i2o_${e}(indices)`)};\n  }`,ee=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn get_${e}(${G}) -> ${d} {\n    return get_${e}ByIndices(${N(ne)});\n  }`})(),ae=(...G)=>{if(G.length!==a)throw new Error(`indices length must be ${a}`);let ne=G.map(_).join(",");return a===0?Ce("0u"):a===1?Ce(ne[0]):(v.get=!0,v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}(${ne})`)},Ae=G=>a<2?Ce(G):(v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}ByIndices(${G})`),me=a<2?"":`\n  fn set_${e}ByIndices(indices: ${w.indices}, value: ${d}) {\n    ${se(`i2o_${e}(indices)`,"value")}\n  }`,ie=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn set_${e}(${G}, value: ${d}) {\n    set_${e}ByIndices(${N(ne)}, value);\n  }`})();return{impl:()=>{let G=[],ne=!1;return v.offsetToIndices&&(G.push(E),ne=!0),v.indicesToOffset&&(G.push(R),ne=!0),v.broadcastedIndicesToOffset&&(Object.values(he).forEach(xe=>G.push(xe)),ne=!0),v.set&&(G.push(ie),ne=!0),v.setByIndices&&(G.push(me),ne=!0),v.get&&(G.push(ee),ne=!0),v.getByIndices&&(G.push(We),ne=!0),!u&&ne&&G.unshift(`const ${A} = ${w.indices}(${r.join(",")});`,`const ${I} = ${w.indices}(${M.computeStrides(r).join(",")});`),G.join(`\n`)},type:w,offsetToIndices:P,indicesToOffset:L,broadcastedIndicesToOffset:W,indices:N,indicesGet:K,indicesSet:Q,set:(...G)=>{if(G.length!==a+1)throw new Error(`indices length must be ${a}`);let ne=G[a];if(typeof ne!="string")throw new Error("value must be string");let xe=G.slice(0,a).map(_).join(",");return a===0?se("0u",ne):a===1?se(xe[0],ne):(v.set=!0,v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}(${xe}, ${ne})`)},setByOffset:se,setByIndices:(G,ne)=>a<2?se(G,ne):(v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}ByIndices(${G}, ${ne});`),get:ae,getByOffset:Ce,getByIndices:Ae,usage:o,name:e,strides:I,shape:A,rank:a}},U=(e,t,r,o=1)=>Eo(e,t,r,"input",o),j=(e,t,r,o=1)=>Eo(e,t,r,"output",o),An=(e,t,r,o=1)=>Eo(e,t,r,"internal",o),Io=class{constructor(t,r){this.normalizedDispatchGroup=t;this.limits=r;this.internalVariables=[];this.variables=[];this.uniforms=[];this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(t){return`if (global_idx >= ${typeof t=="number"?`${t}u`:t}) { return; }`}mainStart(t=or){let r=typeof t=="number"?t:t[0],o=typeof t=="number"?1:t[1],i=typeof t=="number"?1:t[2];if(r>this.limits.maxComputeWorkgroupSizeX||o>this.limits.maxComputeWorkgroupSizeY||i>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(r*o*i>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let u=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,a=u?`@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,\n                                             @builtin(local_invocation_id) local_id : vec3<u32>,\n    @builtin(local_invocation_index) local_idx : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(num_workgroups) num_workgroups : vec3<u32>`,c=u?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +\n          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${r*o*i}u + local_idx;`;return`@compute @workgroup_size(${r}, ${o}, ${i})\n  fn main(${a}) {\n    ${c}\n  `}appendVariableUniforms(t){t.rank!==0&&(t.shape.startsWith("uniforms.")&&this.uniforms.push({name:t.shape.replace("uniforms.",""),type:"u32",length:t.rank}),t.strides.startsWith("uniforms.")&&this.uniforms.push({name:t.strides.replace("uniforms.",""),type:"u32",length:t.rank}))}declareVariable(t,r){if(t.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(t),this.appendVariableUniforms(t);let o=t.usage==="input"?"read":"read_write",i=t.type.storage;return`@group(0) @binding(${r}) var<storage, ${o}> ${t.name}: array<${i}>;`}declareVariables(...t){return t.map(r=>this.declareVariable(r,this.variableIndex++)).join(`\n`)}registerInternalVariable(t){if(t.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(t),this.appendVariableUniforms(t)}registerInternalVariables(...t){return t.forEach(r=>this.registerInternalVariable(r)),this}registerUniform(t,r,o=1){return this.uniforms.push({name:t,type:r,length:o}),this}registerUniforms(t){return this.uniforms=this.uniforms.concat(t),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let t=[];for(let{name:r,type:o,length:i}of this.uniforms)if(i&&i>4)o==="f16"?t.push(`@align(16) ${r}:array<mat2x4<${o}>, ${Math.ceil(i/8)}>`):t.push(`${r}:array<vec4<${o}>, ${Math.ceil(i/4)}>`);else{let u=i==null||i===1?o:`vec${i}<${o}>`;t.push(`${r}:${u}`)}return`\n      struct Uniforms { ${t.join(", ")} };\n      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(t=>t.impl()).join(`\n`)+this.internalVariables.map(t=>t.impl()).join(`\n`)}get variablesInfo(){if(this.uniforms.length===0)return;let t=r=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(r)];return this.uniforms.map(r=>[t(r.type),r.length??1])}},va=(e,t)=>new Io(e,t),_r=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;i++){let u=r-1-i,a=e[u]||1;(t[t.length-1-i]||1)>1&&a===1&&o.unshift(u)}return o}});var Il,$a,Tl,El,yt,_a,Sa,Sr=Y(()=>{"use strict";ye();Se();Ze();_e();Il=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.")},$a=(e,t)=>t&&t.length!==e?[...new Array(e).keys()].reverse():t,Tl=(e,t)=>M.sortBasedOnPerm(e,$a(e.length,t)),El=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},yt=(e,t)=>{let r=e.dataType,o=e.dims.length,i=$a(o,t),u=Tl(e.dims,i),a=j("output",r,u.length),c=U("a",r,o),p=h=>`\n  ${h.registerUniform("output_size","u32").declareVariables(c,a)}\n\n  ${El(i,o,c,a)}\n\n  ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${a.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${a.setByOffset("global_idx",c.getByIndices("aIndices"))}\n  }`;return{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:h=>{let d=M.size(u);return{outputs:[{dims:u,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:12,data:d},...Z(h[0].dims,u)]}},getShaderSource:p}},_a=(e,t)=>{Il(e.inputs),e.compute(yt(e.inputs[0],t.perm))},Sa=e=>ve({perm:e.perm})});var Pl,kl,Ol,Rl,Bl,Dl,zl,Ml,Ul,Vl,Tt,xa,Ca,Aa,Ia,Ta,Ea,Pa,ka,Oa,Ra,Ba=Y(()=>{"use strict";ye();Se();_e();In();Sr();Pl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},kl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Ol={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Rl={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Bl=(e,t)=>{let r=[];for(let o=t-e;o<t;++o)r.push(o);return r},Dl=(e,t)=>{let r=[],o=e.length;for(let u=0;u<o;u++)t.indexOf(u)===-1&&r.push(e[u]);let i=t.map(u=>e[u]);return[r,i]},zl=(e,t)=>{let r=e.length+t.length,o=[],i=0;for(let u=0;u<r;u++)t.indexOf(u)===-1?o.push(e[i++]):o.push(1);return o},Ml=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Ul=(e,t)=>{let r=[];if(!Ml(e,t)){for(let o=0;o<t;++o)e.indexOf(o)===-1&&r.push(o);e.forEach(o=>r.push(o))}return r},Vl=(e,t,r,o,i,u,a)=>{let c=r[0].dims,p=M.size(u),h=M.size(a),d=U("_A",r[0].dataType,c),y=j("output",i,u),w=32,_=`\n          var<workgroup> aBestValues : array<f32, ${w}>;\n       `;return{name:e,shaderCache:t,getShaderSource:S=>`\n        ${S.registerUniform("reduceSize","u32").declareVariables(d,y)}\n        ${_}\n        fn DIV_CEIL(a : u32, b : u32) -> u32 {\n          return ((a - 1u) / b + 1u);\n         }\n         ${S.mainStart(w)}\n\n          let outputIndex = global_idx / ${w};\n          let offset = outputIndex * uniforms.reduceSize;\n\n          var bestValue = f32(${Ol[o]});\n          let Length = uniforms.reduceSize;\n          for (var k = local_idx; k < Length; k = k + ${w}) {\n           let candidate = f32(${d.getByOffset("offset + k")});\n           bestValue = ${Pl[o]};\n          }\n          aBestValues[local_idx] = bestValue;\n          workgroupBarrier();\n\n         var reduceSize = min(Length, ${w}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (local_idx < currentSize) {\n            let candidate = aBestValues[local_idx + interval];\n            bestValue = ${kl[o]};\n            aBestValues[local_idx] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (local_idx == 0u) {\n          ${y.setByOffset("outputIndex",`${o==="mean"?`${y.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${y.type.storage}(${Rl[o]})`}`)};\n         }\n        }`,getRunData:()=>({outputs:[{dims:u,dataType:i}],dispatchGroup:{x:p},programUniforms:[{type:12,data:h}]})}},Tt=(e,t,r,o)=>{let i=e.inputs.length===1?r:Po(e.inputs,r),u=i.axes;u.length===0&&!i.noopWithEmptyAxes&&(u=e.inputs[0].dims.map((_,v)=>v));let a=M.normalizeAxes(u,e.inputs[0].dims.length),c=a,p=e.inputs[0],h=Ul(c,e.inputs[0].dims.length);h.length>0&&(p=e.compute(yt(e.inputs[0],h),{inputs:[0],outputs:[-1]})[0],c=Bl(c.length,p.dims.length));let[d,y]=Dl(p.dims,c),w=d;i.keepDims&&(w=zl(d,a)),e.compute(Vl(t,{hint:i.cacheKey,inputDependencies:["type"]},[p],o,e.inputs[0].dataType,w,y),{inputs:[p]})},xa=(e,t)=>{Tt(e,"ReduceMeanShared",t,"mean")},Ca=(e,t)=>{Tt(e,"ReduceL1Shared",t,"l1")},Aa=(e,t)=>{Tt(e,"ReduceL2Shared",t,"l2")},Ia=(e,t)=>{Tt(e,"ReduceLogSumExpShared",t,"logSumExp")},Ta=(e,t)=>{Tt(e,"ReduceMaxShared",t,"max")},Ea=(e,t)=>{Tt(e,"ReduceMinShared",t,"min")},Pa=(e,t)=>{Tt(e,"ReduceProdShared",t,"prod")},ka=(e,t)=>{Tt(e,"ReduceSumShared",t,"sum")},Oa=(e,t)=>{Tt(e,"ReduceSumSquareShared",t,"sumSquare")},Ra=(e,t)=>{Tt(e,"ReduceLogSumShared",t,"logSum")}});var Et,Wl,Tn,Po,Pt,Nl,Gl,Hl,Ll,Fl,ql,jl,Kl,Yl,Zl,kt,Da,za,Ma,Ua,Va,Wa,Na,Ga,Ha,La,In=Y(()=>{"use strict";ye();Se();Ze();_e();Ba();Et=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Wl=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Tn=(e,t,r,o,i,u,a=!1,c=!1)=>{let p=[],h=r[0].dims,d=h.length,y=M.normalizeAxes(i,d),w=!c&&y.length===0;h.forEach((A,I)=>{w||y.indexOf(I)>=0?a&&p.push(1):p.push(A)});let _=p.length,v=M.size(p);return{name:e,shaderCache:t,getShaderSource:A=>{let I=[],x=U("_A",r[0].dataType,d),E=j("output",u,_),P=o(x,E,y),O=P[2];for(let R=0,L=0;R<d;R++)w||y.indexOf(R)>=0?(a&&L++,O=`for(var j${R}: u32 = 0; j${R} < ${h[R]}; j${R}++) {\n                  ${P[2].includes("last_index")?`let last_index = j${R};`:""}\n                  ${x.indicesSet("input_indices",R,`j${R}`)}\n                  ${O}\n                }`):(I.push(`${x.indicesSet("input_indices",R,E.indicesGet("output_indices",L))};`),L++);return`\n\n        ${A.registerUniform("output_size","u32").declareVariables(x,E)}\n\n        ${A.mainStart()}\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var input_indices: ${x.type.indices};\n          let output_indices = ${E.offsetToIndices("global_idx")};\n\n          ${I.join(`\n`)}\n          ${P[0]}       // init ops for reduce max/min\n          ${P[1]}\n          ${O}\n          ${P[3]}\n          ${P.length===4?E.setByOffset("global_idx","value"):P.slice(4).join(`\n`)}\n        }`},getRunData:()=>({outputs:[{dims:p,dataType:u}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:[{type:12,data:v},...Z(h,p)]})}},Po=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(o=>r.push(Number(o))),ve({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Pt=(e,t,r,o)=>{let i=e.inputs,u=i.length===1?r:Po(i,r);e.compute(Tn(t,{hint:u.cacheKey,inputDependencies:["rank"]},[i[0]],u.noopWithEmptyAxes&&u.axes.length===0?Wl:o,u.axes,i[0].dataType,u.keepDims,u.noopWithEmptyAxes),{inputs:[0]})},Nl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,"value = log(value);"])},Gl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL1",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += abs(${o.getByIndices("input_indices")});`,""])},Hl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL2",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Ll=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSumExp",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += exp(${o.getByIndices("input_indices")});`,"value = log(value);"])},Fl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMax",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(o.indicesSet("input_indices",c,0));return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = max(value, ${o.getByIndices("input_indices")});`,""]})},ql=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMean",t,(o,i,u)=>{let a=1;for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&(a*=e.inputs[0].dims[c]);return["var sum = f32(0);","",`sum += f32(${o.getByIndices("input_indices")});`,`let value = ${i.type.value}(sum / ${a});`]})},jl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMin",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = min(value, ${o.getByIndices("input_indices")});`,""]})},Kl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceProd",t,(o,i)=>[`var value = ${i.type.storage}(1);`,"",`value *= ${o.getByIndices("input_indices")};`,""])},Yl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,""])},Zl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSumSquare",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += t * t;`,""])},kt=(e,t,r)=>{if(t.length===0)return r;let o=1,i=1;for(let u=0;u<t.length;u++)t.indexOf(u)===-1?o*=e[u]:i*=e[u];return i<32&&o>1024},Da=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?ql(e,t):xa(e,t)},za=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Gl(e,t):Ca(e,t)},Ma=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hl(e,t):Aa(e,t)},Ua=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Ll(e,t):Ia(e,t)},Va=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Fl(e,t):Ta(e,t)},Wa=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?jl(e,t):Ea(e,t)},Na=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Kl(e,t):Pa(e,t)},Ga=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Yl(e,t):ka(e,t)},Ha=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Zl(e,t):Oa(e,t)},La=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Nl(e,t):Ra(e,t)}});var Fa,qa,ja,ko,Ka=Y(()=>{"use strict";ye();Ze();In();Fa=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},qa=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ja=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ko=e=>ve(e)});var Xl,Ql,Jl,En,Ya,Za,Oo=Y(()=>{"use strict";ye();Se();Ze();_e();Xl=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,o=e[r],i=o.dataType,u=o.dims.length;e.forEach((a,c)=>{if(c!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==u)throw new Error("input tensors should have the same shape");a.dims.forEach((p,h)=>{if(h!==t&&p!==o.dims[h])throw new Error("non concat dimensions must match")})}})},Ql=(e,t)=>`\n  fn calculateInputIndex(index: u32) -> u32 {\n    let sizeInConcatAxis = array<u32, ${e}u>(${t});\n    for (var i: u32 = 0u; i < ${e}; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ${e}u;\n  }`,Jl=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;++i){let u=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?o.push(u):i===0?o.push(`if (inputIndex == ${i}u) { ${u} }`):i===r-1?o.push(`else { ${u} }`):o.push(`else if (inputIndex == ${i}) { ${u} }`)}return o.join(`\n`)},En=(e,t,r,o)=>{let i=M.size(r),u=new Array(e.length),a=new Array(e.length),c=0,p=[],h=[],d=[{type:12,data:i}];for(let S=0;S<e.length;++S)c+=e[S].dims[t],u[S]=c,h.push(e[S].dims.length),a[S]=U(`input${S}`,o,h[S]),p.push("rank"),d.push({type:12,data:u[S]});for(let S=0;S<e.length;++S)d.push(...Z(e[S].dims));d.push(...Z(r));let y=j("output",o,r.length),w=y.indicesGet("indices",t),_=Array.from(Array(u.length).keys()).map(S=>`uniforms.sizeInConcatAxis${S}`).join(","),v=S=>`\n\n  ${(()=>{S.registerUniform("outputSize","u32");for(let A=0;A<e.length;A++)S.registerUniform(`sizeInConcatAxis${A}`,"u32");return S.declareVariables(...a,y)})()}\n\n  ${Ql(u.length,_)}\n\n  ${S.mainStart()}\n    ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n    var indices = ${y.offsetToIndices("global_idx")};\n\n    let inputIndex = calculateInputIndex(${w});\n    if (inputIndex != 0u) {\n      let sizeInConcatAxis = array<u32, ${u.length}u>(${_});\n      ${w} -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ${Jl(a,y)}\n  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:o}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:d}),getShaderSource:v}},Ya=(e,t)=>{let r=e.inputs,o=r[0].dims,i=M.normalizeAxis(t.axis,o.length);Xl(r,i);let u=o.slice();u[i]=r.reduce((c,p)=>c+(p.dims.length>i?p.dims[i]:0),0);let a=r.filter(c=>M.size(c.dims)>0);e.compute(En(a,i,u,r[0].dataType),{inputs:a})},Za=e=>ve({axis:e.axis})});var ec,tc,rc,nc,Pn,oc,Xa,Ro=Y(()=>{"use strict";ye();_n();_e();Oo();ec=(e,t)=>{let r=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5];if(a&&c)throw new Error("Attention cannot have both past and relative_position_bias");if(r.dims.length!==3)throw new Error(\'Input "input" must have 3 dimensions\');let p=r.dims[0],h=r.dims[1],d=r.dims[2];if(i.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimensions\');if(o.dims.length!==2)throw new Error(\'Input "weights" is expected to have 2 dimensions\');if(o.dims[0]!==d)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==o.dims[1])throw new Error(\'Input "bias" dimension 0 should have same length as dimension 1 of input "weights"\');let y=i.dims[0]/3,w=y,_=w;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let E of t.qkvHiddenSizes)if(E%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");y=t.qkvHiddenSizes[0],w=t.qkvHiddenSizes[1],_=t.qkvHiddenSizes[2]}let v=h;if(y!==w)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==y+w+_)throw new Error(\'Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes\');let S=0;if(a){if(w!==_)throw new Error(\'Input "past" expect k_hidden_size == v_hidden_size\');if(a.dims.length!==5)throw new Error(\'Input "past" must have 5 dimensions\');if(a.dims[0]!==2)throw new Error(\'Input "past" first dimension must be 2\');if(a.dims[1]!==p)throw new Error(\'Input "past" second dimension must be batch_size\');if(a.dims[2]!==t.numHeads)throw new Error(\'Input "past" third dimension must be num_heads\');if(a.dims[4]!==w/t.numHeads)throw new Error(\'Input "past" fifth dimension must be k_hidden_size / num_heads\');t.pastPresentShareBuffer||(S=a.dims[3])}let A=v+S,I=-1,x=0;if(u)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");return{batchSize:p,sequenceLength:h,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:A,maxSequenceLength:I,inputHiddenSize:d,hiddenSize:y,vHiddenSize:_,headSize:Math.floor(y/t.numHeads),vHeadSize:Math.floor(_/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:x,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},tc=(e,t,r,o)=>{let i=Me(o),u=64,a=o/i;a<u?u=1:a/8<64&&(u=Math.ceil(a/8));let c=Math.ceil(o/i/u),p=[{type:t.dataType,data:1/o},{type:12,data:a},{type:12,data:c}],h=De(t.dataType,i),d=et(1,i),y=w=>{let _=j("x",t.dataType,t.dims,i),S=[{name:"d_inv",type:et(t.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`\n  var<workgroup> thread_max: array<f32, ${u}>;\n  var<workgroup> thread_sum: array<f32, ${u}>;\n  ${w.registerUniforms(S).declareVariables(_)}\n  ${w.mainStart([u,1,1])}\n    let local_offset = local_idx * uniforms.elements_per_thread;\n    let offset = workgroup_id.x * uniforms.d_comp + local_offset;\n\n    var thread_max_vector = ${d}(-3.402823e+38f);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      thread_max_vector = max(${d}(x[offset + i]), thread_max_vector);\n    }\n    thread_max[local_idx] = ${(()=>{switch(i){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var max_value =  f32(-3.402823e+38f);\n    for (var i = 0u; i < ${u}; i++) {\n      max_value = max(thread_max[i], max_value);\n    }\n\n    var sum_vector = ${d}(0);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      sum_vector += exp(${d}(x[offset + i]) - max_value);\n    }\n    thread_sum[local_idx] = ${(()=>{switch(i){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var sum: f32 = 0;\n    for (var i = 0u; i < ${u}; i++) {\n      sum += thread_sum[i];\n    }\n\n    if (sum == 0) {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        x[offset + i] = ${_.type.value}(uniforms.d_inv);\n      }\n    } else {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        var f32input = ${d}(x[offset + i]);\n        x[offset + i] = ${_.type.value}(exp(f32input - max_value) / sum);\n      }\n    }\n  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${u};${h};${i}`},getShaderSource:y,getRunData:()=>({outputs:[],dispatchGroup:{x:r},programUniforms:p})}},rc=(e,t,r,o,i,u,a)=>{let c=a+i.kvSequenceLength,p=[i.batchSize,i.numHeads,i.sequenceLength,c],h=u.scale===0?1/Math.sqrt(i.headSize):u.scale,d=Me(i.headSize),y=i.headSize/d,w=12,_={x:Math.ceil(c/w),y:Math.ceil(i.sequenceLength/w),z:i.batchSize*i.numHeads},v=[{type:12,data:i.sequenceLength},{type:12,data:y},{type:12,data:c},{type:12,data:i.numHeads},{type:1,data:h}],S=o?["type","type","type"]:["type","type"],A=I=>{let x=U("q",t.dataType,t.dims,d),E=U("key",r.dataType,r.dims,d),P=[x,E];o&&P.push(U("relative_position_bias",o.dataType,o.dims));let O=j("output",t.dataType,p),R=et(1,d),L=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`\n  const TILE_SIZE = ${w}u;\n\n  var<workgroup> tileQ: array<${x.type.storage}, ${w*w}>;\n  var<workgroup> tileK: array<${x.type.storage}, ${w*w}>;\n  ${I.registerUniforms(L).declareVariables(...P,O)}\n  ${I.mainStart([w,w,1])}\n    // x holds the N and y holds the M\n    let headIdx = workgroup_id.z;\n    let m = workgroup_id.y * TILE_SIZE;\n    let n = workgroup_id.x * TILE_SIZE;\n    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;\n    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;\n\n    var value = ${R}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {\n        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {\n        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      workgroupBarrier();\n\n      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n        value += ${R}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = headIdx * uniforms.M * uniforms.N;\n    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {\n      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;\n      var sum: f32 = ${(()=>{switch(d){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${d}`)}})()};\n        output[outputIdx] = ${O.type.value} (sum * uniforms.alpha) + ${o?"relative_position_bias[outputIdx]":"0.0"};\n    }\n  }`};return{name:"AttentionProbs",shaderCache:{hint:`${d}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:p,dataType:t.dataType,gpuDataType:0}],dispatchGroup:_,programUniforms:v}),getShaderSource:A}},nc=(e,t,r,o,i)=>{let u=i+o.kvSequenceLength,a=[o.batchSize,o.sequenceLength,o.vHiddenSize],c=12,p={x:Math.ceil(o.vHeadSize/c),y:Math.ceil(o.sequenceLength/c),z:o.batchSize*o.numHeads},h=[{type:12,data:o.sequenceLength},{type:12,data:u},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:p,programUniforms:h}),getShaderSource:w=>{let _=U("probs",t.dataType,t.dims),v=U("v",r.dataType,r.dims),S=j("output",t.dataType,a),A=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`\n  const TILE_SIZE = ${c}u;\n  var<workgroup> tileQ: array<${_.type.value}, ${c*c}>;\n  var<workgroup> tileK: array<${_.type.value}, ${c*c}>;\n  ${w.registerUniforms(A).declareVariables(_,v,S)}\n  ${w.mainStart([c,c,1])}\n   let headIdx = workgroup_id.z;\n   let m = global_id.y;\n   let n = global_id.x;\n\n   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;\n   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;\n\n   var value = ${_.type.storage}(0);\n   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n     if (m < uniforms.M && w + local_id.x < uniforms.K) {\n       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];\n     }\n     if (n < uniforms.N && w + local_id.y < uniforms.K) {\n       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];\n     }\n     workgroupBarrier();\n     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];\n     }\n     workgroupBarrier();\n   }\n\n   // we need to transpose output from BNSH_v to BSND_v\n   let batchIdx = workgroup_id.z / uniforms.num_heads;\n   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;\n   if (m < uniforms.M && n < uniforms.N) {\n     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size\n       + currentBatchHeadNumber * uniforms.N + n;\n     output[outputIdx] = value;\n   }\n  }`}}},Pn=(e,t,r,o,i,u,a,c,p,h,d)=>{let y=e.outputCount>1,w=e.outputCount>2,_=y&&w?h.pastSequenceLength:0,v=_+h.kvSequenceLength,S=[h.batchSize,h.numHeads,v,h.headSize],A=a?[a,r]:[r],I=y?e.compute(En(A,2,S,r.dataType),{inputs:A,outputs:[1]})[0]:r,x=[h.batchSize,h.numHeads,v,h.headSize],E=c?[c,o]:[o],P=w?e.compute(En(E,2,x,o.dataType),{inputs:E,outputs:[2]})[0]:o,O=[t,I];p&&O.push(p);let R=e.compute(rc(e,t,I,p,h,d,_),{inputs:O,outputs:[-1]})[0];e.compute(tc(e,R,h.batchSize*h.numHeads*h.sequenceLength,v),{inputs:[R],outputs:[]});let L=[R,P];e.compute(nc(e,R,P,h,_),{inputs:L,outputs:[0]})},oc=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],o=t.sequenceLength,i=t.inputHiddenSize,u=t.headSize,a=12,c={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},p=[e.inputs[0],e.inputs[1],e.inputs[2]],h=[{type:12,data:o},{type:12,data:i},{type:12,data:u},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],d=y=>{let w=j("output_q",p[0].dataType,r),_=j("output_k",p[0].dataType,r),v=j("output_v",p[0].dataType,r),S=U("input",p[0].dataType,p[0].dims),A=U("weight",p[1].dataType,p[1].dims),I=U("bias",p[2].dataType,p[2].dims),x=S.type.storage,E=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`\n  const TILE_SIZE = ${a}u;\n  var<workgroup> tileInput: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightQ: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightK: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightV: array<${x}, ${a*a}>;\n  ${y.registerUniforms(E).declareVariables(S,A,I,w,_,v)}\n  ${y.mainStart([a,a,1])}\n    let batchIndex = workgroup_id.z / uniforms.num_heads;\n    let headNumber = workgroup_id.z % uniforms.num_heads;\n    let m = global_id.y;\n    let n = global_id.x;\n\n    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;\n    let biasOffsetQ = headNumber * uniforms.head_size;\n    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;\n    let biasOffsetV = uniforms.hidden_size + biasOffsetK;\n\n    var valueQ = ${x}(0);\n    var valueK = ${x}(0);\n    var valueV = ${x}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m < uniforms.M && w + local_id.x < uniforms.K) {\n        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];\n      }\n      if (n < uniforms.N && w + local_id.y < uniforms.K) {\n        let offset = n + (w + local_id.y) * uniforms.ldb;\n        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];\n        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];\n        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];\n      }\n      workgroupBarrier();\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        let inputTileOffset = TILE_SIZE * local_id.y + k;\n        let weightTileOffset = TILE_SIZE * k + local_id.x;\n        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];\n        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];\n        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = (m * uniforms.N + n) % uniforms.head_size;\n    valueQ += bias[headOffset + biasOffsetQ];\n    valueK += bias[headOffset + biasOffsetK];\n    valueV += bias[headOffset + biasOffsetV];\n\n    let offset = workgroup_id.z * uniforms.M * uniforms.N;\n    if (m < uniforms.M && n < uniforms.N) {\n      let outputIdx = offset + m * uniforms.N + n;\n      output_q[outputIdx] = valueQ;\n      output_k[outputIdx] = valueK;\n      output_v[outputIdx] = valueV;\n    }\n  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:h}),getShaderSource:d},{inputs:p,outputs:[-1,-1,-1]})},Xa=(e,t)=>{let r=ec(e.inputs,t),[o,i,u]=oc(e,r);return Pn(e,o,i,u,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t)}});var ic,ac,sc,Qa,Ja=Y(()=>{"use strict";$r();ye();Se();Ze();_e();ic=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(o,i,u)=>{let a=i.length;if(a!==o.length)throw new Error(`${u}: num dimensions != ${a}`);i.forEach((c,p)=>{if(c!==o[p])throw new Error(`${u}: dim[${p}] do not match`)})};if(e[0].dims.length>1){let o=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,o,"Invalid input scale"),r(e[2].dims,o,"Invalid input B"),r(e[3].dims,o,"Invalid input mean"),r(e[4].dims,o,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},ac=(e,t)=>{let{epsilon:r,spatial:o,format:i}=t,u=e[0].dims,a=o?Me(u[u.length-1]):1,c=i==="NHWC"&&u.length>1?a:1,p=M.size(u)/a,h=o,d=h?u.length:u,y=U("x",e[0].dataType,e[0].dims,a),w=U("scale",e[1].dataType,e[1].dims,c),_=U("bias",e[2].dataType,e[2].dims,c),v=U("inputMean",e[3].dataType,e[3].dims,c),S=U("inputVar",e[4].dataType,e[4].dims,c),A=j("y",e[0].dataType,d,a),I=()=>{let E="";if(o)E=`let cOffset = ${u.length===1?"0u":i==="NHWC"?`outputIndices[${u.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")E=`\n            ${A.indicesSet("outputIndices","0","0")}\n            let cOffset = ${A.indicesToOffset("outputIndices")};`;else{E=`var cIndices = ${w.type.indices}(0);\n                       cIndices[0] = outputIndices[${u.length-1}];`;for(let P=1;P<w.rank;P++)E+=`cIndices[${P}] = outputIndices[${P}];`;E+=`let cOffset = ${w.indicesToOffset("cIndices")};`}return E},x=E=>`\n  const epsilon = ${r};\n  ${E.registerUniform("outputSize","u32").declareVariables(y,w,_,v,S,A)}\n  ${E.mainStart()}\n  ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n    var outputIndices = ${A.offsetToIndices(`global_idx * ${a}`)};\n    ${I()}\n    let scale = ${w.getByOffset("cOffset")};\n    let bias = ${_.getByOffset("cOffset")};\n    let inputMean = ${v.getByOffset("cOffset")};\n    let inputVar = ${S.getByOffset("cOffset")};\n    let x = ${y.getByOffset("global_idx")};\n    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;\n    ${A.setByOffset("global_idx","value")}\n  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${o}_${a}`,inputDependencies:h?["rank","type","type","type","type"]:void 0},getShaderSource:x,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h?[{type:12,data:p},...Z(u)]:[{type:12,data:p}]})}},sc=e=>ve(e),Qa=(e,t)=>{let{inputs:r,outputCount:o}=e,i=sc({...t,outputCount:o});if(vr.webgpu.validateInputContent&&ic(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(ac(r,i))}});var uc,dc,es,ts=Y(()=>{"use strict";Se();_e();uc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},dc=e=>{let t=e[0].dims,r=e[0].dims[2],o=M.size(t)/4,i=e[0].dataType,u=U("input",i,t,4),a=U("bias",i,[r],4),c=U("residual",i,t,4),p=j("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:d=>`\n  const channels = ${r}u / 4;\n  ${d.declareVariables(u,a,c,p)}\n\n  ${d.mainStart()}\n    ${d.guardAgainstOutOfBoundsWorkgroupSizes(o)}\n    let value = ${u.getByOffset("global_idx")}\n      + ${a.getByOffset("global_idx % channels")} + ${c.getByOffset("global_idx")};\n    ${p.setByOffset("global_idx","value")}\n  }`}},es=e=>{uc(e.inputs),e.compute(dc(e.inputs))}});var lc,ke,rs,ns,os,is,as,ss,us,ds,ls,cc,cs,ps,ms,fs,kn,hs,On,gs,ys,bs,ws,vs,$s,_s,Ss,xs,Cs,As,Is,Ts,Es,Ps,ks,Os,Rs,Bo,Do,Bs,Ds,zs,Rn=Y(()=>{"use strict";ye();Se();Ze();_e();lc=(e,t,r,o,i,u)=>{let a=Math.ceil(t/4),c="";typeof i=="string"?c=`${i}(a)`:c=i("a");let p=U("inputData",r,[a],4),h=j("outputData",o,[a],4);return`\n      ${e.registerUniform("vec_size","u32").declareVariables(p,h)}\n\n  ${u??""}\n\n  ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n\n    let a = ${p.getByOffset("global_idx")};\n    ${h.setByOffset("global_idx",c)}\n  }`},ke=(e,t,r,o,i,u=e.dataType)=>({name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:a=>lc(a,M.size(e.dims),e.dataType,u,r,o),getRunData:a=>({outputs:[{dims:e.dims,dataType:u}],dispatchGroup:{x:Math.ceil(M.size(a[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(e.dims)/4)}]})}),rs=e=>{e.compute(ke(e.inputs[0],"Abs","abs"))},ns=e=>{e.compute(ke(e.inputs[0],"Acos","acos"))},os=e=>{e.compute(ke(e.inputs[0],"Acosh","acosh"))},is=e=>{e.compute(ke(e.inputs[0],"Asin","asin"))},as=e=>{e.compute(ke(e.inputs[0],"Asinh","asinh"))},ss=e=>{e.compute(ke(e.inputs[0],"Atan","atan"))},us=e=>{e.compute(ke(e.inputs[0],"Atanh","atanh"))},ds=e=>ve(e),ls=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute \'to\' from \'Cast\' operator): ${t.to}`)}e.compute(ke(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},cc=e=>{let t=e.length>=2&&e[1].data!==0?e[1].getFloat32Array()[0]:xn,r=e.length>=3&&e[2].data!==0?e[2].getFloat32Array()[0]:Cn;return ve({min:t,max:r})},cs=(e,t)=>{let r=e.inputs.length===1?t:cc(e.inputs),o=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Clip",i=>`clamp(${i}, clip_min_, clip_max_)`,`\n    const clip_min_: vec4<${o}> = vec4(${o}(${r.min}));\n    const clip_max_: vec4<${o}> = vec4(${o}(${r.max}));\n`,r.cacheKey),{inputs:[0]})},ps=e=>{e.compute(ke(e.inputs[0],"Ceil","ceil"))},ms=e=>{e.compute(ke(e.inputs[0],"Cos","cos"))},fs=e=>{e.compute(ke(e.inputs[0],"Cosh","cosh"))},kn=e=>ve(e),hs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Elu",o=>`elu_vf32(${o})`,`\n  const elu_alpha_ = ${r}(${t.alpha});\n\n  fn elu_f32(a: ${r}) -> ${r} {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }`,t.cacheKey))},On=(e="f32")=>`\nconst r0: ${e} = 0.3275911;\nconst r1: ${e} = 0.254829592;\nconst r2: ${e} = -0.284496736;\nconst r3: ${e} = 1.421413741;\nconst r4: ${e} = -1.453152027;\nconst r5: ${e} = 1.061405429;\n\nfn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}`,gs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,On(t)))},ys=e=>{e.compute(ke(e.inputs[0],"Exp","exp"))},bs=e=>{e.compute(ke(e.inputs[0],"Floor","floor"))},ws=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,On(t)))},vs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"LeakyRelu",o=>`select(leaky_relu_alpha_ * ${o}, ${o}, ${o} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},$s=e=>{e.compute(ke(e.inputs[0],"Not",t=>`!${t}`))},_s=e=>{e.compute(ke(e.inputs[0],"Neg",t=>`-${t}`))},Ss=e=>{e.compute(ke(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},xs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Cs=e=>{e.compute(ke(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},As=e=>ve(e),Is=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"HardSigmoid",o=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${o} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},Ts=e=>{e.compute(ke(e.inputs[0],"Sin","sin"))},Es=e=>{e.compute(ke(e.inputs[0],"Sinh","sinh"))},Ps=e=>{e.compute(ke(e.inputs[0],"Sqrt","sqrt"))},ks=e=>{e.compute(ke(e.inputs[0],"Tan","tan"))},Os=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,Rs=e=>{e.compute(ke(e.inputs[0],"Tanh",Os))},Bo=(e="f32")=>`\nconst fast_gelu_a: ${e} = 0.5;\nconst fast_gelu_b: ${e} = 0.7978845608028654;\nconst fast_gelu_c: ${e} = 0.035677408136300125;\n\nfn tanh_v(v: vec4<${e}>) -> vec4<${e}> {\n  return ${Os("v")};\n}\n`,Do=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,Bs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"FastGelu",Do,Bo(t),void 0,e.inputs[0].dataType))},Ds=(e,t)=>{let r=et(e.inputs[0].dataType);return e.compute(ke(e.inputs[0],"ThresholdedRelu",o=>`select(vec4<${r}>(0.0), ${o}, ${o} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},zs=e=>{e.compute(ke(e.inputs[0],"Log","log"))}});var pc,mc,Us,Vs=Y(()=>{"use strict";Se();_e();Rn();pc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},mc=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=U("input",e[0].dataType,e[0].dims,4),o=U("bias",e[0].dataType,[e[0].dims[2]],4),i=j("output",e[0].dataType,t,4),u=M.size(t)/4,a=De(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)}}),getShaderSource:p=>`\n  const M_SQRT2 = sqrt(2.0);\n  const halfChannels = ${e[0].dims[2]/4/2}u;\n\n  ${p.declareVariables(r,o,i)}\n\n  ${On(a)}\n\n  ${p.mainStart()}\n    ${p.guardAgainstOutOfBoundsWorkgroupSizes(u)}\n    let biasIdx = global_idx % halfChannels;\n    let batchIndex = global_idx / halfChannels;\n    let inputOffset = biasIdx + batchIndex * halfChannels * 2;\n    let valueLeft = input[inputOffset] + bias[biasIdx];\n    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];\n    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);\n\n    ${i.setByOffset("global_idx","valueLeft * geluRight")}\n  }`}},Us=e=>{pc(e.inputs),e.compute(mc(e.inputs))}});var fc,hc,Ot,Ws,Ns,Gs,Hs,Ls,Fs,qs,js,Ks,Ys,Zs=Y(()=>{"use strict";ye();Se();_e();fc=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w,_;typeof c=="string"?w=_=(x,E)=>`${c}((${x}),(${E}))`:typeof c=="function"?w=_=c:(w=c.scalar,_=c.vector);let v=j("outputData",d,o.length,4),S=U("aData",p,t.length,4),A=U("bData",h,r.length,4),I;if(i)if(u){let x=M.size(t)===1,E=M.size(r)===1,P=t.length>0&&t[t.length-1]%4===0,O=r.length>0&&r[r.length-1]%4===0;x||E?I=v.setByOffset("global_idx",_(x?`${S.type.value}(${S.getByOffset("0")}.x)`:S.getByOffset("global_idx"),E?`${A.type.value}(${A.getByOffset("0")}.x)`:A.getByOffset("global_idx"))):I=`\n            let outputIndices = ${v.offsetToIndices("global_idx * 4u")};\n            let offsetA = ${S.broadcastedIndicesToOffset("outputIndices",v)};\n            let offsetB = ${A.broadcastedIndicesToOffset("outputIndices",v)};\n            ${v.setByOffset("global_idx",_(a||P?S.getByOffset("offsetA / 4u"):`${S.type.value}(${S.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||O?A.getByOffset("offsetB / 4u"):`${A.type.value}(${A.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}\n          `}else I=v.setByOffset("global_idx",_(S.getByOffset("global_idx"),A.getByOffset("global_idx")));else{if(!u)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let x=(E,P,O="")=>{let R=`aData[indexA${P}][componentA${P}]`,L=`bData[indexB${P}][componentB${P}]`;return`\n            let outputIndices${P} = ${v.offsetToIndices(`global_idx * 4u + ${P}u`)};\n            let offsetA${P} = ${S.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let offsetB${P} = ${A.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let indexA${P} = offsetA${P} / 4u;\n            let indexB${P} = offsetB${P} / 4u;\n            let componentA${P} = offsetA${P} % 4u;\n            let componentB${P} = offsetB${P} % 4u;\n            ${E}[${P}] = ${O}(${w(R,L)});\n          `};d===9?I=`\n            var data = vec4<u32>(0);\n            ${x("data",0,"u32")}\n            ${x("data",1,"u32")}\n            ${x("data",2,"u32")}\n            ${x("data",3,"u32")}\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:I=`\n            ${x("outputData[global_idx]",0)}\n            ${x("outputData[global_idx]",1)}\n            ${x("outputData[global_idx]",2)}\n            ${x("outputData[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(S,A,v)}\n\n        ${y??""}\n\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${I}\n      }`},hc=(e,t,r,o,i,u,a=r.dataType)=>{let c=!M.areEqual(r.dims,o.dims),p=r.dims,h=M.size(r.dims),d=!1,y=!1,w=[c];if(c){let _=It.calcShape(r.dims,o.dims,!1);if(!_)throw new Error("Can\'t perform binary op on the given tensors");p=_,h=M.size(p);let v=M.size(r.dims)===1,S=M.size(o.dims)===1,A=r.dims.length>0&&r.dims[r.dims.length-1]%4===0,I=o.dims.length>0&&o.dims[o.dims.length-1]%4===0;w.push(v),w.push(S),w.push(A),w.push(I);let x=1;for(let E=1;E<p.length;E++){let P=r.dims[r.dims.length-E]??1,O=o.dims[o.dims.length-E]??1;if(P===O)x*=P;else break}x%4===0?(y=!0,d=!0):(v||S||A||I)&&(d=!0)}else d=!0;return w.push(d),{name:e,shaderCache:{hint:t+w.map(_=>_.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:_=>fc(_,r.dims,o.dims,p,d,c,y,i,r.dataType,o.dataType,a,u),getRunData:()=>({outputs:[{dims:p,dataType:a}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(p)/4)},...Z(r.dims,o.dims,p)]})}},Ot=(e,t,r,o,i,u)=>{e.compute(hc(t,i??"",e.inputs[0],e.inputs[1],r,o,u))},Ws=e=>{Ot(e,"Add",(t,r)=>`${t}+${r}`)},Ns=e=>{Ot(e,"Div",(t,r)=>`${t}/${r}`)},Gs=e=>{Ot(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},Hs=e=>{Ot(e,"Mul",(t,r)=>`${t}*${r}`)},Ls=e=>{let t=U("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Ot(e,"Pow",{scalar:(o,i)=>`pow_custom(${o},${i})`,vector:(o,i)=>`pow_vector_custom(${o},${i})`},`\n    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {\n      if (b == ${t}(0.0)) {\n        return ${t}(1.0);\n      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {\n        return ${t}(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {\n      // TODO: implement vectorized pow\n      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      `)},Fs=e=>{Ot(e,"Sub",(t,r)=>`${t}-${r}`)},qs=e=>{Ot(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},js=e=>{Ot(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},Ks=e=>{Ot(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},Ys=e=>{Ot(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}});var St,xt,Ct,Bn,Ft=Y(()=>{"use strict";ye();Se();St=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},xt=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Ct=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},Bn=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[r,o]=e?.activation_params||[.2,.5];return{activation:t,alpha:r,beta:o}}else if(t==="Clip"){let[r,o]=e?.activation_params||[xn,Cn];return{activation:t,clipMax:o,clipMin:r}}else if(t==="LeakyRelu"){let[r]=e?.activation_params||[.01];return{activation:t,alpha:r}}return{activation:t}}});var tt,Dn,zn=Y(()=>{"use strict";tt=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},Dn=e=>`\n      ${e?"value = value + getBiasByOutputCoords(coords);":""}\n      `});var Mn,zo=Y(()=>{"use strict";Mn=e=>`\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));\n}\n`});var yc,bc,Hr,Xs,wc,Lr,vc,Un,Fr=Y(()=>{"use strict";ye();Se();_e();Ft();zn();yc=(e,t)=>e?`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `:`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `,bc=(e,t)=>e?`\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}\n        }`:`\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}\n        }`,Hr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32)=>{let p=t[1]*e[1],h=t[0]*e[0],d=i?p:u,y=i?u:p,w=d/t[0],_=u/t[1];if(!((i&&w===4&&e[1]===4||!i&&(w===3||w===4))&&d%t[0]===0&&u%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${w} and workPerThread[1] ${e[1]} must be 4.\n      Otherwise, innerElementSize ${w} must be 3 or 4.\n  tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}. tileInner ${u} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`\nvar<workgroup> mm_Asub: array<array<vec${w}<${r}>, ${d/w}>, ${y}>;\nvar<workgroup> mm_Bsub: array<array<vec4<${r}>, ${h/e[0]}>, ${u}>;\n\nconst rowPerThread = ${e[1]};\nconst colPerThread = ${e[0]};\nconst innerElementSize = ${w};\nconst tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ${a?"0":"i32(globalId.z)"};\n  ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n  let globalRowStart = i32(workgroupId.y) * ${p};\n\n  let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n  var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n  var acc: array<vec4<${r}>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ${_};\n  for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ${yc(i,o)}\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${o?", batchIndices":""});\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ${w===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}\n\n          ${bc(i,w)}\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}`},Xs=(e,t)=>e?`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol${t?", batchIndices":""});\n            `:`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol${t?", batchIndices":""});\n            `,wc=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",Lr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32,p=!1)=>{let h=e[1]*t[1],d=e[0]*t[0],y=i?h:u,w=i?u:h;if(!(w%t[1]===0&&y%t[0]===0&&u%t[1]===0))throw new Error(`tileAHight ${w} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${y} must be divisible by workgroupSize[0]${t[0]}, tileInner ${u} must be divisible by workgroupSize[1]${t[1]}`);let _=w/t[1],v=y/t[0],S=u/t[1],A=p?`\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ${h};\n    let globalColStart = i32(workgroupId.x) * ${d};\n\n    // Loop over shared dimension.\n    for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ${w}; inputRow = inputRow + ${t[1]}) {\n        for (var inputCol = localCol; inputCol < ${y}; inputCol = inputCol + ${t[0]}) {\n          ${Xs(i,o)}\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ${u}; inputRow = inputRow + ${t[1]}) {\n            for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol${o?", batchIndices":""});\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<${r}, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ${t[1]};\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ${t[0]};\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    `:`\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ${h};\n\nlet tileRowA = i32(localId.y) * ${_};\nlet tileColA = i32(localId.x) * ${v};\nlet tileRowB = i32(localId.y) * ${S};\n// Loop over shared dimension.\nfor (var t = 0; t < num_tiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ${v}; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ${Xs(i,o)}\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ${S}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol${o?", batchIndices":""});\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<${r}, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ${wc(i)}\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n`;return`\n  var<workgroup> mm_Asub : array<array<${r}, ${y}>, ${w}>;\n  var<workgroup> mm_Bsub : array<array<${r}, ${d}>, ${u}>;\n  const rowPerThread = ${e[1]};\n  const colPerThread = ${e[0]};\n  const tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ${a?"0":"i32(globalId.z)"};\n    ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n    let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n    var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n    var acc : array<array<${r}, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ${A}\n  }\n`},vc=(e,t,r,o,i,u=!1)=>{let[a,c,p]=i,[h,d,y,w]=o,_=_r(a,p),v=_r(c,p),S=De(o[0].type.tensor),A=()=>{let E=d.rank,P=h.rank,O=`var aIndices: ${d.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\naIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return _.forEach(R=>{O+=`\naIndices[${R}] = 0;`}),O+=`\naIndices[${E-2}] = u32(row);\n                   aIndices[${E-1}] = u32(colIn);`,O},I=()=>{let E=y.rank,P=h.rank,O=`var bIndices: ${y.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\nbIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return v.forEach(R=>{O+=`\nbIndices[${R}] = 0;`}),O+=`\nbIndices[${E-2}] = u32(row);\n                   bIndices[${E-1}] = u32(colIn);`,O};return`\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)\n      {\n        ${A()}\n        value = ${d.getByIndices("aIndices")};\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)\n      {\n        ${I()}\n        value = ${y.getByIndices("bIndices")};\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${tt(e,S)}) {\n      let col = colIn * ${e};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ${t?`value = value + ${u?"bias[colIn]":`${tt(e,S)}(bias[row])`};`:""}\n        ${r}\n        ${w.setByIndices("vec3<u32>(coords)","value")}\n      }\n    }\n    `},Un=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u.slice(0,-2),p=a.slice(0,-2),h=o?o.slice(0,-2):r.slice(0,-2),d=M.size(h),y=u[u.length-2],w=u[u.length-1],_=a[a.length-1],v=w%4===0&&_%4===0,S=y<=8?[4,1,1]:[4,4,1],A=[8,8,1],I=[Math.ceil(_/A[0]/S[0]),Math.ceil(y/A[1]/S[1]),Math.ceil(d/A[2]/S[2])],x=v?4:1,E=[...c,y,w/x],P=E.length,O=[...p,w,_/x],R=O.length,L=[d,y,_/x],N=[{type:6,data:y},{type:6,data:_},{type:6,data:w}];xt(t,N),N.push(...Z(h,E,O));let K=["rank","rank"],Q=e.length>2;Q&&(N.push(...Z(e[2].dims)),K.push("rank")),N.push(...Z(L));let he=W=>{let se=h.length,Ce=An("batchDims",e[0].dataType,se,1),We=De(e[0].dataType),ee=U("a",e[0].dataType,P,x),ae=U("b",e[1].dataType,R,x),Ae=j("result",e[0].dataType,L.length,x),me=[ee,ae];if(Q){let G=i?x:1;me.push(U("bias",e[2].dataType,e[2].dims.length,G))}let ie=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Ct(t,ie);let ue=De(Ae.type.tensor),le=St(t,Ae.type.value,ue),qe=vc(x,Q,le,[Ce,ee,ae,Ae],[c,p,h],i);return`\n  ${W.registerUniforms(ie).registerInternalVariables(Ce).declareVariables(...me,Ae)}\n  ${qe}\n  ${v?Hr(S,A,We,Ce):Lr(S,A,We,Ce)}\n                   `};return{name:"MatMul",shaderCache:{hint:`${S};${t.activation};${v};${i}`,inputDependencies:K},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:I[0],y:I[1],z:I[2]},programUniforms:N}),getShaderSource:he}}});var $c,Qs,Js=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();$c=(e,t,r,o,i=!1,u,a=4,c=4,p=4,h="f32")=>{let d=Q=>{switch(Q){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${h}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},y=Q=>{switch(Q){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},w=e?`\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    `:`\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    `,_=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,v=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",S=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",A=e?"row":"col",I=e?"col":"row",x=`\n    let inChannels = i32(uniforms.w_shape[2]);\n    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n    let outRow = ${A} / outWidth;\n    let outCol = ${A} % outWidth;\n\n    let WRow = ${I} / (i32(uniforms.w_shape[1]) * inChannels);\n    let WCol = ${I} / inChannels % i32(uniforms.w_shape[1]);\n    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];\n    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];\n    let xCh = ${I} % inChannels;\n    var resData = ${tt(a,h)}(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the \'same\' padding type.\n    if (xRow >= 0 && xRow < ${v} && xCol >= 0 && xCol < ${S}) {\n      ${w}\n      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));\n      ${d(a)}\n    }\n    return resData;`,E=e?t&&o?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`:o&&r?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`,P=`${y(c)}`,O=tt(p,h),R=e?tt(a,h):tt(c,h),L=e?tt(c,h):tt(a,h),N=St(u,O,h);return`\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${R} {\n      ${e?E:P}\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${L} {\n      ${e?P:E}\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${O}) {\n      let col = colIn * ${p};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)\n      {\n      var value = valueIn;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${_}\n      ${Dn(i)}\n      ${N}\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }`},Qs=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&(h%4===0||h%3===0)&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${E}`);let P=v?p&&h%4!==0?3:4:1,O=I[1]*x[1],R=I[0]*x[0],L=Math.max(I[0]*P,I[1]),N=o%O===0,K=i%R===0,Q=u%L===0,he=v?[P,4,4]:[1,1,1],W=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];xt(t,W),W.push(...Z(e[0].dims,e[1].dims));let se=["rank","rank"];a&&(W.push(...Z(e[2].dims)),se.push("rank")),W.push(...Z(r));let Ce=We=>{let ee=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Ct(t,ee);let ae=v?4:1,Ae=De(e[0].dataType),me=`\n      fn setOutputAtIndex(flatIndex : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        result[flatIndex] = ${v?`vec4<${Ae}>`:Ae}(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ${v?"/ 4":""}, value);\n      }`,ie=U("x",e[0].dataType,e[0].dims.length,P===3?1:P),ue=U("w",e[1].dataType,e[1].dims.length,ae),le=[ie,ue],qe=j("result",e[0].dataType,r.length,ae);if(a){let G=U("bias",e[2].dataType,e[2].dims.length,ae);le.push(G),me+=`\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${v?`vec4<${Ae}>`:Ae} {\n          return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n        }`}return`\n        ${Mn("uniforms.result_strides")}\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ${We.registerUniforms(ee).declareVariables(...le,qe)}\n        ${me}\n        ${$c(p,N,K,Q,a,t,he[0],he[1],he[2],Ae)}\n        ${v?Hr(x,I,Ae,void 0,!p,L):Lr(x,I,Ae,void 0,!p,L,!1,void 0,c)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${P};${v};${N};${K};${Q};${O};${R};${L}`,inputDependencies:se},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:W}),getShaderSource:Ce}}});var Mo,eu,tu=Y(()=>{"use strict";ye();Se();_e();Uo();Ft();Mo=(e,t,r)=>{let o=e.length>2,i=o?"value += b[output_channel];":"",u=e[0].dims,a=e[1].dims,c=a[0]/t.group,p=t.format==="NHWC",h=Vn(u,a,t.dilations,t.pads,t.strides,p),d=M.size(h),y=[{type:12,data:d},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:c}];xt(t,y),y.push(...Z(u,a));let w=["rank","rank"];o&&(y.push(...Z(e[2].dims)),w.push("rank")),y.push(...Z(h));let _=v=>{let S=j("output",e[0].dataType,h.length),A=De(S.type.tensor),I=St(t,S.type.value,A),x=U("x",e[0].dataType,u.length),E=U("w",e[1].dataType,a.length),P=[x,E];o&&P.push(U("b",e[2].dataType,e[2].dims.length));let O=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Ct(t,O),`\n  ${v.registerUniforms(O).declareVariables(...P,S)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let outputIndices = ${S.offsetToIndices("global_idx")};\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[${p?3:1}];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${p?1:2}], outputIndices[${p?2:3}]) * uniforms.strides - uniforms.pads;\n    let group_id: u32 = output_channel / uniforms.output_channels_per_group;\n\n    var value: ${S.type.value} = ${S.type.value}(0);\n    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {\n      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];\n\n        if (xHeight < 0u || xHeight >= uniforms.x_shape[${p?1:2}]) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];\n          if (xWidth < 0u || xWidth >= uniforms.x_shape[${p?2:3}]) {\n            continue;\n          }\n\n          let xVal = ${p?x.get("batch","xHeight","xWidth","input_channel"):x.get("batch","input_channel","xHeight","xWidth")};\n          let wVal = ${E.get("output_channel","wInChannel","wHeight","wWidth")};\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${i}\n    ${I}\n    ${S.setByOffset("global_idx","value")}\n  }`};return{name:"GroupedConv",shaderCache:{hint:t.cacheKey,inputDependencies:w},getRunData:()=>({outputs:[{dims:r?r(h):h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:y}),getShaderSource:_}},eu=(e,t,r)=>{let o=e.length>2,i=Me(r[3]),u=Me(r[2]),a=M.size(r)/i/u,c=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/i],p=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/i],h=[r[0],r[1],r[2],r[3]/i],d=[{type:12,data:a},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];xt(t,d),d.push(...Z(c,p,h));let y=(u-1)*t.strides[1]+p[1],w=_=>{let v=j("output",e[0].dataType,h.length,i),S=De(v.type.tensor),A=St(t,v.type.value,S),I=U("x",e[0].dataType,c.length,i),x=U("w",e[1].dataType,p.length,i),E=[I,x];o&&E.push(U("b",e[2].dataType,e[2].dims,i));let P=o?"value += b[output_channel];":"",O=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Ct(t,O),`\n  ${_.registerUniforms(O).declareVariables(...E,v)}\n  ${_.mainStart()}\n    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let width0 = uniforms.output_shape[3];\n    let output_channel = global_idx % width0;\n    var index1 = global_idx / width0;\n    let width1 = uniforms.output_shape[2] / ${u}u;\n    let col = (index1 % width1) * ${u}u;\n    index1 = index1 / width1;\n    let row = index1 % uniforms.output_shape[1];\n    let batch = index1 / uniforms.output_shape[1];\n\n    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;\n\n    var x_vals: array<${I.type.value}, ${y}>;\n    var values: array<${v.type.value}, ${u}>;\n    let input_channel = output_channel;\n    // Use constant instead of uniform can give better performance for w\'s height/width.\n    for (var w_height: u32 = 0u; w_height < ${p[0]}; w_height++) {\n      let x_height = x_corner.x + i32(w_height);\n      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {\n        for (var i = 0; i < ${y}; i++) {\n          let x_width = x_corner.y + i;\n          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {\n            x_vals[i] = ${I.get("batch","u32(x_height)","u32(x_width)","input_channel")};\n          } else {\n            x_vals[i] = ${I.type.value}(0);\n          }\n        }\n        for (var w_width: u32 = 0u; w_width < ${p[1]}; w_width++) {\n          let w_val = ${x.get("w_height","w_width","0","output_channel")};\n          for (var i = 0u; i < ${u}u; i++) {\n            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);\n          }\n        }\n      }\n    }\n\n    for (var i = 0u; i < ${u}u; i++) {\n      var value = values[i];\n      ${P}\n      ${A}\n      ${v.set("batch","row","col + i","output_channel","value")};\n    }\n  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${i};${u};${y};${p[0]};${p[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:w}}});var Vo,_c,ru,Wo=Y(()=>{"use strict";ye();Se();Fr();_e();Ft();Vo=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u[u.length-2],p=a[a.length-1],h=u[u.length-1],d=Me(p),y=Me(h),w=Me(c),_=M.size(r)/d/w,v=e.length>2,S=o?o.slice(0,-2):r.slice(0,-2),I=[M.size(S),c,p],x=[{type:12,data:_},{type:12,data:c},{type:12,data:p},{type:12,data:h}];xt(t,x),x.push(...Z(S,u,a)),v&&x.push(...Z(e[2].dims)),x.push(...Z(I));let E=P=>{let O=An("batch_dims",e[0].dataType,S.length),R=U("a",e[0].dataType,u.length,y),L=U("b",e[1].dataType,a.length,d),N=j("output",e[0].dataType,I.length,d),K=De(N.type.tensor),Q=St(t,N.type.value,K),he=[R,L],W="";if(v){let ie=i?d:1;he.push(U("bias",e[2].dataType,e[2].dims.length,ie)),W=`${i?`value += bias[col / ${ie}];`:`value += ${N.type.value}(bias[row + i]);`}`}let se=u.slice(0,-2),Ce=a.slice(0,-2),We=_r(se,S),ee=_r(Ce,S),ae=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Ct(t,ae);let Ae=(ie,ue)=>{let le=ie.rank,qe=ie.name;if(le===2)return`var ${qe}_indices = ${ie.type.indices}(0u, 0u);`;let G=O.rank,ne=`var ${qe}_indices: ${ie.type.indices};`;for(let xe=le-2-1,Ke=G-1;xe>=0;xe--,Ke--)ne+=`\n${qe}_indices[${xe}] = ${G>1?`batch_indices[${Ke}]`:"batch_indices"};`;return ue.forEach(xe=>{ne+=`\n${qe}_indices[${xe}] = 0;`}),ne+=`${qe}_indices[${le-2}] = 0u;\n                     ${qe}_indices[${le-1}] = 0u;`,ne},me=()=>{let ie=`var a_data: ${R.type.value};`;for(let ue=0;ue<y;ue++)ie+=`\n              let b_data${ue} = b[(b_offset + (k + ${ue}) * uniforms.N + col) / ${d}];`;for(let ue=0;ue<w;ue++){ie+=`a_data = a[(a_offset + (row + ${ue}) * uniforms.K + k) / ${y}];`;for(let le=0;le<y;le++)ie+=`\n            values[${ue}] = fma(${L.type.value}(a_data${y===1?"":`[${le}]`}), b_data${le}, values[${ue}]);\n`}return ie};return`\n  ${P.registerUniforms(ae).registerInternalVariables(O).declareVariables(...he,N)}\n  ${P.mainStart()}\n    ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let col = (global_idx % (uniforms.N / ${d})) * ${d};\n    var index1 = global_idx / (uniforms.N / ${d});\n    let stride1 = uniforms.M / ${w};\n    let row = (index1 % stride1) * ${w};\n    let batch = index1 / stride1;\n\n    ${r.length===2?"":`let batch_indices = ${O.offsetToIndices("batch")};`}\n    ${Ae(R,We)}\n    let a_offset = ${R.indicesToOffset("a_indices")};\n    ${Ae(L,ee)}\n    let b_offset = ${L.indicesToOffset("b_indices")};\n    var values: array<${N.type.value}, ${w}>;\n    for (var k: u32 = 0u; k < uniforms.K; k = k + ${y}) {\n      ${me()}\n    }\n    for (var i = 0u; i < ${w}u; i++) {\n      var value = values[i];\n      ${W}\n      ${Q}\n      let cur_indices = ${N.type.indices}(batch, row + i, col);\n      let offset = ${N.indicesToOffset("cur_indices")};\n      ${N.setByOffset(`offset / ${d}`,"value")};\n    }\n  }\n  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${y};${w};${i}`,inputDependencies:v?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:x}),getShaderSource:E}},_c=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},ru=e=>{_c(e.inputs);let t=It.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can\'t use matmul on the given tensors");let r=t[t.length-1],o=e.inputs[0].dims[e.inputs[0].dims.length-1];r<8&&o<8?e.compute(Vo(e.inputs,{activation:""},t)):e.compute(Un(e.inputs,{activation:""},t))}});var Vn,No,Sc,nu,Go,xc,Cc,Ho,Uo=Y(()=>{"use strict";Se();Js();Fr();tu();Ft();Wo();Sr();Vn=(e,t,r,o,i,u)=>{let a=e[0],c=e.slice(u?1:2,u?3:4),p=c.length,h=t[0],y=t.slice(2).map((v,S)=>v+(v-1)*(r[S]-1)),_=c.map((v,S)=>v+o[S]+o[S+p]).map((v,S)=>Math.floor((v-y[S]+i[S])/i[S]));return _.splice(0,0,a),_.splice(u?3:1,0,h),_},No=[2,3,1,0],Sc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[1]*t.group;if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},nu=(e,t)=>{let r=e.kernelShape.slice();for(let u=2;u<t[1].dims.length;++u)r[u-2]===0&&(r[u-2]=t[1].dims[u]);let o=e.pads.slice();nr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,o,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:o}),i},Go=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,u=e.group,a=e.kernel_shape,c=e.pads,p=e.strides,h=e.w_is_const();return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},xc=(e,t,r)=>{let o=nu(r,t),i=r.format==="NHWC";if(r.group!==1){if(!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1){let L=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),N=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=N);let K=[t[0],N];t.length===3&&K.push(t[2]),e.compute(eu(K,o,L),{inputs:K})}else e.compute(Mo(t,o));return}let u=t.length===3,a=t[0].dims[i?1:2],c=t[0].dims[i?2:3],p=t[0].dims[i?3:1],h=t[1].dims[2],d=t[1].dims[3],y=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),w=y[i?1:2],_=y[i?2:3],v=y[i?3:1],S=i&&h===a&&d===c&&r.pads[0]===0&&r.pads[1]===0;if(S||h===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let R=y[0],L,N,K,Q=[];if(i){let se=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=se),S){let Ce=a*c*p;L=t[0].reshape([1,R,Ce]),N=se.reshape([1,Ce,v]),K=[1,R,v]}else L=t[0].reshape([R,a*c,p]),N=se.reshape([1,p,v]),K=[R,w*_,v];Q.push(L),Q.push(N)}else L=t[0].reshape([R,p,a*c]),N=t[1].reshape([1,v,p]),K=[R,v,w*_],Q.push(N),Q.push(L);u&&Q.push(t[2]);let he=K[2],W=Q[0].dims[Q[0].dims.length-1];he<8&&W<8?e.compute(Vo(Q,o,y,K,i),{inputs:Q}):e.compute(Un(Q,o,y,K,i),{inputs:Q});return}let A=!0,I=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=I);let x=[t[0],I];u&&x.push(t[2]);let E=i?w*_:v,P=i?v:w*_,O=h*d*p;e.compute(Qs(x,o,y,E,P,O,u,A),{inputs:x})},Cc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],u=[1].concat(t.strides),a=[1].concat(t.dilations),c=[1].concat(t.kernelShape),p=nu({...t,pads:i,strides:u,dilations:a,kernelShape:c},o);e.compute(Mo(o,p,h=>r?[h[0],h[2],h[3]]:[]))},Ho=(e,t)=>{Sc(e.inputs,t),e.inputs[0].dims.length===3?Cc(e,t):xc(e,e.inputs,t)}});var Ac,ou,iu=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();Ac=(e,t=!1,r,o,i=4)=>{let u=I=>{switch(I){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];\n            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];\n            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];\n            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];\n            return ${o}(v0, v1, v2, v3);\n            `;default:throw new Error(`innerElementSize ${I} is not supported.`)}},a=e?`\n      let coord = vec4<i32>(batch, iXR, iXC, xCh);\n      `:`\n      let coord = vec4<i32>(batch, xCh, iXR, iXC);\n      `,c=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,p=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",h=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",d=e?"row":"col",y=e?"col":"row",w=`\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      let outRow = ${d} / outWidth;\n      let outCol = ${d} % outWidth;\n\n      let WRow = ${y} / (uniforms.filter_dims[1] * inChannels);\n      let WCol = ${y} / inChannels % uniforms.filter_dims[1];\n      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(${p}) || fract(xR) > 0.0) {\n        return ${o}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(${h}) || fract(xC) > 0.0) {\n        return ${o}(0.0);\n      }\n      let iXR = i32(xR);\n      let iXC = i32(xC);\n      let xCh = ${y} % inChannels;\n      ${a}\n      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${i}];`,_=e?`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n        ${w}\n      }\n      return ${o}(0.0);`:`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n        ${w}\n      }\n      return ${o}(0.0);`,v=`\n      let col = colIn * ${i};\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);\n      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];\n      if (${e?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {\n        let rowInner = row % inChannels;\n        let coord = vec4<i32>(coordX, coordY, col, rowInner);\n        ${u(i)}\n      }\n      return ${o}(0.0);\n      `,S=St(r,o);return`\n  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?_:v}\n  }\n\n  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?v:_}\n  }\n\n  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${o}) {\n    let col = colIn * ${i};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n      var value = valueInput;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${c}\n      ${Dn(t)}\n      ${S}\n      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${i}] = value;\n    }\n  }`},ou=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&h%4===0&&h%3&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${E}`);let P=v?4:1,O=Math.max(I[0]*P,I[1]),R=v?4:1,L=[t.kernelShape[p?1:2],t.kernelShape[p?2:3]],N=[L[0]+(t.dilations[0]<=1?0:(L[0]-1)*(t.dilations[0]-1)),L[1]+(t.dilations[1]<=1?0:(L[1]-1)*(t.dilations[1]-1))],K=[N[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),N[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],Q=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:t.strides},{type:6,data:t.dilations},{type:6,data:L},{type:6,data:K}];xt(t,Q),Q.push(...Z(e[0].dims,e[1].dims));let he=["rank","rank"];a&&(Q.push(...Z(e[2].dims)),he.push("rank")),Q.push(...Z(r));let W=se=>{let Ce=U("x",e[0].dataType,e[0].dims.length,R),We=U("w",e[1].dataType,e[1].dims.length,1),ee=j("result",e[0].dataType,r.length,R),ae=[Ce,We],Ae="";if(a){let ue=U("bias",e[2].dataType,e[2].dims.length,R);ae.push(ue),Ae+=`\n          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${ue.type.value} {\n            return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n          }`}let me=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:L.length},{name:"pads",type:"i32",length:K.length}];Ct(t,me);let ie=De(e[0].dataType,1);if(ie!=="f16"&&ie!=="f32")throw new Error(`elemType ${ie} is not supported.`);return`\n        ${Mn("uniforms.result_strides")}\n        ${se.registerUniforms(me).declareVariables(...ae,ee)};\n        ${Ae}\n        ${Ac(p,a,t,Ce.type.value,P)}\n        ${v?Hr(x,I,ie,void 0,!p,O):Lr(x,I,ie,void 0,!p,O,!1,void 0,c)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${t.cacheKey};${x};${I};${v}`,inputDependencies:he},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:Q}),getShaderSource:W}}});var Ic,Lo,au=Y(()=>{"use strict";ye();Lt();Se();_e();Ic=(e,t,r,o,i,u=!1,a,c,p=!1)=>{let h=p?1:2,d=p?2:3,y=p?3:1,w=u?2:1,_=`\n  fn setOutputAtIndex(flatIndex : u32, value : ${u?`vec4<${a}>`:a}) {\n    result[flatIndex] = ${u?`vec4<${a}>`:a}(value);\n  }`;o&&(_+=`\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${u?`vec4<${a}>`:a} {\n      return bias[coords.${p?"w":"y"}${u?"/ 4":""}];\n    }`);let v=u?4:1,S=U("W",t[1].dataType,t[1].dims.length,v),A=U("Dy",t[0].dataType,t[0].dims.length,v),I=[A,S];o&&I.push(U("bias",t[2].dataType,[r[y]].length,v));let x=j("result",t[0].dataType,r.length,v),E=`{\n        let batch: u32 = ${i?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];\n        let r = ${i?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];\n        let c = ${i?"global_id.y":"workgroup_id.y"} * ${w};\n        let d1: u32 = ${i?"global_id.x":"workgroup_id.x"} * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<${a}>, ${w}>;\n        for (var i = 0; i < ${w}; i++) {\n          dotProd[i] = vec4<${a}>(0.0);\n        }\n        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {\n          var dyR = (${a}(dyCorner.x) + ${a}(wR)) / ${a}(uniforms.strides.x);\n          let wRPerm = uniforms.filter_dims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {\n            let dyC = (${a}(dyCorner.y) + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let dyC2 = (${a}(dyCorner.y) + 1.0 + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let wCPerm = uniforms.filter_dims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ${A.get("batch","idyR","idyC2","d2")};\n\n                dotProd[1] = dotProd[1] + vec4<${a}>(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = uniforms.Dy_shape[${y}];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC2","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ${w}; i = i + 1) {\n          let value = dotProd[i] + ${o?"bias[c+i]":`vec4<${a}>(0.0)`};\n          ${x.set("batch","r","c + i","d1","value")};\n        }\n      }`,P=`\n          let outputIndices = ${x.offsetToIndices("global_idx")};\n          let batch = ${x.indicesGet("outputIndices",0)};\n          let d1 = ${x.indicesGet("outputIndices",y)};\n          let r = ${x.indicesGet("outputIndices",h)};\n          let c = ${x.indicesGet("outputIndices",d)};\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / uniforms.output_channels_per_group;\n          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = ${a}(0.0);\n          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {\n            if (wR % uniforms.dilations.x != 0) {\n              continue;\n            }\n            let dyR = (${a}(dyRCorner) + ${a}(wR)) / ${a}(uniforms.strides[0]);\n            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;\n            if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[${h}]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {\n              if (wC % uniforms.dilations.y != 0) {\n                continue;\n              }\n              let dyC = (${a}(dyCCorner) + ${a}(wC)) / ${a}(uniforms.strides.y);\n              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;\n              if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[${d}]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n              var inputChannel = groupId * uniforms.input_channels_per_group;\n              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {\n                let xValue = ${p?A.get("batch","idyR","idyC","inputChannel"):A.get("batch","inputChannel","idyR","idyC")};\n                let wValue = ${S.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};\n                dotProd = dotProd + xValue * wValue;\n                inputChannel = inputChannel + 1;\n              }\n            }\n          }\n          let value = dotProd + ${o?"bias[d1]":`${a}(0.0)`};\n          ${x.setByOffset("global_idx","value")};\n        `;return`\n  ${e.registerUniforms(c).declareVariables(...I,x)}\n  ${_}\n\n    ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};\n  ${u?E:P}}`},Lo=(e,t,r)=>{let o=e.length>2,i=t.outputShape,u=M.size(i),a=[Math.ceil(u/64),1,1];Ve("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${a}`);let c=t.format==="NHWC",p=["rank","rank"],h=[t.strides[0],t.strides[1]],d=[t.kernelShape[c?1:2],t.kernelShape[c?2:3]],y=[t.dilations[0],t.dilations[1]],w=[d[0]+(t.dilations[0]<=1?0:(t.kernelShape[c?1:2]-1)*(t.dilations[0]-1)),d[1]+(t.dilations[1]<=1?0:(t.kernelShape[c?2:3]-1)*(t.dilations[1]-1))],_=[w[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),w[1]-1-Math.floor(t.pads[1]+t.pads[3])/2],v=!1,S=t.group,A=e[1].dims,I=A[0]/S,x=A[1],E=[{type:12,data:u},{type:12,data:h},{type:12,data:d},{type:12,data:y},{type:12,data:w},{type:6,data:_},{type:12,data:I},{type:12,data:x},...Z(e[0].dims,e[1].dims)];o&&(E.push(...Z(e[2].dims)),p.push("rank")),E.push(...Z(i));let P=a[1]===1&&a[2]===1,O=R=>{let L=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:h.length},{name:"filter_dims",type:"u32",length:d.length},{name:"dilations",type:"u32",length:d.length},{name:"effective_filter_dims",type:"u32",length:w.length},{name:"pads",type:"i32",length:_.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],N=De(e[0].dataType);return`${Ic(R,e,i,o,P,v,N,L,c)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};`,inputDependencies:p},getRunData:()=>({dispatchGroup:{x:a[0],y:a[1],z:a[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:E}),getShaderSource:O}}});var Tc,Ec,Pc,su,uu,kc,Oc,Rc,Bc,du,lu=Y(()=>{"use strict";iu();au();Ft();Sr();Tc=(e,t,r,o,i,u)=>(e-1)*t+r+(o-1)*i+1-u,Ec=(e,t,r,o,i)=>{let u=Math.floor(e/2);t==="SAME_UPPER"?(r[o]=u,r[i]=e-u):t==="SAME_LOWER"&&(r[o]=e-u,r[i]=u)},Pc=(e,t,r,o,i,u,a,c,p,h)=>{let d=e.length-2,y=h.length===0;if(p.length===0)for(let v=0;v<d;++v)p.push(0);let w=e[0],_=t[c?3:1]*i;for(let v=0,S=e.length-d-(c?1:0);v<d;++v,++S){let A=e[S],I=y?A*a[v]:h[v],x=Tc(A,a[v],u[v],t[S],r[v],I);Ec(x,o,u,v,v+d),y&&h.push(a[v]*(A-1)+p[v]+(t[S]-1)*r[v]+1-u[v]-u[v+d])}h.splice(0,0,w),h.splice(c?3:1,0,_)},su=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((y,w)=>y*w,1)===0){r.length=0;for(let y=2;y<t[1].dims.length;++y)r.push(t[1].dims[y])}let o=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(o?3:1,0,t[1].dims[1]);let i=e.pads.slice(),u=e.outputShape.slice(),a=e.outputPadding.slice(),c=t[0].dims,p=e.dilations.slice();if(p.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;p=new Array(y).fill(1)}let h=e.strides.slice();if(h.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;h=new Array(y).fill(1)}Pc(c,r,p,e.autoPad,e.group,i,h,o,a,u);let d=Object.assign({},e);return Object.assign(d,{kernelShape:r,pads:i,outputPadding:a,outputShape:u,dilations:p,strides:h}),d},uu=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,u=e.group,a=e.kernelShape,c=e.pads,p=e.strides,h=e.wIsConst(),d=e.outputPadding,y=e.outputShape;return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,outputPadding:d,outputShape:y,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},kc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[0];if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let u=e[0].dims.length-2;if(t.dilations.reduce((d,y)=>d+y,0)>0&&t.dilations.length!==u)throw new Error(`dilations should be ${u}D`);if(t.strides.reduce((d,y)=>d+y,0)>0&&t.strides.length!==u)throw new Error(`strides should be ${u}D`);if(t.pads.reduce((d,y)=>d+y,0)>0&&t.pads.length!==u*2)throw new Error(`pads should be ${u*2}D`);if(t.outputPadding.length!==u&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${u}D`);if(t.kernelShape.reduce((d,y)=>d+y,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Oc=[2,3,1,0],Rc=(e,t,r)=>{let o=su(r,t),i=r.format==="NHWC",u=o.outputShape,a=u[i?3:1],c=t[0].dims[i?3:1];if(o.group!==1||a===1&&c===1){e.compute(Lo(t,o));return}let p=u[i?1:2],h=u[i?2:3],d=t[1].dims[2],y=t[1].dims[3],w=i?p*h:a,_=i?a:p*h,v=d*y*c,S=!0,A=e.kernelCustomData.wT??e.compute(yt(t[1],Oc),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=A);let I=[t[0],A],x=t.length===3;x&&(!i&&t[2].dims.length===1?I.push(t[2].reshape([t[2].dims[0],1,1])):I.push(t[2])),e.compute(ou(I,o,u,w,_,v,x,S),{inputs:I})},Bc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let u=t.dilations;(u.length===0||u[0]===0)&&(u=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let c=t.pads;c.length===0&&(c=[0,0]),c=[0,c[0],0,c[1]],a=[1].concat(a),u=[1].concat(u),i=[1].concat(i);let p=su({...t,pads:c,strides:a,dilations:u,kernelShape:i},o);e.compute(Lo(o,p,h=>r?[h[0],h[2],h[3]]:[h[0],h[1],h[3]]))},du=(e,t)=>{kc(e.inputs,t),e.inputs[0].dims.length===3?Bc(e,t):Rc(e,e.inputs,t)}});var Dc,cu,pu,mu=Y(()=>{"use strict";ye();Se();Ze();_e();Dc=(e,t,r,o)=>{let i=M.size(t),u=t.length,a=U("input",e,u),c=j("output",e,u),p=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),h=M.normalizeAxis(p,u),d=y=>{let w=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,_=fe("uniforms.input_shape","uniforms.axis",u),v=o.reverse?w+(o.exclusive?" + 1":""):"0",S=o.reverse?_:w+(o.exclusive?"":" + 1");return`\n                ${y.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,c)}\n                ${y.mainStart()}\n                  ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n                  var inputIndices = ${c.offsetToIndices("global_idx")};\n                  var sum = ${c.type.value}(0);\n                  let first : i32 = ${v};\n                  let last : i32 = ${S};\n                  for (var i : i32 = first; i < last; i++) {\n                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};\n                    sum = sum + ${a.getByIndices("inputIndices")};\n                  }\n                  ${c.setByOffset("global_idx","sum")};\n                }`};return{name:"CumSum",shaderCache:{hint:o.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:h},...Z(t,t)]}),getShaderSource:d}},cu=(e,t)=>{let r=e.inputs[0].dims,o=e.inputs[0].dataType,i=e.inputs[1];e.compute(Dc(o,r,i,t),{inputs:[0]})},pu=e=>{let t=e.exclusive===1,r=e.reverse===1;return ve({exclusive:t,reverse:r})}});var zc,Mc,Uc,fu,hu,gu=Y(()=>{"use strict";ye();Se();Ze();_e();zc=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Mc=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},Uc=(e,t)=>{let r,o,i,u,a,c,p=t.format==="NHWC",h=t.blocksize,d=t.mode==="DCR";p?([r,o,i,u]=e.dims,a=d?[r,o,i,h,h,u/h**2]:[r,o,i,u/h**2,h,h],c=d?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,o,i,u]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=d?[r,h,h,u/h**2,o,i]:[r,u/h**2,h,h,o,i],c=d?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let y=e.reshape(a),w=y.dims.length,_=e.dataType,v=U("a",_,w),S=j("output",_,w),A=I=>`\n  ${I.registerUniform("output_size","u32").declareVariables(v,S)}\n\n  ${Mc(c,w,v,S)}\n\n  ${I.mainStart()}\n    ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${S.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${S.setByOffset("global_idx",v.getByIndices("aIndices"))}\n  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:I=>{let x=p?[r,o*h,i*h,u/h**2]:[r,u/h**2,o*h,i*h],E=M.size(x),P=y.dims,O=M.sortBasedOnPerm(P,c);return{outputs:[{dims:x,dataType:I[0].dataType}],dispatchGroup:{x:Math.ceil(E/64)},programUniforms:[{type:12,data:E},...Z(P,O)]}},getShaderSource:A}},fu=(e,t)=>{zc(e.inputs),e.compute(Uc(e.inputs[0],t))},hu=e=>ve({blocksize:e.blocksize,mode:e.mode,format:e.format})});var Fo,Wn,yu,Vc,Wc,qo,jo,bu,Nc,wu,vu,$u=Y(()=>{"use strict";ye();Se();Ze();_e();Fo="[a-zA-Z]|\\\\.\\\\.\\\\.",Wn="("+Fo+")+",yu="^"+Wn+"$",Vc="("+Wn+",)*"+Wn,Wc="^"+Vc+"$",qo=class{constructor(t=-1){this.symbolToIndices=new Map,this.inputIndex=t}addSymbol(t,r){let o=this.symbolToIndices.get(t);o===void 0?o=[r]:o.push(r),this.symbolToIndices.set(t,o)}},jo=class{constructor(t,r){this.equation=r;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[o,i]=r.includes("->")?r.split("->",2):[r,""];if(!o.match(RegExp(Wc)))throw new Error("Invalid LHS term");if(o.split(",").forEach((c,p)=>{let h=t[p].dims.slice();if(!c.match(RegExp(yu)))throw new Error("Invalid LHS term");let d=this.processTerm(c,!0,h,p);this.lhs.push(d)}),i==="")i+=[...this.symbolToInfo.entries()].filter(([c,p])=>p.count===1||c==="...").map(([c])=>c).join("");else if(!i.match(RegExp(Wn)))throw new Error("Invalid RHS");i.match(RegExp(Fo,"g"))?.forEach(c=>{if(c==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let p=this.symbolToInfo.get(c);if(p===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(p.dimValue)}}),this.rhs=this.processTerm(i,!1,this.outputDims)}addSymbol(t,r,o){let i=this.symbolToInfo.get(t);if(i!==void 0){if(i.dimValue!==r&&i.count!==1)throw new Error("Dimension mismatch");i.count++,i.inputIndices.push(o)}else i={count:1,dimValue:r,inputIndices:[o]};this.symbolToInfo.set(t,i)}processTerm(t,r,o,i=-1){let u=o.length,a=!1,c=[],p=0;if(!t.match(RegExp(yu))&&!r&&t!=="")throw new Error("Invalid LHS term");let h=t.match(RegExp(Fo,"g")),d=new qo(i);return h?.forEach((y,w)=>{if(y==="..."){if(a)throw new Error("Only one ellipsis is allowed per input term");a=!0;let _=u-h.length+1;if(_<0)throw new Error("Ellipsis out of bounds");if(c=o.slice(p,p+_),this.hasEllipsis){if(this.ellipsisDims.length!==c.length||this.ellipsisDims.toString()!==c.toString())throw new Error("Ellipsis dimensions mismatch")}else if(r)this.hasEllipsis=!0,this.ellipsisDims=c;else throw new Error("Ellipsis must be specified in the LHS");for(let v=0;v<c.length;v++){let S=String.fromCharCode("0".charCodeAt(0)+v);d.addSymbol(S,w+v),this.addSymbol(S,o[p++],i)}}else d.addSymbol(y,w+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(y,o[p++],i)}),d}},bu=e=>e+"_max",Nc=(e,t,r,o)=>{let u=e.map(d=>d.length).map((d,y)=>U(`input${y}`,t,d)),a=M.size(o),c=j("output",t,o.length),p=[...r.symbolToInfo.keys()].filter(d=>!r.rhs.symbolToIndices.has(d)),h=d=>{let y=[],w="var prod = 1.0;",_="var sum = 0.0;",v="sum += prod;",S=[],A=[],I=[],x=[],E=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((O,R)=>{if(r.rhs.symbolToIndices.has(R)){let L=r.rhs.symbolToIndices.get(R)?.[0];L!==void 0&&r.lhs.forEach((N,K)=>{if(O.inputIndices.includes(K)){let Q=N.symbolToIndices.get(R);if(Q===void 0)throw new Error("Invalid symbol error");Q.forEach(he=>{y.push(`${u[K].indicesSet(`input${K}Indices`,he,c.indicesGet("outputIndices",L))}`)})}})}else r.lhs.forEach((L,N)=>{if(O.inputIndices.includes(N)){let K=L.symbolToIndices.get(R);if(K===void 0)throw new Error("Invalid symbol error");K.forEach(Q=>{S.push(`${u[N].indicesSet(`input${N}Indices`,Q,`${R}`)}`)}),x.push(`prod *= ${u[N].getByIndices(`input${N}Indices`)};`)}}),A.push(`for(var ${R}: u32 = 0; ${R} < uniforms.${bu(R)}; ${R}++) {`),I.push("}")});let P=E?[...y,`let sum = ${u.map((O,R)=>O.getByIndices(`input${R}Indices`)).join(" * ")};`]:[...y,_,...A,...S,w,...x,v,...I];return`\n            ${d.registerUniforms(p.map(O=>({name:`${bu(O)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...u,c)}\n\n            ${d.mainStart()}\n            ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n            var outputIndices = ${c.offsetToIndices("global_idx")};\n            ${u.map((O,R)=>`var input${R}Indices: ${u[R].type.indices};`).join(`\n`)}\n            ${P.join(`\n`)};\n            ${c.setByOffset("global_idx","sum")};\n          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let d=p.filter(w=>r.symbolToInfo.has(w)).map(w=>({type:12,data:r.symbolToInfo.get(w)?.dimValue||0}));d.push({type:12,data:a});let y=e.map((w,_)=>[...Z(w)]).reduce((w,_)=>w.concat(_),d);return y.push(...Z(o)),{outputs:[{dims:o,dataType:t}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:y}},getShaderSource:h}},wu=(e,t)=>{let r=new jo(e.inputs,t.equation),o=r.outputDims,i=e.inputs.map((u,a)=>u.dims);e.compute(Nc(i,e.inputs[0].dataType,r,o))},vu=e=>{let t=e.equation.replace(/\\s+/g,"");return ve({equation:t})}});var Gc,_u,Hc,Lc,Su,xu=Y(()=>{"use strict";ye();Se();_e();Gc=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;o<r.length&&i<t.length;++o,++i)if(r[o]!==t[i]&&r[o]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},_u=(e,t)=>{let r=e.length-t.length,o=[];for(let i=0;i<r;++i)o.push(e[i]);for(let i=0;i<t.length;++i)o.push(t[i]===1?e[i+r]:t[i]);return o},Hc=(e,t)=>e.length>t.length?_u(e,t):_u(t,e),Lc=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=Hc(t,r),i=e[0].dataType,u=i===9?4:1,a=Math.ceil(M.size(o)/u),c=h=>{let d=U("input",i,t.length,u),y=j("output",i,o.length,u),w;if(i===9){let _=(v,S,A="")=>`\n          let outputIndices${S} = ${y.offsetToIndices(`outputOffset + ${S}u`)};\n          let offset${S} = ${d.broadcastedIndicesToOffset(`outputIndices${S}`,y)};\n          let index${S} = offset${S} / 4u;\n          let component${S} = offset${S} % 4u;\n          ${v}[${S}] = ${A}(${d.getByOffset(`index${S}`)}[component${S}]);\n        `;w=`\n        let outputOffset = global_idx * ${u};\n        var data = vec4<u32>(0);\n        ${_("data",0,"u32")}\n        ${_("data",1,"u32")}\n        ${_("data",2,"u32")}\n        ${_("data",3,"u32")}\n        ${y.setByOffset("global_idx","data")}\n      }`}else w=`\n        let outputIndices = ${y.offsetToIndices("global_idx")};\n        let inputOffset = ${d.broadcastedIndicesToOffset("outputIndices",y)};\n        ${y.setByOffset("global_idx",d.getByOffset("inputOffset"))}\n      }`;return`\n    ${h.registerUniform("vec_size","u32").declareVariables(d,y)}\n    ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n    ${w}`},p=[{type:12,data:a},...Z(t,o)];return{name:"Expand",shaderCache:{hint:`${o.length}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:p})}},Su=e=>{Gc(e.inputs),e.compute(Lc(e.inputs),{inputs:[0]})}});var Fc,Cu,Au=Y(()=>{"use strict";ye();Se();_e();Rn();Fc=e=>{let t=e[0].dataType,r=M.size(e[0].dims),o=M.size(e[1].dims),i=o%4===0,u=a=>{let c=U("x",t,[1],4),p=U("bias",t,[1],4),h=j("y",t,[1],4),d=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],y=_=>`\n      let bias${_}_offset: u32 = (global_idx * 4 + ${_}) % uniforms.bias_size;\n      let bias${_} = ${p.getByOffset(`bias${_}_offset / 4`)}[bias${_}_offset % 4];`,w=i?`\n      let bias = ${p.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${y(0)}${y(1)}${y(2)}${y(3)}\n      let bias = ${c.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(d).declareVariables(c,p,h)}\n\n    ${Bo(et(t))}\n\n    ${a.mainStart(or)}\n      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}\n\n      let x = ${c.getByOffset("global_idx")};\n      ${w}\n      let x_in = x + bias;\n      ${h.setByOffset("global_idx",Do("x_in"))}\n    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:u,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:o}],dispatchGroup:{x:Math.ceil(r/or/4)}})}},Cu=e=>{e.inputs.length<2||M.size(e.inputs[1].dims)===0?Bs(e):e.compute(Fc(e.inputs))}});var qc,jc,Iu,Tu,Eu=Y(()=>{"use strict";ye();Se();Ze();_e();qc=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},jc=(e,t)=>{let r=e[0].dims,o=e[1].dims,i=r.length,u=M.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(u,1,...o);let c=r[u],p=e[0].dataType===9?4:1,h=Math.ceil(M.size(a)/p),d=[{type:12,data:h},{type:6,data:c},{type:12,data:u},...Z(e[0].dims,e[1].dims,a)],y=w=>{let _=U("data",e[0].dataType,e[0].dims.length,p),v=U("inputIndices",e[1].dataType,e[1].dims.length),S=j("output",e[0].dataType,a.length,p),A=x=>{let E=o.length,P=`var indicesIndices${x}  = ${v.type.indices}(0);`;for(let O=0;O<E;O++)P+=`${E>1?`indicesIndices${x}[${O}]`:`indicesIndices${x}`} = ${a.length>1?`outputIndices${x}[uniforms.axis + ${O}]`:`outputIndices${x}`};`;P+=`\n          var idx${x} = ${v.getByIndices(`indicesIndices${x}`)};\n          if (idx${x} < 0) {\n            idx${x} = idx${x} + uniforms.axisDimLimit;\n          }\n          var dataIndices${x} : ${_.type.indices};\n        `;for(let O=0,R=0;O<i;O++)O===u?(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = u32(idx${x});`,R+=E):(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = ${a.length>1?`outputIndices${x}[${R}]`:`outputIndices${x}`};`,R++);return P},I;if(e[0].dataType===9){let x=(E,P,O="")=>`\n          let outputIndices${P} = ${S.offsetToIndices(`outputOffset + ${P}u`)};\n          ${A(P)};\n          let offset${P} = ${_.indicesToOffset(`dataIndices${P}`)};\n          let index${P} = offset${P} / 4u;\n          let component${P} = offset${P} % 4u;\n          ${E}[${P}] = ${O}(${_.getByOffset(`index${P}`)}[component${P}]);\n        `;I=`\n        let outputOffset = global_idx * ${p};\n        var value = vec4<u32>(0);\n        ${x("value",0,"u32")}\n        ${x("value",1,"u32")}\n        ${x("value",2,"u32")}\n        ${x("value",3,"u32")}\n        ${S.setByOffset("global_idx","value")}\n      `}else I=`\n      let outputIndices = ${S.offsetToIndices("global_idx")};\n      ${A("")};\n      let value = ${_.getByIndices("dataIndices")};\n      ${S.setByOffset("global_idx","value")};\n      `;return`\n      ${w.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(_,v,S)}\n      ${w.mainStart()}\n        ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        ${I}\n      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:y}},Iu=e=>ve({axis:e.axis}),Tu=(e,t)=>{let r=e.inputs;qc(r),e.compute(jc(e.inputs,t))}});var Kc,Yc,Pu,ku,Ou=Y(()=>{"use strict";ye();Se();Ze();_e();Kc=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and\n                     indices input tensors be of same rank.`)},Yc=(e,t)=>{let r=e[0].dims,o=e[0].dataType,i=r.length,u=e[1].dims,a=e[1].dataType,c=M.normalizeAxis(t.axis,i),p=r[c],h=u.slice(0),d=M.size(h),y=U("input",o,i),w=U("indicesInput",a,u.length),_=j("output",o,h.length),v=[{type:12,data:d},{type:6,data:p},{type:12,data:c}];return v.push(...Z(r,u,h)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:v}),getShaderSource:I=>`\n      ${I.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(y,w,_)}\n      ${I.mainStart()}\n      ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n      let outputIndices = ${_.offsetToIndices("global_idx")};\n\n      var idx = ${w.getByOffset("global_idx")};\n      if (idx < 0) {\n        idx = idx + uniforms.axisDimLimit;\n      }\n      var inputIndices = ${y.type.indices}(outputIndices);\n      ${y.indicesSet("inputIndices","uniforms.axis","u32(idx)")};\n      let value = ${y.getByIndices("inputIndices")};\n\n      ${_.setByOffset("global_idx","value")};\n  }`}},Pu=e=>ve({axis:e.axis}),ku=(e,t)=>{let r=e.inputs;Kc(r),e.compute(Yc(e.inputs,t))}});var Zc,Xc,Ru,Bu,Du=Y(()=>{"use strict";ye();Se();_e();Zc=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},Xc=(e,t)=>{let r=e[0].dims.slice(),o=e[1].dims.slice(),[i,u,a]=Sn.getShapeOfGemmResult(r,t.transA,o,t.transB,e.length===3?e[2].dims:void 0),c=[i,u];if(!c)throw new Error("Can\'t use gemm on the given tensors");let p=M.size(c),h=[{type:12,data:p},{type:12,data:i},{type:12,data:u},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],d=["type","type"];e.length===3&&(h.push(...Z(e[2].dims)),d.push("rank")),h.push(...Z(c));let y=w=>{let _="";t.transA&&t.transB?_="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?_="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?_="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(_="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let v=t.alpha===1?"":"value *= uniforms.alpha;",S=U("a",e[0].dataType,e[0].dims),A=U("b",e[1].dataType,e[1].dims),I=S.type.value,x=null,E=[S,A];e.length===3&&(x=U("c",e[2].dataType,e[2].dims.length),E.push(x));let P=j("output",e[0].dataType,c.length);E.push(P);let O=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`\n  ${w.registerUniforms(O).declareVariables(...E)}\n\n  ${w.mainStart()}\n    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let m = global_idx / uniforms.N;\n    let n = global_idx % uniforms.N;\n\n    var value = ${I}(0);\n    for (var k: u32 = 0u; k < uniforms.K; k++) {\n      ${_}\n    }\n\n    ${v}\n    ${(()=>x!=null?`let cOffset = ${x.broadcastedIndicesToOffset("vec2(m, n)",P)}; value += ${I}(uniforms.beta) * ${x.getByOffset("cOffset")};`:"")()}\n    output[global_idx] = value;\n  }`};return{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:y}},Ru=e=>{let t=e.transA,r=e.transB,o=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:o,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},Bu=(e,t)=>{Zc(e.inputs),e.compute(Xc(e.inputs,t))}});var Qc,Jc,ep,zu,Mu=Y(()=>{"use strict";ye();Se();_e();Qc=(e,t)=>{let r=e[0].dims,o=r,i=2,u=M.sizeToDimension(r,i),a=M.sizeFromDimension(r,i),c=Me(a),p=a/c,h=[r[0],r[1],p],d=["rank","type","type"],y=[{type:12,data:a},{type:12,data:p}];y.push(...Z(h,h));let w=_=>{let v=U("x",e[0].dataType,h.length,c),S=U("scale",e[1].dataType,e[1].dims),A=U("bias",e[2].dataType,e[2].dims),I=j("output",e[0].dataType,h.length,c),x=[v,S,A,I],E=v.type.value,P=c===1?"f32":`vec${c}<f32>`,O=64,R=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`\n  var<workgroup> meanShared : f32;\n  var<workgroup> squaredNormShared : f32;\n  var<workgroup> workgroupShared : array<${P}, ${O}>;\n  const workgroupSize = ${O}u;\n  ${_.registerUniforms(R).declareVariables(...x)}\n  ${_.mainStart(O)}\n    let norm = global_idx / workgroupSize;\n    let batch = norm / uniforms.x_shape[1];\n    let channel = norm % uniforms.x_shape[1];\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      initial = initial + ${P}(${v.get("batch","channel","h")});\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = ${_t("workgroupShared[0]",c)} / f32(uniforms.normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let deviation =  ${P}(${v.get("batch","channel","h")}) - ${P}(meanShared);\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = ${_t("workgroupShared[0]",c)};\n    }\n    workgroupBarrier();\n\n    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${t.epsilon}));\n    let channelScale = invStdDev * f32(${S.getByOffset("channel")});\n    let channelShift = f32(${A.getByOffset("channel")}) - meanShared * channelScale;\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let value = ${v.get("batch","channel","h")} * ${E}(${P}(channelScale)) + ${E}(${P}(channelShift));\n      ${I.set("batch","channel","h","value")};\n    }\n  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${t.epsilon};${c}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:u},programUniforms:y}),getShaderSource:w}},Jc=(e,t,r,o,i,u,a,c)=>{let p=Me(a),h=64,d=p===1?"vec2f":`mat2x${p}f`,y=p===1?"f32":`vec${p}f`,w=(R,L)=>`${d}(${R}, ${L})`,_=i*a/p,v=Math.ceil(u/h),S=["type"],A=[{type:12,data:v},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(u*a/p)}],I=R=>{let L=U("input",t.dataType,t.dims,p);return`\n  ${R.declareVariables(L)}\n  @group(0) @binding(1) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};\n  @group(0) @binding(2) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart(h)}\n    let currentImageNumber = global_idx / ${h} / uniforms.C;\n    let currentChannelNumber = (global_idx / ${h}) % uniforms.C;\n    let wgOffset = local_id.x * uniforms.wg_size;\n    if (wgOffset >= uniforms.H) {\n        return;\n    }\n    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);\n\n    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = wgOffset; i < wgMax; i++) {\n        let value = ${y}(input[offset + i * uniforms.C]);\n        sum += value;\n        squaredSum += value * value;\n    }\n    output[global_idx] = ${w("sum","squaredSum")};\n  }`},x=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${p}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:[i,a,h,2],dataType:1}],dispatchGroup:{x:i*a/p},programUniforms:A}),getShaderSource:I},{inputs:[t],outputs:[-1]})[0],E=[{type:12,data:_},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(h*a/p)}],P=["type","type","type"],O=R=>{let L=U("scale",r.dataType,r.dims,p),N=U("bias",o.dataType,o.dims,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${d}>;\n  @group(0) @binding(1) var<storage, read> scale : array<${L.type.storage}>;\n  @group(0) @binding(2) var<storage, read> bias : array<${N.type.storage}>;\n  @group(0) @binding(3) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};\n  @group(0) @binding(4) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart()}\n    ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}\n    let currentImageNumber = global_idx / uniforms.C;\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let offset = currentImageNumber * uniforms.image_size;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = 0; i < min(${h}, uniforms.H); i++) {\n        let value = input[offset + i + currentChannelNumber * ${h}];\n        sum += value[0];\n        squaredSum += value[1];\n    }\n    sum = sum / f32(uniforms.H);\n    squaredSum = squaredSum / f32(uniforms.H);\n    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${c}));\n    let channelScale = invStdDev * ${y}(scale[currentChannelNumber]);\n    let channelShift = ${y}(bias[currentChannelNumber]) - sum * channelScale;\n\n    output[global_idx] = ${w("channelScale","channelShift")};\n  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${p};${c}`,inputDependencies:P},getRunData:()=>({outputs:[{dims:[i,a,2],dataType:1}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:E}),getShaderSource:O},{inputs:[x,r,o],outputs:[-1]})[0]},ep=(e,t,r)=>{let o=t[0].dims,i=o,u=o[0],a=o[o.length-1],c=M.sizeFromDimension(o,1)/a,p=Me(a),h=M.size(i)/p,d=[{type:12,data:c},{type:12,data:Math.floor(a/p)}],y=["type","type"],w=Jc(e,t[0],t[1],t[2],u,c,a,r.epsilon),_=v=>{let S=De(t[0].dataType),A=p===1?"vec2f":`mat2x${p}f`,I=p===1?S:`vec${p}<${S}>`,x=U("input",t[0].dataType,t[0].dims,p),E=j("output",t[0].dataType,i,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${x.type.storage}>;\n  @group(0) @binding(1) var<storage, read> scaleInput : array<${A}>;\n  @group(0) @binding(2) var<storage, read_write> output : array<${E.type.storage}>;\n  struct Uniforms {H: u32, C : u32};\n  @group(0) @binding(3) var<uniform> uniforms: Uniforms;\n\n  ${v.mainStart()}\n    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;\n    let scale = scaleInput[scaleOffset];\n    output[global_idx] = fma(input[global_idx], ${I}(scale[0]), ${I}(scale[1]));\n  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${p}`,inputDependencies:y},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:_},{inputs:[t[0],w]})},zu=(e,t)=>{t.format==="NHWC"?ep(e,e.inputs,t):e.compute(Qc(e.inputs,t))}});var tp,rp,Uu,Vu=Y(()=>{"use strict";ye();Se();_e();tp=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},rp=(e,t,r)=>{let o=t.simplified,i=e[0].dims,u=e[1],a=!o&&e[2],c=i,p=M.normalizeAxis(t.axis,i.length),h=M.sizeToDimension(i,p),d=M.sizeFromDimension(i,p),y=M.size(u.dims),w=a?M.size(a.dims):0;if(y!==d||a&&w!==d)throw new Error(`Size of X.shape()[axis:] == ${d}.\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ${y} and bias size of ${w}`);let _=[];for(let O=0;O<i.length;++O)O<p?_.push(i[O]):_.push(1);let v=Me(d),S=["type","type"],A=[{type:12,data:h},{type:1,data:d},{type:12,data:Math.floor(d/v)},{type:1,data:t.epsilon}];a&&S.push("type");let I=r>1,x=r>2,E=O=>{let R=De(e[0].dataType),L=[U("x",e[0].dataType,e[0].dims,v),U("scale",u.dataType,u.dims,v)];a&&L.push(U("bias",a.dataType,a.dims,v)),L.push(j("output",e[0].dataType,c,v)),I&&L.push(j("mean_data_output",1,_)),x&&L.push(j("inv_std_output",1,_));let N=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`\n  ${O.registerUniforms(N).declareVariables(...L)}\n  ${O.mainStart()}\n    ${O.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}\n    let offset = global_idx * uniforms.norm_size_vectorized;\n    var mean_vector = ${$t("f32",v)};\n    var mean_square_vector = ${$t("f32",v)};\n\n    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {\n      let value = ${ir(R,v,"x[h + offset]")};\n      mean_vector += value;\n      mean_square_vector += value * value;\n    }\n    let mean = ${_t("mean_vector",v)} / uniforms.norm_size;\n    let inv_std_dev = inverseSqrt(${_t("mean_square_vector",v)} / uniforms.norm_size ${o?"":"- mean * mean"} + uniforms.epsilon);\n\n    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {\n      let f32input = ${ir(R,v,"x[j + offset]")};\n      let f32scale = ${ir(R,v,"scale[j]")};\n      output[j + offset] = ${L[0].type.value}((f32input ${o?"":"- mean"}) * inv_std_dev * f32scale\n        ${a?`+ ${ir(R,v,"bias[j]")}`:""}\n      );\n    }\n\n    ${I?"mean_data_output[global_idx] = mean":""};\n    ${x?"inv_std_output[global_idx] = inv_std_dev":""};\n  }`},P=[{dims:c,dataType:e[0].dataType}];return I&&P.push({dims:_,dataType:1}),x&&P.push({dims:_,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${v};${r};${o}`,inputDependencies:S},getRunData:()=>({outputs:P,dispatchGroup:{x:Math.ceil(h/64)},programUniforms:A}),getShaderSource:E}},Uu=(e,t)=>{tp(e.inputs),e.compute(rp(e.inputs,t,e.outputCount))}});var np,op,Wu,Nu,Gu=Y(()=>{"use strict";ye();Se();Ze();_e();np=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],o=r.dims.length;if(r.dims[o-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),u=t.blockSize/8*t.bits,a=e[1];if(!M.areEqual(a.dims,[t.n,i,u]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let p=e[2].dims;if(M.size(p)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let d=e[3].dims,y=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(M.size(d)!==y)throw new Error("zeroPoints input size error.")}},op=(e,t,r,o)=>{let i=e[0].dims,u=i.length,a=Math.floor((t.k+t.blockSize-1)/t.blockSize),c=i[u-2],p=t.k,h=t.n,d=i.slice(0,u-2),y=M.size(d),_=t.blockSize/8*t.bits/4,v=e[0].dataType,S=Me(c),A=Me(t.k),I=Me(_),x=tr(v),E=c*a*x,P=Math.floor(o/E),O=a<=r[0]&&P>0,R=!O||P>=4?Me(h):P>=2&&Me(h)>=2?2:1,L=d.concat([c,h]),N=M.size(L)/R/S,K=O?[]:[{type:12,data:N},{type:12,data:t.blockSize}],Q=[y,c,p/A],he=M.convertShape(e[1].dims).slice();he.splice(-1,1,_/I),K.push(...Z(Q)),K.push(...Z(he)),K.push(...Z(e[2].dims)),e.length===4&&K.push(...Z(M.convertShape(e[3].dims)));let W=[y,c,h/R];K.push(...Z(W));let se=Ce=>{let We=Q.length,ee=U("a",e[0].dataType,We,A),ae=U("b",12,he.length,I),Ae=U("scales",e[2].dataType,e[2].dims.length),me=[ee,ae,Ae],ie=e.length===4?U("zero_points",12,e[3].dims.length):void 0;ie&&me.push(ie);let ue=W.length,le=j("output",e[0].dataType,ue,R),qe=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],G=De(e[0].dataType),ne=(()=>{switch(A){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${A}-component is not supported.`)}})(),xe=`\n        for (var word: u32 = 0; word < ${_}; word += ${I}) {\n          ${ae.indicesSet("b_indices","2","word")};\n          let b_data = ${ae.getByIndices("b_indices")};\n          for (var i: u32 = 0; i < ${I}; i++) {\n            let b_value: u32 = ${I===1?"b_data":"b_data[word + i]"};\n            let b_mask: u32 = 0x0F0F0F0Fu;\n            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);\n            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);\n            let b_quantized_values = ${ne}(${Array.from({length:4},(Be,Ge)=>`${G}(b_value_lower[${Ge}]), ${G}(b_value_upper[${Ge}])`).join(", ")});\n            let b_dequantized_values = ${(()=>A===1?`${ne}(${Array.from({length:8},(Be,Ge)=>`(b_quantized_values[${Ge}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${ne}(${Array(8).fill("zero_point").join(",")})) * scale;`)()};\n            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8\n            for (var m: u32 = 0; m < ${O?c:S}u; m++) {\n              ${ee.indicesSet("a_indices",We-2,O?"m":`row * ${S} + m`)};\n              ${ee.indicesSet("a_indices",We-1,"word_offset")};\n              var input_offset = ${ee.indicesToOffset("a_indices")};\n              var a_data: ${ne};\n              for (var j: u32 = 0; j < ${8/A}; j++) {\n                a_data[j] = ${ee.getByOffset("input_offset")};\n                input_offset++;\n              }\n              ${O?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${R>1?"[c]":""} += ${Array.from({length:8/A},(Be,Ge)=>`${A===1?`a_data[${Ge}] * b_dequantized_values[${Ge}]`:`dot(a_data[${Ge}], b_dequantized_values[${Ge}])`}`).join(" + ")};\n            }\n            word_offset += ${8/A};\n          }\n        }`,Ke=ie?`\n          zero_point_offset += 4;\n          if (zero_point_offset == 32) {\n            zero_point_offset = 0;\n            zero_point_index++;\n            zero_point_word = ${ie.getByOffset("zero_point_index")};\n          }`:"";return O?`\n        var<workgroup> workgroup_shared: array<${le.type.value}, ${c*a}>;\n        ${Ce.declareVariables(...me,le)}\n        ${Ce.mainStart([a,1,1])}\n          var a_indices: ${ee.type.indices};\n          var block = local_id.x;\n          var col = workgroup_id.y;\n          var batch = workgroup_id.z;\n          ${ee.indicesSet("a_indices","0","batch")};\n          // Two zero points are packed into one byte when uniforms.bits is 4.\n          for (var c: u32 = 0; c < ${R}; c++) {\n            let col_times_components_plus_c = col * ${R} + c;\n              ${ie?`\n            var zero_point_bytes_per_col: u32 = (${a} + 1) / 2;\n            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);\n            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;\n            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;\n            var zero_point_nibble_offset: u32 = block & 0x1u;\n            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);\n            var zero_point_word: u32 = ${ie.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}\n            var b_indices: ${ae.type.indices};\n            ${ae.indicesSet("b_indices","0","col_times_components_plus_c")};\n            // The scale and zero points are computed per block.\n            var scales_index = col_times_components_plus_c * ${a} + block;\n            let scale = ${Ae.getByOffset("scales_index")};\n            // The default zero point is 8 for unsigned 4-bit quantization.\n            let zero_point = ${G}(${ie?"(zero_point_word) & 0xFu":8});\n            ${ae.indicesSet("b_indices","1","block")};\n            var word_offset: u32 = block * ${t.blockSize/A};\n            var workgroup_shared_offset: u32 = block * ${c};\n            ${xe}\n          }\n          workgroupBarrier();\n          if (local_id.x == 0u) {\n            var output_indices: ${le.type.indices};\n            ${le.indicesSet("output_indices","0","batch")};\n            ${le.indicesSet("output_indices",ue-1,"col")};\n            ${le.indicesSet("output_indices",ue-2,"0")};\n            var output_offset = ${le.indicesToOffset("output_indices")};\n            for (var m: u32 = 0u; m < ${c}u; m++) {\n              var output_value: ${le.type.value} = ${le.type.value}(0);\n              var workgroup_shared_offset: u32 = m;\n              for (var b: u32 = 0u; b < ${a}u; b++) {\n                output_value += workgroup_shared[workgroup_shared_offset];\n                workgroup_shared_offset += ${c};\n              }\n              ${le.setByOffset("output_offset","output_value")};\n              output_offset += ${h/R};\n            }\n          }\n        }`:`\n        ${Ce.registerUniforms(qe).declareVariables(...me,le)}\n        ${Ce.mainStart()}\n          ${Ce.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var output_values: array<${le.type.value}, ${S}>;\n          var output_indices = ${le.offsetToIndices("global_idx")};\n          var col = ${le.indicesGet("output_indices",ue-1)};\n          var row = ${le.indicesGet("output_indices",ue-2)};\n          var a_indices: ${ee.type.indices} = output_indices;\n          // Two zero points are packed into one byte because uniforms.bits <= 4.\n          // zero_point_offset is either 0 or 4. It is bit offset within one byte.\n          // TODO support zero_point_offset for bits > 4\n          ${ie?`\n          var zero_point_abs_offset = col * ${R} * ((${a} + 1) / 2);\n          var zero_point_index: u32 = zero_point_abs_offset / 4;\n          var zero_point_word: u32 = ${ie.getByOffset("zero_point_index")};\n          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}\n          var scale_index = col * ${a*R};\n          var b_indices: ${ae.type.indices};\n          for (var c: u32 = 0; c < ${R}; c++) {\n            ${ae.indicesSet("b_indices","0",`col * ${R} + c`)};\n            var block_offset: u32 = 0;\n            for (var block: u32 = 0; block < ${a}; block++) {\n              // The scale and zero points are computed per block.\n              let scale = ${Ae.getByOffset("scale_index")};\n              // The default zero point is 8 for unsigned 4-bit quantization.\n              let zero_point = ${G}(${ie?"extractBits(zero_point_word, zero_point_offset, 4)":8});\n              ${ae.indicesSet("b_indices","1","block")};\n              var word_offset: u32 = block_offset;\n              ${xe}\n              scale_index++;\n              ${Ke}\n              block_offset += uniforms.block_size / ${A};\n            }\n            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.\n            ${ie?`if (zero_point_offset % 8 > 0) {\n                ${Ke}\n              }`:""}\n            }\n            for (var k: u32 = 0u; k < ${S}u; k++) {\n              ${le.indicesSet("output_indices",ue-2,`${S} * row + k`)};\n              ${le.setByIndices("output_indices","output_values[k]")}\n            }\n        }`};return{name:O?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${t.cacheKey};${c};${v};${e.length}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:L,dataType:v}],name:O?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:O?{x:1,y:Math.ceil(h/R),z:y}:{x:Math.ceil(N/64)},programUniforms:K}),getShaderSource:se}},Wu=(e,t)=>{np(e.inputs,t);let r=e.getMaxComputeWorkgroupSizes(),o=e.getMaxComputeWorkgroupStoragesize();e.compute(op(e.inputs,t,r,o))},Nu=e=>ve(e)});var it,ip,Lu,Hu,ap,Ko,Fu,qu=Y(()=>{"use strict";ye();Se();Ze();_n();Ro();_e();Sr();it=(e,t)=>e.length>t&&e[t].dims.length>0&&M.size(e[t].dims)>0?e[t]:void 0,ip=(e,t)=>{let r=e[0],o=it(e,1),i=it(e,2),u=it(e,3),a=it(e,4),c=it(e,5),p=it(e,6),h=it(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let d=!1,y=r.dims[0],w=r.dims[1],_=r.dims.length===3?d?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],v=w,S=0,A=0,I=Math.floor(_/t.numHeads);if(p&&h){if(p.dims.length!==4)throw new Error(\'Input "past_key" is expected to have 4 dimensions\');if(p.dims[0]!==y||p.dims[1]!==t.numHeads||p.dims[3]!==I)throw new Error(\'Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(h.dims[0]!==y||h.dims[1]!==t.numHeads||h.dims[3]!==I)throw new Error(\'Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(p.dims[2]!==h.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)\');if(h.dims.length!==4)throw new Error(\'Input "past_value" is expected to have 4 dimensions\');S=p.dims[2],A=p.dims[2]}else if(p||h)throw new Error(\'Input "past_key" and "past_value" shall be both present or both absent\');let x;if(o){if(r.dims.length!==3)throw new Error(\'Input "query" is expected to have 3 dimensions when key is given\');if(o.dims.length<3||o.dims.length>5)throw new Error(\'Input "key" is expected to have 3, 4, or 5 dimensions\');if(r.dims[0]!==o.dims[0])throw new Error(\'Input "query" and "key" shall have same dim 0 (batch size)\');if(o.dims.length===3){if(o.dims[2]!==r.dims[2])throw new Error(\'Input "query" and "key" shall have same dim 2 (hidden_size)\');x=2,v=o.dims[1]}else if(o.dims.length===5){if(o.dims[2]!==t.numHeads||o.dims[3]!==2||o.dims[4]!==I)throw new Error(\'Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv\');if(i)throw new Error(\'Expect "value" be none when "key" has packed kv format.\');x=5,v=o.dims[1]}else{if(o.dims[1]!==t.numHeads||o.dims[3]!==I)throw new Error(\'Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key\');x=0,v=o.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error(\'Input "query" is expected to have 3 or 5 dimensions when key is empty\');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error(\'Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv\');x=3}if(u){if(u.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimension\');if(i&&r.dims.length===5&&r.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let E=0;if(a){E=8;let N=a.dims;throw N.length===1?N[0]===y?E=1:N[0]===3*y+2&&(E=3):N.length===2&&N[0]===y&&N[1]===v&&(E=5),E===8?new Error(\'Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)\'):new Error("Mask not supported")}let P=!1,O=_;if(i){if(i.dims.length!==3&&i.dims.length!==4)throw new Error(\'Input "value" is expected to have 3 or 4 dimensions\');if(r.dims[0]!==i.dims[0])throw new Error(\'Input "query" and "value" shall have same dim 0 (batch_size)\');if(i.dims.length===3){if(v!==i.dims[1])throw new Error(\'Input "key" and "value" shall have the same dim 1 (kv_sequence_length)\');O=i.dims[2]}else{if(v!==i.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)\');O=i.dims[1]*i.dims[3],P=!0}}let R=S+v,L=!1;if(a)throw new Error("Key padding mask is not supported");if(c){if(c.dims.length!==4)throw new Error(\'Input "relative_position_bias" is expected to have 4 dimensions\');if(c.dims[0]!==y&&c.dims[0]!==1||c.dims[1]!==t.numHeads||c.dims[2]!==w||c.dims[3]!==R)throw new Error(\'Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)\')}return{batchSize:y,sequenceLength:w,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:R,maxSequenceLength:A,inputHiddenSize:0,hiddenSize:_,vHiddenSize:O,headSize:I,vHeadSize:Math.floor(O/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:E,scale:t.scale,broadcastResPosBias:L,passPastInKv:P,qkvFormat:x}},Lu=e=>ve({...e}),Hu=ve({perm:[0,2,1,3]}),ap=(e,t,r,o,i,u,a)=>{let c=[o,i,u],p=M.size(c),h=[{type:12,data:p},{type:12,data:a},{type:12,data:u}],d=y=>{let w=j("qkv_with_bias",t.dataType,c),_=U("qkv",t.dataType,c),v=U("bias",r.dataType,c),S=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`\n  ${y.registerUniforms(S).declareVariables(_,v,w)}\n  ${y.mainStart()}\n    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;\n\n    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];\n  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:d},{inputs:[t,r],outputs:[-1]})[0]},Ko=(e,t,r,o,i,u,a,c)=>{let p=u;if(a){if(o===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return p=ap(e,u,a,t,o,r*i,c),p=p.reshape([t,o,r,i]),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]}else return u.dims.length===3&&(p=u.reshape([t,o,r,i])),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]},Fu=(e,t)=>{let r=ip(e.inputs,t),o=e.inputs[0],i=it(e.inputs,1),u=it(e.inputs,2),a=it(e.inputs,3),c=it(e.inputs,4),p=it(e.inputs,5),h=it(e.inputs,6),d=it(e.inputs,7);if(o.dims.length===5)throw new Error("Packed QKV is not implemented");if(i?.dims.length===5)throw new Error("Packed KV is not implemented");let y=i&&u&&i.dims.length===4&&u.dims.length===4,w=Ko(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,o,a,0);if(y)return Pn(e,w,i,u,c,void 0,h,d,p,r,t);if(!i||!u)throw new Error("key and value must be provided");let _=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),v=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,u,a,2*r.hiddenSize);Pn(e,w,_,v,c,void 0,h,d,p,r,t)}});var sp,up,dp,lp,cp,pp,mp,fp,ju,Ku=Y(()=>{"use strict";ye();Se();_e();sp=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},up=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n            k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n            if (k < 0) {\n              break;\n            }\n            if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n              break;\n            }\n            offset += k * i32(${fe("uniforms.x_strides",i,t)});\n        `;return`\n          value = ${e.type.value}(uniforms.constant_value);\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ${o}\n            value = x[offset];\n          }\n      `},dp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",i,t)}) - 1);\n                  k = k % _2n_1;\n                  if(k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},lp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k = i32(${fe("uniforms.x_shape",i,t)}) - 1;\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},cp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0)  {\n                  k += i32(${fe("uniforms.x_shape",i,t)}]);\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k -= i32(${fe("uniforms.x_shape",i,t)});\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},pp=(e,t,r)=>{switch(r.mode){case 0:return up(e,t,r.pads.length);case 1:return dp(e,t,r.pads.length);case 2:return lp(e,t,r.pads.length);case 3:return cp(e,t,r.pads.length);default:throw new Error("Invalid mode")}},mp=(e,t)=>{let r=M.padShape(e[0].dims.slice(),t.pads),o=e[0].dims,i=M.size(r),u=[{type:12,data:i},{type:6,data:t.pads}];t.mode===0&&u.push({type:e[0].dataType,data:t.value}),u.push(...Z(e[0].dims,r));let a=["rank"],c=p=>{let h=j("output",e[0].dataType,r.length),d=U("x",e[0].dataType,o.length),y=d.type.value,w=pp(h,o.length,t),_=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&_.push({name:"constant_value",type:y}),`\n            ${p.registerUniforms(_).declareVariables(d,h)}\n            ${p.mainStart()}\n            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n            let indices = ${h.offsetToIndices("global_idx")};\n\n            var value = ${y}(0);\n            ${w}\n            output[global_idx] = value;\n        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(r)/64)},programUniforms:u}),getShaderSource:c}},fp=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),o=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,i=e[0].dims.length,u=new Int32Array(2*i).fill(0);if(e.length>=4){let c=e[3].getBigInt64Array();for(let p=0;p<c.length;p++)u[Number(c[p])]=Number(r[p]),u[Number(c[p])+i]=Number(r[p+c.length])}else r.forEach((c,p)=>u[Number(p)]=Number(c));let a=[];return u.forEach(c=>a.push(c)),{mode:t.mode,value:o,pads:a}}else return t},ju=(e,t)=>{sp(e.inputs);let r=fp(e.inputs,t);e.compute(mp(e.inputs,r),{inputs:[0]})}});var Nn,Yu,Zu,Xu,Qu,hp,gp,Ju,ed,td,rd,nd,od,id,ad,sd,ud,dd,ld,cd=Y(()=>{"use strict";$r();ye();Se();_e();Nn=e=>{if(vr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Yu=(e,t,r)=>{let o=t.format==="NHWC",i=e.dims.slice();o&&i.splice(1,0,i.pop());let u=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),c=t.strides.slice(),p=u?t.dilations.slice():[],h=t.pads.slice();nr.adjustPoolAttributes(r,i,a,c,p,h);let d=nr.computePoolOutputShape(r,i,c,p,a,h,t.autoPad),y=Object.assign({},t);u?Object.assign(y,{kernelShape:a,strides:c,pads:h,dilations:p,cacheKey:t.cacheKey}):Object.assign(y,{kernelShape:a,strides:c,pads:h,cacheKey:t.cacheKey});let w=d.slice();return w.push(w.splice(1,1)[0]),[y,o?w:d]},Zu=(e,t)=>{let r=t.format==="NHWC",o=M.size(e),i=M.size(t.kernelShape),u=[{type:12,data:o},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let c=t.kernelShape[t.kernelShape.length-1],p=t.strides[t.strides.length-1],h=t.pads[t.pads.length/2-1],d=t.pads[t.pads.length-1],y=!!(h+d);u.push({type:12,data:c},{type:12,data:p},{type:12,data:h},{type:12,data:d}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let w=!1;if(t.kernelShape.length===2){let _=t.kernelShape[t.kernelShape.length-2],v=t.strides[t.strides.length-2],S=t.pads[t.pads.length/2-2],A=t.pads[t.pads.length-2];w=!!(S+A),u.push({type:12,data:_},{type:12,data:v},{type:12,data:S},{type:12,data:A}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[u,a,!0,y,w]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let c=M.computeStrides(t.kernelShape);u.push({type:12,data:c},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:c.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let p=t.pads.reduce((h,d)=>h+d);return[u,a,!!p,!1,!1]}},Xu=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w=i.format==="NHWC",_=t.type.value,v=j("output",t.type.tensor,o);if(i.kernelShape.length<=2){let S="",A="",I="",x=r-(w?2:1);if(d?S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  if (xIndices[${x}] < 0 || xIndices[${x}]\n                      >= uniforms.x_shape[${x}]) {\n                    pad++;\n                    continue;\n                  }\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`:S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`,i.kernelShape.length===2){let P=r-(w?3:2);y?A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                  if (xIndices[${P}] < 0 || xIndices[${P}] >= uniforms.x_shape[${P}]) {\n                    pad += i32(uniforms.kw);\n                    continue;\n                  }\n              `:A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                `,I=`\n              }\n            `}return`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var value = ${_}(${c});\n              var pad = 0;\n              ${A}\n              ${S}\n              ${I}\n              ${a}\n\n              output[global_idx] = value;\n            }`}else{if(w)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let S=i.kernelShape.length,A=i.pads.length,I="";return h?I=`\n                if (xIndices[j] >= uniforms.x_shape[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[${t.indicesToOffset("xIndices")}];\n                ${u}\n              }`:I=`\n              }\n              let x_val = x[${t.indicesToOffset("xIndices")}];\n              ${u}\n            `,`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var offsets: array<u32, ${S}>;\n\n              var value = ${_}(${c});\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {\n                var offset = i;\n                for (var j = 0u; j < ${S-1}u; j++) {\n                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",S)};\n                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",S)};\n                }\n                offsets[${S-1}] = offset;\n\n                isPad = false;\n                for (var j = ${r-S}u; j < ${r}u; j++) {\n                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${r-S}u`,S)}\n                    + offsets[j - ${r-S}u] - ${fe("uniforms.pads","j - 2u",A)};\n                  ${I}\n              }\n              ${a}\n\n              output[global_idx] = value;\n            }`}},Qu=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,hp=e=>`${Qu(e)};${e.countIncludePad}`,gp=e=>`${Qu(e)};${e.storageOrder};${e.dilations}`,Ju=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),ed=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=U("x",t.dataType,t.dims.length),c=a.type.value,p="value += x_val;",h="";i.countIncludePad?h+=`value /= ${c}(uniforms.kernelSize);`:h+=`value /= ${c}(i32(uniforms.kernelSize) - pad);`;let[d,y,w,_,v]=Zu(u,i);d.push(...Z(t.dims,u));let S=["rank"];return{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:A=>Xu(A,a,t.dims.length,u.length,i,p,h,0,y,w,_,v)}},td=e=>{let t=e.count_include_pad!==0,r=Ju(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let o={countIncludePad:t,...r,cacheKey:""};return{...o,cacheKey:hp(o)}},rd=(e,t)=>{Nn(e.inputs),e.compute(ed("AveragePool",e.inputs[0],!1,t))},nd={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},od=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},id=(e,t)=>{Nn(e.inputs),e.compute(ed("GlobalAveragePool",e.inputs[0],!0,t))},ad=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=`\n      value = max(x_val, value);\n    `,c="",p=U("x",t.dataType,t.dims.length),h=["rank"],[d,y,w,_,v]=Zu(u,i);return d.push(...Z(t.dims,u)),{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:S=>Xu(S,p,t.dims.length,u.length,i,a,c,t.dataType===10?-65504:-1e5,y,w,_,v)}},sd=(e,t)=>{Nn(e.inputs),e.compute(ad("MaxPool",e.inputs[0],!1,t))},ud=e=>{let t=e.storage_order,r=e.dilations,o=Ju(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...o,cacheKey:""};return{...i,cacheKey:gp(i)}},dd=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},ld=(e,t)=>{Nn(e.inputs),e.compute(ad("GlobalMaxPool",e.inputs[0],!0,t))}});var bp,wp,pd,md=Y(()=>{"use strict";$r();ye();_e();bp=(e,t,r)=>{let o=e===t,i=e<t&&r<0,u=e>t&&r>0;if(o||i||u)throw new Error("Range these inputs\' contents are invalid.")},wp=(e,t,r,o)=>{let i=Math.abs(Math.ceil((t-e)/r)),u=[i],a=i,c=[{type:12,data:a},{type:o,data:e},{type:o,data:r},...Z(u)],p=h=>{let d=j("output",o,u.length),y=d.type.value,w=[{name:"outputSize",type:"u32"},{name:"start",type:y},{name:"delta",type:y}];return`\n        ${h.registerUniforms(w).declareVariables(d)}\n        ${h.mainStart()}\n        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        output[global_idx] = uniforms.start + ${y}(global_idx) * uniforms.delta;\n      }`};return{name:"Range",shaderCache:{hint:`${o}`},getShaderSource:p,getRunData:()=>({outputs:[{dims:u,dataType:o}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:c})}},pd=e=>{let t=0,r=0,o=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],o=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],o=e.inputs[2].getFloat32Array()[0]),vr.webgpu.validateInputContent&&bp(t,r,o),e.compute(wp(t,r,o,e.inputs[0].dataType),{inputs:[]})}});var vp,$p,_p,Sp,xp,Cp,Ap,Ip,Tp,Ep,Pp,fd,kp,Op,Rp,Bp,Dp,hd,gd,yd=Y(()=>{"use strict";ye();Se();Ze();_e();vp=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and\n            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},$p=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let o=new Array(r).fill(1);return t.forEach((i,u)=>o[i]=e[u]),o},_p=(e,t,r,o,i,u)=>{let[a,c,p]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],h=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(d=>u.push(d));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(c>0&&e.length>c&&e[c].dims.length>0){if(e[c].getFloat32Array().forEach(d=>o.push(d)),o.length!==0&&o.length!==h&&r>=18&&o.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");vp(o,t),t.axes.length>0&&$p(o,t.axes,h).forEach((d,y)=>o[y]=d)}if(p>0&&e.length>p&&(e[p].getBigInt64Array().forEach(d=>i.push(Number(d))),i.length!==h||r>=18&&i.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(o.length!==t.axes.length)throw new Error(\'Resize requires "scales" input size to be of axes rank when axes attributes is specified\');if(i.length!==t.axes.length)throw new Error(\'Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified\')}if(typeof o<"u"&&typeof i<"u"&&o.length>0&&i.length>h)throw new Error("Resize requires only of scales or sizes to be specified")},Sp=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,\n     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`return ${t}(xResized) / ${t}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {\n                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;\n                  } else {\n                    return 0.0;\n                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {\n                    return 0.0;\n                  } else {\n                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating\n                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an\n                    // offset-by-one error later in floor().\n                    let whole = ${t}(xResized * (lengthOriginal - 1) / (lengthResized - 1));\n                    let fract =\n                        ${t}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${t}(lengthResized - 1);\n                    return whole + fract;\n                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {\n                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +\n                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /\n                        ${t}(lengthResized - 1);\n                  } else {\n                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);\n                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);\n                  const adjustment = ${t}(lengthResized) / outputWidth;\n                  const center = ${t}(lengthOriginal) / 2;\n                  const offset = center * (1 - adjustment);\n                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",xp=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",Cp=(e,t,r)=>{let o=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?o:e.slice();return t.length>0?(t.forEach((u,a)=>{o[u]=i[a],o[a+r]=i[t.length+a]}),o):i},Ap=(e,t,r,o)=>{let i=[];if(r.length>0)if(o.length>0){if(e.forEach(u=>i.push(u)),Math.max(...o)>e.length)throw new Error("axes is out of bound");o.forEach((u,a)=>i[u]=r[a])}else r.forEach(u=>i.push(u));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((u,a)=>Math.round(u*t[a]))}return i},Ip=(e,t,r)=>{let o=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(u=>t[u]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(u=>t[u]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(u=>t[u]=o),r.axes.forEach(u=>i[u]=Math.round(e[u]*t[u]))):(t.fill(o,0,t.length),i.forEach((u,a)=>i[a]=Math.round(u*t[a]))),i},Tp=(e,t,r,o,i)=>`\n    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {\n      var original_indices: array<${e.type.value}, ${r.length}>;\n      for (var i:u32 = 0; i < ${r.length}; i++) {\n        var output_index = ${e.indicesGet("output_indices","i")};\n        var scale = ${fe("uniforms.scales","i",o)};\n        var roi_low = ${fe("uniforms.roi","i",i)};\n        var roi_hi = ${fe("uniforms.roi",`i + ${t.length}`,i)};\n        if (scale == 1.0) {\n          original_indices[i] = ${e.type.value}(output_index);\n        } else {\n          var input_shape_i = ${fe("uniforms.input_shape","i",t.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",r.length)};\n          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                           input_shape_i, roi_low, roi_hi);\n        }\n      }\n      return original_indices;\n    }`,Ep=(e,t,r,o,i,u,a)=>`\n    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n      var input_indices: ${e.type.indices};\n      for (var i:u32 = 0; i < ${o.length}; i++) {\n        var output_index = ${t.indicesGet("output_indices","i")};\n        var input_index: u32;\n        var scale = ${fe("uniforms.scales","i",i)};\n        if (scale == 1.0) {\n          input_index = output_index;\n        } else {\n          var roi_low = ${fe("uniforms.roi","i",u)};\n          var roi_hi = ${fe("uniforms.roi",`i + ${r.length}`,u)};\n          var input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",o.length)};\n          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                        input_shape_i, roi_low, roi_hi);\n          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {\n            if (original_idx < 0) {\n              input_index = 0;\n            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {\n              input_index = input_shape_i - 1;\n            } else {\n              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));\n            }\n          } else {\n            input_index = u32(original_idx);\n          }\n        }\n        ${e.indicesSet("input_indices","i"," input_index")}\n      }\n      return input_indices;\n    }`,Pp=(e,t)=>`\n    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {\n      for (var i:u32 = 0; i < ${t.length}; i++) {\n        var input_index = ${e.indicesGet("input_indices","i")};\n        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",t.length)}) {\n          return false;\n        }\n      }\n      return true;\n    }`,fd=(e,t,r,o)=>e.rank>o?`\n    ${e.indicesSet("input_indices",t,"channel")};\n    ${e.indicesSet("input_indices",r,"batch")};\n`:"",kp=(e,t,r,o,i)=>{let[a,c,p,h]=r.length===2?[-1,0,1,-1]:[0,2,3,1],d=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${d} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(row, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(col, ${r[p]} - 1))`)};\n      ${fd(e,h,a,2)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var row:${d} = originalIndices[${c}];\n      var col:${d} = originalIndices[${p}];\n      ${o?`if (row < 0 || row > (${r[c]} - 1) || col < 0 || col > (${r[p]} - 1)) {\n        return ${i};\n      }`:""};\n      row = max(0, min(row, ${r[c]} - 1));\n      col = max(0, min(col, ${r[p]} - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = ${r.length>2?`u32(originalIndices[${h}])`:"0"};\n      var batch: u32 =  ${r.length>2?`u32(originalIndices[${a}])`:"0"};\n      var x11: ${d} = getInputValue(batch, channel, row1, col1);\n      var x12: ${d} = getInputValue(batch, channel, row1, col2);\n      var x21: ${d} = getInputValue(batch, channel, row2, col1);\n      var x22: ${d} = getInputValue(batch, channel, row2, col2);\n      var dx1: ${d} = abs(row - ${d}(row1));\n      var dx2: ${d} = abs(${d}(row2) - row);\n      var dy1: ${d} = abs(col - ${d}(col1));\n      var dy2: ${d} = abs(${d}(col2) - col);\n      if (row1 == row2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (col1 == col2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }`},Op=(e,t,r,o,i,u,a,c,p,h)=>{let d=r.length===2,y=!0,[w,_]=d?[0,1]:y?[2,3]:[1,2],v=e.type.value,S=A=>{let I=A===w?"row":"col";return`\n      fn ${I}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${v} {\n        var output_index = ${t.indicesGet("output_indices",A)};\n        var originalIdx: ${v} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[A]},\n        ${o[A]}, ${r[A]}, ${u[A]}, ${u[A]} + ${r.length});\n        var fractOriginalIdx: ${v} = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (${c} && (originalIdx < 0 || originalIdx > (${r[A]} - 1))) {\n          return ${p};\n        }\n        var data: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ${I}: ${v} = originalIdx + ${v}(i);\n          if (${I} < 0 || ${I} >= ${r[A]}) {\n            ${(()=>h?`coefs[i + 1] = 0.0;\n                        continue;`:c?`return ${p};`:`${I} = max(0, min(${I}, ${r[A]} - 1));`)()};\n          }\n        var input_indices_copy: ${e.type.indices} = input_indices;\n          ${e.indicesSet("input_indices_copy",A,`u32(${I})`)};\n          data[i + 1] = ${A===w?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};\n        }\n        return cubicInterpolation1D(data, coefs);\n      }`};return`\n    ${S(w)};\n    ${S(_)};\n  fn getCubicInterpolationCoefs(s: ${v}) -> array<${v}, 4> {\n    var absS = abs(s);\n    var coeffs: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: ${v} = 1.0 - absS;\n    var twoMinusAbsS: ${v} = 2.0 - absS;\n    var onePlusAbsS: ${v} = 1.0 + absS;\n    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};\n    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;\n    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<${v}, 4>, coefs: array<${v}, 4>) -> ${v} {\n    var coefsSum: ${v} = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${v} {\n    var input_indices: ${e.type.indices} = output_indices;\n    return colCubicInterpolation(input_indices, output_indices);\n  }\n    `},Rp=(e,t,r,o,i)=>{let[a,c,p,h,d]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],y=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${y} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(depth, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(height, ${r[p]} - 1))`)};\n      ${e.indicesSet("input_indices",h,`max(0, min(width, ${r[h]} - 1))`)};\n      ${fd(e,d,a,3)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${y} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var depth:${y} = originalIndices[${c}];\n      var height:${y} = originalIndices[${p}];\n      var width:${y} = originalIndices[${h}];\n      ${o?`if (depth < 0 || depth > (${r[c]} - 1) || height < 0 || height > (${r[p]} - 1) || width < 0 || (width > ${r[h]} - 1)) {\n      return ${i};\n        }`:""};\n\n    depth = max(0, min(depth, ${r[c]} - 1));\n      height = max(0, min(height, ${r[p]} - 1));\n      width = max(0, min(width, ${r[h]} - 1));\n      var depth1: u32 = u32(depth);\n      var height1: u32 = u32(height);\n      var width1: u32 = u32(width);\n      var depth2: u32 = u32(depth + 1);\n      var height2: u32 = u32(height + 1);\n      var width2: u32 = u32(width + 1);\n      var channel: u32 = ${r.length>3?`u32(originalIndices[${d}])`:"0"};\n      var batch: u32 =  ${r.length>3?`u32(originalIndices[${a}])`:"0"};\n\n      var x111: ${y} = getInputValue(batch, channel, depth1, height1, width1);\n      var x112: ${y} = getInputValue(batch, channel, depth1, height1, width2);\n      var x121: ${y} = getInputValue(batch, channel, depth1, height2, width1);\n      var x122: ${y} = getInputValue(batch, channel, depth1, height2, width2);\n      var x211: ${y} = getInputValue(batch, channel, depth2, height1, width1);\n      var x212: ${y} = getInputValue(batch, channel, depth2, height1, width2);\n      var x221: ${y} = getInputValue(batch, channel, depth2, height2, width1);\n      var x222: ${y} = getInputValue(batch, channel, depth2, height2, width2);\n      var dx1: ${y} = abs(depth - ${y}(depth1));\n      var dx2: ${y} = abs(${y}(depth2) - depth);\n      var dy1: ${y} = abs(height - ${y}(height1));\n      var dy2: ${y} = abs(${y}(height2) - height);\n      var dz1: ${y} = abs(width - ${y}(width1));\n      var dz2: ${y} = abs(${y}(width2) - width);\n      if (depth1 == depth2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (height1 == height2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      if (width1 == width2) {\n        dz1 = 0.5;\n        dz2 = 0.5;\n      }\n      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +\n              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);\n    }`},Bp=(e,t,r,o,i,u)=>{let a=e.dims,c=Cp(u,t.axes,a.length),p=Ap(a,o,i,t.axes),h=o.slice();o.length===0&&(h=a.map((x,E)=>x===0?1:p[E]/x),t.keepAspectRatioPolicy!=="stretch"&&(p=Ip(a,h,t)));let d=j("output",e.dataType,p.length),y=U("input",e.dataType,a.length),w=M.size(p),_=a.length===p.length&&a.every((x,E)=>x===p[E]),v=t.coordinateTransformMode==="tf_crop_and_resize",S=t.extrapolationValue,A=y.type.value,I=x=>`\n      ${_?"":`\n      ${Sp(t.coordinateTransformMode,A)};\n      ${(()=>{switch(t.mode){case"nearest":return`\n              ${Pp(y,a)};\n              ${xp(t.nearestMode,r,A)};\n              ${Ep(y,d,a,p,h.length,c.length,v)};\n              `;case"linear":return`\n              ${Tp(d,a,p,h.length,c.length)};\n              ${(()=>{if(a.length===2||a.length===4)return`${kp(y,d,a,v,S)}`;if(a.length===3||a.length===5)return`${Rp(y,d,a,v,S)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};\n            `;case"cubic":return`\n            ${(()=>{if(a.length===2||a.length===4)return`${Op(y,d,a,p,h,c,t.cubicCoeffA,v,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};\n            `;default:throw Error("Invalid resize mode")}})()};\n      `}\n      ${x.registerUniform("output_size","u32").registerUniform("scales","f32",h.length).registerUniform("roi","f32",c.length).declareVariables(y,d)}\n      ${x.mainStart()}\n        ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n        ${_?"output[global_idx] = input[global_idx];":`\n        let output_indices = ${d.offsetToIndices("global_idx")};\n        var input_indices: ${y.type.indices};\n        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);\n                if (checkInputIndices(input_indices)) {\n                  output[global_idx] = ${y.getByIndices("input_indices")};\n                } else {\n                  output[global_idx] = ${t.extrapolationValue};\n                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};\n`}\n      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${h.length>0?h:""}|${i.length>0?i:""}|${c.length>0?c:""}|${_}|${a}`,inputDependencies:["rank"]},getShaderSource:I,getRunData:()=>({outputs:[{dims:p,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:[{type:12,data:w},{type:1,data:h},{type:1,data:c},...Z(a,p)]})}},Dp=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},hd=(e,t)=>{let r=[],o=[],i=[],u=Dp(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");_p(e.inputs,t,u,r,o,i),e.compute(Bp(e.inputs[0],t,u,r,o,i),{inputs:[0]})},gd=e=>{let t=e.antialias,r=e.axes,o=e.coordinateTransformMode,i=e.cubicCoeffA,u=e.excludeOutside!==0,a=e.extrapolationValue,c=e.keepAspectRatioPolicy,p=e.mode,h=e.nearestMode===""?"simple":e.nearestMode;return ve({antialias:t,axes:r,coordinateTransformMode:o,cubicCoeffA:i,excludeOutside:u,extrapolationValue:a,keepAspectRatioPolicy:c,mode:p,nearestMode:h})}});var zp,Mp,bd,wd=Y(()=>{"use strict";ye();Se();Ze();_e();zp=(e,t)=>{let[r,o,i,u]=e,{numHeads:a,rotaryEmbeddingDim:c}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input \'x\' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!M.areEqual(o.dims,[])&&!M.areEqual(o.dims,[1])&&o.dims.length!==2)throw new Error(`Input \'position_ids\' is expected to have 0, 1, or 2 dimensions, got ${o.dims.length}`);if(i.dims.length!==2)throw new Error(`Input \'cos_cache\' is expected to have 2 dimensions, got ${i.dims.length}`);if(u.dims.length!==2)throw new Error(`Input \'sin_cache\' is expected to have 2 dimensions, got ${u.dims.length}`);if(!M.areEqual(i.dims,u.dims))throw new Error("Inputs \'cos_cache\' and \'sin_cache\' are expected to have the same shape");if(c>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let p=r.dims[0],h=r.dims[r.dims.length-2],d=i.dims[0],y=M.sizeFromDimension(r.dims,1)/h,w=c===0?i.dims[1]*2:y/a;if(c>w)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(o.dims.length===2){if(p!==o.dims[0])throw new Error(`Input \'position_ids\' dimension 0 should be of size batch_size, got ${o.dims[0]}`);if(h!==o.dims[1])throw new Error(`Input \'position_ids\' dimension 1 should be of size sequence_length, got ${o.dims[1]}`)}if(w/2!==i.dims[1]&&c/2!==i.dims[1])throw new Error(`Input \'cos_cache\' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(h>d)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Mp=(e,t)=>{let{interleaved:r,numHeads:o,rotaryEmbeddingDim:i,scale:u}=t,a=e[0].dims[0],c=M.sizeFromDimension(e[0].dims,1),p=e[0].dims[e[0].dims.length-2],h=c/p,d=e[2].dims[1],y=i===0?d*2:h/o,w=new Array(a,p,h/y,y-d),_=M.computeStrides(w),v=[{type:1,data:u},{type:12,data:w},{type:12,data:_},...e[0].dims.length===3?new Array({type:12,data:[c,h,y,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[c,y,p*y,1]}):[],...Z(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],S=A=>{let I=U("input",e[0].dataType,e[0].dims.length),x=U("position_ids",e[1].dataType,e[1].dims.length),E=U("cos_cache",e[2].dataType,e[2].dims.length),P=U("sin_cache",e[3].dataType,e[3].dims.length),O=j("output",e[0].dataType,e[0].dims.length);return A.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:w.length},{name:"global_strides",type:"u32",length:_.length},{name:"input_output_strides",type:"u32",length:_.length}]),`\n        ${A.declareVariables(I,x,E,P,O)}\n\n        ${A.mainStart(or)}\n          let half_rotary_emb_dim = uniforms.${E.name}_shape[1];\n          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;\n          let size = uniforms.global_shape[0] * uniforms.global_strides[0];\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("size")}\n\n          if (bsnh[3] < half_rotary_emb_dim) {\n            let position_ids_idx =\n                ${x.broadcastedIndicesToOffset("bsnh.xy",j("",x.type.tensor,2))};\n            let position_id =\n                u32(${x.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);\n            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});\n            let j = i + select(half_rotary_emb_dim, 1, ${r});\n            let re = ${I.getByOffset("i")} * ${E.get("position_id","bsnh[3]")} -\n                ${I.getByOffset("j")} * ${P.get("position_id","bsnh[3]")};\n            ${O.setByOffset("i","re")}\n            let im = ${I.getByOffset("i")} * ${P.get("position_id","bsnh[3]")} +\n                ${I.getByOffset("j")} * ${E.get("position_id","bsnh[3]")};\n            ${O.setByOffset("j","im")}\n          } else {\n            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;\n            ${O.setByOffset("k",I.getByOffset("k"))}\n          }\n        }`};return{name:"RotaryEmbedding",shaderCache:{hint:ve({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:S,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(w)/or)},programUniforms:v})}},bd=(e,t)=>{zp(e.inputs,t),e.compute(Mp(e.inputs,t))}});var Up,Vp,vd,$d=Y(()=>{"use strict";ye();Se();_e();Up=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],o=e[2];if(t.dataType!==r.dataType||t.dataType!==o.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],u=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==u)throw new Error("Skip must have the same sequence length as input");if(o.dims.length!==1)throw new Error("Gamma must be 1D");if(o.dims[o.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},Vp=(e,t,r,o)=>{let i=t.simplified,u=e[0].dims,a=M.size(u),c=u,p=a,h=u.slice(-1)[0],d=o?u.slice(0,-1).concat(1):[],y=!i&&e.length>3,w=e.length>4,_=o&&r>1,v=o&&r>2,S=r>3,A=Me(h),I=[{type:12,data:p},{type:12,data:A},{type:12,data:h},{type:1,data:t.epsilon}],x=P=>{let O=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],R=[U("x",e[0].dataType,e[0].dims,A),U("skip",e[1].dataType,e[1].dims,A),U("gamma",e[2].dataType,e[2].dims,A)];y&&R.push(U("beta",e[3].dataType,e[3].dims,A)),w&&R.push(U("bias",e[4].dataType,e[4].dims,A)),R.push(j("output",e[0].dataType,c,A)),_&&R.push(j("mean_output",1,d)),v&&R.push(j("inv_std_output",1,d)),S&&R.push(j("input_skip_bias_sum",e[0].dataType,c,A));let L=De(e[0].dataType);return`\n\n      ${P.registerUniforms(O).declareVariables(...R)}\n\n      ${P.mainStart()}\n        ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}\n        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;\n        let offset = global_idx * hidden_size_vectorized;\n        var sum = ${$t("f32",A)};\n        var squareSum = ${$t("f32",A)};\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          let skip_value = skip[offset + i];\n          let bias_value = ${w?"bias[i]":L+"(0.0)"};\n          let input_value = x[offset + i];\n          let value = input_value + skip_value + bias_value;\n          ${S?"input_skip_bias_sum[offset + i] = value;":""}\n          output[offset + i] = value;\n          let f32_value = ${ir(L,A,"value")};\n          sum += f32_value;\n          squareSum += f32_value * f32_value;\n        }\n        let mean = ${_t("sum",A)} / f32(uniforms.hidden_size);\n        let inv_std_dev = inverseSqrt(${_t("squareSum",A)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);\n        ${_?"mean_output[global_idx] = mean;":""}\n        ${v?"inv_std_output[global_idx] = inv_std_dev;":""}\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          output[offset + i] = (output[offset + i] ${i?"":`- ${L}(mean)`}) * ${L}(inv_std_dev) * gamma[i] ${y?"+ beta[i]":""};\n        }\n      }`},E=[{dims:c,dataType:e[0].dataType}];return r>1&&E.push({dims:d,dataType:1}),r>2&&E.push({dims:d,dataType:1}),r>3&&E.push({dims:u,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${A};${_};${v};${S}`,inputDependencies:e.map((P,O)=>"type")},getShaderSource:x,getRunData:()=>({outputs:E,dispatchGroup:{x:Math.ceil(p/h/64)},programUniforms:I})}},vd=(e,t)=>{Up(e.inputs);let o=[0];e.outputCount>1&&o.push(-3),e.outputCount>2&&o.push(-3),e.outputCount>3&&o.push(3),e.compute(Vp(e.inputs,t,e.outputCount,!1),{outputs:o})}});var Wp,Gn,Np,_d,Gp,Hp,Sd,xd,Cd=Y(()=>{"use strict";ye();Se();Ze();_e();Wp=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,o)=>{if(e[o+1].dataType!==6&&e[o+1].dataType!==7)throw new Error(`Input ${o} must be an array of int32 or int64`)})},Gn=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(o=>r.push(Number(o)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(o=>r.push(Number(o)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},Np=(e,t)=>{if(e.length>1){let r=Gn(e,1),o=Gn(e,2),i=Gn(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),ve({starts:r,ends:o,axes:i})}else return t},_d=(e,t,r,o,i)=>{let u=e;return e<0&&(u+=r[o[t]]),i[t]<0?Math.max(0,Math.min(u,r[o[t]]-1)):Math.max(0,Math.min(u,r[o[t]]))},Gp=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n          var input_indices: ${e.type.indices};\n          var carry = 0u;\n          for (var i = ${r.length}; i >= 0; i--) {\n            let input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n            let steps_i = ${fe("uniforms.steps","i",r.length)};\n            let signs_i = ${fe("uniforms.signs","i",r.length)};\n            let starts_i = ${fe("uniforms.starts","i",r.length)};\n            var output_index = ${t.indicesGet("output_indices","i")};\n            var input_index = output_index * steps_i + starts_i + carry;\n            carry = input_index / input_shape_i;\n            input_index = input_index % input_shape_i;\n            if (signs_i < 0) {\n              input_index = input_shape_i - input_index - 1u + starts_i;\n            }\n            ${e.indicesSet("input_indices","i","input_index")};\n          }\n          return input_indices;\n      }`,Hp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=t.axes.length>0?M.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],u=Gn(e,4);u.forEach(I=>I!==0||(()=>{throw new Error("step cannot be 0")})),u.length===0&&(u=Array(i.length).fill(1));let a=t.starts.map((I,x)=>_d(I,x,r,i,u)),c=t.ends.map((I,x)=>_d(I,x,r,i,u));if(i.length!==a.length||i.length!==c.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let I=0;I<r.length;++I)i.includes(I)||(a.splice(I,0,0),c.splice(I,0,r[I]),u.splice(I,0,1));let p=u.map(I=>Math.sign(I));u.forEach((I,x,E)=>{if(I<0){let P=(c[x]-a[x])/I,O=a[x],R=O+P*u[x];a[x]=R,c[x]=O,E[x]=-I}});let h=r.slice(0);i.forEach((I,x)=>{h[I]=Math.ceil((c[I]-a[I])/u[I])});let d={dims:h,dataType:e[0].dataType},y=j("output",e[0].dataType,h.length),w=U("input",e[0].dataType,e[0].dims.length),_=M.size(h),v=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:p.length},{name:"steps",type:"u32",length:u.length}],S=[{type:12,data:_},{type:12,data:a},{type:6,data:p},{type:12,data:u},...Z(e[0].dims,h)],A=I=>`\n      ${I.registerUniforms(v).declareVariables(w,y)}\n        ${Gp(w,y,r)}\n        ${I.mainStart()}\n          ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n          let output_indices = ${y.offsetToIndices("global_idx")};\n          let input_indices = calculateInputIndices(output_indices);\n          ${y.setByOffset("global_idx",w.getByIndices("input_indices"))}\n      }`;return{name:"Slice",shaderCache:{hint:`${p.length}_${a.length}_${u.length}`,inputDependencies:["rank"]},getShaderSource:A,getRunData:()=>({outputs:[d],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:S})}},Sd=(e,t)=>{Wp(e.inputs,t);let r=Np(e.inputs,t);e.compute(Hp(e.inputs,r),{inputs:[0]})},xd=e=>{let t=e.starts,r=e.ends,o=e.axes;return ve({starts:t,ends:r,axes:o})}});var Lp,Fp,Ad,Id,Td=Y(()=>{"use strict";ye();Se();Ze();_e();Lp=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},Fp=(e,t)=>{let r=e.dims,o=M.size(r),i=64,u=t.axis;if(u<0&&(u=r.length+u),u<r.length-1)throw new Error("softmax only supports last axis for now.");let a=r[u],c=o/a,p=Me(a),h=a/p,d=(A,I)=>I===4?`max(max(${A}.x, ${A}.y), max(${A}.z, ${A}.w))`:I===2?`max(${A}.x, ${A}.y)`:I===3?`max(max(${A}.x, ${A}.y), ${A}.z)`:A,y=U("x",e.dataType,e.dims,p),w=j("result",e.dataType,e.dims,p),_=y.type.value,v=De(e.dataType)==="f32"?`var threadMax = ${_}(-3.402823e+38f);`:`var threadMax = ${_}(-65504.0h);`,S=A=>`\n      var<workgroup> rowMaxShared : ${_};\n      var<workgroup> rowSumShared : ${_};\n      var<workgroup> threadShared : array<${_}, ${i}>;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ${_} {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ${_}) {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n      ${A.registerUniform("packedCols","i32").declareVariables(y,w)}\n      ${A.mainStart()}\n        let gindex = i32(global_idx);\n        let lindex = i32(local_idx);\n        const wg = ${i};\n        let row = gindex / wg;\n        let cols = uniforms.packedCols;\n        let row_stride : i32 = uniforms.packedCols;\n\n        // find the rows max\n        ${v}\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = ${_}(${d("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum = ${_}(0.0);\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = ${_}(${_t("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }`;return{name:"Softmax",shaderCache:{hint:`${p}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.dataType}],dispatchGroup:{x:c},programUniforms:[{type:6,data:h}]}),getShaderSource:S}},Ad=(e,t)=>{Lp(e.inputs),e.compute(Fp(e.inputs[0],t))},Id=e=>ve({axis:e.axis})});var qp,jp,Kp,Yp,Zp,Ed,Pd,kd=Y(()=>{"use strict";ye();Se();Ze();_e();qp=e=>{if(!e||e.length<1)throw new Error("too few inputs")},jp=(e,t)=>{let r=[],o=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),o=r.length),ve({numOutputs:o,axis:t.axis,splitSizes:r})},Kp=e=>`\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {\n    if (index < ${fe("uniforms.size_in_split_axis","i",e)}) {\n        return i;\n    }\n    }\n    return ${e}u;\n}`,Yp=e=>{let t=e.length,r=[];for(let o=0;o<t;++o){let i=e[o].setByIndices("indices","input[global_idx]");t===1?r.push(i):o===0?r.push(`if (output_number == ${o}u) { ${i} }`):o===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${o}) { ${i} }`)}return`\n      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {\n        ${r.join(`\n`)}\n      }`},Zp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=e[0].dataType,u=M.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),c=U("input",i,r.length),p=new Array(t.numOutputs),h=[],d=[],y=0,w=[{type:12,data:o}];for(let v=0;v<t.numOutputs;v++){y+=t.splitSizes[v],p[v]=y;let S=r.slice();S[t.axis]=t.splitSizes[v],d.push(S),a[v]=j(`output${v}`,i,S.length),h.push({dims:d[v],dataType:e[0].dataType})}w.push({type:12,data:p},...Z(r,...d));let _=v=>`\n  ${v.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",p.length).declareVariables(c,...a)}\n  ${Kp(p.length)}\n  ${Yp(a)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}\n\n    var indices = ${c.offsetToIndices("global_idx")};\n    var index = ${c.indicesGet("indices",u)};\n    let output_number = calculateOutputIndex(index);\n    if (output_number != 0) {\n      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",p.length)};\n      ${c.indicesSet("indices",u,"index")};\n    }\n    writeBufferData(output_number, indices, global_idx);\n  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:_,getRunData:()=>({outputs:h,dispatchGroup:{x:Math.ceil(o/64)},programUniforms:w})}},Ed=(e,t)=>{qp(e.inputs);let r=e.inputs.length===1?t:jp(e.inputs,t);e.compute(Zp(e.inputs,r),{inputs:[0]})},Pd=e=>{let t=e.axis,r=e.splitSizes,o=e.numOutputs<0?r.length:e.numOutputs;if(o!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return ve({axis:t,numOutputs:o,splitSizes:r})}});var Od,Xp,Qp,Jp,Rd,Bd=Y(()=>{"use strict";ye();Se();_e();Od=e=>Array.from(e.getBigInt64Array(),Number),Xp=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Od(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},Qp=(e,t)=>{let r=[];for(let o=0;o<e.length;++o)r.push(e[o]*t[o]);return r},Jp=e=>{let t=e[0].dims,r=Od(e[1]),o=Qp(t,r),i=M.size(o),u=e[0].dataType,a=U("input",u,t.length),c=j("output",u,o.length),p=h=>`\n      const inputShape = ${a.indices(...t)};\n      ${h.registerUniform("output_size","u32").declareVariables(a,c)}\n      ${h.mainStart()}\n      ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n      let output_indices = ${c.offsetToIndices("global_idx")};\n      var input_indices: ${a.type.indices};\n      for (var i = 0; i < ${t.length}; i++) {\n        let input_dim_i = ${a.indicesGet("uniforms.input_shape","i")};\n        let input_dim_value = ${c.indicesGet("output_indices","i")}  % input_dim_i;\n\n        ${a.indicesSet("input_indices","i","input_dim_value")}\n      }\n      ${c.setByOffset("global_idx",a.getByIndices("input_indices"))}\n    }`;return{name:"Tile",shaderCache:{hint:`${r}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},...Z(e[0].dims,o)]}),getShaderSource:p}},Rd=e=>{Xp(e.inputs),e.compute(Jp(e.inputs),{inputs:[0]})}});var em,tm,Dd,zd=Y(()=>{"use strict";ye();Se();_e();em=(e,t,r,o,i)=>{let u=j("output_data",i,r.length,4),a=U("a_data",t[1].dataType,t[1].dims.length,4),c=U("b_data",t[2].dataType,t[2].dims.length,4),p=U("c_data",t[0].dataType,t[0].dims.length,4),h,d=(y,w,_)=>`select(${w}, ${y}, ${_})`;if(!o)h=u.setByOffset("global_idx",d(a.getByOffset("global_idx"),c.getByOffset("global_idx"),p.getByOffset("global_idx")));else{let y=(w,_,v="")=>{let S=`a_data[index_a${_}][component_a${_}]`,A=`b_data[index_b${_}][component_b${_}]`,I=`bool(c_data[index_c${_}] & (0xffu << (component_c${_} * 8)))`;return`\n            let output_indices${_} = ${u.offsetToIndices(`global_idx * 4u + ${_}u`)};\n            let offset_a${_} = ${a.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_b${_} = ${c.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_c${_} = ${p.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let index_a${_} = offset_a${_} / 4u;\n            let index_b${_} = offset_b${_} / 4u;\n            let index_c${_} = offset_c${_} / 4u;\n            let component_a${_} = offset_a${_} % 4u;\n            let component_b${_} = offset_b${_} % 4u;\n            let component_c${_} = offset_c${_} % 4u;\n            ${w}[${_}] = ${v}(${d(S,A,I)});\n          `};i===9?h=`\n            var data = vec4<u32>(0);\n            ${y("data",0,"u32")}\n            ${y("data",1,"u32")}\n            ${y("data",2,"u32")}\n            ${y("data",3,"u32")}\n            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:h=`\n            ${y("output_data[global_idx]",0)}\n            ${y("output_data[global_idx]",1)}\n            ${y("output_data[global_idx]",2)}\n            ${y("output_data[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(p,a,c,u)}\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${h}\n      }`},tm=e=>{let t=e[1].dims,r=e[2].dims,o=e[0].dims,i=e[1].dataType,u=!(M.areEqual(t,r)&&M.areEqual(r,o)),a=t,c=M.size(t);if(u){let h=It.calcShape(It.calcShape(t,r,!1),o,!1);if(!h)throw new Error("Can\'t perform where op on the given tensors");a=h,c=M.size(a)}let p=Math.ceil(c/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:h=>em(h,e,a,u,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:p},...Z(o,t,r,a)]})}},Dd=e=>{e.compute(tm(e.inputs))}});var Md,Ud=Y(()=>{"use strict";Ka();Ro();Ja();ts();Vs();Zs();Oo();Uo();lu();mu();gu();$u();xu();Au();Eu();Ou();Du();Mu();Vu();Wo();Gu();qu();Ku();cd();md();In();yd();wd();$d();Cd();Td();kd();Bd();Sr();Rn();zd();Md=new Map([["Abs",[rs]],["Acos",[ns]],["Acosh",[os]],["Add",[Ws]],["ArgMax",[ja,ko]],["ArgMin",[qa,ko]],["Asin",[is]],["Asinh",[as]],["Atan",[ss]],["Atanh",[us]],["Attention",[Xa]],["AveragePool",[rd,td]],["BatchNormalization",[Qa]],["BiasAdd",[es]],["BiasSplitGelu",[Us]],["Cast",[ls,ds]],["Ceil",[ps]],["Clip",[cs]],["Concat",[Ya,Za]],["Conv",[Ho,Go]],["ConvTranspose",[du,uu]],["Cos",[ms]],["Cosh",[fs]],["CumSum",[cu,pu]],["DepthToSpace",[fu,hu]],["Div",[Ns]],["Einsum",[wu,vu]],["Elu",[hs,kn]],["Equal",[Gs]],["Erf",[gs]],["Exp",[ys]],["Expand",[Su]],["FastGelu",[Cu]],["Floor",[bs]],["FusedConv",[Ho,Go]],["Gather",[Tu,Iu]],["GatherElements",[ku,Pu]],["Gelu",[ws]],["Gemm",[Bu,Ru]],["GlobalAveragePool",[id,od]],["GlobalMaxPool",[ld,dd]],["Greater",[qs]],["GreaterOrEqual",[Ks]],["HardSigmoid",[Is,As]],["InstanceNormalization",[zu]],["LayerNormalization",[Uu]],["LeakyRelu",[vs,kn]],["Less",[js]],["LessOrEqual",[Ys]],["Log",[zs]],["MatMul",[ru]],["MatMulNBits",[Wu,Nu]],["MaxPool",[sd,ud]],["Mul",[Hs]],["MultiHeadAttention",[Fu,Lu]],["Neg",[_s]],["Not",[$s]],["Pad",[ju]],["Pow",[Ls]],["Range",[pd]],["Reciprocal",[Ss]],["ReduceMin",[Wa]],["ReduceMean",[Da]],["ReduceMax",[Va]],["ReduceSum",[Ga]],["ReduceProd",[Na]],["ReduceL1",[za]],["ReduceL2",[Ma]],["ReduceLogSum",[La]],["ReduceLogSumExp",[Ua]],["ReduceSumSquare",[Ha]],["Relu",[xs]],["Resize",[hd,gd]],["RotaryEmbedding",[bd]],["Sigmoid",[Cs]],["Sin",[Ts]],["Sinh",[Es]],["Slice",[Sd,xd]],["SkipLayerNormalization",[vd]],["Split",[Ed,Pd]],["Sqrt",[Ps]],["Softmax",[Ad,Id]],["Sub",[Fs]],["Tan",[ks]],["Tanh",[Rs]],["ThresholdedRelu",[Ds,kn]],["Tile",[Rd]],["Transpose",[_a,Sa]],["Where",[Dd]]])});var Hn,Vd=Y(()=>{"use strict";$r();Lt();_e();Hn=class{constructor(t){this.backend=t;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,r){this.repo.set(t,r)}run(t,r,o,i,u){rr(t.programInfo.name);let a=this.backend.device,c=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let p=[];for(let d of r)p.push({binding:p.length,resource:{buffer:d.buffer}});for(let d of o)p.push({binding:p.length,resource:{buffer:d.buffer}});u&&p.push({binding:p.length,resource:u});let h=a.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:p,label:t.programInfo.name});if(this.backend.sessionStatus==="capturing"){let d={kernelId:this.backend.currentKernelId,computePipeline:t.computePipeline,bindGroup:h,dispatchGroup:i};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(d)}c.setPipeline(t.computePipeline),c.setBindGroup(0,h),c.dispatchWorkgroups(...i),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Ht(t.programInfo.name)}dispose(){}build(t,r){rr(t.name);let o=this.backend.device,i=[];o.features.has("shader-f16")&&i.push("enable f16;");let u=va(r,this.backend.device.limits),a=t.getShaderSource(u),c=`${i.join(`\n`)}\n${u.additionalImplementations}\n${a}`,p=o.createShaderModule({code:c,label:t.name});Ve("verbose",()=>`[WebGPU] ${t.name} shader code: ${c}`);let h=o.createComputePipeline({compute:{module:p,entryPoint:"main"},layout:"auto",label:t.name});return Ht(t.name),{programInfo:t,computePipeline:h,uniformVariablesInfo:u.variablesInfo}}normalizeDispatchGroupSize(t){let r=typeof t=="number"?t:t.x,o=typeof t=="number"?1:t.y||1,i=typeof t=="number"?1:t.z||1,u=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(r<=u&&o<=u&&i<=u)return[r,o,i];let a=r*o*i,c=Math.ceil(Math.sqrt(a));if(c>u){if(c=Math.ceil(Math.cbrt(a)),c>u)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[c,c,c]}else return[c,c,1]}}});var rm,nm,Yo,Ln,Wd=Y(()=>{"use strict";$r();ye();Lt();fa();wa();Ud();Vd();rm=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let o=0;o<e.length;++o){let i=e[o].dataType;switch(t[o]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let u=e[o].dims.length;r.push(`${i};${u}`);break}case"dims":{let u=e[o].dims.join(",");r.push(`${i};${u}`);break}default:throw new Error(`unsupported input dependency: ${t[o]}`)}}return r.join("|")},nm=(e,t,r)=>{let o=e.name;return e.shaderCache?.hint&&(o+="["+e.shaderCache.hint+"]"),o+=":"+r+`:${rm(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,o},Yo=class{constructor(t){t&&(this.architecture=t.architecture,this.vendor=t.vendor)}isArchitecture(t){return this.architecture===t}isVendor(t){return this.vendor===t}},Ln=class{constructor(){this.currentSessionId=null;this.currentKernelId=null;this.commandEncoder=null;this.computePassEncoder=null;this.maxDispatchNumber=16;this.pendingDispatchNumber=0;this.pendingKernels=[];this.pendingQueries=new Map;this.sessionStatus="default";this.capturedCommandList=new Map;this.capturedPendingKernels=new Map;this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t}async initialize(t,r){this.env=t;let o=[],i={requiredLimits:{maxComputeWorkgroupStorageSize:r.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:r.limits.maxStorageBufferBindingSize,maxBufferSize:r.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:r.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:r.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:r.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:r.limits.maxComputeWorkgroupSizeZ},requiredFeatures:o};r.features.has("chromium-experimental-timestamp-query-inside-passes")?o.push("chromium-experimental-timestamp-query-inside-passes"):r.features.has("timestamp-query")&&o.push("timestamp-query"),r.features.has("shader-f16")&&o.push("shader-f16"),this.device=await r.requestDevice(i),this.adapterInfo=new Yo(await r.requestAdapterInfo()),this.gpuDataManager=ba(this),this.programManager=new Hn(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,pa(t.logLevel,!!t.debug),this.device.onuncapturederror=u=>{u.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${u.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:r,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let t=this.getCommandEncoder(),r={};this.queryType==="at-passes"&&(r.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=t.beginComputePass(r)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;rr(),this.endComputePass();let t;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),t=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(t,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&t.mapAsync(GPUMapMode.READ).then(()=>{let r=new BigUint64Array(t.getMappedRange()),o=this.pendingQueries.get(t);for(let i=0;i<r.length/2;i++){let u=o[i],a=u.kernelId,c=this.kernels.get(a),p=c.kernelType,h=c.kernelName,d=u.programName,y=u.inputTensorViews,w=u.outputTensorViews,_=r[i*2],v=r[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=_);let S=Number(_-this.queryTimeBase),A=Number(v-this.queryTimeBase);if(!Number.isSafeInteger(S)||!Number.isSafeInteger(A))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:y.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),outputsMetadata:w.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),kernelId:a,kernelType:p,kernelName:h,programName:d,startTime:S,endTime:A});else{let I="";y.forEach((E,P)=>{I+=`input[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `});let x="";w.forEach((E,P)=>{x+=`output[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `}),console.log(`[profiling] kernel "${a}|${p}|${h}|${d}" ${I}${x}execution time: ${A-S} ns`)}wo("GPU",`${d}::${_}::${v}`)}t.unmap(),this.pendingQueries.delete(t)}),Ht()}run(t,r,o,i,u,a){rr(t.name);let c=[];for(let E=0;E<r.length;++E){let P=r[E].data;if(P===0)continue;let O=this.gpuDataManager.get(P);if(!O)throw new Error(`no GPU data for input: ${P}`);c.push(O)}let{outputs:p,dispatchGroup:h,programUniforms:d}=t.getRunData(r),y=o.length===0?p.map((E,P)=>P):o;if(y.length!==p.length)throw new Error(`Output size ${y.length} must be equal to ${p.length}.`);let w=[],_=[];for(let E=0;E<p.length;++E){if(!Number.isInteger(y[E])||y[E]<-3||y[E]>=a)throw new Error(`Invalid output index: ${y[E]}`);if(y[E]===-3)continue;let P=y[E]===-1,O=y[E]===-2,R=P||O?u(p[E].dataType,p[E].dims):i(y[E],p[E].dataType,p[E].dims);if(w.push(R),R.data===0)continue;let L=this.gpuDataManager.get(R.data);if(!L)throw new Error(`no GPU data for output: ${R.data}`);if(P&&this.temporaryData.push(L),O){let N=this.kernelPersistentData.get(this.currentKernelId);N||(N=[],this.kernelPersistentData.set(this.currentKernelId,N)),N.push(L)}_.push(L)}if(c.length!==r.length||_.length!==w.length){if(_.length===0)return Ht(t.name),w;throw new Error(`Program ${t.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let v;if(d){let E=0,P=[];d.forEach(N=>{let K=typeof N.data=="number"?[N.data]:N.data;if(K.length===0)return;let Q=N.type===10?2:4,he,W;N.type===10?(W=K.length>4?16:K.length>2?8:K.length*Q,he=K.length>4?16:Q*K.length):(W=K.length<=2?K.length*Q:16,he=16),E=Math.ceil(E/W)*W,P.push(E);let se=N.type===10?8:4;E+=K.length>4?Math.ceil(K.length/se)*he:K.length*Q});let O=16;E=Math.ceil(E/O)*O;let R=new ArrayBuffer(E);d.forEach((N,K)=>{let Q=P[K],he=typeof N.data=="number"?[N.data]:N.data;if(N.type===6)new Int32Array(R,Q,he.length).set(he);else if(N.type===12)new Uint32Array(R,Q,he.length).set(he);else if(N.type===10)new Uint16Array(R,Q,he.length).set(he);else if(N.type===1)new Float32Array(R,Q,he.length).set(he);else throw new Error(`Unsupported uniform type: ${Gt(N.type)}`)});let L=this.gpuDataManager.create(E,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(L.buffer,0,R,0,E),this.gpuDataManager.release(L.id),v={offset:0,size:E,buffer:L.buffer}}let S=this.programManager.normalizeDispatchGroupSize(h),A=S[1]===1&&S[2]===1,I=nm(t,r,A),x=this.programManager.getArtifact(I);if(x||(x=this.programManager.build(t,S),this.programManager.setArtifact(I,x),Ve("info",()=>`[artifact] key: ${I}, programName: ${t.name}`)),d&&x.uniformVariablesInfo){if(d.length!==x.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${x.uniformVariablesInfo.length}, got ${d.length} in program "${x.programInfo.name}".`);for(let E=0;E<d.length;E++){let P=d[E],O=P.type,R=typeof P.data=="number"?1:P.data.length,[L,N]=x.uniformVariablesInfo[E];if(O!==L||R!==N)throw new Error(`Uniform variable ${E} mismatch: expect type ${L} with size ${N}, got type ${O} with size ${R} in program "${x.programInfo.name}".`)}}if(Ve("info",()=>`[ProgramManager] run "${t.name}" (key=${I}) with ${S[0]}x${S[1]}x${S[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let E={kernelId:this.currentKernelId,programName:x.programInfo.name,inputTensorViews:r,outputTensorViews:w};this.pendingKernels.push(E),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(E)}return this.programManager.run(x,c,_,S,v),Ht(t.name),w}upload(t,r){this.gpuDataManager.upload(t,r)}memcpy(t,r){this.gpuDataManager.memcpy(t,r)}async download(t,r){await this.gpuDataManager.download(t,r)}alloc(t){return this.gpuDataManager.create(t).id}free(t){return this.gpuDataManager.release(t)}createKernel(t,r,o,i){let u=Md.get(t);if(!u)throw new Error(`kernel not implemented: ${t}`);let a={kernelType:t,kernelName:i,kernelEntry:u[0],attributes:[u[1],o]};this.kernels.set(r,a)}releaseKernel(t){let r=this.kernelPersistentData.get(t);if(r){for(let o of r)this.gpuDataManager.release(o.id);this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)}computeKernel(t,r,o){let i=this.kernels.get(t);if(!i)throw new Error(`kernel not created: ${t}`);let u=i.kernelType,a=i.kernelName,c=i.kernelEntry,p=i.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${u}] ${a}" is not allowed to be called recursively`);this.currentKernelId=t,p[0]&&(p[1]=p[0](p[1]),p[0]=void 0),Ve("info",()=>`[WebGPU] Start to run kernel "[${u}] ${a}"...`);let h=this.env.debug;this.temporaryData=[];try{return h&&this.device.pushErrorScope("validation"),c(r,p[1]),0}catch(d){return o.push(Promise.resolve(`[WebGPU] Kernel "[${u}] ${a}" failed. ${d}`)),1}finally{h&&o.push(this.device.popErrorScope().then(d=>d?`GPU validation error for kernel "[${u}] ${a}": ${d.message}`:null));for(let d of this.temporaryData)this.gpuDataManager.release(d.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(t,r,o,i){let u=this.sessionExternalDataMapping.get(t);u||(u=new Map,this.sessionExternalDataMapping.set(t,u));let a=u.get(r),c=this.gpuDataManager.registerExternalBuffer(o,i,a?.[1]);return u.set(r,[c,o]),c}unregisterBuffers(t){let r=this.sessionExternalDataMapping.get(t);r&&(r.forEach(o=>this.gpuDataManager.unregisterExternalBuffer(o[1])),this.sessionExternalDataMapping.delete(t))}getBuffer(t){let r=this.gpuDataManager.get(t);if(!r)throw new Error(`no GPU data for buffer: ${t}`);return r.buffer}createDownloader(t,r,o){return async()=>{let i=await xo(this,t,r);return ma(i.buffer,o)}}writeTimestamp(t){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,t)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ve("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ve("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ve("info","replay"),this.sessionStatus="replaying";let t=this.capturedCommandList.get(this.currentSessionId),r=this.capturedPendingKernels.get(this.currentSessionId),o=t.length;this.pendingKernels=[];for(let i=0;i<o;i++){let u=this.getComputePassEncoder(),a=t[i];this.writeTimestamp(this.pendingDispatchNumber*2),u.setPipeline(a.computePipeline),u.setBindGroup(0,a.bindGroup),u.dispatchWorkgroups(...a.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(r[i]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(t){this.unregisterBuffers(t),this.capturedCommandList.has(t)&&this.capturedCommandList.delete(t),this.capturedPendingKernels.has(t)&&this.capturedPendingKernels.delete(t),this.gpuDataManager.onReleaseSession(t)}onRunStart(t){this.currentSessionId=t,this.setQueryType()}}});var Nd={};gn(Nd,{init:()=>om});var qr,Zo,om,Gd=Y(()=>{"use strict";ye();Wd();Lt();Se();qr=class e{constructor(t,r,o,i){this.module=t;this.dataType=r;this.data=o;this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(M.size(t)!==M.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)}},Zo=class{constructor(t,r,o){this.module=t;this.backend=r;this.customDataOffset=0;this.customDataSize=0;this.adapterInfo=r.adapterInfo;let i=t.HEAPU32,u=o>>>2;this.opKernelContext=i[u++];let a=i[u++];this.outputCount=i[u++],this.customDataOffset=i[u++],this.customDataSize=i[u++];let c=[];for(let p=0;p<a;p++){let h=i[u++],d=i[u++],y=i[u++],w=[];for(let _=0;_<y;_++)w.push(i[u++]);c.push(new qr(t,h,d,w))}this.inputs=c}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(t,r){let o=r?.inputs?.map(c=>typeof c=="number"?this.inputs[c]:c)??this.inputs,i=r?.outputs??[],u=(c,p,h)=>new qr(this.module,p,this.output(c,h),h),a=(c,p)=>{let h=tr(c);if(!h)throw new Error(`Unsupported data type: ${c}`);let d=h*M.size(p),y=d>0?this.backend.gpuDataManager.create(d).id:0;return new qr(this.module,c,y,p)};return this.backend.run(t,o,i,u,a,this.outputCount)}output(t,r){let o=this.module.stackSave();try{let i=this.module.stackAlloc((1+r.length)*4),u=i>>2;this.module.HEAPU32[u++]=r.length;for(let a=0;a<r.length;a++)this.module.HEAPU32[u++]=r[a];return this.module._JsepOutput(this.opKernelContext,t,i)}catch(i){throw new Error(`Failed to generate kernel\'s output[${t}] with dims [${r}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${i}`)}finally{this.module.stackRestore(o)}}},om=async(e,t,r,o)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let u=new Ln;await u.initialize(r,o),i("webgpu",[u,a=>u.alloc(a),a=>u.free(a),(a,c,p,h=!1)=>{if(h)Ve("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${a}, dst=${c}, size=${p}`),u.memcpy(a,c);else{Ve("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${a}, gpuDataId=${c}, size=${p}`);let d=t.HEAPU8.subarray(a>>>0,(a>>>0)+p);u.upload(c,d)}},async(a,c,p)=>{Ve("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${a}, dataOffset=${c}, size=${p}`),await u.download(a,()=>t.HEAPU8.subarray(c>>>0,(c>>>0)+p))},(a,c,p)=>u.createKernel(a,c,p,t.UTF8ToString(t._JsepGetNodeName(c))),a=>u.releaseKernel(a),(a,c,p,h)=>{Ve("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${p}, kernel=${a}, contextDataOffset=${c}`);let d=new Zo(t,u,c);return u.computeKernel(a,d,h)},()=>u.captureBegin(),()=>u.captureEnd(),()=>u.replay()])}else i("webnn")}});var Vi;Vi=Ei();var pl=zi(),fo,ho=!1,yn=!1,Ui=!1,ml=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},fl=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},hl=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Wi=async e=>{if(ho)return Promise.resolve();if(yn)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Ui)throw new Error("previous call to \'initializeWebAssembly()\' failed.");yn=!0;let t=e.initTimeout,r=e.numThreads,o=e.simd,i=ml(r),u=o&&fl(),a=e.wasmPaths,c=typeof a=="string"?a:void 0,p=hl(u,i),h=typeof a=="object"?a[p]:void 0,d=!1,y=[];if(t>0&&y.push(new Promise(w=>{setTimeout(()=>{d=!0,w()},t)})),y.push(new Promise((w,_)=>{let v=i?pl:Vi,S={locateFile:(A,I)=>{if(i&&A.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Mi()],{type:"text/javascript"}));if(A.endsWith(".wasm")){if(h)return h;let x=c??I;return p==="ort-wasm-simd.wasm"?x+"ort-wasm-simd.jsep.wasm":p==="ort-wasm-simd-threaded.wasm"?x+"ort-wasm-simd-threaded.jsep.wasm":x+p}return I+A}};if(i)if(S.numThreads=r,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${v.toString()};`;S.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}v(S).then(A=>{yn=!1,ho=!0,fo=A,w()},A=>{yn=!1,Ui=!0,_(A)})})),await Promise.race(y),d)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Le=()=>{if(ho&&fo)return fo;throw new Error("WebAssembly is not initialized yet.")};var Fe=(e,t)=>{let r=Le(),o=r.lengthBytesUTF8(e)+1,i=r._malloc(o);return r.stringToUTF8(e,i,o),t.push(i),i},Nr=(e,t,r,o)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,u])=>{let a=t?t+i:i;if(typeof u=="object")Nr(u,a+".",r,o);else if(typeof u=="string"||typeof u=="number")o(a,u.toString());else if(typeof u=="boolean")o(a,u?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof u}`)})},Ue=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);t._OrtGetLastError(o,o+4);let i=t.HEAP32[o/4],u=t.HEAPU32[o/4+1],a=u?t.UTF8ToString(u):"";throw new Error(`${e} ERROR_CODE: ${i}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}};var Ni=e=>{let t=Le(),r=0,o=[],i=e||{};try{if(e?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(i.terminate=!1);let u=0;return e?.tag!==void 0&&(u=Fe(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,u),r===0&&Ue("Can\'t create run options."),e?.extra!==void 0&&Nr(e.extra,"",new WeakSet,(a,c)=>{let p=Fe(a,o),h=Fe(c,o);t._OrtAddRunConfigEntry(r,p,h)!==0&&Ue(`Can\'t set a run config entry: ${a} - ${c}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseRunOptions(r),o.forEach(a=>t._free(a)),u}};var gl=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},yl=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},bl=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},wl=(e,t,r)=>{for(let o of t){let i=typeof o=="string"?o:o.name;switch(i){case"webnn":if(i="WEBNN",typeof o!="string"){let a=o;if(a?.deviceType){let c=Fe("deviceType",r),p=Fe(a.deviceType,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'deviceType\' - ${a.deviceType}.`)}if(a?.numThreads){let c=a.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=Fe("numThreads",r),h=Fe(c.toString(),r);Le()._OrtAddSessionConfigEntry(e,p,h)!==0&&Ue(`Can\'t set a session config entry: \'numThreads\' - ${a.numThreads}.`)}if(a?.powerPreference){let c=Fe("powerPreference",r),p=Fe(a.powerPreference,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'powerPreference\' - ${a.powerPreference}.`)}}break;case"webgpu":if(i="JS",typeof o!="string"){let a=o;if(a?.preferredLayout){if(a.preferredLayout!=="NCHW"&&a.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${a.preferredLayout}`);let c=Fe("preferredLayout",r),p=Fe(a.preferredLayout,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'preferredLayout\' - ${a.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let u=Fe(i,r);Le()._OrtAppendExecutionProvider(e,u)!==0&&Ue(`Can\'t append execution provider: ${i}.`)}},Gi=e=>{let t=Le(),r=0,o=[],i=e||{};bl(i);try{let u=gl(i.graphOptimizationLevel??"all"),a=yl(i.executionMode??"sequential"),c=typeof i.logId=="string"?Fe(i.logId,o):0,p=i.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let h=i.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let d=typeof i.optimizedModelFilePath=="string"?Fe(i.optimizedModelFilePath,o):0;if(r=t._OrtCreateSessionOptions(u,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,c,p,h,d),r===0&&Ue("Can\'t create session options."),i.executionProviders&&wl(r,i.executionProviders,o),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);let y=Fe("enableGraphCapture",o),w=Fe(i.enableGraphCapture.toString(),o);t._OrtAddSessionConfigEntry(r,y,w)!==0&&Ue(`Can\'t set a session config entry: \'enableGraphCapture\' - ${i.enableGraphCapture}.`)}if(i.freeDimensionOverrides)for(let[y,w]of Object.entries(i.freeDimensionOverrides)){if(typeof y!="string")throw new Error(`free dimension override name must be a string: ${y}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let _=Fe(y,o);t._OrtAddFreeDimensionOverride(r,_,w)!==0&&Ue(`Can\'t set a free dimension override: ${y} - ${w}.`)}return i.extra!==void 0&&Nr(i.extra,"",new WeakSet,(y,w)=>{let _=Fe(y,o),v=Fe(w,o);t._OrtAddSessionConfigEntry(r,_,v)!==0&&Ue(`Can\'t set a session config entry: ${y} - ${w}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseSessionOptions(r),o.forEach(a=>t._free(a)),u}};ye();var Li=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(e),o=[];for await(let i of r)o.push(i);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),o=r?parseInt(r,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),u;try{u=new ArrayBuffer(o)}catch(c){if(c instanceof RangeError){let p=Math.ceil(o/65536);u=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let a=0;for(;;){let{done:c,value:p}=await i.read();if(c)break;let h=p.byteLength;new Uint8Array(u,a,h).set(p),a+=h}return new Uint8Array(u,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)};var im=(e,t)=>{Le()._OrtInit(e,t)!==0&&Ue("Can\'t initialize onnxruntime.")},Ld=async e=>{im(e.wasm.numThreads,Gr(e.logLevel))},Fd=async(e,t)=>{{let r=(Gd(),wr(Nd)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let o=e.webgpu.adapter;if(o){if(typeof o.limits!="object"||typeof o.features!="object"||typeof o.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let i=e.webgpu.powerPreference;if(i!==void 0&&i!=="low-power"&&i!=="high-performance")throw new Error(`Invalid powerPreference setting: "${i}"`);let u=e.webgpu.forceFallbackAdapter;if(u!==void 0&&typeof u!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${u}"`);if(o=await navigator.gpu.requestAdapter({powerPreference:i,forceFallbackAdapter:u}),!o)throw new Error(\'Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.\')}if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await r("webgpu",Le(),e,o)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await r("webnn",Le(),e)}}},ar=new Map,am=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,o,o+4)!==0&&Ue("Can\'t get session input/output count."),[t.HEAP32[o/4],t.HEAP32[o/4+1]]}finally{t.stackRestore(r)}},Xo=e=>{let t=Le(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},qd=async(e,t)=>{let r,o,i=Le();Array.isArray(e)?[r,o]=e:e.buffer===i.HEAPU8.buffer?[r,o]=[e.byteOffset,e.byteLength]:[r,o]=Xo(e);let u=0,a=0,c=0,p=[],h=[],d=[];try{if([a,p]=Gi(t),t?.externalData&&i.mountExternalData){let x=[];for(let E of t.externalData){let P=typeof E=="string"?E:E.path;x.push(Li(typeof E=="string"?E:E.data).then(O=>{i.mountExternalData(P,O)}))}await Promise.all(x)}u=await i._OrtCreateSession(r,o,a),u===0&&Ue("Can\'t create a session.");let[y,w]=am(u),_=!!t?.enableGraphCapture,v=[],S=[],A=[];for(let x=0;x<y;x++){let E=i._OrtGetInputName(u,x);E===0&&Ue("Can\'t get an input name."),h.push(E),v.push(i.UTF8ToString(E))}for(let x=0;x<w;x++){let E=i._OrtGetOutputName(u,x);E===0&&Ue("Can\'t get an output name."),d.push(E);let P=i.UTF8ToString(E);S.push(P);{if(_&&t?.preferredOutputLocation===void 0){A.push("gpu-buffer");continue}let O=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[P]??"cpu";if(O!=="cpu"&&O!=="cpu-pinned"&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}.`);if(_&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}. Only \'gpu-buffer\' location is supported when enableGraphCapture is true.`);A.push(O)}}let I=null;return A.some(x=>x==="gpu-buffer")&&(c=i._OrtCreateBinding(u),c===0&&Ue("Can\'t create IO binding."),I={handle:c,outputPreferredLocations:A,outputPreferredLocationsEncoded:A.map(x=>yo(x))}),ar.set(u,[u,h,d,I,_,!1]),[u,v,S]}catch(y){throw h.forEach(w=>i._OrtFree(w)),d.forEach(w=>i._OrtFree(w)),c!==0&&i._OrtReleaseBinding(c),u!==0&&i._OrtReleaseSession(u),y}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a),p.forEach(y=>i._free(y)),i.unmountExternalData?.()}},jd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,i,u,a,c]=r;a&&(c&&t._OrtClearBoundOutputs(a.handle),t._OrtReleaseBinding(a.handle)),t.jsepOnReleaseSession?.(e),i.forEach(p=>t._OrtFree(p)),u.forEach(p=>t._OrtFree(p)),t._OrtReleaseSession(o),ar.delete(e)},Hd=(e,t,r,o,i,u=!1)=>{if(!e){t.push(0);return}let a=Le(),c=e[0],p=e[1],h=e[3],d,y;if(c==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${i} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let v=e[2].gpuBuffer,S=tr(go(c));y=p.reduce((I,x)=>I*x,1)*S;let A=a.jsepRegisterBuffer;if(!A)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');d=A(o,i,v,y)}else{let v=e[2];if(Array.isArray(v)){y=4*v.length,d=a._malloc(y),r.push(d);let S=d/4;for(let A=0;A<v.length;A++){if(typeof v[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);a.HEAPU32[S++]=Fe(v[A],r)}}else y=v.byteLength,d=a._malloc(y),r.push(d),a.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,y),d)}let w=a.stackSave(),_=a.stackAlloc(4*p.length);try{let v=_/4;p.forEach(A=>a.HEAP32[v++]=A);let S=a._OrtCreateTensor(go(c),d,y,_,p.length,yo(h));S===0&&Ue(`Can\'t create tensor for input/output. session=${o}, index=${i}.`),t.push(S)}finally{a.stackRestore(w)}},Kd=async(e,t,r,o,i,u)=>{let a=Le(),c=ar.get(e);if(!c)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=c[0],h=c[1],d=c[2],y=c[3],w=c[4],_=c[5],v=t.length,S=o.length,A=0,I=[],x=[],E=[],P=[],O=a.stackSave(),R=a.stackAlloc(v*4),L=a.stackAlloc(v*4),N=a.stackAlloc(S*4),K=a.stackAlloc(S*4);try{[A,I]=Ni(u);for(let ee=0;ee<v;ee++)Hd(r[ee],x,P,e,t[ee],w);for(let ee=0;ee<S;ee++)Hd(i[ee],E,P,e,v+o[ee],w);let Q=R/4,he=L/4,W=N/4,se=K/4;for(let ee=0;ee<v;ee++)a.HEAPU32[Q++]=x[ee],a.HEAPU32[he++]=h[t[ee]];for(let ee=0;ee<S;ee++)a.HEAPU32[W++]=E[ee],a.HEAPU32[se++]=d[o[ee]];if(y&&!_){let{handle:ee,outputPreferredLocations:ae,outputPreferredLocationsEncoded:Ae}=y;if(h.length!==v)throw new Error(`input count from feeds (${v}) is expected to be always equal to model\'s input count (${h.length}).`);for(let me=0;me<v;me++){let ie=t[me];await a._OrtBindInput(ee,h[ie],x[me])!==0&&Ue(`Can\'t bind input[${me}] for session=${e}.`)}for(let me=0;me<S;me++){let ie=o[me];i[me]?.[3]?a._OrtBindOutput(ee,d[ie],E[me],0)!==0&&Ue(`Can\'t bind pre-allocated output[${me}] for session=${e}.`):a._OrtBindOutput(ee,d[ie],0,Ae[ie])!==0&&Ue(`Can\'t bind output[${me}] to ${ae[me]} for session=${e}.`)}ar.set(e,[p,h,d,y,w,!0])}a.jsepOnRunStart?.(p);let Ce;y?Ce=await a._OrtRunWithBinding(p,y.handle,S,N,A):Ce=await a._OrtRun(p,L,R,v,K,S,N,A),Ce!==0&&Ue("failed to call OrtRun().");let We=[];for(let ee=0;ee<S;ee++){let ae=a.HEAPU32[N/4+ee];if(ae===E[ee]){We.push(i[ee]);continue}let Ae=a.stackSave(),me=a.stackAlloc(4*4),ie=!1,ue,le=0;try{a._OrtGetTensorData(ae,me,me+4,me+8,me+12)!==0&&Ue(`Can\'t access output tensor data on index ${ee}.`);let G=me/4,ne=a.HEAPU32[G++];le=a.HEAPU32[G++];let xe=a.HEAPU32[G++],Ke=a.HEAPU32[G++],Be=[];for(let Ne=0;Ne<Ke;Ne++)Be.push(a.HEAPU32[xe/4+Ne]);a._OrtFree(xe);let Ge=Be.reduce((Ne,Ye)=>Ne*Ye,1);ue=Gt(ne);let Ut=y?.outputPreferredLocations[o[ee]];if(ue==="string"){if(Ut==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ne=[],Ye=le/4;for(let mt=0;mt<Ge;mt++){let Rt=a.HEAPU32[Ye++],qt=mt===Ge-1?void 0:a.HEAPU32[Ye]-Rt;Ne.push(a.UTF8ToString(Rt,qt))}We.push([ue,Be,Ne,"cpu"])}else if(Ut==="gpu-buffer"&&Ge>0){let Ne=a.jsepGetBuffer;if(!Ne)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let Ye=Ne(le),mt=tr(ne);if(mt===void 0||!Hi(ue))throw new Error(`Unsupported data type: ${ue}`);ie=!0,We.push([ue,Be,{gpuBuffer:Ye,download:a.jsepCreateDownloader(Ye,Ge*mt,ue),dispose:()=>{a._OrtReleaseTensor(ae)}},"gpu-buffer"])}else{let Ne=bn(ue),Ye=new Ne(Ge);new Uint8Array(Ye.buffer,Ye.byteOffset,Ye.byteLength).set(a.HEAPU8.subarray(le,le+Ye.byteLength)),We.push([ue,Be,Ye,"cpu"])}}finally{a.stackRestore(Ae),ue==="string"&&le&&a._free(le),ie||a._OrtReleaseTensor(ae)}}return y&&!w&&(a._OrtClearBoundOutputs(y.handle),ar.set(e,[p,h,d,y,w,!1])),We}finally{a.stackRestore(O),x.forEach(Q=>a._OrtReleaseTensor(Q)),E.forEach(Q=>a._OrtReleaseTensor(Q)),P.forEach(Q=>a._free(Q)),A!==0&&a._OrtReleaseRunOptions(A),I.forEach(Q=>a._free(Q))}},Yd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error("invalid session id");let o=r[0],i=t._OrtEndProfiling(o);i===0&&Ue("Can\'t get an profile file name."),t._OrtFree(i)},Zd=e=>{let t=[];for(let r of e){let o=r[2];!Array.isArray(o)&&"buffer"in o&&t.push(o.buffer)}return t};self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":Wi(r.wasm).then(()=>{Ld(r).then(()=>{postMessage({type:t})},o=>{postMessage({type:t,err:o})})},o=>{postMessage({type:t,err:o})});break;case"init-ep":{let{epName:o,env:i}=r;Fd(i,o).then(()=>{postMessage({type:t})},u=>{postMessage({type:t,err:u})});break}case"copy-from":{let{buffer:o}=r,i=Xo(o);postMessage({type:t,out:i});break}case"create":{let{model:o,options:i}=r;qd(o,i).then(u=>{postMessage({type:t,out:u})},u=>{postMessage({type:t,err:u})});break}case"release":jd(r),postMessage({type:t});break;case"run":{let{sessionId:o,inputIndices:i,inputs:u,outputIndices:a,options:c}=r;Kd(o,i,u,a,new Array(a.length).fill(null),c).then(p=>{p.some(h=>h[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:p},Zd([...u,...p]))},p=>{postMessage({type:t,err:p})});break}case"end-profiling":Yd(r),postMessage({type:t});break;default:}}catch(o){postMessage({type:t,err:o})}};})();\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n'}),gr,St,sn,pi,mi,Co,Io,zr,Br,pf,ci,Wd,Nd,Vd,Hd,Gd,Ld,Fd,To=j(()=>{var e1;_t(),Md(),Or(),gr=()=>!!ke.wasm.proxy&&typeof document<"u",sn=!1,pi=!1,mi=!1,Io=new Map,zr=(_g,t1)=>{let r1=Io.get(_g);r1?r1.push(t1):Io.set(_g,[t1])},Br=()=>{if(sn||!pi||mi||!St)throw new Error("worker not ready")},pf=_g=>{switch(_g.data.type){case"init-wasm":sn=!1,_g.data.err?(mi=!0,Co[1](_g.data.err)):(pi=!0,Co[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t1=Io.get(_g.data.type);_g.data.err?t1.shift()[1](_g.data.err):t1.shift()[0](_g.data.out);break}}},ci=typeof document<"u"?(e1=document==null?void 0:document.currentScript)==null?void 0:e1.src:void 0,Wd=async()=>{if(!pi){if(sn)throw new Error("multiple calls to 'initWasm()' detected.");if(mi)throw new Error("previous call to 'initWasm()' failed.");if(sn=!0,gr())return ke.wasm.wasmPaths===void 0&&ci&&ci.indexOf("blob:")!==0&&(ke.wasm.wasmPaths=ci.substr(0,+ci.lastIndexOf("/")+1)),new Promise((_g,t1)=>{St==null||St.terminate();let r1=URL.createObjectURL(new Blob([Ud()],{type:"text/javascript"}));St=new Worker(r1,{name:"ort-wasm-proxy-worker"}),St.onerror=i1=>t1(i1),St.onmessage=pf,URL.revokeObjectURL(r1),Co=[_g,t1];let n1={type:"init-wasm",in:ke};St.postMessage(n1)});try{await Fa(ke.wasm),await kd(ke),pi=!0}catch(_g){throw mi=!0,_g}finally{sn=!1}}},Nd=async _g=>{if(gr())return Br(),new Promise((t1,r1)=>{zr("init-ep",[t1,r1]);let n1={type:"init-ep",in:{epName:_g,env:ke}};St.postMessage(n1)});await Od(ke,_g)},Vd=async _g=>gr()?(Br(),new Promise((t1,r1)=>{zr("copy-from",[t1,r1]);let n1={type:"copy-from",in:{buffer:_g}};St.postMessage(n1,[_g.buffer])})):So(_g),Hd=async(_g,t1)=>{if(gr()){if(t1!=null&&t1.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Br(),new Promise((r1,n1)=>{zr("create",[r1,n1]);let i1={type:"create",in:{model:_g,options:{...t1}}},o1=[];_g instanceof Uint8Array&&o1.push(_g.buffer),St.postMessage(i1,o1)})}else return Pd(_g,t1)},Gd=async _g=>{if(gr())return Br(),new Promise((t1,r1)=>{zr("release",[t1,r1]);let n1={type:"release",in:_g};St.postMessage(n1)});Rd(_g)},Ld=async(_g,t1,r1,n1,i1,o1)=>{if(gr()){if(r1.some(a1=>a1[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i1.some(a1=>a1))throw new Error("pre-allocated output tensor is not supported for proxy.");return Br(),new Promise((a1,u1)=>{zr("run",[a1,u1]);let s1=r1,l1={type:"run",in:{sessionId:_g,inputIndices:t1,inputs:s1,outputIndices:n1,options:o1}};St.postMessage(l1,Dd(s1))})}else return zd(_g,t1,r1,n1,i1,o1)},Fd=async _g=>{if(gr())return Br(),new Promise((t1,r1)=>{zr("end-profiling",[t1,r1]);let n1={type:"end-profiling",in:_g};St.postMessage(n1)});Bd(_g)}}),qd,mf,fi,jd=j(()=>{_t(),To(),ye(),qi(),qd=(e1,_g)=>{switch(e1.location){case"cpu":return[e1.type,e1.dims,e1.data,"cpu"];case"gpu-buffer":return[e1.type,e1.dims,{gpuBuffer:e1.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e1.location} for ${_g()}`)}},mf=e1=>{switch(e1[3]){case"cpu":return new tt(e1[0],e1[2],e1[1]);case"gpu-buffer":{let _g=e1[0];if(!Vn(_g))throw new Error(`not supported data type: ${_g} for deserializing GPU tensor`);let{gpuBuffer:t1,download:r1,dispose:n1}=e1[2];return tt.fromGpuBuffer(t1,{dataType:_g,dims:e1[1],download:r1,dispose:n1})}default:throw new Error(`invalid data location: ${e1[3]}`)}},fi=class{async fetchModelAndCopyToWasmMemory(e1){return Vd(await tn(e1))}async loadModel(e1,_g){yt();let t1;typeof e1=="string"?typeof process<"u"&&process.versions&&process.versions.node?t1=await tn(e1):t1=await this.fetchModelAndCopyToWasmMemory(e1):t1=e1,[this.sessionId,this.inputNames,this.outputNames]=await Hd(t1,_g),ut()}async dispose(){return Gd(this.sessionId)}async run(e1,_g,t1){yt();let r1=[],n1=[];Object.entries(e1).forEach(c1=>{let d1=c1[0],h1=c1[1],f1=this.inputNames.indexOf(d1);if(f1===-1)throw new Error(`invalid input '${d1}'`);r1.push(h1),n1.push(f1)});let i1=[],o1=[];Object.entries(_g).forEach(c1=>{let d1=c1[0],h1=c1[1],f1=this.outputNames.indexOf(d1);if(f1===-1)throw new Error(`invalid output '${d1}'`);i1.push(h1),o1.push(f1)});let a1=r1.map((c1,d1)=>qd(c1,()=>`input "${this.inputNames[n1[d1]]}"`)),u1=i1.map((c1,d1)=>c1?qd(c1,()=>`output "${this.outputNames[o1[d1]]}"`):null),s1=await Ld(this.sessionId,n1,a1,o1,u1,t1),l1={};for(let c1=0;c1<s1.length;c1++)l1[this.outputNames[o1[c1]]]=i1[c1]??mf(s1[c1]);return ut(),l1}startProfiling(){}endProfiling(){Fd(this.sessionId)}}}),ff,hi,Kd=j(()=>{_t(),To(),jd(),ff=()=>{if((typeof ke.wasm.initTimeout!="number"||ke.wasm.initTimeout<0)&&(ke.wasm.initTimeout=0),typeof ke.wasm.simd!="boolean"&&(ke.wasm.simd=!0),typeof ke.wasm.proxy!="boolean"&&(ke.wasm.proxy=!1),typeof ke.wasm.trace!="boolean"&&(ke.wasm.trace=!1),typeof ke.wasm.numThreads!="number"||!Number.isInteger(ke.wasm.numThreads)||ke.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(ke.wasm.numThreads=1);let e1=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;ke.wasm.numThreads=Math.min(4,Math.ceil((e1||1)/2))}},hi=class{async init(e1){ff(),await Wd(),await Nd(e1)}async createInferenceSessionHandler(e1,_g){let t1=new fi;return await t1.loadModel(e1,_g),Promise.resolve(t1)}}}),Yd={};kr(Yd,{wasmBackend:()=>hf});var hf,Xd=j(()=>{Kd(),hf=new hi});_t();_t();_t();var ka="1.18.0",h$=Bi;{let e1=(Xd(),sr(Yd)).wasmBackend;lr("webgpu",e1,5),lr("webnn",e1,5),lr("cpu",e1,10),lr("wasm",e1,10)}Object.defineProperty(ke.versions,"web",{value:ka,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ort_gpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return uc},get TRACE(){return Bn},get TRACE_FUNC_BEGIN(){return yt},get TRACE_FUNC_END(){return ut},get Tensor(){return tt},get TrainingSession(){return dc},default:h$,get env(){return ke},get registerBackend(){return lr}},Symbol.toStringTag,{value:"Module"}));var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(e1,_g)=>function(){return _g||(0,e1[__getOwnPropNames(e1)[0]])((_g={exports:{}}).exports,_g),_g.exports},__copyProps=(e1,_g,t1,r1)=>{if(_g&&typeof _g=="object"||typeof _g=="function")for(let n1 of __getOwnPropNames(_g))!__hasOwnProp.call(e1,n1)&&n1!==t1&&__defProp(e1,n1,{get:()=>_g[n1],enumerable:!(r1=__getOwnPropDesc(_g,n1))||r1.enumerable});return e1},__toESM=(e1,_g,t1)=>(t1=e1!=null?__create(__getProtoOf(e1)):{},__copyProps(!e1||!e1.__esModule?__defProp(t1,"default",{value:e1,enumerable:!0}):t1,e1)),require_lodash=__commonJS({"../../node_modules/lodash/lodash.js"(e1,_g){(function(){var t1,r1="4.17.21",n1=200,i1="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o1="Expected a function",a1="Invalid `variable` option passed into `_.template`",u1="__lodash_hash_undefined__",s1=500,l1="__lodash_placeholder__",c1=1,d1=2,h1=4,f1=1,g1=2,v1=1,$1=2,y1=4,_1=8,E1=16,T1=32,P1=64,k1=128,N1=256,W1=512,H1=30,ty="...",ey=800,ly=16,oy=1,Q1=2,U1=3,V1=1/0,K1=9007199254740991,J1=17976931348623157e292,hy=NaN,G1=4294967295,Y1=G1-1,yy=G1>>>1,Oy=[["ary",k1],["bind",v1],["bindKey",$1],["curry",_1],["curryRight",E1],["flip",W1],["partial",T1],["partialRight",P1],["rearg",N1]],Ey="[object Arguments]",jy="[object Array]",Ay="[object AsyncFunction]",Uy="[object Boolean]",Gy="[object Date]",Wy="[object DOMException]",Yy="[object Error]",Vy="[object Function]",p0="[object GeneratorFunction]",y0="[object Map]",A0="[object Number]",lv="[object Null]",R0="[object Object]",X1="[object Promise]",fy="[object Proxy]",vy="[object RegExp]",Dy="[object Set]",Ny="[object String]",Ty="[object Symbol]",Hy="[object Undefined]",l0="[object WeakMap]",I0="[object WeakSet]",$0="[object ArrayBuffer]",iv="[object DataView]",b0="[object Float32Array]",dv="[object Float64Array]",i0="[object Int8Array]",nv="[object Int16Array]",xv="[object Int32Array]",Tv="[object Uint8Array]",qy="[object Uint8ClampedArray]",Iv="[object Uint16Array]",u0="[object Uint32Array]",ov=/\b__p \+= '';/g,z1=/\b(__p \+=) '' \+/g,ay=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cy=/&(?:amp|lt|gt|quot|#39);/g,wy=/[&<>"']/g,Cy=RegExp(cy.source),r0=RegExp(wy.source),v0=/<%-([\s\S]+?)%>/g,Q0=/<%([\s\S]+?)%>/g,hv=/<%=([\s\S]+?)%>/g,uv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J0=/^\w*$/,Wv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yv=/[\\^$.*+?()[\]{}|]/g,gy=RegExp(yv.source),T0=/^\s+/,C0=/\s/,q0=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hv=/\{\n\/\* \[wrapped with (.+)\] \*/,Cv=/,? & /,$$=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,b$=/[()=,{}\[\]\/\s]/,I$=/\\(\\)?/g,Lv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,u$=/\w*$/,sy=/^[-+]0x[0-9a-f]+$/i,Fy=/^0b[01]+$/i,e0=/^\[object .+?Constructor\]$/,E0=/^0o[0-7]+$/i,D0=/^(?:0|[1-9]\d*)$/,sv=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,B0=/($^)/,P0=/['\n\r\u2028\u2029\\]/g,H0="\\ud800-\\udfff",pv="\\u0300-\\u036f",Z0="\\ufe20-\\ufe2f",cv="\\u20d0-\\u20ff",x0=pv+Z0+cv,ev="\\u2700-\\u27bf",Dv="a-z\\xdf-\\xf6\\xf8-\\xff",fv="\\xac\\xb1\\xd7\\xf7",n$="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f0="\\u2000-\\u206f",vv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mv="A-Z\\xc0-\\xd6\\xd8-\\xde",Gv="\\ufe0e\\ufe0f",qv=fv+n$+f0+vv,c$="['’]",U$="["+H0+"]",ex="["+qv+"]",P$="["+x0+"]",s0="\\d+",V$="["+ev+"]",c0="["+Dv+"]",k$="[^"+H0+qv+s0+ev+Dv+mv+"]",Fv="\\ud83c[\\udffb-\\udfff]",wv="(?:"+P$+"|"+Fv+")",x$="[^"+H0+"]",d$="(?:\\ud83c[\\udde6-\\uddff]){2}",w$="[\\ud800-\\udbff][\\udc00-\\udfff]",Ov="["+mv+"]",M$="\\u200d",Pv="(?:"+c0+"|"+k$+")",Nv="(?:"+Ov+"|"+k$+")",_$="(?:"+c$+"(?:d|ll|m|re|s|t|ve))?",Kv="(?:"+c$+"(?:D|LL|M|RE|S|T|VE))?",R1=wv+"?",b1="["+Gv+"]?",S1="(?:"+M$+"(?:"+[x$,d$,w$].join("|")+")"+b1+R1+")*",A1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",M1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",F1=b1+R1+S1,ry="(?:"+[V$,d$,w$].join("|")+")"+F1,_y="(?:"+[x$+P$+"?",P$,d$,w$,U$].join("|")+")",ky=RegExp(c$,"g"),zy=RegExp(P$,"g"),By=RegExp(Fv+"(?="+Fv+")|"+_y+F1,"g"),a0=RegExp([Ov+"?"+c0+"+"+_$+"(?="+[ex,Ov,"$"].join("|")+")",Nv+"+"+Kv+"(?="+[ex,Ov+Pv,"$"].join("|")+")",Ov+"?"+Pv+"+"+_$,Ov+"+"+Kv,M1,A1,s0,ry].join("|"),"g"),N0=RegExp("["+M$+H0+x0+Gv+"]"),my=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,py=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xy=-1,Qy={};Qy[b0]=Qy[dv]=Qy[i0]=Qy[nv]=Qy[xv]=Qy[Tv]=Qy[qy]=Qy[Iv]=Qy[u0]=!0,Qy[Ey]=Qy[jy]=Qy[$0]=Qy[Uy]=Qy[iv]=Qy[Gy]=Qy[Yy]=Qy[Vy]=Qy[y0]=Qy[A0]=Qy[R0]=Qy[vy]=Qy[Dy]=Qy[Ny]=Qy[l0]=!1;var j0={};j0[Ey]=j0[jy]=j0[$0]=j0[iv]=j0[Uy]=j0[Gy]=j0[b0]=j0[dv]=j0[i0]=j0[nv]=j0[xv]=j0[y0]=j0[A0]=j0[R0]=j0[vy]=j0[Dy]=j0[Ny]=j0[Ty]=j0[Tv]=j0[qy]=j0[Iv]=j0[u0]=!0,j0[Yy]=j0[Vy]=j0[l0]=!1;var D$={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Yw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jw=parseFloat,fw=parseInt,hw=typeof global=="object"&&global&&global.Object===Object&&global,mw=typeof self=="object"&&self&&self.Object===Object&&self,_v=hw||mw||Function("return this")(),Ox=typeof e1=="object"&&e1&&!e1.nodeType&&e1,W$=Ox&&typeof _g=="object"&&_g&&!_g.nodeType&&_g,gw=W$&&W$.exports===Ox,zx=gw&&hw.process,Zv=function(){try{var uy=W$&&W$.require&&W$.require("util").types;return uy||zx&&zx.binding&&zx.binding("util")}catch{}}(),yw=Zv&&Zv.isArrayBuffer,e2=Zv&&Zv.isDate,vw=Zv&&Zv.isMap,$w=Zv&&Zv.isRegExp,bw=Zv&&Zv.isSet,t2=Zv&&Zv.isTypedArray;function Yv(uy,Sy,$y){switch($y.length){case 0:return uy.call(Sy);case 1:return uy.call(Sy,$y[0]);case 2:return uy.call(Sy,$y[0],$y[1]);case 3:return uy.call(Sy,$y[0],$y[1],$y[2])}return uy.apply(Sy,$y)}function r2(uy,Sy,$y,t0){for(var _0=-1,K0=uy==null?0:uy.length;++_0<K0;){var Av=uy[_0];Sy(t0,Av,$y(Av),uy)}return t0}function Xv(uy,Sy){for(var $y=-1,t0=uy==null?0:uy.length;++$y<t0&&Sy(uy[$y],$y,uy)!==!1;);return uy}function Ux(uy,Sy){for(var $y=uy==null?0:uy.length;$y--&&Sy(uy[$y],$y,uy)!==!1;);return uy}function n2(uy,Sy){for(var $y=-1,t0=uy==null?0:uy.length;++$y<t0;)if(!Sy(uy[$y],$y,uy))return!1;return!0}function H$(uy,Sy){for(var $y=-1,t0=uy==null?0:uy.length,_0=0,K0=[];++$y<t0;){var Av=uy[$y];Sy(Av,$y,uy)&&(K0[_0++]=Av)}return K0}function n0(uy,Sy){var $y=uy==null?0:uy.length;return!!$y&&G$(uy,Sy,0)>-1}function Vx(uy,Sy,$y){for(var t0=-1,_0=uy==null?0:uy.length;++t0<_0;)if($y(Sy,uy[t0]))return!0;return!1}function tv(uy,Sy){for(var $y=-1,t0=uy==null?0:uy.length,_0=Array(t0);++$y<t0;)_0[$y]=Sy(uy[$y],$y,uy);return _0}function p$(uy,Sy){for(var $y=-1,t0=Sy.length,_0=uy.length;++$y<t0;)uy[_0+$y]=Sy[$y];return uy}function i$(uy,Sy,$y,t0){var _0=-1,K0=uy==null?0:uy.length;for(t0&&K0&&($y=uy[++_0]);++_0<K0;)$y=Sy($y,uy[_0],_0,uy);return $y}function i2(uy,Sy,$y,t0){var _0=uy==null?0:uy.length;for(t0&&_0&&($y=uy[--_0]);_0--;)$y=Sy($y,uy[_0],_0,uy);return $y}function Wx(uy,Sy){for(var $y=-1,t0=uy==null?0:uy.length;++$y<t0;)if(Sy(uy[$y],$y,uy))return!0;return!1}var xw=Hx("length");function ww(uy){return uy.split("")}function o2(uy){return uy.match($$)||[]}function _w(uy,Sy,$y){var t0;return $y(uy,function(_0,K0,Av){if(Sy(_0,K0,Av))return t0=K0,!1}),t0}function tx(uy,Sy,$y,t0){for(var _0=uy.length,K0=$y+(t0?1:-1);t0?K0--:++K0<_0;)if(Sy(uy[K0],K0,uy))return K0;return-1}function G$(uy,Sy,$y){return Sy===Sy?gT(uy,Sy,$y):tx(uy,Ew,$y)}function Sw(uy,Sy,$y,t0){for(var _0=$y-1,K0=uy.length;++_0<K0;)if(t0(uy[_0],Sy))return _0;return-1}function Ew(uy){return uy!==uy}function Tw(uy,Sy){var $y=uy==null?0:uy.length;return $y?fx(uy,Sy)/$y:hy}function Hx(uy){return function(Sy){return Sy==null?t1:Sy[uy]}}function Gx(uy){return function(Sy){return uy==null?t1:uy[Sy]}}function Cw(uy,Sy,$y,t0,_0){return _0(uy,function(K0,Av,av){$y=t0?(t0=!1,K0):Sy($y,K0,Av,av)}),$y}function Z2(uy,Sy){var $y=uy.length;for(uy.sort(Sy);$y--;)uy[$y]=uy[$y].value;return uy}function fx(uy,Sy){for(var $y,t0=-1,_0=uy.length;++t0<_0;){var K0=Sy(uy[t0]);K0!==t1&&($y=$y===t1?K0:$y+K0)}return $y}function qx(uy,Sy){for(var $y=-1,t0=Array(uy);++$y<uy;)t0[$y]=Sy($y);return t0}function w1(uy,Sy){return tv(Sy,function($y){return[$y,uy[$y]]})}function C1(uy){return uy&&uy.slice(0,sS(uy)+1).replace(T0,"")}function I1(uy){return function(Sy){return uy(Sy)}}function j1(uy,Sy){return tv(Sy,function($y){return uy[$y]})}function q1(uy,Sy){return uy.has(Sy)}function iy(uy,Sy){for(var $y=-1,t0=uy.length;++$y<t0&&G$(Sy,uy[$y],0)>-1;);return $y}function xy(uy,Sy){for(var $y=uy.length;$y--&&G$(Sy,uy[$y],0)>-1;);return $y}function Ly(uy,Sy){for(var $y=uy.length,t0=0;$y--;)uy[$y]===Sy&&++t0;return t0}var Jy=Gx(D$),Ky=Gx(Yw);function d0(uy){return"\\"+Qw[uy]}function G0(uy,Sy){return uy==null?t1:uy[Sy]}function V0(uy){return N0.test(uy)}function by(uy){return my.test(uy)}function w0(uy){for(var Sy,$y=[];!(Sy=uy.next()).done;)$y.push(Sy.value);return $y}function z0(uy){var Sy=-1,$y=Array(uy.size);return uy.forEach(function(t0,_0){$y[++Sy]=[_0,t0]}),$y}function q$(uy,Sy){return function($y){return uy(Sy($y))}}function N$(uy,Sy){for(var $y=-1,t0=uy.length,_0=0,K0=[];++$y<t0;){var Av=uy[$y];(Av===Sy||Av===l1)&&(uy[$y]=l1,K0[_0++]=$y)}return K0}function s2(uy){var Sy=-1,$y=Array(uy.size);return uy.forEach(function(t0){$y[++Sy]=t0}),$y}function mT(uy){var Sy=-1,$y=Array(uy.size);return uy.forEach(function(t0){$y[++Sy]=[t0,t0]}),$y}function gT(uy,Sy,$y){for(var t0=$y-1,_0=uy.length;++t0<_0;)if(uy[t0]===Sy)return t0;return-1}function yT(uy,Sy,$y){for(var t0=$y+1;t0--;)if(uy[t0]===Sy)return t0;return t0}function Kx(uy){return V0(uy)?$T(uy):xw(uy)}function j$(uy){return V0(uy)?bT(uy):ww(uy)}function sS(uy){for(var Sy=uy.length;Sy--&&C0.test(uy.charAt(Sy)););return Sy}var vT=Gx(Xw);function $T(uy){for(var Sy=By.lastIndex=0;By.test(uy);)++Sy;return Sy}function bT(uy){return uy.match(By)||[]}function xT(uy){return uy.match(a0)||[]}var wT=function uy(Sy){Sy=Sy==null?_v:hx.defaults(_v.Object(),Sy,hx.pick(_v,py));var $y=Sy.Array,t0=Sy.Date,_0=Sy.Error,K0=Sy.Function,Av=Sy.Math,av=Sy.Object,Y2=Sy.RegExp,_T=Sy.String,S$=Sy.TypeError,a2=$y.prototype,ST=K0.prototype,Zx=av.prototype,l2=Sy["__core-js_shared__"],u2=ST.toString,rv=Zx.hasOwnProperty,ET=0,aS=function(){var p1=/[^.]+$/.exec(l2&&l2.keys&&l2.keys.IE_PROTO||"");return p1?"Symbol(src)_1."+p1:""}(),c2=Zx.toString,TT=u2.call(av),CT=_v._,OT=Y2("^"+u2.call(rv).replace(yv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),d2=gw?Sy.Buffer:t1,mx=Sy.Symbol,p2=Sy.Uint8Array,lS=d2?d2.allocUnsafe:t1,f2=q$(av.getPrototypeOf,av),uS=av.create,cS=Zx.propertyIsEnumerable,h2=a2.splice,dS=mx?mx.isConcatSpreadable:t1,Ow=mx?mx.iterator:t1,Ax=mx?mx.toStringTag:t1,m2=function(){try{var p1=Mx(av,"defineProperty");return p1({},"",{}),p1}catch{}}(),AT=Sy.clearTimeout!==_v.clearTimeout&&Sy.clearTimeout,RT=t0&&t0.now!==_v.Date.now&&t0.now,IT=Sy.setTimeout!==_v.setTimeout&&Sy.setTimeout,g2=Av.ceil,y2=Av.floor,X2=av.getOwnPropertySymbols,PT=d2?d2.isBuffer:t1,pS=Sy.isFinite,kT=a2.join,MT=q$(av.keys,av),Rv=Av.max,Bv=Av.min,DT=t0.now,NT=Sy.parseInt,fS=Av.random,jT=a2.reverse,Q2=Mx(Sy,"DataView"),Aw=Mx(Sy,"Map"),J2=Mx(Sy,"Promise"),Yx=Mx(Sy,"Set"),Rw=Mx(Sy,"WeakMap"),Iw=Mx(av,"create"),v2=Rw&&new Rw,Xx={},LT=Dx(Q2),FT=Dx(Aw),BT=Dx(J2),zT=Dx(Yx),UT=Dx(Rw),$2=mx?mx.prototype:t1,Pw=$2?$2.valueOf:t1,hS=$2?$2.toString:t1;function L1(p1){if($v(p1)&&!S0(p1)&&!(p1 instanceof U0)){if(p1 instanceof E$)return p1;if(rv.call(p1,"__wrapped__"))return mE(p1)}return new E$(p1)}var Qx=function(){function p1(){}return function(m1){if(!gv(m1))return{};if(uS)return uS(m1);p1.prototype=m1;var x1=new p1;return p1.prototype=t1,x1}}();function b2(){}function E$(p1,m1){this.__wrapped__=p1,this.__actions__=[],this.__chain__=!!m1,this.__index__=0,this.__values__=t1}L1.templateSettings={escape:v0,evaluate:Q0,interpolate:hv,variable:"",imports:{_:L1}},L1.prototype=b2.prototype,L1.prototype.constructor=L1,E$.prototype=Qx(b2.prototype),E$.prototype.constructor=E$;function U0(p1){this.__wrapped__=p1,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G1,this.__views__=[]}function VT(){var p1=new U0(this.__wrapped__);return p1.__actions__=o$(this.__actions__),p1.__dir__=this.__dir__,p1.__filtered__=this.__filtered__,p1.__iteratees__=o$(this.__iteratees__),p1.__takeCount__=this.__takeCount__,p1.__views__=o$(this.__views__),p1}function WT(){if(this.__filtered__){var p1=new U0(this);p1.__dir__=-1,p1.__filtered__=!0}else p1=this.clone(),p1.__dir__*=-1;return p1}function HT(){var p1=this.__wrapped__.value(),m1=this.__dir__,x1=S0(p1),O1=m1<0,D1=x1?p1.length:0,B1=n3(0,D1,this.__views__),Z1=B1.start,ny=B1.end,dy=ny-Z1,Ry=O1?ny:Z1-1,Iy=this.__iteratees__,My=Iy.length,Zy=0,o0=Bv(dy,this.__takeCount__);if(!x1||!O1&&D1==dy&&o0==dy)return LS(p1,this.__actions__);var m0=[];e:for(;dy--&&Zy<o0;){Ry+=m1;for(var k0=-1,g0=p1[Ry];++k0<My;){var F0=Iy[k0],W0=F0.iteratee,g$=F0.type,e$=W0(g0);if(g$==Q1)g0=e$;else if(!e$){if(g$==oy)continue e;break e}}m0[Zy++]=g0}return m0}U0.prototype=Qx(b2.prototype),U0.prototype.constructor=U0;function Rx(p1){var m1=-1,x1=p1==null?0:p1.length;for(this.clear();++m1<x1;){var O1=p1[m1];this.set(O1[0],O1[1])}}function GT(){this.__data__=Iw?Iw(null):{},this.size=0}function qT(p1){var m1=this.has(p1)&&delete this.__data__[p1];return this.size-=m1?1:0,m1}function KT(p1){var m1=this.__data__;if(Iw){var x1=m1[p1];return x1===u1?t1:x1}return rv.call(m1,p1)?m1[p1]:t1}function ZT(p1){var m1=this.__data__;return Iw?m1[p1]!==t1:rv.call(m1,p1)}function YT(p1,m1){var x1=this.__data__;return this.size+=this.has(p1)?0:1,x1[p1]=Iw&&m1===t1?u1:m1,this}Rx.prototype.clear=GT,Rx.prototype.delete=qT,Rx.prototype.get=KT,Rx.prototype.has=ZT,Rx.prototype.set=YT;function rx(p1){var m1=-1,x1=p1==null?0:p1.length;for(this.clear();++m1<x1;){var O1=p1[m1];this.set(O1[0],O1[1])}}function XT(){this.__data__=[],this.size=0}function QT(p1){var m1=this.__data__,x1=x2(m1,p1);if(x1<0)return!1;var O1=m1.length-1;return x1==O1?m1.pop():h2.call(m1,x1,1),--this.size,!0}function JT(p1){var m1=this.__data__,x1=x2(m1,p1);return x1<0?t1:m1[x1][1]}function eC(p1){return x2(this.__data__,p1)>-1}function tC(p1,m1){var x1=this.__data__,O1=x2(x1,p1);return O1<0?(++this.size,x1.push([p1,m1])):x1[O1][1]=m1,this}rx.prototype.clear=XT,rx.prototype.delete=QT,rx.prototype.get=JT,rx.prototype.has=eC,rx.prototype.set=tC;function nx(p1){var m1=-1,x1=p1==null?0:p1.length;for(this.clear();++m1<x1;){var O1=p1[m1];this.set(O1[0],O1[1])}}function rC(){this.size=0,this.__data__={hash:new Rx,map:new(Aw||rx),string:new Rx}}function nC(p1){var m1=k2(this,p1).delete(p1);return this.size-=m1?1:0,m1}function iC(p1){return k2(this,p1).get(p1)}function oC(p1){return k2(this,p1).has(p1)}function sC(p1,m1){var x1=k2(this,p1),O1=x1.size;return x1.set(p1,m1),this.size+=x1.size==O1?0:1,this}nx.prototype.clear=rC,nx.prototype.delete=nC,nx.prototype.get=iC,nx.prototype.has=oC,nx.prototype.set=sC;function Ix(p1){var m1=-1,x1=p1==null?0:p1.length;for(this.__data__=new nx;++m1<x1;)this.add(p1[m1])}function aC(p1){return this.__data__.set(p1,u1),this}function lC(p1){return this.__data__.has(p1)}Ix.prototype.add=Ix.prototype.push=aC,Ix.prototype.has=lC;function L$(p1){var m1=this.__data__=new rx(p1);this.size=m1.size}function uC(){this.__data__=new rx,this.size=0}function cC(p1){var m1=this.__data__,x1=m1.delete(p1);return this.size=m1.size,x1}function dC(p1){return this.__data__.get(p1)}function pC(p1){return this.__data__.has(p1)}function fC(p1,m1){var x1=this.__data__;if(x1 instanceof rx){var O1=x1.__data__;if(!Aw||O1.length<n1-1)return O1.push([p1,m1]),this.size=++x1.size,this;x1=this.__data__=new nx(O1)}return x1.set(p1,m1),this.size=x1.size,this}L$.prototype.clear=uC,L$.prototype.delete=cC,L$.prototype.get=dC,L$.prototype.has=pC,L$.prototype.set=fC;function mS(p1,m1){var x1=S0(p1),O1=!x1&&Nx(p1),D1=!x1&&!O1&&bx(p1),B1=!x1&&!O1&&!D1&&rw(p1),Z1=x1||O1||D1||B1,ny=Z1?qx(p1.length,_T):[],dy=ny.length;for(var Ry in p1)(m1||rv.call(p1,Ry))&&!(Z1&&(Ry=="length"||D1&&(Ry=="offset"||Ry=="parent")||B1&&(Ry=="buffer"||Ry=="byteLength"||Ry=="byteOffset")||ax(Ry,dy)))&&ny.push(Ry);return ny}function gS(p1){var m1=p1.length;return m1?p1[c_(0,m1-1)]:t1}function hC(p1,m1){return M2(o$(p1),Px(m1,0,p1.length))}function mC(p1){return M2(o$(p1))}function e_(p1,m1,x1){(x1!==t1&&!F$(p1[m1],x1)||x1===t1&&!(m1 in p1))&&ix(p1,m1,x1)}function kw(p1,m1,x1){var O1=p1[m1];(!(rv.call(p1,m1)&&F$(O1,x1))||x1===t1&&!(m1 in p1))&&ix(p1,m1,x1)}function x2(p1,m1){for(var x1=p1.length;x1--;)if(F$(p1[x1][0],m1))return x1;return-1}function gC(p1,m1,x1,O1){return gx(p1,function(D1,B1,Z1){m1(O1,D1,x1(D1),Z1)}),O1}function yS(p1,m1){return p1&&Z$(m1,kv(m1),p1)}function yC(p1,m1){return p1&&Z$(m1,a$(m1),p1)}function ix(p1,m1,x1){m1=="__proto__"&&m2?m2(p1,m1,{configurable:!0,enumerable:!0,value:x1,writable:!0}):p1[m1]=x1}function t_(p1,m1){for(var x1=-1,O1=m1.length,D1=$y(O1),B1=p1==null;++x1<O1;)D1[x1]=B1?t1:D_(p1,m1[x1]);return D1}function Px(p1,m1,x1){return p1===p1&&(x1!==t1&&(p1=p1<=x1?p1:x1),m1!==t1&&(p1=p1>=m1?p1:m1)),p1}function T$(p1,m1,x1,O1,D1,B1){var Z1,ny=m1&c1,dy=m1&d1,Ry=m1&h1;if(x1&&(Z1=D1?x1(p1,O1,D1,B1):x1(p1)),Z1!==t1)return Z1;if(!gv(p1))return p1;var Iy=S0(p1);if(Iy){if(Z1=o3(p1),!ny)return o$(p1,Z1)}else{var My=zv(p1),Zy=My==Vy||My==p0;if(bx(p1))return zS(p1,ny);if(My==R0||My==Ey||Zy&&!D1){if(Z1=dy||Zy?{}:sE(p1),!ny)return dy?KC(p1,yC(Z1,p1)):qC(p1,yS(Z1,p1))}else{if(!j0[My])return D1?p1:{};Z1=s3(p1,My,ny)}}B1||(B1=new L$);var o0=B1.get(p1);if(o0)return o0;B1.set(p1,Z1),DE(p1)?p1.forEach(function(g0){Z1.add(T$(g0,m1,x1,g0,p1,B1))}):kE(p1)&&p1.forEach(function(g0,F0){Z1.set(F0,T$(g0,m1,x1,F0,p1,B1))});var m0=Ry?dy?x_:b_:dy?a$:kv,k0=Iy?t1:m0(p1);return Xv(k0||p1,function(g0,F0){k0&&(F0=g0,g0=p1[F0]),kw(Z1,F0,T$(g0,m1,x1,F0,p1,B1))}),Z1}function vC(p1){var m1=kv(p1);return function(x1){return vS(x1,p1,m1)}}function vS(p1,m1,x1){var O1=x1.length;if(p1==null)return!O1;for(p1=av(p1);O1--;){var D1=x1[O1],B1=m1[D1],Z1=p1[D1];if(Z1===t1&&!(D1 in p1)||!B1(Z1))return!1}return!0}function $S(p1,m1,x1){if(typeof p1!="function")throw new S$(o1);return Bw(function(){p1.apply(t1,x1)},m1)}function Mw(p1,m1,x1,O1){var D1=-1,B1=n0,Z1=!0,ny=p1.length,dy=[],Ry=m1.length;if(!ny)return dy;x1&&(m1=tv(m1,I1(x1))),O1?(B1=Vx,Z1=!1):m1.length>=n1&&(B1=q1,Z1=!1,m1=new Ix(m1));e:for(;++D1<ny;){var Iy=p1[D1],My=x1==null?Iy:x1(Iy);if(Iy=O1||Iy!==0?Iy:0,Z1&&My===My){for(var Zy=Ry;Zy--;)if(m1[Zy]===My)continue e;dy.push(Iy)}else B1(m1,My,O1)||dy.push(Iy)}return dy}var gx=GS(K$),bS=GS(n_,!0);function $C(p1,m1){var x1=!0;return gx(p1,function(O1,D1,B1){return x1=!!m1(O1,D1,B1),x1}),x1}function w2(p1,m1,x1){for(var O1=-1,D1=p1.length;++O1<D1;){var B1=p1[O1],Z1=m1(B1);if(Z1!=null&&(ny===t1?Z1===Z1&&!m$(Z1):x1(Z1,ny)))var ny=Z1,dy=B1}return dy}function bC(p1,m1,x1,O1){var D1=p1.length;for(x1=O0(x1),x1<0&&(x1=-x1>D1?0:D1+x1),O1=O1===t1||O1>D1?D1:O0(O1),O1<0&&(O1+=D1),O1=x1>O1?0:jE(O1);x1<O1;)p1[x1++]=m1;return p1}function xS(p1,m1){var x1=[];return gx(p1,function(O1,D1,B1){m1(O1,D1,B1)&&x1.push(O1)}),x1}function jv(p1,m1,x1,O1,D1){var B1=-1,Z1=p1.length;for(x1||(x1=l3),D1||(D1=[]);++B1<Z1;){var ny=p1[B1];m1>0&&x1(ny)?m1>1?jv(ny,m1-1,x1,O1,D1):p$(D1,ny):O1||(D1[D1.length]=ny)}return D1}var r_=qS(),wS=qS(!0);function K$(p1,m1){return p1&&r_(p1,m1,kv)}function n_(p1,m1){return p1&&wS(p1,m1,kv)}function _2(p1,m1){return H$(m1,function(x1){return lx(p1[x1])})}function kx(p1,m1){m1=vx(m1,p1);for(var x1=0,O1=m1.length;p1!=null&&x1<O1;)p1=p1[Y$(m1[x1++])];return x1&&x1==O1?p1:t1}function _S(p1,m1,x1){var O1=m1(p1);return S0(p1)?O1:p$(O1,x1(p1))}function Qv(p1){return p1==null?p1===t1?Hy:lv:Ax&&Ax in av(p1)?r3(p1):m3(p1)}function i_(p1,m1){return p1>m1}function xC(p1,m1){return p1!=null&&rv.call(p1,m1)}function wC(p1,m1){return p1!=null&&m1 in av(p1)}function _C(p1,m1,x1){return p1>=Bv(m1,x1)&&p1<Rv(m1,x1)}function o_(p1,m1,x1){for(var O1=x1?Vx:n0,D1=p1[0].length,B1=p1.length,Z1=B1,ny=$y(B1),dy=1/0,Ry=[];Z1--;){var Iy=p1[Z1];Z1&&m1&&(Iy=tv(Iy,I1(m1))),dy=Bv(Iy.length,dy),ny[Z1]=!x1&&(m1||D1>=120&&Iy.length>=120)?new Ix(Z1&&Iy):t1}Iy=p1[0];var My=-1,Zy=ny[0];e:for(;++My<D1&&Ry.length<dy;){var o0=Iy[My],m0=m1?m1(o0):o0;if(o0=x1||o0!==0?o0:0,!(Zy?q1(Zy,m0):O1(Ry,m0,x1))){for(Z1=B1;--Z1;){var k0=ny[Z1];if(!(k0?q1(k0,m0):O1(p1[Z1],m0,x1)))continue e}Zy&&Zy.push(m0),Ry.push(o0)}}return Ry}function SC(p1,m1,x1,O1){return K$(p1,function(D1,B1,Z1){m1(O1,x1(D1),B1,Z1)}),O1}function Dw(p1,m1,x1){m1=vx(m1,p1),p1=cE(p1,m1);var O1=p1==null?p1:p1[Y$(O$(m1))];return O1==null?t1:Yv(O1,p1,x1)}function SS(p1){return $v(p1)&&Qv(p1)==Ey}function EC(p1){return $v(p1)&&Qv(p1)==$0}function TC(p1){return $v(p1)&&Qv(p1)==Gy}function Nw(p1,m1,x1,O1,D1){return p1===m1?!0:p1==null||m1==null||!$v(p1)&&!$v(m1)?p1!==p1&&m1!==m1:CC(p1,m1,x1,O1,Nw,D1)}function CC(p1,m1,x1,O1,D1,B1){var Z1=S0(p1),ny=S0(m1),dy=Z1?jy:zv(p1),Ry=ny?jy:zv(m1);dy=dy==Ey?R0:dy,Ry=Ry==Ey?R0:Ry;var Iy=dy==R0,My=Ry==R0,Zy=dy==Ry;if(Zy&&bx(p1)){if(!bx(m1))return!1;Z1=!0,Iy=!1}if(Zy&&!Iy)return B1||(B1=new L$),Z1||rw(p1)?nE(p1,m1,x1,O1,D1,B1):e3(p1,m1,dy,x1,O1,D1,B1);if(!(x1&f1)){var o0=Iy&&rv.call(p1,"__wrapped__"),m0=My&&rv.call(m1,"__wrapped__");if(o0||m0){var k0=o0?p1.value():p1,g0=m0?m1.value():m1;return B1||(B1=new L$),D1(k0,g0,x1,O1,B1)}}return Zy?(B1||(B1=new L$),t3(p1,m1,x1,O1,D1,B1)):!1}function OC(p1){return $v(p1)&&zv(p1)==y0}function s_(p1,m1,x1,O1){var D1=x1.length,B1=D1,Z1=!O1;if(p1==null)return!B1;for(p1=av(p1);D1--;){var ny=x1[D1];if(Z1&&ny[2]?ny[1]!==p1[ny[0]]:!(ny[0]in p1))return!1}for(;++D1<B1;){ny=x1[D1];var dy=ny[0],Ry=p1[dy],Iy=ny[1];if(Z1&&ny[2]){if(Ry===t1&&!(dy in p1))return!1}else{var My=new L$;if(O1)var Zy=O1(Ry,Iy,dy,p1,m1,My);if(!(Zy===t1?Nw(Iy,Ry,f1|g1,O1,My):Zy))return!1}}return!0}function ES(p1){if(!gv(p1)||c3(p1))return!1;var m1=lx(p1)?OT:e0;return m1.test(Dx(p1))}function AC(p1){return $v(p1)&&Qv(p1)==vy}function RC(p1){return $v(p1)&&zv(p1)==Dy}function IC(p1){return $v(p1)&&B2(p1.length)&&!!Qy[Qv(p1)]}function TS(p1){return typeof p1=="function"?p1:p1==null?l$:typeof p1=="object"?S0(p1)?AS(p1[0],p1[1]):OS(p1):KE(p1)}function a_(p1){if(!Fw(p1))return MT(p1);var m1=[];for(var x1 in av(p1))rv.call(p1,x1)&&x1!="constructor"&&m1.push(x1);return m1}function PC(p1){if(!gv(p1))return h3(p1);var m1=Fw(p1),x1=[];for(var O1 in p1)O1=="constructor"&&(m1||!rv.call(p1,O1))||x1.push(O1);return x1}function l_(p1,m1){return p1<m1}function CS(p1,m1){var x1=-1,O1=s$(p1)?$y(p1.length):[];return gx(p1,function(D1,B1,Z1){O1[++x1]=m1(D1,B1,Z1)}),O1}function OS(p1){var m1=__(p1);return m1.length==1&&m1[0][2]?lE(m1[0][0],m1[0][1]):function(x1){return x1===p1||s_(x1,p1,m1)}}function AS(p1,m1){return E_(p1)&&aE(m1)?lE(Y$(p1),m1):function(x1){var O1=D_(x1,p1);return O1===t1&&O1===m1?N_(x1,p1):Nw(m1,O1,f1|g1)}}function S2(p1,m1,x1,O1,D1){p1!==m1&&r_(m1,function(B1,Z1){if(D1||(D1=new L$),gv(B1))kC(p1,m1,Z1,x1,S2,O1,D1);else{var ny=O1?O1(C_(p1,Z1),B1,Z1+"",p1,m1,D1):t1;ny===t1&&(ny=B1),e_(p1,Z1,ny)}},a$)}function kC(p1,m1,x1,O1,D1,B1,Z1){var ny=C_(p1,x1),dy=C_(m1,x1),Ry=Z1.get(dy);if(Ry){e_(p1,x1,Ry);return}var Iy=B1?B1(ny,dy,x1+"",p1,m1,Z1):t1,My=Iy===t1;if(My){var Zy=S0(dy),o0=!Zy&&bx(dy),m0=!Zy&&!o0&&rw(dy);Iy=dy,Zy||o0||m0?S0(ny)?Iy=ny:Sv(ny)?Iy=o$(ny):o0?(My=!1,Iy=zS(dy,!0)):m0?(My=!1,Iy=US(dy,!0)):Iy=[]:zw(dy)||Nx(dy)?(Iy=ny,Nx(ny)?Iy=LE(ny):(!gv(ny)||lx(ny))&&(Iy=sE(dy))):My=!1}My&&(Z1.set(dy,Iy),D1(Iy,dy,O1,B1,Z1),Z1.delete(dy)),e_(p1,x1,Iy)}function RS(p1,m1){var x1=p1.length;if(x1)return m1+=m1<0?x1:0,ax(m1,x1)?p1[m1]:t1}function IS(p1,m1,x1){m1.length?m1=tv(m1,function(B1){return S0(B1)?function(Z1){return kx(Z1,B1.length===1?B1[0]:B1)}:B1}):m1=[l$];var O1=-1;m1=tv(m1,I1(h0()));var D1=CS(p1,function(B1,Z1,ny){var dy=tv(m1,function(Ry){return Ry(B1)});return{criteria:dy,index:++O1,value:B1}});return Z2(D1,function(B1,Z1){return GC(B1,Z1,x1)})}function MC(p1,m1){return PS(p1,m1,function(x1,O1){return N_(p1,O1)})}function PS(p1,m1,x1){for(var O1=-1,D1=m1.length,B1={};++O1<D1;){var Z1=m1[O1],ny=kx(p1,Z1);x1(ny,Z1)&&jw(B1,vx(Z1,p1),ny)}return B1}function DC(p1){return function(m1){return kx(m1,p1)}}function u_(p1,m1,x1,O1){var D1=O1?Sw:G$,B1=-1,Z1=m1.length,ny=p1;for(p1===m1&&(m1=o$(m1)),x1&&(ny=tv(p1,I1(x1)));++B1<Z1;)for(var dy=0,Ry=m1[B1],Iy=x1?x1(Ry):Ry;(dy=D1(ny,Iy,dy,O1))>-1;)ny!==p1&&h2.call(ny,dy,1),h2.call(p1,dy,1);return p1}function kS(p1,m1){for(var x1=p1?m1.length:0,O1=x1-1;x1--;){var D1=m1[x1];if(x1==O1||D1!==B1){var B1=D1;ax(D1)?h2.call(p1,D1,1):f_(p1,D1)}}return p1}function c_(p1,m1){return p1+y2(fS()*(m1-p1+1))}function NC(p1,m1,x1,O1){for(var D1=-1,B1=Rv(g2((m1-p1)/(x1||1)),0),Z1=$y(B1);B1--;)Z1[O1?B1:++D1]=p1,p1+=x1;return Z1}function d_(p1,m1){var x1="";if(!p1||m1<1||m1>K1)return x1;do m1%2&&(x1+=p1),m1=y2(m1/2),m1&&(p1+=p1);while(m1);return x1}function L0(p1,m1){return O_(uE(p1,m1,l$),p1+"")}function jC(p1){return gS(nw(p1))}function LC(p1,m1){var x1=nw(p1);return M2(x1,Px(m1,0,x1.length))}function jw(p1,m1,x1,O1){if(!gv(p1))return p1;m1=vx(m1,p1);for(var D1=-1,B1=m1.length,Z1=B1-1,ny=p1;ny!=null&&++D1<B1;){var dy=Y$(m1[D1]),Ry=x1;if(dy==="__proto__"||dy==="constructor"||dy==="prototype")return p1;if(D1!=Z1){var Iy=ny[dy];Ry=O1?O1(Iy,dy,ny):t1,Ry===t1&&(Ry=gv(Iy)?Iy:ax(m1[D1+1])?[]:{})}kw(ny,dy,Ry),ny=ny[dy]}return p1}var MS=v2?function(p1,m1){return v2.set(p1,m1),p1}:l$,FC=m2?function(p1,m1){return m2(p1,"toString",{configurable:!0,enumerable:!1,value:L_(m1),writable:!0})}:l$;function BC(p1){return M2(nw(p1))}function C$(p1,m1,x1){var O1=-1,D1=p1.length;m1<0&&(m1=-m1>D1?0:D1+m1),x1=x1>D1?D1:x1,x1<0&&(x1+=D1),D1=m1>x1?0:x1-m1>>>0,m1>>>=0;for(var B1=$y(D1);++O1<D1;)B1[O1]=p1[O1+m1];return B1}function zC(p1,m1){var x1;return gx(p1,function(O1,D1,B1){return x1=m1(O1,D1,B1),!x1}),!!x1}function E2(p1,m1,x1){var O1=0,D1=p1==null?O1:p1.length;if(typeof m1=="number"&&m1===m1&&D1<=yy){for(;O1<D1;){var B1=O1+D1>>>1,Z1=p1[B1];Z1!==null&&!m$(Z1)&&(x1?Z1<=m1:Z1<m1)?O1=B1+1:D1=B1}return D1}return p_(p1,m1,l$,x1)}function p_(p1,m1,x1,O1){var D1=0,B1=p1==null?0:p1.length;if(B1===0)return 0;m1=x1(m1);for(var Z1=m1!==m1,ny=m1===null,dy=m$(m1),Ry=m1===t1;D1<B1;){var Iy=y2((D1+B1)/2),My=x1(p1[Iy]),Zy=My!==t1,o0=My===null,m0=My===My,k0=m$(My);if(Z1)var g0=O1||m0;else Ry?g0=m0&&(O1||Zy):ny?g0=m0&&Zy&&(O1||!o0):dy?g0=m0&&Zy&&!o0&&(O1||!k0):o0||k0?g0=!1:g0=O1?My<=m1:My<m1;g0?D1=Iy+1:B1=Iy}return Bv(B1,Y1)}function DS(p1,m1){for(var x1=-1,O1=p1.length,D1=0,B1=[];++x1<O1;){var Z1=p1[x1],ny=m1?m1(Z1):Z1;if(!x1||!F$(ny,dy)){var dy=ny;B1[D1++]=Z1===0?0:Z1}}return B1}function NS(p1){return typeof p1=="number"?p1:m$(p1)?hy:+p1}function f$(p1){if(typeof p1=="string")return p1;if(S0(p1))return tv(p1,f$)+"";if(m$(p1))return hS?hS.call(p1):"";var m1=p1+"";return m1=="0"&&1/p1==-V1?"-0":m1}function yx(p1,m1,x1){var O1=-1,D1=n0,B1=p1.length,Z1=!0,ny=[],dy=ny;if(x1)Z1=!1,D1=Vx;else if(B1>=n1){var Ry=m1?null:QC(p1);if(Ry)return s2(Ry);Z1=!1,D1=q1,dy=new Ix}else dy=m1?[]:ny;e:for(;++O1<B1;){var Iy=p1[O1],My=m1?m1(Iy):Iy;if(Iy=x1||Iy!==0?Iy:0,Z1&&My===My){for(var Zy=dy.length;Zy--;)if(dy[Zy]===My)continue e;m1&&dy.push(My),ny.push(Iy)}else D1(dy,My,x1)||(dy!==ny&&dy.push(My),ny.push(Iy))}return ny}function f_(p1,m1){return m1=vx(m1,p1),p1=cE(p1,m1),p1==null||delete p1[Y$(O$(m1))]}function jS(p1,m1,x1,O1){return jw(p1,m1,x1(kx(p1,m1)),O1)}function T2(p1,m1,x1,O1){for(var D1=p1.length,B1=O1?D1:-1;(O1?B1--:++B1<D1)&&m1(p1[B1],B1,p1););return x1?C$(p1,O1?0:B1,O1?B1+1:D1):C$(p1,O1?B1+1:0,O1?D1:B1)}function LS(p1,m1){var x1=p1;return x1 instanceof U0&&(x1=x1.value()),i$(m1,function(O1,D1){return D1.func.apply(D1.thisArg,p$([O1],D1.args))},x1)}function h_(p1,m1,x1){var O1=p1.length;if(O1<2)return O1?yx(p1[0]):[];for(var D1=-1,B1=$y(O1);++D1<O1;)for(var Z1=p1[D1],ny=-1;++ny<O1;)ny!=D1&&(B1[D1]=Mw(B1[D1]||Z1,p1[ny],m1,x1));return yx(jv(B1,1),m1,x1)}function FS(p1,m1,x1){for(var O1=-1,D1=p1.length,B1=m1.length,Z1={};++O1<D1;){var ny=O1<B1?m1[O1]:t1;x1(Z1,p1[O1],ny)}return Z1}function m_(p1){return Sv(p1)?p1:[]}function g_(p1){return typeof p1=="function"?p1:l$}function vx(p1,m1){return S0(p1)?p1:E_(p1,m1)?[p1]:hE(Y0(p1))}var UC=L0;function $x(p1,m1,x1){var O1=p1.length;return x1=x1===t1?O1:x1,!m1&&x1>=O1?p1:C$(p1,m1,x1)}var BS=AT||function(p1){return _v.clearTimeout(p1)};function zS(p1,m1){if(m1)return p1.slice();var x1=p1.length,O1=lS?lS(x1):new p1.constructor(x1);return p1.copy(O1),O1}function y_(p1){var m1=new p1.constructor(p1.byteLength);return new p2(m1).set(new p2(p1)),m1}function VC(p1,m1){var x1=m1?y_(p1.buffer):p1.buffer;return new p1.constructor(x1,p1.byteOffset,p1.byteLength)}function WC(p1){var m1=new p1.constructor(p1.source,u$.exec(p1));return m1.lastIndex=p1.lastIndex,m1}function HC(p1){return Pw?av(Pw.call(p1)):{}}function US(p1,m1){var x1=m1?y_(p1.buffer):p1.buffer;return new p1.constructor(x1,p1.byteOffset,p1.length)}function VS(p1,m1){if(p1!==m1){var x1=p1!==t1,O1=p1===null,D1=p1===p1,B1=m$(p1),Z1=m1!==t1,ny=m1===null,dy=m1===m1,Ry=m$(m1);if(!ny&&!Ry&&!B1&&p1>m1||B1&&Z1&&dy&&!ny&&!Ry||O1&&Z1&&dy||!x1&&dy||!D1)return 1;if(!O1&&!B1&&!Ry&&p1<m1||Ry&&x1&&D1&&!O1&&!B1||ny&&x1&&D1||!Z1&&D1||!dy)return-1}return 0}function GC(p1,m1,x1){for(var O1=-1,D1=p1.criteria,B1=m1.criteria,Z1=D1.length,ny=x1.length;++O1<Z1;){var dy=VS(D1[O1],B1[O1]);if(dy){if(O1>=ny)return dy;var Ry=x1[O1];return dy*(Ry=="desc"?-1:1)}}return p1.index-m1.index}function WS(p1,m1,x1,O1){for(var D1=-1,B1=p1.length,Z1=x1.length,ny=-1,dy=m1.length,Ry=Rv(B1-Z1,0),Iy=$y(dy+Ry),My=!O1;++ny<dy;)Iy[ny]=m1[ny];for(;++D1<Z1;)(My||D1<B1)&&(Iy[x1[D1]]=p1[D1]);for(;Ry--;)Iy[ny++]=p1[D1++];return Iy}function HS(p1,m1,x1,O1){for(var D1=-1,B1=p1.length,Z1=-1,ny=x1.length,dy=-1,Ry=m1.length,Iy=Rv(B1-ny,0),My=$y(Iy+Ry),Zy=!O1;++D1<Iy;)My[D1]=p1[D1];for(var o0=D1;++dy<Ry;)My[o0+dy]=m1[dy];for(;++Z1<ny;)(Zy||D1<B1)&&(My[o0+x1[Z1]]=p1[D1++]);return My}function o$(p1,m1){var x1=-1,O1=p1.length;for(m1||(m1=$y(O1));++x1<O1;)m1[x1]=p1[x1];return m1}function Z$(p1,m1,x1,O1){var D1=!x1;x1||(x1={});for(var B1=-1,Z1=m1.length;++B1<Z1;){var ny=m1[B1],dy=O1?O1(x1[ny],p1[ny],ny,x1,p1):t1;dy===t1&&(dy=p1[ny]),D1?ix(x1,ny,dy):kw(x1,ny,dy)}return x1}function qC(p1,m1){return Z$(p1,S_(p1),m1)}function KC(p1,m1){return Z$(p1,iE(p1),m1)}function C2(p1,m1){return function(x1,O1){var D1=S0(x1)?r2:gC,B1=m1?m1():{};return D1(x1,p1,h0(O1,2),B1)}}function Jx(p1){return L0(function(m1,x1){var O1=-1,D1=x1.length,B1=D1>1?x1[D1-1]:t1,Z1=D1>2?x1[2]:t1;for(B1=p1.length>3&&typeof B1=="function"?(D1--,B1):t1,Z1&&Jv(x1[0],x1[1],Z1)&&(B1=D1<3?t1:B1,D1=1),m1=av(m1);++O1<D1;){var ny=x1[O1];ny&&p1(m1,ny,O1,B1)}return m1})}function GS(p1,m1){return function(x1,O1){if(x1==null)return x1;if(!s$(x1))return p1(x1,O1);for(var D1=x1.length,B1=m1?D1:-1,Z1=av(x1);(m1?B1--:++B1<D1)&&O1(Z1[B1],B1,Z1)!==!1;);return x1}}function qS(p1){return function(m1,x1,O1){for(var D1=-1,B1=av(m1),Z1=O1(m1),ny=Z1.length;ny--;){var dy=Z1[p1?ny:++D1];if(x1(B1[dy],dy,B1)===!1)break}return m1}}function ZC(p1,m1,x1){var O1=m1&v1,D1=Lw(p1);function B1(){var Z1=this&&this!==_v&&this instanceof B1?D1:p1;return Z1.apply(O1?x1:this,arguments)}return B1}function KS(p1){return function(m1){m1=Y0(m1);var x1=V0(m1)?j$(m1):t1,O1=x1?x1[0]:m1.charAt(0),D1=x1?$x(x1,1).join(""):m1.slice(1);return O1[p1]()+D1}}function ew(p1){return function(m1){return i$(GE(HE(m1).replace(ky,"")),p1,"")}}function Lw(p1){return function(){var m1=arguments;switch(m1.length){case 0:return new p1;case 1:return new p1(m1[0]);case 2:return new p1(m1[0],m1[1]);case 3:return new p1(m1[0],m1[1],m1[2]);case 4:return new p1(m1[0],m1[1],m1[2],m1[3]);case 5:return new p1(m1[0],m1[1],m1[2],m1[3],m1[4]);case 6:return new p1(m1[0],m1[1],m1[2],m1[3],m1[4],m1[5]);case 7:return new p1(m1[0],m1[1],m1[2],m1[3],m1[4],m1[5],m1[6])}var x1=Qx(p1.prototype),O1=p1.apply(x1,m1);return gv(O1)?O1:x1}}function YC(p1,m1,x1){var O1=Lw(p1);function D1(){for(var B1=arguments.length,Z1=$y(B1),ny=B1,dy=tw(D1);ny--;)Z1[ny]=arguments[ny];var Ry=B1<3&&Z1[0]!==dy&&Z1[B1-1]!==dy?[]:N$(Z1,dy);if(B1-=Ry.length,B1<x1)return JS(p1,m1,O2,D1.placeholder,t1,Z1,Ry,t1,t1,x1-B1);var Iy=this&&this!==_v&&this instanceof D1?O1:p1;return Yv(Iy,this,Z1)}return D1}function ZS(p1){return function(m1,x1,O1){var D1=av(m1);if(!s$(m1)){var B1=h0(x1,3);m1=kv(m1),x1=function(ny){return B1(D1[ny],ny,D1)}}var Z1=p1(m1,x1,O1);return Z1>-1?D1[B1?m1[Z1]:Z1]:t1}}function YS(p1){return sx(function(m1){var x1=m1.length,O1=x1,D1=E$.prototype.thru;for(p1&&m1.reverse();O1--;){var B1=m1[O1];if(typeof B1!="function")throw new S$(o1);if(D1&&!Z1&&P2(B1)=="wrapper")var Z1=new E$([],!0)}for(O1=Z1?O1:x1;++O1<x1;){B1=m1[O1];var ny=P2(B1),dy=ny=="wrapper"?w_(B1):t1;dy&&T_(dy[0])&&dy[1]==(k1|_1|T1|N1)&&!dy[4].length&&dy[9]==1?Z1=Z1[P2(dy[0])].apply(Z1,dy[3]):Z1=B1.length==1&&T_(B1)?Z1[ny]():Z1.thru(B1)}return function(){var Ry=arguments,Iy=Ry[0];if(Z1&&Ry.length==1&&S0(Iy))return Z1.plant(Iy).value();for(var My=0,Zy=x1?m1[My].apply(this,Ry):Iy;++My<x1;)Zy=m1[My].call(this,Zy);return Zy}})}function O2(p1,m1,x1,O1,D1,B1,Z1,ny,dy,Ry){var Iy=m1&k1,My=m1&v1,Zy=m1&$1,o0=m1&(_1|E1),m0=m1&W1,k0=Zy?t1:Lw(p1);function g0(){for(var F0=arguments.length,W0=$y(F0),g$=F0;g$--;)W0[g$]=arguments[g$];if(o0)var e$=tw(g0),y$=Ly(W0,e$);if(O1&&(W0=WS(W0,O1,D1,o0)),B1&&(W0=HS(W0,B1,Z1,o0)),F0-=y$,o0&&F0<Ry){var Ev=N$(W0,e$);return JS(p1,m1,O2,g0.placeholder,x1,W0,Ev,ny,dy,Ry-F0)}var B$=My?x1:this,dx=Zy?B$[p1]:p1;return F0=W0.length,ny?W0=g3(W0,ny):m0&&F0>1&&W0.reverse(),Iy&&dy<F0&&(W0.length=dy),this&&this!==_v&&this instanceof g0&&(dx=k0||Lw(dx)),dx.apply(B$,W0)}return g0}function XS(p1,m1){return function(x1,O1){return SC(x1,p1,m1(O1),{})}}function A2(p1,m1){return function(x1,O1){var D1;if(x1===t1&&O1===t1)return m1;if(x1!==t1&&(D1=x1),O1!==t1){if(D1===t1)return O1;typeof x1=="string"||typeof O1=="string"?(x1=f$(x1),O1=f$(O1)):(x1=NS(x1),O1=NS(O1)),D1=p1(x1,O1)}return D1}}function v_(p1){return sx(function(m1){return m1=tv(m1,I1(h0())),L0(function(x1){var O1=this;return p1(m1,function(D1){return Yv(D1,O1,x1)})})})}function R2(p1,m1){m1=m1===t1?" ":f$(m1);var x1=m1.length;if(x1<2)return x1?d_(m1,p1):m1;var O1=d_(m1,g2(p1/Kx(m1)));return V0(m1)?$x(j$(O1),0,p1).join(""):O1.slice(0,p1)}function XC(p1,m1,x1,O1){var D1=m1&v1,B1=Lw(p1);function Z1(){for(var ny=-1,dy=arguments.length,Ry=-1,Iy=O1.length,My=$y(Iy+dy),Zy=this&&this!==_v&&this instanceof Z1?B1:p1;++Ry<Iy;)My[Ry]=O1[Ry];for(;dy--;)My[Ry++]=arguments[++ny];return Yv(Zy,D1?x1:this,My)}return Z1}function QS(p1){return function(m1,x1,O1){return O1&&typeof O1!="number"&&Jv(m1,x1,O1)&&(x1=O1=t1),m1=ux(m1),x1===t1?(x1=m1,m1=0):x1=ux(x1),O1=O1===t1?m1<x1?1:-1:ux(O1),NC(m1,x1,O1,p1)}}function I2(p1){return function(m1,x1){return typeof m1=="string"&&typeof x1=="string"||(m1=A$(m1),x1=A$(x1)),p1(m1,x1)}}function JS(p1,m1,x1,O1,D1,B1,Z1,ny,dy,Ry){var Iy=m1&_1,My=Iy?Z1:t1,Zy=Iy?t1:Z1,o0=Iy?B1:t1,m0=Iy?t1:B1;m1|=Iy?T1:P1,m1&=~(Iy?P1:T1),m1&y1||(m1&=~(v1|$1));var k0=[p1,m1,D1,o0,My,m0,Zy,ny,dy,Ry],g0=x1.apply(t1,k0);return T_(p1)&&dE(g0,k0),g0.placeholder=O1,pE(g0,p1,m1)}function $_(p1){var m1=Av[p1];return function(x1,O1){if(x1=A$(x1),O1=O1==null?0:Bv(O0(O1),292),O1&&pS(x1)){var D1=(Y0(x1)+"e").split("e"),B1=m1(D1[0]+"e"+(+D1[1]+O1));return D1=(Y0(B1)+"e").split("e"),+(D1[0]+"e"+(+D1[1]-O1))}return m1(x1)}}var QC=Yx&&1/s2(new Yx([,-0]))[1]==V1?function(p1){return new Yx(p1)}:z_;function eE(p1){return function(m1){var x1=zv(m1);return x1==y0?z0(m1):x1==Dy?mT(m1):w1(m1,p1(m1))}}function ox(p1,m1,x1,O1,D1,B1,Z1,ny){var dy=m1&$1;if(!dy&&typeof p1!="function")throw new S$(o1);var Ry=O1?O1.length:0;if(Ry||(m1&=~(T1|P1),O1=D1=t1),Z1=Z1===t1?Z1:Rv(O0(Z1),0),ny=ny===t1?ny:O0(ny),Ry-=D1?D1.length:0,m1&P1){var Iy=O1,My=D1;O1=D1=t1}var Zy=dy?t1:w_(p1),o0=[p1,m1,x1,O1,D1,Iy,My,B1,Z1,ny];if(Zy&&f3(o0,Zy),p1=o0[0],m1=o0[1],x1=o0[2],O1=o0[3],D1=o0[4],ny=o0[9]=o0[9]===t1?dy?0:p1.length:Rv(o0[9]-Ry,0),!ny&&m1&(_1|E1)&&(m1&=~(_1|E1)),!m1||m1==v1)var m0=ZC(p1,m1,x1);else m1==_1||m1==E1?m0=YC(p1,m1,ny):(m1==T1||m1==(v1|T1))&&!D1.length?m0=XC(p1,m1,x1,O1):m0=O2.apply(t1,o0);var k0=Zy?MS:dE;return pE(k0(m0,o0),p1,m1)}function tE(p1,m1,x1,O1){return p1===t1||F$(p1,Zx[x1])&&!rv.call(O1,x1)?m1:p1}function rE(p1,m1,x1,O1,D1,B1){return gv(p1)&&gv(m1)&&(B1.set(m1,p1),S2(p1,m1,t1,rE,B1),B1.delete(m1)),p1}function JC(p1){return zw(p1)?t1:p1}function nE(p1,m1,x1,O1,D1,B1){var Z1=x1&f1,ny=p1.length,dy=m1.length;if(ny!=dy&&!(Z1&&dy>ny))return!1;var Ry=B1.get(p1),Iy=B1.get(m1);if(Ry&&Iy)return Ry==m1&&Iy==p1;var My=-1,Zy=!0,o0=x1&g1?new Ix:t1;for(B1.set(p1,m1),B1.set(m1,p1);++My<ny;){var m0=p1[My],k0=m1[My];if(O1)var g0=Z1?O1(k0,m0,My,m1,p1,B1):O1(m0,k0,My,p1,m1,B1);if(g0!==t1){if(g0)continue;Zy=!1;break}if(o0){if(!Wx(m1,function(F0,W0){if(!q1(o0,W0)&&(m0===F0||D1(m0,F0,x1,O1,B1)))return o0.push(W0)})){Zy=!1;break}}else if(!(m0===k0||D1(m0,k0,x1,O1,B1))){Zy=!1;break}}return B1.delete(p1),B1.delete(m1),Zy}function e3(p1,m1,x1,O1,D1,B1,Z1){switch(x1){case iv:if(p1.byteLength!=m1.byteLength||p1.byteOffset!=m1.byteOffset)return!1;p1=p1.buffer,m1=m1.buffer;case $0:return!(p1.byteLength!=m1.byteLength||!B1(new p2(p1),new p2(m1)));case Uy:case Gy:case A0:return F$(+p1,+m1);case Yy:return p1.name==m1.name&&p1.message==m1.message;case vy:case Ny:return p1==m1+"";case y0:var ny=z0;case Dy:var dy=O1&f1;if(ny||(ny=s2),p1.size!=m1.size&&!dy)return!1;var Ry=Z1.get(p1);if(Ry)return Ry==m1;O1|=g1,Z1.set(p1,m1);var Iy=nE(ny(p1),ny(m1),O1,D1,B1,Z1);return Z1.delete(p1),Iy;case Ty:if(Pw)return Pw.call(p1)==Pw.call(m1)}return!1}function t3(p1,m1,x1,O1,D1,B1){var Z1=x1&f1,ny=b_(p1),dy=ny.length,Ry=b_(m1),Iy=Ry.length;if(dy!=Iy&&!Z1)return!1;for(var My=dy;My--;){var Zy=ny[My];if(!(Z1?Zy in m1:rv.call(m1,Zy)))return!1}var o0=B1.get(p1),m0=B1.get(m1);if(o0&&m0)return o0==m1&&m0==p1;var k0=!0;B1.set(p1,m1),B1.set(m1,p1);for(var g0=Z1;++My<dy;){Zy=ny[My];var F0=p1[Zy],W0=m1[Zy];if(O1)var g$=Z1?O1(W0,F0,Zy,m1,p1,B1):O1(F0,W0,Zy,p1,m1,B1);if(!(g$===t1?F0===W0||D1(F0,W0,x1,O1,B1):g$)){k0=!1;break}g0||(g0=Zy=="constructor")}if(k0&&!g0){var e$=p1.constructor,y$=m1.constructor;e$!=y$&&"constructor"in p1&&"constructor"in m1&&!(typeof e$=="function"&&e$ instanceof e$&&typeof y$=="function"&&y$ instanceof y$)&&(k0=!1)}return B1.delete(p1),B1.delete(m1),k0}function sx(p1){return O_(uE(p1,t1,vE),p1+"")}function b_(p1){return _S(p1,kv,S_)}function x_(p1){return _S(p1,a$,iE)}var w_=v2?function(p1){return v2.get(p1)}:z_;function P2(p1){for(var m1=p1.name+"",x1=Xx[m1],O1=rv.call(Xx,m1)?x1.length:0;O1--;){var D1=x1[O1],B1=D1.func;if(B1==null||B1==p1)return D1.name}return m1}function tw(p1){var m1=rv.call(L1,"placeholder")?L1:p1;return m1.placeholder}function h0(){var p1=L1.iteratee||F_;return p1=p1===F_?TS:p1,arguments.length?p1(arguments[0],arguments[1]):p1}function k2(p1,m1){var x1=p1.__data__;return u3(m1)?x1[typeof m1=="string"?"string":"hash"]:x1.map}function __(p1){for(var m1=kv(p1),x1=m1.length;x1--;){var O1=m1[x1],D1=p1[O1];m1[x1]=[O1,D1,aE(D1)]}return m1}function Mx(p1,m1){var x1=G0(p1,m1);return ES(x1)?x1:t1}function r3(p1){var m1=rv.call(p1,Ax),x1=p1[Ax];try{p1[Ax]=t1;var O1=!0}catch{}var D1=c2.call(p1);return O1&&(m1?p1[Ax]=x1:delete p1[Ax]),D1}var S_=X2?function(p1){return p1==null?[]:(p1=av(p1),H$(X2(p1),function(m1){return cS.call(p1,m1)}))}:U_,iE=X2?function(p1){for(var m1=[];p1;)p$(m1,S_(p1)),p1=f2(p1);return m1}:U_,zv=Qv;(Q2&&zv(new Q2(new ArrayBuffer(1)))!=iv||Aw&&zv(new Aw)!=y0||J2&&zv(J2.resolve())!=X1||Yx&&zv(new Yx)!=Dy||Rw&&zv(new Rw)!=l0)&&(zv=function(p1){var m1=Qv(p1),x1=m1==R0?p1.constructor:t1,O1=x1?Dx(x1):"";if(O1)switch(O1){case LT:return iv;case FT:return y0;case BT:return X1;case zT:return Dy;case UT:return l0}return m1});function n3(p1,m1,x1){for(var O1=-1,D1=x1.length;++O1<D1;){var B1=x1[O1],Z1=B1.size;switch(B1.type){case"drop":p1+=Z1;break;case"dropRight":m1-=Z1;break;case"take":m1=Bv(m1,p1+Z1);break;case"takeRight":p1=Rv(p1,m1-Z1);break}}return{start:p1,end:m1}}function i3(p1){var m1=p1.match(Hv);return m1?m1[1].split(Cv):[]}function oE(p1,m1,x1){m1=vx(m1,p1);for(var O1=-1,D1=m1.length,B1=!1;++O1<D1;){var Z1=Y$(m1[O1]);if(!(B1=p1!=null&&x1(p1,Z1)))break;p1=p1[Z1]}return B1||++O1!=D1?B1:(D1=p1==null?0:p1.length,!!D1&&B2(D1)&&ax(Z1,D1)&&(S0(p1)||Nx(p1)))}function o3(p1){var m1=p1.length,x1=new p1.constructor(m1);return m1&&typeof p1[0]=="string"&&rv.call(p1,"index")&&(x1.index=p1.index,x1.input=p1.input),x1}function sE(p1){return typeof p1.constructor=="function"&&!Fw(p1)?Qx(f2(p1)):{}}function s3(p1,m1,x1){var O1=p1.constructor;switch(m1){case $0:return y_(p1);case Uy:case Gy:return new O1(+p1);case iv:return VC(p1,x1);case b0:case dv:case i0:case nv:case xv:case Tv:case qy:case Iv:case u0:return US(p1,x1);case y0:return new O1;case A0:case Ny:return new O1(p1);case vy:return WC(p1);case Dy:return new O1;case Ty:return HC(p1)}}function a3(p1,m1){var x1=m1.length;if(!x1)return p1;var O1=x1-1;return m1[O1]=(x1>1?"& ":"")+m1[O1],m1=m1.join(x1>2?", ":" "),p1.replace(q0,`{
/* [wrapped with `+m1+`] */
`)}function l3(p1){return S0(p1)||Nx(p1)||!!(dS&&p1&&p1[dS])}function ax(p1,m1){var x1=typeof p1;return m1=m1??K1,!!m1&&(x1=="number"||x1!="symbol"&&D0.test(p1))&&p1>-1&&p1%1==0&&p1<m1}function Jv(p1,m1,x1){if(!gv(x1))return!1;var O1=typeof m1;return(O1=="number"?s$(x1)&&ax(m1,x1.length):O1=="string"&&m1 in x1)?F$(x1[m1],p1):!1}function E_(p1,m1){if(S0(p1))return!1;var x1=typeof p1;return x1=="number"||x1=="symbol"||x1=="boolean"||p1==null||m$(p1)?!0:J0.test(p1)||!uv.test(p1)||m1!=null&&p1 in av(m1)}function u3(p1){var m1=typeof p1;return m1=="string"||m1=="number"||m1=="symbol"||m1=="boolean"?p1!=="__proto__":p1===null}function T_(p1){var m1=P2(p1),x1=L1[m1];if(typeof x1!="function"||!(m1 in U0.prototype))return!1;if(p1===x1)return!0;var O1=w_(x1);return!!O1&&p1===O1[0]}function c3(p1){return!!aS&&aS in p1}var d3=l2?lx:V_;function Fw(p1){var m1=p1&&p1.constructor,x1=typeof m1=="function"&&m1.prototype||Zx;return p1===x1}function aE(p1){return p1===p1&&!gv(p1)}function lE(p1,m1){return function(x1){return x1==null?!1:x1[p1]===m1&&(m1!==t1||p1 in av(x1))}}function p3(p1){var m1=L2(p1,function(O1){return x1.size===s1&&x1.clear(),O1}),x1=m1.cache;return m1}function f3(p1,m1){var x1=p1[1],O1=m1[1],D1=x1|O1,B1=D1<(v1|$1|k1),Z1=O1==k1&&x1==_1||O1==k1&&x1==N1&&p1[7].length<=m1[8]||O1==(k1|N1)&&m1[7].length<=m1[8]&&x1==_1;if(!(B1||Z1))return p1;O1&v1&&(p1[2]=m1[2],D1|=x1&v1?0:y1);var ny=m1[3];if(ny){var dy=p1[3];p1[3]=dy?WS(dy,ny,m1[4]):ny,p1[4]=dy?N$(p1[3],l1):m1[4]}return ny=m1[5],ny&&(dy=p1[5],p1[5]=dy?HS(dy,ny,m1[6]):ny,p1[6]=dy?N$(p1[5],l1):m1[6]),ny=m1[7],ny&&(p1[7]=ny),O1&k1&&(p1[8]=p1[8]==null?m1[8]:Bv(p1[8],m1[8])),p1[9]==null&&(p1[9]=m1[9]),p1[0]=m1[0],p1[1]=D1,p1}function h3(p1){var m1=[];if(p1!=null)for(var x1 in av(p1))m1.push(x1);return m1}function m3(p1){return c2.call(p1)}function uE(p1,m1,x1){return m1=Rv(m1===t1?p1.length-1:m1,0),function(){for(var O1=arguments,D1=-1,B1=Rv(O1.length-m1,0),Z1=$y(B1);++D1<B1;)Z1[D1]=O1[m1+D1];D1=-1;for(var ny=$y(m1+1);++D1<m1;)ny[D1]=O1[D1];return ny[m1]=x1(Z1),Yv(p1,this,ny)}}function cE(p1,m1){return m1.length<2?p1:kx(p1,C$(m1,0,-1))}function g3(p1,m1){for(var x1=p1.length,O1=Bv(m1.length,x1),D1=o$(p1);O1--;){var B1=m1[O1];p1[O1]=ax(B1,x1)?D1[B1]:t1}return p1}function C_(p1,m1){if(!(m1==="constructor"&&typeof p1[m1]=="function")&&m1!="__proto__")return p1[m1]}var dE=fE(MS),Bw=IT||function(p1,m1){return _v.setTimeout(p1,m1)},O_=fE(FC);function pE(p1,m1,x1){var O1=m1+"";return O_(p1,a3(O1,y3(i3(O1),x1)))}function fE(p1){var m1=0,x1=0;return function(){var O1=DT(),D1=ly-(O1-x1);if(x1=O1,D1>0){if(++m1>=ey)return arguments[0]}else m1=0;return p1.apply(t1,arguments)}}function M2(p1,m1){var x1=-1,O1=p1.length,D1=O1-1;for(m1=m1===t1?O1:m1;++x1<m1;){var B1=c_(x1,D1),Z1=p1[B1];p1[B1]=p1[x1],p1[x1]=Z1}return p1.length=m1,p1}var hE=p3(function(p1){var m1=[];return p1.charCodeAt(0)===46&&m1.push(""),p1.replace(Wv,function(x1,O1,D1,B1){m1.push(D1?B1.replace(I$,"$1"):O1||x1)}),m1});function Y$(p1){if(typeof p1=="string"||m$(p1))return p1;var m1=p1+"";return m1=="0"&&1/p1==-V1?"-0":m1}function Dx(p1){if(p1!=null){try{return u2.call(p1)}catch{}try{return p1+""}catch{}}return""}function y3(p1,m1){return Xv(Oy,function(x1){var O1="_."+x1[0];m1&x1[1]&&!n0(p1,O1)&&p1.push(O1)}),p1.sort()}function mE(p1){if(p1 instanceof U0)return p1.clone();var m1=new E$(p1.__wrapped__,p1.__chain__);return m1.__actions__=o$(p1.__actions__),m1.__index__=p1.__index__,m1.__values__=p1.__values__,m1}function v3(p1,m1,x1){(x1?Jv(p1,m1,x1):m1===t1)?m1=1:m1=Rv(O0(m1),0);var O1=p1==null?0:p1.length;if(!O1||m1<1)return[];for(var D1=0,B1=0,Z1=$y(g2(O1/m1));D1<O1;)Z1[B1++]=C$(p1,D1,D1+=m1);return Z1}function $3(p1){for(var m1=-1,x1=p1==null?0:p1.length,O1=0,D1=[];++m1<x1;){var B1=p1[m1];B1&&(D1[O1++]=B1)}return D1}function b3(){var p1=arguments.length;if(!p1)return[];for(var m1=$y(p1-1),x1=arguments[0],O1=p1;O1--;)m1[O1-1]=arguments[O1];return p$(S0(x1)?o$(x1):[x1],jv(m1,1))}var x3=L0(function(p1,m1){return Sv(p1)?Mw(p1,jv(m1,1,Sv,!0)):[]}),w3=L0(function(p1,m1){var x1=O$(m1);return Sv(x1)&&(x1=t1),Sv(p1)?Mw(p1,jv(m1,1,Sv,!0),h0(x1,2)):[]}),_3=L0(function(p1,m1){var x1=O$(m1);return Sv(x1)&&(x1=t1),Sv(p1)?Mw(p1,jv(m1,1,Sv,!0),t1,x1):[]});function S3(p1,m1,x1){var O1=p1==null?0:p1.length;return O1?(m1=x1||m1===t1?1:O0(m1),C$(p1,m1<0?0:m1,O1)):[]}function E3(p1,m1,x1){var O1=p1==null?0:p1.length;return O1?(m1=x1||m1===t1?1:O0(m1),m1=O1-m1,C$(p1,0,m1<0?0:m1)):[]}function T3(p1,m1){return p1&&p1.length?T2(p1,h0(m1,3),!0,!0):[]}function C3(p1,m1){return p1&&p1.length?T2(p1,h0(m1,3),!0):[]}function O3(p1,m1,x1,O1){var D1=p1==null?0:p1.length;return D1?(x1&&typeof x1!="number"&&Jv(p1,m1,x1)&&(x1=0,O1=D1),bC(p1,m1,x1,O1)):[]}function gE(p1,m1,x1){var O1=p1==null?0:p1.length;if(!O1)return-1;var D1=x1==null?0:O0(x1);return D1<0&&(D1=Rv(O1+D1,0)),tx(p1,h0(m1,3),D1)}function yE(p1,m1,x1){var O1=p1==null?0:p1.length;if(!O1)return-1;var D1=O1-1;return x1!==t1&&(D1=O0(x1),D1=x1<0?Rv(O1+D1,0):Bv(D1,O1-1)),tx(p1,h0(m1,3),D1,!0)}function vE(p1){var m1=p1==null?0:p1.length;return m1?jv(p1,1):[]}function A3(p1){var m1=p1==null?0:p1.length;return m1?jv(p1,V1):[]}function R3(p1,m1){var x1=p1==null?0:p1.length;return x1?(m1=m1===t1?1:O0(m1),jv(p1,m1)):[]}function I3(p1){for(var m1=-1,x1=p1==null?0:p1.length,O1={};++m1<x1;){var D1=p1[m1];O1[D1[0]]=D1[1]}return O1}function $E(p1){return p1&&p1.length?p1[0]:t1}function P3(p1,m1,x1){var O1=p1==null?0:p1.length;if(!O1)return-1;var D1=x1==null?0:O0(x1);return D1<0&&(D1=Rv(O1+D1,0)),G$(p1,m1,D1)}function k3(p1){var m1=p1==null?0:p1.length;return m1?C$(p1,0,-1):[]}var M3=L0(function(p1){var m1=tv(p1,m_);return m1.length&&m1[0]===p1[0]?o_(m1):[]}),D3=L0(function(p1){var m1=O$(p1),x1=tv(p1,m_);return m1===O$(x1)?m1=t1:x1.pop(),x1.length&&x1[0]===p1[0]?o_(x1,h0(m1,2)):[]}),N3=L0(function(p1){var m1=O$(p1),x1=tv(p1,m_);return m1=typeof m1=="function"?m1:t1,m1&&x1.pop(),x1.length&&x1[0]===p1[0]?o_(x1,t1,m1):[]});function j3(p1,m1){return p1==null?"":kT.call(p1,m1)}function O$(p1){var m1=p1==null?0:p1.length;return m1?p1[m1-1]:t1}function L3(p1,m1,x1){var O1=p1==null?0:p1.length;if(!O1)return-1;var D1=O1;return x1!==t1&&(D1=O0(x1),D1=D1<0?Rv(O1+D1,0):Bv(D1,O1-1)),m1===m1?yT(p1,m1,D1):tx(p1,Ew,D1,!0)}function F3(p1,m1){return p1&&p1.length?RS(p1,O0(m1)):t1}var B3=L0(bE);function bE(p1,m1){return p1&&p1.length&&m1&&m1.length?u_(p1,m1):p1}function z3(p1,m1,x1){return p1&&p1.length&&m1&&m1.length?u_(p1,m1,h0(x1,2)):p1}function U3(p1,m1,x1){return p1&&p1.length&&m1&&m1.length?u_(p1,m1,t1,x1):p1}var V3=sx(function(p1,m1){var x1=p1==null?0:p1.length,O1=t_(p1,m1);return kS(p1,tv(m1,function(D1){return ax(D1,x1)?+D1:D1}).sort(VS)),O1});function W3(p1,m1){var x1=[];if(!(p1&&p1.length))return x1;var O1=-1,D1=[],B1=p1.length;for(m1=h0(m1,3);++O1<B1;){var Z1=p1[O1];m1(Z1,O1,p1)&&(x1.push(Z1),D1.push(O1))}return kS(p1,D1),x1}function A_(p1){return p1==null?p1:jT.call(p1)}function H3(p1,m1,x1){var O1=p1==null?0:p1.length;return O1?(x1&&typeof x1!="number"&&Jv(p1,m1,x1)?(m1=0,x1=O1):(m1=m1==null?0:O0(m1),x1=x1===t1?O1:O0(x1)),C$(p1,m1,x1)):[]}function G3(p1,m1){return E2(p1,m1)}function q3(p1,m1,x1){return p_(p1,m1,h0(x1,2))}function K3(p1,m1){var x1=p1==null?0:p1.length;if(x1){var O1=E2(p1,m1);if(O1<x1&&F$(p1[O1],m1))return O1}return-1}function Z3(p1,m1){return E2(p1,m1,!0)}function Y3(p1,m1,x1){return p_(p1,m1,h0(x1,2),!0)}function X3(p1,m1){var x1=p1==null?0:p1.length;if(x1){var O1=E2(p1,m1,!0)-1;if(F$(p1[O1],m1))return O1}return-1}function Q3(p1){return p1&&p1.length?DS(p1):[]}function J3(p1,m1){return p1&&p1.length?DS(p1,h0(m1,2)):[]}function eO(p1){var m1=p1==null?0:p1.length;return m1?C$(p1,1,m1):[]}function tO(p1,m1,x1){return p1&&p1.length?(m1=x1||m1===t1?1:O0(m1),C$(p1,0,m1<0?0:m1)):[]}function rO(p1,m1,x1){var O1=p1==null?0:p1.length;return O1?(m1=x1||m1===t1?1:O0(m1),m1=O1-m1,C$(p1,m1<0?0:m1,O1)):[]}function nO(p1,m1){return p1&&p1.length?T2(p1,h0(m1,3),!1,!0):[]}function iO(p1,m1){return p1&&p1.length?T2(p1,h0(m1,3)):[]}var oO=L0(function(p1){return yx(jv(p1,1,Sv,!0))}),sO=L0(function(p1){var m1=O$(p1);return Sv(m1)&&(m1=t1),yx(jv(p1,1,Sv,!0),h0(m1,2))}),aO=L0(function(p1){var m1=O$(p1);return m1=typeof m1=="function"?m1:t1,yx(jv(p1,1,Sv,!0),t1,m1)});function lO(p1){return p1&&p1.length?yx(p1):[]}function uO(p1,m1){return p1&&p1.length?yx(p1,h0(m1,2)):[]}function cO(p1,m1){return m1=typeof m1=="function"?m1:t1,p1&&p1.length?yx(p1,t1,m1):[]}function R_(p1){if(!(p1&&p1.length))return[];var m1=0;return p1=H$(p1,function(x1){if(Sv(x1))return m1=Rv(x1.length,m1),!0}),qx(m1,function(x1){return tv(p1,Hx(x1))})}function xE(p1,m1){if(!(p1&&p1.length))return[];var x1=R_(p1);return m1==null?x1:tv(x1,function(O1){return Yv(m1,t1,O1)})}var dO=L0(function(p1,m1){return Sv(p1)?Mw(p1,m1):[]}),pO=L0(function(p1){return h_(H$(p1,Sv))}),fO=L0(function(p1){var m1=O$(p1);return Sv(m1)&&(m1=t1),h_(H$(p1,Sv),h0(m1,2))}),hO=L0(function(p1){var m1=O$(p1);return m1=typeof m1=="function"?m1:t1,h_(H$(p1,Sv),t1,m1)}),mO=L0(R_);function gO(p1,m1){return FS(p1||[],m1||[],kw)}function yO(p1,m1){return FS(p1||[],m1||[],jw)}var vO=L0(function(p1){var m1=p1.length,x1=m1>1?p1[m1-1]:t1;return x1=typeof x1=="function"?(p1.pop(),x1):t1,xE(p1,x1)});function wE(p1){var m1=L1(p1);return m1.__chain__=!0,m1}function $O(p1,m1){return m1(p1),p1}function D2(p1,m1){return m1(p1)}var bO=sx(function(p1){var m1=p1.length,x1=m1?p1[0]:0,O1=this.__wrapped__,D1=function(B1){return t_(B1,p1)};return m1>1||this.__actions__.length||!(O1 instanceof U0)||!ax(x1)?this.thru(D1):(O1=O1.slice(x1,+x1+(m1?1:0)),O1.__actions__.push({func:D2,args:[D1],thisArg:t1}),new E$(O1,this.__chain__).thru(function(B1){return m1&&!B1.length&&B1.push(t1),B1}))});function xO(){return wE(this)}function wO(){return new E$(this.value(),this.__chain__)}function _O(){this.__values__===t1&&(this.__values__=NE(this.value()));var p1=this.__index__>=this.__values__.length,m1=p1?t1:this.__values__[this.__index__++];return{done:p1,value:m1}}function SO(){return this}function EO(p1){for(var m1,x1=this;x1 instanceof b2;){var O1=mE(x1);O1.__index__=0,O1.__values__=t1,m1?D1.__wrapped__=O1:m1=O1;var D1=O1;x1=x1.__wrapped__}return D1.__wrapped__=p1,m1}function TO(){var p1=this.__wrapped__;if(p1 instanceof U0){var m1=p1;return this.__actions__.length&&(m1=new U0(this)),m1=m1.reverse(),m1.__actions__.push({func:D2,args:[A_],thisArg:t1}),new E$(m1,this.__chain__)}return this.thru(A_)}function CO(){return LS(this.__wrapped__,this.__actions__)}var OO=C2(function(p1,m1,x1){rv.call(p1,x1)?++p1[x1]:ix(p1,x1,1)});function AO(p1,m1,x1){var O1=S0(p1)?n2:$C;return x1&&Jv(p1,m1,x1)&&(m1=t1),O1(p1,h0(m1,3))}function RO(p1,m1){var x1=S0(p1)?H$:xS;return x1(p1,h0(m1,3))}var IO=ZS(gE),PO=ZS(yE);function kO(p1,m1){return jv(N2(p1,m1),1)}function MO(p1,m1){return jv(N2(p1,m1),V1)}function DO(p1,m1,x1){return x1=x1===t1?1:O0(x1),jv(N2(p1,m1),x1)}function _E(p1,m1){var x1=S0(p1)?Xv:gx;return x1(p1,h0(m1,3))}function SE(p1,m1){var x1=S0(p1)?Ux:bS;return x1(p1,h0(m1,3))}var NO=C2(function(p1,m1,x1){rv.call(p1,x1)?p1[x1].push(m1):ix(p1,x1,[m1])});function LO(p1,m1,x1,O1){p1=s$(p1)?p1:nw(p1),x1=x1&&!O1?O0(x1):0;var D1=p1.length;return x1<0&&(x1=Rv(D1+x1,0)),z2(p1)?x1<=D1&&p1.indexOf(m1,x1)>-1:!!D1&&G$(p1,m1,x1)>-1}var FO=L0(function(p1,m1,x1){var O1=-1,D1=typeof m1=="function",B1=s$(p1)?$y(p1.length):[];return gx(p1,function(Z1){B1[++O1]=D1?Yv(m1,Z1,x1):Dw(Z1,m1,x1)}),B1}),BO=C2(function(p1,m1,x1){ix(p1,x1,m1)});function N2(p1,m1){var x1=S0(p1)?tv:CS;return x1(p1,h0(m1,3))}function zO(p1,m1,x1,O1){return p1==null?[]:(S0(m1)||(m1=m1==null?[]:[m1]),x1=O1?t1:x1,S0(x1)||(x1=x1==null?[]:[x1]),IS(p1,m1,x1))}var UO=C2(function(p1,m1,x1){p1[x1?0:1].push(m1)},function(){return[[],[]]});function VO(p1,m1,x1){var O1=S0(p1)?i$:Cw,D1=arguments.length<3;return O1(p1,h0(m1,4),x1,D1,gx)}function WO(p1,m1,x1){var O1=S0(p1)?i2:Cw,D1=arguments.length<3;return O1(p1,h0(m1,4),x1,D1,bS)}function HO(p1,m1){var x1=S0(p1)?H$:xS;return x1(p1,F2(h0(m1,3)))}function GO(p1){var m1=S0(p1)?gS:jC;return m1(p1)}function qO(p1,m1,x1){(x1?Jv(p1,m1,x1):m1===t1)?m1=1:m1=O0(m1);var O1=S0(p1)?hC:LC;return O1(p1,m1)}function KO(p1){var m1=S0(p1)?mC:BC;return m1(p1)}function ZO(p1){if(p1==null)return 0;if(s$(p1))return z2(p1)?Kx(p1):p1.length;var m1=zv(p1);return m1==y0||m1==Dy?p1.size:a_(p1).length}function YO(p1,m1,x1){var O1=S0(p1)?Wx:zC;return x1&&Jv(p1,m1,x1)&&(m1=t1),O1(p1,h0(m1,3))}var XO=L0(function(p1,m1){if(p1==null)return[];var x1=m1.length;return x1>1&&Jv(p1,m1[0],m1[1])?m1=[]:x1>2&&Jv(m1[0],m1[1],m1[2])&&(m1=[m1[0]]),IS(p1,jv(m1,1),[])}),j2=RT||function(){return _v.Date.now()};function QO(p1,m1){if(typeof m1!="function")throw new S$(o1);return p1=O0(p1),function(){if(--p1<1)return m1.apply(this,arguments)}}function EE(p1,m1,x1){return m1=x1?t1:m1,m1=p1&&m1==null?p1.length:m1,ox(p1,k1,t1,t1,t1,t1,m1)}function TE(p1,m1){var x1;if(typeof m1!="function")throw new S$(o1);return p1=O0(p1),function(){return--p1>0&&(x1=m1.apply(this,arguments)),p1<=1&&(m1=t1),x1}}var I_=L0(function(p1,m1,x1){var O1=v1;if(x1.length){var D1=N$(x1,tw(I_));O1|=T1}return ox(p1,O1,m1,x1,D1)}),CE=L0(function(p1,m1,x1){var O1=v1|$1;if(x1.length){var D1=N$(x1,tw(CE));O1|=T1}return ox(m1,O1,p1,x1,D1)});function OE(p1,m1,x1){m1=x1?t1:m1;var O1=ox(p1,_1,t1,t1,t1,t1,t1,m1);return O1.placeholder=OE.placeholder,O1}function AE(p1,m1,x1){m1=x1?t1:m1;var O1=ox(p1,E1,t1,t1,t1,t1,t1,m1);return O1.placeholder=AE.placeholder,O1}function RE(p1,m1,x1){var O1,D1,B1,Z1,ny,dy,Ry=0,Iy=!1,My=!1,Zy=!0;if(typeof p1!="function")throw new S$(o1);m1=A$(m1)||0,gv(x1)&&(Iy=!!x1.leading,My="maxWait"in x1,B1=My?Rv(A$(x1.maxWait)||0,m1):B1,Zy="trailing"in x1?!!x1.trailing:Zy);function o0(Ev){var B$=O1,dx=D1;return O1=D1=t1,Ry=Ev,Z1=p1.apply(dx,B$),Z1}function m0(Ev){return Ry=Ev,ny=Bw(F0,m1),Iy?o0(Ev):Z1}function k0(Ev){var B$=Ev-dy,dx=Ev-Ry,ZE=m1-B$;return My?Bv(ZE,B1-dx):ZE}function g0(Ev){var B$=Ev-dy,dx=Ev-Ry;return dy===t1||B$>=m1||B$<0||My&&dx>=B1}function F0(){var Ev=j2();if(g0(Ev))return W0(Ev);ny=Bw(F0,k0(Ev))}function W0(Ev){return ny=t1,Zy&&O1?o0(Ev):(O1=D1=t1,Z1)}function g$(){ny!==t1&&BS(ny),Ry=0,O1=dy=D1=ny=t1}function e$(){return ny===t1?Z1:W0(j2())}function y$(){var Ev=j2(),B$=g0(Ev);if(O1=arguments,D1=this,dy=Ev,B$){if(ny===t1)return m0(dy);if(My)return BS(ny),ny=Bw(F0,m1),o0(dy)}return ny===t1&&(ny=Bw(F0,m1)),Z1}return y$.cancel=g$,y$.flush=e$,y$}var JO=L0(function(p1,m1){return $S(p1,1,m1)}),eA=L0(function(p1,m1,x1){return $S(p1,A$(m1)||0,x1)});function tA(p1){return ox(p1,W1)}function L2(p1,m1){if(typeof p1!="function"||m1!=null&&typeof m1!="function")throw new S$(o1);var x1=function(){var O1=arguments,D1=m1?m1.apply(this,O1):O1[0],B1=x1.cache;if(B1.has(D1))return B1.get(D1);var Z1=p1.apply(this,O1);return x1.cache=B1.set(D1,Z1)||B1,Z1};return x1.cache=new(L2.Cache||nx),x1}L2.Cache=nx;function F2(p1){if(typeof p1!="function")throw new S$(o1);return function(){var m1=arguments;switch(m1.length){case 0:return!p1.call(this);case 1:return!p1.call(this,m1[0]);case 2:return!p1.call(this,m1[0],m1[1]);case 3:return!p1.call(this,m1[0],m1[1],m1[2])}return!p1.apply(this,m1)}}function rA(p1){return TE(2,p1)}var nA=UC(function(p1,m1){m1=m1.length==1&&S0(m1[0])?tv(m1[0],I1(h0())):tv(jv(m1,1),I1(h0()));var x1=m1.length;return L0(function(O1){for(var D1=-1,B1=Bv(O1.length,x1);++D1<B1;)O1[D1]=m1[D1].call(this,O1[D1]);return Yv(p1,this,O1)})}),P_=L0(function(p1,m1){var x1=N$(m1,tw(P_));return ox(p1,T1,t1,m1,x1)}),IE=L0(function(p1,m1){var x1=N$(m1,tw(IE));return ox(p1,P1,t1,m1,x1)}),iA=sx(function(p1,m1){return ox(p1,N1,t1,t1,t1,m1)});function oA(p1,m1){if(typeof p1!="function")throw new S$(o1);return m1=m1===t1?m1:O0(m1),L0(p1,m1)}function sA(p1,m1){if(typeof p1!="function")throw new S$(o1);return m1=m1==null?0:Rv(O0(m1),0),L0(function(x1){var O1=x1[m1],D1=$x(x1,0,m1);return O1&&p$(D1,O1),Yv(p1,this,D1)})}function aA(p1,m1,x1){var O1=!0,D1=!0;if(typeof p1!="function")throw new S$(o1);return gv(x1)&&(O1="leading"in x1?!!x1.leading:O1,D1="trailing"in x1?!!x1.trailing:D1),RE(p1,m1,{leading:O1,maxWait:m1,trailing:D1})}function lA(p1){return EE(p1,1)}function uA(p1,m1){return P_(g_(m1),p1)}function cA(){if(!arguments.length)return[];var p1=arguments[0];return S0(p1)?p1:[p1]}function dA(p1){return T$(p1,h1)}function pA(p1,m1){return m1=typeof m1=="function"?m1:t1,T$(p1,h1,m1)}function fA(p1){return T$(p1,c1|h1)}function hA(p1,m1){return m1=typeof m1=="function"?m1:t1,T$(p1,c1|h1,m1)}function mA(p1,m1){return m1==null||vS(p1,m1,kv(m1))}function F$(p1,m1){return p1===m1||p1!==p1&&m1!==m1}var gA=I2(i_),yA=I2(function(p1,m1){return p1>=m1}),Nx=SS(function(){return arguments}())?SS:function(p1){return $v(p1)&&rv.call(p1,"callee")&&!cS.call(p1,"callee")},S0=$y.isArray,vA=yw?I1(yw):EC;function s$(p1){return p1!=null&&B2(p1.length)&&!lx(p1)}function Sv(p1){return $v(p1)&&s$(p1)}function $A(p1){return p1===!0||p1===!1||$v(p1)&&Qv(p1)==Uy}var bx=PT||V_,bA=e2?I1(e2):TC;function xA(p1){return $v(p1)&&p1.nodeType===1&&!zw(p1)}function wA(p1){if(p1==null)return!0;if(s$(p1)&&(S0(p1)||typeof p1=="string"||typeof p1.splice=="function"||bx(p1)||rw(p1)||Nx(p1)))return!p1.length;var m1=zv(p1);if(m1==y0||m1==Dy)return!p1.size;if(Fw(p1))return!a_(p1).length;for(var x1 in p1)if(rv.call(p1,x1))return!1;return!0}function _A(p1,m1){return Nw(p1,m1)}function SA(p1,m1,x1){x1=typeof x1=="function"?x1:t1;var O1=x1?x1(p1,m1):t1;return O1===t1?Nw(p1,m1,t1,x1):!!O1}function k_(p1){if(!$v(p1))return!1;var m1=Qv(p1);return m1==Yy||m1==Wy||typeof p1.message=="string"&&typeof p1.name=="string"&&!zw(p1)}function EA(p1){return typeof p1=="number"&&pS(p1)}function lx(p1){if(!gv(p1))return!1;var m1=Qv(p1);return m1==Vy||m1==p0||m1==Ay||m1==fy}function PE(p1){return typeof p1=="number"&&p1==O0(p1)}function B2(p1){return typeof p1=="number"&&p1>-1&&p1%1==0&&p1<=K1}function gv(p1){var m1=typeof p1;return p1!=null&&(m1=="object"||m1=="function")}function $v(p1){return p1!=null&&typeof p1=="object"}var kE=vw?I1(vw):OC;function TA(p1,m1){return p1===m1||s_(p1,m1,__(m1))}function CA(p1,m1,x1){return x1=typeof x1=="function"?x1:t1,s_(p1,m1,__(m1),x1)}function OA(p1){return ME(p1)&&p1!=+p1}function AA(p1){if(d3(p1))throw new _0(i1);return ES(p1)}function RA(p1){return p1===null}function IA(p1){return p1==null}function ME(p1){return typeof p1=="number"||$v(p1)&&Qv(p1)==A0}function zw(p1){if(!$v(p1)||Qv(p1)!=R0)return!1;var m1=f2(p1);if(m1===null)return!0;var x1=rv.call(m1,"constructor")&&m1.constructor;return typeof x1=="function"&&x1 instanceof x1&&u2.call(x1)==TT}var M_=$w?I1($w):AC;function PA(p1){return PE(p1)&&p1>=-K1&&p1<=K1}var DE=bw?I1(bw):RC;function z2(p1){return typeof p1=="string"||!S0(p1)&&$v(p1)&&Qv(p1)==Ny}function m$(p1){return typeof p1=="symbol"||$v(p1)&&Qv(p1)==Ty}var rw=t2?I1(t2):IC;function kA(p1){return p1===t1}function MA(p1){return $v(p1)&&zv(p1)==l0}function DA(p1){return $v(p1)&&Qv(p1)==I0}var NA=I2(l_),jA=I2(function(p1,m1){return p1<=m1});function NE(p1){if(!p1)return[];if(s$(p1))return z2(p1)?j$(p1):o$(p1);if(Ow&&p1[Ow])return w0(p1[Ow]());var m1=zv(p1),x1=m1==y0?z0:m1==Dy?s2:nw;return x1(p1)}function ux(p1){if(!p1)return p1===0?p1:0;if(p1=A$(p1),p1===V1||p1===-V1){var m1=p1<0?-1:1;return m1*J1}return p1===p1?p1:0}function O0(p1){var m1=ux(p1),x1=m1%1;return m1===m1?x1?m1-x1:m1:0}function jE(p1){return p1?Px(O0(p1),0,G1):0}function A$(p1){if(typeof p1=="number")return p1;if(m$(p1))return hy;if(gv(p1)){var m1=typeof p1.valueOf=="function"?p1.valueOf():p1;p1=gv(m1)?m1+"":m1}if(typeof p1!="string")return p1===0?p1:+p1;p1=C1(p1);var x1=Fy.test(p1);return x1||E0.test(p1)?fw(p1.slice(2),x1?2:8):sy.test(p1)?hy:+p1}function LE(p1){return Z$(p1,a$(p1))}function LA(p1){return p1?Px(O0(p1),-K1,K1):p1===0?p1:0}function Y0(p1){return p1==null?"":f$(p1)}var FA=Jx(function(p1,m1){if(Fw(m1)||s$(m1)){Z$(m1,kv(m1),p1);return}for(var x1 in m1)rv.call(m1,x1)&&kw(p1,x1,m1[x1])}),FE=Jx(function(p1,m1){Z$(m1,a$(m1),p1)}),U2=Jx(function(p1,m1,x1,O1){Z$(m1,a$(m1),p1,O1)}),BA=Jx(function(p1,m1,x1,O1){Z$(m1,kv(m1),p1,O1)}),zA=sx(t_);function UA(p1,m1){var x1=Qx(p1);return m1==null?x1:yS(x1,m1)}var VA=L0(function(p1,m1){p1=av(p1);var x1=-1,O1=m1.length,D1=O1>2?m1[2]:t1;for(D1&&Jv(m1[0],m1[1],D1)&&(O1=1);++x1<O1;)for(var B1=m1[x1],Z1=a$(B1),ny=-1,dy=Z1.length;++ny<dy;){var Ry=Z1[ny],Iy=p1[Ry];(Iy===t1||F$(Iy,Zx[Ry])&&!rv.call(p1,Ry))&&(p1[Ry]=B1[Ry])}return p1}),WA=L0(function(p1){return p1.push(t1,rE),Yv(BE,t1,p1)});function HA(p1,m1){return _w(p1,h0(m1,3),K$)}function GA(p1,m1){return _w(p1,h0(m1,3),n_)}function qA(p1,m1){return p1==null?p1:r_(p1,h0(m1,3),a$)}function KA(p1,m1){return p1==null?p1:wS(p1,h0(m1,3),a$)}function ZA(p1,m1){return p1&&K$(p1,h0(m1,3))}function YA(p1,m1){return p1&&n_(p1,h0(m1,3))}function XA(p1){return p1==null?[]:_2(p1,kv(p1))}function QA(p1){return p1==null?[]:_2(p1,a$(p1))}function D_(p1,m1,x1){var O1=p1==null?t1:kx(p1,m1);return O1===t1?x1:O1}function JA(p1,m1){return p1!=null&&oE(p1,m1,xC)}function N_(p1,m1){return p1!=null&&oE(p1,m1,wC)}var eR=XS(function(p1,m1,x1){m1!=null&&typeof m1.toString!="function"&&(m1=c2.call(m1)),p1[m1]=x1},L_(l$)),tR=XS(function(p1,m1,x1){m1!=null&&typeof m1.toString!="function"&&(m1=c2.call(m1)),rv.call(p1,m1)?p1[m1].push(x1):p1[m1]=[x1]},h0),rR=L0(Dw);function kv(p1){return s$(p1)?mS(p1):a_(p1)}function a$(p1){return s$(p1)?mS(p1,!0):PC(p1)}function nR(p1,m1){var x1={};return m1=h0(m1,3),K$(p1,function(O1,D1,B1){ix(x1,m1(O1,D1,B1),O1)}),x1}function iR(p1,m1){var x1={};return m1=h0(m1,3),K$(p1,function(O1,D1,B1){ix(x1,D1,m1(O1,D1,B1))}),x1}var oR=Jx(function(p1,m1,x1){S2(p1,m1,x1)}),BE=Jx(function(p1,m1,x1,O1){S2(p1,m1,x1,O1)}),sR=sx(function(p1,m1){var x1={};if(p1==null)return x1;var O1=!1;m1=tv(m1,function(B1){return B1=vx(B1,p1),O1||(O1=B1.length>1),B1}),Z$(p1,x_(p1),x1),O1&&(x1=T$(x1,c1|d1|h1,JC));for(var D1=m1.length;D1--;)f_(x1,m1[D1]);return x1});function aR(p1,m1){return zE(p1,F2(h0(m1)))}var lR=sx(function(p1,m1){return p1==null?{}:MC(p1,m1)});function zE(p1,m1){if(p1==null)return{};var x1=tv(x_(p1),function(O1){return[O1]});return m1=h0(m1),PS(p1,x1,function(O1,D1){return m1(O1,D1[0])})}function uR(p1,m1,x1){m1=vx(m1,p1);var O1=-1,D1=m1.length;for(D1||(D1=1,p1=t1);++O1<D1;){var B1=p1==null?t1:p1[Y$(m1[O1])];B1===t1&&(O1=D1,B1=x1),p1=lx(B1)?B1.call(p1):B1}return p1}function cR(p1,m1,x1){return p1==null?p1:jw(p1,m1,x1)}function dR(p1,m1,x1,O1){return O1=typeof O1=="function"?O1:t1,p1==null?p1:jw(p1,m1,x1,O1)}var UE=eE(kv),VE=eE(a$);function pR(p1,m1,x1){var O1=S0(p1),D1=O1||bx(p1)||rw(p1);if(m1=h0(m1,4),x1==null){var B1=p1&&p1.constructor;D1?x1=O1?new B1:[]:gv(p1)?x1=lx(B1)?Qx(f2(p1)):{}:x1={}}return(D1?Xv:K$)(p1,function(Z1,ny,dy){return m1(x1,Z1,ny,dy)}),x1}function fR(p1,m1){return p1==null?!0:f_(p1,m1)}function hR(p1,m1,x1){return p1==null?p1:jS(p1,m1,g_(x1))}function mR(p1,m1,x1,O1){return O1=typeof O1=="function"?O1:t1,p1==null?p1:jS(p1,m1,g_(x1),O1)}function nw(p1){return p1==null?[]:j1(p1,kv(p1))}function gR(p1){return p1==null?[]:j1(p1,a$(p1))}function yR(p1,m1,x1){return x1===t1&&(x1=m1,m1=t1),x1!==t1&&(x1=A$(x1),x1=x1===x1?x1:0),m1!==t1&&(m1=A$(m1),m1=m1===m1?m1:0),Px(A$(p1),m1,x1)}function vR(p1,m1,x1){return m1=ux(m1),x1===t1?(x1=m1,m1=0):x1=ux(x1),p1=A$(p1),_C(p1,m1,x1)}function $R(p1,m1,x1){if(x1&&typeof x1!="boolean"&&Jv(p1,m1,x1)&&(m1=x1=t1),x1===t1&&(typeof m1=="boolean"?(x1=m1,m1=t1):typeof p1=="boolean"&&(x1=p1,p1=t1)),p1===t1&&m1===t1?(p1=0,m1=1):(p1=ux(p1),m1===t1?(m1=p1,p1=0):m1=ux(m1)),p1>m1){var O1=p1;p1=m1,m1=O1}if(x1||p1%1||m1%1){var D1=fS();return Bv(p1+D1*(m1-p1+Jw("1e-"+((D1+"").length-1))),m1)}return c_(p1,m1)}var bR=ew(function(p1,m1,x1){return m1=m1.toLowerCase(),p1+(x1?WE(m1):m1)});function WE(p1){return j_(Y0(p1).toLowerCase())}function HE(p1){return p1=Y0(p1),p1&&p1.replace(sv,Jy).replace(zy,"")}function xR(p1,m1,x1){p1=Y0(p1),m1=f$(m1);var O1=p1.length;x1=x1===t1?O1:Px(O0(x1),0,O1);var D1=x1;return x1-=m1.length,x1>=0&&p1.slice(x1,D1)==m1}function wR(p1){return p1=Y0(p1),p1&&r0.test(p1)?p1.replace(wy,Ky):p1}function _R(p1){return p1=Y0(p1),p1&&gy.test(p1)?p1.replace(yv,"\\$&"):p1}var SR=ew(function(p1,m1,x1){return p1+(x1?"-":"")+m1.toLowerCase()}),ER=ew(function(p1,m1,x1){return p1+(x1?" ":"")+m1.toLowerCase()}),TR=KS("toLowerCase");function CR(p1,m1,x1){p1=Y0(p1),m1=O0(m1);var O1=m1?Kx(p1):0;if(!m1||O1>=m1)return p1;var D1=(m1-O1)/2;return R2(y2(D1),x1)+p1+R2(g2(D1),x1)}function OR(p1,m1,x1){p1=Y0(p1),m1=O0(m1);var O1=m1?Kx(p1):0;return m1&&O1<m1?p1+R2(m1-O1,x1):p1}function AR(p1,m1,x1){p1=Y0(p1),m1=O0(m1);var O1=m1?Kx(p1):0;return m1&&O1<m1?R2(m1-O1,x1)+p1:p1}function RR(p1,m1,x1){return x1||m1==null?m1=0:m1&&(m1=+m1),NT(Y0(p1).replace(T0,""),m1||0)}function IR(p1,m1,x1){return(x1?Jv(p1,m1,x1):m1===t1)?m1=1:m1=O0(m1),d_(Y0(p1),m1)}function PR(){var p1=arguments,m1=Y0(p1[0]);return p1.length<3?m1:m1.replace(p1[1],p1[2])}var kR=ew(function(p1,m1,x1){return p1+(x1?"_":"")+m1.toLowerCase()});function MR(p1,m1,x1){return x1&&typeof x1!="number"&&Jv(p1,m1,x1)&&(m1=x1=t1),x1=x1===t1?G1:x1>>>0,x1?(p1=Y0(p1),p1&&(typeof m1=="string"||m1!=null&&!M_(m1))&&(m1=f$(m1),!m1&&V0(p1))?$x(j$(p1),0,x1):p1.split(m1,x1)):[]}var DR=ew(function(p1,m1,x1){return p1+(x1?" ":"")+j_(m1)});function NR(p1,m1,x1){return p1=Y0(p1),x1=x1==null?0:Px(O0(x1),0,p1.length),m1=f$(m1),p1.slice(x1,x1+m1.length)==m1}function jR(p1,m1,x1){var O1=L1.templateSettings;x1&&Jv(p1,m1,x1)&&(m1=t1),p1=Y0(p1),m1=U2({},m1,O1,tE);var D1=U2({},m1.imports,O1.imports,tE),B1=kv(D1),Z1=j1(D1,B1),ny,dy,Ry=0,Iy=m1.interpolate||B0,My="__p += '",Zy=Y2((m1.escape||B0).source+"|"+Iy.source+"|"+(Iy===hv?Lv:B0).source+"|"+(m1.evaluate||B0).source+"|$","g"),o0="//# sourceURL="+(rv.call(m1,"sourceURL")?(m1.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xy+"]")+`
`;p1.replace(Zy,function(g0,F0,W0,g$,e$,y$){return W0||(W0=g$),My+=p1.slice(Ry,y$).replace(P0,d0),F0&&(ny=!0,My+=`' +
__e(`+F0+`) +
'`),e$&&(dy=!0,My+=`';
`+e$+`;
__p += '`),W0&&(My+=`' +
((__t = (`+W0+`)) == null ? '' : __t) +
'`),Ry=y$+g0.length,g0}),My+=`';
`;var m0=rv.call(m1,"variable")&&m1.variable;if(!m0)My=`with (obj) {
`+My+`
}
`;else if(b$.test(m0))throw new _0(a1);My=(dy?My.replace(ov,""):My).replace(z1,"$1").replace(ay,"$1;"),My="function("+(m0||"obj")+`) {
`+(m0?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ny?", __e = _.escape":"")+(dy?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+My+`return __p
}`;var k0=qE(function(){return K0(B1,o0+"return "+My).apply(t1,Z1)});if(k0.source=My,k_(k0))throw k0;return k0}function LR(p1){return Y0(p1).toLowerCase()}function FR(p1){return Y0(p1).toUpperCase()}function BR(p1,m1,x1){if(p1=Y0(p1),p1&&(x1||m1===t1))return C1(p1);if(!p1||!(m1=f$(m1)))return p1;var O1=j$(p1),D1=j$(m1),B1=iy(O1,D1),Z1=xy(O1,D1)+1;return $x(O1,B1,Z1).join("")}function zR(p1,m1,x1){if(p1=Y0(p1),p1&&(x1||m1===t1))return p1.slice(0,sS(p1)+1);if(!p1||!(m1=f$(m1)))return p1;var O1=j$(p1),D1=xy(O1,j$(m1))+1;return $x(O1,0,D1).join("")}function UR(p1,m1,x1){if(p1=Y0(p1),p1&&(x1||m1===t1))return p1.replace(T0,"");if(!p1||!(m1=f$(m1)))return p1;var O1=j$(p1),D1=iy(O1,j$(m1));return $x(O1,D1).join("")}function VR(p1,m1){var x1=H1,O1=ty;if(gv(m1)){var D1="separator"in m1?m1.separator:D1;x1="length"in m1?O0(m1.length):x1,O1="omission"in m1?f$(m1.omission):O1}p1=Y0(p1);var B1=p1.length;if(V0(p1)){var Z1=j$(p1);B1=Z1.length}if(x1>=B1)return p1;var ny=x1-Kx(O1);if(ny<1)return O1;var dy=Z1?$x(Z1,0,ny).join(""):p1.slice(0,ny);if(D1===t1)return dy+O1;if(Z1&&(ny+=dy.length-ny),M_(D1)){if(p1.slice(ny).search(D1)){var Ry,Iy=dy;for(D1.global||(D1=Y2(D1.source,Y0(u$.exec(D1))+"g")),D1.lastIndex=0;Ry=D1.exec(Iy);)var My=Ry.index;dy=dy.slice(0,My===t1?ny:My)}}else if(p1.indexOf(f$(D1),ny)!=ny){var Zy=dy.lastIndexOf(D1);Zy>-1&&(dy=dy.slice(0,Zy))}return dy+O1}function WR(p1){return p1=Y0(p1),p1&&Cy.test(p1)?p1.replace(cy,vT):p1}var HR=ew(function(p1,m1,x1){return p1+(x1?" ":"")+m1.toUpperCase()}),j_=KS("toUpperCase");function GE(p1,m1,x1){return p1=Y0(p1),m1=x1?t1:m1,m1===t1?by(p1)?xT(p1):o2(p1):p1.match(m1)||[]}var qE=L0(function(p1,m1){try{return Yv(p1,t1,m1)}catch(x1){return k_(x1)?x1:new _0(x1)}}),GR=sx(function(p1,m1){return Xv(m1,function(x1){x1=Y$(x1),ix(p1,x1,I_(p1[x1],p1))}),p1});function qR(p1){var m1=p1==null?0:p1.length,x1=h0();return p1=m1?tv(p1,function(O1){if(typeof O1[1]!="function")throw new S$(o1);return[x1(O1[0]),O1[1]]}):[],L0(function(O1){for(var D1=-1;++D1<m1;){var B1=p1[D1];if(Yv(B1[0],this,O1))return Yv(B1[1],this,O1)}})}function KR(p1){return vC(T$(p1,c1))}function L_(p1){return function(){return p1}}function ZR(p1,m1){return p1==null||p1!==p1?m1:p1}var YR=YS(),XR=YS(!0);function l$(p1){return p1}function F_(p1){return TS(typeof p1=="function"?p1:T$(p1,c1))}function QR(p1){return OS(T$(p1,c1))}function JR(p1,m1){return AS(p1,T$(m1,c1))}var eI=L0(function(p1,m1){return function(x1){return Dw(x1,p1,m1)}}),tI=L0(function(p1,m1){return function(x1){return Dw(p1,x1,m1)}});function B_(p1,m1,x1){var O1=kv(m1),D1=_2(m1,O1);x1==null&&!(gv(m1)&&(D1.length||!O1.length))&&(x1=m1,m1=p1,p1=this,D1=_2(m1,kv(m1)));var B1=!(gv(x1)&&"chain"in x1)||!!x1.chain,Z1=lx(p1);return Xv(D1,function(ny){var dy=m1[ny];p1[ny]=dy,Z1&&(p1.prototype[ny]=function(){var Ry=this.__chain__;if(B1||Ry){var Iy=p1(this.__wrapped__),My=Iy.__actions__=o$(this.__actions__);return My.push({func:dy,args:arguments,thisArg:p1}),Iy.__chain__=Ry,Iy}return dy.apply(p1,p$([this.value()],arguments))})}),p1}function rI(){return _v._===this&&(_v._=CT),this}function z_(){}function nI(p1){return p1=O0(p1),L0(function(m1){return RS(m1,p1)})}var iI=v_(tv),oI=v_(n2),sI=v_(Wx);function KE(p1){return E_(p1)?Hx(Y$(p1)):DC(p1)}function aI(p1){return function(m1){return p1==null?t1:kx(p1,m1)}}var lI=QS(),uI=QS(!0);function U_(){return[]}function V_(){return!1}function cI(){return{}}function dI(){return""}function pI(){return!0}function fI(p1,m1){if(p1=O0(p1),p1<1||p1>K1)return[];var x1=G1,O1=Bv(p1,G1);m1=h0(m1),p1-=G1;for(var D1=qx(O1,m1);++x1<p1;)m1(x1);return D1}function hI(p1){return S0(p1)?tv(p1,Y$):m$(p1)?[p1]:o$(hE(Y0(p1)))}function mI(p1){var m1=++ET;return Y0(p1)+m1}var gI=A2(function(p1,m1){return p1+m1},0),yI=$_("ceil"),vI=A2(function(p1,m1){return p1/m1},1),$I=$_("floor");function bI(p1){return p1&&p1.length?w2(p1,l$,i_):t1}function xI(p1,m1){return p1&&p1.length?w2(p1,h0(m1,2),i_):t1}function wI(p1){return Tw(p1,l$)}function _I(p1,m1){return Tw(p1,h0(m1,2))}function SI(p1){return p1&&p1.length?w2(p1,l$,l_):t1}function EI(p1,m1){return p1&&p1.length?w2(p1,h0(m1,2),l_):t1}var TI=A2(function(p1,m1){return p1*m1},1),CI=$_("round"),OI=A2(function(p1,m1){return p1-m1},0);function AI(p1){return p1&&p1.length?fx(p1,l$):0}function RI(p1,m1){return p1&&p1.length?fx(p1,h0(m1,2)):0}return L1.after=QO,L1.ary=EE,L1.assign=FA,L1.assignIn=FE,L1.assignInWith=U2,L1.assignWith=BA,L1.at=zA,L1.before=TE,L1.bind=I_,L1.bindAll=GR,L1.bindKey=CE,L1.castArray=cA,L1.chain=wE,L1.chunk=v3,L1.compact=$3,L1.concat=b3,L1.cond=qR,L1.conforms=KR,L1.constant=L_,L1.countBy=OO,L1.create=UA,L1.curry=OE,L1.curryRight=AE,L1.debounce=RE,L1.defaults=VA,L1.defaultsDeep=WA,L1.defer=JO,L1.delay=eA,L1.difference=x3,L1.differenceBy=w3,L1.differenceWith=_3,L1.drop=S3,L1.dropRight=E3,L1.dropRightWhile=T3,L1.dropWhile=C3,L1.fill=O3,L1.filter=RO,L1.flatMap=kO,L1.flatMapDeep=MO,L1.flatMapDepth=DO,L1.flatten=vE,L1.flattenDeep=A3,L1.flattenDepth=R3,L1.flip=tA,L1.flow=YR,L1.flowRight=XR,L1.fromPairs=I3,L1.functions=XA,L1.functionsIn=QA,L1.groupBy=NO,L1.initial=k3,L1.intersection=M3,L1.intersectionBy=D3,L1.intersectionWith=N3,L1.invert=eR,L1.invertBy=tR,L1.invokeMap=FO,L1.iteratee=F_,L1.keyBy=BO,L1.keys=kv,L1.keysIn=a$,L1.map=N2,L1.mapKeys=nR,L1.mapValues=iR,L1.matches=QR,L1.matchesProperty=JR,L1.memoize=L2,L1.merge=oR,L1.mergeWith=BE,L1.method=eI,L1.methodOf=tI,L1.mixin=B_,L1.negate=F2,L1.nthArg=nI,L1.omit=sR,L1.omitBy=aR,L1.once=rA,L1.orderBy=zO,L1.over=iI,L1.overArgs=nA,L1.overEvery=oI,L1.overSome=sI,L1.partial=P_,L1.partialRight=IE,L1.partition=UO,L1.pick=lR,L1.pickBy=zE,L1.property=KE,L1.propertyOf=aI,L1.pull=B3,L1.pullAll=bE,L1.pullAllBy=z3,L1.pullAllWith=U3,L1.pullAt=V3,L1.range=lI,L1.rangeRight=uI,L1.rearg=iA,L1.reject=HO,L1.remove=W3,L1.rest=oA,L1.reverse=A_,L1.sampleSize=qO,L1.set=cR,L1.setWith=dR,L1.shuffle=KO,L1.slice=H3,L1.sortBy=XO,L1.sortedUniq=Q3,L1.sortedUniqBy=J3,L1.split=MR,L1.spread=sA,L1.tail=eO,L1.take=tO,L1.takeRight=rO,L1.takeRightWhile=nO,L1.takeWhile=iO,L1.tap=$O,L1.throttle=aA,L1.thru=D2,L1.toArray=NE,L1.toPairs=UE,L1.toPairsIn=VE,L1.toPath=hI,L1.toPlainObject=LE,L1.transform=pR,L1.unary=lA,L1.union=oO,L1.unionBy=sO,L1.unionWith=aO,L1.uniq=lO,L1.uniqBy=uO,L1.uniqWith=cO,L1.unset=fR,L1.unzip=R_,L1.unzipWith=xE,L1.update=hR,L1.updateWith=mR,L1.values=nw,L1.valuesIn=gR,L1.without=dO,L1.words=GE,L1.wrap=uA,L1.xor=pO,L1.xorBy=fO,L1.xorWith=hO,L1.zip=mO,L1.zipObject=gO,L1.zipObjectDeep=yO,L1.zipWith=vO,L1.entries=UE,L1.entriesIn=VE,L1.extend=FE,L1.extendWith=U2,B_(L1,L1),L1.add=gI,L1.attempt=qE,L1.camelCase=bR,L1.capitalize=WE,L1.ceil=yI,L1.clamp=yR,L1.clone=dA,L1.cloneDeep=fA,L1.cloneDeepWith=hA,L1.cloneWith=pA,L1.conformsTo=mA,L1.deburr=HE,L1.defaultTo=ZR,L1.divide=vI,L1.endsWith=xR,L1.eq=F$,L1.escape=wR,L1.escapeRegExp=_R,L1.every=AO,L1.find=IO,L1.findIndex=gE,L1.findKey=HA,L1.findLast=PO,L1.findLastIndex=yE,L1.findLastKey=GA,L1.floor=$I,L1.forEach=_E,L1.forEachRight=SE,L1.forIn=qA,L1.forInRight=KA,L1.forOwn=ZA,L1.forOwnRight=YA,L1.get=D_,L1.gt=gA,L1.gte=yA,L1.has=JA,L1.hasIn=N_,L1.head=$E,L1.identity=l$,L1.includes=LO,L1.indexOf=P3,L1.inRange=vR,L1.invoke=rR,L1.isArguments=Nx,L1.isArray=S0,L1.isArrayBuffer=vA,L1.isArrayLike=s$,L1.isArrayLikeObject=Sv,L1.isBoolean=$A,L1.isBuffer=bx,L1.isDate=bA,L1.isElement=xA,L1.isEmpty=wA,L1.isEqual=_A,L1.isEqualWith=SA,L1.isError=k_,L1.isFinite=EA,L1.isFunction=lx,L1.isInteger=PE,L1.isLength=B2,L1.isMap=kE,L1.isMatch=TA,L1.isMatchWith=CA,L1.isNaN=OA,L1.isNative=AA,L1.isNil=IA,L1.isNull=RA,L1.isNumber=ME,L1.isObject=gv,L1.isObjectLike=$v,L1.isPlainObject=zw,L1.isRegExp=M_,L1.isSafeInteger=PA,L1.isSet=DE,L1.isString=z2,L1.isSymbol=m$,L1.isTypedArray=rw,L1.isUndefined=kA,L1.isWeakMap=MA,L1.isWeakSet=DA,L1.join=j3,L1.kebabCase=SR,L1.last=O$,L1.lastIndexOf=L3,L1.lowerCase=ER,L1.lowerFirst=TR,L1.lt=NA,L1.lte=jA,L1.max=bI,L1.maxBy=xI,L1.mean=wI,L1.meanBy=_I,L1.min=SI,L1.minBy=EI,L1.stubArray=U_,L1.stubFalse=V_,L1.stubObject=cI,L1.stubString=dI,L1.stubTrue=pI,L1.multiply=TI,L1.nth=F3,L1.noConflict=rI,L1.noop=z_,L1.now=j2,L1.pad=CR,L1.padEnd=OR,L1.padStart=AR,L1.parseInt=RR,L1.random=$R,L1.reduce=VO,L1.reduceRight=WO,L1.repeat=IR,L1.replace=PR,L1.result=uR,L1.round=CI,L1.runInContext=uy,L1.sample=GO,L1.size=ZO,L1.snakeCase=kR,L1.some=YO,L1.sortedIndex=G3,L1.sortedIndexBy=q3,L1.sortedIndexOf=K3,L1.sortedLastIndex=Z3,L1.sortedLastIndexBy=Y3,L1.sortedLastIndexOf=X3,L1.startCase=DR,L1.startsWith=NR,L1.subtract=OI,L1.sum=AI,L1.sumBy=RI,L1.template=jR,L1.times=fI,L1.toFinite=ux,L1.toInteger=O0,L1.toLength=jE,L1.toLower=LR,L1.toNumber=A$,L1.toSafeInteger=LA,L1.toString=Y0,L1.toUpper=FR,L1.trim=BR,L1.trimEnd=zR,L1.trimStart=UR,L1.truncate=VR,L1.unescape=WR,L1.uniqueId=mI,L1.upperCase=HR,L1.upperFirst=j_,L1.each=_E,L1.eachRight=SE,L1.first=$E,B_(L1,function(){var p1={};return K$(L1,function(m1,x1){rv.call(L1.prototype,x1)||(p1[x1]=m1)}),p1}(),{chain:!1}),L1.VERSION=r1,Xv(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p1){L1[p1].placeholder=L1}),Xv(["drop","take"],function(p1,m1){U0.prototype[p1]=function(x1){x1=x1===t1?1:Rv(O0(x1),0);var O1=this.__filtered__&&!m1?new U0(this):this.clone();return O1.__filtered__?O1.__takeCount__=Bv(x1,O1.__takeCount__):O1.__views__.push({size:Bv(x1,G1),type:p1+(O1.__dir__<0?"Right":"")}),O1},U0.prototype[p1+"Right"]=function(x1){return this.reverse()[p1](x1).reverse()}}),Xv(["filter","map","takeWhile"],function(p1,m1){var x1=m1+1,O1=x1==oy||x1==U1;U0.prototype[p1]=function(D1){var B1=this.clone();return B1.__iteratees__.push({iteratee:h0(D1,3),type:x1}),B1.__filtered__=B1.__filtered__||O1,B1}}),Xv(["head","last"],function(p1,m1){var x1="take"+(m1?"Right":"");U0.prototype[p1]=function(){return this[x1](1).value()[0]}}),Xv(["initial","tail"],function(p1,m1){var x1="drop"+(m1?"":"Right");U0.prototype[p1]=function(){return this.__filtered__?new U0(this):this[x1](1)}}),U0.prototype.compact=function(){return this.filter(l$)},U0.prototype.find=function(p1){return this.filter(p1).head()},U0.prototype.findLast=function(p1){return this.reverse().find(p1)},U0.prototype.invokeMap=L0(function(p1,m1){return typeof p1=="function"?new U0(this):this.map(function(x1){return Dw(x1,p1,m1)})}),U0.prototype.reject=function(p1){return this.filter(F2(h0(p1)))},U0.prototype.slice=function(p1,m1){p1=O0(p1);var x1=this;return x1.__filtered__&&(p1>0||m1<0)?new U0(x1):(p1<0?x1=x1.takeRight(-p1):p1&&(x1=x1.drop(p1)),m1!==t1&&(m1=O0(m1),x1=m1<0?x1.dropRight(-m1):x1.take(m1-p1)),x1)},U0.prototype.takeRightWhile=function(p1){return this.reverse().takeWhile(p1).reverse()},U0.prototype.toArray=function(){return this.take(G1)},K$(U0.prototype,function(p1,m1){var x1=/^(?:filter|find|map|reject)|While$/.test(m1),O1=/^(?:head|last)$/.test(m1),D1=L1[O1?"take"+(m1=="last"?"Right":""):m1],B1=O1||/^find/.test(m1);D1&&(L1.prototype[m1]=function(){var Z1=this.__wrapped__,ny=O1?[1]:arguments,dy=Z1 instanceof U0,Ry=ny[0],Iy=dy||S0(Z1),My=function(F0){var W0=D1.apply(L1,p$([F0],ny));return O1&&Zy?W0[0]:W0};Iy&&x1&&typeof Ry=="function"&&Ry.length!=1&&(dy=Iy=!1);var Zy=this.__chain__,o0=!!this.__actions__.length,m0=B1&&!Zy,k0=dy&&!o0;if(!B1&&Iy){Z1=k0?Z1:new U0(this);var g0=p1.apply(Z1,ny);return g0.__actions__.push({func:D2,args:[My],thisArg:t1}),new E$(g0,Zy)}return m0&&k0?p1.apply(this,ny):(g0=this.thru(My),m0?O1?g0.value()[0]:g0.value():g0)})}),Xv(["pop","push","shift","sort","splice","unshift"],function(p1){var m1=a2[p1],x1=/^(?:push|sort|unshift)$/.test(p1)?"tap":"thru",O1=/^(?:pop|shift)$/.test(p1);L1.prototype[p1]=function(){var D1=arguments;if(O1&&!this.__chain__){var B1=this.value();return m1.apply(S0(B1)?B1:[],D1)}return this[x1](function(Z1){return m1.apply(S0(Z1)?Z1:[],D1)})}}),K$(U0.prototype,function(p1,m1){var x1=L1[m1];if(x1){var O1=x1.name+"";rv.call(Xx,O1)||(Xx[O1]=[]),Xx[O1].push({name:m1,func:x1})}}),Xx[O2(t1,$1).name]=[{name:"wrapper",func:t1}],U0.prototype.clone=VT,U0.prototype.reverse=WT,U0.prototype.value=HT,L1.prototype.at=bO,L1.prototype.chain=xO,L1.prototype.commit=wO,L1.prototype.next=_O,L1.prototype.plant=EO,L1.prototype.reverse=TO,L1.prototype.toJSON=L1.prototype.valueOf=L1.prototype.value=CO,L1.prototype.first=L1.prototype.head,Ow&&(L1.prototype[Ow]=SO),L1},hx=wT();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(_v._=hx,define(function(){return hx})):W$?((W$.exports=hx)._=hx,Ox._=hx):_v._=hx}).call(e1)}}),import_lodash=__toESM(require_lodash());async function imageDecode(e1){const _g=MimeType.fromString(e1.type);switch(_g.type){case"image/x-alpha8":{const t1=parseInt(_g.params.width),r1=parseInt(_g.params.height);return ndarray4(new Uint8Array(await e1.arrayBuffer()),[r1,t1,1])}case"image/x-rgba8":{const t1=parseInt(_g.params.width),r1=parseInt(_g.params.height);return ndarray4(new Uint8Array(await e1.arrayBuffer()),[r1,t1,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/jpg":case"image/webp":{const t1=await createImageBitmap(e1),r1=imageBitmapToImageData(t1);return ndarray4(new Uint8Array(r1.data),[r1.height,r1.width,4])}default:throw new Error(`Invalid format: ${_g.type} with params: ${_g.params}`)}}async function imageEncode(e1,_g=.8,t1="image/png"){const[r1,n1,i1]=e1.shape;switch(t1){case"image/x-alpha8":case"image/x-rgba8":{const u1=MimeType.create(t1,{width:n1.toString(),height:r1.toString()});return new Blob([e1.data],{type:u1.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const u1=new ImageData(new Uint8ClampedArray(e1.data),n1,r1);var o1=createCanvas(u1.width,u1.height),a1=o1.getContext("2d");return a1.putImageData(u1,0,0),o1.convertToBlob({quality:_g,type:t1})}default:throw new Error(`Invalid format: ${t1}`)}}var MimeType=class oS{constructor(_g,t1){this.type="application/octet-stream",this.params={},this.type=_g,this.params=t1}toString(){const _g=[];for(const t1 in this.params){const r1=this.params[t1];_g.push(`${t1}=${r1}`)}return[this.type,..._g].join(";")}static create(_g,t1){return new oS(_g,t1)}isIdentical(_g){return this.type===_g.type&&this.params===_g.params}isEqual(_g){return this.type===_g.type}static fromString(_g){const[t1,...r1]=_g.split(";"),n1={};for(const i1 of r1){const[o1,a1]=i1.split("=");n1[o1.trim()]=a1.trim()}return new oS(t1,n1)}};function isAbsoluteURI(e1){return new RegExp("^(?:[a-z+]+:)?//","i").test(e1)}function ensureAbsoluteURI(e1,_g){return isAbsoluteURI(e1)?e1:new URL(e1,_g).href}function imageBitmapToImageData(e1){var _g=createCanvas(e1.width,e1.height),t1=_g.getContext("2d");return t1.drawImage(e1,0,0),t1.getImageData(0,0,_g.width,_g.height)}function createTypeArray(e1){if(typeof Uint8Array<"u")return new Uint8Array(e1);if(typeof Uint8ClampedArray<"u")return new Uint8ClampedArray(e1);if(typeof Uint16Array<"u")return new Uint16Array(e1);if(typeof Uint32Array<"u")return new Uint32Array(e1);if(typeof Float32Array<"u")return new Float32Array(e1);if(typeof Float64Array<"u")return new Float64Array(e1);throw new Error("TypedArray not supported")}function tensorResizeBilinear(e1,_g,t1,r1=!1){const[n1,i1,o1]=e1.shape;let a1=i1/_g,u1=n1/t1;r1&&(a1=u1=Math.max(a1,u1)>1?Math.max(a1,u1):Math.min(a1,u1));const s1=ndarray4(createTypeArray(o1*_g*t1),[t1,_g,o1]);for(let l1=0;l1<t1;l1++)for(let c1=0;c1<_g;c1++){const d1=c1*a1,h1=l1*u1,f1=Math.max(Math.floor(d1),0),g1=Math.min(Math.ceil(d1),i1-1),v1=Math.max(Math.floor(h1),0),$1=Math.min(Math.ceil(h1),n1-1),y1=d1-f1,_1=h1-v1;for(let E1=0;E1<o1;E1++){const T1=e1.get(v1,f1,E1),P1=e1.get(v1,g1,E1),k1=e1.get($1,f1,E1),N1=e1.get($1,g1,E1),W1=(1-y1)*(1-_1)*T1+y1*(1-_1)*P1+(1-y1)*_1*k1+y1*_1*N1;s1.set(l1,c1,E1,W1)}}return s1}function tensorHWCtoBCHW(e1,_g=[128,128,128],t1=[256,256,256]){var r1=e1.data;const[n1,i1,o1]=e1.shape,a1=n1*i1,u1=new Float32Array(3*a1);for(let s1=0,l1=0;s1<r1.length;s1+=4,l1+=1)u1[l1]=(r1[s1]-_g[0])/t1[0],u1[l1+a1]=(r1[s1+1]-_g[1])/t1[1],u1[l1+a1+a1]=(r1[s1+2]-_g[2])/t1[2];return ndarray4(u1,[1,3,n1,i1])}async function imageSourceToImageData(e1,_g){return typeof e1=="string"&&(e1=ensureAbsoluteURI(e1,_g.publicPath),e1=new URL(e1)),e1 instanceof URL&&(e1=await(await fetch(e1,{})).blob()),(e1 instanceof ArrayBuffer||ArrayBuffer.isView(e1))&&(e1=new Blob([e1])),e1 instanceof Blob&&(e1=await imageDecode(e1)),e1}function convertFloat32ToUint8(e1){const _g=new Uint8Array(e1.data.length);for(let t1=0;t1<e1.data.length;t1++)_g[t1]=e1.data[t1]*255;return ndarray4(_g,e1.shape)}function createCanvas(e1,_g){let t1;if(typeof OffscreenCanvas<"u"?t1=new OffscreenCanvas(e1,_g):t1=document.createElement("canvas"),!t1)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return t1}async function loadAsUrl(e1,_g){return URL.createObjectURL(await loadAsBlob(e1,_g))}async function loadAsBlob(e1,_g){const t1=new URL("resources.json",_g.publicPath),r1=await fetch(t1);if(!r1.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const i1=(await r1.json())[e1];if(!i1)throw new Error(`Resource ${e1} not found. Ensure that the config.publicPath is configured correctly.`);const o1=i1.chunks;let a1=0;const u1=o1.map(async c1=>{const d1=c1.offsets[1]-c1.offsets[0],h1=_g.publicPath?new URL(c1.hash,_g.publicPath).toString():c1.hash,g1=await(await fetch(h1,_g.fetchArgs)).blob();if(d1!==g1.size)throw new Error(`Failed to fetch ${e1} with size ${d1} but got ${g1.size}`);return _g.progress&&(a1+=d1,_g.progress(`fetch:${e1}`,a1,i1.size)),g1}),s1=await Promise.all(u1),l1=new Blob(s1,{type:i1.mime});if(l1.size!==i1.size)throw new Error(`Failed to fetch ${e1} with size ${i1.size} but got ${l1.size}`);return l1}var simd=()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async e1=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e1)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),webgpu=()=>navigator.gpu!==void 0,maxNumThreads=()=>navigator.hardwareConcurrency??4;async function createOnnxSession(e1,_g){const t1=_g.device==="gpu",r1=await threads(),n1=simd(),i1=_g.proxyToWorker,o1=[t1?"webgpu":"wasm"],a1=t1?ort_gpu:ort_cpu;_g.debug&&(console.debug("	Using Threads:",r1),console.debug("	Using SIMD:",n1),console.debug("	Using WebGPU:",t1),console.debug("	Proxy to Worker:",i1),a1.env.debug=!0,a1.env.logLevel="verbose"),a1.env.wasm.numThreads=maxNumThreads(),a1.env.wasm.simd=simd(),a1.env.wasm.proxy=i1;const u1={"ort-wasm-simd-threaded.wasm":r1&&n1,"ort-wasm-simd.wasm":!r1&&n1,"ort-wasm-threaded.wasm":!t1&&r1&&!n1,"ort-wasm.wasm":!t1&&!r1&&!n1},s1={};for(const[d1,h1]of Object.entries(u1))if(h1){const f1=t1&&d1.includes("simd")?`/onnxruntime-web/${d1.replace(".wasm",".jsep.wasm")}`:`/onnxruntime-web/${d1}`;s1[d1]=await loadAsUrl(f1,_g)}a1.env.wasm.wasmPaths=s1,_g.debug&&console.debug("ort.env.wasm:",a1.env.wasm);const l1={executionProviders:o1,graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await a1.InferenceSession.create(e1,l1).catch(d1=>{throw new Error(`Failed to create session: "${d1}". Please check if the publicPath is set correctly.`)})}async function runOnnxSession(e1,_g,t1,r1){const i1=r1.device==="gpu"?ort_gpu:ort_cpu,o1={};for(const[s1,l1]of _g)o1[s1]=new i1.Tensor("float32",new Float32Array(l1.data),l1.shape);const a1=await e1.run(o1,{}),u1=[];for(const s1 of t1){const l1=a1[s1],c1=l1.dims,d1=l1.data,h1=ndarray4(d1,c1);u1.push(h1)}return u1}var package_default={name:"@imgly/background-removal",version:"1.5.3",description:"Background Removal in the Browser",keywords:["background-removal","client-side","data-privacy","image-segmentation","image-matting","onnx"],repository:{type:"git",url:"git+https://github.com/imgly/background-removal-js.git"},license:"SEE LICENSE IN LICENSE.md",author:{name:"IMG.LY GmbH",email:"support@img.ly",url:"https://img.ly"},bugs:{email:"support@img.ly"},source:"./src/index.ts",main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/src/index.d.ts",exports:{".":{require:"./dist/index.cjs",import:"./dist/index.mjs",types:"./dist/src/index.d.ts"}},homepage:"https://img.ly/showcases/cesdk/web/background-removal",files:["LICENSE.md","README.md","CHANGELOG.md","ThirdPartyLicenses.json","dist/","bin/"],scripts:{start:"npm run watch",clean:"npx rimraf dist",test:"true",resources:"node ../../scripts/package-resources.mjs","changelog:create":"node ../../scripts/changelog/changelog-create.mjs","changelog:generate":"node ../../scripts/changelog/changelog-generate.mjs",build:"npm run clean && npm run types && npm run resources && npm run changelog:generate && node scripts/build.mjs",types:" npx tsc --declaration --emitDeclarationOnly --declarationDir dist --declarationMap",watch:"npm run clean && npm run resources && npm run changelog:generate && node scripts/watch.mjs","publish:latest":"npm publish --tag latest --access public","publish:next":"npm publish --tag next --access public","package:pack":"npm pack . --pack-destination ../../releases",lint:"npx prettier --write ."},dependencies:{"@types/lodash-es":"^4.17.12","@types/ndarray":"~1.0.14","@types/node":"~20.3.0","lodash-es":"^4.17.21",ndarray:"~1.0.0","onnxruntime-web":"~1.18.0",zod:"^3.23.8"},devDependencies:{assert:"~2.0.0",esbuild:"~0.18.0",glob:"~10.3.0","npm-dts":"~1.3.0",process:"~0.11.0","ts-loader":"~9.4.0",tslib:"~2.5.0",typescript:"~5.1.0",util:"~0.12.0",webpack:"~5.85.0","webpack-cli":"~5.1.0"},bundleDependencies:[]},ConfigSchema=z$1.object({publicPath:z$1.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(e1=>e1.replace("${PACKAGE_NAME}",package_default.name).replace("${PACKAGE_VERSION}",package_default.version)),debug:z$1.boolean().default(!1).describe("Whether to enable debug logging."),rescale:z$1.boolean().default(!0).describe("Whether to rescale the image."),device:z$1.enum(["cpu","gpu"]).default("cpu").describe("The device to run the model on."),proxyToWorker:z$1.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z$1.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:z$1.function().args(z$1.string(),z$1.number(),z$1.number()).returns(z$1.void()).describe("Progress callback.").optional(),model:z$1.preprocess(e1=>{switch(e1){case"large":return"isnet";case"small":return"isnet_quint8";case"medium":return"isnet_fp16";default:return e1}},z$1.enum(["isnet","isnet_fp16","isnet_quint8"])).default("medium"),output:z$1.object({format:z$1.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:z$1.number().default(.8)}).default({})}).default({}).transform(e1=>(e1.debug&&console.log("Config:",e1),e1.debug&&!e1.progress&&(e1.progress=e1.progress??((_g,t1,r1)=>{console.debug(`Downloading ${_g}: ${t1} of ${r1}`)}),crossOriginIsolated||e1.debug&&console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),e1.device=="gpu"&&(webgpu()||(e1.debug&&console.debug("Switching to CPU for GPU not supported."),e1.device="cpu")),e1));function validateConfig(e1){return ConfigSchema.parse(e1??{})}async function initBase(e1){e1.debug&&console.debug("Loading model...",e1.model);const _g=e1.model,r1=await(await loadAsBlob(`/models/${_g}`,e1)).arrayBuffer();return await createOnnxSession(r1,e1)}async function initInference(e1){e1=validateConfig(e1);const _g=await initBase(e1);return{config:e1,session:{base:_g}}}async function runInference(e1,_g,t1){const[n1,i1,o1]=e1.shape,a1=!1;let u1=tensorResizeBilinear(e1,1024,1024,a1);const s1=tensorHWCtoBCHW(u1);let l1=await runOnnxSession(t1.base,[["input",s1]],["output"],_g),c1=ndarray4(l1[0].data,[1024,1024,1]),d1=convertFloat32ToUint8(c1);return _g.rescale?(d1=tensorResizeBilinear(d1,i1,n1,a1),[d1,e1]):[d1,u1]}var init=(0,import_lodash.memoize)(initInference,e1=>JSON.stringify(e1));async function removeBackground(e1,_g){var d1,h1,f1,g1;const{config:t1,session:r1}=await init(_g);t1.progress&&t1.progress("compute:decode",0,4);const n1=await imageSourceToImageData(e1,t1);(d1=t1.progress)==null||d1.call(t1,"compute:inference",1,4);const[i1,o1]=await runInference(n1,t1,r1);(h1=t1.progress)==null||h1.call(t1,"compute:mask",2,4);const a1=o1,[u1,s1]=a1.shape,l1=u1*s1;for(let v1=0;v1<l1;v1+=1)a1.data[4*v1+3]=i1.data[v1];(f1=t1.progress)==null||f1.call(t1,"compute:encode",3,4);const c1=await imageEncode(a1,t1.output.quality,t1.output.format);return(g1=t1.progress)==null||g1.call(t1,"compute:encode",4,4),c1}/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/const RefCanvas=reactExports.createContext(void 0),useRefContext=()=>{const e1=reactExports.useContext(RefCanvas);if(!e1)throw new Error("useRefContext must be used within a RefProvider");return e1},RefProvider=({children:e1})=>{const _g=reactExports.useRef(null),t1=reactExports.useRef(null);return jsxRuntimeExports.jsx(RefCanvas.Provider,{value:{fabricRef:_g,canvasRef:t1},children:e1})},COMPARE_SLIDER_DURATION_MS=300,config={debug:!0,rescale:!0,device:"cpu",output:{quality:1,format:"image/png"}},Editor=React.forwardRef(()=>{const{fabricRef:e1,canvasRef:_g}=useRefContext();useToast();const[t1,r1,n1,i1,o1,a1,u1,s1,l1,c1,d1,h1,f1,g1,v1,$1,y1,_1,E1,T1,P1,k1,N1,W1,H1,ty,ey,ly,oy,Q1]=useStore(sy=>[sy.disableShortCuts,sy.isInpainting,sy.imageWidth,sy.scaledWidth,sy.userWindowWidth,sy.userWindowHeight,sy.imageHeight,sy.scaledHeight,sy.aspectRatio,sy.settings,sy.serverConfig.enableAutoSaving,sy.updateSettings,sy.setImageSize,sy.setBaseBrushSize,sy.interactiveSegState,sy.updateInteractiveSegState,sy.handleCanvasMouseDown,sy.handleSaveState,sy.handleCanvasMouseMove,sy.undo,sy.redo,sy.undoDisabled(),sy.redoDisabled(),sy.getIsProcessing(),sy.updateAppState,sy.runMannually(),sy.runInpainting,sy.isCropperExtenderResizing,sy.decreaseBaseBrushSize,sy.increaseBaseBrushSize]),U1=useStore(sy=>sy.editorState.baseBrushSize);useStore(sy=>sy.getBrushSize());const V1=useStore(sy=>sy.editorState.renders),K1=useStore(sy=>sy.editorState.extraMasks);useStore(sy=>sy.editorState.temporaryMasks),useStore(sy=>sy.editorState.lineGroups),useStore(sy=>sy.editorState.curLineGroup);const J1=useStore(sy=>sy.editorState.currCanvasGroups),[hy,G1]=reactExports.useState(!1),[Y1,yy]=useImage(null),[Oy,Ey]=reactExports.useState(.8);reactExports.useState({x:-1,y:-1});const[jy,Ay]=reactExports.useState(!1),[Uy,Gy]=reactExports.useState(!1),[Wy,Yy]=reactExports.useState(!1),Vy=reactExports.useRef(!1),p0=reactExports.useRef(0),y0=reactExports.useRef(0),A0=useWindowSize(),lv=sy=>Math.floor(sy/64)*64,[R0,X1]=reactExports.useState(lv(A0.width)),[fy,vy]=reactExports.useState(lv(A0.height)),[Dy,Ny]=reactExports.useState(!1),[Ty,Hy]=reactExports.useState(0),[l0,I0]=reactExports.useState(!1);reactExports.useRef("nothing");const $0=reactExports.useRef(null),iv=reactExports.useRef(null),b0=reactExports.useRef(!1),dv=reactExports.useCallback(()=>J1.length!==0,[J1]),i0=reactExports.useCallback(()=>{if(e1.current){const sy=e1.current;_1(sy)}},[e1.current]);function nv(sy,Fy=1e3,e0=0){sy&&bn$1.animate({startValue:sy.get("opacity"),endValue:e0,duration:Fy,onChange:E0=>{var D0;sy.set("opacity",E0),(D0=sy.canvas)==null||D0.renderAll()},onComplete:()=>{nv(sy,Fy,e0===1?0:1)}})}const xv=()=>{if(!e1.current||!$0.current||!iv.current)return;const sy=e1.current,Fy=$0.current,e0=iv.current,E0=Fy.getBoundingRect(!0,!0),D0=e0.getBoundingRect(!0,!0),sv=Fy.scaleX||1,B0=Fy.scaleY||1,P0=bn$1.degreesToRadians(Fy.angle||0),H0=(D0.left-E0.left)/sv,pv=(D0.top-E0.top)/B0,Z0=D0.width/sv,cv=D0.height/B0,x0=document.createElement("canvas");x0.width=D0.width,x0.height=D0.height;const ev=x0.getContext("2d");if(!ev)return;ev.translate(x0.width/2,x0.height/2),ev.rotate(-P0),ev.translate(-x0.width/2,-x0.height/2),ev.drawImage(Fy.getElement(),H0,pv,Z0,cv,0,0,D0.width,D0.height);const Dv=x0.toDataURL();ha$1.fromURL(Dv).then(fv=>{fv.set({left:e0.left,top:e0.top,originX:"center",originY:"center"}),sy.remove(Fy),sy.remove(e0),sy.add(fv),sy.setActiveObject(fv),sy.renderAll()}),b0.current=!1},[Tv,qy]=reactExports.useState({left:0,top:0}),[Iv,u0]=reactExports.useState(!1);reactExports.useEffect(()=>{var D0,sv,B0,P0,H0,pv,Z0,cv,x0,ev,Dv,fv,n$;const sy=()=>(H1({userWindowWidth:R0,userWindowHeight:fy}),new An(_g.current,{width:R0,height:fy,backgroundColor:"#f0f0f0",imageSmoothingEnabled:!1,fireMiddleClick:!0,stopContextMenu:!0,enableRetinaScaling:!1,controlsAboveOverlay:!1,preserveObjectStacking:!0,selection:!1}));Oi$2.ownDefaults.noScaleCache=!0,Oi$2.ownDefaults.originX="center",Oi$2.ownDefaults.originY="center",e1.current=sy();const Fy=Oi$2.prototype.toObject,e0=["img_view"];Oi$2.prototype.toObject=function(f0=[]){return Fy.call(this,[...e0,...f0])},An.prototype.getAbsoluteCoords=function(f0){return{left:f0.left,top:f0.top}};function E0(f0){if(!document.getElementById("button-container"))return;const mv=e1.current.getZoom(),Gv=e1.current.viewportTransform,qv=e1.current.getAbsoluteCoords(f0),c$=(qv.left+f0.width*f0.scaleX/2)*mv+Gv[4]-150,U$=(qv.top-f0.height*f0.scaleY/2)*mv+Gv[5];qy({left:c$,top:U$}),u0(!0)}if(e1.current){const f0=new $n$1(e1.current);f0.color=BRUSH_COLOR,f0.width=DEFAULT_BRUSH_SIZE,e1.current.isDrawingMode=c1.showDrawing,e1.current.freeDrawingBrush=f0,(B0=e1.current)==null||B0.zoomToPoint({x:((D0=e1.current)==null?void 0:D0.width)/2,y:((sv=e1.current)==null?void 0:sv.height)/2},Oy),Ey(e1.current.getZoom())}return Oi$2.ownDefaults.transparentCorners=!1,Oi$2.ownDefaults.borderColor="#51B9F9",Oi$2.ownDefaults.cornerColor="yellow",Oi$2.ownDefaults.borderScaleFactor=2.5,Oi$2.ownDefaults.cornerStyle="rect",Oi$2.ownDefaults.cornerStrokeColor="#0E98FC",Oi$2.ownDefaults.borderOpacityWhenMoving=1,(P0=e1.current)==null||P0.on("mouse:up",z1),(H0=e1.current)==null||H0.on("mouse:down",ay),(pv=e1.current)==null||pv.on("mouse:move",cy),(Z0=e1.current)==null||Z0.on("selection:updated",function(f0){E0(f0.selected[0])}),(cv=e1.current)==null||cv.on("selection:created",function(f0){E0(f0.selected[0])}),(x0=e1.current)==null||x0.on("object:moving",function(f0){u0(!1)}),(ev=e1.current)==null||ev.on("selection:cleared",function(){u0(!1)}),(Dv=e1.current)==null||Dv.on("path:created",()=>{i0()}),(fv=e1.current)==null||fv.on("object:modified",()=>{i0()}),(n$=e1.current)==null||n$.on("mouse:wheel",function(f0){var Gv,qv;const vv=f0.e.deltaY;let mv=(Gv=e1.current)==null?void 0:Gv.getZoom();mv*=.999**vv,mv>20&&(mv=20),mv<.01&&(mv=.01),(qv=e1.current)==null||qv.zoomToPoint({x:f0.e.offsetX,y:f0.e.offsetY},mv),u0(!1),f0.e.preventDefault(),f0.e.stopPropagation()}),()=>{var f0;(f0=e1.current)==null||f0.dispose()}},[]),reactExports.useEffect(()=>(e1.current.on("after:render",ov),()=>{e1.current&&e1.current.off("after:render",ov)}),[l1]);const ov=reactExports.useCallback(sy=>{const Fy=e1.current,{ctx:e0}=sy,E0="rgba(0, 0, 0, 0.3)",D0=(Fy==null?void 0:Fy.width)??0,sv=(Fy==null?void 0:Fy.height)??0;if(e0){e0.save(),e0.beginPath(),e0.moveTo(0,0),e0.lineTo(D0,0),e0.lineTo(D0,sv),e0.lineTo(0,sv),e0.lineTo(0,0),e0.transform.apply(e0,Array.from(Fy.viewportTransform));let B0,P0;const H0=predefinedRatios.find(cv=>cv.name===l1);if(H0){debugLog(LOG_LEVELS.DEBUG,`choosed Ratio
`,H0);const{width:cv,height:x0}=H0;B0=cv,P0=x0}const pv=Math.floor((D0-B0)/2),Z0=Math.floor((sv-P0)/2);debugLog(LOG_LEVELS.DEBUG," <<user canvas window>>  width, heigth ",[Fy.width,Fy.height]),debugLog(LOG_LEVELS.DEBUG,"<<user choosedWidth, choosedHeigth>> ",[B0,P0]),debugLog(LOG_LEVELS.DEBUG,`<<user transf canvas  matrix>>
`,Fy.viewportTransform),H1({scaledWidth:B0,scaledHeight:P0}),f1(B0,P0),e0.moveTo(pv,Z0),e0.lineTo(pv,Z0+P0),e0.lineTo(pv+B0,Z0+P0),e0.lineTo(pv+B0,Z0),e0.closePath(),e0.fillStyle=E0,e0.fill(),e0.restore()}},[l1]),z1=reactExports.useCallback(sy=>{isMidClick(sy)&&(Vy.current=!1)},[]),ay=reactExports.useCallback(sy=>{if(isMidClick(sy)){const Fy=sy.e;Vy.current=!0,p0.current=Fy.clientX,y0.current=Fy.clientY}},[]),cy=reactExports.useCallback(sy=>{if(Vy.current){if(!e1.current)return;const Fy=sy.e,e0=e1.current.viewportTransform;e0[4]+=Fy.clientX-p0.current,e0[5]+=Fy.clientY-y0.current,e1.current.requestRenderAll(),p0.current=Fy.clientX,y0.current=Fy.clientY}},[e1.current]);reactExports.useEffect(()=>{const sy=V1[V1.length-1];if(!e1.current||!sy)return;debugLog(LOG_LEVELS.DEBUG,"renddeers",sy);const Fy=new ha$1(sy,{scaleX:1,scaleY:1,originX:"center",originY:"center"}),e0=e1.current.width??0,E0=e1.current.height??0,D0=e0/2,sv=E0/2;Fy.set({left:D0,top:sv}),e1.current.add(Fy),e1.current.renderAll(),_1(e1.current)},[V1]),reactExports.useEffect(()=>{if(!e1.current)return;const sy=new $n$1(e1.current);sy.color=BRUSH_COLOR,sy.width=U1,e1.current.freeDrawingBrush=sy},[U1]);const wy=()=>V1.length!==0,Cy=reactExports.useCallback(()=>{e1.current&&(e1.current.zoomToPoint({x:e1.current.width/2,y:e1.current.height/2},Oy),e1.current.setViewportTransform([1,0,0,1,0,0]),e1.current.requestRenderAll())},[]);useHotKey("Escape",()=>{W1||(Dy?Ny(!1):Cy())},[Dy,r1,Cy]);const v0=()=>{T1()};useHotKey("meta+z,ctrl+z",v0);const Q0=sy=>{sy.preventDefault(),P1()};useHotKey("shift+ctrl+z,shift+meta+z",Q0),useKeyPressEvent("Tab",sy=>{sy==null||sy.preventDefault(),sy==null||sy.stopPropagation(),wy()&&G1(()=>(window.setTimeout(()=>{Hy(100)},10),!0))},sy=>{sy==null||sy.preventDefault(),sy==null||sy.stopPropagation(),wy()&&(window.setTimeout(()=>{Hy(0)},10),window.setTimeout(()=>{G1(!1)},COMPARE_SLIDER_DURATION_MS))}),useHotKey("[",()=>{oy()},[oy]),useHotKey("]",()=>{Q1()},[Q1]),useKeyPressEvent(" ",sy=>{t1||(sy==null||sy.preventDefault(),sy==null||sy.stopPropagation(),Ay(!1),Yy(!0))},sy=>{t1||(sy==null||sy.preventDefault(),sy==null||sy.stopPropagation(),Ay(!0),Yy(!1))}),useKeyPressEvent("Alt",sy=>{t1||(sy==null||sy.preventDefault(),sy==null||sy.stopPropagation(),I0(!0))},sy=>{t1||(sy==null||sy.preventDefault(),sy==null||sy.stopPropagation(),I0(!1))});const hv=sy=>{g1(sy),Uy||(Gy(!0),window.setTimeout(()=>{Gy(!1)},1e4))},uv=()=>jsxRuntimeExports.jsxs("div",{className:"relative top-[60px]",children:[jsxRuntimeExports.jsx("canvas",{className:cn$1(W1?"pointer-events-none animate-pulse duration-600":""),ref:_g,style:{clipPath:`inset(0 ${Ty}% 0 0)`,transition:`clip-path ${COMPARE_SLIDER_DURATION_MS}ms`}}),jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute top-0",style:{width:`${n1}px`,height:`${u1}px`},children:hy&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 z-10 bg-primary h-full w-[6px] justify-self-end",style:{marginRight:`${Ty}%`,transition:`margin-right ${COMPARE_SLIDER_DURATION_MS}ms`}}),jsxRuntimeExports.jsx("img",{className:"absolute ",src:Y1.src,alt:"original",style:{width:`${n1}px`,height:`${u1}px`}})]})})]}),J0=async sy=>{const Fy=predefinedRatios.find(x0=>x0.name===l1);if(!Fy){console.error("Invalid aspect ratio");return}const{width:e0,height:E0}=Fy,D0=(R0-i1)/2,sv=(fy-s1)/2,B0=new An(null,{width:e0,height:E0}),P0=e0/i1,H0=E0/s1,pv=e1.current.getObjects();for(const x0 of pv){const ev=await x0.clone();ev.set({left:(ev.left-D0)*P0,top:(ev.top-sv)*H0,scaleX:ev.scaleX*P0,scaleY:ev.scaleY*H0}),x0.type===sy&&B0.add(ev)}B0.renderAll();const Z0=B0.toDataURL({format:"png",quality:1,multiplier:1}),cv=document.createElement("a");cv.href=Z0,cv.download=`${sy}.png`,document.body.appendChild(cv),cv.click(),document.body.removeChild(cv)};useHotKey("meta+s,ctrl+s",J0);const Wv=sy=>{const Fy=e1.current;Fy&&(Fy.isDrawingMode=sy)},yv=()=>{const sy=e1.current;if(!sy)return;const Fy=sy.getActiveObject();Fy&&Fy.clone().then(e0=>{e0.left+=100,e0.top+=100,sy.add(e0)})},gy=()=>{const sy=e1.current;if(!sy)return;if(b0.current)return b0.current=!1,console.log("crop img"),xv();b0.current=!0;const Fy=sy.getActiveObject();if(Fy){const e0=Fy.canvas,E0=e0==null?void 0:e0.getActiveObject();if(!E0||!e0)return;const D0=E0.width*E0.scaleX,sv=E0.height*E0.scaleY;let B0=D0*.5,P0=sv*.5;const H0=new xr$1({fill:"rgba(0,0,0,0.3)",originX:"center",originY:"center",stroke:"black",opacity:1,width:B0,height:P0,left:E0.left,top:E0.top,hasRotatingPoint:!1,transparentCorners:!1,cornerColor:"white",cornerStrokeColor:"black",borderColor:"black",lockMovementX:!0,lockMovementY:!0});$0.current=E0,iv.current=H0,e0.add(H0),e0.setActiveObject(H0)}},T0=()=>{const sy=e1.current;if(!sy)return;const Fy=sy.getActiveObject();Fy&&(sy==null||sy.remove(Fy),sy==null||sy.requestRenderAll())},[C0,q0]=reactExports.useState(!1),[Hv,Cv]=reactExports.useState(!1),$$=()=>{const sy=e1.current;if(!sy)return;const Fy=sy.getActiveObject();Fy&&(console.log(Fy.img_view),q0(Fy.img_view==="fixed"),Cv(Fy.img_view==="modify"))},b$=()=>{const sy=e1.current;if(!sy)return;const Fy=sy.getActiveObject();Fy&&(Fy.img_view="modify",q0(!1),Cv(!0),i0())},I$=()=>{const sy=e1.current;if(!sy)return;const Fy=sy.getActiveObject();Fy&&(Fy.img_view="fixed",q0(!0),Cv(!1),i0())},Lv=sy=>{const Fy=e1.current;if(Fy){const e0=Fy==null?void 0:Fy.getActiveObject();if(!e0)return;switch(sy){case"toFront":Fy.bringObjectToFront(e0);break;case"toBack":Fy.sendObjectToBack(e0);break;case"toForward":Fy.bringObjectForward(e0);break;case"toBackward":Fy.sendObjectBackwards(e0)}Fy.discardActiveObject(),Fy.renderAll()}},u$=async()=>{const sy=e1.current,Fy=sy==null?void 0:sy.getActiveObject();if(console.log(Fy),!Fy)return;nv(Fy,1e3);const e0=(Fy.width??0)*(Fy.scaleX??0),E0=(Fy.height??0)*(Fy.scaleY??0),D0=Fy.top??0,sv=Fy.left??0;let B0=null;var P0=new An(B0,{width:e0,height:E0});const H0=await Fy.clone();H0.set({left:e0/2,top:E0/2,scaleX:Fy.scaleX,scaleY:Fy.scaleY,originX:"center",originY:"center"}),P0.add(H0),P0.renderAll();const pv=P0.toDataURL({format:"png",quality:1,multiplier:1});removeBackground(pv,config).then(Z0=>{const cv=URL.createObjectURL(Z0),x0=new Image;loadImage(x0,cv).then(()=>{console.log(x0),sy==null||sy.remove(Fy);const ev=new ha$1(x0,{left:sv,top:D0,originX:"center",originY:"center"});sy==null||sy.add(ev),sy==null||sy.requestRenderAll()})})};return jsxRuntimeExports.jsxs("div",{className:"flex w-screen h-screen justify-center items-center","aria-hidden":"true",children:[jsxRuntimeExports.jsxs(Menubar$1,{id:"button-container",style:{position:"absolute",left:Tv.left,top:Tv.top,display:Iv?"flex":"none",zIndex:9999},children:[jsxRuntimeExports.jsxs(MenubarMenu$1,{children:[jsxRuntimeExports.jsx(MenubarTrigger$1,{children:"Edit"}),jsxRuntimeExports.jsxs(MenubarContent$1,{children:[jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:yv,children:["Copy"," ",jsxRuntimeExports.jsx(MenubarShortcut$1,{children:jsxRuntimeExports.jsx(Copy,{})})]}),jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:gy,children:["Cut"," ",jsxRuntimeExports.jsx(MenubarShortcut$1,{children:jsxRuntimeExports.jsx(Scissors,{})})]}),jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:T0,children:["Delete"," ",jsxRuntimeExports.jsxs(MenubarShortcut$1,{children:[" ",jsxRuntimeExports.jsx(Trash2,{})," "]})]})]})]}),jsxRuntimeExports.jsxs(MenubarMenu$1,{children:[jsxRuntimeExports.jsx(MenubarTrigger$1,{children:"Layer"}),jsxRuntimeExports.jsxs(MenubarContent$1,{children:[jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:()=>Lv("toFront"),children:["toFront"," ",jsxRuntimeExports.jsx(MenubarShortcut$1,{children:jsxRuntimeExports.jsx(ArrowUpIcon,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:()=>Lv("toBack"),children:["toBack"," ",jsxRuntimeExports.jsx(MenubarShortcut$1,{children:jsxRuntimeExports.jsx(ArrowDownIcon,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:()=>Lv("toForward"),children:["toForward"," ",jsxRuntimeExports.jsxs(MenubarShortcut$1,{children:[" ",jsxRuntimeExports.jsx(DoubleArrowUpIcon,{className:"h-4 w-4"})," "]})]}),jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:()=>Lv("toBackward"),children:["toBackward"," ",jsxRuntimeExports.jsxs(MenubarShortcut$1,{children:[" ",jsxRuntimeExports.jsx(DoubleArrowDownIcon,{className:"h-4 w-4"})," "]})]})]})]}),jsxRuntimeExports.jsxs(MenubarMenu$1,{children:[jsxRuntimeExports.jsx(MenubarTrigger$1,{onClick:$$,children:"View"}),jsxRuntimeExports.jsxs(MenubarContent$1,{children:[jsxRuntimeExports.jsx(MenubarCheckboxItem$1,{checked:C0,onClick:I$,children:"Stay fixed"}),jsxRuntimeExports.jsx(MenubarCheckboxItem$1,{checked:Hv,onClick:b$,children:"Modify"})]})]}),jsxRuntimeExports.jsxs(MenubarMenu$1,{children:[jsxRuntimeExports.jsx(MenubarTrigger$1,{children:"RemoveBG"}),jsxRuntimeExports.jsxs(MenubarContent$1,{children:[jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:()=>u$(),children:["Producto",jsxRuntimeExports.jsx(MenubarShortcut$1,{children:jsxRuntimeExports.jsx(CookieIcon,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs(MenubarItem$1,{onClick:()=>u$(),children:["Persona",jsxRuntimeExports.jsx(MenubarShortcut$1,{children:jsxRuntimeExports.jsx(PersonIcon,{className:"h-4 w-4"})})]})]})]})]}),uv(),jsxRuntimeExports.jsxs("div",{className:"fixed flex bottom-5 border px-4 py-2 rounded-[3rem] gap-8 items-center justify-center backdrop-filter backdrop-blur-md bg-background/70",children:[jsxRuntimeExports.jsx(Slider,{className:"w-48",defaultValue:[50],min:MIN_BRUSH_SIZE,max:MAX_BRUSH_SIZE,step:1,tabIndex:-1,value:[U1],onValueChange:sy=>hv(sy[0]),onClick:()=>Gy(!1)}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(IconButton,{tooltip:"Reset zoom & pan",onClick:Cy,children:jsxRuntimeExports.jsx(Expand,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Undo",onClick:v0,disabled:k1,children:jsxRuntimeExports.jsx(Undo,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Redo",onClick:Q0,disabled:N1,children:jsxRuntimeExports.jsx(Redo,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Show original image",onPointerDown:sy=>{sy.preventDefault(),G1(()=>(window.setTimeout(()=>{Hy(100)},10),!0))},onPointerUp:()=>{window.setTimeout(()=>{Hy(0)},10),window.setTimeout(()=>{G1(!1)},COMPARE_SLIDER_DURATION_MS)},disabled:V1.length===0,children:jsxRuntimeExports.jsx(Eye,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Save Image",onClick:()=>{J0("image")},children:jsxRuntimeExports.jsx(Download,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Run Inpainting",disabled:W1||!dv()&&K1.length===0,onClick:()=>{ey("lama")},children:jsxRuntimeExports.jsx(Eraser,{})}),jsxRuntimeExports.jsx(Toggle,{"aria-label":"Toggle italic",defaultPressed:c1.showDrawing,onPressedChange:sy=>{h1({showDrawing:sy}),Wv(sy),sy&&h1({showSelectable:!1})},children:jsxRuntimeExports.jsx(Paintbrush,{})})]})]})]})}),ImageSize=()=>{const[e1,_g]=useStore(t1=>[t1.imageWidth,t1.imageHeight]);return!e1||!_g?null:jsxRuntimeExports.jsxs("div",{className:"border rounded-lg px-2 py-[6px] z-10 bg-background",children:[e1,"x",_g]})},Sheet=Root$7,SheetTrigger=Trigger$4,SheetPortal=Portal$3,SheetOverlay=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Overlay,{className:cn$1("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e1),..._g,ref:t1}));SheetOverlay.displayName=Overlay.displayName;const sheetVariants=cva("fixed gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),SheetContent=reactExports.forwardRef(({side:e1="right",className:_g,children:t1,...r1},n1)=>jsxRuntimeExports.jsxs(SheetPortal,{children:[jsxRuntimeExports.jsx(SheetOverlay,{}),jsxRuntimeExports.jsx(Content$1,{ref:n1,className:cn$1(sheetVariants({side:e1}),_g),...r1,children:t1})]}));SheetContent.displayName=Content$1.displayName;const SheetHeader=({className:e1,..._g})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-2 text-center sm:text-left",e1),..._g});SheetHeader.displayName="SheetHeader";const SheetTitle=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Title,{ref:t1,className:cn$1("text-lg font-semibold text-foreground",e1),..._g}));SheetTitle.displayName=Title.displayName;const SheetDescription=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Description,{ref:t1,className:cn$1("text-sm text-muted-foreground",e1),..._g}));SheetDescription.displayName=Description.displayName;const RowContainer$1=({children:e1})=>jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center pr-2",children:e1}),LabelTitle=({text:e1,toolTip:_g="",url:t1,htmlFor:r1,disabled:n1=!1})=>jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Label$2,{htmlFor:r1||e1.toLowerCase().replace(" ","-"),className:"font-medium",disabled:n1,children:e1})}),_g||t1?jsxRuntimeExports.jsxs(TooltipContent,{className:"flex flex-col max-w-xs text-sm",side:"left",children:[jsxRuntimeExports.jsx("p",{children:_g}),t1?jsxRuntimeExports.jsx(Button,{variant:"link",className:"justify-end",children:jsxRuntimeExports.jsx("a",{href:t1,target:"_blank",children:"More info"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]}),LDMOptions=()=>{const[e1,_g]=useStore(t1=>[t1.settings,t1.updateSettings]);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"steps",text:"Steps",toolTip:"The number of denoising steps. More denoising steps usually lead to a higher quality image at the expense of slower inference."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[30],min:1,max:100,step:1,value:[Math.floor(e1.ldmSteps)],onValueChange:t1=>_g({ldmSteps:t1[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"steps",className:"w-[60px] rounded-full",numberValue:e1.ldmSteps,allowFloat:!1,onNumberValueChange:t1=>{_g({ldmSteps:t1})}})]})]}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Sampler"}),jsxRuntimeExports.jsxs(Select,{value:e1.ldmSampler,onValueChange:t1=>{_g({ldmSampler:t1})},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[100px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select sampler"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(LDMSampler).map(t1=>jsxRuntimeExports.jsx(SelectItem,{value:t1,children:t1},t1))})})]})]})]})},ExtenderButton=({text:e1,onClick:_g})=>{const[t1]=useStore(r1=>[r1.settings.showExtender]);return jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",disabled:!t1,onClick:_g,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:e1})})},DiffusionOptions=()=>{const[e1,_g,t1,r1,n1,i1,o1,a1,u1,s1,l1]=useStore(V1=>[V1.serverConfig.samplers,V1.settings,V1.paintByExampleFile,V1.getIsProcessing(),V1.updateSettings,V1.runInpainting,V1.updateAppState,V1.updateExtenderByBuiltIn,V1.updateExtenderDirection,V1.adjustMask,V1.clearMask]),[c1,d1]=useImage(t1),h1=reactExports.useRef(null),{t:f1}=useTranslation();useClickAway(h1,()=>{h1!=null&&h1.current&&h1.current.blur()});const g1=V1=>{V1.key==="Enter"&&V1.ctrlKey&&_g.prompt.length!==0&&i1()},v1=()=>jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:f1("Cropper"),toolTip:"Inpainting on part of image, improve inference speed and reduce memory usage."}),jsxRuntimeExports.jsx(Switch,{id:"cropper",checked:_g.showCropper,onCheckedChange:V1=>{n1({showCropper:V1}),V1&&n1({showExtender:!1})}})]}),$1=()=>_g.model.support_controlnet?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pr-2",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"ControlNet",toolTip:"Using an additional conditioning image to control how an image is generated",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#controlnet"}),jsxRuntimeExports.jsx(Switch,{id:"controlnet",checked:_g.enableControlnet,onCheckedChange:V1=>{n1({enableControlnet:V1})}})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1",children:jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[100],min:1,max:100,step:1,disabled:!_g.enableControlnet,value:[Math.floor(_g.controlnetConditioningScale*100)],onValueChange:V1=>n1({controlnetConditioningScale:V1[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"controlnet-weight",className:"w-[60px] rounded-full",disabled:!_g.enableControlnet,numberValue:_g.controlnetConditioningScale,allowFloat:!1,onNumberValueChange:V1=>{n1({controlnetConditioningScale:V1})}})]})}),jsxRuntimeExports.jsx("div",{className:"pr-2",children:jsxRuntimeExports.jsxs(Select,{defaultValue:_g.controlnetMethod,value:_g.controlnetMethod,onValueChange:V1=>{n1({controlnetMethod:V1})},disabled:!_g.enableControlnet,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select control method"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(_g.model.controlnets).map(V1=>jsxRuntimeExports.jsx(SelectItem,{value:V1,children:V1.split("/")[1]},V1))})})]})})]}),jsxRuntimeExports.jsx(Separator$2,{})]}):null,y1=()=>_g.model.support_lcm_lora?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"LCM LoRA",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inference_with_lcm_lora",toolTip:"Enable quality image generation in typically 2-4 steps. Suggest disabling guidance_scale by setting it to 0. You can also try values between 1.0 and 2.0. When LCM Lora is enabled, LCMSampler will be used automatically."}),jsxRuntimeExports.jsx(Switch,{id:"lcm-lora",checked:_g.enableLCMLora,onCheckedChange:V1=>{n1({enableLCMLora:V1})}})]}),jsxRuntimeExports.jsx(Separator$2,{})]}):null,_1=()=>_g.model.support_freeu?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pr-2",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"FreeU",toolTip:"FreeU is a technique for improving image quality. Different models may require different FreeU-specific hyperparameters, which can be viewed in the more info section.",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/freeu"}),jsxRuntimeExports.jsx(Switch,{id:"freeu",checked:_g.enableFreeu,onCheckedChange:V1=>{n1({enableFreeu:V1})}})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-s1",text:"s1",disabled:!_g.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-s1",className:"w-14",disabled:!_g.enableFreeu,numberValue:_g.freeuConfig.s1,allowFloat:!0,onNumberValueChange:V1=>{n1({freeuConfig:{..._g.freeuConfig,s1:V1}})}})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-s2",text:"s2",disabled:!_g.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-s2",className:"w-14",disabled:!_g.enableFreeu,numberValue:_g.freeuConfig.s2,allowFloat:!0,onNumberValueChange:V1=>{n1({freeuConfig:{..._g.freeuConfig,s2:V1}})}})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-b1",text:"b1",disabled:!_g.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-b1",className:"w-14",disabled:!_g.enableFreeu,numberValue:_g.freeuConfig.b1,allowFloat:!0,onNumberValueChange:V1=>{n1({freeuConfig:{..._g.freeuConfig,b1:V1}})}})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-b2",text:"b2",disabled:!_g.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-b2",className:"w-14",disabled:!_g.enableFreeu,numberValue:_g.freeuConfig.b2,allowFloat:!0,onNumberValueChange:V1=>{n1({freeuConfig:{..._g.freeuConfig,b2:V1}})}})]})]})]}),jsxRuntimeExports.jsx(Separator$2,{})]}):null,E1=()=>_g.model.need_prompt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Negative prompt",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#negative-prompt",toolTip:"Negative prompt guides the model away from generating certain things in an image"}),jsxRuntimeExports.jsx("div",{className:"pl-2 pr-4",children:jsxRuntimeExports.jsx(Textarea,{ref:h1,rows:4,onKeyUp:g1,className:"max-h-[8rem] overflow-y-auto mb-2",placeholder:"",id:"negative-prompt",value:_g.negativePrompt,onInput:V1=>{V1.preventDefault(),V1.stopPropagation();const K1=V1.target;n1({negativePrompt:K1.value})}})})]}):null,T1=()=>_g.model.name!==PAINT_BY_EXAMPLE?null:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Example Image",toolTip:"An example image to guide image generation."}),jsxRuntimeExports.jsx(ImageUploadButton,{tooltip:"Upload example image",onFileUpload:V1=>{o1({paintByExampleFile:V1})},children:jsxRuntimeExports.jsx(Upload,{})})]}),d1?jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center",children:jsxRuntimeExports.jsx("img",{src:c1.src,alt:"example",className:"max-w-[200px] max-h-[200px] m-3"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(Button,{variant:"default",className:"w-full",disabled:r1||!d1,onClick:()=>{i1("Fantasy-Studio/Paint-by-Example")},children:"Paint"})]}),P1=()=>_g.model.name!==INSTRUCT_PIX2PIX?null:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Image guidance scale",toolTip:"Push the generated image towards the inital image. Higher image guidance scale encourages generated images that are closely linked to the source image, usually at the expense of lower image quality.",url:"https://huggingface.co/docs/diffusers/main/en/api/pipelines/pix2pix"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[150],min:100,max:1e3,step:1,value:[Math.floor(_g.p2pImageGuidanceScale*100)],onValueChange:V1=>n1({p2pImageGuidanceScale:V1[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"image-guidance-scale",className:"w-[60px] rounded-full",numberValue:_g.p2pImageGuidanceScale,allowFloat:!0,onNumberValueChange:V1=>{n1({p2pImageGuidanceScale:V1})}})]})]}),k1=()=>_g.model.support_strength?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Strength",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#strength",toolTip:"Strength is a measure of how much noise is added to the base image, which influences how similar the output is to the base image. Higher value means more noise and more different from the base image"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[100],min:10,max:100,step:1,value:[Math.floor(_g.sdStrength*100)],onValueChange:V1=>n1({sdStrength:V1[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"strength",className:"w-[60px] rounded-full",numberValue:_g.sdStrength,allowFloat:!0,onNumberValueChange:V1=>{n1({sdStrength:V1})}})]})]}):null,N1=()=>_g.model.support_outpainting?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Extender",toolTip:"Perform outpainting on images to expand it's content."}),jsxRuntimeExports.jsx(Switch,{id:"extender",checked:_g.showExtender,onCheckedChange:V1=>{n1({showExtender:V1}),V1&&n1({showCropper:!1})}})]}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsxs(Select,{defaultValue:_g.extenderDirection,value:_g.extenderDirection,onValueChange:V1=>{u1(V1)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[65px] h-7",disabled:!_g.showExtender,children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select axis"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(ExtenderDirection).map(V1=>jsxRuntimeExports.jsx(SelectItem,{value:V1,children:V1},V1))})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 justify-center mt-0",children:[jsxRuntimeExports.jsx(ExtenderButton,{text:"1.25x",onClick:()=>a1(_g.extenderDirection,1.25)}),jsxRuntimeExports.jsx(ExtenderButton,{text:"1.5x",onClick:()=>a1(_g.extenderDirection,1.5)}),jsxRuntimeExports.jsx(ExtenderButton,{text:"1.75x",onClick:()=>a1(_g.extenderDirection,1.75)}),jsxRuntimeExports.jsx(ExtenderButton,{text:"2.0x",onClick:()=>a1(_g.extenderDirection,2)})]})]})]}),jsxRuntimeExports.jsx(Separator$2,{})]}):null,W1=()=>_g.model.name!==POWERPAINT?null:jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Task",toolTip:"PowerPaint task. When using extender, image-outpainting task will be auto used. For object-removal and image-outpainting, it is recommended to set the guidance_scale at 10 or above."}),jsxRuntimeExports.jsxs(Select,{defaultValue:_g.powerpaintTask,value:_g.powerpaintTask,onValueChange:V1=>{n1({powerpaintTask:V1})},disabled:_g.showExtender,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[140px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select task"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:[PowerPaintTask.text_guided,PowerPaintTask.object_remove,PowerPaintTask.shape_guided].map(V1=>jsxRuntimeExports.jsx(SelectItem,{value:V1,children:V1},V1))})})]})]}),H1=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"steps",text:"Steps",toolTip:"The number of denoising steps. More denoising steps usually lead to a higher quality image at the expense of slower inference."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[30],min:1,max:100,step:1,value:[Math.floor(_g.sdSteps)],onValueChange:V1=>n1({sdSteps:V1[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"steps",className:"w-[60px] rounded-full",numberValue:_g.sdSteps,allowFloat:!1,onNumberValueChange:V1=>{n1({sdSteps:V1})}})]})]}),ty=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Guidance scale",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#guidance-scale",toolTip:"Guidance scale affects how aligned the text prompt and generated image are. Higher value means the prompt and generated image are closely aligned, so the output is a stricter interpretation of the prompt"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[750],min:0,max:1500,step:1,value:[Math.floor(_g.sdGuidanceScale*100)],onValueChange:V1=>n1({sdGuidanceScale:V1[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"guidance-scale",className:"w-[60px] rounded-full",numberValue:_g.sdGuidanceScale,allowFloat:!0,onNumberValueChange:V1=>{n1({sdGuidanceScale:V1})}})]})]}),ey=()=>_g.model.name===ANYTEXT?null:jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Sampler"}),jsxRuntimeExports.jsxs(Select,{defaultValue:_g.sdSampler,value:_g.sdSampler,onValueChange:V1=>{n1({sdSampler:V1})},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[175px] text-xs",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select sampler"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:e1.map(V1=>jsxRuntimeExports.jsx(SelectItem,{value:V1,className:"text-xs",children:V1},V1))})})]})]}),ly=()=>jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Seed",toolTip:"Using same parameters and a fixed seed can generate same result image."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[jsxRuntimeExports.jsx(Switch,{id:"seed",checked:_g.seedFixed,onCheckedChange:V1=>{n1({seedFixed:V1})}}),jsxRuntimeExports.jsx(NumberInput,{id:"seed",className:"w-[100px]",disabled:!_g.seedFixed,numberValue:_g.seed,allowFloat:!1,onNumberValueChange:V1=>{n1({seed:V1})}})]})]}),oy=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Mask blur",toolTip:"How much to blur the mask before processing, in pixels. Make the generated inpainting boundaries appear more natural."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[_g.sdMaskBlur],min:0,max:96,step:1,value:[Math.floor(_g.sdMaskBlur)],onValueChange:V1=>n1({sdMaskBlur:V1[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"mask-blur",className:"w-[60px] rounded-full",numberValue:_g.sdMaskBlur,allowFloat:!1,onNumberValueChange:V1=>{n1({sdMaskBlur:V1})}})]})]}),Q1=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Match histograms",toolTip:"Match the inpainting result histogram to the source image histogram",url:"https://github.com/Sanster/lama-cleaner/pull/143#issuecomment-1325859307"}),jsxRuntimeExports.jsx(Switch,{id:"match-histograms",checked:_g.sdMatchHistograms,onCheckedChange:V1=>{n1({sdMatchHistograms:V1})}})]}),jsxRuntimeExports.jsx(Separator$2,{})]}),U1=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"adjustMaskKernelSize",text:f1("Adjust Mask"),toolTip:"Expand or shrink mask. Using the slider to adjust the kernel size for dilation or erosion."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[12],min:1,max:100,step:1,value:[Math.floor(_g.adjustMaskKernelSize)],onValueChange:V1=>n1({adjustMaskKernelSize:V1[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"adjustMaskKernelSize",className:"w-[60px] rounded-full",numberValue:_g.adjustMaskKernelSize,allowFloat:!1,onNumberValueChange:V1=>{n1({adjustMaskKernelSize:V1})}})]}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1 justify-start",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",onClick:()=>s1("expand"),disabled:r1,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:f1("Expand")})}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",onClick:()=>s1("shrink"),disabled:r1,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:f1("Shrink")})}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",onClick:()=>s1("reverse"),disabled:r1,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:f1("Reverse")})})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8 justify-self-end",onClick:l1,disabled:r1,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:f1("Clear")})})]})]}),jsxRuntimeExports.jsx(Separator$2,{})]});return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[v1(),N1(),U1(),W1(),H1(),ty(),P1(),k1(),ey(),ly(),E1(),jsxRuntimeExports.jsx(Separator$2,{}),$1(),y1(),oy(),Q1(),_1(),T1()]})},CV2Options=()=>{const[e1,_g]=useStore(t1=>[t1.settings,t1.updateSettings]);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"CV2 Flag",url:"https://docs.opencv.org/4.8.0/d7/d8b/group__photo__inpaint.html#gga8002a65f5a3328fbf15df81b842d3c3ca892824c38e258feb5e72f308a358d52e"}),jsxRuntimeExports.jsxs(Select,{value:e1.cv2Flag,onValueChange:t1=>{_g({cv2Flag:t1})},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[160px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select flag"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(CV2Flag).map(t1=>jsxRuntimeExports.jsx(SelectItem,{value:t1,children:t1},t1))})})]})]}),jsxRuntimeExports.jsx(LabelTitle,{text:"CV2 Radius",url:"https://docs.opencv.org/4.8.0/d7/d8b/group__photo__inpaint.html#gga8002a65f5a3328fbf15df81b842d3c3ca892824c38e258feb5e72f308a358d52e"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[5],min:1,max:100,step:1,value:[Math.floor(e1.cv2Radius)],onValueChange:t1=>_g({cv2Radius:t1[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"cv2-radius",className:"w-[60px] rounded-full",numberValue:e1.cv2Radius,allowFloat:!1,onNumberValueChange:t1=>{_g({cv2Radius:t1})}})]})]})},RightSidePanel=()=>{const[e1,_g]=useStore(i1=>[i1.settings,i1.windowSize]),[t1,r1]=useToggle(!1);if(useHotKey("c",()=>{r1()}),e1.model.name!==LDM&&e1.model.name!==CV2&&e1.model.model_type===MODEL_TYPE_INPAINT)return null;const n1=()=>e1.model.name===LDM?jsxRuntimeExports.jsx(LDMOptions,{}):e1.model.name===CV2?jsxRuntimeExports.jsx(CV2Options,{}):jsxRuntimeExports.jsx(DiffusionOptions,{});return jsxRuntimeExports.jsxs(Sheet,{open:t1,modal:!1,children:[jsxRuntimeExports.jsx(SheetTrigger,{tabIndex:-1,className:"z-10 outline-none absolute top-[68px] right-6 rounded-lg border bg-background",hidden:t1,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",asChild:!0,className:"p-1.5",onClick:r1,children:jsxRuntimeExports.jsx(ChevronLeft,{strokeWidth:1})})}),jsxRuntimeExports.jsxs(SheetContent,{side:"right",className:"w-[300px] mt-[60px] outline-none pl-4 pr-1",onOpenAutoFocus:i1=>i1.preventDefault(),onPointerDownOutside:i1=>i1.preventDefault(),children:[jsxRuntimeExports.jsxs(SheetHeader,{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden mr-8",children:e1.model.name.split("/")[e1.model.name.split("/").length-1]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"border h-6 w-6",onClick:r1,children:jsxRuntimeExports.jsx(ChevronRight,{strokeWidth:1})})]}),jsxRuntimeExports.jsx(Separator$2,{})]}),jsxRuntimeExports.jsx(ScrollArea,{style:{height:_g.height-160},className:"pr-3",children:n1()})]})]})},RowContainer=({children:e1})=>jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center pr-2",children:e1}),CanvasOptions=()=>{const[e1,_g,t1,r1]=useStore(a1=>[a1.serverConfig.samplers,a1.settings,a1.paintByExampleFile,a1.getIsProcessing(),a1.updateSettings,a1.runInpainting,a1.updateAppState]);useImage(e1),useTranslation();const{fabricRef:n1}=useRefContext(),i1=a1=>{const u1=n1.current;if(u1){const s1=u1==null?void 0:u1.getActiveObject();if(!s1)return;switch(a1){case"toFront":u1.bringObjectToFront(s1);break;case"toBack":u1.sendObjectToBack(s1);break;case"toForward":u1.bringObjectForward(s1);break;case"toBackward":u1.sendObjectBackwards(s1)}u1.discardActiveObject(),u1.renderAll()}},o1=()=>{const a1=[{label:"toForward",icon:jsxRuntimeExports.jsx(ArrowUpIcon,{className:"h-4 w-4"}),tooltip:"Forward"},{label:"toFront",icon:jsxRuntimeExports.jsx(DoubleArrowUpIcon,{className:"h-4 w-4"}),tooltip:"To front"},{label:"toBackward",icon:jsxRuntimeExports.jsx(ArrowDownIcon,{className:"h-4 w-4"}),tooltip:"Backward"},{label:"toBack",icon:jsxRuntimeExports.jsx(DoubleArrowDownIcon,{className:"h-4 w-4"}),tooltip:"To back"}];return jsxRuntimeExports.jsx(RowContainer,{children:a1.map(({label:u1,icon:s1,tooltip:l1})=>jsxRuntimeExports.jsx(IconButton,{tooltip:l1,onClick:()=>i1(u1),children:s1},u1))})};return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-4 mt-4",children:o1()})},RatioOptions=()=>{const[e1,_g,t1,r1,n1]=useStore(u1=>[u1.aspectRatio,u1.paintByExampleFile,u1.getIsProcessing(),u1.runInpainting,u1.updateAppState]);useTranslation();const{fabricRef:i1}=useRefContext(),o1=u1=>{var l1;if(i1.current){switch(u1){case"Horizontal":n1({aspectRatio:"16:9"});break;case"Vertical":n1({aspectRatio:"9:16"});break;case"Cuadrado":n1({aspectRatio:"1:1"});break}(l1=i1.current)==null||l1.requestRenderAll()}},a1=()=>{const u1=[{label:"Horizontal",icon:jsxRuntimeExports.jsx(RectangleHorizontal,{className:"h-4 w-4"}),tooltip:"Horizontal"},{label:"Vertical",icon:jsxRuntimeExports.jsx(RectangleVertical,{className:"h-4 w-4"}),tooltip:"Vertical"},{label:"Cuadrado",icon:jsxRuntimeExports.jsx(Square,{className:"h-4 w-4"}),tooltip:"Cuadrado"}];return jsxRuntimeExports.jsx(RowContainer,{children:u1.map(({label:s1,icon:l1,tooltip:c1})=>jsxRuntimeExports.jsx(IconButton,{tooltip:c1,onClick:()=>o1(s1),children:l1},s1))})};return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-4 mt-4",children:a1()})},MenubarMenu=Menu,MenubarSub=Sub2,Menubar=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Root3,{ref:t1,className:cn$1("flex flex-col items-start space-y-1 rounded-md border bg-background p-1 shadow-sm",e1),..._g}));Menubar.displayName=Root3.displayName;const MenubarTrigger=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Trigger,{ref:t1,className:cn$1("flex flex-col w-full items-center cursor-default select-none rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e1),..._g}));MenubarTrigger.displayName=Trigger.displayName;const MenubarSubTrigger=reactExports.forwardRef(({className:e1,inset:_g,children:t1,...r1},n1)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:n1,className:cn$1("flex w-full cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",_g&&"pl-8",e1),...r1,children:[t1,jsxRuntimeExports.jsx(ChevronRightIcon,{className:"ml-auto h-4 w-4"})]}));MenubarSubTrigger.displayName=SubTrigger2.displayName;const MenubarSubContent=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(SubContent2,{ref:t1,className:cn$1("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e1),..._g}));MenubarSubContent.displayName=SubContent2.displayName;const MenubarContent=reactExports.forwardRef(({className:e1,align:_g="start",alignOffset:t1=-4,sideOffset:r1=8,side:n1="right",...i1},o1)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2,{ref:o1,align:_g,alignOffset:t1,sideOffset:r1,side:n1,className:cn$1("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e1),...i1})}));MenubarContent.displayName=Content2.displayName;const MenubarItem=reactExports.forwardRef(({className:e1,inset:_g,...t1},r1)=>jsxRuntimeExports.jsx(Item3,{ref:r1,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_g&&"pl-8",e1),...t1}));MenubarItem.displayName=Item3.displayName;const MenubarCheckboxItem=reactExports.forwardRef(({className:e1,children:_g,checked:t1,...r1},n1)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:n1,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e1),checked:t1,...r1,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(CheckIcon,{className:"h-4 w-4"})})}),_g]}));MenubarCheckboxItem.displayName=CheckboxItem2.displayName;const MenubarRadioItem=reactExports.forwardRef(({className:e1,children:_g,...t1},r1)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:r1,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e1),...t1,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(DotFilledIcon,{className:"h-4 w-4 fill-current"})})}),_g]}));MenubarRadioItem.displayName=RadioItem2.displayName;const MenubarLabel=reactExports.forwardRef(({className:e1,inset:_g,...t1},r1)=>jsxRuntimeExports.jsx(Label2,{ref:r1,className:cn$1("px-2 py-1.5 text-sm font-semibold",_g&&"pl-8",e1),...t1}));MenubarLabel.displayName=Label2.displayName;const MenubarSeparator=reactExports.forwardRef(({className:e1,..._g},t1)=>jsxRuntimeExports.jsx(Separator2,{ref:t1,className:cn$1("-mx-1 my-1 h-px bg-muted",e1),..._g}));MenubarSeparator.displayName=Separator2.displayName;const MenubarShortcut=({className:e1,..._g})=>jsxRuntimeExports.jsx("span",{className:cn$1("ml-auto text-xs tracking-widest text-muted-foreground",e1),..._g});MenubarShortcut.displayname="MenubarShortcut";const domain_dist="https://d1d5i0xjsb5dtw.cloudfront.net/",works=[{artist:"Stable Diffusion 1",art:`${domain_dist}photo-ai/TEST1_0.png`},{artist:"Stable Diffusion2",art:`${domain_dist}photo-ai/TEST1_1.png`},{artist:"Stable Diffusion3",art:`${domain_dist}photo-ai/TEST1_2.png`},{artist:"Stable Diffusion4",art:`${domain_dist}photo-ai/TEST1_3.png`},{artist:"Stable Diffusion5",art:`${domain_dist}photo-ai/TEST2_0.png`},{artist:"Stable Diffusion6",art:`${domain_dist}photo-ai/TEST2_1.png`},{artist:"Stable Diffusion7",art:`${domain_dist}photo-ai/TEST2_2.png`},{artist:"Stable Diffusion8",art:`${domain_dist}photo-ai/TEST2_3.png`},{artist:"Stable Diffusion9",art:`${domain_dist}photo-ai/picture_3.png`},{artist:"Stable Diffusion10",art:`${domain_dist}photo-ai/picture_2.png`}],LeftSidePanel=()=>{const[e1,_g,t1]=useStore(a1=>[a1.isInpainting,a1.runImgRendering,a1.windowSize]),[r1,n1]=useToggle(!0);useHotKey("c",()=>{n1()});const i1=(a1,u1)=>{a1.dataTransfer.setData("text/plain",u1.art)};function o1(){return jsxRuntimeExports.jsxs(Menubar,{className:"z-10 outline-none absolute top-[120px] left-6 rounded-lg border bg-background flex flex-col",children:[jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[" ",jsxRuntimeExports.jsx(Images,{})," IMAGENES"," "]}),jsxRuntimeExports.jsx(MenubarContent,{children:jsxRuntimeExports.jsx(ScrollArea,{style:{height:t1.height-160},className:"pr-3",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col w-max space-x-4 p-4",children:works.map(a1=>jsxRuntimeExports.jsxs("figure",{className:"shrink-0",draggable:!0,onDragStart:u1=>i1(u1,a1),children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden rounded-md",children:jsxRuntimeExports.jsx("img",{src:a1.art,alt:`Photo by ${a1.artist}`,className:"h-[400px] w-[600px] object-cover"})}),jsxRuntimeExports.jsxs("figcaption",{className:"pt-2 text-xs text-muted-foreground",children:["Photo by"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-foreground",children:a1.artist})]})]},a1.artist))})})})]}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[jsxRuntimeExports.jsx(Paperclip,{})," UPLOADS"]}),jsxRuntimeExports.jsxs(MenubarContent,{children:[jsxRuntimeExports.jsxs(MenubarItem,{children:["Undo ",jsxRuntimeExports.jsx(MenubarShortcut,{children:"⌘Z"})]}),jsxRuntimeExports.jsxs(MenubarItem,{children:["Redo ",jsxRuntimeExports.jsx(MenubarShortcut,{children:"⇧⌘Z"})]}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsxs(MenubarSub,{children:[jsxRuntimeExports.jsx(MenubarSubTrigger,{children:"Find"}),jsxRuntimeExports.jsxs(MenubarSubContent,{children:[jsxRuntimeExports.jsx(MenubarItem,{children:"Search the web"}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsx(MenubarItem,{children:"Find..."}),jsxRuntimeExports.jsx(MenubarItem,{children:"Find Next"}),jsxRuntimeExports.jsx(MenubarItem,{children:"Find Previous"})]})]}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsx(MenubarItem,{children:"Cut"}),jsxRuntimeExports.jsx(MenubarItem,{children:"Copy"}),jsxRuntimeExports.jsx(MenubarItem,{children:"Paste"})]})]}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[jsxRuntimeExports.jsx(WandSparkles,{})," MAGIC AI"]}),jsxRuntimeExports.jsx(MenubarContent,{children:jsxRuntimeExports.jsx(MenubarItem,{disabled:e1,onClick:()=>{_g()},children:"Create image"})})]}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[" ",jsxRuntimeExports.jsx(Layers,{})," AJUSTA IMAGEN"]}),jsxRuntimeExports.jsx(MenubarContent,{children:jsxRuntimeExports.jsx(CanvasOptions,{})})]}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[" ",jsxRuntimeExports.jsx(Layers,{})," DEVICE RATIO"]}),jsxRuntimeExports.jsx(MenubarContent,{children:jsxRuntimeExports.jsx(RatioOptions,{})})]})]})}return jsxRuntimeExports.jsx(o1,{})},model={name:"Fantasy-Studio/Paint-by-Example",path:"Fantasy-Studio/Paint-by-Example",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},Workspace=()=>{const[e1]=useStore(_g=>[_g.updateSettings]);return reactExports.useEffect(()=>{e1({model})},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex gap-3 absolute top-[68px] left-[20px] items-center",children:jsxRuntimeExports.jsx(ImageSize,{})}),jsxRuntimeExports.jsx(LeftSidePanel,{}),jsxRuntimeExports.jsx(RightSidePanel,{}),jsxRuntimeExports.jsx(Editor,{})]})},SUPPORTED_FILE_TYPE=["image/jpeg","image/png","image/webp","image/bmp","image/tiff"];function Home(){const[e1,_g,t1,r1,n1,i1]=useStore(v1=>[v1.file,v1.handleSaveState,v1.updateAppState,v1.setFile,v1.scaledWidth,v1.scaledHeight]),{fabricRef:o1}=useRefContext(),[a1,u1]=useImage(e1),s1=useWindowSize();reactExports.useEffect(()=>{t1({windowSize:s1})},[s1]);const l1=reactExports.useRef(0),c1=reactExports.useCallback(v1=>{v1.preventDefault(),v1.stopPropagation()},[]),d1=reactExports.useCallback(v1=>{v1.preventDefault(),v1.stopPropagation(),l1.current+=1},[]),h1=reactExports.useCallback(v1=>{v1.preventDefault(),v1.stopPropagation(),l1.current-=1,l1.current>0},[]),f1=reactExports.useCallback(v1=>{if(v1.preventDefault(),v1.stopPropagation(),!o1.current)return;const $1=v1.dataTransfer;if($1!=null&&$1.files&&$1.files.length>0){const y1=$1.files[0],_1=y1.type;SUPPORTED_FILE_TYPE.includes(_1)&&r1(y1)}else{const y1=$1==null?void 0:$1.getData("text/plain");y1&&r1(y1)}v1.dataTransfer.clearData()},[]),g1=reactExports.useCallback(v1=>{if(!v1.clipboardData)return;const $1=v1.clipboardData.items,y1=[].slice.call($1).filter(T1=>T1.type.indexOf("image")!==-1);if(y1.length===0)return;v1.preventDefault(),v1.stopPropagation();const E1=y1[0].getAsFile();E1&&r1(E1)},[]);return reactExports.useEffect(()=>{if(u1&&o1.current&&a1){const v1=o1.current.width??0,$1=o1.current.height??0,y1=(a1==null?void 0:a1.width)??1,_1=(a1==null?void 0:a1.height)??1,E1=n1/y1,T1=i1/_1,P1=Math.floor(Math.min(E1,T1)*100)/100,k1=new ha$1(a1,{originX:"center",originY:"center"});k1.resizeFilter=new vh$1.Resize({resizeType:"lanczos",lanczosLobes:3}),k1.scaleX=P1,k1.scaleY=P1;const N1=v1/2,W1=$1/2;k1.set({left:N1,top:W1,img_view:"modify"}),o1.current.add(k1),debugLog(LOG_LEVELS.DEBUG,"imageWidth, imageHeigth",[y1,_1]),debugLog(LOG_LEVELS.DEBUG,"img scale added",P1),debugLog(LOG_LEVELS.DEBUG,`img canvas plane Matrix Transf
`,k1.calcTransformMatrix()),debugLog(LOG_LEVELS.DEBUG,`img Object plane Matrix Transf
`,k1.calcOwnMatrix()),_g(o1.current)}},[a1,u1]),reactExports.useEffect(()=>(window.addEventListener("dragenter",d1),window.addEventListener("dragleave",h1),window.addEventListener("dragover",c1),window.addEventListener("drop",f1),window.addEventListener("paste",g1),function(){window.removeEventListener("dragenter",d1),window.removeEventListener("dragleave",h1),window.removeEventListener("dragover",c1),window.removeEventListener("drop",f1),window.removeEventListener("paste",g1)})),jsxRuntimeExports.jsxs("main",{className:"flex min-h-screen flex-col items-center justify-between w-full bg-[radial-gradient(circle_at_1px_1px,_#8e8e8e8e_1px,_transparent_0)] [background-size:20px_20px] bg-repeat",children:[jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(Workspace,{})]})}var P=["light","dark"],E="(prefers-color-scheme: dark)",Q=typeof window>"u",L=reactExports.createContext(void 0),z=e1=>reactExports.useContext(L)?e1.children:reactExports.createElement(O,{...e1}),N=["light","dark"],O=({forcedTheme:e1,disableTransitionOnChange:_g=!1,enableSystem:t1=!0,enableColorScheme:r1=!0,storageKey:n1="theme",themes:i1=N,defaultTheme:o1=t1?"system":"light",attribute:a1="data-theme",value:u1,children:s1,nonce:l1})=>{let[c1,d1]=reactExports.useState(()=>M(n1,o1)),[h1,f1]=reactExports.useState(()=>M(n1)),g1=u1?Object.values(u1):i1,v1=reactExports.useCallback(E1=>{let T1=E1;if(!T1)return;E1==="system"&&t1&&(T1=T());let P1=u1?u1[T1]:T1,k1=_g?_():null,N1=document.documentElement;if(a1==="class"?(N1.classList.remove(...g1),P1&&N1.classList.add(P1)):P1?N1.setAttribute(a1,P1):N1.removeAttribute(a1),r1){let W1=P.includes(o1)?o1:null,H1=P.includes(T1)?T1:W1;N1.style.colorScheme=H1}k1==null||k1()},[]),$1=reactExports.useCallback(E1=>{let T1=typeof E1=="function"?E1(E1):E1;d1(T1);try{localStorage.setItem(n1,T1)}catch{}},[e1]),y1=reactExports.useCallback(E1=>{let T1=T(E1);f1(T1),c1==="system"&&t1&&!e1&&v1("system")},[c1,e1]);reactExports.useEffect(()=>{let E1=window.matchMedia(E);return E1.addListener(y1),y1(E1),()=>E1.removeListener(y1)},[y1]),reactExports.useEffect(()=>{let E1=T1=>{if(T1.key!==n1)return;let P1=T1.newValue||o1;$1(P1)};return window.addEventListener("storage",E1),()=>window.removeEventListener("storage",E1)},[$1]),reactExports.useEffect(()=>{v1(e1??c1)},[e1,c1]);let _1=reactExports.useMemo(()=>({theme:c1,setTheme:$1,forcedTheme:e1,resolvedTheme:c1==="system"?h1:c1,themes:t1?[...i1,"system"]:i1,systemTheme:t1?h1:void 0}),[c1,$1,e1,h1,t1,i1]);return reactExports.createElement(L.Provider,{value:_1},reactExports.createElement(U,{forcedTheme:e1,disableTransitionOnChange:_g,enableSystem:t1,enableColorScheme:r1,storageKey:n1,themes:i1,defaultTheme:o1,attribute:a1,value:u1,children:s1,attrs:g1,nonce:l1}),s1)},U=reactExports.memo(({forcedTheme:e1,storageKey:_g,attribute:t1,enableSystem:r1,enableColorScheme:n1,defaultTheme:i1,value:o1,attrs:a1,nonce:u1})=>{let s1=i1==="system",l1=t1==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a1.map(f1=>`'${f1}'`).join(",")})`};`:`var d=document.documentElement,n='${t1}',s='setAttribute';`,c1=n1?P.includes(i1)&&i1?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i1}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",d1=(f1,g1=!1,v1=!0)=>{let $1=o1?o1[f1]:f1,y1=g1?f1+"|| ''":`'${$1}'`,_1="";return n1&&v1&&!g1&&P.includes(f1)&&(_1+=`d.style.colorScheme = '${f1}';`),t1==="class"?g1||$1?_1+=`c.add(${y1})`:_1+="null":$1&&(_1+=`d[s](n,${y1})`),_1},h1=e1?`!function(){${l1}${d1(e1)}}()`:r1?`!function(){try{${l1}var e=localStorage.getItem('${_g}');if('system'===e||(!e&&${s1})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${d1("dark")}}else{${d1("light")}}}else if(e){${o1?`var x=${JSON.stringify(o1)};`:""}${d1(o1?"x[e]":"e",!0)}}${s1?"":"else{"+d1(i1,!1,!1)+"}"}${c1}}catch(e){}}()`:`!function(){try{${l1}var e=localStorage.getItem('${_g}');if(e){${o1?`var x=${JSON.stringify(o1)};`:""}${d1(o1?"x[e]":"e",!0)}}else{${d1(i1,!1,!1)};}${c1}}catch(t){}}();`;return reactExports.createElement("script",{nonce:u1,dangerouslySetInnerHTML:{__html:h1}})}),M=(e1,_g)=>{if(Q)return;let t1;try{t1=localStorage.getItem(e1)||void 0}catch{}return t1||_g},_=()=>{let e1=document.createElement("style");return e1.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e1),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e1)},1)}},T=e1=>(e1||(e1=window.matchMedia(E)),e1.matches?"dark":"light");const consoleLogger={type:"logger",log(e1){this.output("log",e1)},warn(e1){this.output("warn",e1)},error(e1){this.output("error",e1)},output(e1,_g){console&&console[e1]&&console[e1].apply(console,_g)}};class Logger{constructor(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(_g,t1)}init(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t1.prefix||"i18next:",this.logger=_g||consoleLogger,this.options=t1,this.debug=t1.debug}log(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];return this.forward(t1,"log","",!0)}warn(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];return this.forward(t1,"warn","",!0)}error(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];return this.forward(t1,"error","")}deprecate(){for(var _g=arguments.length,t1=new Array(_g),r1=0;r1<_g;r1++)t1[r1]=arguments[r1];return this.forward(t1,"warn","WARNING DEPRECATED: ",!0)}forward(_g,t1,r1,n1){return n1&&!this.debug?null:(typeof _g[0]=="string"&&(_g[0]=`${r1}${this.prefix} ${_g[0]}`),this.logger[t1](_g))}create(_g){return new Logger(this.logger,{prefix:`${this.prefix}:${_g}:`,...this.options})}clone(_g){return _g=_g||this.options,_g.prefix=_g.prefix||this.prefix,new Logger(this.logger,_g)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(_g,t1){return _g.split(" ").forEach(r1=>{this.observers[r1]||(this.observers[r1]=new Map);const n1=this.observers[r1].get(t1)||0;this.observers[r1].set(t1,n1+1)}),this}off(_g,t1){if(this.observers[_g]){if(!t1){delete this.observers[_g];return}this.observers[_g].delete(t1)}}emit(_g){for(var t1=arguments.length,r1=new Array(t1>1?t1-1:0),n1=1;n1<t1;n1++)r1[n1-1]=arguments[n1];this.observers[_g]&&Array.from(this.observers[_g].entries()).forEach(o1=>{let[a1,u1]=o1;for(let s1=0;s1<u1;s1++)a1(...r1)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o1=>{let[a1,u1]=o1;for(let s1=0;s1<u1;s1++)a1.apply(a1,[_g,...r1])})}}function defer(){let e1,_g;const t1=new Promise((r1,n1)=>{e1=r1,_g=n1});return t1.resolve=e1,t1.reject=_g,t1}function makeString(e1){return e1==null?"":""+e1}function copy(e1,_g,t1){e1.forEach(r1=>{_g[r1]&&(t1[r1]=_g[r1])})}const lastOfPathSeparatorRegExp=/###/g;function getLastOfPath(e1,_g,t1){function r1(a1){return a1&&a1.indexOf("###")>-1?a1.replace(lastOfPathSeparatorRegExp,"."):a1}function n1(){return!e1||typeof e1=="string"}const i1=typeof _g!="string"?_g:_g.split(".");let o1=0;for(;o1<i1.length-1;){if(n1())return{};const a1=r1(i1[o1]);!e1[a1]&&t1&&(e1[a1]=new t1),Object.prototype.hasOwnProperty.call(e1,a1)?e1=e1[a1]:e1={},++o1}return n1()?{}:{obj:e1,k:r1(i1[o1])}}function setPath(e1,_g,t1){const{obj:r1,k:n1}=getLastOfPath(e1,_g,Object);if(r1!==void 0||_g.length===1){r1[n1]=t1;return}let i1=_g[_g.length-1],o1=_g.slice(0,_g.length-1),a1=getLastOfPath(e1,o1,Object);for(;a1.obj===void 0&&o1.length;)i1=`${o1[o1.length-1]}.${i1}`,o1=o1.slice(0,o1.length-1),a1=getLastOfPath(e1,o1,Object),a1&&a1.obj&&typeof a1.obj[`${a1.k}.${i1}`]<"u"&&(a1.obj=void 0);a1.obj[`${a1.k}.${i1}`]=t1}function pushPath(e1,_g,t1,r1){const{obj:n1,k:i1}=getLastOfPath(e1,_g,Object);n1[i1]=n1[i1]||[],n1[i1].push(t1)}function getPath(e1,_g){const{obj:t1,k:r1}=getLastOfPath(e1,_g);if(t1)return t1[r1]}function getPathWithDefaults(e1,_g,t1){const r1=getPath(e1,t1);return r1!==void 0?r1:getPath(_g,t1)}function deepExtend(e1,_g,t1){for(const r1 in _g)r1!=="__proto__"&&r1!=="constructor"&&(r1 in e1?typeof e1[r1]=="string"||e1[r1]instanceof String||typeof _g[r1]=="string"||_g[r1]instanceof String?t1&&(e1[r1]=_g[r1]):deepExtend(e1[r1],_g[r1],t1):e1[r1]=_g[r1]);return e1}function regexEscape(e1){return e1.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape(e1){return typeof e1=="string"?e1.replace(/[&<>"'\/]/g,_g=>_entityMap[_g]):e1}class RegExpCache{constructor(_g){this.capacity=_g,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(_g){const t1=this.regExpMap.get(_g);if(t1!==void 0)return t1;const r1=new RegExp(_g);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(_g,r1),this.regExpQueue.push(_g),r1}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20);function looksLikeObjectPath(e1,_g,t1){_g=_g||"",t1=t1||"";const r1=chars.filter(o1=>_g.indexOf(o1)<0&&t1.indexOf(o1)<0);if(r1.length===0)return!0;const n1=looksLikeObjectPathRegExpCache.getRegExp(`(${r1.map(o1=>o1==="?"?"\\?":o1).join("|")})`);let i1=!n1.test(e1);if(!i1){const o1=e1.indexOf(t1);o1>0&&!n1.test(e1.substring(0,o1))&&(i1=!0)}return i1}function deepFind(e1,_g){let t1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e1)return;if(e1[_g])return e1[_g];const r1=_g.split(t1);let n1=e1;for(let i1=0;i1<r1.length;){if(!n1||typeof n1!="object")return;let o1,a1="";for(let u1=i1;u1<r1.length;++u1)if(u1!==i1&&(a1+=t1),a1+=r1[u1],o1=n1[a1],o1!==void 0){if(["string","number","boolean"].indexOf(typeof o1)>-1&&u1<r1.length-1)continue;i1+=u1-i1+1;break}n1=o1}return n1}function getCleanedCode(e1){return e1&&e1.indexOf("_")>0?e1.replace("_","-"):e1}class ResourceStore extends EventEmitter{constructor(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=_g||{},this.options=t1,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(_g){this.options.ns.indexOf(_g)<0&&this.options.ns.push(_g)}removeNamespaces(_g){const t1=this.options.ns.indexOf(_g);t1>-1&&this.options.ns.splice(t1,1)}getResource(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i1=n1.keySeparator!==void 0?n1.keySeparator:this.options.keySeparator,o1=n1.ignoreJSONStructure!==void 0?n1.ignoreJSONStructure:this.options.ignoreJSONStructure;let a1;_g.indexOf(".")>-1?a1=_g.split("."):(a1=[_g,t1],r1&&(Array.isArray(r1)?a1.push(...r1):typeof r1=="string"&&i1?a1.push(...r1.split(i1)):a1.push(r1)));const u1=getPath(this.data,a1);return!u1&&!t1&&!r1&&_g.indexOf(".")>-1&&(_g=a1[0],t1=a1[1],r1=a1.slice(2).join(".")),u1||!o1||typeof r1!="string"?u1:deepFind(this.data&&this.data[_g]&&this.data[_g][t1],r1,i1)}addResource(_g,t1,r1,n1){let i1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o1=i1.keySeparator!==void 0?i1.keySeparator:this.options.keySeparator;let a1=[_g,t1];r1&&(a1=a1.concat(o1?r1.split(o1):r1)),_g.indexOf(".")>-1&&(a1=_g.split("."),n1=t1,t1=a1[1]),this.addNamespaces(t1),setPath(this.data,a1,n1),i1.silent||this.emit("added",_g,t1,r1,n1)}addResources(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i1 in r1)(typeof r1[i1]=="string"||Array.isArray(r1[i1]))&&this.addResource(_g,t1,i1,r1[i1],{silent:!0});n1.silent||this.emit("added",_g,t1,r1)}addResourceBundle(_g,t1,r1,n1,i1){let o1=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a1=[_g,t1];_g.indexOf(".")>-1&&(a1=_g.split("."),n1=r1,r1=t1,t1=a1[1]),this.addNamespaces(t1);let u1=getPath(this.data,a1)||{};o1.skipCopy||(r1=JSON.parse(JSON.stringify(r1))),n1?deepExtend(u1,r1,i1):u1={...u1,...r1},setPath(this.data,a1,u1),o1.silent||this.emit("added",_g,t1,r1)}removeResourceBundle(_g,t1){this.hasResourceBundle(_g,t1)&&delete this.data[_g][t1],this.removeNamespaces(t1),this.emit("removed",_g,t1)}hasResourceBundle(_g,t1){return this.getResource(_g,t1)!==void 0}getResourceBundle(_g,t1){return t1||(t1=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(_g,t1)}:this.getResource(_g,t1)}getDataByLanguage(_g){return this.data[_g]}hasLanguageSomeTranslations(_g){const t1=this.getDataByLanguage(_g);return!!(t1&&Object.keys(t1)||[]).find(n1=>t1[n1]&&Object.keys(t1[n1]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(e1){this.processors[e1.name]=e1},handle(e1,_g,t1,r1,n1){return e1.forEach(i1=>{this.processors[i1]&&(_g=this.processors[i1].process(_g,t1,r1,n1))}),_g}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],_g,this),this.options=t1,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(_g){_g&&(this.language=_g)}exists(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(_g==null)return!1;const r1=this.resolve(_g,t1);return r1&&r1.res!==void 0}extractFromKey(_g,t1){let r1=t1.nsSeparator!==void 0?t1.nsSeparator:this.options.nsSeparator;r1===void 0&&(r1=":");const n1=t1.keySeparator!==void 0?t1.keySeparator:this.options.keySeparator;let i1=t1.ns||this.options.defaultNS||[];const o1=r1&&_g.indexOf(r1)>-1,a1=!this.options.userDefinedKeySeparator&&!t1.keySeparator&&!this.options.userDefinedNsSeparator&&!t1.nsSeparator&&!looksLikeObjectPath(_g,r1,n1);if(o1&&!a1){const u1=_g.match(this.interpolator.nestingRegexp);if(u1&&u1.length>0)return{key:_g,namespaces:i1};const s1=_g.split(r1);(r1!==n1||r1===n1&&this.options.ns.indexOf(s1[0])>-1)&&(i1=s1.shift()),_g=s1.join(n1)}return typeof i1=="string"&&(i1=[i1]),{key:_g,namespaces:i1}}translate(_g,t1,r1){if(typeof t1!="object"&&this.options.overloadTranslationOptionHandler&&(t1=this.options.overloadTranslationOptionHandler(arguments)),typeof t1=="object"&&(t1={...t1}),t1||(t1={}),_g==null)return"";Array.isArray(_g)||(_g=[String(_g)]);const n1=t1.returnDetails!==void 0?t1.returnDetails:this.options.returnDetails,i1=t1.keySeparator!==void 0?t1.keySeparator:this.options.keySeparator,{key:o1,namespaces:a1}=this.extractFromKey(_g[_g.length-1],t1),u1=a1[a1.length-1],s1=t1.lng||this.language,l1=t1.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(s1&&s1.toLowerCase()==="cimode"){if(l1){const E1=t1.nsSeparator||this.options.nsSeparator;return n1?{res:`${u1}${E1}${o1}`,usedKey:o1,exactUsedKey:o1,usedLng:s1,usedNS:u1,usedParams:this.getUsedParamsDetails(t1)}:`${u1}${E1}${o1}`}return n1?{res:o1,usedKey:o1,exactUsedKey:o1,usedLng:s1,usedNS:u1,usedParams:this.getUsedParamsDetails(t1)}:o1}const c1=this.resolve(_g,t1);let d1=c1&&c1.res;const h1=c1&&c1.usedKey||o1,f1=c1&&c1.exactUsedKey||o1,g1=Object.prototype.toString.apply(d1),v1=["[object Number]","[object Function]","[object RegExp]"],$1=t1.joinArrays!==void 0?t1.joinArrays:this.options.joinArrays,y1=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y1&&d1&&(typeof d1!="string"&&typeof d1!="boolean"&&typeof d1!="number")&&v1.indexOf(g1)<0&&!(typeof $1=="string"&&Array.isArray(d1))){if(!t1.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E1=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h1,d1,{...t1,ns:a1}):`key '${o1} (${this.language})' returned an object instead of string.`;return n1?(c1.res=E1,c1.usedParams=this.getUsedParamsDetails(t1),c1):E1}if(i1){const E1=Array.isArray(d1),T1=E1?[]:{},P1=E1?f1:h1;for(const k1 in d1)if(Object.prototype.hasOwnProperty.call(d1,k1)){const N1=`${P1}${i1}${k1}`;T1[k1]=this.translate(N1,{...t1,joinArrays:!1,ns:a1}),T1[k1]===N1&&(T1[k1]=d1[k1])}d1=T1}}else if(y1&&typeof $1=="string"&&Array.isArray(d1))d1=d1.join($1),d1&&(d1=this.extendTranslation(d1,_g,t1,r1));else{let E1=!1,T1=!1;const P1=t1.count!==void 0&&typeof t1.count!="string",k1=Translator.hasDefaultValue(t1),N1=P1?this.pluralResolver.getSuffix(s1,t1.count,t1):"",W1=t1.ordinal&&P1?this.pluralResolver.getSuffix(s1,t1.count,{ordinal:!1}):"",H1=P1&&!t1.ordinal&&t1.count===0&&this.pluralResolver.shouldUseIntlApi(),ty=H1&&t1[`defaultValue${this.options.pluralSeparator}zero`]||t1[`defaultValue${N1}`]||t1[`defaultValue${W1}`]||t1.defaultValue;!this.isValidLookup(d1)&&k1&&(E1=!0,d1=ty),this.isValidLookup(d1)||(T1=!0,d1=o1);const ly=(t1.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T1?void 0:d1,oy=k1&&ty!==d1&&this.options.updateMissing;if(T1||E1||oy){if(this.logger.log(oy?"updateKey":"missingKey",s1,u1,o1,oy?ty:d1),i1){const K1=this.resolve(o1,{...t1,keySeparator:!1});K1&&K1.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Q1=[];const U1=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t1.lng||this.language);if(this.options.saveMissingTo==="fallback"&&U1&&U1[0])for(let K1=0;K1<U1.length;K1++)Q1.push(U1[K1]);else this.options.saveMissingTo==="all"?Q1=this.languageUtils.toResolveHierarchy(t1.lng||this.language):Q1.push(t1.lng||this.language);const V1=(K1,J1,hy)=>{const G1=k1&&hy!==d1?hy:ly;this.options.missingKeyHandler?this.options.missingKeyHandler(K1,u1,J1,G1,oy,t1):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(K1,u1,J1,G1,oy,t1),this.emit("missingKey",K1,u1,J1,d1)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P1?Q1.forEach(K1=>{const J1=this.pluralResolver.getSuffixes(K1,t1);H1&&t1[`defaultValue${this.options.pluralSeparator}zero`]&&J1.indexOf(`${this.options.pluralSeparator}zero`)<0&&J1.push(`${this.options.pluralSeparator}zero`),J1.forEach(hy=>{V1([K1],o1+hy,t1[`defaultValue${hy}`]||ty)})}):V1(Q1,o1,ty))}d1=this.extendTranslation(d1,_g,t1,c1,r1),T1&&d1===o1&&this.options.appendNamespaceToMissingKey&&(d1=`${u1}:${o1}`),(T1||E1)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d1=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u1}:${o1}`:o1,E1?d1:void 0):d1=this.options.parseMissingKeyHandler(d1))}return n1?(c1.res=d1,c1.usedParams=this.getUsedParamsDetails(t1),c1):d1}extendTranslation(_g,t1,r1,n1,i1){var o1=this;if(this.i18nFormat&&this.i18nFormat.parse)_g=this.i18nFormat.parse(_g,{...this.options.interpolation.defaultVariables,...r1},r1.lng||this.language||n1.usedLng,n1.usedNS,n1.usedKey,{resolved:n1});else if(!r1.skipInterpolation){r1.interpolation&&this.interpolator.init({...r1,interpolation:{...this.options.interpolation,...r1.interpolation}});const s1=typeof _g=="string"&&(r1&&r1.interpolation&&r1.interpolation.skipOnVariables!==void 0?r1.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l1;if(s1){const d1=_g.match(this.interpolator.nestingRegexp);l1=d1&&d1.length}let c1=r1.replace&&typeof r1.replace!="string"?r1.replace:r1;if(this.options.interpolation.defaultVariables&&(c1={...this.options.interpolation.defaultVariables,...c1}),_g=this.interpolator.interpolate(_g,c1,r1.lng||this.language,r1),s1){const d1=_g.match(this.interpolator.nestingRegexp),h1=d1&&d1.length;l1<h1&&(r1.nest=!1)}!r1.lng&&this.options.compatibilityAPI!=="v1"&&n1&&n1.res&&(r1.lng=n1.usedLng),r1.nest!==!1&&(_g=this.interpolator.nest(_g,function(){for(var d1=arguments.length,h1=new Array(d1),f1=0;f1<d1;f1++)h1[f1]=arguments[f1];return i1&&i1[0]===h1[0]&&!r1.context?(o1.logger.warn(`It seems you are nesting recursively key: ${h1[0]} in key: ${t1[0]}`),null):o1.translate(...h1,t1)},r1)),r1.interpolation&&this.interpolator.reset()}const a1=r1.postProcess||this.options.postProcess,u1=typeof a1=="string"?[a1]:a1;return _g!=null&&u1&&u1.length&&r1.applyPostProcessor!==!1&&(_g=postProcessor.handle(u1,_g,t1,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n1,usedParams:this.getUsedParamsDetails(r1)},...r1}:r1,this)),_g}resolve(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r1,n1,i1,o1,a1;return typeof _g=="string"&&(_g=[_g]),_g.forEach(u1=>{if(this.isValidLookup(r1))return;const s1=this.extractFromKey(u1,t1),l1=s1.key;n1=l1;let c1=s1.namespaces;this.options.fallbackNS&&(c1=c1.concat(this.options.fallbackNS));const d1=t1.count!==void 0&&typeof t1.count!="string",h1=d1&&!t1.ordinal&&t1.count===0&&this.pluralResolver.shouldUseIntlApi(),f1=t1.context!==void 0&&(typeof t1.context=="string"||typeof t1.context=="number")&&t1.context!=="",g1=t1.lngs?t1.lngs:this.languageUtils.toResolveHierarchy(t1.lng||this.language,t1.fallbackLng);c1.forEach(v1=>{this.isValidLookup(r1)||(a1=v1,!checkedLoadedFor[`${g1[0]}-${v1}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a1)&&(checkedLoadedFor[`${g1[0]}-${v1}`]=!0,this.logger.warn(`key "${n1}" for languages "${g1.join(", ")}" won't get resolved as namespace "${a1}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g1.forEach($1=>{if(this.isValidLookup(r1))return;o1=$1;const y1=[l1];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y1,l1,$1,v1,t1);else{let E1;d1&&(E1=this.pluralResolver.getSuffix($1,t1.count,t1));const T1=`${this.options.pluralSeparator}zero`,P1=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d1&&(y1.push(l1+E1),t1.ordinal&&E1.indexOf(P1)===0&&y1.push(l1+E1.replace(P1,this.options.pluralSeparator)),h1&&y1.push(l1+T1)),f1){const k1=`${l1}${this.options.contextSeparator}${t1.context}`;y1.push(k1),d1&&(y1.push(k1+E1),t1.ordinal&&E1.indexOf(P1)===0&&y1.push(k1+E1.replace(P1,this.options.pluralSeparator)),h1&&y1.push(k1+T1))}}let _1;for(;_1=y1.pop();)this.isValidLookup(r1)||(i1=_1,r1=this.getResource($1,v1,_1,t1))}))})}),{res:r1,usedKey:n1,exactUsedKey:i1,usedLng:o1,usedNS:a1}}isValidLookup(_g){return _g!==void 0&&!(!this.options.returnNull&&_g===null)&&!(!this.options.returnEmptyString&&_g==="")}getResource(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(_g,t1,r1,n1):this.resourceStore.getResource(_g,t1,r1,n1)}getUsedParamsDetails(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t1=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r1=_g.replace&&typeof _g.replace!="string";let n1=r1?_g.replace:_g;if(r1&&typeof _g.count<"u"&&(n1.count=_g.count),this.options.interpolation.defaultVariables&&(n1={...this.options.interpolation.defaultVariables,...n1}),!r1){n1={...n1};for(const i1 of t1)delete n1[i1]}return n1}static hasDefaultValue(_g){const t1="defaultValue";for(const r1 in _g)if(Object.prototype.hasOwnProperty.call(_g,r1)&&t1===r1.substring(0,t1.length)&&_g[r1]!==void 0)return!0;return!1}}function capitalize(e1){return e1.charAt(0).toUpperCase()+e1.slice(1)}class LanguageUtil{constructor(_g){this.options=_g,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(_g){if(_g=getCleanedCode(_g),!_g||_g.indexOf("-")<0)return null;const t1=_g.split("-");return t1.length===2||(t1.pop(),t1[t1.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t1.join("-"))}getLanguagePartFromCode(_g){if(_g=getCleanedCode(_g),!_g||_g.indexOf("-")<0)return _g;const t1=_g.split("-");return this.formatLanguageCode(t1[0])}formatLanguageCode(_g){if(typeof _g=="string"&&_g.indexOf("-")>-1){const t1=["hans","hant","latn","cyrl","cans","mong","arab"];let r1=_g.split("-");return this.options.lowerCaseLng?r1=r1.map(n1=>n1.toLowerCase()):r1.length===2?(r1[0]=r1[0].toLowerCase(),r1[1]=r1[1].toUpperCase(),t1.indexOf(r1[1].toLowerCase())>-1&&(r1[1]=capitalize(r1[1].toLowerCase()))):r1.length===3&&(r1[0]=r1[0].toLowerCase(),r1[1].length===2&&(r1[1]=r1[1].toUpperCase()),r1[0]!=="sgn"&&r1[2].length===2&&(r1[2]=r1[2].toUpperCase()),t1.indexOf(r1[1].toLowerCase())>-1&&(r1[1]=capitalize(r1[1].toLowerCase())),t1.indexOf(r1[2].toLowerCase())>-1&&(r1[2]=capitalize(r1[2].toLowerCase()))),r1.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?_g.toLowerCase():_g}isSupportedCode(_g){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(_g=this.getLanguagePartFromCode(_g)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(_g)>-1}getBestMatchFromCodes(_g){if(!_g)return null;let t1;return _g.forEach(r1=>{if(t1)return;const n1=this.formatLanguageCode(r1);(!this.options.supportedLngs||this.isSupportedCode(n1))&&(t1=n1)}),!t1&&this.options.supportedLngs&&_g.forEach(r1=>{if(t1)return;const n1=this.getLanguagePartFromCode(r1);if(this.isSupportedCode(n1))return t1=n1;t1=this.options.supportedLngs.find(i1=>{if(i1===n1)return i1;if(!(i1.indexOf("-")<0&&n1.indexOf("-")<0)&&(i1.indexOf("-")>0&&n1.indexOf("-")<0&&i1.substring(0,i1.indexOf("-"))===n1||i1.indexOf(n1)===0&&n1.length>1))return i1})}),t1||(t1=this.getFallbackCodes(this.options.fallbackLng)[0]),t1}getFallbackCodes(_g,t1){if(!_g)return[];if(typeof _g=="function"&&(_g=_g(t1)),typeof _g=="string"&&(_g=[_g]),Array.isArray(_g))return _g;if(!t1)return _g.default||[];let r1=_g[t1];return r1||(r1=_g[this.getScriptPartFromCode(t1)]),r1||(r1=_g[this.formatLanguageCode(t1)]),r1||(r1=_g[this.getLanguagePartFromCode(t1)]),r1||(r1=_g.default),r1||[]}toResolveHierarchy(_g,t1){const r1=this.getFallbackCodes(t1||this.options.fallbackLng||[],_g),n1=[],i1=o1=>{o1&&(this.isSupportedCode(o1)?n1.push(o1):this.logger.warn(`rejecting language code not found in supportedLngs: ${o1}`))};return typeof _g=="string"&&(_g.indexOf("-")>-1||_g.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i1(this.formatLanguageCode(_g)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i1(this.getScriptPartFromCode(_g)),this.options.load!=="currentOnly"&&i1(this.getLanguagePartFromCode(_g))):typeof _g=="string"&&i1(this.formatLanguageCode(_g)),r1.forEach(o1=>{n1.indexOf(o1)<0&&i1(this.formatLanguageCode(o1))}),n1}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(e1){return+(e1>1)},2:function(e1){return+(e1!=1)},3:function(e1){return 0},4:function(e1){return e1%10==1&&e1%100!=11?0:e1%10>=2&&e1%10<=4&&(e1%100<10||e1%100>=20)?1:2},5:function(e1){return e1==0?0:e1==1?1:e1==2?2:e1%100>=3&&e1%100<=10?3:e1%100>=11?4:5},6:function(e1){return e1==1?0:e1>=2&&e1<=4?1:2},7:function(e1){return e1==1?0:e1%10>=2&&e1%10<=4&&(e1%100<10||e1%100>=20)?1:2},8:function(e1){return e1==1?0:e1==2?1:e1!=8&&e1!=11?2:3},9:function(e1){return+(e1>=2)},10:function(e1){return e1==1?0:e1==2?1:e1<7?2:e1<11?3:4},11:function(e1){return e1==1||e1==11?0:e1==2||e1==12?1:e1>2&&e1<20?2:3},12:function(e1){return+(e1%10!=1||e1%100==11)},13:function(e1){return+(e1!==0)},14:function(e1){return e1==1?0:e1==2?1:e1==3?2:3},15:function(e1){return e1%10==1&&e1%100!=11?0:e1%10>=2&&(e1%100<10||e1%100>=20)?1:2},16:function(e1){return e1%10==1&&e1%100!=11?0:e1!==0?1:2},17:function(e1){return e1==1||e1%10==1&&e1%100!=11?0:1},18:function(e1){return e1==0?0:e1==1?1:2},19:function(e1){return e1==1?0:e1==0||e1%100>1&&e1%100<11?1:e1%100>10&&e1%100<20?2:3},20:function(e1){return e1==1?0:e1==0||e1%100>0&&e1%100<20?1:2},21:function(e1){return e1%100==1?1:e1%100==2?2:e1%100==3||e1%100==4?3:0},22:function(e1){return e1==1?0:e1==2?1:(e1<0||e1>10)&&e1%10==0?2:3}};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5};function createRules(){const e1={};return sets.forEach(_g=>{_g.lngs.forEach(t1=>{e1[t1]={numbers:_g.nr,plurals:_rulesPluralsTypes[_g.fc]}})}),e1}class PluralResolver{constructor(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=_g,this.options=t1,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}addRule(_g,t1){this.rules[_g]=t1}getRule(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(getCleanedCode(_g==="dev"?"en":_g),{type:t1.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[_g]||this.rules[this.languageUtils.getLanguagePartFromCode(_g)]}needsPlural(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r1=this.getRule(_g,t1);return this.shouldUseIntlApi()?r1&&r1.resolvedOptions().pluralCategories.length>1:r1&&r1.numbers.length>1}getPluralFormsOfKey(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(_g,r1).map(n1=>`${t1}${n1}`)}getSuffixes(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r1=this.getRule(_g,t1);return r1?this.shouldUseIntlApi()?r1.resolvedOptions().pluralCategories.sort((n1,i1)=>suffixesOrder[n1]-suffixesOrder[i1]).map(n1=>`${this.options.prepend}${t1.ordinal?`ordinal${this.options.prepend}`:""}${n1}`):r1.numbers.map(n1=>this.getSuffix(_g,n1,t1)):[]}getSuffix(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n1=this.getRule(_g,r1);return n1?this.shouldUseIntlApi()?`${this.options.prepend}${r1.ordinal?`ordinal${this.options.prepend}`:""}${n1.select(t1)}`:this.getSuffixRetroCompatible(n1,t1):(this.logger.warn(`no plural rule found for: ${_g}`),"")}getSuffixRetroCompatible(_g,t1){const r1=_g.noAbs?_g.plurals(t1):_g.plurals(Math.abs(t1));let n1=_g.numbers[r1];this.options.simplifyPluralSuffix&&_g.numbers.length===2&&_g.numbers[0]===1&&(n1===2?n1="plural":n1===1&&(n1=""));const i1=()=>this.options.prepend&&n1.toString()?this.options.prepend+n1.toString():n1.toString();return this.options.compatibilityJSON==="v1"?n1===1?"":typeof n1=="number"?`_plural_${n1.toString()}`:i1():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&_g.numbers.length===2&&_g.numbers[0]===1?i1():this.options.prepend&&r1.toString()?this.options.prepend+r1.toString():r1.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}function deepFindWithDefaults(e1,_g,t1){let r1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i1=getPathWithDefaults(e1,_g,t1);return!i1&&n1&&typeof t1=="string"&&(i1=deepFind(e1,t1,r1),i1===void 0&&(i1=deepFind(_g,t1,r1))),i1}class Interpolator{constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=_g,this.format=_g.interpolation&&_g.interpolation.format||(t1=>t1),this.init(_g)}init(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_g.interpolation||(_g.interpolation={escapeValue:!0});const{escape:t1,escapeValue:r1,useRawValueToEscape:n1,prefix:i1,prefixEscaped:o1,suffix:a1,suffixEscaped:u1,formatSeparator:s1,unescapeSuffix:l1,unescapePrefix:c1,nestingPrefix:d1,nestingPrefixEscaped:h1,nestingSuffix:f1,nestingSuffixEscaped:g1,nestingOptionsSeparator:v1,maxReplaces:$1,alwaysFormat:y1}=_g.interpolation;this.escape=t1!==void 0?t1:escape,this.escapeValue=r1!==void 0?r1:!0,this.useRawValueToEscape=n1!==void 0?n1:!1,this.prefix=i1?regexEscape(i1):o1||"{{",this.suffix=a1?regexEscape(a1):u1||"}}",this.formatSeparator=s1||",",this.unescapePrefix=l1?"":c1||"-",this.unescapeSuffix=this.unescapePrefix?"":l1||"",this.nestingPrefix=d1?regexEscape(d1):h1||regexEscape("$t("),this.nestingSuffix=f1?regexEscape(f1):g1||regexEscape(")"),this.nestingOptionsSeparator=v1||",",this.maxReplaces=$1||1e3,this.alwaysFormat=y1!==void 0?y1:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const _g=(t1,r1)=>t1&&t1.source===r1?(t1.lastIndex=0,t1):new RegExp(r1,"g");this.regexp=_g(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=_g(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=_g(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(_g,t1,r1,n1){let i1,o1,a1;const u1=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function s1(f1){return f1.replace(/\$/g,"$$$$")}const l1=f1=>{if(f1.indexOf(this.formatSeparator)<0){const y1=deepFindWithDefaults(t1,u1,f1,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y1,void 0,r1,{...n1,...t1,interpolationkey:f1}):y1}const g1=f1.split(this.formatSeparator),v1=g1.shift().trim(),$1=g1.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(t1,u1,v1,this.options.keySeparator,this.options.ignoreJSONStructure),$1,r1,{...n1,...t1,interpolationkey:v1})};this.resetRegExp();const c1=n1&&n1.missingInterpolationHandler||this.options.missingInterpolationHandler,d1=n1&&n1.interpolation&&n1.interpolation.skipOnVariables!==void 0?n1.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f1=>s1(f1)},{regex:this.regexp,safeValue:f1=>this.escapeValue?s1(this.escape(f1)):s1(f1)}].forEach(f1=>{for(a1=0;i1=f1.regex.exec(_g);){const g1=i1[1].trim();if(o1=l1(g1),o1===void 0)if(typeof c1=="function"){const $1=c1(_g,i1,n1);o1=typeof $1=="string"?$1:""}else if(n1&&Object.prototype.hasOwnProperty.call(n1,g1))o1="";else if(d1){o1=i1[0];continue}else this.logger.warn(`missed to pass in variable ${g1} for interpolating ${_g}`),o1="";else typeof o1!="string"&&!this.useRawValueToEscape&&(o1=makeString(o1));const v1=f1.safeValue(o1);if(_g=_g.replace(i1[0],v1),d1?(f1.regex.lastIndex+=o1.length,f1.regex.lastIndex-=i1[0].length):f1.regex.lastIndex=0,a1++,a1>=this.maxReplaces)break}}),_g}nest(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n1,i1,o1;function a1(u1,s1){const l1=this.nestingOptionsSeparator;if(u1.indexOf(l1)<0)return u1;const c1=u1.split(new RegExp(`${l1}[ ]*{`));let d1=`{${c1[1]}`;u1=c1[0],d1=this.interpolate(d1,o1);const h1=d1.match(/'/g),f1=d1.match(/"/g);(h1&&h1.length%2===0&&!f1||f1.length%2!==0)&&(d1=d1.replace(/'/g,'"'));try{o1=JSON.parse(d1),s1&&(o1={...s1,...o1})}catch(g1){return this.logger.warn(`failed parsing options string in nesting for key ${u1}`,g1),`${u1}${l1}${d1}`}return o1.defaultValue&&o1.defaultValue.indexOf(this.prefix)>-1&&delete o1.defaultValue,u1}for(;n1=this.nestingRegexp.exec(_g);){let u1=[];o1={...r1},o1=o1.replace&&typeof o1.replace!="string"?o1.replace:o1,o1.applyPostProcessor=!1,delete o1.defaultValue;let s1=!1;if(n1[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n1[1])){const l1=n1[1].split(this.formatSeparator).map(c1=>c1.trim());n1[1]=l1.shift(),u1=l1,s1=!0}if(i1=t1(a1.call(this,n1[1].trim(),o1),o1),i1&&n1[0]===_g&&typeof i1!="string")return i1;typeof i1!="string"&&(i1=makeString(i1)),i1||(this.logger.warn(`missed to resolve ${n1[1]} for nesting ${_g}`),i1=""),s1&&(i1=u1.reduce((l1,c1)=>this.format(l1,c1,r1.lng,{...r1,interpolationkey:n1[1].trim()}),i1.trim())),_g=_g.replace(n1[0],i1),this.regexp.lastIndex=0}return _g}}function parseFormatStr(e1){let _g=e1.toLowerCase().trim();const t1={};if(e1.indexOf("(")>-1){const r1=e1.split("(");_g=r1[0].toLowerCase().trim();const n1=r1[1].substring(0,r1[1].length-1);_g==="currency"&&n1.indexOf(":")<0?t1.currency||(t1.currency=n1.trim()):_g==="relativetime"&&n1.indexOf(":")<0?t1.range||(t1.range=n1.trim()):n1.split(";").forEach(o1=>{if(o1){const[a1,...u1]=o1.split(":"),s1=u1.join(":").trim().replace(/^'+|'+$/g,""),l1=a1.trim();t1[l1]||(t1[l1]=s1),s1==="false"&&(t1[l1]=!1),s1==="true"&&(t1[l1]=!0),isNaN(s1)||(t1[l1]=parseInt(s1,10))}})}return{formatName:_g,formatOptions:t1}}function createCachedFormatter(e1){const _g={};return function(r1,n1,i1){const o1=n1+JSON.stringify(i1);let a1=_g[o1];return a1||(a1=e1(getCleanedCode(n1),i1),_g[o1]=a1),a1(r1)}}class Formatter{constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=_g,this.formats={number:createCachedFormatter((t1,r1)=>{const n1=new Intl.NumberFormat(t1,{...r1});return i1=>n1.format(i1)}),currency:createCachedFormatter((t1,r1)=>{const n1=new Intl.NumberFormat(t1,{...r1,style:"currency"});return i1=>n1.format(i1)}),datetime:createCachedFormatter((t1,r1)=>{const n1=new Intl.DateTimeFormat(t1,{...r1});return i1=>n1.format(i1)}),relativetime:createCachedFormatter((t1,r1)=>{const n1=new Intl.RelativeTimeFormat(t1,{...r1});return i1=>n1.format(i1,r1.range||"day")}),list:createCachedFormatter((t1,r1)=>{const n1=new Intl.ListFormat(t1,{...r1});return i1=>n1.format(i1)})},this.init(_g)}init(_g){const r1=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r1.formatSeparator?r1.formatSeparator:r1.formatSeparator||","}add(_g,t1){this.formats[_g.toLowerCase().trim()]=t1}addCached(_g,t1){this.formats[_g.toLowerCase().trim()]=createCachedFormatter(t1)}format(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return t1.split(this.formatSeparator).reduce((a1,u1)=>{const{formatName:s1,formatOptions:l1}=parseFormatStr(u1);if(this.formats[s1]){let c1=a1;try{const d1=n1&&n1.formatParams&&n1.formatParams[n1.interpolationkey]||{},h1=d1.locale||d1.lng||n1.locale||n1.lng||r1;c1=this.formats[s1](a1,h1,{...l1,...n1,...d1})}catch(d1){this.logger.warn(d1)}return c1}else this.logger.warn(`there was no format function for ${s1}`);return a1},_g)}}function removePending(e1,_g){e1.pending[_g]!==void 0&&(delete e1.pending[_g],e1.pendingCount--)}class Connector extends EventEmitter{constructor(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=_g,this.store=t1,this.services=r1,this.languageUtils=r1.languageUtils,this.options=n1,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n1.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n1.maxRetries>=0?n1.maxRetries:5,this.retryTimeout=n1.retryTimeout>=1?n1.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r1,n1.backend,n1)}queueLoad(_g,t1,r1,n1){const i1={},o1={},a1={},u1={};return _g.forEach(s1=>{let l1=!0;t1.forEach(c1=>{const d1=`${s1}|${c1}`;!r1.reload&&this.store.hasResourceBundle(s1,c1)?this.state[d1]=2:this.state[d1]<0||(this.state[d1]===1?o1[d1]===void 0&&(o1[d1]=!0):(this.state[d1]=1,l1=!1,o1[d1]===void 0&&(o1[d1]=!0),i1[d1]===void 0&&(i1[d1]=!0),u1[c1]===void 0&&(u1[c1]=!0)))}),l1||(a1[s1]=!0)}),(Object.keys(i1).length||Object.keys(o1).length)&&this.queue.push({pending:o1,pendingCount:Object.keys(o1).length,loaded:{},errors:[],callback:n1}),{toLoad:Object.keys(i1),pending:Object.keys(o1),toLoadLanguages:Object.keys(a1),toLoadNamespaces:Object.keys(u1)}}loaded(_g,t1,r1){const n1=_g.split("|"),i1=n1[0],o1=n1[1];t1&&this.emit("failedLoading",i1,o1,t1),r1&&this.store.addResourceBundle(i1,o1,r1,void 0,void 0,{skipCopy:!0}),this.state[_g]=t1?-1:2;const a1={};this.queue.forEach(u1=>{pushPath(u1.loaded,[i1],o1),removePending(u1,_g),t1&&u1.errors.push(t1),u1.pendingCount===0&&!u1.done&&(Object.keys(u1.loaded).forEach(s1=>{a1[s1]||(a1[s1]={});const l1=u1.loaded[s1];l1.length&&l1.forEach(c1=>{a1[s1][c1]===void 0&&(a1[s1][c1]=!0)})}),u1.done=!0,u1.errors.length?u1.callback(u1.errors):u1.callback())}),this.emit("loaded",a1),this.queue=this.queue.filter(u1=>!u1.done)}read(_g,t1,r1){let n1=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o1=arguments.length>5?arguments[5]:void 0;if(!_g.length)return o1(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:_g,ns:t1,fcName:r1,tried:n1,wait:i1,callback:o1});return}this.readingCalls++;const a1=(s1,l1)=>{if(this.readingCalls--,this.waitingReads.length>0){const c1=this.waitingReads.shift();this.read(c1.lng,c1.ns,c1.fcName,c1.tried,c1.wait,c1.callback)}if(s1&&l1&&n1<this.maxRetries){setTimeout(()=>{this.read.call(this,_g,t1,r1,n1+1,i1*2,o1)},i1);return}o1(s1,l1)},u1=this.backend[r1].bind(this.backend);if(u1.length===2){try{const s1=u1(_g,t1);s1&&typeof s1.then=="function"?s1.then(l1=>a1(null,l1)).catch(a1):a1(null,s1)}catch(s1){a1(s1)}return}return u1(_g,t1,a1)}prepareLoading(_g,t1){let r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n1=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n1&&n1();typeof _g=="string"&&(_g=this.languageUtils.toResolveHierarchy(_g)),typeof t1=="string"&&(t1=[t1]);const i1=this.queueLoad(_g,t1,r1,n1);if(!i1.toLoad.length)return i1.pending.length||n1(),null;i1.toLoad.forEach(o1=>{this.loadOne(o1)})}load(_g,t1,r1){this.prepareLoading(_g,t1,{},r1)}reload(_g,t1,r1){this.prepareLoading(_g,t1,{reload:!0},r1)}loadOne(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r1=_g.split("|"),n1=r1[0],i1=r1[1];this.read(n1,i1,"read",void 0,void 0,(o1,a1)=>{o1&&this.logger.warn(`${t1}loading namespace ${i1} for language ${n1} failed`,o1),!o1&&a1&&this.logger.log(`${t1}loaded namespace ${i1} for language ${n1}`,a1),this.loaded(_g,o1,a1)})}saveMissing(_g,t1,r1,n1,i1){let o1=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a1=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t1)){this.logger.warn(`did not save key "${r1}" as the namespace "${t1}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r1==null||r1==="")){if(this.backend&&this.backend.create){const u1={...o1,isUpdate:i1},s1=this.backend.create.bind(this.backend);if(s1.length<6)try{let l1;s1.length===5?l1=s1(_g,t1,r1,n1,u1):l1=s1(_g,t1,r1,n1),l1&&typeof l1.then=="function"?l1.then(c1=>a1(null,c1)).catch(a1):a1(null,l1)}catch(l1){a1(l1)}else s1(_g,t1,r1,n1,a1,u1)}!_g||!_g[0]||this.store.addResource(_g[0],t1,r1,n1)}}}function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(_g){let t1={};if(typeof _g[1]=="object"&&(t1=_g[1]),typeof _g[1]=="string"&&(t1.defaultValue=_g[1]),typeof _g[2]=="string"&&(t1.tDescription=_g[2]),typeof _g[2]=="object"||typeof _g[3]=="object"){const r1=_g[3]||_g[2];Object.keys(r1).forEach(n1=>{t1[n1]=r1[n1]})}return t1},interpolation:{escapeValue:!0,format:e1=>e1,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(e1){return typeof e1.ns=="string"&&(e1.ns=[e1.ns]),typeof e1.fallbackLng=="string"&&(e1.fallbackLng=[e1.fallbackLng]),typeof e1.fallbackNS=="string"&&(e1.fallbackNS=[e1.fallbackNS]),e1.supportedLngs&&e1.supportedLngs.indexOf("cimode")<0&&(e1.supportedLngs=e1.supportedLngs.concat(["cimode"])),e1}function noop(){}function bindMemberFunctions(e1){Object.getOwnPropertyNames(Object.getPrototypeOf(e1)).forEach(t1=>{typeof e1[t1]=="function"&&(e1[t1]=e1[t1].bind(e1))})}class I18n extends EventEmitter{constructor(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t1=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(_g),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),t1&&!this.isInitialized&&!_g.isClone){if(!this.options.initImmediate)return this.init(_g,t1),this;setTimeout(()=>{this.init(_g,t1)},0)}}init(){var _g=this;let t1=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r1=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t1=="function"&&(r1=t1,t1={}),!t1.defaultNS&&t1.defaultNS!==!1&&t1.ns&&(typeof t1.ns=="string"?t1.defaultNS=t1.ns:t1.ns.indexOf("translation")<0&&(t1.defaultNS=t1.ns[0]));const n1=get();this.options={...n1,...this.options,...transformOptions(t1)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...n1.interpolation,...this.options.interpolation}),t1.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t1.keySeparator),t1.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t1.nsSeparator);function i1(l1){return l1?typeof l1=="function"?new l1:l1:null}if(!this.options.isClone){this.modules.logger?baseLogger.init(i1(this.modules.logger),this.options):baseLogger.init(null,this.options);let l1;this.modules.formatter?l1=this.modules.formatter:typeof Intl<"u"&&(l1=Formatter);const c1=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const d1=this.services;d1.logger=baseLogger,d1.resourceStore=this.store,d1.languageUtils=c1,d1.pluralResolver=new PluralResolver(c1,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l1&&(!this.options.interpolation.format||this.options.interpolation.format===n1.interpolation.format)&&(d1.formatter=i1(l1),d1.formatter.init(d1,this.options),this.options.interpolation.format=d1.formatter.format.bind(d1.formatter)),d1.interpolator=new Interpolator(this.options),d1.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d1.backendConnector=new Connector(i1(this.modules.backend),d1.resourceStore,d1,this.options),d1.backendConnector.on("*",function(h1){for(var f1=arguments.length,g1=new Array(f1>1?f1-1:0),v1=1;v1<f1;v1++)g1[v1-1]=arguments[v1];_g.emit(h1,...g1)}),this.modules.languageDetector&&(d1.languageDetector=i1(this.modules.languageDetector),d1.languageDetector.init&&d1.languageDetector.init(d1,this.options.detection,this.options)),this.modules.i18nFormat&&(d1.i18nFormat=i1(this.modules.i18nFormat),d1.i18nFormat.init&&d1.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(h1){for(var f1=arguments.length,g1=new Array(f1>1?f1-1:0),v1=1;v1<f1;v1++)g1[v1-1]=arguments[v1];_g.emit(h1,...g1)}),this.modules.external.forEach(h1=>{h1.init&&h1.init(this)})}if(this.format=this.options.interpolation.format,r1||(r1=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l1=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l1.length>0&&l1[0]!=="dev"&&(this.options.lng=l1[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l1=>{this[l1]=function(){return _g.store[l1](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l1=>{this[l1]=function(){return _g.store[l1](...arguments),_g}});const u1=defer(),s1=()=>{const l1=(c1,d1)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u1.resolve(d1),r1(c1,d1)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l1(null,this.t.bind(this));this.changeLanguage(this.options.lng,l1)};return this.options.resources||!this.options.initImmediate?s1():setTimeout(s1,0),u1}loadResources(_g){let r1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const n1=typeof _g=="string"?_g:this.language;if(typeof _g=="function"&&(r1=_g),!this.options.resources||this.options.partialBundledLanguages){if(n1&&n1.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r1();const i1=[],o1=a1=>{if(!a1||a1==="cimode")return;this.services.languageUtils.toResolveHierarchy(a1).forEach(s1=>{s1!=="cimode"&&i1.indexOf(s1)<0&&i1.push(s1)})};n1?o1(n1):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u1=>o1(u1)),this.options.preload&&this.options.preload.forEach(a1=>o1(a1)),this.services.backendConnector.load(i1,this.options.ns,a1=>{!a1&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r1(a1)})}else r1(null)}reloadResources(_g,t1,r1){const n1=defer();return _g||(_g=this.languages),t1||(t1=this.options.ns),r1||(r1=noop),this.services.backendConnector.reload(_g,t1,i1=>{n1.resolve(),r1(i1)}),n1}use(_g){if(!_g)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!_g.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return _g.type==="backend"&&(this.modules.backend=_g),(_g.type==="logger"||_g.log&&_g.warn&&_g.error)&&(this.modules.logger=_g),_g.type==="languageDetector"&&(this.modules.languageDetector=_g),_g.type==="i18nFormat"&&(this.modules.i18nFormat=_g),_g.type==="postProcessor"&&postProcessor.addPostProcessor(_g),_g.type==="formatter"&&(this.modules.formatter=_g),_g.type==="3rdParty"&&this.modules.external.push(_g),this}setResolvedLanguage(_g){if(!(!_g||!this.languages)&&!(["cimode","dev"].indexOf(_g)>-1))for(let t1=0;t1<this.languages.length;t1++){const r1=this.languages[t1];if(!(["cimode","dev"].indexOf(r1)>-1)&&this.store.hasLanguageSomeTranslations(r1)){this.resolvedLanguage=r1;break}}}changeLanguage(_g,t1){var r1=this;this.isLanguageChangingTo=_g;const n1=defer();this.emit("languageChanging",_g);const i1=u1=>{this.language=u1,this.languages=this.services.languageUtils.toResolveHierarchy(u1),this.resolvedLanguage=void 0,this.setResolvedLanguage(u1)},o1=(u1,s1)=>{s1?(i1(s1),this.translator.changeLanguage(s1),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s1),this.logger.log("languageChanged",s1)):this.isLanguageChangingTo=void 0,n1.resolve(function(){return r1.t(...arguments)}),t1&&t1(u1,function(){return r1.t(...arguments)})},a1=u1=>{!_g&&!u1&&this.services.languageDetector&&(u1=[]);const s1=typeof u1=="string"?u1:this.services.languageUtils.getBestMatchFromCodes(u1);s1&&(this.language||i1(s1),this.translator.language||this.translator.changeLanguage(s1),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(s1)),this.loadResources(s1,l1=>{o1(l1,s1)})};return!_g&&this.services.languageDetector&&!this.services.languageDetector.async?a1(this.services.languageDetector.detect()):!_g&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a1):this.services.languageDetector.detect(a1):a1(_g),n1}getFixedT(_g,t1,r1){var n1=this;const i1=function(o1,a1){let u1;if(typeof a1!="object"){for(var s1=arguments.length,l1=new Array(s1>2?s1-2:0),c1=2;c1<s1;c1++)l1[c1-2]=arguments[c1];u1=n1.options.overloadTranslationOptionHandler([o1,a1].concat(l1))}else u1={...a1};u1.lng=u1.lng||i1.lng,u1.lngs=u1.lngs||i1.lngs,u1.ns=u1.ns||i1.ns,u1.keyPrefix=u1.keyPrefix||r1||i1.keyPrefix;const d1=n1.options.keySeparator||".";let h1;return u1.keyPrefix&&Array.isArray(o1)?h1=o1.map(f1=>`${u1.keyPrefix}${d1}${f1}`):h1=u1.keyPrefix?`${u1.keyPrefix}${d1}${o1}`:o1,n1.t(h1,u1)};return typeof _g=="string"?i1.lng=_g:i1.lngs=_g,i1.ns=t1,i1.keyPrefix=r1,i1}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(_g){this.options.defaultNS=_g}hasLoadedNamespace(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r1=t1.lng||this.resolvedLanguage||this.languages[0],n1=this.options?this.options.fallbackLng:!1,i1=this.languages[this.languages.length-1];if(r1.toLowerCase()==="cimode")return!0;const o1=(a1,u1)=>{const s1=this.services.backendConnector.state[`${a1}|${u1}`];return s1===-1||s1===2};if(t1.precheck){const a1=t1.precheck(this,o1);if(a1!==void 0)return a1}return!!(this.hasResourceBundle(r1,_g)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o1(r1,_g)&&(!n1||o1(i1,_g)))}loadNamespaces(_g,t1){const r1=defer();return this.options.ns?(typeof _g=="string"&&(_g=[_g]),_g.forEach(n1=>{this.options.ns.indexOf(n1)<0&&this.options.ns.push(n1)}),this.loadResources(n1=>{r1.resolve(),t1&&t1(n1)}),r1):(t1&&t1(),Promise.resolve())}loadLanguages(_g,t1){const r1=defer();typeof _g=="string"&&(_g=[_g]);const n1=this.options.preload||[],i1=_g.filter(o1=>n1.indexOf(o1)<0&&this.services.languageUtils.isSupportedCode(o1));return i1.length?(this.options.preload=n1.concat(i1),this.loadResources(o1=>{r1.resolve(),t1&&t1(o1)}),r1):(t1&&t1(),Promise.resolve())}dir(_g){if(_g||(_g=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!_g)return"rtl";const t1=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r1=this.services&&this.services.languageUtils||new LanguageUtil(get());return t1.indexOf(r1.getLanguagePartFromCode(_g))>-1||_g.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t1=arguments.length>1?arguments[1]:void 0;return new I18n(_g,t1)}cloneInstance(){let _g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const r1=_g.forkResourceStore;r1&&delete _g.forkResourceStore;const n1={...this.options,..._g,isClone:!0},i1=new I18n(n1);return(_g.debug!==void 0||_g.prefix!==void 0)&&(i1.logger=i1.logger.clone(_g)),["store","services","language"].forEach(a1=>{i1[a1]=this[a1]}),i1.services={...this.services},i1.services.utils={hasLoadedNamespace:i1.hasLoadedNamespace.bind(i1)},r1&&(i1.store=new ResourceStore(this.store.data,n1),i1.services.resourceStore=i1.store),i1.translator=new Translator(i1.services,n1),i1.translator.on("*",function(a1){for(var u1=arguments.length,s1=new Array(u1>1?u1-1:0),l1=1;l1<u1;l1++)s1[l1-1]=arguments[l1];i1.emit(a1,...s1)}),i1.init(n1,t1),i1.translator.options=n1,i1.translator.backendConnector.services.utils={hasLoadedNamespace:i1.hasLoadedNamespace.bind(i1)},i1}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const{slice,forEach}=[];function defaults(e1){return forEach.call(slice.call(arguments,1),_g=>{if(_g)for(const t1 in _g)e1[t1]===void 0&&(e1[t1]=_g[t1])}),e1}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=(e1,_g,t1)=>{const r1=t1||{};r1.path=r1.path||"/";const n1=encodeURIComponent(_g);let i1=`${e1}=${n1}`;if(r1.maxAge>0){const o1=r1.maxAge-0;if(Number.isNaN(o1))throw new Error("maxAge should be a Number");i1+=`; Max-Age=${Math.floor(o1)}`}if(r1.domain){if(!fieldContentRegExp.test(r1.domain))throw new TypeError("option domain is invalid");i1+=`; Domain=${r1.domain}`}if(r1.path){if(!fieldContentRegExp.test(r1.path))throw new TypeError("option path is invalid");i1+=`; Path=${r1.path}`}if(r1.expires){if(typeof r1.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i1+=`; Expires=${r1.expires.toUTCString()}`}if(r1.httpOnly&&(i1+="; HttpOnly"),r1.secure&&(i1+="; Secure"),r1.sameSite)switch(typeof r1.sameSite=="string"?r1.sameSite.toLowerCase():r1.sameSite){case!0:i1+="; SameSite=Strict";break;case"lax":i1+="; SameSite=Lax";break;case"strict":i1+="; SameSite=Strict";break;case"none":i1+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i1},cookie={create(e1,_g,t1,r1){let n1=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t1&&(n1.expires=new Date,n1.expires.setTime(n1.expires.getTime()+t1*60*1e3)),r1&&(n1.domain=r1),document.cookie=serializeCookie(e1,encodeURIComponent(_g),n1)},read(e1){const _g=`${e1}=`,t1=document.cookie.split(";");for(let r1=0;r1<t1.length;r1++){let n1=t1[r1];for(;n1.charAt(0)===" ";)n1=n1.substring(1,n1.length);if(n1.indexOf(_g)===0)return n1.substring(_g.length,n1.length)}return null},remove(e1){this.create(e1,"",-1)}};var cookie$1={name:"cookie",lookup(e1){let{lookupCookie:_g}=e1;if(_g&&typeof document<"u")return cookie.read(_g)||void 0},cacheUserLanguage(e1,_g){let{lookupCookie:t1,cookieMinutes:r1,cookieDomain:n1,cookieOptions:i1}=_g;t1&&typeof document<"u"&&cookie.create(t1,e1,r1,n1,i1)}},querystring={name:"querystring",lookup(e1){var r1;let{lookupQuerystring:_g}=e1,t1;if(typeof window<"u"){let{search:n1}=window.location;!window.location.search&&((r1=window.location.hash)==null?void 0:r1.indexOf("?"))>-1&&(n1=window.location.hash.substring(window.location.hash.indexOf("?")));const o1=n1.substring(1).split("&");for(let a1=0;a1<o1.length;a1++){const u1=o1[a1].indexOf("=");u1>0&&o1[a1].substring(0,u1)===_g&&(t1=o1[a1].substring(u1+1))}}return t1}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{hasLocalStorageSupport=window!=="undefined"&&window.localStorage!==null;const e1="i18next.translate.boo";window.localStorage.setItem(e1,"foo"),window.localStorage.removeItem(e1)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup(e1){let{lookupLocalStorage:_g}=e1;if(_g&&localStorageAvailable())return window.localStorage.getItem(_g)||void 0},cacheUserLanguage(e1,_g){let{lookupLocalStorage:t1}=_g;t1&&localStorageAvailable()&&window.localStorage.setItem(t1,e1)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{hasSessionStorageSupport=window!=="undefined"&&window.sessionStorage!==null;const e1="i18next.translate.boo";window.sessionStorage.setItem(e1,"foo"),window.sessionStorage.removeItem(e1)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup(e1){let{lookupSessionStorage:_g}=e1;if(_g&&sessionStorageAvailable())return window.sessionStorage.getItem(_g)||void 0},cacheUserLanguage(e1,_g){let{lookupSessionStorage:t1}=_g;t1&&sessionStorageAvailable()&&window.sessionStorage.setItem(t1,e1)}},navigator$1={name:"navigator",lookup(e1){const _g=[];if(typeof navigator<"u"){const{languages:t1,userLanguage:r1,language:n1}=navigator;if(t1)for(let i1=0;i1<t1.length;i1++)_g.push(t1[i1]);r1&&_g.push(r1),n1&&_g.push(n1)}return _g.length>0?_g:void 0}},htmlTag={name:"htmlTag",lookup(e1){let{htmlTag:_g}=e1,t1;const r1=_g||(typeof document<"u"?document.documentElement:null);return r1&&typeof r1.getAttribute=="function"&&(t1=r1.getAttribute("lang")),t1}},path={name:"path",lookup(e1){var n1;let{lookupFromPathIndex:_g}=e1;if(typeof window>"u")return;const t1=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t1)?(n1=t1[typeof _g=="number"?_g:0])==null?void 0:n1.replace("/",""):void 0}},subdomain={name:"subdomain",lookup(e1){var n1,i1;let{lookupFromSubdomainIndex:_g}=e1;const t1=typeof _g=="number"?_g+1:1,r1=typeof window<"u"&&((i1=(n1=window.location)==null?void 0:n1.hostname)==null?void 0:i1.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r1)return r1[t1]}};function getDefaults(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e1=>e1}}let Browser$1=class{constructor(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(_g,t1)}init(_g){let t1=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r1=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=_g||{languageUtils:{}},this.options=defaults(t1,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n1=>n1.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r1,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain)}addDetector(_g){return this.detectors[_g.name]=_g,this}detect(_g){_g||(_g=this.options.order);let t1=[];return _g.forEach(r1=>{if(this.detectors[r1]){let n1=this.detectors[r1].lookup(this.options);n1&&typeof n1=="string"&&(n1=[n1]),n1&&(t1=t1.concat(n1))}}),t1=t1.map(r1=>this.options.convertDetectedLanguage(r1)),this.services.languageUtils.getBestMatchFromCodes?t1:t1.length>0?t1[0]:null}cacheUserLanguage(_g,t1){t1||(t1=this.options.caches),t1&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(_g)>-1||t1.forEach(r1=>{this.detectors[r1]&&this.detectors[r1].cacheUserLanguage(_g,this.options)}))}};Browser$1.type="languageDetector";const translation$1={"Image load":"Click here or drag an image file",Pan:"Pan","Reset Zoom/Pan":"Reset Zoom/Pan","Decrease Brush Size":"Decrease Brush Size","Increase Brush Size":"Increase Brush Size","View Original Image":"View Original Image",Undo:"Undo",Redo:"Redo","Copy Result":"Copy Result","Paste Image":"Paste Image","Trigger Manually Inpainting":"Trigger Manually Inpainting","Toggle Hotkeys Dialog":"Toggle Hotkeys Dialog","Toggle Settings Dialog":"Toggle Settings Dialog","Toggle File Manager":"Toggle File Manager",Broche:"Pincel",Cropper:"Cropper","Adjust Mask":"Adjust Mask",Expand:"Expand",Shrink:"Shrink",Reverse:"Reverse",Clear:"Clear"},enJSON={translation:translation$1},translation={"Image load":"Click aqui o arrastra una imagen",Pan:"Acercar o alejar zoom","Reset Zoom/Pan":"Resetear Zoom/Pan","Decrease Brush Size":"Disminuir pincel","Increase Brush Size":"Incrementar pincel","View Original Image":"Ver imagen original",Undo:"Deshacer",Redo:"Rehacer","Copy Result":"Copiar resultado","Paste Image":"Pegar imagen","Trigger Manually Inpainting":"Activar Inpainting manualmente","Toggle Hotkeys Dialog":"Activar dialogo de instrucciones de teclas","Toggle Settings Dialog":"Acivar dialogo de parametros","Toggle File Manager":"Activar dialogo de gestor de archivos",Broche:"Brocha",Cropper:"Recortar imagen","Adjust Mask":"Ajustar mascara",Expand:"Expandir",Shrink:"Disminuir",Reverse:"Reversar",Clear:"Borrar"},espJSON={translation},resources={en:{...enJSON},es:{...espJSON}};instance.use(Browser$1).use(initReactI18next).init({resources,fallbackLng:"es",interpolation:{escapeValue:!1}});const queryClient=new QueryClient;client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(z,{defaultTheme:"dark",disableTransitionOnChange:!0,children:jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsx(RefProvider,{children:jsxRuntimeExports.jsx(Home,{})})})})})}));
