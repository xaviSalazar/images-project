var Fd=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var de=(e,t,n)=>(Fd(e,t,"read from private field"),n?n.call(e):t.get(e)),Ve=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},De=(e,t,n,r)=>(Fd(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var lc=(e,t,n,r)=>({set _(i){De(e,t,i,n)},get _(){return de(e,t,r)}}),$t=(e,t,n)=>(Fd(e,t,"access private method"),n);function nT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Mm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var mw={exports:{}},Tf={},gw={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jl=Symbol.for("react.element"),iT=Symbol.for("react.portal"),oT=Symbol.for("react.fragment"),sT=Symbol.for("react.strict_mode"),aT=Symbol.for("react.profiler"),lT=Symbol.for("react.provider"),cT=Symbol.for("react.context"),uT=Symbol.for("react.forward_ref"),fT=Symbol.for("react.suspense"),dT=Symbol.for("react.memo"),hT=Symbol.for("react.lazy"),Bv=Symbol.iterator;function pT(e){return e===null||typeof e!="object"?null:(e=Bv&&e[Bv]||e["@@iterator"],typeof e=="function"?e:null)}var vw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yw=Object.assign,ww={};function Zs(e,t,n){this.props=e,this.context=t,this.refs=ww,this.updater=n||vw}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bw(){}bw.prototype=Zs.prototype;function Dm(e,t,n){this.props=e,this.context=t,this.refs=ww,this.updater=n||vw}var Nm=Dm.prototype=new bw;Nm.constructor=Dm;yw(Nm,Zs.prototype);Nm.isPureReactComponent=!0;var zv=Array.isArray,xw=Object.prototype.hasOwnProperty,Fm={current:null},Sw={key:!0,ref:!0,__self:!0,__source:!0};function _w(e,t,n){var r,i={},o=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(o=""+t.key),t)xw.call(t,r)&&!Sw.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),f=0;f<l;f++)a[f]=arguments[f+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:jl,type:e,key:o,ref:h,props:i,_owner:Fm.current}}function mT(e,t){return{$$typeof:jl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lm(e){return typeof e=="object"&&e!==null&&e.$$typeof===jl}function gT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uv=/\/+/g;function Ld(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gT(""+e.key):t.toString(36)}function Wc(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(o){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case jl:case iT:h=!0}}if(h)return h=e,i=i(h),e=r===""?"."+Ld(h,0):r,zv(i)?(n="",e!=null&&(n=e.replace(Uv,"$&/")+"/"),Wc(i,t,n,"",function(f){return f})):i!=null&&(Lm(i)&&(i=mT(i,n+(!i.key||h&&h.key===i.key?"":(""+i.key).replace(Uv,"$&/")+"/")+e)),t.push(i)),1;if(h=0,r=r===""?".":r+":",zv(e))for(var l=0;l<e.length;l++){o=e[l];var a=r+Ld(o,l);h+=Wc(o,t,n,a,i)}else if(a=pT(e),typeof a=="function")for(e=a.call(e),l=0;!(o=e.next()).done;)o=o.value,a=r+Ld(o,l++),h+=Wc(o,t,n,a,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function cc(e,t,n){if(e==null)return e;var r=[],i=0;return Wc(e,r,"","",function(o){return t.call(n,o,i++)}),r}function vT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gt={current:null},Yc={transition:null},yT={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Yc,ReactCurrentOwner:Fm};function Cw(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:cc,forEach:function(e,t,n){cc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cc(e,function(){t++}),t},toArray:function(e){return cc(e,function(t){return t})||[]},only:function(e){if(!Lm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=Zs;Fe.Fragment=oT;Fe.Profiler=aT;Fe.PureComponent=Dm;Fe.StrictMode=sT;Fe.Suspense=fT;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yT;Fe.act=Cw;Fe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=yw({},e.props),i=e.key,o=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,h=Fm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)xw.call(t,a)&&!Sw.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var f=0;f<a;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:jl,type:e.type,key:i,ref:o,props:r,_owner:h}};Fe.createContext=function(e){return e={$$typeof:cT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lT,_context:e},e.Consumer=e};Fe.createElement=_w;Fe.createFactory=function(e){var t=_w.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:uT,render:e}};Fe.isValidElement=Lm;Fe.lazy=function(e){return{$$typeof:hT,_payload:{_status:-1,_result:e},_init:vT}};Fe.memo=function(e,t){return{$$typeof:dT,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=Yc.transition;Yc.transition={};try{e()}finally{Yc.transition=t}};Fe.unstable_act=Cw;Fe.useCallback=function(e,t){return Gt.current.useCallback(e,t)};Fe.useContext=function(e){return Gt.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return Gt.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return Gt.current.useEffect(e,t)};Fe.useId=function(){return Gt.current.useId()};Fe.useImperativeHandle=function(e,t,n){return Gt.current.useImperativeHandle(e,t,n)};Fe.useInsertionEffect=function(e,t){return Gt.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return Gt.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return Gt.current.useMemo(e,t)};Fe.useReducer=function(e,t,n){return Gt.current.useReducer(e,t,n)};Fe.useRef=function(e){return Gt.current.useRef(e)};Fe.useState=function(e){return Gt.current.useState(e)};Fe.useSyncExternalStore=function(e,t,n){return Gt.current.useSyncExternalStore(e,t,n)};Fe.useTransition=function(){return Gt.current.useTransition()};Fe.version="18.3.1";gw.exports=Fe;var x=gw.exports;const ke=Mm(x),wT=nT({__proto__:null,default:ke},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT=x,xT=Symbol.for("react.element"),ST=Symbol.for("react.fragment"),_T=Object.prototype.hasOwnProperty,CT=bT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ET={key:!0,ref:!0,__self:!0,__source:!0};function Ew(e,t,n){var r,i={},o=null,h=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)_T.call(t,r)&&!ET.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:xT,type:e,key:o,ref:h,props:i,_owner:CT.current}}Tf.Fragment=ST;Tf.jsx=Ew;Tf.jsxs=Ew;mw.exports=Tf;var T=mw.exports,Yh={},Tw={exports:{}},xn={},kw={exports:{}},Pw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,k){var R=V.length;V.push(k);e:for(;0<R;){var j=R-1>>>1,A=V[j];if(0<i(A,k))V[j]=k,V[R]=A,R=j;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var k=V[0],R=V.pop();if(R!==k){V[0]=R;e:for(var j=0,A=V.length,W=A>>>1;j<W;){var L=2*(j+1)-1,$=V[L],H=L+1,Y=V[H];if(0>i($,R))H<A&&0>i(Y,$)?(V[j]=Y,V[H]=R,j=H):(V[j]=$,V[L]=R,j=L);else if(H<A&&0>i(Y,R))V[j]=Y,V[H]=R,j=H;else break e}}return k}function i(V,k){var R=V.sortIndex-k.sortIndex;return R!==0?R:V.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var h=Date,l=h.now();e.unstable_now=function(){return h.now()-l}}var a=[],f=[],u=1,s=null,c=3,d=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var k=n(f);k!==null;){if(k.callback===null)r(f);else if(k.startTime<=V)r(f),k.sortIndex=k.expirationTime,t(a,k);else break;k=n(f)}}function b(V){if(g=!1,w(V),!p)if(n(a)!==null)p=!0,O(S);else{var k=n(f);k!==null&&M(b,k.startTime-V)}}function S(V,k){p=!1,g&&(g=!1,v(C),C=-1),d=!0;var R=c;try{for(w(k),s=n(a);s!==null&&(!(s.expirationTime>k)||V&&!B());){var j=s.callback;if(typeof j=="function"){s.callback=null,c=s.priorityLevel;var A=j(s.expirationTime<=k);k=e.unstable_now(),typeof A=="function"?s.callback=A:s===n(a)&&r(a),w(k)}else r(a);s=n(a)}if(s!==null)var W=!0;else{var L=n(f);L!==null&&M(b,L.startTime-k),W=!1}return W}finally{s=null,c=R,d=!1}}var _=!1,E=null,C=-1,P=5,N=-1;function B(){return!(e.unstable_now()-N<P)}function I(){if(E!==null){var V=e.unstable_now();N=V;var k=!0;try{k=E(!0,V)}finally{k?U():(_=!1,E=null)}}else _=!1}var U;if(typeof y=="function")U=function(){y(I)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=I,U=function(){F.postMessage(null)}}else U=function(){m(I,0)};function O(V){E=V,_||(_=!0,U())}function M(V,k){C=m(function(){V(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||d||(p=!0,O(S))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(V){switch(c){case 1:case 2:case 3:var k=3;break;default:k=c}var R=c;c=k;try{return V()}finally{c=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,k){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var R=c;c=V;try{return k()}finally{c=R}},e.unstable_scheduleCallback=function(V,k,R){var j=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?j+R:j):R=j,V){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=R+A,V={id:u++,callback:k,priorityLevel:V,startTime:R,expirationTime:A,sortIndex:-1},R>j?(V.sortIndex=R,t(f,V),n(a)===null&&V===n(f)&&(g?(v(C),C=-1):g=!0,M(b,R-j))):(V.sortIndex=A,t(a,V),p||d||(p=!0,O(S))),V},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(V){var k=c;return function(){var R=c;c=k;try{return V.apply(this,arguments)}finally{c=R}}}})(Pw);kw.exports=Pw;var TT=kw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT=x,yn=TT;function he(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ow=new Set,nl={};function Do(e,t){As(e,t),As(e+"Capture",t)}function As(e,t){for(nl[e]=t,e=0;e<t.length;e++)Ow.add(t[e])}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=Object.prototype.hasOwnProperty,PT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},Hv={};function OT(e){return Xh.call(Hv,e)?!0:Xh.call(Vv,e)?!1:PT.test(e)?Hv[e]=!0:(Vv[e]=!0,!1)}function $T(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AT(e,t,n,r){if(t===null||typeof t>"u"||$T(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Kt(e,t,n,r,i,o,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=h}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Tt[e]=new Kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Tt[t]=new Kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Tt[e]=new Kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Tt[e]=new Kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Tt[e]=new Kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Tt[e]=new Kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Tt[e]=new Kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Tt[e]=new Kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Tt[e]=new Kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Im=/[\-:]([a-z])/g;function jm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Im,jm);Tt[t]=new Kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Im,jm);Tt[t]=new Kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Im,jm);Tt[t]=new Kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Tt[e]=new Kt(e,1,!1,e.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Tt[e]=new Kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bm(e,t,n,r){var i=Tt.hasOwnProperty(t)?Tt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AT(t,n,i,r)&&(n=null),r||i===null?OT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ei=kT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uc=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Jo=Symbol.for("react.fragment"),zm=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),$w=Symbol.for("react.provider"),Aw=Symbol.for("react.context"),Um=Symbol.for("react.forward_ref"),Kh=Symbol.for("react.suspense"),qh=Symbol.for("react.suspense_list"),Vm=Symbol.for("react.memo"),pi=Symbol.for("react.lazy"),Rw=Symbol.for("react.offscreen"),Wv=Symbol.iterator;function da(e){return e===null||typeof e!="object"?null:(e=Wv&&e[Wv]||e["@@iterator"],typeof e=="function"?e:null)}var ot=Object.assign,Id;function Aa(e){if(Id===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Id=t&&t[1]||""}return`
`+Id+e}var jd=!1;function Bd(e,t){if(!e||jd)return"";jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),h=i.length-1,l=o.length-1;1<=h&&0<=l&&i[h]!==o[l];)l--;for(;1<=h&&0<=l;h--,l--)if(i[h]!==o[l]){if(h!==1||l!==1)do if(h--,l--,0>l||i[h]!==o[l]){var a=`
`+i[h].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=h&&0<=l);break}}}finally{jd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Aa(e):""}function RT(e){switch(e.tag){case 5:return Aa(e.type);case 16:return Aa("Lazy");case 13:return Aa("Suspense");case 19:return Aa("SuspenseList");case 0:case 2:case 15:return e=Bd(e.type,!1),e;case 11:return e=Bd(e.type.render,!1),e;case 1:return e=Bd(e.type,!0),e;default:return""}}function Zh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jo:return"Fragment";case Qo:return"Portal";case Gh:return"Profiler";case zm:return"StrictMode";case Kh:return"Suspense";case qh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Aw:return(e.displayName||"Context")+".Consumer";case $w:return(e._context.displayName||"Context")+".Provider";case Um:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vm:return t=e.displayName||null,t!==null?t:Zh(e.type)||"Memo";case pi:t=e._payload,e=e._init;try{return Zh(e(t))}catch{}}return null}function MT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zh(t);case 8:return t===zm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ii(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DT(e){var t=Mw(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){r=""+h,o.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fc(e){e._valueTracker||(e._valueTracker=DT(e))}function Dw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Mw(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qh(e,t){var n=t.checked;return ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yv(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ii(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nw(e,t){t=t.checked,t!=null&&Bm(e,"checked",t,!1)}function Jh(e,t){Nw(e,t);var n=Ii(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ep(e,t.type,n):t.hasOwnProperty("defaultValue")&&ep(e,t.type,Ii(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ep(e,t,n){(t!=="number"||gu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ra=Array.isArray;function ds(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ii(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function tp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(he(91));return ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(he(92));if(Ra(n)){if(1<n.length)throw Error(he(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ii(n)}}function Fw(e,t){var n=Ii(t.value),r=Ii(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Kv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var dc,Iw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(dc=dc||document.createElement("div"),dc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NT=["Webkit","ms","Moz","O"];Object.keys(za).forEach(function(e){NT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),za[t]=za[e]})});function jw(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||za.hasOwnProperty(e)&&za[e]?(""+t).trim():t+"px"}function Bw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jw(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var FT=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rp(e,t){if(t){if(FT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(he(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(he(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(he(61))}if(t.style!=null&&typeof t.style!="object")throw Error(he(62))}}function ip(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var op=null;function Hm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sp=null,hs=null,ps=null;function qv(e){if(e=Ul(e)){if(typeof sp!="function")throw Error(he(280));var t=e.stateNode;t&&(t=Af(t),sp(e.stateNode,e.type,t))}}function zw(e){hs?ps?ps.push(e):ps=[e]:hs=e}function Uw(){if(hs){var e=hs,t=ps;if(ps=hs=null,qv(e),t)for(e=0;e<t.length;e++)qv(t[e])}}function Vw(e,t){return e(t)}function Hw(){}var zd=!1;function Ww(e,t,n){if(zd)return e(t,n);zd=!0;try{return Vw(e,t,n)}finally{zd=!1,(hs!==null||ps!==null)&&(Hw(),Uw())}}function il(e,t){var n=e.stateNode;if(n===null)return null;var r=Af(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(he(231,t,typeof n));return n}var ap=!1;if(Yr)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){ap=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{ap=!1}function LT(e,t,n,r,i,o,h,l,a){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(u){this.onError(u)}}var Ua=!1,vu=null,yu=!1,lp=null,IT={onError:function(e){Ua=!0,vu=e}};function jT(e,t,n,r,i,o,h,l,a){Ua=!1,vu=null,LT.apply(IT,arguments)}function BT(e,t,n,r,i,o,h,l,a){if(jT.apply(this,arguments),Ua){if(Ua){var f=vu;Ua=!1,vu=null}else throw Error(he(198));yu||(yu=!0,lp=f)}}function No(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zv(e){if(No(e)!==e)throw Error(he(188))}function zT(e){var t=e.alternate;if(!t){if(t=No(e),t===null)throw Error(he(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Zv(i),e;if(o===r)return Zv(i),t;o=o.sibling}throw Error(he(188))}if(n.return!==r.return)n=i,r=o;else{for(var h=!1,l=i.child;l;){if(l===n){h=!0,n=i,r=o;break}if(l===r){h=!0,r=i,n=o;break}l=l.sibling}if(!h){for(l=o.child;l;){if(l===n){h=!0,n=o,r=i;break}if(l===r){h=!0,r=o,n=i;break}l=l.sibling}if(!h)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?e:t}function Xw(e){return e=zT(e),e!==null?Gw(e):null}function Gw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gw(e);if(t!==null)return t;e=e.sibling}return null}var Kw=yn.unstable_scheduleCallback,Qv=yn.unstable_cancelCallback,UT=yn.unstable_shouldYield,VT=yn.unstable_requestPaint,ft=yn.unstable_now,HT=yn.unstable_getCurrentPriorityLevel,Wm=yn.unstable_ImmediatePriority,qw=yn.unstable_UserBlockingPriority,wu=yn.unstable_NormalPriority,WT=yn.unstable_LowPriority,Zw=yn.unstable_IdlePriority,kf=null,wr=null;function YT(e){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(kf,e,void 0,(e.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:KT,XT=Math.log,GT=Math.LN2;function KT(e){return e>>>=0,e===0?32:31-(XT(e)/GT|0)|0}var hc=64,pc=4194304;function Ma(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,h=n&268435455;if(h!==0){var l=h&~i;l!==0?r=Ma(l):(o&=h,o!==0&&(r=Ma(o)))}else h=n&~i,h!==0?r=Ma(h):o!==0&&(r=Ma(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zn(t),i=1<<n,r|=e[n],t&=~i;return r}function qT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZT(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var h=31-Zn(o),l=1<<h,a=i[h];a===-1?(!(l&n)||l&r)&&(i[h]=qT(l,t)):a<=t&&(e.expiredLanes|=l),o&=~l}}function cp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qw(){var e=hc;return hc<<=1,!(hc&4194240)&&(hc=64),e}function Ud(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zn(t),e[t]=n}function QT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Zn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Ym(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var We=0;function Jw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eb,Xm,tb,nb,rb,up=!1,mc=[],Oi=null,$i=null,Ai=null,ol=new Map,sl=new Map,gi=[],JT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jv(e,t){switch(e){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":ol.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function pa(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Ul(t),t!==null&&Xm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ek(e,t,n,r,i){switch(t){case"focusin":return Oi=pa(Oi,e,t,n,r,i),!0;case"dragenter":return $i=pa($i,e,t,n,r,i),!0;case"mouseover":return Ai=pa(Ai,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ol.set(o,pa(ol.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,sl.set(o,pa(sl.get(o)||null,e,t,n,r,i)),!0}return!1}function ib(e){var t=lo(e.target);if(t!==null){var n=No(t);if(n!==null){if(t=n.tag,t===13){if(t=Yw(n),t!==null){e.blockedOn=t,rb(e.priority,function(){tb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);op=r,n.target.dispatchEvent(r),op=null}else return t=Ul(n),t!==null&&Xm(t),e.blockedOn=n,!1;t.shift()}return!0}function e0(e,t,n){Xc(e)&&n.delete(t)}function tk(){up=!1,Oi!==null&&Xc(Oi)&&(Oi=null),$i!==null&&Xc($i)&&($i=null),Ai!==null&&Xc(Ai)&&(Ai=null),ol.forEach(e0),sl.forEach(e0)}function ma(e,t){e.blockedOn===t&&(e.blockedOn=null,up||(up=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,tk)))}function al(e){function t(i){return ma(i,e)}if(0<mc.length){ma(mc[0],e);for(var n=1;n<mc.length;n++){var r=mc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Oi!==null&&ma(Oi,e),$i!==null&&ma($i,e),Ai!==null&&ma(Ai,e),ol.forEach(t),sl.forEach(t),n=0;n<gi.length;n++)r=gi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<gi.length&&(n=gi[0],n.blockedOn===null);)ib(n),n.blockedOn===null&&gi.shift()}var ms=ei.ReactCurrentBatchConfig,xu=!0;function nk(e,t,n,r){var i=We,o=ms.transition;ms.transition=null;try{We=1,Gm(e,t,n,r)}finally{We=i,ms.transition=o}}function rk(e,t,n,r){var i=We,o=ms.transition;ms.transition=null;try{We=4,Gm(e,t,n,r)}finally{We=i,ms.transition=o}}function Gm(e,t,n,r){if(xu){var i=fp(e,t,n,r);if(i===null)Qd(e,t,r,Su,n),Jv(e,r);else if(ek(i,e,t,n,r))r.stopPropagation();else if(Jv(e,r),t&4&&-1<JT.indexOf(e)){for(;i!==null;){var o=Ul(i);if(o!==null&&eb(o),o=fp(e,t,n,r),o===null&&Qd(e,t,r,Su,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Qd(e,t,r,null,n)}}var Su=null;function fp(e,t,n,r){if(Su=null,e=Hm(r),e=lo(e),e!==null)if(t=No(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Yw(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Su=e,null}function ob(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HT()){case Wm:return 1;case qw:return 4;case wu:case WT:return 16;case Zw:return 536870912;default:return 16}default:return 16}}var _i=null,Km=null,Gc=null;function sb(){if(Gc)return Gc;var e,t=Km,n=t.length,r,i="value"in _i?_i.value:_i.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var h=n-e;for(r=1;r<=h&&t[n-r]===i[o-r];r++);return Gc=i.slice(e,1<r?1-r:void 0)}function Kc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gc(){return!0}function t0(){return!1}function Sn(e){function t(n,r,i,o,h){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=h,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gc:t0,this.isPropagationStopped=t0,this}return ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),t}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qm=Sn(Qs),zl=ot({},Qs,{view:0,detail:0}),ik=Sn(zl),Vd,Hd,ga,Pf=ot({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ga&&(ga&&e.type==="mousemove"?(Vd=e.screenX-ga.screenX,Hd=e.screenY-ga.screenY):Hd=Vd=0,ga=e),Vd)},movementY:function(e){return"movementY"in e?e.movementY:Hd}}),n0=Sn(Pf),ok=ot({},Pf,{dataTransfer:0}),sk=Sn(ok),ak=ot({},zl,{relatedTarget:0}),Wd=Sn(ak),lk=ot({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),ck=Sn(lk),uk=ot({},Qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fk=Sn(uk),dk=ot({},Qs,{data:0}),r0=Sn(dk),hk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mk[e])?!!t[e]:!1}function Zm(){return gk}var vk=ot({},zl,{key:function(e){if(e.key){var t=hk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zm,charCode:function(e){return e.type==="keypress"?Kc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yk=Sn(vk),wk=ot({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i0=Sn(wk),bk=ot({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zm}),xk=Sn(bk),Sk=ot({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),_k=Sn(Sk),Ck=ot({},Pf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ek=Sn(Ck),Tk=[9,13,27,32],Qm=Yr&&"CompositionEvent"in window,Va=null;Yr&&"documentMode"in document&&(Va=document.documentMode);var kk=Yr&&"TextEvent"in window&&!Va,ab=Yr&&(!Qm||Va&&8<Va&&11>=Va),o0=" ",s0=!1;function lb(e,t){switch(e){case"keyup":return Tk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var es=!1;function Pk(e,t){switch(e){case"compositionend":return cb(t);case"keypress":return t.which!==32?null:(s0=!0,o0);case"textInput":return e=t.data,e===o0&&s0?null:e;default:return null}}function Ok(e,t){if(es)return e==="compositionend"||!Qm&&lb(e,t)?(e=sb(),Gc=Km=_i=null,es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ab&&t.locale!=="ko"?null:t.data;default:return null}}var $k={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$k[e.type]:t==="textarea"}function ub(e,t,n,r){zw(r),t=_u(t,"onChange"),0<t.length&&(n=new qm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ha=null,ll=null;function Ak(e){xb(e,0)}function Of(e){var t=rs(e);if(Dw(t))return e}function Rk(e,t){if(e==="change")return t}var fb=!1;if(Yr){var Yd;if(Yr){var Xd="oninput"in document;if(!Xd){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),Xd=typeof l0.oninput=="function"}Yd=Xd}else Yd=!1;fb=Yd&&(!document.documentMode||9<document.documentMode)}function c0(){Ha&&(Ha.detachEvent("onpropertychange",db),ll=Ha=null)}function db(e){if(e.propertyName==="value"&&Of(ll)){var t=[];ub(t,ll,e,Hm(e)),Ww(Ak,t)}}function Mk(e,t,n){e==="focusin"?(c0(),Ha=t,ll=n,Ha.attachEvent("onpropertychange",db)):e==="focusout"&&c0()}function Dk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Of(ll)}function Nk(e,t){if(e==="click")return Of(t)}function Fk(e,t){if(e==="input"||e==="change")return Of(t)}function Lk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var er=typeof Object.is=="function"?Object.is:Lk;function cl(e,t){if(er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xh.call(t,i)||!er(e[i],t[i]))return!1}return!0}function u0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function f0(e,t){var n=u0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u0(n)}}function hb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pb(){for(var e=window,t=gu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gu(e.document)}return t}function Jm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ik(e){var t=pb(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hb(n.ownerDocument.documentElement,n)){if(r!==null&&Jm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=f0(n,o);var h=f0(n,r);i&&h&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jk=Yr&&"documentMode"in document&&11>=document.documentMode,ts=null,dp=null,Wa=null,hp=!1;function d0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hp||ts==null||ts!==gu(r)||(r=ts,"selectionStart"in r&&Jm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wa&&cl(Wa,r)||(Wa=r,r=_u(dp,"onSelect"),0<r.length&&(t=new qm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ts)))}function vc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ns={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},Gd={},mb={};Yr&&(mb=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function $f(e){if(Gd[e])return Gd[e];if(!ns[e])return e;var t=ns[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mb)return Gd[e]=t[n];return e}var gb=$f("animationend"),vb=$f("animationiteration"),yb=$f("animationstart"),wb=$f("transitionend"),bb=new Map,h0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hi(e,t){bb.set(e,t),Do(t,[e])}for(var Kd=0;Kd<h0.length;Kd++){var qd=h0[Kd],Bk=qd.toLowerCase(),zk=qd[0].toUpperCase()+qd.slice(1);Hi(Bk,"on"+zk)}Hi(gb,"onAnimationEnd");Hi(vb,"onAnimationIteration");Hi(yb,"onAnimationStart");Hi("dblclick","onDoubleClick");Hi("focusin","onFocus");Hi("focusout","onBlur");Hi(wb,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Do("onBeforeInput",["compositionend","keypress","textInput","paste"]);Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function p0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,BT(r,t,void 0,e),e.currentTarget=null}function xb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var h=r.length-1;0<=h;h--){var l=r[h],a=l.instance,f=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;p0(i,l,f),o=a}else for(h=0;h<r.length;h++){if(l=r[h],a=l.instance,f=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;p0(i,l,f),o=a}}}if(yu)throw e=lp,yu=!1,lp=null,e}function qe(e,t){var n=t[yp];n===void 0&&(n=t[yp]=new Set);var r=e+"__bubble";n.has(r)||(Sb(t,e,2,!1),n.add(r))}function Zd(e,t,n){var r=0;t&&(r|=4),Sb(n,e,r,t)}var yc="_reactListening"+Math.random().toString(36).slice(2);function ul(e){if(!e[yc]){e[yc]=!0,Ow.forEach(function(n){n!=="selectionchange"&&(Uk.has(n)||Zd(n,!1,e),Zd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yc]||(t[yc]=!0,Zd("selectionchange",!1,t))}}function Sb(e,t,n,r){switch(ob(t)){case 1:var i=nk;break;case 4:i=rk;break;default:i=Gm}n=i.bind(null,t,n,e),i=void 0,!ap||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Qd(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(h===4)for(h=r.return;h!==null;){var a=h.tag;if((a===3||a===4)&&(a=h.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;h=h.return}for(;l!==null;){if(h=lo(l),h===null)return;if(a=h.tag,a===5||a===6){r=o=h;continue e}l=l.parentNode}}r=r.return}Ww(function(){var f=o,u=Hm(n),s=[];e:{var c=bb.get(e);if(c!==void 0){var d=qm,p=e;switch(e){case"keypress":if(Kc(n)===0)break e;case"keydown":case"keyup":d=yk;break;case"focusin":p="focus",d=Wd;break;case"focusout":p="blur",d=Wd;break;case"beforeblur":case"afterblur":d=Wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=sk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=xk;break;case gb:case vb:case yb:d=ck;break;case wb:d=_k;break;case"scroll":d=ik;break;case"wheel":d=Ek;break;case"copy":case"cut":case"paste":d=fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=i0}var g=(t&4)!==0,m=!g&&e==="scroll",v=g?c!==null?c+"Capture":null:c;g=[];for(var y=f,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,v!==null&&(b=il(y,v),b!=null&&g.push(fl(y,b,w)))),m)break;y=y.return}0<g.length&&(c=new d(c,p,null,n,u),s.push({event:c,listeners:g}))}}if(!(t&7)){e:{if(c=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",c&&n!==op&&(p=n.relatedTarget||n.fromElement)&&(lo(p)||p[Xr]))break e;if((d||c)&&(c=u.window===u?u:(c=u.ownerDocument)?c.defaultView||c.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=f,p=p?lo(p):null,p!==null&&(m=No(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=f),d!==p)){if(g=n0,b="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=i0,b="onPointerLeave",v="onPointerEnter",y="pointer"),m=d==null?c:rs(d),w=p==null?c:rs(p),c=new g(b,y+"leave",d,n,u),c.target=m,c.relatedTarget=w,b=null,lo(u)===f&&(g=new g(v,y+"enter",p,n,u),g.target=w,g.relatedTarget=m,b=g),m=b,d&&p)t:{for(g=d,v=p,y=0,w=g;w;w=Bo(w))y++;for(w=0,b=v;b;b=Bo(b))w++;for(;0<y-w;)g=Bo(g),y--;for(;0<w-y;)v=Bo(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Bo(g),v=Bo(v)}g=null}else g=null;d!==null&&m0(s,c,d,g,!1),p!==null&&m!==null&&m0(s,m,p,g,!0)}}e:{if(c=f?rs(f):window,d=c.nodeName&&c.nodeName.toLowerCase(),d==="select"||d==="input"&&c.type==="file")var S=Rk;else if(a0(c))if(fb)S=Fk;else{S=Dk;var _=Mk}else(d=c.nodeName)&&d.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(S=Nk);if(S&&(S=S(e,f))){ub(s,S,n,u);break e}_&&_(e,c,f),e==="focusout"&&(_=c._wrapperState)&&_.controlled&&c.type==="number"&&ep(c,"number",c.value)}switch(_=f?rs(f):window,e){case"focusin":(a0(_)||_.contentEditable==="true")&&(ts=_,dp=f,Wa=null);break;case"focusout":Wa=dp=ts=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,d0(s,n,u);break;case"selectionchange":if(jk)break;case"keydown":case"keyup":d0(s,n,u)}var E;if(Qm)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else es?lb(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(ab&&n.locale!=="ko"&&(es||C!=="onCompositionStart"?C==="onCompositionEnd"&&es&&(E=sb()):(_i=u,Km="value"in _i?_i.value:_i.textContent,es=!0)),_=_u(f,C),0<_.length&&(C=new r0(C,e,null,n,u),s.push({event:C,listeners:_}),E?C.data=E:(E=cb(n),E!==null&&(C.data=E)))),(E=kk?Pk(e,n):Ok(e,n))&&(f=_u(f,"onBeforeInput"),0<f.length&&(u=new r0("onBeforeInput","beforeinput",null,n,u),s.push({event:u,listeners:f}),u.data=E))}xb(s,t)})}function fl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _u(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=il(e,n),o!=null&&r.unshift(fl(e,o,i)),o=il(e,t),o!=null&&r.push(fl(e,o,i))),e=e.return}return r}function Bo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function m0(e,t,n,r,i){for(var o=t._reactName,h=[];n!==null&&n!==r;){var l=n,a=l.alternate,f=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&f!==null&&(l=f,i?(a=il(n,o),a!=null&&h.unshift(fl(n,a,l))):i||(a=il(n,o),a!=null&&h.push(fl(n,a,l)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Vk=/\r\n?/g,Hk=/\u0000|\uFFFD/g;function g0(e){return(typeof e=="string"?e:""+e).replace(Vk,`
`).replace(Hk,"")}function wc(e,t,n){if(t=g0(t),g0(e)!==t&&n)throw Error(he(425))}function Cu(){}var pp=null,mp=null;function gp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vp=typeof setTimeout=="function"?setTimeout:void 0,Wk=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,Yk=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(e){return v0.resolve(null).then(e).catch(Xk)}:vp;function Xk(e){setTimeout(function(){throw e})}function Jd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),al(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);al(t)}function Ri(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function y0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Js=Math.random().toString(36).slice(2),ur="__reactFiber$"+Js,dl="__reactProps$"+Js,Xr="__reactContainer$"+Js,yp="__reactEvents$"+Js,Gk="__reactListeners$"+Js,Kk="__reactHandles$"+Js;function lo(e){var t=e[ur];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xr]||n[ur]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=y0(e);e!==null;){if(n=e[ur])return n;e=y0(e)}return t}e=n,n=e.parentNode}return null}function Ul(e){return e=e[ur]||e[Xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(he(33))}function Af(e){return e[dl]||null}var wp=[],is=-1;function Wi(e){return{current:e}}function Qe(e){0>is||(e.current=wp[is],wp[is]=null,is--)}function Ge(e,t){is++,wp[is]=e.current,e.current=t}var ji={},Nt=Wi(ji),rn=Wi(!1),So=ji;function Rs(e,t){var n=e.type.contextTypes;if(!n)return ji;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function on(e){return e=e.childContextTypes,e!=null}function Eu(){Qe(rn),Qe(Nt)}function w0(e,t,n){if(Nt.current!==ji)throw Error(he(168));Ge(Nt,t),Ge(rn,n)}function _b(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(he(108,MT(e)||"Unknown",i));return ot({},n,r)}function Tu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,So=Nt.current,Ge(Nt,e),Ge(rn,rn.current),!0}function b0(e,t,n){var r=e.stateNode;if(!r)throw Error(he(169));n?(e=_b(e,t,So),r.__reactInternalMemoizedMergedChildContext=e,Qe(rn),Qe(Nt),Ge(Nt,e)):Qe(rn),Ge(rn,n)}var Fr=null,Rf=!1,eh=!1;function Cb(e){Fr===null?Fr=[e]:Fr.push(e)}function qk(e){Rf=!0,Cb(e)}function Yi(){if(!eh&&Fr!==null){eh=!0;var e=0,t=We;try{var n=Fr;for(We=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Fr=null,Rf=!1}catch(i){throw Fr!==null&&(Fr=Fr.slice(e+1)),Kw(Wm,Yi),i}finally{We=t,eh=!1}}return null}var os=[],ss=0,ku=null,Pu=0,Tn=[],kn=0,_o=null,Ir=1,jr="";function Ji(e,t){os[ss++]=Pu,os[ss++]=ku,ku=e,Pu=t}function Eb(e,t,n){Tn[kn++]=Ir,Tn[kn++]=jr,Tn[kn++]=_o,_o=e;var r=Ir;e=jr;var i=32-Zn(r)-1;r&=~(1<<i),n+=1;var o=32-Zn(t)+i;if(30<o){var h=i-i%5;o=(r&(1<<h)-1).toString(32),r>>=h,i-=h,Ir=1<<32-Zn(t)+i|n<<i|r,jr=o+e}else Ir=1<<o|n<<i|r,jr=e}function eg(e){e.return!==null&&(Ji(e,1),Eb(e,1,0))}function tg(e){for(;e===ku;)ku=os[--ss],os[ss]=null,Pu=os[--ss],os[ss]=null;for(;e===_o;)_o=Tn[--kn],Tn[kn]=null,jr=Tn[--kn],Tn[kn]=null,Ir=Tn[--kn],Tn[kn]=null}var gn=null,mn=null,tt=!1,Xn=null;function Tb(e,t){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function x0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gn=e,mn=Ri(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gn=e,mn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_o!==null?{id:Ir,overflow:jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gn=e,mn=null,!0):!1;default:return!1}}function bp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xp(e){if(tt){var t=mn;if(t){var n=t;if(!x0(e,t)){if(bp(e))throw Error(he(418));t=Ri(n.nextSibling);var r=gn;t&&x0(e,t)?Tb(r,n):(e.flags=e.flags&-4097|2,tt=!1,gn=e)}}else{if(bp(e))throw Error(he(418));e.flags=e.flags&-4097|2,tt=!1,gn=e}}}function S0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gn=e}function bc(e){if(e!==gn)return!1;if(!tt)return S0(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gp(e.type,e.memoizedProps)),t&&(t=mn)){if(bp(e))throw kb(),Error(he(418));for(;t;)Tb(e,t),t=Ri(t.nextSibling)}if(S0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(he(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mn=Ri(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mn=null}}else mn=gn?Ri(e.stateNode.nextSibling):null;return!0}function kb(){for(var e=mn;e;)e=Ri(e.nextSibling)}function Ms(){mn=gn=null,tt=!1}function ng(e){Xn===null?Xn=[e]:Xn.push(e)}var Zk=ei.ReactCurrentBatchConfig;function va(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(h){var l=i.refs;h===null?delete l[o]:l[o]=h},t._stringRef=o,t)}if(typeof e!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,e))}return e}function xc(e,t){throw e=Object.prototype.toString.call(t),Error(he(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _0(e){var t=e._init;return t(e._payload)}function Pb(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=Fi(v,y),v.index=0,v.sibling=null,v}function o(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function h(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,w,b){return y===null||y.tag!==6?(y=ah(w,v.mode,b),y.return=v,y):(y=i(y,w),y.return=v,y)}function a(v,y,w,b){var S=w.type;return S===Jo?u(v,y,w.props.children,b,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pi&&_0(S)===y.type)?(b=i(y,w.props),b.ref=va(v,y,w),b.return=v,b):(b=nu(w.type,w.key,w.props,null,v.mode,b),b.ref=va(v,y,w),b.return=v,b)}function f(v,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=lh(w,v.mode,b),y.return=v,y):(y=i(y,w.children||[]),y.return=v,y)}function u(v,y,w,b,S){return y===null||y.tag!==7?(y=bo(w,v.mode,b,S),y.return=v,y):(y=i(y,w),y.return=v,y)}function s(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ah(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case uc:return w=nu(y.type,y.key,y.props,null,v.mode,w),w.ref=va(v,null,y),w.return=v,w;case Qo:return y=lh(y,v.mode,w),y.return=v,y;case pi:var b=y._init;return s(v,b(y._payload),w)}if(Ra(y)||da(y))return y=bo(y,v.mode,w,null),y.return=v,y;xc(v,y)}return null}function c(v,y,w,b){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(v,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case uc:return w.key===S?a(v,y,w,b):null;case Qo:return w.key===S?f(v,y,w,b):null;case pi:return S=w._init,c(v,y,S(w._payload),b)}if(Ra(w)||da(w))return S!==null?null:u(v,y,w,b,null);xc(v,w)}return null}function d(v,y,w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(w)||null,l(y,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case uc:return v=v.get(b.key===null?w:b.key)||null,a(y,v,b,S);case Qo:return v=v.get(b.key===null?w:b.key)||null,f(y,v,b,S);case pi:var _=b._init;return d(v,y,w,_(b._payload),S)}if(Ra(b)||da(b))return v=v.get(w)||null,u(y,v,b,S,null);xc(y,b)}return null}function p(v,y,w,b){for(var S=null,_=null,E=y,C=y=0,P=null;E!==null&&C<w.length;C++){E.index>C?(P=E,E=null):P=E.sibling;var N=c(v,E,w[C],b);if(N===null){E===null&&(E=P);break}e&&E&&N.alternate===null&&t(v,E),y=o(N,y,C),_===null?S=N:_.sibling=N,_=N,E=P}if(C===w.length)return n(v,E),tt&&Ji(v,C),S;if(E===null){for(;C<w.length;C++)E=s(v,w[C],b),E!==null&&(y=o(E,y,C),_===null?S=E:_.sibling=E,_=E);return tt&&Ji(v,C),S}for(E=r(v,E);C<w.length;C++)P=d(E,v,C,w[C],b),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?C:P.key),y=o(P,y,C),_===null?S=P:_.sibling=P,_=P);return e&&E.forEach(function(B){return t(v,B)}),tt&&Ji(v,C),S}function g(v,y,w,b){var S=da(w);if(typeof S!="function")throw Error(he(150));if(w=S.call(w),w==null)throw Error(he(151));for(var _=S=null,E=y,C=y=0,P=null,N=w.next();E!==null&&!N.done;C++,N=w.next()){E.index>C?(P=E,E=null):P=E.sibling;var B=c(v,E,N.value,b);if(B===null){E===null&&(E=P);break}e&&E&&B.alternate===null&&t(v,E),y=o(B,y,C),_===null?S=B:_.sibling=B,_=B,E=P}if(N.done)return n(v,E),tt&&Ji(v,C),S;if(E===null){for(;!N.done;C++,N=w.next())N=s(v,N.value,b),N!==null&&(y=o(N,y,C),_===null?S=N:_.sibling=N,_=N);return tt&&Ji(v,C),S}for(E=r(v,E);!N.done;C++,N=w.next())N=d(E,v,C,N.value,b),N!==null&&(e&&N.alternate!==null&&E.delete(N.key===null?C:N.key),y=o(N,y,C),_===null?S=N:_.sibling=N,_=N);return e&&E.forEach(function(I){return t(v,I)}),tt&&Ji(v,C),S}function m(v,y,w,b){if(typeof w=="object"&&w!==null&&w.type===Jo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case uc:e:{for(var S=w.key,_=y;_!==null;){if(_.key===S){if(S=w.type,S===Jo){if(_.tag===7){n(v,_.sibling),y=i(_,w.props.children),y.return=v,v=y;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pi&&_0(S)===_.type){n(v,_.sibling),y=i(_,w.props),y.ref=va(v,_,w),y.return=v,v=y;break e}n(v,_);break}else t(v,_);_=_.sibling}w.type===Jo?(y=bo(w.props.children,v.mode,b,w.key),y.return=v,v=y):(b=nu(w.type,w.key,w.props,null,v.mode,b),b.ref=va(v,y,w),b.return=v,v=b)}return h(v);case Qo:e:{for(_=w.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=i(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=lh(w,v.mode,b),y.return=v,v=y}return h(v);case pi:return _=w._init,m(v,y,_(w._payload),b)}if(Ra(w))return p(v,y,w,b);if(da(w))return g(v,y,w,b);xc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,w),y.return=v,v=y):(n(v,y),y=ah(w,v.mode,b),y.return=v,v=y),h(v)):n(v,y)}return m}var Ds=Pb(!0),Ob=Pb(!1),Ou=Wi(null),$u=null,as=null,rg=null;function ig(){rg=as=$u=null}function og(e){var t=Ou.current;Qe(Ou),e._currentValue=t}function Sp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gs(e,t){$u=e,rg=as=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nn=!0),e.firstContext=null)}function Dn(e){var t=e._currentValue;if(rg!==e)if(e={context:e,memoizedValue:t,next:null},as===null){if($u===null)throw Error(he(308));as=e,$u.dependencies={lanes:0,firstContext:e}}else as=as.next=e;return t}var co=null;function sg(e){co===null?co=[e]:co.push(e)}function $b(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,sg(t)):(n.next=i.next,i.next=n),t.interleaved=n,Gr(e,r)}function Gr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var mi=!1;function ag(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ab(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Gr(e,n)}return i=r.interleaved,i===null?(t.next=t,sg(r)):(t.next=i.next,i.next=t),r.interleaved=t,Gr(e,n)}function qc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ym(e,n)}}function C0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=h:o=o.next=h,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Au(e,t,n,r){var i=e.updateQueue;mi=!1;var o=i.firstBaseUpdate,h=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,f=a.next;a.next=null,h===null?o=f:h.next=f,h=a;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==h&&(l===null?u.firstBaseUpdate=f:l.next=f,u.lastBaseUpdate=a))}if(o!==null){var s=i.baseState;h=0,u=f=a=null,l=o;do{var c=l.lane,d=l.eventTime;if((r&c)===c){u!==null&&(u=u.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(c=t,d=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){s=p.call(d,s,c);break e}s=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,c=typeof p=="function"?p.call(d,s,c):p,c==null)break e;s=ot({},s,c);break e;case 2:mi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else d={eventTime:d,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(f=u=d,a=s):u=u.next=d,h|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(!0);if(u===null&&(a=s),i.baseState=a,i.firstBaseUpdate=f,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do h|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Eo|=h,e.lanes=h,e.memoizedState=s}}function E0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(he(191,i));i.call(r)}}}var Vl={},br=Wi(Vl),hl=Wi(Vl),pl=Wi(Vl);function uo(e){if(e===Vl)throw Error(he(174));return e}function lg(e,t){switch(Ge(pl,t),Ge(hl,e),Ge(br,Vl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:np(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=np(t,e)}Qe(br),Ge(br,t)}function Ns(){Qe(br),Qe(hl),Qe(pl)}function Rb(e){uo(pl.current);var t=uo(br.current),n=np(t,e.type);t!==n&&(Ge(hl,e),Ge(br,n))}function cg(e){hl.current===e&&(Qe(br),Qe(hl))}var nt=Wi(0);function Ru(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var th=[];function ug(){for(var e=0;e<th.length;e++)th[e]._workInProgressVersionPrimary=null;th.length=0}var Zc=ei.ReactCurrentDispatcher,nh=ei.ReactCurrentBatchConfig,Co=0,it=null,gt=null,bt=null,Mu=!1,Ya=!1,ml=0,Qk=0;function At(){throw Error(he(321))}function fg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!er(e[n],t[n]))return!1;return!0}function dg(e,t,n,r,i,o){if(Co=o,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zc.current=e===null||e.memoizedState===null?nP:rP,e=n(r,i),Ya){o=0;do{if(Ya=!1,ml=0,25<=o)throw Error(he(301));o+=1,bt=gt=null,t.updateQueue=null,Zc.current=iP,e=n(r,i)}while(Ya)}if(Zc.current=Du,t=gt!==null&&gt.next!==null,Co=0,bt=gt=it=null,Mu=!1,t)throw Error(he(300));return e}function hg(){var e=ml!==0;return ml=0,e}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?it.memoizedState=bt=e:bt=bt.next=e,bt}function Nn(){if(gt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=bt===null?it.memoizedState:bt.next;if(t!==null)bt=t,gt=e;else{if(e===null)throw Error(he(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},bt===null?it.memoizedState=bt=e:bt=bt.next=e}return bt}function gl(e,t){return typeof t=="function"?t(e):t}function rh(e){var t=Nn(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=gt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var h=i.next;i.next=o.next,o.next=h}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=h=null,a=null,f=o;do{var u=f.lane;if((Co&u)===u)a!==null&&(a=a.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var s={lane:u,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};a===null?(l=a=s,h=r):a=a.next=s,it.lanes|=u,Eo|=u}f=f.next}while(f!==null&&f!==o);a===null?h=r:a.next=l,er(r,t.memoizedState)||(nn=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,it.lanes|=o,Eo|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ih(e){var t=Nn(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var h=i=i.next;do o=e(o,h.action),h=h.next;while(h!==i);er(o,t.memoizedState)||(nn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Mb(){}function Db(e,t){var n=it,r=Nn(),i=t(),o=!er(r.memoizedState,i);if(o&&(r.memoizedState=i,nn=!0),r=r.queue,pg(Lb.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,vl(9,Fb.bind(null,n,r,i,t),void 0,null),xt===null)throw Error(he(349));Co&30||Nb(n,t,i)}return i}function Nb(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fb(e,t,n,r){t.value=n,t.getSnapshot=r,Ib(t)&&jb(e)}function Lb(e,t,n){return n(function(){Ib(t)&&jb(e)})}function Ib(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!er(e,n)}catch{return!0}}function jb(e){var t=Gr(e,1);t!==null&&Qn(t,e,1,-1)}function T0(e){var t=ir();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:e},t.queue=e,e=e.dispatch=tP.bind(null,it,e),[t.memoizedState,e]}function vl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Bb(){return Nn().memoizedState}function Qc(e,t,n,r){var i=ir();it.flags|=e,i.memoizedState=vl(1|t,n,void 0,r===void 0?null:r)}function Mf(e,t,n,r){var i=Nn();r=r===void 0?null:r;var o=void 0;if(gt!==null){var h=gt.memoizedState;if(o=h.destroy,r!==null&&fg(r,h.deps)){i.memoizedState=vl(t,n,o,r);return}}it.flags|=e,i.memoizedState=vl(1|t,n,o,r)}function k0(e,t){return Qc(8390656,8,e,t)}function pg(e,t){return Mf(2048,8,e,t)}function zb(e,t){return Mf(4,2,e,t)}function Ub(e,t){return Mf(4,4,e,t)}function Vb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hb(e,t,n){return n=n!=null?n.concat([e]):null,Mf(4,4,Vb.bind(null,t,e),n)}function mg(){}function Wb(e,t){var n=Nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yb(e,t){var n=Nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xb(e,t,n){return Co&21?(er(n,t)||(n=Qw(),it.lanes|=n,Eo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nn=!0),e.memoizedState=n)}function Jk(e,t){var n=We;We=n!==0&&4>n?n:4,e(!0);var r=nh.transition;nh.transition={};try{e(!1),t()}finally{We=n,nh.transition=r}}function Gb(){return Nn().memoizedState}function eP(e,t,n){var r=Ni(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kb(e))qb(t,n);else if(n=$b(e,t,n,r),n!==null){var i=Yt();Qn(n,e,r,i),Zb(n,t,r)}}function tP(e,t,n){var r=Ni(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kb(e))qb(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var h=t.lastRenderedState,l=o(h,n);if(i.hasEagerState=!0,i.eagerState=l,er(l,h)){var a=t.interleaved;a===null?(i.next=i,sg(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=$b(e,t,i,r),n!==null&&(i=Yt(),Qn(n,e,r,i),Zb(n,t,r))}}function Kb(e){var t=e.alternate;return e===it||t!==null&&t===it}function qb(e,t){Ya=Mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zb(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ym(e,n)}}var Du={readContext:Dn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},nP={readContext:Dn,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:Dn,useEffect:k0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qc(4194308,4,Vb.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qc(4,2,e,t)},useMemo:function(e,t){var n=ir();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ir();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eP.bind(null,it,e),[r.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:T0,useDebugValue:mg,useDeferredValue:function(e){return ir().memoizedState=e},useTransition:function(){var e=T0(!1),t=e[0];return e=Jk.bind(null,e[1]),ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=it,i=ir();if(tt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=t(),xt===null)throw Error(he(349));Co&30||Nb(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,k0(Lb.bind(null,r,o,e),[e]),r.flags|=2048,vl(9,Fb.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ir(),t=xt.identifierPrefix;if(tt){var n=jr,r=Ir;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ml++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Qk++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rP={readContext:Dn,useCallback:Wb,useContext:Dn,useEffect:pg,useImperativeHandle:Hb,useInsertionEffect:zb,useLayoutEffect:Ub,useMemo:Yb,useReducer:rh,useRef:Bb,useState:function(){return rh(gl)},useDebugValue:mg,useDeferredValue:function(e){var t=Nn();return Xb(t,gt.memoizedState,e)},useTransition:function(){var e=rh(gl)[0],t=Nn().memoizedState;return[e,t]},useMutableSource:Mb,useSyncExternalStore:Db,useId:Gb,unstable_isNewReconciler:!1},iP={readContext:Dn,useCallback:Wb,useContext:Dn,useEffect:pg,useImperativeHandle:Hb,useInsertionEffect:zb,useLayoutEffect:Ub,useMemo:Yb,useReducer:ih,useRef:Bb,useState:function(){return ih(gl)},useDebugValue:mg,useDeferredValue:function(e){var t=Nn();return gt===null?t.memoizedState=e:Xb(t,gt.memoizedState,e)},useTransition:function(){var e=ih(gl)[0],t=Nn().memoizedState;return[e,t]},useMutableSource:Mb,useSyncExternalStore:Db,useId:Gb,unstable_isNewReconciler:!1};function zn(e,t){if(e&&e.defaultProps){t=ot({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function _p(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ot({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Df={isMounted:function(e){return(e=e._reactInternals)?No(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yt(),i=Ni(e),o=Hr(r,i);o.payload=t,n!=null&&(o.callback=n),t=Mi(e,o,i),t!==null&&(Qn(t,e,i,r),qc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yt(),i=Ni(e),o=Hr(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Mi(e,o,i),t!==null&&(Qn(t,e,i,r),qc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yt(),r=Ni(e),i=Hr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Mi(e,i,r),t!==null&&(Qn(t,e,r,n),qc(t,e,r))}};function P0(e,t,n,r,i,o,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,h):t.prototype&&t.prototype.isPureReactComponent?!cl(n,r)||!cl(i,o):!0}function Qb(e,t,n){var r=!1,i=ji,o=t.contextType;return typeof o=="object"&&o!==null?o=Dn(o):(i=on(t)?So:Nt.current,r=t.contextTypes,o=(r=r!=null)?Rs(e,i):ji),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Df,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function O0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Df.enqueueReplaceState(t,t.state,null)}function Cp(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},ag(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Dn(o):(o=on(t)?So:Nt.current,i.context=Rs(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(_p(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Df.enqueueReplaceState(i,i.state,null),Au(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Fs(e,t){try{var n="",r=t;do n+=RT(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function oh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ep(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oP=typeof WeakMap=="function"?WeakMap:Map;function Jb(e,t,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fu||(Fu=!0,Np=r),Ep(e,t)},n}function ex(e,t,n){n=Hr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ep(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ep(e,t),typeof r!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function $0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oP;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wP.bind(null,e,t,n),t.then(e,e))}function A0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function R0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Hr(-1,1),t.tag=2,Mi(n,t,1))),n.lanes|=1),e)}var sP=ei.ReactCurrentOwner,nn=!1;function zt(e,t,n,r){t.child=e===null?Ob(t,null,n,r):Ds(t,e.child,n,r)}function M0(e,t,n,r,i){n=n.render;var o=t.ref;return gs(t,i),r=dg(e,t,n,r,o,i),n=hg(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kr(e,t,i)):(tt&&n&&eg(t),t.flags|=1,zt(e,t,r,i),t.child)}function D0(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!_g(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,tx(e,t,o,r,i)):(e=nu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var h=o.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(h,r)&&e.ref===t.ref)return Kr(e,t,i)}return t.flags|=1,e=Fi(o,r),e.ref=t.ref,e.return=t,t.child=e}function tx(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(cl(o,r)&&e.ref===t.ref)if(nn=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(nn=!0);else return t.lanes=e.lanes,Kr(e,t,i)}return Tp(e,t,n,r,i)}function nx(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(cs,hn),hn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(cs,hn),hn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ge(cs,hn),hn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ge(cs,hn),hn|=r;return zt(e,t,i,n),t.child}function rx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tp(e,t,n,r,i){var o=on(n)?So:Nt.current;return o=Rs(t,o),gs(t,i),n=dg(e,t,n,r,o,i),r=hg(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kr(e,t,i)):(tt&&r&&eg(t),t.flags|=1,zt(e,t,n,i),t.child)}function N0(e,t,n,r,i){if(on(n)){var o=!0;Tu(t)}else o=!1;if(gs(t,i),t.stateNode===null)Jc(e,t),Qb(t,n,r),Cp(t,n,r,i),r=!0;else if(e===null){var h=t.stateNode,l=t.memoizedProps;h.props=l;var a=h.context,f=n.contextType;typeof f=="object"&&f!==null?f=Dn(f):(f=on(n)?So:Nt.current,f=Rs(t,f));var u=n.getDerivedStateFromProps,s=typeof u=="function"||typeof h.getSnapshotBeforeUpdate=="function";s||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==r||a!==f)&&O0(t,h,r,f),mi=!1;var c=t.memoizedState;h.state=c,Au(t,r,h,i),a=t.memoizedState,l!==r||c!==a||rn.current||mi?(typeof u=="function"&&(_p(t,n,u,r),a=t.memoizedState),(l=mi||P0(t,n,l,r,c,a,f))?(s||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),h.props=r,h.state=a,h.context=f,r=l):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,Ab(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:zn(t.type,l),h.props=f,s=t.pendingProps,c=h.context,a=n.contextType,typeof a=="object"&&a!==null?a=Dn(a):(a=on(n)?So:Nt.current,a=Rs(t,a));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==s||c!==a)&&O0(t,h,r,a),mi=!1,c=t.memoizedState,h.state=c,Au(t,r,h,i);var p=t.memoizedState;l!==s||c!==p||rn.current||mi?(typeof d=="function"&&(_p(t,n,d,r),p=t.memoizedState),(f=mi||P0(t,n,f,r,c,p,a)||!1)?(u||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,p,a),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,p,a)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),h.props=r,h.state=p,h.context=a,r=f):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),r=!1)}return kp(e,t,n,r,o,i)}function kp(e,t,n,r,i,o){rx(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return i&&b0(t,n,!1),Kr(e,t,o);r=t.stateNode,sP.current=t;var l=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=Ds(t,e.child,null,o),t.child=Ds(t,null,l,o)):zt(e,t,l,o),t.memoizedState=r.state,i&&b0(t,n,!0),t.child}function ix(e){var t=e.stateNode;t.pendingContext?w0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&w0(e,t.context,!1),lg(e,t.containerInfo)}function F0(e,t,n,r,i){return Ms(),ng(i),t.flags|=256,zt(e,t,n,r),t.child}var Pp={dehydrated:null,treeContext:null,retryLane:0};function Op(e){return{baseLanes:e,cachePool:null,transitions:null}}function ox(e,t,n){var r=t.pendingProps,i=nt.current,o=!1,h=(t.flags&128)!==0,l;if((l=h)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ge(nt,i&1),e===null)return xp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=r.children,e=r.fallback,o?(r=t.mode,o=t.child,h={mode:"hidden",children:h},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=h):o=Lf(h,r,0,null),e=bo(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Op(n),t.memoizedState=Pp,e):gg(t,h));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return aP(e,t,h,r,l,i,n);if(o){o=r.fallback,h=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(h&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=Fi(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Fi(l,o):(o=bo(o,h,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,h=e.child.memoizedState,h=h===null?Op(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},o.memoizedState=h,o.childLanes=e.childLanes&~n,t.memoizedState=Pp,r}return o=e.child,e=o.sibling,r=Fi(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function gg(e,t){return t=Lf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sc(e,t,n,r){return r!==null&&ng(r),Ds(t,e.child,null,n),e=gg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aP(e,t,n,r,i,o,h){if(n)return t.flags&256?(t.flags&=-257,r=oh(Error(he(422))),Sc(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lf({mode:"visible",children:r.children},i,0,null),o=bo(o,i,h,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ds(t,e.child,null,h),t.child.memoizedState=Op(h),t.memoizedState=Pp,o);if(!(t.mode&1))return Sc(e,t,h,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(he(419)),r=oh(o,r,void 0),Sc(e,t,h,r)}if(l=(h&e.childLanes)!==0,nn||l){if(r=xt,r!==null){switch(h&-h){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|h)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Gr(e,i),Qn(r,e,i,-1))}return Sg(),r=oh(Error(he(421))),Sc(e,t,h,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=bP.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,mn=Ri(i.nextSibling),gn=t,tt=!0,Xn=null,e!==null&&(Tn[kn++]=Ir,Tn[kn++]=jr,Tn[kn++]=_o,Ir=e.id,jr=e.overflow,_o=t),t=gg(t,r.children),t.flags|=4096,t)}function L0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Sp(e.return,t,n)}function sh(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function sx(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(zt(e,t,r.children,n),r=nt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L0(e,n,t);else if(e.tag===19)L0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ge(nt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ru(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),sh(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ru(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}sh(t,!0,n,null,o);break;case"together":sh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Eo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(he(153));if(t.child!==null){for(e=t.child,n=Fi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lP(e,t,n){switch(t.tag){case 3:ix(t),Ms();break;case 5:Rb(t);break;case 1:on(t.type)&&Tu(t);break;case 4:lg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ge(Ou,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ge(nt,nt.current&1),t.flags|=128,null):n&t.child.childLanes?ox(e,t,n):(Ge(nt,nt.current&1),e=Kr(e,t,n),e!==null?e.sibling:null);Ge(nt,nt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return sx(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(nt,nt.current),r)break;return null;case 22:case 23:return t.lanes=0,nx(e,t,n)}return Kr(e,t,n)}var ax,$p,lx,cx;ax=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$p=function(){};lx=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,uo(br.current);var o=null;switch(n){case"input":i=Qh(e,i),r=Qh(e,r),o=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),o=[];break;case"textarea":i=tp(e,i),r=tp(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cu)}rp(n,r);var h;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(h in l)l.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(nl.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var a=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&a!==l&&(a!=null||l!=null))if(f==="style")if(l){for(h in l)!l.hasOwnProperty(h)||a&&a.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in a)a.hasOwnProperty(h)&&l[h]!==a[h]&&(n||(n={}),n[h]=a[h])}else n||(o||(o=[]),o.push(f,n)),n=a;else f==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(f,a)):f==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(f,""+a):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(nl.hasOwnProperty(f)?(a!=null&&f==="onScroll"&&qe("scroll",e),o||l===a||(o=[])):(o=o||[]).push(f,a))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};cx=function(e,t,n,r){n!==r&&(t.flags|=4)};function ya(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cP(e,t,n){var r=t.pendingProps;switch(tg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(t),null;case 1:return on(t.type)&&Eu(),Rt(t),null;case 3:return r=t.stateNode,Ns(),Qe(rn),Qe(Nt),ug(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xn!==null&&(Ip(Xn),Xn=null))),$p(e,t),Rt(t),null;case 5:cg(t);var i=uo(pl.current);if(n=t.type,e!==null&&t.stateNode!=null)lx(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(he(166));return Rt(t),null}if(e=uo(br.current),bc(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ur]=t,r[dl]=o,e=(t.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<Da.length;i++)qe(Da[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":Yv(r,o),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qe("invalid",r);break;case"textarea":Gv(r,o),qe("invalid",r)}rp(n,o),i=null;for(var h in o)if(o.hasOwnProperty(h)){var l=o[h];h==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&wc(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&wc(r.textContent,l,e),i=["children",""+l]):nl.hasOwnProperty(h)&&l!=null&&h==="onScroll"&&qe("scroll",r)}switch(n){case"input":fc(r),Xv(r,o,!0);break;case"textarea":fc(r),Kv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Cu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lw(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(n,{is:r.is}):(e=h.createElement(n),n==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,n),e[ur]=t,e[dl]=r,ax(e,t,!1,!1),t.stateNode=e;e:{switch(h=ip(n,r),n){case"dialog":qe("cancel",e),qe("close",e),i=r;break;case"iframe":case"object":case"embed":qe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Da.length;i++)qe(Da[i],e);i=r;break;case"source":qe("error",e),i=r;break;case"img":case"image":case"link":qe("error",e),qe("load",e),i=r;break;case"details":qe("toggle",e),i=r;break;case"input":Yv(e,r),i=Qh(e,r),qe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),qe("invalid",e);break;case"textarea":Gv(e,r),i=tp(e,r),qe("invalid",e);break;default:i=r}rp(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Bw(e,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Iw(e,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&rl(e,a):typeof a=="number"&&rl(e,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(nl.hasOwnProperty(o)?a!=null&&o==="onScroll"&&qe("scroll",e):a!=null&&Bm(e,o,a,h))}switch(n){case"input":fc(e),Xv(e,r,!1);break;case"textarea":fc(e),Kv(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ii(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ds(e,!!r.multiple,o,!1):r.defaultValue!=null&&ds(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rt(t),null;case 6:if(e&&t.stateNode!=null)cx(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(he(166));if(n=uo(pl.current),uo(br.current),bc(t)){if(r=t.stateNode,n=t.memoizedProps,r[ur]=t,(o=r.nodeValue!==n)&&(e=gn,e!==null))switch(e.tag){case 3:wc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wc(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=t,t.stateNode=r}return Rt(t),null;case 13:if(Qe(nt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&mn!==null&&t.mode&1&&!(t.flags&128))kb(),Ms(),t.flags|=98560,o=!1;else if(o=bc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(he(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(he(317));o[ur]=t}else Ms(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rt(t),o=!1}else Xn!==null&&(Ip(Xn),Xn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||nt.current&1?vt===0&&(vt=3):Sg())),t.updateQueue!==null&&(t.flags|=4),Rt(t),null);case 4:return Ns(),$p(e,t),e===null&&ul(t.stateNode.containerInfo),Rt(t),null;case 10:return og(t.type._context),Rt(t),null;case 17:return on(t.type)&&Eu(),Rt(t),null;case 19:if(Qe(nt),o=t.memoizedState,o===null)return Rt(t),null;if(r=(t.flags&128)!==0,h=o.rendering,h===null)if(r)ya(o,!1);else{if(vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=Ru(e),h!==null){for(t.flags|=128,ya(o,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,h=o.alternate,h===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,e=h.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ge(nt,nt.current&1|2),t.child}e=e.sibling}o.tail!==null&&ft()>Ls&&(t.flags|=128,r=!0,ya(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ru(h),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ya(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!tt)return Rt(t),null}else 2*ft()-o.renderingStartTime>Ls&&n!==1073741824&&(t.flags|=128,r=!0,ya(o,!1),t.lanes=4194304);o.isBackwards?(h.sibling=t.child,t.child=h):(n=o.last,n!==null?n.sibling=h:t.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ft(),t.sibling=null,n=nt.current,Ge(nt,r?n&1|2:n&1),t):(Rt(t),null);case 22:case 23:return xg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?hn&1073741824&&(Rt(t),t.subtreeFlags&6&&(t.flags|=8192)):Rt(t),null;case 24:return null;case 25:return null}throw Error(he(156,t.tag))}function uP(e,t){switch(tg(t),t.tag){case 1:return on(t.type)&&Eu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ns(),Qe(rn),Qe(Nt),ug(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cg(t),null;case 13:if(Qe(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(he(340));Ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(nt),null;case 4:return Ns(),null;case 10:return og(t.type._context),null;case 22:case 23:return xg(),null;case 24:return null;default:return null}}var _c=!1,Dt=!1,fP=typeof WeakSet=="function"?WeakSet:Set,xe=null;function ls(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(e,t,r)}else n.current=null}function Ap(e,t,n){try{n()}catch(r){ct(e,t,r)}}var I0=!1;function dP(e,t){if(pp=xu,e=pb(),Jm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var h=0,l=-1,a=-1,f=0,u=0,s=e,c=null;t:for(;;){for(var d;s!==n||i!==0&&s.nodeType!==3||(l=h+i),s!==o||r!==0&&s.nodeType!==3||(a=h+r),s.nodeType===3&&(h+=s.nodeValue.length),(d=s.firstChild)!==null;)c=s,s=d;for(;;){if(s===e)break t;if(c===n&&++f===i&&(l=h),c===o&&++u===r&&(a=h),(d=s.nextSibling)!==null)break;s=c,c=s.parentNode}s=d}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(mp={focusedElem:e,selectionRange:n},xu=!1,xe=t;xe!==null;)if(t=xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xe=e;else for(;xe!==null;){t=xe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:zn(t.type,g),m);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(b){ct(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,xe=e;break}xe=t.return}return p=I0,I0=!1,p}function Xa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Ap(t,n,o)}i=i.next}while(i!==r)}}function Nf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Rp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ux(e){var t=e.alternate;t!==null&&(e.alternate=null,ux(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ur],delete t[dl],delete t[yp],delete t[Gk],delete t[Kk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fx(e){return e.tag===5||e.tag===3||e.tag===4}function j0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cu));else if(r!==4&&(e=e.child,e!==null))for(Mp(e,t,n),e=e.sibling;e!==null;)Mp(e,t,n),e=e.sibling}function Dp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Dp(e,t,n),e=e.sibling;e!==null;)Dp(e,t,n),e=e.sibling}var _t=null,Hn=!1;function ai(e,t,n){for(n=n.child;n!==null;)dx(e,t,n),n=n.sibling}function dx(e,t,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(kf,n)}catch{}switch(n.tag){case 5:Dt||ls(n,t);case 6:var r=_t,i=Hn;_t=null,ai(e,t,n),_t=r,Hn=i,_t!==null&&(Hn?(e=_t,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(Hn?(e=_t,n=n.stateNode,e.nodeType===8?Jd(e.parentNode,n):e.nodeType===1&&Jd(e,n),al(e)):Jd(_t,n.stateNode));break;case 4:r=_t,i=Hn,_t=n.stateNode.containerInfo,Hn=!0,ai(e,t,n),_t=r,Hn=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,h=o.destroy;o=o.tag,h!==void 0&&(o&2||o&4)&&Ap(n,t,h),i=i.next}while(i!==r)}ai(e,t,n);break;case 1:if(!Dt&&(ls(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ct(n,t,l)}ai(e,t,n);break;case 21:ai(e,t,n);break;case 22:n.mode&1?(Dt=(r=Dt)||n.memoizedState!==null,ai(e,t,n),Dt=r):ai(e,t,n);break;default:ai(e,t,n)}}function B0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fP),t.forEach(function(r){var i=xP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,h=t,l=h;e:for(;l!==null;){switch(l.tag){case 5:_t=l.stateNode,Hn=!1;break e;case 3:_t=l.stateNode.containerInfo,Hn=!0;break e;case 4:_t=l.stateNode.containerInfo,Hn=!0;break e}l=l.return}if(_t===null)throw Error(he(160));dx(o,h,i),_t=null,Hn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(f){ct(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hx(t,e),t=t.sibling}function hx(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jn(t,e),rr(e),r&4){try{Xa(3,e,e.return),Nf(3,e)}catch(g){ct(e,e.return,g)}try{Xa(5,e,e.return)}catch(g){ct(e,e.return,g)}}break;case 1:jn(t,e),rr(e),r&512&&n!==null&&ls(n,n.return);break;case 5:if(jn(t,e),rr(e),r&512&&n!==null&&ls(n,n.return),e.flags&32){var i=e.stateNode;try{rl(i,"")}catch(g){ct(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,h=n!==null?n.memoizedProps:o,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Nw(i,o),ip(l,h);var f=ip(l,o);for(h=0;h<a.length;h+=2){var u=a[h],s=a[h+1];u==="style"?Bw(i,s):u==="dangerouslySetInnerHTML"?Iw(i,s):u==="children"?rl(i,s):Bm(i,u,s,f)}switch(l){case"input":Jh(i,o);break;case"textarea":Fw(i,o);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?ds(i,!!o.multiple,d,!1):c!==!!o.multiple&&(o.defaultValue!=null?ds(i,!!o.multiple,o.defaultValue,!0):ds(i,!!o.multiple,o.multiple?[]:"",!1))}i[dl]=o}catch(g){ct(e,e.return,g)}}break;case 6:if(jn(t,e),rr(e),r&4){if(e.stateNode===null)throw Error(he(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){ct(e,e.return,g)}}break;case 3:if(jn(t,e),rr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(t.containerInfo)}catch(g){ct(e,e.return,g)}break;case 4:jn(t,e),rr(e);break;case 13:jn(t,e),rr(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(wg=ft())),r&4&&B0(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Dt=(f=Dt)||u,jn(t,e),Dt=f):jn(t,e),rr(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!u&&e.mode&1)for(xe=e,u=e.child;u!==null;){for(s=xe=u;xe!==null;){switch(c=xe,d=c.child,c.tag){case 0:case 11:case 14:case 15:Xa(4,c,c.return);break;case 1:ls(c,c.return);var p=c.stateNode;if(typeof p.componentWillUnmount=="function"){r=c,n=c.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){ct(r,n,g)}}break;case 5:ls(c,c.return);break;case 22:if(c.memoizedState!==null){U0(s);continue}}d!==null?(d.return=c,xe=d):U0(s)}u=u.sibling}e:for(u=null,s=e;;){if(s.tag===5){if(u===null){u=s;try{i=s.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=s.stateNode,a=s.memoizedProps.style,h=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=jw("display",h))}catch(g){ct(e,e.return,g)}}}else if(s.tag===6){if(u===null)try{s.stateNode.nodeValue=f?"":s.memoizedProps}catch(g){ct(e,e.return,g)}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}}break;case 19:jn(t,e),rr(e),r&4&&B0(e);break;case 21:break;default:jn(t,e),rr(e)}}function rr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fx(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rl(i,""),r.flags&=-33);var o=j0(e);Dp(e,o,i);break;case 3:case 4:var h=r.stateNode.containerInfo,l=j0(e);Mp(e,l,h);break;default:throw Error(he(161))}}catch(a){ct(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hP(e,t,n){xe=e,px(e)}function px(e,t,n){for(var r=(e.mode&1)!==0;xe!==null;){var i=xe,o=i.child;if(i.tag===22&&r){var h=i.memoizedState!==null||_c;if(!h){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Dt;l=_c;var f=Dt;if(_c=h,(Dt=a)&&!f)for(xe=i;xe!==null;)h=xe,a=h.child,h.tag===22&&h.memoizedState!==null?V0(i):a!==null?(a.return=h,xe=a):V0(i);for(;o!==null;)xe=o,px(o),o=o.sibling;xe=i,_c=l,Dt=f}z0(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,xe=o):z0(e)}}function z0(e){for(;xe!==null;){var t=xe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dt||Nf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Dt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:zn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&E0(t,o,r);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}E0(t,h,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var u=f.memoizedState;if(u!==null){var s=u.dehydrated;s!==null&&al(s)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}Dt||t.flags&512&&Rp(t)}catch(c){ct(t,t.return,c)}}if(t===e){xe=null;break}if(n=t.sibling,n!==null){n.return=t.return,xe=n;break}xe=t.return}}function U0(e){for(;xe!==null;){var t=xe;if(t===e){xe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xe=n;break}xe=t.return}}function V0(e){for(;xe!==null;){var t=xe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nf(4,t)}catch(a){ct(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){ct(t,i,a)}}var o=t.return;try{Rp(t)}catch(a){ct(t,o,a)}break;case 5:var h=t.return;try{Rp(t)}catch(a){ct(t,h,a)}}}catch(a){ct(t,t.return,a)}if(t===e){xe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,xe=l;break}xe=t.return}}var pP=Math.ceil,Nu=ei.ReactCurrentDispatcher,vg=ei.ReactCurrentOwner,$n=ei.ReactCurrentBatchConfig,je=0,xt=null,dt=null,Et=0,hn=0,cs=Wi(0),vt=0,yl=null,Eo=0,Ff=0,yg=0,Ga=null,en=null,wg=0,Ls=1/0,Dr=null,Fu=!1,Np=null,Di=null,Cc=!1,Ci=null,Lu=0,Ka=0,Fp=null,eu=-1,tu=0;function Yt(){return je&6?ft():eu!==-1?eu:eu=ft()}function Ni(e){return e.mode&1?je&2&&Et!==0?Et&-Et:Zk.transition!==null?(tu===0&&(tu=Qw()),tu):(e=We,e!==0||(e=window.event,e=e===void 0?16:ob(e.type)),e):1}function Qn(e,t,n,r){if(50<Ka)throw Ka=0,Fp=null,Error(he(185));Bl(e,n,r),(!(je&2)||e!==xt)&&(e===xt&&(!(je&2)&&(Ff|=n),vt===4&&vi(e,Et)),sn(e,r),n===1&&je===0&&!(t.mode&1)&&(Ls=ft()+500,Rf&&Yi()))}function sn(e,t){var n=e.callbackNode;ZT(e,t);var r=bu(e,e===xt?Et:0);if(r===0)n!==null&&Qv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Qv(n),t===1)e.tag===0?qk(H0.bind(null,e)):Cb(H0.bind(null,e)),Yk(function(){!(je&6)&&Yi()}),n=null;else{switch(Jw(r)){case 1:n=Wm;break;case 4:n=qw;break;case 16:n=wu;break;case 536870912:n=Zw;break;default:n=wu}n=Sx(n,mx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mx(e,t){if(eu=-1,tu=0,je&6)throw Error(he(327));var n=e.callbackNode;if(vs()&&e.callbackNode!==n)return null;var r=bu(e,e===xt?Et:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Iu(e,r);else{t=r;var i=je;je|=2;var o=vx();(xt!==e||Et!==t)&&(Dr=null,Ls=ft()+500,wo(e,t));do try{vP();break}catch(l){gx(e,l)}while(!0);ig(),Nu.current=o,je=i,dt!==null?t=0:(xt=null,Et=0,t=vt)}if(t!==0){if(t===2&&(i=cp(e),i!==0&&(r=i,t=Lp(e,i))),t===1)throw n=yl,wo(e,0),vi(e,r),sn(e,ft()),n;if(t===6)vi(e,r);else{if(i=e.current.alternate,!(r&30)&&!mP(i)&&(t=Iu(e,r),t===2&&(o=cp(e),o!==0&&(r=o,t=Lp(e,o))),t===1))throw n=yl,wo(e,0),vi(e,r),sn(e,ft()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(he(345));case 2:eo(e,en,Dr);break;case 3:if(vi(e,r),(r&130023424)===r&&(t=wg+500-ft(),10<t)){if(bu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Yt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=vp(eo.bind(null,e,en,Dr),t);break}eo(e,en,Dr);break;case 4:if(vi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var h=31-Zn(r);o=1<<h,h=t[h],h>i&&(i=h),r&=~o}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pP(r/1960))-r,10<r){e.timeoutHandle=vp(eo.bind(null,e,en,Dr),r);break}eo(e,en,Dr);break;case 5:eo(e,en,Dr);break;default:throw Error(he(329))}}}return sn(e,ft()),e.callbackNode===n?mx.bind(null,e):null}function Lp(e,t){var n=Ga;return e.current.memoizedState.isDehydrated&&(wo(e,t).flags|=256),e=Iu(e,t),e!==2&&(t=en,en=n,t!==null&&Ip(t)),e}function Ip(e){en===null?en=e:en.push.apply(en,e)}function mP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!er(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vi(e,t){for(t&=~yg,t&=~Ff,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zn(t),r=1<<n;e[n]=-1,t&=~r}}function H0(e){if(je&6)throw Error(he(327));vs();var t=bu(e,0);if(!(t&1))return sn(e,ft()),null;var n=Iu(e,t);if(e.tag!==0&&n===2){var r=cp(e);r!==0&&(t=r,n=Lp(e,r))}if(n===1)throw n=yl,wo(e,0),vi(e,t),sn(e,ft()),n;if(n===6)throw Error(he(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,eo(e,en,Dr),sn(e,ft()),null}function bg(e,t){var n=je;je|=1;try{return e(t)}finally{je=n,je===0&&(Ls=ft()+500,Rf&&Yi())}}function To(e){Ci!==null&&Ci.tag===0&&!(je&6)&&vs();var t=je;je|=1;var n=$n.transition,r=We;try{if($n.transition=null,We=1,e)return e()}finally{We=r,$n.transition=n,je=t,!(je&6)&&Yi()}}function xg(){hn=cs.current,Qe(cs)}function wo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Wk(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(tg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eu();break;case 3:Ns(),Qe(rn),Qe(Nt),ug();break;case 5:cg(r);break;case 4:Ns();break;case 13:Qe(nt);break;case 19:Qe(nt);break;case 10:og(r.type._context);break;case 22:case 23:xg()}n=n.return}if(xt=e,dt=e=Fi(e.current,null),Et=hn=t,vt=0,yl=null,yg=Ff=Eo=0,en=Ga=null,co!==null){for(t=0;t<co.length;t++)if(n=co[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var h=o.next;o.next=i,r.next=h}n.pending=r}co=null}return e}function gx(e,t){do{var n=dt;try{if(ig(),Zc.current=Du,Mu){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mu=!1}if(Co=0,bt=gt=it=null,Ya=!1,ml=0,vg.current=null,n===null||n.return===null){vt=1,yl=t,dt=null;break}e:{var o=e,h=n.return,l=n,a=t;if(t=Et,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var f=a,u=l,s=u.tag;if(!(u.mode&1)&&(s===0||s===11||s===15)){var c=u.alternate;c?(u.updateQueue=c.updateQueue,u.memoizedState=c.memoizedState,u.lanes=c.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=A0(h);if(d!==null){d.flags&=-257,R0(d,h,l,o,t),d.mode&1&&$0(o,f,t),t=d,a=f;var p=t.updateQueue;if(p===null){var g=new Set;g.add(a),t.updateQueue=g}else p.add(a);break e}else{if(!(t&1)){$0(o,f,t),Sg();break e}a=Error(he(426))}}else if(tt&&l.mode&1){var m=A0(h);if(m!==null){!(m.flags&65536)&&(m.flags|=256),R0(m,h,l,o,t),ng(Fs(a,l));break e}}o=a=Fs(a,l),vt!==4&&(vt=2),Ga===null?Ga=[o]:Ga.push(o),o=h;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=Jb(o,a,t);C0(o,v);break e;case 1:l=a;var y=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Di===null||!Di.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=ex(o,l,t);C0(o,b);break e}}o=o.return}while(o!==null)}wx(n)}catch(S){t=S,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function vx(){var e=Nu.current;return Nu.current=Du,e===null?Du:e}function Sg(){(vt===0||vt===3||vt===2)&&(vt=4),xt===null||!(Eo&268435455)&&!(Ff&268435455)||vi(xt,Et)}function Iu(e,t){var n=je;je|=2;var r=vx();(xt!==e||Et!==t)&&(Dr=null,wo(e,t));do try{gP();break}catch(i){gx(e,i)}while(!0);if(ig(),je=n,Nu.current=r,dt!==null)throw Error(he(261));return xt=null,Et=0,vt}function gP(){for(;dt!==null;)yx(dt)}function vP(){for(;dt!==null&&!UT();)yx(dt)}function yx(e){var t=xx(e.alternate,e,hn);e.memoizedProps=e.pendingProps,t===null?wx(e):dt=t,vg.current=null}function wx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uP(n,t),n!==null){n.flags&=32767,dt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vt=6,dt=null;return}}else if(n=cP(n,t,hn),n!==null){dt=n;return}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);vt===0&&(vt=5)}function eo(e,t,n){var r=We,i=$n.transition;try{$n.transition=null,We=1,yP(e,t,n,r)}finally{$n.transition=i,We=r}return null}function yP(e,t,n,r){do vs();while(Ci!==null);if(je&6)throw Error(he(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(he(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(QT(e,o),e===xt&&(dt=xt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cc||(Cc=!0,Sx(wu,function(){return vs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$n.transition,$n.transition=null;var h=We;We=1;var l=je;je|=4,vg.current=null,dP(e,n),hx(n,e),Ik(mp),xu=!!pp,mp=pp=null,e.current=n,hP(n),VT(),je=l,We=h,$n.transition=o}else e.current=n;if(Cc&&(Cc=!1,Ci=e,Lu=i),o=e.pendingLanes,o===0&&(Di=null),YT(n.stateNode),sn(e,ft()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fu)throw Fu=!1,e=Np,Np=null,e;return Lu&1&&e.tag!==0&&vs(),o=e.pendingLanes,o&1?e===Fp?Ka++:(Ka=0,Fp=e):Ka=0,Yi(),null}function vs(){if(Ci!==null){var e=Jw(Lu),t=$n.transition,n=We;try{if($n.transition=null,We=16>e?16:e,Ci===null)var r=!1;else{if(e=Ci,Ci=null,Lu=0,je&6)throw Error(he(331));var i=je;for(je|=4,xe=e.current;xe!==null;){var o=xe,h=o.child;if(xe.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var f=l[a];for(xe=f;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Xa(8,u,o)}var s=u.child;if(s!==null)s.return=u,xe=s;else for(;xe!==null;){u=xe;var c=u.sibling,d=u.return;if(ux(u),u===f){xe=null;break}if(c!==null){c.return=d,xe=c;break}xe=d}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}xe=o}}if(o.subtreeFlags&2064&&h!==null)h.return=o,xe=h;else e:for(;xe!==null;){if(o=xe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xa(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,xe=v;break e}xe=o.return}}var y=e.current;for(xe=y;xe!==null;){h=xe;var w=h.child;if(h.subtreeFlags&2064&&w!==null)w.return=h,xe=w;else e:for(h=y;xe!==null;){if(l=xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Nf(9,l)}}catch(S){ct(l,l.return,S)}if(l===h){xe=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,xe=b;break e}xe=l.return}}if(je=i,Yi(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(kf,e)}catch{}r=!0}return r}finally{We=n,$n.transition=t}}return!1}function W0(e,t,n){t=Fs(n,t),t=Jb(e,t,1),e=Mi(e,t,1),t=Yt(),e!==null&&(Bl(e,1,t),sn(e,t))}function ct(e,t,n){if(e.tag===3)W0(e,e,n);else for(;t!==null;){if(t.tag===3){W0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Di===null||!Di.has(r))){e=Fs(n,e),e=ex(t,e,1),t=Mi(t,e,1),e=Yt(),t!==null&&(Bl(t,1,e),sn(t,e));break}}t=t.return}}function wP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Yt(),e.pingedLanes|=e.suspendedLanes&n,xt===e&&(Et&n)===n&&(vt===4||vt===3&&(Et&130023424)===Et&&500>ft()-wg?wo(e,0):yg|=n),sn(e,t)}function bx(e,t){t===0&&(e.mode&1?(t=pc,pc<<=1,!(pc&130023424)&&(pc=4194304)):t=1);var n=Yt();e=Gr(e,t),e!==null&&(Bl(e,t,n),sn(e,n))}function bP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bx(e,n)}function xP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(t),bx(e,n)}var xx;xx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rn.current)nn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nn=!1,lP(e,t,n);nn=!!(e.flags&131072)}else nn=!1,tt&&t.flags&1048576&&Eb(t,Pu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jc(e,t),e=t.pendingProps;var i=Rs(t,Nt.current);gs(t,n),i=dg(null,t,r,e,i,n);var o=hg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,on(r)?(o=!0,Tu(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ag(t),i.updater=Df,t.stateNode=i,i._reactInternals=t,Cp(t,r,e,n),t=kp(null,t,r,!0,o,n)):(t.tag=0,tt&&o&&eg(t),zt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Jc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=_P(r),e=zn(r,e),i){case 0:t=Tp(null,t,r,e,n);break e;case 1:t=N0(null,t,r,e,n);break e;case 11:t=M0(null,t,r,e,n);break e;case 14:t=D0(null,t,r,zn(r.type,e),n);break e}throw Error(he(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:zn(r,i),Tp(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:zn(r,i),N0(e,t,r,i,n);case 3:e:{if(ix(t),e===null)throw Error(he(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Ab(e,t),Au(t,r,null,n);var h=t.memoizedState;if(r=h.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Fs(Error(he(423)),t),t=F0(e,t,r,n,i);break e}else if(r!==i){i=Fs(Error(he(424)),t),t=F0(e,t,r,n,i);break e}else for(mn=Ri(t.stateNode.containerInfo.firstChild),gn=t,tt=!0,Xn=null,n=Ob(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ms(),r===i){t=Kr(e,t,n);break e}zt(e,t,r,n)}t=t.child}return t;case 5:return Rb(t),e===null&&xp(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,h=i.children,gp(r,i)?h=null:o!==null&&gp(r,o)&&(t.flags|=32),rx(e,t),zt(e,t,h,n),t.child;case 6:return e===null&&xp(t),null;case 13:return ox(e,t,n);case 4:return lg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ds(t,null,r,n):zt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:zn(r,i),M0(e,t,r,i,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,h=i.value,Ge(Ou,r._currentValue),r._currentValue=h,o!==null)if(er(o.value,h)){if(o.children===i.children&&!rn.current){t=Kr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){h=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Hr(-1,n&-n),a.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var u=f.pending;u===null?a.next=a:(a.next=u.next,u.next=a),f.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sp(o.return,n,t),l.lanes|=n;break}a=a.next}}else if(o.tag===10)h=o.type===t.type?null:o.child;else if(o.tag===18){if(h=o.return,h===null)throw Error(he(341));h.lanes|=n,l=h.alternate,l!==null&&(l.lanes|=n),Sp(h,n,t),h=o.sibling}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===t){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}zt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,gs(t,n),i=Dn(i),r=r(i),t.flags|=1,zt(e,t,r,n),t.child;case 14:return r=t.type,i=zn(r,t.pendingProps),i=zn(r.type,i),D0(e,t,r,i,n);case 15:return tx(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:zn(r,i),Jc(e,t),t.tag=1,on(r)?(e=!0,Tu(t)):e=!1,gs(t,n),Qb(t,r,i),Cp(t,r,i,n),kp(null,t,r,!0,e,n);case 19:return sx(e,t,n);case 22:return nx(e,t,n)}throw Error(he(156,t.tag))};function Sx(e,t){return Kw(e,t)}function SP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(e,t,n,r){return new SP(e,t,n,r)}function _g(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _P(e){if(typeof e=="function")return _g(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Um)return 11;if(e===Vm)return 14}return 2}function Fi(e,t){var n=e.alternate;return n===null?(n=Pn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nu(e,t,n,r,i,o){var h=2;if(r=e,typeof e=="function")_g(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Jo:return bo(n.children,i,o,t);case zm:h=8,i|=8;break;case Gh:return e=Pn(12,n,t,i|2),e.elementType=Gh,e.lanes=o,e;case Kh:return e=Pn(13,n,t,i),e.elementType=Kh,e.lanes=o,e;case qh:return e=Pn(19,n,t,i),e.elementType=qh,e.lanes=o,e;case Rw:return Lf(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $w:h=10;break e;case Aw:h=9;break e;case Um:h=11;break e;case Vm:h=14;break e;case pi:h=16,r=null;break e}throw Error(he(130,e==null?e:typeof e,""))}return t=Pn(h,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function bo(e,t,n,r){return e=Pn(7,e,r,t),e.lanes=n,e}function Lf(e,t,n,r){return e=Pn(22,e,r,t),e.elementType=Rw,e.lanes=n,e.stateNode={isHidden:!1},e}function ah(e,t,n){return e=Pn(6,e,null,t),e.lanes=n,e}function lh(e,t,n){return t=Pn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ud(0),this.expirationTimes=Ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ud(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cg(e,t,n,r,i,o,h,l,a){return e=new CP(e,t,n,l,a),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Pn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ag(o),e}function EP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function _x(e){if(!e)return ji;e=e._reactInternals;e:{if(No(e)!==e||e.tag!==1)throw Error(he(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(on(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(he(171))}if(e.tag===1){var n=e.type;if(on(n))return _b(e,n,t)}return t}function Cx(e,t,n,r,i,o,h,l,a){return e=Cg(n,r,!0,e,i,o,h,l,a),e.context=_x(null),n=e.current,r=Yt(),i=Ni(n),o=Hr(r,i),o.callback=t??null,Mi(n,o,i),e.current.lanes=i,Bl(e,i,r),sn(e,r),e}function If(e,t,n,r){var i=t.current,o=Yt(),h=Ni(i);return n=_x(n),t.context===null?t.context=n:t.pendingContext=n,t=Hr(o,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Mi(i,t,h),e!==null&&(Qn(e,i,h,o),qc(e,i,h)),h}function ju(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Y0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Eg(e,t){Y0(e,t),(e=e.alternate)&&Y0(e,t)}function TP(){return null}var Ex=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tg(e){this._internalRoot=e}jf.prototype.render=Tg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(he(409));If(e,t,null,null)};jf.prototype.unmount=Tg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;To(function(){If(null,e,null,null)}),t[Xr]=null}};function jf(e){this._internalRoot=e}jf.prototype.unstable_scheduleHydration=function(e){if(e){var t=nb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gi.length&&t!==0&&t<gi[n].priority;n++);gi.splice(n,0,e),n===0&&ib(e)}};function kg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function X0(){}function kP(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=ju(h);o.call(f)}}var h=Cx(t,r,e,0,null,!1,!1,"",X0);return e._reactRootContainer=h,e[Xr]=h.current,ul(e.nodeType===8?e.parentNode:e),To(),h}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=ju(a);l.call(f)}}var a=Cg(e,0,!1,null,null,!1,!1,"",X0);return e._reactRootContainer=a,e[Xr]=a.current,ul(e.nodeType===8?e.parentNode:e),To(function(){If(t,a,n,r)}),a}function zf(e,t,n,r,i){var o=n._reactRootContainer;if(o){var h=o;if(typeof i=="function"){var l=i;i=function(){var a=ju(h);l.call(a)}}If(t,h,e,i)}else h=kP(n,t,e,i,r);return ju(h)}eb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ma(t.pendingLanes);n!==0&&(Ym(t,n|1),sn(t,ft()),!(je&6)&&(Ls=ft()+500,Yi()))}break;case 13:To(function(){var r=Gr(e,1);if(r!==null){var i=Yt();Qn(r,e,1,i)}}),Eg(e,1)}};Xm=function(e){if(e.tag===13){var t=Gr(e,134217728);if(t!==null){var n=Yt();Qn(t,e,134217728,n)}Eg(e,134217728)}};tb=function(e){if(e.tag===13){var t=Ni(e),n=Gr(e,t);if(n!==null){var r=Yt();Qn(n,e,t,r)}Eg(e,t)}};nb=function(){return We};rb=function(e,t){var n=We;try{return We=e,t()}finally{We=n}};sp=function(e,t,n){switch(t){case"input":if(Jh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Af(r);if(!i)throw Error(he(90));Dw(r),Jh(r,i)}}}break;case"textarea":Fw(e,n);break;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}};Vw=bg;Hw=To;var PP={usingClientEntryPoint:!1,Events:[Ul,rs,Af,zw,Uw,bg]},wa={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OP={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xw(e),e===null?null:e.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||TP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{kf=Ec.inject(OP),wr=Ec}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;xn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kg(t))throw Error(he(200));return EP(e,t,null,n)};xn.createRoot=function(e,t){if(!kg(e))throw Error(he(299));var n=!1,r="",i=Ex;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Cg(e,1,!1,null,null,n,!1,r,i),e[Xr]=t.current,ul(e.nodeType===8?e.parentNode:e),new Tg(t)};xn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(he(188)):(e=Object.keys(e).join(","),Error(he(268,e)));return e=Xw(t),e=e===null?null:e.stateNode,e};xn.flushSync=function(e){return To(e)};xn.hydrate=function(e,t,n){if(!Bf(t))throw Error(he(200));return zf(null,e,t,!0,n)};xn.hydrateRoot=function(e,t,n){if(!kg(e))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",h=Ex;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),t=Cx(t,null,e,1,n??null,i,!1,o,h),e[Xr]=t.current,ul(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new jf(t)};xn.render=function(e,t,n){if(!Bf(t))throw Error(he(200));return zf(null,e,t,!1,n)};xn.unmountComponentAtNode=function(e){if(!Bf(e))throw Error(he(40));return e._reactRootContainer?(To(function(){zf(null,null,e,!1,function(){e._reactRootContainer=null,e[Xr]=null})}),!0):!1};xn.unstable_batchedUpdates=bg;xn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bf(n))throw Error(he(200));if(e==null||e._reactInternals===void 0)throw Error(he(38));return zf(e,t,n,!1,r)};xn.version="18.3.1-next-f1338f8080-20240426";function Tx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tx)}catch(e){console.error(e)}}Tx(),Tw.exports=xn;var Xi=Tw.exports;const $P=Mm(Xi);var G0=Xi;Yh.createRoot=G0.createRoot,Yh.hydrateRoot=G0.hydrateRoot;var Uf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vf=typeof window>"u"||"Deno"in globalThis;function Un(){}function AP(e,t){return typeof e=="function"?e(t):e}function RP(e){return typeof e=="number"&&e>=0&&e!==1/0}function MP(e,t){return Math.max(e+(t||0)-Date.now(),0)}function K0(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:h,stale:l}=e;if(h){if(r){if(t.queryHash!==Pg(h,t.options))return!1}else if(!bl(t.queryKey,h))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||o&&!o(t))}function q0(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(wl(t.options.mutationKey)!==wl(o))return!1}else if(!bl(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Pg(e,t){return((t==null?void 0:t.queryKeyHashFn)||wl)(e)}function wl(e){return JSON.stringify(e,(t,n)=>jp(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function bl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!bl(e[n],t[n])):!1}function kx(e,t){if(e===t)return e;const n=Z0(e)&&Z0(t);if(n||jp(e)&&jp(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),h=o.length,l=n?[]:{};let a=0;for(let f=0;f<h;f++){const u=n?f:o[f];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,a++):(l[u]=kx(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&a++)}return i===h&&a===i?e:l}return t}function Z0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function jp(e){if(!Q0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Q0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Q0(e){return Object.prototype.toString.call(e)==="[object Object]"}function DP(e){return new Promise(t=>{setTimeout(t,e)})}function NP(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?kx(e,t):t}function FP(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function LP(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Og=Symbol(),mo,yi,Ss,aw,IP=(aw=class extends Uf{constructor(){super();Ve(this,mo,void 0);Ve(this,yi,void 0);Ve(this,Ss,void 0);De(this,Ss,t=>{if(!Vf&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){de(this,yi)||this.setEventListener(de(this,Ss))}onUnsubscribe(){var t;this.hasListeners()||((t=de(this,yi))==null||t.call(this),De(this,yi,void 0))}setEventListener(t){var n;De(this,Ss,t),(n=de(this,yi))==null||n.call(this),De(this,yi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){de(this,mo)!==t&&(De(this,mo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof de(this,mo)=="boolean"?de(this,mo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},mo=new WeakMap,yi=new WeakMap,Ss=new WeakMap,aw),Px=new IP,_s,wi,Cs,lw,jP=(lw=class extends Uf{constructor(){super();Ve(this,_s,!0);Ve(this,wi,void 0);Ve(this,Cs,void 0);De(this,Cs,t=>{if(!Vf&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){de(this,wi)||this.setEventListener(de(this,Cs))}onUnsubscribe(){var t;this.hasListeners()||((t=de(this,wi))==null||t.call(this),De(this,wi,void 0))}setEventListener(t){var n;De(this,Cs,t),(n=de(this,wi))==null||n.call(this),De(this,wi,t(this.setOnline.bind(this)))}setOnline(t){de(this,_s)!==t&&(De(this,_s,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return de(this,_s)}},_s=new WeakMap,wi=new WeakMap,Cs=new WeakMap,lw),Bu=new jP;function BP(e){return Math.min(1e3*2**e,3e4)}function Ox(e){return(e??"online")==="online"?Bu.isOnline():!0}var $x=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ch(e){return e instanceof $x}function Ax(e){let t=!1,n=0,r=!1,i,o,h;const l=new Promise((v,y)=>{o=v,h=y}),a=v=>{var y;r||(p(new $x(v)),(y=e.abort)==null||y.call(e))},f=()=>{t=!0},u=()=>{t=!1},s=()=>Px.isFocused()&&(e.networkMode==="always"||Bu.isOnline())&&e.canRun(),c=()=>Ox(e.networkMode)&&e.canRun(),d=v=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,v),i==null||i(),o(v))},p=v=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,v),i==null||i(),h(v))},g=()=>new Promise(v=>{var y;i=w=>{(r||s())&&v(w)},(y=e.onPause)==null||y.call(e)}).then(()=>{var v;i=void 0,r||(v=e.onContinue)==null||v.call(e)}),m=()=>{if(r)return;let v;try{v=e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var E;if(r)return;const w=e.retry??(Vf?0:3),b=e.retryDelay??BP,S=typeof b=="function"?b(n,y):b,_=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(t||!_){p(y);return}n++,(E=e.onFail)==null||E.call(e,n,y),DP(S).then(()=>s()?void 0:g()).then(()=>{t?p(y):m()})})};return{promise:l,cancel:a,continue:()=>(i==null||i(),l),cancelRetry:f,continueRetry:u,canStart:c,start:()=>(c()?m():g().then(m),l)}}function zP(){let e=[],t=0,n=c=>{c()},r=c=>{c()},i=c=>setTimeout(c,0);const o=c=>{i=c},h=c=>{let d;t++;try{d=c()}finally{t--,t||f()}return d},l=c=>{t?e.push(c):i(()=>{n(c)})},a=c=>(...d)=>{l(()=>{c(...d)})},f=()=>{const c=e;e=[],c.length&&i(()=>{r(()=>{c.forEach(d=>{n(d)})})})};return{batch:h,batchCalls:a,schedule:l,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:o}}var Ht=zP(),go,cw,Rx=(cw=class{constructor(){Ve(this,go,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),RP(this.gcTime)&&De(this,go,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vf?1/0:5*60*1e3))}clearGcTimeout(){de(this,go)&&(clearTimeout(de(this,go)),De(this,go,void 0))}},go=new WeakMap,cw),Es,Ts,En,jt,Ll,vo,Vn,Rr,uw,UP=(uw=class extends Rx{constructor(t){super();Ve(this,Vn);Ve(this,Es,void 0);Ve(this,Ts,void 0);Ve(this,En,void 0);Ve(this,jt,void 0);Ve(this,Ll,void 0);Ve(this,vo,void 0);De(this,vo,!1),De(this,Ll,t.defaultOptions),this.setOptions(t.options),this.observers=[],De(this,En,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,De(this,Es,t.state||HP(this.options)),this.state=de(this,Es),this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...de(this,Ll),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&de(this,En).remove(this)}setData(t,n){const r=NP(this.state.data,t,this.options);return $t(this,Vn,Rr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){$t(this,Vn,Rr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=de(this,jt))==null?void 0:r.promise;return(i=de(this,jt))==null||i.cancel(t),n?n.then(Un).catch(Un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(de(this,Es))}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!MP(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=de(this,jt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=de(this,jt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),de(this,En).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(de(this,jt)&&(de(this,vo)?de(this,jt).cancel({revert:!0}):de(this,jt).cancelRetry()),this.scheduleGc()),de(this,En).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$t(this,Vn,Rr).call(this,{type:"invalidate"})}fetch(t,n){var f,u,s;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(de(this,jt))return de(this,jt).continueRetry(),de(this,jt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,i={queryKey:this.queryKey,meta:this.meta},o=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(De(this,vo,!0),r.signal)})};o(i);const h=()=>!this.options.queryFn||this.options.queryFn===Og?Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)):(De(this,vo,!1),this.options.persister?this.options.persister(this.options.queryFn,i,this):this.options.queryFn(i)),l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:h};o(l),(f=this.options.behavior)==null||f.onFetch(l,this),De(this,Ts,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&$t(this,Vn,Rr).call(this,{type:"fetch",meta:(s=l.fetchOptions)==null?void 0:s.meta});const a=c=>{var d,p,g,m;ch(c)&&c.silent||$t(this,Vn,Rr).call(this,{type:"error",error:c}),ch(c)||((p=(d=de(this,En).config).onError)==null||p.call(d,c,this),(m=(g=de(this,En).config).onSettled)==null||m.call(g,this.state.data,c,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return De(this,jt,Ax({fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:c=>{var d,p,g,m;if(c===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(c),(p=(d=de(this,En).config).onSuccess)==null||p.call(d,c,this),(m=(g=de(this,En).config).onSettled)==null||m.call(g,c,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(c,d)=>{$t(this,Vn,Rr).call(this,{type:"failed",failureCount:c,error:d})},onPause:()=>{$t(this,Vn,Rr).call(this,{type:"pause"})},onContinue:()=>{$t(this,Vn,Rr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),de(this,jt).start()}},Es=new WeakMap,Ts=new WeakMap,En=new WeakMap,jt=new WeakMap,Ll=new WeakMap,vo=new WeakMap,Vn=new WeakSet,Rr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...VP(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return ch(i)&&i.revert&&de(this,Ts)?{...de(this,Ts),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ht.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),de(this,En).notify({query:this,type:"updated",action:t})})},uw);function VP(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ox(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function HP(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sr,fw,WP=(fw=class extends Uf{constructor(t={}){super();Ve(this,sr,void 0);this.config=t,De(this,sr,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??Pg(i,n);let h=this.get(o);return h||(h=new UP({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(h)),h}add(t){de(this,sr).has(t.queryHash)||(de(this,sr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=de(this,sr).get(t.queryHash);n&&(t.destroy(),n===t&&de(this,sr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ht.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return de(this,sr).get(t)}getAll(){return[...de(this,sr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>K0(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>K0(t,r)):n}notify(t){Ht.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ht.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ht.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},sr=new WeakMap,fw),ar,Bt,yo,lr,fi,dw,YP=(dw=class extends Rx{constructor(t){super();Ve(this,lr);Ve(this,ar,void 0);Ve(this,Bt,void 0);Ve(this,yo,void 0);this.mutationId=t.mutationId,De(this,Bt,t.mutationCache),De(this,ar,[]),this.state=t.state||XP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){de(this,ar).includes(t)||(de(this,ar).push(t),this.clearGcTimeout(),de(this,Bt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){De(this,ar,de(this,ar).filter(n=>n!==t)),this.scheduleGc(),de(this,Bt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){de(this,ar).length||(this.state.status==="pending"?this.scheduleGc():de(this,Bt).remove(this))}continue(){var t;return((t=de(this,yo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,h,l,a,f,u,s,c,d,p,g,m,v,y,w,b,S,_,E;De(this,yo,Ax({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,P)=>{$t(this,lr,fi).call(this,{type:"failed",failureCount:C,error:P})},onPause:()=>{$t(this,lr,fi).call(this,{type:"pause"})},onContinue:()=>{$t(this,lr,fi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>de(this,Bt).canRun(this)}));const n=this.state.status==="pending",r=!de(this,yo).canStart();try{if(!n){$t(this,lr,fi).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=de(this,Bt).config).onMutate)==null?void 0:o.call(i,t,this));const P=await((l=(h=this.options).onMutate)==null?void 0:l.call(h,t));P!==this.state.context&&$t(this,lr,fi).call(this,{type:"pending",context:P,variables:t,isPaused:r})}const C=await de(this,yo).start();return await((f=(a=de(this,Bt).config).onSuccess)==null?void 0:f.call(a,C,t,this.state.context,this)),await((s=(u=this.options).onSuccess)==null?void 0:s.call(u,C,t,this.state.context)),await((d=(c=de(this,Bt).config).onSettled)==null?void 0:d.call(c,C,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,C,null,t,this.state.context)),$t(this,lr,fi).call(this,{type:"success",data:C}),C}catch(C){try{throw await((v=(m=de(this,Bt).config).onError)==null?void 0:v.call(m,C,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,C,t,this.state.context)),await((S=(b=de(this,Bt).config).onSettled)==null?void 0:S.call(b,void 0,C,this.state.variables,this.state.context,this)),await((E=(_=this.options).onSettled)==null?void 0:E.call(_,void 0,C,t,this.state.context)),C}finally{$t(this,lr,fi).call(this,{type:"error",error:C})}}finally{de(this,Bt).runNext(this)}}},ar=new WeakMap,Bt=new WeakMap,yo=new WeakMap,lr=new WeakSet,fi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ht.batch(()=>{de(this,ar).forEach(r=>{r.onMutationUpdate(t)}),de(this,Bt).notify({mutation:this,type:"updated",action:t})})},dw);function XP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fn,Il,hw,GP=(hw=class extends Uf{constructor(t={}){super();Ve(this,fn,void 0);Ve(this,Il,void 0);this.config=t,De(this,fn,new Map),De(this,Il,Date.now())}build(t,n,r){const i=new YP({mutationCache:this,mutationId:++lc(this,Il)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=Tc(t),r=de(this,fn).get(n)??[];r.push(t),de(this,fn).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Tc(t);if(de(this,fn).has(n)){const i=(r=de(this,fn).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?de(this,fn).delete(n):de(this,fn).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=de(this,fn).get(Tc(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=de(this,fn).get(Tc(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Ht.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...de(this,fn).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>q0(n,r))}findAll(t={}){return this.getAll().filter(n=>q0(t,n))}notify(t){Ht.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ht.batch(()=>Promise.all(t.map(n=>n.continue().catch(Un))))}},fn=new WeakMap,Il=new WeakMap,hw);function Tc(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function KP(e){return{onFetch:(t,n)=>{const r=async()=>{var p,g,m,v,y;const i=t.options,o=(m=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:m.direction,h=((v=t.state.data)==null?void 0:v.pages)||[],l=((y=t.state.data)==null?void 0:y.pageParams)||[],a={pages:[],pageParams:[]};let f=!1;const u=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},s=t.options.queryFn&&t.options.queryFn!==Og?t.options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.options.queryHash}'`)),c=async(w,b,S)=>{if(f)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const _={queryKey:t.queryKey,pageParam:b,direction:S?"backward":"forward",meta:t.options.meta};u(_);const E=await s(_),{maxPages:C}=t.options,P=S?LP:FP;return{pages:P(w.pages,E,C),pageParams:P(w.pageParams,b,C)}};let d;if(o&&h.length){const w=o==="backward",b=w?qP:J0,S={pages:h,pageParams:l},_=b(i,S);d=await c(S,_,w)}else{d=await c(a,l[0]??i.initialPageParam);const w=e??h.length;for(let b=1;b<w;b++){const S=J0(i,d);d=await c(d,S)}}return d};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function J0(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function qP(e,{pages:t,pageParams:n}){var r;return(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n)}var st,bi,xi,ks,Ps,Si,Os,$s,pw,ZP=(pw=class{constructor(e={}){Ve(this,st,void 0);Ve(this,bi,void 0);Ve(this,xi,void 0);Ve(this,ks,void 0);Ve(this,Ps,void 0);Ve(this,Si,void 0);Ve(this,Os,void 0);Ve(this,$s,void 0);De(this,st,e.queryCache||new WP),De(this,bi,e.mutationCache||new GP),De(this,xi,e.defaultOptions||{}),De(this,ks,new Map),De(this,Ps,new Map),De(this,Si,0)}mount(){lc(this,Si)._++,de(this,Si)===1&&(De(this,Os,Px.subscribe(async e=>{e&&(await this.resumePausedMutations(),de(this,st).onFocus())})),De(this,$s,Bu.subscribe(async e=>{e&&(await this.resumePausedMutations(),de(this,st).onOnline())})))}unmount(){var e,t;lc(this,Si)._--,de(this,Si)===0&&((e=de(this,Os))==null||e.call(this),De(this,Os,void 0),(t=de(this,$s))==null||t.call(this),De(this,$s,void 0))}isFetching(e){return de(this,st).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return de(this,bi).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=de(this,st).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=de(this,st).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(n.staleTime)&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return de(this,st).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=de(this,st).get(r.queryHash),o=i==null?void 0:i.state.data,h=AP(t,o);if(h!==void 0)return de(this,st).build(this,r).setData(h,{...n,manual:!0})}setQueriesData(e,t,n){return Ht.batch(()=>de(this,st).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=de(this,st).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=de(this,st);Ht.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=de(this,st),r={type:"active",...e};return Ht.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Ht.batch(()=>de(this,st).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Un).catch(Un)}invalidateQueries(e={},t={}){return Ht.batch(()=>{if(de(this,st).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Ht.batch(()=>de(this,st).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Un)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Un)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=de(this,st).build(this,t);return n.isStaleByTime(t.staleTime)?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Un).catch(Un)}fetchInfiniteQuery(e){return e.behavior=KP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Un).catch(Un)}resumePausedMutations(){return Bu.isOnline()?de(this,bi).resumePausedMutations():Promise.resolve()}getQueryCache(){return de(this,st)}getMutationCache(){return de(this,bi)}getDefaultOptions(){return de(this,xi)}setDefaultOptions(e){De(this,xi,e)}setQueryDefaults(e,t){de(this,ks).set(wl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...de(this,ks).values()];let n={};return t.forEach(r=>{bl(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){de(this,Ps).set(wl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...de(this,Ps).values()];let n={};return t.forEach(r=>{bl(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...de(this,xi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Pg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Og&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...de(this,xi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){de(this,st).clear(),de(this,bi).clear()}},st=new WeakMap,bi=new WeakMap,xi=new WeakMap,ks=new WeakMap,Ps=new WeakMap,Si=new WeakMap,Os=new WeakMap,$s=new WeakMap,pw),QP=x.createContext(void 0),JP=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),T.jsx(QP.Provider,{value:e,children:t}));function Fo(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var e5=["color"],t5=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,i=Fo(e,e5);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),x.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),n5=["color"],Mx=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,i=Fo(e,n5);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),x.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),r5=["color"],i5=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,i=Fo(e,r5);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),x.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),o5=["color"],s5=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,i=Fo(e,o5);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),x.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),a5=["color"],l5=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,i=Fo(e,a5);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),x.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),c5=["color"],Dx=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,i=Fo(e,c5);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),x.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),u5=["color"],f5=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,i=Fo(e,u5);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),x.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function pe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function d5(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Hf(...e){return t=>e.forEach(n=>d5(n,t))}function Oe(...e){return x.useCallback(Hf(...e),e)}function h5(e,t){const n=x.createContext(t);function r(o){const{children:h,...l}=o,a=x.useMemo(()=>l,Object.values(l));return x.createElement(n.Provider,{value:a},h)}function i(o){const h=x.useContext(n);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return r.displayName=e+"Provider",[r,i]}function qt(e,t=[]){let n=[];function r(o,h){const l=x.createContext(h),a=n.length;n=[...n,h];function f(s){const{scope:c,children:d,...p}=s,g=(c==null?void 0:c[e][a])||l,m=x.useMemo(()=>p,Object.values(p));return x.createElement(g.Provider,{value:m},d)}function u(s,c){const d=(c==null?void 0:c[e][a])||l,p=x.useContext(d);if(p)return p;if(h!==void 0)return h;throw new Error(`\`${s}\` must be used within \`${o}\``)}return f.displayName=o+"Provider",[f,u]}const i=()=>{const o=n.map(h=>x.createContext(h));return function(l){const a=(l==null?void 0:l[e])||o;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:a}}),[l,a])}};return i.scopeName=e,[r,p5(i,...t)]}function p5(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const h=r.reduce((l,{useScope:a,scopeName:f})=>{const s=a(o)[`__scope${f}`];return{...l,...s}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return n.scopeName=t.scopeName,n}const Sr=x.forwardRef((e,t)=>{const{children:n,...r}=e,i=x.Children.toArray(n),o=i.find(m5);if(o){const h=o.props.children,l=i.map(a=>a===o?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:a);return x.createElement(Bp,ae({},r,{ref:t}),x.isValidElement(h)?x.cloneElement(h,void 0,l):null)}return x.createElement(Bp,ae({},r,{ref:t}),n)});Sr.displayName="Slot";const Bp=x.forwardRef((e,t)=>{const{children:n,...r}=e;return x.isValidElement(n)?x.cloneElement(n,{...g5(r,n.props),ref:t?Hf(t,n.ref):n.ref}):x.Children.count(n)>1?x.Children.only(null):null});Bp.displayName="SlotClone";const $g=({children:e})=>x.createElement(x.Fragment,null,e);function m5(e){return x.isValidElement(e)&&e.type===$g}function g5(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{o(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function Hl(e){const t=e+"CollectionProvider",[n,r]=qt(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),h=d=>{const{scope:p,children:g}=d,m=ke.useRef(null),v=ke.useRef(new Map).current;return ke.createElement(i,{scope:p,itemMap:v,collectionRef:m},g)},l=e+"CollectionSlot",a=ke.forwardRef((d,p)=>{const{scope:g,children:m}=d,v=o(l,g),y=Oe(p,v.collectionRef);return ke.createElement(Sr,{ref:y},m)}),f=e+"CollectionItemSlot",u="data-radix-collection-item",s=ke.forwardRef((d,p)=>{const{scope:g,children:m,...v}=d,y=ke.useRef(null),w=Oe(p,y),b=o(f,g);return ke.useEffect(()=>(b.itemMap.set(y,{ref:y,...v}),()=>void b.itemMap.delete(y))),ke.createElement(Sr,{[u]:"",ref:w},m)});function c(d){const p=o(e+"CollectionConsumer",d);return ke.useCallback(()=>{const m=p.collectionRef.current;if(!m)return[];const v=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((b,S)=>v.indexOf(b.ref.current)-v.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:h,Slot:a,ItemSlot:s},c,r]}const v5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Se=v5.reduce((e,t)=>{const n=x.forwardRef((r,i)=>{const{asChild:o,...h}=r,l=o?Sr:t;return x.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),x.createElement(l,ae({},h,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Ag(e,t){e&&Xi.flushSync(()=>e.dispatchEvent(t))}function rt(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function y5(e,t=globalThis==null?void 0:globalThis.document){const n=rt(e);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const zp="dismissableLayer.update",w5="dismissableLayer.pointerDownOutside",b5="dismissableLayer.focusOutside";let ey;const Nx=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ea=x.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h,onInteractOutside:l,onDismiss:a,...f}=e,u=x.useContext(Nx),[s,c]=x.useState(null),d=(n=s==null?void 0:s.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=x.useState({}),g=Oe(t,C=>c(C)),m=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),w=s?m.indexOf(s):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,_=S5(C=>{const P=C.target,N=[...u.branches].some(B=>B.contains(P));!S||N||(o==null||o(C),l==null||l(C),C.defaultPrevented||a==null||a())},d),E=_5(C=>{const P=C.target;[...u.branches].some(B=>B.contains(P))||(h==null||h(C),l==null||l(C),C.defaultPrevented||a==null||a())},d);return y5(C=>{w===u.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},d),x.useEffect(()=>{if(s)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ey=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(s)),u.layers.add(s),ty(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=ey)}},[s,d,r,u]),x.useEffect(()=>()=>{s&&(u.layers.delete(s),u.layersWithOutsidePointerEventsDisabled.delete(s),ty())},[s,u]),x.useEffect(()=>{const C=()=>p({});return document.addEventListener(zp,C),()=>document.removeEventListener(zp,C)},[]),x.createElement(Se.div,ae({},f,{ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:pe(e.onFocusCapture,E.onFocusCapture),onBlurCapture:pe(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:pe(e.onPointerDownCapture,_.onPointerDownCapture)}))}),x5=x.forwardRef((e,t)=>{const n=x.useContext(Nx),r=x.useRef(null),i=Oe(t,r);return x.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),x.createElement(Se.div,ae({},e,{ref:i}))});function S5(e,t=globalThis==null?void 0:globalThis.document){const n=rt(e),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let u=function(){Fx(w5,n,f,{discrete:!0})};var a=u;const f={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=u,t.addEventListener("click",i.current,{once:!0})):u()}else t.removeEventListener("click",i.current);r.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function _5(e,t=globalThis==null?void 0:globalThis.document){const n=rt(e),r=x.useRef(!1);return x.useEffect(()=>{const i=o=>{o.target&&!r.current&&Fx(b5,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ty(){const e=new CustomEvent(zp);document.dispatchEvent(e)}function Fx(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Ag(i,o):i.dispatchEvent(o)}const C5=ea,E5=x5,Wl=x.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?$P.createPortal(x.createElement(Se.div,ae({},i,{ref:t})),r):null}),Ft=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{};function T5(e,t){return x.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const kt=e=>{const{present:t,children:n}=e,r=k5(t),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),o=Oe(r.ref,i.ref);return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:o}):null};kt.displayName="Presence";function k5(e){const[t,n]=x.useState(),r=x.useRef({}),i=x.useRef(e),o=x.useRef("none"),h=e?"mounted":"unmounted",[l,a]=T5(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const f=kc(r.current);o.current=l==="mounted"?f:"none"},[l]),Ft(()=>{const f=r.current,u=i.current;if(u!==e){const c=o.current,d=kc(f);e?a("MOUNT"):d==="none"||(f==null?void 0:f.display)==="none"?a("UNMOUNT"):a(u&&c!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,a]),Ft(()=>{if(t){const f=s=>{const d=kc(r.current).includes(s.animationName);s.target===t&&d&&Xi.flushSync(()=>a("ANIMATION_END"))},u=s=>{s.target===t&&(o.current=kc(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function kc(e){return(e==null?void 0:e.animationName)||"none"}function Fn({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=P5({defaultProp:t,onChange:n}),o=e!==void 0,h=o?e:r,l=rt(n),a=x.useCallback(f=>{if(o){const s=typeof f=="function"?f(e):f;s!==e&&l(s)}else i(f)},[o,e,i,l]);return[h,a]}function P5({defaultProp:e,onChange:t}){const n=x.useState(e),[r]=n,i=x.useRef(r),o=rt(t);return x.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}const Wf=x.forwardRef((e,t)=>x.createElement(Se.span,ae({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),O5=Wf,Lx="ToastProvider",[Rg,$5,A5]=Hl("Toast"),[Ix,N7]=qt("Toast",[A5]),[R5,Yf]=Ix(Lx),jx=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:h}=e,[l,a]=x.useState(null),[f,u]=x.useState(0),s=x.useRef(!1),c=x.useRef(!1);return x.createElement(Rg.Provider,{scope:t},x.createElement(R5,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:f,viewport:l,onViewportChange:a,onToastAdd:x.useCallback(()=>u(d=>d+1),[]),onToastRemove:x.useCallback(()=>u(d=>d-1),[]),isFocusedToastEscapeKeyDownRef:s,isClosePausedRef:c},h))};jx.propTypes={label(e){if(e.label&&typeof e.label=="string"&&!e.label.trim()){const t=`Invalid prop \`label\` supplied to \`${Lx}\`. Expected non-empty \`string\`.`;return new Error(t)}return null}};const M5="ToastViewport",D5=["F8"],Up="toast.viewportPause",Vp="toast.viewportResume",N5=x.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=D5,label:i="Notifications ({hotkey})",...o}=e,h=Yf(M5,n),l=$5(n),a=x.useRef(null),f=x.useRef(null),u=x.useRef(null),s=x.useRef(null),c=Oe(t,s,h.onViewportChange),d=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=h.toastCount>0;x.useEffect(()=>{const m=v=>{var y;r.every(b=>v[b]||v.code===b)&&((y=s.current)===null||y===void 0||y.focus())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[r]),x.useEffect(()=>{const m=a.current,v=s.current;if(p&&m&&v){const y=()=>{if(!h.isClosePausedRef.current){const _=new CustomEvent(Up);v.dispatchEvent(_),h.isClosePausedRef.current=!0}},w=()=>{if(h.isClosePausedRef.current){const _=new CustomEvent(Vp);v.dispatchEvent(_),h.isClosePausedRef.current=!1}},b=_=>{!m.contains(_.relatedTarget)&&w()},S=()=>{m.contains(document.activeElement)||w()};return m.addEventListener("focusin",y),m.addEventListener("focusout",b),m.addEventListener("pointermove",y),m.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{m.removeEventListener("focusin",y),m.removeEventListener("focusout",b),m.removeEventListener("pointermove",y),m.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[p,h.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:m})=>{const y=l().map(w=>{const b=w.ref.current,S=[b,...Z5(b)];return m==="forwards"?S:S.reverse()});return(m==="forwards"?y.reverse():y).flat()},[l]);return x.useEffect(()=>{const m=s.current;if(m){const v=y=>{const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const C=document.activeElement,P=y.shiftKey;if(y.target===m&&P){var S;(S=f.current)===null||S===void 0||S.focus();return}const I=g({tabbingDirection:P?"backwards":"forwards"}),U=I.findIndex(D=>D===C);if(uh(I.slice(U+1)))y.preventDefault();else{var _,E;P?(_=f.current)===null||_===void 0||_.focus():(E=u.current)===null||E===void 0||E.focus()}}};return m.addEventListener("keydown",v),()=>m.removeEventListener("keydown",v)}},[l,g]),x.createElement(E5,{ref:a,role:"region","aria-label":i.replace("{hotkey}",d),tabIndex:-1,style:{pointerEvents:p?void 0:"none"}},p&&x.createElement(ny,{ref:f,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"forwards"});uh(m)}}),x.createElement(Rg.Slot,{scope:n},x.createElement(Se.ol,ae({tabIndex:-1},o,{ref:c}))),p&&x.createElement(ny,{ref:u,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"backwards"});uh(m)}}))}),F5="ToastFocusProxy",ny=x.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,o=Yf(F5,n);return x.createElement(Wf,ae({"aria-hidden":!0,tabIndex:0},i,{ref:t,style:{position:"fixed"},onFocus:h=>{var l;const a=h.relatedTarget;!((l=o.viewport)!==null&&l!==void 0&&l.contains(a))&&r()}}))}),Xf="Toast",L5="toast.swipeStart",I5="toast.swipeMove",j5="toast.swipeCancel",B5="toast.swipeEnd",z5=x.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...h}=e,[l=!0,a]=Fn({prop:r,defaultProp:i,onChange:o});return x.createElement(kt,{present:n||l},x.createElement(Bx,ae({open:l},h,{ref:t,onClose:()=>a(!1),onPause:rt(e.onPause),onResume:rt(e.onResume),onSwipeStart:pe(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(e.onSwipeMove,f=>{const{x:u,y:s}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${s}px`)}),onSwipeCancel:pe(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(e.onSwipeEnd,f=>{const{x:u,y:s}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${s}px`),a(!1)})})))}),[U5,V5]=Ix(Xf,{onClose(){}}),Bx=x.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:h,onEscapeKeyDown:l,onPause:a,onResume:f,onSwipeStart:u,onSwipeMove:s,onSwipeCancel:c,onSwipeEnd:d,...p}=e,g=Yf(Xf,n),[m,v]=x.useState(null),y=Oe(t,D=>v(D)),w=x.useRef(null),b=x.useRef(null),S=i||g.duration,_=x.useRef(0),E=x.useRef(S),C=x.useRef(0),{onToastAdd:P,onToastRemove:N}=g,B=rt(()=>{var D;(m==null?void 0:m.contains(document.activeElement))&&((D=g.viewport)===null||D===void 0||D.focus()),h()}),I=x.useCallback(D=>{!D||D===1/0||(window.clearTimeout(C.current),_.current=new Date().getTime(),C.current=window.setTimeout(B,D))},[B]);x.useEffect(()=>{const D=g.viewport;if(D){const F=()=>{I(E.current),f==null||f()},O=()=>{const M=new Date().getTime()-_.current;E.current=E.current-M,window.clearTimeout(C.current),a==null||a()};return D.addEventListener(Up,O),D.addEventListener(Vp,F),()=>{D.removeEventListener(Up,O),D.removeEventListener(Vp,F)}}},[g.viewport,S,a,f,I]),x.useEffect(()=>{o&&!g.isClosePausedRef.current&&I(S)},[o,S,g.isClosePausedRef,I]),x.useEffect(()=>(P(),()=>N()),[P,N]);const U=x.useMemo(()=>m?Hx(m):null,[m]);return g.viewport?x.createElement(x.Fragment,null,U&&x.createElement(H5,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},U),x.createElement(U5,{scope:n,onClose:B},Xi.createPortal(x.createElement(Rg.ItemSlot,{scope:n},x.createElement(C5,{asChild:!0,onEscapeKeyDown:pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||B(),g.isFocusedToastEscapeKeyDownRef.current=!1})},x.createElement(Se.li,ae({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection},p,{ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pe(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:pe(e.onPointerDown,D=>{D.button===0&&(w.current={x:D.clientX,y:D.clientY})}),onPointerMove:pe(e.onPointerMove,D=>{if(!w.current)return;const F=D.clientX-w.current.x,O=D.clientY-w.current.y,M=!!b.current,V=["left","right"].includes(g.swipeDirection),k=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,R=V?k(0,F):0,j=V?0:k(0,O),A=D.pointerType==="touch"?10:2,W={x:R,y:j},L={originalEvent:D,delta:W};M?(b.current=W,Pc(I5,s,L,{discrete:!1})):ry(W,g.swipeDirection,A)?(b.current=W,Pc(L5,u,L,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(F)>A||Math.abs(O)>A)&&(w.current=null)}),onPointerUp:pe(e.onPointerUp,D=>{const F=b.current,O=D.target;if(O.hasPointerCapture(D.pointerId)&&O.releasePointerCapture(D.pointerId),b.current=null,w.current=null,F){const M=D.currentTarget,V={originalEvent:D,delta:F};ry(F,g.swipeDirection,g.swipeThreshold)?Pc(B5,d,V,{discrete:!0}):Pc(j5,c,V,{discrete:!0}),M.addEventListener("click",k=>k.preventDefault(),{once:!0})}})})))),g.viewport))):null});Bx.propTypes={type(e){if(e.type&&!["foreground","background"].includes(e.type)){const t=`Invalid prop \`type\` supplied to \`${Xf}\`. Expected \`foreground | background\`.`;return new Error(t)}return null}};const H5=e=>{const{__scopeToast:t,children:n,...r}=e,i=Yf(Xf,t),[o,h]=x.useState(!1),[l,a]=x.useState(!1);return K5(()=>h(!0)),x.useEffect(()=>{const f=window.setTimeout(()=>a(!0),1e3);return()=>window.clearTimeout(f)},[]),l?null:x.createElement(Wl,{asChild:!0},x.createElement(Wf,r,o&&x.createElement(x.Fragment,null,i.label," ",n)))},W5=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return x.createElement(Se.div,ae({},r,{ref:t}))}),Y5=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return x.createElement(Se.div,ae({},r,{ref:t}))}),X5="ToastAction",zx=x.forwardRef((e,t)=>{const{altText:n,...r}=e;return n?x.createElement(Vx,{altText:n,asChild:!0},x.createElement(Ux,ae({},r,{ref:t}))):null});zx.propTypes={altText(e){return e.altText?null:new Error(`Missing prop \`altText\` expected on \`${X5}\``)}};const G5="ToastClose",Ux=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=V5(G5,n);return x.createElement(Vx,{asChild:!0},x.createElement(Se.button,ae({type:"button"},r,{ref:t,onClick:pe(e.onClick,i.onClose)})))}),Vx=x.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return x.createElement(Se.div,ae({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:t}))});function Hx(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),q5(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const h=r.dataset.radixToastAnnounceAlt;h&&t.push(h)}else t.push(...Hx(r))}}),t}function Pc(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Ag(i,o):i.dispatchEvent(o)}const ry=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),o=r>i;return t==="left"||t==="right"?o&&r>n:!o&&i>n};function K5(e=()=>{}){const t=rt(e);Ft(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function q5(e){return e.nodeType===e.ELEMENT_NODE}function Z5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function uh(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}const Q5=jx,Wx=N5,Yx=z5,Xx=W5,Gx=Y5,Kx=zx,qx=Ux;function Zx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Zx(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function J5(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Zx(e))&&(r&&(r+=" "),r+=t);return r}const iy=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,oy=J5,Gf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return oy(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=t,h=Object.keys(i).map(f=>{const u=n==null?void 0:n[f],s=o==null?void 0:o[f];if(u===null)return null;const c=iy(u)||iy(s);return i[f][c]}),l=n&&Object.entries(n).reduce((f,u)=>{let[s,c]=u;return c===void 0||(f[s]=c),f},{}),a=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,u)=>{let{class:s,className:c,...d}=u;return Object.entries(d).every(p=>{let[g,m]=p;return Array.isArray(m)?m.includes({...o,...l}[g]):{...o,...l}[g]===m})?[...f,s,c]:f},[]);return oy(e,h,a,n==null?void 0:n.class,n==null?void 0:n.className)};function Qx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Qx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function eO(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Qx(e))&&(r&&(r+=" "),r+=t);return r}const Mg="-";function tO(e){const t=rO(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;function i(h){const l=h.split(Mg);return l[0]===""&&l.length!==1&&l.shift(),Jx(l,t)||nO(h)}function o(h,l){const a=n[h]||[];return l&&r[h]?[...a,...r[h]]:a}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function Jx(e,t){var h;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?Jx(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(Mg);return(h=t.validators.find(({validator:l})=>l(o)))==null?void 0:h.classGroupId}const sy=/^\[(.+)\]$/;function nO(e){if(sy.test(e)){const t=sy.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function rO(e){const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return oO(Object.entries(e.classGroups),n).forEach(([o,h])=>{Hp(h,r,o,t)}),r}function Hp(e,t,n,r){e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:ay(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(iO(i)){Hp(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,h])=>{Hp(h,ay(t,o),n,r)})})}function ay(e,t){let n=e;return t.split(Mg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function iO(e){return e.isThemeGetter}function oO(e,t){return t?e.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([h,l])=>[t+h,l])):o);return[n,i]}):e}function sO(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;function i(o,h){n.set(o,h),t++,t>e&&(t=0,r=n,n=new Map)}return{get(o){let h=n.get(o);if(h!==void 0)return h;if((h=r.get(o))!==void 0)return i(o,h),h},set(o,h){n.has(o)?n.set(o,h):i(o,h)}}}const eS="!";function aO(e){const t=e.separator,n=t.length===1,r=t[0],i=t.length;return function(h){const l=[];let a=0,f=0,u;for(let g=0;g<h.length;g++){let m=h[g];if(a===0){if(m===r&&(n||h.slice(g,g+i)===t)){l.push(h.slice(f,g)),f=g+i;continue}if(m==="/"){u=g;continue}}m==="["?a++:m==="]"&&a--}const s=l.length===0?h:h.substring(f),c=s.startsWith(eS),d=c?s.substring(1):s,p=u&&u>f?u-f:void 0;return{modifiers:l,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:p}}}function lO(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t}function cO(e){return{cache:sO(e.cacheSize),splitModifiers:aO(e),...tO(e)}}const uO=/\s+/;function fO(e,t){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,o=new Set;return e.trim().split(uO).map(h=>{const{modifiers:l,hasImportantModifier:a,baseClassName:f,maybePostfixModifierPosition:u}=n(h);let s=r(u?f.substring(0,u):f),c=!!u;if(!s){if(!u)return{isTailwindClass:!1,originalClassName:h};if(s=r(f),!s)return{isTailwindClass:!1,originalClassName:h};c=!1}const d=lO(l).join(":");return{isTailwindClass:!0,modifierId:a?d+eS:d,classGroupId:s,originalClassName:h,hasPostfixModifier:c}}).reverse().filter(h=>{if(!h.isTailwindClass)return!0;const{modifierId:l,classGroupId:a,hasPostfixModifier:f}=h,u=l+a;return o.has(u)?!1:(o.add(u),i(a,f).forEach(s=>o.add(l+s)),!0)}).reverse().map(h=>h.originalClassName).join(" ")}function dO(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=tS(t))&&(r&&(r+=" "),r+=n);return r}function tS(e){if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=tS(e[r]))&&(n&&(n+=" "),n+=t);return n}function hO(e,...t){let n,r,i,o=h;function h(a){const f=t.reduce((u,s)=>s(u),e());return n=cO(f),r=n.cache.get,i=n.cache.set,o=l,l(a)}function l(a){const f=r(a);if(f)return f;const u=fO(a,n);return i(a,u),u}return function(){return o(dO.apply(null,arguments))}}function Ke(e){const t=n=>n[e]||[];return t.isThemeGetter=!0,t}const nS=/^\[(?:([a-z-]+):)?(.+)\]$/i,pO=/^\d+\/\d+$/,mO=new Set(["px","full","screen"]),gO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function $r(e){return fo(e)||mO.has(e)||pO.test(e)}function li(e){return ta(e,"length",PO)}function fo(e){return!!e&&!Number.isNaN(Number(e))}function Oc(e){return ta(e,"number",fo)}function ba(e){return!!e&&Number.isInteger(Number(e))}function xO(e){return e.endsWith("%")&&fo(e.slice(0,-1))}function Me(e){return nS.test(e)}function ci(e){return gO.test(e)}const SO=new Set(["length","size","percentage"]);function _O(e){return ta(e,SO,rS)}function CO(e){return ta(e,"position",rS)}const EO=new Set(["image","url"]);function TO(e){return ta(e,EO,$O)}function kO(e){return ta(e,"",OO)}function xa(){return!0}function ta(e,t,n){const r=nS.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1}function PO(e){return vO.test(e)&&!yO.test(e)}function rS(){return!1}function OO(e){return wO.test(e)}function $O(e){return bO.test(e)}function AO(){const e=Ke("colors"),t=Ke("spacing"),n=Ke("blur"),r=Ke("brightness"),i=Ke("borderColor"),o=Ke("borderRadius"),h=Ke("borderSpacing"),l=Ke("borderWidth"),a=Ke("contrast"),f=Ke("grayscale"),u=Ke("hueRotate"),s=Ke("invert"),c=Ke("gap"),d=Ke("gradientColorStops"),p=Ke("gradientColorStopPositions"),g=Ke("inset"),m=Ke("margin"),v=Ke("opacity"),y=Ke("padding"),w=Ke("saturate"),b=Ke("scale"),S=Ke("sepia"),_=Ke("skew"),E=Ke("space"),C=Ke("translate"),P=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",Me,t],I=()=>[Me,t],U=()=>["",$r,li],D=()=>["auto",fo,Me],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],k=()=>["","0",Me],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>[fo,Oc],A=()=>[fo,Me];return{cacheSize:500,separator:":",theme:{colors:[xa],spacing:[$r,li],blur:["none","",ci,Me],brightness:j(),borderColor:[e],borderRadius:["none","","full",ci,Me],borderSpacing:I(),borderWidth:U(),contrast:j(),grayscale:k(),hueRotate:A(),invert:k(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[xO,li],inset:B(),margin:B(),opacity:j(),padding:I(),saturate:j(),scale:j(),sepia:k(),skew:A(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[ci]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Me]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ba,Me]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:k()}],shrink:[{shrink:k()}],order:[{order:["first","last","none",ba,Me]}],"grid-cols":[{"grid-cols":[xa]}],"col-start-end":[{col:["auto",{span:["full",ba,Me]},Me]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[xa]}],"row-start-end":[{row:["auto",{span:[ba,Me]},Me]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[c]}],"gap-x":[{"gap-x":[c]}],"gap-y":[{"gap-y":[c]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,t]}],"min-w":[{"min-w":[Me,t,"min","max","fit"]}],"max-w":[{"max-w":[Me,t,"none","full","min","max","fit","prose",{screen:[ci]},ci]}],h:[{h:[Me,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ci,li]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Oc]}],"font-family":[{font:[xa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",fo,Oc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$r,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$r,li]}],"underline-offset":[{"underline-offset":["auto",$r,Me]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),CO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_O]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},TO]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:O()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[$r,Me]}],"outline-w":[{outline:[$r,li]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[$r,li]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ci,kO]}],"shadow-color":[{shadow:[xa]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[a]}],"drop-shadow":[{"drop-shadow":["","none",ci,Me]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[s]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[a]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[s]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ba,Me]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$r,li,Oc]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const Dg=hO(AO),iS=40,RO=3,oS=200,Ei="inpaint",$c="diffusers_sd",ly="diffusers_sdxl",Ac="diffusers_sd_inpaint",cy="diffusers_sdxl_inpaint",fh="diffusers_other",zu="#ffcc00bb",uy="ldm",fy="cv2",sS="Fantasy-Studio/Paint-by-Example",MO="timbrooks/instruct-pix2pix",DO="Sanster/PowerPaint-V1-stable-diffusion-inpainting",NO="Sanster/AnyText",FO="out of frame, lowres, error, cropped, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, out of frame, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, disfigured, gross proportions, malformed limbs, watermark, signature";var qa={};const LO={},IO=Object.freeze(Object.defineProperty({__proto__:null,default:LO},Symbol.toStringTag,{value:"Module"})),dh=rT(IO);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var n=dh,r=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=r.document,t.jsdomImplForWrapper=dh.implForWrapper,t.nodeCanvas=dh.Canvas,t.window=r,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function l(d,p){if(this.__eventListeners[d]){var g=this.__eventListeners[d];p?g[g.indexOf(p)]=!1:t.util.array.fill(g,!1)}}function a(d,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in d)this.on(g,d[g]);else this.__eventListeners[d]||(this.__eventListeners[d]=[]),this.__eventListeners[d].push(p);return this}function f(d,p){var g=(function(){p.apply(this,arguments),this.off(d,g)}).bind(this);this.on(d,g)}function u(d,p){if(arguments.length===1)for(var g in d)f.call(this,g,d[g]);else f.call(this,d,p);return this}function s(d,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(d in this.__eventListeners)l.call(this,d);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in d)l.call(this,g,d[g]);else l.call(this,d,p);return this}function c(d,p){if(!this.__eventListeners)return this;var g=this.__eventListeners[d];if(!g)return this;for(var m=0,v=g.length;m<v;m++)g[m]&&g[m].call(this,p||{});return this.__eventListeners[d]=g.filter(function(y){return y!==!1}),this}t.Observable={fire:c,on:a,once:u,off:s}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var l=0,a=arguments.length;l<a;l++)this._onObjectAdded(arguments[l]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(l,a,f){var u=this._objects;return f?u[a]=l:u.splice(a,0,l),this._onObjectAdded&&this._onObjectAdded(l),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var l=this._objects,a,f=!1,u=0,s=arguments.length;u<s;u++)a=l.indexOf(arguments[u]),a!==-1&&(f=!0,l.splice(a,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&f&&this.requestRenderAll(),this},forEachObject:function(l,a){for(var f=this.getObjects(),u=0,s=f.length;u<s;u++)l.call(a,f[u],u,f);return this},getObjects:function(l){return typeof l>"u"?this._objects.concat():this._objects.filter(function(a){return a.type===l})},item:function(l){return this._objects[l]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(l,a){return this._objects.indexOf(l)>-1?!0:a?this._objects.some(function(f){return typeof f.contains=="function"&&f.contains(l,!0)}):!1},complexity:function(){return this._objects.reduce(function(l,a){return l+=a.complexity?a.complexity():0,l},0)}},t.CommonMethods={_setOptions:function(l){for(var a in l)this.set(a,l[a])},_initGradient:function(l,a){l&&l.colorStops&&!(l instanceof t.Gradient)&&this.set(a,new t.Gradient(l))},_initPattern:function(l,a,f){l&&l.source&&!(l instanceof t.Pattern)?this.set(a,new t.Pattern(l,f)):f&&f()},_setObject:function(l){for(var a in l)this._set(a,l[a])},set:function(l,a){return typeof l=="object"?this._setObject(l):this._set(l,a),this},_set:function(l,a){this[l]=a},toggle:function(l){var a=this.get(l);return typeof a=="boolean"&&this.set(l,!a),this},get:function(l){return this[l]}},function(l){var a=Math.sqrt,f=Math.atan2,u=Math.pow,s=Math.PI/180,c=Math.PI/2;t.util={cos:function(d){if(d===0)return 1;d<0&&(d=-d);var p=d/c;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(d)},sin:function(d){if(d===0)return 0;var p=d/c,g=1;switch(d<0&&(g=-1),p){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(d)},removeFromArray:function(d,p){var g=d.indexOf(p);return g!==-1&&d.splice(g,1),d},getRandomInt:function(d,p){return Math.floor(Math.random()*(p-d+1))+d},degreesToRadians:function(d){return d*s},radiansToDegrees:function(d){return d/s},rotatePoint:function(d,p,g){var m=new t.Point(d.x-p.x,d.y-p.y),v=t.util.rotateVector(m,g);return new t.Point(v.x,v.y).addEquals(p)},rotateVector:function(d,p){var g=t.util.sin(p),m=t.util.cos(p),v=d.x*m-d.y*g,y=d.x*g+d.y*m;return{x:v,y}},createVector:function(d,p){return new t.Point(p.x-d.x,p.y-d.y)},calcAngleBetweenVectors:function(d,p){return Math.acos((d.x*p.x+d.y*p.y)/(Math.hypot(d.x,d.y)*Math.hypot(p.x,p.y)))},getHatVector:function(d){return new t.Point(d.x,d.y).multiply(1/Math.hypot(d.x,d.y))},getBisector:function(d,p,g){var m=t.util.createVector(d,p),v=t.util.createVector(d,g),y=t.util.calcAngleBetweenVectors(m,v),w=t.util.calcAngleBetweenVectors(t.util.rotateVector(m,y),v),b=y*(w===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(m,b)),angle:y}},projectStrokeOnPoints:function(d,p,g){var m=[],v=p.strokeWidth/2,y=p.strokeUniform?new t.Point(1/p.scaleX,1/p.scaleY):new t.Point(1,1),w=function(b){var S=v/Math.hypot(b.x,b.y);return new t.Point(b.x*S*y.x,b.y*S*y.y)};return d.length<=1||d.forEach(function(b,S){var _=new t.Point(b.x,b.y),E,C;S===0?(C=d[S+1],E=g?w(t.util.createVector(C,_)).addEquals(_):d[d.length-1]):S===d.length-1?(E=d[S-1],C=g?w(t.util.createVector(E,_)).addEquals(_):d[0]):(E=d[S-1],C=d[S+1]);var P=t.util.getBisector(_,E,C),N=P.vector,B=P.angle,I,U;if(p.strokeLineJoin==="miter"&&(I=-v/Math.sin(B/2),U=new t.Point(N.x*I*y.x,N.y*I*y.y),Math.hypot(U.x,U.y)/v<=p.strokeMiterLimit)){m.push(_.add(U)),m.push(_.subtract(U));return}I=-v*Math.SQRT2,U=new t.Point(N.x*I*y.x,N.y*I*y.y),m.push(_.add(U)),m.push(_.subtract(U))}),m},transformPoint:function(d,p,g){return g?new t.Point(p[0]*d.x+p[2]*d.y,p[1]*d.x+p[3]*d.y):new t.Point(p[0]*d.x+p[2]*d.y+p[4],p[1]*d.x+p[3]*d.y+p[5])},makeBoundingBoxFromPoints:function(d,p){if(p)for(var g=0;g<d.length;g++)d[g]=t.util.transformPoint(d[g],p);var m=[d[0].x,d[1].x,d[2].x,d[3].x],v=t.util.array.min(m),y=t.util.array.max(m),w=y-v,b=[d[0].y,d[1].y,d[2].y,d[3].y],S=t.util.array.min(b),_=t.util.array.max(b),E=_-S;return{left:v,top:S,width:w,height:E}},invertTransform:function(d){var p=1/(d[0]*d[3]-d[1]*d[2]),g=[p*d[3],-p*d[1],-p*d[2],p*d[0]],m=t.util.transformPoint({x:d[4],y:d[5]},g,!0);return g[4]=-m.x,g[5]=-m.y,g},toFixed:function(d,p){return parseFloat(Number(d).toFixed(p))},parseUnit:function(d,p){var g=/\D{0,2}$/.exec(d),m=parseFloat(d);switch(p||(p=t.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return m*t.DPI/25.4;case"cm":return m*t.DPI/2.54;case"in":return m*t.DPI;case"pt":return m*t.DPI/72;case"pc":return m*t.DPI/72*12;case"em":return m*p;default:return m}},falseFunction:function(){return!1},getKlass:function(d,p){return d=t.util.string.camelize(d.charAt(0).toUpperCase()+d.slice(1)),t.util.resolveNamespace(p)[d]},getSvgAttributes:function(d){var p=["instantiated_by_use","style","id","class"];switch(d){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(d){if(!d)return t;var p=d.split("."),g=p.length,m,v=l||t.window;for(m=0;m<g;++m)v=v[p[m]];return v},loadImage:function(d,p,g,m){if(!d){p&&p.call(g,d);return}var v=t.util.createImage(),y=function(){p&&p.call(g,v,!1),v=v.onload=v.onerror=null};v.onload=y,v.onerror=function(){t.log("Error loading "+v.src),p&&p.call(g,null,!0),v=v.onload=v.onerror=null},d.indexOf("data")!==0&&m!==void 0&&m!==null&&(v.crossOrigin=m),d.substring(0,14)==="data:image/svg"&&(v.onload=null,t.util.loadImageInDom(v,y)),v.src=d},loadImageInDom:function(d,p){var g=t.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(d),t.document.querySelector("body").appendChild(g),d.onload=function(){p(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(d,p,g,m){d=d||[];var v=[],y=0,w=d.length;function b(){++y===w&&p&&p(v.filter(function(S){return S}))}if(!w){p&&p(v);return}d.forEach(function(S,_){if(!S||!S.type){b();return}var E=t.util.getKlass(S.type,g);E.fromObject(S,function(C,P){P||(v[_]=C),m&&m(S,C,P),b()})})},enlivenObjectEnlivables:function(d,p,g){var m=t.Object.ENLIVEN_PROPS.filter(function(v){return!!d[v]});t.util.enlivenObjects(m.map(function(v){return d[v]}),function(v){var y={};m.forEach(function(w,b){y[w]=v[b],p&&(p[w]=v[b])}),g&&g(y)})},enlivenPatterns:function(d,p){d=d||[];function g(){++v===y&&p&&p(m)}var m=[],v=0,y=d.length;if(!y){p&&p(m);return}d.forEach(function(w,b){w&&w.source?new t.Pattern(w,function(S){m[b]=S,g()}):(m[b]=w,g())})},groupSVGElements:function(d,p,g){var m;return d&&d.length===1?(typeof g<"u"&&(d[0].sourcePath=g),d[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),m=new t.Group(d,p),typeof g<"u"&&(m.sourcePath=g),m)},populateWithProperties:function(d,p,g){if(g&&Array.isArray(g))for(var m=0,v=g.length;m<v;m++)g[m]in d&&(p[g[m]]=d[g[m]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(d){var p=t.util.createCanvasElement();return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p},toDataURL:function(d,p,g){return d.toDataURL("image/"+p,g)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(d,p,g){return[d[0]*p[0]+d[2]*p[1],d[1]*p[0]+d[3]*p[1],d[0]*p[2]+d[2]*p[3],d[1]*p[2]+d[3]*p[3],g?0:d[0]*p[4]+d[2]*p[5]+d[4],g?0:d[1]*p[4]+d[3]*p[5]+d[5]]},qrDecompose:function(d){var p=f(d[1],d[0]),g=u(d[0],2)+u(d[1],2),m=a(g),v=(d[0]*d[3]-d[2]*d[1])/m,y=f(d[0]*d[2]+d[1]*d[3],g);return{angle:p/s,scaleX:m,scaleY:v,skewX:y/s,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(d){if(!d.angle)return t.iMatrix.concat();var p=t.util.degreesToRadians(d.angle),g=t.util.cos(p),m=t.util.sin(p);return[g,m,-m,g,0,0]},calcDimensionsMatrix:function(d){var p=typeof d.scaleX>"u"?1:d.scaleX,g=typeof d.scaleY>"u"?1:d.scaleY,m=[d.flipX?-p:p,0,0,d.flipY?-g:g,0,0],v=t.util.multiplyTransformMatrices,y=t.util.degreesToRadians;return d.skewX&&(m=v(m,[1,0,Math.tan(y(d.skewX)),1],!0)),d.skewY&&(m=v(m,[1,Math.tan(y(d.skewY)),0,1],!0)),m},composeMatrix:function(d){var p=[1,0,0,1,d.translateX||0,d.translateY||0],g=t.util.multiplyTransformMatrices;return d.angle&&(p=g(p,t.util.calcRotateMatrix(d))),(d.scaleX!==1||d.scaleY!==1||d.skewX||d.skewY||d.flipX||d.flipY)&&(p=g(p,t.util.calcDimensionsMatrix(d))),p},resetObjectTransform:function(d){d.scaleX=1,d.scaleY=1,d.skewX=0,d.skewY=0,d.flipX=!1,d.flipY=!1,d.rotate(0)},saveObjectTransform:function(d){return{scaleX:d.scaleX,scaleY:d.scaleY,skewX:d.skewX,skewY:d.skewY,angle:d.angle,left:d.left,flipX:d.flipX,flipY:d.flipY,top:d.top}},isTransparent:function(d,p,g,m){m>0&&(p>m?p-=m:p=0,g>m?g-=m:g=0);var v=!0,y,w,b=d.getImageData(p,g,m*2||1,m*2||1),S=b.data.length;for(y=3;y<S&&(w=b.data[y],v=w<=0,v!==!1);y+=4);return b=null,v},parsePreserveAspectRatioAttribute:function(d){var p="meet",g="Mid",m="Mid",v=d.split(" "),y;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(y=p,p="meet"):v.length&&(y=v.pop())),g=y!=="none"?y.slice(1,4):"none",m=y!=="none"?y.slice(5,8):"none",{meetOrSlice:p,alignX:g,alignY:m}},clearFabricFontCache:function(d){d=(d||"").toLowerCase(),d?t.charWidthsCache[d]&&delete t.charWidthsCache[d]:t.charWidthsCache={}},limitDimsByArea:function(d,p){var g=Math.sqrt(p*d),m=Math.floor(p/g);return{x:Math.floor(g),y:m}},capValue:function(d,p,g){return Math.max(d,Math.min(p,g))},findScaleToFit:function(d,p){return Math.min(p.width/d.width,p.height/d.height)},findScaleToCover:function(d,p){return Math.max(p.width/d.width,p.height/d.height)},matrixToSVG:function(d){return"matrix("+d.map(function(p){return t.util.toFixed(p,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(d,p){var g=t.util.invertTransform(p),m=t.util.multiplyTransformMatrices(g,d.calcOwnMatrix());t.util.applyTransformToObject(d,m)},addTransformToObject:function(d,p){t.util.applyTransformToObject(d,t.util.multiplyTransformMatrices(p,d.calcOwnMatrix()))},applyTransformToObject:function(d,p){var g=t.util.qrDecompose(p),m=new t.Point(g.translateX,g.translateY);d.flipX=!1,d.flipY=!1,d.set("scaleX",g.scaleX),d.set("scaleY",g.scaleY),d.skewX=g.skewX,d.skewY=g.skewY,d.angle=g.angle,d.setPositionByOrigin(m,"center","center")},sizeAfterTransform:function(d,p,g){var m=d/2,v=p/2,y=[{x:-m,y:-v},{x:m,y:-v},{x:-m,y:v},{x:m,y:v}],w=t.util.calcDimensionsMatrix(g),b=t.util.makeBoundingBoxFromPoints(y,w);return{x:b.width,y:b.height}},mergeClipPaths:function(d,p){var g=d,m=p;g.inverted&&!m.inverted&&(g=p,m=d),t.util.applyTransformToObject(m,t.util.multiplyTransformMatrices(t.util.invertTransform(g.calcTransformMatrix()),m.calcTransformMatrix()));var v=g.inverted&&m.inverted;return v&&(g.inverted=m.inverted=!1),new t.Group([g],{clipPath:m,inverted:v})},hasStyleChanged:function(d,p,g){return g=g||!1,d.fill!==p.fill||d.stroke!==p.stroke||d.strokeWidth!==p.strokeWidth||d.fontSize!==p.fontSize||d.fontFamily!==p.fontFamily||d.fontWeight!==p.fontWeight||d.fontStyle!==p.fontStyle||d.textBackgroundColor!==p.textBackgroundColor||d.deltaY!==p.deltaY||g&&(d.overline!==p.overline||d.underline!==p.underline||d.linethrough!==p.linethrough)},stylesToArray:function(g,p){for(var g=t.util.object.clone(g,!0),m=p.split(`
`),v=-1,y={},w=[],b=0;b<m.length;b++){if(!g[b]){v+=m[b].length;continue}for(var S=0;S<m[b].length;S++){v++;var _=g[b][S];if(_&&Object.keys(_).length>0){var E=t.util.hasStyleChanged(y,_,!0);E?w.push({start:v,end:v+1,style:_}):w[w.length-1].end++}y=_||{}}}return w},stylesFromArray:function(d,p){if(!Array.isArray(d))return d;for(var g=p.split(`
`),m=-1,v=0,y={},w=0;w<g.length;w++)for(var b=0;b<g[w].length;b++)m++,d[v]&&d[v].start<=m&&m<d[v].end&&(y[w]=y[w]||{},y[w][b]=Object.assign({},d[v].style),m===d[v].end-1&&v++);return y}}}(e),function(){var l=Array.prototype.join,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},f={m:"l",M:"L"};function u(k,R,j,A,W,L,$,H,Y,K,G){var Q=t.util.cos(k),ee=t.util.sin(k),le=t.util.cos(R),te=t.util.sin(R),Z=j*W*le-A*L*te+$,ie=A*W*le+j*L*te+H,ce=K+Y*(-j*W*ee-A*L*Q),ne=G+Y*(-A*W*ee+j*L*Q),z=Z+Y*(j*W*te+A*L*le),X=ie+Y*(A*W*te-j*L*le);return["C",ce,ne,z,X,Z,ie]}function s(k,R,j,A,W,L,$){var H=Math.PI,Y=$*H/180,K=t.util.sin(Y),G=t.util.cos(Y),Q=0,ee=0;j=Math.abs(j),A=Math.abs(A);var le=-G*k*.5-K*R*.5,te=-G*R*.5+K*k*.5,Z=j*j,ie=A*A,ce=te*te,ne=le*le,z=Z*ie-Z*ce-ie*ne,X=0;if(z<0){var J=Math.sqrt(1-z/(Z*ie));j*=J,A*=J}else X=(W===L?-1:1)*Math.sqrt(z/(Z*ce+ie*ne));var oe=X*j*te/A,q=-X*A*le/j,re=G*oe-K*q+k*.5,ue=K*oe+G*q+R*.5,ge=c(1,0,(le-oe)/j,(te-q)/A),Ce=c((le-oe)/j,(te-q)/A,(-le-oe)/j,(-te-q)/A);L===0&&Ce>0?Ce-=2*H:L===1&&Ce<0&&(Ce+=2*H);for(var Te=Math.ceil(Math.abs(Ce/H*2)),Ae=[],Be=Ce/Te,ze=8/3*Math.sin(Be/4)*Math.sin(Be/4)/Math.sin(Be/2),Je=ge+Be,Ee=0;Ee<Te;Ee++)Ae[Ee]=u(ge,Je,G,K,j,A,re,ue,ze,Q,ee),Q=Ae[Ee][5],ee=Ae[Ee][6],ge=Je,Je+=Be;return Ae}function c(k,R,j,A){var W=Math.atan2(R,k),L=Math.atan2(A,j);return L>=W?L-W:2*Math.PI-(W-L)}function d(k,R,j,A,W,L,$,H){var Y;if(t.cachesBoundsOfCurve&&(Y=l.call(arguments),t.boundsOfCurveCache[Y]))return t.boundsOfCurveCache[Y];var K=Math.sqrt,G=Math.min,Q=Math.max,ee=Math.abs,le=[],te=[[],[]],Z,ie,ce,ne,z,X,J,oe;ie=6*k-12*j+6*W,Z=-3*k+9*j-9*W+3*$,ce=3*j-3*k;for(var q=0;q<2;++q){if(q>0&&(ie=6*R-12*A+6*L,Z=-3*R+9*A-9*L+3*H,ce=3*A-3*R),ee(Z)<1e-12){if(ee(ie)<1e-12)continue;ne=-ce/ie,0<ne&&ne<1&&le.push(ne);continue}J=ie*ie-4*ce*Z,!(J<0)&&(oe=K(J),z=(-ie+oe)/(2*Z),0<z&&z<1&&le.push(z),X=(-ie-oe)/(2*Z),0<X&&X<1&&le.push(X))}for(var re,ue,ge=le.length,Ce=ge,Te;ge--;)ne=le[ge],Te=1-ne,re=Te*Te*Te*k+3*Te*Te*ne*j+3*Te*ne*ne*W+ne*ne*ne*$,te[0][ge]=re,ue=Te*Te*Te*R+3*Te*Te*ne*A+3*Te*ne*ne*L+ne*ne*ne*H,te[1][ge]=ue;te[0][Ce]=k,te[1][Ce]=R,te[0][Ce+1]=$,te[1][Ce+1]=H;var Ae=[{x:G.apply(null,te[0]),y:G.apply(null,te[1])},{x:Q.apply(null,te[0]),y:Q.apply(null,te[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[Y]=Ae),Ae}function p(k,R,j){for(var A=j[1],W=j[2],L=j[3],$=j[4],H=j[5],Y=j[6],K=j[7],G=s(Y-k,K-R,A,W,$,H,L),Q=0,ee=G.length;Q<ee;Q++)G[Q][1]+=k,G[Q][2]+=R,G[Q][3]+=k,G[Q][4]+=R,G[Q][5]+=k,G[Q][6]+=R;return G}function g(k){var R=0,j=0,A=k.length,W=0,L=0,$,H,Y,K=[],G,Q,ee;for(H=0;H<A;++H){switch(Y=!1,$=k[H].slice(0),$[0]){case"l":$[0]="L",$[1]+=R,$[2]+=j;case"L":R=$[1],j=$[2];break;case"h":$[1]+=R;case"H":$[0]="L",$[2]=j,R=$[1];break;case"v":$[1]+=j;case"V":$[0]="L",j=$[1],$[1]=R,$[2]=j;break;case"m":$[0]="M",$[1]+=R,$[2]+=j;case"M":R=$[1],j=$[2],W=$[1],L=$[2];break;case"c":$[0]="C",$[1]+=R,$[2]+=j,$[3]+=R,$[4]+=j,$[5]+=R,$[6]+=j;case"C":Q=$[3],ee=$[4],R=$[5],j=$[6];break;case"s":$[0]="S",$[1]+=R,$[2]+=j,$[3]+=R,$[4]+=j;case"S":G==="C"?(Q=2*R-Q,ee=2*j-ee):(Q=R,ee=j),R=$[3],j=$[4],$[0]="C",$[5]=$[3],$[6]=$[4],$[3]=$[1],$[4]=$[2],$[1]=Q,$[2]=ee,Q=$[3],ee=$[4];break;case"q":$[0]="Q",$[1]+=R,$[2]+=j,$[3]+=R,$[4]+=j;case"Q":Q=$[1],ee=$[2],R=$[3],j=$[4];break;case"t":$[0]="T",$[1]+=R,$[2]+=j;case"T":G==="Q"?(Q=2*R-Q,ee=2*j-ee):(Q=R,ee=j),$[0]="Q",R=$[1],j=$[2],$[1]=Q,$[2]=ee,$[3]=R,$[4]=j;break;case"a":$[0]="A",$[6]+=R,$[7]+=j;case"A":Y=!0,K=K.concat(p(R,j,$)),R=$[6],j=$[7];break;case"z":case"Z":R=W,j=L;break}Y||K.push($),G=$[0]}return K}function m(k,R,j,A){return Math.sqrt((j-k)*(j-k)+(A-R)*(A-R))}function v(k){return k*k*k}function y(k){return 3*k*k*(1-k)}function w(k){return 3*k*(1-k)*(1-k)}function b(k){return(1-k)*(1-k)*(1-k)}function S(k,R,j,A,W,L,$,H){return function(Y){var K=v(Y),G=y(Y),Q=w(Y),ee=b(Y);return{x:$*K+W*G+j*Q+k*ee,y:H*K+L*G+A*Q+R*ee}}}function _(k,R,j,A,W,L,$,H){return function(Y){var K=1-Y,G=3*K*K*(j-k)+6*K*Y*(W-j)+3*Y*Y*($-W),Q=3*K*K*(A-R)+6*K*Y*(L-A)+3*Y*Y*(H-L);return Math.atan2(Q,G)}}function E(k){return k*k}function C(k){return 2*k*(1-k)}function P(k){return(1-k)*(1-k)}function N(k,R,j,A,W,L){return function($){var H=E($),Y=C($),K=P($);return{x:W*H+j*Y+k*K,y:L*H+A*Y+R*K}}}function B(k,R,j,A,W,L){return function($){var H=1-$,Y=2*H*(j-k)+2*$*(W-j),K=2*H*(A-R)+2*$*(L-A);return Math.atan2(K,Y)}}function I(k,R,j){var A={x:R,y:j},W,L=0,$;for($=1;$<=100;$+=1)W=k($/100),L+=m(A.x,A.y,W.x,W.y),A=W;return L}function U(k,R){for(var j=0,A=0,W=k.iterator,L={x:k.x,y:k.y},$,H,Y=.01,K=k.angleFinder,G;A<R&&Y>1e-4;)$=W(j),G=j,H=m(L.x,L.y,$.x,$.y),H+A>R?(j-=Y,Y/=2):(L=$,j+=Y,A+=H);return $.angle=K(G),$}function D(k){for(var R=0,j=k.length,A,W=0,L=0,$=0,H=0,Y=[],K,G,Q,ee=0;ee<j;ee++){switch(A=k[ee],G={x:W,y:L,command:A[0]},A[0]){case"M":G.length=0,$=W=A[1],H=L=A[2];break;case"L":G.length=m(W,L,A[1],A[2]),W=A[1],L=A[2];break;case"C":K=S(W,L,A[1],A[2],A[3],A[4],A[5],A[6]),Q=_(W,L,A[1],A[2],A[3],A[4],A[5],A[6]),G.iterator=K,G.angleFinder=Q,G.length=I(K,W,L),W=A[5],L=A[6];break;case"Q":K=N(W,L,A[1],A[2],A[3],A[4]),Q=B(W,L,A[1],A[2],A[3],A[4]),G.iterator=K,G.angleFinder=Q,G.length=I(K,W,L),W=A[3],L=A[4];break;case"Z":case"z":G.destX=$,G.destY=H,G.length=m(W,L,$,H),W=$,L=H;break}R+=G.length,Y.push(G)}return Y.push({length:R,x:W,y:L}),Y}function F(k,R,j){j||(j=D(k));for(var A=0;R-j[A].length>0&&A<j.length-2;)R-=j[A].length,A++;var W=j[A],L=R/W.length,$=W.command,H=k[A],Y;switch($){case"M":return{x:W.x,y:W.y,angle:0};case"Z":case"z":return Y=new t.Point(W.x,W.y).lerp(new t.Point(W.destX,W.destY),L),Y.angle=Math.atan2(W.destY-W.y,W.destX-W.x),Y;case"L":return Y=new t.Point(W.x,W.y).lerp(new t.Point(H[1],H[2]),L),Y.angle=Math.atan2(H[2]-W.y,H[1]-W.x),Y;case"C":return U(W,R);case"Q":return U(W,R)}}function O(k){var R=[],j=[],A,W,L=t.rePathCommand,$="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",H="("+$+")"+t.commaWsp,Y="([01])"+t.commaWsp+"?",K=H+"?"+H+"?"+H+Y+Y+H+"?("+$+")",G=new RegExp(K,"g"),Q,ee,le;if(!k||!k.match)return R;le=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var te=0,Z,ie=le.length;te<ie;te++){A=le[te],ee=A.slice(1).trim(),j.length=0;var ce=A.charAt(0);if(Z=[ce],ce.toLowerCase()==="a")for(var ne;ne=G.exec(ee);)for(var z=1;z<ne.length;z++)j.push(ne[z]);else for(;Q=L.exec(ee);)j.push(Q[0]);for(var z=0,X=j.length;z<X;z++)W=parseFloat(j[z]),isNaN(W)||Z.push(W);var J=a[ce.toLowerCase()],oe=f[ce]||ce;if(Z.length-1>J)for(var q=1,re=Z.length;q<re;q+=J)R.push([ce].concat(Z.slice(q,q+J))),ce=oe;else R.push(Z)}return R}function M(k,R){var j=[],A,W=new t.Point(k[0].x,k[0].y),L=new t.Point(k[1].x,k[1].y),$=k.length,H=1,Y=0,K=$>2;for(R=R||0,K&&(H=k[2].x<L.x?-1:k[2].x===L.x?0:1,Y=k[2].y<L.y?-1:k[2].y===L.y?0:1),j.push(["M",W.x-H*R,W.y-Y*R]),A=1;A<$;A++){if(!W.eq(L)){var G=W.midPointFrom(L);j.push(["Q",W.x,W.y,G.x,G.y])}W=k[A],A+1<k.length&&(L=k[A+1])}return K&&(H=W.x>k[A-2].x?1:W.x===k[A-2].x?0:-1,Y=W.y>k[A-2].y?1:W.y===k[A-2].y?0:-1),j.push(["L",W.x+H*R,W.y+Y*R]),j}function V(k,R,j){return j&&(R=t.util.multiplyTransformMatrices(R,[1,0,0,1,-j.x,-j.y])),k.map(function(A){for(var W=A.slice(0),L={},$=1;$<A.length-1;$+=2)L.x=A[$],L.y=A[$+1],L=t.util.transformPoint(L,R),W[$]=L.x,W[$+1]=L.y;return W})}t.util.joinPath=function(k){return k.map(function(R){return R.join(" ")}).join(" ")},t.util.parsePath=O,t.util.makePathSimpler=g,t.util.getSmoothPathFromPoints=M,t.util.getPathSegmentsInfo=D,t.util.getBoundsOfCurve=d,t.util.getPointOnPath=F,t.util.transformPath=V}(),function(){var l=Array.prototype.slice;function a(d,p){for(var g=l.call(arguments,2),m=[],v=0,y=d.length;v<y;v++)m[v]=g.length?d[v][p].apply(d[v],g):d[v][p].call(d[v]);return m}function f(d,p){return c(d,p,function(g,m){return g>=m})}function u(d,p){return c(d,p,function(g,m){return g<m})}function s(d,p){for(var g=d.length;g--;)d[g]=p;return d}function c(d,p,g){if(!(!d||d.length===0)){var m=d.length-1,v=p?d[m][p]:d[m];if(p)for(;m--;)g(d[m][p],v)&&(v=d[m][p]);else for(;m--;)g(d[m],v)&&(v=d[m]);return v}}t.util.array={fill:s,invoke:a,min:u,max:f}}(),function(){function l(f,u,s){if(s)if(!t.isLikelyNode&&u instanceof Element)f=u;else if(u instanceof Array){f=[];for(var c=0,d=u.length;c<d;c++)f[c]=l({},u[c],s)}else if(u&&typeof u=="object")for(var p in u)p==="canvas"||p==="group"?f[p]=null:u.hasOwnProperty(p)&&(f[p]=l({},u[p],s));else f=u;else for(var p in u)f[p]=u[p];return f}function a(f,u){return l({},f,u)}t.util.object={extend:l,clone:a},t.util.object.extend(t.util,t.Observable)}(),function(){function l(c){return c.replace(/-+(.)?/g,function(d,p){return p?p.toUpperCase():""})}function a(c,d){return c.charAt(0).toUpperCase()+(d?c.slice(1):c.slice(1).toLowerCase())}function f(c){return c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(c){var d=0,p,g=[];for(d=0,p;d<c.length;d++)(p=s(c,d))!==!1&&g.push(p);return g}function s(c,d){var p=c.charCodeAt(d);if(isNaN(p))return"";if(p<55296||p>57343)return c.charAt(d);if(55296<=p&&p<=56319){if(c.length<=d+1)throw"High surrogate without following low surrogate";var g=c.charCodeAt(d+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return c.charAt(d)+c.charAt(d+1)}if(d===0)throw"Low surrogate without preceding high surrogate";var m=c.charCodeAt(d-1);if(55296>m||m>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:l,capitalize:a,escapeXml:f,graphemeSplit:u}}(),function(){var l=Array.prototype.slice,a=function(){},f=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),u=function(p,g,m){for(var v in g)v in p.prototype&&typeof p.prototype[v]=="function"&&(g[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(y){return function(){var w=this.constructor.superclass;this.constructor.superclass=m;var b=g[y].apply(this,arguments);if(this.constructor.superclass=w,y!=="initialize")return b}}(v):p.prototype[v]=g[v],f&&(g.toString!==Object.prototype.toString&&(p.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=g.valueOf))};function s(){}function c(p){for(var g=null,m=this;m.constructor.superclass;){var v=m.constructor.superclass.prototype[p];if(m[p]!==v){g=v;break}m=m.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,l.call(arguments,1)):g.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function d(){var p=null,g=l.call(arguments,0);typeof g[0]=="function"&&(p=g.shift());function m(){this.initialize.apply(this,arguments)}m.superclass=p,m.subclasses=[],p&&(s.prototype=p.prototype,m.prototype=new s,p.subclasses.push(m));for(var v=0,y=g.length;v<y;v++)u(m,g[v],p);return m.prototype.initialize||(m.prototype.initialize=a),m.prototype.constructor=m,m.prototype.callSuper=c,m}t.util.createClass=d}(),function(){var l=!!t.document.createElement("div").attachEvent,a=["touchstart","touchmove","touchend"];t.util.addListener=function(u,s,c,d){u&&u.addEventListener(s,c,l?!1:d)},t.util.removeListener=function(u,s,c,d){u&&u.removeEventListener(s,c,l?!1:d)};function f(u){var s=u.changedTouches;return s&&s[0]?s[0]:u}t.util.getPointer=function(u){var s=u.target,c=t.util.getScrollLeftTop(s),d=f(u);return{x:d.clientX+c.left,y:d.clientY+c.top}},t.util.isTouchEvent=function(u){return a.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function l(d,p){var g=d.style;if(!g)return d;if(typeof p=="string")return d.style.cssText+=";"+p,p.indexOf("opacity")>-1?c(d,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):d;for(var m in p)if(m==="opacity")c(d,p[m]);else{var v=m==="float"||m==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":m;g.setProperty(v,p[m])}return d}var a=t.document.createElement("div"),f=typeof a.style.opacity=="string",u=typeof a.style.filter=="string",s=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,c=function(d){return d};f?c=function(d,p){return d.style.opacity=p,d}:u&&(c=function(d,p){var g=d.style;return d.currentStyle&&!d.currentStyle.hasLayout&&(g.zoom=1),s.test(g.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",g.filter=g.filter.replace(s,p)):g.filter+=" alpha(opacity="+p*100+")",d}),t.util.setStyle=l}(),function(){var l=Array.prototype.slice;function a(b){return typeof b=="string"?t.document.getElementById(b):b}var f,u=function(b){return l.call(b,0)};try{f=u(t.document.childNodes)instanceof Array}catch{}f||(u=function(b){for(var S=new Array(b.length),_=b.length;_--;)S[_]=b[_];return S});function s(b,S){var _=t.document.createElement(b);for(var E in S)E==="class"?_.className=S[E]:E==="for"?_.htmlFor=S[E]:_.setAttribute(E,S[E]);return _}function c(b,S){b&&(" "+b.className+" ").indexOf(" "+S+" ")===-1&&(b.className+=(b.className?" ":"")+S)}function d(b,S,_){return typeof S=="string"&&(S=s(S,_)),b.parentNode&&b.parentNode.replaceChild(S,b),S.appendChild(b),S}function p(b){for(var S=0,_=0,E=t.document.documentElement,C=t.document.body||{scrollLeft:0,scrollTop:0};b&&(b.parentNode||b.host)&&(b=b.parentNode||b.host,b===t.document?(S=C.scrollLeft||E.scrollLeft||0,_=C.scrollTop||E.scrollTop||0):(S+=b.scrollLeft||0,_+=b.scrollTop||0),!(b.nodeType===1&&b.style.position==="fixed")););return{left:S,top:_}}function g(b){var S,_=b&&b.ownerDocument,E={left:0,top:0},C={left:0,top:0},P,N={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!_)return C;for(var B in N)C[N[B]]+=parseInt(m(b,B),10)||0;return S=_.documentElement,typeof b.getBoundingClientRect<"u"&&(E=b.getBoundingClientRect()),P=p(b),{left:E.left+P.left-(S.clientLeft||0)+C.left,top:E.top+P.top-(S.clientTop||0)+C.top}}var m;t.document.defaultView&&t.document.defaultView.getComputedStyle?m=function(b,S){var _=t.document.defaultView.getComputedStyle(b,null);return _?_[S]:void 0}:m=function(b,S){var _=b.style[S];return!_&&b.currentStyle&&(_=b.currentStyle[S]),_},function(){var b=t.document.documentElement.style,S="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";function _(C){return typeof C.onselectstart<"u"&&(C.onselectstart=t.util.falseFunction),S?C.style[S]="none":typeof C.unselectable=="string"&&(C.unselectable="on"),C}function E(C){return typeof C.onselectstart<"u"&&(C.onselectstart=null),S?C.style[S]="":typeof C.unselectable=="string"&&(C.unselectable=""),C}t.util.makeElementUnselectable=_,t.util.makeElementSelectable=E}();function v(b){var S=t.jsdomImplForWrapper(b);return S._canvas||S._image}function y(b){if(t.isLikelyNode){var S=t.jsdomImplForWrapper(b);S&&(S._image=null,S._canvas=null,S._currentSrc=null,S._attributes=null,S._classList=null)}}function w(b,S){b.imageSmoothingEnabled=b.imageSmoothingEnabled||b.webkitImageSmoothingEnabled||b.mozImageSmoothingEnabled||b.msImageSmoothingEnabled||b.oImageSmoothingEnabled,b.imageSmoothingEnabled=S}t.util.setImageSmoothing=w,t.util.getById=a,t.util.toArray=u,t.util.addClass=c,t.util.makeElement=s,t.util.wrapElement=d,t.util.getScrollLeftTop=p,t.util.getElementOffset=g,t.util.getNodeCanvas=v,t.util.cleanUpJsdomNode=y}(),function(){function l(u,s){return u+(/\?/.test(u)?"&":"?")+s}function a(){}function f(u,s){s||(s={});var c=s.method?s.method.toUpperCase():"GET",d=s.onComplete||function(){},p=new t.window.XMLHttpRequest,g=s.body||s.parameters;return p.onreadystatechange=function(){p.readyState===4&&(d(p),p.onreadystatechange=a)},c==="GET"&&(g=null,typeof s.parameters=="string"&&(u=l(u,s.parameters))),p.open(c,u,!0),(c==="POST"||c==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(g),p}t.util.request=f}(),t.log=console.log,t.warn=console.warn,function(){var l=t.util.object.extend,a=t.util.object.clone,f=[];t.util.object.extend(f,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(y){y.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var y=this.filter(function(w){return typeof w.target=="object"&&w.target.canvas===v});return y.forEach(function(w){w.cancel()}),y},cancelByTarget:function(v){var y=this.findAnimationsByTarget(v);return y.forEach(function(w){w.cancel()}),y},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(y){return y.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(y){return y.target===v}):[]}});function u(){return!1}function s(v,y,w,b){return-w*Math.cos(v/b*(Math.PI/2))+w+y}function c(v){v||(v={});var y=!1,w,b=function(){var S=t.runningAnimations.indexOf(w);return S>-1&&t.runningAnimations.splice(S,1)[0]};return w=l(a(v),{cancel:function(){return y=!0,b()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(w),g(function(S){var _=S||+new Date,E=v.duration||500,C=_+E,P,N=v.onChange||u,B=v.abort||u,I=v.onComplete||u,U=v.easing||s,D="startValue"in v?v.startValue.length>0:!1,F="startValue"in v?v.startValue:0,O="endValue"in v?v.endValue:100,M=v.byValue||(D?F.map(function(V,k){return O[k]-F[k]}):O-F);v.onStart&&v.onStart(),function V(k){P=k||+new Date;var R=P>C?E:P-_,j=R/E,A=D?F.map(function(L,$){return U(R,F[$],M[$],E)}):U(R,F,M,E),W=Math.abs(D?(A[0]-F[0])/M[0]:(A-F)/M);if(w.currentValue=D?A.slice():A,w.completionRate=W,w.durationRate=j,!y){if(B(A,W,j)){b();return}if(P>C){w.currentValue=D?O.slice():O,w.completionRate=1,w.durationRate=1,N(D?O.slice():O,1,1),I(O,1,1),b();return}else N(A,W,j),g(V)}}(_)}),w.cancel}var d=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(v){return t.window.setTimeout(v,1e3/60)},p=t.window.cancelAnimationFrame||t.window.clearTimeout;function g(){return d.apply(t.window,arguments)}function m(){return p.apply(t.window,arguments)}t.util.animate=c,t.util.requestAnimFrame=g,t.util.cancelAnimFrame=m,t.runningAnimations=f}(),function(){function l(f,u,s){var c="rgba("+parseInt(f[0]+s*(u[0]-f[0]),10)+","+parseInt(f[1]+s*(u[1]-f[1]),10)+","+parseInt(f[2]+s*(u[2]-f[2]),10);return c+=","+(f&&u?parseFloat(f[3]+s*(u[3]-f[3])):1),c+=")",c}function a(f,u,s,c){var d=new t.Color(f).getSource(),p=new t.Color(u).getSource(),g=c.onComplete,m=c.onChange;return c=c||{},t.util.animate(t.util.object.extend(c,{duration:s||500,startValue:d,endValue:p,byValue:p,easing:function(v,y,w,b){var S=c.colorEasing?c.colorEasing(v,b):1-Math.cos(v/b*(Math.PI/2));return l(y,w,S)},onComplete:function(v,y,w){if(g)return g(l(p,p,0),y,w)},onChange:function(v,y,w){if(m){if(Array.isArray(v))return m(l(v,v,0),y,w);m(v,y,w)}}}))}t.util.animateColor=a}(),function(){function l(k,R,j,A){return k<Math.abs(R)?(k=R,A=j/4):R===0&&k===0?A=j/(2*Math.PI)*Math.asin(1):A=j/(2*Math.PI)*Math.asin(R/k),{a:k,c:R,p:j,s:A}}function a(k,R,j){return k.a*Math.pow(2,10*(R-=1))*Math.sin((R*j-k.s)*(2*Math.PI)/k.p)}function f(k,R,j,A){return j*((k=k/A-1)*k*k+1)+R}function u(k,R,j,A){return k/=A/2,k<1?j/2*k*k*k+R:j/2*((k-=2)*k*k+2)+R}function s(k,R,j,A){return j*(k/=A)*k*k*k+R}function c(k,R,j,A){return-j*((k=k/A-1)*k*k*k-1)+R}function d(k,R,j,A){return k/=A/2,k<1?j/2*k*k*k*k+R:-j/2*((k-=2)*k*k*k-2)+R}function p(k,R,j,A){return j*(k/=A)*k*k*k*k+R}function g(k,R,j,A){return j*((k=k/A-1)*k*k*k*k+1)+R}function m(k,R,j,A){return k/=A/2,k<1?j/2*k*k*k*k*k+R:j/2*((k-=2)*k*k*k*k+2)+R}function v(k,R,j,A){return-j*Math.cos(k/A*(Math.PI/2))+j+R}function y(k,R,j,A){return j*Math.sin(k/A*(Math.PI/2))+R}function w(k,R,j,A){return-j/2*(Math.cos(Math.PI*k/A)-1)+R}function b(k,R,j,A){return k===0?R:j*Math.pow(2,10*(k/A-1))+R}function S(k,R,j,A){return k===A?R+j:j*(-Math.pow(2,-10*k/A)+1)+R}function _(k,R,j,A){return k===0?R:k===A?R+j:(k/=A/2,k<1?j/2*Math.pow(2,10*(k-1))+R:j/2*(-Math.pow(2,-10*--k)+2)+R)}function E(k,R,j,A){return-j*(Math.sqrt(1-(k/=A)*k)-1)+R}function C(k,R,j,A){return j*Math.sqrt(1-(k=k/A-1)*k)+R}function P(k,R,j,A){return k/=A/2,k<1?-j/2*(Math.sqrt(1-k*k)-1)+R:j/2*(Math.sqrt(1-(k-=2)*k)+1)+R}function N(k,R,j,A){var W=1.70158,L=0,$=j;if(k===0)return R;if(k/=A,k===1)return R+j;L||(L=A*.3);var H=l($,j,L,W);return-a(H,k,A)+R}function B(k,R,j,A){var W=1.70158,L=0,$=j;if(k===0)return R;if(k/=A,k===1)return R+j;L||(L=A*.3);var H=l($,j,L,W);return H.a*Math.pow(2,-10*k)*Math.sin((k*A-H.s)*(2*Math.PI)/H.p)+H.c+R}function I(k,R,j,A){var W=1.70158,L=0,$=j;if(k===0)return R;if(k/=A/2,k===2)return R+j;L||(L=A*(.3*1.5));var H=l($,j,L,W);return k<1?-.5*a(H,k,A)+R:H.a*Math.pow(2,-10*(k-=1))*Math.sin((k*A-H.s)*(2*Math.PI)/H.p)*.5+H.c+R}function U(k,R,j,A,W){return W===void 0&&(W=1.70158),j*(k/=A)*k*((W+1)*k-W)+R}function D(k,R,j,A,W){return W===void 0&&(W=1.70158),j*((k=k/A-1)*k*((W+1)*k+W)+1)+R}function F(k,R,j,A,W){return W===void 0&&(W=1.70158),k/=A/2,k<1?j/2*(k*k*(((W*=1.525)+1)*k-W))+R:j/2*((k-=2)*k*(((W*=1.525)+1)*k+W)+2)+R}function O(k,R,j,A){return j-M(A-k,0,j,A)+R}function M(k,R,j,A){return(k/=A)<1/2.75?j*(7.5625*k*k)+R:k<2/2.75?j*(7.5625*(k-=1.5/2.75)*k+.75)+R:k<2.5/2.75?j*(7.5625*(k-=2.25/2.75)*k+.9375)+R:j*(7.5625*(k-=2.625/2.75)*k+.984375)+R}function V(k,R,j,A){return k<A/2?O(k*2,0,j,A)*.5+R:M(k*2-A,0,j,A)*.5+j*.5+R}t.util.ease={easeInQuad:function(k,R,j,A){return j*(k/=A)*k+R},easeOutQuad:function(k,R,j,A){return-j*(k/=A)*(k-2)+R},easeInOutQuad:function(k,R,j,A){return k/=A/2,k<1?j/2*k*k+R:-j/2*(--k*(k-2)-1)+R},easeInCubic:function(k,R,j,A){return j*(k/=A)*k*k+R},easeOutCubic:f,easeInOutCubic:u,easeInQuart:s,easeOutQuart:c,easeInOutQuart:d,easeInQuint:p,easeOutQuint:g,easeInOutQuint:m,easeInSine:v,easeOutSine:y,easeInOutSine:w,easeInExpo:b,easeOutExpo:S,easeInOutExpo:_,easeInCirc:E,easeOutCirc:C,easeInOutCirc:P,easeInElastic:N,easeOutElastic:B,easeInOutElastic:I,easeInBack:U,easeOutBack:D,easeInOutBack:F,easeInBounce:O,easeOutBounce:M,easeInOutBounce:V}}(),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend,u=a.util.object.clone,s=a.util.toFixed,c=a.util.parseUnit,d=a.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],m=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},w={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",S="clip-path";a.svgValidTagNamesRegEx=C(p),a.svgViewBoxElementsRegEx=C(g),a.svgInvalidAncestorsRegEx=C(m),a.svgValidParentsRegEx=C(v),a.cssRules={},a.gradientDefs={},a.clipPaths={};function _(L){return L in y?y[L]:L}function E(L,$,H,Y){var K=Array.isArray($),G;if((L==="fill"||L==="stroke")&&$==="none")$="";else{if(L==="strokeUniform")return $==="non-scaling-stroke";if(L==="strokeDashArray")$==="none"?$=null:$=$.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(L==="transformMatrix")H&&H.transformMatrix?$=d(H.transformMatrix,a.parseTransformAttribute($)):$=a.parseTransformAttribute($);else if(L==="visible")$=$!=="none"&&$!=="hidden",H&&H.visible===!1&&($=!1);else if(L==="opacity")$=parseFloat($),H&&typeof H.opacity<"u"&&($*=H.opacity);else if(L==="textAnchor")$=$==="start"?"left":$==="end"?"right":"center";else if(L==="charSpacing")G=c($,Y)/Y*1e3;else if(L==="paintFirst"){var Q=$.indexOf("fill"),ee=$.indexOf("stroke"),$="fill";(Q>-1&&ee>-1&&ee<Q||Q===-1&&ee>-1)&&($="stroke")}else{if(L==="href"||L==="xlink:href"||L==="font")return $;if(L==="imageSmoothing")return $==="optimizeQuality";G=K?$.map(c):c($,Y)}}return!K&&isNaN(G)?$:G}function C(L){return new RegExp("^("+L.join("|")+")\\b","i")}function P(L){for(var $ in w)if(!(typeof L[w[$]]>"u"||L[$]==="")){if(typeof L[$]>"u"){if(!a.Object.prototype[$])continue;L[$]=a.Object.prototype[$]}if(L[$].indexOf("url(")!==0){var H=new a.Color(L[$]);L[$]=H.setAlpha(s(H.getAlpha()*L[w[$]],2)).toRgba()}}return L}function N(L,$){var H,Y=[],K,G,Q;for(G=0,Q=$.length;G<Q;G++)H=$[G],K=L.getElementsByTagName(H),Y=Y.concat(Array.prototype.slice.call(K));return Y}a.parseTransformAttribute=function(){function L(q,re){var ue=a.util.cos(re[0]),ge=a.util.sin(re[0]),Ce=0,Te=0;re.length===3&&(Ce=re[1],Te=re[2]),q[0]=ue,q[1]=ge,q[2]=-ge,q[3]=ue,q[4]=Ce-(ue*Ce-ge*Te),q[5]=Te-(ge*Ce+ue*Te)}function $(q,re){var ue=re[0],ge=re.length===2?re[1]:re[0];q[0]=ue,q[3]=ge}function H(q,re,ue){q[ue]=Math.tan(a.util.degreesToRadians(re[0]))}function Y(q,re){q[4]=re[0],re.length===2&&(q[5]=re[1])}var K=a.iMatrix,G=a.reNum,Q=a.commaWsp,ee="(?:(skewX)\\s*\\(\\s*("+G+")\\s*\\))",le="(?:(skewY)\\s*\\(\\s*("+G+")\\s*\\))",te="(?:(rotate)\\s*\\(\\s*("+G+")(?:"+Q+"("+G+")"+Q+"("+G+"))?\\s*\\))",Z="(?:(scale)\\s*\\(\\s*("+G+")(?:"+Q+"("+G+"))?\\s*\\))",ie="(?:(translate)\\s*\\(\\s*("+G+")(?:"+Q+"("+G+"))?\\s*\\))",ce="(?:(matrix)\\s*\\(\\s*("+G+")"+Q+"("+G+")"+Q+"("+G+")"+Q+"("+G+")"+Q+"("+G+")"+Q+"("+G+")\\s*\\))",ne="(?:"+ce+"|"+ie+"|"+Z+"|"+te+"|"+ee+"|"+le+")",z="(?:"+ne+"(?:"+Q+"*"+ne+")*)",X="^\\s*(?:"+z+"?)\\s*$",J=new RegExp(X),oe=new RegExp(ne,"g");return function(q){var re=K.concat(),ue=[];if(!q||q&&!J.test(q))return re;q.replace(oe,function(Ce){var Te=new RegExp(ne).exec(Ce).filter(function(ze){return!!ze}),Ae=Te[1],Be=Te.slice(2).map(parseFloat);switch(Ae){case"translate":Y(re,Be);break;case"rotate":Be[0]=a.util.degreesToRadians(Be[0]),L(re,Be);break;case"scale":$(re,Be);break;case"skewX":H(re,Be,2);break;case"skewY":H(re,Be,1);break;case"matrix":re=Be;break}ue.push(re.concat()),re=K.concat()});for(var ge=ue[0];ue.length>1;)ue.shift(),ge=a.util.multiplyTransformMatrices(ge,ue[0]);return ge}}();function B(L,$){var H,Y;L.replace(/;\s*$/,"").split(";").forEach(function(K){var G=K.split(":");H=G[0].trim().toLowerCase(),Y=G[1].trim(),$[H]=Y})}function I(L,$){var H,Y;for(var K in L)typeof L[K]>"u"||(H=K.toLowerCase(),Y=L[K],$[H]=Y)}function U(L,$){var H={};for(var Y in a.cssRules[$])if(D(L,Y.split(" ")))for(var K in a.cssRules[$][Y])H[K]=a.cssRules[$][Y][K];return H}function D(L,$){var H,Y=!0;return H=O(L,$.pop()),H&&$.length&&(Y=F(L,$)),H&&Y&&$.length===0}function F(L,$){for(var H,Y=!0;L.parentNode&&L.parentNode.nodeType===1&&$.length;)Y&&(H=$.pop()),L=L.parentNode,Y=O(L,H);return $.length===0}function O(L,$){var H=L.nodeName,Y=L.getAttribute("class"),K=L.getAttribute("id"),G,Q;if(G=new RegExp("^"+H,"i"),$=$.replace(G,""),K&&$.length&&(G=new RegExp("#"+K+"(?![a-zA-Z\\-]+)","i"),$=$.replace(G,"")),Y&&$.length)for(Y=Y.split(" "),Q=Y.length;Q--;)G=new RegExp("\\."+Y[Q]+"(?![a-zA-Z\\-]+)","i"),$=$.replace(G,"");return $.length===0}function M(L,$){var H;if(L.getElementById&&(H=L.getElementById($)),H)return H;var Y,K,G,Q=L.getElementsByTagName("*");for(K=0,G=Q.length;K<G;K++)if(Y=Q[K],$===Y.getAttribute("id"))return Y}function V(L){for(var $=N(L,["use","svg:use"]),H=0;$.length&&H<$.length;){var Y=$[H],K=Y.getAttribute("xlink:href")||Y.getAttribute("href");if(K===null)return;var G=K.slice(1),Q=Y.getAttribute("x")||0,ee=Y.getAttribute("y")||0,le=M(L,G).cloneNode(!0),te=(le.getAttribute("transform")||"")+" translate("+Q+", "+ee+")",Z,ie=$.length,ce,ne,z,X,J=a.svgNS;if(R(le),/^svg$/i.test(le.nodeName)){var oe=le.ownerDocument.createElementNS(J,"g");for(ne=0,z=le.attributes,X=z.length;ne<X;ne++)ce=z.item(ne),oe.setAttributeNS(J,ce.nodeName,ce.nodeValue);for(;le.firstChild;)oe.appendChild(le.firstChild);le=oe}for(ne=0,z=Y.attributes,X=z.length;ne<X;ne++)ce=z.item(ne),!(ce.nodeName==="x"||ce.nodeName==="y"||ce.nodeName==="xlink:href"||ce.nodeName==="href")&&(ce.nodeName==="transform"?te=ce.nodeValue+" "+te:le.setAttribute(ce.nodeName,ce.nodeValue));le.setAttribute("transform",te),le.setAttribute("instantiated_by_use","1"),le.removeAttribute("id"),Z=Y.parentNode,Z.replaceChild(le,Y),$.length===ie&&H++}}var k=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");function R(L){if(!a.svgViewBoxElementsRegEx.test(L.nodeName))return{};var $=L.getAttribute("viewBox"),H=1,Y=1,K=0,G=0,Q,ee,le,te,Z=L.getAttribute("width"),ie=L.getAttribute("height"),ce=L.getAttribute("x")||0,ne=L.getAttribute("y")||0,z=L.getAttribute("preserveAspectRatio")||"",X=!$||!($=$.match(k)),J=!Z||!ie||Z==="100%"||ie==="100%",oe=X&&J,q={},re="",ue=0,ge=0;if(q.width=0,q.height=0,q.toBeParsed=oe,X&&(ce||ne)&&L.parentNode&&L.parentNode.nodeName!=="#document"&&(re=" translate("+c(ce)+" "+c(ne)+") ",le=(L.getAttribute("transform")||"")+re,L.setAttribute("transform",le),L.removeAttribute("x"),L.removeAttribute("y")),oe)return q;if(X)return q.width=c(Z),q.height=c(ie),q;if(K=-parseFloat($[1]),G=-parseFloat($[2]),Q=parseFloat($[3]),ee=parseFloat($[4]),q.minX=K,q.minY=G,q.viewBoxWidth=Q,q.viewBoxHeight=ee,J?(q.width=Q,q.height=ee):(q.width=c(Z),q.height=c(ie),H=q.width/Q,Y=q.height/ee),z=a.util.parsePreserveAspectRatioAttribute(z),z.alignX!=="none"&&(z.meetOrSlice==="meet"&&(Y=H=H>Y?Y:H),z.meetOrSlice==="slice"&&(Y=H=H>Y?H:Y),ue=q.width-Q*H,ge=q.height-ee*H,z.alignX==="Mid"&&(ue/=2),z.alignY==="Mid"&&(ge/=2),z.alignX==="Min"&&(ue=0),z.alignY==="Min"&&(ge=0)),H===1&&Y===1&&K===0&&G===0&&ce===0&&ne===0)return q;if((ce||ne)&&L.parentNode.nodeName!=="#document"&&(re=" translate("+c(ce)+" "+c(ne)+") "),le=re+" matrix("+H+" 0 0 "+Y+" "+(K*H+ue)+" "+(G*Y+ge)+") ",L.nodeName==="svg"){for(te=L.ownerDocument.createElementNS(a.svgNS,"g");L.firstChild;)te.appendChild(L.firstChild);L.appendChild(te)}else te=L,te.removeAttribute("x"),te.removeAttribute("y"),le=te.getAttribute("transform")+le;return te.setAttribute("transform",le),q}function j(L,$){for(;L&&(L=L.parentNode);)if(L.nodeName&&$.test(L.nodeName.replace("svg:",""))&&!L.getAttribute("instantiated_by_use"))return!0;return!1}a.parseSVGDocument=function(L,$,H,Y){if(L){V(L);var K=a.Object.__uid++,G,Q,ee=R(L),le=a.util.toArray(L.getElementsByTagName("*"));if(ee.crossOrigin=Y&&Y.crossOrigin,ee.svgUid=K,le.length===0&&a.isLikelyNode){le=L.selectNodes('//*[name(.)!="svg"]');var te=[];for(G=0,Q=le.length;G<Q;G++)te[G]=le[G];le=te}var Z=le.filter(function(ce){return R(ce),a.svgValidTagNamesRegEx.test(ce.nodeName.replace("svg:",""))&&!j(ce,a.svgInvalidAncestorsRegEx)});if(!Z||Z&&!Z.length){$&&$([],{});return}var ie={};le.filter(function(ce){return ce.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ce){var ne=ce.getAttribute("id");ie[ne]=a.util.toArray(ce.getElementsByTagName("*")).filter(function(z){return a.svgValidTagNamesRegEx.test(z.nodeName.replace("svg:",""))})}),a.gradientDefs[K]=a.getGradientDefs(L),a.cssRules[K]=a.getCSSRules(L),a.clipPaths[K]=ie,a.parseElements(Z,function(ce,ne){$&&($(ce,ee,ne,le),delete a.gradientDefs[K],delete a.cssRules[K],delete a.clipPaths[K])},u(ee),H,Y)}};function A(L,$){var H=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Y="xlink:href",K=$.getAttribute(Y).slice(1),G=M(L,K);if(G&&G.getAttribute(Y)&&A(L,G),H.forEach(function(ee){G&&!$.hasAttribute(ee)&&G.hasAttribute(ee)&&$.setAttribute(ee,G.getAttribute(ee))}),!$.children.length)for(var Q=G.cloneNode(!0);Q.firstChild;)$.appendChild(Q.firstChild);$.removeAttribute(Y)}var W=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");f(a,{parseFontDeclaration:function(L,$){var H=L.match(W);if(H){var Y=H[1],K=H[3],G=H[4],Q=H[5],ee=H[6];Y&&($.fontStyle=Y),K&&($.fontWeight=isNaN(parseFloat(K))?K:parseFloat(K)),G&&($.fontSize=c(G)),ee&&($.fontFamily=ee),Q&&($.lineHeight=Q==="normal"?1:Q)}},getGradientDefs:function(L){var $=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],H=N(L,$),Y,K=0,G={};for(K=H.length;K--;)Y=H[K],Y.getAttribute("xlink:href")&&A(L,Y),G[Y.getAttribute("id")]=Y;return G},parseAttributes:function(L,$,H){if(L){var Y,K={},G,Q;typeof H>"u"&&(H=L.getAttribute("svgUid")),L.parentNode&&a.svgValidParentsRegEx.test(L.parentNode.nodeName)&&(K=a.parseAttributes(L.parentNode,$,H));var ee=$.reduce(function(z,X){return Y=L.getAttribute(X),Y&&(z[X]=Y),z},{}),le=f(U(L,H),a.parseStyleAttribute(L));ee=f(ee,le),le[S]&&L.setAttribute(S,le[S]),G=Q=K.fontSize||a.Text.DEFAULT_SVG_FONT_SIZE,ee[b]&&(ee[b]=G=c(ee[b],Q));var te,Z,ie={};for(var ce in ee)te=_(ce),Z=E(te,ee[ce],K,G),ie[te]=Z;ie&&ie.font&&a.parseFontDeclaration(ie.font,ie);var ne=f(K,ie);return a.svgValidParentsRegEx.test(L.nodeName)?ne:P(ne)}},parseElements:function(L,$,H,Y,K){new a.ElementsParser(L,$,H,Y,K).parse()},parseStyleAttribute:function(L){var $={},H=L.getAttribute("style");return H&&(typeof H=="string"?B(H,$):I(H,$)),$},parsePointsAttribute:function(L){if(!L)return null;L=L.replace(/,/g," ").trim(),L=L.split(/\s+/);var $=[],H,Y;for(H=0,Y=L.length;H<Y;H+=2)$.push({x:parseFloat(L[H]),y:parseFloat(L[H+1])});return $},getCSSRules:function(L){var $=L.getElementsByTagName("style"),H,Y,K={},G;for(H=0,Y=$.length;H<Y;H++){var Q=$[H].textContent;Q=Q.replace(/\/\*[\s\S]*?\*\//g,""),Q.trim()!==""&&(G=Q.split("}"),G=G.filter(function(ee){return ee.trim()}),G.forEach(function(ee){var le=ee.split("{"),te={},Z=le[1].trim(),ie=Z.split(";").filter(function(X){return X.trim()});for(H=0,Y=ie.length;H<Y;H++){var ce=ie[H].split(":"),ne=ce[0].trim(),z=ce[1].trim();te[ne]=z}ee=le[0].trim(),ee.split(",").forEach(function(X){X=X.replace(/^svg/i,"").trim(),X!==""&&(K[X]?a.util.object.extend(K[X],te):K[X]=a.util.object.clone(te))})}))}return K},loadSVGFromURL:function(L,$,H,Y){L=L.replace(/^\n\s*/,"").trim(),new a.util.request(L,{method:"get",onComplete:K});function K(G){var Q=G.responseXML;if(!Q||!Q.documentElement)return $&&$(null),!1;a.parseSVGDocument(Q.documentElement,function(ee,le,te,Z){$&&$(ee,le,te,Z)},H,Y)}},loadSVGFromString:function(L,$,H,Y){var K=new a.window.DOMParser,G=K.parseFromString(L.trim(),"text/xml");a.parseSVGDocument(G.documentElement,function(Q,ee,le,te){$(Q,ee,le,te)},H,Y)}})}(e),t.ElementsParser=function(l,a,f,u,s,c){this.elements=l,this.callback=a,this.options=f,this.reviver=u,this.svgUid=f&&f.svgUid||0,this.parsingOptions=s,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=c},function(l){l.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},l.createObjects=function(){var a=this;this.elements.forEach(function(f,u){f.setAttribute("svgUid",a.svgUid),a.createObject(f,u)})},l.findTag=function(a){return t[t.util.string.capitalize(a.tagName.replace("svg:",""))]},l.createObject=function(a,f){var u=this.findTag(a);if(u&&u.fromElement)try{u.fromElement(a,this.createCallback(f,a),this.options)}catch(s){t.log(s)}else this.checkIfDone()},l.createCallback=function(a,f){var u=this;return function(s){var c;u.resolveGradient(s,f,"fill"),u.resolveGradient(s,f,"stroke"),s instanceof t.Image&&s._originalElement&&(c=s.parsePreserveAspectRatioAttribute(f)),s._removeTransformMatrix(c),u.resolveClipPath(s,f),u.reviver&&u.reviver(f,s),u.instances[a]=s,u.checkIfDone()}},l.extractPropertyDefinition=function(a,f,u){var s=a[f],c=this.regexUrl;if(c.test(s)){c.lastIndex=0;var d=c.exec(s)[1];return c.lastIndex=0,t[u][this.svgUid][d]}},l.resolveGradient=function(a,f,u){var s=this.extractPropertyDefinition(a,u,"gradientDefs");if(s){var c=f.getAttribute(u+"-opacity"),d=t.Gradient.fromElement(s,a,c,this.options);a.set(u,d)}},l.createClipPathCallback=function(a,f){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,f.push(u)}},l.resolveClipPath=function(a,f){var u=this.extractPropertyDefinition(a,"clipPath","clipPaths"),s,c,d,p,g,m;if(u){p=[],d=t.util.invertTransform(a.calcTransformMatrix());for(var v=u[0].parentNode,y=f;y.parentNode&&y.getAttribute("clip-path")!==a.clipPath;)y=y.parentNode;y.parentNode.appendChild(v);for(var w=0;w<u.length;w++)s=u[w],c=this.findTag(s),c.fromElement(s,this.createClipPathCallback(a,p),this.options);p.length===1?u=p[0]:u=new t.Group(p),g=t.util.multiplyTransformMatrices(d,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,y);var m=t.util.qrDecompose(g);u.flipX=!1,u.flipY=!1,u.set("scaleX",m.scaleX),u.set("scaleY",m.scaleY),u.angle=m.angle,u.skewX=m.skewX,u.skewY=0,u.setPositionByOrigin({x:m.translateX,y:m.translateY},"center","center"),a.clipPath=u}else delete a.clipPath},l.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(a){return a!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(l){var a=l.fabric||(l.fabric={});if(a.Point){a.warn("fabric.Point is already defined");return}a.Point=f;function f(u,s){this.x=u,this.y=s}f.prototype={type:"point",constructor:f,add:function(u){return new f(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new f(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new f(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new f(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new f(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new f(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,s){return typeof s>"u"&&(s=.5),s=Math.max(Math.min(1,s),0),new f(this.x+(u.x-this.x)*s,this.y+(u.y-this.y)*s)},distanceFrom:function(u){var s=this.x-u.x,c=this.y-u.y;return Math.sqrt(s*s+c*c)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new f(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new f(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,s){return this.x=u,this.y=s,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var s=this.x,c=this.y;this.x=u.x,this.y=u.y,u.x=s,u.y=c},clone:function(){return new f(this.x,this.y)}}}(e),function(l){var a=l.fabric||(l.fabric={});if(a.Intersection){a.warn("fabric.Intersection is already defined");return}function f(u){this.status=u,this.points=[]}a.Intersection=f,a.Intersection.prototype={constructor:f,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},a.Intersection.intersectLineLine=function(u,s,c,d){var p,g=(d.x-c.x)*(u.y-c.y)-(d.y-c.y)*(u.x-c.x),m=(s.x-u.x)*(u.y-c.y)-(s.y-u.y)*(u.x-c.x),v=(d.y-c.y)*(s.x-u.x)-(d.x-c.x)*(s.y-u.y);if(v!==0){var y=g/v,w=m/v;0<=y&&y<=1&&0<=w&&w<=1?(p=new f("Intersection"),p.appendPoint(new a.Point(u.x+y*(s.x-u.x),u.y+y*(s.y-u.y)))):p=new f}else g===0||m===0?p=new f("Coincident"):p=new f("Parallel");return p},a.Intersection.intersectLinePolygon=function(u,s,c){var d=new f,p=c.length,g,m,v,y;for(y=0;y<p;y++)g=c[y],m=c[(y+1)%p],v=f.intersectLineLine(u,s,g,m),d.appendPoints(v.points);return d.points.length>0&&(d.status="Intersection"),d},a.Intersection.intersectPolygonPolygon=function(u,s){var c=new f,d=u.length,p;for(p=0;p<d;p++){var g=u[p],m=u[(p+1)%d],v=f.intersectLinePolygon(g,m,s);c.appendPoints(v.points)}return c.points.length>0&&(c.status="Intersection"),c},a.Intersection.intersectPolygonRectangle=function(u,s,c){var d=s.min(c),p=s.max(c),g=new a.Point(p.x,d.y),m=new a.Point(d.x,p.y),v=f.intersectLinePolygon(d,g,u),y=f.intersectLinePolygon(g,p,u),w=f.intersectLinePolygon(p,m,u),b=f.intersectLinePolygon(m,d,u),S=new f;return S.appendPoints(v.points),S.appendPoints(y.points),S.appendPoints(w.points),S.appendPoints(b.points),S.points.length>0&&(S.status="Intersection"),S}}(e),function(l){var a=l.fabric||(l.fabric={});if(a.Color){a.warn("fabric.Color is already defined.");return}function f(s){s?this._tryParsingColor(s):this.setSource([0,0,0,1])}a.Color=f,a.Color.prototype={_tryParsingColor:function(s){var c;s in f.colorNameMap&&(s=f.colorNameMap[s]),s==="transparent"&&(c=[255,255,255,0]),c||(c=f.sourceFromHex(s)),c||(c=f.sourceFromRgb(s)),c||(c=f.sourceFromHsl(s)),c||(c=[0,0,0,1]),c&&this.setSource(c)},_rgbToHsl:function(s,c,d){s/=255,c/=255,d/=255;var p,g,m,v=a.util.array.max([s,c,d]),y=a.util.array.min([s,c,d]);if(m=(v+y)/2,v===y)p=g=0;else{var w=v-y;switch(g=m>.5?w/(2-v-y):w/(v+y),v){case s:p=(c-d)/w+(c<d?6:0);break;case c:p=(d-s)/w+2;break;case d:p=(s-c)/w+4;break}p/=6}return[Math.round(p*360),Math.round(g*100),Math.round(m*100)]},getSource:function(){return this._source},setSource:function(s){this._source=s},toRgb:function(){var s=this.getSource();return"rgb("+s[0]+","+s[1]+","+s[2]+")"},toRgba:function(){var s=this.getSource();return"rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"},toHsl:function(){var s=this.getSource(),c=this._rgbToHsl(s[0],s[1],s[2]);return"hsl("+c[0]+","+c[1]+"%,"+c[2]+"%)"},toHsla:function(){var s=this.getSource(),c=this._rgbToHsl(s[0],s[1],s[2]);return"hsla("+c[0]+","+c[1]+"%,"+c[2]+"%,"+s[3]+")"},toHex:function(){var s=this.getSource(),c,d,p;return c=s[0].toString(16),c=c.length===1?"0"+c:c,d=s[1].toString(16),d=d.length===1?"0"+d:d,p=s[2].toString(16),p=p.length===1?"0"+p:p,c.toUpperCase()+d.toUpperCase()+p.toUpperCase()},toHexa:function(){var s=this.getSource(),c;return c=Math.round(s[3]*255),c=c.toString(16),c=c.length===1?"0"+c:c,this.toHex()+c.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(s){var c=this.getSource();return c[3]=s,this.setSource(c),this},toGrayscale:function(){var s=this.getSource(),c=parseInt((s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),10),d=s[3];return this.setSource([c,c,c,d]),this},toBlackWhite:function(s){var c=this.getSource(),d=(c[0]*.3+c[1]*.59+c[2]*.11).toFixed(0),p=c[3];return s=s||127,d=Number(d)<Number(s)?0:255,this.setSource([d,d,d,p]),this},overlayWith:function(s){s instanceof f||(s=new f(s));var c=[],d=this.getAlpha(),p=.5,g=this.getSource(),m=s.getSource(),v;for(v=0;v<3;v++)c.push(Math.round(g[v]*(1-p)+m[v]*p));return c[3]=d,this.setSource(c),this}},a.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,a.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,a.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,a.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(s,c,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?s+(c-s)*6*d:d<1/2?c:d<2/3?s+(c-s)*(2/3-d)*6:s}a.Color.fromRgb=function(s){return f.fromSource(f.sourceFromRgb(s))},a.Color.sourceFromRgb=function(s){var c=s.match(f.reRGBa);if(c){var d=parseInt(c[1],10)/(/%$/.test(c[1])?100:1)*(/%$/.test(c[1])?255:1),p=parseInt(c[2],10)/(/%$/.test(c[2])?100:1)*(/%$/.test(c[2])?255:1),g=parseInt(c[3],10)/(/%$/.test(c[3])?100:1)*(/%$/.test(c[3])?255:1);return[parseInt(d,10),parseInt(p,10),parseInt(g,10),c[4]?parseFloat(c[4]):1]}},a.Color.fromRgba=f.fromRgb,a.Color.fromHsl=function(s){return f.fromSource(f.sourceFromHsl(s))},a.Color.sourceFromHsl=function(s){var c=s.match(f.reHSLa);if(c){var d=(parseFloat(c[1])%360+360)%360/360,p=parseFloat(c[2])/(/%$/.test(c[2])?100:1),g=parseFloat(c[3])/(/%$/.test(c[3])?100:1),m,v,y;if(p===0)m=v=y=g;else{var w=g<=.5?g*(p+1):g+p-g*p,b=g*2-w;m=u(b,w,d+1/3),v=u(b,w,d),y=u(b,w,d-1/3)}return[Math.round(m*255),Math.round(v*255),Math.round(y*255),c[4]?parseFloat(c[4]):1]}},a.Color.fromHsla=f.fromHsl,a.Color.fromHex=function(s){return f.fromSource(f.sourceFromHex(s))},a.Color.sourceFromHex=function(s){if(s.match(f.reHex)){var c=s.slice(s.indexOf("#")+1),d=c.length===3||c.length===4,p=c.length===8||c.length===4,g=d?c.charAt(0)+c.charAt(0):c.substring(0,2),m=d?c.charAt(1)+c.charAt(1):c.substring(2,4),v=d?c.charAt(2)+c.charAt(2):c.substring(4,6),y=p?d?c.charAt(3)+c.charAt(3):c.substring(6,8):"FF";return[parseInt(g,16),parseInt(m,16),parseInt(v,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},a.Color.fromSource=function(s){var c=new f;return c.setSource(s),c}}(e),function(l){var a=l.fabric||(l.fabric={}),f=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],s={},c="left",d="top",p="right",g="bottom",m="center",v={top:g,bottom:d,left:p,right:c,center:m},y=a.util.radiansToDegrees,w=Math.sign||function(te){return(te>0)-(te<0)||+te};function b(te,Z){var ie=te.angle+y(Math.atan2(Z.y,Z.x))+360;return Math.round(ie%360/45)}function S(te,Z){var ie=Z.transform.target,ce=ie.canvas,ne=a.util.object.clone(Z);ne.target=ie,ce&&ce.fire("object:"+te,ne),ie.fire(te,Z)}function _(te,Z){var ie=Z.canvas,ce=ie.uniScaleKey,ne=te[ce];return ie.uniformScaling&&!ne||!ie.uniformScaling&&ne}function E(te){return te.originX===m&&te.originY===m}function C(te,Z,ie){var ce=te.lockScalingX,ne=te.lockScalingY;return!!(ce&&ne||!Z&&(ce||ne)&&ie||ce&&Z==="x"||ne&&Z==="y")}function P(te,Z,ie){var ce="not-allowed",ne=_(te,ie),z="";if(Z.x!==0&&Z.y===0?z="x":Z.x===0&&Z.y!==0&&(z="y"),C(ie,z,ne))return ce;var X=b(ie,Z);return f[X]+"-resize"}function N(te,Z,ie){var ce="not-allowed";if(Z.x!==0&&ie.lockSkewingY||Z.y!==0&&ie.lockSkewingX)return ce;var ne=b(ie,Z)%4;return u[ne]+"-resize"}function B(te,Z,ie){return te[ie.canvas.altActionKey]?s.skewCursorStyleHandler(te,Z,ie):s.scaleCursorStyleHandler(te,Z,ie)}function I(te,Z,ie){var ce=te[ie.canvas.altActionKey];if(Z.x===0)return ce?"skewX":"scaleY";if(Z.y===0)return ce?"skewY":"scaleX"}function U(te,Z,ie){return ie.lockRotation?"not-allowed":Z.cursorStyle}function D(te,Z,ie,ce){return{e:te,transform:Z,pointer:{x:ie,y:ce}}}function F(te){return function(Z,ie,ce,ne){var z=ie.target,X=z.getCenterPoint(),J=z.translateToOriginPoint(X,ie.originX,ie.originY),oe=te(Z,ie,ce,ne);return z.setPositionByOrigin(J,ie.originX,ie.originY),oe}}function O(te,Z){return function(ie,ce,ne,z){var X=Z(ie,ce,ne,z);return X&&S(te,D(ie,ce,ne,z)),X}}function M(te,Z,ie,ce,ne){var z=te.target,X=z.controls[te.corner],J=z.canvas.getZoom(),oe=z.padding/J,q=z.toLocalPoint(new a.Point(ce,ne),Z,ie);return q.x>=oe&&(q.x-=oe),q.x<=-oe&&(q.x+=oe),q.y>=oe&&(q.y-=oe),q.y<=oe&&(q.y+=oe),q.x-=X.offsetX,q.y-=X.offsetY,q}function V(te){return te.flipX!==te.flipY}function k(te,Z,ie,ce,ne){if(te[Z]!==0){var z=te._getTransformedDimensions()[ce],X=ne/z*te[ie];te.set(ie,X)}}function R(te,Z,ie,ce){var ne=Z.target,z=ne._getTransformedDimensions(0,ne.skewY),X=M(Z,Z.originX,Z.originY,ie,ce),J=Math.abs(X.x*2)-z.x,oe=ne.skewX,q;J<2?q=0:(q=y(Math.atan2(J/ne.scaleX,z.y/ne.scaleY)),Z.originX===c&&Z.originY===g&&(q=-q),Z.originX===p&&Z.originY===d&&(q=-q),V(ne)&&(q=-q));var re=oe!==q;if(re){var ue=ne._getTransformedDimensions().y;ne.set("skewX",q),k(ne,"skewY","scaleY","y",ue)}return re}function j(te,Z,ie,ce){var ne=Z.target,z=ne._getTransformedDimensions(ne.skewX,0),X=M(Z,Z.originX,Z.originY,ie,ce),J=Math.abs(X.y*2)-z.y,oe=ne.skewY,q;J<2?q=0:(q=y(Math.atan2(J/ne.scaleY,z.x/ne.scaleX)),Z.originX===c&&Z.originY===g&&(q=-q),Z.originX===p&&Z.originY===d&&(q=-q),V(ne)&&(q=-q));var re=oe!==q;if(re){var ue=ne._getTransformedDimensions().x;ne.set("skewY",q),k(ne,"skewX","scaleX","x",ue)}return re}function A(te,Z,ie,ce){var ne=Z.target,z=ne.skewX,X,J=Z.originY;if(ne.lockSkewingX)return!1;if(z===0){var oe=M(Z,m,m,ie,ce);oe.x>0?X=c:X=p}else z>0&&(X=J===d?c:p),z<0&&(X=J===d?p:c),V(ne)&&(X=X===c?p:c);Z.originX=X;var q=O("skewing",F(R));return q(te,Z,ie,ce)}function W(te,Z,ie,ce){var ne=Z.target,z=ne.skewY,X,J=Z.originX;if(ne.lockSkewingY)return!1;if(z===0){var oe=M(Z,m,m,ie,ce);oe.y>0?X=d:X=g}else z>0&&(X=J===c?d:g),z<0&&(X=J===c?g:d),V(ne)&&(X=X===d?g:d);Z.originY=X;var q=O("skewing",F(j));return q(te,Z,ie,ce)}function L(te,Z,ie,ce){var ne=Z,z=ne.target,X=z.translateToOriginPoint(z.getCenterPoint(),ne.originX,ne.originY);if(z.lockRotation)return!1;var J=Math.atan2(ne.ey-X.y,ne.ex-X.x),oe=Math.atan2(ce-X.y,ie-X.x),q=y(oe-J+ne.theta),re=!0;if(z.snapAngle>0){var ue=z.snapAngle,ge=z.snapThreshold||ue,Ce=Math.ceil(q/ue)*ue,Te=Math.floor(q/ue)*ue;Math.abs(q-Te)<ge?q=Te:Math.abs(q-Ce)<ge&&(q=Ce)}return q<0&&(q=360+q),q%=360,re=z.angle!==q,z.angle=q,re}function $(te,Z,ie,ce,ne){ne=ne||{};var z=Z.target,X=z.lockScalingX,J=z.lockScalingY,oe=ne.by,q,re,ue,ge,Ce=_(te,z),Te=C(z,oe,Ce),Ae,Be,ze=Z.gestureScale;if(Te)return!1;if(ze)re=Z.scaleX*ze,ue=Z.scaleY*ze;else{if(q=M(Z,Z.originX,Z.originY,ie,ce),Ae=oe!=="y"?w(q.x):1,Be=oe!=="x"?w(q.y):1,Z.signX||(Z.signX=Ae),Z.signY||(Z.signY=Be),z.lockScalingFlip&&(Z.signX!==Ae||Z.signY!==Be))return!1;if(ge=z._getTransformedDimensions(),Ce&&!oe){var Je=Math.abs(q.x)+Math.abs(q.y),Ee=Z.original,Pt=Math.abs(ge.x*Ee.scaleX/z.scaleX)+Math.abs(ge.y*Ee.scaleY/z.scaleY),wt=Je/Pt;re=Ee.scaleX*wt,ue=Ee.scaleY*wt}else re=Math.abs(q.x*z.scaleX/ge.x),ue=Math.abs(q.y*z.scaleY/ge.y);E(Z)&&(re*=2,ue*=2),Z.signX!==Ae&&oe!=="y"&&(Z.originX=v[Z.originX],re*=-1,Z.signX=Ae),Z.signY!==Be&&oe!=="x"&&(Z.originY=v[Z.originY],ue*=-1,Z.signY=Be)}var It=z.scaleX,ri=z.scaleY;return oe?(oe==="x"&&z.set("scaleX",re),oe==="y"&&z.set("scaleY",ue)):(!X&&z.set("scaleX",re),!J&&z.set("scaleY",ue)),It!==z.scaleX||ri!==z.scaleY}function H(te,Z,ie,ce){return $(te,Z,ie,ce)}function Y(te,Z,ie,ce){return $(te,Z,ie,ce,{by:"x"})}function K(te,Z,ie,ce){return $(te,Z,ie,ce,{by:"y"})}function G(te,Z,ie,ce){return te[Z.target.canvas.altActionKey]?s.skewHandlerX(te,Z,ie,ce):s.scalingY(te,Z,ie,ce)}function Q(te,Z,ie,ce){return te[Z.target.canvas.altActionKey]?s.skewHandlerY(te,Z,ie,ce):s.scalingX(te,Z,ie,ce)}function ee(te,Z,ie,ce){var ne=Z.target,z=M(Z,Z.originX,Z.originY,ie,ce),X=ne.strokeWidth/(ne.strokeUniform?ne.scaleX:1),J=E(Z)?2:1,oe=ne.width,q=Math.abs(z.x*J/ne.scaleX)-X;return ne.set("width",Math.max(q,0)),oe!==q}function le(te,Z,ie,ce){var ne=Z.target,z=ie-Z.offsetX,X=ce-Z.offsetY,J=!ne.get("lockMovementX")&&ne.left!==z,oe=!ne.get("lockMovementY")&&ne.top!==X;return J&&ne.set("left",z),oe&&ne.set("top",X),(J||oe)&&S("moving",D(te,Z,ie,ce)),J||oe}s.scaleCursorStyleHandler=P,s.skewCursorStyleHandler=N,s.scaleSkewCursorStyleHandler=B,s.rotationWithSnapping=O("rotating",F(L)),s.scalingEqually=O("scaling",F(H)),s.scalingX=O("scaling",F(Y)),s.scalingY=O("scaling",F(K)),s.scalingYOrSkewingX=G,s.scalingXOrSkewingY=Q,s.changeWidth=O("resizing",F(ee)),s.skewHandlerX=A,s.skewHandlerY=W,s.dragHandler=le,s.scaleOrSkewActionName=I,s.rotationStyleHandler=U,s.fireEvent=S,s.wrapWithFixedAnchor=F,s.wrapWithFireEvent=O,s.getLocalPoint=M,a.controlsUtils=s}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.degreesToRadians,u=a.controlsUtils;function s(d,p,g,m,v){m=m||{};var y=this.sizeX||m.cornerSize||v.cornerSize,w=this.sizeY||m.cornerSize||v.cornerSize,b=typeof m.transparentCorners<"u"?m.transparentCorners:v.transparentCorners,S=b?"stroke":"fill",_=!b&&(m.cornerStrokeColor||v.cornerStrokeColor),E=p,C=g,P;d.save(),d.fillStyle=m.cornerColor||v.cornerColor,d.strokeStyle=m.cornerStrokeColor||v.cornerStrokeColor,y>w?(P=y,d.scale(1,w/y),C=g*y/w):w>y?(P=w,d.scale(y/w,1),E=p*w/y):P=y,d.lineWidth=1,d.beginPath(),d.arc(E,C,P/2,0,2*Math.PI,!1),d[S](),_&&d.stroke(),d.restore()}function c(d,p,g,m,v){m=m||{};var y=this.sizeX||m.cornerSize||v.cornerSize,w=this.sizeY||m.cornerSize||v.cornerSize,b=typeof m.transparentCorners<"u"?m.transparentCorners:v.transparentCorners,S=b?"stroke":"fill",_=!b&&(m.cornerStrokeColor||v.cornerStrokeColor),E=y/2,C=w/2;d.save(),d.fillStyle=m.cornerColor||v.cornerColor,d.strokeStyle=m.cornerStrokeColor||v.cornerStrokeColor,d.lineWidth=1,d.translate(p,g),d.rotate(f(v.angle)),d[S+"Rect"](-E,-C,y,w),_&&d.strokeRect(-E,-C,y,w),d.restore()}u.renderCircleControl=s,u.renderSquareControl=c}(e),function(l){var a=l.fabric||(l.fabric={});function f(u){for(var s in u)this[s]=u[s]}a.Control=f,a.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,s){return s.cursorStyle},getActionName:function(u,s){return s.actionName},getVisibility:function(u,s){var c=u._controlsVisibility;return c&&typeof c[s]<"u"?c[s]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,s){var c=a.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},s);return c},calcCornerCoords:function(u,s,c,d,p){var g,m,v,y,w=p?this.touchSizeX:this.sizeX,b=p?this.touchSizeY:this.sizeY;if(w&&b&&w!==b){var S=Math.atan2(b,w),_=Math.sqrt(w*w+b*b)/2,E=S-a.util.degreesToRadians(u),C=Math.PI/2-S-a.util.degreesToRadians(u);g=_*a.util.cos(E),m=_*a.util.sin(E),v=_*a.util.cos(C),y=_*a.util.sin(C)}else{var P=w&&b?w:s;_=P*.7071067812;var E=a.util.degreesToRadians(45-u);g=v=_*a.util.cos(E),m=y=_*a.util.sin(E)}return{tl:{x:c-y,y:d-v},tr:{x:c+g,y:d-m},bl:{x:c-g,y:d+m},br:{x:c+y,y:d+v}}},render:function(u,s,c,d,p){switch(d=d||{},d.cornerStyle||p.cornerStyle){case"circle":a.controlsUtils.renderCircleControl.call(this,u,s,c,d,p);break;default:a.controlsUtils.renderSquareControl.call(this,u,s,c,d,p)}}}}(e),function(){function l(c,d){var p=c.getAttribute("style"),g=c.getAttribute("offset")||0,m,v,y,w;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,p){var b=p.split(/\s*;\s*/);for(b[b.length-1]===""&&b.pop(),w=b.length;w--;){var S=b[w].split(/\s*:\s*/),_=S[0].trim(),E=S[1].trim();_==="stop-color"?m=E:_==="stop-opacity"&&(y=E)}}return m||(m=c.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=c.getAttribute("stop-opacity")),m=new t.Color(m),v=m.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=v*d,{offset:g,color:m.toRgb(),opacity:y}}function a(c){return{x1:c.getAttribute("x1")||0,y1:c.getAttribute("y1")||0,x2:c.getAttribute("x2")||"100%",y2:c.getAttribute("y2")||0}}function f(c){return{x1:c.getAttribute("fx")||c.getAttribute("cx")||"50%",y1:c.getAttribute("fy")||c.getAttribute("cy")||"50%",r1:0,x2:c.getAttribute("cx")||"50%",y2:c.getAttribute("cy")||"50%",r2:c.getAttribute("r")||"50%"}}var u=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(c){c||(c={}),c.coords||(c.coords={});var d,p=this;Object.keys(c).forEach(function(g){p[g]=c[g]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,d={x1:c.coords.x1||0,y1:c.coords.y1||0,x2:c.coords.x2||0,y2:c.coords.y2||0},this.type==="radial"&&(d.r1=c.coords.r1||0,d.r2=c.coords.r2||0),this.coords=d,this.colorStops=c.colorStops.slice()},addColorStop:function(c){for(var d in c){var p=new t.Color(c[d]);this.colorStops.push({offset:parseFloat(d),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(c){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,d,c),d},toSVG:function(c,v){var p=u(this.coords,!0),g,m,v=v||{},y,w,b=u(this.colorStops,!0),S=p.r1>p.r2,_=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),E=-this.offsetX,C=-this.offsetY,P=!!v.additionalTransform,N=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(b.sort(function(F,O){return F.offset-O.offset}),N==="objectBoundingBox"?(E/=c.width,C/=c.height):(E+=c.width/2,C+=c.height/2),c.type==="path"&&this.gradientUnits!=="percentage"&&(E-=c.pathOffset.x,C-=c.pathOffset.y),_[4]-=E,_[5]-=C,w='id="SVGID_'+this.id+'" gradientUnits="'+N+'"',w+=' gradientTransform="'+(P?v.additionalTransform+" ":"")+t.util.matrixToSVG(_)+'" ',this.type==="linear"?y=["<linearGradient ",w,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",w,' cx="',S?p.x1:p.x2,'" cy="',S?p.y1:p.y2,'" r="',S?p.r1:p.r2,'" fx="',S?p.x2:p.x1,'" fy="',S?p.y2:p.y1,`">
`]),this.type==="radial"){if(S)for(b=b.concat(),b.reverse(),g=0,m=b.length;g<m;g++)b[g].offset=1-b[g].offset;var B=Math.min(p.r1,p.r2);if(B>0){var I=Math.max(p.r1,p.r2),U=B/I;for(g=0,m=b.length;g<m;g++)b[g].offset+=U*(1-b[g].offset)}}for(g=0,m=b.length;g<m;g++){var D=b[g];y.push("<stop ",'offset="',D.offset*100+"%",'" style="stop-color:',D.color,typeof D.opacity<"u"?";stop-opacity: "+D.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(c){var d,p=t.util.object.clone(this.coords),g,m;if(this.type){for(this.type==="linear"?d=c.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(d=c.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),g=0,m=this.colorStops.length;g<m;g++){var v=this.colorStops[g].color,y=this.colorStops[g].opacity,w=this.colorStops[g].offset;typeof y<"u"&&(v=new t.Color(v).setAlpha(y).toRgba()),d.addColorStop(w,v)}return d}}}),t.util.object.extend(t.Gradient,{fromElement:function(c,d,p,g){var m=parseFloat(p)/(/%$/.test(p)?100:1);m=m<0?0:m>1?1:m,isNaN(m)&&(m=1);var v=c.getElementsByTagName("stop"),y,w=c.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",b=c.getAttribute("gradientTransform")||"",S=[],_,E,C=0,P=0,N;for(c.nodeName==="linearGradient"||c.nodeName==="LINEARGRADIENT"?(y="linear",_=a(c)):(y="radial",_=f(c)),E=v.length;E--;)S.push(l(v[E],m));N=t.parseTransformAttribute(b),s(d,_,g,w),w==="pixels"&&(C=-d.left,P=-d.top);var B=new t.Gradient({id:c.getAttribute("id"),type:y,coords:_,colorStops:S,gradientUnits:w,gradientTransform:N,offsetX:C,offsetY:P});return B}});function s(c,d,p,g){var m,v;Object.keys(d).forEach(function(y){m=d[y],m==="Infinity"?v=1:m==="-Infinity"?v=0:(v=parseFloat(d[y],10),typeof m=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(m)&&(v*=.01,g==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(v*=p.viewBoxWidth||p.width),(y==="y1"||y==="y2")&&(v*=p.viewBoxHeight||p.height)))),d[y]=v})}}(),function(){var l=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(a,f){if(a||(a={}),this.id=t.Object.__uid++,this.setOptions(a),!a.source||a.source&&typeof a.source!="string"){f&&f(this);return}else{var u=this;this.source=t.util.createImage(),t.util.loadImage(a.source,function(s,c){u.source=s,f&&f(u,c)},null,this.crossOrigin)}},toObject:function(a){var f=t.Object.NUM_FRACTION_DIGITS,u,s;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),s={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:l(this.offsetX,f),offsetY:l(this.offsetY,f),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,s,a),s},toSVG:function(a){var f=typeof this.source=="function"?this.source():this.source,u=f.width/a.width,s=f.height/a.height,c=this.offsetX/a.width,d=this.offsetY/a.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(s=1,d&&(s+=Math.abs(d))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,c&&(u+=Math.abs(c))),f.src?p=f.src:f.toDataURL&&(p=f.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+c+'" y="'+d+'" width="'+u+'" height="'+s+`">
<image x="0" y="0" width="`+f.width+'" height="'+f.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(a){for(var f in a)this[f]=a[f]},toLive:function(a){var f=this.source;return!f||typeof f.src<"u"&&(!f.complete||f.naturalWidth===0||f.naturalHeight===0)?"":a.createPattern(f,this.repeat)}})}(),function(l){var a=l.fabric||(l.fabric={}),f=a.util.toFixed;if(a.Shadow){a.warn("fabric.Shadow is already defined.");return}a.Shadow=a.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var s in u)this[s]=u[s];this.id=a.Object.__uid++},_parseShadow:function(u){var s=u.trim(),c=a.Shadow.reOffsetsAndBlur.exec(s)||[],d=s.replace(a.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:d.trim(),offsetX:parseFloat(c[1],10)||0,offsetY:parseFloat(c[2],10)||0,blur:parseFloat(c[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var s=40,c=40,d=a.Object.NUM_FRACTION_DIGITS,p=a.util.rotateVector({x:this.offsetX,y:this.offsetY},a.util.degreesToRadians(-u.angle)),g=20,m=new a.Color(this.color);return u.width&&u.height&&(s=f((Math.abs(p.x)+this.blur)/u.width,d)*100+g,c=f((Math.abs(p.y)+this.blur)/u.height,d)*100+g),u.flipX&&(p.x*=-1),u.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+c+'%" height="'+(100+2*c)+'%" x="-'+s+'%" width="'+(100+2*s)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+f(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+f(p.x,d)+'" dy="'+f(p.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+m.toRgb()+'" flood-opacity="'+m.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},s=a.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(c){this[c]!==s[c]&&(u[c]=this[c])},this),u}}),a.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var l=t.util.object.extend,a=t.util.getElementOffset,f=t.util.removeFromArray,u=t.util.toFixed,s=t.util.transformPoint,c=t.util.invertTransform,d=t.util.getNodeCanvas,p=t.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(m,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(m,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(m,v){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(m),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,y),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,y),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,y),v.overlayColor&&this.setOverlayColor(v.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var m=t.devicePixelRatio;this.__initRetinaScaling(m,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(m,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(m,v,y){v.setAttribute("width",this.width*m),v.setAttribute("height",this.height*m),y.scale(m,m)},calcOffset:function(){return this._offset=a(this.lowerCanvasEl),this},setOverlayImage:function(m,v,y){return this.__setBgOverlayImage("overlayImage",m,v,y)},setBackgroundImage:function(m,v,y){return this.__setBgOverlayImage("backgroundImage",m,v,y)},setOverlayColor:function(m,v){return this.__setBgOverlayColor("overlayColor",m,v)},setBackgroundColor:function(m,v){return this.__setBgOverlayColor("backgroundColor",m,v)},__setBgOverlayImage:function(m,v,y,w){return typeof v=="string"?t.util.loadImage(v,function(b,S){if(b){var _=new t.Image(b,w);this[m]=_,_.canvas=this}y&&y(b,S)},this,w&&w.crossOrigin):(w&&v.setOptions(w),this[m]=v,v&&(v.canvas=this),y&&y(v,!1)),this},__setBgOverlayColor:function(m,v,y){return this[m]=v,this._initGradient(v,m),this._initPattern(v,m,y),this},_createCanvasElement:function(){var m=p();if(!m||(m.style||(m.style={}),typeof m.getContext>"u"))throw g;return m},_initOptions:function(m){var v=this.lowerCanvasEl;this._setOptions(m),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(m){m&&m.getContext?this.lowerCanvasEl=m:this.lowerCanvasEl=t.util.getById(m)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(m,v){return this.setDimensions({width:m},v)},setHeight:function(m,v){return this.setDimensions({height:m},v)},setDimensions:function(m,v){var y;v=v||{};for(var w in m)y=m[w],v.cssOnly||(this._setBackstoreDimension(w,m[w]),y+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(w,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(m,v){return this.lowerCanvasEl[m]=v,this.upperCanvasEl&&(this.upperCanvasEl[m]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[m]=v),this[m]=v,this},_setCssDimension:function(m,v){return this.lowerCanvasEl.style[m]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[m]=v),this.wrapperEl&&(this.wrapperEl.style[m]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(m){var v=this._activeObject,y=this.backgroundImage,w=this.overlayImage,b,S,_;for(this.viewportTransform=m,S=0,_=this._objects.length;S<_;S++)b=this._objects[S],b.group||b.setCoords(!0);return v&&v.setCoords(),y&&y.setCoords(!0),w&&w.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(m,v){var y=m,w=this.viewportTransform.slice(0);m=s(m,c(this.viewportTransform)),w[0]=v,w[3]=v;var b=s(m,w);return w[4]+=y.x-b.x,w[5]+=y.y-b.y,this.setViewportTransform(w)},setZoom:function(m){return this.zoomToPoint(new t.Point(0,0),m),this},absolutePan:function(m){var v=this.viewportTransform.slice(0);return v[4]=-m.x,v[5]=-m.y,this.setViewportTransform(v)},relativePan:function(m){return this.absolutePan(new t.Point(-m.x-this.viewportTransform[4],-m.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(m){this.stateful&&m.setupState(),m._set("canvas",this),m.setCoords(),this.fire("object:added",{target:m}),m.fire("added")},_onObjectRemoved:function(m){this.fire("object:removed",{target:m}),m.fire("removed"),delete m.canvas},clearContext:function(m){return m.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var m=this.contextContainer;return this.renderCanvas(m,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var m={},v=this.width,y=this.height,w=c(this.viewportTransform);return m.tl=s({x:0,y:0},w),m.br=s({x:v,y},w),m.tr=new t.Point(m.br.x,m.tl.y),m.bl=new t.Point(m.tl.x,m.br.y),this.vptCoords=m,m},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(m,v){var y=this.viewportTransform,w=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(m),t.util.setImageSmoothing(m,this.imageSmoothingEnabled),this.fire("before:render",{ctx:m}),this._renderBackground(m),m.save(),m.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(m,v),m.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(m),w&&(w.canvas=this,w.shouldCache(),w._transformDone=!0,w.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(m)),this._renderOverlay(m),this.controlsAboveOverlay&&this.interactive&&this.drawControls(m),this.fire("after:render",{ctx:m})},drawClipPathOnCanvas:function(m){var v=this.viewportTransform,y=this.clipPath;m.save(),m.transform(v[0],v[1],v[2],v[3],v[4],v[5]),m.globalCompositeOperation="destination-in",y.transform(m),m.scale(1/y.zoomX,1/y.zoomY),m.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),m.restore()},_renderObjects:function(m,v){var y,w;for(y=0,w=v.length;y<w;++y)v[y]&&v[y].render(m)},_renderBackgroundOrOverlay:function(m,v){var y=this[v+"Color"],w=this[v+"Image"],b=this.viewportTransform,S=this[v+"Vpt"];if(!(!y&&!w)){if(y){m.save(),m.beginPath(),m.moveTo(0,0),m.lineTo(this.width,0),m.lineTo(this.width,this.height),m.lineTo(0,this.height),m.closePath(),m.fillStyle=y.toLive?y.toLive(m,this):y,S&&m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),m.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var _=y.gradientTransform||y.patternTransform;_&&m.transform(_[0],_[1],_[2],_[3],_[4],_[5]),m.fill(),m.restore()}w&&(m.save(),S&&m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),w.render(m),m.restore())}},_renderBackground:function(m){this._renderBackgroundOrOverlay(m,"background")},_renderOverlay:function(m){this._renderBackgroundOrOverlay(m,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(m){return this._centerObject(m,new t.Point(this.getCenterPoint().x,m.getCenterPoint().y))},centerObjectV:function(m){return this._centerObject(m,new t.Point(m.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(m){var v=this.getCenterPoint();return this._centerObject(m,v)},viewportCenterObject:function(m){var v=this.getVpCenter();return this._centerObject(m,v)},viewportCenterObjectH:function(m){var v=this.getVpCenter();return this._centerObject(m,new t.Point(v.x,m.getCenterPoint().y)),this},viewportCenterObjectV:function(m){var v=this.getVpCenter();return this._centerObject(m,new t.Point(m.getCenterPoint().x,v.y))},getVpCenter:function(){var m=this.getCenterPoint(),v=c(this.viewportTransform);return s(m,v)},_centerObject:function(m,v){return m.setPositionByOrigin(v,"center","center"),m.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(m){return this.toDatalessObject(m)},toObject:function(m){return this._toObjectMethod("toObject",m)},toDatalessObject:function(m){return this._toObjectMethod("toDatalessObject",m)},_toObjectMethod:function(m,v){var y=this.clipPath,w={version:t.version,objects:this._toObjects(m,v)};return y&&!y.excludeFromExport&&(w.clipPath=this._toObject(this.clipPath,m,v)),l(w,this.__serializeBgOverlay(m,v)),t.util.populateWithProperties(this,w,v),w},_toObjects:function(m,v){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,m,v)},this)},_toObject:function(m,v,y){var w;this.includeDefaultValues||(w=m.includeDefaultValues,m.includeDefaultValues=!1);var b=m[v](y);return this.includeDefaultValues||(m.includeDefaultValues=w),b},__serializeBgOverlay:function(m,v){var y={},w=this.backgroundImage,b=this.overlayImage,S=this.backgroundColor,_=this.overlayColor;return S&&S.toObject?S.excludeFromExport||(y.background=S.toObject(v)):S&&(y.background=S),_&&_.toObject?_.excludeFromExport||(y.overlay=_.toObject(v)):_&&(y.overlay=_),w&&!w.excludeFromExport&&(y.backgroundImage=this._toObject(w,m,v)),b&&!b.excludeFromExport&&(y.overlayImage=this._toObject(b,m,v)),y},svgViewportTransformation:!0,toSVG:function(m,v){m||(m={}),m.reviver=v;var y=[];return this._setSVGPreamble(y,m),this._setSVGHeader(y,m),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",v),this._setSVGObjects(y,v),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",v),y.push("</svg>"),y.join("")},_setSVGPreamble:function(m,v){v.suppressPreamble||m.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(m,v){var y=v.width||this.width,w=v.height||this.height,b,S='viewBox="0 0 '+this.width+" "+this.height+'" ',_=t.Object.NUM_FRACTION_DIGITS;v.viewBox?S='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(b=this.viewportTransform,S='viewBox="'+u(-b[4]/b[0],_)+" "+u(-b[5]/b[3],_)+" "+u(this.width/b[0],_)+" "+u(this.height/b[3],_)+'" '),m.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',w,'" ',S,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(m){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(m.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var m=this,v=["background","overlay"].map(function(y){var w=m[y+"Color"];if(w&&w.toLive){var b=m[y+"Vpt"],S=m.viewportTransform,_={width:m.width/(b?S[0]:1),height:m.height/(b?S[3]:1)};return w.toSVG(_,{additionalTransform:b?t.util.matrixToSVG(S):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var m="",v={},y,w,b,S,_,E,C,P,N,B=t.fontPaths,I=[];for(this._objects.forEach(function D(F){I.push(F),F._objects&&F._objects.forEach(D)}),P=0,N=I.length;P<N;P++)if(y=I[P],w=y.fontFamily,!(y.type.indexOf("text")===-1||v[w]||!B[w])&&(v[w]=!0,!!y.styles)){b=y.styles;for(_ in b){S=b[_];for(C in S)E=S[C],w=E.fontFamily,!v[w]&&B[w]&&(v[w]=!0)}}for(var U in v)m+=[`		@font-face {
`,"			font-family: '",U,`';
`,"			src: url('",B[U],`');
`,`		}
`].join("");return m&&(m=['	<style type="text/css">',`<![CDATA[
`,m,"]]>",`</style>
`].join("")),m},_setSVGObjects:function(m,v){var y,w,b,S=this._objects;for(w=0,b=S.length;w<b;w++)y=S[w],!y.excludeFromExport&&this._setSVGObject(m,y,v)},_setSVGObject:function(m,v,y){m.push(v.toSVG(y))},_setSVGBgOverlayImage:function(m,v,y){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&m.push(this[v].toSVG(y))},_setSVGBgOverlayColor:function(m,v){var y=this[v+"Color"],w=this.viewportTransform,b=this.width,S=this.height;if(y)if(y.toLive){var _=y.repeat,E=t.util.invertTransform(w),C=this[v+"Vpt"],P=C?t.util.matrixToSVG(E):"";m.push('<rect transform="'+P+" translate(",b/2,",",S/2,')"',' x="',y.offsetX-b/2,'" y="',y.offsetY-S/2,'" ','width="',_==="repeat-y"||_==="no-repeat"?y.source.width:b,'" height="',_==="repeat-x"||_==="no-repeat"?y.source.height:S,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else m.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(m){if(!m)return this;var v=this._activeObject,y,w,b;if(m===v&&m.type==="activeSelection")for(b=v._objects,y=b.length;y--;)w=b[y],f(this._objects,w),this._objects.unshift(w);else f(this._objects,m),this._objects.unshift(m);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(m){if(!m)return this;var v=this._activeObject,y,w,b;if(m===v&&m.type==="activeSelection")for(b=v._objects,y=0;y<b.length;y++)w=b[y],f(this._objects,w),this._objects.push(w);else f(this._objects,m),this._objects.push(m);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(m,v){if(!m)return this;var y=this._activeObject,w,b,S,_,E,C=0;if(m===y&&m.type==="activeSelection")for(E=y._objects,w=0;w<E.length;w++)b=E[w],S=this._objects.indexOf(b),S>0+C&&(_=S-1,f(this._objects,b),this._objects.splice(_,0,b)),C++;else S=this._objects.indexOf(m),S!==0&&(_=this._findNewLowerIndex(m,S,v),f(this._objects,m),this._objects.splice(_,0,m));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(m,v,y){var w,b;if(y)for(w=v,b=v-1;b>=0;--b){var S=m.intersectsWithObject(this._objects[b])||m.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(m);if(S){w=b;break}}else w=v-1;return w},bringForward:function(m,v){if(!m)return this;var y=this._activeObject,w,b,S,_,E,C=0;if(m===y&&m.type==="activeSelection")for(E=y._objects,w=E.length;w--;)b=E[w],S=this._objects.indexOf(b),S<this._objects.length-1-C&&(_=S+1,f(this._objects,b),this._objects.splice(_,0,b)),C++;else S=this._objects.indexOf(m),S!==this._objects.length-1&&(_=this._findNewUpperIndex(m,S,v),f(this._objects,m),this._objects.splice(_,0,m));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(m,v,y){var w,b,S;if(y)for(w=v,b=v+1,S=this._objects.length;b<S;++b){var _=m.intersectsWithObject(this._objects[b])||m.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(m);if(_){w=b;break}}else w=v+1;return w},moveTo:function(m,v){return f(this._objects,m),this._objects.splice(v,0,m),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(m){m.dispose&&m.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),l(t.StaticCanvas.prototype,t.Observable),l(t.StaticCanvas.prototype,t.Collection),l(t.StaticCanvas.prototype,t.DataURLExporter),l(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(m){var v=p();if(!v||!v.getContext)return null;var y=v.getContext("2d");if(!y)return null;switch(m){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var m=d(this.lowerCanvasEl);return m&&m.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(m){var v=d(this.lowerCanvasEl);return v&&v.createJPEGStream(m)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(l){l.strokeStyle=this.color,l.lineWidth=this.width,l.lineCap=this.strokeLineCap,l.miterLimit=this.strokeMiterLimit,l.lineJoin=this.strokeLineJoin,l.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(l){var a=this.canvas.viewportTransform;l.save(),l.transform(a[0],a[1],a[2],a[3],a[4],a[5])},_setShadow:function(){if(this.shadow){var l=this.canvas,a=this.shadow,f=l.contextTop,u=l.getZoom();l&&l._isRetinaScaling()&&(u*=t.devicePixelRatio),f.shadowColor=a.color,f.shadowBlur=a.blur*u,f.shadowOffsetX=a.offsetX*u,f.shadowOffsetY=a.offsetY*u}},needsFullRender:function(){var l=new t.Color(this.color);return l.getAlpha()<1||!!this.shadow},_resetShadow:function(){var l=this.canvas.contextTop;l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0},_isOutSideCanvas:function(l){return l.x<0||l.x>this.canvas.getWidth()||l.y<0||l.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(l){this.canvas=l,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(l,a,f){var u=a.midPointFrom(f);return l.quadraticCurveTo(a.x,a.y,u.x,u.y),u},onMouseDown:function(l,a){this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],this._prepareForDrawing(l),this._captureDrawingPath(l),this._render())},onMouseMove:function(l,a){if(this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(l))&&this._captureDrawingPath(l)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var f=this._points,u=f.length,s=this.canvas.contextTop;this._saveAndTransform(s),this.oldEnd&&(s.beginPath(),s.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(s,f[u-2],f[u-1],!0),s.stroke(),s.restore()}},onMouseUp:function(l){return this.canvas._isMainEvent(l.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(l){var a=new t.Point(l.x,l.y);this._reset(),this._addPoint(a),this.canvas.contextTop.moveTo(a.x,a.y)},_addPoint:function(l){return this._points.length>1&&l.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(l),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(l){var a=new t.Point(l.x,l.y);return this._addPoint(a)},_render:function(l){var a,f,u=this._points[0],s=this._points[1];if(l=l||this.canvas.contextTop,this._saveAndTransform(l),l.beginPath(),this._points.length===2&&u.x===s.x&&u.y===s.y){var c=this.width/1e3;u=new t.Point(u.x,u.y),s=new t.Point(s.x,s.y),u.x-=c,s.x+=c}for(l.moveTo(u.x,u.y),a=1,f=this._points.length;a<f;a++)this._drawSegment(l,u,s),u=this._points[a],s=this._points[a+1];l.lineTo(u.x,u.y),l.stroke(),l.restore()},convertPointsToSVGPath:function(l){var a=this.width/1e3;return t.util.getSmoothPathFromPoints(l,a)},_isEmptySVGPath:function(l){var a=t.util.joinPath(l);return a==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(l){var a=new t.Path(l,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,a.shadow=new t.Shadow(this.shadow)),a},decimatePoints:function(l,a){if(l.length<=2)return l;var f=this.canvas.getZoom(),u=Math.pow(a/f,2),s,c=l.length-1,d=l[0],p=[d],g;for(s=1;s<c-1;s++)g=Math.pow(d.x-l[s].x,2)+Math.pow(d.y-l[s].y,2),g>=u&&(d=l[s],p.push(d));return p.push(l[c]),p},_finalizeAndAddPath:function(){var l=this.canvas.contextTop;l.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var a=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(a)){this.canvas.requestRenderAll();return}var f=this.createPath(a);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.requestRenderAll(),f.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:f})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(l){this.canvas=l,this.points=[]},drawDot:function(l){var a=this.addPoint(l),f=this.canvas.contextTop;this._saveAndTransform(f),this.dot(f,a),f.restore()},dot:function(l,a){l.fillStyle=a.fill,l.beginPath(),l.arc(a.x,a.y,a.radius,0,Math.PI*2,!1),l.closePath(),l.fill()},onMouseDown:function(l){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(l)},_render:function(){var l=this.canvas.contextTop,a,f,u=this.points;for(this._saveAndTransform(l),a=0,f=u.length;a<f;a++)this.dot(l,u[a]);l.restore()},onMouseMove:function(l){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(l)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(l),this._render()):this.drawDot(l))},onMouseUp:function(){var l=this.canvas.renderOnAddRemove,a,f;this.canvas.renderOnAddRemove=!1;var u=[];for(a=0,f=this.points.length;a<f;a++){var s=this.points[a],c=new t.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&(c.shadow=new t.Shadow(this.shadow)),u.push(c)}var d=new t.Group(u);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=l,this.canvas.requestRenderAll()},addPoint:function(l){var a=new t.Point(l.x,l.y),f=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return a.radius=f,a.fill=u,this.points.push(a),a}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(l){this.canvas=l,this.sprayChunks=[]},onMouseDown:function(l){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(l),this.render(this.sprayChunkPoints)},onMouseMove:function(l){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(l)||(this.addSprayChunk(l),this.render(this.sprayChunkPoints))},onMouseUp:function(){var l=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var a=[],f=0,u=this.sprayChunks.length;f<u;f++)for(var s=this.sprayChunks[f],c=0,d=s.length;c<d;c++){var p=new t.Rect({width:s[c].width,height:s[c].width,left:s[c].x+1,top:s[c].y+1,originX:"center",originY:"center",fill:this.color});a.push(p)}this.optimizeOverlapping&&(a=this._getOptimizedRects(a));var g=new t.Group(a);this.shadow&&g.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=l,this.canvas.requestRenderAll()},_getOptimizedRects:function(l){var a={},f,u,s;for(u=0,s=l.length;u<s;u++)f=l[u].left+""+l[u].top,a[f]||(a[f]=l[u]);var c=[];for(f in a)c.push(a[f]);return c},render:function(l){var a=this.canvas.contextTop,f,u;for(a.fillStyle=this.color,this._saveAndTransform(a),f=0,u=l.length;f<u;f++){var s=l[f];typeof s.opacity<"u"&&(a.globalAlpha=s.opacity),a.fillRect(s.x,s.y,s.width,s.width)}a.restore()},_render:function(){var l=this.canvas.contextTop,a,f;for(l.fillStyle=this.color,this._saveAndTransform(l),a=0,f=this.sprayChunks.length;a<f;a++)this.render(this.sprayChunks[a]);l.restore()},addSprayChunk:function(l){this.sprayChunkPoints=[];var a,f,u,s=this.width/2,c;for(c=0;c<this.density;c++){a=t.util.getRandomInt(l.x-s,l.x+s),f=t.util.getRandomInt(l.y-s,l.y+s),this.dotWidthVariance?u=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var d=new t.Point(a,f);d.width=u,this.randomOpacity&&(d.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var l=20,a=5,f=t.util.createCanvasElement(),u=f.getContext("2d");return f.width=f.height=l+a,u.fillStyle=this.color,u.beginPath(),u.arc(l/2,l/2,l/2,0,Math.PI*2,!1),u.closePath(),u.fill(),f},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(l){return l.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(l){this.callSuper("_setBrushStyles",l),l.strokeStyle=this.getPattern(l)},createPath:function(l){var a=this.callSuper("createPath",l),f=a._getLeftTopCoords().scalarAdd(a.strokeWidth/2);return a.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-f.x,offsetY:-f.y}),a}}),function(){var l=t.util.getPointer,a=t.util.degreesToRadians,f=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(s,c){c||(c={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,c),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var s=this.getActiveObjects(),c,d,p;if(s.length>0&&!this.preserveObjectStacking){d=[],p=[];for(var g=0,m=this._objects.length;g<m;g++)c=this._objects[g],s.indexOf(c)===-1?d.push(c):p.push(c);s.length>1&&(this._activeObject._objects=p),d.push.apply(d,p)}else d=this._objects;return d},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var s=this.contextContainer;return this.renderCanvas(s,this._chooseObjectsToRender()),this},renderTopLayer:function(s){s.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(s),this.contextTopDirty=!0),s.restore()},renderTop:function(){var s=this.contextTop;return this.clearContext(s),this.renderTopLayer(s),this.fire("after:render"),this},_normalizePointer:function(s,c){var d=s.calcTransformMatrix(),p=t.util.invertTransform(d),g=this.restorePointerVpt(c);return t.util.transformPoint(g,p)},isTargetTransparent:function(s,c,d){if(s.shouldCache()&&s._cacheCanvas&&s!==this._activeObject){var p=this._normalizePointer(s,{x:c,y:d}),g=Math.max(s.cacheTranslationX+p.x*s.zoomX,0),m=Math.max(s.cacheTranslationY+p.y*s.zoomY,0),b=t.util.isTransparent(s._cacheContext,Math.round(g),Math.round(m),this.targetFindTolerance);return b}var v=this.contextCache,y=s.selectionBackgroundColor,w=this.viewportTransform;s.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(w[0],w[1],w[2],w[3],w[4],w[5]),s.render(v),v.restore(),s.selectionBackgroundColor=y;var b=t.util.isTransparent(v,c,d,this.targetFindTolerance);return b},_isSelectionKeyPressed:function(s){var c=!1;return Array.isArray(this.selectionKey)?c=!!this.selectionKey.find(function(d){return s[d]===!0}):c=s[this.selectionKey],c},_shouldClearSelection:function(s,c){var d=this.getActiveObjects(),p=this._activeObject;return!c||c&&p&&d.length>1&&d.indexOf(c)===-1&&p!==c&&!this._isSelectionKeyPressed(s)||c&&!c.evented||c&&!c.selectable&&p&&p!==c},_shouldCenterTransform:function(s,c,d){if(s){var p;return c==="scale"||c==="scaleX"||c==="scaleY"||c==="resizing"?p=this.centeredScaling||s.centeredScaling:c==="rotate"&&(p=this.centeredRotation||s.centeredRotation),p?!d:d}},_getOriginFromCorner:function(s,c){var d={x:s.originX,y:s.originY};return c==="ml"||c==="tl"||c==="bl"?d.x="right":(c==="mr"||c==="tr"||c==="br")&&(d.x="left"),c==="tl"||c==="mt"||c==="tr"?d.y="bottom":(c==="bl"||c==="mb"||c==="br")&&(d.y="top"),d},_getActionFromCorner:function(s,c,d,p){if(!c||!s)return"drag";var g=p.controls[c];return g.getActionName(d,g,p)},_setupCurrentTransform:function(s,c,d){if(c){var p=this.getPointer(s),g=c.__corner,m=c.controls[g],v=d&&g?m.getActionHandler(s,c,m):t.controlsUtils.dragHandler,y=this._getActionFromCorner(d,g,s,c),w=this._getOriginFromCorner(c,g),b=s[this.centeredKey],S={target:c,action:y,actionHandler:v,corner:g,scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,offsetX:p.x-c.left,offsetY:p.y-c.top,originX:w.x,originY:w.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:a(c.angle),width:c.width*c.scaleX,shiftKey:s.shiftKey,altKey:b,original:t.util.saveObjectTransform(c)};this._shouldCenterTransform(c,y,b)&&(S.originX="center",S.originY="center"),S.original.originX=w.x,S.original.originY=w.y,this._currentTransform=S,this._beforeTransform(s)}},setCursor:function(s){this.upperCanvasEl.style.cursor=s},_drawSelection:function(s){var c=this._groupSelector,d=new t.Point(c.ex,c.ey),p=t.util.transformPoint(d,this.viewportTransform),g=new t.Point(c.ex+c.left,c.ey+c.top),m=t.util.transformPoint(g,this.viewportTransform),v=Math.min(p.x,m.x),y=Math.min(p.y,m.y),w=Math.max(p.x,m.x),b=Math.max(p.y,m.y),S=this.selectionLineWidth/2;this.selectionColor&&(s.fillStyle=this.selectionColor,s.fillRect(v,y,w-v,b-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(s.lineWidth=this.selectionLineWidth,s.strokeStyle=this.selectionBorderColor,v+=S,y+=S,w-=S,b-=S,t.Object.prototype._setLineDash.call(this,s,this.selectionDashArray),s.strokeRect(v,y,w-v,b-y))},findTarget:function(s,c){if(!this.skipTargetFind){var d=!0,p=this.getPointer(s,d),g=this._activeObject,m=this.getActiveObjects(),v,y,w=f(s),b=m.length>1&&!c||m.length===1;if(this.targets=[],b&&g._findTargetCorner(p,w)||m.length>1&&!c&&g===this._searchPossibleTargets([g],p))return g;if(m.length===1&&g===this._searchPossibleTargets([g],p))if(this.preserveObjectStacking)v=g,y=this.targets,this.targets=[];else return g;var S=this._searchPossibleTargets(this._objects,p);return s[this.altSelectionKey]&&S&&v&&S!==v&&(S=v,this.targets=y),S}},_checkTarget:function(s,c,d){if(c&&c.visible&&c.evented&&c.containsPoint(s))if((this.perPixelTargetFind||c.perPixelTargetFind)&&!c.isEditing){var p=this.isTargetTransparent(c,d.x,d.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(s,c){for(var d,p=s.length,g;p--;){var m=s[p],v=m.group?this._normalizePointer(m.group,c):c;if(this._checkTarget(v,m,c)){d=s[p],d.subTargetCheck&&d instanceof t.Group&&(g=this._searchPossibleTargets(d._objects,c),g&&this.targets.push(g));break}}return d},restorePointerVpt:function(s){return t.util.transformPoint(s,t.util.invertTransform(this.viewportTransform))},getPointer:function(s,c){if(this._absolutePointer&&!c)return this._absolutePointer;if(this._pointer&&c)return this._pointer;var d=l(s),p=this.upperCanvasEl,g=p.getBoundingClientRect(),m=g.width||0,v=g.height||0,y;(!m||!v)&&("top"in g&&"bottom"in g&&(v=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(m=Math.abs(g.right-g.left))),this.calcOffset(),d.x=d.x-this._offset.left,d.y=d.y-this._offset.top,c||(d=this.restorePointerVpt(d));var w=this.getRetinaScaling();return w!==1&&(d.x/=w,d.y/=w),m===0||v===0?y={width:1,height:1}:y={width:p.width/m,height:p.height/v},{x:d.x*y.width,y:d.y*y.height}},_createUpperCanvas:function(){var s=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),c=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),t.util.addClass(d,"upper-canvas "+s),this.wrapperEl.appendChild(d),this._copyCanvasStyle(c,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(s){var c=this.width||s.width,d=this.height||s.height;t.util.setStyle(s,{position:"absolute",width:c+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),s.width=c,s.height=d,t.util.makeElementUnselectable(s)},_copyCanvasStyle:function(s,c){c.style.cssText=s.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var s=this._activeObject;return s?s.type==="activeSelection"&&s._objects?s._objects.slice(0):[s]:[]},_onObjectRemoved:function(s){s===this._activeObject&&(this.fire("before:selection:cleared",{target:s}),this._discardActiveObject(),this.fire("selection:cleared",{target:s}),s.fire("deselected")),s===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",s)},_fireSelectionEvents:function(s,c){var d=!1,p=this.getActiveObjects(),g=[],m=[];s.forEach(function(v){p.indexOf(v)===-1&&(d=!0,v.fire("deselected",{e:c,target:v}),m.push(v))}),p.forEach(function(v){s.indexOf(v)===-1&&(d=!0,v.fire("selected",{e:c,target:v}),g.push(v))}),s.length>0&&p.length>0?d&&this.fire("selection:updated",{e:c,selected:g,deselected:m}):p.length>0?this.fire("selection:created",{e:c,selected:g}):s.length>0&&this.fire("selection:cleared",{e:c,deselected:m})},setActiveObject:function(s,c){var d=this.getActiveObjects();return this._setActiveObject(s,c),this._fireSelectionEvents(d,c),this},_setActiveObject:function(s,c){return this._activeObject===s||!this._discardActiveObject(c,s)||s.onSelect({e:c})?!1:(this._activeObject=s,!0)},_discardActiveObject:function(s,c){var d=this._activeObject;if(d){if(d.onDeselect({e:s,object:c}))return!1;this._activeObject=null}return!0},discardActiveObject:function(s){var c=this.getActiveObjects(),d=this.getActiveObject();return c.length&&this.fire("before:selection:cleared",{target:d,e:s}),this._discardActiveObject(s),this._fireSelectionEvents(c,s),this},dispose:function(){var s=this.wrapperEl;return this.removeListeners(),s.removeChild(this.upperCanvasEl),s.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this)),s.parentNode&&s.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(s){var c=this._activeObject;c&&c._renderControls(s)},_toObject:function(s,c,d){var p=this._realizeGroupTransformOnObject(s),g=this.callSuper("_toObject",s,c,d);return this._unwindGroupTransformOnObject(s,p),g},_realizeGroupTransformOnObject:function(s){if(s.group&&s.group.type==="activeSelection"&&this._activeObject===s.group){var c=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],d={};return c.forEach(function(p){d[p]=s[p]}),t.util.addTransformToObject(s,this._activeObject.calcOwnMatrix()),d}else return null},_unwindGroupTransformOnObject:function(s,c){c&&s.set(c)},_setSVGObject:function(s,c,d){var p=this._realizeGroupTransformOnObject(c);this.callSuper("_setSVGObject",s,c,d),this._unwindGroupTransformOnObject(c,p)},setViewportTransform:function(s){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,s)}});for(var u in t.StaticCanvas)u!=="prototype"&&(t.Canvas[u]=t.StaticCanvas[u])}(),function(){var l=t.util.addListener,a=t.util.removeListener,f=3,u=2,s=1,c={passive:!1};function d(p,g){return p.button&&p.button===g-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(l,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,g){var m=this.upperCanvasEl,v=this._getEventPrefix();p(t.window,"resize",this._onResize),p(m,v+"down",this._onMouseDown),p(m,v+"move",this._onMouseMove,c),p(m,v+"out",this._onMouseOut),p(m,v+"enter",this._onMouseEnter),p(m,"wheel",this._onMouseWheel),p(m,"contextmenu",this._onContextMenu),p(m,"dblclick",this._onDoubleClick),p(m,"dragover",this._onDragOver),p(m,"dragenter",this._onDragEnter),p(m,"dragleave",this._onDragLeave),p(m,"drop",this._onDrop),this.enablePointerEvents||p(m,"touchstart",this._onTouchStart,c),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](m,"gesture",this._onGesture),eventjs[g](m,"drag",this._onDrag),eventjs[g](m,"orientation",this._onOrientationChange),eventjs[g](m,"shake",this._onShake),eventjs[g](m,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(a,"remove");var p=this._getEventPrefix();a(t.document,p+"up",this._onMouseUp),a(t.document,"touchend",this._onTouchEnd,c),a(t.document,p+"move",this._onMouseMove,c),a(t.document,"touchmove",this._onMouseMove,c)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,g){this.__onTransformGesture&&this.__onTransformGesture(p,g)},_onDrag:function(p,g){this.__onDrag&&this.__onDrag(p,g)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:p}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:p});var m=this;this._hoveredTargets.forEach(function(v){m.fire("mouse:out",{target:g,e:p}),v&&g.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,g){this.__onOrientationChange&&this.__onOrientationChange(p,g)},_onShake:function(p,g){this.__onShake&&this.__onShake(p,g)},_onLongPress:function(p,g){this.__onLongPress&&this.__onLongPress(p,g)},_onDragOver:function(p){p.preventDefault();var g=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(g,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var g=p.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var g=this.upperCanvasEl,m=this._getEventPrefix();l(t.document,"touchend",this._onTouchEnd,c),l(t.document,"touchmove",this._onMouseMove,c),a(g,m+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var g=this.upperCanvasEl,m=this._getEventPrefix();a(g,m+"move",this._onMouseMove,c),l(t.document,m+"up",this._onMouseUp),l(t.document,m+"move",this._onMouseMove,c)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();a(t.document,"touchend",this._onTouchEnd,c),a(t.document,"touchmove",this._onMouseMove,c);var m=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){l(m.upperCanvasEl,g+"down",m._onMouseDown),m._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var g=this.upperCanvasEl,m=this._getEventPrefix();this._isMainEvent(p)&&(a(t.document,m+"up",this._onMouseUp),a(t.document,m+"move",this._onMouseMove,c),l(g,m+"move",this._onMouseMove,c))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var g=this._activeObject;return!!g!=!!p||g&&p&&g!==p?!0:(g&&g.isEditing,!1)},__onMouseUp:function(p){var g,m=this._currentTransform,v=this._groupSelector,y=!1,w=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),g=this._target,this._handleEvent(p,"up:before"),d(p,f)){this.fireRightClick&&this._handleEvent(p,"up",f,w);return}if(d(p,u)){this.fireMiddleClick&&this._handleEvent(p,"up",u,w),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(m&&(this._finalizeCurrentTransform(p),y=m.actionPerformed),!w){var b=g===this._activeObject;this._maybeGroupObjects(p),y||(y=this._shouldRender(g)||!b&&g===this._activeObject)}var S,_;if(g){if(S=g._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,p),y=!0;else{var E=g.controls[S],C=E&&E.getMouseUpHandler(p,g,E);C&&(_=this.getPointer(p),C(p,m,_.x,_.y))}g.isMoving=!1}if(m&&(m.target!==g||m.corner!==S)){var P=m.target&&m.target.controls[m.corner],N=P&&P.getMouseUpHandler(p,g,E);_=_||this.getPointer(p),N&&N(p,m,_.x,_.y)}this._setCursorFromEvent(p,g),this._handleEvent(p,"up",s,w),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),y?this.requestRenderAll():w||this.renderTop()}},_simpleEventHandler:function(p,g){var m=this.findTarget(g),v=this.targets,y={e:g,target:m,subTargets:v};if(this.fire(p,y),m&&m.fire(p,y),!v)return m;for(var w=0;w<v.length;w++)v[w].fire(p,y);return m},_handleEvent:function(p,g,m,v){var y=this._target,w=this.targets||[],b={e:p,target:y,subTargets:w,button:m||s,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(b.currentTarget=this.findTarget(p),b.currentSubTargets=this.targets),this.fire("mouse:"+g,b),y&&y.fire("mouse"+g,b);for(var S=0;S<w.length;S++)w[S].fire("mouse"+g,b)},_finalizeCurrentTransform:function(p){var g=this._currentTransform,m=g.target,v={e:p,target:m,transform:g,action:g.action};m._scaling&&(m._scaling=!1),m.setCoords(),(g.actionPerformed||this.stateful&&m.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var g=this.getPointer(p);this.freeDrawingBrush.onMouseDown(g,{e:p,pointer:g}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var g=this.getPointer(p);this.freeDrawingBrush.onMouseMove(g,{e:p,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var g=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:g}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var g=this._target;if(d(p,f)){this.fireRightClick&&this._handleEvent(p,"down",f);return}if(d(p,u)){this.fireMiddleClick&&this._handleEvent(p,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var m=this._pointer;this._previousPointer=m;var v=this._shouldRender(g),y=this._shouldGroup(p,g);if(this._shouldClearSelection(p,g)?this.discardActiveObject(p):y&&(this._handleGrouping(p,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var w=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,p);var b=g._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p));if(g.__corner=b,g===this._activeObject&&(b||!y)){this._setupCurrentTransform(p,g,w);var S=g.controls[b],m=this.getPointer(p),_=S&&S.getMouseDownHandler(p,g,S);_&&_(p,this._currentTransform,m.x,m.y)}}this._handleEvent(p,"down"),(v||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:p,transform:g})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var g,m;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(m=this._absolutePointer,v.left=m.x-v.ex,v.top=m.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(g=this.findTarget(p)||null,this._setCursorFromEvent(p,g),this._fireOverOutEvents(g,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,g){var m=this._hoveredTarget,v=this._hoveredTargets,y=this.targets,w=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,g,{oldTarget:m,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<w;b++)this.fireSyntheticInOutEvents(y[b],g,{oldTarget:v[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,g){var m=this._draggedoverTarget,v=this._hoveredTargets,y=this.targets,w=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,g,{oldTarget:m,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<w;b++)this.fireSyntheticInOutEvents(y[b],g,{oldTarget:v[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,g,m){var v,y,w=m.oldTarget,b,S,_=w!==p,E=m.canvasEvtIn,C=m.canvasEvtOut;_&&(v={e:g,target:p,previousTarget:w},y={e:g,target:w,nextTarget:p}),S=p&&_,b=w&&_,b&&(C&&this.fire(C,y),w.fire(m.evtOut,y)),S&&(E&&this.fire(E,v),p.fire(m.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var g=this.getPointer(p),m=this._currentTransform;m.reset=!1,m.shiftKey=p.shiftKey,m.altKey=p[this.centeredKey],this._performTransformAction(p,m,g),m.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,g,m){var v=m.x,y=m.y,w=g.action,b=!1,S=g.actionHandler;S&&(b=S(p,g,v,y)),w==="drag"&&b&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||b},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(p,g){if(!g)return this.setCursor(this.defaultCursor),!1;var m=g.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!v||!v.contains(g))&&g._findTargetCorner(this.getPointer(p,!0));y?this.setCursor(this.getCornerCursor(y,g,p)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(w){m=w.hoverCursor||m}),this.setCursor(m))},getCornerCursor:function(p,g,m){var v=g.controls[p];return v.cursorStyleHandler(m,v,g)}})}(),function(){var l=Math.min,a=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(f,u){var s=this._activeObject;return s&&this._isSelectionKeyPressed(f)&&u&&u.selectable&&this.selection&&(s!==u||s.type==="activeSelection")&&!u.onSelect({e:f})},_handleGrouping:function(f,u){var s=this._activeObject;s.__corner||u===s&&(u=this.findTarget(f,!0),!u||!u.selectable)||(s&&s.type==="activeSelection"?this._updateActiveSelection(u,f):this._createActiveSelection(u,f))},_updateActiveSelection:function(f,u){var s=this._activeObject,c=s._objects.slice(0);s.contains(f)?(s.removeWithUpdate(f),this._hoveredTarget=f,this._hoveredTargets=this.targets.concat(),s.size()===1&&this._setActiveObject(s.item(0),u)):(s.addWithUpdate(f),this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(c,u)},_createActiveSelection:function(f,u){var s=this.getActiveObjects(),c=this._createGroup(f);this._hoveredTarget=c,this._setActiveObject(c,u),this._fireSelectionEvents(s,u)},_createGroup:function(f){var u=this._objects,s=u.indexOf(this._activeObject)<u.indexOf(f),c=s?[this._activeObject,f]:[f,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(c,{canvas:this})},_groupSelectedObjects:function(f){var u=this._collectObjects(f),s;u.length===1?this.setActiveObject(u[0],f):u.length>1&&(s=new t.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(s,f))},_collectObjects:function(f){for(var u=[],s,c=this._groupSelector.ex,d=this._groupSelector.ey,p=c+this._groupSelector.left,g=d+this._groupSelector.top,m=new t.Point(l(c,p),l(d,g)),v=new t.Point(a(c,p),a(d,g)),y=!this.selectionFullyContained,w=c===p&&d===g,b=this._objects.length;b--&&(s=this._objects[b],!(!(!s||!s.selectable||!s.visible)&&(y&&s.intersectsWithRect(m,v,!0)||s.isContainedWithinRect(m,v,!0)||y&&s.containsPoint(m,null,!0)||y&&s.containsPoint(v,null,!0))&&(u.push(s),w))););return u.length>1&&(u=u.filter(function(S){return!S.onSelect({e:f})})),u},_maybeGroupObjects:function(f){this.selection&&this._groupSelector&&this._groupSelectedObjects(f),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(l){l||(l={});var a=l.format||"png",f=l.quality||1,u=(l.multiplier||1)*(l.enableRetinaScaling?this.getRetinaScaling():1),s=this.toCanvasElement(u,l);return t.util.toDataURL(s,a,f)},toCanvasElement:function(l,a){l=l||1,a=a||{};var f=(a.width||this.width)*l,u=(a.height||this.height)*l,s=this.getZoom(),c=this.width,d=this.height,p=s*l,g=this.viewportTransform,m=(g[4]-(a.left||0))*l,v=(g[5]-(a.top||0))*l,y=this.interactive,w=[p,0,0,p,m,v],b=this.enableRetinaScaling,S=t.util.createCanvasElement(),_=this.contextTop;return S.width=f,S.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=w,this.width=f,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),this._objects),this.viewportTransform=g,this.width=c,this.height=d,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=b,this.contextTop=_,S}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(l,a,f){if(l){var u=typeof l=="string"?JSON.parse(l):t.util.object.clone(l),s=this,c=u.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(p){s.clear(),s._setBgOverlay(u,function(){c?s._enlivenObjects([c],function(g){s.clipPath=g[0],s.__setupCanvas.call(s,u,p,d,a)}):s.__setupCanvas.call(s,u,p,d,a)})},f),this}},__setupCanvas:function(l,a,f,u){var s=this;a.forEach(function(c,d){s.insertAt(c,d)}),this.renderOnAddRemove=f,delete l.objects,delete l.backgroundImage,delete l.overlayImage,delete l.background,delete l.overlay,this._setOptions(l),this.renderAll(),u&&u()},_setBgOverlay:function(l,a){var f={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!l.backgroundImage&&!l.overlayImage&&!l.background&&!l.overlay){a&&a();return}var u=function(){f.backgroundImage&&f.overlayImage&&f.backgroundColor&&f.overlayColor&&a&&a()};this.__setBgOverlay("backgroundImage",l.backgroundImage,f,u),this.__setBgOverlay("overlayImage",l.overlayImage,f,u),this.__setBgOverlay("backgroundColor",l.background,f,u),this.__setBgOverlay("overlayColor",l.overlay,f,u)},__setBgOverlay:function(l,a,f,u){var s=this;if(!a){f[l]=!0,u&&u();return}l==="backgroundImage"||l==="overlayImage"?t.util.enlivenObjects([a],function(c){s[l]=c[0],f[l]=!0,u&&u()}):this["set"+t.util.string.capitalize(l,!0)](a,function(){f[l]=!0,u&&u()})},_enlivenObjects:function(l,a,f){if(!l||l.length===0){a&&a([]);return}t.util.enlivenObjects(l,function(u){a&&a(u)},null,f)},_toDataURL:function(l,a){this.clone(function(f){a(f.toDataURL(l))})},_toDataURLWithMultiplier:function(l,a,f){this.clone(function(u){f(u.toDataURLWithMultiplier(l,a))})},clone:function(l,a){var f=JSON.stringify(this.toJSON(a));this.cloneWithoutData(function(u){u.loadFromJSON(f,function(){l&&l(u)})})},cloneWithoutData:function(l){var a=t.util.createCanvasElement();a.width=this.width,a.height=this.height;var f=new t.Canvas(a);this.backgroundImage?(f.setBackgroundImage(this.backgroundImage.src,function(){f.renderAll(),l&&l(f)}),f.backgroundImageOpacity=this.backgroundImageOpacity,f.backgroundImageStretch=this.backgroundImageStretch):l&&l(f)}}),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend,u=a.util.object.clone,s=a.util.toFixed,c=a.util.string.capitalize,d=a.util.degreesToRadians,p=!a.isLikelyNode,g=2;a.Object||(a.Object=a.util.createClass(a.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(m){m&&this.setOptions(m)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=a.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(m){var v=a.perfLimitSizeTotal,y=m.width,w=m.height,b=a.maxCacheSideLimit,S=a.minCacheSideLimit;if(y<=b&&w<=b&&y*w<=v)return y<S&&(m.width=S),w<S&&(m.height=S),m;var _=y/w,E=a.util.limitDimsByArea(_,v),C=a.util.capValue,P=C(S,E.x,b),N=C(S,E.y,b);return y>P&&(m.zoomX/=y/P,m.width=P,m.capped=!0),w>N&&(m.zoomY/=w/N,m.height=N,m.capped=!0),m},_getCacheCanvasDimensions:function(){var m=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),y=v.x*m.scaleX/this.scaleX,w=v.y*m.scaleY/this.scaleY;return{width:y+g,height:w+g,zoomX:m.scaleX,zoomY:m.scaleY,x:y,y:w}},_updateCacheCanvas:function(){var m=this.canvas;if(this.noScaleCache&&m&&m._currentTransform){var v=m._currentTransform.target,y=m._currentTransform.action;if(this===v&&y.slice&&y.slice(0,5)==="scale")return!1}var w=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),S=a.minCacheSideLimit,_=b.width,E=b.height,C,P,N=b.zoomX,B=b.zoomY,I=_!==this.cacheWidth||E!==this.cacheHeight,U=this.zoomX!==N||this.zoomY!==B,D=I||U,F=0,O=0,M=!1;if(I){var V=this._cacheCanvas.width,k=this._cacheCanvas.height,R=_>V||E>k,j=(_<V*.9||E<k*.9)&&V>S&&k>S;M=R||j,R&&!b.capped&&(_>S||E>S)&&(F=_*.1,O=E*.1)}return this instanceof a.Text&&this.path&&(D=!0,M=!0,F+=this.getHeightOfLine(0)*this.zoomX,O+=this.getHeightOfLine(0)*this.zoomY),D?(M?(w.width=Math.ceil(_+F),w.height=Math.ceil(E+O)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,w.width,w.height)),C=b.x/2,P=b.y/2,this.cacheTranslationX=Math.round(w.width/2-C)+C,this.cacheTranslationY=Math.round(w.height/2-P)+P,this.cacheWidth=_,this.cacheHeight=E,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(N,B),this.zoomX=N,this.zoomY=B,!0):!1},setOptions:function(m){this._setOptions(m),this._initGradient(m.fill,"fill"),this._initGradient(m.stroke,"stroke"),this._initPattern(m.fill,"fill"),this._initPattern(m.stroke,"stroke")},transform:function(m){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&m===this.canvas.contextTop,y=this.calcTransformMatrix(!v);m.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(m){var v=a.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:a.version,originX:this.originX,originY:this.originY,left:s(this.left,v),top:s(this.top,v),width:s(this.width,v),height:s(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:s(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:s(this.strokeMiterLimit,v),scaleX:s(this.scaleX,v),scaleY:s(this.scaleY,v),angle:s(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:s(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:s(this.skewX,v),skewY:s(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(m),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),a.util.populateWithProperties(this,y,m),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(m){return this.toObject(m)},_removeDefaultValues:function(m){var v=a.util.getKlass(m.type).prototype,y=v.stateProperties;return y.forEach(function(w){w==="left"||w==="top"||(m[w]===v[w]&&delete m[w],Array.isArray(m[w])&&Array.isArray(v[w])&&m[w].length===0&&v[w].length===0&&delete m[w])}),m},toString:function(){return"#<fabric."+c(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var m=a.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(m.scaleX),scaleY:Math.abs(m.scaleY)}},getTotalObjectScaling:function(){var m=this.getObjectScaling(),v=m.scaleX,y=m.scaleY;if(this.canvas){var w=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();v*=w*b,y*=w*b}return{scaleX:v,scaleY:y}},getObjectOpacity:function(){var m=this.opacity;return this.group&&(m*=this.group.getObjectOpacity()),m},_set:function(m,v){var y=m==="scaleX"||m==="scaleY",w=this[m]!==v,b=!1;return y&&(v=this._constrainScale(v)),m==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):m==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):m==="shadow"&&v&&!(v instanceof a.Shadow)?v=new a.Shadow(v):m==="dirty"&&this.group&&this.group.set("dirty",v),this[m]=v,w&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(m)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(m)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:a.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(m){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(m.save(),this._setupCompositeOperation(m),this.drawSelectionBackground(m),this.transform(m),this._setOpacity(m),this._setShadow(m,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(m)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(m),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),m.restore())},renderCache:function(m){m=m||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,m.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(m,v){if(m.save(),v.inverted?m.globalCompositeOperation="destination-out":m.globalCompositeOperation="destination-in",v.absolutePositioned){var y=a.util.invertTransform(this.calcTransformMatrix());m.transform(y[0],y[1],y[2],y[3],y[4],y[5])}v.transform(m),m.scale(1/v.zoomX,1/v.zoomY),m.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),m.restore()},drawObject:function(m,v){var y=this.fill,w=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(m)):this._renderBackground(m),this._render(m),this._drawClipPath(m,this.clipPath),this.fill=y,this.stroke=w},_drawClipPath:function(m,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(m,v))},drawCacheOnCanvas:function(m){m.scale(1/this.zoomX,1/this.zoomY),m.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(m){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!m&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!m){var v=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-y/2,v,y)}return!0}return!1},_renderBackground:function(m){if(this.backgroundColor){var v=this._getNonTransformedDimensions();m.fillStyle=this.backgroundColor,m.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(m)}},_setOpacity:function(m){this.group&&!this.group._transformDone?m.globalAlpha=this.getObjectOpacity():m.globalAlpha*=this.opacity},_setStrokeStyles:function(m,v){var y=v.stroke;y&&(m.lineWidth=v.strokeWidth,m.lineCap=v.strokeLineCap,m.lineDashOffset=v.strokeDashOffset,m.lineJoin=v.strokeLineJoin,m.miterLimit=v.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(m,y):(m.strokeStyle=y.toLive(m,this),this._applyPatternGradientTransform(m,y)):m.strokeStyle=v.stroke)},_setFillStyles:function(m,v){var y=v.fill;y&&(y.toLive?(m.fillStyle=y.toLive(m,this),this._applyPatternGradientTransform(m,v.fill)):m.fillStyle=y)},_setClippingProperties:function(m){m.globalAlpha=1,m.strokeStyle="transparent",m.fillStyle="#000000"},_setLineDash:function(m,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),m.setLineDash(v))},_renderControls:function(m,v){var y=this.getViewportTransform(),w=this.calcTransformMatrix(),b,S,_;v=v||{},S=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,_=typeof v.hasControls<"u"?v.hasControls:this.hasControls,w=a.util.multiplyTransformMatrices(y,w),b=a.util.qrDecompose(w),m.save(),m.translate(b.translateX,b.translateY),m.lineWidth=1*this.borderScaleFactor,this.group||(m.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),m.rotate(d(this.group?b.angle:this.angle)),v.forActiveSelection||this.group?S&&this.drawBordersInGroup(m,b,v):S&&this.drawBorders(m,v),_&&this.drawControls(m,v),m.restore()},_setShadow:function(m){if(this.shadow){var v=this.shadow,y=this.canvas,w,b=y&&y.viewportTransform[0]||1,S=y&&y.viewportTransform[3]||1;v.nonScaling?w={scaleX:1,scaleY:1}:w=this.getObjectScaling(),y&&y._isRetinaScaling()&&(b*=a.devicePixelRatio,S*=a.devicePixelRatio),m.shadowColor=v.color,m.shadowBlur=v.blur*a.browserShadowBlurConstant*(b+S)*(w.scaleX+w.scaleY)/4,m.shadowOffsetX=v.offsetX*b*w.scaleX,m.shadowOffsetY=v.offsetY*S*w.scaleY}},_removeShadow:function(m){this.shadow&&(m.shadowColor="",m.shadowBlur=m.shadowOffsetX=m.shadowOffsetY=0)},_applyPatternGradientTransform:function(m,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var y=v.gradientTransform||v.patternTransform,w=-this.width/2+v.offsetX||0,b=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?m.transform(this.width,0,0,this.height,w,b):m.transform(1,0,0,1,w,b),y&&m.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:w,offsetY:b}},_renderPaintInOrder:function(m){this.paintFirst==="stroke"?(this._renderStroke(m),this._renderFill(m)):(this._renderFill(m),this._renderStroke(m))},_render:function(){},_renderFill:function(m){this.fill&&(m.save(),this._setFillStyles(m,this),this.fillRule==="evenodd"?m.fill("evenodd"):m.fill(),m.restore())},_renderStroke:function(m){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(m),m.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();m.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&m.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(m,this.strokeDashArray),this._setStrokeStyles(m,this),m.stroke(),m.restore()}},_applyPatternForTransformedGradient:function(m,v){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),w=a.util.createCanvasElement(),b,S=this.canvas.getRetinaScaling(),_=y.x/this.scaleX/S,E=y.y/this.scaleY/S;w.width=_,w.height=E,b=w.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(_,0),b.lineTo(_,E),b.lineTo(0,E),b.closePath(),b.translate(_/2,E/2),b.scale(y.zoomX/this.scaleX/S,y.zoomY/this.scaleY/S),this._applyPatternGradientTransform(b,v),b.fillStyle=v.toLive(m),b.fill(),m.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),m.scale(S*this.scaleX/y.zoomX,S*this.scaleY/y.zoomY),m.strokeStyle=b.createPattern(w,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var m=a.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",m.scaleX),this.set("scaleY",m.scaleY),this.angle=m.angle,this.skewX=m.skewX,this.skewY=0}},_removeTransformMatrix:function(m){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=a.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,m&&(this.scaleX*=m.scaleX,this.scaleY*=m.scaleY,this.cropX=m.cropX,this.cropY=m.cropY,v.x+=m.offsetLeft,v.y+=m.offsetTop,this.width=m.width,this.height=m.height),this.setPositionByOrigin(v,"center","center")},clone:function(m,v){var y=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(y,m):a.Object._fromObject("Object",y,m)},cloneAsImage:function(m,v){var y=this.toCanvasElement(v);return m&&m(new a.Image(y)),this},toCanvasElement:function(m){m||(m={});var v=a.util,y=v.saveObjectTransform(this),w=this.group,b=this.shadow,S=Math.abs,_=(m.multiplier||1)*(m.enableRetinaScaling?a.devicePixelRatio:1);delete this.group,m.withoutTransform&&v.resetObjectTransform(this),m.withoutShadow&&(this.shadow=null);var E=a.util.createCanvasElement(),C=this.getBoundingRect(!0,!0),P=this.shadow,N,B={x:0,y:0},I,U,D;P&&(I=P.blur,P.nonScaling?N={scaleX:1,scaleY:1}:N=this.getObjectScaling(),B.x=2*Math.round(S(P.offsetX)+I)*S(N.scaleX),B.y=2*Math.round(S(P.offsetY)+I)*S(N.scaleY)),U=C.width+B.x,D=C.height+B.y,E.width=Math.ceil(U),E.height=Math.ceil(D);var F=new a.StaticCanvas(E,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});m.format==="jpeg"&&(F.backgroundColor="#fff"),this.setPositionByOrigin(new a.Point(F.width/2,F.height/2),"center","center");var O=this.canvas;F.add(this);var M=F.toCanvasElement(_||1,m);return this.shadow=b,this.set("canvas",O),w&&(this.group=w),this.set(y).setCoords(),F._objects=[],F.dispose(),F=null,M},toDataURL:function(m){return m||(m={}),a.util.toDataURL(this.toCanvasElement(m),m.format||"png",m.quality||1)},isType:function(m){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===m},complexity:function(){return 1},toJSON:function(m){return this.toObject(m)},rotate:function(m){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",m),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(m,v){v=v||this.canvas.getPointer(m);var y=new a.Point(v.x,v.y),w=this._getLeftTopCoords();return this.angle&&(y=a.util.rotatePoint(y,w,d(-this.angle))),{x:y.x-w.x,y:y.y-w.y}},_setupCompositeOperation:function(m){this.globalCompositeOperation&&(m.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){a.runningAnimations&&a.runningAnimations.cancelByTarget(this)}}),a.util.createAccessors&&a.util.createAccessors(a.Object),f(a.Object.prototype,a.Observable),a.Object.NUM_FRACTION_DIGITS=2,a.Object.ENLIVEN_PROPS=["clipPath"],a.Object._fromObject=function(m,v,y,w){var b=a[m];v=u(v,!0),a.util.enlivenPatterns([v.fill,v.stroke],function(S){typeof S[0]<"u"&&(v.fill=S[0]),typeof S[1]<"u"&&(v.stroke=S[1]),a.util.enlivenObjectEnlivables(v,v,function(){var _=w?new b(v[w],v):new b(v);y&&y(_)})})},a.Object.__uid=0)}(e),function(){var l=t.util.degreesToRadians,a={left:-.5,center:0,right:.5},f={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(u,s,c,d,p){var g=u.x,m=u.y,v,y,w;return typeof s=="string"?s=a[s]:s-=.5,typeof d=="string"?d=a[d]:d-=.5,v=d-s,typeof c=="string"?c=f[c]:c-=.5,typeof p=="string"?p=f[p]:p-=.5,y=p-c,(v||y)&&(w=this._getTransformedDimensions(),g=u.x+v*w.x,m=u.y+y*w.y),new t.Point(g,m)},translateToCenterPoint:function(u,s,c){var d=this.translateToGivenOrigin(u,s,c,"center","center");return this.angle?t.util.rotatePoint(d,u,l(this.angle)):d},translateToOriginPoint:function(u,s,c){var d=this.translateToGivenOrigin(u,"center","center",s,c);return this.angle?t.util.rotatePoint(d,u,l(this.angle)):d},getCenterPoint:function(){var u=new t.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,s){var c=this.getCenterPoint();return this.translateToOriginPoint(c,u,s)},toLocalPoint:function(u,s,c){var d=this.getCenterPoint(),p,g;return typeof s<"u"&&typeof c<"u"?p=this.translateToGivenOrigin(d,"center","center",s,c):p=new t.Point(this.left,this.top),g=new t.Point(u.x,u.y),this.angle&&(g=t.util.rotatePoint(g,d,-l(this.angle))),g.subtractEquals(p)},setPositionByOrigin:function(u,s,c){var d=this.translateToCenterPoint(u,s,c),p=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(u){var s=l(this.angle),c=this.getScaledWidth(),d=t.util.cos(s)*c,p=t.util.sin(s)*c,g,m;typeof this.originX=="string"?g=a[this.originX]:g=this.originX-.5,typeof u=="string"?m=a[u]:m=u-.5,this.left+=d*(m-g),this.top+=p*(m-g),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function l(c){return[new t.Point(c.tl.x,c.tl.y),new t.Point(c.tr.x,c.tr.y),new t.Point(c.br.x,c.br.y),new t.Point(c.bl.x,c.bl.y)]}var a=t.util,f=a.degreesToRadians,u=a.multiplyTransformMatrices,s=a.transformPoint;a.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(c,d){return d?c?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),c?this.aCoords:this.lineCoords)},getCoords:function(c,d){return l(this._getCoords(c,d))},intersectsWithRect:function(c,d,p,g){var m=this.getCoords(p,g),v=t.Intersection.intersectPolygonRectangle(m,c,d);return v.status==="Intersection"},intersectsWithObject:function(c,d,p){var g=t.Intersection.intersectPolygonPolygon(this.getCoords(d,p),c.getCoords(d,p));return g.status==="Intersection"||c.isContainedWithinObject(this,d,p)||this.isContainedWithinObject(c,d,p)},isContainedWithinObject:function(c,d,p){for(var g=this.getCoords(d,p),m=d?c.aCoords:c.lineCoords,v=0,y=c._getImageLines(m);v<4;v++)if(!c.containsPoint(g[v],y))return!1;return!0},isContainedWithinRect:function(c,d,p,g){var m=this.getBoundingRect(p,g);return m.left>=c.x&&m.left+m.width<=d.x&&m.top>=c.y&&m.top+m.height<=d.y},containsPoint:function(c,v,p,g){var m=this._getCoords(p,g),v=v||this._getImageLines(m),y=this._findCrossPoints(c,v);return y!==0&&y%2===1},isOnScreen:function(c){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,g=this.getCoords(!0,c);return g.some(function(m){return m.x<=p.x&&m.x>=d.x&&m.y<=p.y&&m.y>=d.y})||this.intersectsWithRect(d,p,!0,c)?!0:this._containsCenterOfCanvas(d,p,c)},_containsCenterOfCanvas:function(c,d,p){var g={x:(c.x+d.x)/2,y:(c.y+d.y)/2};return!!this.containsPoint(g,null,!0,p)},isPartiallyOnScreen:function(c){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(d,p,!0,c))return!0;var g=this.getCoords(!0,c).every(function(m){return(m.x>=p.x||m.x<=d.x)&&(m.y>=p.y||m.y<=d.y)});return g&&this._containsCenterOfCanvas(d,p,c)},_getImageLines:function(c){var d={topline:{o:c.tl,d:c.tr},rightline:{o:c.tr,d:c.br},bottomline:{o:c.br,d:c.bl},leftline:{o:c.bl,d:c.tl}};return d},_findCrossPoints:function(c,d){var p,g,m,v,y,w=0,b;for(var S in d)if(b=d[S],!(b.o.y<c.y&&b.d.y<c.y)&&!(b.o.y>=c.y&&b.d.y>=c.y)&&(b.o.x===b.d.x&&b.o.x>=c.x?y=b.o.x:(p=0,g=(b.d.y-b.o.y)/(b.d.x-b.o.x),m=c.y-p*c.x,v=b.o.y-g*b.o.x,y=-(m-v)/(p-g)),y>=c.x&&(w+=1),w===2))break;return w},getBoundingRect:function(c,d){var p=this.getCoords(c,d);return a.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(c){return Math.abs(c)<this.minScaleLimit?c<0?-this.minScaleLimit:this.minScaleLimit:c===0?1e-4:c},scale:function(c){return this._set("scaleX",c),this._set("scaleY",c),this.setCoords()},scaleToWidth:function(c,d){var p=this.getBoundingRect(d).width/this.getScaledWidth();return this.scale(c/this.width/p)},scaleToHeight:function(c,d){var p=this.getBoundingRect(d).height/this.getScaledHeight();return this.scale(c/this.height/p)},calcLineCoords:function(){var c=this.getViewportTransform(),d=this.padding,p=f(this.angle),g=a.cos(p),m=a.sin(p),v=g*d,y=m*d,w=v+y,b=v-y,S=this.calcACoords(),_={tl:s(S.tl,c),tr:s(S.tr,c),bl:s(S.bl,c),br:s(S.br,c)};return d&&(_.tl.x-=b,_.tl.y-=w,_.tr.x+=w,_.tr.y-=b,_.bl.x-=w,_.bl.y+=b,_.br.x+=b,_.br.y+=w),_},calcOCoords:function(){var c=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=this.getViewportTransform(),g=u(p,d),m=u(g,c),m=u(m,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(w,b,S){y[b]=w.positionHandler(v,m,S)}),y},calcACoords:function(){var c=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=u(d,c),g=this._getTransformedDimensions(),m=g.x/2,v=g.y/2;return{tl:s({x:-m,y:-v},p),tr:s({x:m,y:-v},p),bl:s({x:-m,y:v},p),br:s({x:m,y:v},p)}},setCoords:function(c){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),c?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return a.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var c=this.getCenterPoint();return[1,0,0,1,c.x,c.y]},transformMatrixKey:function(c){var d="_",p="";return!c&&this.group&&(p=this.group.transformMatrixKey(c)+d),p+this.top+d+this.left+d+this.scaleX+d+this.scaleY+d+this.skewX+d+this.skewY+d+this.angle+d+this.originX+d+this.originY+d+this.width+d+this.height+d+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(c){var d=this.calcOwnMatrix();if(c||!this.group)return d;var p=this.transformMatrixKey(c),g=this.matrixCache||(this.matrixCache={});return g.key===p?g.value:(this.group&&(d=u(this.group.calcTransformMatrix(!1),d)),g.key=p,g.value=d,d)},calcOwnMatrix:function(){var c=this.transformMatrixKey(!0),d=this.ownMatrixCache||(this.ownMatrixCache={});if(d.key===c)return d.value;var p=this._calcTranslateMatrix(),g={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return d.key=c,d.value=a.composeMatrix(g),d.value},_getNonTransformedDimensions:function(){var c=this.strokeWidth,d=this.width+c,p=this.height+c;return{x:d,y:p}},_getTransformedDimensions:function(c,d){typeof c>"u"&&(c=this.skewX),typeof d>"u"&&(d=this.skewY);var p,g,m,v=c===0&&d===0;if(this.strokeUniform?(g=this.width,m=this.height):(p=this._getNonTransformedDimensions(),g=p.x,m=p.y),v)return this._finalizeDimensions(g*this.scaleX,m*this.scaleY);var y=a.sizeAfterTransform(g,m,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:c,skewY:d});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(c,d){return this.strokeUniform?{x:c+this.strokeWidth,y:d+this.strokeWidth}:{x:c,y:d}},_calculateCurrentDimensions:function(){var c=this.getViewportTransform(),d=this._getTransformedDimensions(),p=s(d,c,!0);return p.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(l){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,l):this.canvas&&this.canvas.sendBackwards(this,l),this},bringForward:function(l){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,l):this.canvas&&this.canvas.bringForward(this,l),this},moveTo:function(l){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,l):this.canvas&&this.canvas.moveTo(this,l),this}}),function(){function l(f,u){if(u){if(u.toLive)return f+": url(#SVGID_"+u.id+"); ";var s=new t.Color(u),c=f+": "+s.toRgb()+"; ",d=s.getAlpha();return d!==1&&(c+=f+"-opacity: "+d.toString()+"; "),c}else return f+": none; "}var a=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(f){var u=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",c=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",m=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",w=f?"":this.getSvgFilter(),b=l("fill",this.fill),S=l("stroke",this.stroke);return[S,"stroke-width: ",s,"; ","stroke-dasharray: ",c,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",m,"; ",b,"fill-rule: ",u,"; ","opacity: ",v,";",w,y].join("")},getSvgSpanStyles:function(f,u){var s="; ",d=f.fontFamily?"font-family: "+(f.fontFamily.indexOf("'")===-1&&f.fontFamily.indexOf('"')===-1?"'"+f.fontFamily+"'":f.fontFamily)+s:"",c=f.strokeWidth?"stroke-width: "+f.strokeWidth+s:"",d=d,p=f.fontSize?"font-size: "+f.fontSize+"px"+s:"",g=f.fontStyle?"font-style: "+f.fontStyle+s:"",m=f.fontWeight?"font-weight: "+f.fontWeight+s:"",v=f.fill?l("fill",f.fill):"",y=f.stroke?l("stroke",f.stroke):"",w=this.getSvgTextDecoration(f),b=f.deltaY?"baseline-shift: "+-f.deltaY+"; ":"";return w&&(w="text-decoration: "+w+s),[y,c,d,p,g,m,w,v,b,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(f){return["overline","underline","line-through"].filter(function(u){return f[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(f,u){var s=f?this.calcTransformMatrix():this.calcOwnMatrix(),c='transform="'+t.util.matrixToSVG(s);return c+(u||"")+'" '},_setSVGBg:function(f){if(this.backgroundColor){var u=t.Object.NUM_FRACTION_DIGITS;f.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(-this.width/2,u),'" y="',a(-this.height/2,u),'" width="',a(this.width,u),'" height="',a(this.height,u),`"></rect>
`)}},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(f),{reviver:f})},toClipPathSVG:function(f){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(f),{reviver:f})},_createBaseClipPathSVGMarkup:function(f,u){u=u||{};var s=u.reviver,c=u.additionalTransform||"",d=[this.getSvgTransform(!0,c),this.getSvgCommons()].join(""),p=f.indexOf("COMMON_PARTS");return f[p]=d,s?s(f.join("")):f.join("")},_createBaseSVGMarkup:function(f,u){u=u||{};var s=u.noStyle,c=u.reviver,d=s?"":'style="'+this.getSvgStyles()+'" ',p=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,m=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=g&&g.absolutePositioned,y=this.stroke,w=this.fill,b=this.shadow,S,_=[],E,C=f.indexOf("COMMON_PARTS"),P=u.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+t.Object.__uid++,E='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(c)+`</clipPath>
`),v&&_.push("<g ",p,this.getSvgCommons(),` >
`),_.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),S=[d,m,s?"":this.addPaintOrder()," ",P?'transform="'+P+'" ':""].join(""),f[C]=S,w&&w.toLive&&_.push(w.toSVG(this)),y&&y.toLive&&_.push(y.toSVG(this)),b&&_.push(b.toSVG(this)),g&&_.push(E),_.push(f.join("")),_.push(`</g>
`),v&&_.push(`</g>
`),c?c(_.join("")):_.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var l=t.util.object.extend,a="stateProperties";function f(s,c,d){var p={},g=!0;d.forEach(function(m){p[m]=s[m]}),l(s[c],p,g)}function u(s,c,d){if(s===c)return!0;if(Array.isArray(s)){if(!Array.isArray(c)||s.length!==c.length)return!1;for(var p=0,g=s.length;p<g;p++)if(!u(s[p],c[p]))return!1;return!0}else if(s&&typeof s=="object"){var m=Object.keys(s),v;if(!c||typeof c!="object"||!d&&m.length!==Object.keys(c).length)return!1;for(var p=0,g=m.length;p<g;p++)if(v=m[p],!(v==="canvas"||v==="group")&&!u(s[v],c[v]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(s){s=s||a;var c="_"+s;return Object.keys(this[c]).length<this[s].length?!0:!u(this[c],this,!0)},saveState:function(s){var c=s&&s.propertySet||a,d="_"+c;return this[d]?(f(this,d,this[c]),s&&s.stateProperties&&f(this,d,s.stateProperties),this):this.setupState(s)},setupState:function(s){s=s||{};var c=s.propertySet||a;return s.propertySet=c,this["_"+c]={},this.saveState(s),this}})}(),function(){var l=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(a,f){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=a.x,s=a.y,c,d,p=Object.keys(this.oCoords),g=p.length-1,m;for(this.__corner=0;g>=0;g--)if(m=p[g],!!this.isControlVisible(m)&&(d=this._getImageLines(f?this.oCoords[m].touchCorner:this.oCoords[m].corner),c=this._findCrossPoints({x:u,y:s},d),c!==0&&c%2===1))return this.__corner=m,m;return!1},forEachControl:function(a){for(var f in this.controls)a(this.controls[f],f,this)},_setCornerCoords:function(){var a=this.oCoords;for(var f in a){var u=this.controls[f];a[f].corner=u.calcCornerCoords(this.angle,this.cornerSize,a[f].x,a[f].y,!1),a[f].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,a[f].x,a[f].y,!0)}},drawSelectionBackground:function(a){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;a.save();var f=this.getCenterPoint(),u=this._calculateCurrentDimensions(),s=this.canvas.viewportTransform;return a.translate(f.x,f.y),a.scale(1/s[0],1/s[3]),a.rotate(l(this.angle)),a.fillStyle=this.selectionBackgroundColor,a.fillRect(-u.x/2,-u.y/2,u.x,u.y),a.restore(),this},drawBorders:function(a,f){f=f||{};var u=this._calculateCurrentDimensions(),s=this.borderScaleFactor,c=u.x+s,d=u.y+s,p=typeof f.hasControls<"u"?f.hasControls:this.hasControls,g=!1;return a.save(),a.strokeStyle=f.borderColor||this.borderColor,this._setLineDash(a,f.borderDashArray||this.borderDashArray),a.strokeRect(-c/2,-d/2,c,d),p&&(a.beginPath(),this.forEachControl(function(m,v,y){m.withConnection&&m.getVisibility(y,v)&&(g=!0,a.moveTo(m.x*c,m.y*d),a.lineTo(m.x*c+m.offsetX,m.y*d+m.offsetY))}),g&&a.stroke()),a.restore(),this},drawBordersInGroup:function(a,f,u){u=u||{};var s=t.util.sizeAfterTransform(this.width,this.height,f),c=this.strokeWidth,d=this.strokeUniform,p=this.borderScaleFactor,g=s.x+c*(d?this.canvas.getZoom():f.scaleX)+p,m=s.y+c*(d?this.canvas.getZoom():f.scaleY)+p;return a.save(),this._setLineDash(a,u.borderDashArray||this.borderDashArray),a.strokeStyle=u.borderColor||this.borderColor,a.strokeRect(-g/2,-m/2,g,m),a.restore(),this},drawControls:function(a,f){f=f||{},a.save();var u=this.canvas.getRetinaScaling(),s,c;return a.setTransform(u,0,0,u,0,0),a.strokeStyle=a.fillStyle=f.cornerColor||this.cornerColor,this.transparentCorners||(a.strokeStyle=f.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(a,f.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(s=this.group.calcTransformMatrix()),this.forEachControl(function(d,p,g){c=g.oCoords[p],d.getVisibility(g,p)&&(s&&(c=t.util.transformPoint(c,s)),d.render(a,c.x,c.y,f,g))}),a.restore(),this},isControlVisible:function(a){return this.controls[a]&&this.controls[a].getVisibility(this,a)},setControlVisible:function(a,f){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[a]=f,this},setControlsVisibility:function(a){a||(a={});for(var f in a)this.setControlVisible(f,a[f]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(l,a){a=a||{};var f=function(){},u=a.onComplete||f,s=a.onChange||f,c=this;return t.util.animate({target:this,startValue:l.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(d){l.set("left",d),c.requestRenderAll(),s()},onComplete:function(){l.setCoords(),u()}})},fxCenterObjectV:function(l,a){a=a||{};var f=function(){},u=a.onComplete||f,s=a.onChange||f,c=this;return t.util.animate({target:this,startValue:l.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(d){l.set("top",d),c.requestRenderAll(),s()},onComplete:function(){l.setCoords(),u()}})},fxRemove:function(l,a){a=a||{};var f=function(){},u=a.onComplete||f,s=a.onChange||f,c=this;return t.util.animate({target:this,startValue:l.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){l.set("opacity",d),c.requestRenderAll(),s()},onComplete:function(){c.remove(l),u()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var l=[],a,f,u=[];for(a in arguments[0])l.push(a);for(var s=0,c=l.length;s<c;s++)a=l[s],f=s!==c-1,u.push(this._animate(a,arguments[0][a],arguments[1],f));return u}else return this._animate.apply(this,arguments)},_animate:function(l,a,f,u){var s=this,c;a=a.toString(),f?f=t.util.object.clone(f):f={},~l.indexOf(".")&&(c=l.split("."));var d=s.colorProperties.indexOf(l)>-1||c&&s.colorProperties.indexOf(c[1])>-1,p=c?this.get(c[0])[c[1]]:this.get(l);"from"in f||(f.from=p),d||(~a.indexOf("=")?a=p+parseFloat(a.replace("=","")):a=parseFloat(a));var g={target:this,startValue:f.from,endValue:a,byValue:f.by,easing:f.easing,duration:f.duration,abort:f.abort&&function(m,v,y){return f.abort.call(s,m,v,y)},onChange:function(m,v,y){c?s[c[0]][c[1]]=m:s.set(l,m),!u&&f.onChange&&f.onChange(m,v,y)},onComplete:function(m,v,y){u||(s.setCoords(),f.onComplete&&f.onComplete(m,v,y))}};return d?t.util.animateColor(g.startValue,g.endValue,g.duration,g):t.util.animate(g)}}),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend,u=a.util.object.clone,s={x1:1,x2:1,y1:1,y2:1};if(a.Line){a.warn("fabric.Line is already defined");return}a.Line=a.util.createClass(a.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,p){d||(d=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(p)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,p){return this.callSuper("_set",d,p),typeof s[d]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:c({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:c({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var p=this.calcLinePoints();d.moveTo(p.x1,p.y1),d.lineTo(p.x2,p.y2),d.lineWidth=this.strokeWidth;var g=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return f(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,g=d*this.width*.5,m=p*this.height*.5,v=d*this.width*-.5,y=p*this.height*-.5;return{x1:g,x2:v,y1:m,y2:y}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),a.Line.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),a.Line.fromElement=function(d,p,g){g=g||{};var m=a.parseAttributes(d,a.Line.ATTRIBUTE_NAMES),v=[m.x1||0,m.y1||0,m.x2||0,m.y2||0];p(new a.Line(v,f(m,g)))},a.Line.fromObject=function(d,p){function g(v){delete v.points,p&&p(v)}var m=u(d,!0);m.points=[d.x1,d.y1,d.x2,d.y2],a.Object._fromObject("Line",m,g,"points")};function c(d,p){var g=d.origin,m=d.axis1,v=d.axis2,y=d.dimension,w=p.nearest,b=p.center,S=p.farthest;return function(){switch(this.get(g)){case w:return Math.min(this.get(m),this.get(v));case b:return Math.min(this.get(m),this.get(v))+.5*this.get(y);case S:return Math.max(this.get(m),this.get(v))}}}}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.degreesToRadians;if(a.Circle){a.warn("fabric.Circle is already defined.");return}a.Circle=a.util.createClass(a.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:a.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(s,c){return this.callSuper("_set",s,c),s==="radius"&&this.setRadius(c),this},toObject:function(s){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(s))},_toSVG:function(){var s,c=0,d=0,p=(this.endAngle-this.startAngle)%360;if(p===0)s=["<circle ","COMMON_PARTS",'cx="'+c+'" cy="'+d+'" ','r="',this.radius,`" />
`];else{var g=f(this.startAngle),m=f(this.endAngle),v=this.radius,y=a.util.cos(g)*v,w=a.util.sin(g)*v,b=a.util.cos(m)*v,S=a.util.sin(m)*v,_=p>180?"1":"0";s=['<path d="M '+y+" "+w," A "+v+" "+v," 0 ",+_+" 1"," "+b+" "+S,'" ',"COMMON_PARTS",` />
`]}return s},_render:function(s){s.beginPath(),s.arc(0,0,this.radius,f(this.startAngle),f(this.endAngle),!1),this._renderPaintInOrder(s)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(s){return this.radius=s,this.set("width",s*2).set("height",s*2)}}),a.Circle.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),a.Circle.fromElement=function(s,c){var d=a.parseAttributes(s,a.Circle.ATTRIBUTE_NAMES);if(!u(d))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,c(new a.Circle(d))};function u(s){return"radius"in s&&s.radius>=0}a.Circle.fromObject=function(s,c){a.Object._fromObject("Circle",s,c)}}(e),function(l){var a=l.fabric||(l.fabric={});if(a.Triangle){a.warn("fabric.Triangle is already defined");return}a.Triangle=a.util.createClass(a.Object,{type:"triangle",width:100,height:100,_render:function(f){var u=this.width/2,s=this.height/2;f.beginPath(),f.moveTo(-u,s),f.lineTo(0,-s),f.lineTo(u,s),f.closePath(),this._renderPaintInOrder(f)},_toSVG:function(){var f=this.width/2,u=this.height/2,s=[-f+" "+u,"0 "+-u,f+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',s,'" />']}}),a.Triangle.fromObject=function(f,u){return a.Object._fromObject("Triangle",f,u)}}(e),function(l){var a=l.fabric||(l.fabric={}),f=Math.PI*2;if(a.Ellipse){a.warn("fabric.Ellipse is already defined.");return}a.Ellipse=a.util.createClass(a.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,s){switch(this.callSuper("_set",u,s),u){case"rx":this.rx=s,this.set("width",s*2);break;case"ry":this.ry=s,this.set("height",s*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,f,!1),u.restore(),this._renderPaintInOrder(u)}}),a.Ellipse.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),a.Ellipse.fromElement=function(u,s){var c=a.parseAttributes(u,a.Ellipse.ATTRIBUTE_NAMES);c.left=(c.left||0)-c.rx,c.top=(c.top||0)-c.ry,s(new a.Ellipse(c))},a.Ellipse.fromObject=function(u,s){a.Object._fromObject("Ellipse",u,s)}}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend;if(a.Rect){a.warn("fabric.Rect is already defined");return}a.Rect=a.util.createClass(a.Object,{stateProperties:a.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var s=this.rx?Math.min(this.rx,this.width/2):0,c=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,p=this.height,g=-this.width/2,m=-this.height/2,v=s!==0||c!==0,y=1-.5522847498;u.beginPath(),u.moveTo(g+s,m),u.lineTo(g+d-s,m),v&&u.bezierCurveTo(g+d-y*s,m,g+d,m+y*c,g+d,m+c),u.lineTo(g+d,m+p-c),v&&u.bezierCurveTo(g+d,m+p-y*c,g+d-y*s,m+p,g+d-s,m+p),u.lineTo(g+s,m+p),v&&u.bezierCurveTo(g+y*s,m+p,g,m+p-y*c,g,m+p-c),u.lineTo(g,m+c),v&&u.bezierCurveTo(g,m+y*c,g+y*s,m,g+s,m),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,s=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',s,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),a.Rect.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),a.Rect.fromElement=function(u,s,c){if(!u)return s(null);c=c||{};var d=a.parseAttributes(u,a.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var p=new a.Rect(f(c?a.util.object.clone(c):{},d));p.visible=p.visible&&p.width>0&&p.height>0,s(p)},a.Rect.fromObject=function(u,s){return a.Object._fromObject("Rect",u,s)}}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend,u=a.util.array.min,s=a.util.array.max,c=a.util.toFixed,d=a.util.projectStrokeOnPoints;if(a.Polyline){a.warn("fabric.Polyline is already defined");return}a.Polyline=a.util.createClass(a.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:a.Object.prototype.cacheProperties.concat("points"),initialize:function(p,g){g=g||{},this.points=p||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return d(this.points,this,!0)},_setPositionDimensions:function(p){var g=this._calcDimensions(p),m,v=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-v,this.height=g.height-v,p.fromSVG||(m=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+v/2,y:g.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?g.left:m.x),typeof p.top>"u"&&(this.top=p.fromSVG?g.top:m.y),this.pathOffset={x:g.left+this.width/2+v/2,y:g.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=u(p,"x")||0,m=u(p,"y")||0,v=s(p,"x")||0,y=s(p,"y")||0,w=v-g,b=y-m;return{left:g,top:m,width:w,height:b}},toObject:function(p){return f(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],g=this.pathOffset.x,m=this.pathOffset.y,v=a.Object.NUM_FRACTION_DIGITS,y=0,w=this.points.length;y<w;y++)p.push(c(this.points[y].x-g,v),",",c(this.points[y].y-m,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var g,m=this.points.length,v=this.pathOffset.x,y=this.pathOffset.y;if(!m||isNaN(this.points[m-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-y);for(var w=0;w<m;w++)g=this.points[w],p.lineTo(g.x-v,g.y-y);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),a.Polyline.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polyline.fromElementGenerator=function(p){return function(g,m,v){if(!g)return m(null);v||(v={});var y=a.parsePointsAttribute(g.getAttribute("points")),w=a.parseAttributes(g,a[p].ATTRIBUTE_NAMES);w.fromSVG=!0,m(new a[p](y,f(w,v)))}},a.Polyline.fromElement=a.Polyline.fromElementGenerator("Polyline"),a.Polyline.fromObject=function(p,g){return a.Object._fromObject("Polyline",p,g,"points")}}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.projectStrokeOnPoints;if(a.Polygon){a.warn("fabric.Polygon is already defined");return}a.Polygon=a.util.createClass(a.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return f(this.points,this)},_render:function(u){this.commonRender(u)&&(u.closePath(),this._renderPaintInOrder(u))}}),a.Polygon.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polygon.fromElement=a.Polyline.fromElementGenerator("Polygon"),a.Polygon.fromObject=function(u,s){a.Object._fromObject("Polygon",u,s,"points")}}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.array.min,u=a.util.array.max,s=a.util.object.extend,c=a.util.object.clone,d=a.util.toFixed;if(a.Path){a.warn("fabric.Path is already defined");return}a.Path=a.util.createClass(a.Object,{type:"path",path:null,cacheProperties:a.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:a.Object.prototype.stateProperties.concat("path"),initialize:function(p,g){g=c(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(p||[],g)},_setPath:function(p,g){this.path=a.util.makePathSimpler(Array.isArray(p)?p:a.util.parsePath(p)),a.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(p){var g,m=0,v=0,y=0,w=0,b=0,S=0,_=-this.pathOffset.x,E=-this.pathOffset.y;p.beginPath();for(var C=0,P=this.path.length;C<P;++C)switch(g=this.path[C],g[0]){case"L":y=g[1],w=g[2],p.lineTo(y+_,w+E);break;case"M":y=g[1],w=g[2],m=y,v=w,p.moveTo(y+_,w+E);break;case"C":y=g[5],w=g[6],b=g[3],S=g[4],p.bezierCurveTo(g[1]+_,g[2]+E,b+_,S+E,y+_,w+E);break;case"Q":p.quadraticCurveTo(g[1]+_,g[2]+E,g[3]+_,g[4]+E),y=g[3],w=g[4],b=g[1],S=g[2];break;case"z":case"Z":y=m,w=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return s(this.callSuper("toObject",p),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(p){var g=this.toObject(["sourcePath"].concat(p));return g.sourcePath&&delete g.path,g},_toSVG:function(){var p=a.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=a.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,p)+", "+d(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:g})},toSVG:function(p){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],g=[],m,v=0,y=0,w=0,b=0,S,_=0,E=this.path.length;_<E;++_){switch(m=this.path[_],m[0]){case"L":w=m[1],b=m[2],S=[];break;case"M":w=m[1],b=m[2],v=w,y=b,S=[];break;case"C":S=a.util.getBoundsOfCurve(w,b,m[1],m[2],m[3],m[4],m[5],m[6]),w=m[5],b=m[6];break;case"Q":S=a.util.getBoundsOfCurve(w,b,m[1],m[2],m[1],m[2],m[3],m[4]),w=m[3],b=m[4];break;case"z":case"Z":w=v,b=y;break}S.forEach(function(D){p.push(D.x),g.push(D.y)}),p.push(w),g.push(b)}var C=f(p)||0,P=f(g)||0,N=u(p)||0,B=u(g)||0,I=N-C,U=B-P;return{left:C,top:P,width:I,height:U}}}),a.Path.fromObject=function(p,g){if(typeof p.sourcePath=="string"){var m=p.sourcePath;a.loadSVGFromURL(m,function(v){var y=v[0];y.setOptions(p),p.clipPath?a.util.enlivenObjects([p.clipPath],function(w){y.clipPath=w[0],g&&g(y)}):g&&g(y)})}else a.Object._fromObject("Path",p,g,"path")},a.Path.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(["d"]),a.Path.fromElement=function(p,g,m){var v=a.parseAttributes(p,a.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,g(new a.Path(v.d,s(v,m)))}}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.array.min,u=a.util.array.max;a.Group||(a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(s,c,d){c=c||{},this._objects=[],d&&this.callSuper("initialize",c),this._objects=s||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(d)this._updateObjectsACoords();else{var g=c&&c.centerPoint;c.originX!==void 0&&(this.originX=c.originX),c.originY!==void 0&&(this.originY=c.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete c.centerPoint,this.callSuper("initialize",c)}this.setCoords()},_updateObjectsACoords:function(){for(var s=!0,c=this._objects.length;c--;)this._objects[c].setCoords(s)},_updateObjectsCoords:function(c){for(var c=c||this.getCenterPoint(),d=this._objects.length;d--;)this._updateObjectCoords(this._objects[d],c)},_updateObjectCoords:function(s,c){var d=s.left,p=s.top,g=!0;s.set({left:d-c.x,top:p-c.y}),s.group=this,s.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(s){var c=!!this.group;return this._restoreObjectsState(),a.util.resetObjectTransform(this),s&&(c&&a.util.removeTransformFromObject(s,this.group.calcTransformMatrix()),this._objects.push(s),s.group=this,s._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,c?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(s){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.remove(s),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(s){this.dirty=!0,s.group=this,s._set("canvas",this.canvas)},_onObjectRemoved:function(s){this.dirty=!0,delete s.group},_set:function(s,c){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(s,c);if(s==="canvas")for(;d--;)this._objects[d]._set(s,c);a.Object.prototype._set.call(this,s,c)},toObject:function(s){var c=this.includeDefaultValues,d=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var m=g.includeDefaultValues;g.includeDefaultValues=c;var v=g.toObject(s);return g.includeDefaultValues=m,v}),p=a.Object.prototype.toObject.call(this,s);return p.objects=d,p},toDatalessObject:function(s){var c,d=this.sourcePath;if(d)c=d;else{var p=this.includeDefaultValues;c=this._objects.map(function(m){var v=m.includeDefaultValues;m.includeDefaultValues=p;var y=m.toDatalessObject(s);return m.includeDefaultValues=v,y})}var g=a.Object.prototype.toDatalessObject.call(this,s);return g.objects=c,g},render:function(s){this._transformDone=!0,this.callSuper("render",s),this._transformDone=!1},shouldCache:function(){var s=a.Object.prototype.shouldCache.call(this);if(s){for(var c=0,d=this._objects.length;c<d;c++)if(this._objects[c].willDrawShadow())return this.ownCaching=!1,!1}return s},willDrawShadow:function(){if(a.Object.prototype.willDrawShadow.call(this))return!0;for(var s=0,c=this._objects.length;s<c;s++)if(this._objects[s].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(s){for(var c=0,d=this._objects.length;c<d;c++)this._objects[c].render(s);this._drawClipPath(s,this.clipPath)},isCacheDirty:function(s){if(this.callSuper("isCacheDirty",s))return!0;if(!this.statefullCache)return!1;for(var c=0,d=this._objects.length;c<d;c++)if(this._objects[c].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-g/2,p,g)}return!0}return!1},_restoreObjectsState:function(){var s=this.calcOwnMatrix();return this._objects.forEach(function(c){a.util.addTransformToObject(c,s),delete c.group,c.setCoords()}),this},destroy:function(){return this._objects.forEach(function(s){s.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var s=this._objects,c=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var p=new a.ActiveSelection([]);return p.set(d),p.type="activeSelection",c.remove(this),s.forEach(function(g){g.group=p,g.dirty=!0,c.add(g)}),p.canvas=c,p._objects=s,c._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var s=!0;return this.forEachObject(function(c){c.setCoords(s)}),this},_calcBounds:function(s){for(var c=[],d=[],p,g,m,v=["tr","br","bl","tl"],y=0,w=this._objects.length,b,S=v.length;y<w;++y){for(p=this._objects[y],m=p.calcACoords(),b=0;b<S;b++)g=v[b],c.push(m[g].x),d.push(m[g].y);p.aCoords=m}this._getBounds(c,d,s)},_getBounds:function(s,c,d){var p=new a.Point(f(s),f(c)),g=new a.Point(u(s),u(c)),m=p.y||0,v=p.x||0,y=g.x-p.x||0,w=g.y-p.y||0;this.width=y,this.height=w,d||this.setPositionByOrigin({x:v,y:m},"left","top")},_toSVG:function(s){for(var c=["<g ","COMMON_PARTS",` >
`],d=0,p=this._objects.length;d<p;d++)c.push("		",this._objects[d].toSVG(s));return c.push(`</g>
`),c},getSvgStyles:function(){var s=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",c=this.visible?"":" visibility: hidden;";return[s,this.getSvgFilter(),c].join("")},toClipPathSVG:function(s){for(var c=[],d=0,p=this._objects.length;d<p;d++)c.push("	",this._objects[d].toClipPathSVG(s));return this._createBaseClipPathSVGMarkup(c,{reviver:s})}}),a.Group.fromObject=function(s,c){var d=s.objects,p=a.util.object.clone(s,!0);if(delete p.objects,typeof d=="string"){a.loadSVGFromURL(d,function(g){var m=a.util.groupSVGElements(g,s,d),v=p.clipPath;delete p.clipPath,m.set(p),v?a.util.enlivenObjects([v],function(y){m.clipPath=y[0],c&&c(m)}):c&&c(m)});return}a.util.enlivenObjects(d,function(g){a.util.enlivenObjectEnlivables(s,p,function(){c&&c(new a.Group(g,p,!0))})})})}(e),function(l){var a=l.fabric||(l.fabric={});a.ActiveSelection||(a.ActiveSelection=a.util.createClass(a.Group,{type:"activeSelection",initialize:function(f,u){u=u||{},this._objects=f||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),a.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var f=this._objects.concat();this._objects=[];var u=a.Object.prototype.toObject.call(this),s=new a.Group([]);if(delete u.type,s.set(u),f.forEach(function(d){d.canvas.remove(d),d.group=s}),s._objects=f,!this.canvas)return s;var c=this.canvas;return c.add(s),c._activeObject=s,s.setCoords(),s},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(f,u,s){f.save(),f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",f,u),s=s||{},typeof s.hasControls>"u"&&(s.hasControls=!1),s.forActiveSelection=!0;for(var c=0,d=this._objects.length;c<d;c++)this._objects[c]._renderControls(f,s);f.restore()}}),a.ActiveSelection.fromObject=function(f,u){a.util.enlivenObjects(f.objects,function(s){delete f.objects,u&&u(new a.ActiveSelection(s,f,!0))})})}(e),function(l){var a=t.util.object.extend;if(l.fabric||(l.fabric={}),l.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(f,u){u||(u={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",u),this._initElement(f,u)},getElement:function(){return this._element||{}},setElement:function(f,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=f,this._originalElement=f,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(f){var u=t.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(f)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(f){t.util.cleanUpJsdomNode(this[f]),this[f]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var f=this.getElement();return{width:f.naturalWidth||f.width,height:f.naturalHeight||f.height}},_stroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,s=this.height/2;f.beginPath(),f.moveTo(-u,-s),f.lineTo(u,-s),f.lineTo(u,s),f.lineTo(-u,s),f.lineTo(-u,-s),f.closePath()}},toObject:function(f){var u=[];this.filters.forEach(function(c){c&&u.push(c.toObject())});var s=a(this.callSuper("toObject",["cropX","cropY"].concat(f)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(s.resizeFilter=this.resizeFilter.toObject()),s},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var f=[],u=[],s,c=this._element,d=-this.width/2,p=-this.height/2,g="",m="";if(!c)return[];if(this.hasCrop()){var v=t.Object.__uid++;f.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+d+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(m='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',p-this.cropY,'" width="',c.width||c.naturalWidth,'" height="',c.height||c.height,m,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,s=["	<rect ",'x="',d,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?f=f.concat(s,u):f=f.concat(u,s),f},getSrc:function(f){var u=f?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(f,u,s){return t.util.loadImage(f,function(c,d){this.setElement(c,s),this._setWidthHeight(),u&&u(this,d)},this,s&&s.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var f=this.resizeFilter,u=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),c=s.scaleX,d=s.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!f||c>u&&d>u){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=c,this._lastScaleY=d;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var g=t.util.createCanvasElement(),m=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,y=p.height;g.width=v,g.height=y,this._element=g,this._lastScaleX=f.scaleX=c,this._lastScaleY=f.scaleY=d,t.filterBackend.applyFilters([f],p,v,y,this._element,m),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(f){if(f=f||this.filters||[],f=f.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),f.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,s=u.naturalWidth||u.width,c=u.naturalHeight||u.height;if(this._element===this._originalElement){var d=t.util.createCanvasElement();d.width=s,d.height=c,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,c),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(f,this._originalElement,s,c,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(f){t.util.setImageSmoothing(f,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(f),this._renderPaintInOrder(f)},drawCacheOnCanvas:function(f){t.util.setImageSmoothing(f,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,f)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(f){var u=this._element;if(u){var s=this._filterScalingX,c=this._filterScalingY,d=this.width,p=this.height,g=Math.min,m=Math.max,v=m(this.cropX,0),y=m(this.cropY,0),w=u.naturalWidth||u.width,b=u.naturalHeight||u.height,S=v*s,_=y*c,E=g(d*s,w-S),C=g(p*c,b-_),P=-d/2,N=-p/2,B=g(d,w/s-v),I=g(p,b/c-y);u&&f.drawImage(u,S,_,E,C,P,N,B,I)}},_needsResize:function(){var f=this.getTotalObjectScaling();return f.scaleX!==this._lastScaleX||f.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(f,u){this.setElement(t.util.getById(f),u),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(f){f||(f={}),this.setOptions(f),this._setWidthHeight(f)},_initFilters:function(f,u){f&&f.length?t.util.enlivenObjects(f,function(s){u&&u(s)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(f){f||(f={});var u=this.getElement();this.width=f.width||u.naturalWidth||u.width||0,this.height=f.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var f=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,s=this._element.height,c=1,d=1,p=0,g=0,m=0,v=0,y,w=this.width,b=this.height,S={width:w,height:b};return f&&(f.alignX!=="none"||f.alignY!=="none")?(f.meetOrSlice==="meet"&&(c=d=t.util.findScaleToFit(this._element,S),y=(w-u*c)/2,f.alignX==="Min"&&(p=-y),f.alignX==="Max"&&(p=y),y=(b-s*d)/2,f.alignY==="Min"&&(g=-y),f.alignY==="Max"&&(g=y)),f.meetOrSlice==="slice"&&(c=d=t.util.findScaleToCover(this._element,S),y=u-w/c,f.alignX==="Mid"&&(m=y/2),f.alignX==="Max"&&(m=y),y=s-b/d,f.alignY==="Mid"&&(v=y/2),f.alignY==="Max"&&(v=y),u=w/c,s=b/d)):(c=w/u,d=b/s),{width:u,height:s,scaleX:c,scaleY:d,offsetLeft:p,offsetTop:g,cropX:m,cropY:v}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(f,u){var s=t.util.object.clone(f);t.util.loadImage(s.src,function(c,d){if(d){u&&u(null,!0);return}t.Image.prototype._initFilters.call(s,s.filters,function(p){s.filters=p||[],t.Image.prototype._initFilters.call(s,[s.resizeFilter],function(g){s.resizeFilter=g[0],t.util.enlivenObjectEnlivables(s,s,function(){var m=new t.Image(c,s);u(m,!1)})})})},null,s.crossOrigin)},t.Image.fromURL=function(f,u,s){t.util.loadImage(f,function(c,d){u&&u(new t.Image(c,s),d)},null,s&&s.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(f,u,s){var c=t.parseAttributes(f,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(c["xlink:href"],u,a(s?t.util.object.clone(s):{},c))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var l=this.angle%360;return l>0?Math.round((l-1)/90)*90:Math.round(l/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(l){l=l||{};var a=function(){},f=l.onComplete||a,u=l.onChange||a,s=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(c){s.rotate(c),u()},onComplete:function(){s.setCoords(),f()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(l){return l.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(l){return l.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function l(f,u){var s="precision "+u+` float;
void main(){}`,c=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(c,s),f.compileShader(c),!!f.getShaderParameter(c,f.COMPILE_STATUS)}t.isWebglSupported=function(f){if(t.isLikelyNode)return!1;f=f||t.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),s=u.getContext("webgl")||u.getContext("experimental-webgl"),c=!1;if(s){t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),c=t.maxTextureSize>=f;for(var d=["highp","mediump","lowp"],p=0;p<3;p++)if(l(s,d[p])){t.webGlPrecision=d[p];break}}return this.isSupported=c,c},t.WebglFilterBackend=a;function a(f){f&&f.tileSize&&(this.tileSize=f.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}a.prototype={tileSize:2048,resources:{},setupGLContext:function(f,u){this.dispose(),this.createWebGLCanvas(f,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(f,u)},chooseFastestCopyGLTo2DMethod:function(f,u){var s=typeof window.performance<"u",c;try{new ImageData(1,1),c=!0}catch{c=!1}var d=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(s&&c&&d&&p){var g=t.util.createCanvasElement(),m=new ArrayBuffer(f*u*4);if(t.forceGLPutImageData){this.imageBuffer=m,this.copyGLTo2D=h;return}var v={imageBuffer:m,destinationWidth:f,destinationHeight:u,targetCanvas:g},y,w,b;g.width=f,g.height=u,y=window.performance.now(),o.call(v,this.gl,v),w=window.performance.now()-y,y=window.performance.now(),h.call(v,this.gl,v),b=window.performance.now()-y,w>b?(this.imageBuffer=m,this.copyGLTo2D=h):this.copyGLTo2D=o}},createWebGLCanvas:function(f,u){var s=t.util.createCanvasElement();s.width=f,s.height=u;var c={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=s.getContext("webgl",c);d||(d=s.getContext("experimental-webgl",c)),d&&(d.clearColor(0,0,0,0),this.canvas=s,this.gl=d)},applyFilters:function(f,u,s,c,d,p){var g=this.gl,m;p&&(m=this.getCachedTexture(p,u));var v={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:s,sourceHeight:c,destinationWidth:s,destinationHeight:c,context:g,sourceTexture:this.createTexture(g,s,c,!m&&u),targetTexture:this.createTexture(g,s,c),originalTexture:m||this.createTexture(g,s,c,!m&&u),passes:f.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},y=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,y),f.forEach(function(w){w&&w.applyTo(v)}),i(v),this.copyGLTo2D(g,v),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(v.sourceTexture),g.deleteTexture(v.targetTexture),g.deleteFramebuffer(y),d.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(f,u,s,c,d){var p=f.createTexture();return f.bindTexture(f.TEXTURE_2D,p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,d||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,d||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c?f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,c):f.texImage2D(f.TEXTURE_2D,0,f.RGBA,u,s,0,f.RGBA,f.UNSIGNED_BYTE,null),p},getCachedTexture:function(f,u){if(this.textureCache[f])return this.textureCache[f];var s=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[f]=s,s},evictCachesForKey:function(f){this.textureCache[f]&&(this.gl.deleteTexture(this.textureCache[f]),delete this.textureCache[f])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var f=this.gl,u={renderer:"",vendor:""};if(!f)return u;var s=f.getExtension("WEBGL_debug_renderer_info");if(s){var c=f.getParameter(s.UNMASKED_RENDERER_WEBGL),d=f.getParameter(s.UNMASKED_VENDOR_WEBGL);c&&(u.renderer=c.toLowerCase()),d&&(u.vendor=d.toLowerCase())}return this.gpuInfo=u,u}}}();function i(l){var a=l.targetCanvas,f=a.width,u=a.height,s=l.destinationWidth,c=l.destinationHeight;(f!==s||u!==c)&&(a.width=s,a.height=c)}function o(l,a){var f=l.canvas,u=a.targetCanvas,s=u.getContext("2d");s.translate(0,u.height),s.scale(1,-1);var c=f.height-u.height;s.drawImage(f,0,c,u.width,u.height,0,0,u.width,u.height)}function h(l,a){var f=a.targetCanvas,u=f.getContext("2d"),s=a.destinationWidth,c=a.destinationHeight,d=s*c*4,p=new Uint8Array(this.imageBuffer,0,d),g=new Uint8ClampedArray(this.imageBuffer,0,d);l.readPixels(0,0,s,c,l.RGBA,l.UNSIGNED_BYTE,p);var m=new ImageData(g,s,c);u.putImageData(m,0,0)}(function(){var l=function(){};t.Canvas2dFilterBackend=a;function a(){}a.prototype={evictCachesForKey:l,dispose:l,clearWebGLCaches:l,resources:{},applyFilters:function(f,u,s,c,d){var p=d.getContext("2d");p.drawImage(u,0,0,s,c);var g=p.getImageData(0,0,s,c),m=p.getImageData(0,0,s,c),v={sourceWidth:s,sourceHeight:c,imageData:g,originalEl:u,originalImageData:m,canvasEl:d,ctx:p,filterBackend:this};return f.forEach(function(y){y.applyTo(v)}),(v.imageData.width!==s||v.imageData.height!==c)&&(d.width=v.imageData.width,d.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(l){l&&this.setOptions(l)},setOptions:function(l){for(var a in l)this[a]=l[a]},createProgram:function(l,a,f){a=a||this.fragmentSource,f=f||this.vertexSource,t.webGlPrecision!=="highp"&&(a=a.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var u=l.createShader(l.VERTEX_SHADER);if(l.shaderSource(u,f),l.compileShader(u),!l.getShaderParameter(u,l.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+l.getShaderInfoLog(u));var s=l.createShader(l.FRAGMENT_SHADER);if(l.shaderSource(s,a),l.compileShader(s),!l.getShaderParameter(s,l.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+l.getShaderInfoLog(s));var c=l.createProgram();if(l.attachShader(c,u),l.attachShader(c,s),l.linkProgram(c),!l.getProgramParameter(c,l.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+l.getProgramInfoLog(c));var d=this.getAttributeLocations(l,c),p=this.getUniformLocations(l,c)||{};return p.uStepW=l.getUniformLocation(c,"uStepW"),p.uStepH=l.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:d,uniformLocations:p}},getAttributeLocations:function(l,a){return{aPosition:l.getAttribLocation(a,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(l,a,f){var u=a.aPosition,s=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,s),l.enableVertexAttribArray(u),l.vertexAttribPointer(u,2,l.FLOAT,!1,0,0),l.bufferData(l.ARRAY_BUFFER,f,l.STATIC_DRAW)},_setupFrameBuffer:function(l){var a=l.context,f,u;l.passes>1?(f=l.destinationWidth,u=l.destinationHeight,(l.sourceWidth!==f||l.sourceHeight!==u)&&(a.deleteTexture(l.targetTexture),l.targetTexture=l.filterBackend.createTexture(a,f,u)),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,l.targetTexture,0)):(a.bindFramebuffer(a.FRAMEBUFFER,null),a.finish())},_swapTextures:function(l){l.passes--,l.pass++;var a=l.targetTexture;l.targetTexture=l.sourceTexture,l.sourceTexture=a},isNeutralState:function(){var l=this.mainParameter,a=t.Image.filters[this.type].prototype;if(l)if(Array.isArray(a[l])){for(var f=a[l].length;f--;)if(this[l][f]!==a[l][f])return!1;return!0}else return a[l]===this[l];else return!1},applyTo:function(l){l.webgl?(this._setupFrameBuffer(l),this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},retrieveShader:function(l){return l.programCache.hasOwnProperty(this.type)||(l.programCache[this.type]=this.createProgram(l.context)),l.programCache[this.type]},applyToWebGL:function(l){var a=l.context,f=this.retrieveShader(l);l.pass===0&&l.originalTexture?a.bindTexture(a.TEXTURE_2D,l.originalTexture):a.bindTexture(a.TEXTURE_2D,l.sourceTexture),a.useProgram(f.program),this.sendAttributeData(a,f.attributeLocations,l.aPosition),a.uniform1f(f.uniformLocations.uStepW,1/l.sourceWidth),a.uniform1f(f.uniformLocations.uStepH,1/l.sourceHeight),this.sendUniformData(a,f.uniformLocations),a.viewport(0,0,l.destinationWidth,l.destinationHeight),a.drawArrays(a.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(l,a,f){l.activeTexture(f),l.bindTexture(l.TEXTURE_2D,a),l.activeTexture(l.TEXTURE0)},unbindAdditionalTexture:function(l,a){l.activeTexture(a),l.bindTexture(l.TEXTURE_2D,null),l.activeTexture(l.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(l){this[this.mainParameter]=l},sendUniformData:function(){},createHelpLayer:function(l){if(!l.helpLayer){var a=document.createElement("canvas");a.width=l.sourceWidth,a.height=l.sourceHeight,l.helpLayer=a}},toObject:function(){var l={type:this.type},a=this.mainParameter;return a&&(l[a]=this[a]),l},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(l,a){var f=new t.Image.filters[l.type](l);return a&&a(f),f},function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.ColorMatrix=u(f.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(s){this.callSuper("initialize",s),this.matrix=this.matrix.slice(0)},applyTo2d:function(s){var c=s.imageData,d=c.data,p=d.length,g=this.matrix,m,v,y,w,b,S=this.colorsOnly;for(b=0;b<p;b+=4)m=d[b],v=d[b+1],y=d[b+2],S?(d[b]=m*g[0]+v*g[1]+y*g[2]+g[4]*255,d[b+1]=m*g[5]+v*g[6]+y*g[7]+g[9]*255,d[b+2]=m*g[10]+v*g[11]+y*g[12]+g[14]*255):(w=d[b+3],d[b]=m*g[0]+v*g[1]+y*g[2]+w*g[3]+g[4]*255,d[b+1]=m*g[5]+v*g[6]+y*g[7]+w*g[8]+g[9]*255,d[b+2]=m*g[10]+v*g[11]+y*g[12]+w*g[13]+g[14]*255,d[b+3]=m*g[15]+v*g[16]+y*g[17]+w*g[18]+g[19]*255)},getUniformLocations:function(s,c){return{uColorMatrix:s.getUniformLocation(c,"uColorMatrix"),uConstants:s.getUniformLocation(c,"uConstants")}},sendUniformData:function(s,c){var d=this.matrix,p=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],g=[d[4],d[9],d[14],d[19]];s.uniformMatrix4fv(c.uColorMatrix,!1,p),s.uniform4fv(c.uConstants,g)}}),a.Image.filters.ColorMatrix.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Brightness=u(f.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(s){if(this.brightness!==0){var c=s.imageData,d=c.data,p,g=d.length,m=Math.round(this.brightness*255);for(p=0;p<g;p+=4)d[p]=d[p]+m,d[p+1]=d[p+1]+m,d[p+2]=d[p+2]+m}},getUniformLocations:function(s,c){return{uBrightness:s.getUniformLocation(c,"uBrightness")}},sendUniformData:function(s,c){s.uniform1f(c.uBrightness,this.brightness)}}),a.Image.filters.Brightness.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend,u=a.Image.filters,s=a.util.createClass;u.Convolute=s(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(c){var d=Math.sqrt(this.matrix.length),p=this.type+"_"+d+"_"+(this.opaque?1:0),g=this.fragmentSource[p];return c.programCache.hasOwnProperty(p)||(c.programCache[p]=this.createProgram(c.context,g)),c.programCache[p]},applyTo2d:function(c){var d=c.imageData,p=d.data,g=this.matrix,m=Math.round(Math.sqrt(g.length)),v=Math.floor(m/2),y=d.width,w=d.height,b=c.ctx.createImageData(y,w),S=b.data,_=this.opaque?1:0,E,C,P,N,B,I,U,D,F,O,M,V,k;for(M=0;M<w;M++)for(O=0;O<y;O++){for(B=(M*y+O)*4,E=0,C=0,P=0,N=0,k=0;k<m;k++)for(V=0;V<m;V++)U=M+k-v,I=O+V-v,!(U<0||U>=w||I<0||I>=y)&&(D=(U*y+I)*4,F=g[k*m+V],E+=p[D]*F,C+=p[D+1]*F,P+=p[D+2]*F,_||(N+=p[D+3]*F));S[B]=E,S[B+1]=C,S[B+2]=P,_?S[B+3]=p[B+3]:S[B+3]=N}c.imageData=b},getUniformLocations:function(c,d){return{uMatrix:c.getUniformLocation(d,"uMatrix"),uOpaque:c.getUniformLocation(d,"uOpaque"),uHalfSize:c.getUniformLocation(d,"uHalfSize"),uSize:c.getUniformLocation(d,"uSize")}},sendUniformData:function(c,d){c.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return f(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),a.Image.filters.Convolute.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Grayscale=u(f.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(s){var c=s.imageData,d=c.data,p,g=d.length,m,v=this.mode;for(p=0;p<g;p+=4)v==="average"?m=(d[p]+d[p+1]+d[p+2])/3:v==="lightness"?m=(Math.min(d[p],d[p+1],d[p+2])+Math.max(d[p],d[p+1],d[p+2]))/2:v==="luminosity"&&(m=.21*d[p]+.72*d[p+1]+.07*d[p+2]),d[p]=m,d[p+1]=m,d[p+2]=m},retrieveShader:function(s){var c=this.type+"_"+this.mode;if(!s.programCache.hasOwnProperty(c)){var d=this.fragmentSource[this.mode];s.programCache[c]=this.createProgram(s.context,d)}return s.programCache[c]},getUniformLocations:function(s,c){return{uMode:s.getUniformLocation(c,"uMode")}},sendUniformData:function(s,c){var d=1;s.uniform1i(c.uMode,d)},isNeutralState:function(){return!1}}),a.Image.filters.Grayscale.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Invert=u(f.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(s){var c=s.imageData,d=c.data,p,g=d.length;for(p=0;p<g;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(s,c){return{uInvert:s.getUniformLocation(c,"uInvert")}},sendUniformData:function(s,c){s.uniform1i(c.uInvert,this.invert)}}),a.Image.filters.Invert.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend,u=a.Image.filters,s=a.util.createClass;u.Noise=s(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(c){if(this.noise!==0){var d=c.imageData,p=d.data,g,m=p.length,v=this.noise,y;for(g=0,m=p.length;g<m;g+=4)y=(.5-Math.random())*v,p[g]+=y,p[g+1]+=y,p[g+2]+=y}},getUniformLocations:function(c,d){return{uNoise:c.getUniformLocation(d,"uNoise"),uSeed:c.getUniformLocation(d,"uSeed")}},sendUniformData:function(c,d){c.uniform1f(d.uNoise,this.noise/255),c.uniform1f(d.uSeed,Math.random())},toObject:function(){return f(this.callSuper("toObject"),{noise:this.noise})}}),a.Image.filters.Noise.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Pixelate=u(f.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(s){var c=s.imageData,d=c.data,p=c.height,g=c.width,m,v,y,w,b,S,_,E,C,P,N;for(v=0;v<p;v+=this.blocksize)for(y=0;y<g;y+=this.blocksize)for(m=v*4*g+y*4,w=d[m],b=d[m+1],S=d[m+2],_=d[m+3],P=Math.min(v+this.blocksize,p),N=Math.min(y+this.blocksize,g),E=v;E<P;E++)for(C=y;C<N;C++)m=E*4*g+C*4,d[m]=w,d[m+1]=b,d[m+2]=S,d[m+3]=_},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(s,c){return{uBlocksize:s.getUniformLocation(c,"uBlocksize"),uStepW:s.getUniformLocation(c,"uStepW"),uStepH:s.getUniformLocation(c,"uStepH")}},sendUniformData:function(s,c){s.uniform1f(c.uBlocksize,this.blocksize)}}),a.Image.filters.Pixelate.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.extend,u=a.Image.filters,s=a.util.createClass;u.RemoveColor=s(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(c){var d=c.imageData,p=d.data,g,m=this.distance*255,v,y,w,b=new a.Color(this.color).getSource(),S=[b[0]-m,b[1]-m,b[2]-m],_=[b[0]+m,b[1]+m,b[2]+m];for(g=0;g<p.length;g+=4)v=p[g],y=p[g+1],w=p[g+2],v>S[0]&&y>S[1]&&w>S[2]&&v<_[0]&&y<_[1]&&w<_[2]&&(p[g+3]=0)},getUniformLocations:function(c,d){return{uLow:c.getUniformLocation(d,"uLow"),uHigh:c.getUniformLocation(d,"uHigh")}},sendUniformData:function(c,d){var p=new a.Color(this.color).getSource(),g=parseFloat(this.distance),m=[0+p[0]/255-g,0+p[1]/255-g,0+p[2]/255-g,1],v=[p[0]/255+g,p[1]/255+g,p[2]/255+g,1];c.uniform4fv(d.uLow,m),c.uniform4fv(d.uHigh,v)},toObject:function(){return f(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),a.Image.filters.RemoveColor.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass,s={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var c in s)f[c]=u(f.ColorMatrix,{type:c,matrix:s[c],mainParameter:!1,colorsOnly:!0}),a.Image.filters[c].fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric,f=a.Image.filters,u=a.util.createClass;f.BlendColor=u(f.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(s){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[s]+`}
}`},retrieveShader:function(s){var c=this.type+"_"+this.mode,d;return s.programCache.hasOwnProperty(c)||(d=this.buildSource(this.mode),s.programCache[c]=this.createProgram(s.context,d)),s.programCache[c]},applyTo2d:function(s){var c=s.imageData,d=c.data,p=d.length,g,m,v,y,w,b,S,_=1-this.alpha;S=new a.Color(this.color).getSource(),g=S[0]*this.alpha,m=S[1]*this.alpha,v=S[2]*this.alpha;for(var E=0;E<p;E+=4)switch(y=d[E],w=d[E+1],b=d[E+2],this.mode){case"multiply":d[E]=y*g/255,d[E+1]=w*m/255,d[E+2]=b*v/255;break;case"screen":d[E]=255-(255-y)*(255-g)/255,d[E+1]=255-(255-w)*(255-m)/255,d[E+2]=255-(255-b)*(255-v)/255;break;case"add":d[E]=y+g,d[E+1]=w+m,d[E+2]=b+v;break;case"diff":case"difference":d[E]=Math.abs(y-g),d[E+1]=Math.abs(w-m),d[E+2]=Math.abs(b-v);break;case"subtract":d[E]=y-g,d[E+1]=w-m,d[E+2]=b-v;break;case"darken":d[E]=Math.min(y,g),d[E+1]=Math.min(w,m),d[E+2]=Math.min(b,v);break;case"lighten":d[E]=Math.max(y,g),d[E+1]=Math.max(w,m),d[E+2]=Math.max(b,v);break;case"overlay":d[E]=g<128?2*y*g/255:255-2*(255-y)*(255-g)/255,d[E+1]=m<128?2*w*m/255:255-2*(255-w)*(255-m)/255,d[E+2]=v<128?2*b*v/255:255-2*(255-b)*(255-v)/255;break;case"exclusion":d[E]=g+y-2*g*y/255,d[E+1]=m+w-2*m*w/255,d[E+2]=v+b-2*v*b/255;break;case"tint":d[E]=g+y*_,d[E+1]=m+w*_,d[E+2]=v+b*_}},getUniformLocations:function(s,c){return{uColor:s.getUniformLocation(c,"uColor")}},sendUniformData:function(s,c){var d=new a.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,s.uniform4fv(c.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendColor.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric,f=a.Image.filters,u=a.util.createClass;f.BlendImage=u(f.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(s){var c=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return s.programCache.hasOwnProperty(c)||(s.programCache[c]=this.createProgram(s.context,d)),s.programCache[c]},applyToWebGL:function(s){var c=s.context,d=this.createTexture(s.filterBackend,this.image);this.bindAdditionalTexture(c,d,c.TEXTURE1),this.callSuper("applyToWebGL",s),this.unbindAdditionalTexture(c,c.TEXTURE1)},createTexture:function(s,c){return s.getCachedTexture(c.cacheKey,c._element)},calculateMatrix:function(){var s=this.image,c=s._element.width,d=s._element.height;return[1/s.scaleX,0,0,0,1/s.scaleY,0,-s.left/c,-s.top/d,1]},applyTo2d:function(s){var c=s.imageData,d=s.filterBackend.resources,p=c.data,g=p.length,m=c.width,v=c.height,y,w,b,S,_,E,C,P,N,B,I=this.image,U;d.blendImage||(d.blendImage=a.util.createCanvasElement()),N=d.blendImage,B=N.getContext("2d"),N.width!==m||N.height!==v?(N.width=m,N.height=v):B.clearRect(0,0,m,v),B.setTransform(I.scaleX,0,0,I.scaleY,I.left,I.top),B.drawImage(I._element,0,0,m,v),U=B.getImageData(0,0,m,v).data;for(var D=0;D<g;D+=4)switch(_=p[D],E=p[D+1],C=p[D+2],P=p[D+3],y=U[D],w=U[D+1],b=U[D+2],S=U[D+3],this.mode){case"multiply":p[D]=_*y/255,p[D+1]=E*w/255,p[D+2]=C*b/255,p[D+3]=P*S/255;break;case"mask":p[D+3]=S;break}},getUniformLocations:function(s,c){return{uTransformMatrix:s.getUniformLocation(c,"uTransformMatrix"),uImage:s.getUniformLocation(c,"uImage")}},sendUniformData:function(s,c){var d=this.calculateMatrix();s.uniform1i(c.uImage,1),s.uniformMatrix3fv(c.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendImage.fromObject=function(s,c){a.Image.fromObject(s.image,function(d){var p=a.util.object.clone(s);p.image=d,c(new a.Image.filters.BlendImage(p))})}}(e),function(l){var a=l.fabric||(l.fabric={}),f=Math.pow,u=Math.floor,s=Math.sqrt,c=Math.abs,d=Math.round,p=Math.sin,g=Math.ceil,m=a.Image.filters,v=a.util.createClass;m.Resize=v(m.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,w){return{uDelta:y.getUniformLocation(w,"uDelta"),uTaps:y.getUniformLocation(w,"uTaps")}},sendUniformData:function(y,w){y.uniform2fv(w.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(w.uTaps,this.taps)},retrieveShader:function(y){var w=this.getFilterWindow(),b=this.type+"_"+w;if(!y.programCache.hasOwnProperty(b)){var S=this.generateShader(w);y.programCache[b]=this.createProgram(y.context,S)}return y.programCache[b]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),w=this.tempScale,b=this.getFilterWindow(),S=new Array(b),_=1;_<=b;_++)S[_-1]=y(_*w);return S},generateShader:function(S){for(var w=new Array(S),b=this.fragmentSourceTOP,S,_=1;_<=S;_++)w[_-1]=_+".0 * uDelta";return b+="uniform float uTaps["+S+`];
`,b+=`void main() {
`,b+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,b+=`  float sum = 1.0;
`,w.forEach(function(E,C){b+="  color += texture2D(uTexture, vTexCoord + "+E+") * uTaps["+C+`];
`,b+="  color += texture2D(uTexture, vTexCoord - "+E+") * uTaps["+C+`];
`,b+="  sum += 2.0 * uTaps["+C+`];
`}),b+=`  gl_FragColor = color / sum;
`,b+="}",b},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(w){if(w>=y||w<=-y)return 0;if(w<11920929e-14&&w>-11920929e-14)return 1;w*=Math.PI;var b=w/y;return p(w)/w*p(b)/b}},applyTo2d:function(y){var w=y.imageData,b=this.scaleX,S=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/S;var _=w.width,E=w.height,C=d(_*b),P=d(E*S),N;this.resizeType==="sliceHack"?N=this.sliceByTwo(y,_,E,C,P):this.resizeType==="hermite"?N=this.hermiteFastResize(y,_,E,C,P):this.resizeType==="bilinear"?N=this.bilinearFiltering(y,_,E,C,P):this.resizeType==="lanczos"&&(N=this.lanczosResize(y,_,E,C,P)),y.imageData=N},sliceByTwo:function(y,w,b,S,_){var E=y.imageData,C=.5,P=!1,N=!1,B=w*C,I=b*C,U=a.filterBackend.resources,D,F,O=0,M=0,V=w,k=0;for(U.sliceByTwo||(U.sliceByTwo=document.createElement("canvas")),D=U.sliceByTwo,(D.width<w*1.5||D.height<b)&&(D.width=w*1.5,D.height=b),F=D.getContext("2d"),F.clearRect(0,0,w*1.5,b),F.putImageData(E,0,0),S=u(S),_=u(_);!P||!N;)w=B,b=I,S<u(B*C)?B=u(B*C):(B=S,P=!0),_<u(I*C)?I=u(I*C):(I=_,N=!0),F.drawImage(D,O,M,w,b,V,k,B,I),O=V,M=k,k+=I;return F.getImageData(O,M,S,_)},lanczosResize:function(y,w,b,S,_){function E(j){var A,W,L,$,H,Y,K,G,Q,ee,le;for(k.x=(j+.5)*I,R.x=u(k.x),A=0;A<_;A++){for(k.y=(A+.5)*U,R.y=u(k.y),H=0,Y=0,K=0,G=0,Q=0,W=R.x-O;W<=R.x+O;W++)if(!(W<0||W>=w)){ee=u(1e3*c(W-k.x)),V[ee]||(V[ee]={});for(var te=R.y-M;te<=R.y+M;te++)te<0||te>=b||(le=u(1e3*c(te-k.y)),V[ee][le]||(V[ee][le]=B(s(f(ee*D,2)+f(le*F,2))/1e3)),L=V[ee][le],L>0&&($=(te*w+W)*4,H+=L,Y+=L*C[$],K+=L*C[$+1],G+=L*C[$+2],Q+=L*C[$+3]))}$=(A*S+j)*4,N[$]=Y/H,N[$+1]=K/H,N[$+2]=G/H,N[$+3]=Q/H}return++j<S?E(j):P}var C=y.imageData.data,P=y.ctx.createImageData(S,_),N=P.data,B=this.lanczosCreate(this.lanczosLobes),I=this.rcpScaleX,U=this.rcpScaleY,D=2/this.rcpScaleX,F=2/this.rcpScaleY,O=g(I*this.lanczosLobes/2),M=g(U*this.lanczosLobes/2),V={},k={},R={};return E(0)},bilinearFiltering:function(y,w,b,S,_){var E,C,P,N,B,I,U,D,F,O,M,V,k=0,R,j=this.rcpScaleX,A=this.rcpScaleY,W=4*(w-1),L=y.imageData,$=L.data,H=y.ctx.createImageData(S,_),Y=H.data;for(U=0;U<_;U++)for(D=0;D<S;D++)for(B=u(j*D),I=u(A*U),F=j*D-B,O=A*U-I,R=4*(I*w+B),M=0;M<4;M++)E=$[R+M],C=$[R+4+M],P=$[R+W+M],N=$[R+W+4+M],V=E*(1-F)*(1-O)+C*F*(1-O)+P*O*(1-F)+N*F*O,Y[k++]=V;return H},hermiteFastResize:function(y,w,b,S,_){for(var E=this.rcpScaleX,C=this.rcpScaleY,P=g(E/2),N=g(C/2),B=y.imageData,I=B.data,U=y.ctx.createImageData(S,_),D=U.data,F=0;F<_;F++)for(var O=0;O<S;O++){for(var M=(O+F*S)*4,V=0,k=0,R=0,j=0,A=0,W=0,L=0,$=(F+.5)*C,H=u(F*C);H<(F+1)*C;H++)for(var Y=c($-(H+.5))/N,K=(O+.5)*E,G=Y*Y,Q=u(O*E);Q<(O+1)*E;Q++){var ee=c(K-(Q+.5))/P,le=s(G+ee*ee);le>1&&le<-1||(V=2*le*le*le-3*le*le+1,V>0&&(ee=4*(Q+H*w),L+=V*I[ee+3],R+=V,I[ee+3]<255&&(V=V*I[ee+3]/250),j+=V*I[ee],A+=V*I[ee+1],W+=V*I[ee+2],k+=V))}D[M]=j/k,D[M+1]=A/k,D[M+2]=W/k,D[M+3]=L/R}return U},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),a.Image.filters.Resize.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Contrast=u(f.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(s){if(this.contrast!==0){var c=s.imageData,d,g,p=c.data,g=p.length,m=Math.floor(this.contrast*255),v=259*(m+255)/(255*(259-m));for(d=0;d<g;d+=4)p[d]=v*(p[d]-128)+128,p[d+1]=v*(p[d+1]-128)+128,p[d+2]=v*(p[d+2]-128)+128}},getUniformLocations:function(s,c){return{uContrast:s.getUniformLocation(c,"uContrast")}},sendUniformData:function(s,c){s.uniform1f(c.uContrast,this.contrast)}}),a.Image.filters.Contrast.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Saturation=u(f.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(s){if(this.saturation!==0){var c=s.imageData,d=c.data,p=d.length,g=-this.saturation,m,v;for(m=0;m<p;m+=4)v=Math.max(d[m],d[m+1],d[m+2]),d[m]+=v!==d[m]?(v-d[m])*g:0,d[m+1]+=v!==d[m+1]?(v-d[m+1])*g:0,d[m+2]+=v!==d[m+2]?(v-d[m+2])*g:0}},getUniformLocations:function(s,c){return{uSaturation:s.getUniformLocation(c,"uSaturation")}},sendUniformData:function(s,c){s.uniform1f(c.uSaturation,-this.saturation)}}),a.Image.filters.Saturation.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Vibrance=u(f.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(s){if(this.vibrance!==0){var c=s.imageData,d=c.data,p=d.length,g=-this.vibrance,m,v,y,w;for(m=0;m<p;m+=4)v=Math.max(d[m],d[m+1],d[m+2]),y=(d[m]+d[m+1]+d[m+2])/3,w=Math.abs(v-y)*2/255*g,d[m]+=v!==d[m]?(v-d[m])*w:0,d[m+1]+=v!==d[m+1]?(v-d[m+1])*w:0,d[m+2]+=v!==d[m+2]?(v-d[m+2])*w:0}},getUniformLocations:function(s,c){return{uVibrance:s.getUniformLocation(c,"uVibrance")}},sendUniformData:function(s,c){s.uniform1f(c.uVibrance,-this.vibrance)}}),a.Image.filters.Vibrance.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Blur=u(f.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(s){s.webgl?(this.aspectRatio=s.sourceWidth/s.sourceHeight,s.passes++,this._setupFrameBuffer(s),this.horizontal=!0,this.applyToWebGL(s),this._swapTextures(s),this._setupFrameBuffer(s),this.horizontal=!1,this.applyToWebGL(s),this._swapTextures(s)):this.applyTo2d(s)},applyTo2d:function(s){s.imageData=this.simpleBlur(s)},simpleBlur:function(s){var c=s.filterBackend.resources,d,p,g=s.imageData.width,m=s.imageData.height;c.blurLayer1||(c.blurLayer1=a.util.createCanvasElement(),c.blurLayer2=a.util.createCanvasElement()),d=c.blurLayer1,p=c.blurLayer2,(d.width!==g||d.height!==m)&&(p.width=d.width=g,p.height=d.height=m);var v=d.getContext("2d"),y=p.getContext("2d"),w=15,b,S,_,E,C=this.blur*.06*.5;for(v.putImageData(s.imageData,0,0),y.clearRect(0,0,g,m),E=-w;E<=w;E++)b=(Math.random()-.5)/4,S=E/w,_=C*S*g+b,y.globalAlpha=1-Math.abs(S),y.drawImage(d,_,b),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);for(E=-w;E<=w;E++)b=(Math.random()-.5)/4,S=E/w,_=C*S*m+b,y.globalAlpha=1-Math.abs(S),y.drawImage(d,b,_),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);s.ctx.drawImage(d,0,0);var P=s.ctx.getImageData(0,0,d.width,d.height);return v.globalAlpha=1,v.clearRect(0,0,d.width,d.height),P},getUniformLocations:function(s,c){return{delta:s.getUniformLocation(c,"uDelta")}},sendUniformData:function(s,c){var d=this.chooseRightDelta();s.uniform2fv(c.delta,d)},chooseRightDelta:function(){var s=1,c=[0,0],d;return this.horizontal?this.aspectRatio>1&&(s=1/this.aspectRatio):this.aspectRatio<1&&(s=this.aspectRatio),d=s*this.blur*.12,this.horizontal?c[0]=d:c[1]=d,c}}),f.Blur.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Gamma=u(f.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(s){this.gamma=[1,1,1],f.BaseFilter.prototype.initialize.call(this,s)},applyTo2d:function(s){var c=s.imageData,d=c.data,p=this.gamma,g=d.length,m=1/p[0],v=1/p[1],y=1/p[2],w;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),w=0,g=256;w<g;w++)this.rVals[w]=Math.pow(w/255,m)*255,this.gVals[w]=Math.pow(w/255,v)*255,this.bVals[w]=Math.pow(w/255,y)*255;for(w=0,g=d.length;w<g;w+=4)d[w]=this.rVals[d[w]],d[w+1]=this.gVals[d[w+1]],d[w+2]=this.bVals[d[w+2]]},getUniformLocations:function(s,c){return{uGamma:s.getUniformLocation(c,"uGamma")}},sendUniformData:function(s,c){s.uniform3fv(c.uGamma,this.gamma)}}),a.Image.filters.Gamma.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.Composed=u(f.BaseFilter,{type:"Composed",subFilters:[],initialize:function(s){this.callSuper("initialize",s),this.subFilters=this.subFilters.slice(0)},applyTo:function(s){s.passes+=this.subFilters.length-1,this.subFilters.forEach(function(c){c.applyTo(s)})},toObject:function(){return a.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(s){return s.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(s){return!s.isNeutralState()})}}),a.Image.filters.Composed.fromObject=function(s,c){var d=s.subFilters||[],p=d.map(function(m){return new a.Image.filters[m.type](m)}),g=new a.Image.filters.Composed({subFilters:p});return c&&c(g),g}}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.Image.filters,u=a.util.createClass;f.HueRotation=u(f.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var s=this.rotation*Math.PI,c=a.util.cos(s),d=a.util.sin(s),p=1/3,g=Math.sqrt(p)*d,m=1-c;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=c+m/3,this.matrix[1]=p*m-g,this.matrix[2]=p*m+g,this.matrix[5]=p*m+g,this.matrix[6]=c+p*m,this.matrix[7]=p*m-g,this.matrix[10]=p*m-g,this.matrix[11]=p*m+g,this.matrix[12]=c+p*m},isNeutralState:function(s){return this.calculateMatrix(),f.BaseFilter.prototype.isNeutralState.call(this,s)},applyTo:function(s){this.calculateMatrix(),f.BaseFilter.prototype.applyTo.call(this,s)}}),a.Image.filters.HueRotation.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(l){var a=l.fabric||(l.fabric={}),f=a.util.object.clone;if(a.Text){a.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");a.Text=a.util.createClass(a.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:a.Object.prototype.stateProperties.concat(u),cacheProperties:a.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(s,c){this.styles=c?c.styles||{}:{},this.text=s,this.__skipDimension=!0,this.callSuper("initialize",c),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var s=this.path;s&&(s.segmentsInfo=a.util.getPathSegmentsInfo(s.path))},getMeasuringContext:function(){return a._measuringContext||(a._measuringContext=this.canvas&&this.canvas.contextCache||a.util.createCanvasElement().getContext("2d")),a._measuringContext},_splitText:function(){var s=this._splitTextIntoLines(this.text);return this.textLines=s.lines,this._textLines=s.graphemeLines,this._unwrappedTextLines=s._unwrappedLines,this._text=s.graphemeText,s},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var s,c,d,p,g,m,v,y=0,w=this._textLines.length;y<w;y++)if(!(this.textAlign!=="justify"&&(y===w-1||this.isEndOfWrapping(y)))&&(p=0,g=this._textLines[y],c=this.getLineWidth(y),c<this.width&&(v=this.textLines[y].match(this._reSpacesAndTabs)))){d=v.length,s=(this.width-c)/d;for(var b=0,S=g.length;b<=S;b++)m=this.__charBounds[y][b],this._reSpaceAndTab.test(g[b])?(m.width+=s,m.kernedWidth+=s,m.left+=p,p+=s):m.left+=p}},isEndOfWrapping:function(s){return s===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var s=this.callSuper("_getCacheCanvasDimensions"),c=this.fontSize;return s.width+=c*s.zoomX,s.height+=c*s.zoomY,s},_render:function(s){var c=this.path;c&&!c.isNotVisible()&&c._render(s),this._setTextStyles(s),this._renderTextLinesBackground(s),this._renderTextDecoration(s,"underline"),this._renderText(s),this._renderTextDecoration(s,"overline"),this._renderTextDecoration(s,"linethrough")},_renderText:function(s){this.paintFirst==="stroke"?(this._renderTextStroke(s),this._renderTextFill(s)):(this._renderTextFill(s),this._renderTextStroke(s))},_setTextStyles:function(s,c,d){if(s.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":s.textBaseline="middle";break;case"ascender":s.textBaseline="top";break;case"descender":s.textBaseline="bottom";break}s.font=this._getFontDeclaration(c,d)},calcTextWidth:function(){for(var s=this.getLineWidth(0),c=1,d=this._textLines.length;c<d;c++){var p=this.getLineWidth(c);p>s&&(s=p)}return s},_renderTextLine:function(s,c,d,p,g,m){this._renderChars(s,c,d,p,g,m)},_renderTextLinesBackground:function(s){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var c,d,p=s.fillStyle,g,m,v=this._getLeftOffset(),y=this._getTopOffset(),w=0,b=0,S,_,E=this.path,C,P=0,N=this._textLines.length;P<N;P++){if(c=this.getHeightOfLine(P),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",P)){y+=c;continue}g=this._textLines[P],d=this._getLineLeftOffset(P),b=0,w=0,m=this.getValueOfPropertyAt(P,0,"textBackgroundColor");for(var B=0,I=g.length;B<I;B++)S=this.__charBounds[P][B],_=this.getValueOfPropertyAt(P,B,"textBackgroundColor"),E?(s.save(),s.translate(S.renderLeft,S.renderTop),s.rotate(S.angle),s.fillStyle=_,_&&s.fillRect(-S.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),S.width,c/this.lineHeight),s.restore()):_!==m?(C=v+d+w,this.direction==="rtl"&&(C=this.width-C-b),s.fillStyle=m,m&&s.fillRect(C,y,b,c/this.lineHeight),w=S.left,b=S.width,m=_):b+=S.kernedWidth;_&&!E&&(C=v+d+w,this.direction==="rtl"&&(C=this.width-C-b),s.fillStyle=_,s.fillRect(C,y,b,c/this.lineHeight)),y+=c}s.fillStyle=p,this._removeShadow(s)}},getFontCache:function(s){var c=s.fontFamily.toLowerCase();a.charWidthsCache[c]||(a.charWidthsCache[c]={});var d=a.charWidthsCache[c],p=s.fontStyle.toLowerCase()+"_"+(s.fontWeight+"").toLowerCase();return d[p]||(d[p]={}),d[p]},_measureChar:function(s,c,d,p){var g=this.getFontCache(c),m=this._getFontDeclaration(c),v=this._getFontDeclaration(p),y=d+s,w=m===v,b,S,_,E=c.fontSize/this.CACHE_FONT_SIZE,C;if(d&&g[d]!==void 0&&(_=g[d]),g[s]!==void 0&&(C=b=g[s]),w&&g[y]!==void 0&&(S=g[y],C=S-_),b===void 0||_===void 0||S===void 0){var P=this.getMeasuringContext();this._setTextStyles(P,c,!0)}return b===void 0&&(C=b=P.measureText(s).width,g[s]=b),_===void 0&&w&&d&&(_=P.measureText(d).width,g[d]=_),w&&S===void 0&&(S=P.measureText(y).width,g[y]=S,C=S-_),{width:b*E,kernedWidth:C*E}},getHeightOfChar:function(s,c){return this.getValueOfPropertyAt(s,c,"fontSize")},measureLine:function(s){var c=this._measureLine(s);return this.charSpacing!==0&&(c.width-=this._getWidthOfCharSpacing()),c.width<0&&(c.width=0),c},_measureLine:function(s){var c=0,d,p,g=this._textLines[s],m,v,y=0,w=new Array(g.length),b=0,S,_,E=this.path,C=this.pathSide==="right";for(this.__charBounds[s]=w,d=0;d<g.length;d++)p=g[d],v=this._getGraphemeBox(p,s,d,m),w[d]=v,c+=v.kernedWidth,m=p;if(w[d]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},E){switch(_=E.segmentsInfo[E.segmentsInfo.length-1].length,S=a.util.getPointOnPath(E.path,0,E.segmentsInfo),S.x+=E.pathOffset.x,S.y+=E.pathOffset.y,this.textAlign){case"left":b=C?_-c:0;break;case"center":b=(_-c)/2;break;case"right":b=C?0:_-c;break}for(b+=this.pathStartOffset*(C?-1:1),d=C?g.length-1:0;C?d>=0:d<g.length;C?d--:d++)v=w[d],b>_?b%=_:b<0&&(b+=_),this._setGraphemeOnPath(b,v,S),b+=v.kernedWidth}return{width:c,numOfSpaces:y}},_setGraphemeOnPath:function(s,c,d){var p=s+c.kernedWidth/2,g=this.path,m=a.util.getPointOnPath(g.path,p,g.segmentsInfo);c.renderLeft=m.x-d.x,c.renderTop=m.y-d.y,c.angle=m.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(s,c,d,p,g){var m=this.getCompleteStyleDeclaration(c,d),v=p?this.getCompleteStyleDeclaration(c,d-1):{},y=this._measureChar(s,m,p,v),w=y.kernedWidth,b=y.width,S;this.charSpacing!==0&&(S=this._getWidthOfCharSpacing(),b+=S,w+=S);var _={width:b,left:0,height:m.fontSize,kernedWidth:w,deltaY:m.deltaY};if(d>0&&!g){var E=this.__charBounds[c][d-1];_.left=E.left+E.width+y.kernedWidth-y.width}return _},getHeightOfLine:function(s){if(this.__lineHeights[s])return this.__lineHeights[s];for(var c=this._textLines[s],d=this.getHeightOfChar(s,0),p=1,g=c.length;p<g;p++)d=Math.max(this.getHeightOfChar(s,p),d);return this.__lineHeights[s]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var s,c=0,d=0,p=this._textLines.length;d<p;d++)s=this.getHeightOfLine(d),c+=d===p-1?s/this.lineHeight:s;return c},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(s,c){s.save();for(var d=0,p=this._getLeftOffset(),g=this._getTopOffset(),m=0,v=this._textLines.length;m<v;m++){var y=this.getHeightOfLine(m),w=y/this.lineHeight,b=this._getLineLeftOffset(m);this._renderTextLine(c,s,this._textLines[m],p+b,g+d+w,m),d+=y}s.restore()},_renderTextFill:function(s){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(s,"fillText")},_renderTextStroke:function(s){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this._setLineDash(s,this.strokeDashArray),s.beginPath(),this._renderTextCommon(s,"strokeText"),s.closePath(),s.restore())},_renderChars:function(s,c,d,p,g,m){var v=this.getHeightOfLine(m),y=this.textAlign.indexOf("justify")!==-1,w,b,S="",_,E=0,C,P=this.path,N=!y&&this.charSpacing===0&&this.isEmptyStyles(m)&&!P,B=this.direction==="ltr",I=this.direction==="ltr"?1:-1,U,D=c.canvas.getAttribute("dir");if(c.save(),D!==this.direction&&(c.canvas.setAttribute("dir",B?"ltr":"rtl"),c.direction=B?"ltr":"rtl",c.textAlign=B?"left":"right"),g-=v*this._fontSizeFraction/this.lineHeight,N){this._renderChar(s,c,m,0,d.join(""),p,g,v),c.restore();return}for(var F=0,O=d.length-1;F<=O;F++)C=F===O||this.charSpacing||P,S+=d[F],_=this.__charBounds[m][F],E===0?(p+=I*(_.kernedWidth-_.width),E+=_.width):E+=_.kernedWidth,y&&!C&&this._reSpaceAndTab.test(d[F])&&(C=!0),C||(w=w||this.getCompleteStyleDeclaration(m,F),b=this.getCompleteStyleDeclaration(m,F+1),C=a.util.hasStyleChanged(w,b,!1)),C&&(P?(c.save(),c.translate(_.renderLeft,_.renderTop),c.rotate(_.angle),this._renderChar(s,c,m,F,S,-E/2,0,v),c.restore()):(U=p,this._renderChar(s,c,m,F,S,U,g,v)),S="",w=b,p+=I*E,E=0);c.restore()},_applyPatternGradientTransformText:function(s){var c=a.util.createCanvasElement(),d,p=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return c.width=p,c.height=g,d=c.getContext("2d"),d.beginPath(),d.moveTo(0,0),d.lineTo(p,0),d.lineTo(p,g),d.lineTo(0,g),d.closePath(),d.translate(p/2,g/2),d.fillStyle=s.toLive(d),this._applyPatternGradientTransform(d,s),d.fill(),d.createPattern(c,"no-repeat")},handleFiller:function(s,c,d){var p,g;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(p=-this.width/2,g=-this.height/2,s.translate(p,g),s[c]=this._applyPatternGradientTransformText(d),{offsetX:p,offsetY:g}):(s[c]=d.toLive(s,this),this._applyPatternGradientTransform(s,d)):(s[c]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(s,c){return s.lineWidth=c.strokeWidth,s.lineCap=this.strokeLineCap,s.lineDashOffset=this.strokeDashOffset,s.lineJoin=this.strokeLineJoin,s.miterLimit=this.strokeMiterLimit,this.handleFiller(s,"strokeStyle",c.stroke)},_setFillStyles:function(s,c){return this.handleFiller(s,"fillStyle",c.fill)},_renderChar:function(s,c,d,p,g,m,v){var y=this._getStyleDeclaration(d,p),w=this.getCompleteStyleDeclaration(d,p),b=s==="fillText"&&w.fill,S=s==="strokeText"&&w.stroke&&w.strokeWidth,_,E;!S&&!b||(c.save(),b&&(_=this._setFillStyles(c,w)),S&&(E=this._setStrokeStyles(c,w)),c.font=this._getFontDeclaration(w),y&&y.textBackgroundColor&&this._removeShadow(c),y&&y.deltaY&&(v+=y.deltaY),b&&c.fillText(g,m-_.offsetX,v-_.offsetY),S&&c.strokeText(g,m-E.offsetX,v-E.offsetY),c.restore())},setSuperscript:function(s,c){return this._setScript(s,c,this.superscript)},setSubscript:function(s,c){return this._setScript(s,c,this.subscript)},_setScript:function(s,c,d){var p=this.get2DCursorLocation(s,!0),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:g*d.size,deltaY:m+g*d.baseline};return this.setSelectionStyles(v,s,c),this},_getLineLeftOffset:function(s){var c=this.getLineWidth(s),d=this.width-c,p=this.textAlign,g=this.direction,v,m=0,v=this.isEndOfWrapping(s);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(m=d/2),p==="right"&&(m=d),p==="justify-center"&&(m=d/2),p==="justify-right"&&(m=d),g==="rtl"&&(m-=d),m)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var s=this._forceClearCache;return s||(s=this.hasStateChanged("_dimensionAffectingProps")),s&&(this.dirty=!0,this._forceClearCache=!1),s},getLineWidth:function(s){if(this.__lineWidths[s]!==void 0)return this.__lineWidths[s];var c=this.measureLine(s),d=c.width;return this.__lineWidths[s]=d,d},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(s,c,d){var p=this._getStyleDeclaration(s,c);return p&&typeof p[d]<"u"?p[d]:this[d]},_renderTextDecoration:function(s,c){if(!(!this[c]&&!this.styleHas(c))){for(var d,p,g,m,v,y,w,b,S=this._getLeftOffset(),_=this._getTopOffset(),E,C,P,N,B,I,U,D,F=this.path,O=this._getWidthOfCharSpacing(),M=this.offsets[c],V=0,k=this._textLines.length;V<k;V++){if(d=this.getHeightOfLine(V),!this[c]&&!this.styleHas(c,V)){_+=d;continue}w=this._textLines[V],I=d/this.lineHeight,m=this._getLineLeftOffset(V),C=0,P=0,b=this.getValueOfPropertyAt(V,0,c),D=this.getValueOfPropertyAt(V,0,"fill"),E=_+I*(1-this._fontSizeFraction),p=this.getHeightOfChar(V,0),v=this.getValueOfPropertyAt(V,0,"deltaY");for(var R=0,j=w.length;R<j;R++)if(N=this.__charBounds[V][R],B=this.getValueOfPropertyAt(V,R,c),U=this.getValueOfPropertyAt(V,R,"fill"),g=this.getHeightOfChar(V,R),y=this.getValueOfPropertyAt(V,R,"deltaY"),F&&B&&U)s.save(),s.fillStyle=D,s.translate(N.renderLeft,N.renderTop),s.rotate(N.angle),s.fillRect(-N.kernedWidth/2,M*g+y,N.kernedWidth,this.fontSize/15),s.restore();else if((B!==b||U!==D||g!==p||y!==v)&&P>0){var A=S+m+C;this.direction==="rtl"&&(A=this.width-A-P),b&&D&&(s.fillStyle=D,s.fillRect(A,E+M*p+v,P,this.fontSize/15)),C=N.left,P=N.width,b=B,D=U,p=g,v=y}else P+=N.kernedWidth;var A=S+m+C;this.direction==="rtl"&&(A=this.width-A-P),s.fillStyle=U,B&&U&&s.fillRect(A,E+M*p+v,P-O,this.fontSize/15),_+=d}this._removeShadow(s)}},_getFontDeclaration:function(s,c){var d=s||this,p=this.fontFamily,g=a.Text.genericFonts.indexOf(p.toLowerCase())>-1,m=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||g?d.fontFamily:'"'+d.fontFamily+'"';return[a.isLikelyNode?d.fontWeight:d.fontStyle,a.isLikelyNode?d.fontStyle:d.fontWeight,c?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",m].join(" ")},render:function(s){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",s)))},_splitTextIntoLines:function(s){for(var c=s.split(this._reNewline),d=new Array(c.length),p=[`
`],g=[],m=0;m<c.length;m++)d[m]=a.util.string.graphemeSplit(c[m]),g=g.concat(d[m],p);return g.pop(),{_unwrappedLines:d,lines:c,graphemeText:g,graphemeLines:d}},toObject:function(s){var c=u.concat(s),d=this.callSuper("toObject",c);return d.styles=a.util.stylesToArray(this.styles,this.text),d.path&&(d.path=this.path.toObject()),d},set:function(s,c){this.callSuper("set",s,c);var d=!1,p=!1;if(typeof s=="object")for(var g in s)g==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(g)!==-1,p=p||g==="path";else d=this._dimensionAffectingProps.indexOf(s)!==-1,p=s==="path";return p&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),a.Text.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),a.Text.DEFAULT_SVG_FONT_SIZE=16,a.Text.fromElement=function(s,c,d){if(!s)return c(null);var p=a.parseAttributes(s,a.Text.ATTRIBUTE_NAMES),g=p.textAnchor||"left";if(d=a.util.object.extend(d?f(d):{},p),d.top=d.top||0,d.left=d.left||0,p.textDecoration){var m=p.textDecoration;m.indexOf("underline")!==-1&&(d.underline=!0),m.indexOf("overline")!==-1&&(d.overline=!0),m.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in p&&(d.left+=p.dx),"dy"in p&&(d.top+=p.dy),"fontSize"in d||(d.fontSize=a.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in s?v=s.textContent:"firstChild"in s&&s.firstChild!==null&&"data"in s.firstChild&&s.firstChild.data!==null&&(v=s.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=d.strokeWidth;d.strokeWidth=0;var w=new a.Text(v,d),b=w.getScaledHeight()/w.height,S=(w.height+w.strokeWidth)*w.lineHeight-w.height,_=S*b,E=w.getScaledHeight()+_,C=0;g==="center"&&(C=w.getScaledWidth()/2),g==="right"&&(C=w.getScaledWidth()),w.set({left:w.left-C,top:w.top-(E-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:typeof y<"u"?y:1}),c(w)},a.Text.fromObject=function(s,c){var d=f(s),p=s.path;return delete d.path,a.Object._fromObject("Text",d,function(g){g.styles=a.util.stylesFromArray(s.styles,s.text),p?a.Object._fromObject("Path",p,function(m){g.set("path",m),c(g)},"path"):c(g)},"text")},a.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],a.util.createAccessors&&a.util.createAccessors(a.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(l){if(!this.styles||typeof l<"u"&&!this.styles[l])return!0;var a=typeof l>"u"?this.styles:{line:this.styles[l]};for(var f in a)for(var u in a[f])for(var s in a[f][u])return!1;return!0},styleHas:function(l,a){if(!this.styles||!l||l===""||typeof a<"u"&&!this.styles[a])return!1;var f=typeof a>"u"?this.styles:{0:this.styles[a]};for(var u in f)for(var s in f[u])if(typeof f[u][s][l]<"u")return!0;return!1},cleanStyle:function(l){if(!this.styles||!l||l==="")return!1;var a=this.styles,f=0,u,s,c=!0,d=0,p;for(var g in a){u=0;for(var m in a[g]){var p=a[g][m],v=p.hasOwnProperty(l);f++,v?(s?p[l]!==s&&(c=!1):s=p[l],p[l]===this[l]&&delete p[l]):c=!1,Object.keys(p).length!==0?u++:delete a[g][m]}u===0&&delete a[g]}for(var y=0;y<this._textLines.length;y++)d+=this._textLines[y].length;c&&f===d&&(this[l]=s,this.removeStyle(l))},removeStyle:function(l){if(!(!this.styles||!l||l==="")){var a=this.styles,f,u,s;for(u in a){f=a[u];for(s in f)delete f[s][l],Object.keys(f[s]).length===0&&delete f[s];Object.keys(f).length===0&&delete a[u]}}},_extendStyles:function(l,a){var f=this.get2DCursorLocation(l);this._getLineStyle(f.lineIndex)||this._setLineStyle(f.lineIndex),this._getStyleDeclaration(f.lineIndex,f.charIndex)||this._setStyleDeclaration(f.lineIndex,f.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(f.lineIndex,f.charIndex),a)},get2DCursorLocation:function(l,a){typeof l>"u"&&(l=this.selectionStart);for(var f=a?this._unwrappedTextLines:this._textLines,u=f.length,s=0;s<u;s++){if(l<=f[s].length)return{lineIndex:s,charIndex:l};l-=f[s].length+this.missingNewlineOffset(s)}return{lineIndex:s-1,charIndex:f[s-1].length<l?f[s-1].length:l}},getSelectionStyles:function(l,a,f){typeof l>"u"&&(l=this.selectionStart||0),typeof a>"u"&&(a=this.selectionEnd||l);for(var u=[],s=l;s<a;s++)u.push(this.getStyleAtPosition(s,f));return u},getStyleAtPosition:function(l,a){var f=this.get2DCursorLocation(l),u=a?this.getCompleteStyleDeclaration(f.lineIndex,f.charIndex):this._getStyleDeclaration(f.lineIndex,f.charIndex);return u||{}},setSelectionStyles:function(l,a,f){typeof a>"u"&&(a=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||a);for(var u=a;u<f;u++)this._extendStyles(u,l);return this._forceClearCache=!0,this},_getStyleDeclaration:function(l,a){var f=this.styles&&this.styles[l];return f?f[a]:null},getCompleteStyleDeclaration:function(l,a){for(var f=this._getStyleDeclaration(l,a)||{},u={},s,c=0;c<this._styleProperties.length;c++)s=this._styleProperties[c],u[s]=typeof f[s]>"u"?this[s]:f[s];return u},_setStyleDeclaration:function(l,a,f){this.styles[l][a]=f},_deleteStyleDeclaration:function(l,a){delete this.styles[l][a]},_getLineStyle:function(l){return!!this.styles[l]},_setLineStyle:function(l){this.styles[l]={}},_deleteLineStyle:function(l){delete this.styles[l]}})}(),function(){function l(a){a.textDecoration&&(a.textDecoration.indexOf("underline")>-1&&(a.underline=!0),a.textDecoration.indexOf("line-through")>-1&&(a.linethrough=!0),a.textDecoration.indexOf("overline")>-1&&(a.overline=!0),delete a.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(a,f){this.callSuper("initialize",a,f),this.initBehavior()},setSelectionStart:function(a){a=Math.max(a,0),this._updateAndFire("selectionStart",a)},setSelectionEnd:function(a){a=Math.min(a,this.text.length),this._updateAndFire("selectionEnd",a)},_updateAndFire:function(a,f){this[a]!==f&&(this._fireSelectionChanged(),this[a]=f),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(a){this.clearContextTop(),this.callSuper("render",a),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(a){this.callSuper("_render",a)},clearContextTop:function(a){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var f=this.canvas.contextTop,u=this.canvas.viewportTransform;f.save(),f.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(f),this._clearTextArea(f),a||f.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this._getCursorBoundaries(),f=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(a,f):this.renderSelection(a,f),f.restore()}},_clearTextArea:function(a){var f=this.width+4,u=this.height+4;a.clearRect(-f/2,-u/2,f,u)},_getCursorBoundaries:function(a){typeof a>"u"&&(a=this.selectionStart);var f=this._getLeftOffset(),u=this._getTopOffset(),s=this._getCursorBoundariesOffsets(a);return{left:f,top:u,leftOffset:s.left,topOffset:s.top}},_getCursorBoundariesOffsets:function(a){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var f,u,s,c=0,d=0,p,g=this.get2DCursorLocation(a);s=g.charIndex,u=g.lineIndex;for(var m=0;m<u;m++)c+=this.getHeightOfLine(m);f=this._getLineLeftOffset(u);var v=this.__charBounds[u][s];return v&&(d=v.left),this.charSpacing!==0&&s===this._textLines[u].length&&(d-=this._getWidthOfCharSpacing()),p={top:c,left:f+(d>0?d:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(a,f){var u=this.get2DCursorLocation(),s=u.lineIndex,c=u.charIndex>0?u.charIndex-1:0,d=this.getValueOfPropertyAt(s,c,"fontSize"),p=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/p,m=a.topOffset,v=this.getValueOfPropertyAt(s,c,"deltaY");m+=(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(a,f),f.fillStyle=this.cursorColor||this.getValueOfPropertyAt(s,c,"fill"),f.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,f.fillRect(a.left+a.leftOffset-g/2,m+a.top+v,g,d)},renderSelection:function(a,f){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,s=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,c=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(u),p=this.get2DCursorLocation(s),g=d.lineIndex,m=p.lineIndex,v=d.charIndex<0?0:d.charIndex,y=p.charIndex<0?0:p.charIndex,w=g;w<=m;w++){var b=this._getLineLeftOffset(w)||0,S=this.getHeightOfLine(w),_=0,E=0,C=0;if(w===g&&(E=this.__charBounds[g][v].left),w>=g&&w<m)C=c&&!this.isEndOfWrapping(w)?this.width:this.getLineWidth(w)||5;else if(w===m)if(y===0)C=this.__charBounds[m][y].left;else{var P=this._getWidthOfCharSpacing();C=this.__charBounds[m][y-1].left+this.__charBounds[m][y-1].width-P}_=S,(this.lineHeight<1||w===m&&this.lineHeight>1)&&(S/=this.lineHeight);var N=a.left+b+E,B=C-E,I=S,U=0;this.inCompositionMode?(f.fillStyle=this.compositionColor||"black",I=1,U=S):f.fillStyle=this.selectionColor,this.direction==="rtl"&&(N=this.width-N-B),f.fillRect(N,a.top+a.topOffset+U,B,I),a.topOffset+=_}},getCurrentCharFontSize:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fontSize")},getCurrentCharColor:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fill")},_getCurrentCharIndex:function(){var a=this.get2DCursorLocation(this.selectionStart,!0),f=a.charIndex>0?a.charIndex-1:0;return{l:a.lineIndex,c:f}}}),t.IText.fromObject=function(a,f){var u=t.util.stylesFromArray(a.styles,a.text),s=Object.assign({},a,{styles:u});if(l(s),s.styles)for(var c in s.styles)for(var d in s.styles[c])l(s.styles[c][d]);t.Object._fromObject("IText",s,f,"text")}}(),function(){var l=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var a=this;this.on("added",function(){var f=a.canvas;f&&(f._hasITextHandlers||(f._hasITextHandlers=!0,a._initCanvasHandlers(f)),f._iTextInstances=f._iTextInstances||[],f._iTextInstances.push(a))})},initRemovedHandler:function(){var a=this;this.on("removed",function(){var f=a.canvas;f&&(f._iTextInstances=f._iTextInstances||[],t.util.removeFromArray(f._iTextInstances,a),f._iTextInstances.length===0&&(f._hasITextHandlers=!1,a._removeCanvasHandlers(f)))})},_initCanvasHandlers:function(a){a._mouseUpITextHandler=function(){a._iTextInstances&&a._iTextInstances.forEach(function(f){f.__isMousedown=!1})},a.on("mouse:up",a._mouseUpITextHandler)},_removeCanvasHandlers:function(a){a.off("mouse:up",a._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(a,f,u,s){var c;return c={isAborted:!1,abort:function(){this.isAborted=!0}},a.animate("_currentCursorOpacity",f,{duration:u,onComplete:function(){c.isAborted||a[s]()},onChange:function(){a.canvas&&a.selectionStart===a.selectionEnd&&a.renderCursorOrSelection()},abort:function(){return c.isAborted}}),c},_onTickComplete:function(){var a=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){a._currentTickCompleteState=a._animateCursor(a,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(a){var f=this,u=a?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){f._tick()},u)},abortCursorAnimation:function(){var a=this._currentTickState||this._currentTickCompleteState,f=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,a&&f&&f.clearContext(f.contextTop||f.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(a){var f=0,u=a-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)f++,u--;for(;/\S/.test(this._text[u])&&u>-1;)f++,u--;return a-f},findWordBoundaryRight:function(a){var f=0,u=a;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)f++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)f++,u++;return a+f},findLineBoundaryLeft:function(a){for(var f=0,u=a-1;!/\n/.test(this._text[u])&&u>-1;)f++,u--;return a-f},findLineBoundaryRight:function(a){for(var f=0,u=a;!/\n/.test(this._text[u])&&u<this._text.length;)f++,u++;return a+f},searchWordBoundary:function(a,f){for(var u=this._text,s=this._reSpace.test(u[a])?a-1:a,c=u[s],d=t.reNonWord;!d.test(c)&&s>0&&s<u.length;)s+=f,c=u[s];return d.test(c)&&(s+=f===1?0:1),s},selectWord:function(a){a=a||this.selectionStart;var f=this.searchWordBoundary(a,-1),u=this.searchWordBoundary(a,1);this.selectionStart=f,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(a){a=a||this.selectionStart;var f=this.findLineBoundaryLeft(a),u=this.findLineBoundaryRight(a);return this.selectionStart=f,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(a){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(a),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(a){a._iTextInstances&&a._iTextInstances.forEach(function(f){f.selected=!1,f.isEditing&&f.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(a){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var f=this.getSelectionStartFromPointer(a.e),u=this.selectionStart,s=this.selectionEnd;(f!==this.__selectionStartOnMouseDown||u===s)&&(u===f||s===f)||(f>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=f):(this.selectionStart=f,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==s)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(a,f,u){var s=u.slice(0,a),c=t.util.string.graphemeSplit(s).length;if(a===f)return{selectionStart:c,selectionEnd:c};var d=u.slice(a,f),p=t.util.string.graphemeSplit(d).length;return{selectionStart:c,selectionEnd:c+p}},fromGraphemeToStringSelection:function(a,f,u){var s=u.slice(0,a),c=s.join("").length;if(a===f)return{selectionStart:c,selectionEnd:c};var d=u.slice(a,f),p=d.join("").length;return{selectionStart:c,selectionEnd:c+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var a=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=a.selectionStart,this.hiddenTextarea.selectionEnd=a.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var a=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=a.selectionEnd,this.inCompositionMode||(this.selectionStart=a.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var a=this._calcTextareaPosition();this.hiddenTextarea.style.left=a.left,this.hiddenTextarea.style.top=a.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var a=this.inCompositionMode?this.compositionStart:this.selectionStart,f=this._getCursorBoundaries(a),u=this.get2DCursorLocation(a),s=u.lineIndex,c=u.charIndex,d=this.getValueOfPropertyAt(s,c,"fontSize")*this.lineHeight,p=f.leftOffset,g=this.calcTransformMatrix(),m={x:f.left+p,y:f.top+f.topOffset+d},v=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,w=y.width/v,b=y.height/v,S=w-d,_=b-d,E=y.clientWidth/w,C=y.clientHeight/b;return m=t.util.transformPoint(m,g),m=t.util.transformPoint(m,this.canvas.viewportTransform),m.x*=E,m.y*=C,m.x<0&&(m.x=0),m.x>S&&(m.x=S),m.y<0&&(m.y=0),m.y>_&&(m.y=_),m.x+=this.canvas._offset.left,m.y+=this.canvas._offset.top,{left:m.x+"px",top:m.y+"px",fontSize:d+"px",charHeight:d}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var a=this._textBeforeEdit!==this.text,f=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,f&&(f.blur&&f.blur(),f.parentNode&&f.parentNode.removeChild(f)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),a&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),a&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var a in this.styles)this._textLines[a]||delete this.styles[a]},removeStyleFromTo:function(a,f){var u=this.get2DCursorLocation(a,!0),s=this.get2DCursorLocation(f,!0),c=u.lineIndex,d=u.charIndex,p=s.lineIndex,g=s.charIndex,m,v;if(c!==p){if(this.styles[c])for(m=d;m<this._unwrappedTextLines[c].length;m++)delete this.styles[c][m];if(this.styles[p])for(m=g;m<this._unwrappedTextLines[p].length;m++)v=this.styles[p][m],v&&(this.styles[c]||(this.styles[c]={}),this.styles[c][d+m-g]=v);for(m=c+1;m<=p;m++)delete this.styles[m];this.shiftLineStyles(p,c-p)}else if(this.styles[c]){v=this.styles[c];var y=g-d,w,b;for(m=d;m<g;m++)delete v[m];for(b in this.styles[c])w=parseInt(b,10),w>=g&&(v[w-y]=v[b],delete v[b])}},shiftLineStyles:function(a,f){var u=l(this.styles);for(var s in this.styles){var c=parseInt(s,10);c>a&&(this.styles[c+f]=u[c],u[c-f]||delete this.styles[c])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(a,f,u,s){var c,d={},p=!1,g=this._unwrappedTextLines[a].length===f;u||(u=1),this.shiftLineStyles(a,u),this.styles[a]&&(c=this.styles[a][f===0?f:f-1]);for(var m in this.styles[a]){var v=parseInt(m,10);v>=f&&(p=!0,d[v-f]=this.styles[a][m],g&&f===0||delete this.styles[a][m])}var y=!1;for(p&&!g&&(this.styles[a+u]=d,y=!0),y&&u--;u>0;)s&&s[u-1]?this.styles[a+u]={0:l(s[u-1])}:c?this.styles[a+u]={0:l(c)}:delete this.styles[a+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(a,f,u,s){this.styles||(this.styles={});var c=this.styles[a],d=c?l(c):{};u||(u=1);for(var p in d){var g=parseInt(p,10);g>=f&&(c[g+u]=d[g],d[g-u]||delete c[g])}if(this._forceClearCache=!0,s){for(;u--;)Object.keys(s[u]).length&&(this.styles[a]||(this.styles[a]={}),this.styles[a][f+u]=l(s[u]));return}if(c)for(var m=c[f?f-1:1];m&&u--;)this.styles[a][f+u]=l(m)},insertNewStyleBlock:function(a,f,u){for(var s=this.get2DCursorLocation(f,!0),c=[0],d=0,p=0;p<a.length;p++)a[p]===`
`?(d++,c[d]=0):c[d]++;c[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,c[0],u),u=u&&u.slice(c[0]+1)),d&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+c[0],d);for(var p=1;p<d;p++)c[p]>0?this.insertCharStyleObject(s.lineIndex+p,0,c[p],u):u&&this.styles[s.lineIndex+p]&&u[0]&&(this.styles[s.lineIndex+p][0]=u[0]),u=u&&u.slice(c[p]+1);c[p]>0&&this.insertCharStyleObject(s.lineIndex+p,0,c[p],u)},setSelectionStartEndWithShift:function(a,f,u){u<=a?(f===a?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=a),this.selectionStart=u):u>a&&u<f?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(f===a?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=f),this.selectionEnd=u)},setSelectionInBoundaries:function(){var a=this.text.length;this.selectionStart>a?this.selectionStart=a:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>a?this.selectionEnd=a:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(l){if(this.canvas){this.__newClickTime=+new Date;var a=l.pointer;this.isTripleClick(a)&&(this.fire("tripleclick",l),this._stopEvent(l.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=a,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(l){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===l.x&&this.__lastPointer.y===l.y},_stopEvent:function(l){l.preventDefault&&l.preventDefault(),l.stopPropagation&&l.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(l){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(l.e))},tripleClickHandler:function(l){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(l.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(l){!this.canvas||!this.editable||l.e.button&&l.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(l.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(l){!this.canvas||!this.editable||l.e.button&&l.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(l){if(this.__isMousedown=!1,!(!this.editable||this.group||l.transform&&l.transform.actionPerformed||l.e.button&&l.e.button!==1)){if(this.canvas){var a=this.canvas._activeObject;if(a&&a!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(l.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(l){var a=this.getSelectionStartFromPointer(l),f=this.selectionStart,u=this.selectionEnd;l.shiftKey?this.setSelectionStartEndWithShift(f,u,a):(this.selectionStart=a,this.selectionEnd=a),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(l){for(var a=this.getLocalPointer(l),f=0,u=0,s=0,c=0,d=0,p,g,m=0,v=this._textLines.length;m<v&&s<=a.y;m++)s+=this.getHeightOfLine(m)*this.scaleY,d=m,m>0&&(c+=this._textLines[m-1].length+this.missingNewlineOffset(m-1));p=this._getLineLeftOffset(d),u=p*this.scaleX,g=this._textLines[d],this.direction==="rtl"&&(a.x=this.width*this.scaleX-a.x+u);for(var y=0,w=g.length;y<w&&(f=u,u+=this.__charBounds[d][y].kernedWidth*this.scaleX,u<=a.x);y++)c++;return this._getNewSelectionStartFromOffset(a,f,u,c,w)},_getNewSelectionStartFromOffset:function(l,a,f,u,s){var c=l.x-a,d=f-l.x,p=d>c||d<0?0:1,g=u+p;return this.flipX&&(g=s-g),g>this._text.length&&(g=this._text.length),g}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var l=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+l.top+"; left: "+l.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+l.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(l){if(this.isEditing){var a=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(l.keyCode in a)this[a[l.keyCode]](l);else if(l.keyCode in this.ctrlKeysMapDown&&(l.ctrlKey||l.metaKey))this[this.ctrlKeysMapDown[l.keyCode]](l);else return;l.stopImmediatePropagation(),l.preventDefault(),l.keyCode>=33&&l.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(l){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(l.keyCode in this.ctrlKeysMapUp&&(l.ctrlKey||l.metaKey))this[this.ctrlKeysMapUp[l.keyCode]](l);else return;l.stopImmediatePropagation(),l.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(l){var a=this.fromPaste;if(this.fromPaste=!1,l&&l.stopPropagation(),!!this.isEditing){var f=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,s=f.length,c,d,p=s-u,g=this.selectionStart,m=this.selectionEnd,v=g!==m,y,w,b;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),_=g>S.selectionStart;v?(c=this._text.slice(g,m),p+=m-g):s<u&&(_?c=this._text.slice(m+p,m):c=this._text.slice(g,g-p)),d=f.slice(S.selectionEnd-p,S.selectionEnd),c&&c.length&&(d.length&&(y=this.getSelectionStyles(g,g+1,!1),y=d.map(function(){return y[0]})),v?(w=g,b=m):_?(w=m-c.length,b=m):(w=m,b=m+c.length),this.removeStyleFromTo(w,b)),d.length&&(a&&d.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(y=t.copiedTextStyle),this.insertNewStyleBlock(d,g,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(l){this.compositionStart=l.target.selectionStart,this.compositionEnd=l.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(l){return l&&l.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(l,a){var f=this._getLineLeftOffset(l),u;return a>0&&(u=this.__charBounds[l][a-1],f+=u.left+u.width),f},getDownCursorOffset:function(l,a){var f=this._getSelectionForOffset(l,a),u=this.get2DCursorLocation(f),s=u.lineIndex;if(s===this._textLines.length-1||l.metaKey||l.keyCode===34)return this._text.length-f;var c=u.charIndex,d=this._getWidthBeforeCursor(s,c),p=this._getIndexOnLine(s+1,d),g=this._textLines[s].slice(c);return g.length+p+1+this.missingNewlineOffset(s)},_getSelectionForOffset:function(l,a){return l.shiftKey&&this.selectionStart!==this.selectionEnd&&a?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(l,a){var f=this._getSelectionForOffset(l,a),u=this.get2DCursorLocation(f),s=u.lineIndex;if(s===0||l.metaKey||l.keyCode===33)return-f;var c=u.charIndex,d=this._getWidthBeforeCursor(s,c),p=this._getIndexOnLine(s-1,d),g=this._textLines[s].slice(0,c),m=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+p-g.length+(1-m)},_getIndexOnLine:function(l,a){for(var f=this._textLines[l],u=this._getLineLeftOffset(l),s=u,c=0,d,p,g=0,m=f.length;g<m;g++)if(d=this.__charBounds[l][g].width,s+=d,s>a){p=!0;var v=s-d,y=s,w=Math.abs(v-a),b=Math.abs(y-a);c=b<w?g:g-1;break}return p||(c=f.length-1),c},moveCursorDown:function(l){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",l)},moveCursorUp:function(l){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",l)},_moveCursorUpOrDown:function(l,a){var f="get"+l+"CursorOffset",u=this[f](a,this._selectionDirection==="right");a.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(l){var a=this._selectionDirection==="left"?this.selectionStart+l:this.selectionEnd+l;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,a),l!==0},moveCursorWithoutShift:function(l){return l<0?(this.selectionStart+=l,this.selectionEnd=this.selectionStart):(this.selectionEnd+=l,this.selectionStart=this.selectionEnd),l!==0},moveCursorLeft:function(l){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",l)},_move:function(l,a,f){var u;if(l.altKey)u=this["findWordBoundary"+f](this[a]);else if(l.metaKey||l.keyCode===35||l.keyCode===36)u=this["findLineBoundary"+f](this[a]);else return this[a]+=f==="Left"?-1:1,!0;if(typeof u<"u"&&this[a]!==u)return this[a]=u,!0},_moveLeft:function(l,a){return this._move(l,a,"Left")},_moveRight:function(l,a){return this._move(l,a,"Right")},moveCursorLeftWithoutShift:function(l){var a=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(a=this._moveLeft(l,"selectionStart")),this.selectionEnd=this.selectionStart,a},moveCursorLeftWithShift:function(l){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(l,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(l,"selectionStart")},moveCursorRight:function(l){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",l)},_moveCursorLeftOrRight:function(l,a){var f="moveCursor"+l+"With";this._currentCursorOpacity=1,a.shiftKey?f+="Shift":f+="outShift",this[f](a)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(l){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(l,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(l,"selectionEnd")},moveCursorRightWithoutShift:function(l){var a=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(a=this._moveRight(l,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,a},removeChars:function(l,a){typeof a>"u"&&(a=l+1),this.removeStyleFromTo(l,a),this._text.splice(l,a-l),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(l,a,f,u){typeof u>"u"&&(u=f),u>f&&this.removeStyleFromTo(f,u);var s=t.util.string.graphemeSplit(l);this.insertNewStyleBlock(s,f,a),this._text=[].concat(this._text.slice(0,f),s,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var l=t.util.toFixed,a=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var f=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(f.textTop,f.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(),{reviver:f,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(f){var u=!0,s=this.getSvgTextDecoration(this);return[f.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",s?'text-decoration="'+s+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",f.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(f,u){var s=[],c=[],d=f,p;this._setSVGBg(c);for(var g=0,m=this._textLines.length;g<m;g++)p=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(c,g,u+p,d),this._setSVGTextLineText(s,g,u+p,d),d+=this.getHeightOfLine(g);return{textSpans:s,textBgRects:c}},_createTextCharSpan:function(f,u,s,c){var d=f!==f.trim()||f.match(a),p=this.getSvgSpanStyles(u,d),g=p?'style="'+p+'"':"",m=u.deltaY,v="",y=t.Object.NUM_FRACTION_DIGITS;return m&&(v=' dy="'+l(m,y)+'" '),['<tspan x="',l(s,y),'" y="',l(c,y),'" ',v,g,">",t.util.string.escapeXml(f),"</tspan>"].join("")},_setSVGTextLineText:function(f,u,s,c){var d=this.getHeightOfLine(u),p=this.textAlign.indexOf("justify")!==-1,g,m,v="",y,w,b=0,S=this._textLines[u],_;c+=d*(1-this._fontSizeFraction)/this.lineHeight;for(var E=0,C=S.length-1;E<=C;E++)_=E===C||this.charSpacing,v+=S[E],y=this.__charBounds[u][E],b===0?(s+=y.kernedWidth-y.width,b+=y.width):b+=y.kernedWidth,p&&!_&&this._reSpaceAndTab.test(S[E])&&(_=!0),_||(g=g||this.getCompleteStyleDeclaration(u,E),m=this.getCompleteStyleDeclaration(u,E+1),_=t.util.hasStyleChanged(g,m,!0)),_&&(w=this._getStyleDeclaration(u,E)||{},f.push(this._createTextCharSpan(v,w,s,c)),v="",g=m,s+=b,b=0)},_pushTextBgRect:function(f,u,s,c,d,p){var g=t.Object.NUM_FRACTION_DIGITS;f.push("		<rect ",this._getFillAttributes(u),' x="',l(s,g),'" y="',l(c,g),'" width="',l(d,g),'" height="',l(p,g),`"></rect>
`)},_setSVGTextLineBg:function(f,u,s,c){for(var d=this._textLines[u],p=this.getHeightOfLine(u)/this.lineHeight,g=0,m=0,v,y,w=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),b=0,S=d.length;b<S;b++)v=this.__charBounds[u][b],y=this.getValueOfPropertyAt(u,b,"textBackgroundColor"),y!==w?(w&&this._pushTextBgRect(f,w,s+m,c,g,p),m=v.left,g=v.width,w=y):g+=v.kernedWidth;y&&this._pushTextBgRect(f,y,s+m,c,g,p)},_getFillAttributes:function(f){var u=f&&typeof f=="string"?new t.Color(f):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+f+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(f){for(var u=0,s=0,c=0;c<f;c++)u+=this.getHeightOfLine(c);return s=this.getHeightOfLine(c),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(f){var u=t.Object.prototype.getSvgStyles.call(this,f);return u+" white-space: pre;"}})}(),function(l){var a=l.fabric||(l.fabric={});a.Textbox=a.util.createClass(a.IText,a.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:a.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(f){for(var u=0,s=0,c=0,d={},p=0;p<f.graphemeLines.length;p++)f.graphemeText[c]===`
`&&p>0?(s=0,c++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(f.graphemeText[c])&&p>0&&(s++,c++),d[p]={line:u,offset:s},c+=f.graphemeLines[p].length,s+=f.graphemeLines[p].length;return d},styleHas:function(f,u){if(this._styleMap&&!this.isWrapping){var s=this._styleMap[u];s&&(u=s.line)}return a.Text.prototype.styleHas.call(this,f,u)},isEmptyStyles:function(f){if(!this.styles)return!0;var u=0,s=f+1,c,d,p=!1,g=this._styleMap[f],m=this._styleMap[f+1];g&&(f=g.line,u=g.offset),m&&(s=m.line,p=s===f,c=m.offset),d=typeof f>"u"?this.styles:{line:this.styles[f]};for(var v in d)for(var y in d[v])if(y>=u&&(!p||y<c))for(var w in d[v][y])return!1;return!0},_getStyleDeclaration:function(f,u){if(this._styleMap&&!this.isWrapping){var s=this._styleMap[f];if(!s)return null;f=s.line,u=s.offset+u}return this.callSuper("_getStyleDeclaration",f,u)},_setStyleDeclaration:function(f,u,s){var c=this._styleMap[f];f=c.line,u=c.offset+u,this.styles[f][u]=s},_deleteStyleDeclaration:function(f,u){var s=this._styleMap[f];f=s.line,u=s.offset+u,delete this.styles[f][u]},_getLineStyle:function(f){var u=this._styleMap[f];return!!this.styles[u.line]},_setLineStyle:function(f){var u=this._styleMap[f];this.styles[u.line]={}},_wrapText:function(f,u){var s=[],c;for(this.isWrapping=!0,c=0;c<f.length;c++)s=s.concat(this._wrapLine(f[c],c,u));return this.isWrapping=!1,s},_measureWord:function(f,u,s){var c=0,d,p=!0;s=s||0;for(var g=0,m=f.length;g<m;g++){var v=this._getGraphemeBox(f[g],u,g+s,d,p);c+=v.kernedWidth,d=f[g]}return c},_wrapLine:function(f,u,s,N){var d=0,p=this.splitByGrapheme,g=[],m=[],v=p?a.util.string.graphemeSplit(f):f.split(this._wordJoiners),y="",w=0,b=p?"":" ",S=0,_=0,E=0,C=!0,P=this._getWidthOfCharSpacing(),N=N||0;v.length===0&&v.push([]),s-=N;for(var B=0;B<v.length;B++)y=p?v[B]:a.util.string.graphemeSplit(v[B]),S=this._measureWord(y,u,w),w+=y.length,d+=_+S-P,d>s&&!C?(g.push(m),m=[],d=S,C=!0):d+=P,!C&&!p&&m.push(b),m=m.concat(y),_=p?0:this._measureWord([b],u,w),w++,C=!1,S>E&&(E=S);return B&&g.push(m),E+N>this.dynamicMinWidth&&(this.dynamicMinWidth=E-P+N),g},isEndOfWrapping:function(f){return!this._styleMap[f+1]||this._styleMap[f+1].line!==this._styleMap[f].line},missingNewlineOffset:function(f){return this.splitByGrapheme?this.isEndOfWrapping(f)?1:0:1},_splitTextIntoLines:function(f){for(var u=a.Text.prototype._splitTextIntoLines.call(this,f),s=this._wrapText(u.lines,this.width),c=new Array(s.length),d=0;d<s.length;d++)c[d]=s[d].join("");return u.lines=c,u.graphemeLines=s,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var f={};for(var u in this._styleMap)this._textLines[u]&&(f[this._styleMap[u].line]=1);for(var u in this.styles)f[u]||delete this.styles[u]},toObject:function(f){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(f))}}),a.Textbox.fromObject=function(f,u){var s=a.util.stylesFromArray(f.styles,f.text),c=Object.assign({},f,{styles:s});return a.Object._fromObject("Textbox",c,u,"text")}}(e),function(){var l=t.controlsUtils,a=l.scaleSkewCursorStyleHandler,f=l.scaleCursorStyleHandler,u=l.scalingEqually,s=l.scalingYOrSkewingX,c=l.scalingXOrSkewingY,d=l.scaleOrSkewActionName,p=t.Object.prototype.controls;if(p.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:a,actionHandler:c,getActionName:d}),p.mr=new t.Control({x:.5,y:0,cursorStyleHandler:a,actionHandler:c,getActionName:d}),p.mb=new t.Control({x:0,y:.5,cursorStyleHandler:a,actionHandler:s,getActionName:d}),p.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:a,actionHandler:s,getActionName:d}),p.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:f,actionHandler:u}),p.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:f,actionHandler:u}),p.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:f,actionHandler:u}),p.br=new t.Control({x:.5,y:.5,cursorStyleHandler:f,actionHandler:u}),p.mtr=new t.Control({x:0,y:-.5,actionHandler:l.rotationWithSnapping,cursorStyleHandler:l.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var g=t.Textbox.prototype.controls={};g.mtr=p.mtr,g.tr=p.tr,g.br=p.br,g.tl=p.tl,g.bl=p.bl,g.mt=p.mt,g.mb=p.mb,g.mr=new t.Control({x:.5,y:0,actionHandler:l.changeWidth,cursorStyleHandler:a,actionName:"resizing"}),g.ml=new t.Control({x:-.5,y:0,actionHandler:l.changeWidth,cursorStyleHandler:a,actionName:"resizing"})}}()})(qa);function we(...e){return Dg(eO(e))}function hh(e){const t=e.split(",")[0].split(":")[1].split(";")[0],n=atob(e.split(",")[1]),r=[];for(let i=0;i<n.length;i+=1)r.push(n.charCodeAt(i));return new Blob([new Uint8Array(r)],{type:t})}function ru(e,t){return new Promise((n,r)=>{const i=e.src,o=e;o.onload=n,o.onerror=h=>{o.src=i,r(h)},o.src=t})}async function jO(e){const t=URL.createObjectURL(e),n=new Image;return await ru(n,t),n}function BO(e){return new Promise((t,n)=>{const r=new Image;r.addEventListener("load",()=>{t(r)}),r.addEventListener("error",i=>{n(i)}),r.src=e.toDataURL()})}function aS(e,t,n){return fetch(e).then(function(r){return r.arrayBuffer()}).then(function(r){return new File([r],t,{type:n})})}function lS(e,t){return Math.floor(Math.random()*(t-e+1))+e}async function zO(){try{const{state:e}=await navigator.permissions.query({name:"clipboard-write"});return e==="granted"}catch{return!1}}function UO(e,t){return new Promise((n,r)=>e.toBlob(async i=>{i?n(i):r(new Error("Expected toBlob() to be defined"))},t))}function cS(e){const t=atob(e),n=new Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);const r=new Uint8Array(n);return new Blob([r],{type:"image/png"})}const VO=async e=>{const t=[new ClipboardItem({[e.type]:e})];await navigator.clipboard.write(t)};function HO(e){return e.e.button===0}function dy(e){return e.e.button===1}async function WO(e){const t=await UO(e,"image/png");try{await VO(t)}catch{console.log("Copy image failed!")}}function YO(e,t,n=zu){e.strokeStyle=n,e.lineCap="round",e.lineJoin="round",t.forEach(r=>{!(r!=null&&r.pts.length)||!r.size||(e.lineWidth=r.size,e.beginPath(),e.moveTo(r.pts[0].x,r.pts[0].y),r.pts.forEach(i=>e.lineTo(i.x,i.y)),e.stroke())})}const hy=(e,t,n,r=[],i="white")=>{const o=document.createElement("canvas");o.width=e,o.height=t;const h=o.getContext("2d");if(!h)throw new Error("could not retrieve mask canvas");return r.forEach(l=>{h.drawImage(l,0,0,e,t)}),n.forEach(l=>{YO(h,l,i)}),o},XO=(e,t,n)=>new Promise((r,i)=>{var o=new qa.fabric.Canvas(null,{width:t,height:n});let h,l;const a=JSON.parse(e),f=a.objects.filter(d=>d.type==="path"),u={...a,objects:f},s=a.objects.filter(d=>d.type==="image"),c={...a,objects:s};o.loadFromJSON(u,()=>{try{if(l=o.toDataURL(),!l)throw new Error("Mask generation failed")}catch(d){i(d)}}),o.clear(),o.loadFromJSON(c,()=>{try{if(h=o.toDataURL(),!h)throw new Error("Image generation failed");r({targetMask:l,targetFile:h})}catch(d){i(d)}})}),Za=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var h;const o=(h=i.target)==null?void 0:h.result;t(o)},r.onerror=i=>{n(i)},r.readAsDataURL(e)}),GO=Q5,uS=x.forwardRef(({className:e,...t},n)=>T.jsx(Wx,{ref:n,className:we("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),tabIndex:-1,...t}));uS.displayName=Wx.displayName;const KO=Gf("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fS=x.forwardRef(({className:e,variant:t,...n},r)=>T.jsx(Yx,{ref:r,className:we(KO({variant:t}),e),tabIndex:-1,...n}));fS.displayName=Yx.displayName;const qO=x.forwardRef(({className:e,...t},n)=>T.jsx(Kx,{ref:n,className:we("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),tabIndex:-1,...t}));qO.displayName=Kx.displayName;const dS=x.forwardRef(({className:e,...t},n)=>T.jsx(qx,{ref:n,className:we("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",tabIndex:-1,...t,children:T.jsx(Dx,{className:"h-4 w-4"})}));dS.displayName=qx.displayName;const hS=x.forwardRef(({className:e,...t},n)=>T.jsx(Xx,{ref:n,className:we("text-sm font-semibold [&+div]:text-xs",e),tabIndex:-1,...t}));hS.displayName=Xx.displayName;const pS=x.forwardRef(({className:e,...t},n)=>T.jsx(Gx,{ref:n,className:we("text-sm opacity-90",e),...t,tabIndex:-1}));pS.displayName=Gx.displayName;const ZO=1,QO=1e6;let ph=0;function JO(){return ph=(ph+1)%Number.MAX_VALUE,ph.toString()}const mh=new Map,py=e=>{if(mh.has(e))return;const t=setTimeout(()=>{mh.delete(e),Qa({type:"REMOVE_TOAST",toastId:e})},QO);mh.set(e,t)},e3=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,ZO)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?py(n):e.toasts.forEach(r=>{py(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},iu=[];let ou={toasts:[]};function Qa(e){ou=e3(ou,e),iu.forEach(t=>{t(ou)})}function Na({...e}){const t=JO(),n=i=>Qa({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Qa({type:"DISMISS_TOAST",toastId:t});return Qa({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function Ng(){const[e,t]=x.useState(ou);return x.useEffect(()=>(iu.push(t),()=>{const n=iu.indexOf(t);n>-1&&iu.splice(n,1)}),[e]),{...e,toast:Na,dismiss:n=>Qa({type:"DISMISS_TOAST",toastId:n})}}function t3(){const{toasts:e}=Ng();return T.jsxs(GO,{children:[e.map(function({id:t,title:n,description:r,action:i,...o}){return T.jsxs(fS,{...o,children:[T.jsxs("div",{className:"grid gap-1",children:[n&&T.jsx(hS,{children:n}),r&&T.jsx(pS,{children:r})]}),i,T.jsx(dS,{})]},t)}),T.jsx(uS,{})]})}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mS=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:h,...l},a)=>x.createElement("svg",{ref:a,...r3,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:mS("lucide",i),...l},[...h.map(([f,u])=>x.createElement(f,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(e,t)=>{const n=x.forwardRef(({className:r,...i},o)=>x.createElement(i3,{ref:o,iconNode:t,className:mS(`lucide-${n3(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=pt("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=pt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=pt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=pt("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=pt("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=pt("Fullscreen",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=pt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=pt("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=pt("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=pt("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=pt("Slice",[["path",{d:"m8 14-6 6h9v-3",key:"zo3j9a"}],["path",{d:"M18.37 3.63 8 14l3 3L21.37 6.63a2.12 2.12 0 1 0-3-3Z",key:"1dzx0j"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=pt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=pt("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var _3={VITE_BACKEND:"https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",VITE_RUNPOD:"J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",BASE_URL:"/images-project",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function C3(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const h=a=>a===null?null:JSON.parse(a,void 0),l=(o=n.getItem(i))!=null?o:null;return l instanceof Promise?l.then(h):h(l)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const xl=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return xl(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return xl(r)(n)}}}},E3=(e,t)=>(n,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,v)=>({...v,...m}),...t},h=!1;const l=new Set,a=new Set;let f;try{f=o.getStorage()}catch{}if(!f)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...m)},r,i);const u=xl(o.serialize),s=()=>{const m=o.partialize({...r()});let v;const y=u({state:m,version:o.version}).then(w=>f.setItem(o.name,w)).catch(w=>{v=w});if(v)throw v;return y},c=i.setState;i.setState=(m,v)=>{c(m,v),s()};const d=e((...m)=>{n(...m),s()},r,i);let p;const g=()=>{var m;if(!f)return;h=!1,l.forEach(y=>y(r()));const v=((m=o.onRehydrateStorage)==null?void 0:m.call(o,r()))||void 0;return xl(f.getItem.bind(f))(o.name).then(y=>{if(y)return o.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==o.version){if(o.migrate)return o.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var w;return p=o.merge(y,(w=r())!=null?w:d),n(p,!0),s()}).then(()=>{v==null||v(p,void 0),h=!0,a.forEach(y=>y(p))}).catch(y=>{v==null||v(void 0,y)})};return i.persist={setOptions:m=>{o={...o,...m},m.getStorage&&(f=m.getStorage())},clearStorage:()=>{f==null||f.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>h,onHydrate:m=>(l.add(m),()=>{l.delete(m)}),onFinishHydration:m=>(a.add(m),()=>{a.delete(m)})},g(),p||d},T3=(e,t)=>(n,r,i)=>{let o={storage:C3(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...t},h=!1;const l=new Set,a=new Set;let f=o.storage;if(!f)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,i);const u=()=>{const g=o.partialize({...r()});return f.setItem(o.name,{state:g,version:o.version})},s=i.setState;i.setState=(g,m)=>{s(g,m),u()};const c=e((...g)=>{n(...g),u()},r,i);i.getInitialState=()=>c;let d;const p=()=>{var g,m;if(!f)return;h=!1,l.forEach(y=>{var w;return y((w=r())!=null?w:c)});const v=((m=o.onRehydrateStorage)==null?void 0:m.call(o,(g=r())!=null?g:c))||void 0;return xl(f.getItem.bind(f))(o.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==o.version){if(o.migrate)return o.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var w;return d=o.merge(y,(w=r())!=null?w:c),n(d,!0),u()}).then(()=>{v==null||v(d,void 0),d=r(),h=!0,a.forEach(y=>y(d))}).catch(y=>{v==null||v(void 0,y)})};return i.persist={setOptions:g=>{o={...o,...g},g.storage&&(f=g.storage)},clearStorage:()=>{f==null||f.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>h,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(a.add(g),()=>{a.delete(g)})},o.skipHydration||p(),d||c},k3=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((_3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),E3(e,t)):T3(e,t),P3=k3;function O3(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var gS=Symbol.for("immer-nothing"),vy=Symbol.for("immer-draftable"),wn=Symbol.for("immer-state");function Kn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Is=Object.getPrototypeOf;function js(e){return!!e&&!!e[wn]}function ko(e){var t;return e?vS(e)||Array.isArray(e)||!!e[vy]||!!((t=e.constructor)!=null&&t[vy])||qf(e)||Zf(e):!1}var $3=Object.prototype.constructor.toString();function vS(e){if(!e||typeof e!="object")return!1;const t=Is(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===$3}function Uu(e,t){Kf(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Kf(e){const t=e[wn];return t?t.type_:Array.isArray(e)?1:qf(e)?2:Zf(e)?3:0}function Wp(e,t){return Kf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yS(e,t,n){const r=Kf(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function A3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function qf(e){return e instanceof Map}function Zf(e){return e instanceof Set}function to(e){return e.copy_||e.base_}function Yp(e,t){if(qf(e))return new Map(e);if(Zf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=vS(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[wn];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const h=i[o],l=r[h];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[h]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[h]})}return Object.create(Is(e),r)}else{const r=Is(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Fg(e,t=!1){return Qf(e)||js(e)||!ko(e)||(Kf(e)>1&&(e.set=e.add=e.clear=e.delete=R3),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Fg(r,!0))),e}function R3(){Kn(2)}function Qf(e){return Object.isFrozen(e)}var M3={};function Po(e){const t=M3[e];return t||Kn(0,e),t}var Sl;function wS(){return Sl}function D3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yy(e,t){t&&(Po("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Xp(e){Gp(e),e.drafts_.forEach(N3),e.drafts_=null}function Gp(e){e===Sl&&(Sl=e.parent_)}function wy(e){return Sl=D3(Sl,e)}function N3(e){const t=e[wn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function by(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[wn].modified_&&(Xp(t),Kn(4)),ko(e)&&(e=Vu(t,e),t.parent_||Hu(t,e)),t.patches_&&Po("Patches").generateReplacementPatches_(n[wn].base_,e,t.patches_,t.inversePatches_)):e=Vu(t,n,[]),Xp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gS?e:void 0}function Vu(e,t,n){if(Qf(t))return t;const r=t[wn];if(!r)return Uu(t,(i,o)=>xy(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Hu(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,h=!1;r.type_===3&&(o=new Set(i),i.clear(),h=!0),Uu(o,(l,a)=>xy(e,r,i,l,a,n,h)),Hu(e,i,!1),n&&e.patches_&&Po("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function xy(e,t,n,r,i,o,h){if(js(i)){const l=o&&t&&t.type_!==3&&!Wp(t.assigned_,r)?o.concat(r):void 0,a=Vu(e,i,l);if(yS(n,r,a),js(a))e.canAutoFreeze_=!1;else return}else h&&n.add(i);if(ko(i)&&!Qf(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Vu(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Hu(e,i)}}function Hu(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fg(t,n)}function F3(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:wS(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Lg;n&&(i=[r],o=_l);const{revoke:h,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=h,l}var Lg={get(e,t){if(t===wn)return e;const n=to(e);if(!Wp(n,t))return L3(e,n,t);const r=n[t];return e.finalized_||!ko(r)?r:r===gh(e.base_,t)?(vh(e),e.copy_[t]=qp(r,e)):r},has(e,t){return t in to(e)},ownKeys(e){return Reflect.ownKeys(to(e))},set(e,t,n){const r=bS(to(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=gh(to(e),t),o=i==null?void 0:i[wn];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(A3(n,i)&&(n!==void 0||Wp(e.base_,t)))return!0;vh(e),Kp(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return gh(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vh(e),Kp(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=to(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Kn(11)},getPrototypeOf(e){return Is(e.base_)},setPrototypeOf(){Kn(12)}},_l={};Uu(Lg,(e,t)=>{_l[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_l.deleteProperty=function(e,t){return _l.set.call(this,e,t,void 0)};_l.set=function(e,t,n){return Lg.set.call(this,e[0],t,n,e[0])};function gh(e,t){const n=e[wn];return(n?to(n):e)[t]}function L3(e,t,n){var i;const r=bS(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function bS(e,t){if(!(t in e))return;let n=Is(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Is(n)}}function Kp(e){e.modified_||(e.modified_=!0,e.parent_&&Kp(e.parent_))}function vh(e){e.copy_||(e.copy_=Yp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var I3=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const h=this;return function(a=o,...f){return h.produce(a,u=>n.call(this,u,...f))}}typeof n!="function"&&Kn(6),r!==void 0&&typeof r!="function"&&Kn(7);let i;if(ko(t)){const o=wy(this),h=qp(t,void 0);let l=!0;try{i=n(h),l=!1}finally{l?Xp(o):Gp(o)}return yy(o,r),by(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===gS&&(i=void 0),this.autoFreeze_&&Fg(i,!0),r){const o=[],h=[];Po("Patches").generateReplacementPatches_(t,i,o,h),r(o,h)}return i}else Kn(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(h,...l)=>this.produceWithPatches(h,a=>t(a,...l));let r,i;return[this.produce(t,n,(h,l)=>{r=h,i=l}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ko(e)||Kn(8),js(e)&&(e=j3(e));const t=wy(this),n=qp(e,void 0);return n[wn].isManual_=!0,Gp(t),n}finishDraft(e,t){const n=e&&e[wn];(!n||!n.isManual_)&&Kn(9);const{scope_:r}=n;return yy(r,t),by(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Po("Patches").applyPatches_;return js(e)?r(e,t):this.produce(e,i=>r(i,t))}};function qp(e,t){const n=qf(e)?Po("MapSet").proxyMap_(e,t):Zf(e)?Po("MapSet").proxySet_(e,t):F3(e,t);return(t?t.scope_:wS()).drafts_.push(n),n}function j3(e){return js(e)||Kn(10,e),xS(e)}function xS(e){if(!ko(e)||Qf(e))return e;const t=e[wn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Yp(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Yp(e,!0);return Uu(n,(r,i)=>{yS(n,r,xS(i))}),t&&(t.finalized_=!1),n}var bn=new I3,B3=bn.produce;bn.produceWithPatches.bind(bn);bn.setAutoFreeze.bind(bn);bn.setUseStrictShallowCopy.bind(bn);bn.applyPatches.bind(bn);bn.createDraft.bind(bn);bn.finishDraft.bind(bn);const z3=e=>(t,n,r)=>(r.setState=(i,o,...h)=>{const l=typeof i=="function"?B3(i):i;return t(l,o,...h)},e(r.setState,n,r)),U3=z3;var SS={exports:{}},_S={},CS={exports:{}},ES={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=x;function V3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var H3=typeof Object.is=="function"?Object.is:V3,W3=Bs.useState,Y3=Bs.useEffect,X3=Bs.useLayoutEffect,G3=Bs.useDebugValue;function K3(e,t){var n=t(),r=W3({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return X3(function(){i.value=n,i.getSnapshot=t,yh(i)&&o({inst:i})},[e,n,t]),Y3(function(){return yh(i)&&o({inst:i}),e(function(){yh(i)&&o({inst:i})})},[e]),G3(n),n}function yh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!H3(e,n)}catch{return!0}}function q3(e,t){return t()}var Z3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q3:K3;ES.useSyncExternalStore=Bs.useSyncExternalStore!==void 0?Bs.useSyncExternalStore:Z3;CS.exports=ES;var Q3=CS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=x,J3=Q3;function e$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var t$=typeof Object.is=="function"?Object.is:e$,n$=J3.useSyncExternalStore,r$=Jf.useRef,i$=Jf.useEffect,o$=Jf.useMemo,s$=Jf.useDebugValue;_S.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=r$(null);if(o.current===null){var h={hasValue:!1,value:null};o.current=h}else h=o.current;o=o$(function(){function a(d){if(!f){if(f=!0,u=d,d=r(d),i!==void 0&&h.hasValue){var p=h.value;if(i(p,d))return s=p}return s=d}if(p=s,t$(u,d))return p;var g=r(d);return i!==void 0&&i(p,g)?p:(u=d,s=g)}var f=!1,u,s,c=n===void 0?null:n;return[function(){return a(t())},c===null?void 0:function(){return a(c())}]},[t,n,r,i]);var l=n$(e,o[0],o[1]);return i$(function(){h.hasValue=!0,h.value=l},[l]),s$(l),l};SS.exports=_S;var a$=SS.exports;const l$=Mm(a$);var c$={VITE_BACKEND:"https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",VITE_RUNPOD:"J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",BASE_URL:"/images-project",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Sy=e=>{let t;const n=new Set,r=(u,s)=>{const c=typeof u=="function"?u(t):u;if(!Object.is(c,t)){const d=t;t=s??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(p=>p(t,d))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>f,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(c$?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,a);return a},u$=e=>e?Sy(e):Sy,{useDebugValue:f$}=ke,{useSyncExternalStoreWithSelector:d$}=l$,h$=e=>e;function p$(e,t=h$,n){const r=d$(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return f$(r),r}const _y=(e,t)=>{const n=u$(e),r=(i,o=t)=>p$(n,i,o);return Object.assign(r,n),r},TS=(e,t)=>e?_y(e,t):_y;var di=(e=>(e.RemoveBG="RemoveBG",e.AnimeSeg="AnimeSeg",e.RealESRGAN="RealESRGAN",e.GFPGAN="GFPGAN",e.RestoreFormer="RestoreFormer",e.InteractiveSeg="InteractiveSeg",e))(di||{}),kS=(e=>(e.NAME="name",e.CTIME="ctime",e.MTIME="mtime",e))(kS||{}),PS=(e=>(e.DESCENDING="desc",e.ASCENDING="asc",e))(PS||{}),Ig=(e=>(e.ddim="ddim",e.plms="plms",e))(Ig||{}),jg=(e=>(e.INPAINT_NS="INPAINT_NS",e.INPAINT_TELEA="INPAINT_TELEA",e))(jg||{}),Ut=(e=>(e.x="x",e.y="y",e.xy="xy",e))(Ut||{}),ys=(e=>(e.text_guided="text-guided",e.shape_guided="shape-guided",e.object_remove="object-remove",e.outpainting="outpainting",e))(ys||{});const m$={plugins:[{name:"RemoveBG",support_gen_image:!0,support_gen_mask:!0}],modelInfos:[{name:"lama",path:"lama",model_type:"inpaint",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"cv2",path:"cv2",model_type:"inpaint",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"runwayml/stable-diffusion-v1-5",path:"runwayml/stable-diffusion-v1-5",model_type:"diffusers_sd",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!0,support_controlnet:!0,support_freeu:!0},{name:"Sanster/PowerPaint-V1-stable-diffusion-inpainting",path:"Sanster/PowerPaint-V1-stable-diffusion-inpainting",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"redstonehero/ReV_Animated_Inpainting",path:"redstonehero/ReV_Animated_Inpainting",model_type:"diffusers_sd",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!0,support_controlnet:!0,support_freeu:!0},{name:"Fantasy-Studio/Paint-by-Example",path:"Fantasy-Studio/Paint-by-Example",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1}],removeBGModel:"briaai/RMBG-1.4",removeBGModels:["u2net","u2netp","u2net_human_seg","u2net_cloth_seg","silueta","isnet-general-use","briaai/RMBG-1.4"],realesrganModel:"realesr-general-x4v3",realesrganModels:["realesr-general-x4v3","RealESRGAN_x4plus","RealESRGAN_x4plus_anime_6B"],interactiveSegModel:"vit_b",interactiveSegModels:["vit_b","vit_l","vit_h","sam_hq_vit_b","sam_hq_vit_l","sam_hq_vit_h","mobile_sam"],enableFileManager:!1,enableAutoSaving:!1,enableControlnet:!1,controlnetMethod:"",disableModelSwitch:!1,isDesktop:!1,samplers:["DPM++ 2M","DPM++ 2M Karras","DPM++ 2M SDE","DPM++ 2M SDE Karras","DPM++ SDE","DPM++ SDE Karras","DPM2","DPM2 Karras","DPM2 a","DPM2 a Karras","Euler","Euler a","Heun","LMS","LMS Karras","DDIM","PNDM","UniPC","LCM"]};function OS(e,t){return function(){return e.apply(t,arguments)}}const{toString:g$}=Object.prototype,{getPrototypeOf:Bg}=Object,ed=(e=>t=>{const n=g$.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tr=e=>(e=e.toLowerCase(),t=>ed(t)===e),td=e=>t=>typeof t===e,{isArray:na}=Array,Cl=td("undefined");function v$(e){return e!==null&&!Cl(e)&&e.constructor!==null&&!Cl(e.constructor)&&An(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $S=Tr("ArrayBuffer");function y$(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&$S(e.buffer),t}const w$=td("string"),An=td("function"),AS=td("number"),nd=e=>e!==null&&typeof e=="object",b$=e=>e===!0||e===!1,su=e=>{if(ed(e)!=="object")return!1;const t=Bg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},x$=Tr("Date"),S$=Tr("File"),_$=Tr("Blob"),C$=Tr("FileList"),E$=e=>nd(e)&&An(e.pipe),T$=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||An(e.append)&&((t=ed(e))==="formdata"||t==="object"&&An(e.toString)&&e.toString()==="[object FormData]"))},k$=Tr("URLSearchParams"),P$=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),na(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),h=o.length;let l;for(r=0;r<h;r++)l=o[r],t.call(null,e[l],l,e)}}function RS(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const MS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DS=e=>!Cl(e)&&e!==MS;function Zp(){const{caseless:e}=DS(this)&&this||{},t={},n=(r,i)=>{const o=e&&RS(t,i)||i;su(t[o])&&su(r)?t[o]=Zp(t[o],r):su(r)?t[o]=Zp({},r):na(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Yl(arguments[r],n);return t}const O$=(e,t,n,{allOwnKeys:r}={})=>(Yl(t,(i,o)=>{n&&An(i)?e[o]=OS(i,n):e[o]=i},{allOwnKeys:r}),e),$$=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),A$=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},R$=(e,t,n,r)=>{let i,o,h;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)h=i[o],(!r||r(h,e,t))&&!l[h]&&(t[h]=e[h],l[h]=!0);e=n!==!1&&Bg(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},M$=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},D$=e=>{if(!e)return null;if(na(e))return e;let t=e.length;if(!AS(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},N$=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Bg(Uint8Array)),F$=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},L$=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},I$=Tr("HTMLFormElement"),j$=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Cy=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),B$=Tr("RegExp"),NS=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Yl(n,(i,o)=>{let h;(h=t(i,o,e))!==!1&&(r[o]=h||i)}),Object.defineProperties(e,r)},z$=e=>{NS(e,(t,n)=>{if(An(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(An(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},U$=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return na(e)?r(e):r(String(e).split(t)),n},V$=()=>{},H$=(e,t)=>(e=+e,Number.isFinite(e)?e:t),wh="abcdefghijklmnopqrstuvwxyz",Ey="0123456789",FS={DIGIT:Ey,ALPHA:wh,ALPHA_DIGIT:wh+wh.toUpperCase()+Ey},W$=(e=16,t=FS.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Y$(e){return!!(e&&An(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const X$=e=>{const t=new Array(10),n=(r,i)=>{if(nd(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=na(r)?[]:{};return Yl(r,(h,l)=>{const a=n(h,i+1);!Cl(a)&&(o[l]=a)}),t[i]=void 0,o}}return r};return n(e,0)},G$=Tr("AsyncFunction"),K$=e=>e&&(nd(e)||An(e))&&An(e.then)&&An(e.catch),fe={isArray:na,isArrayBuffer:$S,isBuffer:v$,isFormData:T$,isArrayBufferView:y$,isString:w$,isNumber:AS,isBoolean:b$,isObject:nd,isPlainObject:su,isUndefined:Cl,isDate:x$,isFile:S$,isBlob:_$,isRegExp:B$,isFunction:An,isStream:E$,isURLSearchParams:k$,isTypedArray:N$,isFileList:C$,forEach:Yl,merge:Zp,extend:O$,trim:P$,stripBOM:$$,inherits:A$,toFlatObject:R$,kindOf:ed,kindOfTest:Tr,endsWith:M$,toArray:D$,forEachEntry:F$,matchAll:L$,isHTMLForm:I$,hasOwnProperty:Cy,hasOwnProp:Cy,reduceDescriptors:NS,freezeMethods:z$,toObjectSet:U$,toCamelCase:j$,noop:V$,toFiniteNumber:H$,findKey:RS,global:MS,isContextDefined:DS,ALPHABET:FS,generateString:W$,isSpecCompliantForm:Y$,toJSONObject:X$,isAsyncFn:G$,isThenable:K$};function Le(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}fe.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const LS=Le.prototype,IS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{IS[e]={value:e}});Object.defineProperties(Le,IS);Object.defineProperty(LS,"isAxiosError",{value:!0});Le.from=(e,t,n,r,i,o)=>{const h=Object.create(LS);return fe.toFlatObject(e,h,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),Le.call(h,e.message,t,n,r,i),h.cause=e,h.name=e.name,o&&Object.assign(h,o),h};const q$=null;function Qp(e){return fe.isPlainObject(e)||fe.isArray(e)}function jS(e){return fe.endsWith(e,"[]")?e.slice(0,-2):e}function Ty(e,t,n){return e?e.concat(t).map(function(i,o){return i=jS(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function Z$(e){return fe.isArray(e)&&!e.some(Qp)}const Q$=fe.toFlatObject(fe,{},null,function(t){return/^is[A-Z]/.test(t)});function rd(e,t,n){if(!fe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=fe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!fe.isUndefined(m[g])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,h=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(t);if(!fe.isFunction(i))throw new TypeError("visitor must be a function");function f(p){if(p===null)return"";if(fe.isDate(p))return p.toISOString();if(!a&&fe.isBlob(p))throw new Le("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(p)||fe.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,m){let v=p;if(p&&!m&&typeof p=="object"){if(fe.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(fe.isArray(p)&&Z$(p)||(fe.isFileList(p)||fe.endsWith(g,"[]"))&&(v=fe.toArray(p)))return g=jS(g),v.forEach(function(w,b){!(fe.isUndefined(w)||w===null)&&t.append(h===!0?Ty([g],b,o):h===null?g:g+"[]",f(w))}),!1}return Qp(p)?!0:(t.append(Ty(m,g,o),f(p)),!1)}const s=[],c=Object.assign(Q$,{defaultVisitor:u,convertValue:f,isVisitable:Qp});function d(p,g){if(!fe.isUndefined(p)){if(s.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));s.push(p),fe.forEach(p,function(v,y){(!(fe.isUndefined(v)||v===null)&&i.call(t,v,fe.isString(y)?y.trim():y,g,c))===!0&&d(v,g?g.concat(y):[y])}),s.pop()}}if(!fe.isObject(e))throw new TypeError("data must be an object");return d(e),t}function ky(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function zg(e,t){this._pairs=[],e&&rd(e,this,t)}const BS=zg.prototype;BS.append=function(t,n){this._pairs.push([t,n])};BS.toString=function(t){const n=t?function(r){return t.call(this,r,ky)}:ky;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function J$(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zS(e,t,n){if(!t)return e;const r=n&&n.encode||J$,i=n&&n.serialize;let o;if(i?o=i(t,n):o=fe.isURLSearchParams(t)?t.toString():new zg(t,n).toString(r),o){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Py{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){fe.forEach(this.handlers,function(r){r!==null&&t(r)})}}const US={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eA=typeof URLSearchParams<"u"?URLSearchParams:zg,tA=typeof FormData<"u"?FormData:null,nA=typeof Blob<"u"?Blob:null,rA={isBrowser:!0,classes:{URLSearchParams:eA,FormData:tA,Blob:nA},protocols:["http","https","file","blob","url","data"]},VS=typeof window<"u"&&typeof document<"u",iA=(e=>VS&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),oA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:VS,hasStandardBrowserEnv:iA,hasStandardBrowserWebWorkerEnv:oA},Symbol.toStringTag,{value:"Module"})),hr={...sA,...rA};function aA(e,t){return rd(e,new hr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return hr.isNode&&fe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function lA(e){return fe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function cA(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function HS(e){function t(n,r,i,o){let h=n[o++];if(h==="__proto__")return!0;const l=Number.isFinite(+h),a=o>=n.length;return h=!h&&fe.isArray(i)?i.length:h,a?(fe.hasOwnProp(i,h)?i[h]=[i[h],r]:i[h]=r,!l):((!i[h]||!fe.isObject(i[h]))&&(i[h]=[]),t(n,r,i[h],o)&&fe.isArray(i[h])&&(i[h]=cA(i[h])),!l)}if(fe.isFormData(e)&&fe.isFunction(e.entries)){const n={};return fe.forEachEntry(e,(r,i)=>{t(lA(r),i,n,0)}),n}return null}function uA(e,t,n){if(fe.isString(e))try{return(t||JSON.parse)(e),fe.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Xl={transitional:US,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=fe.isObject(t);if(o&&fe.isHTMLForm(t)&&(t=new FormData(t)),fe.isFormData(t))return i?JSON.stringify(HS(t)):t;if(fe.isArrayBuffer(t)||fe.isBuffer(t)||fe.isStream(t)||fe.isFile(t)||fe.isBlob(t))return t;if(fe.isArrayBufferView(t))return t.buffer;if(fe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return aA(t,this.formSerializer).toString();if((l=fe.isFileList(t))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return rd(l?{"files[]":t}:t,a&&new a,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),uA(t)):t}],transformResponse:[function(t){const n=this.transitional||Xl.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&fe.isString(t)&&(r&&!this.responseType||i)){const h=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(l){if(h)throw l.name==="SyntaxError"?Le.from(l,Le.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hr.classes.FormData,Blob:hr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],e=>{Xl.headers[e]={}});const fA=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dA=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(h){i=h.indexOf(":"),n=h.substring(0,i).trim().toLowerCase(),r=h.substring(i+1).trim(),!(!n||t[n]&&fA[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Oy=Symbol("internals");function Sa(e){return e&&String(e).trim().toLowerCase()}function au(e){return e===!1||e==null?e:fe.isArray(e)?e.map(au):String(e)}function hA(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const pA=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function bh(e,t,n,r,i){if(fe.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!fe.isString(t)){if(fe.isString(r))return t.indexOf(r)!==-1;if(fe.isRegExp(r))return r.test(t)}}function mA(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function gA(e,t){const n=fe.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,h){return this[r].call(this,t,i,o,h)},configurable:!0})})}class Rn{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(l,a,f){const u=Sa(a);if(!u)throw new Error("header name must be a non-empty string");const s=fe.findKey(i,u);(!s||i[s]===void 0||f===!0||f===void 0&&i[s]!==!1)&&(i[s||a]=au(l))}const h=(l,a)=>fe.forEach(l,(f,u)=>o(f,u,a));return fe.isPlainObject(t)||t instanceof this.constructor?h(t,n):fe.isString(t)&&(t=t.trim())&&!pA(t)?h(dA(t),n):t!=null&&o(n,t,r),this}get(t,n){if(t=Sa(t),t){const r=fe.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return hA(i);if(fe.isFunction(n))return n.call(this,i,r);if(fe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Sa(t),t){const r=fe.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||bh(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(h){if(h=Sa(h),h){const l=fe.findKey(r,h);l&&(!n||bh(r,r[l],l,n))&&(delete r[l],i=!0)}}return fe.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||bh(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return fe.forEach(this,(i,o)=>{const h=fe.findKey(r,o);if(h){n[h]=au(i),delete n[o];return}const l=t?mA(o):String(o).trim();l!==o&&delete n[o],n[l]=au(i),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return fe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&fe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Oy]=this[Oy]={accessors:{}}).accessors,i=this.prototype;function o(h){const l=Sa(h);r[l]||(gA(i,h),r[l]=!0)}return fe.isArray(t)?t.forEach(o):o(t),this}}Rn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(Rn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});fe.freezeMethods(Rn);function xh(e,t){const n=this||Xl,r=t||n,i=Rn.from(r.headers);let o=r.data;return fe.forEach(e,function(l){o=l.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function WS(e){return!!(e&&e.__CANCEL__)}function Gl(e,t,n){Le.call(this,e??"canceled",Le.ERR_CANCELED,t,n),this.name="CanceledError"}fe.inherits(Gl,Le,{__CANCEL__:!0});function vA(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Le("Request failed with status code "+n.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const yA=hr.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const h=[e+"="+encodeURIComponent(t)];fe.isNumber(n)&&h.push("expires="+new Date(n).toGMTString()),fe.isString(r)&&h.push("path="+r),fe.isString(i)&&h.push("domain="+i),o===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wA(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function bA(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function YS(e,t){return e&&!wA(t)?bA(e,t):t}const xA=hr.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(o){let h=o;return t&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(h){const l=fe.isString(h)?i(h):h;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function SA(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function _A(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,h;return t=t!==void 0?t:1e3,function(a){const f=Date.now(),u=r[o];h||(h=f),n[i]=a,r[i]=f;let s=o,c=0;for(;s!==i;)c+=n[s++],s=s%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),f-h<t)return;const d=u&&f-u;return d?Math.round(c*1e3/d):void 0}}function $y(e,t){let n=0;const r=_A(50,250);return i=>{const o=i.loaded,h=i.lengthComputable?i.total:void 0,l=o-n,a=r(l),f=o<=h;n=o;const u={loaded:o,total:h,progress:h?o/h:void 0,bytes:l,rate:a||void 0,estimated:a&&h&&f?(h-o)/a:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}const CA=typeof XMLHttpRequest<"u",EA=CA&&function(e){return new Promise(function(n,r){let i=e.data;const o=Rn.from(e.headers).normalize();let{responseType:h,withXSRFToken:l}=e,a;function f(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let u;if(fe.isFormData(i)){if(hr.hasStandardBrowserEnv||hr.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((u=o.getContentType())!==!1){const[g,...m]=u?u.split(";").map(v=>v.trim()).filter(Boolean):[];o.setContentType([g||"multipart/form-data",...m].join("; "))}}let s=new XMLHttpRequest;if(e.auth){const g=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(g+":"+m))}const c=YS(e.baseURL,e.url);s.open(e.method.toUpperCase(),zS(c,e.params,e.paramsSerializer),!0),s.timeout=e.timeout;function d(){if(!s)return;const g=Rn.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders()),v={data:!h||h==="text"||h==="json"?s.responseText:s.response,status:s.status,statusText:s.statusText,headers:g,config:e,request:s};vA(function(w){n(w),f()},function(w){r(w),f()},v),s=null}if("onloadend"in s?s.onloadend=d:s.onreadystatechange=function(){!s||s.readyState!==4||s.status===0&&!(s.responseURL&&s.responseURL.indexOf("file:")===0)||setTimeout(d)},s.onabort=function(){s&&(r(new Le("Request aborted",Le.ECONNABORTED,e,s)),s=null)},s.onerror=function(){r(new Le("Network Error",Le.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const v=e.transitional||US;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),r(new Le(m,v.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,e,s)),s=null},hr.hasStandardBrowserEnv&&(l&&fe.isFunction(l)&&(l=l(e)),l||l!==!1&&xA(c))){const g=e.xsrfHeaderName&&e.xsrfCookieName&&yA.read(e.xsrfCookieName);g&&o.set(e.xsrfHeaderName,g)}i===void 0&&o.setContentType(null),"setRequestHeader"in s&&fe.forEach(o.toJSON(),function(m,v){s.setRequestHeader(v,m)}),fe.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),h&&h!=="json"&&(s.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&s.addEventListener("progress",$y(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&s.upload&&s.upload.addEventListener("progress",$y(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=g=>{s&&(r(!g||g.type?new Gl(null,e,s):g),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const p=SA(c);if(p&&hr.protocols.indexOf(p)===-1){r(new Le("Unsupported protocol "+p+":",Le.ERR_BAD_REQUEST,e));return}s.send(i||null)})},Jp={http:q$,xhr:EA};fe.forEach(Jp,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ay=e=>`- ${e}`,TA=e=>fe.isFunction(e)||e===null||e===!1,XS={getAdapter:e=>{e=fe.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let h;if(r=n,!TA(n)&&(r=Jp[(h=String(n)).toLowerCase()],r===void 0))throw new Le(`Unknown adapter '${h}'`);if(r)break;i[h||"#"+o]=r}if(!r){const o=Object.entries(i).map(([l,a])=>`adapter ${l} `+(a===!1?"is not supported by the environment":"is not available in the build"));let h=t?o.length>1?`since :
`+o.map(Ay).join(`
`):" "+Ay(o[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:Jp};function Sh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gl(null,e)}function Ry(e){return Sh(e),e.headers=Rn.from(e.headers),e.data=xh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),XS.getAdapter(e.adapter||Xl.adapter)(e).then(function(r){return Sh(e),r.data=xh.call(e,e.transformResponse,r),r.headers=Rn.from(r.headers),r},function(r){return WS(r)||(Sh(e),r&&r.response&&(r.response.data=xh.call(e,e.transformResponse,r.response),r.response.headers=Rn.from(r.response.headers))),Promise.reject(r)})}const My=e=>e instanceof Rn?{...e}:e;function zs(e,t){t=t||{};const n={};function r(f,u,s){return fe.isPlainObject(f)&&fe.isPlainObject(u)?fe.merge.call({caseless:s},f,u):fe.isPlainObject(u)?fe.merge({},u):fe.isArray(u)?u.slice():u}function i(f,u,s){if(fe.isUndefined(u)){if(!fe.isUndefined(f))return r(void 0,f,s)}else return r(f,u,s)}function o(f,u){if(!fe.isUndefined(u))return r(void 0,u)}function h(f,u){if(fe.isUndefined(u)){if(!fe.isUndefined(f))return r(void 0,f)}else return r(void 0,u)}function l(f,u,s){if(s in t)return r(f,u);if(s in e)return r(void 0,f)}const a={url:o,method:o,data:o,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:l,headers:(f,u)=>i(My(f),My(u),!0)};return fe.forEach(Object.keys(Object.assign({},e,t)),function(u){const s=a[u]||i,c=s(e[u],t[u],u);fe.isUndefined(c)&&s!==l||(n[u]=c)}),n}const GS="1.6.8",Ug={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ug[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Dy={};Ug.transitional=function(t,n,r){function i(o,h){return"[Axios v"+GS+"] Transitional option '"+o+"'"+h+(r?". "+r:"")}return(o,h,l)=>{if(t===!1)throw new Le(i(h," has been removed"+(n?" in "+n:"")),Le.ERR_DEPRECATED);return n&&!Dy[h]&&(Dy[h]=!0,console.warn(i(h," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,h,l):!0}};function kA(e,t,n){if(typeof e!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],h=t[o];if(h){const l=e[o],a=l===void 0||h(l,o,e);if(a!==!0)throw new Le("option "+o+" must be "+a,Le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Le("Unknown option "+o,Le.ERR_BAD_OPTION)}}const em={assertOptions:kA,validators:Ug},ui=em.validators;class xo{constructor(t){this.defaults=t,this.interceptors={request:new Py,response:new Py}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=zs(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&em.assertOptions(r,{silentJSONParsing:ui.transitional(ui.boolean),forcedJSONParsing:ui.transitional(ui.boolean),clarifyTimeoutError:ui.transitional(ui.boolean)},!1),i!=null&&(fe.isFunction(i)?n.paramsSerializer={serialize:i}:em.assertOptions(i,{encode:ui.function,serialize:ui.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h=o&&fe.merge(o.common,o[n.method]);o&&fe.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=Rn.concat(h,o);const l=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(a=a&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const f=[];this.interceptors.response.forEach(function(g){f.push(g.fulfilled,g.rejected)});let u,s=0,c;if(!a){const p=[Ry.bind(this),void 0];for(p.unshift.apply(p,l),p.push.apply(p,f),c=p.length,u=Promise.resolve(n);s<c;)u=u.then(p[s++],p[s++]);return u}c=l.length;let d=n;for(s=0;s<c;){const p=l[s++],g=l[s++];try{d=p(d)}catch(m){g.call(this,m);break}}try{u=Ry.call(this,d)}catch(p){return Promise.reject(p)}for(s=0,c=f.length;s<c;)u=u.then(f[s++],f[s++]);return u}getUri(t){t=zs(this.defaults,t);const n=YS(t.baseURL,t.url);return zS(n,t.params,t.paramsSerializer)}}fe.forEach(["delete","get","head","options"],function(t){xo.prototype[t]=function(n,r){return this.request(zs(r||{},{method:t,url:n,data:(r||{}).data}))}});fe.forEach(["post","put","patch"],function(t){function n(r){return function(o,h,l){return this.request(zs(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:h}))}}xo.prototype[t]=n(),xo.prototype[t+"Form"]=n(!0)});class Vg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const h=new Promise(l=>{r.subscribe(l),o=l}).then(i);return h.cancel=function(){r.unsubscribe(o)},h},t(function(o,h,l){r.reason||(r.reason=new Gl(o,h,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Vg(function(i){t=i}),cancel:t}}}function PA(e){return function(n){return e.apply(null,n)}}function OA(e){return fe.isObject(e)&&e.isAxiosError===!0}const tm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tm).forEach(([e,t])=>{tm[t]=e});function KS(e){const t=new xo(e),n=OS(xo.prototype.request,t);return fe.extend(n,xo.prototype,t,{allOwnKeys:!0}),fe.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return KS(zs(e,i))},n}const ht=KS(Xl);ht.Axios=xo;ht.CanceledError=Gl;ht.CancelToken=Vg;ht.isCancel=WS;ht.VERSION=GS;ht.toFormData=rd;ht.AxiosError=Le;ht.Cancel=ht.CanceledError;ht.all=function(t){return Promise.all(t)};ht.spread=PA;ht.isAxiosError=OA;ht.mergeConfig=zs;ht.AxiosHeaders=Rn;ht.formToJSON=e=>HS(fe.isHTMLForm(e)?new FormData(e):e);ht.getAdapter=XS.getAdapter;ht.HttpStatusCode=tm;ht.default=ht;const id="https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",qS="J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",ZS=ht.create({baseURL:id});async function $A(e,t,n,r,i,o=null,h){const l=await Za(e),a=await Za(i),f=o?await Za(o):null,u=await fetch(`${id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qS}`},body:JSON.stringify({id:lS(1,65536),input:{image:l,mask:a,call_to_api:{api_call:"inpainting"},model:h,ldm_steps:t.ldmSteps,ldm_sampler:t.ldmSampler,zits_wireframe:t.zitsWireframe,cv2_flag:t.cv2Flag,cv2_radius:t.cv2Radius,hd_strategy:"Crop",hd_strategy_crop_triger_size:640,hd_strategy_crop_margin:128,hd_trategy_resize_imit:2048,prompt:t.prompt,negative_prompt:t.negativePrompt,use_croper:t.showCropper,croper_x:n.x,croper_y:n.y,croper_height:n.height,croper_width:n.width,use_extender:t.showExtender,extender_x:r.x,extender_y:r.y,extender_height:r.height,extender_width:r.width,sd_mask_blur:t.sdMaskBlur,sd_strength:t.sdStrength,sd_steps:t.sdSteps,sd_guidance_scale:t.sdGuidanceScale,sd_sampler:t.sdSampler,sd_seed:t.seedFixed?t.seed:-1,sd_match_histograms:t.sdMatchHistograms,sd_freeu:t.enableFreeu,sd_freeu_config:t.freeuConfig,sd_lcm_lora:t.enableLCMLora,paint_by_example_example_image:f,p2p_image_guidance_scale:t.p2pImageGuidanceScale,enable_controlnet:t.enableControlnet,controlnet_conditioning_scale:t.controlnetConditioningScale,controlnet_method:t.controlnetMethod?t.controlnetMethod:"",powerpaint_task:t.showExtender?ys.outpainting:t.powerpaintTask}})});if(u.ok){const c=await u.json(),{output:d}=c,p=cS(d);return{blob:URL.createObjectURL(p),seed:"42"}}const s=await u.json();throw new Error(`Something went wrong: ${s.errors}`)}async function AA(e){return(await ZS.post("/model",{name:e})).data}async function Ny(e,t){return ZS.post("/switch_plugin_model",{plugin_name:e,model_name:t})}async function RA(e,t,n,r,i,o){const h=await Za(n),l=await fetch(`${id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qS}`},body:JSON.stringify({id:lS(1,65536),input:{call_to_api:{api_call:t,plugin_name:t,model_name:r.removeBGModel},name:t,image:h,upscale:i,clicks:o}})});if(l.ok){const f=await l.json(),{output:u}=f,s=cS(u);return{blob:URL.createObjectURL(s)}}const a=await l.json();throw new Error(a)}async function MA(e,t,n){const r=await Za(e),i=await fetch(`${id}/adjust_mask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mask:r,operate:t,kernel_size:n})});if(i.ok)return await i.blob();const o=await i.json();throw new Error(o)}const Qi={file:null,paintByExampleFile:null,customMask:null,imageHeight:0,imageWidth:0,isInpainting:!1,isPluginRunning:!1,isAdjustingMask:!1,disableShortCuts:!1,windowSize:{height:600,width:800},editorState:{baseBrushSize:iS,brushSizeScale:1,renders:[],extraMasks:[],prevExtraMasks:[],temporaryMasks:[],lineGroups:[],lastLineGroup:[],curLineGroup:[],currentCanvas:"",canvasGroups:[],currCanvasGroups:[],lastCanvasGroups:[],redoRenders:[],redoCurLines:[],redoLineGroups:[],redoCurCanvas:[]},interactiveSegState:{isInteractiveSeg:!1,tmpInteractiveSegMask:null,clicks:[]},cropperState:{x:0,y:0,width:512,height:512},extenderState:{x:0,y:0,width:512,height:512},isCropperExtenderResizing:!1,fileManagerState:{sortBy:kS.CTIME,sortOrder:PS.DESCENDING,layout:"masonry",searchText:"",inputDirectory:"",outputDirectory:""},serverConfig:m$,settings:{model:{name:"lama",path:"lama",model_type:"inpaint",support_controlnet:!1,support_strength:!1,support_outpainting:!1,controlnets:[],support_freeu:!1,support_lcm_lora:!1,is_single_file_diffusers:!1,need_prompt:!1},enableControlnet:!1,showCropper:!1,showExtender:!1,extenderDirection:Ut.xy,enableDownloadMask:!1,enableManualInpainting:!1,enableUploadMask:!1,enableAutoExtractPrompt:!0,ldmSteps:30,ldmSampler:Ig.ddim,zitsWireframe:!0,cv2Radius:5,cv2Flag:jg.INPAINT_NS,prompt:"",negativePrompt:FO,seed:42,seedFixed:!1,sdMaskBlur:12,sdStrength:1,sdSteps:50,sdGuidanceScale:7.5,sdSampler:"DPM++ 2M",sdMatchHistograms:!1,sdScale:1,p2pImageGuidanceScale:1.5,controlnetConditioningScale:.4,controlnetMethod:"lllyasviel/control_v11p_sd15_canny",enableLCMLora:!1,enableFreeu:!1,freeuConfig:{s1:.9,s2:.2,b1:1.2,b2:1.4},powerpaintTask:ys.text_guided,adjustMaskKernelSize:12}},DA=TS(e=>({language:"",setLanguage:t=>e({language:t})})),Xe=TS()(P3(U3((e,t)=>({...Qi,showPrevMask:async()=>{if(t().settings.showExtender)return;const{lastLineGroup:n,curLineGroup:r,prevExtraMasks:i,extraMasks:o}=t().editorState;if(r.length!==0||o.length!==0)return;const{imageWidth:h,imageHeight:l}=t(),a=hy(h,l,[n],i,zu);try{const f=await BO(a);e(u=>{u.editorState.temporaryMasks.push(f)})}catch(f){console.error(f);return}},hidePrevMask:()=>{e(n=>{n.editorState.temporaryMasks=[]})},getCurrentTargetFile:async()=>{const n=t().file,r=t().editorState.renders;let i=n;if(r.length>0){const o=r[r.length-1];i=await aS(o.currentSrc,n.name,n.type)}return i},runInpainting:async n=>{const{isInpainting:r,file:i,paintByExampleFile:o,imageWidth:h,imageHeight:l,settings:a,cropperState:f,extenderState:u}=t();if(r||i===null||t().settings.model.support_outpainting&&a.showExtender&&u.height===l&&u.width===h)return;const{lastLineGroup:s,curLineGroup:c,lineGroups:d,renders:p,prevExtraMasks:g,extraMasks:m,currCanvasGroups:v}=t().editorState;let y=[],w=[];if(v.length===0){Na({variant:"destructive",description:"Please draw mask on picture"});return}const b=[...d,w];e(E=>{E.isInpainting=!0});const{targetMask:S,targetFile:_}=await XO(v[v.length-1],h,l);try{const E=await $A(hh(_),a,f,u,hh(S),o,n),{blob:C,seed:P}=E;P&&t().setSeed(parseInt(P,10));const N=new Image;await ru(N,C);const B=[...p,N];t().setImageSize(N.width,N.height),t().updateEditorState({renders:B,lineGroups:b,lastLineGroup:w,curLineGroup:[],extraMasks:[],prevExtraMasks:y})}catch(E){Na({variant:"destructive",description:E.message?E.message:E.toString()})}t().resetRedoState(),e(E=>{E.isInpainting=!1,E.editorState.temporaryMasks=[]})},runRenderablePlugin:async(n,r,i={upscale:1})=>{const{renders:o,lineGroups:h}=t().editorState;e(l=>{l.isPluginRunning=!0});try{const l=new Date,a=await t().getCurrentTargetFile(),f=await RA(n,r,a,t().serverConfig,i.upscale),{blob:u}=f;if(n){const d=new Image;await ru(d,u),e(p=>{p.editorState.extraMasks.push(d)})}else{const d=new Image;await ru(d,u),t().setImageSize(d.width,d.height);const p=[...o,d],g=[...h,[]];t().updateEditorState({renders:p,lineGroups:g})}const c=new Date().getTime()-l.getTime();Na({description:`Run ${r} successfully in ${c/1e3}s`})}catch(l){Na({variant:"destructive",description:l.message?l.message:l.toString()})}e(l=>{l.isPluginRunning=!1})},updateEditorState:n=>{e(r=>{r.editorState={...r.editorState,...n}})},cleanCurLineGroup:()=>{t().updateEditorState({curLineGroup:[]})},handleCanvasMouseDown:n=>{let r=[];const i=t();i.runMannually()&&(r=[...i.editorState.curLineGroup]),r.push({size:i.getBrushSize(),pts:[n]}),e(o=>{o.editorState.curLineGroup=r})},handleSaveState:n=>{let r=[];const i=t();i.runMannually()&&(r=[...i.editorState.currCanvasGroups]),r.push(n),e(o=>{o.editorState.currCanvasGroups=r})},handleCanvasMouseMove:n=>{e(r=>{const i=r.editorState.curLineGroup;i.length&&i[i.length-1].pts.push(n)})},runMannually:()=>{const n=t();return n.settings.enableManualInpainting||n.settings.model.model_type!==Ei},getIsProcessing:()=>t().isInpainting||t().isPluginRunning||t().isAdjustingMask,isSD:()=>t().settings.model.model_type!==Ei,undoDisabled:()=>{const n=t().editorState;if(n.renders.length>0)return!1;if(t().runMannually()){if(n.currCanvasGroups.length===0)return!0}else if(n.renders.length===0)return!0;return!1},undo:()=>{t().runMannually()&&t().editorState.currCanvasGroups.length!==0?e(n=>{const r=n.editorState;if(r.currCanvasGroups.length===0)return;r.lastCanvasGroups=[];const i=r.currCanvasGroups.pop();r.redoCurCanvas.push(i)}):e(n=>{const r=n.editorState;if(r.renders.length===0||r.lineGroups.length===0)return;const i=r.lineGroups.pop();r.redoLineGroups.push(i),r.redoCurLines=[],r.curLineGroup=[];const o=r.renders.pop();r.redoRenders.push(o)})},redoDisabled:()=>{const n=t().editorState;if(n.redoRenders.length>0)return!1;if(t().runMannually()){if(n.redoCurCanvas.length===0)return!0}else if(n.redoRenders.length===0)return!0;return!1},redo:()=>{t().runMannually()&&t().editorState.redoCurCanvas.length!==0?e(n=>{const r=n.editorState;if(r.redoCurCanvas.length===0)return;const i=r.redoCurCanvas.pop();r.currCanvasGroups.push(i)}):e(n=>{const r=n.editorState;if(r.redoRenders.length===0||r.redoLineGroups.length===0)return;const i=r.redoLineGroups.pop();r.lineGroups.push(i),r.curLineGroup=[];const o=r.redoRenders.pop();r.renders.push(o)})},resetRedoState:()=>{e(n=>{n.editorState.redoCurLines=[],n.editorState.redoLineGroups=[],n.editorState.redoRenders=[]})},updateAppState:n=>{e(()=>n)},getBrushSize:()=>t().editorState.baseBrushSize*t().editorState.brushSizeScale,showPromptInput:()=>{const n=t().settings.model;return n.model_type!==Ei&&n.name!==sS},setServerConfig:n=>{e(r=>{r.serverConfig=n,r.settings.enableControlnet=n.enableControlnet,r.settings.controlnetMethod=n.controlnetMethod})},updateServerConfig:n=>{e(r=>{r.serverConfig={...r.serverConfig,...n},console.log(r.serverConfig)})},updateSettings:n=>{e(r=>{r.settings={...r.settings,...n}})},setModel:n=>{e(r=>{r.settings.model=n,n.support_controlnet&&!n.controlnets.includes(r.settings.controlnetMethod)&&(r.settings.controlnetMethod=n.controlnets[0])})},updateFileManagerState:n=>{e(r=>{r.fileManagerState={...r.fileManagerState,...n}})},updateInteractiveSegState:n=>{e(r=>({...r,interactiveSegState:{...r.interactiveSegState,...n}}))},resetInteractiveSegState:()=>{t().updateInteractiveSegState(Qi.interactiveSegState)},handleInteractiveSegAccept:()=>{e(n=>{n.interactiveSegState.tmpInteractiveSegMask&&n.editorState.extraMasks.push(n.interactiveSegState.tmpInteractiveSegMask),n.interactiveSegState={...Qi.interactiveSegState}})},setIsInpainting:n=>e(r=>{r.isInpainting=n}),setFile:async n=>{e(r=>{r.file=n,r.interactiveSegState=Qi.interactiveSegState,r.editorState=Qi.editorState,r.cropperState=Qi.cropperState})},setCustomFile:n=>e(r=>{r.customMask=n}),setBaseBrushSize:n=>e(r=>{r.editorState.baseBrushSize=n}),decreaseBaseBrushSize:()=>{const n=t().editorState.baseBrushSize;let r=n;n>10&&(r=n-10),n<=10&&n>0&&(r=n-3),t().setBaseBrushSize(r)},increaseBaseBrushSize:()=>{const n=t().editorState.baseBrushSize,r=Math.min(n+10,oS);t().setBaseBrushSize(r)},setImageSize:(n,r)=>{e(i=>{i.imageWidth=n,i.imageHeight=r,i.editorState.brushSizeScale=Math.max(Math.min(n,r),512)/512}),t().resetExtender(n,r)},setCropperX:n=>e(r=>{r.cropperState.x=n}),setCropperY:n=>e(r=>{r.cropperState.y=n}),setCropperWidth:n=>e(r=>{r.cropperState.width=n}),setCropperHeight:n=>e(r=>{r.cropperState.height=n}),setExtenderX:n=>e(r=>{r.extenderState.x=n}),setExtenderY:n=>e(r=>{r.extenderState.y=n}),setExtenderWidth:n=>e(r=>{r.extenderState.width=n}),setExtenderHeight:n=>e(r=>{r.extenderState.height=n}),setIsCropperExtenderResizing:n=>e(r=>{r.isCropperExtenderResizing=n}),updateExtenderDirection:n=>{console.log(`updateExtenderDirection: ${JSON.stringify(t().extenderState)}`),e(r=>{r.settings.extenderDirection=n,r.extenderState.x=0,r.extenderState.y=0,r.extenderState.width=r.imageWidth,r.extenderState.height=r.imageHeight}),t().updateExtenderByBuiltIn(n,1.5)},updateExtenderByBuiltIn:(n,r)=>{const i={...Qi.extenderState};let{x:o,y:h,width:l,height:a}=i;const{imageWidth:f,imageHeight:u}=t();switch(l=f,a=u,n){case Ut.x:o=-Math.ceil(f*(r-1)/2),l=Math.ceil(f*r);break;case Ut.y:h=-Math.ceil(u*(r-1)/2),a=Math.ceil(u*r);break;case Ut.xy:o=-Math.ceil(f*(r-1)/2),h=-Math.ceil(u*(r-1)/2),l=Math.ceil(f*r),a=Math.ceil(u*r);break}e(s=>{s.extenderState.x=o,s.extenderState.y=h,s.extenderState.width=l,s.extenderState.height=a})},resetExtender:(n,r)=>{e(i=>{i.extenderState.x=0,i.extenderState.y=0,i.extenderState.width=n,i.extenderState.height=r})},setSeed:n=>e(r=>{r.settings.seed=n}),adjustMask:async n=>{const{imageWidth:r,imageHeight:i}=t(),{curLineGroup:o,extraMasks:h}=t().editorState,{adjustMaskKernelSize:l}=t().settings;if(o.length===0&&h.length===0)return;e(c=>{c.isAdjustingMask=!0});const a=hy(r,i,[o],h,zu),f=hh(a.toDataURL()),u=await MA(f,n,l),s=await jO(u);e(c=>{c.editorState.extraMasks=[s],c.editorState.curLineGroup=[]}),e(c=>{c.isAdjustingMask=!1})},clearMask:()=>{e(n=>{n.editorState.extraMasks=[],n.editorState.curLineGroup=[]})}})),{name:"ZUSTAND_STATE",version:1,partialize:e=>Object.fromEntries(Object.entries(e).filter(([t])=>["fileManagerState","settings"].includes(t)))}),O3),Hg=x.forwardRef(({className:e,type:t,...n},r)=>{const i=Xe(l=>l.updateAppState),o=()=>{i({disableShortCuts:!0})},h=()=>{i({disableShortCuts:!1})};return T.jsx("input",{type:t,className:we("flex h-8 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,autoComplete:"off",tabIndex:-1,onFocus:o,onBlur:h,...n})});Hg.displayName="Input";const Qt=x.forwardRef(({numberValue:e,allowFloat:t,onNumberValueChange:n,...r},i)=>{const[o,h]=x.useState(e.toString());x.useEffect(()=>{o!==e.toString()+"."&&h(e.toString())},[e]);const l=a=>{let u=a.target.value;if(t){if(u=u.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1"),u.length===0){n(0);return}n(parseFloat(u))}else{if(u=u.replace(/\D/g,""),u.length===0){n(0);return}n(parseInt(u,10))}h(u)};return T.jsx(Hg,{ref:i,value:o,onInput:l,...r})}),NA=wT.useId||(()=>{});let FA=0;function an(e){const[t,n]=x.useState(NA());return Ft(()=>{n(r=>r??String(FA++))},[e]),t?`radix-${t}`:""}const LA=["top","right","bottom","left"],Bi=Math.min,pn=Math.max,Wu=Math.round,Rc=Math.floor,zi=e=>({x:e,y:e}),IA={left:"right",right:"left",bottom:"top",top:"bottom"},jA={start:"end",end:"start"};function nm(e,t,n){return pn(e,Bi(t,n))}function qr(e,t){return typeof e=="function"?e(t):e}function Zr(e){return e.split("-")[0]}function ra(e){return e.split("-")[1]}function Wg(e){return e==="x"?"y":"x"}function Yg(e){return e==="y"?"height":"width"}function ia(e){return["top","bottom"].includes(Zr(e))?"y":"x"}function Xg(e){return Wg(ia(e))}function BA(e,t,n){n===void 0&&(n=!1);const r=ra(e),i=Xg(e),o=Yg(i);let h=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(h=Yu(h)),[h,Yu(h)]}function zA(e){const t=Yu(e);return[rm(e),t,rm(t)]}function rm(e){return e.replace(/start|end/g,t=>jA[t])}function UA(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],h=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:h;default:return[]}}function VA(e,t,n,r){const i=ra(e);let o=UA(Zr(e),n==="start",r);return i&&(o=o.map(h=>h+"-"+i),t&&(o=o.concat(o.map(rm)))),o}function Yu(e){return e.replace(/left|right|bottom|top/g,t=>IA[t])}function HA(e){return{top:0,right:0,bottom:0,left:0,...e}}function QS(e){return typeof e!="number"?HA(e):{top:e,right:e,bottom:e,left:e}}function Xu(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Fy(e,t,n){let{reference:r,floating:i}=e;const o=ia(t),h=Xg(t),l=Yg(h),a=Zr(t),f=o==="y",u=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,c=r[l]/2-i[l]/2;let d;switch(a){case"top":d={x:u,y:r.y-i.height};break;case"bottom":d={x:u,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:s};break;case"left":d={x:r.x-i.width,y:s};break;default:d={x:r.x,y:r.y}}switch(ra(t)){case"start":d[h]-=c*(n&&f?-1:1);break;case"end":d[h]+=c*(n&&f?-1:1);break}return d}const WA=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:h}=n,l=o.filter(Boolean),a=await(h.isRTL==null?void 0:h.isRTL(t));let f=await h.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:s}=Fy(f,r,a),c=r,d={},p=0;for(let g=0;g<l.length;g++){const{name:m,fn:v}=l[g],{x:y,y:w,data:b,reset:S}=await v({x:u,y:s,initialPlacement:r,placement:c,strategy:i,middlewareData:d,rects:f,platform:h,elements:{reference:e,floating:t}});u=y??u,s=w??s,d={...d,[m]:{...d[m],...b}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(c=S.placement),S.rects&&(f=S.rects===!0?await h.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:u,y:s}=Fy(f,c,a)),g=-1)}return{x:u,y:s,placement:c,strategy:i,middlewareData:d}};async function El(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:h,elements:l,strategy:a}=e,{boundary:f="clippingAncestors",rootBoundary:u="viewport",elementContext:s="floating",altBoundary:c=!1,padding:d=0}=qr(t,e),p=QS(d),m=l[c?s==="floating"?"reference":"floating":s],v=Xu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(m)))==null||n?m:m.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:f,rootBoundary:u,strategy:a})),y=s==="floating"?{x:r,y:i,width:h.floating.width,height:h.floating.height}:h.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),b=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Xu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:a}):y);return{top:(v.top-S.top+p.top)/b.y,bottom:(S.bottom-v.bottom+p.bottom)/b.y,left:(v.left-S.left+p.left)/b.x,right:(S.right-v.right+p.right)/b.x}}const YA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:h,elements:l,middlewareData:a}=t,{element:f,padding:u=0}=qr(e,t)||{};if(f==null)return{};const s=QS(u),c={x:n,y:r},d=Xg(i),p=Yg(d),g=await h.getDimensions(f),m=d==="y",v=m?"top":"left",y=m?"bottom":"right",w=m?"clientHeight":"clientWidth",b=o.reference[p]+o.reference[d]-c[d]-o.floating[p],S=c[d]-o.reference[d],_=await(h.getOffsetParent==null?void 0:h.getOffsetParent(f));let E=_?_[w]:0;(!E||!await(h.isElement==null?void 0:h.isElement(_)))&&(E=l.floating[w]||o.floating[p]);const C=b/2-S/2,P=E/2-g[p]/2-1,N=Bi(s[v],P),B=Bi(s[y],P),I=N,U=E-g[p]-B,D=E/2-g[p]/2+C,F=nm(I,D,U),O=!a.arrow&&ra(i)!=null&&D!==F&&o.reference[p]/2-(D<I?N:B)-g[p]/2<0,M=O?D<I?D-I:D-U:0;return{[d]:c[d]+M,data:{[d]:F,centerOffset:D-F-M,...O&&{alignmentOffset:M}},reset:O}}}),XA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:h,initialPlacement:l,platform:a,elements:f}=t,{mainAxis:u=!0,crossAxis:s=!0,fallbackPlacements:c,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=qr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Zr(i),y=Zr(l)===l,w=await(a.isRTL==null?void 0:a.isRTL(f.floating)),b=c||(y||!g?[Yu(l)]:zA(l));!c&&p!=="none"&&b.push(...VA(l,g,p,w));const S=[l,...b],_=await El(t,m),E=[];let C=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&E.push(_[v]),s){const I=BA(i,h,w);E.push(_[I[0]],_[I[1]])}if(C=[...C,{placement:i,overflows:E}],!E.every(I=>I<=0)){var P,N;const I=(((P=o.flip)==null?void 0:P.index)||0)+1,U=S[I];if(U)return{data:{index:I,overflows:C},reset:{placement:U}};let D=(N=C.filter(F=>F.overflows[0]<=0).sort((F,O)=>F.overflows[1]-O.overflows[1])[0])==null?void 0:N.placement;if(!D)switch(d){case"bestFit":{var B;const F=(B=C.map(O=>[O.placement,O.overflows.filter(M=>M>0).reduce((M,V)=>M+V,0)]).sort((O,M)=>O[1]-M[1])[0])==null?void 0:B[0];F&&(D=F);break}case"initialPlacement":D=l;break}if(i!==D)return{reset:{placement:D}}}return{}}}};function Ly(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Iy(e){return LA.some(t=>e[t]>=0)}const GA=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=qr(e,t);switch(r){case"referenceHidden":{const o=await El(t,{...i,elementContext:"reference"}),h=Ly(o,n.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:Iy(h)}}}case"escaped":{const o=await El(t,{...i,altBoundary:!0}),h=Ly(o,n.floating);return{data:{escapedOffsets:h,escaped:Iy(h)}}}default:return{}}}}};async function KA(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),h=Zr(n),l=ra(n),a=ia(n)==="y",f=["left","top"].includes(h)?-1:1,u=o&&a?-1:1,s=qr(t,e);let{mainAxis:c,crossAxis:d,alignmentAxis:p}=typeof s=="number"?{mainAxis:s,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...s};return l&&typeof p=="number"&&(d=l==="end"?p*-1:p),a?{x:d*u,y:c*f}:{x:c*f,y:d*u}}const qA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:h,middlewareData:l}=t,a=await KA(t,e);return h===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+a.x,y:o+a.y,data:{...a,placement:h}}}}},ZA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:h=!1,limiter:l={fn:m=>{let{x:v,y}=m;return{x:v,y}}},...a}=qr(e,t),f={x:n,y:r},u=await El(t,a),s=ia(Zr(i)),c=Wg(s);let d=f[c],p=f[s];if(o){const m=c==="y"?"top":"left",v=c==="y"?"bottom":"right",y=d+u[m],w=d-u[v];d=nm(y,d,w)}if(h){const m=s==="y"?"top":"left",v=s==="y"?"bottom":"right",y=p+u[m],w=p-u[v];p=nm(y,p,w)}const g=l.fn({...t,[c]:d,[s]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},QA=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:h}=t,{offset:l=0,mainAxis:a=!0,crossAxis:f=!0}=qr(e,t),u={x:n,y:r},s=ia(i),c=Wg(s);let d=u[c],p=u[s];const g=qr(l,t),m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(a){const w=c==="y"?"height":"width",b=o.reference[c]-o.floating[w]+m.mainAxis,S=o.reference[c]+o.reference[w]-m.mainAxis;d<b?d=b:d>S&&(d=S)}if(f){var v,y;const w=c==="y"?"width":"height",b=["top","left"].includes(Zr(i)),S=o.reference[s]-o.floating[w]+(b&&((v=h.offset)==null?void 0:v[s])||0)+(b?0:m.crossAxis),_=o.reference[s]+o.reference[w]+(b?0:((y=h.offset)==null?void 0:y[s])||0)-(b?m.crossAxis:0);p<S?p=S:p>_&&(p=_)}return{[c]:d,[s]:p}}}},JA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:h=()=>{},...l}=qr(e,t),a=await El(t,l),f=Zr(n),u=ra(n),s=ia(n)==="y",{width:c,height:d}=r.floating;let p,g;f==="top"||f==="bottom"?(p=f,g=u===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(g=f,p=u==="end"?"top":"bottom");const m=d-a[p],v=c-a[g],y=!t.middlewareData.shift;let w=m,b=v;if(s){const _=c-a.left-a.right;b=u||y?Bi(v,_):_}else{const _=d-a.top-a.bottom;w=u||y?Bi(m,_):_}if(y&&!u){const _=pn(a.left,0),E=pn(a.right,0),C=pn(a.top,0),P=pn(a.bottom,0);s?b=c-2*(_!==0||E!==0?_+E:pn(a.left,a.right)):w=d-2*(C!==0||P!==0?C+P:pn(a.top,a.bottom))}await h({...t,availableWidth:b,availableHeight:w});const S=await i.getDimensions(o.floating);return c!==S.width||d!==S.height?{reset:{rects:!0}}:{}}}};function oa(e){return JS(e)?(e.nodeName||"").toLowerCase():"#document"}function vn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ti(e){var t;return(t=(JS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function JS(e){return e instanceof Node||e instanceof vn(e).Node}function _r(e){return e instanceof Element||e instanceof vn(e).Element}function Cr(e){return e instanceof HTMLElement||e instanceof vn(e).HTMLElement}function jy(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vn(e).ShadowRoot}function Kl(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=tr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function eR(e){return["table","td","th"].includes(oa(e))}function Gg(e){const t=Kg(),n=tr(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tR(e){let t=Ui(e);for(;Cr(t)&&!Us(t);){if(Gg(t))return t;t=Ui(t)}return null}function Kg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Us(e){return["html","body","#document"].includes(oa(e))}function tr(e){return vn(e).getComputedStyle(e)}function od(e){return _r(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ui(e){if(oa(e)==="html")return e;const t=e.assignedSlot||e.parentNode||jy(e)&&e.host||ti(e);return jy(t)?t.host:t}function e_(e){const t=Ui(e);return Us(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cr(t)&&Kl(t)?t:e_(t)}function Tl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=e_(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),h=vn(i);return o?t.concat(h,h.visualViewport||[],Kl(i)?i:[],h.frameElement&&n?Tl(h.frameElement):[]):t.concat(i,Tl(i,[],n))}function t_(e){const t=tr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Cr(e),o=i?e.offsetWidth:n,h=i?e.offsetHeight:r,l=Wu(n)!==o||Wu(r)!==h;return l&&(n=o,r=h),{width:n,height:r,$:l}}function qg(e){return _r(e)?e:e.contextElement}function ws(e){const t=qg(e);if(!Cr(t))return zi(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=t_(t);let h=(o?Wu(n.width):n.width)/r,l=(o?Wu(n.height):n.height)/i;return(!h||!Number.isFinite(h))&&(h=1),(!l||!Number.isFinite(l))&&(l=1),{x:h,y:l}}const nR=zi(0);function n_(e){const t=vn(e);return!Kg()||!t.visualViewport?nR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rR(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==vn(e)?!1:t}function Oo(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=qg(e);let h=zi(1);t&&(r?_r(r)&&(h=ws(r)):h=ws(e));const l=rR(o,n,r)?n_(o):zi(0);let a=(i.left+l.x)/h.x,f=(i.top+l.y)/h.y,u=i.width/h.x,s=i.height/h.y;if(o){const c=vn(o),d=r&&_r(r)?vn(r):r;let p=c,g=p.frameElement;for(;g&&r&&d!==p;){const m=ws(g),v=g.getBoundingClientRect(),y=tr(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*m.x,b=v.top+(g.clientTop+parseFloat(y.paddingTop))*m.y;a*=m.x,f*=m.y,u*=m.x,s*=m.y,a+=w,f+=b,p=vn(g),g=p.frameElement}}return Xu({width:u,height:s,x:a,y:f})}const iR=[":popover-open",":modal"];function Zg(e){return iR.some(t=>{try{return e.matches(t)}catch{return!1}})}function oR(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",h=ti(r),l=t?Zg(t.floating):!1;if(r===h||l&&o)return n;let a={scrollLeft:0,scrollTop:0},f=zi(1);const u=zi(0),s=Cr(r);if((s||!s&&!o)&&((oa(r)!=="body"||Kl(h))&&(a=od(r)),Cr(r))){const c=Oo(r);f=ws(r),u.x=c.x+r.clientLeft,u.y=c.y+r.clientTop}return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-a.scrollLeft*f.x+u.x,y:n.y*f.y-a.scrollTop*f.y+u.y}}function sR(e){return Array.from(e.getClientRects())}function r_(e){return Oo(ti(e)).left+od(e).scrollLeft}function aR(e){const t=ti(e),n=od(e),r=e.ownerDocument.body,i=pn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=pn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let h=-n.scrollLeft+r_(e);const l=-n.scrollTop;return tr(r).direction==="rtl"&&(h+=pn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:h,y:l}}function lR(e,t){const n=vn(e),r=ti(e),i=n.visualViewport;let o=r.clientWidth,h=r.clientHeight,l=0,a=0;if(i){o=i.width,h=i.height;const f=Kg();(!f||f&&t==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:o,height:h,x:l,y:a}}function cR(e,t){const n=Oo(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Cr(e)?ws(e):zi(1),h=e.clientWidth*o.x,l=e.clientHeight*o.y,a=i*o.x,f=r*o.y;return{width:h,height:l,x:a,y:f}}function By(e,t,n){let r;if(t==="viewport")r=lR(e,n);else if(t==="document")r=aR(ti(e));else if(_r(t))r=cR(t,n);else{const i=n_(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Xu(r)}function i_(e,t){const n=Ui(e);return n===t||!_r(n)||Us(n)?!1:tr(n).position==="fixed"||i_(n,t)}function uR(e,t){const n=t.get(e);if(n)return n;let r=Tl(e,[],!1).filter(l=>_r(l)&&oa(l)!=="body"),i=null;const o=tr(e).position==="fixed";let h=o?Ui(e):e;for(;_r(h)&&!Us(h);){const l=tr(h),a=Gg(h);!a&&l.position==="fixed"&&(i=null),(o?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Kl(h)&&!a&&i_(e,h))?r=r.filter(u=>u!==h):i=l,h=Ui(h)}return t.set(e,r),r}function fR(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const h=[...n==="clippingAncestors"?Zg(t)?[]:uR(t,this._c):[].concat(n),r],l=h[0],a=h.reduce((f,u)=>{const s=By(t,u,i);return f.top=pn(s.top,f.top),f.right=Bi(s.right,f.right),f.bottom=Bi(s.bottom,f.bottom),f.left=pn(s.left,f.left),f},By(t,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function dR(e){const{width:t,height:n}=t_(e);return{width:t,height:n}}function hR(e,t,n){const r=Cr(t),i=ti(t),o=n==="fixed",h=Oo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const a=zi(0);if(r||!r&&!o)if((oa(t)!=="body"||Kl(i))&&(l=od(t)),r){const s=Oo(t,!0,o,t);a.x=s.x+t.clientLeft,a.y=s.y+t.clientTop}else i&&(a.x=r_(i));const f=h.left+l.scrollLeft-a.x,u=h.top+l.scrollTop-a.y;return{x:f,y:u,width:h.width,height:h.height}}function _h(e){return tr(e).position==="static"}function zy(e,t){return!Cr(e)||tr(e).position==="fixed"?null:t?t(e):e.offsetParent}function o_(e,t){const n=vn(e);if(Zg(e))return n;if(!Cr(e)){let i=Ui(e);for(;i&&!Us(i);){if(_r(i)&&!_h(i))return i;i=Ui(i)}return n}let r=zy(e,t);for(;r&&eR(r)&&_h(r);)r=zy(r,t);return r&&Us(r)&&_h(r)&&!Gg(r)?n:r||tR(e)||n}const pR=async function(e){const t=this.getOffsetParent||o_,n=this.getDimensions,r=await n(e.floating);return{reference:hR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mR(e){return tr(e).direction==="rtl"}const gR={convertOffsetParentRelativeRectToViewportRelativeRect:oR,getDocumentElement:ti,getClippingRect:fR,getOffsetParent:o_,getElementRects:pR,getClientRects:sR,getDimensions:dR,getScale:ws,isElement:_r,isRTL:mR};function vR(e,t){let n=null,r;const i=ti(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function h(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),o();const{left:f,top:u,width:s,height:c}=e.getBoundingClientRect();if(l||t(),!s||!c)return;const d=Rc(u),p=Rc(i.clientWidth-(f+s)),g=Rc(i.clientHeight-(u+c)),m=Rc(f),y={rootMargin:-d+"px "+-p+"px "+-g+"px "+-m+"px",threshold:pn(0,Bi(1,a))||1};let w=!0;function b(S){const _=S[0].intersectionRatio;if(_!==a){if(!w)return h();_?h(!1,_):r=setTimeout(()=>{h(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(e)}return h(!0),o}function yR(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,f=qg(e),u=i||o?[...f?Tl(f):[],...Tl(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const s=f&&l?vR(f,n):null;let c=-1,d=null;h&&(d=new ResizeObserver(v=>{let[y]=v;y&&y.target===f&&d&&(d.unobserve(t),cancelAnimationFrame(c),c=requestAnimationFrame(()=>{var w;(w=d)==null||w.observe(t)})),n()}),f&&!a&&d.observe(f),d.observe(t));let p,g=a?Oo(e):null;a&&m();function m(){const v=Oo(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,p=requestAnimationFrame(m)}return n(),()=>{var v;u.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),s==null||s(),(v=d)==null||v.disconnect(),d=null,a&&cancelAnimationFrame(p)}}const wR=qA,bR=ZA,xR=XA,SR=JA,_R=GA,Uy=YA,CR=QA,ER=(e,t,n)=>{const r=new Map,i={platform:gR,...n},o={...i.platform,_c:r};return WA(e,t,{...i,platform:o})},TR=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Uy({element:r.current,padding:i}).fn(n):{}:r?Uy({element:r,padding:i}).fn(n):{}}}};var lu=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Gu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Gu(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Gu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function s_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Vy(e,t){const n=s_(e);return Math.round(t*n)/n}function Hy(e){const t=x.useRef(e);return lu(()=>{t.current=e}),t}function kR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:h}={},transform:l=!0,whileElementsMounted:a,open:f}=e,[u,s]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[c,d]=x.useState(r);Gu(c,r)||d(r);const[p,g]=x.useState(null),[m,v]=x.useState(null),y=x.useCallback(M=>{M!==_.current&&(_.current=M,g(M))},[]),w=x.useCallback(M=>{M!==E.current&&(E.current=M,v(M))},[]),b=o||p,S=h||m,_=x.useRef(null),E=x.useRef(null),C=x.useRef(u),P=a!=null,N=Hy(a),B=Hy(i),I=x.useCallback(()=>{if(!_.current||!E.current)return;const M={placement:t,strategy:n,middleware:c};B.current&&(M.platform=B.current),ER(_.current,E.current,M).then(V=>{const k={...V,isPositioned:!0};U.current&&!Gu(C.current,k)&&(C.current=k,Xi.flushSync(()=>{s(k)}))})},[c,t,n,B]);lu(()=>{f===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,s(M=>({...M,isPositioned:!1})))},[f]);const U=x.useRef(!1);lu(()=>(U.current=!0,()=>{U.current=!1}),[]),lu(()=>{if(b&&(_.current=b),S&&(E.current=S),b&&S){if(N.current)return N.current(b,S,I);I()}},[b,S,I,N,P]);const D=x.useMemo(()=>({reference:_,floating:E,setReference:y,setFloating:w}),[y,w]),F=x.useMemo(()=>({reference:b,floating:S}),[b,S]),O=x.useMemo(()=>{const M={position:n,left:0,top:0};if(!F.floating)return M;const V=Vy(F.floating,u.x),k=Vy(F.floating,u.y);return l?{...M,transform:"translate("+V+"px, "+k+"px)",...s_(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:k}},[n,l,F.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:I,refs:D,elements:F,floatingStyles:O}),[u,I,D,F,O])}function Qg(e){const[t,n]=x.useState(void 0);return Ft(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let h,l;if("borderBoxSize"in o){const a=o.borderBoxSize,f=Array.isArray(a)?a[0]:a;h=f.inlineSize,l=f.blockSize}else h=e.offsetWidth,l=e.offsetHeight;n({width:h,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const a_="Popper",[l_,Gi]=qt(a_),[PR,c_]=l_(a_),OR=e=>{const{__scopePopper:t,children:n}=e,[r,i]=x.useState(null);return x.createElement(PR,{scope:t,anchor:r,onAnchorChange:i},n)},$R="PopperAnchor",AR=x.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=c_($R,n),h=x.useRef(null),l=Oe(t,h);return x.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||h.current)}),r?null:x.createElement(Se.div,ae({},i,{ref:l}))}),u_="PopperContent",[RR,F7]=l_(u_),MR=x.forwardRef((e,t)=>{var n,r,i,o,h,l,a,f;const{__scopePopper:u,side:s="bottom",sideOffset:c=0,align:d="center",alignOffset:p=0,arrowPadding:g=0,avoidCollisions:m=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:w="partial",hideWhenDetached:b=!1,updatePositionStrategy:S="optimized",onPlaced:_,...E}=e,C=c_(u_,u),[P,N]=x.useState(null),B=Oe(t,ie=>N(ie)),[I,U]=x.useState(null),D=Qg(I),F=(n=D==null?void 0:D.width)!==null&&n!==void 0?n:0,O=(r=D==null?void 0:D.height)!==null&&r!==void 0?r:0,M=s+(d!=="center"?"-"+d:""),V=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},k=Array.isArray(v)?v:[v],R=k.length>0,j={padding:V,boundary:k.filter(DR),altBoundary:R},{refs:A,floatingStyles:W,placement:L,isPositioned:$,middlewareData:H}=kR({strategy:"fixed",placement:M,whileElementsMounted:(...ie)=>yR(...ie,{animationFrame:S==="always"}),elements:{reference:C.anchor},middleware:[wR({mainAxis:c+O,alignmentAxis:p}),m&&bR({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?CR():void 0,...j}),m&&xR({...j}),SR({...j,apply:({elements:ie,rects:ce,availableWidth:ne,availableHeight:z})=>{const{width:X,height:J}=ce.reference,oe=ie.floating.style;oe.setProperty("--radix-popper-available-width",`${ne}px`),oe.setProperty("--radix-popper-available-height",`${z}px`),oe.setProperty("--radix-popper-anchor-width",`${X}px`),oe.setProperty("--radix-popper-anchor-height",`${J}px`)}}),I&&TR({element:I,padding:g}),NR({arrowWidth:F,arrowHeight:O}),b&&_R({strategy:"referenceHidden",...j})]}),[Y,K]=f_(L),G=rt(_);Ft(()=>{$&&(G==null||G())},[$,G]);const Q=(i=H.arrow)===null||i===void 0?void 0:i.x,ee=(o=H.arrow)===null||o===void 0?void 0:o.y,le=((h=H.arrow)===null||h===void 0?void 0:h.centerOffset)!==0,[te,Z]=x.useState();return Ft(()=>{P&&Z(window.getComputedStyle(P).zIndex)},[P]),x.createElement("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:$?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(l=H.transformOrigin)===null||l===void 0?void 0:l.x,(a=H.transformOrigin)===null||a===void 0?void 0:a.y].join(" ")},dir:e.dir},x.createElement(RR,{scope:u,placedSide:Y,onArrowChange:U,arrowX:Q,arrowY:ee,shouldHideArrow:le},x.createElement(Se.div,ae({"data-side":Y,"data-align":K},E,{ref:B,style:{...E.style,animation:$?void 0:"none",opacity:(f=H.hide)!==null&&f!==void 0&&f.referenceHidden?0:void 0}}))))});function DR(e){return e!==null}const NR=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,o,h;const{placement:l,rects:a,middlewareData:f}=t,s=((n=f.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,c=s?0:e.arrowWidth,d=s?0:e.arrowHeight,[p,g]=f_(l),m={start:"0%",center:"50%",end:"100%"}[g],v=((r=(i=f.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+c/2,y=((o=(h=f.arrow)===null||h===void 0?void 0:h.y)!==null&&o!==void 0?o:0)+d/2;let w="",b="";return p==="bottom"?(w=s?m:`${v}px`,b=`${-d}px`):p==="top"?(w=s?m:`${v}px`,b=`${a.floating.height+d}px`):p==="right"?(w=`${-d}px`,b=s?m:`${y}px`):p==="left"&&(w=`${a.floating.width+d}px`,b=s?m:`${y}px`),{data:{x:w,y:b}}}});function f_(e){const[t,n="center"]=e.split("-");return[t,n]}const ql=OR,sd=AR,ad=MR,[ld,L7]=qt("Tooltip",[Gi]),Jg=Gi(),FR="TooltipProvider",LR=700,im="tooltip.open",[IR,ev]=ld(FR),jR=e=>{const{__scopeTooltip:t,delayDuration:n=LR,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=e,[h,l]=x.useState(!0),a=x.useRef(!1),f=x.useRef(0);return x.useEffect(()=>{const u=f.current;return()=>window.clearTimeout(u)},[]),x.createElement(IR,{scope:t,isOpenDelayed:h,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(f.current),l(!1)},[]),onClose:x.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:x.useCallback(u=>{a.current=u},[]),disableHoverableContent:i},o)},tv="Tooltip",[BR,cd]=ld(tv),zR=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:h,delayDuration:l}=e,a=ev(tv,e.__scopeTooltip),f=Jg(t),[u,s]=x.useState(null),c=an(),d=x.useRef(0),p=h??a.disableHoverableContent,g=l??a.delayDuration,m=x.useRef(!1),[v=!1,y]=Fn({prop:r,defaultProp:i,onChange:E=>{E?(a.onOpen(),document.dispatchEvent(new CustomEvent(im))):a.onClose(),o==null||o(E)}}),w=x.useMemo(()=>v?m.current?"delayed-open":"instant-open":"closed",[v]),b=x.useCallback(()=>{window.clearTimeout(d.current),m.current=!1,y(!0)},[y]),S=x.useCallback(()=>{window.clearTimeout(d.current),y(!1)},[y]),_=x.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{m.current=!0,y(!0)},g)},[g,y]);return x.useEffect(()=>()=>window.clearTimeout(d.current),[]),x.createElement(ql,f,x.createElement(BR,{scope:t,contentId:c,open:v,stateAttribute:w,trigger:u,onTriggerChange:s,onTriggerEnter:x.useCallback(()=>{a.isOpenDelayed?_():b()},[a.isOpenDelayed,_,b]),onTriggerLeave:x.useCallback(()=>{p?S():window.clearTimeout(d.current)},[S,p]),onOpen:b,onClose:S,disableHoverableContent:p},n))},Wy="TooltipTrigger",UR=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=cd(Wy,n),o=ev(Wy,n),h=Jg(n),l=x.useRef(null),a=Oe(t,l,i.onTriggerChange),f=x.useRef(!1),u=x.useRef(!1),s=x.useCallback(()=>f.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",s),[s]),x.createElement(sd,ae({asChild:!0},h),x.createElement(Se.button,ae({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:a,onPointerMove:pe(e.onPointerMove,c=>{c.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:pe(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:pe(e.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",s,{once:!0})}),onFocus:pe(e.onFocus,()=>{f.current||i.onOpen()}),onBlur:pe(e.onBlur,i.onClose),onClick:pe(e.onClick,i.onClose)})))}),VR="TooltipPortal",[I7,HR]=ld(VR,{forceMount:void 0}),kl="TooltipContent",WR=x.forwardRef((e,t)=>{const n=HR(kl,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=e,h=cd(kl,e.__scopeTooltip);return x.createElement(kt,{present:r||h.open},h.disableHoverableContent?x.createElement(d_,ae({side:i},o,{ref:t})):x.createElement(YR,ae({side:i},o,{ref:t})))}),YR=x.forwardRef((e,t)=>{const n=cd(kl,e.__scopeTooltip),r=ev(kl,e.__scopeTooltip),i=x.useRef(null),o=Oe(t,i),[h,l]=x.useState(null),{trigger:a,onClose:f}=n,u=i.current,{onPointerInTransitChange:s}=r,c=x.useCallback(()=>{l(null),s(!1)},[s]),d=x.useCallback((p,g)=>{const m=p.currentTarget,v={x:p.clientX,y:p.clientY},y=GR(v,m.getBoundingClientRect()),w=KR(v,y),b=qR(g.getBoundingClientRect()),S=QR([...w,...b]);l(S),s(!0)},[s]);return x.useEffect(()=>()=>c(),[c]),x.useEffect(()=>{if(a&&u){const p=m=>d(m,u),g=m=>d(m,a);return a.addEventListener("pointerleave",p),u.addEventListener("pointerleave",g),()=>{a.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",g)}}},[a,u,d,c]),x.useEffect(()=>{if(h){const p=g=>{const m=g.target,v={x:g.clientX,y:g.clientY},y=(a==null?void 0:a.contains(m))||(u==null?void 0:u.contains(m)),w=!ZR(v,h);y?c():w&&(c(),f())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[a,u,h,f,c]),x.createElement(d_,ae({},e,{ref:o}))}),[XR,j7]=ld(tv,{isInside:!1}),d_=x.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:h,...l}=e,a=cd(kl,n),f=Jg(n),{onClose:u}=a;return x.useEffect(()=>(document.addEventListener(im,u),()=>document.removeEventListener(im,u)),[u]),x.useEffect(()=>{if(a.trigger){const s=c=>{const d=c.target;d!=null&&d.contains(a.trigger)&&u()};return window.addEventListener("scroll",s,{capture:!0}),()=>window.removeEventListener("scroll",s,{capture:!0})}},[a.trigger,u]),x.createElement(ea,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:h,onFocusOutside:s=>s.preventDefault(),onDismiss:u},x.createElement(ad,ae({"data-state":a.stateAttribute},f,l,{ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),x.createElement($g,null,r),x.createElement(XR,{scope:n,isInside:!0},x.createElement(O5,{id:a.contentId,role:"tooltip"},i||r))))});function GR(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function KR(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function qR(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function ZR(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,h=t.length-1;o<t.length;h=o++){const l=t[o].x,a=t[o].y,f=t[h].x,u=t[h].y;a>r!=u>r&&n<(f-l)*(r-a)/(u-a)+l&&(i=!i)}return i}function QR(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),JR(t)}function JR(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const o=t[t.length-1],h=t[t.length-2];if((o.x-h.x)*(i.y-h.y)>=(o.y-h.y)*(i.x-h.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const o=n[n.length-1],h=n[n.length-2];if((o.x-h.x)*(i.y-h.y)>=(o.y-h.y)*(i.x-h.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}const eM=jR,tM=zR,nM=UR,h_=WR,rM=eM,p_=tM,m_=nM,nv=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>T.jsx(h_,{ref:r,sideOffset:t,className:we("z-50 border overflow-hidden rounded-md bg-background text-foreground px-3 py-1.5 text-xs animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));nv.displayName=h_.displayName;const rv=Gf("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Wt=x.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const h=r?Sr:"button";return T.jsx(h,{className:we(rv({variant:t,size:n,className:e}),"outline-none cursor-default select-none"),ref:o,tabIndex:-1,...i})});Wt.displayName="Button";const Lr=x.forwardRef(({tooltip:e,children:t,...n},r)=>T.jsxs(p_,{children:[T.jsx(m_,{asChild:!0,children:T.jsx(Wt,{variant:"ghost",size:"icon",...n,ref:r,tabIndex:-1,className:"cursor-default bg-background",children:T.jsx("div",{className:"icon-button-icon-wrapper",children:t})})}),T.jsx(nv,{children:T.jsx("p",{children:e})})]})),g_=e=>{const{onFileUpload:t,children:n,...r}=e,[i]=x.useState(`file-upload-${Math.random().toString()}`),o=h=>{var a;const l=(a=h.currentTarget.files)==null?void 0:a[0];l&&t(l)};return T.jsxs(T.Fragment,{children:[T.jsx("label",{htmlFor:i,children:T.jsx(Lr,{...r,asChild:!0,children:n})}),T.jsx(Hg,{style:{display:"none"},id:i,name:i,type:"file",onChange:o,accept:"image/png, image/jpeg"})]})};function v_(e){const[t,n]=x.useState(()=>e),r=x.useCallback(i=>n(typeof i=="boolean"?i:o=>!o),[]);return[t,r]}const Ch="focusScope.autoFocusOnMount",Eh="focusScope.autoFocusOnUnmount",Yy={bubbles:!1,cancelable:!0},ud=x.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...h}=e,[l,a]=x.useState(null),f=rt(i),u=rt(o),s=x.useRef(null),c=Oe(t,g=>a(g)),d=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let y=function(_){if(d.paused||!l)return;const E=_.target;l.contains(E)?s.current=E:hi(s.current,{select:!0})},w=function(_){if(d.paused||!l)return;const E=_.relatedTarget;E!==null&&(l.contains(E)||hi(s.current,{select:!0}))},b=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&hi(l)};var g=y,m=w,v=b;document.addEventListener("focusin",y),document.addEventListener("focusout",w);const S=new MutationObserver(b);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),S.disconnect()}}},[r,l,d.paused]),x.useEffect(()=>{if(l){Gy.add(d);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(Ch,Yy);l.addEventListener(Ch,f),l.dispatchEvent(v),v.defaultPrevented||(iM(cM(y_(l)),{select:!0}),document.activeElement===g&&hi(l))}return()=>{l.removeEventListener(Ch,f),setTimeout(()=>{const v=new CustomEvent(Eh,Yy);l.addEventListener(Eh,u),l.dispatchEvent(v),v.defaultPrevented||hi(g??document.body,{select:!0}),l.removeEventListener(Eh,u),Gy.remove(d)},0)}}},[l,f,u,d]);const p=x.useCallback(g=>{if(!n&&!r||d.paused)return;const m=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(m&&v){const y=g.currentTarget,[w,b]=oM(y);w&&b?!g.shiftKey&&v===b?(g.preventDefault(),n&&hi(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&hi(b,{select:!0})):v===y&&g.preventDefault()}},[n,r,d.paused]);return x.createElement(Se.div,ae({tabIndex:-1},h,{ref:c,onKeyDown:p}))});function iM(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(hi(r,{select:t}),document.activeElement!==n)return}function oM(e){const t=y_(e),n=Xy(t,e),r=Xy(t.reverse(),e);return[n,r]}function y_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Xy(e,t){for(const n of e)if(!sM(n,{upTo:t}))return n}function sM(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function aM(e){return e instanceof HTMLInputElement&&"select"in e}function hi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&aM(e)&&t&&e.select()}}const Gy=lM();function lM(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Ky(e,t),e.unshift(t)},remove(t){var n;e=Ky(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function Ky(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function cM(e){return e.filter(t=>t.tagName!=="A")}let Th=0;function fd(){x.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:qy()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:qy()),Th++,()=>{Th===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Th--}},[])}function qy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var fr=function(){return fr=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},fr.apply(this,arguments)};function w_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function uM(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var cu="right-scroll-bar-position",uu="width-before-scroll-bar",fM="with-scroll-bars-hidden",dM="--removed-body-scroll-bar-size";function kh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function hM(e,t){var n=x.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var pM=typeof window<"u"?x.useLayoutEffect:x.useEffect,Zy=new WeakMap;function mM(e,t){var n=hM(null,function(r){return e.forEach(function(i){return kh(i,r)})});return pM(function(){var r=Zy.get(n);if(r){var i=new Set(r),o=new Set(e),h=n.current;i.forEach(function(l){o.has(l)||kh(l,null)}),o.forEach(function(l){i.has(l)||kh(l,h)})}Zy.set(n,e)},[e]),n}function gM(e){return e}function vM(e,t){t===void 0&&(t=gM);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var h=t(o,r);return n.push(h),function(){n=n.filter(function(l){return l!==h})}},assignSyncMedium:function(o){for(r=!0;n.length;){var h=n;n=[],h.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var h=[];if(n.length){var l=n;n=[],l.forEach(o),h=n}var a=function(){var u=h;h=[],u.forEach(o)},f=function(){return Promise.resolve().then(a)};f(),n={push:function(u){h.push(u),f()},filter:function(u){return h=h.filter(u),n}}}};return i}function yM(e){e===void 0&&(e={});var t=vM(null);return t.options=fr({async:!0,ssr:!1},e),t}var b_=function(e){var t=e.sideCar,n=w_(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,fr({},n))};b_.isSideCarExport=!0;function wM(e,t){return e.useMedium(t),b_}var x_=yM(),Ph=function(){},dd=x.forwardRef(function(e,t){var n=x.useRef(null),r=x.useState({onScrollCapture:Ph,onWheelCapture:Ph,onTouchMoveCapture:Ph}),i=r[0],o=r[1],h=e.forwardProps,l=e.children,a=e.className,f=e.removeScrollBar,u=e.enabled,s=e.shards,c=e.sideCar,d=e.noIsolation,p=e.inert,g=e.allowPinchZoom,m=e.as,v=m===void 0?"div":m,y=w_(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=c,b=mM([n,t]),S=fr(fr({},y),i);return x.createElement(x.Fragment,null,u&&x.createElement(w,{sideCar:x_,removeScrollBar:f,shards:s,noIsolation:d,inert:p,setCallbacks:o,allowPinchZoom:!!g,lockRef:n}),h?x.cloneElement(x.Children.only(l),fr(fr({},S),{ref:b})):x.createElement(v,fr({},S,{className:a,ref:b}),l))});dd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dd.classNames={fullWidth:uu,zeroRight:cu};var bM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xM(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=bM();return t&&e.setAttribute("nonce",t),e}function SM(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function _M(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var CM=function(){var e=0,t=null;return{add:function(n){e==0&&(t=xM())&&(SM(t,n),_M(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},EM=function(){var e=CM();return function(t,n){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},S_=function(){var e=EM(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},TM={left:0,top:0,right:0,gap:0},Oh=function(e){return parseInt(e||"",10)||0},kM=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Oh(n),Oh(r),Oh(i)]},PM=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return TM;var t=kM(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},OM=S_(),bs="data-scroll-locked",$M=function(e,t,n,r){var i=e.left,o=e.top,h=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(fM,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(bs,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(uu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(cu," .").concat(cu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(uu," .").concat(uu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bs,`] {
    `).concat(dM,": ").concat(l,`px;
  }
`)},Qy=function(){var e=parseInt(document.body.getAttribute(bs)||"0",10);return isFinite(e)?e:0},AM=function(){x.useEffect(function(){return document.body.setAttribute(bs,(Qy()+1).toString()),function(){var e=Qy()-1;e<=0?document.body.removeAttribute(bs):document.body.setAttribute(bs,e.toString())}},[])},RM=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;AM();var o=x.useMemo(function(){return PM(i)},[i]);return x.createElement(OM,{styles:$M(o,!t,i,n?"":"!important")})},om=!1;if(typeof window<"u")try{var Mc=Object.defineProperty({},"passive",{get:function(){return om=!0,!0}});window.addEventListener("test",Mc,Mc),window.removeEventListener("test",Mc,Mc)}catch{om=!1}var zo=om?{passive:!1}:!1,MM=function(e){return e.tagName==="TEXTAREA"},__=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!MM(e)&&n[t]==="visible")},DM=function(e){return __(e,"overflowY")},NM=function(e){return __(e,"overflowX")},Jy=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=C_(e,n);if(r){var i=E_(e,n),o=i[1],h=i[2];if(o>h)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},FM=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},LM=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},C_=function(e,t){return e==="v"?DM(t):NM(t)},E_=function(e,t){return e==="v"?FM(t):LM(t)},IM=function(e,t){return e==="h"&&t==="rtl"?-1:1},jM=function(e,t,n,r,i){var o=IM(e,window.getComputedStyle(t).direction),h=o*r,l=n.target,a=t.contains(l),f=!1,u=h>0,s=0,c=0;do{var d=E_(e,l),p=d[0],g=d[1],m=d[2],v=g-m-o*p;(p||v)&&C_(e,l)&&(s+=v,c+=p),l=l.parentNode}while(!a&&l!==document.body||a&&(t.contains(l)||t===l));return(u&&(s===0||!i)||!u&&(c===0||!i))&&(f=!0),f},Dc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},e1=function(e){return[e.deltaX,e.deltaY]},t1=function(e){return e&&"current"in e?e.current:e},BM=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zM=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},UM=0,Uo=[];function VM(e){var t=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(UM++)[0],o=x.useState(function(){return S_()})[0],h=x.useRef(e);x.useEffect(function(){h.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=uM([e.lockRef.current],(e.shards||[]).map(t1),!0).filter(Boolean);return g.forEach(function(m){return m.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(g,m){if("touches"in g&&g.touches.length===2)return!h.current.allowPinchZoom;var v=Dc(g),y=n.current,w="deltaX"in g?g.deltaX:y[0]-v[0],b="deltaY"in g?g.deltaY:y[1]-v[1],S,_=g.target,E=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in g&&E==="h"&&_.type==="range")return!1;var C=Jy(E,_);if(!C)return!0;if(C?S=E:(S=E==="v"?"h":"v",C=Jy(E,_)),!C)return!1;if(!r.current&&"changedTouches"in g&&(w||b)&&(r.current=S),!S)return!0;var P=r.current||S;return jM(P,m,g,P==="h"?w:b,!0)},[]),a=x.useCallback(function(g){var m=g;if(!(!Uo.length||Uo[Uo.length-1]!==o)){var v="deltaY"in m?e1(m):Dc(m),y=t.current.filter(function(S){return S.name===m.type&&S.target===m.target&&BM(S.delta,v)})[0];if(y&&y.should){m.cancelable&&m.preventDefault();return}if(!y){var w=(h.current.shards||[]).map(t1).filter(Boolean).filter(function(S){return S.contains(m.target)}),b=w.length>0?l(m,w[0]):!h.current.noIsolation;b&&m.cancelable&&m.preventDefault()}}},[]),f=x.useCallback(function(g,m,v,y){var w={name:g,delta:m,target:v,should:y};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(b){return b!==w})},1)},[]),u=x.useCallback(function(g){n.current=Dc(g),r.current=void 0},[]),s=x.useCallback(function(g){f(g.type,e1(g),g.target,l(g,e.lockRef.current))},[]),c=x.useCallback(function(g){f(g.type,Dc(g),g.target,l(g,e.lockRef.current))},[]);x.useEffect(function(){return Uo.push(o),e.setCallbacks({onScrollCapture:s,onWheelCapture:s,onTouchMoveCapture:c}),document.addEventListener("wheel",a,zo),document.addEventListener("touchmove",a,zo),document.addEventListener("touchstart",u,zo),function(){Uo=Uo.filter(function(g){return g!==o}),document.removeEventListener("wheel",a,zo),document.removeEventListener("touchmove",a,zo),document.removeEventListener("touchstart",u,zo)}},[]);var d=e.removeScrollBar,p=e.inert;return x.createElement(x.Fragment,null,p?x.createElement(o,{styles:zM(i)}):null,d?x.createElement(RM,{gapMode:"margin"}):null)}const HM=wM(x_,VM);var Zl=x.forwardRef(function(e,t){return x.createElement(dd,fr({},e,{ref:t,sideCar:HM}))});Zl.classNames=dd.classNames;var WM=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Vo=new WeakMap,Nc=new WeakMap,Fc={},$h=0,T_=function(e){return e&&(e.host||T_(e.parentNode))},YM=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=T_(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},XM=function(e,t,n,r){var i=YM(t,Array.isArray(e)?e:[e]);Fc[n]||(Fc[n]=new WeakMap);var o=Fc[n],h=[],l=new Set,a=new Set(i),f=function(s){!s||l.has(s)||(l.add(s),f(s.parentNode))};i.forEach(f);var u=function(s){!s||a.has(s)||Array.prototype.forEach.call(s.children,function(c){if(l.has(c))u(c);else try{var d=c.getAttribute(r),p=d!==null&&d!=="false",g=(Vo.get(c)||0)+1,m=(o.get(c)||0)+1;Vo.set(c,g),o.set(c,m),h.push(c),g===1&&p&&Nc.set(c,!0),m===1&&c.setAttribute(n,"true"),p||c.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",c,v)}})};return u(t),l.clear(),$h++,function(){h.forEach(function(s){var c=Vo.get(s)-1,d=o.get(s)-1;Vo.set(s,c),o.set(s,d),c||(Nc.has(s)||s.removeAttribute(r),Nc.delete(s)),d||s.removeAttribute(n)}),$h--,$h||(Vo=new WeakMap,Vo=new WeakMap,Nc=new WeakMap,Fc={})}},hd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=WM(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),XM(r,i,n,"aria-hidden")):function(){return null}};const k_="Dialog",[P_,O_]=qt(k_),[GM,nr]=P_(k_),KM=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:h=!0}=e,l=x.useRef(null),a=x.useRef(null),[f=!1,u]=Fn({prop:r,defaultProp:i,onChange:o});return x.createElement(GM,{scope:t,triggerRef:l,contentRef:a,contentId:an(),titleId:an(),descriptionId:an(),open:f,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(s=>!s),[u]),modal:h},n)},qM="DialogTrigger",ZM=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nr(qM,n),o=Oe(t,i.triggerRef);return x.createElement(Se.button,ae({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":iv(i.open)},r,{ref:o,onClick:pe(e.onClick,i.onOpenToggle)}))}),$_="DialogPortal",[QM,A_]=P_($_,{forceMount:void 0}),JM=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,o=nr($_,t);return x.createElement(QM,{scope:t,forceMount:n},x.Children.map(r,h=>x.createElement(kt,{present:n||o.open},x.createElement(Wl,{asChild:!0,container:i},h))))},sm="DialogOverlay",eD=x.forwardRef((e,t)=>{const n=A_(sm,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=nr(sm,e.__scopeDialog);return o.modal?x.createElement(kt,{present:r||o.open},x.createElement(tD,ae({},i,{ref:t}))):null}),tD=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nr(sm,n);return x.createElement(Zl,{as:Sr,allowPinchZoom:!0,shards:[i.contentRef]},x.createElement(Se.div,ae({"data-state":iv(i.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),Vs="DialogContent",nD=x.forwardRef((e,t)=>{const n=A_(Vs,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=nr(Vs,e.__scopeDialog);return x.createElement(kt,{present:r||o.open},o.modal?x.createElement(rD,ae({},i,{ref:t})):x.createElement(iD,ae({},i,{ref:t})))}),rD=x.forwardRef((e,t)=>{const n=nr(Vs,e.__scopeDialog),r=x.useRef(null),i=Oe(t,n.contentRef,r);return x.useEffect(()=>{const o=r.current;if(o)return hd(o)},[]),x.createElement(R_,ae({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,o=>{var h;o.preventDefault(),(h=n.triggerRef.current)===null||h===void 0||h.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,o=>{const h=o.detail.originalEvent,l=h.button===0&&h.ctrlKey===!0;(h.button===2||l)&&o.preventDefault()}),onFocusOutside:pe(e.onFocusOutside,o=>o.preventDefault())}))}),iD=x.forwardRef((e,t)=>{const n=nr(Vs,e.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return x.createElement(R_,ae({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var h;if((h=e.onCloseAutoFocus)===null||h===void 0||h.call(e,o),!o.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),o.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:o=>{var h,l;(h=e.onInteractOutside)===null||h===void 0||h.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;((l=n.triggerRef.current)===null||l===void 0?void 0:l.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}}))}),R_=x.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...h}=e,l=nr(Vs,n),a=x.useRef(null),f=Oe(t,a);return fd(),x.createElement(x.Fragment,null,x.createElement(ud,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},x.createElement(ea,ae({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":iv(l.open)},h,{ref:f,onDismiss:()=>l.onOpenChange(!1)}))),!1)}),M_="DialogTitle",oD=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nr(M_,n);return x.createElement(Se.h2,ae({id:i.titleId},r,{ref:t}))}),sD="DialogDescription",aD=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nr(sD,n);return x.createElement(Se.p,ae({id:i.descriptionId},r,{ref:t}))}),lD="DialogClose",cD=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nr(lD,n);return x.createElement(Se.button,ae({type:"button"},r,{ref:t,onClick:pe(e.onClick,()=>i.onOpenChange(!1))}))});function iv(e){return e?"open":"closed"}const uD="DialogTitleWarning",[fD,B7]=h5(uD,{contentName:Vs,titleName:M_,docsSlug:"dialog"}),pd=KM,D_=ZM,md=JM,sa=eD,aa=nD,Ql=oD,Jl=aD,ov=cD,N_=pd,F_=D_,dD=md,L_=x.forwardRef(({className:e,...t},n)=>T.jsx(sa,{ref:n,className:we("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));L_.displayName=sa.displayName;const sv=x.forwardRef(({className:e,children:t,...n},r)=>T.jsxs(dD,{children:[T.jsx(L_,{}),T.jsxs(aa,{ref:r,className:we("fixed left-[50%] top-[50%] z-50 flex flex-col w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e,"outline-none"),onCloseAutoFocus:i=>i.preventDefault(),...n,children:[t,T.jsxs(ov,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[T.jsx(Dx,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sv.displayName=aa.displayName;const I_=({className:e,...t})=>T.jsx("div",{className:we("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});I_.displayName="DialogHeader";const av=x.forwardRef(({className:e,...t},n)=>T.jsx(Ql,{ref:n,className:we("text-2xl font-semibold leading-none tracking-tight",e),...t}));av.displayName=Ql.displayName;const hD=x.forwardRef(({className:e,...t},n)=>T.jsx(Jl,{ref:n,className:we("text-sm text-muted-foreground",e),...t}));hD.displayName=Jl.displayName;function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},am.apply(this,arguments)}var j_=["shift","alt","meta","mod","ctrl"],pD={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Ti(e){return(pD[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function mD(e){return j_.includes(e)}function Ah(e,t){return t===void 0&&(t=","),e.split(t)}function Rh(e,t,n){t===void 0&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(h){return Ti(h)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},o=r.filter(function(h){return!j_.includes(h)});return am({},i,{keys:o,description:n})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&B_([Ti(e.key),Ti(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&z_([Ti(e.key),Ti(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){ki.clear()})})();var ki=new Set;function lv(e){return Array.isArray(e)}function gD(e,t){t===void 0&&(t=",");var n=lv(e)?e:e.split(t);return n.every(function(r){return ki.has(r.trim().toLowerCase())})}function B_(e){var t=Array.isArray(e)?e:[e];ki.has("meta")&&ki.forEach(function(n){return!mD(n)&&ki.delete(n.toLowerCase())}),t.forEach(function(n){return ki.add(n.toLowerCase())})}function z_(e){var t=Array.isArray(e)?e:[e];e==="meta"?ki.clear():t.forEach(function(n){return ki.delete(n.toLowerCase())})}function vD(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function yD(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function wD(e){return U_(e,["input","textarea","select"])}function U_(e,t){var n=e.target;t===void 0&&(t=!1);var r=n&&n.tagName;return lv(t)?!!(r&&t&&t.some(function(i){return i.toLowerCase()===r.toLowerCase()})):!!(r&&t&&t===!0)}function bD(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(n){return t.includes(n)})||e.includes("*"):!0}var xD=function(t,n,r){r===void 0&&(r=!1);var i=n.alt,o=n.meta,h=n.mod,l=n.shift,a=n.ctrl,f=n.keys,u=t.key,s=t.code,c=t.ctrlKey,d=t.metaKey,p=t.shiftKey,g=t.altKey,m=Ti(s),v=u.toLowerCase();if(!(f!=null&&f.includes(m))&&!(f!=null&&f.includes(v))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(m))return!1;if(!r){if(i===!g&&v!=="alt"||l===!p&&v!=="shift")return!1;if(h){if(!d&&!c)return!1}else if(o===!d&&v!=="meta"&&v!=="os"||a===!c&&v!=="ctrl"&&v!=="control")return!1}return f&&f.length===1&&(f.includes(v)||f.includes(m))?!0:f?gD(f):!f},SD=x.createContext(void 0),_D=function(){return x.useContext(SD)};function V_(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(n,r){return n&&V_(e[r],t[r])},!0):e===t}var CD=x.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),ED=function(){return x.useContext(CD)};function TD(e){var t=x.useRef(void 0);return V_(t.current,e)||(t.current=e),t.current}var n1=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},kD=typeof window<"u"?x.useLayoutEffect:x.useEffect;function PD(e,t,n,r){var i=x.useRef(null),o=x.useRef(!1),h=n instanceof Array?r instanceof Array?void 0:r:n,l=lv(e)?e.join(h==null?void 0:h.splitKey):e,a=n instanceof Array?n:r instanceof Array?r:void 0,f=x.useCallback(t,a??[]),u=x.useRef(f);a?u.current=f:u.current=t;var s=TD(h),c=ED(),d=c.enabledScopes,p=_D();return kD(function(){if(!((s==null?void 0:s.enabled)===!1||!bD(d,s==null?void 0:s.scopes))){var g=function(b,S){var _;if(S===void 0&&(S=!1),!(wD(b)&&!U_(b,s==null?void 0:s.enableOnFormTags))){if(i.current!==null){var E=i.current.getRootNode();if((E instanceof Document||E instanceof ShadowRoot)&&E.activeElement!==i.current&&!i.current.contains(E.activeElement)){n1(b);return}}(_=b.target)!=null&&_.isContentEditable&&!(s!=null&&s.enableOnContentEditable)||Ah(l,s==null?void 0:s.splitKey).forEach(function(C){var P,N=Rh(C,s==null?void 0:s.combinationKey);if(xD(b,N,s==null?void 0:s.ignoreModifiers)||(P=N.keys)!=null&&P.includes("*")){if(s!=null&&s.ignoreEventWhen!=null&&s.ignoreEventWhen(b)||S&&o.current)return;if(vD(b,N,s==null?void 0:s.preventDefault),!yD(b,N,s==null?void 0:s.enabled)){n1(b);return}u.current(b,N),S||(o.current=!0)}})}},m=function(b){b.key!==void 0&&(B_(Ti(b.code)),((s==null?void 0:s.keydown)===void 0&&(s==null?void 0:s.keyup)!==!0||s!=null&&s.keydown)&&g(b))},v=function(b){b.key!==void 0&&(z_(Ti(b.code)),o.current=!1,s!=null&&s.keyup&&g(b,!0))},y=i.current||(h==null?void 0:h.document)||document;return y.addEventListener("keyup",v),y.addEventListener("keydown",m),p&&Ah(l,s==null?void 0:s.splitKey).forEach(function(w){return p.addHotkey(Rh(w,s==null?void 0:s.combinationKey,s==null?void 0:s.description))}),function(){y.removeEventListener("keyup",v),y.removeEventListener("keydown",m),p&&Ah(l,s==null?void 0:s.splitKey).forEach(function(w){return p.removeHotkey(Rh(w,s==null?void 0:s.combinationKey,s==null?void 0:s.description))})}}},[l,s,d]),i}const or=(e,t,n)=>{const r=Xe(o=>o.disableShortCuts);return PD(e,t,{enabled:!r},n)};function OD(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];typeof t[0]=="string"&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const r1={};function lm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];typeof t[0]=="string"&&r1[t[0]]||(typeof t[0]=="string"&&(r1[t[0]]=new Date),OD(...t))}const H_=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}};function i1(e,t,n){e.loadNamespaces(t,H_(e,n))}function o1(e,t,n,r){typeof n=="string"&&(n=[n]),n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,H_(e,r))}function $D(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=t.languages[0],i=t.options?t.options.fallbackLng:!1,o=t.languages[t.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const h=(l,a)=>{const f=t.services.backendConnector.state[`${l}|${a}`];return f===-1||f===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!h(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(r,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||h(r,e)&&(!i||h(o,e)))}function AD(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(lm("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(i,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,e))return!1}}):$D(e,t,n)}const RD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,MD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},DD=e=>MD[e],ND=e=>e.replace(RD,DD);let cm={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ND};function FD(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cm={...cm,...e}}function LD(){return cm}let W_;function ID(e){W_=e}function jD(){return W_}const BD={type:"3rdParty",init(e){FD(e.options.react),ID(e)}},zD=x.createContext();class UD{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const VD=(e,t)=>{const n=x.useRef();return x.useEffect(()=>{n.current=e},[e,t]),n.current};function Y_(e,t,n,r){return e.getFixedT(t,n,r)}function HD(e,t,n,r){return x.useCallback(Y_(e,t,n,r),[e,t,n,r])}function gd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=t,{i18n:r,defaultNS:i}=x.useContext(zD)||{},o=n||r||jD();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new UD),!o){lm("You will need to pass in an i18next instance by using initReactI18next");const b=(_,E)=>typeof E=="string"?E:E&&typeof E=="object"&&typeof E.defaultValue=="string"?E.defaultValue:Array.isArray(_)?_[_.length-1]:_,S=[b,{},!1];return S.t=b,S.i18n={},S.ready=!1,S}o.options.react&&o.options.react.wait!==void 0&&lm("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const h={...LD(),...o.options.react,...t},{useSuspense:l,keyPrefix:a}=h;let f=i||o.options&&o.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(f);const u=(o.isInitialized||o.initializedStoreOnce)&&f.every(b=>AD(b,o,h)),s=HD(o,t.lng||null,h.nsMode==="fallback"?f:f[0],a),c=()=>s,d=()=>Y_(o,t.lng||null,h.nsMode==="fallback"?f:f[0],a),[p,g]=x.useState(c);let m=f.join();t.lng&&(m=`${t.lng}${m}`);const v=VD(m),y=x.useRef(!0);x.useEffect(()=>{const{bindI18n:b,bindI18nStore:S}=h;y.current=!0,!u&&!l&&(t.lng?o1(o,t.lng,f,()=>{y.current&&g(d)}):i1(o,f,()=>{y.current&&g(d)})),u&&v&&v!==m&&y.current&&g(d);function _(){y.current&&g(d)}return b&&o&&o.on(b,_),S&&o&&o.store.on(S,_),()=>{y.current=!1,b&&o&&b.split(" ").forEach(E=>o.off(E,_)),S&&o&&S.split(" ").forEach(E=>o.store.off(E,_))}},[o,m]),x.useEffect(()=>{y.current&&u&&g(c)},[o,a,u]);const w=[p,o,u];if(w.t=p,w.i18n=o,w.ready=u,u||!u&&!l)return w;throw new Promise(b=>{t.lng?o1(o,t.lng,f,()=>b()):i1(o,f,()=>b())})}function un(e){const{content:t,keys:n}=e;return T.jsxs("div",{className:"flex justify-between",children:[T.jsx("div",{children:t}),T.jsx("div",{className:"flex gap-[8px]",children:n.map(r=>T.jsx("div",{className:"border px-2 py-1 rounded-lg",children:r},r))})]})}const WD=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},Lc=()=>WD()?"Cmd":"Ctrl";function YD(){const[e,t]=v_(!1),{t:n}=gd();return or("h",()=>{t()}),T.jsxs(N_,{open:e,onOpenChange:t,children:[T.jsx(F_,{asChild:!0,children:T.jsx(Lr,{tooltip:"Hotkeys",children:T.jsx(g3,{})})}),T.jsx(sv,{children:T.jsxs(I_,{children:[T.jsx(av,{children:"Hotkeys"}),T.jsxs("div",{className:"flex gap-2 flex-col pt-4",children:[T.jsx(un,{content:n("Pan"),keys:["Space + Drag"]}),T.jsx(un,{content:n("Reset Zoom/Pan"),keys:["Esc"]}),T.jsx(un,{content:n("Decrease Brush Size"),keys:["["]}),T.jsx(un,{content:n("Increase Brush Size"),keys:["]"]}),T.jsx(un,{content:n("View Original Image"),keys:["Hold Tab"]}),T.jsx(un,{content:n("Undo"),keys:[Lc(),"Z"]}),T.jsx(un,{content:n("Redo"),keys:[Lc(),"Shift","Z"]}),T.jsx(un,{content:n("Copy Result"),keys:[Lc(),"C"]}),T.jsx(un,{content:n("Paste Image"),keys:[Lc(),"V"]}),T.jsx(un,{content:n("Trigger Manually Inpainting"),keys:["Shift","R"]}),T.jsx(un,{content:n("Toggle Hotkeys Dialog"),keys:["H"]}),T.jsx(un,{content:n("Toggle Settings Dialog"),keys:["S"]}),T.jsx(un,{content:n("Toggle File Manager"),keys:["F"]})]})]})})]})}var ec=e=>e.type==="checkbox",us=e=>e instanceof Date,Vt=e=>e==null;const X_=e=>typeof e=="object";var yt=e=>!Vt(e)&&!Array.isArray(e)&&X_(e)&&!us(e),G_=e=>yt(e)&&e.target?ec(e.target)?e.target.checked:e.target.value:e,XD=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,K_=(e,t)=>e.has(XD(t)),GD=e=>{const t=e.constructor&&e.constructor.prototype;return yt(t)&&t.hasOwnProperty("isPrototypeOf")},cv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Jt(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(cv&&(e instanceof Blob||e instanceof FileList))&&(n||yt(e)))if(t=n?[]:{},!n&&!GD(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=Jt(e[r]));else return e;return t}var tc=e=>Array.isArray(e)?e.filter(Boolean):[],ut=e=>e===void 0,ve=(e,t,n)=>{if(!t||!yt(e))return n;const r=tc(t.split(/[,[\].]+?/)).reduce((i,o)=>Vt(i)?i:i[o],e);return ut(r)||r===e?ut(e[t])?n:e[t]:r},Gn=e=>typeof e=="boolean";const Ku={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},qn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ar={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},q_=ke.createContext(null),vd=()=>ke.useContext(q_),KD=e=>{const{children:t,...n}=e;return ke.createElement(q_.Provider,{value:n},t)};var Z_=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const h=o;return t._proxyFormState[h]!==qn.all&&(t._proxyFormState[h]=!r||qn.all),n&&(n[h]=!0),e[h]}});return i},dn=e=>yt(e)&&!Object.keys(e).length,Q_=(e,t,n,r)=>{n(e);const{name:i,...o}=e;return dn(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(h=>t[h]===(!r||qn.all))},fu=e=>Array.isArray(e)?e:[e],J_=(e,t,n)=>!e||!t||e===t||fu(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function uv(e){const t=ke.useRef(e);t.current=e,ke.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}function qD(e){const t=vd(),{control:n=t.control,disabled:r,name:i,exact:o}=e||{},[h,l]=ke.useState(n._formState),a=ke.useRef(!0),f=ke.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=ke.useRef(i);return u.current=i,uv({disabled:r,next:s=>a.current&&J_(u.current,s.name,o)&&Q_(s,f.current,n._updateFormState)&&l({...n._formState,...s}),subject:n._subjects.state}),ke.useEffect(()=>(a.current=!0,f.current.isValid&&n._updateValid(!0),()=>{a.current=!1}),[n]),Z_(h,n,f.current,!1)}var pr=e=>typeof e=="string",eC=(e,t,n,r,i)=>pr(e)?(r&&t.watch.add(e),ve(n,e,i)):Array.isArray(e)?e.map(o=>(r&&t.watch.add(o),ve(n,o))):(r&&(t.watchAll=!0),n);function ZD(e){const t=vd(),{control:n=t.control,name:r,defaultValue:i,disabled:o,exact:h}=e||{},l=ke.useRef(r);l.current=r,uv({disabled:o,subject:n._subjects.values,next:u=>{J_(l.current,u.name,h)&&f(Jt(eC(l.current,n._names,u.values||n._formValues,!1,i)))}});const[a,f]=ke.useState(n._getWatch(r,i));return ke.useEffect(()=>n._removeUnmounted()),a}var fv=e=>/^\w*$/.test(e),tC=e=>tc(e.replace(/["|']|\]/g,"").split(/\.|\[/)),He=(e,t,n)=>{let r=-1;const i=fv(t)?[t]:tC(t),o=i.length,h=o-1;for(;++r<o;){const l=i[r];let a=n;if(r!==h){const f=e[l];a=yt(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}e[l]=a,e=e[l]}return e};function QD(e){const t=vd(),{name:n,disabled:r,control:i=t.control,shouldUnregister:o}=e,h=K_(i._names.array,n),l=ZD({control:i,name:n,defaultValue:ve(i._formValues,n,ve(i._defaultValues,n,e.defaultValue)),exact:!0}),a=qD({control:i,name:n}),f=ke.useRef(i.register(n,{...e.rules,value:l,...Gn(e.disabled)?{disabled:e.disabled}:{}}));return ke.useEffect(()=>{const u=i._options.shouldUnregister||o,s=(c,d)=>{const p=ve(i._fields,c);p&&(p._f.mount=d)};if(s(n,!0),u){const c=Jt(ve(i._options.defaultValues,n));He(i._defaultValues,n,c),ut(ve(i._formValues,n))&&He(i._formValues,n,c)}return()=>{(h?u&&!i._state.action:u)?i.unregister(n):s(n,!1)}},[n,i,h,o]),ke.useEffect(()=>{ve(i._fields,n)&&i._updateDisabledField({disabled:r,fields:i._fields,name:n,value:ve(i._fields,n)._f.value})},[r,n,i]),{field:{name:n,value:l,...Gn(r)||a.disabled?{disabled:a.disabled||r}:{},onChange:ke.useCallback(u=>f.current.onChange({target:{value:G_(u),name:n},type:Ku.CHANGE}),[n]),onBlur:ke.useCallback(()=>f.current.onBlur({target:{value:ve(i._formValues,n),name:n},type:Ku.BLUR}),[n,i]),ref:u=>{const s=ve(i._fields,n);s&&u&&(s._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:c=>u.setCustomValidity(c),reportValidity:()=>u.reportValidity()})}},formState:a,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ve(a.errors,n)},isDirty:{enumerable:!0,get:()=>!!ve(a.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ve(a.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ve(a.validatingFields,n)},error:{enumerable:!0,get:()=>ve(a.errors,n)}})}}const JD=e=>e.render(QD(e));var nC=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},s1=e=>({isOnSubmit:!e||e===qn.onSubmit,isOnBlur:e===qn.onBlur,isOnChange:e===qn.onChange,isOnAll:e===qn.all,isOnTouch:e===qn.onTouched}),a1=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Ja=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const o=ve(e,i);if(o){const{_f:h,...l}=o;if(h){if(h.refs&&h.refs[0]&&t(h.refs[0],i)&&!r)break;if(h.ref&&t(h.ref,h.name)&&!r)break;Ja(l,t)}else yt(l)&&Ja(l,t)}}};var e4=(e,t,n)=>{const r=tc(ve(e,n));return He(r,"root",t[n]),He(e,n,r),e},dv=e=>e.type==="file",Pi=e=>typeof e=="function",qu=e=>{if(!cv)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},du=e=>pr(e),hv=e=>e.type==="radio",Zu=e=>e instanceof RegExp;const l1={value:!1,isValid:!1},c1={value:!0,isValid:!0};var rC=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ut(e[0].attributes.value)?ut(e[0].value)||e[0].value===""?c1:{value:e[0].value,isValid:!0}:c1:l1}return l1};const u1={isValid:!1,value:null};var iC=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,u1):u1;function f1(e,t,n="validate"){if(du(e)||Array.isArray(e)&&e.every(du)||Gn(e)&&!e)return{type:n,message:du(e)?e:"",ref:t}}var Ho=e=>yt(e)&&!Zu(e)?e:{value:e,message:""},d1=async(e,t,n,r,i)=>{const{ref:o,refs:h,required:l,maxLength:a,minLength:f,min:u,max:s,pattern:c,validate:d,name:p,valueAsNumber:g,mount:m,disabled:v}=e._f,y=ve(t,p);if(!m||v)return{};const w=h?h[0]:o,b=I=>{r&&w.reportValidity&&(w.setCustomValidity(Gn(I)?"":I||""),w.reportValidity())},S={},_=hv(o),E=ec(o),C=_||E,P=(g||dv(o))&&ut(o.value)&&ut(y)||qu(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,N=nC.bind(null,p,n,S),B=(I,U,D,F=Ar.maxLength,O=Ar.minLength)=>{const M=I?U:D;S[p]={type:I?F:O,message:M,ref:o,...N(I?F:O,M)}};if(i?!Array.isArray(y)||!y.length:l&&(!C&&(P||Vt(y))||Gn(y)&&!y||E&&!rC(h).isValid||_&&!iC(h).isValid)){const{value:I,message:U}=du(l)?{value:!!l,message:l}:Ho(l);if(I&&(S[p]={type:Ar.required,message:U,ref:w,...N(Ar.required,U)},!n))return b(U),S}if(!P&&(!Vt(u)||!Vt(s))){let I,U;const D=Ho(s),F=Ho(u);if(!Vt(y)&&!isNaN(y)){const O=o.valueAsNumber||y&&+y;Vt(D.value)||(I=O>D.value),Vt(F.value)||(U=O<F.value)}else{const O=o.valueAsDate||new Date(y),M=R=>new Date(new Date().toDateString()+" "+R),V=o.type=="time",k=o.type=="week";pr(D.value)&&y&&(I=V?M(y)>M(D.value):k?y>D.value:O>new Date(D.value)),pr(F.value)&&y&&(U=V?M(y)<M(F.value):k?y<F.value:O<new Date(F.value))}if((I||U)&&(B(!!I,D.message,F.message,Ar.max,Ar.min),!n))return b(S[p].message),S}if((a||f)&&!P&&(pr(y)||i&&Array.isArray(y))){const I=Ho(a),U=Ho(f),D=!Vt(I.value)&&y.length>+I.value,F=!Vt(U.value)&&y.length<+U.value;if((D||F)&&(B(D,I.message,U.message),!n))return b(S[p].message),S}if(c&&!P&&pr(y)){const{value:I,message:U}=Ho(c);if(Zu(I)&&!y.match(I)&&(S[p]={type:Ar.pattern,message:U,ref:o,...N(Ar.pattern,U)},!n))return b(U),S}if(d){if(Pi(d)){const I=await d(y,t),U=f1(I,w);if(U&&(S[p]={...U,...N(Ar.validate,U.message)},!n))return b(U.message),S}else if(yt(d)){let I={};for(const U in d){if(!dn(I)&&!n)break;const D=f1(await d[U](y,t),w,U);D&&(I={...D,...N(U,D.message)},b(D.message),n&&(S[p]=I))}if(!dn(I)&&(S[p]={ref:w,...I},!n))return S}}return b(!0),S};function t4(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=ut(e)?r++:e[t[r++]];return e}function n4(e){for(const t in e)if(e.hasOwnProperty(t)&&!ut(e[t]))return!1;return!0}function mt(e,t){const n=Array.isArray(t)?t:fv(t)?[t]:tC(t),r=n.length===1?e:t4(e,n),i=n.length-1,o=n[i];return r&&delete r[o],i!==0&&(yt(r)&&dn(r)||Array.isArray(r)&&n4(r))&&mt(e,n.slice(0,-1)),e}var Mh=()=>{let e=[];return{get observers(){return e},next:i=>{for(const o of e)o.next&&o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}},Qu=e=>Vt(e)||!X_(e);function ho(e,t){if(Qu(e)||Qu(t))return e===t;if(us(e)&&us(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const o=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const h=t[i];if(us(o)&&us(h)||yt(o)&&yt(h)||Array.isArray(o)&&Array.isArray(h)?!ho(o,h):o!==h)return!1}}return!0}var oC=e=>e.type==="select-multiple",r4=e=>hv(e)||ec(e),Dh=e=>qu(e)&&e.isConnected,sC=e=>{for(const t in e)if(Pi(e[t]))return!0;return!1};function Ju(e,t={}){const n=Array.isArray(e);if(yt(e)||n)for(const r in e)Array.isArray(e[r])||yt(e[r])&&!sC(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ju(e[r],t[r])):Vt(e[r])||(t[r]=!0);return t}function aC(e,t,n){const r=Array.isArray(e);if(yt(e)||r)for(const i in e)Array.isArray(e[i])||yt(e[i])&&!sC(e[i])?ut(t)||Qu(n[i])?n[i]=Array.isArray(e[i])?Ju(e[i],[]):{...Ju(e[i])}:aC(e[i],Vt(t)?{}:t[i],n[i]):n[i]=!ho(e[i],t[i]);return n}var Ic=(e,t)=>aC(e,t,Ju(t)),lC=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>ut(e)?e:t?e===""?NaN:e&&+e:n&&pr(e)?new Date(e):r?r(e):e;function Nh(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return dv(t)?t.files:hv(t)?iC(e.refs).value:oC(t)?[...t.selectedOptions].map(({value:n})=>n):ec(t)?rC(e.refs).value:lC(ut(t.value)?e.ref.value:t.value,e)}var i4=(e,t,n,r)=>{const i={};for(const o of e){const h=ve(t,o);h&&He(i,o,h._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},_a=e=>ut(e)?e:Zu(e)?e.source:yt(e)?Zu(e.value)?e.value.source:e.value:e,o4=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function h1(e,t,n){const r=ve(e,n);if(r||fv(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),h=ve(t,o),l=ve(e,o);if(h&&!Array.isArray(h)&&n!==o)return{name:n};if(l&&l.type)return{name:o,error:l};i.pop()}return{name:n}}var s4=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,a4=(e,t)=>!tc(ve(e,t)).length&&mt(e,t);const l4={mode:qn.onSubmit,reValidateMode:qn.onChange,shouldFocusError:!0};function c4(e={}){let t={...l4,...e},n={submitCount:0,isDirty:!1,isLoading:Pi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=yt(t.defaultValues)||yt(t.values)?Jt(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:Jt(i),h={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},a,f=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},s={values:Mh(),array:Mh(),state:Mh()},c=s1(t.mode),d=s1(t.reValidateMode),p=t.criteriaMode===qn.all,g=z=>X=>{clearTimeout(f),f=setTimeout(z,X)},m=async z=>{if(u.isValid||z){const X=t.resolver?dn((await C()).errors):await N(r,!0);X!==n.isValid&&s.state.next({isValid:X})}},v=(z,X)=>{(u.isValidating||u.validatingFields)&&((z||Array.from(l.mount)).forEach(J=>{J&&(X?He(n.validatingFields,J,X):mt(n.validatingFields,J))}),s.state.next({validatingFields:n.validatingFields,isValidating:!dn(n.validatingFields)}))},y=(z,X=[],J,oe,q=!0,re=!0)=>{if(oe&&J){if(h.action=!0,re&&Array.isArray(ve(r,z))){const ue=J(ve(r,z),oe.argA,oe.argB);q&&He(r,z,ue)}if(re&&Array.isArray(ve(n.errors,z))){const ue=J(ve(n.errors,z),oe.argA,oe.argB);q&&He(n.errors,z,ue),a4(n.errors,z)}if(u.touchedFields&&re&&Array.isArray(ve(n.touchedFields,z))){const ue=J(ve(n.touchedFields,z),oe.argA,oe.argB);q&&He(n.touchedFields,z,ue)}u.dirtyFields&&(n.dirtyFields=Ic(i,o)),s.state.next({name:z,isDirty:I(z,X),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else He(o,z,X)},w=(z,X)=>{He(n.errors,z,X),s.state.next({errors:n.errors})},b=z=>{n.errors=z,s.state.next({errors:n.errors,isValid:!1})},S=(z,X,J,oe)=>{const q=ve(r,z);if(q){const re=ve(o,z,ut(J)?ve(i,z):J);ut(re)||oe&&oe.defaultChecked||X?He(o,z,X?re:Nh(q._f)):F(z,re),h.mount&&m()}},_=(z,X,J,oe,q)=>{let re=!1,ue=!1;const ge={name:z},Ce=!!(ve(r,z)&&ve(r,z)._f.disabled);if(!J||oe){u.isDirty&&(ue=n.isDirty,n.isDirty=ge.isDirty=I(),re=ue!==ge.isDirty);const Te=Ce||ho(ve(i,z),X);ue=!!(!Ce&&ve(n.dirtyFields,z)),Te||Ce?mt(n.dirtyFields,z):He(n.dirtyFields,z,!0),ge.dirtyFields=n.dirtyFields,re=re||u.dirtyFields&&ue!==!Te}if(J){const Te=ve(n.touchedFields,z);Te||(He(n.touchedFields,z,J),ge.touchedFields=n.touchedFields,re=re||u.touchedFields&&Te!==J)}return re&&q&&s.state.next(ge),re?ge:{}},E=(z,X,J,oe)=>{const q=ve(n.errors,z),re=u.isValid&&Gn(X)&&n.isValid!==X;if(e.delayError&&J?(a=g(()=>w(z,J)),a(e.delayError)):(clearTimeout(f),a=null,J?He(n.errors,z,J):mt(n.errors,z)),(J?!ho(q,J):q)||!dn(oe)||re){const ue={...oe,...re&&Gn(X)?{isValid:X}:{},errors:n.errors,name:z};n={...n,...ue},s.state.next(ue)}},C=async z=>{v(z,!0);const X=await t.resolver(o,t.context,i4(z||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return v(z),X},P=async z=>{const{errors:X}=await C(z);if(z)for(const J of z){const oe=ve(X,J);oe?He(n.errors,J,oe):mt(n.errors,J)}else n.errors=X;return X},N=async(z,X,J={valid:!0})=>{for(const oe in z){const q=z[oe];if(q){const{_f:re,...ue}=q;if(re){const ge=l.array.has(re.name);v([oe],!0);const Ce=await d1(q,o,p,t.shouldUseNativeValidation&&!X,ge);if(v([oe]),Ce[re.name]&&(J.valid=!1,X))break;!X&&(ve(Ce,re.name)?ge?e4(n.errors,Ce,re.name):He(n.errors,re.name,Ce[re.name]):mt(n.errors,re.name))}ue&&await N(ue,X,J)}}return J.valid},B=()=>{for(const z of l.unMount){const X=ve(r,z);X&&(X._f.refs?X._f.refs.every(J=>!Dh(J)):!Dh(X._f.ref))&&H(z)}l.unMount=new Set},I=(z,X)=>(z&&X&&He(o,z,X),!ho(j(),i)),U=(z,X,J)=>eC(z,l,{...h.mount?o:ut(X)?i:pr(z)?{[z]:X}:X},J,X),D=z=>tc(ve(h.mount?o:i,z,e.shouldUnregister?ve(i,z,[]):[])),F=(z,X,J={})=>{const oe=ve(r,z);let q=X;if(oe){const re=oe._f;re&&(!re.disabled&&He(o,z,lC(X,re)),q=qu(re.ref)&&Vt(X)?"":X,oC(re.ref)?[...re.ref.options].forEach(ue=>ue.selected=q.includes(ue.value)):re.refs?ec(re.ref)?re.refs.length>1?re.refs.forEach(ue=>(!ue.defaultChecked||!ue.disabled)&&(ue.checked=Array.isArray(q)?!!q.find(ge=>ge===ue.value):q===ue.value)):re.refs[0]&&(re.refs[0].checked=!!q):re.refs.forEach(ue=>ue.checked=ue.value===q):dv(re.ref)?re.ref.value="":(re.ref.value=q,re.ref.type||s.values.next({name:z,values:{...o}})))}(J.shouldDirty||J.shouldTouch)&&_(z,q,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&R(z)},O=(z,X,J)=>{for(const oe in X){const q=X[oe],re=`${z}.${oe}`,ue=ve(r,re);(l.array.has(z)||!Qu(q)||ue&&!ue._f)&&!us(q)?O(re,q,J):F(re,q,J)}},M=(z,X,J={})=>{const oe=ve(r,z),q=l.array.has(z),re=Jt(X);He(o,z,re),q?(s.array.next({name:z,values:{...o}}),(u.isDirty||u.dirtyFields)&&J.shouldDirty&&s.state.next({name:z,dirtyFields:Ic(i,o),isDirty:I(z,re)})):oe&&!oe._f&&!Vt(re)?O(z,re,J):F(z,re,J),a1(z,l)&&s.state.next({...n}),s.values.next({name:h.mount?z:void 0,values:{...o}})},V=async z=>{h.mount=!0;const X=z.target;let J=X.name,oe=!0;const q=ve(r,J),re=()=>X.type?Nh(q._f):G_(z),ue=ge=>{oe=Number.isNaN(ge)||ge===ve(o,J,ge)};if(q){let ge,Ce;const Te=re(),Ae=z.type===Ku.BLUR||z.type===Ku.FOCUS_OUT,Be=!o4(q._f)&&!t.resolver&&!ve(n.errors,J)&&!q._f.deps||s4(Ae,ve(n.touchedFields,J),n.isSubmitted,d,c),ze=a1(J,l,Ae);He(o,J,Te),Ae?(q._f.onBlur&&q._f.onBlur(z),a&&a(0)):q._f.onChange&&q._f.onChange(z);const Je=_(J,Te,Ae,!1),Ee=!dn(Je)||ze;if(!Ae&&s.values.next({name:J,type:z.type,values:{...o}}),Be)return u.isValid&&m(),Ee&&s.state.next({name:J,...ze?{}:Je});if(!Ae&&ze&&s.state.next({...n}),t.resolver){const{errors:Pt}=await C([J]);if(ue(Te),oe){const wt=h1(n.errors,r,J),It=h1(Pt,r,wt.name||J);ge=It.error,J=It.name,Ce=dn(Pt)}}else v([J],!0),ge=(await d1(q,o,p,t.shouldUseNativeValidation))[J],v([J]),ue(Te),oe&&(ge?Ce=!1:u.isValid&&(Ce=await N(r,!0)));oe&&(q._f.deps&&R(q._f.deps),E(J,Ce,ge,Je))}},k=(z,X)=>{if(ve(n.errors,X)&&z.focus)return z.focus(),1},R=async(z,X={})=>{let J,oe;const q=fu(z);if(t.resolver){const re=await P(ut(z)?z:q);J=dn(re),oe=z?!q.some(ue=>ve(re,ue)):J}else z?(oe=(await Promise.all(q.map(async re=>{const ue=ve(r,re);return await N(ue&&ue._f?{[re]:ue}:ue)}))).every(Boolean),!(!oe&&!n.isValid)&&m()):oe=J=await N(r);return s.state.next({...!pr(z)||u.isValid&&J!==n.isValid?{}:{name:z},...t.resolver||!z?{isValid:J}:{},errors:n.errors}),X.shouldFocus&&!oe&&Ja(r,k,z?q:l.mount),oe},j=z=>{const X={...h.mount?o:i};return ut(z)?X:pr(z)?ve(X,z):z.map(J=>ve(X,J))},A=(z,X)=>({invalid:!!ve((X||n).errors,z),isDirty:!!ve((X||n).dirtyFields,z),isTouched:!!ve((X||n).touchedFields,z),isValidating:!!ve((X||n).validatingFields,z),error:ve((X||n).errors,z)}),W=z=>{z&&fu(z).forEach(X=>mt(n.errors,X)),s.state.next({errors:z?n.errors:{}})},L=(z,X,J)=>{const oe=(ve(r,z,{_f:{}})._f||{}).ref;He(n.errors,z,{...X,ref:oe}),s.state.next({name:z,errors:n.errors,isValid:!1}),J&&J.shouldFocus&&oe&&oe.focus&&oe.focus()},$=(z,X)=>Pi(z)?s.values.subscribe({next:J=>z(U(void 0,X),J)}):U(z,X,!0),H=(z,X={})=>{for(const J of z?fu(z):l.mount)l.mount.delete(J),l.array.delete(J),X.keepValue||(mt(r,J),mt(o,J)),!X.keepError&&mt(n.errors,J),!X.keepDirty&&mt(n.dirtyFields,J),!X.keepTouched&&mt(n.touchedFields,J),!X.keepIsValidating&&mt(n.validatingFields,J),!t.shouldUnregister&&!X.keepDefaultValue&&mt(i,J);s.values.next({values:{...o}}),s.state.next({...n,...X.keepDirty?{isDirty:I()}:{}}),!X.keepIsValid&&m()},Y=({disabled:z,name:X,field:J,fields:oe,value:q})=>{if(Gn(z)){const re=z?void 0:ut(q)?Nh(J?J._f:ve(oe,X)._f):q;He(o,X,re),_(X,re,!1,!1,!0)}},K=(z,X={})=>{let J=ve(r,z);const oe=Gn(X.disabled);return He(r,z,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:z}},name:z,mount:!0,...X}}),l.mount.add(z),J?Y({field:J,disabled:X.disabled,name:z,value:X.value}):S(z,!0,X.value),{...oe?{disabled:X.disabled}:{},...t.progressive?{required:!!X.required,min:_a(X.min),max:_a(X.max),minLength:_a(X.minLength),maxLength:_a(X.maxLength),pattern:_a(X.pattern)}:{},name:z,onChange:V,onBlur:V,ref:q=>{if(q){K(z,X),J=ve(r,z);const re=ut(q.value)&&q.querySelectorAll&&q.querySelectorAll("input,select,textarea")[0]||q,ue=r4(re),ge=J._f.refs||[];if(ue?ge.find(Ce=>Ce===re):re===J._f.ref)return;He(r,z,{_f:{...J._f,...ue?{refs:[...ge.filter(Dh),re,...Array.isArray(ve(i,z))?[{}]:[]],ref:{type:re.type,name:z}}:{ref:re}}}),S(z,!1,void 0,re)}else J=ve(r,z,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||X.shouldUnregister)&&!(K_(l.array,z)&&h.action)&&l.unMount.add(z)}}},G=()=>t.shouldFocusError&&Ja(r,k,l.mount),Q=z=>{Gn(z)&&(s.state.next({disabled:z}),Ja(r,(X,J)=>{let oe=z;const q=ve(r,J);q&&Gn(q._f.disabled)&&(oe||(oe=q._f.disabled)),X.disabled=oe},0,!1))},ee=(z,X)=>async J=>{let oe;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let q=Jt(o);if(s.state.next({isSubmitting:!0}),t.resolver){const{errors:re,values:ue}=await C();n.errors=re,q=ue}else await N(r);if(mt(n.errors,"root"),dn(n.errors)){s.state.next({errors:{}});try{await z(q,J)}catch(re){oe=re}}else X&&await X({...n.errors},J),G(),setTimeout(G);if(s.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dn(n.errors)&&!oe,submitCount:n.submitCount+1,errors:n.errors}),oe)throw oe},le=(z,X={})=>{ve(r,z)&&(ut(X.defaultValue)?M(z,Jt(ve(i,z))):(M(z,X.defaultValue),He(i,z,Jt(X.defaultValue))),X.keepTouched||mt(n.touchedFields,z),X.keepDirty||(mt(n.dirtyFields,z),n.isDirty=X.defaultValue?I(z,Jt(ve(i,z))):I()),X.keepError||(mt(n.errors,z),u.isValid&&m()),s.state.next({...n}))},te=(z,X={})=>{const J=z?Jt(z):i,oe=Jt(J),q=dn(z),re=q?i:oe;if(X.keepDefaultValues||(i=J),!X.keepValues){if(X.keepDirtyValues)for(const ue of l.mount)ve(n.dirtyFields,ue)?He(re,ue,ve(o,ue)):M(ue,ve(re,ue));else{if(cv&&ut(z))for(const ue of l.mount){const ge=ve(r,ue);if(ge&&ge._f){const Ce=Array.isArray(ge._f.refs)?ge._f.refs[0]:ge._f.ref;if(qu(Ce)){const Te=Ce.closest("form");if(Te){Te.reset();break}}}}r={}}o=e.shouldUnregister?X.keepDefaultValues?Jt(i):{}:Jt(re),s.array.next({values:{...re}}),s.values.next({values:{...re}})}l={mount:X.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!u.isValid||!!X.keepIsValid||!!X.keepDirtyValues,h.watch=!!e.shouldUnregister,s.state.next({submitCount:X.keepSubmitCount?n.submitCount:0,isDirty:q?!1:X.keepDirty?n.isDirty:!!(X.keepDefaultValues&&!ho(z,i)),isSubmitted:X.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:q?[]:X.keepDirtyValues?X.keepDefaultValues&&o?Ic(i,o):n.dirtyFields:X.keepDefaultValues&&z?Ic(i,z):{},touchedFields:X.keepTouched?n.touchedFields:{},errors:X.keepErrors?n.errors:{},isSubmitSuccessful:X.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Z=(z,X)=>te(Pi(z)?z(o):z,X);return{control:{register:K,unregister:H,getFieldState:A,handleSubmit:ee,setError:L,_executeSchema:C,_getWatch:U,_getDirty:I,_updateValid:m,_removeUnmounted:B,_updateFieldArray:y,_updateDisabledField:Y,_getFieldArray:D,_reset:te,_resetDefaultValues:()=>Pi(t.defaultValues)&&t.defaultValues().then(z=>{Z(z,t.resetOptions),s.state.next({isLoading:!1})}),_updateFormState:z=>{n={...n,...z}},_disableForm:Q,_subjects:s,_proxyFormState:u,_setErrors:b,get _fields(){return r},get _formValues(){return o},get _state(){return h},set _state(z){h=z},get _defaultValues(){return i},get _names(){return l},set _names(z){l=z},get _formState(){return n},set _formState(z){n=z},get _options(){return t},set _options(z){t={...t,...z}}},trigger:R,register:K,handleSubmit:ee,watch:$,setValue:M,getValues:j,reset:Z,resetField:le,clearErrors:W,unregister:H,setError:L,setFocus:(z,X={})=>{const J=ve(r,z),oe=J&&J._f;if(oe){const q=oe.refs?oe.refs[0]:oe.ref;q.focus&&(q.focus(),X.shouldSelect&&q.select())}},getFieldState:A}}function u4(e={}){const t=ke.useRef(),n=ke.useRef(),[r,i]=ke.useState({isDirty:!1,isValidating:!1,isLoading:Pi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Pi(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...c4(e),formState:r});const o=t.current.control;return o._options=e,uv({subject:o._subjects.state,next:h=>{Q_(h,o._proxyFormState,o._updateFormState,!0)&&i({...o._formState})}}),ke.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),ke.useEffect(()=>{if(o._proxyFormState.isDirty){const h=o._getDirty();h!==r.isDirty&&o._subjects.state.next({isDirty:h})}},[o,r.isDirty]),ke.useEffect(()=>{e.values&&!ho(e.values,n.current)?(o._reset(e.values,o._options.resetOptions),n.current=e.values,i(h=>({...h}))):o._resetDefaultValues()},[e.values,o]),ke.useEffect(()=>{e.errors&&o._setErrors(e.errors)},[e.errors,o]),ke.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),ke.useEffect(()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[e.shouldUnregister,o]),t.current.formState=Z_(r,o),t.current}var p1=function(e,t,n){if(e&&"reportValidity"in e){var r=ve(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},cC=function(e,t){var n=function(i){var o=t.fields[i];o&&o.ref&&"reportValidity"in o.ref?p1(o.ref,i,e):o.refs&&o.refs.forEach(function(h){return p1(h,i,e)})};for(var r in t.fields)n(r)},f4=function(e,t){t.shouldUseNativeValidation&&cC(e,t);var n={};for(var r in e){var i=ve(t.fields,r),o=Object.assign(e[r]||{},{ref:i&&i.ref});if(d4(t.names||Object.keys(e),r)){var h=Object.assign({},ve(n,r));He(h,"root",o),He(n,r,h)}else He(n,r,o)}return n},d4=function(e,t){return e.some(function(n){return n.startsWith(t+".")})},h4=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,o=r.message,h=r.path.join(".");if(!n[h])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[h]={message:l.message,type:l.code}}else n[h]={message:o,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(s){return e.push(s)})}),t){var a=n[h].types,f=a&&a[r.code];n[h]=nC(h,t,n,i,f?[].concat(f,r.message):r.message)}e.shift()}return n},p4=function(e,t,n){return n===void 0&&(n={}),function(r,i,o){try{return Promise.resolve(function(h,l){try{var a=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(f){return o.shouldUseNativeValidation&&cC({},o),{errors:{},values:n.raw?r:f}})}catch(f){return l(f)}return a&&a.then?a.then(void 0,l):a}(0,function(h){if(function(l){return l.errors!=null}(h))return{values:{},errors:f4(h4(h.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw h}))}catch(h){return Promise.reject(h)}}},Ie;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const o={};for(const h of i)o[h]=h;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),h={};for(const l of o)h[l]=i[l];return e.objectValues(h)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const h in i)Object.prototype.hasOwnProperty.call(i,h)&&o.push(h);return o},e.find=(i,o)=>{for(const h of i)if(o(h))return h},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(h=>typeof h=="string"?`'${h}'`:h).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ie||(Ie={}));var m1;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(m1||(m1={}));const be=Ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),so=e=>{switch(typeof e){case"undefined":return be.undefined;case"string":return be.string;case"number":return isNaN(e)?be.nan:be.number;case"boolean":return be.boolean;case"function":return be.function;case"bigint":return be.bigint;case"symbol":return be.symbol;case"object":return Array.isArray(e)?be.array:e===null?be.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?be.promise:typeof Map<"u"&&e instanceof Map?be.map:typeof Set<"u"&&e instanceof Set?be.set:typeof Date<"u"&&e instanceof Date?be.date:be.object;default:return be.unknown}},me=Ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Mn extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(o){return o.message},r={_errors:[]},i=o=>{for(const h of o.issues)if(h.code==="invalid_union")h.unionErrors.map(i);else if(h.code==="invalid_return_type")i(h.returnTypeError);else if(h.code==="invalid_arguments")i(h.argumentsError);else if(h.path.length===0)r._errors.push(n(h));else{let l=r,a=0;for(;a<h.path.length;){const f=h.path[a];a===h.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(n(h))):l[f]=l[f]||{_errors:[]},l=l[f],a++}}};return i(this),r}static assert(t){if(!(t instanceof Mn))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Mn.create=e=>new Mn(e);const Pl=(e,t)=>{let n;switch(e.code){case me.invalid_type:e.received===be.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ie.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ie.joinValues(e.keys,", ")}`;break;case me.invalid_union:n="Invalid input";break;case me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ie.joinValues(e.options)}`;break;case me.invalid_enum_value:n=`Invalid enum value. Expected ${Ie.joinValues(e.options)}, received '${e.received}'`;break;case me.invalid_arguments:n="Invalid function arguments";break;case me.invalid_return_type:n="Invalid function return type";break;case me.invalid_date:n="Invalid date";break;case me.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ie.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case me.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case me.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case me.custom:n="Invalid input";break;case me.invalid_intersection_types:n="Intersection results could not be merged";break;case me.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case me.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ie.assertNever(e)}return{message:n}};let m4=Pl;function um(){return m4}const fm=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],h={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="";const a=r.filter(f=>!!f).slice().reverse();for(const f of a)l=f(h,{data:t,defaultError:l}).message;return{...i,path:o,message:l}};function ye(e,t){const n=um(),r=fm({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Pl?void 0:Pl].filter(i=>!!i)});e.common.issues.push(r)}class Xt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return $e;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const o=await i.key,h=await i.value;r.push({key:o,value:h})}return Xt.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:o,value:h}=i;if(o.status==="aborted"||h.status==="aborted")return $e;o.status==="dirty"&&t.dirty(),h.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof h.value<"u"||i.alwaysSet)&&(r[o.value]=h.value)}return{status:t.value,value:r}}}const $e=Object.freeze({status:"aborted"}),Fa=e=>({status:"dirty",value:e}),ln=e=>({status:"valid",value:e}),g1=e=>e.status==="aborted",v1=e=>e.status==="dirty",ef=e=>e.status==="valid",tf=e=>typeof Promise<"u"&&e instanceof Promise;function nf(e,t,n,r){if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function uC(e,t,n,r,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var _e;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(_e||(_e={}));var La,Ia;class Er{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const y1=(e,t)=>{if(ef(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Mn(e.common.issues);return this._error=n,this._error}}};function Re(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(h,l)=>{var a,f;const{message:u}=e;return h.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:(a=u??r)!==null&&a!==void 0?a:l.defaultError}:h.code!=="invalid_type"?{message:l.defaultError}:{message:(f=u??n)!==null&&f!==void 0?f:l.defaultError}},description:i}}class Ne{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return so(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:so(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Xt,ctx:{common:t.parent.common,data:t.data,parsedType:so(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(tf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:so(t)},o=this._parseSync({data:t,path:i.path,parent:i});return y1(i,o)}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:so(t)},i=this._parse({data:t,path:r.path,parent:r}),o=await(tf(i)?i:Promise.resolve(i));return y1(r,o)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const h=t(i),l=()=>o.addIssue({code:me.custom,...r(i)});return typeof Promise<"u"&&h instanceof Promise?h.then(a=>a?!0:(l(),!1)):h?!0:(l(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new Jr({schema:this,typeName:Pe.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Wr.create(this,this._def)}nullable(){return Ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xr.create(this,this._def)}promise(){return $l.create(this,this._def)}or(t){return sf.create([this,t],this._def)}and(t){return af.create(this,t,this._def)}transform(t){return new Jr({...Re(this._def),schema:this,typeName:Pe.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new df({...Re(this._def),innerType:this,defaultValue:n,typeName:Pe.ZodDefault})}brand(){return new pC({typeName:Pe.ZodBranded,type:this,...Re(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new hf({...Re(this._def),innerType:this,catchValue:n,typeName:Pe.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return yd.create(this,t)}readonly(){return pf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const g4=/^c[^\s-]{8,}$/i,v4=/^[0-9a-z]+$/,y4=/^[0-9A-HJKMNP-TV-Z]{26}$/,w4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,b4=/^[a-z0-9_-]{21}$/i,x4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,S4=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Fh;const C4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,E4=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,T4=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",k4=new RegExp(`^${fC}$`);function dC(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function P4(e){return new RegExp(`^${dC(e)}$`)}function O4(e){let t=`${fC}T${dC(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function $4(e,t){return!!((t==="v4"||!t)&&C4.test(e)||(t==="v6"||!t)&&E4.test(e))}class Br extends Ne{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==be.string){const o=this._getOrReturnCtx(t);return ye(o,{code:me.invalid_type,expected:be.string,received:o.parsedType}),$e}const r=new Xt;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:me.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:me.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const h=t.data.length>o.value,l=t.data.length<o.value;(h||l)&&(i=this._getOrReturnCtx(t,i),h?ye(i,{code:me.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ye(i,{code:me.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")S4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"email",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Fh||(Fh=new RegExp(_4,"u")),Fh.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"emoji",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")w4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"uuid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")b4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"nanoid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")g4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"cuid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")v4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"cuid2",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")y4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"ulid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),ye(i,{validation:"url",code:me.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"regex",code:me.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),ye(i,{code:me.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),ye(i,{code:me.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),ye(i,{code:me.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?O4(o).test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{code:me.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?k4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{code:me.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?P4(o).test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{code:me.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?x4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"duration",code:me.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?$4(t.data,o.version)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"ip",code:me.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?T4.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"base64",code:me.invalid_string,message:o.message}),r.dirty()):Ie.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:me.invalid_string,..._e.errToObj(r)})}_addCheck(t){return new Br({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",..._e.errToObj(t)})}url(t){return this._addCheck({kind:"url",..._e.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",..._e.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",..._e.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",..._e.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",..._e.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",..._e.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",..._e.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",..._e.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",..._e.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,..._e.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,..._e.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",..._e.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,..._e.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,..._e.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,..._e.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,..._e.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,..._e.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,..._e.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,..._e.errToObj(n)})}nonempty(t){return this.min(1,_e.errToObj(t))}trim(){return new Br({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Br({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Br({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Br.create=e=>{var t;return new Br({checks:[],typeName:Pe.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Re(e)})};function A4(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(e.toFixed(i).replace(".","")),h=parseInt(t.toFixed(i).replace(".",""));return o%h/Math.pow(10,i)}class Hs extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==be.number){const o=this._getOrReturnCtx(t);return ye(o,{code:me.invalid_type,expected:be.number,received:o.parsedType}),$e}let r;const i=new Xt;for(const o of this._def.checks)o.kind==="int"?Ie.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),ye(r,{code:me.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),ye(r,{code:me.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),ye(r,{code:me.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?A4(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),ye(r,{code:me.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),ye(r,{code:me.not_finite,message:o.message}),i.dirty()):Ie.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,_e.toString(n))}gt(t,n){return this.setLimit("min",t,!1,_e.toString(n))}lte(t,n){return this.setLimit("max",t,!0,_e.toString(n))}lt(t,n){return this.setLimit("max",t,!1,_e.toString(n))}setLimit(t,n,r,i){return new Hs({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:_e.toString(i)}]})}_addCheck(t){return new Hs({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:_e.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_e.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_e.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_e.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_e.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:_e.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:_e.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_e.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_e.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ie.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Hs.create=e=>new Hs({checks:[],typeName:Pe.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Re(e)});class Ws extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==be.bigint){const o=this._getOrReturnCtx(t);return ye(o,{code:me.invalid_type,expected:be.bigint,received:o.parsedType}),$e}let r;const i=new Xt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),ye(r,{code:me.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),ye(r,{code:me.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),ye(r,{code:me.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ie.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,_e.toString(n))}gt(t,n){return this.setLimit("min",t,!1,_e.toString(n))}lte(t,n){return this.setLimit("max",t,!0,_e.toString(n))}lt(t,n){return this.setLimit("max",t,!1,_e.toString(n))}setLimit(t,n,r,i){return new Ws({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:_e.toString(i)}]})}_addCheck(t){return new Ws({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_e.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_e.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_e.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_e.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:_e.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ws.create=e=>{var t;return new Ws({checks:[],typeName:Pe.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Re(e)})};class dm extends Ne{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==be.boolean){const r=this._getOrReturnCtx(t);return ye(r,{code:me.invalid_type,expected:be.boolean,received:r.parsedType}),$e}return ln(t.data)}}dm.create=e=>new dm({typeName:Pe.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Re(e)});class Ol extends Ne{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==be.date){const o=this._getOrReturnCtx(t);return ye(o,{code:me.invalid_type,expected:be.date,received:o.parsedType}),$e}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return ye(o,{code:me.invalid_date}),$e}const r=new Xt;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:me.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:me.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Ie.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ol({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:_e.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:_e.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Ol.create=e=>new Ol({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Pe.ZodDate,...Re(e)});class hm extends Ne{_parse(t){if(this._getType(t)!==be.symbol){const r=this._getOrReturnCtx(t);return ye(r,{code:me.invalid_type,expected:be.symbol,received:r.parsedType}),$e}return ln(t.data)}}hm.create=e=>new hm({typeName:Pe.ZodSymbol,...Re(e)});class rf extends Ne{_parse(t){if(this._getType(t)!==be.undefined){const r=this._getOrReturnCtx(t);return ye(r,{code:me.invalid_type,expected:be.undefined,received:r.parsedType}),$e}return ln(t.data)}}rf.create=e=>new rf({typeName:Pe.ZodUndefined,...Re(e)});class of extends Ne{_parse(t){if(this._getType(t)!==be.null){const r=this._getOrReturnCtx(t);return ye(r,{code:me.invalid_type,expected:be.null,received:r.parsedType}),$e}return ln(t.data)}}of.create=e=>new of({typeName:Pe.ZodNull,...Re(e)});class pm extends Ne{constructor(){super(...arguments),this._any=!0}_parse(t){return ln(t.data)}}pm.create=e=>new pm({typeName:Pe.ZodAny,...Re(e)});class xs extends Ne{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ln(t.data)}}xs.create=e=>new xs({typeName:Pe.ZodUnknown,...Re(e)});class Vi extends Ne{_parse(t){const n=this._getOrReturnCtx(t);return ye(n,{code:me.invalid_type,expected:be.never,received:n.parsedType}),$e}}Vi.create=e=>new Vi({typeName:Pe.ZodNever,...Re(e)});class mm extends Ne{_parse(t){if(this._getType(t)!==be.undefined){const r=this._getOrReturnCtx(t);return ye(r,{code:me.invalid_type,expected:be.void,received:r.parsedType}),$e}return ln(t.data)}}mm.create=e=>new mm({typeName:Pe.ZodVoid,...Re(e)});class xr extends Ne{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==be.array)return ye(n,{code:me.invalid_type,expected:be.array,received:n.parsedType}),$e;if(i.exactLength!==null){const h=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(h||l)&&(ye(n,{code:h?me.too_big:me.too_small,minimum:l?i.exactLength.value:void 0,maximum:h?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ye(n,{code:me.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ye(n,{code:me.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((h,l)=>i.type._parseAsync(new Er(n,h,n.path,l)))).then(h=>Xt.mergeArray(r,h));const o=[...n.data].map((h,l)=>i.type._parseSync(new Er(n,h,n.path,l)));return Xt.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new xr({...this._def,minLength:{value:t,message:_e.toString(n)}})}max(t,n){return new xr({...this._def,maxLength:{value:t,message:_e.toString(n)}})}length(t,n){return new xr({...this._def,exactLength:{value:t,message:_e.toString(n)}})}nonempty(t){return this.min(1,t)}}xr.create=(e,t)=>new xr({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pe.ZodArray,...Re(t)});function qo(e){if(e instanceof lt){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Wr.create(qo(r))}return new lt({...e._def,shape:()=>t})}else return e instanceof xr?new xr({...e._def,type:qo(e.element)}):e instanceof Wr?Wr.create(qo(e.unwrap())):e instanceof Ao?Ao.create(qo(e.unwrap())):e instanceof Qr?Qr.create(e.items.map(t=>qo(t))):e}class lt extends Ne{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Ie.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==be.object){const f=this._getOrReturnCtx(t);return ye(f,{code:me.invalid_type,expected:be.object,received:f.parsedType}),$e}const{status:r,ctx:i}=this._processInputParams(t),{shape:o,keys:h}=this._getCached(),l=[];if(!(this._def.catchall instanceof Vi&&this._def.unknownKeys==="strip"))for(const f in i.data)h.includes(f)||l.push(f);const a=[];for(const f of h){const u=o[f],s=i.data[f];a.push({key:{status:"valid",value:f},value:u._parse(new Er(i,s,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Vi){const f=this._def.unknownKeys;if(f==="passthrough")for(const u of l)a.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(f==="strict")l.length>0&&(ye(i,{code:me.unrecognized_keys,keys:l}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const u of l){const s=i.data[u];a.push({key:{status:"valid",value:u},value:f._parse(new Er(i,s,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const u of a){const s=await u.key,c=await u.value;f.push({key:s,value:c,alwaysSet:u.alwaysSet})}return f}).then(f=>Xt.mergeObjectSync(r,f)):Xt.mergeObjectSync(r,a)}get shape(){return this._def.shape()}strict(t){return _e.errToObj,new lt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o,h,l;const a=(h=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&h!==void 0?h:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=_e.errToObj(t).message)!==null&&l!==void 0?l:a}:{message:a}}}:{}})}strip(){return new lt({...this._def,unknownKeys:"strip"})}passthrough(){return new lt({...this._def,unknownKeys:"passthrough"})}extend(t){return new lt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new lt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Pe.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new lt({...this._def,catchall:t})}pick(t){const n={};return Ie.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new lt({...this._def,shape:()=>n})}omit(t){const n={};return Ie.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new lt({...this._def,shape:()=>n})}deepPartial(){return qo(this)}partial(t){const n={};return Ie.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new lt({...this._def,shape:()=>n})}required(t){const n={};return Ie.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Wr;)o=o._def.innerType;n[r]=o}}),new lt({...this._def,shape:()=>n})}keyof(){return hC(Ie.objectKeys(this.shape))}}lt.create=(e,t)=>new lt({shape:()=>e,unknownKeys:"strip",catchall:Vi.create(),typeName:Pe.ZodObject,...Re(t)});lt.strictCreate=(e,t)=>new lt({shape:()=>e,unknownKeys:"strict",catchall:Vi.create(),typeName:Pe.ZodObject,...Re(t)});lt.lazycreate=(e,t)=>new lt({shape:e,unknownKeys:"strip",catchall:Vi.create(),typeName:Pe.ZodObject,...Re(t)});class sf extends Ne{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const h=o.map(l=>new Mn(l.ctx.common.issues));return ye(n,{code:me.invalid_union,unionErrors:h}),$e}if(n.common.async)return Promise.all(r.map(async o=>{const h={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:h}),ctx:h}})).then(i);{let o;const h=[];for(const a of r){const f={...n,common:{...n.common,issues:[]},parent:null},u=a._parseSync({data:n.data,path:n.path,parent:f});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:f}),f.common.issues.length&&h.push(f.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const l=h.map(a=>new Mn(a));return ye(n,{code:me.invalid_union,unionErrors:l}),$e}}get options(){return this._def.options}}sf.create=(e,t)=>new sf({options:e,typeName:Pe.ZodUnion,...Re(t)});const Mr=e=>e instanceof cf?Mr(e.schema):e instanceof Jr?Mr(e.innerType()):e instanceof uf?[e.value]:e instanceof $o?e.options:e instanceof ff?Ie.objectValues(e.enum):e instanceof df?Mr(e._def.innerType):e instanceof rf?[void 0]:e instanceof of?[null]:e instanceof Wr?[void 0,...Mr(e.unwrap())]:e instanceof Ao?[null,...Mr(e.unwrap())]:e instanceof pC||e instanceof pf?Mr(e.unwrap()):e instanceof hf?Mr(e._def.innerType):[];class pv extends Ne{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==be.object)return ye(n,{code:me.invalid_type,expected:be.object,received:n.parsedType}),$e;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(ye(n,{code:me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),$e)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const o of n){const h=Mr(o.shape[t]);if(!h.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of h){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,o)}}return new pv({typeName:Pe.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Re(r)})}}function gm(e,t){const n=so(e),r=so(t);if(e===t)return{valid:!0,data:e};if(n===be.object&&r===be.object){const i=Ie.objectKeys(t),o=Ie.objectKeys(e).filter(l=>i.indexOf(l)!==-1),h={...e,...t};for(const l of o){const a=gm(e[l],t[l]);if(!a.valid)return{valid:!1};h[l]=a.data}return{valid:!0,data:h}}else if(n===be.array&&r===be.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const h=e[o],l=t[o],a=gm(h,l);if(!a.valid)return{valid:!1};i.push(a.data)}return{valid:!0,data:i}}else return n===be.date&&r===be.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class af extends Ne{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(o,h)=>{if(g1(o)||g1(h))return $e;const l=gm(o.value,h.value);return l.valid?((v1(o)||v1(h))&&n.dirty(),{status:n.value,value:l.data}):(ye(r,{code:me.invalid_intersection_types}),$e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,h])=>i(o,h)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}af.create=(e,t,n)=>new af({left:e,right:t,typeName:Pe.ZodIntersection,...Re(n)});class Qr extends Ne{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==be.array)return ye(r,{code:me.invalid_type,expected:be.array,received:r.parsedType}),$e;if(r.data.length<this._def.items.length)return ye(r,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$e;!this._def.rest&&r.data.length>this._def.items.length&&(ye(r,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((h,l)=>{const a=this._def.items[l]||this._def.rest;return a?a._parse(new Er(r,h,r.path,l)):null}).filter(h=>!!h);return r.common.async?Promise.all(o).then(h=>Xt.mergeArray(n,h)):Xt.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new Qr({...this._def,rest:t})}}Qr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qr({items:e,typeName:Pe.ZodTuple,rest:null,...Re(t)})};class lf extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==be.object)return ye(r,{code:me.invalid_type,expected:be.object,received:r.parsedType}),$e;const i=[],o=this._def.keyType,h=this._def.valueType;for(const l in r.data)i.push({key:o._parse(new Er(r,l,r.path,l)),value:h._parse(new Er(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Xt.mergeObjectAsync(n,i):Xt.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ne?new lf({keyType:t,valueType:n,typeName:Pe.ZodRecord,...Re(r)}):new lf({keyType:Br.create(),valueType:t,typeName:Pe.ZodRecord,...Re(n)})}}class vm extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==be.map)return ye(r,{code:me.invalid_type,expected:be.map,received:r.parsedType}),$e;const i=this._def.keyType,o=this._def.valueType,h=[...r.data.entries()].map(([l,a],f)=>({key:i._parse(new Er(r,l,r.path,[f,"key"])),value:o._parse(new Er(r,a,r.path,[f,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const a of h){const f=await a.key,u=await a.value;if(f.status==="aborted"||u.status==="aborted")return $e;(f.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(f.value,u.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const a of h){const f=a.key,u=a.value;if(f.status==="aborted"||u.status==="aborted")return $e;(f.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(f.value,u.value)}return{status:n.value,value:l}}}}vm.create=(e,t,n)=>new vm({valueType:t,keyType:e,typeName:Pe.ZodMap,...Re(n)});class Ys extends Ne{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==be.set)return ye(r,{code:me.invalid_type,expected:be.set,received:r.parsedType}),$e;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ye(r,{code:me.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ye(r,{code:me.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function h(a){const f=new Set;for(const u of a){if(u.status==="aborted")return $e;u.status==="dirty"&&n.dirty(),f.add(u.value)}return{status:n.value,value:f}}const l=[...r.data.values()].map((a,f)=>o._parse(new Er(r,a,r.path,f)));return r.common.async?Promise.all(l).then(a=>h(a)):h(l)}min(t,n){return new Ys({...this._def,minSize:{value:t,message:_e.toString(n)}})}max(t,n){return new Ys({...this._def,maxSize:{value:t,message:_e.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Ys.create=(e,t)=>new Ys({valueType:e,minSize:null,maxSize:null,typeName:Pe.ZodSet,...Re(t)});class el extends Ne{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==be.function)return ye(n,{code:me.invalid_type,expected:be.function,received:n.parsedType}),$e;function r(l,a){return fm({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,um(),Pl].filter(f=>!!f),issueData:{code:me.invalid_arguments,argumentsError:a}})}function i(l,a){return fm({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,um(),Pl].filter(f=>!!f),issueData:{code:me.invalid_return_type,returnTypeError:a}})}const o={errorMap:n.common.contextualErrorMap},h=n.data;if(this._def.returns instanceof $l){const l=this;return ln(async function(...a){const f=new Mn([]),u=await l._def.args.parseAsync(a,o).catch(d=>{throw f.addIssue(r(a,d)),f}),s=await Reflect.apply(h,this,u);return await l._def.returns._def.type.parseAsync(s,o).catch(d=>{throw f.addIssue(i(s,d)),f})})}else{const l=this;return ln(function(...a){const f=l._def.args.safeParse(a,o);if(!f.success)throw new Mn([r(a,f.error)]);const u=Reflect.apply(h,this,f.data),s=l._def.returns.safeParse(u,o);if(!s.success)throw new Mn([i(u,s.error)]);return s.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new el({...this._def,args:Qr.create(t).rest(xs.create())})}returns(t){return new el({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new el({args:t||Qr.create([]).rest(xs.create()),returns:n||xs.create(),typeName:Pe.ZodFunction,...Re(r)})}}class cf extends Ne{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}cf.create=(e,t)=>new cf({getter:e,typeName:Pe.ZodLazy,...Re(t)});class uf extends Ne{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return ye(n,{received:n.data,code:me.invalid_literal,expected:this._def.value}),$e}return{status:"valid",value:t.data}}get value(){return this._def.value}}uf.create=(e,t)=>new uf({value:e,typeName:Pe.ZodLiteral,...Re(t)});function hC(e,t){return new $o({values:e,typeName:Pe.ZodEnum,...Re(t)})}class $o extends Ne{constructor(){super(...arguments),La.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return ye(n,{expected:Ie.joinValues(r),received:n.parsedType,code:me.invalid_type}),$e}if(nf(this,La)||uC(this,La,new Set(this._def.values)),!nf(this,La).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return ye(n,{received:n.data,code:me.invalid_enum_value,options:r}),$e}return ln(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return $o.create(t,{...this._def,...n})}exclude(t,n=this._def){return $o.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}La=new WeakMap;$o.create=hC;class ff extends Ne{constructor(){super(...arguments),Ia.set(this,void 0)}_parse(t){const n=Ie.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==be.string&&r.parsedType!==be.number){const i=Ie.objectValues(n);return ye(r,{expected:Ie.joinValues(i),received:r.parsedType,code:me.invalid_type}),$e}if(nf(this,Ia)||uC(this,Ia,new Set(Ie.getValidEnumValues(this._def.values))),!nf(this,Ia).has(t.data)){const i=Ie.objectValues(n);return ye(r,{received:r.data,code:me.invalid_enum_value,options:i}),$e}return ln(t.data)}get enum(){return this._def.values}}Ia=new WeakMap;ff.create=(e,t)=>new ff({values:e,typeName:Pe.ZodNativeEnum,...Re(t)});class $l extends Ne{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==be.promise&&n.common.async===!1)return ye(n,{code:me.invalid_type,expected:be.promise,received:n.parsedType}),$e;const r=n.parsedType===be.promise?n.data:Promise.resolve(n.data);return ln(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}$l.create=(e,t)=>new $l({type:e,typeName:Pe.ZodPromise,...Re(t)});class Jr extends Ne{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:h=>{ye(r,h),h.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const h=i.transform(r.data,o);if(r.common.async)return Promise.resolve(h).then(async l=>{if(n.value==="aborted")return $e;const a=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return a.status==="aborted"?$e:a.status==="dirty"||n.value==="dirty"?Fa(a.value):a});{if(n.value==="aborted")return $e;const l=this._def.schema._parseSync({data:h,path:r.path,parent:r});return l.status==="aborted"?$e:l.status==="dirty"||n.value==="dirty"?Fa(l.value):l}}if(i.type==="refinement"){const h=l=>{const a=i.refinement(l,o);if(r.common.async)return Promise.resolve(a);if(a instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?$e:(l.status==="dirty"&&n.dirty(),h(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?$e:(l.status==="dirty"&&n.dirty(),h(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const h=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ef(h))return h;const l=i.transform(h.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(h=>ef(h)?Promise.resolve(i.transform(h.value,o)).then(l=>({status:n.value,value:l})):h);Ie.assertNever(i)}}Jr.create=(e,t,n)=>new Jr({schema:e,typeName:Pe.ZodEffects,effect:t,...Re(n)});Jr.createWithPreprocess=(e,t,n)=>new Jr({schema:t,effect:{type:"preprocess",transform:e},typeName:Pe.ZodEffects,...Re(n)});class Wr extends Ne{_parse(t){return this._getType(t)===be.undefined?ln(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wr.create=(e,t)=>new Wr({innerType:e,typeName:Pe.ZodOptional,...Re(t)});class Ao extends Ne{_parse(t){return this._getType(t)===be.null?ln(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ao.create=(e,t)=>new Ao({innerType:e,typeName:Pe.ZodNullable,...Re(t)});class df extends Ne{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===be.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}df.create=(e,t)=>new df({innerType:e,typeName:Pe.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Re(t)});class hf extends Ne{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return tf(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Mn(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Mn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}hf.create=(e,t)=>new hf({innerType:e,typeName:Pe.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Re(t)});class ym extends Ne{_parse(t){if(this._getType(t)!==be.nan){const r=this._getOrReturnCtx(t);return ye(r,{code:me.invalid_type,expected:be.nan,received:r.parsedType}),$e}return{status:"valid",value:t.data}}}ym.create=e=>new ym({typeName:Pe.ZodNaN,...Re(e)});class pC extends Ne{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class yd extends Ne{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?$e:o.status==="dirty"?(n.dirty(),Fa(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?$e:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new yd({in:t,out:n,typeName:Pe.ZodPipeline})}}class pf extends Ne{_parse(t){const n=this._def.innerType._parse(t),r=i=>(ef(i)&&(i.value=Object.freeze(i.value)),i);return tf(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}pf.create=(e,t)=>new pf({innerType:e,typeName:Pe.ZodReadonly,...Re(t)});lt.lazycreate;var Pe;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Pe||(Pe={}));const Ca=Br.create;Hs.create;ym.create;Ws.create;const Ea=dm.create;Ol.create;hm.create;rf.create;of.create;pm.create;xs.create;Vi.create;mm.create;xr.create;const R4=lt.create;lt.strictCreate;sf.create;pv.create;af.create;Qr.create;lf.create;vm.create;Ys.create;el.create;cf.create;uf.create;$o.create;ff.create;$l.create;Jr.create;Wr.create;Ao.create;Jr.createWithPreprocess;yd.create;const wm="horizontal",M4=["horizontal","vertical"],mC=x.forwardRef((e,t)=>{const{decorative:n,orientation:r=wm,...i}=e,o=gC(r)?r:wm,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return x.createElement(Se.div,ae({"data-orientation":o},l,i,{ref:t}))});mC.propTypes={orientation(e,t,n){const r=e[t],i=String(r);return r&&!gC(r)?new Error(D4(i,n)):null}};function D4(e,t){return`Invalid prop \`orientation\` of value \`${e}\` supplied to \`${t}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${wm}\`.`}function gC(e){return M4.includes(e)}const vC=mC,Ct=x.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>T.jsx(vC,{ref:i,decorative:n,orientation:t,className:we("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Ct.displayName=vC.displayName;const N4=x.forwardRef((e,t)=>x.createElement(Se.label,ae({},e,{ref:t,onMouseDown:n=>{var r;(r=e.onMouseDown)===null||r===void 0||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),yC=N4,F4=Gf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),mv=x.forwardRef(({className:e,disabled:t,...n},r)=>T.jsx(yC,{ref:r,className:we(F4(),e,t?"opacity-50":"","select-none"),...n}));mv.displayName=yC.displayName;const L4=KD,wC=x.createContext({}),Wo=({...e})=>T.jsx(wC.Provider,{value:{name:e.name},children:T.jsx(JD,{...e})}),wd=()=>{const e=x.useContext(wC),t=x.useContext(bC),{getFieldState:n,formState:r}=vd(),i=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...i}},bC=x.createContext({}),no=x.forwardRef(({className:e,...t},n)=>{const r=x.useId();return T.jsx(bC.Provider,{value:{id:r},children:T.jsx("div",{ref:n,className:we("space-y-2",e),...t})})});no.displayName="FormItem";const ro=x.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:i}=wd();return T.jsx(mv,{ref:n,className:we(r&&"text-destructive","text-sm",e),htmlFor:i,...t})});ro.displayName="FormLabel";const io=x.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:o}=wd();return T.jsx(Sr,{ref:t,id:r,"aria-describedby":n?`${i} ${o}`:`${i}`,"aria-invalid":!!n,...e})});io.displayName="FormControl";const oo=x.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=wd();return T.jsx("p",{ref:n,id:r,className:we("text-[0.8rem] text-muted-foreground",e),...t})});oo.displayName="FormDescription";const I4=x.forwardRef(({className:e,children:t,...n},r)=>{const{error:i,formMessageId:o}=wd(),h=i?String(i==null?void 0:i.message):t;return h?T.jsx("p",{ref:r,id:o,className:we("text-[0.8rem] font-medium text-destructive",e),...n,children:h}):null});I4.displayName="FormMessage";function gv(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const xC="Switch",[j4,z7]=qt(xC),[B4,z4]=j4(xC),U4=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:o,required:h,disabled:l,value:a="on",onCheckedChange:f,...u}=e,[s,c]=x.useState(null),d=Oe(t,y=>c(y)),p=x.useRef(!1),g=s?!!s.closest("form"):!0,[m=!1,v]=Fn({prop:i,defaultProp:o,onChange:f});return x.createElement(B4,{scope:n,checked:m,disabled:l},x.createElement(Se.button,ae({type:"button",role:"switch","aria-checked":m,"aria-required":h,"data-state":SC(m),"data-disabled":l?"":void 0,disabled:l,value:a},u,{ref:d,onClick:pe(e.onClick,y=>{v(w=>!w),g&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})),g&&x.createElement(W4,{control:s,bubbles:!p.current,name:r,value:a,checked:m,required:h,disabled:l,style:{transform:"translateX(-100%)"}}))}),V4="SwitchThumb",H4=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=z4(V4,n);return x.createElement(Se.span,ae({"data-state":SC(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:t}))}),W4=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,o=x.useRef(null),h=gv(n),l=Qg(t);return x.useEffect(()=>{const a=o.current,f=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(f,"checked").set;if(h!==n&&s){const c=new Event("click",{bubbles:r});s.call(a,n),a.dispatchEvent(c)}},[h,n,r]),x.createElement("input",ae({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function SC(e){return e?"checked":"unchecked"}const _C=U4,Y4=H4,Wn=x.forwardRef(({className:e,...t},n)=>T.jsx(_C,{className:we("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),tabIndex:-1,...t,ref:n,children:T.jsx(Y4,{className:we("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Wn.displayName=_C.displayName;const X4=x.createContext(void 0);function la(e){const t=x.useContext(X4);return e||t||"ltr"}const Lh="rovingFocusGroup.onEntryFocus",G4={bubbles:!1,cancelable:!0},vv="RovingFocusGroup",[bm,CC,K4]=Hl(vv),[q4,bd]=qt(vv,[K4]),[Z4,Q4]=q4(vv),J4=x.forwardRef((e,t)=>x.createElement(bm.Provider,{scope:e.__scopeRovingFocusGroup},x.createElement(bm.Slot,{scope:e.__scopeRovingFocusGroup},x.createElement(e6,ae({},e,{ref:t}))))),e6=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:h,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:a,onEntryFocus:f,...u}=e,s=x.useRef(null),c=Oe(t,s),d=la(o),[p=null,g]=Fn({prop:h,defaultProp:l,onChange:a}),[m,v]=x.useState(!1),y=rt(f),w=CC(n),b=x.useRef(!1),[S,_]=x.useState(0);return x.useEffect(()=>{const E=s.current;if(E)return E.addEventListener(Lh,y),()=>E.removeEventListener(Lh,y)},[y]),x.createElement(Z4,{scope:n,orientation:r,dir:d,loop:i,currentTabStopId:p,onItemFocus:x.useCallback(E=>g(E),[g]),onItemShiftTab:x.useCallback(()=>v(!0),[]),onFocusableItemAdd:x.useCallback(()=>_(E=>E+1),[]),onFocusableItemRemove:x.useCallback(()=>_(E=>E-1),[])},x.createElement(Se.div,ae({tabIndex:m||S===0?-1:0,"data-orientation":r},u,{ref:c,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{b.current=!0}),onFocus:pe(e.onFocus,E=>{const C=!b.current;if(E.target===E.currentTarget&&C&&!m){const P=new CustomEvent(Lh,G4);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const N=w().filter(F=>F.focusable),B=N.find(F=>F.active),I=N.find(F=>F.id===p),D=[B,I,...N].filter(Boolean).map(F=>F.ref.current);EC(D)}}b.current=!1}),onBlur:pe(e.onBlur,()=>v(!1))})))}),t6="RovingFocusGroupItem",n6=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...h}=e,l=an(),a=o||l,f=Q4(t6,n),u=f.currentTabStopId===a,s=CC(n),{onFocusableItemAdd:c,onFocusableItemRemove:d}=f;return x.useEffect(()=>{if(r)return c(),()=>d()},[r,c,d]),x.createElement(bm.ItemSlot,{scope:n,id:a,focusable:r,active:i},x.createElement(Se.span,ae({tabIndex:u?0:-1,"data-orientation":f.orientation},h,{ref:t,onMouseDown:pe(e.onMouseDown,p=>{r?f.onItemFocus(a):p.preventDefault()}),onFocus:pe(e.onFocus,()=>f.onItemFocus(a)),onKeyDown:pe(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){f.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=o6(p,f.orientation,f.dir);if(g!==void 0){p.preventDefault();let v=s().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=f.loop?s6(v,y+1):v.slice(y+1)}setTimeout(()=>EC(v))}})})))}),r6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function i6(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function o6(e,t,n){const r=i6(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return r6[r]}function EC(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function s6(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const TC=J4,kC=n6,PC="Tabs",[a6,U7]=qt(PC,[bd]),OC=bd(),[l6,yv]=a6(PC),c6=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:h="horizontal",dir:l,activationMode:a="automatic",...f}=e,u=la(l),[s,c]=Fn({prop:r,onChange:i,defaultProp:o});return x.createElement(l6,{scope:n,baseId:an(),value:s,onValueChange:c,orientation:h,dir:u,activationMode:a},x.createElement(Se.div,ae({dir:u,"data-orientation":h},f,{ref:t})))}),u6="TabsList",f6=x.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,o=yv(u6,n),h=OC(n);return x.createElement(TC,ae({asChild:!0},h,{orientation:o.orientation,dir:o.dir,loop:r}),x.createElement(Se.div,ae({role:"tablist","aria-orientation":o.orientation},i,{ref:t})))}),d6="TabsTrigger",h6=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=e,h=yv(d6,n),l=OC(n),a=$C(h.baseId,r),f=AC(h.baseId,r),u=r===h.value;return x.createElement(kC,ae({asChild:!0},l,{focusable:!i,active:u}),x.createElement(Se.button,ae({type:"button",role:"tab","aria-selected":u,"aria-controls":f,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:a},o,{ref:t,onMouseDown:pe(e.onMouseDown,s=>{!i&&s.button===0&&s.ctrlKey===!1?h.onValueChange(r):s.preventDefault()}),onKeyDown:pe(e.onKeyDown,s=>{[" ","Enter"].includes(s.key)&&h.onValueChange(r)}),onFocus:pe(e.onFocus,()=>{const s=h.activationMode!=="manual";!u&&!i&&s&&h.onValueChange(r)})})))}),p6="TabsContent",m6=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...h}=e,l=yv(p6,n),a=$C(l.baseId,r),f=AC(l.baseId,r),u=r===l.value,s=x.useRef(u);return x.useEffect(()=>{const c=requestAnimationFrame(()=>s.current=!1);return()=>cancelAnimationFrame(c)},[]),x.createElement(kt,{present:i||u},({present:c})=>x.createElement(Se.div,ae({"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":a,hidden:!c,id:f,tabIndex:0},h,{ref:t,style:{...e.style,animationDuration:s.current?"0s":void 0}}),c&&o))});function $C(e,t){return`${e}-trigger-${t}`}function AC(e,t){return`${e}-content-${t}`}const g6=c6,RC=f6,MC=h6,DC=m6,v6=g6,NC=x.forwardRef(({className:e,...t},n)=>T.jsx(RC,{ref:n,className:we("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),tabIndex:-1,...t}));NC.displayName=RC.displayName;const ja=x.forwardRef(({className:e,...t},n)=>T.jsx(MC,{ref:n,className:we("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),tabIndex:-1,...t}));ja.displayName=MC.displayName;const Ba=x.forwardRef(({className:e,...t},n)=>T.jsx(DC,{ref:n,className:we("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),tabIndex:-1,...t}));Ba.displayName=DC.displayName;function Al(e,[t,n]){return Math.min(n,Math.max(t,e))}function y6(e,t){return x.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const FC="ScrollArea",[LC,V7]=qt(FC),[w6,Ln]=LC(FC),b6=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:o=600,...h}=e,[l,a]=x.useState(null),[f,u]=x.useState(null),[s,c]=x.useState(null),[d,p]=x.useState(null),[g,m]=x.useState(null),[v,y]=x.useState(0),[w,b]=x.useState(0),[S,_]=x.useState(!1),[E,C]=x.useState(!1),P=Oe(t,B=>a(B)),N=la(i);return x.createElement(w6,{scope:n,type:r,dir:N,scrollHideDelay:o,scrollArea:l,viewport:f,onViewportChange:u,content:s,onContentChange:c,scrollbarX:d,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:m,scrollbarYEnabled:E,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:b},x.createElement(Se.div,ae({dir:N},h,{ref:P,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})))}),x6="ScrollAreaViewport",S6=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,o=Ln(x6,n),h=x.useRef(null),l=Oe(t,h,o.onViewportChange);return x.createElement(x.Fragment,null,x.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),x.createElement(Se.div,ae({"data-radix-scroll-area-viewport":""},i,{ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style}}),x.createElement("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),ni="ScrollAreaScrollbar",IC=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Ln(ni,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:h}=i,l=e.orientation==="horizontal";return x.useEffect(()=>(l?o(!0):h(!0),()=>{l?o(!1):h(!1)}),[l,o,h]),i.type==="hover"?x.createElement(_6,ae({},r,{ref:t,forceMount:n})):i.type==="scroll"?x.createElement(C6,ae({},r,{ref:t,forceMount:n})):i.type==="auto"?x.createElement(jC,ae({},r,{ref:t,forceMount:n})):i.type==="always"?x.createElement(wv,ae({},r,{ref:t})):null}),_6=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Ln(ni,e.__scopeScrollArea),[o,h]=x.useState(!1);return x.useEffect(()=>{const l=i.scrollArea;let a=0;if(l){const f=()=>{window.clearTimeout(a),h(!0)},u=()=>{a=window.setTimeout(()=>h(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",f),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(a),l.removeEventListener("pointerenter",f),l.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),x.createElement(kt,{present:n||o},x.createElement(jC,ae({"data-state":o?"visible":"hidden"},r,{ref:t})))}),C6=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Ln(ni,e.__scopeScrollArea),o=e.orientation==="horizontal",h=Sd(()=>a("SCROLL_END"),100),[l,a]=y6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>a("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,i.scrollHideDelay,a]),x.useEffect(()=>{const f=i.viewport,u=o?"scrollLeft":"scrollTop";if(f){let s=f[u];const c=()=>{const d=f[u];s!==d&&(a("SCROLL"),h()),s=d};return f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[i.viewport,o,a,h]),x.createElement(kt,{present:n||l!=="hidden"},x.createElement(wv,ae({"data-state":l==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:pe(e.onPointerEnter,()=>a("POINTER_ENTER")),onPointerLeave:pe(e.onPointerLeave,()=>a("POINTER_LEAVE"))})))}),jC=x.forwardRef((e,t)=>{const n=Ln(ni,e.__scopeScrollArea),{forceMount:r,...i}=e,[o,h]=x.useState(!1),l=e.orientation==="horizontal",a=Sd(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;h(l?f:u)}},10);return Xs(n.viewport,a),Xs(n.content,a),x.createElement(kt,{present:r||o},x.createElement(wv,ae({"data-state":o?"visible":"hidden"},i,{ref:t})))}),wv=x.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Ln(ni,e.__scopeScrollArea),o=x.useRef(null),h=x.useRef(0),[l,a]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=VC(l.viewport,l.content),u={...r,sizes:l,onSizesChange:a,hasThumb:f>0&&f<1,onThumbChange:c=>o.current=c,onThumbPointerUp:()=>h.current=0,onThumbPointerDown:c=>h.current=c};function s(c,d){return R6(c,h.current,l,d)}return n==="horizontal"?x.createElement(E6,ae({},u,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const c=i.viewport.scrollLeft,d=w1(c,l,i.dir);o.current.style.transform=`translate3d(${d}px, 0, 0)`}},onWheelScroll:c=>{i.viewport&&(i.viewport.scrollLeft=c)},onDragScroll:c=>{i.viewport&&(i.viewport.scrollLeft=s(c,i.dir))}})):n==="vertical"?x.createElement(T6,ae({},u,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const c=i.viewport.scrollTop,d=w1(c,l);o.current.style.transform=`translate3d(0, ${d}px, 0)`}},onWheelScroll:c=>{i.viewport&&(i.viewport.scrollTop=c)},onDragScroll:c=>{i.viewport&&(i.viewport.scrollTop=s(c))}})):null}),E6=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=Ln(ni,e.__scopeScrollArea),[h,l]=x.useState(),a=x.useRef(null),f=Oe(t,a,o.onScrollbarXChange);return x.useEffect(()=>{a.current&&l(getComputedStyle(a.current))},[a]),x.createElement(zC,ae({"data-orientation":"horizontal"},i,{ref:f,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xd(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,s)=>{if(o.viewport){const c=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(c),WC(c,s)&&u.preventDefault()}},onResize:()=>{a.current&&o.viewport&&h&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:a.current.clientWidth,paddingStart:mf(h.paddingLeft),paddingEnd:mf(h.paddingRight)}})}}))}),T6=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=Ln(ni,e.__scopeScrollArea),[h,l]=x.useState(),a=x.useRef(null),f=Oe(t,a,o.onScrollbarYChange);return x.useEffect(()=>{a.current&&l(getComputedStyle(a.current))},[a]),x.createElement(zC,ae({"data-orientation":"vertical"},i,{ref:f,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xd(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,s)=>{if(o.viewport){const c=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(c),WC(c,s)&&u.preventDefault()}},onResize:()=>{a.current&&o.viewport&&h&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:a.current.clientHeight,paddingStart:mf(h.paddingTop),paddingEnd:mf(h.paddingBottom)}})}}))}),[k6,BC]=LC(ni),zC=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:h,onThumbPointerDown:l,onThumbPositionChange:a,onDragScroll:f,onWheelScroll:u,onResize:s,...c}=e,d=Ln(ni,n),[p,g]=x.useState(null),m=Oe(t,P=>g(P)),v=x.useRef(null),y=x.useRef(""),w=d.viewport,b=r.content-r.viewport,S=rt(u),_=rt(a),E=Sd(s,10);function C(P){if(v.current){const N=P.clientX-v.current.left,B=P.clientY-v.current.top;f({x:N,y:B})}}return x.useEffect(()=>{const P=N=>{const B=N.target;(p==null?void 0:p.contains(B))&&S(N,b)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[w,p,b,S]),x.useEffect(_,[r,_]),Xs(p,E),Xs(d.content,E),x.createElement(k6,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:rt(o),onThumbPointerUp:rt(h),onThumbPositionChange:_,onThumbPointerDown:rt(l)},x.createElement(Se.div,ae({},c,{ref:m,style:{position:"absolute",...c.style},onPointerDown:pe(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),v.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",d.viewport&&(d.viewport.style.scrollBehavior="auto"),C(P))}),onPointerMove:pe(e.onPointerMove,C),onPointerUp:pe(e.onPointerUp,P=>{const N=P.target;N.hasPointerCapture(P.pointerId)&&N.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=y.current,d.viewport&&(d.viewport.style.scrollBehavior=""),v.current=null})})))}),xm="ScrollAreaThumb",P6=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=BC(xm,e.__scopeScrollArea);return x.createElement(kt,{present:n||i.hasThumb},x.createElement(O6,ae({ref:t},r)))}),O6=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,o=Ln(xm,n),h=BC(xm,n),{onThumbPositionChange:l}=h,a=Oe(t,s=>h.onThumbChange(s)),f=x.useRef(),u=Sd(()=>{f.current&&(f.current(),f.current=void 0)},100);return x.useEffect(()=>{const s=o.viewport;if(s){const c=()=>{if(u(),!f.current){const d=M6(s,l);f.current=d,l()}};return l(),s.addEventListener("scroll",c),()=>s.removeEventListener("scroll",c)}},[o.viewport,u,l]),x.createElement(Se.div,ae({"data-state":h.hasThumb?"visible":"hidden"},i,{ref:a,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:pe(e.onPointerDownCapture,s=>{const d=s.target.getBoundingClientRect(),p=s.clientX-d.left,g=s.clientY-d.top;h.onThumbPointerDown({x:p,y:g})}),onPointerUp:pe(e.onPointerUp,h.onThumbPointerUp)}))}),UC="ScrollAreaCorner",$6=x.forwardRef((e,t)=>{const n=Ln(UC,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?x.createElement(A6,ae({},e,{ref:t})):null}),A6=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Ln(UC,n),[o,h]=x.useState(0),[l,a]=x.useState(0),f=!!(o&&l);return Xs(i.scrollbarX,()=>{var u;const s=((u=i.scrollbarX)===null||u===void 0?void 0:u.offsetHeight)||0;i.onCornerHeightChange(s),a(s)}),Xs(i.scrollbarY,()=>{var u;const s=((u=i.scrollbarY)===null||u===void 0?void 0:u.offsetWidth)||0;i.onCornerWidthChange(s),h(s)}),f?x.createElement(Se.div,ae({},r,{ref:t,style:{width:o,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function mf(e){return e?parseInt(e,10):0}function VC(e,t){const n=e/t;return isNaN(n)?0:n}function xd(e){const t=VC(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function R6(e,t,n,r="ltr"){const i=xd(n),o=i/2,h=t||o,l=i-h,a=n.scrollbar.paddingStart+h,f=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,s=r==="ltr"?[0,u]:[u*-1,0];return HC([a,f],s)(e)}function w1(e,t,n="ltr"){const r=xd(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,h=t.content-t.viewport,l=o-r,a=n==="ltr"?[0,h]:[h*-1,0],f=Al(e,a);return HC([0,h],[0,l])(f)}function HC(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function WC(e,t){return e>0&&e<t}const M6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},h=n.left!==o.left,l=n.top!==o.top;(h||l)&&t(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Sd(e,t){const n=rt(e),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Xs(e,t){const n=rt(t);Ft(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const YC=b6,D6=S6,N6=$6,bv=x.forwardRef(({className:e,children:t,...n},r)=>T.jsxs(YC,{ref:r,className:we("relative overflow-hidden",e),scrollHideDelay:400,...n,children:[T.jsx(D6,{className:"h-full w-full rounded-[inherit]",children:t}),T.jsx(XC,{}),T.jsx(N6,{})]}));bv.displayName=YC.displayName;const XC=x.forwardRef(({className:e,orientation:t="vertical",...n},r)=>T.jsx(IC,{ref:r,orientation:t,className:we("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:T.jsx(P6,{className:"relative flex-1 rounded-full bg-border"})}));XC.displayName=IC.displayName;const F6="AlertDialog",[L6,H7]=qt(F6,[O_]),Ki=O_(),I6=e=>{const{__scopeAlertDialog:t,...n}=e,r=Ki(t);return x.createElement(pd,ae({},r,n,{modal:!0}))},j6=e=>{const{__scopeAlertDialog:t,...n}=e,r=Ki(t);return x.createElement(md,ae({},r,n))},B6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Ki(n);return x.createElement(sa,ae({},i,r,{ref:t}))}),GC="AlertDialogContent",[z6,U6]=L6(GC),V6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,o=Ki(n),h=x.useRef(null),l=Oe(t,h),a=x.useRef(null);return x.createElement(fD,{contentName:GC,titleName:H6,docsSlug:"alert-dialog"},x.createElement(z6,{scope:n,cancelRef:a},x.createElement(aa,ae({role:"alertdialog"},o,i,{ref:l,onOpenAutoFocus:pe(i.onOpenAutoFocus,f=>{var u;f.preventDefault(),(u=a.current)===null||u===void 0||u.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault()}),x.createElement($g,null,r),!1)))}),H6="AlertDialogTitle",W6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Ki(n);return x.createElement(Ql,ae({},i,r,{ref:t}))}),Y6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Ki(n);return x.createElement(Jl,ae({},i,r,{ref:t}))}),X6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Ki(n);return x.createElement(ov,ae({},i,r,{ref:t}))}),G6="AlertDialogCancel",K6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=U6(G6,n),o=Ki(n),h=Oe(t,i);return x.createElement(ov,ae({},o,r,{ref:h}))}),q6=I6,Z6=j6,KC=B6,qC=V6,ZC=X6,QC=K6,JC=W6,e2=Y6,Q6=q6,J6=Z6,t2=x.forwardRef(({className:e,...t},n)=>T.jsx(KC,{className:we("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));t2.displayName=KC.displayName;const n2=x.forwardRef(({className:e,...t},n)=>T.jsxs(J6,{children:[T.jsx(t2,{}),T.jsx(qC,{ref:n,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));n2.displayName=qC.displayName;const r2=({className:e,...t})=>T.jsx("div",{className:we("flex flex-col space-y-2 text-center sm:text-left",e),...t});r2.displayName="AlertDialogHeader";const eN=x.forwardRef(({className:e,...t},n)=>T.jsx(JC,{ref:n,className:we("text-lg font-semibold",e),...t}));eN.displayName=JC.displayName;const tN=x.forwardRef(({className:e,...t},n)=>T.jsx(e2,{ref:n,className:we("text-sm text-muted-foreground",e),...t}));tN.displayName=e2.displayName;const nN=x.forwardRef(({className:e,...t},n)=>T.jsx(ZC,{ref:n,className:we(rv(),e),...t}));nN.displayName=ZC.displayName;const rN=x.forwardRef(({className:e,...t},n)=>T.jsx(QC,{ref:n,className:we(rv({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));rN.displayName=QC.displayName;const iN=[" ","Enter","ArrowUp","ArrowDown"],oN=[" ","Enter"],_d="Select",[Cd,Ed,sN]=Hl(_d),[ca,W7]=qt(_d,[sN,Gi]),xv=Gi(),[aN,Lo]=ca(_d),[lN,cN]=ca(_d),uN=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:o,value:h,defaultValue:l,onValueChange:a,dir:f,name:u,autoComplete:s,disabled:c,required:d}=e,p=xv(t),[g,m]=x.useState(null),[v,y]=x.useState(null),[w,b]=x.useState(!1),S=la(f),[_=!1,E]=Fn({prop:r,defaultProp:i,onChange:o}),[C,P]=Fn({prop:h,defaultProp:l,onChange:a}),N=x.useRef(null),B=g?!!g.closest("form"):!0,[I,U]=x.useState(new Set),D=Array.from(I).map(F=>F.props.value).join(";");return x.createElement(ql,p,x.createElement(aN,{required:d,scope:t,trigger:g,onTriggerChange:m,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:b,contentId:an(),value:C,onValueChange:P,open:_,onOpenChange:E,dir:S,triggerPointerDownPosRef:N,disabled:c},x.createElement(Cd.Provider,{scope:t},x.createElement(lN,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(F=>{U(O=>new Set(O).add(F))},[]),onNativeOptionRemove:x.useCallback(F=>{U(O=>{const M=new Set(O);return M.delete(F),M})},[])},n)),B?x.createElement(l2,{key:D,"aria-hidden":!0,required:d,tabIndex:-1,name:u,autoComplete:s,value:C,onChange:F=>P(F.target.value),disabled:c},C===void 0?x.createElement("option",{value:""}):null,Array.from(I)):null))},fN="SelectTrigger",dN=x.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,o=xv(n),h=Lo(fN,n),l=h.disabled||r,a=Oe(t,h.onTriggerChange),f=Ed(n),[u,s,c]=c2(p=>{const g=f().filter(y=>!y.disabled),m=g.find(y=>y.value===h.value),v=u2(g,p,m);v!==void 0&&h.onValueChange(v.value)}),d=()=>{l||(h.onOpenChange(!0),c())};return x.createElement(sd,ae({asChild:!0},o),x.createElement(Se.button,ae({type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":a2(h.value)?"":void 0},i,{ref:a,onClick:pe(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:pe(i.onPointerDown,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(d(),h.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:pe(i.onKeyDown,p=>{const g=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&s(p.key),!(g&&p.key===" ")&&iN.includes(p.key)&&(d(),p.preventDefault())})})))}),hN="SelectValue",pN=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:h="",...l}=e,a=Lo(hN,n),{onValueNodeHasChildrenChange:f}=a,u=o!==void 0,s=Oe(t,a.onValueNodeChange);return Ft(()=>{f(u)},[f,u]),x.createElement(Se.span,ae({},l,{ref:s,style:{pointerEvents:"none"}}),a2(a.value)?x.createElement(x.Fragment,null,h):o)}),mN=x.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return x.createElement(Se.span,ae({"aria-hidden":!0},i,{ref:t}),r||"")}),gN=e=>x.createElement(Wl,ae({asChild:!0},e)),Gs="SelectContent",vN=x.forwardRef((e,t)=>{const n=Lo(Gs,e.__scopeSelect),[r,i]=x.useState();if(Ft(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?Xi.createPortal(x.createElement(i2,{scope:e.__scopeSelect},x.createElement(Cd.Slot,{scope:e.__scopeSelect},x.createElement("div",null,e.children))),o):null}return x.createElement(yN,ae({},e,{ref:t}))}),Nr=10,[i2,Io]=ca(Gs),yN=x.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:h,side:l,sideOffset:a,align:f,alignOffset:u,arrowPadding:s,collisionBoundary:c,collisionPadding:d,sticky:p,hideWhenDetached:g,avoidCollisions:m,...v}=e,y=Lo(Gs,n),[w,b]=x.useState(null),[S,_]=x.useState(null),E=Oe(t,Y=>b(Y)),[C,P]=x.useState(null),[N,B]=x.useState(null),I=Ed(n),[U,D]=x.useState(!1),F=x.useRef(!1);x.useEffect(()=>{if(w)return hd(w)},[w]),fd();const O=x.useCallback(Y=>{const[K,...G]=I().map(le=>le.ref.current),[Q]=G.slice(-1),ee=document.activeElement;for(const le of Y)if(le===ee||(le==null||le.scrollIntoView({block:"nearest"}),le===K&&S&&(S.scrollTop=0),le===Q&&S&&(S.scrollTop=S.scrollHeight),le==null||le.focus(),document.activeElement!==ee))return},[I,S]),M=x.useCallback(()=>O([C,w]),[O,C,w]);x.useEffect(()=>{U&&M()},[U,M]);const{onOpenChange:V,triggerPointerDownPosRef:k}=y;x.useEffect(()=>{if(w){let Y={x:0,y:0};const K=Q=>{var ee,le,te,Z;Y={x:Math.abs(Math.round(Q.pageX)-((ee=(le=k.current)===null||le===void 0?void 0:le.x)!==null&&ee!==void 0?ee:0)),y:Math.abs(Math.round(Q.pageY)-((te=(Z=k.current)===null||Z===void 0?void 0:Z.y)!==null&&te!==void 0?te:0))}},G=Q=>{Y.x<=10&&Y.y<=10?Q.preventDefault():w.contains(Q.target)||V(!1),document.removeEventListener("pointermove",K),k.current=null};return k.current!==null&&(document.addEventListener("pointermove",K),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",G,{capture:!0})}}},[w,V,k]),x.useEffect(()=>{const Y=()=>V(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[V]);const[R,j]=c2(Y=>{const K=I().filter(ee=>!ee.disabled),G=K.find(ee=>ee.ref.current===document.activeElement),Q=u2(K,Y,G);Q&&setTimeout(()=>Q.ref.current.focus())}),A=x.useCallback((Y,K,G)=>{const Q=!F.current&&!G;(y.value!==void 0&&y.value===K||Q)&&(P(Y),Q&&(F.current=!0))},[y.value]),W=x.useCallback(()=>w==null?void 0:w.focus(),[w]),L=x.useCallback((Y,K,G)=>{const Q=!F.current&&!G;(y.value!==void 0&&y.value===K||Q)&&B(Y)},[y.value]),$=r==="popper"?b1:wN,H=$===b1?{side:l,sideOffset:a,align:f,alignOffset:u,arrowPadding:s,collisionBoundary:c,collisionPadding:d,sticky:p,hideWhenDetached:g,avoidCollisions:m}:{};return x.createElement(i2,{scope:n,content:w,viewport:S,onViewportChange:_,itemRefCallback:A,selectedItem:C,onItemLeave:W,itemTextRefCallback:L,focusSelectedItem:M,selectedItemText:N,position:r,isPositioned:U,searchRef:R},x.createElement(Zl,{as:Sr,allowPinchZoom:!0},x.createElement(ud,{asChild:!0,trapped:y.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:pe(i,Y=>{var K;(K=y.trigger)===null||K===void 0||K.focus({preventScroll:!0}),Y.preventDefault()})},x.createElement(ea,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:h,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},x.createElement($,ae({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Y=>Y.preventDefault()},v,H,{onPlaced:()=>D(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:pe(v.onKeyDown,Y=>{const K=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!K&&Y.key.length===1&&j(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let Q=I().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(Q=Q.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const ee=Y.target,le=Q.indexOf(ee);Q=Q.slice(le+1)}setTimeout(()=>O(Q)),Y.preventDefault()}})}))))))}),wN=x.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,o=Lo(Gs,n),h=Io(Gs,n),[l,a]=x.useState(null),[f,u]=x.useState(null),s=Oe(t,E=>u(E)),c=Ed(n),d=x.useRef(!1),p=x.useRef(!0),{viewport:g,selectedItem:m,selectedItemText:v,focusSelectedItem:y}=h,w=x.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&f&&g&&m&&v){const E=o.trigger.getBoundingClientRect(),C=f.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),N=v.getBoundingClientRect();if(o.dir!=="rtl"){const ee=N.left-C.left,le=P.left-ee,te=E.left-le,Z=E.width+te,ie=Math.max(Z,C.width),ce=window.innerWidth-Nr,ne=Al(le,[Nr,ce-ie]);l.style.minWidth=Z+"px",l.style.left=ne+"px"}else{const ee=C.right-N.right,le=window.innerWidth-P.right-ee,te=window.innerWidth-E.right-le,Z=E.width+te,ie=Math.max(Z,C.width),ce=window.innerWidth-Nr,ne=Al(le,[Nr,ce-ie]);l.style.minWidth=Z+"px",l.style.right=ne+"px"}const B=c(),I=window.innerHeight-Nr*2,U=g.scrollHeight,D=window.getComputedStyle(f),F=parseInt(D.borderTopWidth,10),O=parseInt(D.paddingTop,10),M=parseInt(D.borderBottomWidth,10),V=parseInt(D.paddingBottom,10),k=F+O+U+V+M,R=Math.min(m.offsetHeight*5,k),j=window.getComputedStyle(g),A=parseInt(j.paddingTop,10),W=parseInt(j.paddingBottom,10),L=E.top+E.height/2-Nr,$=I-L,H=m.offsetHeight/2,Y=m.offsetTop+H,K=F+O+Y,G=k-K;if(K<=L){const ee=m===B[B.length-1].ref.current;l.style.bottom="0px";const le=f.clientHeight-g.offsetTop-g.offsetHeight,te=Math.max($,H+(ee?W:0)+le+M),Z=K+te;l.style.height=Z+"px"}else{const ee=m===B[0].ref.current;l.style.top="0px";const te=Math.max(L,F+g.offsetTop+(ee?A:0)+H)+G;l.style.height=te+"px",g.scrollTop=K-L+g.offsetTop}l.style.margin=`${Nr}px 0`,l.style.minHeight=R+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>d.current=!0)}},[c,o.trigger,o.valueNode,l,f,g,m,v,o.dir,r]);Ft(()=>w(),[w]);const[b,S]=x.useState();Ft(()=>{f&&S(window.getComputedStyle(f).zIndex)},[f]);const _=x.useCallback(E=>{E&&p.current===!0&&(w(),y==null||y(),p.current=!1)},[w,y]);return x.createElement(bN,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:d,onScrollButtonChange:_},x.createElement("div",{ref:a,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b}},x.createElement(Se.div,ae({},i,{ref:s,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),b1=x.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Nr,...o}=e,h=xv(n);return x.createElement(ad,ae({},h,o,{ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[bN,Sv]=ca(Gs,{}),x1="SelectViewport",xN=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Io(x1,n),o=Sv(x1,n),h=Oe(t,i.onViewportChange),l=x.useRef(0);return x.createElement(x.Fragment,null,x.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),x.createElement(Cd.Slot,{scope:n},x.createElement(Se.div,ae({"data-radix-select-viewport":"",role:"presentation"},r,{ref:h,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:pe(r.onScroll,a=>{const f=a.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:s}=o;if(s!=null&&s.current&&u){const c=Math.abs(l.current-f.scrollTop);if(c>0){const d=window.innerHeight-Nr*2,p=parseFloat(u.style.minHeight),g=parseFloat(u.style.height),m=Math.max(p,g);if(m<d){const v=m+c,y=Math.min(d,v),w=v-y;u.style.height=y+"px",u.style.bottom==="0px"&&(f.scrollTop=w>0?w:0,u.style.justifyContent="flex-end")}}}l.current=f.scrollTop})}))))}),SN="SelectGroup",[_N,CN]=ca(SN),EN=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=an();return x.createElement(_N,{scope:n,id:i},x.createElement(Se.div,ae({role:"group","aria-labelledby":i},r,{ref:t})))}),TN="SelectLabel",kN=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=CN(TN,n);return x.createElement(Se.div,ae({id:i.id},r,{ref:t}))}),Sm="SelectItem",[PN,o2]=ca(Sm),ON=x.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...h}=e,l=Lo(Sm,n),a=Io(Sm,n),f=l.value===r,[u,s]=x.useState(o??""),[c,d]=x.useState(!1),p=Oe(t,v=>{var y;return(y=a.itemRefCallback)===null||y===void 0?void 0:y.call(a,v,r,i)}),g=an(),m=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return x.createElement(PN,{scope:n,value:r,disabled:i,textId:g,isSelected:f,onItemTextChange:x.useCallback(v=>{s(y=>{var w;return y||((w=v==null?void 0:v.textContent)!==null&&w!==void 0?w:"").trim()})},[])},x.createElement(Cd.ItemSlot,{scope:n,value:r,disabled:i,textValue:u},x.createElement(Se.div,ae({role:"option","aria-labelledby":g,"data-highlighted":c?"":void 0,"aria-selected":f&&c,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},h,{ref:p,onFocus:pe(h.onFocus,()=>d(!0)),onBlur:pe(h.onBlur,()=>d(!1)),onPointerUp:pe(h.onPointerUp,m),onPointerMove:pe(h.onPointerMove,v=>{if(i){var y;(y=a.onItemLeave)===null||y===void 0||y.call(a)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(h.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var y;(y=a.onItemLeave)===null||y===void 0||y.call(a)}}),onKeyDown:pe(h.onKeyDown,v=>{var y;((y=a.searchRef)===null||y===void 0?void 0:y.current)!==""&&v.key===" "||(oN.includes(v.key)&&m(),v.key===" "&&v.preventDefault())})}))))}),jc="SelectItemText",$N=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...o}=e,h=Lo(jc,n),l=Io(jc,n),a=o2(jc,n),f=cN(jc,n),[u,s]=x.useState(null),c=Oe(t,v=>s(v),a.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)===null||y===void 0?void 0:y.call(l,v,a.value,a.disabled)}),d=u==null?void 0:u.textContent,p=x.useMemo(()=>x.createElement("option",{key:a.value,value:a.value,disabled:a.disabled},d),[a.disabled,a.value,d]),{onNativeOptionAdd:g,onNativeOptionRemove:m}=f;return Ft(()=>(g(p),()=>m(p)),[g,m,p]),x.createElement(x.Fragment,null,x.createElement(Se.span,ae({id:a.textId},o,{ref:c})),a.isSelected&&h.valueNode&&!h.valueNodeHasChildren?Xi.createPortal(o.children,h.valueNode):null)}),AN="SelectItemIndicator",RN=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o2(AN,n).isSelected?x.createElement(Se.span,ae({"aria-hidden":!0},r,{ref:t})):null}),S1="SelectScrollUpButton",MN=x.forwardRef((e,t)=>{const n=Io(S1,e.__scopeSelect),r=Sv(S1,e.__scopeSelect),[i,o]=x.useState(!1),h=Oe(t,r.onScrollButtonChange);return Ft(()=>{if(n.viewport&&n.isPositioned){let f=function(){const u=a.scrollTop>0;o(u)};var l=f;const a=n.viewport;return f(),a.addEventListener("scroll",f),()=>a.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),i?x.createElement(s2,ae({},e,{ref:h,onAutoScroll:()=>{const{viewport:l,selectedItem:a}=n;l&&a&&(l.scrollTop=l.scrollTop-a.offsetHeight)}})):null}),_1="SelectScrollDownButton",DN=x.forwardRef((e,t)=>{const n=Io(_1,e.__scopeSelect),r=Sv(_1,e.__scopeSelect),[i,o]=x.useState(!1),h=Oe(t,r.onScrollButtonChange);return Ft(()=>{if(n.viewport&&n.isPositioned){let f=function(){const u=a.scrollHeight-a.clientHeight,s=Math.ceil(a.scrollTop)<u;o(s)};var l=f;const a=n.viewport;return f(),a.addEventListener("scroll",f),()=>a.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),i?x.createElement(s2,ae({},e,{ref:h,onAutoScroll:()=>{const{viewport:l,selectedItem:a}=n;l&&a&&(l.scrollTop=l.scrollTop+a.offsetHeight)}})):null}),s2=x.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,o=Io("SelectScrollButton",n),h=x.useRef(null),l=Ed(n),a=x.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return x.useEffect(()=>()=>a(),[a]),Ft(()=>{var f;const u=l().find(s=>s.ref.current===document.activeElement);u==null||(f=u.ref.current)===null||f===void 0||f.scrollIntoView({block:"nearest"})},[l]),x.createElement(Se.div,ae({"aria-hidden":!0},i,{ref:t,style:{flexShrink:0,...i.style},onPointerDown:pe(i.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(r,50))}),onPointerMove:pe(i.onPointerMove,()=>{var f;(f=o.onItemLeave)===null||f===void 0||f.call(o),h.current===null&&(h.current=window.setInterval(r,50))}),onPointerLeave:pe(i.onPointerLeave,()=>{a()})}))}),NN=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return x.createElement(Se.div,ae({"aria-hidden":!0},r,{ref:t}))});function a2(e){return e===""||e===void 0}const l2=x.forwardRef((e,t)=>{const{value:n,...r}=e,i=x.useRef(null),o=Oe(t,i),h=gv(n);return x.useEffect(()=>{const l=i.current,a=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(h!==n&&u){const s=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(s)}},[h,n]),x.createElement(Wf,{asChild:!0},x.createElement("select",ae({},r,{ref:o,defaultValue:n})))});l2.displayName="BubbleSelect";function c2(e){const t=rt(e),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(h=>{const l=n.current+h;t(l),function a(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>a(""),1e3))}(l)},[t]),o=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function u2(e,t,n){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let h=FN(e,Math.max(o,0));i.length===1&&(h=h.filter(f=>f!==n));const a=h.find(f=>f.textValue.toLowerCase().startsWith(i.toLowerCase()));return a!==n?a:void 0}function FN(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const LN=uN,f2=dN,IN=pN,jN=mN,BN=gN,d2=vN,zN=xN,UN=EN,h2=kN,p2=ON,VN=$N,HN=RN,m2=MN,g2=DN,v2=NN,zr=LN,Ur=UN,Vr=IN,mr=x.forwardRef(({className:e,children:t,...n},r)=>T.jsxs(f2,{ref:r,className:we("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),tabIndex:-1,...n,children:[t,T.jsx(jN,{asChild:!0,children:T.jsx(t5,{className:"h-4 w-4 opacity-50"})})]}));mr.displayName=f2.displayName;const y2=x.forwardRef(({className:e,...t},n)=>T.jsx(m2,{ref:n,className:we("flex cursor-default items-center justify-center py-1",e),...t,children:T.jsx(l5,{})}));y2.displayName=m2.displayName;const w2=x.forwardRef(({className:e,...t},n)=>T.jsx(g2,{ref:n,className:we("flex cursor-default items-center justify-center py-1",e),...t,children:T.jsx(i5,{})}));w2.displayName=g2.displayName;const gr=x.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>T.jsx(BN,{children:T.jsxs(d2,{ref:i,className:we("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,onCloseAutoFocus:o=>o.preventDefault(),...r,children:[T.jsx(y2,{}),T.jsx(zN,{className:we("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),T.jsx(w2,{})]})}));gr.displayName=d2.displayName;const WN=x.forwardRef(({className:e,...t},n)=>T.jsx(h2,{ref:n,className:we("px-2 py-1.5 text-sm font-semibold",e),...t}));WN.displayName=h2.displayName;const vr=x.forwardRef(({className:e,children:t,...n},r)=>T.jsxs(p2,{ref:r,className:we("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[T.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:T.jsx(HN,{children:T.jsx(Mx,{className:"h-4 w-4"})})}),T.jsx(VN,{children:t})]}));vr.displayName=p2.displayName;const YN=x.forwardRef(({className:e,...t},n)=>T.jsx(v2,{ref:n,className:we("-mx-1 my-1 h-px bg-muted",e),...t}));YN.displayName=v2.displayName;const XN=R4({enableFileManager:Ea(),inputDirectory:Ca(),outputDirectory:Ca(),enableDownloadMask:Ea(),enableManualInpainting:Ea(),enableUploadMask:Ea(),enableAutoExtractPrompt:Ea(),removeBGModel:Ca(),realesrganModel:Ca(),interactiveSegModel:Ca()}),b2="General",_m="Model",x2="Plugins",GN=[_m,b2,x2];function KN(){const[e,t]=v_(!1),[n,r]=x.useState(_m),[i,o,h,l,a,f,u,s]=Xe(F=>[F.updateAppState,F.settings,F.updateSettings,F.fileManagerState,F.setModel,F.serverConfig,F.updateServerConfig,F.setServerConfig]),{toast:c}=Ng(),[d,p]=x.useState(o.model),[g,m]=x.useState([]),v=g.length>0;x.useEffect(()=>{p(o.model)},[o.model]);const y=u4({resolver:p4(XN),defaultValues:{enableDownloadMask:o.enableDownloadMask,enableManualInpainting:o.enableManualInpainting,enableUploadMask:o.enableUploadMask,enableAutoExtractPrompt:o.enableAutoExtractPrompt,inputDirectory:l.inputDirectory,outputDirectory:l.outputDirectory,removeBGModel:f==null?void 0:f.removeBGModel,realesrganModel:f==null?void 0:f.realesrganModel,interactiveSegModel:f==null?void 0:f.interactiveSegModel}});x.useEffect(()=>{f&&(s(f),y.setValue("removeBGModel",f.removeBGModel),y.setValue("realesrganModel",f.realesrganModel),y.setValue("interactiveSegModel",f.interactiveSegModel))},[y,f]);async function w(F){h({enableDownloadMask:F.enableDownloadMask,enableManualInpainting:F.enableManualInpainting,enableUploadMask:F.enableUploadMask,enableAutoExtractPrompt:F.enableAutoExtractPrompt});const O=d.name!==o.model.name,M=(f==null?void 0:f.removeBGModel)!==F.removeBGModel&&_,V=(f==null?void 0:f.realesrganModel)!==F.realesrganModel&&E,k=(f==null?void 0:f.interactiveSegModel)!==F.interactiveSegModel&&C;if(O||M||V||k){const j=[];if(O&&j.push(`Switching model from ${o.model.name} to ${d.name}`),M&&j.push(`Switching RemoveBG model from ${f==null?void 0:f.removeBGModel} to ${F.removeBGModel}`),V&&j.push(`Switching RealESRGAN model from ${f==null?void 0:f.realesrganModel} to ${F.realesrganModel}`),k&&j.push(`Switching ${di.InteractiveSeg} model from ${f==null?void 0:f.interactiveSegModel} to ${F.interactiveSegModel}`),m(j),i({disableShortCuts:!0}),O)try{const A=await AA(d.name);c({title:`Switch to ${A.name} success`}),a(d)}catch(A){c({variant:"destructive",title:`Switch to ${d.name} failed: ${A}`}),p(o.model)}if(M)try{console.log(F.removeBGModel),u({removeBGModel:F.removeBGModel})}catch(A){c({variant:"destructive",title:`Switch RemoveBG model to ${F.removeBGModel} failed: ${A}`})}if(V)try{const A=await Ny(di.RealESRGAN,F.realesrganModel);if(A.status!==200)throw new Error(A.statusText)}catch(A){c({variant:"destructive",title:`Switch RealESRGAN model to ${F.realesrganModel} failed: ${A}`})}if(k)try{const A=await Ny(di.InteractiveSeg,F.interactiveSegModel);if(A.status!==200)throw new Error(A.statusText)}catch(A){c({variant:"destructive",title:`Switch ${di.InteractiveSeg} model to ${F.interactiveSegModel} failed: ${A}`})}m([]),i({disableShortCuts:!1})}}or("s",()=>{t(),e&&w(y.getValues())},[e,y,d,f]);const b=f.modelInfos,S=f.plugins,_=S.some(F=>F.name===di.RemoveBG),E=S.some(F=>F.name===di.RealESRGAN),C=S.some(F=>F.name===di.InteractiveSeg);function P(F){t(),F||w(y.getValues())}function N(F){p(F)}function B(F){return b?b.filter(O=>F.includes(O.model_type)).map(O=>T.jsxs("div",{onClick:()=>N(O),className:"px-2",children:[T.jsx("div",{className:we([O.name===d.name?"bg-muted":"hover:bg-muted","rounded-md px-2 py-2","cursor-default"]),children:T.jsx("div",{className:"text-base",children:O.name})}),T.jsx(Ct,{className:"my-1"})]},O.name)):T.jsx("div",{children:"Please download model first"})}function I(){let F=Ei;for(let O of b)if(d.name===O.name){F=O.model_type,F===ly&&(F=$c),F===cy&&(F=Ac);break}return T.jsxs("div",{className:"flex flex-col gap-4 w-[510px]",children:[T.jsxs("div",{className:"flex flex-col gap-4 rounded-md",children:[T.jsx("div",{className:"font-medium",children:"Current Model"}),T.jsx("div",{children:d.name})]}),T.jsx(Ct,{}),T.jsxs("div",{className:"space-y-4  rounded-md",children:[T.jsx("div",{className:"flex gap-1 items-center justify-start",children:T.jsx("div",{className:"font-medium",children:"Available models"})}),T.jsxs(v6,{defaultValue:F,children:[T.jsxs(NC,{children:[T.jsx(ja,{value:Ei,children:"Inpaint"}),T.jsx(ja,{value:$c,children:"Stable Diffusion"}),T.jsx(ja,{value:Ac,children:"Stable Diffusion Inpaint"}),T.jsx(ja,{value:fh,children:"Other Diffusion"})]}),T.jsxs(bv,{className:"h-[240px] w-full mt-2 outline-none border rounded-lg",children:[T.jsx(Ba,{value:Ei,children:B([Ei])}),T.jsx(Ba,{value:$c,children:B([$c,ly])}),T.jsx(Ba,{value:Ac,children:B([Ac,cy])}),T.jsx(Ba,{value:fh,children:B([fh])})]})]})]})]})}function U(){return T.jsxs("div",{className:"space-y-4 w-[510px]",children:[T.jsx(Wo,{control:y.control,name:"enableManualInpainting",render:({field:F})=>T.jsxs(no,{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"space-y-0.5",children:[T.jsx(ro,{children:"Enable manual inpainting"}),T.jsx(oo,{children:"For erase model, click a button to trigger inpainting after draw mask."})]}),T.jsx(io,{children:T.jsx(Wn,{checked:F.value,onCheckedChange:F.onChange})})]})}),T.jsx(Ct,{}),T.jsx(Wo,{control:y.control,name:"enableDownloadMask",render:({field:F})=>T.jsxs(no,{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"space-y-0.5",children:[T.jsx(ro,{children:"Enable download mask"}),T.jsx(oo,{children:"Also download the mask after save the inpainting result."})]}),T.jsx(io,{children:T.jsx(Wn,{checked:F.value,onCheckedChange:F.onChange})})]})}),T.jsx(Ct,{}),T.jsx(Wo,{control:y.control,name:"enableAutoExtractPrompt",render:({field:F})=>T.jsxs(no,{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"space-y-0.5",children:[T.jsx(ro,{children:"Enable auto extract prompt"}),T.jsx(oo,{children:"Automatically extract prompt/negativate prompt from the image meta."})]}),T.jsx(io,{children:T.jsx(Wn,{checked:F.value,onCheckedChange:F.onChange})})]})})]})}function D(){return T.jsxs("div",{className:"space-y-4 w-[510px]",children:[T.jsx(Wo,{control:y.control,name:"removeBGModel",render:({field:F})=>T.jsxs(no,{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"space-y-0.5",children:[T.jsx(ro,{children:"Remove Background"}),T.jsx(oo,{children:"Remove background model"})]}),T.jsxs(zr,{onValueChange:F.onChange,defaultValue:F.value,disabled:!_,children:[T.jsx(io,{children:T.jsx(mr,{className:"w-auto",children:T.jsx(Vr,{placeholder:"Select removebg model"})})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:f==null?void 0:f.removeBGModels.map(O=>T.jsx(vr,{value:O,children:O},O))})})]})]})}),T.jsx(Ct,{}),T.jsx(Wo,{control:y.control,name:"realesrganModel",render:({field:F})=>T.jsxs(no,{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"space-y-0.5",children:[T.jsx(ro,{children:"RealESRGAN"}),T.jsx(oo,{children:"RealESRGAN Model"})]}),T.jsxs(zr,{onValueChange:F.onChange,defaultValue:F.value,disabled:!E,children:[T.jsx(io,{children:T.jsx(mr,{className:"w-auto",children:T.jsx(Vr,{placeholder:"Select RealESRGAN model"})})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:f==null?void 0:f.realesrganModels.map(O=>T.jsx(vr,{value:O,children:O},O))})})]})]})}),T.jsx(Ct,{}),T.jsx(Wo,{control:y.control,name:"interactiveSegModel",render:({field:F})=>T.jsxs(no,{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"space-y-0.5",children:[T.jsx(ro,{children:"Interactive Segmentation"}),T.jsx(oo,{children:"Interactive Segmentation Model"})]}),T.jsxs(zr,{onValueChange:F.onChange,defaultValue:F.value,disabled:!C,children:[T.jsx(io,{children:T.jsx(mr,{className:"w-auto",children:T.jsx(Vr,{placeholder:"Select interactive segmentation model"})})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:f==null?void 0:f.interactiveSegModels.map(O=>T.jsx(vr,{value:O,children:O},O))})})]})]})})]})}return T.jsxs(T.Fragment,{children:[T.jsx(Q6,{open:v,children:T.jsx(n2,{children:T.jsx(r2,{children:T.jsxs("div",{className:"flex flex-col justify-center items-center gap-4",children:[T.jsxs("div",{role:"status",children:[T.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-primary",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),T.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),T.jsx("span",{className:"sr-only",children:"Loading..."})]}),g?T.jsx("div",{className:"flex flex-col",children:g.map((F,O)=>T.jsx("div",{children:F},O))}):T.jsx(T.Fragment,{})]})})})}),T.jsxs(N_,{open:e,onOpenChange:P,children:[T.jsx(F_,{asChild:!0,children:T.jsx(Lr,{tooltip:"Settings",children:T.jsx(b3,{})})}),T.jsxs(sv,{className:"max-w-3xl h-[600px]",onOpenAutoFocus:F=>F.preventDefault(),children:[T.jsx(av,{children:"Settings"}),T.jsx(Ct,{}),T.jsxs("div",{className:"flex flex-row space-x-8 h-full",children:[T.jsx("div",{className:"flex flex-col space-y-1",children:GN.map(F=>T.jsx(Wt,{variant:"ghost",onClick:()=>r(F),className:we(n===F?"bg-muted ":"hover:bg-muted","justify-start"),children:F},F))}),T.jsx(Ct,{orientation:"vertical"}),T.jsx(L4,{...y,children:T.jsx("div",{className:"flex w-full justify-center",children:T.jsxs("form",{onSubmit:y.handleSubmit(w),children:[n===_m?I():T.jsx(T.Fragment,{}),n===b2?U():T.jsx(T.Fragment,{}),n===x2?D():T.jsx(T.Fragment,{}),T.jsx("div",{className:"absolute right-10 bottom-6",children:T.jsx(Wt,{onClick:()=>P(!1),children:"Ok"})})]})})})]})]})]})]})}var C1=1,qN=.9,ZN=.8,QN=.17,Ih=.1,jh=.999,JN=.9999,eF=.99,tF=/[\\\/_+.#"@\[\(\{&]/,nF=/[\\\/_+.#"@\[\(\{&]/g,rF=/[\s-]/,S2=/[\s-]/g;function Cm(e,t,n,r,i,o,h){if(o===t.length)return i===e.length?C1:eF;var l=`${i},${o}`;if(h[l]!==void 0)return h[l];for(var a=r.charAt(o),f=n.indexOf(a,i),u=0,s,c,d,p;f>=0;)s=Cm(e,t,n,r,f+1,o+1,h),s>u&&(f===i?s*=C1:tF.test(e.charAt(f-1))?(s*=ZN,d=e.slice(i,f-1).match(nF),d&&i>0&&(s*=Math.pow(jh,d.length))):rF.test(e.charAt(f-1))?(s*=qN,p=e.slice(i,f-1).match(S2),p&&i>0&&(s*=Math.pow(jh,p.length))):(s*=QN,i>0&&(s*=Math.pow(jh,f-i))),e.charAt(f)!==t.charAt(o)&&(s*=JN)),(s<Ih&&n.charAt(f-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(f-1)!==r.charAt(o))&&(c=Cm(e,t,n,r,f+1,o+2,h),c*Ih>s&&(s=c*Ih)),s>u&&(u=s),f=n.indexOf(a,f+1);return h[l]=u,u}function E1(e){return e.toLowerCase().replace(S2," ")}function iF(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Cm(e,t,E1(e),E1(t),0,0,{})}var Ta='[cmdk-group=""]',Bh='[cmdk-group-items=""]',oF='[cmdk-group-heading=""]',_v='[cmdk-item=""]',T1=`${_v}:not([aria-disabled="true"])`,Em="cmdk-item-select",ao="data-value",sF=(e,t,n)=>iF(e,t,n),_2=x.createContext(void 0),nc=()=>x.useContext(_2),C2=x.createContext(void 0),Cv=()=>x.useContext(C2),E2=x.createContext(void 0),T2=x.forwardRef((e,t)=>{let n=Zo(()=>{var A,W;return{search:"",value:(W=(A=e.value)!=null?A:e.defaultValue)!=null?W:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Zo(()=>new Set),i=Zo(()=>new Map),o=Zo(()=>new Map),h=Zo(()=>new Set),l=k2(e),{label:a,children:f,value:u,onValueChange:s,filter:c,shouldFilter:d,loop:p,disablePointerSelection:g=!1,vimBindings:m=!0,...v}=e,y=x.useId(),w=x.useId(),b=x.useId(),S=x.useRef(null),_=vF();Ro(()=>{if(u!==void 0){let A=u.trim();n.current.value=A,E.emit()}},[u]),Ro(()=>{_(6,U)},[]);let E=x.useMemo(()=>({subscribe:A=>(h.current.add(A),()=>h.current.delete(A)),snapshot:()=>n.current,setState:(A,W,L)=>{var $,H,Y;if(!Object.is(n.current[A],W)){if(n.current[A]=W,A==="search")I(),N(),_(1,B);else if(A==="value"&&(L||_(5,U),(($=l.current)==null?void 0:$.value)!==void 0)){let K=W??"";(Y=(H=l.current).onValueChange)==null||Y.call(H,K);return}E.emit()}},emit:()=>{h.current.forEach(A=>A())}}),[]),C=x.useMemo(()=>({value:(A,W,L)=>{var $;W!==(($=o.current.get(A))==null?void 0:$.value)&&(o.current.set(A,{value:W,keywords:L}),n.current.filtered.items.set(A,P(W,L)),_(2,()=>{N(),E.emit()}))},item:(A,W)=>(r.current.add(A),W&&(i.current.has(W)?i.current.get(W).add(A):i.current.set(W,new Set([A]))),_(3,()=>{I(),N(),n.current.value||B(),E.emit()}),()=>{o.current.delete(A),r.current.delete(A),n.current.filtered.items.delete(A);let L=D();_(4,()=>{I(),(L==null?void 0:L.getAttribute("id"))===A&&B(),E.emit()})}),group:A=>(i.current.has(A)||i.current.set(A,new Set),()=>{o.current.delete(A),i.current.delete(A)}),filter:()=>l.current.shouldFilter,label:a||e["aria-label"],disablePointerSelection:g,listId:y,inputId:b,labelId:w,listInnerRef:S}),[]);function P(A,W){var L,$;let H=($=(L=l.current)==null?void 0:L.filter)!=null?$:sF;return A?H(A,n.current.search,W):0}function N(){if(!n.current.search||l.current.shouldFilter===!1)return;let A=n.current.filtered.items,W=[];n.current.filtered.groups.forEach($=>{let H=i.current.get($),Y=0;H.forEach(K=>{let G=A.get(K);Y=Math.max(G,Y)}),W.push([$,Y])});let L=S.current;F().sort(($,H)=>{var Y,K;let G=$.getAttribute("id"),Q=H.getAttribute("id");return((Y=A.get(Q))!=null?Y:0)-((K=A.get(G))!=null?K:0)}).forEach($=>{let H=$.closest(Bh);H?H.appendChild($.parentElement===H?$:$.closest(`${Bh} > *`)):L.appendChild($.parentElement===L?$:$.closest(`${Bh} > *`))}),W.sort(($,H)=>H[1]-$[1]).forEach($=>{let H=S.current.querySelector(`${Ta}[${ao}="${encodeURIComponent($[0])}"]`);H==null||H.parentElement.appendChild(H)})}function B(){let A=F().find(L=>L.getAttribute("aria-disabled")!=="true"),W=A==null?void 0:A.getAttribute(ao);E.setState("value",W||void 0)}function I(){var A,W,L,$;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let H=0;for(let Y of r.current){let K=(W=(A=o.current.get(Y))==null?void 0:A.value)!=null?W:"",G=($=(L=o.current.get(Y))==null?void 0:L.keywords)!=null?$:[],Q=P(K,G);n.current.filtered.items.set(Y,Q),Q>0&&H++}for(let[Y,K]of i.current)for(let G of K)if(n.current.filtered.items.get(G)>0){n.current.filtered.groups.add(Y);break}n.current.filtered.count=H}function U(){var A,W,L;let $=D();$&&(((A=$.parentElement)==null?void 0:A.firstChild)===$&&((L=(W=$.closest(Ta))==null?void 0:W.querySelector(oF))==null||L.scrollIntoView({block:"nearest"})),$.scrollIntoView({block:"nearest"}))}function D(){var A;return(A=S.current)==null?void 0:A.querySelector(`${_v}[aria-selected="true"]`)}function F(){var A;return Array.from((A=S.current)==null?void 0:A.querySelectorAll(T1))}function O(A){let W=F()[A];W&&E.setState("value",W.getAttribute(ao))}function M(A){var W;let L=D(),$=F(),H=$.findIndex(K=>K===L),Y=$[H+A];(W=l.current)!=null&&W.loop&&(Y=H+A<0?$[$.length-1]:H+A===$.length?$[0]:$[H+A]),Y&&E.setState("value",Y.getAttribute(ao))}function V(A){let W=D(),L=W==null?void 0:W.closest(Ta),$;for(;L&&!$;)L=A>0?mF(L,Ta):gF(L,Ta),$=L==null?void 0:L.querySelector(T1);$?E.setState("value",$.getAttribute(ao)):M(A)}let k=()=>O(F().length-1),R=A=>{A.preventDefault(),A.metaKey?k():A.altKey?V(1):M(1)},j=A=>{A.preventDefault(),A.metaKey?O(0):A.altKey?V(-1):M(-1)};return x.createElement(Se.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:A=>{var W;if((W=v.onKeyDown)==null||W.call(v,A),!A.defaultPrevented)switch(A.key){case"n":case"j":{m&&A.ctrlKey&&R(A);break}case"ArrowDown":{R(A);break}case"p":case"k":{m&&A.ctrlKey&&j(A);break}case"ArrowUp":{j(A);break}case"Home":{A.preventDefault(),O(0);break}case"End":{A.preventDefault(),k();break}case"Enter":if(!A.nativeEvent.isComposing&&A.keyCode!==229){A.preventDefault();let L=D();if(L){let $=new Event(Em);L.dispatchEvent($)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:wF},a),Td(e,A=>x.createElement(C2.Provider,{value:E},x.createElement(_2.Provider,{value:C},A))))}),aF=x.forwardRef((e,t)=>{var n,r;let i=x.useId(),o=x.useRef(null),h=x.useContext(E2),l=nc(),a=k2(e),f=(r=(n=a.current)==null?void 0:n.forceMount)!=null?r:h==null?void 0:h.forceMount;Ro(()=>{if(!f)return l.item(i,h==null?void 0:h.id)},[f]);let u=P2(i,o,[e.value,e.children,o],e.keywords),s=Cv(),c=Mo(_=>_.value&&_.value===u.current),d=Mo(_=>f||l.filter()===!1?!0:_.search?_.filtered.items.get(i)>0:!0);x.useEffect(()=>{let _=o.current;if(!(!_||e.disabled))return _.addEventListener(Em,p),()=>_.removeEventListener(Em,p)},[d,e.onSelect,e.disabled]);function p(){var _,E;g(),(E=(_=a.current).onSelect)==null||E.call(_,u.current)}function g(){s.setState("value",u.current,!0)}if(!d)return null;let{disabled:m,value:v,onSelect:y,forceMount:w,keywords:b,...S}=e;return x.createElement(Se.div,{ref:Rl([o,t]),...S,id:i,"cmdk-item":"",role:"option","aria-disabled":!!m,"aria-selected":!!c,"data-disabled":!!m,"data-selected":!!c,onPointerMove:m||l.disablePointerSelection?void 0:g,onClick:m?void 0:p},e.children)}),lF=x.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...o}=e,h=x.useId(),l=x.useRef(null),a=x.useRef(null),f=x.useId(),u=nc(),s=Mo(d=>i||u.filter()===!1?!0:d.search?d.filtered.groups.has(h):!0);Ro(()=>u.group(h),[]),P2(h,l,[e.value,e.heading,a]);let c=x.useMemo(()=>({id:h,forceMount:i}),[i]);return x.createElement(Se.div,{ref:Rl([l,t]),...o,"cmdk-group":"",role:"presentation",hidden:s?void 0:!0},n&&x.createElement("div",{ref:a,"cmdk-group-heading":"","aria-hidden":!0,id:f},n),Td(e,d=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?f:void 0},x.createElement(E2.Provider,{value:c},d))))}),cF=x.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=x.useRef(null),o=Mo(h=>!h.search);return!n&&!o?null:x.createElement(Se.div,{ref:Rl([i,t]),...r,"cmdk-separator":"",role:"separator"})}),uF=x.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,o=Cv(),h=Mo(u=>u.search),l=Mo(u=>u.value),a=nc(),f=x.useMemo(()=>{var u;let s=(u=a.listInnerRef.current)==null?void 0:u.querySelector(`${_v}[${ao}="${encodeURIComponent(l)}"]`);return s==null?void 0:s.getAttribute("id")},[]);return x.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),x.createElement(Se.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.listId,"aria-labelledby":a.labelId,"aria-activedescendant":f,id:a.inputId,type:"text",value:i?e.value:h,onChange:u=>{i||o.setState("search",u.target.value),n==null||n(u.target.value)}})}),fF=x.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,o=x.useRef(null),h=x.useRef(null),l=nc();return x.useEffect(()=>{if(h.current&&o.current){let a=h.current,f=o.current,u,s=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let c=a.offsetHeight;f.style.setProperty("--cmdk-list-height",c.toFixed(1)+"px")})});return s.observe(a),()=>{cancelAnimationFrame(u),s.unobserve(a)}}},[]),x.createElement(Se.div,{ref:Rl([o,t]),...i,"cmdk-list":"",role:"listbox","aria-label":r,id:l.listId},Td(e,a=>x.createElement("div",{ref:Rl([h,l.listInnerRef]),"cmdk-list-sizer":""},a)))}),dF=x.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:o,container:h,...l}=e;return x.createElement(pd,{open:n,onOpenChange:r},x.createElement(md,{container:h},x.createElement(sa,{"cmdk-overlay":"",className:i}),x.createElement(aa,{"aria-label":e.label,"cmdk-dialog":"",className:o},x.createElement(T2,{ref:t,...l}))))}),hF=x.forwardRef((e,t)=>Mo(n=>n.filtered.count===0)?x.createElement(Se.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),pF=x.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...o}=e;return x.createElement(Se.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Td(e,h=>x.createElement("div",{"aria-hidden":!0},h)))}),cn=Object.assign(T2,{List:fF,Item:aF,Input:uF,Group:lF,Separator:cF,Dialog:dF,Empty:hF,Loading:pF});function mF(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function gF(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function k2(e){let t=x.useRef(e);return Ro(()=>{t.current=e}),t}var Ro=typeof window>"u"?x.useEffect:x.useLayoutEffect;function Zo(e){let t=x.useRef();return t.current===void 0&&(t.current=e()),t}function Rl(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Mo(e){let t=Cv(),n=()=>e(t.snapshot());return x.useSyncExternalStore(t.subscribe,n,n)}function P2(e,t,n,r=[]){let i=x.useRef(),o=nc();return Ro(()=>{var h;let l=(()=>{var f;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(f=u.current.textContent)==null?void 0:f.trim():i.current}})(),a=r.map(f=>f.trim());o.value(e,l,a),(h=t.current)==null||h.setAttribute(ao,l),i.current=l}),i}var vF=()=>{let[e,t]=x.useState(),n=Zo(()=>new Map);return Ro(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,i)=>{n.current.set(r,i),t({})}};function yF(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Td({asChild:e,children:t},n){return e&&x.isValidElement(t)?x.cloneElement(yF(t),{ref:t.ref},n(t.props.children)):n(t)}var wF={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const O2=x.forwardRef(({className:e,...t},n)=>T.jsx(cn,{ref:n,className:we("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));O2.displayName=cn.displayName;const bF=x.forwardRef(({className:e,...t},n)=>T.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[T.jsx(w3,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),T.jsx(cn.Input,{ref:n,className:we("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));bF.displayName=cn.Input.displayName;const $2=x.forwardRef(({className:e,...t},n)=>T.jsx(cn.List,{ref:n,className:we("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));$2.displayName=cn.List.displayName;const xF=x.forwardRef((e,t)=>T.jsx(cn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));xF.displayName=cn.Empty.displayName;const A2=x.forwardRef(({className:e,...t},n)=>T.jsx(cn.Group,{ref:n,className:we("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));A2.displayName=cn.Group.displayName;const SF=x.forwardRef(({className:e,...t},n)=>T.jsx(cn.Separator,{ref:n,className:we("-mx-1 h-px bg-border",e),...t}));SF.displayName=cn.Separator.displayName;const R2=x.forwardRef(({className:e,...t},n)=>T.jsx(cn.Item,{ref:n,className:we("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",e),...t}));R2.displayName=cn.Item.displayName;const M2="Popover",[D2,Y7]=qt(M2,[Gi]),Ev=Gi(),[_F,ua]=D2(M2),CF=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:h=!1}=e,l=Ev(t),a=x.useRef(null),[f,u]=x.useState(!1),[s=!1,c]=Fn({prop:r,defaultProp:i,onChange:o});return x.createElement(ql,l,x.createElement(_F,{scope:t,contentId:an(),triggerRef:a,open:s,onOpenChange:c,onOpenToggle:x.useCallback(()=>c(d=>!d),[c]),hasCustomAnchor:f,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:h},n))},EF="PopoverTrigger",TF=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ua(EF,n),o=Ev(n),h=Oe(t,i.triggerRef),l=x.createElement(Se.button,ae({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":L2(i.open)},r,{ref:h,onClick:pe(e.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?l:x.createElement(sd,ae({asChild:!0},o),l)}),N2="PopoverPortal",[kF,PF]=D2(N2,{forceMount:void 0}),OF=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,o=ua(N2,t);return x.createElement(kF,{scope:t,forceMount:n},x.createElement(kt,{present:n||o.open},x.createElement(Wl,{asChild:!0,container:i},r)))},Ml="PopoverContent",$F=x.forwardRef((e,t)=>{const n=PF(Ml,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,o=ua(Ml,e.__scopePopover);return x.createElement(kt,{present:r||o.open},o.modal?x.createElement(AF,ae({},i,{ref:t})):x.createElement(RF,ae({},i,{ref:t})))}),AF=x.forwardRef((e,t)=>{const n=ua(Ml,e.__scopePopover),r=x.useRef(null),i=Oe(t,r),o=x.useRef(!1);return x.useEffect(()=>{const h=r.current;if(h)return hd(h)},[]),x.createElement(Zl,{as:Sr,allowPinchZoom:!0},x.createElement(F2,ae({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,h=>{var l;h.preventDefault(),o.current||(l=n.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,h=>{const l=h.detail.originalEvent,a=l.button===0&&l.ctrlKey===!0,f=l.button===2||a;o.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:pe(e.onFocusOutside,h=>h.preventDefault(),{checkForDefaultPrevented:!1})})))}),RF=x.forwardRef((e,t)=>{const n=ua(Ml,e.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return x.createElement(F2,ae({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var h;if((h=e.onCloseAutoFocus)===null||h===void 0||h.call(e,o),!o.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),o.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:o=>{var h,l;(h=e.onInteractOutside)===null||h===void 0||h.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;((l=n.triggerRef.current)===null||l===void 0?void 0:l.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}}))}),F2=x.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:h,onEscapeKeyDown:l,onPointerDownOutside:a,onFocusOutside:f,onInteractOutside:u,...s}=e,c=ua(Ml,n),d=Ev(n);return fd(),x.createElement(ud,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},x.createElement(ea,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:a,onFocusOutside:f,onDismiss:()=>c.onOpenChange(!1)},x.createElement(ad,ae({"data-state":L2(c.open),role:"dialog",id:c.contentId},d,s,{ref:t,style:{...s.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function L2(e){return e?"open":"closed"}const MF=CF,DF=TF,NF=OF,I2=$F,FF=MF,LF=DF,j2=x.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>T.jsx(NF,{children:T.jsx(I2,{ref:i,align:t,sideOffset:n,className:we("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));j2.displayName=I2.displayName;const k1=[{label:"English",value:"en"},{label:"Espaol",value:"es"}];function IF(){var h;const[e,t]=DA(l=>[l.language,l.setLanguage]),{i18n:{changeLanguage:n}}=gd(),[r,i]=ke.useState(!1),o=l=>{t(l),n(l),i(!1)};return T.jsx("div",{children:T.jsxs(FF,{open:r,onOpenChange:i,children:[T.jsx(LF,{asChild:!0,children:T.jsxs(Wt,{variant:"outline",role:"combobox",className:"w-[150px] justify-between",children:[e?(h=k1.find(l=>l.value===e))==null?void 0:h.label:"Select language",T.jsx(c3,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),T.jsx(j2,{className:"w-[150px] p-2",children:T.jsx(O2,{children:T.jsx($2,{children:T.jsx(A2,{heading:"Suggestions",children:k1.map(l=>T.jsxs(R2,{onSelect:()=>o(l.value),children:[T.jsx(s3,{className:`mr-2 h-4 w-4 ${l.value===e?"opacity-100":"opacity-0"}`}),l.label]},l.value))})})})})]})})}const jF=()=>{const[e,t,n,r,i,o,h,l,a,f,u,s,c,d]=Xe(p=>[p.file,p.customMask,p.isInpainting,p.serverConfig,p.runMannually(),p.settings.enableUploadMask,p.settings.model,p.setFile,p.setCustomFile,p.runInpainting,p.showPrevMask,p.hidePrevMask,p.imageHeight,p.imageWidth]);return T.jsxs("header",{className:"h-[60px] px-6 py-4 absolute top-[0] flex justify-between items-center w-full z-20 border-b backdrop-filter backdrop-blur-md bg-background/70",children:[T.jsx("div",{className:"flex items-center gap-1",children:T.jsx(g_,{disabled:n,tooltip:"Upload image",onFileUpload:p=>{l(p)},children:T.jsx(m3,{})})}),T.jsxs("div",{className:"flex gap-1",children:[T.jsx(IF,{}),T.jsx(YD,{}),T.jsx(KN,{})]})]})};function BF({title:e,titleId:t,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"}))}const zF=x.forwardRef(BF);var On=function(e,t){return Number(e.toFixed(t))},UF=function(e,t){return t},et=function(e,t,n){n&&typeof n=="function"&&n(e,t)},VF=function(e){return-Math.cos(e*Math.PI)/2+.5},HF=function(e){return e},WF=function(e){return e*e},YF=function(e){return e*(2-e)},XF=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},GF=function(e){return e*e*e},KF=function(e){return--e*e*e+1},qF=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},ZF=function(e){return e*e*e*e},QF=function(e){return 1- --e*e*e*e},JF=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},e8=function(e){return e*e*e*e*e},t8=function(e){return 1+--e*e*e*e*e},n8=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},B2={easeOut:VF,linear:HF,easeInQuad:WF,easeOutQuad:YF,easeInOutQuad:XF,easeInCubic:GF,easeOutCubic:KF,easeInOutCubic:qF,easeInQuart:ZF,easeOutQuart:QF,easeInOutQuart:JF,easeInQuint:e8,easeOutQuint:t8,easeInOutQuint:n8},z2=function(e){typeof e=="number"&&cancelAnimationFrame(e)},dr=function(e){e.mounted&&(z2(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function U2(e,t,n,r){if(e.mounted){var i=new Date().getTime(),o=1;dr(e),e.animation=function(){if(!e.mounted)return z2(e.animation);var h=new Date().getTime()-i,l=h/n,a=B2[t],f=a(l);h>=n?(r(o),e.animation=null):e.animation&&(r(f),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function r8(e){var t=e.scale,n=e.positionX,r=e.positionY;return!(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))}function qi(e,t,n,r){var i=r8(t);if(!(!e.mounted||!i)){var o=e.setTransformState,h=e.transformState,l=h.scale,a=h.positionX,f=h.positionY,u=t.scale-l,s=t.positionX-a,c=t.positionY-f;n===0?o(t.scale,t.positionX,t.positionY):U2(e,r,n,function(d){var p=l+u*d,g=a+s*d,m=f+c*d;o(p,g,m)})}}function i8(e,t,n){var r=e.offsetWidth,i=e.offsetHeight,o=t.offsetWidth,h=t.offsetHeight,l=o*n,a=h*n,f=r-l,u=i-a;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:l,newDiffWidth:f,newContentHeight:a,newDiffHeight:u}}var o8=function(e,t,n,r,i,o,h){var l=e>t?n*(h?1:.5):0,a=r>i?o*(h?1:.5):0,f=e-t-l,u=l,s=r-i-a,c=a;return{minPositionX:f,maxPositionX:u,minPositionY:s,maxPositionY:c}},Tv=function(e,t){var n=e.wrapperComponent,r=e.contentComponent,i=e.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var o=i8(n,r,t),h=o.wrapperWidth,l=o.wrapperHeight,a=o.newContentWidth,f=o.newDiffWidth,u=o.newContentHeight,s=o.newDiffHeight,c=o8(h,a,f,l,u,s,!!i);return c},Tm=function(e,t,n,r){return r?e<t?On(t,2):e>n?On(n,2):On(e,2):On(e,2)},Ks=function(e,t){var n=Tv(e,t);return e.bounds=n,n};function kd(e,t,n,r,i,o,h){var l=n.minPositionX,a=n.minPositionY,f=n.maxPositionX,u=n.maxPositionY,s=0,c=0;h&&(s=i,c=o);var d=Tm(e,l-s,f+s,r),p=Tm(t,a-c,u+c,r);return{x:d,y:p}}function Pd(e,t,n,r,i,o){var h=e.transformState,l=h.scale,a=h.positionX,f=h.positionY,u=r-l;if(typeof t!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:a,y:f};var s=a-t*u,c=f-n*u,d=kd(s,c,i,o,0,0,null);return d}function rc(e,t,n,r,i){var o=i?r:0,h=t-o;return!Number.isNaN(n)&&e>=n?n:!Number.isNaN(t)&&e<=h?h:e}var P1=function(e,t){var n=e.setup.panning.excluded,r=e.isInitialized,i=e.wrapperComponent,o=t.target,h="shadowRoot"in o&&"composedPath"in t,l=h?t.composedPath().some(function(u){return u instanceof Element?i==null?void 0:i.contains(u):!1}):i==null?void 0:i.contains(o),a=r&&o&&l;if(!a)return!1;var f=Od(o,n);return!f},O1=function(e){var t=e.isInitialized,n=e.isPanning,r=e.setup,i=r.panning.disabled,o=t&&n&&!i;return!!o},s8=function(e,t){var n=e.transformState,r=n.positionX,i=n.positionY;e.isPanning=!0;var o=t.clientX,h=t.clientY;e.startCoords={x:o-r,y:h-i}},a8=function(e,t){var n=t.touches,r=e.transformState,i=r.positionX,o=r.positionY;e.isPanning=!0;var h=n.length===1;if(h){var l=n[0].clientX,a=n[0].clientY;e.startCoords={x:l-i,y:a-o}}};function l8(e){var t=e.transformState,n=t.positionX,r=t.positionY,i=t.scale,o=e.setup,h=o.disabled,l=o.limitToBounds,a=o.centerZoomedOut,f=e.wrapperComponent;if(!(h||!f||!e.bounds)){var u=e.bounds,s=u.maxPositionX,c=u.minPositionX,d=u.maxPositionY,p=u.minPositionY,g=n>s||n<c,m=r>d||r<p,v=n>s?f.offsetWidth:e.setup.minPositionX||0,y=r>d?f.offsetHeight:e.setup.minPositionY||0,w=Pd(e,v,y,i,e.bounds,l||a),b=w.x,S=w.y;return{scale:i,positionX:g?b:n,positionY:m?S:r}}}function V2(e,t,n,r,i){var o=e.setup.limitToBounds,h=e.wrapperComponent,l=e.bounds,a=e.transformState,f=a.scale,u=a.positionX,s=a.positionY;if(!(h===null||l===null||t===u&&n===s)){var c=kd(t,n,l,o,r,i,h),d=c.x,p=c.y;e.setTransformState(f,d,p)}}var c8=function(e,t,n){var r=e.startCoords,i=e.transformState,o=e.setup.panning,h=o.lockAxisX,l=o.lockAxisY,a=i.positionX,f=i.positionY;if(!r)return{x:a,y:f};var u=t-r.x,s=n-r.y,c=h?a:u,d=l?f:s;return{x:c,y:d}},qs=function(e,t){var n=e.setup,r=e.transformState,i=r.scale,o=n.minScale,h=n.disablePadding;return t>0&&i>=o&&!h?t:0},u8=function(e){var t=e.mounted,n=e.setup,r=n.disabled,i=n.velocityAnimation,o=e.transformState.scale,h=i.disabled,l=!h||o>1||!r||t;return!!l},f8=function(e){var t=e.mounted,n=e.velocity,r=e.bounds,i=e.setup,o=i.disabled,h=i.velocityAnimation,l=e.transformState.scale,a=h.disabled,f=!a||l>1||!o||t;return!(!f||!n||!r)};function d8(e,t){var n=e.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,o=n.sensitivity;return r?i*t*o:i}function $1(e,t,n,r,i,o,h,l,a,f){if(i){if(t>h&&n>h){var u=h+(e-h)*f;return u>a?a:u<h?h:u}if(t<o&&n<o){var u=o+(e-o)*f;return u<l?l:u>o?o:u}}return r?t:Tm(e,o,h,i)}function h8(e,t){var n=1;return t?Math.min(n,e.offsetWidth/window.innerWidth):n}function p8(e,t){var n=u8(e);if(n){var r=e.lastMousePosition,i=e.velocityTime,o=e.setup,h=e.wrapperComponent,l=o.velocityAnimation.equalToMove,a=Date.now();if(r&&i&&h){var f=h8(h,l),u=t.x-r.x,s=t.y-r.y,c=u/f,d=s/f,p=a-i,g=u*u+s*s,m=Math.sqrt(g)/p;e.velocity={velocityX:c,velocityY:d,total:m}}e.lastMousePosition=t,e.velocityTime=a}}function m8(e){var t=e.velocity,n=e.bounds,r=e.setup,i=e.wrapperComponent,o=f8(e);if(!(!o||!t||!n||!i)){var h=t.velocityX,l=t.velocityY,a=t.total,f=n.maxPositionX,u=n.minPositionX,s=n.maxPositionY,c=n.minPositionY,d=r.limitToBounds,p=r.alignmentAnimation,g=r.zoomAnimation,m=r.panning,v=m.lockAxisY,y=m.lockAxisX,w=g.animationType,b=p.sizeX,S=p.sizeY,_=p.velocityAlignmentTime,E=_,C=d8(e,a),P=Math.max(C,E),N=qs(e,b),B=qs(e,S),I=N*i.offsetWidth/100,U=B*i.offsetHeight/100,D=f+I,F=u-I,O=s+U,M=c-U,V=e.transformState,k=new Date().getTime();U2(e,w,P,function(R){var j=e.transformState,A=j.scale,W=j.positionX,L=j.positionY,$=new Date().getTime()-k,H=$/E,Y=B2[p.animationType],K=1-Y(Math.min(1,H)),G=1-R,Q=W+h*G,ee=L+l*G,le=$1(Q,V.positionX,W,y,d,u,f,F,D,K),te=$1(ee,V.positionY,L,v,d,c,s,M,O,K);(W!==Q||L!==ee)&&e.setTransformState(A,le,te)})}}function A1(e,t){var n=e.transformState.scale;dr(e),Ks(e,n),window.TouchEvent!==void 0&&t instanceof TouchEvent?a8(e,t):s8(e,t)}function H2(e){var t=e.transformState.scale,n=e.setup,r=n.minScale,i=n.alignmentAnimation,o=i.disabled,h=i.sizeX,l=i.sizeY,a=i.animationTime,f=i.animationType,u=o||t<r||!h&&!l;if(!u){var s=l8(e);s&&qi(e,s,a,f)}}function R1(e,t,n){var r=e.startCoords,i=e.setup,o=i.alignmentAnimation,h=o.sizeX,l=o.sizeY;if(r){var a=c8(e,t,n),f=a.x,u=a.y,s=qs(e,h),c=qs(e,l);p8(e,{x:f,y:u}),V2(e,f,u,s,c)}}function g8(e){if(e.isPanning){var t=e.setup.panning.velocityDisabled,n=e.velocity,r=e.wrapperComponent,i=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var o=r==null?void 0:r.getBoundingClientRect(),h=i==null?void 0:i.getBoundingClientRect(),l=(o==null?void 0:o.width)||0,a=(o==null?void 0:o.height)||0,f=(h==null?void 0:h.width)||0,u=(h==null?void 0:h.height)||0,s=l<f||a<u,c=!t&&n&&(n==null?void 0:n.total)>.1&&s;c?m8(e):H2(e)}}function kv(e,t,n,r){var i=e.setup,o=i.minScale,h=i.maxScale,l=i.limitToBounds,a=rc(On(t,2),o,h,0,!1),f=Ks(e,a),u=Pd(e,n,r,a,f,l),s=u.x,c=u.y;return{scale:a,positionX:s,positionY:c}}function W2(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,o=e.setup,h=o.minScale,l=o.limitToBounds,a=o.zoomAnimation,f=a.disabled,u=a.animationTime,s=a.animationType,c=f||r>=h;if((r>=1||l)&&H2(e),!(c||!i||!e.mounted)){var d=t||i.offsetWidth/2,p=n||i.offsetHeight/2,g=kv(e,h,d,p);g&&qi(e,g,u,s)}}var Li=function(){return Li=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Li.apply(this,arguments)};function M1(e,t,n){for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Bc={previousScale:1,scale:1,positionX:0,positionY:0},ka={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Y2=function(e){var t,n,r,i;return{previousScale:(t=e.initialScale)!==null&&t!==void 0?t:Bc.scale,scale:(n=e.initialScale)!==null&&n!==void 0?n:Bc.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:Bc.positionX,positionY:(i=e.initialPositionY)!==null&&i!==void 0?i:Bc.positionY}},D1=function(e){var t=Li({},ka);return Object.keys(e).forEach(function(n){var r=typeof e[n]<"u",i=typeof ka[n]<"u";if(i&&r){var o=Object.prototype.toString.call(ka[n]),h=o==="[object Object]",l=o==="[object Array]";h?t[n]=Li(Li({},ka[n]),e[n]):l?t[n]=M1(M1([],ka[n],!0),e[n]):t[n]=e[n]}}),t},X2=function(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,o=e.setup,h=o.maxScale,l=o.minScale,a=o.zoomAnimation,f=o.smooth,u=a.size;if(!i)throw new Error("Wrapper is not mounted");var s=f?r*Math.exp(t*n):r+t*n,c=rc(On(s,3),l,h,u,!1);return c};function G2(e,t,n,r,i){var o=e.wrapperComponent,h=e.transformState,l=h.scale,a=h.positionX,f=h.positionY;if(!o)return console.error("No WrapperComponent found");var u=o.offsetWidth,s=o.offsetHeight,c=(u/2-a)/l,d=(s/2-f)/l,p=X2(e,t,n),g=kv(e,p,c,d);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");qi(e,g,r,i)}function K2(e,t,n,r){var i=e.setup,o=e.wrapperComponent,h=i.limitToBounds,l=Y2(e.props),a=e.transformState,f=a.scale,u=a.positionX,s=a.positionY;if(o){var c=Tv(e,l.scale),d=kd(l.positionX,l.positionY,c,h,0,0,o),p={scale:l.scale,positionX:d.x,positionY:d.y};f===l.scale&&u===l.positionX&&s===l.positionY||(r==null||r(),qi(e,p,t,n))}}function v8(e,t,n,r){var i=e.getBoundingClientRect(),o=t.getBoundingClientRect(),h=n.getBoundingClientRect(),l=o.x*r.scale,a=o.y*r.scale;return{x:(i.x-h.x+l)/r.scale,y:(i.y-h.y+a)/r.scale}}function y8(e,t,n){var r=e.wrapperComponent,i=e.contentComponent,o=e.transformState,h=e.setup,l=h.limitToBounds,a=h.minScale,f=h.maxScale;if(!r||!i)return o;var u=r.getBoundingClientRect(),s=t.getBoundingClientRect(),c=v8(t,r,i,o),d=c.x,p=c.y,g=s.width/o.scale,m=s.height/o.scale,v=r.offsetWidth/g,y=r.offsetHeight/m,w=rc(n||Math.min(v,y),a,f,0,!1),b=(u.width-g*w)/2,S=(u.height-m*w)/2,_=(u.left-d)*w+b,E=(u.top-p)*w+S,C=Tv(e,w),P=kd(_,E,C,l,0,0,r),N=P.x,B=P.y;return{positionX:N,positionY:B,scale:w}}var w8=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),G2(e,1,t,n,r)}},b8=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),G2(e,-1,t,n,r)}},x8=function(e){return function(t,n,r,i,o){i===void 0&&(i=300),o===void 0&&(o="easeOut");var h=e.transformState,l=h.positionX,a=h.positionY,f=h.scale,u=e.wrapperComponent,s=e.contentComponent,c=e.setup.disabled;if(!(c||!u||!s)){var d={positionX:Number.isNaN(t)?l:t,positionY:Number.isNaN(n)?a:n,scale:Number.isNaN(r)?f:r};qi(e,d,i,o)}}},S8=function(e){return function(t,n){t===void 0&&(t=200),n===void 0&&(n="easeOut"),K2(e,t,n)}},_8=function(e){return function(t,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=e.transformState,o=e.wrapperComponent,h=e.contentComponent;if(o&&h){var l=q2(t||i.scale,o,h);qi(e,l,n,r)}}},C8=function(e){return function(t,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),dr(e);var o=e.wrapperComponent,h=typeof t=="string"?document.getElementById(t):t;if(o&&h&&o.contains(h)){var l=y8(e,h,n);qi(e,l,r,i)}}},km=function(e){return{instance:e,zoomIn:w8(e),zoomOut:b8(e),setTransform:x8(e),resetTransform:S8(e),centerView:_8(e),zoomToElement:C8(e)}},E8=function(e){return{instance:e,state:e.transformState}},Ye=function(e){var t={};return Object.assign(t,E8(e)),Object.assign(t,km(e)),t},zh=!1;function Uh(){try{var e={get passive(){return zh=!0,!1}};return e}catch{return zh=!1,zh}}var Od=function(e,t){return t.some(function(n){return e.matches("".concat(n,", .").concat(n,", ").concat(n," *, .").concat(n," *"))})},Pm=function(e){e&&clearTimeout(e)},T8=function(e,t,n){return"translate(".concat(e,"px, ").concat(t,"px) scale(").concat(n,")")},q2=function(e,t,n){var r=n.offsetWidth*e,i=n.offsetHeight*e,o=(t.offsetWidth-r)/2,h=(t.offsetHeight-i)/2;return{scale:e,positionX:o,positionY:h}};function k8(e){return function(t){e.forEach(function(n){typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var P8=function(e,t){var n=e.setup.wheel,r=n.disabled,i=n.wheelDisabled,o=n.touchPadDisabled,h=n.excluded,l=e.isInitialized,a=e.isPanning,f=t.target,u=l&&!a&&!r&&f;if(!u||i&&!t.ctrlKey||o&&t.ctrlKey)return!1;var s=Od(f,h);return!s},O8=function(e){return e?e.deltaY<0?1:-1:0};function $8(e,t){var n=O8(e),r=UF(t,n);return r}function Z2(e,t,n){var r=t.getBoundingClientRect(),i=0,o=0;if("clientX"in e)i=(e.clientX-r.left)/n,o=(e.clientY-r.top)/n;else{var h=e.touches[0];i=(h.clientX-r.left)/n,o=(h.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(o))&&console.error("No mouse or touch offset found"),{x:i,y:o}}var A8=function(e,t,n,r,i){var o=e.transformState.scale,h=e.wrapperComponent,l=e.setup,a=l.maxScale,f=l.minScale,u=l.zoomAnimation,s=l.disablePadding,c=u.size,d=u.disabled;if(!h)throw new Error("Wrapper is not mounted");var p=o+t*n,g=r?!1:!d,m=rc(On(p,3),f,a,c,g&&!s);return m},R8=function(e,t){var n=e.previousWheelEvent,r=e.transformState.scale,i=e.setup,o=i.maxScale,h=i.minScale;return n?r<o||r>h||Math.sign(n.deltaY)!==Math.sign(t.deltaY)||n.deltaY>0&&n.deltaY<t.deltaY||n.deltaY<0&&n.deltaY>t.deltaY||Math.sign(n.deltaY)!==Math.sign(t.deltaY):!1},M8=function(e,t){var n=e.setup.pinch,r=n.disabled,i=n.excluded,o=e.isInitialized,h=t.target,l=o&&!r&&h;if(!l)return!1;var a=Od(h,i);return!a},D8=function(e){var t=e.setup.pinch.disabled,n=e.isInitialized,r=e.pinchStartDistance,i=n&&!t&&r;return!!i},N8=function(e,t,n){var r=n.getBoundingClientRect(),i=e.touches,o=On(i[0].clientX-r.left,5),h=On(i[0].clientY-r.top,5),l=On(i[1].clientX-r.left,5),a=On(i[1].clientY-r.top,5);return{x:(o+l)/2/t,y:(h+a)/2/t}},Q2=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},F8=function(e,t){var n=e.pinchStartScale,r=e.pinchStartDistance,i=e.setup,o=i.maxScale,h=i.minScale,l=i.zoomAnimation,a=i.disablePadding,f=l.size,u=l.disabled;if(!n||r===null||!t)throw new Error("Pinch touches distance was not provided");if(t<0)return e.transformState.scale;var s=t/r,c=s*n;return rc(On(c,2),h,o,f,!u&&!a)},L8=160,I8=100,j8=function(e,t){var n=e.props,r=n.onWheelStart,i=n.onZoomStart;e.wheelStopEventTimer||(dr(e),et(Ye(e),t,r),et(Ye(e),t,i))},B8=function(e,t){var n=e.props,r=n.onWheel,i=n.onZoom,o=e.contentComponent,h=e.setup,l=e.transformState,a=l.scale,f=h.limitToBounds,u=h.centerZoomedOut,s=h.zoomAnimation,c=h.wheel,d=h.disablePadding,p=h.smooth,g=s.size,m=s.disabled,v=c.step,y=c.smoothStep;if(!o)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var w=$8(t,null),b=p?y*Math.abs(t.deltaY):v,S=A8(e,w,b,!t.ctrlKey);if(a!==S){var _=Ks(e,S),E=Z2(t,o,a),C=m||g===0||u||d,P=f&&C,N=Pd(e,E.x,E.y,S,_,P),B=N.x,I=N.y;e.previousWheelEvent=t,e.setTransformState(S,B,I),et(Ye(e),t,r),et(Ye(e),t,i)}},z8=function(e,t){var n=e.props,r=n.onWheelStop,i=n.onZoomStop;Pm(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(W2(e,t.x,t.y),e.wheelAnimationTimer=null)},I8);var o=R8(e,t);o&&(Pm(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,et(Ye(e),t,r),et(Ye(e),t,i))},L8))},U8=function(e,t){var n=Q2(t);e.pinchStartDistance=n,e.lastDistance=n,e.pinchStartScale=e.transformState.scale,e.isPanning=!1,dr(e)},V8=function(e,t){var n=e.contentComponent,r=e.pinchStartDistance,i=e.transformState.scale,o=e.setup,h=o.limitToBounds,l=o.centerZoomedOut,a=o.zoomAnimation,f=a.disabled,u=a.size;if(!(r===null||!n)){var s=N8(t,i,n);if(!(!Number.isFinite(s.x)||!Number.isFinite(s.y))){var c=Q2(t),d=F8(e,c);if(d!==i){var p=Ks(e,d),g=f||u===0||l,m=h&&g,v=Pd(e,s.x,s.y,d,p,m),y=v.x,w=v.y;e.pinchMidpoint=s,e.lastDistance=c,e.setTransformState(d,y,w)}}}},H8=function(e){var t=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,W2(e,t==null?void 0:t.x,t==null?void 0:t.y)},J2=function(e,t){var n=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;Pm(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,et(Ye(e),t,n)},r)},W8=function(e,t){var n=e.props,r=n.onZoomStart,i=n.onZoom,o=e.setup.doubleClick,h=o.animationTime,l=o.animationType;et(Ye(e),t,r),K2(e,h,l,function(){return et(Ye(e),t,i)}),J2(e,t)};function Y8(e,t){return e==="toggle"?t===1?1:-1:e==="zoomOut"?-1:1}function X8(e,t){var n=e.setup,r=e.doubleClickStopEventTimer,i=e.transformState,o=e.contentComponent,h=i.scale,l=e.props,a=l.onZoomStart,f=l.onZoom,u=n.doubleClick,s=u.disabled,c=u.mode,d=u.step,p=u.animationTime,g=u.animationType;if(!s&&!r){if(c==="reset")return W8(e,t);if(!o)return console.error("No ContentComponent found");var m=Y8(c,e.transformState.scale),v=X2(e,m,d);if(h!==v){et(Ye(e),t,a);var y=Z2(t,o,h),w=kv(e,v,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");et(Ye(e),t,f),qi(e,w,p,g),J2(e,t)}}}var G8=function(e,t){var n=e.isInitialized,r=e.setup,i=e.wrapperComponent,o=r.doubleClick,h=o.disabled,l=o.excluded,a=t.target,f=i==null?void 0:i.contains(a),u=n&&a&&f&&!h;if(!u)return!1;var s=Od(a,l);return!s},K8=function(){function e(t){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,Ks(n,n.transformState.scale),n.setup=D1(r)},this.initializeWindowEvents=function(){var r,i,o=Uh(),h=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,l=h==null?void 0:h.defaultView;(i=n.wrapperComponent)===null||i===void 0||i.addEventListener("wheel",n.onWheelPanning,o),l==null||l.addEventListener("mousedown",n.onPanningStart,o),l==null||l.addEventListener("mousemove",n.onPanning,o),l==null||l.addEventListener("mouseup",n.onPanningStop,o),h==null||h.addEventListener("mouseleave",n.clearPanning,o),l==null||l.addEventListener("keyup",n.setKeyUnPressed,o),l==null||l.addEventListener("keydown",n.setKeyPressed,o)},this.cleanupWindowEvents=function(){var r,i,o=Uh(),h=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,l=h==null?void 0:h.defaultView;l==null||l.removeEventListener("mousedown",n.onPanningStart,o),l==null||l.removeEventListener("mousemove",n.onPanning,o),l==null||l.removeEventListener("mouseup",n.onPanningStop,o),h==null||h.removeEventListener("mouseleave",n.clearPanning,o),l==null||l.removeEventListener("keyup",n.setKeyUnPressed,o),l==null||l.removeEventListener("keydown",n.setKeyPressed,o),document.removeEventListener("mouseleave",n.clearPanning,o),dr(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=Uh();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r){var i=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(o){return o(Ye(n))}),i&&(n.setCenter(),n.observer=new ResizeObserver(function(){var o,h=r.offsetWidth,l=r.offsetHeight;(h>0||l>0)&&(n.onInitCallbacks.forEach(function(a){return a(Ye(n))}),n.setCenter(),(o=n.observer)===null||o===void 0||o.disconnect())}),setTimeout(function(){var o;(o=n.observer)===null||o===void 0||o.disconnect()},5e3),n.observer.observe(r))},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var o=P8(n,r);if(o){var h=n.isPressingKeys(n.setup.wheel.activationKeys);h&&(j8(n,r),B8(n,r),z8(n,r))}}},this.onWheelPanning=function(r){var i=n.setup,o=i.disabled,h=i.wheel,l=i.panning;if(!(!n.wrapperComponent||!n.contentComponent||o||!h.wheelDisabled||l.disabled||!l.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var a=n.transformState,f=a.positionX,u=a.positionY,s=f-r.deltaX,c=u-r.deltaY,d=l.lockAxisX?f:s,p=l.lockAxisY?u:c,g=n.setup.alignmentAnimation,m=g.sizeX,v=g.sizeY,y=qs(n,m),w=qs(n,v);d===f&&p===u||V2(n,d,p,y,w)}},this.onPanningStart=function(r){var i=n.setup.disabled,o=n.props.onPanningStart;if(!i){var h=P1(n,r);if(h){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),dr(n),A1(n,r),et(Ye(n),r,o)))}}},this.onPanning=function(r){var i=n.setup.disabled,o=n.props.onPanning;if(!i){var h=O1(n);if(h){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(r.preventDefault(),r.stopPropagation(),R1(n,r.clientX,r.clientY),et(Ye(n),r,o))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(g8(n),et(Ye(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,o=n.props,h=o.onPinchingStart,l=o.onZoomStart;if(!i){var a=M8(n,r);a&&(U8(n,r),dr(n),et(Ye(n),r,h),et(Ye(n),r,l))}},this.onPinch=function(r){var i=n.setup.disabled,o=n.props,h=o.onPinching,l=o.onZoom;if(!i){var a=D8(n);a&&(r.preventDefault(),r.stopPropagation(),V8(n,r),et(Ye(n),r,h),et(Ye(n),r,l))}},this.onPinchStop=function(r){var i=n.props,o=i.onPinchingStop,h=i.onZoomStop;n.pinchStartScale&&(H8(n),et(Ye(n),r,o),et(Ye(n),r,h))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,o=n.props.onPanningStart;if(!i){var h=P1(n,r);if(h){var l=n.lastTouch&&+new Date-n.lastTouch<200;if(l&&r.touches.length===1)n.onDoubleClick(r);else{n.lastTouch=+new Date,dr(n);var a=r.touches,f=a.length===1,u=a.length===2;f&&(dr(n),A1(n,r),et(Ye(n),r,o)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,o=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var h=O1(n);if(!h)return;r.preventDefault(),r.stopPropagation();var l=r.touches[0];R1(n,l.clientX,l.clientY),et(Ye(n),r,o)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var o=G8(n,r);o&&X8(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,o){var h=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(o)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=o,n.applyTransformation();var l=Ye(n);n.onChangeCallbacks.forEach(function(a){return a(l)}),et(l,{scale:r,positionX:i,positionY:o},h)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=q2(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,o){return n.props.customTransform?n.props.customTransform(r,i,o):T8(r,i,o)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,o=r.positionX,h=r.positionY,l=n.handleTransformStyles(o,h,i);n.contentComponent.style.transform=l}},this.getContext=function(){return Ye(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,Ks(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(i),n.initializeWindowEvents(),n.isInitialized=!0;var o=Ye(n);et(o,void 0,n.props.onInit)},this.props=t,this.setup=D1(this.props),this.transformState=Y2(this.props)}return e}(),Pv=ke.createContext(null),q8=function(e,t){return typeof e=="function"?e(t):e},Z8=ke.forwardRef(function(e,t){var n=x.useRef(new K8(e)).current,r=q8(e.children,km(n));return x.useImperativeHandle(t,function(){return km(n)},[n]),x.useEffect(function(){n.update(e)},[n,e]),ke.createElement(Pv.Provider,{value:n},r)});ke.forwardRef(function(e,t){var n=x.useRef(null),r=x.useContext(Pv);return x.useEffect(function(){return r.onChange(function(i){if(n.current){var o=0,h=0;n.current.style.transform=r.handleTransformStyles(o,h,1/i.instance.transformState.scale)}})},[r]),ke.createElement("div",Li({},e,{ref:k8([n,t])}))});function Q8(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var J8=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,N1={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Q8(J8);var eL=function(e){var t=e.children,n=e.wrapperClass,r=n===void 0?"":n,i=e.contentClass,o=i===void 0?"":i,h=e.wrapperStyle,l=e.contentStyle,a=e.wrapperProps,f=a===void 0?{}:a,u=e.contentProps,s=u===void 0?{}:u,c=x.useContext(Pv),d=c.init,p=c.cleanupWindowEvents,g=x.useRef(null),m=x.useRef(null);return x.useEffect(function(){var v=g.current,y=m.current;return v!==null&&y!==null&&d&&(d==null||d(v,y)),function(){p==null||p()}},[]),ke.createElement("div",Li({},f,{ref:g,className:"react-transform-wrapper ".concat(N1.wrapper," ").concat(r),style:h}),ke.createElement("div",Li({},s,{ref:m,className:"react-transform-component ".concat(N1.content," ").concat(o),style:l}),t))};function tL(){var e=x.useRef(!0);return e.current?(e.current=!1,!0):e.current}var nL=function(e,t){var n=tL();x.useEffect(function(){if(!n)return e()},t)},rL=function(){};function Ov(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function $v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var hu=typeof window<"u",iL=function(e,t){return typeof t=="boolean"?t:!e},oL=function(e){return x.useReducer(iL,e)},sL=["mousedown","touchstart"],aL=function(e,t,n){n===void 0&&(n=sL);var r=x.useRef(t);x.useEffect(function(){r.current=t},[t]),x.useEffect(function(){for(var i=function(a){var f=e.current;f&&!f.contains(a.target)&&r.current(a)},o=0,h=n;o<h.length;o++){var l=h[o];Ov(document,l,i)}return function(){for(var a=0,f=n;a<f.length;a++){var u=f[a];$v(document,u,i)}}},[n,e])},lL=function(e){x.useEffect(e,[])},cL=hu?window:null,F1=function(e){return!!e.addEventListener},L1=function(e){return!!e.on},uL=function(e,t,n,r){n===void 0&&(n=cL),x.useEffect(function(){if(t&&n)return F1(n)?Ov(n,e,t,r):L1(n)&&n.on(e,t,r),function(){F1(n)?$v(n,e,t,r):L1(n)&&n.off(e,t,r)}},[e,t,n,JSON.stringify(r)])},fL=function(e){return typeof e=="function"?e:typeof e=="string"?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},I1=function(e,t,n,r){t===void 0&&(t=rL),n===void 0&&(n={}),r===void 0&&(r=[e]);var i=n.event,o=i===void 0?"keydown":i,h=n.target,l=n.options,a=x.useMemo(function(){var f=fL(e),u=function(s){if(f(s))return t(s)};return u},r);uL(o,a,h,l)},dL=function(e){var t=x.useState([!1,null]),n=t[0],r=t[1];return I1(e,function(i){return r([!0,i])},{event:"keydown"},[n]),I1(e,function(i){return r([!1,i])},{event:"keyup"},[n]),n},Vh=function(e,t,n,r){r===void 0&&(r=dL);var i=r(e),o=i[0],h=i[1];nL(function(){!o&&n?n(h):o&&t&&t(h)},[o])},hL=function(e){var t=x.useRef(e);t.current=e,lL(function(){return function(){return t.current()}})},pL=function(e){var t=x.useRef(0),n=x.useState(e),r=n[0],i=n[1],o=x.useCallback(function(h){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){i(h)})},[]);return hL(function(){cancelAnimationFrame(t.current)}),[r,o]},mL=function(e,t){e===void 0&&(e=1/0),t===void 0&&(t=1/0);var n=pL({width:hu?window.innerWidth:e,height:hu?window.innerHeight:t}),r=n[0],i=n[1];return x.useEffect(function(){if(hu){var o=function(){i({width:window.innerWidth,height:window.innerHeight})};return Ov(window,"resize",o),function(){$v(window,"resize",o)}}},[]),r};function eE(e){const[t]=x.useState(new Image),[n,r]=x.useState(!1);return x.useEffect(()=>{if(e)return t.onload=()=>{r(!0)},r(!1),t.src=URL.createObjectURL(e),()=>{t.onload=null}},[e,t]),[t,n]}const tE=["PageUp","PageDown"],nE=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rE={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ic="Slider",[Om,gL,vL]=Hl(ic),[iE,X7]=qt(ic,[vL]),[yL,$d]=iE(ic),wL=x.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:o=1,orientation:h="horizontal",disabled:l=!1,minStepsBetweenThumbs:a=0,defaultValue:f=[r],value:u,onValueChange:s=()=>{},onValueCommit:c=()=>{},inverted:d=!1,...p}=e,[g,m]=x.useState(null),v=Oe(t,D=>m(D)),y=x.useRef(new Set),w=x.useRef(0),b=h==="horizontal",S=g?!!g.closest("form"):!0,_=b?bL:xL,[E=[],C]=Fn({prop:u,defaultProp:f,onChange:D=>{var F;(F=[...y.current][w.current])===null||F===void 0||F.focus(),s(D)}}),P=x.useRef(E);function N(D){const F=$L(E,D);U(D,F)}function B(D){U(D,w.current)}function I(){const D=P.current[w.current];E[w.current]!==D&&c(E)}function U(D,F,{commit:O}={commit:!1}){const M=DL(o),V=NL(Math.round((D-r)/o)*o+r,M),k=Al(V,[r,i]);C((R=[])=>{const j=PL(R,k,F);if(ML(j,a*o)){w.current=j.indexOf(k);const A=String(j)!==String(R);return A&&O&&c(j),A?j:R}else return R})}return x.createElement(yL,{scope:e.__scopeSlider,disabled:l,min:r,max:i,valueIndexToChangeRef:w,thumbs:y.current,values:E,orientation:h},x.createElement(Om.Provider,{scope:e.__scopeSlider},x.createElement(Om.Slot,{scope:e.__scopeSlider},x.createElement(_,ae({"aria-disabled":l,"data-disabled":l?"":void 0},p,{ref:v,onPointerDown:pe(p.onPointerDown,()=>{l||(P.current=E)}),min:r,max:i,inverted:d,onSlideStart:l?void 0:N,onSlideMove:l?void 0:B,onSlideEnd:l?void 0:I,onHomeKeyDown:()=>!l&&U(r,0,{commit:!0}),onEndKeyDown:()=>!l&&U(i,E.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:F})=>{if(!l){const V=tE.includes(D.key)||D.shiftKey&&nE.includes(D.key)?10:1,k=w.current,R=E[k],j=o*V*F;U(R+j,k,{commit:!0})}}})))),S&&E.map((D,F)=>x.createElement(kL,{key:F,name:n?n+(E.length>1?"[]":""):void 0,value:D})))}),[oE,sE]=iE(ic,{startEdge:"left",endEdge:"right",size:"width",direction:1}),bL=x.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:o,onSlideStart:h,onSlideMove:l,onSlideEnd:a,onStepKeyDown:f,...u}=e,[s,c]=x.useState(null),d=Oe(t,w=>c(w)),p=x.useRef(),g=la(i),m=g==="ltr",v=m&&!o||!m&&o;function y(w){const b=p.current||s.getBoundingClientRect(),S=[0,b.width],E=Av(S,v?[n,r]:[r,n]);return p.current=b,E(w-b.left)}return x.createElement(oE,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},x.createElement(aE,ae({dir:g,"data-orientation":"horizontal"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const b=y(w.clientX);h==null||h(b)},onSlideMove:w=>{const b=y(w.clientX);l==null||l(b)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:w=>{const S=rE[v?"from-left":"from-right"].includes(w.key);f==null||f({event:w,direction:S?-1:1})}})))}),xL=x.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:o,onSlideMove:h,onSlideEnd:l,onStepKeyDown:a,...f}=e,u=x.useRef(null),s=Oe(t,u),c=x.useRef(),d=!i;function p(g){const m=c.current||u.current.getBoundingClientRect(),v=[0,m.height],w=Av(v,d?[r,n]:[n,r]);return c.current=m,w(g-m.top)}return x.createElement(oE,{scope:e.__scopeSlider,startEdge:d?"bottom":"top",endEdge:d?"top":"bottom",size:"height",direction:d?1:-1},x.createElement(aE,ae({"data-orientation":"vertical"},f,{ref:s,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const m=p(g.clientY);o==null||o(m)},onSlideMove:g=>{const m=p(g.clientY);h==null||h(m)},onSlideEnd:()=>{c.current=void 0,l==null||l()},onStepKeyDown:g=>{const v=rE[d?"from-bottom":"from-top"].includes(g.key);a==null||a({event:g,direction:v?-1:1})}})))}),aE=x.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:h,onEndKeyDown:l,onStepKeyDown:a,...f}=e,u=$d(ic,n);return x.createElement(Se.span,ae({},f,{ref:t,onKeyDown:pe(e.onKeyDown,s=>{s.key==="Home"?(h(s),s.preventDefault()):s.key==="End"?(l(s),s.preventDefault()):tE.concat(nE).includes(s.key)&&(a(s),s.preventDefault())}),onPointerDown:pe(e.onPointerDown,s=>{const c=s.target;c.setPointerCapture(s.pointerId),s.preventDefault(),u.thumbs.has(c)?c.focus():r(s)}),onPointerMove:pe(e.onPointerMove,s=>{s.target.hasPointerCapture(s.pointerId)&&i(s)}),onPointerUp:pe(e.onPointerUp,s=>{const c=s.target;c.hasPointerCapture(s.pointerId)&&(c.releasePointerCapture(s.pointerId),o(s))})}))}),SL="SliderTrack",_L=x.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=$d(SL,n);return x.createElement(Se.span,ae({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:t}))}),j1="SliderRange",CL=x.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=$d(j1,n),o=sE(j1,n),h=x.useRef(null),l=Oe(t,h),a=i.values.length,f=i.values.map(c=>lE(c,i.min,i.max)),u=a>1?Math.min(...f):0,s=100-Math.max(...f);return x.createElement(Se.span,ae({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:l,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:s+"%"}}))}),B1="SliderThumb",EL=x.forwardRef((e,t)=>{const n=gL(e.__scopeSlider),[r,i]=x.useState(null),o=Oe(t,l=>i(l)),h=x.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return x.createElement(TL,ae({},e,{ref:o,index:h}))}),TL=x.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,...i}=e,o=$d(B1,n),h=sE(B1,n),[l,a]=x.useState(null),f=Oe(t,m=>a(m)),u=Qg(l),s=o.values[r],c=s===void 0?0:lE(s,o.min,o.max),d=OL(r,o.values.length),p=u==null?void 0:u[h.size],g=p?AL(p,c,h.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),x.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${c}% + ${g}px)`}},x.createElement(Om.ItemSlot,{scope:e.__scopeSlider},x.createElement(Se.span,ae({role:"slider","aria-label":e["aria-label"]||d,"aria-valuemin":o.min,"aria-valuenow":s,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0},i,{ref:f,style:s===void 0?{display:"none"}:e.style,onFocus:pe(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})}))))}),kL=e=>{const{value:t,...n}=e,r=x.useRef(null),i=gv(t);return x.useEffect(()=>{const o=r.current,h=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(h,"value").set;if(i!==t&&a){const f=new Event("input",{bubbles:!0});a.call(o,t),o.dispatchEvent(f)}},[i,t]),x.createElement("input",ae({style:{display:"none"}},n,{ref:r,defaultValue:t}))};function PL(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,o)=>i-o)}function lE(e,t,n){const o=100/(n-t)*(e-t);return Al(o,[0,100])}function OL(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function $L(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function AL(e,t,n){const r=e/2,o=Av([0,50],[0,r]);return(r-o(t)*n)*n}function RL(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function ML(e,t){if(t>0){const n=RL(e);return Math.min(...n)>=t}return!0}function Av(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function DL(e){return(String(e).split(".")[1]||"").length}function NL(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const cE=wL,FL=_L,LL=CL,IL=EL,Yn=x.forwardRef(({className:e,...t},n)=>T.jsxs(cE,{ref:n,className:we("relative flex w-full touch-none select-none items-center",e),tabIndex:-1,...t,children:[T.jsx(FL,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20 data-[disabled]:cursor-not-allowed data-[disabled]:opacity-50",children:T.jsx(LL,{className:"absolute h-full bg-primary data-[disabled]:cursor-not-allowed "})}),T.jsx(IL,{tabIndex:-1,className:"block h-4 w-4 rounded-full border border-primary/60 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring data-[disabled]:cursor-not-allowed"})]}));Yn.displayName=cE.displayName;const Yo={capture:!0,passive:!1},jL=2,z1=(e,t,n,r,i,o)=>{if(e!==n&&t===r){if(e<0)return[0,r];if(e+t>o)return[o-r,r]}else{if(t<i)return e===n?[e,i]:[e+t-i,i];if(e<0)return[0,e+t];if(e+t>o)return[e,o-e]}return[e,t]},BL=e=>{const{minHeight:t,minWidth:n,maxHeight:r,maxWidth:i,scale:o,show:h}=e,[l,a,f,u,{x:s,y:c,width:d,height:p},g,m,v,y,w,b]=Xe(R=>[R.imageWidth,R.imageHeight,R.isInpainting,R.isSD(),R.cropperState,R.setCropperX,R.setCropperY,R.setCropperWidth,R.setCropperHeight,R.isCropperExtenderResizing,R.setIsCropperExtenderResizing]),[S,_]=x.useState(!1);x.useEffect(()=>{g(Math.round((i-512)/2)),m(Math.round((r-512)/2))},[r,i,l,a]);const[E,C]=x.useState({initX:0,initY:0,initHeight:0,initWidth:0,startResizeX:0,startResizeY:0,ord:"top"}),P=()=>{},N=(R,j)=>z1(R,j,s,d,n,i),B=(R,j)=>z1(R,j,c,p,t,r),I=R=>{if(f)return;const j=R.clientX,A=R.clientY,W=Math.round((A-E.startResizeY)/o),L=Math.round((j-E.startResizeX)/o),$=()=>{const G=E.initHeight-W,Q=E.initY+W,[ee,le]=B(Q,G);y(le),m(ee)},H=()=>{const G=E.initHeight+W,[Q,ee]=B(E.initY,G);y(ee),m(Q)},Y=()=>{const G=E.initWidth-L,Q=E.initX+L,[ee,le]=N(Q,G);v(le),g(ee)},K=()=>{const G=E.initWidth+L,[Q,ee]=N(E.initX,G);v(ee),g(Q)};if(w)switch(E.ord){case"topleft":{$(),Y();break}case"topright":{$(),K();break}case"bottomleft":{H(),Y();break}case"bottomright":{H(),K();break}case"top":{$();break}case"right":{K();break}case"bottom":{H();break}case"left":{Y();break}}if(S){const G=E.initX+L,Q=E.initY+W,[ee,le]=N(G,E.initWidth),[te,Z]=B(Q,E.initHeight);v(le),y(Z),g(ee),m(te)}},U=()=>{w&&b(!1),S&&_(!1)};x.useEffect(()=>{if(w||S)return document.addEventListener("pointermove",I,Yo),document.addEventListener("pointerup",U,Yo),document.addEventListener("pointercancel",U,Yo),()=>{document.removeEventListener("pointermove",I,Yo),document.removeEventListener("pointerup",U,Yo),document.removeEventListener("pointercancel",U,Yo)}},[w,S,d,p,E]);const D=R=>{const{ord:j}=R.target.dataset;j&&(b(!0),C({initX:s,initY:c,initHeight:p,initWidth:d,startResizeX:R.clientX,startResizeY:R.clientY,ord:j}))},F=(R,j,A)=>{const $="w-[12px] h-[12px] z-[4] absolute content-[''] block border-2 border-primary borde pointer-events-auto hover:bg-primary";let H="0",Y="0",K=A,G="-6px";return A===""&&(G="50%",j==="left"||j==="right"?(K="top",Y="-50%"):(K="left",H="-50%")),T.jsx("div",{className:we($,R),style:{[j]:-6,[K]:G,transform:`translate(${H}, ${Y}) scale(${1/o})`},"data-ord":j+A,"aria-label":j+A,tabIndex:-1,role:"button"})},O=()=>T.jsxs("div",{onFocus:P,onPointerDown:D,className:"absolute top-0 h-full w-full",children:[T.jsx("div",{className:"absolute pointer-events-auto top-0 left-0 w-full cursor-ns-resize h-[12px] mt-[-6px]","data-ord":"top"}),T.jsx("div",{className:"absolute pointer-events-auto top-0 right-0 h-full cursor-ew-resize w-[12px] mr-[-6px]","data-ord":"right"}),T.jsx("div",{className:"absolute pointer-events-auto bottom-0 left-0 w-full cursor-ns-resize h-[12px] mb-[-6px]","data-ord":"bottom"}),T.jsx("div",{className:"absolute pointer-events-auto top-0 left-0 h-full cursor-ew-resize w-[12px] ml-[-6px]","data-ord":"left"}),F("cursor-nw-resize","top","left"),F("cursor-ne-resize","top","right"),F("cursor-sw-resize","bottom","left"),F("cursor-se-resize","bottom","right"),F("cursor-ns-resize","top",""),F("cursor-ns-resize","bottom",""),F("cursor-ew-resize","left",""),F("cursor-ew-resize","right","")]}),M=R=>{_(!0),C({initX:s,initY:c,initHeight:p,initWidth:d,startResizeX:R.clientX,startResizeY:R.clientY,ord:""})},V=()=>T.jsxs("div",{className:Dg("border absolute pointer-events-auto px-2 py-1 rounded-full hover:cursor-move bg-background","origin-top-left top-0 left-0"),style:{transform:`scale(${1/o*.8})`},onPointerDown:M,children:[d," x ",p]}),k=()=>T.jsx("div",{className:"outline-dashed outline-primary",style:{height:p,width:d,outlineWidth:`${jL/o*1.3}px`}});return h===!1||!u?null:T.jsx("div",{className:"absolute h-full w-full overflow-hidden pointer-events-none z-[2]",children:T.jsxs("div",{className:"relative pointer-events-none z-[2] [box-shadow:0_0_0_9999px_rgba(0,_0,_0,_0.5)]",style:{height:p,width:d,left:s,top:c},children:[k(),V(),O()]})})},zL=e=>{const{x:t,y:n,positive:r}=e,i=r?"bg-[rgba(21,_215,_121,_0.936)] outline-[rgba(98,255,179,0.31)]":"bg-[rgba(237,_49,_55,_0.942)] outline-[rgba(255,89,95,0.31)]";return T.jsx("div",{className:`absolute h-[10px] w-[10px] rounded-[50%] ${i} outline-8 outline`,style:{left:t,top:n,transform:"translate(-50%, -50%)"}})},UL=()=>{const e=Xe(t=>t.interactiveSegState.clicks);return T.jsx("div",{className:"absolute h-full w-full overflow-hidden pointer-events-none",children:e.map(t=>T.jsx(zL,{x:t[0],y:t[1],positive:t[2]===1},t[3]))})},Xo={capture:!0,passive:!1},VL=2,U1=(e,t,n,r)=>t<r?e===n?[e,r]:[e+t-r,r]:[e,t],HL=e=>{const{minHeight:t,minWidth:n,scale:r,show:i}=e,[o,h,l,a,{x:f,y:u,width:s,height:c},d,p,g,m,v,y,w]=Xe(M=>[M.isInpainting,M.imageHeight,M.imageWidth,M.isSD(),M.extenderState,M.setExtenderX,M.setExtenderY,M.setExtenderWidth,M.setExtenderHeight,M.settings.extenderDirection,M.isCropperExtenderResizing,M.setIsCropperExtenderResizing]),[b,S]=x.useState({initX:0,initY:0,initHeight:0,initWidth:0,startResizeX:0,startResizeY:0,ord:"top"}),_=()=>{},E=(M,V)=>U1(M,V,f,n),C=(M,V)=>U1(M,V,u,t),P=M=>{if(o)return;const V=M.clientX,k=M.clientY,R=Math.round((k-b.startResizeY)/r),j=Math.round((V-b.startResizeX)/r),A=()=>{const H=b.initHeight-R,Y=b.initY+R;let K=Y,G=H;if(v===Ut.xy)K>0&&(K=0,G=b.initHeight-Math.abs(b.initY));else{const Q=C(Y,H);K=Q[0],G=Q[1]}m(G),p(K)},W=()=>{const H=b.initHeight+R;let[Y,K]=C(b.initY,H);v===Ut.xy&&K<Math.abs(Y)+h&&(K=Math.abs(Y)+h),m(K),p(Y)},L=()=>{const H=b.initWidth-j,Y=b.initX+j;let K=Y,G=H;if(v===Ut.xy)K>0&&(K=0,G=b.initWidth-Math.abs(b.initX));else{const Q=E(Y,H);K=Q[0],G=Q[1]}g(G),d(K)},$=()=>{const H=b.initWidth+j;let[Y,K]=E(b.initX,H);v===Ut.xy&&K<Math.abs(Y)+l&&(K=Math.abs(Y)+l),g(K),d(Y)};if(y)switch(b.ord){case"topleft":{A(),L();break}case"topright":{A(),$();break}case"bottomleft":{W(),L();break}case"bottomright":{W(),$();break}case"top":{A();break}case"right":{$();break}case"bottom":{W();break}case"left":{L();break}}},N=()=>{y&&w(!1)};x.useEffect(()=>{if(y)return document.addEventListener("pointermove",P,Xo),document.addEventListener("pointerup",N,Xo),document.addEventListener("pointercancel",N,Xo),()=>{document.removeEventListener("pointermove",P,Xo),document.removeEventListener("pointerup",N,Xo),document.removeEventListener("pointercancel",N,Xo)}},[y,s,c,b]);const B=M=>{const{ord:V}=M.target.dataset;V&&(w(!0),S({initX:f,initY:u,initHeight:c,initWidth:s,startResizeX:M.clientX,startResizeY:M.clientY,ord:V}))},I=(M,V,k)=>{const A="w-[12px] h-[12px] z-[4] absolute content-[''] block border-2 border-primary borde pointer-events-auto hover:bg-primary";let W="0",L="0",$=k,H="-6px";return k===""&&(H="50%",V==="left"||V==="right"?($="top",L="-50%"):($="left",W="-50%")),T.jsx("div",{className:we(A,M),style:{[V]:-6,[$]:H,transform:`translate(${W}, ${L}) scale(${1/r})`},"data-ord":V+k,"aria-label":V+k,tabIndex:-1,role:"button"})},U=()=>T.jsxs("div",{onFocus:_,onPointerDown:B,className:"absolute top-0 h-full w-full",children:[[Ut.y,Ut.xy].includes(v)?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"absolute pointer-events-auto top-0 left-0 w-full cursor-ns-resize h-[12px] mt-[-6px]","data-ord":"top"}),T.jsx("div",{className:"absolute pointer-events-auto bottom-0 left-0 w-full cursor-ns-resize h-[12px] mb-[-6px]","data-ord":"bottom"}),I("cursor-ns-resize","top",""),I("cursor-ns-resize","bottom","")]}):T.jsx(T.Fragment,{}),[Ut.x,Ut.xy].includes(v)?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"absolute pointer-events-auto top-0 right-0 h-full cursor-ew-resize w-[12px] mr-[-6px]","data-ord":"right"}),T.jsx("div",{className:"absolute pointer-events-auto top-0 left-0 h-full cursor-ew-resize w-[12px] ml-[-6px]","data-ord":"left"}),I("cursor-ew-resize","left",""),I("cursor-ew-resize","right","")]}):T.jsx(T.Fragment,{}),v===Ut.xy?T.jsxs(T.Fragment,{children:[I("cursor-nw-resize","top","left"),I("cursor-ne-resize","top","right"),I("cursor-sw-resize","bottom","left"),I("cursor-se-resize","bottom","right")]}):T.jsx(T.Fragment,{})]}),D=M=>{S({initX:f,initY:u,initHeight:c,initWidth:s,startResizeX:M.clientX,startResizeY:M.clientY,ord:""})},F=()=>T.jsxs("div",{className:Dg("border absolute pointer-events-auto px-2 py-1 rounded-full bg-background","origin-top-left top-0 left-0"),style:{transform:`scale(${1/r*.8})`},onPointerDown:D,children:[s," x ",c]}),O=()=>T.jsx("div",{className:we("outline-dashed outline-primary"),style:{height:c,width:s,outlineWidth:`${VL/r*1.3}px`}});return i===!1||!a?null:T.jsx("div",{className:"absolute h-full w-full pointer-events-none z-[2]",children:T.jsxs("div",{className:"relative pointer-events-none z-[2] [box-shadow:0_0_0_9999px_rgba(0,_0,_0,_0.5)]",style:{height:c,width:s,left:f,top:u},children:[O(),F(),U()]})})},WL=200,zc=300,YL=e=>{e=e.replace("#","");const t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return`rgba(${t}, ${n}, ${r}, ${i})`};function XL(e){const{file:t}=e,{toast:n}=Ng(),[r,i,o,h,l,a,f,u,s,c,d,p,g,m,v,y,w,b,S,_,E,C,P,N,B]=Xe(se=>[se.disableShortCuts,se.windowSize,se.isInpainting,se.imageWidth,se.imageHeight,se.settings,se.serverConfig.enableAutoSaving,se.setImageSize,se.setBaseBrushSize,se.interactiveSegState,se.updateInteractiveSegState,se.handleCanvasMouseDown,se.handleSaveState,se.handleCanvasMouseMove,se.undo,se.redo,se.undoDisabled(),se.redoDisabled(),se.getIsProcessing(),se.updateAppState,se.runMannually(),se.runInpainting,se.isCropperExtenderResizing,se.decreaseBaseBrushSize,se.increaseBaseBrushSize]),I=Xe(se=>se.editorState.baseBrushSize),U=Xe(se=>se.getBrushSize()),D=Xe(se=>se.editorState.renders),F=Xe(se=>se.editorState.extraMasks);Xe(se=>se.editorState.temporaryMasks),Xe(se=>se.editorState.lineGroups),Xe(se=>se.editorState.curLineGroup);const O=Xe(se=>se.editorState.currCanvasGroups),[M,V]=x.useState(!1),[k,R]=eE(t),[j,A]=x.useState();x.useState();const[W,L]=x.useState(null),[{x:$,y:H},Y]=x.useState({x:-1,y:-1}),[K,G]=x.useState(!1),[Q,ee]=x.useState(!1),[le,te]=x.useState(!1),[Z,ie]=x.useState(1),[ce,ne]=x.useState(!1),[z,X]=x.useState(1),J=i.width/2,oe=i.height/2,q=x.useRef(null),[re,ue]=x.useState(!1),[ge,Ce]=x.useState(!1),[Te,Ae]=x.useState(0),[Be,ze]=x.useState(!1),Je=x.useRef(null),Ee=x.useRef(null),Pt=x.useCallback(()=>O.length!==0,[O]),wt=x.useCallback(()=>{if(Ee.current){const se=Ee.current.toJSON();console.log(se),g(JSON.stringify(se))}},[]);x.useEffect(()=>{if(!R)return;console.log("Inside UseEffect initMainCanvas");const se=()=>new qa.fabric.Canvas(Je.current,{width:h,height:l,fireMiddleClick:!0});Ee.current=se();const Ue=new qa.fabric.Image(k,{left:0,top:0,selectable:!1});Ee.current.add(Ue),Ee.current.isDrawingMode=!0,Ee.current.freeDrawingBrush.width=iS,Ee.current.freeDrawingBrush.color=YL(zu);const Ot=JSON.stringify(Ee.current.toJSON());return L(Ot),Ee.current.on("mouse:up",St=>{dy(St)&&te(!1),HO(St)&&wt()}),Ee.current.on("mouse:down",St=>{dy(St)&&te(!0)}),Ee.current.renderAll(),()=>{var St;(St=Ee.current)==null||St.dispose(),Ee.current=null}},[k,R,h,l]),x.useEffect(()=>{if(!Ee.current||!W)return;const se=D[D.length-1],Ue=new qa.fabric.Image(se,{left:0,top:0,selectable:!1});Ee.current.clear(),Ee.current.add(Ue),wt(),Ee.current.renderAll()},[D]),x.useEffect(()=>{if(!Ee.current||!W)return;if(O.length===0&&W){const Ue=JSON.parse(W);Ee.current.loadFromJSON(Ue,Ee.current.renderAll.bind(Ee.current));return}const se=JSON.parse(O[O.length-1]);Ee.current.loadFromJSON(se,Ee.current.renderAll.bind(Ee.current))},[O]),x.useEffect(()=>{Ee.current&&(Ee.current.freeDrawingBrush.width=I)},[I]),x.useCallback(async()=>{let se=t;if(D.length>0){const Ue=D[D.length-1];se=await aS(Ue.currentSrc,t.name,t.type)}return se},[t,D]);const It=()=>D.length!==0,ri=x.useCallback(()=>{let se=512,Ue=512;return R?(D.length===0?(se=k.naturalWidth,Ue=k.naturalHeight):D.length!==0&&(se=D[D.length-1].width,Ue=D[D.length-1].height),[se,Ue]):[se,Ue]},[k,R,D]);x.useEffect(()=>{var jv;if(!R)return;const[se,Ue]=ri();(se!==h||Ue!==l)&&u(se,Ue);const Ot=i.width/se,St=(i.height-WL)/Ue;let Zt=1;(Ot<1||St<1)&&(Zt=Math.min(Ot,St)),X(Zt),ie(Zt),console.log(`[on file load] image size: ${se}x${Ue}, scale: ${Zt}, initialCentered: ${re}`),j!=null&&j.canvas&&(console.log("[on file load] set canvas size"),se!=j.canvas.width&&(j.canvas.width=se),Ue!=j.canvas.height&&(j.canvas.height=Ue)),re||((jv=q.current)==null||jv.centerView(Zt,1),console.log("[on file load] centerView"),ue(!0))},[q,l,h,k,R,i,re,ri]),x.useEffect(()=>{var se;console.log("[useEffect] centerView"),(se=q==null?void 0:q.current)==null||se.centerView(z,1)},[l,h,q,z]);const ii=x.useCallback(()=>{if(!z||!i)return;const se=q.current;if(!se)return;const Ue=(i.width-h*z)/2,Ot=(i.height-l*z)/2;se.setTransform(Ue,Ot,z,200,"easeOutQuad"),se.instance.transformState.scale&&(se.instance.transformState.scale=z),ie(z),ne(!1)},[q,i,l,h,i.height,z]);x.useEffect(()=>(window.addEventListener("resize",()=>{ii()}),()=>{window.removeEventListener("resize",()=>{ii()})}),[i,ii]),or("Escape",()=>{S||(ge?Ce(!1):ii())},[ge,o,ii]);const fa=()=>{v()};or("meta+z,ctrl+z",fa);const oi=se=>{se.preventDefault(),y()};or("shift+ctrl+z,shift+meta+z",oi),Vh("Tab",se=>{se==null||se.preventDefault(),se==null||se.stopPropagation(),It()&&V(()=>(window.setTimeout(()=>{Ae(100)},10),!0))},se=>{se==null||se.preventDefault(),se==null||se.stopPropagation(),It()&&(window.setTimeout(()=>{Ae(0)},10),window.setTimeout(()=>{V(!1)},zc))});const Nd=(se,Ue,Ot)=>{se.getObjects().forEach(Zt=>Zt.set({visible:!1})),Ue.forEach(Zt=>Zt.set({visible:!0})),se.renderAll();const St=document.createElement("a");St.href=se.toDataURL({format:"png"}),St.download=Ot,St.click(),se.getObjects().forEach(Zt=>Zt.set({visible:!0})),se.renderAll()},In=()=>{const se=Ee.current;if(se){const Ue=se.getObjects().filter(Ot=>Ot.type==="image");Nd(se,Ue,"image.png")}};or("meta+s,ctrl+s",In),x.useCallback(()=>{if(S)return"default";if(le)return"grab";if(K)return"none"},[K,le,S]),or("[",()=>{N()},[N]),or("]",()=>{B()},[B]),or("ctrl+c,meta+c",async()=>{await zO()&&D.length>0&&j!=null&&j.canvas&&(await WO(j==null?void 0:j.canvas),n({title:"Copy inpainting result to clipboard"}))},[D,j]),Vh(" ",se=>{r||(se==null||se.preventDefault(),se==null||se.stopPropagation(),G(!1),te(!0))},se=>{r||(se==null||se.preventDefault(),se==null||se.stopPropagation(),G(!0),te(!1))}),Vh("Alt",se=>{r||(se==null||se.preventDefault(),se==null||se.stopPropagation(),ze(!0))},se=>{r||(se==null||se.preventDefault(),se==null||se.stopPropagation(),ze(!1))});const Cn=()=>{var Ue,Ot,St,Zt;let se=z;return((Ot=(Ue=q.current)==null?void 0:Ue.instance)==null?void 0:Ot.transformState.scale)!==void 0&&(se=(Zt=(St=q.current)==null?void 0:St.instance)==null?void 0:Zt.transformState.scale),se},kr=(se,Ue)=>{const Ot=Cn();return{width:`${U*Ot}px`,height:`${U*Ot}px`,left:`${se}px`,top:`${Ue}px`,transform:"translate(-50%, -50%)"}},si=se=>T.jsx("div",{className:"absolute rounded-[50%] border-[1px] border-[solid] border-[#ffcc00] pointer-events-none bg-[#ffcc00bb]",style:se}),ac=se=>{s(se),Q||(ee(!0),window.setTimeout(()=>{ee(!1)},1e4))},Pr=()=>T.jsx("div",{className:"absolute h-[20px] w-[20px] pointer-events-none rounded-[50%] bg-[rgba(21,_215,_121,_0.936)] [box-shadow:0_0_0_0_rgba(21,_215,_121,_0.936)] animate-pulse",style:{left:`${$}px`,top:`${H}px`,transform:"translate(-50%, -50%)"},children:T.jsx(zF,{})}),Or=()=>T.jsx(Z8,{ref:se=>{se&&(q.current=se)},panning:{disabled:!le,velocityDisabled:!0},wheel:{step:.05,wheelDisabled:Be},centerZoomedOut:!0,alignmentAnimation:{disabled:!0},centerOnInit:!0,limitToBounds:!1,doubleClick:{disabled:!0},initialScale:z,minScale:z*.3,onPanning:()=>{ce||ne(!0)},onZoom:se=>{ie(se.state.scale)},children:T.jsxs(eL,{contentStyle:{visibility:re?"visible":"hidden"},children:[T.jsxs("div",{className:"relative",children:[T.jsx("canvas",{className:we(S?"pointer-events-none animate-pulse duration-600":""),ref:Je,style:{clipPath:`inset(0 ${Te}% 0 0)`,transition:`clip-path ${zc}ms`,border:"1px solid white"}}),T.jsx("div",{className:"pointer-events-none absolute top-0",style:{width:`${h}px`,height:`${l}px`},children:M&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"absolute top-0 z-10 bg-primary h-full w-[6px] justify-self-end",style:{marginRight:`${Te}%`,transition:`margin-right ${zc}ms`}}),T.jsx("img",{className:"absolute ",src:k.src,alt:"original",style:{width:`${h}px`,height:`${l}px`}})]})})]}),T.jsx(BL,{maxHeight:l,maxWidth:h,minHeight:Math.min(512,l),minWidth:Math.min(512,h),scale:Cn(),show:a.showCropper}),T.jsx(HL,{minHeight:Math.min(512,l),minWidth:Math.min(512,h),scale:Cn(),show:a.showExtender}),c.isInteractiveSeg?T.jsx(UL,{}):T.jsx(T.Fragment,{})]})});return T.jsxs("div",{className:"flex w-screen h-screen justify-center items-center","aria-hidden":"true",children:[Or(),K&&!o&&!le&&(c.isInteractiveSeg?Pr():si(kr($,H))),Q&&si(kr(J,oe)),T.jsxs("div",{className:"fixed flex bottom-5 border px-4 py-2 rounded-[3rem] gap-8 items-center justify-center backdrop-filter backdrop-blur-md bg-background/70",children:[T.jsx(Yn,{className:"w-48",defaultValue:[50],min:RO,max:oS,step:1,tabIndex:-1,value:[I],onValueChange:se=>ac(se[0]),onClick:()=>ee(!1)}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx(Lr,{tooltip:"Reset zoom & pan",disabled:Z===z&&ce===!1,onClick:ii,children:T.jsx(d3,{})}),T.jsx(Lr,{tooltip:"Undo",onClick:fa,disabled:w,children:T.jsx(x3,{})}),T.jsx(Lr,{tooltip:"Redo",onClick:oi,disabled:b,children:T.jsx(y3,{})}),T.jsx(Lr,{tooltip:"Show original image",onPointerDown:se=>{se.preventDefault(),V(()=>(window.setTimeout(()=>{Ae(100)},10),!0))},onPointerUp:()=>{window.setTimeout(()=>{Ae(0)},10),window.setTimeout(()=>{V(!1)},zc)},disabled:D.length===0,children:T.jsx(h3,{})}),T.jsx(Lr,{tooltip:"Save Image",onClick:In,children:T.jsx(u3,{})}),T.jsx(Lr,{tooltip:"Run Inpainting",disabled:S||!Pt()&&F.length===0,onClick:()=>{C("lama")},children:T.jsx(f3,{})})]})]})]})}const GL=()=>{const[e,t]=Xe(n=>[n.imageWidth,n.imageHeight]);return!e||!t?null:T.jsxs("div",{className:"border rounded-lg px-2 py-[6px] z-10 bg-background",children:[e,"x",t]})},$m=["Enter"," "],KL=["ArrowDown","PageUp","Home"],uE=["ArrowUp","PageDown","End"],qL=[...KL,...uE],ZL={ltr:[...$m,"ArrowRight"],rtl:[...$m,"ArrowLeft"]},QL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ad="Menu",[Dl,JL,eI]=Hl(Ad),[jo,fE]=qt(Ad,[eI,Gi,bd]),Rd=Gi(),dE=bd(),[hE,Zi]=jo(Ad),[tI,oc]=jo(Ad),nI=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:o,modal:h=!0}=e,l=Rd(t),[a,f]=x.useState(null),u=x.useRef(!1),s=rt(o),c=la(i);return x.useEffect(()=>{const d=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",d,{capture:!0}),()=>{document.removeEventListener("keydown",d,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),x.createElement(ql,l,x.createElement(hE,{scope:t,open:n,onOpenChange:s,content:a,onContentChange:f},x.createElement(tI,{scope:t,onClose:x.useCallback(()=>s(!1),[s]),isUsingKeyboardRef:u,dir:c,modal:h},r)))},pE=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Rd(n);return x.createElement(sd,ae({},i,r,{ref:t}))}),mE="MenuPortal",[rI,gE]=jo(mE,{forceMount:void 0}),iI=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,o=Zi(mE,t);return x.createElement(rI,{scope:t,forceMount:n},x.createElement(kt,{present:n||o.open},x.createElement(Wl,{asChild:!0,container:i},r)))},Jn="MenuContent",[oI,Rv]=jo(Jn),sI=x.forwardRef((e,t)=>{const n=gE(Jn,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=Zi(Jn,e.__scopeMenu),h=oc(Jn,e.__scopeMenu);return x.createElement(Dl.Provider,{scope:e.__scopeMenu},x.createElement(kt,{present:r||o.open},x.createElement(Dl.Slot,{scope:e.__scopeMenu},h.modal?x.createElement(aI,ae({},i,{ref:t})):x.createElement(lI,ae({},i,{ref:t})))))}),aI=x.forwardRef((e,t)=>{const n=Zi(Jn,e.__scopeMenu),r=x.useRef(null),i=Oe(t,r);return x.useEffect(()=>{const o=r.current;if(o)return hd(o)},[]),x.createElement(Mv,ae({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:pe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),lI=x.forwardRef((e,t)=>{const n=Zi(Jn,e.__scopeMenu);return x.createElement(Mv,ae({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),Mv=x.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:h,disableOutsidePointerEvents:l,onEntryFocus:a,onEscapeKeyDown:f,onPointerDownOutside:u,onFocusOutside:s,onInteractOutside:c,onDismiss:d,disableOutsideScroll:p,...g}=e,m=Zi(Jn,n),v=oc(Jn,n),y=Rd(n),w=dE(n),b=JL(n),[S,_]=x.useState(null),E=x.useRef(null),C=Oe(t,E,m.onContentChange),P=x.useRef(0),N=x.useRef(""),B=x.useRef(0),I=x.useRef(null),U=x.useRef("right"),D=x.useRef(0),F=p?Zl:x.Fragment,O=p?{as:Sr,allowPinchZoom:!0}:void 0,M=k=>{var R,j;const A=N.current+k,W=b().filter(G=>!G.disabled),L=document.activeElement,$=(R=W.find(G=>G.ref.current===L))===null||R===void 0?void 0:R.textValue,H=W.map(G=>G.textValue),Y=EI(H,A,$),K=(j=W.find(G=>G.textValue===Y))===null||j===void 0?void 0:j.ref.current;(function G(Q){N.current=Q,window.clearTimeout(P.current),Q!==""&&(P.current=window.setTimeout(()=>G(""),1e3))})(A),K&&setTimeout(()=>K.focus())};x.useEffect(()=>()=>window.clearTimeout(P.current),[]),fd();const V=x.useCallback(k=>{var R,j;return U.current===((R=I.current)===null||R===void 0?void 0:R.side)&&kI(k,(j=I.current)===null||j===void 0?void 0:j.area)},[]);return x.createElement(oI,{scope:n,searchRef:N,onItemEnter:x.useCallback(k=>{V(k)&&k.preventDefault()},[V]),onItemLeave:x.useCallback(k=>{var R;V(k)||((R=E.current)===null||R===void 0||R.focus(),_(null))},[V]),onTriggerLeave:x.useCallback(k=>{V(k)&&k.preventDefault()},[V]),pointerGraceTimerRef:B,onPointerGraceIntentChange:x.useCallback(k=>{I.current=k},[])},x.createElement(F,O,x.createElement(ud,{asChild:!0,trapped:i,onMountAutoFocus:pe(o,k=>{var R;k.preventDefault(),(R=E.current)===null||R===void 0||R.focus()}),onUnmountAutoFocus:h},x.createElement(ea,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:f,onPointerDownOutside:u,onFocusOutside:s,onInteractOutside:c,onDismiss:d},x.createElement(TC,ae({asChild:!0},w,{dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:pe(a,k=>{v.isUsingKeyboardRef.current||k.preventDefault()})}),x.createElement(ad,ae({role:"menu","aria-orientation":"vertical","data-state":SE(m.open),"data-radix-menu-content":"",dir:v.dir},y,g,{ref:C,style:{outline:"none",...g.style},onKeyDown:pe(g.onKeyDown,k=>{const j=k.target.closest("[data-radix-menu-content]")===k.currentTarget,A=k.ctrlKey||k.altKey||k.metaKey,W=k.key.length===1;j&&(k.key==="Tab"&&k.preventDefault(),!A&&W&&M(k.key));const L=E.current;if(k.target!==L||!qL.includes(k.key))return;k.preventDefault();const H=b().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);uE.includes(k.key)&&H.reverse(),_I(H)}),onBlur:pe(e.onBlur,k=>{k.currentTarget.contains(k.target)||(window.clearTimeout(P.current),N.current="")}),onPointerMove:pe(e.onPointerMove,Nl(k=>{const R=k.target,j=D.current!==k.clientX;if(k.currentTarget.contains(R)&&j){const A=k.clientX>D.current?"right":"left";U.current=A,D.current=k.clientX}}))})))))))}),cI=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return x.createElement(Se.div,ae({},r,{ref:t}))}),Am="MenuItem",V1="menu.itemSelect",Dv=x.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,o=x.useRef(null),h=oc(Am,e.__scopeMenu),l=Rv(Am,e.__scopeMenu),a=Oe(t,o),f=x.useRef(!1),u=()=>{const s=o.current;if(!n&&s){const c=new CustomEvent(V1,{bubbles:!0,cancelable:!0});s.addEventListener(V1,d=>r==null?void 0:r(d),{once:!0}),Ag(s,c),c.defaultPrevented?f.current=!1:h.onClose()}};return x.createElement(vE,ae({},i,{ref:a,disabled:n,onClick:pe(e.onClick,u),onPointerDown:s=>{var c;(c=e.onPointerDown)===null||c===void 0||c.call(e,s),f.current=!0},onPointerUp:pe(e.onPointerUp,s=>{var c;f.current||(c=s.currentTarget)===null||c===void 0||c.click()}),onKeyDown:pe(e.onKeyDown,s=>{const c=l.searchRef.current!=="";n||c&&s.key===" "||$m.includes(s.key)&&(s.currentTarget.click(),s.preventDefault())})}))}),vE=x.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=e,h=Rv(Am,n),l=dE(n),a=x.useRef(null),f=Oe(t,a),[u,s]=x.useState(!1),[c,d]=x.useState("");return x.useEffect(()=>{const p=a.current;if(p){var g;d(((g=p.textContent)!==null&&g!==void 0?g:"").trim())}},[o.children]),x.createElement(Dl.ItemSlot,{scope:n,disabled:r,textValue:i??c},x.createElement(kC,ae({asChild:!0},l,{focusable:!r}),x.createElement(Se.div,ae({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},o,{ref:f,onPointerMove:pe(e.onPointerMove,Nl(p=>{r?h.onItemLeave(p):(h.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:pe(e.onPointerLeave,Nl(p=>h.onItemLeave(p))),onFocus:pe(e.onFocus,()=>s(!0)),onBlur:pe(e.onBlur,()=>s(!1))}))))}),uI=x.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return x.createElement(wE,{scope:e.__scopeMenu,checked:n},x.createElement(Dv,ae({role:"menuitemcheckbox","aria-checked":gf(n)?"mixed":n},i,{ref:t,"data-state":Nv(n),onSelect:pe(i.onSelect,()=>r==null?void 0:r(gf(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),fI="MenuRadioGroup",[G7,dI]=jo(fI,{value:void 0,onValueChange:()=>{}}),hI="MenuRadioItem",pI=x.forwardRef((e,t)=>{const{value:n,...r}=e,i=dI(hI,e.__scopeMenu),o=n===i.value;return x.createElement(wE,{scope:e.__scopeMenu,checked:o},x.createElement(Dv,ae({role:"menuitemradio","aria-checked":o},r,{ref:t,"data-state":Nv(o),onSelect:pe(r.onSelect,()=>{var h;return(h=i.onValueChange)===null||h===void 0?void 0:h.call(i,n)},{checkForDefaultPrevented:!1})})))}),yE="MenuItemIndicator",[wE,mI]=jo(yE,{checked:!1}),gI=x.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,o=mI(yE,n);return x.createElement(kt,{present:r||gf(o.checked)||o.checked===!0},x.createElement(Se.span,ae({},i,{ref:t,"data-state":Nv(o.checked)})))}),vI=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return x.createElement(Se.div,ae({role:"separator","aria-orientation":"horizontal"},r,{ref:t}))}),bE="MenuSub",[yI,xE]=jo(bE),wI=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:i}=e,o=Zi(bE,t),h=Rd(t),[l,a]=x.useState(null),[f,u]=x.useState(null),s=rt(i);return x.useEffect(()=>(o.open===!1&&s(!1),()=>s(!1)),[o.open,s]),x.createElement(ql,h,x.createElement(hE,{scope:t,open:r,onOpenChange:s,content:f,onContentChange:u},x.createElement(yI,{scope:t,contentId:an(),triggerId:an(),trigger:l,onTriggerChange:a},n)))},Uc="MenuSubTrigger",bI=x.forwardRef((e,t)=>{const n=Zi(Uc,e.__scopeMenu),r=oc(Uc,e.__scopeMenu),i=xE(Uc,e.__scopeMenu),o=Rv(Uc,e.__scopeMenu),h=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:a}=o,f={__scopeMenu:e.__scopeMenu},u=x.useCallback(()=>{h.current&&window.clearTimeout(h.current),h.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const s=l.current;return()=>{window.clearTimeout(s),a(null)}},[l,a]),x.createElement(pE,ae({asChild:!0},f),x.createElement(vE,ae({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":SE(n.open)},e,{ref:Hf(t,i.onTriggerChange),onClick:s=>{var c;(c=e.onClick)===null||c===void 0||c.call(e,s),!(e.disabled||s.defaultPrevented)&&(s.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:pe(e.onPointerMove,Nl(s=>{o.onItemEnter(s),!s.defaultPrevented&&!e.disabled&&!n.open&&!h.current&&(o.onPointerGraceIntentChange(null),h.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:pe(e.onPointerLeave,Nl(s=>{var c;u();const d=(c=n.content)===null||c===void 0?void 0:c.getBoundingClientRect();if(d){var p;const g=(p=n.content)===null||p===void 0?void 0:p.dataset.side,m=g==="right",v=m?-5:5,y=d[m?"left":"right"],w=d[m?"right":"left"];o.onPointerGraceIntentChange({area:[{x:s.clientX+v,y:s.clientY},{x:y,y:d.top},{x:w,y:d.top},{x:w,y:d.bottom},{x:y,y:d.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(s),s.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:pe(e.onKeyDown,s=>{const c=o.searchRef.current!=="";if(!(e.disabled||c&&s.key===" ")&&ZL[r.dir].includes(s.key)){var d;n.onOpenChange(!0),(d=n.content)===null||d===void 0||d.focus(),s.preventDefault()}})})))}),xI="MenuSubContent",SI=x.forwardRef((e,t)=>{const n=gE(Jn,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=Zi(Jn,e.__scopeMenu),h=oc(Jn,e.__scopeMenu),l=xE(xI,e.__scopeMenu),a=x.useRef(null),f=Oe(t,a);return x.createElement(Dl.Provider,{scope:e.__scopeMenu},x.createElement(kt,{present:r||o.open},x.createElement(Dl.Slot,{scope:e.__scopeMenu},x.createElement(Mv,ae({id:l.contentId,"aria-labelledby":l.triggerId},i,{ref:f,align:"start",side:h.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var s;h.isUsingKeyboardRef.current&&((s=a.current)===null||s===void 0||s.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:pe(e.onFocusOutside,u=>{u.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:pe(e.onEscapeKeyDown,u=>{h.onClose(),u.preventDefault()}),onKeyDown:pe(e.onKeyDown,u=>{const s=u.currentTarget.contains(u.target),c=QL[h.dir].includes(u.key);if(s&&c){var d;o.onOpenChange(!1),(d=l.trigger)===null||d===void 0||d.focus(),u.preventDefault()}})})))))});function SE(e){return e?"open":"closed"}function gf(e){return e==="indeterminate"}function Nv(e){return gf(e)?"indeterminate":e?"checked":"unchecked"}function _I(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function CI(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function EI(e,t,n){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let h=CI(e,Math.max(o,0));i.length===1&&(h=h.filter(f=>f!==n));const a=h.find(f=>f.toLowerCase().startsWith(i.toLowerCase()));return a!==n?a:void 0}function TI(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,h=t.length-1;o<t.length;h=o++){const l=t[o].x,a=t[o].y,f=t[h].x,u=t[h].y;a>r!=u>r&&n<(f-l)*(r-a)/(u-a)+l&&(i=!i)}return i}function kI(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return TI(n,t)}function Nl(e){return t=>t.pointerType==="mouse"?e(t):void 0}const PI=nI,OI=pE,$I=iI,AI=sI,RI=cI,MI=Dv,DI=uI,NI=pI,FI=gI,LI=vI,II=wI,jI=bI,BI=SI,_E="DropdownMenu",[zI,K7]=qt(_E,[fE]),_n=fE(),[UI,CE]=zI(_E),VI=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:h,modal:l=!0}=e,a=_n(t),f=x.useRef(null),[u=!1,s]=Fn({prop:i,defaultProp:o,onChange:h});return x.createElement(UI,{scope:t,triggerId:an(),triggerRef:f,contentId:an(),open:u,onOpenChange:s,onOpenToggle:x.useCallback(()=>s(c=>!c),[s]),modal:l},x.createElement(PI,ae({},a,{open:u,onOpenChange:s,dir:r,modal:l}),n))},HI="DropdownMenuTrigger",WI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,o=CE(HI,n),h=_n(n);return x.createElement(OI,ae({asChild:!0},h),x.createElement(Se.button,ae({type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:Hf(t,o.triggerRef),onPointerDown:pe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:pe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})))}),YI=e=>{const{__scopeDropdownMenu:t,...n}=e,r=_n(t);return x.createElement($I,ae({},r,n))},XI="DropdownMenuContent",GI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=CE(XI,n),o=_n(n),h=x.useRef(!1);return x.createElement(AI,ae({id:i.contentId,"aria-labelledby":i.triggerId},o,r,{ref:t,onCloseAutoFocus:pe(e.onCloseAutoFocus,l=>{var a;h.current||(a=i.triggerRef.current)===null||a===void 0||a.focus(),h.current=!1,l.preventDefault()}),onInteractOutside:pe(e.onInteractOutside,l=>{const a=l.detail.originalEvent,f=a.button===0&&a.ctrlKey===!0,u=a.button===2||f;(!i.modal||u)&&(h.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),KI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(RI,ae({},i,r,{ref:t}))}),qI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(MI,ae({},i,r,{ref:t}))}),ZI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(DI,ae({},i,r,{ref:t}))}),QI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(NI,ae({},i,r,{ref:t}))}),JI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(FI,ae({},i,r,{ref:t}))}),ej=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(LI,ae({},i,r,{ref:t}))}),tj=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:i,defaultOpen:o}=e,h=_n(t),[l=!1,a]=Fn({prop:r,defaultProp:o,onChange:i});return x.createElement(II,ae({},h,{open:l,onOpenChange:a}),n)},nj=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(jI,ae({},i,r,{ref:t}))}),rj=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=_n(n);return x.createElement(BI,ae({},i,r,{ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),ij=VI,oj=WI,sj=YI,EE=GI,TE=KI,kE=qI,PE=ZI,OE=QI,$E=JI,AE=ej,aj=tj,RE=nj,ME=rj,lj=ij,cj=oj,uj=aj,DE=x.forwardRef(({className:e,inset:t,children:n,...r},i)=>T.jsxs(RE,{ref:i,className:we("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r,children:[n,T.jsx(s5,{className:"ml-auto h-4 w-4"})]}));DE.displayName=RE.displayName;const NE=x.forwardRef(({className:e,...t},n)=>T.jsx(ME,{ref:n,className:we("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));NE.displayName=ME.displayName;const FE=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>T.jsx(sj,{children:T.jsx(EE,{ref:r,sideOffset:t,className:we("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),onCloseAutoFocus:i=>i.preventDefault(),...n})}));FE.displayName=EE.displayName;const pu=x.forwardRef(({className:e,inset:t,...n},r)=>T.jsx(kE,{ref:r,className:we("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));pu.displayName=kE.displayName;const fj=x.forwardRef(({className:e,children:t,checked:n,...r},i)=>T.jsxs(PE,{ref:i,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[T.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:T.jsx($E,{children:T.jsx(Mx,{className:"h-4 w-4"})})}),t]}));fj.displayName=PE.displayName;const dj=x.forwardRef(({className:e,children:t,...n},r)=>T.jsxs(OE,{ref:r,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[T.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:T.jsx($E,{children:T.jsx(f5,{className:"h-4 w-4 fill-current"})})}),t]}));dj.displayName=OE.displayName;const hj=x.forwardRef(({className:e,inset:t,...n},r)=>T.jsx(TE,{ref:r,className:we("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));hj.displayName=TE.displayName;const pj=x.forwardRef(({className:e,...t},n)=>T.jsx(AE,{ref:n,className:we("-mx-1 my-1 h-px bg-muted",e),...t}));pj.displayName=AE.displayName;const H1={RemoveBG:{IconClass:my,showName:"RemoveBG"},AnimeSeg:{IconClass:my,showName:"Anime Segmentation"},RealESRGAN:{IconClass:p3,showName:"RealESRGAN"},GFPGAN:{IconClass:gy,showName:"GFPGAN"},RestoreFormer:{IconClass:gy,showName:"RestoreFormer"},InteractiveSeg:{IconClass:v3,showName:"Interactive Segmentation"}},mj=()=>{const[e,t,n,r,i]=Xe(f=>[f.file,f.serverConfig.plugins,f.isPluginRunning,f.updateInteractiveSegState,f.runRenderablePlugin]),o=!e;if(t.length===0)return null;const h=(f,u)=>{u==="InteractiveSeg"?r({isInteractiveSeg:!0}):i(f,u)},l=f=>{const{IconClass:u,showName:s}=H1[f.name];return T.jsxs(uj,{children:[T.jsx(DE,{disabled:o,children:T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx(u,{className:"p-1"}),s]})}),T.jsxs(NE,{children:[T.jsx(pu,{onClick:()=>h(!1,f.name),children:"Remove Background"}),T.jsx(pu,{onClick:()=>h(!0,f.name),children:"Generate Mask"})]})]},f.name)},a=()=>t.map(f=>{const{IconClass:u,showName:s}=H1[f.name];return f.name==="RemoveBG"||f.name==="AnimeSeg"?l(f):T.jsx(pu,{onClick:()=>h(!1,f.name),disabled:o,children:T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx(u,{className:"p-1"}),s]})},f.name)});return T.jsxs(lj,{modal:!1,children:[T.jsx(cj,{className:"border rounded-lg z-10 bg-background outline-none",tabIndex:-1,children:T.jsx(Wt,{variant:"ghost",size:"icon",asChild:!0,className:"p-1.5",children:n?T.jsx("div",{role:"status",children:T.jsxs("svg",{"aria-hidden":"true",className:"w-5 h-5 animate-spin fill-primary",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),T.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})}):T.jsx(o3,{strokeWidth:1})})}),T.jsx(FE,{side:"bottom",align:"start",children:a()})]})},gj=pd,vj=D_,yj=md,LE=x.forwardRef(({className:e,...t},n)=>T.jsx(sa,{className:we("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));LE.displayName=sa.displayName;const wj=Gf("fixed gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),IE=x.forwardRef(({side:e="right",className:t,children:n,...r},i)=>T.jsxs(yj,{children:[T.jsx(LE,{}),T.jsx(aa,{ref:i,className:we(wj({side:e}),t),...r,children:n})]}));IE.displayName=aa.displayName;const jE=({className:e,...t})=>T.jsx("div",{className:we("flex flex-col space-y-2 text-center sm:text-left",e),...t});jE.displayName="SheetHeader";const bj=x.forwardRef(({className:e,...t},n)=>T.jsx(Ql,{ref:n,className:we("text-lg font-semibold text-foreground",e),...t}));bj.displayName=Ql.displayName;const xj=x.forwardRef(({className:e,...t},n)=>T.jsx(Jl,{ref:n,className:we("text-sm text-muted-foreground",e),...t}));xj.displayName=Jl.displayName;const at=({children:e})=>T.jsx("div",{className:"flex justify-between items-center pr-2",children:e}),Ze=({text:e,toolTip:t="",url:n,htmlFor:r,disabled:i=!1})=>T.jsxs(p_,{children:[T.jsx(m_,{asChild:!0,children:T.jsx(mv,{htmlFor:r||e.toLowerCase().replace(" ","-"),className:"font-medium",disabled:i,children:e})}),t||n?T.jsxs(nv,{className:"flex flex-col max-w-xs text-sm",side:"left",children:[T.jsx("p",{children:t}),n?T.jsx(Wt,{variant:"link",className:"justify-end",children:T.jsx("a",{href:n,target:"_blank",children:"More info"})}):T.jsx(T.Fragment,{})]}):T.jsx(T.Fragment,{})]}),Sj=()=>{const[e,t]=Xe(n=>[n.settings,n.updateSettings]);return T.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx(Ze,{htmlFor:"steps",text:"Steps",toolTip:"The number of denoising steps. More denoising steps usually lead to a higher quality image at the expense of slower inference."}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[30],min:1,max:100,step:1,value:[Math.floor(e.ldmSteps)],onValueChange:n=>t({ldmSteps:n[0]})}),T.jsx(Qt,{id:"steps",className:"w-[60px] rounded-full",numberValue:e.ldmSteps,allowFloat:!1,onNumberValueChange:n=>{t({ldmSteps:n})}})]})]}),T.jsxs(at,{children:[T.jsx(Ze,{text:"Sampler"}),T.jsxs(zr,{value:e.ldmSampler,onValueChange:n=>{t({ldmSampler:n})},children:[T.jsx(mr,{className:"w-[100px]",children:T.jsx(Vr,{placeholder:"Select sampler"})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:Object.values(Ig).map(n=>T.jsx(vr,{value:n,children:n},n))})})]})]})]})},BE=x.forwardRef(({className:e,...t},n)=>{const r=Xe(h=>h.updateAppState),i=()=>{r({disableShortCuts:!0})},o=()=>{r({disableShortCuts:!1})};return T.jsx("textarea",{className:we("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50","overflow-auto",e),tabIndex:-1,ref:n,onFocus:i,onBlur:o,...t})});BE.displayName="Textarea";const Vc=({text:e,onClick:t})=>{const[n]=Xe(r=>[r.settings.showExtender]);return T.jsx(Wt,{variant:"outline",className:"p-1 h-8",disabled:!n,onClick:t,children:T.jsx("div",{className:"flex items-center gap-1",children:e})})},_j=()=>{const[e,t,n,r,i,o,h,l,a,f,u]=Xe(O=>[O.serverConfig.samplers,O.settings,O.paintByExampleFile,O.getIsProcessing(),O.updateSettings,O.runInpainting,O.updateAppState,O.updateExtenderByBuiltIn,O.updateExtenderDirection,O.adjustMask,O.clearMask]),[s,c]=eE(n),d=x.useRef(null),{t:p}=gd();aL(d,()=>{d!=null&&d.current&&d.current.blur()});const g=()=>T.jsxs(at,{children:[T.jsx(Ze,{text:p("Cropper"),toolTip:"Inpainting on part of image, improve inference speed and reduce memory usage."}),T.jsx(Wn,{id:"cropper",checked:t.showCropper,onCheckedChange:O=>{i({showCropper:O}),O&&i({showExtender:!1})}})]}),m=()=>t.model.support_controlnet?T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("div",{className:"flex justify-between items-center pr-2",children:[T.jsx(Ze,{text:"ControlNet",toolTip:"Using an additional conditioning image to control how an image is generated",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#controlnet"}),T.jsx(Wn,{id:"controlnet",checked:t.enableControlnet,onCheckedChange:O=>{i({enableControlnet:O})}})]}),T.jsx("div",{className:"flex flex-col gap-1",children:T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[100],min:1,max:100,step:1,disabled:!t.enableControlnet,value:[Math.floor(t.controlnetConditioningScale*100)],onValueChange:O=>i({controlnetConditioningScale:O[0]/100})}),T.jsx(Qt,{id:"controlnet-weight",className:"w-[60px] rounded-full",disabled:!t.enableControlnet,numberValue:t.controlnetConditioningScale,allowFloat:!1,onNumberValueChange:O=>{i({controlnetConditioningScale:O})}})]})}),T.jsx("div",{className:"pr-2",children:T.jsxs(zr,{defaultValue:t.controlnetMethod,value:t.controlnetMethod,onValueChange:O=>{i({controlnetMethod:O})},disabled:!t.enableControlnet,children:[T.jsx(mr,{children:T.jsx(Vr,{placeholder:"Select control method"})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:Object.values(t.model.controlnets).map(O=>T.jsx(vr,{value:O,children:O.split("/")[1]},O))})})]})})]}),T.jsx(Ct,{})]}):null,v=()=>t.model.support_lcm_lora?T.jsxs(T.Fragment,{children:[T.jsxs(at,{children:[T.jsx(Ze,{text:"LCM LoRA",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inference_with_lcm_lora",toolTip:"Enable quality image generation in typically 2-4 steps. Suggest disabling guidance_scale by setting it to 0. You can also try values between 1.0 and 2.0. When LCM Lora is enabled, LCMSampler will be used automatically."}),T.jsx(Wn,{id:"lcm-lora",checked:t.enableLCMLora,onCheckedChange:O=>{i({enableLCMLora:O})}})]}),T.jsx(Ct,{})]}):null,y=()=>t.model.support_freeu?T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("div",{className:"flex justify-between items-center pr-2",children:[T.jsx(Ze,{text:"FreeU",toolTip:"FreeU is a technique for improving image quality. Different models may require different FreeU-specific hyperparameters, which can be viewed in the more info section.",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/freeu"}),T.jsx(Wn,{id:"freeu",checked:t.enableFreeu,onCheckedChange:O=>{i({enableFreeu:O})}})]}),T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("div",{className:"flex justify-center gap-6",children:[T.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[T.jsx(Ze,{htmlFor:"freeu-s1",text:"s1",disabled:!t.enableFreeu}),T.jsx(Qt,{id:"freeu-s1",className:"w-14",disabled:!t.enableFreeu,numberValue:t.freeuConfig.s1,allowFloat:!0,onNumberValueChange:O=>{i({freeuConfig:{...t.freeuConfig,s1:O}})}})]}),T.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[T.jsx(Ze,{htmlFor:"freeu-s2",text:"s2",disabled:!t.enableFreeu}),T.jsx(Qt,{id:"freeu-s2",className:"w-14",disabled:!t.enableFreeu,numberValue:t.freeuConfig.s2,allowFloat:!0,onNumberValueChange:O=>{i({freeuConfig:{...t.freeuConfig,s2:O}})}})]})]}),T.jsxs("div",{className:"flex justify-center gap-6",children:[T.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[T.jsx(Ze,{htmlFor:"freeu-b1",text:"b1",disabled:!t.enableFreeu}),T.jsx(Qt,{id:"freeu-b1",className:"w-14",disabled:!t.enableFreeu,numberValue:t.freeuConfig.b1,allowFloat:!0,onNumberValueChange:O=>{i({freeuConfig:{...t.freeuConfig,b1:O}})}})]}),T.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[T.jsx(Ze,{htmlFor:"freeu-b2",text:"b2",disabled:!t.enableFreeu}),T.jsx(Qt,{id:"freeu-b2",className:"w-14",disabled:!t.enableFreeu,numberValue:t.freeuConfig.b2,allowFloat:!0,onNumberValueChange:O=>{i({freeuConfig:{...t.freeuConfig,b2:O}})}})]})]})]}),T.jsx(Ct,{})]}):null,w=()=>t.model.need_prompt?T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsx(Ze,{text:"Negative prompt",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#negative-prompt",toolTip:"Negative prompt guides the model away from generating certain things in an image"}),T.jsx("div",{className:"pl-2 pr-4",children:T.jsx(BE,{ref:d,rows:4,onKeyUp,className:"max-h-[8rem] overflow-y-auto mb-2",placeholder:"",id:"negative-prompt",value:t.negativePrompt,onInput:O=>{O.preventDefault(),O.stopPropagation();const M=O.target;i({negativePrompt:M.value})}})})]}):null,b=()=>t.model.name!==sS?null:T.jsxs("div",{children:[T.jsxs(at,{children:[T.jsx(Ze,{text:"Example Image",toolTip:"An example image to guide image generation."}),T.jsx(g_,{tooltip:"Upload example image",onFileUpload:O=>{h({paintByExampleFile:O})},children:T.jsx(S3,{})})]}),c?T.jsx("div",{className:"flex justify-center items-center",children:T.jsx("img",{src:s.src,alt:"example",className:"max-w-[200px] max-h-[200px] m-3"})}):T.jsx(T.Fragment,{}),T.jsx(Wt,{variant:"default",className:"w-full",disabled:r||!c,onClick:()=>{o("Fantasy-Studio/Paint-by-Example")},children:"Paint"})]}),S=()=>t.model.name!==MO?null:T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx(Ze,{text:"Image guidance scale",toolTip:"Push the generated image towards the inital image. Higher image guidance scale encourages generated images that are closely linked to the source image, usually at the expense of lower image quality.",url:"https://huggingface.co/docs/diffusers/main/en/api/pipelines/pix2pix"}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[150],min:100,max:1e3,step:1,value:[Math.floor(t.p2pImageGuidanceScale*100)],onValueChange:O=>i({p2pImageGuidanceScale:O[0]/100})}),T.jsx(Qt,{id:"image-guidance-scale",className:"w-[60px] rounded-full",numberValue:t.p2pImageGuidanceScale,allowFloat:!0,onNumberValueChange:O=>{i({p2pImageGuidanceScale:O})}})]})]}),_=()=>t.model.support_strength?T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx(Ze,{text:"Strength",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#strength",toolTip:"Strength is a measure of how much noise is added to the base image, which influences how similar the output is to the base image. Higher value means more noise and more different from the base image"}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[100],min:10,max:100,step:1,value:[Math.floor(t.sdStrength*100)],onValueChange:O=>i({sdStrength:O[0]/100})}),T.jsx(Qt,{id:"strength",className:"w-[60px] rounded-full",numberValue:t.sdStrength,allowFloat:!0,onNumberValueChange:O=>{i({sdStrength:O})}})]})]}):null,E=()=>t.model.support_outpainting?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs(at,{children:[T.jsx(Ze,{text:"Extender",toolTip:"Perform outpainting on images to expand it's content."}),T.jsx(Wn,{id:"extender",checked:t.showExtender,onCheckedChange:O=>{i({showExtender:O}),O&&i({showCropper:!1})}})]}),T.jsxs(at,{children:[T.jsxs(zr,{defaultValue:t.extenderDirection,value:t.extenderDirection,onValueChange:O=>{a(O)},children:[T.jsx(mr,{className:"w-[65px] h-7",disabled:!t.showExtender,children:T.jsx(Vr,{placeholder:"Select axis"})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:Object.values(Ut).map(O=>T.jsx(vr,{value:O,children:O},O))})})]}),T.jsxs("div",{className:"flex gap-1 justify-center mt-0",children:[T.jsx(Vc,{text:"1.25x",onClick:()=>l(t.extenderDirection,1.25)}),T.jsx(Vc,{text:"1.5x",onClick:()=>l(t.extenderDirection,1.5)}),T.jsx(Vc,{text:"1.75x",onClick:()=>l(t.extenderDirection,1.75)}),T.jsx(Vc,{text:"2.0x",onClick:()=>l(t.extenderDirection,2)})]})]})]}),T.jsx(Ct,{})]}):null,C=()=>t.model.name!==DO?null:T.jsxs(at,{children:[T.jsx(Ze,{text:"Task",toolTip:"PowerPaint task. When using extender, image-outpainting task will be auto used. For object-removal and image-outpainting, it is recommended to set the guidance_scale at 10 or above."}),T.jsxs(zr,{defaultValue:t.powerpaintTask,value:t.powerpaintTask,onValueChange:O=>{i({powerpaintTask:O})},disabled:t.showExtender,children:[T.jsx(mr,{className:"w-[140px]",children:T.jsx(Vr,{placeholder:"Select task"})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:[ys.text_guided,ys.object_remove,ys.shape_guided].map(O=>T.jsx(vr,{value:O,children:O},O))})})]})]}),P=()=>T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx(Ze,{htmlFor:"steps",text:"Steps",toolTip:"The number of denoising steps. More denoising steps usually lead to a higher quality image at the expense of slower inference."}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[30],min:1,max:100,step:1,value:[Math.floor(t.sdSteps)],onValueChange:O=>i({sdSteps:O[0]})}),T.jsx(Qt,{id:"steps",className:"w-[60px] rounded-full",numberValue:t.sdSteps,allowFloat:!1,onNumberValueChange:O=>{i({sdSteps:O})}})]})]}),N=()=>T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx(Ze,{text:"Guidance scale",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#guidance-scale",toolTip:"Guidance scale affects how aligned the text prompt and generated image are. Higher value means the prompt and generated image are closely aligned, so the output is a stricter interpretation of the prompt"}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[750],min:0,max:1500,step:1,value:[Math.floor(t.sdGuidanceScale*100)],onValueChange:O=>i({sdGuidanceScale:O[0]/100})}),T.jsx(Qt,{id:"guidance-scale",className:"w-[60px] rounded-full",numberValue:t.sdGuidanceScale,allowFloat:!0,onNumberValueChange:O=>{i({sdGuidanceScale:O})}})]})]}),B=()=>t.model.name===NO?null:T.jsxs(at,{children:[T.jsx(Ze,{text:"Sampler"}),T.jsxs(zr,{defaultValue:t.sdSampler,value:t.sdSampler,onValueChange:O=>{i({sdSampler:O})},children:[T.jsx(mr,{className:"w-[175px] text-xs",children:T.jsx(Vr,{placeholder:"Select sampler"})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:e.map(O=>T.jsx(vr,{value:O,className:"text-xs",children:O},O))})})]})]}),I=()=>T.jsxs(at,{children:[T.jsx(Ze,{text:"Seed",toolTip:"Using same parameters and a fixed seed can generate same result image."}),T.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[T.jsx(Wn,{id:"seed",checked:t.seedFixed,onCheckedChange:O=>{i({seedFixed:O})}}),T.jsx(Qt,{id:"seed",className:"w-[100px]",disabled:!t.seedFixed,numberValue:t.seed,allowFloat:!1,onNumberValueChange:O=>{i({seed:O})}})]})]}),U=()=>T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx(Ze,{text:"Mask blur",toolTip:"How much to blur the mask before processing, in pixels. Make the generated inpainting boundaries appear more natural."}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[t.sdMaskBlur],min:0,max:96,step:1,value:[Math.floor(t.sdMaskBlur)],onValueChange:O=>i({sdMaskBlur:O[0]})}),T.jsx(Qt,{id:"mask-blur",className:"w-[60px] rounded-full",numberValue:t.sdMaskBlur,allowFloat:!1,onNumberValueChange:O=>{i({sdMaskBlur:O})}})]})]}),D=()=>T.jsxs(T.Fragment,{children:[T.jsxs(at,{children:[T.jsx(Ze,{text:"Match histograms",toolTip:"Match the inpainting result histogram to the source image histogram",url:"https://github.com/Sanster/lama-cleaner/pull/143#issuecomment-1325859307"}),T.jsx(Wn,{id:"match-histograms",checked:t.sdMatchHistograms,onCheckedChange:O=>{i({sdMatchHistograms:O})}})]}),T.jsx(Ct,{})]}),F=()=>T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx(Ze,{htmlFor:"adjustMaskKernelSize",text:p("Adjust Mask"),toolTip:"Expand or shrink mask. Using the slider to adjust the kernel size for dilation or erosion."}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[12],min:1,max:100,step:1,value:[Math.floor(t.adjustMaskKernelSize)],onValueChange:O=>i({adjustMaskKernelSize:O[0]})}),T.jsx(Qt,{id:"adjustMaskKernelSize",className:"w-[60px] rounded-full",numberValue:t.adjustMaskKernelSize,allowFloat:!1,onNumberValueChange:O=>{i({adjustMaskKernelSize:O})}})]}),T.jsxs(at,{children:[T.jsxs("div",{className:"flex gap-1 justify-start",children:[T.jsx(Wt,{variant:"outline",className:"p-1 h-8",onClick:()=>f("expand"),disabled:r,children:T.jsx("div",{className:"flex items-center gap-1 select-none",children:p("Expand")})}),T.jsx(Wt,{variant:"outline",className:"p-1 h-8",onClick:()=>f("shrink"),disabled:r,children:T.jsx("div",{className:"flex items-center gap-1 select-none",children:p("Shrink")})}),T.jsx(Wt,{variant:"outline",className:"p-1 h-8",onClick:()=>f("reverse"),disabled:r,children:T.jsx("div",{className:"flex items-center gap-1 select-none",children:p("Reverse")})})]}),T.jsx(Wt,{variant:"outline",className:"p-1 h-8 justify-self-end",onClick:u,disabled:r,children:T.jsx("div",{className:"flex items-center gap-1 select-none",children:p("Clear")})})]})]}),T.jsx(Ct,{})]});return T.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[g(),E(),F(),C(),P(),N(),S(),_(),B(),I(),w(),T.jsx(Ct,{}),m(),v(),U(),D(),y(),b()]})},Cj=()=>{const[e,t]=Xe(n=>[n.settings,n.updateSettings]);return T.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[T.jsxs(at,{children:[T.jsx(Ze,{text:"CV2 Flag",url:"https://docs.opencv.org/4.8.0/d7/d8b/group__photo__inpaint.html#gga8002a65f5a3328fbf15df81b842d3c3ca892824c38e258feb5e72f308a358d52e"}),T.jsxs(zr,{value:e.cv2Flag,onValueChange:n=>{t({cv2Flag:n})},children:[T.jsx(mr,{className:"w-[160px]",children:T.jsx(Vr,{placeholder:"Select flag"})}),T.jsx(gr,{align:"end",children:T.jsx(Ur,{children:Object.values(jg).map(n=>T.jsx(vr,{value:n,children:n},n))})})]})]}),T.jsx(Ze,{text:"CV2 Radius",url:"https://docs.opencv.org/4.8.0/d7/d8b/group__photo__inpaint.html#gga8002a65f5a3328fbf15df81b842d3c3ca892824c38e258feb5e72f308a358d52e"}),T.jsxs(at,{children:[T.jsx(Yn,{className:"w-[180px]",defaultValue:[5],min:1,max:100,step:1,value:[Math.floor(e.cv2Radius)],onValueChange:n=>t({cv2Radius:n[0]})}),T.jsx(Qt,{id:"cv2-radius",className:"w-[60px] rounded-full",numberValue:e.cv2Radius,allowFloat:!1,onNumberValueChange:n=>{t({cv2Radius:n})}})]})]})},Ej=()=>{const[e,t]=Xe(o=>[o.settings,o.windowSize]),[n,r]=oL(!0);if(or("c",()=>{r()}),e.model.name!==uy&&e.model.name!==fy&&e.model.model_type===Ei)return null;const i=()=>e.model.name===uy?T.jsx(Sj,{}):e.model.name===fy?T.jsx(Cj,{}):T.jsx(_j,{});return T.jsxs(gj,{open:n,modal:!1,children:[T.jsx(vj,{tabIndex:-1,className:"z-10 outline-none absolute top-[68px] right-6 rounded-lg border bg-background",hidden:n,children:T.jsx(Wt,{variant:"ghost",size:"icon",asChild:!0,className:"p-1.5",onClick:r,children:T.jsx(a3,{strokeWidth:1})})}),T.jsxs(IE,{side:"right",className:"w-[300px] mt-[60px] outline-none pl-4 pr-1",onOpenAutoFocus:o=>o.preventDefault(),onPointerDownOutside:o=>o.preventDefault(),children:[T.jsxs(jE,{children:[T.jsxs(at,{children:[T.jsx("div",{className:"overflow-hidden mr-8",children:e.model.name.split("/")[e.model.name.split("/").length-1]}),T.jsx(Wt,{variant:"ghost",size:"icon",className:"border h-6 w-6",onClick:r,children:T.jsx(l3,{strokeWidth:1})})]}),T.jsx(Ct,{})]}),T.jsx(bv,{style:{height:t.height-160},className:"pr-3",children:i()})]})]})},Tj={name:"Fantasy-Studio/Paint-by-Example",path:"Fantasy-Studio/Paint-by-Example",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},kj=()=>{const[e,t]=Xe(n=>[n.file,n.updateSettings]);return x.useEffect(()=>{t({model:Tj})},[]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex gap-3 absolute top-[68px] left-[24px] items-center",children:[T.jsx(mj,{}),T.jsx(GL,{})]}),T.jsx(Ej,{}),e?T.jsx(XL,{file:e}):T.jsx(T.Fragment,{})]})},Pj=()=>{const[e,t]=x.useState(window.innerWidth),n=x.useCallback(()=>{t(window.innerWidth)},[]);if(x.useEffect(()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)})),e<768)return"mobile";if(e>=768&&e<1224)return"tablet";if(e>=1224)return"desktop"};function Oj(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}function zE(e,t){return new Promise(function(n,r){let i;return $j(e).then(function(o){try{return i=o,n(new Blob([t.slice(0,2),i,t.slice(2)],{type:"image/jpeg"}))}catch(h){return r(h)}},r)})}const $j=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const o=new DataView(i);let h=0;if(o.getUint16(h)!==65496)return n("not a valid JPEG");for(h+=2;;){const l=o.getUint16(h);if(l===65498)break;const a=o.getUint16(h+2);if(l===65505&&o.getUint32(h+4)===1165519206){const f=h+10;let u;switch(o.getUint16(f)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(o.getUint16(f+2,u)!==42)return n("TIFF header contains invalid version");const s=o.getUint32(f+4,u),c=f+s+2+12*o.getUint16(f+s,u);for(let d=f+s+2;d<c;d+=12)if(o.getUint16(d,u)==274){if(o.getUint16(d+2,u)!==3)return n("Orientation data type is invalid");if(o.getUint32(d+4,u)!==1)return n("Orientation data count is invalid");o.setUint16(d+8,1,u);break}return t(i.slice(h,h+2+a))}h+=2+a}return t(new Blob)}),r.readAsArrayBuffer(e)});var vf={},Aj={get exports(){return vf},set exports(e){vf=e}};(function(e){var t,n,r={};Aj.exports=r,r.parse=function(i,o){for(var h=r.bin.readUshort,l=r.bin.readUint,a=0,f={},u=new Uint8Array(i),s=u.length-4;l(u,s)!=101010256;)s--;a=s,a+=4;var c=h(u,a+=4);h(u,a+=2);var d=l(u,a+=2),p=l(u,a+=4);a+=4,a=p;for(var g=0;g<c;g++){l(u,a),a+=4,a+=4,a+=4,l(u,a+=4),d=l(u,a+=4);var m=l(u,a+=4),v=h(u,a+=4),y=h(u,a+2),w=h(u,a+4);a+=6;var b=l(u,a+=8);a+=4,a+=v+y+w,r._readLocal(u,b,f,d,m,o)}return f},r._readLocal=function(i,o,h,l,a,f){var u=r.bin.readUshort,s=r.bin.readUint;s(i,o),u(i,o+=4),u(i,o+=2);var c=u(i,o+=2);s(i,o+=2),s(i,o+=4),o+=4;var d=u(i,o+=8),p=u(i,o+=2);o+=2;var g=r.bin.readUTF8(i,o,d);if(o+=d,o+=p,f)h[g]={size:a,csize:l};else{var m=new Uint8Array(i.buffer,o);if(c==0)h[g]=new Uint8Array(m.buffer.slice(o,o+l));else{if(c!=8)throw"unknown compression method: "+c;var v=new Uint8Array(a);r.inflateRaw(m,v),h[g]=v}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var h=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[h]=120,l[h+1]=156,h+=2,h=r.F.deflateRaw(i,l,h,o.level);var a=r.adler(i,0,i.length);return l[h+0]=a>>>24&255,l[h+1]=a>>>16&255,l[h+2]=a>>>8&255,l[h+3]=a>>>0&255,new Uint8Array(l.buffer,0,h+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var h=new Uint8Array(50+Math.floor(1.1*i.length)),l=r.F.deflateRaw(i,h,l,o.level);return new Uint8Array(h.buffer,0,l)},r.encode=function(i,o){o==null&&(o=!1);var h=0,l=r.bin.writeUint,a=r.bin.writeUshort,f={};for(var u in i){var s=!r._noNeed(u)&&!o,c=i[u],d=r.crc.crc(c,0,c.length);f[u]={cpr:s,usize:c.length,crc:d,file:s?r.deflateRaw(c):c}}for(var u in f)h+=f[u].file.length+30+46+2*r.bin.sizeUTF8(u);h+=22;var p=new Uint8Array(h),g=0,m=[];for(var u in f){var v=f[u];m.push(g),g=r._writeHeader(p,g,u,v,0)}var y=0,w=g;for(var u in f)v=f[u],m.push(g),g=r._writeHeader(p,g,u,v,1,m[y++]);var b=g-w;return l(p,g,101010256),g+=4,a(p,g+=4,y),a(p,g+=2,y),l(p,g+=2,b),l(p,g+=4,w),g+=4,g+=2,p.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,h,l,a,f){var u=r.bin.writeUint,s=r.bin.writeUshort,c=l.file;return u(i,o,a==0?67324752:33639248),o+=4,a==1&&(o+=2),s(i,o,20),s(i,o+=2,0),s(i,o+=2,l.cpr?8:0),u(i,o+=2,0),u(i,o+=4,l.crc),u(i,o+=4,c.length),u(i,o+=4,l.usize),s(i,o+=4,r.bin.sizeUTF8(h)),s(i,o+=2,0),o+=2,a==1&&(o+=2,o+=2,u(i,o+=6,f),o+=4),o+=r.bin.writeUTF8(i,o,h),a==0&&(i.set(c,o),o+=c.length),o},r.crc={table:function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var h=o,l=0;l<8;l++)1&h?h=3988292384^h>>>1:h>>>=1;i[o]=h}return i}(),update:function(i,o,h,l){for(var a=0;a<l;a++)i=r.crc.table[255&(i^o[h+a])]^i>>>8;return i},crc:function(i,o,h){return 4294967295^r.crc.update(4294967295,i,o,h)}},r.adler=function(i,o,h){for(var l=1,a=0,f=o,u=o+h;f<u;){for(var s=Math.min(f+5552,u);f<s;)a+=l+=i[f++];l%=65521,a%=65521}return a<<16|l},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,h){i[o]=255&h,i[o+1]=h>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,h){i[o]=255&h,i[o+1]=h>>8&255,i[o+2]=h>>16&255,i[o+3]=h>>24&255},readASCII:function(i,o,h){for(var l="",a=0;a<h;a++)l+=String.fromCharCode(i[o+a]);return l},writeASCII:function(i,o,h){for(var l=0;l<h.length;l++)i[o+l]=h.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,h){for(var l,a="",f=0;f<h;f++)a+="%"+r.bin.pad(i[o+f].toString(16));try{l=decodeURIComponent(a)}catch{return r.bin.readASCII(i,o,h)}return l},writeUTF8:function(i,o,h){for(var l=h.length,a=0,f=0;f<l;f++){var u=h.charCodeAt(f);if(!(4294967168&u))i[o+a]=u,a++;else if(!(4294965248&u))i[o+a]=192|u>>6,i[o+a+1]=128|u>>0&63,a+=2;else if(!(4294901760&u))i[o+a]=224|u>>12,i[o+a+1]=128|u>>6&63,i[o+a+2]=128|u>>0&63,a+=3;else{if(4292870144&u)throw"e";i[o+a]=240|u>>18,i[o+a+1]=128|u>>12&63,i[o+a+2]=128|u>>6&63,i[o+a+3]=128|u>>0&63,a+=4}}return a},sizeUTF8:function(i){for(var o=i.length,h=0,l=0;l<o;l++){var a=i.charCodeAt(l);if(!(4294967168&a))h++;else if(!(4294965248&a))h+=2;else if(!(4294901760&a))h+=3;else{if(4292870144&a)throw"e";h+=4}}return h}},r.F={},r.F.deflateRaw=function(i,o,h,l){var a=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],f=r.F.U,u=r.F._goodIndex;r.F._hash;var s=r.F._putsE,c=0,d=h<<3,p=0,g=i.length;if(l==0){for(;c<g;)s(o,d,c+(B=Math.min(65535,g-c))==g?1:0),d=r.F._copyExact(i,c,B,o,d+8),c+=B;return d>>>3}var m=f.lits,v=f.strt,y=f.prev,w=0,b=0,S=0,_=0,E=0,C=0;for(g>2&&(v[C=r.F._hash(i,0)]=0),c=0;c<g;c++){if(E=C,c+1<g-2){C=r.F._hash(i,c+1);var P=c+1&32767;y[P]=v[C],v[C]=P}if(p<=c){(w>14e3||b>26697)&&g-c>100&&(p<c&&(m[w]=c-p,w+=2,p=c),d=r.F._writeBlock(c==g-1||p==g?1:0,m,w,_,i,S,c-S,o,d),w=b=_=0,S=c);var N=0;c<g-2&&(N=r.F._bestMatch(i,c,y,E,Math.min(a[2],g-c),a[3]));var B=N>>>16,I=65535&N;if(N!=0){I=65535&N;var U=u(B=N>>>16,f.of0);f.lhst[257+U]++;var D=u(I,f.df0);f.dhst[D]++,_+=f.exb[U]+f.dxb[D],m[w]=B<<23|c-p,m[w+1]=I<<16|U<<8|D,w+=2,p=c+B}else f.lhst[i[c]]++;b++}}for(S==c&&i.length!=0||(p<c&&(m[w]=c-p,w+=2,p=c),d=r.F._writeBlock(1,m,w,_,i,S,c-S,o,d),w=0,b=0,w=b=_=0,S=c);7&d;)d++;return d>>>3},r.F._bestMatch=function(i,o,h,l,a,f){var u=32767&o,s=h[u],c=u-s+32768&32767;if(s==u||l!=r.F._hash(i,o-c))return 0;for(var d=0,p=0,g=Math.min(32767,o);c<=g&&--f!=0&&s!=u;){if(d==0||i[o+d]==i[o+d-c]){var m=r.F._howLong(i,o,c);if(m>d){if(p=c,(d=m)>=a)break;c+2<m&&(m=c+2);for(var v=0,y=0;y<m-2;y++){var w=o-c+y+32768&32767,b=w-h[w]+32768&32767;b>v&&(v=b,s=w)}}}c+=(u=s)-(s=h[u])+32768&32767}return d<<16|p},r.F._howLong=function(i,o,h){if(i[o]!=i[o-h]||i[o+1]!=i[o+1-h]||i[o+2]!=i[o+2-h])return 0;var l=o,a=Math.min(i.length,o+258);for(o+=3;o<a&&i[o]==i[o-h];)o++;return o-l},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,h,l,a,f,u,s,c){var d,p,g,m,v,y,w,b,S,_=r.F.U,E=r.F._putsF,C=r.F._putsE;_.lhst[256]++,p=(d=r.F.getTrees())[0],g=d[1],m=d[2],v=d[3],y=d[4],w=d[5],b=d[6],S=d[7];var P=32+(c+3&7?8-(c+3&7):0)+(u<<3),N=l+r.F.contSize(_.fltree,_.lhst)+r.F.contSize(_.fdtree,_.dhst),B=l+r.F.contSize(_.ltree,_.lhst)+r.F.contSize(_.dtree,_.dhst);B+=14+3*w+r.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var I=0;I<286;I++)_.lhst[I]=0;for(I=0;I<30;I++)_.dhst[I]=0;for(I=0;I<19;I++)_.ihst[I]=0;var U=P<N&&P<B?0:N<B?1:2;if(E(s,c,i),E(s,c+1,U),c+=3,U==0){for(;7&c;)c++;c=r.F._copyExact(a,f,u,s,c)}else{var D,F;if(U==1&&(D=_.fltree,F=_.fdtree),U==2){r.F.makeCodes(_.ltree,p),r.F.revCodes(_.ltree,p),r.F.makeCodes(_.dtree,g),r.F.revCodes(_.dtree,g),r.F.makeCodes(_.itree,m),r.F.revCodes(_.itree,m),D=_.ltree,F=_.dtree,C(s,c,v-257),C(s,c+=5,y-1),C(s,c+=5,w-4),c+=4;for(var O=0;O<w;O++)C(s,c+3*O,_.itree[1+(_.ordr[O]<<1)]);c+=3*w,c=r.F._codeTiny(b,_.itree,s,c),c=r.F._codeTiny(S,_.itree,s,c)}for(var M=f,V=0;V<h;V+=2){for(var k=o[V],R=k>>>23,j=M+(8388607&k);M<j;)c=r.F._writeLit(a[M++],D,s,c);if(R!=0){var A=o[V+1],W=A>>16,L=A>>8&255,$=255&A;C(s,c=r.F._writeLit(257+L,D,s,c),R-_.of0[L]),c+=_.exb[L],E(s,c=r.F._writeLit($,F,s,c),W-_.df0[$]),c+=_.dxb[$],M+=R}}c=r.F._writeLit(256,D,s,c)}return c},r.F._copyExact=function(i,o,h,l,a){var f=a>>>3;return l[f]=h,l[f+1]=h>>>8,l[f+2]=255-l[f],l[f+3]=255-l[f+1],f+=4,l.set(new Uint8Array(i.buffer,o,h),f),a+(h+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),h=r.F._hufTree(i.dhst,i.dtree,15),l=[],a=r.F._lenCodes(i.ltree,l),f=[],u=r.F._lenCodes(i.dtree,f),s=0;s<l.length;s+=2)i.ihst[l[s]]++;for(s=0;s<f.length;s+=2)i.ihst[f[s]]++;for(var c=r.F._hufTree(i.ihst,i.itree,7),d=19;d>4&&i.itree[1+(i.ordr[d-1]<<1)]==0;)d--;return[o,h,c,a,u,d,l,f]},r.F.getSecond=function(i){for(var o=[],h=0;h<i.length;h+=2)o.push(i[h+1]);return o},r.F.nonZero=function(i){for(var o="",h=0;h<i.length;h+=2)i[h+1]!=0&&(o+=(h>>1)+",");return o},r.F.contSize=function(i,o){for(var h=0,l=0;l<o.length;l++)h+=o[l]*i[1+(l<<1)];return h},r.F._codeTiny=function(i,o,h,l){for(var a=0;a<i.length;a+=2){var f=i[a],u=i[a+1];l=r.F._writeLit(f,o,h,l);var s=f==16?2:f==17?3:7;f>15&&(r.F._putsE(h,l,u,s),l+=s)}return l},r.F._lenCodes=function(i,o){for(var h=i.length;h!=2&&i[h-1]==0;)h-=2;for(var l=0;l<h;l+=2){var a=i[l+1],f=l+3<h?i[l+3]:-1,u=l+5<h?i[l+5]:-1,s=l==0?-1:i[l-1];if(a==0&&f==a&&u==a){for(var c=l+5;c+2<h&&i[c+2]==a;)c+=2;(d=Math.min(c+1-l>>>1,138))<11?o.push(17,d-3):o.push(18,d-11),l+=2*d-2}else if(a==s&&f==a&&u==a){for(c=l+5;c+2<h&&i[c+2]==a;)c+=2;var d=Math.min(c+1-l>>>1,6);o.push(16,d-3),l+=2*d-2}else o.push(a,0)}return h>>>1},r.F._hufTree=function(i,o,h){var l=[],a=i.length,f=o.length,u=0;for(u=0;u<f;u+=2)o[u]=0,o[u+1]=0;for(u=0;u<a;u++)i[u]!=0&&l.push({lit:u,f:i[u]});var s=l.length,c=l.slice(0);if(s==0)return 0;if(s==1){var d=l[0].lit;return c=d==0?1:0,o[1+(d<<1)]=1,o[1+(c<<1)]=1,1}l.sort(function(b,S){return b.f-S.f});var p=l[0],g=l[1],m=0,v=1,y=2;for(l[0]={lit:-1,f:p.f+g.f,l:p,r:g,d:0};v!=s-1;)p=m!=v&&(y==s||l[m].f<l[y].f)?l[m++]:l[y++],g=m!=v&&(y==s||l[m].f<l[y].f)?l[m++]:l[y++],l[v++]={lit:-1,f:p.f+g.f,l:p,r:g};var w=r.F.setDepth(l[v-1],0);for(w>h&&(r.F.restrictDepth(c,h,w),w=h),u=0;u<s;u++)o[1+(c[u].lit<<1)]=c[u].d;return w},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,h){var l=0,a=1<<h-o,f=0;for(i.sort(function(s,c){return c.d==s.d?s.f-c.f:c.d-s.d}),l=0;l<i.length&&i[l].d>o;l++){var u=i[l].d;i[l].d=o,f+=a-(1<<h-u)}for(f>>>=h-o;f>0;)(u=i[l].d)<o?(i[l].d++,f-=1<<o-u-1):l++;for(;l>=0;l--)i[l].d==o&&f<0&&(i[l].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var h=0;return o[16|h]<=i&&(h|=16),o[8|h]<=i&&(h|=8),o[4|h]<=i&&(h|=4),o[2|h]<=i&&(h|=2),o[1|h]<=i&&(h|=1),h},r.F._writeLit=function(i,o,h,l){return r.F._putsF(h,l,o[i<<1]),l+o[1+(i<<1)]},r.F.inflate=function(i,o){var h=Uint8Array;if(i[0]==3&&i[1]==0)return o||new h(0);var l=r.F,a=l._bitsF,f=l._bitsE,u=l._decodeTiny,s=l.makeCodes,c=l.codes2map,d=l._get17,p=l.U,g=o==null;g&&(o=new h(i.length>>>2<<3));for(var m,v,y=0,w=0,b=0,S=0,_=0,E=0,C=0,P=0,N=0;y==0;)if(y=a(i,N,1),w=a(i,N+1,2),N+=3,w!=0){if(g&&(o=r.F._check(o,P+(1<<17))),w==1&&(m=p.flmap,v=p.fdmap,E=511,C=31),w==2){b=f(i,N,5)+257,S=f(i,N+5,5)+1,_=f(i,N+10,4)+4,N+=14;for(var B=0;B<38;B+=2)p.itree[B]=0,p.itree[B+1]=0;var I=1;for(B=0;B<_;B++){var U=f(i,N+3*B,3);p.itree[1+(p.ordr[B]<<1)]=U,U>I&&(I=U)}N+=3*_,s(p.itree,I),c(p.itree,I,p.imap),m=p.lmap,v=p.dmap,N=u(p.imap,(1<<I)-1,b+S,i,N,p.ttree);var D=l._copyOut(p.ttree,0,b,p.ltree);E=(1<<D)-1;var F=l._copyOut(p.ttree,b,S,p.dtree);C=(1<<F)-1,s(p.ltree,D),c(p.ltree,D,m),s(p.dtree,F),c(p.dtree,F,v)}for(;;){var O=m[d(i,N)&E];N+=15&O;var M=O>>>4;if(!(M>>>8))o[P++]=M;else{if(M==256)break;var V=P+M-254;if(M>264){var k=p.ldef[M-257];V=P+(k>>>3)+f(i,N,7&k),N+=7&k}var R=v[d(i,N)&C];N+=15&R;var j=R>>>4,A=p.ddef[j],W=(A>>>4)+a(i,N,15&A);for(N+=15&A,g&&(o=r.F._check(o,P+(1<<17)));P<V;)o[P]=o[P++-W],o[P]=o[P++-W],o[P]=o[P++-W],o[P]=o[P++-W];P=V}}}else{7&N&&(N+=8-(7&N));var L=4+(N>>>3),$=i[L-4]|i[L-3]<<8;g&&(o=r.F._check(o,P+$)),o.set(new h(i.buffer,i.byteOffset+L,$),P),N=L+$<<3,P+=$}return o.length==P?o:o.slice(0,P)},r.F._check=function(i,o){var h=i.length;if(o<=h)return i;var l=new Uint8Array(Math.max(h<<1,o));return l.set(i,0),l},r.F._decodeTiny=function(i,o,h,l,a,f){for(var u=r.F._bitsE,s=r.F._get17,c=0;c<h;){var d=i[s(l,a)&o];a+=15&d;var p=d>>>4;if(p<=15)f[c]=p,c++;else{var g=0,m=0;p==16?(m=3+u(l,a,2),a+=2,g=f[c-1]):p==17?(m=3+u(l,a,3),a+=3):p==18&&(m=11+u(l,a,7),a+=7);for(var v=c+m;c<v;)f[c]=g,c++}}return a},r.F._copyOut=function(i,o,h,l){for(var a=0,f=0,u=l.length>>>1;f<h;){var s=i[f+o];l[f<<1]=0,l[1+(f<<1)]=s,s>a&&(a=s),f++}for(;f<u;)l[f<<1]=0,l[1+(f<<1)]=0,f++;return a},r.F.makeCodes=function(i,o){for(var h,l,a,f,u=r.F.U,s=i.length,c=u.bl_count,d=0;d<=o;d++)c[d]=0;for(d=1;d<s;d+=2)c[i[d]]++;var p=u.next_code;for(h=0,c[0]=0,l=1;l<=o;l++)h=h+c[l-1]<<1,p[l]=h;for(a=0;a<s;a+=2)(f=i[a+1])!=0&&(i[a]=p[f],p[f]++)},r.F.codes2map=function(i,o,h){for(var l=i.length,a=r.F.U.rev15,f=0;f<l;f+=2)if(i[f+1]!=0)for(var u=f>>1,s=i[f+1],c=u<<4|s,d=o-s,p=i[f]<<d,g=p+(1<<d);p!=g;)h[a[p]>>>15-o]=c,p++},r.F.revCodes=function(i,o){for(var h=r.F.U.rev15,l=15-o,a=0;a<i.length;a+=2){var f=i[a]<<o-i[a+1];i[a]=h[f]>>>l}},r.F._putsE=function(i,o,h){h<<=7&o;var l=o>>>3;i[l]|=h,i[l+1]|=h>>>8},r.F._putsF=function(i,o,h){h<<=7&o;var l=o>>>3;i[l]|=h,i[l+1]|=h>>>8,i[l+2]|=h>>>16},r.F._bitsE=function(i,o,h){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<h)-1},r.F._bitsF=function(i,o,h){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<h)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var i=r.F.U,o=0;o<32768;o++){var h=o;h=(4278255360&(h=(4042322160&(h=(3435973836&(h=(2863311530&h)>>>1|(1431655765&h)<<1))>>>2|(858993459&h)<<2))>>>4|(252645135&h)<<4))>>>8|(16711935&h)<<8,i.rev15[o]=(h>>>16|h<<16)>>>17}function l(a,f,u){for(;f--!=0;)a.push(0,u)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),l(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)}()})();var Rj=Oj({__proto__:null,default:vf},[vf]);const Bn=function(){var e={nextZero(u,s){for(;u[s]!=0;)s++;return s},readUshort:(u,s)=>u[s]<<8|u[s+1],writeUshort(u,s,c){u[s]=c>>8&255,u[s+1]=255&c},readUint:(u,s)=>16777216*u[s]+(u[s+1]<<16|u[s+2]<<8|u[s+3]),writeUint(u,s,c){u[s]=c>>24&255,u[s+1]=c>>16&255,u[s+2]=c>>8&255,u[s+3]=255&c},readASCII(u,s,c){let d="";for(let p=0;p<c;p++)d+=String.fromCharCode(u[s+p]);return d},writeASCII(u,s,c){for(let d=0;d<c.length;d++)u[s+d]=c.charCodeAt(d)},readBytes(u,s,c){const d=[];for(let p=0;p<c;p++)d.push(u[s+p]);return d},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,s,c){let d,p="";for(let g=0;g<c;g++)p+=`%${e.pad(u[s+g].toString(16))}`;try{d=decodeURIComponent(p)}catch{return e.readASCII(u,s,c)}return d}};function t(u,s,c,d){const p=s*c,g=o(d),m=Math.ceil(s*g/8),v=new Uint8Array(4*p),y=new Uint32Array(v.buffer),{ctype:w}=d,{depth:b}=d,S=e.readUshort;if(w==6){const k=p<<2;if(b==8)for(var _=0;_<k;_+=4)v[_]=u[_],v[_+1]=u[_+1],v[_+2]=u[_+2],v[_+3]=u[_+3];if(b==16)for(_=0;_<k;_++)v[_]=u[_<<1]}else if(w==2){const k=d.tabs.tRNS;if(k==null){if(b==8)for(_=0;_<p;_++){var E=3*_;y[_]=255<<24|u[E+2]<<16|u[E+1]<<8|u[E]}if(b==16)for(_=0;_<p;_++)E=6*_,y[_]=255<<24|u[E+4]<<16|u[E+2]<<8|u[E]}else{var C=k[0];const R=k[1],j=k[2];if(b==8)for(_=0;_<p;_++){var P=_<<2;E=3*_,y[_]=255<<24|u[E+2]<<16|u[E+1]<<8|u[E],u[E]==C&&u[E+1]==R&&u[E+2]==j&&(v[P+3]=0)}if(b==16)for(_=0;_<p;_++)P=_<<2,E=6*_,y[_]=255<<24|u[E+4]<<16|u[E+2]<<8|u[E],S(u,E)==C&&S(u,E+2)==R&&S(u,E+4)==j&&(v[P+3]=0)}}else if(w==3){const k=d.tabs.PLTE,R=d.tabs.tRNS,j=R?R.length:0;if(b==1)for(var N=0;N<c;N++){var B=N*m,I=N*s;for(_=0;_<s;_++){P=I+_<<2;var U=3*(D=u[B+(_>>3)]>>7-((7&_)<<0)&1);v[P]=k[U],v[P+1]=k[U+1],v[P+2]=k[U+2],v[P+3]=D<j?R[D]:255}}if(b==2)for(N=0;N<c;N++)for(B=N*m,I=N*s,_=0;_<s;_++)P=I+_<<2,U=3*(D=u[B+(_>>2)]>>6-((3&_)<<1)&3),v[P]=k[U],v[P+1]=k[U+1],v[P+2]=k[U+2],v[P+3]=D<j?R[D]:255;if(b==4)for(N=0;N<c;N++)for(B=N*m,I=N*s,_=0;_<s;_++)P=I+_<<2,U=3*(D=u[B+(_>>1)]>>4-((1&_)<<2)&15),v[P]=k[U],v[P+1]=k[U+1],v[P+2]=k[U+2],v[P+3]=D<j?R[D]:255;if(b==8)for(_=0;_<p;_++){var D;P=_<<2,U=3*(D=u[_]),v[P]=k[U],v[P+1]=k[U+1],v[P+2]=k[U+2],v[P+3]=D<j?R[D]:255}}else if(w==4){if(b==8)for(_=0;_<p;_++){P=_<<2;var F=u[O=_<<1];v[P]=F,v[P+1]=F,v[P+2]=F,v[P+3]=u[O+1]}if(b==16)for(_=0;_<p;_++){var O;P=_<<2,F=u[O=_<<2],v[P]=F,v[P+1]=F,v[P+2]=F,v[P+3]=u[O+2]}}else if(w==0)for(C=d.tabs.tRNS?d.tabs.tRNS:-1,N=0;N<c;N++){const k=N*m,R=N*s;if(b==1)for(var M=0;M<s;M++){var V=(F=255*(u[k+(M>>>3)]>>>7-(7&M)&1))==255*C?0:255;y[R+M]=V<<24|F<<16|F<<8|F}else if(b==2)for(M=0;M<s;M++)V=(F=85*(u[k+(M>>>2)]>>>6-((3&M)<<1)&3))==85*C?0:255,y[R+M]=V<<24|F<<16|F<<8|F;else if(b==4)for(M=0;M<s;M++)V=(F=17*(u[k+(M>>>1)]>>>4-((1&M)<<2)&15))==17*C?0:255,y[R+M]=V<<24|F<<16|F<<8|F;else if(b==8)for(M=0;M<s;M++)V=(F=u[k+M])==C?0:255,y[R+M]=V<<24|F<<16|F<<8|F;else if(b==16)for(M=0;M<s;M++)F=u[k+(M<<1)],V=S(u,k+(M<<1))==C?0:255,y[R+M]=V<<24|F<<16|F<<8|F}return v}function n(u,s,c,d){const p=o(u),g=Math.ceil(c*p/8),m=new Uint8Array((g+1+u.interlace)*d);return s=u.tabs.CgBI?i(s,m):r(s,m),u.interlace==0?s=h(s,u,0,c,d):u.interlace==1&&(s=function(y,w){const b=w.width,S=w.height,_=o(w),E=_>>3,C=Math.ceil(b*_/8),P=new Uint8Array(S*C);let N=0;const B=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],D=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const M=U[F],V=D[F];let k=0,R=0,j=B[F];for(;j<S;)j+=M,R++;let A=I[F];for(;A<b;)A+=V,k++;const W=Math.ceil(k*_/8);h(y,w,N,k,R);let L=0,$=B[F];for(;$<S;){let H=I[F],Y=N+L*W<<3;for(;H<b;){var O;if(_==1&&(O=(O=y[Y>>3])>>7-(7&Y)&1,P[$*C+(H>>3)]|=O<<7-((7&H)<<0)),_==2&&(O=(O=y[Y>>3])>>6-(7&Y)&3,P[$*C+(H>>2)]|=O<<6-((3&H)<<1)),_==4&&(O=(O=y[Y>>3])>>4-(7&Y)&15,P[$*C+(H>>1)]|=O<<4-((1&H)<<2)),_>=8){const K=$*C+H*E;for(let G=0;G<E;G++)P[K+G]=y[(Y>>3)+G]}Y+=_,H+=V}L++,$+=M}k*R!=0&&(N+=R*(1+W)),F+=1}return P}(s,u)),s}function r(u,s){return i(new Uint8Array(u.buffer,2,u.length-6),s)}var i=function(){const u={H:{}};return u.H.N=function(s,c){const d=Uint8Array;let p,g,m=0,v=0,y=0,w=0,b=0,S=0,_=0,E=0,C=0;if(s[0]==3&&s[1]==0)return c||new d(0);const P=u.H,N=P.b,B=P.e,I=P.R,U=P.n,D=P.A,F=P.Z,O=P.m,M=c==null;for(M&&(c=new d(s.length>>>2<<5));m==0;)if(m=N(s,C,1),v=N(s,C+1,2),C+=3,v!=0){if(M&&(c=u.H.W(c,E+(1<<17))),v==1&&(p=O.J,g=O.h,S=511,_=31),v==2){y=B(s,C,5)+257,w=B(s,C+5,5)+1,b=B(s,C+10,4)+4,C+=14;let k=1;for(var V=0;V<38;V+=2)O.Q[V]=0,O.Q[V+1]=0;for(V=0;V<b;V++){const A=B(s,C+3*V,3);O.Q[1+(O.X[V]<<1)]=A,A>k&&(k=A)}C+=3*b,U(O.Q,k),D(O.Q,k,O.u),p=O.w,g=O.d,C=I(O.u,(1<<k)-1,y+w,s,C,O.v);const R=P.V(O.v,0,y,O.C);S=(1<<R)-1;const j=P.V(O.v,y,w,O.D);_=(1<<j)-1,U(O.C,R),D(O.C,R,p),U(O.D,j),D(O.D,j,g)}for(;;){const k=p[F(s,C)&S];C+=15&k;const R=k>>>4;if(!(R>>>8))c[E++]=R;else{if(R==256)break;{let j=E+R-254;if(R>264){const H=O.q[R-257];j=E+(H>>>3)+B(s,C,7&H),C+=7&H}const A=g[F(s,C)&_];C+=15&A;const W=A>>>4,L=O.c[W],$=(L>>>4)+N(s,C,15&L);for(C+=15&L;E<j;)c[E]=c[E++-$],c[E]=c[E++-$],c[E]=c[E++-$],c[E]=c[E++-$];E=j}}}}else{7&C&&(C+=8-(7&C));const k=4+(C>>>3),R=s[k-4]|s[k-3]<<8;M&&(c=u.H.W(c,E+R)),c.set(new d(s.buffer,s.byteOffset+k,R),E),C=k+R<<3,E+=R}return c.length==E?c:c.slice(0,E)},u.H.W=function(s,c){const d=s.length;if(c<=d)return s;const p=new Uint8Array(d<<1);return p.set(s,0),p},u.H.R=function(s,c,d,p,g,m){const v=u.H.e,y=u.H.Z;let w=0;for(;w<d;){const b=s[y(p,g)&c];g+=15&b;const S=b>>>4;if(S<=15)m[w]=S,w++;else{let _=0,E=0;S==16?(E=3+v(p,g,2),g+=2,_=m[w-1]):S==17?(E=3+v(p,g,3),g+=3):S==18&&(E=11+v(p,g,7),g+=7);const C=w+E;for(;w<C;)m[w]=_,w++}}return g},u.H.V=function(s,c,d,p){let g=0,m=0;const v=p.length>>>1;for(;m<d;){const y=s[m+c];p[m<<1]=0,p[1+(m<<1)]=y,y>g&&(g=y),m++}for(;m<v;)p[m<<1]=0,p[1+(m<<1)]=0,m++;return g},u.H.n=function(s,c){const d=u.H.m,p=s.length;let g,m,v,y;const w=d.j;for(var b=0;b<=c;b++)w[b]=0;for(b=1;b<p;b+=2)w[s[b]]++;const S=d.K;for(g=0,w[0]=0,m=1;m<=c;m++)g=g+w[m-1]<<1,S[m]=g;for(v=0;v<p;v+=2)y=s[v+1],y!=0&&(s[v]=S[y],S[y]++)},u.H.A=function(s,c,d){const p=s.length,g=u.H.m.r;for(let m=0;m<p;m+=2)if(s[m+1]!=0){const v=m>>1,y=s[m+1],w=v<<4|y,b=c-y;let S=s[m]<<b;const _=S+(1<<b);for(;S!=_;)d[g[S]>>>15-c]=w,S++}},u.H.l=function(s,c){const d=u.H.m.r,p=15-c;for(let g=0;g<s.length;g+=2){const m=s[g]<<c-s[g+1];s[g]=d[m]>>>p}},u.H.M=function(s,c,d){d<<=7&c;const p=c>>>3;s[p]|=d,s[p+1]|=d>>>8},u.H.I=function(s,c,d){d<<=7&c;const p=c>>>3;s[p]|=d,s[p+1]|=d>>>8,s[p+2]|=d>>>16},u.H.e=function(s,c,d){return(s[c>>>3]|s[1+(c>>>3)]<<8)>>>(7&c)&(1<<d)-1},u.H.b=function(s,c,d){return(s[c>>>3]|s[1+(c>>>3)]<<8|s[2+(c>>>3)]<<16)>>>(7&c)&(1<<d)-1},u.H.Z=function(s,c){return(s[c>>>3]|s[1+(c>>>3)]<<8|s[2+(c>>>3)]<<16)>>>(7&c)},u.H.i=function(s,c){return(s[c>>>3]|s[1+(c>>>3)]<<8|s[2+(c>>>3)]<<16|s[3+(c>>>3)]<<24)>>>(7&c)},u.H.m=function(){const s=Uint16Array,c=Uint32Array;return{K:new s(16),j:new s(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new c(32),J:new s(512),_:[],h:new s(32),$:[],w:new s(32768),C:[],v:[],d:new s(32768),D:[],u:new s(512),Q:[],r:new s(32768),s:new c(286),Y:new c(30),a:new c(19),t:new c(15e3),k:new s(65536),g:new s(32768)}}(),function(){const s=u.H.m;for(var c=0;c<32768;c++){let p=c;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,s.r[c]=(p>>>16|p<<16)>>>17}function d(p,g,m){for(;g--!=0;)p.push(0,m)}for(c=0;c<32;c++)s.q[c]=s.S[c]<<3|s.T[c],s.c[c]=s.p[c]<<4|s.z[c];d(s._,144,8),d(s._,112,9),d(s._,24,7),d(s._,8,8),u.H.n(s._,9),u.H.A(s._,9,s.J),u.H.l(s._,9),d(s.$,32,5),u.H.n(s.$,5),u.H.A(s.$,5,s.h),u.H.l(s.$,5),d(s.Q,19,0),d(s.C,286,0),d(s.D,30,0),d(s.v,320,0)}(),u.H.N}();function o(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function h(u,s,c,d,p){let g=o(s);const m=Math.ceil(d*g/8);let v,y;g=Math.ceil(g/8);let w=u[c],b=0;if(w>1&&(u[c]=[0,0,1][w-2]),w==3)for(b=g;b<m;b++)u[b+1]=u[b+1]+(u[b+1-g]>>>1)&255;for(let S=0;S<p;S++)if(v=c+S*m,y=v+S+1,w=u[y-1],b=0,w==0)for(;b<m;b++)u[v+b]=u[y+b];else if(w==1){for(;b<g;b++)u[v+b]=u[y+b];for(;b<m;b++)u[v+b]=u[y+b]+u[v+b-g]}else if(w==2)for(;b<m;b++)u[v+b]=u[y+b]+u[v+b-m];else if(w==3){for(;b<g;b++)u[v+b]=u[y+b]+(u[v+b-m]>>>1);for(;b<m;b++)u[v+b]=u[y+b]+(u[v+b-m]+u[v+b-g]>>>1)}else{for(;b<g;b++)u[v+b]=u[y+b]+l(0,u[v+b-m],0);for(;b<m;b++)u[v+b]=u[y+b]+l(u[v+b-g],u[v+b-m],u[v+b-g-m])}return u}function l(u,s,c){const d=u+s-c,p=d-u,g=d-s,m=d-c;return p*p<=g*g&&p*p<=m*m?u:g*g<=m*m?s:c}function a(u,s,c){c.width=e.readUint(u,s),s+=4,c.height=e.readUint(u,s),s+=4,c.depth=u[s],s++,c.ctype=u[s],s++,c.compress=u[s],s++,c.filter=u[s],s++,c.interlace=u[s],s++}function f(u,s,c,d,p,g,m,v,y){const w=Math.min(s,p),b=Math.min(c,g);let S=0,_=0;for(let F=0;F<b;F++)for(let O=0;O<w;O++)if(m>=0&&v>=0?(S=F*s+O<<2,_=(v+F)*p+m+O<<2):(S=(-v+F)*s-m+O<<2,_=F*p+O<<2),y==0)d[_]=u[S],d[_+1]=u[S+1],d[_+2]=u[S+2],d[_+3]=u[S+3];else if(y==1){var E=u[S+3]*.00392156862745098,C=u[S]*E,P=u[S+1]*E,N=u[S+2]*E,B=d[_+3]*(1/255),I=d[_]*B,U=d[_+1]*B,D=d[_+2]*B;const M=1-E,V=E+B*M,k=V==0?0:1/V;d[_+3]=255*V,d[_+0]=(C+I*M)*k,d[_+1]=(P+U*M)*k,d[_+2]=(N+D*M)*k}else if(y==2)E=u[S+3],C=u[S],P=u[S+1],N=u[S+2],B=d[_+3],I=d[_],U=d[_+1],D=d[_+2],E==B&&C==I&&P==U&&N==D?(d[_]=0,d[_+1]=0,d[_+2]=0,d[_+3]=0):(d[_]=C,d[_+1]=P,d[_+2]=N,d[_+3]=E);else if(y==3){if(E=u[S+3],C=u[S],P=u[S+1],N=u[S+2],B=d[_+3],I=d[_],U=d[_+1],D=d[_+2],E==B&&C==I&&P==U&&N==D)continue;if(E<220&&B>20)return!1}return!0}return{decode:function(s){const c=new Uint8Array(s);let d=8;const p=e,g=p.readUshort,m=p.readUint,v={tabs:{},frames:[]},y=new Uint8Array(c.length);let w,b=0,S=0;const _=[137,80,78,71,13,10,26,10];for(var E=0;E<8;E++)if(c[E]!=_[E])throw"The input is not a PNG file!";for(;d<c.length;){const F=p.readUint(c,d);d+=4;const O=p.readASCII(c,d,4);if(d+=4,O=="IHDR")a(c,d,v);else if(O=="iCCP"){for(var C=d;c[C]!=0;)C++;p.readASCII(c,d,C-d),c[C+1];const M=c.slice(C+2,d+F);let V=null;try{V=r(M)}catch{V=i(M)}v.tabs[O]=V}else if(O=="CgBI")v.tabs[O]=c.slice(d,d+4);else if(O=="IDAT"){for(E=0;E<F;E++)y[b+E]=c[d+E];b+=F}else if(O=="acTL")v.tabs[O]={num_frames:m(c,d),num_plays:m(c,d+4)},w=new Uint8Array(c.length);else if(O=="fcTL"){S!=0&&((D=v.frames[v.frames.length-1]).data=n(v,w.slice(0,S),D.rect.width,D.rect.height),S=0);const M={x:m(c,d+12),y:m(c,d+16),width:m(c,d+4),height:m(c,d+8)};let V=g(c,d+22);V=g(c,d+20)/(V==0?100:V);const k={rect:M,delay:Math.round(1e3*V),dispose:c[d+24],blend:c[d+25]};v.frames.push(k)}else if(O=="fdAT"){for(E=0;E<F-4;E++)w[S+E]=c[d+E+4];S+=F-4}else if(O=="pHYs")v.tabs[O]=[p.readUint(c,d),p.readUint(c,d+4),c[d+8]];else if(O=="cHRM")for(v.tabs[O]=[],E=0;E<8;E++)v.tabs[O].push(p.readUint(c,d+4*E));else if(O=="tEXt"||O=="zTXt"){v.tabs[O]==null&&(v.tabs[O]={});var P=p.nextZero(c,d),N=p.readASCII(c,d,P-d),B=d+F-P-1;if(O=="tEXt")U=p.readASCII(c,P+1,B);else{var I=r(c.slice(P+2,P+2+B));U=p.readUTF8(I,0,I.length)}v.tabs[O][N]=U}else if(O=="iTXt"){v.tabs[O]==null&&(v.tabs[O]={}),P=0,C=d,P=p.nextZero(c,C),N=p.readASCII(c,C,P-C);const M=c[C=P+1];var U;c[C+1],C+=2,P=p.nextZero(c,C),p.readASCII(c,C,P-C),C=P+1,P=p.nextZero(c,C),p.readUTF8(c,C,P-C),B=F-((C=P+1)-d),M==0?U=p.readUTF8(c,C,B):(I=r(c.slice(C,C+B)),U=p.readUTF8(I,0,I.length)),v.tabs[O][N]=U}else if(O=="PLTE")v.tabs[O]=p.readBytes(c,d,F);else if(O=="hIST"){const M=v.tabs.PLTE.length/3;for(v.tabs[O]=[],E=0;E<M;E++)v.tabs[O].push(g(c,d+2*E))}else if(O=="tRNS")v.ctype==3?v.tabs[O]=p.readBytes(c,d,F):v.ctype==0?v.tabs[O]=g(c,d):v.ctype==2&&(v.tabs[O]=[g(c,d),g(c,d+2),g(c,d+4)]);else if(O=="gAMA")v.tabs[O]=p.readUint(c,d)/1e5;else if(O=="sRGB")v.tabs[O]=c[d];else if(O=="bKGD")v.ctype==0||v.ctype==4?v.tabs[O]=[g(c,d)]:v.ctype==2||v.ctype==6?v.tabs[O]=[g(c,d),g(c,d+2),g(c,d+4)]:v.ctype==3&&(v.tabs[O]=c[d]);else if(O=="IEND")break;d+=F,p.readUint(c,d),d+=4}var D;return S!=0&&((D=v.frames[v.frames.length-1]).data=n(v,w.slice(0,S),D.rect.width,D.rect.height)),v.data=n(v,y,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(s){const c=s.width,d=s.height;if(s.tabs.acTL==null)return[t(s.data,c,d,s).buffer];const p=[];s.frames[0].data==null&&(s.frames[0].data=s.data);const g=c*d*4,m=new Uint8Array(g),v=new Uint8Array(g),y=new Uint8Array(g);for(let b=0;b<s.frames.length;b++){const S=s.frames[b],_=S.rect.x,E=S.rect.y,C=S.rect.width,P=S.rect.height,N=t(S.data,C,P,s);if(b!=0)for(var w=0;w<g;w++)y[w]=m[w];if(S.blend==0?f(N,C,P,m,c,d,_,E,0):S.blend==1&&f(N,C,P,m,c,d,_,E,1),p.push(m.buffer.slice(0)),S.dispose!=0){if(S.dispose==1)f(v,C,P,m,c,d,_,E,0);else if(S.dispose==2)for(w=0;w<g;w++)m[w]=y[w]}}return p},_paeth:l,_copyTile:f,_bin:e}}();(function(){const{_copyTile:e}=Bn,{_bin:t}=Bn,n=Bn._paeth;var r={table:function(){const C=new Uint32Array(256);for(let P=0;P<256;P++){let N=P;for(let B=0;B<8;B++)1&N?N=3988292384^N>>>1:N>>>=1;C[P]=N}return C}(),update(C,P,N,B){for(let I=0;I<B;I++)C=r.table[255&(C^P[N+I])]^C>>>8;return C},crc:(C,P,N)=>4294967295^r.update(4294967295,C,P,N)};function i(C,P,N,B){P[N]+=C[0]*B>>4,P[N+1]+=C[1]*B>>4,P[N+2]+=C[2]*B>>4,P[N+3]+=C[3]*B>>4}function o(C){return Math.max(0,Math.min(255,C))}function h(C,P){const N=C[0]-P[0],B=C[1]-P[1],I=C[2]-P[2],U=C[3]-P[3];return N*N+B*B+I*I+U*U}function l(C,P,N,B,I,U,D){D==null&&(D=1);const F=B.length,O=[];for(var M=0;M<F;M++){const $=B[M];O.push([$>>>0&255,$>>>8&255,$>>>16&255,$>>>24&255])}for(M=0;M<F;M++){let $=4294967295;for(var V=0,k=0;k<F;k++){var R=h(O[M],O[k]);k!=M&&R<$&&($=R,V=k)}}const j=new Uint32Array(I.buffer),A=new Int16Array(P*N*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<W.length;M++)W[M]=255*((W[M]+.5)/16-.5);for(let $=0;$<N;$++)for(let H=0;H<P;H++){var L;M=4*($*P+H),D!=2?L=[o(C[M]+A[M]),o(C[M+1]+A[M+1]),o(C[M+2]+A[M+2]),o(C[M+3]+A[M+3])]:(R=W[4*(3&$)+(3&H)],L=[o(C[M]+R),o(C[M+1]+R),o(C[M+2]+R),o(C[M+3]+R)]),V=0;let Y=16777215;for(k=0;k<F;k++){const Q=h(L,O[k]);Q<Y&&(Y=Q,V=k)}const K=O[V],G=[L[0]-K[0],L[1]-K[1],L[2]-K[2],L[3]-K[3]];D==1&&(H!=P-1&&i(G,A,M+4,7),$!=N-1&&(H!=0&&i(G,A,M+4*P-4,3),i(G,A,M+4*P,5),H!=P-1&&i(G,A,M+4*P+4,1))),U[M>>2]=V,j[M>>2]=B[V]}}function a(C,P,N,B,I){I==null&&(I={});const{crc:U}=r,D=t.writeUint,F=t.writeUshort,O=t.writeASCII;let M=8;const V=C.frames.length>1;let k,R=!1,j=33+(V?20:0);if(I.sRGB!=null&&(j+=13),I.pHYs!=null&&(j+=21),I.iCCP!=null&&(k=pako.deflate(I.iCCP),j+=21+k.length+4),C.ctype==3){for(var A=C.plte.length,W=0;W<A;W++)C.plte[W]>>>24!=255&&(R=!0);j+=8+3*A+4+(R?8+1*A+4:0)}for(var L=0;L<C.frames.length;L++)V&&(j+=38),j+=(K=C.frames[L]).cimg.length+12,L!=0&&(j+=4);j+=12;const $=new Uint8Array(j),H=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)$[W]=H[W];if(D($,M,13),M+=4,O($,M,"IHDR"),M+=4,D($,M,P),M+=4,D($,M,N),M+=4,$[M]=C.depth,M++,$[M]=C.ctype,M++,$[M]=0,M++,$[M]=0,M++,$[M]=0,M++,D($,M,U($,M-17,17)),M+=4,I.sRGB!=null&&(D($,M,1),M+=4,O($,M,"sRGB"),M+=4,$[M]=I.sRGB,M++,D($,M,U($,M-5,5)),M+=4),I.iCCP!=null){const G=13+k.length;D($,M,G),M+=4,O($,M,"iCCP"),M+=4,O($,M,"ICC profile"),M+=11,M+=2,$.set(k,M),M+=k.length,D($,M,U($,M-(G+4),G+4)),M+=4}if(I.pHYs!=null&&(D($,M,9),M+=4,O($,M,"pHYs"),M+=4,D($,M,I.pHYs[0]),M+=4,D($,M,I.pHYs[1]),M+=4,$[M]=I.pHYs[2],M++,D($,M,U($,M-13,13)),M+=4),V&&(D($,M,8),M+=4,O($,M,"acTL"),M+=4,D($,M,C.frames.length),M+=4,D($,M,I.loop!=null?I.loop:0),M+=4,D($,M,U($,M-12,12)),M+=4),C.ctype==3){for(D($,M,3*(A=C.plte.length)),M+=4,O($,M,"PLTE"),M+=4,W=0;W<A;W++){const G=3*W,Q=C.plte[W],ee=255&Q,le=Q>>>8&255,te=Q>>>16&255;$[M+G+0]=ee,$[M+G+1]=le,$[M+G+2]=te}if(M+=3*A,D($,M,U($,M-3*A-4,3*A+4)),M+=4,R){for(D($,M,A),M+=4,O($,M,"tRNS"),M+=4,W=0;W<A;W++)$[M+W]=C.plte[W]>>>24&255;M+=A,D($,M,U($,M-A-4,A+4)),M+=4}}let Y=0;for(L=0;L<C.frames.length;L++){var K=C.frames[L];V&&(D($,M,26),M+=4,O($,M,"fcTL"),M+=4,D($,M,Y++),M+=4,D($,M,K.rect.width),M+=4,D($,M,K.rect.height),M+=4,D($,M,K.rect.x),M+=4,D($,M,K.rect.y),M+=4,F($,M,B[L]),M+=2,F($,M,1e3),M+=2,$[M]=K.dispose,M++,$[M]=K.blend,M++,D($,M,U($,M-30,30)),M+=4);const G=K.cimg;D($,M,(A=G.length)+(L==0?0:4)),M+=4;const Q=M;O($,M,L==0?"IDAT":"fdAT"),M+=4,L!=0&&(D($,M,Y++),M+=4),$.set(G,M),M+=A,D($,M,U($,Q,M-Q)),M+=4}return D($,M,0),M+=4,O($,M,"IEND"),M+=4,D($,M,U($,M-4,4)),M+=4,$.buffer}function f(C,P,N){for(let B=0;B<C.frames.length;B++){const I=C.frames[B];I.rect.width;const U=I.rect.height,D=new Uint8Array(U*I.bpl+U);I.cimg=d(I.img,U,I.bpp,I.bpl,D,P,N)}}function u(C,P,N,B,I){const U=I[0],D=I[1],F=I[2],O=I[3],M=I[4],V=I[5];let k=6,R=8,j=255;for(var A=0;A<C.length;A++){const ce=new Uint8Array(C[A]);for(var W=ce.length,L=0;L<W;L+=4)j&=ce[L+3]}const $=j!=255,H=function(ne,z,X,J,oe,q){const re=[];for(var ue=0;ue<ne.length;ue++){const ze=new Uint8Array(ne[ue]),Je=new Uint32Array(ze.buffer);var ge;let Ee=0,Pt=0,wt=z,It=X,ri=J?1:0;if(ue!=0){const ii=q||J||ue==1||re[ue-2].dispose!=0?1:2;let sc=0,fa=1e9;for(let oi=0;oi<ii;oi++){var Ce=new Uint8Array(ne[ue-1-oi]);const Nd=new Uint32Array(ne[ue-1-oi]);let In=z,Cn=X,kr=-1,si=-1;for(let Pr=0;Pr<X;Pr++)for(let Or=0;Or<z;Or++)Je[Ae=Pr*z+Or]!=Nd[Ae]&&(Or<In&&(In=Or),Or>kr&&(kr=Or),Pr<Cn&&(Cn=Pr),Pr>si&&(si=Pr));kr==-1&&(In=Cn=kr=si=0),oe&&((1&In)==1&&In--,(1&Cn)==1&&Cn--);const ac=(kr-In+1)*(si-Cn+1);ac<fa&&(fa=ac,sc=oi,Ee=In,Pt=Cn,wt=kr-In+1,It=si-Cn+1)}Ce=new Uint8Array(ne[ue-1-sc]),sc==1&&(re[ue-1].dispose=2),ge=new Uint8Array(wt*It*4),e(Ce,z,X,ge,wt,It,-Ee,-Pt,0),ri=e(ze,z,X,ge,wt,It,-Ee,-Pt,3)?1:0,ri==1?c(ze,z,X,ge,{x:Ee,y:Pt,width:wt,height:It}):e(ze,z,X,ge,wt,It,-Ee,-Pt,0)}else ge=ze.slice(0);re.push({rect:{x:Ee,y:Pt,width:wt,height:It},img:ge,blend:ri,dispose:0})}if(J)for(ue=0;ue<re.length;ue++){if((Be=re[ue]).blend==1)continue;const ze=Be.rect,Je=re[ue-1].rect,Ee=Math.min(ze.x,Je.x),Pt=Math.min(ze.y,Je.y),wt={x:Ee,y:Pt,width:Math.max(ze.x+ze.width,Je.x+Je.width)-Ee,height:Math.max(ze.y+ze.height,Je.y+Je.height)-Pt};re[ue-1].dispose=1,ue-1!=0&&s(ne,z,X,re,ue-1,wt,oe),s(ne,z,X,re,ue,wt,oe)}let Te=0;if(ne.length!=1)for(var Ae=0;Ae<re.length;Ae++){var Be;Te+=(Be=re[Ae]).rect.width*Be.rect.height}return re}(C,P,N,U,D,F),Y={},K=[],G=[];if(B!=0){const ce=[];for(L=0;L<H.length;L++)ce.push(H[L].img.buffer);const ne=function(oe){let q=0;for(var re=0;re<oe.length;re++)q+=oe[re].byteLength;const ue=new Uint8Array(q);let ge=0;for(re=0;re<oe.length;re++){const Ce=new Uint8Array(oe[re]),Te=Ce.length;for(let Ae=0;Ae<Te;Ae+=4){let Be=Ce[Ae],ze=Ce[Ae+1],Je=Ce[Ae+2];const Ee=Ce[Ae+3];Ee==0&&(Be=ze=Je=0),ue[ge+Ae]=Be,ue[ge+Ae+1]=ze,ue[ge+Ae+2]=Je,ue[ge+Ae+3]=Ee}ge+=Te}return ue.buffer}(ce),z=g(ne,B);for(L=0;L<z.plte.length;L++)K.push(z.plte[L].est.rgba);let X=0;for(L=0;L<H.length;L++){const J=(ee=H[L]).img.length;var Q=new Uint8Array(z.inds.buffer,X>>2,J>>2);G.push(Q);const oe=new Uint8Array(z.abuf,X,J);V&&l(ee.img,ee.rect.width,ee.rect.height,K,oe,Q),ee.img.set(oe),X+=J}}else for(A=0;A<H.length;A++){var ee=H[A];const ce=new Uint32Array(ee.img.buffer);var le=ee.rect.width;for(W=ce.length,Q=new Uint8Array(W),G.push(Q),L=0;L<W;L++){const ne=ce[L];if(L!=0&&ne==ce[L-1])Q[L]=Q[L-1];else if(L>le&&ne==ce[L-le])Q[L]=Q[L-le];else{let z=Y[ne];if(z==null&&(Y[ne]=z=K.length,K.push(ne),K.length>=300))break;Q[L]=z}}}const te=K.length;for(te<=256&&M==0&&(R=te<=2?1:te<=4?2:te<=16?4:8,R=Math.max(R,O)),A=0;A<H.length;A++){(ee=H[A]).rect.x,ee.rect.y,le=ee.rect.width;const ce=ee.rect.height;let ne=ee.img;new Uint32Array(ne.buffer);let z=4*le,X=4;if(te<=256&&M==0){z=Math.ceil(R*le/8);var Z=new Uint8Array(z*ce);const J=G[A];for(let oe=0;oe<ce;oe++){L=oe*z;const q=oe*le;if(R==8)for(var ie=0;ie<le;ie++)Z[L+ie]=J[q+ie];else if(R==4)for(ie=0;ie<le;ie++)Z[L+(ie>>1)]|=J[q+ie]<<4-4*(1&ie);else if(R==2)for(ie=0;ie<le;ie++)Z[L+(ie>>2)]|=J[q+ie]<<6-2*(3&ie);else if(R==1)for(ie=0;ie<le;ie++)Z[L+(ie>>3)]|=J[q+ie]<<7-1*(7&ie)}ne=Z,k=3,X=1}else if($==0&&H.length==1){Z=new Uint8Array(le*ce*3);const J=le*ce;for(L=0;L<J;L++){const oe=3*L,q=4*L;Z[oe]=ne[q],Z[oe+1]=ne[q+1],Z[oe+2]=ne[q+2]}ne=Z,k=2,X=3,z=3*le}ee.img=ne,ee.bpl=z,ee.bpp=X}return{ctype:k,depth:R,plte:K,frames:H}}function s(C,P,N,B,I,U,D){const F=Uint8Array,O=Uint32Array,M=new F(C[I-1]),V=new O(C[I-1]),k=I+1<C.length?new F(C[I+1]):null,R=new F(C[I]),j=new O(R.buffer);let A=P,W=N,L=-1,$=-1;for(let Y=0;Y<U.height;Y++)for(let K=0;K<U.width;K++){const G=U.x+K,Q=U.y+Y,ee=Q*P+G,le=j[ee];le==0||B[I-1].dispose==0&&V[ee]==le&&(k==null||k[4*ee+3]!=0)||(G<A&&(A=G),G>L&&(L=G),Q<W&&(W=Q),Q>$&&($=Q))}L==-1&&(A=W=L=$=0),D&&((1&A)==1&&A--,(1&W)==1&&W--),U={x:A,y:W,width:L-A+1,height:$-W+1};const H=B[I];H.rect=U,H.blend=1,H.img=new Uint8Array(U.width*U.height*4),B[I-1].dispose==0?(e(M,P,N,H.img,U.width,U.height,-U.x,-U.y,0),c(R,P,N,H.img,U)):e(R,P,N,H.img,U.width,U.height,-U.x,-U.y,0)}function c(C,P,N,B,I){e(C,P,N,B,I.width,I.height,-I.x,-I.y,2)}function d(C,P,N,B,I,U,D){const F=[];let O,M=[0,1,2,3,4];U!=-1?M=[U]:(P*B>5e5||N==1)&&(M=[0]),D&&(O={level:0});const V=Rj;for(var k=0;k<M.length;k++){for(let A=0;A<P;A++)p(I,C,A,B,N,M[k]);F.push(V.deflate(I,O))}let R,j=1e9;for(k=0;k<F.length;k++)F[k].length<j&&(R=k,j=F[k].length);return F[R]}function p(C,P,N,B,I,U){const D=N*B;let F=D+N;if(C[F]=U,F++,U==0)if(B<500)for(var O=0;O<B;O++)C[F+O]=P[D+O];else C.set(new Uint8Array(P.buffer,D,B),F);else if(U==1){for(O=0;O<I;O++)C[F+O]=P[D+O];for(O=I;O<B;O++)C[F+O]=P[D+O]-P[D+O-I]+256&255}else if(N==0){for(O=0;O<I;O++)C[F+O]=P[D+O];if(U==2)for(O=I;O<B;O++)C[F+O]=P[D+O];if(U==3)for(O=I;O<B;O++)C[F+O]=P[D+O]-(P[D+O-I]>>1)+256&255;if(U==4)for(O=I;O<B;O++)C[F+O]=P[D+O]-n(P[D+O-I],0,0)+256&255}else{if(U==2)for(O=0;O<B;O++)C[F+O]=P[D+O]+256-P[D+O-B]&255;if(U==3){for(O=0;O<I;O++)C[F+O]=P[D+O]+256-(P[D+O-B]>>1)&255;for(O=I;O<B;O++)C[F+O]=P[D+O]+256-(P[D+O-B]+P[D+O-I]>>1)&255}if(U==4){for(O=0;O<I;O++)C[F+O]=P[D+O]+256-n(0,P[D+O-B],0)&255;for(O=I;O<B;O++)C[F+O]=P[D+O]+256-n(P[D+O-I],P[D+O-B],P[D+O-I-B])&255}}}function g(C,P){const N=new Uint8Array(C),B=N.slice(0),I=new Uint32Array(B.buffer),U=m(B,P),D=U[0],F=U[1],O=N.length,M=new Uint8Array(O>>2);let V;if(N.length<2e7)for(var k=0;k<O;k+=4)V=v(D,R=N[k]*(1/255),j=N[k+1]*(1/255),A=N[k+2]*(1/255),W=N[k+3]*(1/255)),M[k>>2]=V.ind,I[k>>2]=V.est.rgba;else for(k=0;k<O;k+=4){var R=N[k]*.00392156862745098,j=N[k+1]*(1/255),A=N[k+2]*(1/255),W=N[k+3]*(1/255);for(V=D;V.left;)V=y(V.est,R,j,A,W)<=0?V.left:V.right;M[k>>2]=V.ind,I[k>>2]=V.est.rgba}return{abuf:B.buffer,inds:M,plte:F}}function m(C,P,N){N==null&&(N=1e-4);const B=new Uint32Array(C.buffer),I={i0:0,i1:C.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=S(C,I.i0,I.i1),I.est=_(I.bst);const U=[I];for(;U.length<P;){let F=0,O=0;for(var D=0;D<U.length;D++)U[D].est.L>F&&(F=U[D].est.L,O=D);if(F<N)break;const M=U[O],V=w(C,B,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=V||M.i1<=V){M.est.L=0;continue}const k={i0:M.i0,i1:V,bst:null,est:null,tdst:0,left:null,right:null};k.bst=S(C,k.i0,k.i1),k.est=_(k.bst);const R={i0:V,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(R.bst={R:[],m:[],N:M.bst.N-k.bst.N},D=0;D<16;D++)R.bst.R[D]=M.bst.R[D]-k.bst.R[D];for(D=0;D<4;D++)R.bst.m[D]=M.bst.m[D]-k.bst.m[D];R.est=_(R.bst),M.left=k,M.right=R,U[O]=k,U.push(R)}for(U.sort((F,O)=>O.bst.N-F.bst.N),D=0;D<U.length;D++)U[D].ind=D;return[I,U]}function v(C,P,N,B,I){if(C.left==null)return C.tdst=function(k,R,j,A,W){const L=R-k[0],$=j-k[1],H=A-k[2],Y=W-k[3];return L*L+$*$+H*H+Y*Y}(C.est.q,P,N,B,I),C;const U=y(C.est,P,N,B,I);let D=C.left,F=C.right;U>0&&(D=C.right,F=C.left);const O=v(D,P,N,B,I);if(O.tdst<=U*U)return O;const M=v(F,P,N,B,I);return M.tdst<O.tdst?M:O}function y(C,P,N,B,I){const{e:U}=C;return U[0]*P+U[1]*N+U[2]*B+U[3]*I-C.eMq}function w(C,P,N,B,I,U){for(B-=4;N<B;){for(;b(C,N,I)<=U;)N+=4;for(;b(C,B,I)>U;)B-=4;if(N>=B)break;const D=P[N>>2];P[N>>2]=P[B>>2],P[B>>2]=D,N+=4,B-=4}for(;b(C,N,I)>U;)N-=4;return N+4}function b(C,P,N){return C[P]*N[0]+C[P+1]*N[1]+C[P+2]*N[2]+C[P+3]*N[3]}function S(C,P,N){const B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],U=N-P>>2;for(let D=P;D<N;D+=4){const F=C[D]*.00392156862745098,O=C[D+1]*(1/255),M=C[D+2]*(1/255),V=C[D+3]*(1/255);I[0]+=F,I[1]+=O,I[2]+=M,I[3]+=V,B[0]+=F*F,B[1]+=F*O,B[2]+=F*M,B[3]+=F*V,B[5]+=O*O,B[6]+=O*M,B[7]+=O*V,B[10]+=M*M,B[11]+=M*V,B[15]+=V*V}return B[4]=B[1],B[8]=B[2],B[9]=B[6],B[12]=B[3],B[13]=B[7],B[14]=B[11],{R:B,m:I,N:U}}function _(C){const{R:P}=C,{m:N}=C,{N:B}=C,I=N[0],U=N[1],D=N[2],F=N[3],O=B==0?0:1/B,M=[P[0]-I*I*O,P[1]-I*U*O,P[2]-I*D*O,P[3]-I*F*O,P[4]-U*I*O,P[5]-U*U*O,P[6]-U*D*O,P[7]-U*F*O,P[8]-D*I*O,P[9]-D*U*O,P[10]-D*D*O,P[11]-D*F*O,P[12]-F*I*O,P[13]-F*U*O,P[14]-F*D*O,P[15]-F*F*O],V=M,k=E;let R=[Math.random(),Math.random(),Math.random(),Math.random()],j=0,A=0;if(B!=0)for(let L=0;L<16&&(R=k.multVec(V,R),A=Math.sqrt(k.dot(R,R)),R=k.sml(1/A,R),!(L!=0&&Math.abs(A-j)<1e-9));L++)j=A;const W=[I*O,U*O,D*O,F*O];return{Cov:M,q:W,e:R,L:j,eMq255:k.dot(k.sml(255,W),R),eMq:k.dot(R,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var E={multVec:(C,P)=>[C[0]*P[0]+C[1]*P[1]+C[2]*P[2]+C[3]*P[3],C[4]*P[0]+C[5]*P[1]+C[6]*P[2]+C[7]*P[3],C[8]*P[0]+C[9]*P[1]+C[10]*P[2]+C[11]*P[3],C[12]*P[0]+C[13]*P[1]+C[14]*P[2]+C[15]*P[3]],dot:(C,P)=>C[0]*P[0]+C[1]*P[1]+C[2]*P[2]+C[3]*P[3],sml:(C,P)=>[C*P[0],C*P[1],C*P[2],C*P[3]]};Bn.encode=function(P,N,B,I,U,D,F){I==null&&(I=0),F==null&&(F=!1);const O=u(P,N,B,I,[!1,!1,!1,0,F,!1]);return f(O,-1),a(O,N,B,U,D)},Bn.encodeLL=function(P,N,B,I,U,D,F,O){const M={ctype:0+(I==1?0:2)+(U==0?0:4),depth:D,frames:[]},V=(I+U)*D,k=V*N;for(let R=0;R<P.length;R++)M.frames.push({rect:{x:0,y:0,width:N,height:B},img:new Uint8Array(P[R]),blend:0,dispose:1,bpp:Math.ceil(V/8),bpl:Math.ceil(k/8)});return f(M,0,!0),a(M,N,B,F,O)},Bn.encode.compress=u,Bn.encode.dither=l,Bn.quantize=g,Bn.quantize.getKDtree=m,Bn.quantize.getNearest=v})();const UE={toArrayBuffer(e,t){const n=e.width,r=e.height,i=n<<2,o=e.getContext("2d").getImageData(0,0,n,r),h=new Uint32Array(o.data.buffer),l=(32*n+31)/32<<2,a=l*r,f=122+a,u=new ArrayBuffer(f),s=new DataView(u),c=1<<20;let d,p,g,m,v=c,y=0,w=0,b=0;function S(C){s.setUint16(w,C,!0),w+=2}function _(C){s.setUint32(w,C,!0),w+=4}function E(C){w+=C}S(19778),_(f),E(4),_(122),_(108),_(n),_(-r>>>0),S(1),S(32),_(3),_(a),_(2835),_(2835),E(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function C(){for(;y<r&&v>0;){for(m=122+y*l,d=0;d<i;)v--,p=h[b++],g=p>>>24,s.setUint32(m+d,p<<8|g),d+=4;y++}b<h.length?(v=c,setTimeout(C,UE._dly)):t(u)}()},toBlob(e,t){this.toArrayBuffer(e,n=>{t(new Blob([n],{type:"image/bmp"}))})},_dly:9};var tn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Mj={[tn.CHROME]:16384,[tn.FIREFOX]:11180,[tn.DESKTOP_SAFARI]:16384,[tn.IE]:8192,[tn.IOS]:4096,[tn.ETC]:8192};const Fv=typeof window<"u",VE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,yf=Fv&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Dj=(Fv||VE)&&(yf&&yf.getOriginalSymbol(window,"File")||typeof File<"u"&&File),HE=(Fv||VE)&&(yf&&yf.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Lv(e,t,n=Date.now()){return new Promise(r=>{const i=e.split(","),o=i[0].match(/:(.*?);/)[1],h=globalThis.atob(i[1]);let l=h.length;const a=new Uint8Array(l);for(;l--;)a[l]=h.charCodeAt(l);const f=new Blob([a],{type:o});f.name=t,f.lastModified=n,r(f)})}function WE(e){return new Promise((t,n)=>{const r=new HE;r.onload=()=>t(r.result),r.onerror=i=>n(i),r.readAsDataURL(e)})}function YE(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=i=>n(i),r.src=e})}function po(){if(po.cachedResult!==void 0)return po.cachedResult;let e=tn.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=tn.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=tn.IOS:/Safari/i.test(t)?e=tn.DESKTOP_SAFARI:/Firefox/i.test(t)?e=tn.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=tn.IE),po.cachedResult=e,po.cachedResult}function XE(e,t){const n=po(),r=Mj[n];let i=e,o=t,h=i*o;const l=i>o?o/i:i/o;for(;h>r*r;){const a=(r+i)/2,f=(r+o)/2;a<f?(o=f,i=f*l):(o=a*l,i=a),h=i*o}return{width:i,height:o}}function Md(e,t){let n,r;try{if(n=new OffscreenCanvas(e,t),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=e,n.height=t,[n,r]}function GE(e,t){const{width:n,height:r}=XE(e.width,e.height),[i,o]=Md(n,r);return t&&/jpe?g/.test(t)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(e,0,0,i.width,i.height),i}function mu(){return mu.cachedResult!==void 0||(mu.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),mu.cachedResult}function wf(e,t={}){return new Promise(function(n,r){let i,o;var h=function(){try{return o=GE(i,t.fileType||e.type),n([i,o])}catch(a){return r(a)}},l=function(a){try{var f=function(u){try{throw u}catch(s){return r(s)}};try{let u;return WE(e).then(function(s){try{return u=s,YE(u).then(function(c){try{return i=c,function(){try{return h()}catch(d){return r(d)}}()}catch(d){return f(d)}},f)}catch(c){return f(c)}},f)}catch(u){f(u)}}catch(u){return r(u)}};try{if(mu()||[tn.DESKTOP_SAFARI,tn.MOBILE_SAFARI].includes(po()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(a){try{return i=a,h()}catch{return l()}},l)}catch{l()}})}function bf(e,t,n,r,i=1){return new Promise(function(o,h){let l;if(t==="image/png"){let s,c,d;return s=e.getContext("2d"),{data:c}=s.getImageData(0,0,e.width,e.height),d=Bn.encode([c.buffer],e.width,e.height,4096*i),l=new Blob([d],{type:t}),l.name=n,l.lastModified=r,a.call(this)}{let s=function(){return a.call(this)};var f=s;if(t==="image/bmp")return new Promise(c=>UE.toBlob(e,c)).then((function(c){try{return l=c,l.name=n,l.lastModified=r,s.call(this)}catch(d){return h(d)}}).bind(this),h);{let c=function(){return s.call(this)};var u=c;if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:i}).then((function(d){try{return l=d,l.name=n,l.lastModified=r,c.call(this)}catch(p){return h(p)}}).bind(this),h);{let d;return d=e.toDataURL(t,i),Lv(d,n,r).then((function(p){try{return l=p,c.call(this)}catch(g){return h(g)}}).bind(this),h)}}}function a(){return o(l)}})}function cr(e){e.width=0,e.height=0}function fs(){return new Promise(function(e,t){let n,r,i,o;return fs.cachedResult!==void 0?e(fs.cachedResult):Lv("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(h){try{return n=h,wf(n).then(function(l){try{return r=l[1],bf(r,n.type,n.name,n.lastModified).then(function(a){try{return i=a,cr(r),wf(i).then(function(f){try{return o=f[0],fs.cachedResult=o.width===1&&o.height===2,e(fs.cachedResult)}catch(u){return t(u)}},t)}catch(f){return t(f)}},t)}catch(a){return t(a)}},t)}catch(l){return t(l)}},t)})}function KE(e){return new Promise((t,n)=>{const r=new HE;r.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return t(-2);const h=o.byteLength;let l=2;for(;l<h;){if(o.getUint16(l+2,!1)<=8)return t(-1);const a=o.getUint16(l,!1);if(l+=2,a==65505){if(o.getUint32(l+=2,!1)!=1165519206)return t(-1);const f=o.getUint16(l+=6,!1)==18761;l+=o.getUint32(l+4,f);const u=o.getUint16(l,f);l+=2;for(let s=0;s<u;s++)if(o.getUint16(l+12*s,f)==274)return t(o.getUint16(l+12*s+8,f))}else{if((65280&a)!=65280)break;l+=o.getUint16(l,!1)}}return t(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(e)})}function qE(e,t){const{width:n}=e,{height:r}=e,{maxWidthOrHeight:i}=t;let o,h=e;return isFinite(i)&&(n>i||r>i)&&([h,o]=Md(n,r),n>r?(h.width=i,h.height=r/n*i):(h.width=n/r*i,h.height=i),o.drawImage(e,0,0,h.width,h.height),cr(e)),h}function ZE(e,t){const{width:n}=e,{height:r}=e,[i,o]=Md(n,r);switch(t>4&&t<9?(i.width=r,i.height=n):(i.width=n,i.height=r),t){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(e,0,0,n,r),cr(e),i}function W1(e,t,n=0){return new Promise(function(r,i){let o,h,l,a,f,u,s,c,d,p,g,m,v,y,w,b,S,_,E,C;function P(B=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;o+=B,t.onProgress(Math.min(o,100))}function N(B){if(t.signal&&t.signal.aborted)throw t.signal.reason;o=Math.min(Math.max(B,o),100),t.onProgress(o)}return o=n,h=t.maxIteration||10,l=1024*t.maxSizeMB*1024,P(),wf(e,t).then((function(B){try{return[,a]=B,P(),f=qE(a,t),P(),new Promise(function(I,U){var D;if(!(D=t.exifOrientation))return KE(e).then((function(O){try{return D=O,F.call(this)}catch(M){return U(M)}}).bind(this),U);function F(){return I(D)}return F.call(this)}).then((function(I){try{return u=I,P(),fs().then((function(U){try{return s=U?f:ZE(f,u),P(),c=t.initialQuality||1,d=t.fileType||e.type,bf(s,d,e.name,e.lastModified,c).then((function(D){try{{let V=function(){if(h--&&(w>l||w>v)){let R,j;return R=C?.95*E.width:E.width,j=C?.95*E.height:E.height,[S,_]=Md(R,j),_.drawImage(E,0,0,R,j),c*=d==="image/png"?.85:.95,bf(S,d,e.name,e.lastModified,c).then(function(A){try{return b=A,cr(E),E=S,w=b.size,N(Math.min(99,Math.floor((y-w)/(y-l)*100))),V}catch(W){return i(W)}},i)}return[1]},k=function(){return cr(E),cr(S),cr(f),cr(s),cr(a),N(100),r(b)};var O=V,M=k;if(p=D,P(),g=p.size>l,m=p.size>e.size,!g&&!m)return N(100),r(p);var F;return v=e.size,y=p.size,w=y,E=s,C=!t.alwaysKeepResolution&&g,(F=(function(R){for(;R;){if(R.then)return void R.then(F,i);try{if(R.pop){if(R.length)return R.pop()?k.call(this):R;R=V}else R=R.call(this)}catch(j){return i(j)}}}).bind(this))(V)}}catch(V){return i(V)}}).bind(this),i)}catch(D){return i(D)}}).bind(this),i)}catch(U){return i(U)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const Nj=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Hh;function Fj(e,t){return new Promise((n,r)=>{Hh||(Hh=function(h){const l=[];return l.push(h),URL.createObjectURL(new Blob(l))}(Nj));const i=new Worker(Hh);i.addEventListener("message",function(h){if(t.signal&&t.signal.aborted)i.terminate();else if(h.data.progress===void 0){if(h.data.error)return r(new Error(h.data.error)),void i.terminate();n(h.data.file),i.terminate()}else t.onProgress(h.data.progress)}),i.addEventListener("error",r),t.signal&&t.signal.addEventListener("abort",()=>{r(t.signal.reason),i.terminate()}),i.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})})}function Mt(e,t){return new Promise(function(n,r){let i,o,h,l,a,f;if(i={...t},h=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,a=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=d=>{h=d,typeof l=="function"&&l(h)},!(e instanceof Blob||e instanceof Dj))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!a||typeof Worker!="function"||f)return W1(e,i).then((function(d){try{return o=d,c.call(this)}catch(p){return r(p)}}).bind(this),r);var u=(function(){try{return c.call(this)}catch(d){return r(d)}}).bind(this),s=function(d){try{return W1(e,i).then(function(p){try{return o=p,u()}catch(g){return r(g)}},r)}catch(p){return r(p)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Fj(e,i).then(function(d){try{return o=d,u()}catch{return s()}},s)}catch{s()}function c(){try{o.name=e.name,o.lastModified=e.lastModified}catch{}try{i.preserveExif&&e.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(o=zE(e,o))}catch{}return n(o)}})}Mt.getDataUrlFromFile=WE,Mt.getFilefromDataUrl=Lv,Mt.loadImage=YE,Mt.drawImageInCanvas=GE,Mt.drawFileInCanvas=wf,Mt.canvasToFile=bf,Mt.getExifOrientation=KE,Mt.handleMaxWidthOrHeight=qE,Mt.followExifOrientation=ZE,Mt.cleanupCanvasMemory=cr,Mt.isAutoOrientationInBrowser=fs,Mt.approximateBelowMaximumCanvasSizeOfBrowser=XE,Mt.copyExifWithoutOrientation=zE,Mt.getBrowserName=po,Mt.version="2.0.2";function Lj(e){const{onSelection:t}=e,{t:n}=gd(),[r]=x.useState(`file-upload-${Math.random().toString()}`),i=Pj(),o=async h=>{if(!(!h||!h.type.match("image.*")))try{if(h.size>20*1024*1024)throw new Error("file too large");const f=await Mt(h,{maxWidthOrHeight:1536,useWebWorker:!0});t(f)}catch(a){alert(`error: ${a.message}`)}};return T.jsx("div",{className:"absolute flex w-screen h-screen justify-center items-center pointer-events-none",children:T.jsx("label",{htmlFor:r,className:"grid bg-background border-[2px] border-[dashed] rounded-lg min-w-[600px] hover:bg-primary hover:text-primary-foreground pointer-events-auto",children:T.jsxs("div",{className:"grid p-16 w-full h-full",onDragOver:h=>{h.stopPropagation(),h.preventDefault()},children:[T.jsx("input",{className:"hidden",id:r,name:r,type:"file",onChange:h=>{var a;const l=(a=h.currentTarget.files)==null?void 0:a[0];l&&o(l)},accept:"image/png, image/jpeg"}),T.jsx("p",{className:"text-center",children:i==="desktop"?n("Image load"):"Tap here to load your picture"})]})})})}const Ij=["image/jpeg","image/png","image/webp","image/bmp","image/tiff"];function jj(){const[e,t,n,r]=Xe(s=>[s.file,s.updateAppState,s.setServerConfig,s.setFile]),i=mL();x.useEffect(()=>{t({windowSize:i})},[i]);const o=x.useRef(0),h=x.useCallback(s=>{s.preventDefault(),s.stopPropagation()},[]),l=x.useCallback(s=>{s.preventDefault(),s.stopPropagation(),o.current+=1},[]),a=x.useCallback(s=>{s.preventDefault(),s.stopPropagation(),o.current-=1,o.current>0},[]),f=x.useCallback(s=>{if(s.preventDefault(),s.stopPropagation(),s.dataTransfer.files&&s.dataTransfer.files.length>0){if(!(s.dataTransfer.files.length>1)){const c=s.dataTransfer.files[0],d=c.type;Ij.includes(d)&&r(c)}s.dataTransfer.clearData()}},[]),u=x.useCallback(s=>{if(!s.clipboardData)return;const c=s.clipboardData.items,d=[].slice.call(c).filter(m=>m.type.indexOf("image")!==-1);if(d.length===0)return;s.preventDefault(),s.stopPropagation();const g=d[0].getAsFile();g&&r(g)},[]);return x.useEffect(()=>(window.addEventListener("dragenter",l),window.addEventListener("dragleave",a),window.addEventListener("dragover",h),window.addEventListener("drop",f),window.addEventListener("paste",u),function(){window.removeEventListener("dragenter",l),window.removeEventListener("dragleave",a),window.removeEventListener("dragover",h),window.removeEventListener("drop",f),window.removeEventListener("paste",u)})),T.jsxs("main",{className:"flex min-h-screen flex-col items-center justify-between w-full bg-[radial-gradient(circle_at_1px_1px,_#8e8e8e8e_1px,_transparent_0)] [background-size:20px_20px] bg-repeat",children:[T.jsx(t3,{}),T.jsx(jF,{}),T.jsx(kj,{}),e?T.jsx(T.Fragment,{}):T.jsx(Lj,{onSelection:async s=>{r(s)}})]})}var xf=["light","dark"],Iv="(prefers-color-scheme: dark)",Bj=typeof window>"u",QE=x.createContext(void 0),zj=e=>x.useContext(QE)?e.children:x.createElement(Vj,{...e}),Uj=["light","dark"],Vj=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:o=Uj,defaultTheme:h=n?"system":"light",attribute:l="data-theme",value:a,children:f,nonce:u})=>{let[s,c]=x.useState(()=>Y1(i,h)),[d,p]=x.useState(()=>Y1(i)),g=a?Object.values(a):o,m=x.useCallback(b=>{let S=b;if(!S)return;b==="system"&&n&&(S=X1());let _=a?a[S]:S,E=t?Wj():null,C=document.documentElement;if(l==="class"?(C.classList.remove(...g),_&&C.classList.add(_)):_?C.setAttribute(l,_):C.removeAttribute(l),r){let P=xf.includes(h)?h:null,N=xf.includes(S)?S:P;C.style.colorScheme=N}E==null||E()},[]),v=x.useCallback(b=>{let S=typeof b=="function"?b(b):b;c(S);try{localStorage.setItem(i,S)}catch{}},[e]),y=x.useCallback(b=>{let S=X1(b);p(S),s==="system"&&n&&!e&&m("system")},[s,e]);x.useEffect(()=>{let b=window.matchMedia(Iv);return b.addListener(y),y(b),()=>b.removeListener(y)},[y]),x.useEffect(()=>{let b=S=>{if(S.key!==i)return;let _=S.newValue||h;v(_)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[v]),x.useEffect(()=>{m(e??s)},[e,s]);let w=x.useMemo(()=>({theme:s,setTheme:v,forcedTheme:e,resolvedTheme:s==="system"?d:s,themes:n?[...o,"system"]:o,systemTheme:n?d:void 0}),[s,v,e,d,n,o]);return x.createElement(QE.Provider,{value:w},x.createElement(Hj,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:i,themes:o,defaultTheme:h,attribute:l,value:a,children:f,attrs:g,nonce:u}),f)},Hj=x.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:h,attrs:l,nonce:a})=>{let f=o==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,s=i?xf.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",c=(p,g=!1,m=!0)=>{let v=h?h[p]:p,y=g?p+"|| ''":`'${v}'`,w="";return i&&m&&!g&&xf.includes(p)&&(w+=`d.style.colorScheme = '${p}';`),n==="class"?g||v?w+=`c.add(${y})`:w+="null":v&&(w+=`d[s](n,${y})`),w},d=e?`!function(){${u}${c(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${f})){var t='${Iv}',m=window.matchMedia(t);if(m.media!==t||m.matches){${c("dark")}}else{${c("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${c(h?"x[e]":"e",!0)}}${f?"":"else{"+c(o,!1,!1)+"}"}${s}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${c(h?"x[e]":"e",!0)}}else{${c(o,!1,!1)};}${s}}catch(t){}}();`;return x.createElement("script",{nonce:a,dangerouslySetInnerHTML:{__html:d}})}),Y1=(e,t)=>{if(Bj)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},Wj=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},X1=e=>(e||(e=window.matchMedia(Iv)),e.matches?"dark":"light");const Yj={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Sf{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Yj,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Sf(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Sf(this.logger,t)}}var yr=new Sf;class Dd{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(h=>{let[l,a]=h;for(let f=0;f<a;f++)l(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(h=>{let[l,a]=h;for(let f=0;f<a;f++)l.apply(l,[t,...r])})}}function Pa(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n}function G1(e){return e==null?"":""+e}function Xj(e,t,n){e.forEach(r=>{t[r]&&(n[r]=t[r])})}const Gj=/###/g;function tl(e,t,n){function r(l){return l&&l.indexOf("###")>-1?l.replace(Gj,"."):l}function i(){return!e||typeof e=="string"}const o=typeof t!="string"?t:t.split(".");let h=0;for(;h<o.length-1;){if(i())return{};const l=r(o[h]);!e[l]&&n&&(e[l]=new n),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={},++h}return i()?{}:{obj:e,k:r(o[h])}}function K1(e,t,n){const{obj:r,k:i}=tl(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let o=t[t.length-1],h=t.slice(0,t.length-1),l=tl(e,h,Object);for(;l.obj===void 0&&h.length;)o=`${h[h.length-1]}.${o}`,h=h.slice(0,h.length-1),l=tl(e,h,Object),l&&l.obj&&typeof l.obj[`${l.k}.${o}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=n}function Kj(e,t,n,r){const{obj:i,k:o}=tl(e,t,Object);i[o]=i[o]||[],i[o].push(n)}function _f(e,t){const{obj:n,k:r}=tl(e,t);if(n)return n[r]}function qj(e,t,n){const r=_f(e,n);return r!==void 0?r:_f(t,n)}function JE(e,t,n){for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):JE(e[r],t[r],n):e[r]=t[r]);return e}function Go(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Zj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Qj(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>Zj[t]):e}class Jj{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const e7=[" ",",","?","!",";"],t7=new Jj(20);function n7(e,t,n){t=t||"",n=n||"";const r=e7.filter(h=>t.indexOf(h)<0&&n.indexOf(h)<0);if(r.length===0)return!0;const i=t7.getRegExp(`(${r.map(h=>h==="?"?"\\?":h).join("|")})`);let o=!i.test(e);if(!o){const h=e.indexOf(n);h>0&&!i.test(e.substring(0,h))&&(o=!0)}return o}function Rm(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let h,l="";for(let a=o;a<r.length;++a)if(a!==o&&(l+=n),l+=r[a],h=i[l],h!==void 0){if(["string","number","boolean"].indexOf(typeof h)>-1&&a<r.length-1)continue;o+=a-o+1;break}i=h}return i}function Cf(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class q1 extends Dd{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,h=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,n],r&&(Array.isArray(r)?l.push(...r):typeof r=="string"&&o?l.push(...r.split(o)):l.push(r)));const a=_f(this.data,l);return!a&&!n&&!r&&t.indexOf(".")>-1&&(t=l[0],n=l[1],r=l.slice(2).join(".")),a||!h||typeof r!="string"?a:Rm(this.data&&this.data[t]&&this.data[t][n],r,o)}addResource(t,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const h=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[t,n];r&&(l=l.concat(h?r.split(h):r)),t.indexOf(".")>-1&&(l=t.split("."),i=n,n=l[1]),this.addNamespaces(n),K1(this.data,l,i),o.silent||this.emit("added",t,n,r,i)}addResources(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(typeof r[o]=="string"||Array.isArray(r[o]))&&this.addResource(t,n,o,r[o],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,o){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[t,n];t.indexOf(".")>-1&&(l=t.split("."),i=r,r=n,n=l[1]),this.addNamespaces(n);let a=_f(this.data,l)||{};h.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?JE(a,r,o):a={...a,...r},K1(this.data,l,a),h.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var eT={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(o=>{this.processors[o]&&(t=this.processors[o].process(t,n,r,i))}),t}};const Z1={};class Ef extends Dd{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Xj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=yr.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const h=r&&t.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!n7(t,r,i);if(h&&!l){const a=t.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:t,namespaces:o};const f=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),t=f.join(i)}return typeof o=="string"&&(o=[o]),{key:t,namespaces:o}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:h,namespaces:l}=this.extractFromKey(t[t.length-1],n),a=l[l.length-1],f=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f&&f.toLowerCase()==="cimode"){if(u){const b=n.nsSeparator||this.options.nsSeparator;return i?{res:`${a}${b}${h}`,usedKey:h,exactUsedKey:h,usedLng:f,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:`${a}${b}${h}`}return i?{res:h,usedKey:h,exactUsedKey:h,usedLng:f,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:h}const s=this.resolve(t,n);let c=s&&s.res;const d=s&&s.usedKey||h,p=s&&s.exactUsedKey||h,g=Object.prototype.toString.apply(c),m=["[object Number]","[object Function]","[object RegExp]"],v=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&c&&(typeof c!="string"&&typeof c!="boolean"&&typeof c!="number")&&m.indexOf(g)<0&&!(typeof v=="string"&&Array.isArray(c))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const b=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,c,{...n,ns:l}):`key '${h} (${this.language})' returned an object instead of string.`;return i?(s.res=b,s.usedParams=this.getUsedParamsDetails(n),s):b}if(o){const b=Array.isArray(c),S=b?[]:{},_=b?p:d;for(const E in c)if(Object.prototype.hasOwnProperty.call(c,E)){const C=`${_}${o}${E}`;S[E]=this.translate(C,{...n,joinArrays:!1,ns:l}),S[E]===C&&(S[E]=c[E])}c=S}}else if(y&&typeof v=="string"&&Array.isArray(c))c=c.join(v),c&&(c=this.extendTranslation(c,t,n,r));else{let b=!1,S=!1;const _=n.count!==void 0&&typeof n.count!="string",E=Ef.hasDefaultValue(n),C=_?this.pluralResolver.getSuffix(f,n.count,n):"",P=n.ordinal&&_?this.pluralResolver.getSuffix(f,n.count,{ordinal:!1}):"",N=_&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),B=N&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${C}`]||n[`defaultValue${P}`]||n.defaultValue;!this.isValidLookup(c)&&E&&(b=!0,c=B),this.isValidLookup(c)||(S=!0,c=h);const U=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:c,D=E&&B!==c&&this.options.updateMissing;if(S||b||D){if(this.logger.log(D?"updateKey":"missingKey",f,a,h,D?B:c),o){const V=this.resolve(h,{...n,keySeparator:!1});V&&V.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&O&&O[0])for(let V=0;V<O.length;V++)F.push(O[V]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(n.lng||this.language):F.push(n.lng||this.language);const M=(V,k,R)=>{const j=E&&R!==c?R:U;this.options.missingKeyHandler?this.options.missingKeyHandler(V,a,k,j,D,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(V,a,k,j,D,n),this.emit("missingKey",V,a,k,c)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?F.forEach(V=>{const k=this.pluralResolver.getSuffixes(V,n);N&&n[`defaultValue${this.options.pluralSeparator}zero`]&&k.indexOf(`${this.options.pluralSeparator}zero`)<0&&k.push(`${this.options.pluralSeparator}zero`),k.forEach(R=>{M([V],h+R,n[`defaultValue${R}`]||B)})}):M(F,h,B))}c=this.extendTranslation(c,t,n,s,r),S&&c===h&&this.options.appendNamespaceToMissingKey&&(c=`${a}:${h}`),(S||b)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?c=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${h}`:h,b?c:void 0):c=this.options.parseMissingKeyHandler(c))}return i?(s.res=c,s.usedParams=this.getUsedParamsDetails(n),s):c}extendTranslation(t,n,r,i,o){var h=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const f=typeof t=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(f){const c=t.match(this.interpolator.nestingRegexp);u=c&&c.length}let s=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),t=this.interpolator.interpolate(t,s,r.lng||this.language,r),f){const c=t.match(this.interpolator.nestingRegexp),d=c&&c.length;u<d&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return o&&o[0]===d[0]&&!r.context?(h.logger.warn(`It seems you are nesting recursively key: ${d[0]} in key: ${n[0]}`),null):h.translate(...d,n)},r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,a=typeof l=="string"?[l]:l;return t!=null&&a&&a.length&&r.applyPostProcessor!==!1&&(t=eT.handle(a,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,o,h,l;return typeof t=="string"&&(t=[t]),t.forEach(a=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(a,n),u=f.key;i=u;let s=f.namespaces;this.options.fallbackNS&&(s=s.concat(this.options.fallbackNS));const c=n.count!==void 0&&typeof n.count!="string",d=c&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",g=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);s.forEach(m=>{this.isValidLookup(r)||(l=m,!Z1[`${g[0]}-${m}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(Z1[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(v=>{if(this.isValidLookup(r))return;h=v;const y=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,u,v,m,n);else{let b;c&&(b=this.pluralResolver.getSuffix(v,n.count,n));const S=`${this.options.pluralSeparator}zero`,_=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(y.push(u+b),n.ordinal&&b.indexOf(_)===0&&y.push(u+b.replace(_,this.options.pluralSeparator)),d&&y.push(u+S)),p){const E=`${u}${this.options.contextSeparator}${n.context}`;y.push(E),c&&(y.push(E+b),n.ordinal&&b.indexOf(_)===0&&y.push(E+b.replace(_,this.options.pluralSeparator)),d&&y.push(E+S))}}let w;for(;w=y.pop();)this.isValidLookup(r)||(o=w,r=this.getResource(v,m,w,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:h,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&typeof t.replace!="string";let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}function Wh(e){return e.charAt(0).toUpperCase()+e.slice(1)}class Q1{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=yr.create("languageUtils")}getScriptPartFromCode(t){if(t=Cf(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Cf(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Wh(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Wh(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Wh(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),i=[],o=h=>{h&&(this.isSupportedCode(h)?i.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),r.forEach(h=>{i.indexOf(h)<0&&o(this.formatLanguageCode(h))}),i}}let r7=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],i7={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}};const o7=["v1","v2","v3"],s7=["v4"],J1={zero:0,one:1,two:2,few:3,many:4,other:5};function a7(){const e={};return r7.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:i7[t.fc]}})}),e}class l7{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=yr.create("pluralResolver"),(!this.options.compatibilityJSON||s7.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=a7()}addRule(t,n){this.rules[t]=n}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Cf(t==="dev"?"en":t),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,o)=>J1[i]-J1[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(t,i,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let i=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const o=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!o7.includes(this.options.compatibilityJSON)}}function ew(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=qj(e,t,n);return!o&&i&&typeof n=="string"&&(o=Rm(e,n,r),o===void 0&&(o=Rm(t,n,r))),o}class c7{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yr.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:h,suffix:l,suffixEscaped:a,formatSeparator:f,unescapeSuffix:u,unescapePrefix:s,nestingPrefix:c,nestingPrefixEscaped:d,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:v,alwaysFormat:y}=t.interpolation;this.escape=n!==void 0?n:Qj,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Go(o):h||"{{",this.suffix=l?Go(l):a||"}}",this.formatSeparator=f||",",this.unescapePrefix=u?"":s||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=c?Go(c):d||Go("$t("),this.nestingSuffix=p?Go(p):g||Go(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=v||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let o,h,l;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(p){return p.replace(/\$/g,"$$$$")}const u=p=>{if(p.indexOf(this.formatSeparator)<0){const y=ew(n,a,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:p}):y}const g=p.split(this.formatSeparator),m=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(ew(n,a,m,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...i,...n,interpolationkey:m})};this.resetRegExp();const s=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,c=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>f(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?f(this.escape(p)):f(p)}].forEach(p=>{for(l=0;o=p.regex.exec(t);){const g=o[1].trim();if(h=u(g),h===void 0)if(typeof s=="function"){const v=s(t,o,i);h=typeof v=="string"?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,g))h="";else if(c){h=o[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${t}`),h="";else typeof h!="string"&&!this.useRawValueToEscape&&(h=G1(h));const m=p.safeValue(h);if(t=t.replace(o[0],m),c?(p.regex.lastIndex+=h.length,p.regex.lastIndex-=o[0].length):p.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,o,h;function l(a,f){const u=this.nestingOptionsSeparator;if(a.indexOf(u)<0)return a;const s=a.split(new RegExp(`${u}[ ]*{`));let c=`{${s[1]}`;a=s[0],c=this.interpolate(c,h);const d=c.match(/'/g),p=c.match(/"/g);(d&&d.length%2===0&&!p||p.length%2!==0)&&(c=c.replace(/'/g,'"'));try{h=JSON.parse(c),f&&(h={...f,...h})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${a}`,g),`${a}${u}${c}`}return h.defaultValue&&h.defaultValue.indexOf(this.prefix)>-1&&delete h.defaultValue,a}for(;i=this.nestingRegexp.exec(t);){let a=[];h={...r},h=h.replace&&typeof h.replace!="string"?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;let f=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(s=>s.trim());i[1]=u.shift(),a=u,f=!0}if(o=n(l.call(this,i[1].trim(),h),h),o&&i[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=G1(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),o=""),f&&(o=a.reduce((u,s)=>this.format(u,s,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),t=t.replace(i[0],o),this.regexp.lastIndex=0}return t}}function u7(e){let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(h=>{if(h){const[l,...a]=h.split(":"),f=a.join(":").trim().replace(/^'+|'+$/g,""),u=l.trim();n[u]||(n[u]=f),f==="false"&&(n[u]=!1),f==="true"&&(n[u]=!0),isNaN(f)||(n[u]=parseInt(f,10))}})}return{formatName:t,formatOptions:n}}function Ko(e){const t={};return function(r,i,o){const h=i+JSON.stringify(o);let l=t[h];return l||(l=e(Cf(i),o),t[h]=l),l(r)}}class f7{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yr.create("formatter"),this.options=t,this.formats={number:Ko((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return o=>i.format(o)}),currency:Ko((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return o=>i.format(o)}),datetime:Ko((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return o=>i.format(o)}),relativetime:Ko((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return o=>i.format(o,r.range||"day")}),list:Ko((n,r)=>{const i=new Intl.ListFormat(n,{...r});return o=>i.format(o)})},this.init(t)}init(t){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=Ko(n)}format(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((l,a)=>{const{formatName:f,formatOptions:u}=u7(a);if(this.formats[f]){let s=l;try{const c=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},d=c.locale||c.lng||i.locale||i.lng||r;s=this.formats[f](l,d,{...u,...i,...c})}catch(c){this.logger.warn(c)}return s}else this.logger.warn(`there was no format function for ${f}`);return l},t)}}function d7(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}class h7 extends Dd{constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=yr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(t,n,r,i){const o={},h={},l={},a={};return t.forEach(f=>{let u=!0;n.forEach(s=>{const c=`${f}|${s}`;!r.reload&&this.store.hasResourceBundle(f,s)?this.state[c]=2:this.state[c]<0||(this.state[c]===1?h[c]===void 0&&(h[c]=!0):(this.state[c]=1,u=!1,h[c]===void 0&&(h[c]=!0),o[c]===void 0&&(o[c]=!0),a[s]===void 0&&(a[s]=!0)))}),u||(l[f]=!0)}),(Object.keys(o).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(h),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(a)}}loaded(t,n,r){const i=t.split("|"),o=i[0],h=i[1];n&&this.emit("failedLoading",o,h,n),r&&this.store.addResourceBundle(o,h,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2;const l={};this.queue.forEach(a=>{Kj(a.loaded,[o],h),d7(a,t),n&&a.errors.push(n),a.pendingCount===0&&!a.done&&(Object.keys(a.loaded).forEach(f=>{l[f]||(l[f]={});const u=a.loaded[f];u.length&&u.forEach(s=>{l[f][s]===void 0&&(l[f][s]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(a=>!a.done)}read(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,h=arguments.length>5?arguments[5]:void 0;if(!t.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:o,callback:h});return}this.readingCalls++;const l=(f,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const s=this.waitingReads.shift();this.read(s.lng,s.ns,s.fcName,s.tried,s.wait,s.callback)}if(f&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,o*2,h)},o);return}h(f,u)},a=this.backend[r].bind(this.backend);if(a.length===2){try{const f=a(t,n);f&&typeof f.then=="function"?f.then(u=>l(null,u)).catch(l):l(null,f)}catch(f){l(f)}return}return a(t,n,l)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof n=="string"&&(n=[n]);const o=this.queueLoad(t,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(h=>{this.loadOne(h)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(h,l)=>{h&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,h),!h&&l&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,l),this.loaded(t,h,l)})}saveMissing(t,n,r,i,o){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const a={...h,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let u;f.length===5?u=f(t,n,r,i,a):u=f(t,n,r,i),u&&typeof u.then=="function"?u.then(s=>l(null,s)).catch(l):l(null,u)}catch(u){l(u)}else f(t,n,r,i,l,a)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}function tw(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let n={};if(typeof t[1]=="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(i=>{n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function nw(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Hc(){}function p7(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})}class Fl extends Dd{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=nw(t),this.services={},this.logger=yr,this.modules={external:[]},p7(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=tw();this.options={...i,...this.options,...nw(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function o(u){return u?typeof u=="function"?new u:u:null}if(!this.options.isClone){this.modules.logger?yr.init(o(this.modules.logger),this.options):yr.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=f7);const s=new Q1(this.options);this.store=new q1(this.options.resources,this.options);const c=this.services;c.logger=yr,c.resourceStore=this.store,c.languageUtils=s,c.pluralResolver=new l7(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(c.formatter=o(u),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new c7(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new h7(o(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(d,...g)}),this.modules.languageDetector&&(c.languageDetector=o(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=o(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Ef(this.services,this.options),this.translator.on("*",function(d){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(d,...g)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Hc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const a=Pa(),f=()=>{const u=(s,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(c),r(s,c)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),a}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hc;const i=typeof t=="string"?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],h=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};i?h(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(a=>h(a)),this.options.preload&&this.options.preload.forEach(l=>h(l)),this.services.backendConnector.load(o,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(t,n,r){const i=Pa();return t||(t=this.languages),n||(n=this.options.ns),r||(r=Hc),this.services.backendConnector.reload(t,n,o=>{i.resolve(),r(o)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&eT.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const i=Pa();this.emit("languageChanging",t);const o=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},h=(a,f)=>{f?(o(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(a,function(){return r.t(...arguments)})},l=a=>{!t&&!a&&this.services.languageDetector&&(a=[]);const f=typeof a=="string"?a:this.services.languageUtils.getBestMatchFromCodes(a);f&&(this.language||o(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(f)),this.loadResources(f,u=>{h(u,f)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),i}getFixedT(t,n,r){var i=this;const o=function(h,l){let a;if(typeof l!="object"){for(var f=arguments.length,u=new Array(f>2?f-2:0),s=2;s<f;s++)u[s-2]=arguments[s];a=i.options.overloadTranslationOptionHandler([h,l].concat(u))}else a={...l};a.lng=a.lng||o.lng,a.lngs=a.lngs||o.lngs,a.ns=a.ns||o.ns,a.keyPrefix=a.keyPrefix||r||o.keyPrefix;const c=i.options.keySeparator||".";let d;return a.keyPrefix&&Array.isArray(h)?d=h.map(p=>`${a.keyPrefix}${c}${p}`):d=a.keyPrefix?`${a.keyPrefix}${c}${h}`:h,i.t(d,a)};return typeof t=="string"?o.lng=t:o.lngs=t,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const h=(l,a)=>{const f=this.services.backendConnector.state[`${l}|${a}`];return f===-1||f===2};if(n.precheck){const l=n.precheck(this,h);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(r,t)&&(!i||h(o,t)))}loadNamespaces(t,n){const r=Pa();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=Pa();typeof t=="string"&&(t=[t]);const i=this.options.preload||[],o=t.filter(h=>i.indexOf(h)<0&&this.services.languageUtils.isSupportedCode(h));return o.length?(this.options.preload=i.concat(o),this.loadResources(h=>{r.resolve(),n&&n(h)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new Q1(tw());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Fl(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hc;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},o=new Fl(i);return(t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new q1(this.store.data,i),o.services.resourceStore=o.store),o.translator=new Ef(o.services,i),o.translator.on("*",function(l){for(var a=arguments.length,f=new Array(a>1?a-1:0),u=1;u<a;u++)f[u-1]=arguments[u];o.emit(l,...f)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Lt=Fl.createInstance();Lt.createInstance=Fl.createInstance;Lt.createInstance;Lt.dir;Lt.init;Lt.loadResources;Lt.reloadResources;Lt.use;Lt.changeLanguage;Lt.getFixedT;Lt.t;Lt.exists;Lt.setDefaultNamespace;Lt.hasLoadedNamespace;Lt.loadNamespaces;Lt.loadLanguages;const{slice:m7,forEach:g7}=[];function v7(e){return g7.call(m7.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}const rw=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,y7=(e,t,n)=>{const r=n||{};r.path=r.path||"/";const i=encodeURIComponent(t);let o=`${e}=${i}`;if(r.maxAge>0){const h=r.maxAge-0;if(Number.isNaN(h))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(h)}`}if(r.domain){if(!rw.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!rw.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},iw={create(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=y7(e,encodeURIComponent(t),i)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(e){this.create(e,"",-1)}};var w7={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return iw.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=t;n&&typeof document<"u"&&iw.create(n,e,r,i,o)}},b7={name:"querystring",lookup(e){var r;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const h=i.substring(1).split("&");for(let l=0;l<h.length;l++){const a=h[l].indexOf("=");a>0&&h[l].substring(0,a)===t&&(n=h[l].substring(a+1))}}return n}};let Oa=null;const ow=()=>{if(Oa!==null)return Oa;try{Oa=window!=="undefined"&&window.localStorage!==null;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Oa=!1}return Oa};var x7={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&ow())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&ow()&&window.localStorage.setItem(n,e)}};let $a=null;const sw=()=>{if($a!==null)return $a;try{$a=window!=="undefined"&&window.sessionStorage!==null;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{$a=!1}return $a};var S7={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&sw())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&sw()&&window.sessionStorage.setItem(n,e)}},_7={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)t.push(n[o]);r&&t.push(r),i&&t.push(i)}return t.length>0?t:void 0}},C7={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},E7={name:"path",lookup(e){var i;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof t=="number"?t:0])==null?void 0:i.replace("/",""):void 0}},T7={name:"subdomain",lookup(e){var i,o;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,r=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function k7(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}}class tT{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=v7(n,this.options||{},k7()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(w7),this.addDetector(b7),this.addDetector(x7),this.addDetector(S7),this.addDetector(_7),this.addDetector(C7),this.addDetector(E7),this.addDetector(T7)}addDetector(t){return this.detectors[t.name]=t,this}detect(t){t||(t=this.options.order);let n=[];return t.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}tT.type="languageDetector";const P7={"Image load":"Click here or drag an image file",Pan:"Pan","Reset Zoom/Pan":"Reset Zoom/Pan","Decrease Brush Size":"Decrease Brush Size","Increase Brush Size":"Increase Brush Size","View Original Image":"View Original Image",Undo:"Undo",Redo:"Redo","Copy Result":"Copy Result","Paste Image":"Paste Image","Trigger Manually Inpainting":"Trigger Manually Inpainting","Toggle Hotkeys Dialog":"Toggle Hotkeys Dialog","Toggle Settings Dialog":"Toggle Settings Dialog","Toggle File Manager":"Toggle File Manager",Cropper:"Cropper","Adjust Mask":"Adjust Mask",Expand:"Expand",Shrink:"Shrink",Reverse:"Reverse",Clear:"Clear"},O7={translation:P7},$7={"Image load":"Click aqui o arrastra una imagen",Pan:"Acercar o alejar zoom","Reset Zoom/Pan":"Resetear Zoom/Pan","Decrease Brush Size":"Disminuir pincel","Increase Brush Size":"Incrementar pincel","View Original Image":"Ver imagen original",Undo:"Deshacer",Redo:"Rehacer","Copy Result":"Copiar resultado","Paste Image":"Pegar imagen","Trigger Manually Inpainting":"Activar Inpainting manualmente","Toggle Hotkeys Dialog":"Activar dialogo de instrucciones de teclas","Toggle Settings Dialog":"Acivar dialogo de parametros","Toggle File Manager":"Activar dialogo de gestor de archivos",Cropper:"Recortar imagen","Adjust Mask":"Ajustar mascara",Expand:"Expandir",Shrink:"Disminuir",Reverse:"Reversar",Clear:"Borrar"},A7={translation:$7},R7={en:{...O7},es:{...A7}};Lt.use(tT).use(BD).init({resources:R7,fallbackLng:"es",interpolation:{escapeValue:!1}});const M7=new ZP;Yh.createRoot(document.getElementById("root")).render(T.jsx(ke.StrictMode,{children:T.jsx(JP,{client:M7,children:T.jsx(zj,{defaultTheme:"dark",disableTransitionOnChange:!0,children:T.jsx(rM,{children:T.jsx(jj,{})})})})}));
