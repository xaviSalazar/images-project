var j2=(a,s,c)=>{if(!s.has(a))throw TypeError("Cannot "+c)};var G0=(a,s,c)=>(j2(a,s,"read from private field"),c?c.call(a):s.get(a)),Q1=(a,s,c)=>{if(s.has(a))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(a):s.set(a,c)},N1=(a,s,c,d)=>(j2(a,s,"write to private field"),d?d.call(a,c):s.set(a,c),c);var Bw=(a,s,c,d)=>({set _(et){N1(a,s,et,c)},get _(){return G0(a,s,d)}}),Nv=(a,s,c)=>(j2(a,s,"access private method"),c);function _mergeNamespaces(a,s){for(var c=0;c<s.length;c++){const d=s[c];if(typeof d!="string"&&!Array.isArray(d)){for(const et in d)if(et!=="default"&&!(et in a)){const g=Object.getOwnPropertyDescriptor(d,et);g&&Object.defineProperty(a,et,g.get?g:{enumerable:!0,get:()=>d[et]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const et of document.querySelectorAll('link[rel="modulepreload"]'))d(et);new MutationObserver(et=>{for(const g of et)if(g.type==="childList")for(const at of g.addedNodes)at.tagName==="LINK"&&at.rel==="modulepreload"&&d(at)}).observe(document,{childList:!0,subtree:!0});function c(et){const g={};return et.integrity&&(g.integrity=et.integrity),et.referrerPolicy&&(g.referrerPolicy=et.referrerPolicy),et.crossOrigin==="use-credentials"?g.credentials="include":et.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(et){if(et.ep)return;et.ep=!0;const g=c(et);fetch(et.href,g)}})();function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var s=a.default;if(typeof s=="function"){var c=function d(){return this instanceof d?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};c.prototype=s.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(a).forEach(function(d){var et=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(c,d,et.get?et:{enumerable:!0,get:function(){return a[d]}})}),c}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$4=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$3&&a[z$3]||a["@@iterator"],typeof a=="function"?a:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$3={};function E$2(a,s,c){this.props=a,this.context=s,this.refs=D$3,this.updater=c||B$3}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(a,s){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,s,"setState")};E$2.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$3(a,s,c){this.props=a,this.context=s,this.refs=D$3,this.updater=c||B$3}var H$3=G$3.prototype=new F$1;H$3.constructor=G$3;C$1(H$3,E$2.prototype);H$3.isPureReactComponent=!0;var I$1=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$3={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$4(a,s,c){var d,et={},g=null,at=null;if(s!=null)for(d in s.ref!==void 0&&(at=s.ref),s.key!==void 0&&(g=""+s.key),s)J$1.call(s,d)&&!L$3.hasOwnProperty(d)&&(et[d]=s[d]);var $t=arguments.length-2;if($t===1)et.children=c;else if(1<$t){for(var vt=Array($t),b=0;b<$t;b++)vt[b]=arguments[b+2];et.children=vt}if(a&&a.defaultProps)for(d in $t=a.defaultProps,$t)et[d]===void 0&&(et[d]=$t[d]);return{$$typeof:l$2,type:a,key:g,ref:at,props:et,_owner:K$3.current}}function N$3(a,s){return{$$typeof:l$2,type:a.type,key:s,ref:a.ref,props:a.props,_owner:a._owner}}function O$2(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$2}function escape$1(a){var s={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(c){return s[c]})}var P$2=/\/+/g;function Q$4(a,s){return typeof a=="object"&&a!==null&&a.key!=null?escape$1(""+a.key):s.toString(36)}function R$2(a,s,c,d,et){var g=typeof a;(g==="undefined"||g==="boolean")&&(a=null);var at=!1;if(a===null)at=!0;else switch(g){case"string":case"number":at=!0;break;case"object":switch(a.$$typeof){case l$2:case n$5:at=!0}}if(at)return at=a,et=et(at),a=d===""?"."+Q$4(at,0):d,I$1(et)?(c="",a!=null&&(c=a.replace(P$2,"$&/")+"/"),R$2(et,s,c,"",function(b){return b})):et!=null&&(O$2(et)&&(et=N$3(et,c+(!et.key||at&&at.key===et.key?"":(""+et.key).replace(P$2,"$&/")+"/")+a)),s.push(et)),1;if(at=0,d=d===""?".":d+":",I$1(a))for(var $t=0;$t<a.length;$t++){g=a[$t];var vt=d+Q$4(g,$t);at+=R$2(g,s,c,vt,et)}else if(vt=A$1(a),typeof vt=="function")for(a=vt.call(a),$t=0;!(g=a.next()).done;)g=g.value,vt=d+Q$4(g,$t++),at+=R$2(g,s,c,vt,et);else if(g==="object")throw s=String(a),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return at}function S$1(a,s,c){if(a==null)return a;var d=[],et=0;return R$2(a,d,"","",function(g){return s.call(c,g,et++)}),d}function T$3(a){if(a._status===-1){var s=a._result;s=s(),s.then(function(c){(a._status===0||a._status===-1)&&(a._status=1,a._result=c)},function(c){(a._status===0||a._status===-1)&&(a._status=2,a._result=c)}),a._status===-1&&(a._status=0,a._result=s)}if(a._status===1)return a._result.default;throw a._result}var U$5={current:null},V$3={transition:null},W$2={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};function X$4(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(a,s,c){S$1(a,function(){s.apply(this,arguments)},c)},count:function(a){var s=0;return S$1(a,function(){s++}),s},toArray:function(a){return S$1(a,function(s){return s})||[]},only:function(a){if(!O$2(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$2;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$4;react_production_min.cloneElement=function(a,s,c){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var d=C$1({},a.props),et=a.key,g=a.ref,at=a._owner;if(s!=null){if(s.ref!==void 0&&(g=s.ref,at=K$3.current),s.key!==void 0&&(et=""+s.key),a.type&&a.type.defaultProps)var $t=a.type.defaultProps;for(vt in s)J$1.call(s,vt)&&!L$3.hasOwnProperty(vt)&&(d[vt]=s[vt]===void 0&&$t!==void 0?$t[vt]:s[vt])}var vt=arguments.length-2;if(vt===1)d.children=c;else if(1<vt){$t=Array(vt);for(var b=0;b<vt;b++)$t[b]=arguments[b+2];d.children=$t}return{$$typeof:l$2,type:a.type,key:et,ref:g,props:d,_owner:at}};react_production_min.createContext=function(a){return a={$$typeof:u$3,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t$4,_context:a},a.Consumer=a};react_production_min.createElement=M$4;react_production_min.createFactory=function(a){var s=M$4.bind(null,a);return s.type=a,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$2,render:a}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T$3}};react_production_min.memo=function(a,s){return{$$typeof:x,type:a,compare:s===void 0?null:s}};react_production_min.startTransition=function(a){var s=V$3.transition;V$3.transition={};try{a()}finally{V$3.transition=s}};react_production_min.unstable_act=X$4;react_production_min.useCallback=function(a,s){return U$5.current.useCallback(a,s)};react_production_min.useContext=function(a){return U$5.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$5.current.useDeferredValue(a)};react_production_min.useEffect=function(a,s){return U$5.current.useEffect(a,s)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(a,s,c){return U$5.current.useImperativeHandle(a,s,c)};react_production_min.useInsertionEffect=function(a,s){return U$5.current.useInsertionEffect(a,s)};react_production_min.useLayoutEffect=function(a,s){return U$5.current.useLayoutEffect(a,s)};react_production_min.useMemo=function(a,s){return U$5.current.useMemo(a,s)};react_production_min.useReducer=function(a,s,c){return U$5.current.useReducer(a,s,c)};react_production_min.useRef=function(a){return U$5.current.useRef(a)};react_production_min.useState=function(a){return U$5.current.useState(a)};react_production_min.useSyncExternalStore=function(a,s,c){return U$5.current.useSyncExternalStore(a,s,c)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$3=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$4=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$2(a,s,c){var d,et={},g=null,at=null;c!==void 0&&(g=""+c),s.key!==void 0&&(g=""+s.key),s.ref!==void 0&&(at=s.ref);for(d in s)m$3.call(s,d)&&!p$4.hasOwnProperty(d)&&(et[d]=s[d]);if(a&&a.defaultProps)for(d in s=a.defaultProps,s)et[d]===void 0&&(et[d]=s[d]);return{$$typeof:k$3,type:a,key:g,ref:at,props:et,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function s(e0,Xr){var In=e0.length;e0.push(Xr);e:for(;0<In;){var Zr=In-1>>>1,wn=e0[Zr];if(0<et(wn,Xr))e0[Zr]=Xr,e0[In]=wn,In=Zr;else break e}}function c(e0){return e0.length===0?null:e0[0]}function d(e0){if(e0.length===0)return null;var Xr=e0[0],In=e0.pop();if(In!==Xr){e0[0]=In;e:for(var Zr=0,wn=e0.length,r0=wn>>>1;Zr<r0;){var ko=2*(Zr+1)-1,_n=e0[ko],i0=ko+1,a0=e0[i0];if(0>et(_n,In))i0<wn&&0>et(a0,_n)?(e0[Zr]=a0,e0[i0]=In,Zr=i0):(e0[Zr]=_n,e0[ko]=In,Zr=ko);else if(i0<wn&&0>et(a0,In))e0[Zr]=a0,e0[i0]=In,Zr=i0;else break e}}return Xr}function et(e0,Xr){var In=e0.sortIndex-Xr.sortIndex;return In!==0?In:e0.id-Xr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;a.unstable_now=function(){return g.now()}}else{var at=Date,$t=at.now();a.unstable_now=function(){return at.now()-$t}}var vt=[],b=[],pt=1,st=null,wt=3,Tt=!1,Ct=!1,jt=!1,Lt=typeof setTimeout=="function"?setTimeout:null,Ht=typeof clearTimeout=="function"?clearTimeout:null,Gt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Kt(e0){for(var Xr=c(b);Xr!==null;){if(Xr.callback===null)d(b);else if(Xr.startTime<=e0)d(b),Xr.sortIndex=Xr.expirationTime,s(vt,Xr);else break;Xr=c(b)}}function tr(e0){if(jt=!1,Kt(e0),!Ct)if(c(vt)!==null)Ct=!0,Mo(rr);else{var Xr=c(b);Xr!==null&&zo(tr,Xr.startTime-e0)}}function rr(e0,Xr){Ct=!1,jt&&(jt=!1,Ht(Yr),Yr=-1),Tt=!0;var In=wt;try{for(Kt(Xr),st=c(vt);st!==null&&(!(st.expirationTime>Xr)||e0&&!o0());){var Zr=st.callback;if(typeof Zr=="function"){st.callback=null,wt=st.priorityLevel;var wn=Zr(st.expirationTime<=Xr);Xr=a.unstable_now(),typeof wn=="function"?st.callback=wn:st===c(vt)&&d(vt),Kt(Xr)}else d(vt);st=c(vt)}if(st!==null)var r0=!0;else{var ko=c(b);ko!==null&&zo(tr,ko.startTime-Xr),r0=!1}return r0}finally{st=null,wt=In,Tt=!1}}var Lr=!1,jr=null,Yr=-1,An=5,No=-1;function o0(){return!(a.unstable_now()-No<An)}function t0(){if(jr!==null){var e0=a.unstable_now();No=e0;var Xr=!0;try{Xr=jr(!0,e0)}finally{Xr?c0():(Lr=!1,jr=null)}}else Lr=!1}var c0;if(typeof Gt=="function")c0=function(){Gt(t0)};else if(typeof MessageChannel<"u"){var n0=new MessageChannel,Qo=n0.port2;n0.port1.onmessage=t0,c0=function(){Qo.postMessage(null)}}else c0=function(){Lt(t0,0)};function Mo(e0){jr=e0,Lr||(Lr=!0,c0())}function zo(e0,Xr){Yr=Lt(function(){e0(a.unstable_now())},Xr)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(e0){e0.callback=null},a.unstable_continueExecution=function(){Ct||Tt||(Ct=!0,Mo(rr))},a.unstable_forceFrameRate=function(e0){0>e0||125<e0?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):An=0<e0?Math.floor(1e3/e0):5},a.unstable_getCurrentPriorityLevel=function(){return wt},a.unstable_getFirstCallbackNode=function(){return c(vt)},a.unstable_next=function(e0){switch(wt){case 1:case 2:case 3:var Xr=3;break;default:Xr=wt}var In=wt;wt=Xr;try{return e0()}finally{wt=In}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(e0,Xr){switch(e0){case 1:case 2:case 3:case 4:case 5:break;default:e0=3}var In=wt;wt=e0;try{return Xr()}finally{wt=In}},a.unstable_scheduleCallback=function(e0,Xr,In){var Zr=a.unstable_now();switch(typeof In=="object"&&In!==null?(In=In.delay,In=typeof In=="number"&&0<In?Zr+In:Zr):In=Zr,e0){case 1:var wn=-1;break;case 2:wn=250;break;case 5:wn=1073741823;break;case 4:wn=1e4;break;default:wn=5e3}return wn=In+wn,e0={id:pt++,callback:Xr,priorityLevel:e0,startTime:In,expirationTime:wn,sortIndex:-1},In>Zr?(e0.sortIndex=In,s(b,e0),c(vt)===null&&e0===c(b)&&(jt?(Ht(Yr),Yr=-1):jt=!0,zo(tr,In-Zr))):(e0.sortIndex=wn,s(vt,e0),Ct||Tt||(Ct=!0,Mo(rr))),e0},a.unstable_shouldYield=o0,a.unstable_wrapCallback=function(e0){var Xr=wt;return function(){var In=wt;wt=Xr;try{return e0.apply(this,arguments)}finally{wt=In}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=reactExports,ca$2=schedulerExports;function p$3(a){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$2=new Set,ea$1={};function fa$2(a,s){ha$1(a,s),ha$1(a+"Capture",s)}function ha$1(a,s){for(ea$1[a]=s,a=0;a<s.length;a++)da$2.add(s[a])}var ia$2=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$2=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$2={},ma$1={};function oa$2(a){return ja$2.call(ma$1,a)?!0:ja$2.call(la$2,a)?!1:ka$1.test(a)?ma$1[a]=!0:(la$2[a]=!0,!1)}function pa$2(a,s,c,d){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa$2(a,s,c,d){if(s===null||typeof s>"u"||pa$2(a,s,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v$1(a,s,c,d,et,g,at){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=et,this.mustUseProperty=c,this.propertyName=a,this.type=s,this.sanitizeURL=g,this.removeEmptyString=at}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z$2[a]=new v$1(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var s=a[0];z$2[s]=new v$1(s,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z$2[a]=new v$1(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z$2[a]=new v$1(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z$2[a]=new v$1(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z$2[a]=new v$1(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z$2[a]=new v$1(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z$2[a]=new v$1(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z$2[a]=new v$1(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$2(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var s=a.replace(ra$1,sa$2);z$2[s]=new v$1(s,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var s=a.replace(ra$1,sa$2);z$2[s]=new v$1(s,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var s=a.replace(ra$1,sa$2);z$2[s]=new v$1(s,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z$2[a]=new v$1(a,1,!1,a.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z$2[a]=new v$1(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta$1(a,s,c,d){var et=z$2.hasOwnProperty(s)?z$2[s]:null;(et!==null?et.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa$2(s,c,et,d)&&(c=null),d||et===null?oa$2(s)&&(c===null?a.removeAttribute(s):a.setAttribute(s,""+c)):et.mustUseProperty?a[et.propertyName]=c===null?et.type===3?!1:"":c:(s=et.attributeName,d=et.attributeNamespace,c===null?a.removeAttribute(s):(et=et.type,c=et===3||et===4&&c===!0?"":""+c,d?a.setAttributeNS(d,s,c):a.setAttribute(s,c))))}var ua$2=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$2=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$2=Symbol.iterator;function Ka$2(a){return a===null||typeof a!="object"?null:(a=Ja$2&&a[Ja$2]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,La$1;function Ma$1(a){if(La$1===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);La$1=s&&s[1]||""}return`
`+La$1+a}var Na=!1;function Oa$1(a,s){if(!a||Na)return"";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(b){var d=b}Reflect.construct(a,[],s)}else{try{s.call()}catch(b){d=b}a.call(s.prototype)}else{try{throw Error()}catch(b){d=b}a()}}catch(b){if(b&&d&&typeof b.stack=="string"){for(var et=b.stack.split(`
`),g=d.stack.split(`
`),at=et.length-1,$t=g.length-1;1<=at&&0<=$t&&et[at]!==g[$t];)$t--;for(;1<=at&&0<=$t;at--,$t--)if(et[at]!==g[$t]){if(at!==1||$t!==1)do if(at--,$t--,0>$t||et[at]!==g[$t]){var vt=`
`+et[at].replace(" at new "," at ");return a.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",a.displayName)),vt}while(1<=at&&0<=$t);break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?Ma$1(a):""}function Pa(a){switch(a.tag){case 5:return Ma$1(a.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return a=Oa$1(a.type,!1),a;case 11:return a=Oa$1(a.type.render,!1),a;case 1:return a=Oa$1(a.type,!0),a;default:return""}}function Qa$2(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca$1:return(a.displayName||"Context")+".Consumer";case Ba$1:return(a._context.displayName||"Context")+".Provider";case Da$1:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga$1:return s=a.displayName||null,s!==null?s:Qa$2(a.type)||"Memo";case Ha$2:s=a._payload,a=a._init;try{return Qa$2(a(s))}catch{}}return null}function Ra(a){var s=a.type;switch(a.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=s.render,a=a.displayName||a.name||"",s.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$2(s);case 8:return s===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa$1(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta$1(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua$1(a){var s=Ta$1(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),d=""+a[s];if(!a.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var et=c.get,g=c.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return et.call(this)},set:function(at){d=""+at,g.call(this,at)}}),Object.defineProperty(a,s,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(at){d=""+at},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Va$2(a){a._valueTracker||(a._valueTracker=Ua$1(a))}function Wa$1(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return a&&(d=Ta$1(a)?a.checked?"true":"false":a.value),a=d,a!==c?(s.setValue(a),!0):!1}function Xa$2(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya$2(a,s){var c=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??a._wrapperState.initialChecked})}function Za$2(a,s){var c=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;c=Sa$1(s.value!=null?s.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab$1(a,s){s=s.checked,s!=null&&ta$1(a,"checked",s,!1)}function bb$1(a,s){ab$1(a,s);var c=Sa$1(s.value),d=s.type;if(c!=null)d==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if(d==="submit"||d==="reset"){a.removeAttribute("value");return}s.hasOwnProperty("value")?cb$1(a,s.type,c):s.hasOwnProperty("defaultValue")&&cb$1(a,s.type,Sa$1(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(a.defaultChecked=!!s.defaultChecked)}function db$1(a,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+a._wrapperState.initialValue,c||s===a.value||(a.value=s),a.defaultValue=s}c=a.name,c!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,c!==""&&(a.name=c)}function cb$1(a,s,c){(s!=="number"||Xa$2(a.ownerDocument)!==a)&&(c==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}var eb$1=Array.isArray;function fb$1(a,s,c,d){if(a=a.options,s){s={};for(var et=0;et<c.length;et++)s["$"+c[et]]=!0;for(c=0;c<a.length;c++)et=s.hasOwnProperty("$"+a[c].value),a[c].selected!==et&&(a[c].selected=et),et&&d&&(a[c].defaultSelected=!0)}else{for(c=""+Sa$1(c),s=null,et=0;et<a.length;et++){if(a[et].value===c){a[et].selected=!0,d&&(a[et].defaultSelected=!0);return}s!==null||a[et].disabled||(s=a[et])}s!==null&&(s.selected=!0)}}function gb$1(a,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb$1(a,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(p$3(92));if(eb$1(c)){if(1<c.length)throw Error(p$3(93));c=c[0]}s=c}s==null&&(s=""),c=s}a._wrapperState={initialValue:Sa$1(c)}}function ib$1(a,s){var c=Sa$1(s.value),d=Sa$1(s.defaultValue);c!=null&&(c=""+c,c!==a.value&&(a.value=c),s.defaultValue==null&&a.defaultValue!==c&&(a.defaultValue=c)),d!=null&&(a.defaultValue=""+d)}function jb$1(a){var s=a.textContent;s===a._wrapperState.initialValue&&s!==""&&s!==null&&(a.value=s)}function kb$1(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(a,s){return a==null||a==="http://www.w3.org/1999/xhtml"?kb$1(s):a==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb$1,nb$1=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,d,et){MSApp.execUnsafeLocalFunction(function(){return a(s,c,d,et)})}:a}(function(a,s){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=s;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb$1.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;s.firstChild;)a.appendChild(s.firstChild)}});function ob$1(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(a){qb$1.forEach(function(s){s=s+a.charAt(0).toUpperCase()+a.substring(1),pb$1[s]=pb$1[a]})});function rb$1(a,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||pb$1.hasOwnProperty(a)&&pb$1[a]?(""+s).trim():s+"px"}function sb$1(a,s){a=a.style;for(var c in s)if(s.hasOwnProperty(c)){var d=c.indexOf("--")===0,et=rb$1(c,s[c],d);c==="float"&&(c="cssFloat"),d?a.setProperty(c,et):a[c]=et}}var tb$1=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(a,s){if(s){if(tb$1[a]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p$3(137,a));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p$3(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p$3(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p$3(62))}}function vb$1(a,s){if(a.indexOf("-")===-1)return typeof s.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(a){if(a=Cb$1(a)){if(typeof yb$1!="function")throw Error(p$3(280));var s=a.stateNode;s&&(s=Db$1(s),yb$1(a.stateNode,a.type,s))}}function Eb$1(a){zb$1?Ab$1?Ab$1.push(a):Ab$1=[a]:zb$1=a}function Fb$1(){if(zb$1){var a=zb$1,s=Ab$1;if(Ab$1=zb$1=null,Bb$1(a),s)for(a=0;a<s.length;a++)Bb$1(s[a])}}function Gb$1(a,s){return a(s)}function Hb(){}var Ib$1=!1;function Jb$1(a,s,c){if(Ib$1)return a(s,c);Ib$1=!0;try{return Gb$1(a,s,c)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb(),Fb$1())}}function Kb$1(a,s){var c=a.stateNode;if(c===null)return null;var d=Db$1(c);if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(p$3(231,s,typeof c));return c}var Lb$1=!1;if(ia$2)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(a,s,c,d,et,g,at,$t,vt){var b=Array.prototype.slice.call(arguments,3);try{s.apply(c,b)}catch(pt){this.onError(pt)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(a){Ob$1=!0,Pb$1=a}};function Tb$1(a,s,c,d,et,g,at,$t,vt){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(a,s,c,d,et,g,at,$t,vt){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var b=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$3(198));Qb$1||(Qb$1=!0,Rb$1=b)}}function Vb$1(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,s.flags&4098&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function Wb(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function Xb$1(a){if(Vb$1(a)!==a)throw Error(p$3(188))}function Yb$1(a){var s=a.alternate;if(!s){if(s=Vb$1(a),s===null)throw Error(p$3(188));return s!==a?null:a}for(var c=a,d=s;;){var et=c.return;if(et===null)break;var g=et.alternate;if(g===null){if(d=et.return,d!==null){c=d;continue}break}if(et.child===g.child){for(g=et.child;g;){if(g===c)return Xb$1(et),a;if(g===d)return Xb$1(et),s;g=g.sibling}throw Error(p$3(188))}if(c.return!==d.return)c=et,d=g;else{for(var at=!1,$t=et.child;$t;){if($t===c){at=!0,c=et,d=g;break}if($t===d){at=!0,d=et,c=g;break}$t=$t.sibling}if(!at){for($t=g.child;$t;){if($t===c){at=!0,c=g,d=et;break}if($t===d){at=!0,d=g,c=et;break}$t=$t.sibling}if(!at)throw Error(p$3(189))}}if(c.alternate!==d)throw Error(p$3(190))}if(c.tag!==3)throw Error(p$3(188));return c.stateNode.current===c?a:s}function Zb$1(a){return a=Yb$1(a),a!==null?$b$1(a):null}function $b$1(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var s=$b$1(a);if(s!==null)return s;a=a.sibling}return null}var ac$2=ca$2.unstable_scheduleCallback,bc$2=ca$2.unstable_cancelCallback,cc$2=ca$2.unstable_shouldYield,dc$2=ca$2.unstable_requestPaint,B$2=ca$2.unstable_now,ec$1=ca$2.unstable_getCurrentPriorityLevel,fc$2=ca$2.unstable_ImmediatePriority,gc$2=ca$2.unstable_UserBlockingPriority,hc$1=ca$2.unstable_NormalPriority,ic$2=ca$2.unstable_LowPriority,jc$2=ca$2.unstable_IdlePriority,kc$2=null,lc$2=null;function mc$2(a){if(lc$2&&typeof lc$2.onCommitFiberRoot=="function")try{lc$2.onCommitFiberRoot(kc$2,a,void 0,(a.current.flags&128)===128)}catch{}}var oc$2=Math.clz32?Math.clz32:nc$2,pc$2=Math.log,qc$2=Math.LN2;function nc$2(a){return a>>>=0,a===0?32:31-(pc$2(a)/qc$2|0)|0}var rc$1=64,sc$2=4194304;function tc$1(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc$2(a,s){var c=a.pendingLanes;if(c===0)return 0;var d=0,et=a.suspendedLanes,g=a.pingedLanes,at=c&268435455;if(at!==0){var $t=at&~et;$t!==0?d=tc$1($t):(g&=at,g!==0&&(d=tc$1(g)))}else at=c&~et,at!==0?d=tc$1(at):g!==0&&(d=tc$1(g));if(d===0)return 0;if(s!==0&&s!==d&&!(s&et)&&(et=d&-d,g=s&-s,et>=g||et===16&&(g&4194240)!==0))return s;if(d&4&&(d|=c&16),s=a.entangledLanes,s!==0)for(a=a.entanglements,s&=d;0<s;)c=31-oc$2(s),et=1<<c,d|=a[c],s&=~et;return d}function vc$2(a,s){switch(a){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$2(a,s){for(var c=a.suspendedLanes,d=a.pingedLanes,et=a.expirationTimes,g=a.pendingLanes;0<g;){var at=31-oc$2(g),$t=1<<at,vt=et[at];vt===-1?(!($t&c)||$t&d)&&(et[at]=vc$2($t,s)):vt<=s&&(a.expiredLanes|=$t),g&=~$t}}function xc$2(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc$2(){var a=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),a}function zc$2(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function Ac$2(a,s,c){a.pendingLanes|=s,s!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,s=31-oc$2(s),a[s]=c}function Bc$2(a,s){var c=a.pendingLanes&~s;a.pendingLanes=s,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=s,a.mutableReadLanes&=s,a.entangledLanes&=s,s=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var et=31-oc$2(c),g=1<<et;s[et]=0,d[et]=-1,a[et]=-1,c&=~g}}function Cc$2(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var d=31-oc$2(c),et=1<<d;et&s|a[d]&s&&(a[d]|=s),c&=~et}}var C=0;function Dc$2(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec$2,Fc$2,Gc$2,Hc$2,Ic$2,Jc$2=!1,Kc$2=[],Lc$2=null,Mc$2=null,Nc$2=null,Oc$2=new Map,Pc$2=new Map,Qc$2=[],Rc$2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$2(a,s){switch(a){case"focusin":case"focusout":Lc$2=null;break;case"dragenter":case"dragleave":Mc$2=null;break;case"mouseover":case"mouseout":Nc$2=null;break;case"pointerover":case"pointerout":Oc$2.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$2.delete(s.pointerId)}}function Tc$2(a,s,c,d,et,g){return a===null||a.nativeEvent!==g?(a={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:g,targetContainers:[et]},s!==null&&(s=Cb$1(s),s!==null&&Fc$2(s)),a):(a.eventSystemFlags|=d,s=a.targetContainers,et!==null&&s.indexOf(et)===-1&&s.push(et),a)}function Uc$2(a,s,c,d,et){switch(s){case"focusin":return Lc$2=Tc$2(Lc$2,a,s,c,d,et),!0;case"dragenter":return Mc$2=Tc$2(Mc$2,a,s,c,d,et),!0;case"mouseover":return Nc$2=Tc$2(Nc$2,a,s,c,d,et),!0;case"pointerover":var g=et.pointerId;return Oc$2.set(g,Tc$2(Oc$2.get(g)||null,a,s,c,d,et)),!0;case"gotpointercapture":return g=et.pointerId,Pc$2.set(g,Tc$2(Pc$2.get(g)||null,a,s,c,d,et)),!0}return!1}function Vc$2(a){var s=Wc$2(a.target);if(s!==null){var c=Vb$1(s);if(c!==null){if(s=c.tag,s===13){if(s=Wb(c),s!==null){a.blockedOn=s,Ic$2(a.priority,function(){Gc$2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc$2(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=Yc$2(a.domEventName,a.eventSystemFlags,s[0],a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb$1=d,c.target.dispatchEvent(d),wb$1=null}else return s=Cb$1(c),s!==null&&Fc$2(s),a.blockedOn=c,!1;s.shift()}return!0}function Zc$2(a,s,c){Xc$2(a)&&c.delete(s)}function $c$2(){Jc$2=!1,Lc$2!==null&&Xc$2(Lc$2)&&(Lc$2=null),Mc$2!==null&&Xc$2(Mc$2)&&(Mc$2=null),Nc$2!==null&&Xc$2(Nc$2)&&(Nc$2=null),Oc$2.forEach(Zc$2),Pc$2.forEach(Zc$2)}function ad$2(a,s){a.blockedOn===s&&(a.blockedOn=null,Jc$2||(Jc$2=!0,ca$2.unstable_scheduleCallback(ca$2.unstable_NormalPriority,$c$2)))}function bd$1(a){function s(et){return ad$2(et,a)}if(0<Kc$2.length){ad$2(Kc$2[0],a);for(var c=1;c<Kc$2.length;c++){var d=Kc$2[c];d.blockedOn===a&&(d.blockedOn=null)}}for(Lc$2!==null&&ad$2(Lc$2,a),Mc$2!==null&&ad$2(Mc$2,a),Nc$2!==null&&ad$2(Nc$2,a),Oc$2.forEach(s),Pc$2.forEach(s),c=0;c<Qc$2.length;c++)d=Qc$2[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc$2.length&&(c=Qc$2[0],c.blockedOn===null);)Vc$2(c),c.blockedOn===null&&Qc$2.shift()}var cd$2=ua$2.ReactCurrentBatchConfig,dd$2=!0;function ed$2(a,s,c,d){var et=C,g=cd$2.transition;cd$2.transition=null;try{C=1,fd$2(a,s,c,d)}finally{C=et,cd$2.transition=g}}function gd$1(a,s,c,d){var et=C,g=cd$2.transition;cd$2.transition=null;try{C=4,fd$2(a,s,c,d)}finally{C=et,cd$2.transition=g}}function fd$2(a,s,c,d){if(dd$2){var et=Yc$2(a,s,c,d);if(et===null)hd$2(a,s,d,id$2,c),Sc$2(a,d);else if(Uc$2(et,a,s,c,d))d.stopPropagation();else if(Sc$2(a,d),s&4&&-1<Rc$2.indexOf(a)){for(;et!==null;){var g=Cb$1(et);if(g!==null&&Ec$2(g),g=Yc$2(a,s,c,d),g===null&&hd$2(a,s,d,id$2,c),g===et)break;et=g}et!==null&&d.stopPropagation()}else hd$2(a,s,d,null,c)}}var id$2=null;function Yc$2(a,s,c,d){if(id$2=null,a=xb$1(d),a=Wc$2(a),a!==null)if(s=Vb$1(a),s===null)a=null;else if(c=s.tag,c===13){if(a=Wb(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null);return id$2=a,null}function jd$2(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$2:return 1;case gc$2:return 4;case hc$1:case ic$2:return 16;case jc$2:return 536870912;default:return 16}default:return 16}}var kd$2=null,ld$2=null,md$2=null;function nd$2(){if(md$2)return md$2;var a,s=ld$2,c=s.length,d,et="value"in kd$2?kd$2.value:kd$2.textContent,g=et.length;for(a=0;a<c&&s[a]===et[a];a++);var at=c-a;for(d=1;d<=at&&s[c-d]===et[g-d];d++);return md$2=et.slice(a,1<d?1-d:void 0)}function od$2(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function pd$2(){return!0}function qd$2(){return!1}function rd$2(a){function s(c,d,et,g,at){this._reactName=c,this._targetInst=et,this.type=d,this.nativeEvent=g,this.target=at,this.currentTarget=null;for(var $t in a)a.hasOwnProperty($t)&&(c=a[$t],this[$t]=c?c(g):g[$t]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pd$2:qd$2,this.isPropagationStopped=qd$2,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pd$2)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pd$2)},persist:function(){},isPersistent:pd$2}),s}var sd$2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$2=rd$2(sd$2),ud$2=A({},sd$2,{view:0,detail:0}),vd$2=rd$2(ud$2),wd$1,xd$1,yd$1,Ad$2=A({},ud$2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd$1&&(yd$1&&a.type==="mousemove"?(wd$1=a.screenX-yd$1.screenX,xd$1=a.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=a),wd$1)},movementY:function(a){return"movementY"in a?a.movementY:xd$1}}),Bd$1=rd$2(Ad$2),Cd$2=A({},Ad$2,{dataTransfer:0}),Dd$2=rd$2(Cd$2),Ed$2=A({},ud$2,{relatedTarget:0}),Fd$2=rd$2(Ed$2),Gd$1=A({},sd$2,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$2=rd$2(Gd$1),Id$2=A({},sd$2,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd$1=rd$2(Id$2),Kd$2=A({},sd$2,{data:0}),Ld$2=rd$2(Kd$2),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$2(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Od$2[a])?!!s[a]:!1}function zd$1(){return Pd$2}var Qd$1=A({},ud$2,{key:function(a){if(a.key){var s=Md$1[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=od$2(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd$1[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(a){return a.type==="keypress"?od$2(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od$2(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd$1=rd$2(Qd$1),Sd$2=A({},Ad$2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$2(Sd$2),Ud$1=A({},ud$2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$2(Ud$1),Wd$1=A({},sd$2,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$2=rd$2(Wd$1),Yd$2=A({},Ad$2,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$2(Yd$2),$d$1=[9,13,27,32],ae$1=ia$2&&"CompositionEvent"in window,be$2=null;ia$2&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia$2&&"TextEvent"in window&&!be$2,de$1=ia$2&&(!ae$1||be$2&&8<be$2&&11>=be$2),ee=" ",fe$3=!1;function ge$1(a,s){switch(a){case"keyup":return $d$1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je(a,s){switch(a){case"compositionend":return he$1(s);case"keypress":return s.which!==32?null:(fe$3=!0,ee);case"textInput":return a=s.data,a===ee&&fe$3?null:a;default:return null}}function ke$1(a,s){if(ie)return a==="compositionend"||!ae$1&&ge$1(a,s)?(a=nd$2(),md$2=ld$2=kd$2=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de$1&&s.locale!=="ko"?null:s.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!le$2[a.type]:s==="textarea"}function ne$1(a,s,c,d){Eb$1(d),s=oe$1(s,"onChange"),0<s.length&&(c=new td$2("onChange","change",null,c,d),a.push({event:c,listeners:s}))}var pe$1=null,qe$1=null;function re(a){se(a,0)}function te(a){var s=ue$1(a);if(Wa$1(s))return a}function ve$2(a,s){if(a==="change")return s}var we$3=!1;if(ia$2){var xe$2;if(ia$2){var ye$3="oninput"in document;if(!ye$3){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$3=typeof ze.oninput=="function"}xe$2=ye$3}else xe$2=!1;we$3=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe$1=pe$1=null)}function Be(a){if(a.propertyName==="value"&&te(qe$1)){var s=[];ne$1(s,qe$1,a,xb$1(a)),Jb$1(re,s)}}function Ce$1(a,s,c){a==="focusin"?(Ae(),pe$1=s,qe$1=c,pe$1.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De$3(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te(qe$1)}function Ee$2(a,s){if(a==="click")return te(s)}function Fe$1(a,s){if(a==="input"||a==="change")return te(s)}function Ge(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var He$1=typeof Object.is=="function"?Object.is:Ge;function Ie$1(a,s){if(He$1(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var et=c[d];if(!ja$2.call(s,et)||!He$1(a[et],s[et]))return!1}return!0}function Je$1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,s){var c=Je$1(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=s&&d>=s)return{node:c,offset:s-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Je$1(c)}}function Le(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Le(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Me$2(){for(var a=window,s=Xa$2();s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=Xa$2(a.document)}return s}function Ne$1(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}function Oe(a){var s=Me$2(),c=a.focusedElem,d=a.selectionRange;if(s!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(d!==null&&Ne$1(c)){if(s=d.start,a=d.end,a===void 0&&(a=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(a,c.value.length);else if(a=(s=c.ownerDocument||document)&&s.defaultView||window,a.getSelection){a=a.getSelection();var et=c.textContent.length,g=Math.min(d.start,et);d=d.end===void 0?g:Math.min(d.end,et),!a.extend&&g>d&&(et=d,d=g,g=et),et=Ke(c,g);var at=Ke(c,d);et&&at&&(a.rangeCount!==1||a.anchorNode!==et.node||a.anchorOffset!==et.offset||a.focusNode!==at.node||a.focusOffset!==at.offset)&&(s=s.createRange(),s.setStart(et.node,et.offset),a.removeAllRanges(),g>d?(a.addRange(s),a.extend(at.node,at.offset)):(s.setEnd(at.node,at.offset),a.addRange(s)))}}for(s=[],a=c;a=a.parentNode;)a.nodeType===1&&s.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)a=s[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe$2=ia$2&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$2(a,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$2(d)||(d=Qe$1,"selectionStart"in d&&Ne$1(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se$1&&Ie$1(Se$1,d)||(Se$1=d,d=oe$1(Re$1,"onSelect"),0<d.length&&(s=new td$2("onSelect","select",null,s,c),a.push({event:s,listeners:d}),s.target=Qe$1)))}function Ve(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var We$2={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe$1={},Ye={};ia$2&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze$2(a){if(Xe$1[a])return Xe$1[a];if(!We$2[a])return a;var s=We$2[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in Ye)return Xe$1[a]=s[c];return a}var $e$1=Ze$2("animationend"),af$2=Ze$2("animationiteration"),bf$1=Ze$2("animationstart"),cf$1=Ze$2("transitionend"),df$1=new Map,ef$2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$2(a,s){df$1.set(a,s),fa$2(s,[a])}for(var gf$1=0;gf$1<ef$2.length;gf$1++){var hf$2=ef$2[gf$1],jf$1=hf$2.toLowerCase(),kf$1=hf$2[0].toUpperCase()+hf$2.slice(1);ff$2(jf$1,"on"+kf$1)}ff$2($e$1,"onAnimationEnd");ff$2(af$2,"onAnimationIteration");ff$2(bf$1,"onAnimationStart");ff$2("dblclick","onDoubleClick");ff$2("focusin","onFocus");ff$2("focusout","onBlur");ff$2(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$2("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$2=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$2));function nf$2(a,s,c){var d=a.type||"unknown-event";a.currentTarget=c,Ub$1(d,s,void 0,a),a.currentTarget=null}function se(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],et=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var at=d.length-1;0<=at;at--){var $t=d[at],vt=$t.instance,b=$t.currentTarget;if($t=$t.listener,vt!==g&&et.isPropagationStopped())break e;nf$2(et,$t,b),g=vt}else for(at=0;at<d.length;at++){if($t=d[at],vt=$t.instance,b=$t.currentTarget,$t=$t.listener,vt!==g&&et.isPropagationStopped())break e;nf$2(et,$t,b),g=vt}}}if(Qb$1)throw a=Rb$1,Qb$1=!1,Rb$1=null,a}function D$2(a,s){var c=s[of$2];c===void 0&&(c=s[of$2]=new Set);var d=a+"__bubble";c.has(d)||(pf$2(s,a,2,!1),c.add(d))}function qf$1(a,s,c){var d=0;s&&(d|=4),pf$2(c,a,d,s)}var rf$2="_reactListening"+Math.random().toString(36).slice(2);function sf$2(a){if(!a[rf$2]){a[rf$2]=!0,da$2.forEach(function(c){c!=="selectionchange"&&(mf$2.has(c)||qf$1(c,!1,a),qf$1(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[rf$2]||(s[rf$2]=!0,qf$1("selectionchange",!1,s))}}function pf$2(a,s,c,d){switch(jd$2(s)){case 1:var et=ed$2;break;case 4:et=gd$1;break;default:et=fd$2}c=et.bind(null,s,c,a),et=void 0,!Lb$1||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(et=!0),d?et!==void 0?a.addEventListener(s,c,{capture:!0,passive:et}):a.addEventListener(s,c,!0):et!==void 0?a.addEventListener(s,c,{passive:et}):a.addEventListener(s,c,!1)}function hd$2(a,s,c,d,et){var g=d;if(!(s&1)&&!(s&2)&&d!==null)e:for(;;){if(d===null)return;var at=d.tag;if(at===3||at===4){var $t=d.stateNode.containerInfo;if($t===et||$t.nodeType===8&&$t.parentNode===et)break;if(at===4)for(at=d.return;at!==null;){var vt=at.tag;if((vt===3||vt===4)&&(vt=at.stateNode.containerInfo,vt===et||vt.nodeType===8&&vt.parentNode===et))return;at=at.return}for(;$t!==null;){if(at=Wc$2($t),at===null)return;if(vt=at.tag,vt===5||vt===6){d=g=at;continue e}$t=$t.parentNode}}d=d.return}Jb$1(function(){var b=g,pt=xb$1(c),st=[];e:{var wt=df$1.get(a);if(wt!==void 0){var Tt=td$2,Ct=a;switch(a){case"keypress":if(od$2(c)===0)break e;case"keydown":case"keyup":Tt=Rd$1;break;case"focusin":Ct="focus",Tt=Fd$2;break;case"focusout":Ct="blur",Tt=Fd$2;break;case"beforeblur":case"afterblur":Tt=Fd$2;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Dd$2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Vd$1;break;case $e$1:case af$2:case bf$1:Tt=Hd$2;break;case cf$1:Tt=Xd$2;break;case"scroll":Tt=vd$2;break;case"wheel":Tt=Zd$1;break;case"copy":case"cut":case"paste":Tt=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=Td$1}var jt=(s&4)!==0,Lt=!jt&&a==="scroll",Ht=jt?wt!==null?wt+"Capture":null:wt;jt=[];for(var Gt=b,Kt;Gt!==null;){Kt=Gt;var tr=Kt.stateNode;if(Kt.tag===5&&tr!==null&&(Kt=tr,Ht!==null&&(tr=Kb$1(Gt,Ht),tr!=null&&jt.push(tf$2(Gt,tr,Kt)))),Lt)break;Gt=Gt.return}0<jt.length&&(wt=new Tt(wt,Ct,null,c,pt),st.push({event:wt,listeners:jt}))}}if(!(s&7)){e:{if(wt=a==="mouseover"||a==="pointerover",Tt=a==="mouseout"||a==="pointerout",wt&&c!==wb$1&&(Ct=c.relatedTarget||c.fromElement)&&(Wc$2(Ct)||Ct[uf$2]))break e;if((Tt||wt)&&(wt=pt.window===pt?pt:(wt=pt.ownerDocument)?wt.defaultView||wt.parentWindow:window,Tt?(Ct=c.relatedTarget||c.toElement,Tt=b,Ct=Ct?Wc$2(Ct):null,Ct!==null&&(Lt=Vb$1(Ct),Ct!==Lt||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(Tt=null,Ct=b),Tt!==Ct)){if(jt=Bd$1,tr="onMouseLeave",Ht="onMouseEnter",Gt="mouse",(a==="pointerout"||a==="pointerover")&&(jt=Td$1,tr="onPointerLeave",Ht="onPointerEnter",Gt="pointer"),Lt=Tt==null?wt:ue$1(Tt),Kt=Ct==null?wt:ue$1(Ct),wt=new jt(tr,Gt+"leave",Tt,c,pt),wt.target=Lt,wt.relatedTarget=Kt,tr=null,Wc$2(pt)===b&&(jt=new jt(Ht,Gt+"enter",Ct,c,pt),jt.target=Kt,jt.relatedTarget=Lt,tr=jt),Lt=tr,Tt&&Ct)t:{for(jt=Tt,Ht=Ct,Gt=0,Kt=jt;Kt;Kt=vf$1(Kt))Gt++;for(Kt=0,tr=Ht;tr;tr=vf$1(tr))Kt++;for(;0<Gt-Kt;)jt=vf$1(jt),Gt--;for(;0<Kt-Gt;)Ht=vf$1(Ht),Kt--;for(;Gt--;){if(jt===Ht||Ht!==null&&jt===Ht.alternate)break t;jt=vf$1(jt),Ht=vf$1(Ht)}jt=null}else jt=null;Tt!==null&&wf$1(st,wt,Tt,jt,!1),Ct!==null&&Lt!==null&&wf$1(st,Lt,Ct,jt,!0)}}e:{if(wt=b?ue$1(b):window,Tt=wt.nodeName&&wt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&wt.type==="file")var rr=ve$2;else if(me$2(wt))if(we$3)rr=Fe$1;else{rr=De$3;var Lr=Ce$1}else(Tt=wt.nodeName)&&Tt.toLowerCase()==="input"&&(wt.type==="checkbox"||wt.type==="radio")&&(rr=Ee$2);if(rr&&(rr=rr(a,b))){ne$1(st,rr,c,pt);break e}Lr&&Lr(a,wt,b),a==="focusout"&&(Lr=wt._wrapperState)&&Lr.controlled&&wt.type==="number"&&cb$1(wt,"number",wt.value)}switch(Lr=b?ue$1(b):window,a){case"focusin":(me$2(Lr)||Lr.contentEditable==="true")&&(Qe$1=Lr,Re$1=b,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$2(st,c,pt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(st,c,pt)}var jr;if(ae$1)e:{switch(a){case"compositionstart":var Yr="onCompositionStart";break e;case"compositionend":Yr="onCompositionEnd";break e;case"compositionupdate":Yr="onCompositionUpdate";break e}Yr=void 0}else ie?ge$1(a,c)&&(Yr="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Yr="onCompositionStart");Yr&&(de$1&&c.locale!=="ko"&&(ie||Yr!=="onCompositionStart"?Yr==="onCompositionEnd"&&ie&&(jr=nd$2()):(kd$2=pt,ld$2="value"in kd$2?kd$2.value:kd$2.textContent,ie=!0)),Lr=oe$1(b,Yr),0<Lr.length&&(Yr=new Ld$2(Yr,a,null,c,pt),st.push({event:Yr,listeners:Lr}),jr?Yr.data=jr:(jr=he$1(c),jr!==null&&(Yr.data=jr)))),(jr=ce$1?je(a,c):ke$1(a,c))&&(b=oe$1(b,"onBeforeInput"),0<b.length&&(pt=new Ld$2("onBeforeInput","beforeinput",null,c,pt),st.push({event:pt,listeners:b}),pt.data=jr))}se(st,s)})}function tf$2(a,s,c){return{instance:a,listener:s,currentTarget:c}}function oe$1(a,s){for(var c=s+"Capture",d=[];a!==null;){var et=a,g=et.stateNode;et.tag===5&&g!==null&&(et=g,g=Kb$1(a,c),g!=null&&d.unshift(tf$2(a,g,et)),g=Kb$1(a,s),g!=null&&d.push(tf$2(a,g,et))),a=a.return}return d}function vf$1(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf$1(a,s,c,d,et){for(var g=s._reactName,at=[];c!==null&&c!==d;){var $t=c,vt=$t.alternate,b=$t.stateNode;if(vt!==null&&vt===d)break;$t.tag===5&&b!==null&&($t=b,et?(vt=Kb$1(c,g),vt!=null&&at.unshift(tf$2(c,vt,$t))):et||(vt=Kb$1(c,g),vt!=null&&at.push(tf$2(c,vt,$t)))),c=c.return}at.length!==0&&a.push({event:s,listeners:at})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(a){return(typeof a=="string"?a:""+a).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(a,s,c){if(s=zf$1(s),zf$1(a)!==s&&c)throw Error(p$3(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(a){return Hf$1.resolve(null).then(a).catch(If$1)}:Ff$1;function If$1(a){setTimeout(function(){throw a})}function Kf$1(a,s){var c=s,d=0;do{var et=c.nextSibling;if(a.removeChild(c),et&&et.nodeType===8)if(c=et.data,c==="/$"){if(d===0){a.removeChild(et),bd$1(s);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=et}while(c);bd$1(s)}function Lf$1(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return a}function Mf$1(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return a;s--}else c==="/$"&&s++}a=a.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$2="__reactContainer$"+Nf$1,of$2="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$2(a){var s=a[Of$1];if(s)return s;for(var c=a.parentNode;c;){if(s=c[uf$2]||c[Of$1]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=Mf$1(a);a!==null;){if(c=a[Of$1])return c;a=Mf$1(a)}return s}a=c,c=a.parentNode}return null}function Cb$1(a){return a=a[Of$1]||a[uf$2],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue$1(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p$3(33))}function Db$1(a){return a[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(a){return{current:a}}function E$1(a){0>Tf$1||(a.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$2(a,s){Tf$1++,Sf$1[Tf$1]=a.current,a.current=s}var Vf$1={},H$2=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(a,s){var c=a.type.contextTypes;if(!c)return Vf$1;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var et={},g;for(g in c)et[g]=s[g];return d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=s,a.__reactInternalMemoizedMaskedChildContext=et),et}function Zf$1(a){return a=a.childContextTypes,a!=null}function $f$1(){E$1(Wf$1),E$1(H$2)}function ag(a,s,c){if(H$2.current!==Vf$1)throw Error(p$3(168));G$2(H$2,s),G$2(Wf$1,c)}function bg$1(a,s,c){var d=a.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var et in d)if(!(et in s))throw Error(p$3(108,Ra(a)||"Unknown",et));return A({},c,d)}function cg$1(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$2.current,G$2(H$2,a),G$2(Wf$1,Wf$1.current),!0}function dg$1(a,s,c){var d=a.stateNode;if(!d)throw Error(p$3(169));c?(a=bg$1(a,s,Xf$1),d.__reactInternalMemoizedMergedChildContext=a,E$1(Wf$1),E$1(H$2),G$2(H$2,a)):E$1(Wf$1),G$2(Wf$1,c)}var eg=null,fg$1=!1,gg=!1;function hg$1(a){eg===null?eg=[a]:eg.push(a)}function ig$1(a){fg$1=!0,hg$1(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,s=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(d!==null)}eg=null,fg$1=!1}catch(et){throw eg!==null&&(eg=eg.slice(a+1)),ac$2(fc$2,jg),et}finally{C=s,gg=!1}}return null}var kg=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg=null,rg$1=1,sg$1="";function tg$1(a,s){kg[lg$1++]=ng$1,kg[lg$1++]=mg$1,mg$1=a,ng$1=s}function ug$1(a,s,c){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,qg=a;var d=rg$1;a=sg$1;var et=32-oc$2(d)-1;d&=~(1<<et),c+=1;var g=32-oc$2(s)+et;if(30<g){var at=et-et%5;g=(d&(1<<at)-1).toString(32),d>>=at,et-=at,rg$1=1<<32-oc$2(s)+et|c<<et|d,sg$1=g+a}else rg$1=1<<g|c<<et|d,sg$1=a}function vg$1(a){a.return!==null&&(tg$1(a,1),ug$1(a,1,0))}function wg$1(a){for(;a===mg$1;)mg$1=kg[--lg$1],kg[lg$1]=null,ng$1=kg[--lg$1],kg[lg$1]=null;for(;a===qg;)qg=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg=null,I=!1,zg=null;function Ag(a,s){var c=Bg(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=a,s=a.deletions,s===null?(a.deletions=[c],a.flags|=16):s.push(c)}function Cg(a,s){switch(a.tag){case 5:var c=a.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(a.stateNode=s,xg$1=a,yg=Lf$1(s.firstChild),!0):!1;case 6:return s=a.pendingProps===""||s.nodeType!==3?null:s,s!==null?(a.stateNode=s,xg$1=a,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=qg!==null?{id:rg$1,overflow:sg$1}:null,a.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=s,c.return=a,a.child=c,xg$1=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var s=yg;if(s){var c=s;if(!Cg(a,s)){if(Dg(a))throw Error(p$3(418));s=Lf$1(c.nextSibling);var d=xg$1;s&&Cg(a,s)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg$1=a)}}else{if(Dg(a))throw Error(p$3(418));a.flags=a.flags&-4097|2,I=!1,xg$1=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg$1=a}function Gg(a){if(a!==xg$1)return!1;if(!I)return Fg(a),I=!0,!1;var s;if((s=a.tag!==3)&&!(s=a.tag!==5)&&(s=a.type,s=s!=="head"&&s!=="body"&&!Ef$1(a.type,a.memoizedProps)),s&&(s=yg)){if(Dg(a))throw Hg(),Error(p$3(418));for(;s;)Ag(a,s),s=Lf$1(s.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p$3(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"){if(s===0){yg=Lf$1(a.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}a=a.nextSibling}yg=null}}else yg=xg$1?Lf$1(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf$1(a.nextSibling)}function Ig(){yg=xg$1=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua$2.ReactCurrentBatchConfig;function Lg(a,s,c){if(a=c.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(p$3(309));var d=c.stateNode}if(!d)throw Error(p$3(147,a));var et=d,g=""+a;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(at){var $t=et.refs;at===null?delete $t[g]:$t[g]=at},s._stringRef=g,s)}if(typeof a!="string")throw Error(p$3(284));if(!c._owner)throw Error(p$3(290,a))}return a}function Mg(a,s){throw a=Object.prototype.toString.call(s),Error(p$3(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a))}function Ng(a){var s=a._init;return s(a._payload)}function Og(a){function s(Ht,Gt){if(a){var Kt=Ht.deletions;Kt===null?(Ht.deletions=[Gt],Ht.flags|=16):Kt.push(Gt)}}function c(Ht,Gt){if(!a)return null;for(;Gt!==null;)s(Ht,Gt),Gt=Gt.sibling;return null}function d(Ht,Gt){for(Ht=new Map;Gt!==null;)Gt.key!==null?Ht.set(Gt.key,Gt):Ht.set(Gt.index,Gt),Gt=Gt.sibling;return Ht}function et(Ht,Gt){return Ht=Pg(Ht,Gt),Ht.index=0,Ht.sibling=null,Ht}function g(Ht,Gt,Kt){return Ht.index=Kt,a?(Kt=Ht.alternate,Kt!==null?(Kt=Kt.index,Kt<Gt?(Ht.flags|=2,Gt):Kt):(Ht.flags|=2,Gt)):(Ht.flags|=1048576,Gt)}function at(Ht){return a&&Ht.alternate===null&&(Ht.flags|=2),Ht}function $t(Ht,Gt,Kt,tr){return Gt===null||Gt.tag!==6?(Gt=Qg(Kt,Ht.mode,tr),Gt.return=Ht,Gt):(Gt=et(Gt,Kt),Gt.return=Ht,Gt)}function vt(Ht,Gt,Kt,tr){var rr=Kt.type;return rr===ya$1?pt(Ht,Gt,Kt.props.children,tr,Kt.key):Gt!==null&&(Gt.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===Ha$2&&Ng(rr)===Gt.type)?(tr=et(Gt,Kt.props),tr.ref=Lg(Ht,Gt,Kt),tr.return=Ht,tr):(tr=Rg(Kt.type,Kt.key,Kt.props,null,Ht.mode,tr),tr.ref=Lg(Ht,Gt,Kt),tr.return=Ht,tr)}function b(Ht,Gt,Kt,tr){return Gt===null||Gt.tag!==4||Gt.stateNode.containerInfo!==Kt.containerInfo||Gt.stateNode.implementation!==Kt.implementation?(Gt=Sg(Kt,Ht.mode,tr),Gt.return=Ht,Gt):(Gt=et(Gt,Kt.children||[]),Gt.return=Ht,Gt)}function pt(Ht,Gt,Kt,tr,rr){return Gt===null||Gt.tag!==7?(Gt=Tg$1(Kt,Ht.mode,tr,rr),Gt.return=Ht,Gt):(Gt=et(Gt,Kt),Gt.return=Ht,Gt)}function st(Ht,Gt,Kt){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number")return Gt=Qg(""+Gt,Ht.mode,Kt),Gt.return=Ht,Gt;if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case va$1:return Kt=Rg(Gt.type,Gt.key,Gt.props,null,Ht.mode,Kt),Kt.ref=Lg(Ht,null,Gt),Kt.return=Ht,Kt;case wa$1:return Gt=Sg(Gt,Ht.mode,Kt),Gt.return=Ht,Gt;case Ha$2:var tr=Gt._init;return st(Ht,tr(Gt._payload),Kt)}if(eb$1(Gt)||Ka$2(Gt))return Gt=Tg$1(Gt,Ht.mode,Kt,null),Gt.return=Ht,Gt;Mg(Ht,Gt)}return null}function wt(Ht,Gt,Kt,tr){var rr=Gt!==null?Gt.key:null;if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number")return rr!==null?null:$t(Ht,Gt,""+Kt,tr);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case va$1:return Kt.key===rr?vt(Ht,Gt,Kt,tr):null;case wa$1:return Kt.key===rr?b(Ht,Gt,Kt,tr):null;case Ha$2:return rr=Kt._init,wt(Ht,Gt,rr(Kt._payload),tr)}if(eb$1(Kt)||Ka$2(Kt))return rr!==null?null:pt(Ht,Gt,Kt,tr,null);Mg(Ht,Kt)}return null}function Tt(Ht,Gt,Kt,tr,rr){if(typeof tr=="string"&&tr!==""||typeof tr=="number")return Ht=Ht.get(Kt)||null,$t(Gt,Ht,""+tr,rr);if(typeof tr=="object"&&tr!==null){switch(tr.$$typeof){case va$1:return Ht=Ht.get(tr.key===null?Kt:tr.key)||null,vt(Gt,Ht,tr,rr);case wa$1:return Ht=Ht.get(tr.key===null?Kt:tr.key)||null,b(Gt,Ht,tr,rr);case Ha$2:var Lr=tr._init;return Tt(Ht,Gt,Kt,Lr(tr._payload),rr)}if(eb$1(tr)||Ka$2(tr))return Ht=Ht.get(Kt)||null,pt(Gt,Ht,tr,rr,null);Mg(Gt,tr)}return null}function Ct(Ht,Gt,Kt,tr){for(var rr=null,Lr=null,jr=Gt,Yr=Gt=0,An=null;jr!==null&&Yr<Kt.length;Yr++){jr.index>Yr?(An=jr,jr=null):An=jr.sibling;var No=wt(Ht,jr,Kt[Yr],tr);if(No===null){jr===null&&(jr=An);break}a&&jr&&No.alternate===null&&s(Ht,jr),Gt=g(No,Gt,Yr),Lr===null?rr=No:Lr.sibling=No,Lr=No,jr=An}if(Yr===Kt.length)return c(Ht,jr),I&&tg$1(Ht,Yr),rr;if(jr===null){for(;Yr<Kt.length;Yr++)jr=st(Ht,Kt[Yr],tr),jr!==null&&(Gt=g(jr,Gt,Yr),Lr===null?rr=jr:Lr.sibling=jr,Lr=jr);return I&&tg$1(Ht,Yr),rr}for(jr=d(Ht,jr);Yr<Kt.length;Yr++)An=Tt(jr,Ht,Yr,Kt[Yr],tr),An!==null&&(a&&An.alternate!==null&&jr.delete(An.key===null?Yr:An.key),Gt=g(An,Gt,Yr),Lr===null?rr=An:Lr.sibling=An,Lr=An);return a&&jr.forEach(function(o0){return s(Ht,o0)}),I&&tg$1(Ht,Yr),rr}function jt(Ht,Gt,Kt,tr){var rr=Ka$2(Kt);if(typeof rr!="function")throw Error(p$3(150));if(Kt=rr.call(Kt),Kt==null)throw Error(p$3(151));for(var Lr=rr=null,jr=Gt,Yr=Gt=0,An=null,No=Kt.next();jr!==null&&!No.done;Yr++,No=Kt.next()){jr.index>Yr?(An=jr,jr=null):An=jr.sibling;var o0=wt(Ht,jr,No.value,tr);if(o0===null){jr===null&&(jr=An);break}a&&jr&&o0.alternate===null&&s(Ht,jr),Gt=g(o0,Gt,Yr),Lr===null?rr=o0:Lr.sibling=o0,Lr=o0,jr=An}if(No.done)return c(Ht,jr),I&&tg$1(Ht,Yr),rr;if(jr===null){for(;!No.done;Yr++,No=Kt.next())No=st(Ht,No.value,tr),No!==null&&(Gt=g(No,Gt,Yr),Lr===null?rr=No:Lr.sibling=No,Lr=No);return I&&tg$1(Ht,Yr),rr}for(jr=d(Ht,jr);!No.done;Yr++,No=Kt.next())No=Tt(jr,Ht,Yr,No.value,tr),No!==null&&(a&&No.alternate!==null&&jr.delete(No.key===null?Yr:No.key),Gt=g(No,Gt,Yr),Lr===null?rr=No:Lr.sibling=No,Lr=No);return a&&jr.forEach(function(t0){return s(Ht,t0)}),I&&tg$1(Ht,Yr),rr}function Lt(Ht,Gt,Kt,tr){if(typeof Kt=="object"&&Kt!==null&&Kt.type===ya$1&&Kt.key===null&&(Kt=Kt.props.children),typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case va$1:e:{for(var rr=Kt.key,Lr=Gt;Lr!==null;){if(Lr.key===rr){if(rr=Kt.type,rr===ya$1){if(Lr.tag===7){c(Ht,Lr.sibling),Gt=et(Lr,Kt.props.children),Gt.return=Ht,Ht=Gt;break e}}else if(Lr.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===Ha$2&&Ng(rr)===Lr.type){c(Ht,Lr.sibling),Gt=et(Lr,Kt.props),Gt.ref=Lg(Ht,Lr,Kt),Gt.return=Ht,Ht=Gt;break e}c(Ht,Lr);break}else s(Ht,Lr);Lr=Lr.sibling}Kt.type===ya$1?(Gt=Tg$1(Kt.props.children,Ht.mode,tr,Kt.key),Gt.return=Ht,Ht=Gt):(tr=Rg(Kt.type,Kt.key,Kt.props,null,Ht.mode,tr),tr.ref=Lg(Ht,Gt,Kt),tr.return=Ht,Ht=tr)}return at(Ht);case wa$1:e:{for(Lr=Kt.key;Gt!==null;){if(Gt.key===Lr)if(Gt.tag===4&&Gt.stateNode.containerInfo===Kt.containerInfo&&Gt.stateNode.implementation===Kt.implementation){c(Ht,Gt.sibling),Gt=et(Gt,Kt.children||[]),Gt.return=Ht,Ht=Gt;break e}else{c(Ht,Gt);break}else s(Ht,Gt);Gt=Gt.sibling}Gt=Sg(Kt,Ht.mode,tr),Gt.return=Ht,Ht=Gt}return at(Ht);case Ha$2:return Lr=Kt._init,Lt(Ht,Gt,Lr(Kt._payload),tr)}if(eb$1(Kt))return Ct(Ht,Gt,Kt,tr);if(Ka$2(Kt))return jt(Ht,Gt,Kt,tr);Mg(Ht,Kt)}return typeof Kt=="string"&&Kt!==""||typeof Kt=="number"?(Kt=""+Kt,Gt!==null&&Gt.tag===6?(c(Ht,Gt.sibling),Gt=et(Gt,Kt),Gt.return=Ht,Ht=Gt):(c(Ht,Gt),Gt=Qg(Kt,Ht.mode,tr),Gt.return=Ht,Ht=Gt),at(Ht)):c(Ht,Gt)}return Lt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf$1(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var s=Wg.current;E$1(Wg),a._currentValue=s}function bh$1(a,s,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),a===c)break;a=a.return}}function ch$1(a,s){Xg=a,Zg=Yg=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&s&&(dh$1=!0),a.firstContext=null)}function eh$1(a){var s=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=a,Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return s}var fh=null;function gh$1(a){fh===null?fh=[a]:fh.push(a)}function hh$1(a,s,c,d){var et=s.interleaved;return et===null?(c.next=c,gh$1(s)):(c.next=et.next,et.next=c),s.interleaved=c,ih$1(a,d)}function ih$1(a,s){a.lanes|=s;var c=a.alternate;for(c!==null&&(c.lanes|=s),c=a,a=a.return;a!==null;)a.childLanes|=s,c=a.alternate,c!==null&&(c.childLanes|=s),c=a,a=a.return;return c.tag===3?c.stateNode:null}var jh$1=!1;function kh$1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh$1(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh$1(a,s){return{eventTime:a,lane:s,tag:0,payload:null,callback:null,next:null}}function nh$1(a,s,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,K$2&2){var et=d.pending;return et===null?s.next=s:(s.next=et.next,et.next=s),d.pending=s,ih$1(a,c)}return et=d.interleaved,et===null?(s.next=s,gh$1(d)):(s.next=et.next,et.next=s),d.interleaved=s,ih$1(a,c)}function oh$1(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var d=s.lanes;d&=a.pendingLanes,c|=d,s.lanes=c,Cc$2(a,c)}}function ph$1(a,s){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var et=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var at={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};g===null?et=g=at:g=g.next=at,c=c.next}while(c!==null);g===null?et=g=s:g=g.next=s}else et=g=s;c={baseState:d.baseState,firstBaseUpdate:et,lastBaseUpdate:g,shared:d.shared,effects:d.effects},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}function qh$1(a,s,c,d){var et=a.updateQueue;jh$1=!1;var g=et.firstBaseUpdate,at=et.lastBaseUpdate,$t=et.shared.pending;if($t!==null){et.shared.pending=null;var vt=$t,b=vt.next;vt.next=null,at===null?g=b:at.next=b,at=vt;var pt=a.alternate;pt!==null&&(pt=pt.updateQueue,$t=pt.lastBaseUpdate,$t!==at&&($t===null?pt.firstBaseUpdate=b:$t.next=b,pt.lastBaseUpdate=vt))}if(g!==null){var st=et.baseState;at=0,pt=b=vt=null,$t=g;do{var wt=$t.lane,Tt=$t.eventTime;if((d&wt)===wt){pt!==null&&(pt=pt.next={eventTime:Tt,lane:0,tag:$t.tag,payload:$t.payload,callback:$t.callback,next:null});e:{var Ct=a,jt=$t;switch(wt=s,Tt=c,jt.tag){case 1:if(Ct=jt.payload,typeof Ct=="function"){st=Ct.call(Tt,st,wt);break e}st=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=jt.payload,wt=typeof Ct=="function"?Ct.call(Tt,st,wt):Ct,wt==null)break e;st=A({},st,wt);break e;case 2:jh$1=!0}}$t.callback!==null&&$t.lane!==0&&(a.flags|=64,wt=et.effects,wt===null?et.effects=[$t]:wt.push($t))}else Tt={eventTime:Tt,lane:wt,tag:$t.tag,payload:$t.payload,callback:$t.callback,next:null},pt===null?(b=pt=Tt,vt=st):pt=pt.next=Tt,at|=wt;if($t=$t.next,$t===null){if($t=et.shared.pending,$t===null)break;wt=$t,$t=wt.next,wt.next=null,et.lastBaseUpdate=wt,et.shared.pending=null}}while(!0);if(pt===null&&(vt=st),et.baseState=vt,et.firstBaseUpdate=b,et.lastBaseUpdate=pt,s=et.shared.interleaved,s!==null){et=s;do at|=et.lane,et=et.next;while(et!==s)}else g===null&&(et.shared.lanes=0);rh$1|=at,a.lanes=at,a.memoizedState=st}}function sh$1(a,s,c){if(a=s.effects,s.effects=null,a!==null)for(s=0;s<a.length;s++){var d=a[s],et=d.callback;if(et!==null){if(d.callback=null,d=c,typeof et!="function")throw Error(p$3(191,et));et.call(d)}}}var th$1={},uh$1=Uf$1(th$1),vh$1=Uf$1(th$1),wh$1=Uf$1(th$1);function xh$1(a){if(a===th$1)throw Error(p$3(174));return a}function yh$1(a,s){switch(G$2(wh$1,s),G$2(vh$1,a),G$2(uh$1,th$1),a=s.nodeType,a){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb$1(null,"");break;default:a=a===8?s.parentNode:s,s=a.namespaceURI||null,a=a.tagName,s=lb$1(s,a)}E$1(uh$1),G$2(uh$1,s)}function zh$1(){E$1(uh$1),E$1(vh$1),E$1(wh$1)}function Ah$1(a){xh$1(wh$1.current);var s=xh$1(uh$1.current),c=lb$1(s,a.type);s!==c&&(G$2(vh$1,a),G$2(uh$1,c))}function Bh$1(a){vh$1.current===a&&(E$1(uh$1),E$1(vh$1))}var L$2=Uf$1(0);function Ch$1(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh$1=[];function Eh$1(){for(var a=0;a<Dh$1.length;a++)Dh$1[a]._workInProgressVersionPrimary=null;Dh$1.length=0}var Fh$1=ua$2.ReactCurrentDispatcher,Gh$1=ua$2.ReactCurrentBatchConfig,Hh$1=0,M$3=null,N$2=null,O$1=null,Ih=!1,Jh$1=!1,Kh$1=0,Lh$1=0;function P$1(){throw Error(p$3(321))}function Mh$1(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!He$1(a[c],s[c]))return!1;return!0}function Nh$1(a,s,c,d,et,g){if(Hh$1=g,M$3=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh$1.current=a===null||a.memoizedState===null?Oh$1:Ph$1,a=c(d,et),Jh$1){g=0;do{if(Jh$1=!1,Kh$1=0,25<=g)throw Error(p$3(301));g+=1,O$1=N$2=null,s.updateQueue=null,Fh$1.current=Qh$1,a=c(d,et)}while(Jh$1)}if(Fh$1.current=Rh$1,s=N$2!==null&&N$2.next!==null,Hh$1=0,O$1=N$2=M$3=null,Ih=!1,s)throw Error(p$3(300));return a}function Sh$1(){var a=Kh$1!==0;return Kh$1=0,a}function Th$1(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$3.memoizedState=O$1=a:O$1=O$1.next=a,O$1}function Uh$1(){if(N$2===null){var a=M$3.alternate;a=a!==null?a.memoizedState:null}else a=N$2.next;var s=O$1===null?M$3.memoizedState:O$1.next;if(s!==null)O$1=s,N$2=a;else{if(a===null)throw Error(p$3(310));N$2=a,a={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$1===null?M$3.memoizedState=O$1=a:O$1=O$1.next=a}return O$1}function Vh$1(a,s){return typeof s=="function"?s(a):s}function Wh$1(a){var s=Uh$1(),c=s.queue;if(c===null)throw Error(p$3(311));c.lastRenderedReducer=a;var d=N$2,et=d.baseQueue,g=c.pending;if(g!==null){if(et!==null){var at=et.next;et.next=g.next,g.next=at}d.baseQueue=et=g,c.pending=null}if(et!==null){g=et.next,d=d.baseState;var $t=at=null,vt=null,b=g;do{var pt=b.lane;if((Hh$1&pt)===pt)vt!==null&&(vt=vt.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),d=b.hasEagerState?b.eagerState:a(d,b.action);else{var st={lane:pt,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};vt===null?($t=vt=st,at=d):vt=vt.next=st,M$3.lanes|=pt,rh$1|=pt}b=b.next}while(b!==null&&b!==g);vt===null?at=d:vt.next=$t,He$1(d,s.memoizedState)||(dh$1=!0),s.memoizedState=d,s.baseState=at,s.baseQueue=vt,c.lastRenderedState=d}if(a=c.interleaved,a!==null){et=a;do g=et.lane,M$3.lanes|=g,rh$1|=g,et=et.next;while(et!==a)}else et===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Xh$1(a){var s=Uh$1(),c=s.queue;if(c===null)throw Error(p$3(311));c.lastRenderedReducer=a;var d=c.dispatch,et=c.pending,g=s.memoizedState;if(et!==null){c.pending=null;var at=et=et.next;do g=a(g,at.action),at=at.next;while(at!==et);He$1(g,s.memoizedState)||(dh$1=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),c.lastRenderedState=g}return[g,d]}function Yh$1(){}function Zh$1(a,s){var c=M$3,d=Uh$1(),et=s(),g=!He$1(d.memoizedState,et);if(g&&(d.memoizedState=et,dh$1=!0),d=d.queue,$h$1(ai$1.bind(null,c,d,a),[a]),d.getSnapshot!==s||g||O$1!==null&&O$1.memoizedState.tag&1){if(c.flags|=2048,bi$1(9,ci$1.bind(null,c,d,et,s),void 0,null),Q$3===null)throw Error(p$3(349));Hh$1&30||di$2(c,s,et)}return et}function di$2(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=M$3.updateQueue,s===null?(s={lastEffect:null,stores:null},M$3.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function ci$1(a,s,c,d){s.value=c,s.getSnapshot=d,ei$1(s)&&fi$2(a)}function ai$1(a,s,c){return c(function(){ei$1(s)&&fi$2(a)})}function ei$1(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!He$1(a,c)}catch{return!0}}function fi$2(a){var s=ih$1(a,1);s!==null&&gi$1(s,a,1,-1)}function hi$2(a){var s=Th$1();return typeof a=="function"&&(a=a()),s.memoizedState=s.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh$1,lastRenderedState:a},s.queue=a,a=a.dispatch=ii$1.bind(null,M$3,a),[s.memoizedState,a]}function bi$1(a,s,c,d){return a={tag:a,create:s,destroy:c,deps:d,next:null},s=M$3.updateQueue,s===null?(s={lastEffect:null,stores:null},M$3.updateQueue=s,s.lastEffect=a.next=a):(c=s.lastEffect,c===null?s.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,s.lastEffect=a)),a}function ji$2(){return Uh$1().memoizedState}function ki$1(a,s,c,d){var et=Th$1();M$3.flags|=a,et.memoizedState=bi$1(1|s,c,void 0,d===void 0?null:d)}function li$1(a,s,c,d){var et=Uh$1();d=d===void 0?null:d;var g=void 0;if(N$2!==null){var at=N$2.memoizedState;if(g=at.destroy,d!==null&&Mh$1(d,at.deps)){et.memoizedState=bi$1(s,c,g,d);return}}M$3.flags|=a,et.memoizedState=bi$1(1|s,c,g,d)}function mi$2(a,s){return ki$1(8390656,8,a,s)}function $h$1(a,s){return li$1(2048,8,a,s)}function ni$1(a,s){return li$1(4,2,a,s)}function oi$1(a,s){return li$1(4,4,a,s)}function pi$2(a,s){if(typeof s=="function")return a=a(),s(a),function(){s(null)};if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function qi$2(a,s,c){return c=c!=null?c.concat([a]):null,li$1(4,4,pi$2.bind(null,s,a),c)}function ri$1(){}function si$2(a,s){var c=Uh$1();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&Mh$1(s,d[1])?d[0]:(c.memoizedState=[a,s],a)}function ti$1(a,s){var c=Uh$1();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&Mh$1(s,d[1])?d[0]:(a=a(),c.memoizedState=[a,s],a)}function ui$1(a,s,c){return Hh$1&21?(He$1(c,s)||(c=yc$2(),M$3.lanes|=c,rh$1|=c,a.baseState=!0),s):(a.baseState&&(a.baseState=!1,dh$1=!0),a.memoizedState=c)}function vi$1(a,s){var c=C;C=c!==0&&4>c?c:4,a(!0);var d=Gh$1.transition;Gh$1.transition={};try{a(!1),s()}finally{C=c,Gh$1.transition=d}}function wi$1(){return Uh$1().memoizedState}function xi$1(a,s,c){var d=yi$1(a);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},zi$2(a))Ai$1(s,c);else if(c=hh$1(a,s,c,d),c!==null){var et=R$1();gi$1(c,a,d,et),Bi$2(c,s,d)}}function ii$1(a,s,c){var d=yi$1(a),et={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi$2(a))Ai$1(s,et);else{var g=a.alternate;if(a.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var at=s.lastRenderedState,$t=g(at,c);if(et.hasEagerState=!0,et.eagerState=$t,He$1($t,at)){var vt=s.interleaved;vt===null?(et.next=et,gh$1(s)):(et.next=vt.next,vt.next=et),s.interleaved=et;return}}catch{}finally{}c=hh$1(a,s,et,d),c!==null&&(et=R$1(),gi$1(c,a,d,et),Bi$2(c,s,d))}}function zi$2(a){var s=a.alternate;return a===M$3||s!==null&&s===M$3}function Ai$1(a,s){Jh$1=Ih=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function Bi$2(a,s,c){if(c&4194240){var d=s.lanes;d&=a.pendingLanes,c|=d,s.lanes=c,Cc$2(a,c)}}var Rh$1={readContext:eh$1,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh$1={readContext:eh$1,useCallback:function(a,s){return Th$1().memoizedState=[a,s===void 0?null:s],a},useContext:eh$1,useEffect:mi$2,useImperativeHandle:function(a,s,c){return c=c!=null?c.concat([a]):null,ki$1(4194308,4,pi$2.bind(null,s,a),c)},useLayoutEffect:function(a,s){return ki$1(4194308,4,a,s)},useInsertionEffect:function(a,s){return ki$1(4,2,a,s)},useMemo:function(a,s){var c=Th$1();return s=s===void 0?null:s,a=a(),c.memoizedState=[a,s],a},useReducer:function(a,s,c){var d=Th$1();return s=c!==void 0?c(s):s,d.memoizedState=d.baseState=s,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:s},d.queue=a,a=a.dispatch=xi$1.bind(null,M$3,a),[d.memoizedState,a]},useRef:function(a){var s=Th$1();return a={current:a},s.memoizedState=a},useState:hi$2,useDebugValue:ri$1,useDeferredValue:function(a){return Th$1().memoizedState=a},useTransition:function(){var a=hi$2(!1),s=a[0];return a=vi$1.bind(null,a[1]),Th$1().memoizedState=a,[s,a]},useMutableSource:function(){},useSyncExternalStore:function(a,s,c){var d=M$3,et=Th$1();if(I){if(c===void 0)throw Error(p$3(407));c=c()}else{if(c=s(),Q$3===null)throw Error(p$3(349));Hh$1&30||di$2(d,s,c)}et.memoizedState=c;var g={value:c,getSnapshot:s};return et.queue=g,mi$2(ai$1.bind(null,d,g,a),[a]),d.flags|=2048,bi$1(9,ci$1.bind(null,d,g,c,s),void 0,null),c},useId:function(){var a=Th$1(),s=Q$3.identifierPrefix;if(I){var c=sg$1,d=rg$1;c=(d&~(1<<32-oc$2(d)-1)).toString(32)+c,s=":"+s+"R"+c,c=Kh$1++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=Lh$1++,s=":"+s+"r"+c.toString(32)+":";return a.memoizedState=s},unstable_isNewReconciler:!1},Ph$1={readContext:eh$1,useCallback:si$2,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$2,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Wh$1,useRef:ji$2,useState:function(){return Wh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(a){var s=Uh$1();return ui$1(s,N$2.memoizedState,a)},useTransition:function(){var a=Wh$1(Vh$1)[0],s=Uh$1().memoizedState;return[a,s]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1},Qh$1={readContext:eh$1,useCallback:si$2,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$2,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Xh$1,useRef:ji$2,useState:function(){return Xh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(a){var s=Uh$1();return N$2===null?s.memoizedState=a:ui$1(s,N$2.memoizedState,a)},useTransition:function(){var a=Xh$1(Vh$1)[0],s=Uh$1().memoizedState;return[a,s]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1};function Ci$1(a,s){if(a&&a.defaultProps){s=A({},s),a=a.defaultProps;for(var c in a)s[c]===void 0&&(s[c]=a[c]);return s}return s}function Di$2(a,s,c,d){s=a.memoizedState,c=c(d,s),c=c==null?s:A({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Ei$1={isMounted:function(a){return(a=a._reactInternals)?Vb$1(a)===a:!1},enqueueSetState:function(a,s,c){a=a._reactInternals;var d=R$1(),et=yi$1(a),g=mh$1(d,et);g.payload=s,c!=null&&(g.callback=c),s=nh$1(a,g,et),s!==null&&(gi$1(s,a,et,d),oh$1(s,a,et))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var d=R$1(),et=yi$1(a),g=mh$1(d,et);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=nh$1(a,g,et),s!==null&&(gi$1(s,a,et,d),oh$1(s,a,et))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=R$1(),d=yi$1(a),et=mh$1(c,d);et.tag=2,s!=null&&(et.callback=s),s=nh$1(a,et,d),s!==null&&(gi$1(s,a,d,c),oh$1(s,a,d))}};function Fi$2(a,s,c,d,et,g,at){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,g,at):s.prototype&&s.prototype.isPureReactComponent?!Ie$1(c,d)||!Ie$1(et,g):!0}function Gi$2(a,s,c){var d=!1,et=Vf$1,g=s.contextType;return typeof g=="object"&&g!==null?g=eh$1(g):(et=Zf$1(s)?Xf$1:H$2.current,d=s.contextTypes,g=(d=d!=null)?Yf$1(a,et):Vf$1),s=new s(c,g),a.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei$1,a.stateNode=s,s._reactInternals=a,d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=et,a.__reactInternalMemoizedMaskedChildContext=g),s}function Hi$2(a,s,c,d){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==a&&Ei$1.enqueueReplaceState(s,s.state,null)}function Ii$1(a,s,c,d){var et=a.stateNode;et.props=c,et.state=a.memoizedState,et.refs={},kh$1(a);var g=s.contextType;typeof g=="object"&&g!==null?et.context=eh$1(g):(g=Zf$1(s)?Xf$1:H$2.current,et.context=Yf$1(a,g)),et.state=a.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Di$2(a,s,g,c),et.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof et.getSnapshotBeforeUpdate=="function"||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(s=et.state,typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount(),s!==et.state&&Ei$1.enqueueReplaceState(et,et.state,null),qh$1(a,c,et,d),et.state=a.memoizedState),typeof et.componentDidMount=="function"&&(a.flags|=4194308)}function Ji$2(a,s){try{var c="",d=s;do c+=Pa(d),d=d.return;while(d);var et=c}catch(g){et=`
Error generating stack: `+g.message+`
`+g.stack}return{value:a,source:s,stack:et,digest:null}}function Ki$2(a,s,c){return{value:a,source:null,stack:c??null,digest:s??null}}function Li$2(a,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var Mi$2=typeof WeakMap=="function"?WeakMap:Map;function Ni$1(a,s,c){c=mh$1(-1,c),c.tag=3,c.payload={element:null};var d=s.value;return c.callback=function(){Oi$2||(Oi$2=!0,Pi$2=d),Li$2(a,s)},c}function Qi$2(a,s,c){c=mh$1(-1,c),c.tag=3;var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var et=s.value;c.payload=function(){return d(et)},c.callback=function(){Li$2(a,s)}}var g=a.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(c.callback=function(){Li$2(a,s),typeof d!="function"&&(Ri$2===null?Ri$2=new Set([this]):Ri$2.add(this));var at=s.stack;this.componentDidCatch(s.value,{componentStack:at!==null?at:""})}),c}function Si$1(a,s,c){var d=a.pingCache;if(d===null){d=a.pingCache=new Mi$2;var et=new Set;d.set(s,et)}else et=d.get(s),et===void 0&&(et=new Set,d.set(s,et));et.has(c)||(et.add(c),a=Ti$1.bind(null,a,s,c),s.then(a,a))}function Ui$2(a){do{var s;if((s=a.tag===13)&&(s=a.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return a;a=a.return}while(a!==null);return null}function Vi$1(a,s,c,d,et){return a.mode&1?(a.flags|=65536,a.lanes=et,a):(a===s?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=mh$1(-1,1),s.tag=2,nh$1(c,s,1))),c.lanes|=1),a)}var Wi$2=ua$2.ReactCurrentOwner,dh$1=!1;function Xi$2(a,s,c,d){s.child=a===null?Vg(s,null,c,d):Ug(s,a.child,c,d)}function Yi$2(a,s,c,d,et){c=c.render;var g=s.ref;return ch$1(s,et),d=Nh$1(a,s,c,d,g,et),c=Sh$1(),a!==null&&!dh$1?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~et,Zi$2(a,s,et)):(I&&c&&vg$1(s),s.flags|=1,Xi$2(a,s,d,et),s.child)}function $i$1(a,s,c,d,et){if(a===null){var g=c.type;return typeof g=="function"&&!aj(g)&&g.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=g,bj(a,s,g,d,et)):(a=Rg(c.type,null,d,s,s.mode,et),a.ref=s.ref,a.return=s,s.child=a)}if(g=a.child,!(a.lanes&et)){var at=g.memoizedProps;if(c=c.compare,c=c!==null?c:Ie$1,c(at,d)&&a.ref===s.ref)return Zi$2(a,s,et)}return s.flags|=1,a=Pg(g,d),a.ref=s.ref,a.return=s,s.child=a}function bj(a,s,c,d,et){if(a!==null){var g=a.memoizedProps;if(Ie$1(g,d)&&a.ref===s.ref)if(dh$1=!1,s.pendingProps=d=g,(a.lanes&et)!==0)a.flags&131072&&(dh$1=!0);else return s.lanes=a.lanes,Zi$2(a,s,et)}return cj(a,s,c,d,et)}function dj(a,s,c){var d=s.pendingProps,et=d.children,g=a!==null?a.memoizedState:null;if(d.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(ej,fj),fj|=c;else{if(!(c&1073741824))return a=g!==null?g.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:a,cachePool:null,transitions:null},s.updateQueue=null,G$2(ej,fj),fj|=a,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:c,G$2(ej,fj),fj|=d}else g!==null?(d=g.baseLanes|c,s.memoizedState=null):d=c,G$2(ej,fj),fj|=d;return Xi$2(a,s,et,c),s.child}function gj(a,s){var c=s.ref;(a===null&&c!==null||a!==null&&a.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function cj(a,s,c,d,et){var g=Zf$1(c)?Xf$1:H$2.current;return g=Yf$1(s,g),ch$1(s,et),c=Nh$1(a,s,c,d,g,et),d=Sh$1(),a!==null&&!dh$1?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~et,Zi$2(a,s,et)):(I&&d&&vg$1(s),s.flags|=1,Xi$2(a,s,c,et),s.child)}function hj(a,s,c,d,et){if(Zf$1(c)){var g=!0;cg$1(s)}else g=!1;if(ch$1(s,et),s.stateNode===null)ij(a,s),Gi$2(s,c,d),Ii$1(s,c,d,et),d=!0;else if(a===null){var at=s.stateNode,$t=s.memoizedProps;at.props=$t;var vt=at.context,b=c.contextType;typeof b=="object"&&b!==null?b=eh$1(b):(b=Zf$1(c)?Xf$1:H$2.current,b=Yf$1(s,b));var pt=c.getDerivedStateFromProps,st=typeof pt=="function"||typeof at.getSnapshotBeforeUpdate=="function";st||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||($t!==d||vt!==b)&&Hi$2(s,at,d,b),jh$1=!1;var wt=s.memoizedState;at.state=wt,qh$1(s,d,at,et),vt=s.memoizedState,$t!==d||wt!==vt||Wf$1.current||jh$1?(typeof pt=="function"&&(Di$2(s,c,pt,d),vt=s.memoizedState),($t=jh$1||Fi$2(s,c,$t,d,wt,vt,b))?(st||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount()),typeof at.componentDidMount=="function"&&(s.flags|=4194308)):(typeof at.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=vt),at.props=d,at.state=vt,at.context=b,d=$t):(typeof at.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{at=s.stateNode,lh$1(a,s),$t=s.memoizedProps,b=s.type===s.elementType?$t:Ci$1(s.type,$t),at.props=b,st=s.pendingProps,wt=at.context,vt=c.contextType,typeof vt=="object"&&vt!==null?vt=eh$1(vt):(vt=Zf$1(c)?Xf$1:H$2.current,vt=Yf$1(s,vt));var Tt=c.getDerivedStateFromProps;(pt=typeof Tt=="function"||typeof at.getSnapshotBeforeUpdate=="function")||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||($t!==st||wt!==vt)&&Hi$2(s,at,d,vt),jh$1=!1,wt=s.memoizedState,at.state=wt,qh$1(s,d,at,et);var Ct=s.memoizedState;$t!==st||wt!==Ct||Wf$1.current||jh$1?(typeof Tt=="function"&&(Di$2(s,c,Tt,d),Ct=s.memoizedState),(b=jh$1||Fi$2(s,c,b,d,wt,Ct,vt)||!1)?(pt||typeof at.UNSAFE_componentWillUpdate!="function"&&typeof at.componentWillUpdate!="function"||(typeof at.componentWillUpdate=="function"&&at.componentWillUpdate(d,Ct,vt),typeof at.UNSAFE_componentWillUpdate=="function"&&at.UNSAFE_componentWillUpdate(d,Ct,vt)),typeof at.componentDidUpdate=="function"&&(s.flags|=4),typeof at.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof at.componentDidUpdate!="function"||$t===a.memoizedProps&&wt===a.memoizedState||(s.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||$t===a.memoizedProps&&wt===a.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Ct),at.props=d,at.state=Ct,at.context=vt,d=b):(typeof at.componentDidUpdate!="function"||$t===a.memoizedProps&&wt===a.memoizedState||(s.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||$t===a.memoizedProps&&wt===a.memoizedState||(s.flags|=1024),d=!1)}return jj(a,s,c,d,g,et)}function jj(a,s,c,d,et,g){gj(a,s);var at=(s.flags&128)!==0;if(!d&&!at)return et&&dg$1(s,c,!1),Zi$2(a,s,g);d=s.stateNode,Wi$2.current=s;var $t=at&&typeof c.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,a!==null&&at?(s.child=Ug(s,a.child,null,g),s.child=Ug(s,null,$t,g)):Xi$2(a,s,$t,g),s.memoizedState=d.state,et&&dg$1(s,c,!0),s.child}function kj(a){var s=a.stateNode;s.pendingContext?ag(a,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(a,s.context,!1),yh$1(a,s.containerInfo)}function lj(a,s,c,d,et){return Ig(),Jg(et),s.flags|=256,Xi$2(a,s,c,d),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}function oj(a,s,c){var d=s.pendingProps,et=L$2.current,g=!1,at=(s.flags&128)!==0,$t;if(($t=at)||($t=a!==null&&a.memoizedState===null?!1:(et&2)!==0),$t?(g=!0,s.flags&=-129):(a===null||a.memoizedState!==null)&&(et|=1),G$2(L$2,et&1),a===null)return Eg(s),a=s.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(s.mode&1?a.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(at=d.children,a=d.fallback,g?(d=s.mode,g=s.child,at={mode:"hidden",children:at},!(d&1)&&g!==null?(g.childLanes=0,g.pendingProps=at):g=pj(at,d,0,null),a=Tg$1(a,d,c,null),g.return=s,a.return=s,g.sibling=a,s.child=g,s.child.memoizedState=nj(c),s.memoizedState=mj,a):qj(s,at));if(et=a.memoizedState,et!==null&&($t=et.dehydrated,$t!==null))return rj(a,s,at,d,$t,et,c);if(g){g=d.fallback,at=s.mode,et=a.child,$t=et.sibling;var vt={mode:"hidden",children:d.children};return!(at&1)&&s.child!==et?(d=s.child,d.childLanes=0,d.pendingProps=vt,s.deletions=null):(d=Pg(et,vt),d.subtreeFlags=et.subtreeFlags&14680064),$t!==null?g=Pg($t,g):(g=Tg$1(g,at,c,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,at=a.child.memoizedState,at=at===null?nj(c):{baseLanes:at.baseLanes|c,cachePool:null,transitions:at.transitions},g.memoizedState=at,g.childLanes=a.childLanes&~c,s.memoizedState=mj,d}return g=a.child,a=g.sibling,d=Pg(g,{mode:"visible",children:d.children}),!(s.mode&1)&&(d.lanes=c),d.return=s,d.sibling=null,a!==null&&(c=s.deletions,c===null?(s.deletions=[a],s.flags|=16):c.push(a)),s.child=d,s.memoizedState=null,d}function qj(a,s){return s=pj({mode:"visible",children:s},a.mode,0,null),s.return=a,a.child=s}function sj(a,s,c,d){return d!==null&&Jg(d),Ug(s,a.child,null,c),a=qj(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function rj(a,s,c,d,et,g,at){if(c)return s.flags&256?(s.flags&=-257,d=Ki$2(Error(p$3(422))),sj(a,s,at,d)):s.memoizedState!==null?(s.child=a.child,s.flags|=128,null):(g=d.fallback,et=s.mode,d=pj({mode:"visible",children:d.children},et,0,null),g=Tg$1(g,et,at,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,s.mode&1&&Ug(s,a.child,null,at),s.child.memoizedState=nj(at),s.memoizedState=mj,g);if(!(s.mode&1))return sj(a,s,at,null);if(et.data==="$!"){if(d=et.nextSibling&&et.nextSibling.dataset,d)var $t=d.dgst;return d=$t,g=Error(p$3(419)),d=Ki$2(g,d,void 0),sj(a,s,at,d)}if($t=(at&a.childLanes)!==0,dh$1||$t){if(d=Q$3,d!==null){switch(at&-at){case 4:et=2;break;case 16:et=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:et=32;break;case 536870912:et=268435456;break;default:et=0}et=et&(d.suspendedLanes|at)?0:et,et!==0&&et!==g.retryLane&&(g.retryLane=et,ih$1(a,et),gi$1(d,a,et,-1))}return tj(),d=Ki$2(Error(p$3(421))),sj(a,s,at,d)}return et.data==="$?"?(s.flags|=128,s.child=a.child,s=uj.bind(null,a),et._reactRetry=s,null):(a=g.treeContext,yg=Lf$1(et.nextSibling),xg$1=s,I=!0,zg=null,a!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,rg$1=a.id,sg$1=a.overflow,qg=s),s=qj(s,d.children),s.flags|=4096,s)}function vj(a,s,c){a.lanes|=s;var d=a.alternate;d!==null&&(d.lanes|=s),bh$1(a.return,s,c)}function wj(a,s,c,d,et){var g=a.memoizedState;g===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:et}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=et)}function xj(a,s,c){var d=s.pendingProps,et=d.revealOrder,g=d.tail;if(Xi$2(a,s,d.children,c),d=L$2.current,d&2)d=d&1|2,s.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vj(a,c,s);else if(a.tag===19)vj(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(G$2(L$2,d),!(s.mode&1))s.memoizedState=null;else switch(et){case"forwards":for(c=s.child,et=null;c!==null;)a=c.alternate,a!==null&&Ch$1(a)===null&&(et=c),c=c.sibling;c=et,c===null?(et=s.child,s.child=null):(et=c.sibling,c.sibling=null),wj(s,!1,et,c,g);break;case"backwards":for(c=null,et=s.child,s.child=null;et!==null;){if(a=et.alternate,a!==null&&Ch$1(a)===null){s.child=et;break}a=et.sibling,et.sibling=c,c=et,et=a}wj(s,!0,c,null,g);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(a,s){!(s.mode&1)&&a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2)}function Zi$2(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),rh$1|=s.lanes,!(c&s.childLanes))return null;if(a!==null&&s.child!==a.child)throw Error(p$3(153));if(s.child!==null){for(a=s.child,c=Pg(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function yj(a,s,c){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah$1(s);break;case 1:Zf$1(s.type)&&cg$1(s);break;case 4:yh$1(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,et=s.memoizedProps.value;G$2(Wg,d._currentValue),d._currentValue=et;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(G$2(L$2,L$2.current&1),s.flags|=128,null):c&s.child.childLanes?oj(a,s,c):(G$2(L$2,L$2.current&1),a=Zi$2(a,s,c),a!==null?a.sibling:null);G$2(L$2,L$2.current&1);break;case 19:if(d=(c&s.childLanes)!==0,a.flags&128){if(d)return xj(a,s,c);s.flags|=128}if(et=s.memoizedState,et!==null&&(et.rendering=null,et.tail=null,et.lastEffect=null),G$2(L$2,L$2.current),d)break;return null;case 22:case 23:return s.lanes=0,dj(a,s,c)}return Zi$2(a,s,c)}var zj,Aj,Bj,Cj;zj=function(a,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)a.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};Aj=function(){};Bj=function(a,s,c,d){var et=a.memoizedProps;if(et!==d){a=s.stateNode,xh$1(uh$1.current);var g=null;switch(c){case"input":et=Ya$2(a,et),d=Ya$2(a,d),g=[];break;case"select":et=A({},et,{value:void 0}),d=A({},d,{value:void 0}),g=[];break;case"textarea":et=gb$1(a,et),d=gb$1(a,d),g=[];break;default:typeof et.onClick!="function"&&typeof d.onClick=="function"&&(a.onclick=Bf$1)}ub$1(c,d);var at;c=null;for(b in et)if(!d.hasOwnProperty(b)&&et.hasOwnProperty(b)&&et[b]!=null)if(b==="style"){var $t=et[b];for(at in $t)$t.hasOwnProperty(at)&&(c||(c={}),c[at]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea$1.hasOwnProperty(b)?g||(g=[]):(g=g||[]).push(b,null));for(b in d){var vt=d[b];if($t=et!=null?et[b]:void 0,d.hasOwnProperty(b)&&vt!==$t&&(vt!=null||$t!=null))if(b==="style")if($t){for(at in $t)!$t.hasOwnProperty(at)||vt&&vt.hasOwnProperty(at)||(c||(c={}),c[at]="");for(at in vt)vt.hasOwnProperty(at)&&$t[at]!==vt[at]&&(c||(c={}),c[at]=vt[at])}else c||(g||(g=[]),g.push(b,c)),c=vt;else b==="dangerouslySetInnerHTML"?(vt=vt?vt.__html:void 0,$t=$t?$t.__html:void 0,vt!=null&&$t!==vt&&(g=g||[]).push(b,vt)):b==="children"?typeof vt!="string"&&typeof vt!="number"||(g=g||[]).push(b,""+vt):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(b)?(vt!=null&&b==="onScroll"&&D$2("scroll",a),g||$t===vt||(g=[])):(g=g||[]).push(b,vt))}c&&(g=g||[]).push("style",c);var b=g;(s.updateQueue=b)&&(s.flags|=4)}};Cj=function(a,s,c,d){c!==d&&(s.flags|=4)};function Dj(a,s){if(!I)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function S(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(s)for(var et=a.child;et!==null;)c|=et.lanes|et.childLanes,d|=et.subtreeFlags&14680064,d|=et.flags&14680064,et.return=a,et=et.sibling;else for(et=a.child;et!==null;)c|=et.lanes|et.childLanes,d|=et.subtreeFlags,d|=et.flags,et.return=a,et=et.sibling;return a.subtreeFlags|=d,a.childLanes=c,s}function Ej(a,s,c){var d=s.pendingProps;switch(wg$1(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf$1(s.type)&&$f$1(),S(s),null;case 3:return d=s.stateNode,zh$1(),E$1(Wf$1),E$1(H$2),Eh$1(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Gg(s)?s.flags|=4:a===null||a.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(a,s),S(s),null;case 5:Bh$1(s);var et=xh$1(wh$1.current);if(c=s.type,a!==null&&s.stateNode!=null)Bj(a,s,c,d,et),a.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(p$3(166));return S(s),null}if(a=xh$1(uh$1.current),Gg(s)){d=s.stateNode,c=s.type;var g=s.memoizedProps;switch(d[Of$1]=s,d[Pf$1]=g,a=(s.mode&1)!==0,c){case"dialog":D$2("cancel",d),D$2("close",d);break;case"iframe":case"object":case"embed":D$2("load",d);break;case"video":case"audio":for(et=0;et<lf$2.length;et++)D$2(lf$2[et],d);break;case"source":D$2("error",d);break;case"img":case"image":case"link":D$2("error",d),D$2("load",d);break;case"details":D$2("toggle",d);break;case"input":Za$2(d,g),D$2("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},D$2("invalid",d);break;case"textarea":hb$1(d,g),D$2("invalid",d)}ub$1(c,g),et=null;for(var at in g)if(g.hasOwnProperty(at)){var $t=g[at];at==="children"?typeof $t=="string"?d.textContent!==$t&&(g.suppressHydrationWarning!==!0&&Af$1(d.textContent,$t,a),et=["children",$t]):typeof $t=="number"&&d.textContent!==""+$t&&(g.suppressHydrationWarning!==!0&&Af$1(d.textContent,$t,a),et=["children",""+$t]):ea$1.hasOwnProperty(at)&&$t!=null&&at==="onScroll"&&D$2("scroll",d)}switch(c){case"input":Va$2(d),db$1(d,g,!0);break;case"textarea":Va$2(d),jb$1(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Bf$1)}d=et,s.updateQueue=d,d!==null&&(s.flags|=4)}else{at=et.nodeType===9?et:et.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb$1(c)),a==="http://www.w3.org/1999/xhtml"?c==="script"?(a=at.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof d.is=="string"?a=at.createElement(c,{is:d.is}):(a=at.createElement(c),c==="select"&&(at=a,d.multiple?at.multiple=!0:d.size&&(at.size=d.size))):a=at.createElementNS(a,c),a[Of$1]=s,a[Pf$1]=d,zj(a,s,!1,!1),s.stateNode=a;e:{switch(at=vb$1(c,d),c){case"dialog":D$2("cancel",a),D$2("close",a),et=d;break;case"iframe":case"object":case"embed":D$2("load",a),et=d;break;case"video":case"audio":for(et=0;et<lf$2.length;et++)D$2(lf$2[et],a);et=d;break;case"source":D$2("error",a),et=d;break;case"img":case"image":case"link":D$2("error",a),D$2("load",a),et=d;break;case"details":D$2("toggle",a),et=d;break;case"input":Za$2(a,d),et=Ya$2(a,d),D$2("invalid",a);break;case"option":et=d;break;case"select":a._wrapperState={wasMultiple:!!d.multiple},et=A({},d,{value:void 0}),D$2("invalid",a);break;case"textarea":hb$1(a,d),et=gb$1(a,d),D$2("invalid",a);break;default:et=d}ub$1(c,et),$t=et;for(g in $t)if($t.hasOwnProperty(g)){var vt=$t[g];g==="style"?sb$1(a,vt):g==="dangerouslySetInnerHTML"?(vt=vt?vt.__html:void 0,vt!=null&&nb$1(a,vt)):g==="children"?typeof vt=="string"?(c!=="textarea"||vt!=="")&&ob$1(a,vt):typeof vt=="number"&&ob$1(a,""+vt):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea$1.hasOwnProperty(g)?vt!=null&&g==="onScroll"&&D$2("scroll",a):vt!=null&&ta$1(a,g,vt,at))}switch(c){case"input":Va$2(a),db$1(a,d,!1);break;case"textarea":Va$2(a),jb$1(a);break;case"option":d.value!=null&&a.setAttribute("value",""+Sa$1(d.value));break;case"select":a.multiple=!!d.multiple,g=d.value,g!=null?fb$1(a,!!d.multiple,g,!1):d.defaultValue!=null&&fb$1(a,!!d.multiple,d.defaultValue,!0);break;default:typeof et.onClick=="function"&&(a.onclick=Bf$1)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(a&&s.stateNode!=null)Cj(a,s,a.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(p$3(166));if(c=xh$1(wh$1.current),xh$1(uh$1.current),Gg(s)){if(d=s.stateNode,c=s.memoizedProps,d[Of$1]=s,(g=d.nodeValue!==c)&&(a=xg$1,a!==null))switch(a.tag){case 3:Af$1(d.nodeValue,c,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af$1(d.nodeValue,c,(a.mode&1)!==0)}g&&(s.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[Of$1]=s,s.stateNode=d}return S(s),null;case 13:if(E$1(L$2),d=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,g=!1;else if(g=Gg(s),d!==null&&d.dehydrated!==null){if(a===null){if(!g)throw Error(p$3(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(p$3(317));g[Of$1]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),g=!1}else zg!==null&&(Fj(zg),zg=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=c,s):(d=d!==null,d!==(a!==null&&a.memoizedState!==null)&&d&&(s.child.flags|=8192,s.mode&1&&(a===null||L$2.current&1?T$2===0&&(T$2=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh$1(),Aj(a,s),a===null&&sf$2(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf$1(s.type)&&$f$1(),S(s),null;case 19:if(E$1(L$2),g=s.memoizedState,g===null)return S(s),null;if(d=(s.flags&128)!==0,at=g.rendering,at===null)if(d)Dj(g,!1);else{if(T$2!==0||a!==null&&a.flags&128)for(a=s.child;a!==null;){if(at=Ch$1(a),at!==null){for(s.flags|=128,Dj(g,!1),d=at.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=c,c=s.child;c!==null;)g=c,a=d,g.flags&=14680066,at=g.alternate,at===null?(g.childLanes=0,g.lanes=a,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=at.childLanes,g.lanes=at.lanes,g.child=at.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=at.memoizedProps,g.memoizedState=at.memoizedState,g.updateQueue=at.updateQueue,g.type=at.type,a=at.dependencies,g.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;return G$2(L$2,L$2.current&1|2),s.child}a=a.sibling}g.tail!==null&&B$2()>Gj&&(s.flags|=128,d=!0,Dj(g,!1),s.lanes=4194304)}else{if(!d)if(a=Ch$1(at),a!==null){if(s.flags|=128,d=!0,c=a.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),Dj(g,!0),g.tail===null&&g.tailMode==="hidden"&&!at.alternate&&!I)return S(s),null}else 2*B$2()-g.renderingStartTime>Gj&&c!==1073741824&&(s.flags|=128,d=!0,Dj(g,!1),s.lanes=4194304);g.isBackwards?(at.sibling=s.child,s.child=at):(c=g.last,c!==null?c.sibling=at:s.child=at,g.last=at)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=B$2(),s.sibling=null,c=L$2.current,G$2(L$2,d?c&1|2:c&1),s):(S(s),null);case 22:case 23:return Hj(),d=s.memoizedState!==null,a!==null&&a.memoizedState!==null!==d&&(s.flags|=8192),d&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p$3(156,s.tag))}function Ij(a,s){switch(wg$1(s),s.tag){case 1:return Zf$1(s.type)&&$f$1(),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return zh$1(),E$1(Wf$1),E$1(H$2),Eh$1(),a=s.flags,a&65536&&!(a&128)?(s.flags=a&-65537|128,s):null;case 5:return Bh$1(s),null;case 13:if(E$1(L$2),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(p$3(340));Ig()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return E$1(L$2),null;case 4:return zh$1(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$4=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(a,s){var c=a.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){W$1(a,s,d)}else c.current=null}function Mj(a,s,c){try{c()}catch(d){W$1(a,s,d)}}var Nj=!1;function Oj(a,s){if(Cf$1=dd$2,a=Me$2(),Ne$1(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var et=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var at=0,$t=-1,vt=-1,b=0,pt=0,st=a,wt=null;t:for(;;){for(var Tt;st!==c||et!==0&&st.nodeType!==3||($t=at+et),st!==g||d!==0&&st.nodeType!==3||(vt=at+d),st.nodeType===3&&(at+=st.nodeValue.length),(Tt=st.firstChild)!==null;)wt=st,st=Tt;for(;;){if(st===a)break t;if(wt===c&&++b===et&&($t=at),wt===g&&++pt===d&&(vt=at),(Tt=st.nextSibling)!==null)break;st=wt,wt=st.parentNode}st=Tt}c=$t===-1||vt===-1?null:{start:$t,end:vt}}else c=null}c=c||{start:0,end:0}}else c=null;for(Df$1={focusedElem:a,selectionRange:c},dd$2=!1,V$2=s;V$2!==null;)if(s=V$2,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,V$2=a;else for(;V$2!==null;){s=V$2;try{var Ct=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var jt=Ct.memoizedProps,Lt=Ct.memoizedState,Ht=s.stateNode,Gt=Ht.getSnapshotBeforeUpdate(s.elementType===s.type?jt:Ci$1(s.type,jt),Lt);Ht.__reactInternalSnapshotBeforeUpdate=Gt}break;case 3:var Kt=s.stateNode.containerInfo;Kt.nodeType===1?Kt.textContent="":Kt.nodeType===9&&Kt.documentElement&&Kt.removeChild(Kt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(tr){W$1(s,s.return,tr)}if(a=s.sibling,a!==null){a.return=s.return,V$2=a;break}V$2=s.return}return Ct=Nj,Nj=!1,Ct}function Pj(a,s,c){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var et=d=d.next;do{if((et.tag&a)===a){var g=et.destroy;et.destroy=void 0,g!==void 0&&Mj(s,c,g)}et=et.next}while(et!==d)}}function Qj(a,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==s)}}function Rj(a){var s=a.ref;if(s!==null){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}typeof s=="function"?s(a):s.current=a}}function Sj(a){var s=a.alternate;s!==null&&(a.alternate=null,Sj(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&(delete s[Of$1],delete s[Pf$1],delete s[of$2],delete s[Qf$1],delete s[Rf$1])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Tj(a){return a.tag===5||a.tag===3||a.tag===4}function Uj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Tj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Vj(a,s,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(a,s):c.insertBefore(a,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(a,c)):(s=c,s.appendChild(a)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Bf$1));else if(d!==4&&(a=a.child,a!==null))for(Vj(a,s,c),a=a.sibling;a!==null;)Vj(a,s,c),a=a.sibling}function Wj(a,s,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(d!==4&&(a=a.child,a!==null))for(Wj(a,s,c),a=a.sibling;a!==null;)Wj(a,s,c),a=a.sibling}var X$3=null,Xj=!1;function Yj(a,s,c){for(c=c.child;c!==null;)Zj(a,s,c),c=c.sibling}function Zj(a,s,c){if(lc$2&&typeof lc$2.onCommitFiberUnmount=="function")try{lc$2.onCommitFiberUnmount(kc$2,c)}catch{}switch(c.tag){case 5:U$4||Lj(c,s);case 6:var d=X$3,et=Xj;X$3=null,Yj(a,s,c),X$3=d,Xj=et,X$3!==null&&(Xj?(a=X$3,c=c.stateNode,a.nodeType===8?a.parentNode.removeChild(c):a.removeChild(c)):X$3.removeChild(c.stateNode));break;case 18:X$3!==null&&(Xj?(a=X$3,c=c.stateNode,a.nodeType===8?Kf$1(a.parentNode,c):a.nodeType===1&&Kf$1(a,c),bd$1(a)):Kf$1(X$3,c.stateNode));break;case 4:d=X$3,et=Xj,X$3=c.stateNode.containerInfo,Xj=!0,Yj(a,s,c),X$3=d,Xj=et;break;case 0:case 11:case 14:case 15:if(!U$4&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){et=d=d.next;do{var g=et,at=g.destroy;g=g.tag,at!==void 0&&(g&2||g&4)&&Mj(c,s,at),et=et.next}while(et!==d)}Yj(a,s,c);break;case 1:if(!U$4&&(Lj(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch($t){W$1(c,s,$t)}Yj(a,s,c);break;case 21:Yj(a,s,c);break;case 22:c.mode&1?(U$4=(d=U$4)||c.memoizedState!==null,Yj(a,s,c),U$4=d):Yj(a,s,c);break;default:Yj(a,s,c)}}function ak(a){var s=a.updateQueue;if(s!==null){a.updateQueue=null;var c=a.stateNode;c===null&&(c=a.stateNode=new Kj),s.forEach(function(d){var et=bk.bind(null,a,d);c.has(d)||(c.add(d),d.then(et,et))})}}function ck(a,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var et=c[d];try{var g=a,at=s,$t=at;e:for(;$t!==null;){switch($t.tag){case 5:X$3=$t.stateNode,Xj=!1;break e;case 3:X$3=$t.stateNode.containerInfo,Xj=!0;break e;case 4:X$3=$t.stateNode.containerInfo,Xj=!0;break e}$t=$t.return}if(X$3===null)throw Error(p$3(160));Zj(g,at,et),X$3=null,Xj=!1;var vt=et.alternate;vt!==null&&(vt.return=null),et.return=null}catch(b){W$1(et,s,b)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,a),s=s.sibling}function dk(a,s){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ck(s,a),ek(a),d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(jt){W$1(a,a.return,jt)}try{Pj(5,a,a.return)}catch(jt){W$1(a,a.return,jt)}}break;case 1:ck(s,a),ek(a),d&512&&c!==null&&Lj(c,c.return);break;case 5:if(ck(s,a),ek(a),d&512&&c!==null&&Lj(c,c.return),a.flags&32){var et=a.stateNode;try{ob$1(et,"")}catch(jt){W$1(a,a.return,jt)}}if(d&4&&(et=a.stateNode,et!=null)){var g=a.memoizedProps,at=c!==null?c.memoizedProps:g,$t=a.type,vt=a.updateQueue;if(a.updateQueue=null,vt!==null)try{$t==="input"&&g.type==="radio"&&g.name!=null&&ab$1(et,g),vb$1($t,at);var b=vb$1($t,g);for(at=0;at<vt.length;at+=2){var pt=vt[at],st=vt[at+1];pt==="style"?sb$1(et,st):pt==="dangerouslySetInnerHTML"?nb$1(et,st):pt==="children"?ob$1(et,st):ta$1(et,pt,st,b)}switch($t){case"input":bb$1(et,g);break;case"textarea":ib$1(et,g);break;case"select":var wt=et._wrapperState.wasMultiple;et._wrapperState.wasMultiple=!!g.multiple;var Tt=g.value;Tt!=null?fb$1(et,!!g.multiple,Tt,!1):wt!==!!g.multiple&&(g.defaultValue!=null?fb$1(et,!!g.multiple,g.defaultValue,!0):fb$1(et,!!g.multiple,g.multiple?[]:"",!1))}et[Pf$1]=g}catch(jt){W$1(a,a.return,jt)}}break;case 6:if(ck(s,a),ek(a),d&4){if(a.stateNode===null)throw Error(p$3(162));et=a.stateNode,g=a.memoizedProps;try{et.nodeValue=g}catch(jt){W$1(a,a.return,jt)}}break;case 3:if(ck(s,a),ek(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{bd$1(s.containerInfo)}catch(jt){W$1(a,a.return,jt)}break;case 4:ck(s,a),ek(a);break;case 13:ck(s,a),ek(a),et=a.child,et.flags&8192&&(g=et.memoizedState!==null,et.stateNode.isHidden=g,!g||et.alternate!==null&&et.alternate.memoizedState!==null||(fk=B$2())),d&4&&ak(a);break;case 22:if(pt=c!==null&&c.memoizedState!==null,a.mode&1?(U$4=(b=U$4)||pt,ck(s,a),U$4=b):ck(s,a),ek(a),d&8192){if(b=a.memoizedState!==null,(a.stateNode.isHidden=b)&&!pt&&a.mode&1)for(V$2=a,pt=a.child;pt!==null;){for(st=V$2=pt;V$2!==null;){switch(wt=V$2,Tt=wt.child,wt.tag){case 0:case 11:case 14:case 15:Pj(4,wt,wt.return);break;case 1:Lj(wt,wt.return);var Ct=wt.stateNode;if(typeof Ct.componentWillUnmount=="function"){d=wt,c=wt.return;try{s=d,Ct.props=s.memoizedProps,Ct.state=s.memoizedState,Ct.componentWillUnmount()}catch(jt){W$1(d,c,jt)}}break;case 5:Lj(wt,wt.return);break;case 22:if(wt.memoizedState!==null){gk(st);continue}}Tt!==null?(Tt.return=wt,V$2=Tt):gk(st)}pt=pt.sibling}e:for(pt=null,st=a;;){if(st.tag===5){if(pt===null){pt=st;try{et=st.stateNode,b?(g=et.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):($t=st.stateNode,vt=st.memoizedProps.style,at=vt!=null&&vt.hasOwnProperty("display")?vt.display:null,$t.style.display=rb$1("display",at))}catch(jt){W$1(a,a.return,jt)}}}else if(st.tag===6){if(pt===null)try{st.stateNode.nodeValue=b?"":st.memoizedProps}catch(jt){W$1(a,a.return,jt)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===a)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===a)break e;for(;st.sibling===null;){if(st.return===null||st.return===a)break e;pt===st&&(pt=null),st=st.return}pt===st&&(pt=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:ck(s,a),ek(a),d&4&&ak(a);break;case 21:break;default:ck(s,a),ek(a)}}function ek(a){var s=a.flags;if(s&2){try{e:{for(var c=a.return;c!==null;){if(Tj(c)){var d=c;break e}c=c.return}throw Error(p$3(160))}switch(d.tag){case 5:var et=d.stateNode;d.flags&32&&(ob$1(et,""),d.flags&=-33);var g=Uj(a);Wj(a,g,et);break;case 3:case 4:var at=d.stateNode.containerInfo,$t=Uj(a);Vj(a,$t,at);break;default:throw Error(p$3(161))}}catch(vt){W$1(a,a.return,vt)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function hk(a,s,c){V$2=a,ik(a)}function ik(a,s,c){for(var d=(a.mode&1)!==0;V$2!==null;){var et=V$2,g=et.child;if(et.tag===22&&d){var at=et.memoizedState!==null||Jj;if(!at){var $t=et.alternate,vt=$t!==null&&$t.memoizedState!==null||U$4;$t=Jj;var b=U$4;if(Jj=at,(U$4=vt)&&!b)for(V$2=et;V$2!==null;)at=V$2,vt=at.child,at.tag===22&&at.memoizedState!==null?jk(et):vt!==null?(vt.return=at,V$2=vt):jk(et);for(;g!==null;)V$2=g,ik(g),g=g.sibling;V$2=et,Jj=$t,U$4=b}kk(a)}else et.subtreeFlags&8772&&g!==null?(g.return=et,V$2=g):kk(a)}}function kk(a){for(;V$2!==null;){var s=V$2;if(s.flags&8772){var c=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U$4||Qj(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!U$4)if(c===null)d.componentDidMount();else{var et=s.elementType===s.type?c.memoizedProps:Ci$1(s.type,c.memoizedProps);d.componentDidUpdate(et,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&sh$1(s,g,d);break;case 3:var at=s.updateQueue;if(at!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}sh$1(s,at,c)}break;case 5:var $t=s.stateNode;if(c===null&&s.flags&4){c=$t;var vt=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":vt.autoFocus&&c.focus();break;case"img":vt.src&&(c.src=vt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var b=s.alternate;if(b!==null){var pt=b.memoizedState;if(pt!==null){var st=pt.dehydrated;st!==null&&bd$1(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||s.flags&512&&Rj(s)}catch(wt){W$1(s,s.return,wt)}}if(s===a){V$2=null;break}if(c=s.sibling,c!==null){c.return=s.return,V$2=c;break}V$2=s.return}}function gk(a){for(;V$2!==null;){var s=V$2;if(s===a){V$2=null;break}var c=s.sibling;if(c!==null){c.return=s.return,V$2=c;break}V$2=s.return}}function jk(a){for(;V$2!==null;){var s=V$2;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{Qj(4,s)}catch(vt){W$1(s,c,vt)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var et=s.return;try{d.componentDidMount()}catch(vt){W$1(s,et,vt)}}var g=s.return;try{Rj(s)}catch(vt){W$1(s,g,vt)}break;case 5:var at=s.return;try{Rj(s)}catch(vt){W$1(s,at,vt)}}}catch(vt){W$1(s,s.return,vt)}if(s===a){V$2=null;break}var $t=s.sibling;if($t!==null){$t.return=s.return,V$2=$t;break}V$2=s.return}}var lk=Math.ceil,mk=ua$2.ReactCurrentDispatcher,nk=ua$2.ReactCurrentOwner,ok=ua$2.ReactCurrentBatchConfig,K$2=0,Q$3=null,Y$2=null,Z$2=0,fj=0,ej=Uf$1(0),T$2=0,pk=null,rh$1=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi$2=!1,Pi$2=null,Ri$2=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$2&6?B$2():Ak!==-1?Ak:Ak=B$2()}function yi$1(a){return a.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc$2()),Bk):(a=C,a!==0||(a=window.event,a=a===void 0?16:jd$2(a.type)),a):1}function gi$1(a,s,c,d){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac$2(a,c,d),(!(K$2&2)||a!==Q$3)&&(a===Q$3&&(!(K$2&2)&&(qk|=c),T$2===4&&Ck(a,Z$2)),Dk(a,d),c===1&&K$2===0&&!(s.mode&1)&&(Gj=B$2()+500,fg$1&&jg()))}function Dk(a,s){var c=a.callbackNode;wc$2(a,s);var d=uc$2(a,a===Q$3?Z$2:0);if(d===0)c!==null&&bc$2(c),a.callbackNode=null,a.callbackPriority=0;else if(s=d&-d,a.callbackPriority!==s){if(c!=null&&bc$2(c),s===1)a.tag===0?ig$1(Ek.bind(null,a)):hg$1(Ek.bind(null,a)),Jf$1(function(){!(K$2&6)&&jg()}),c=null;else{switch(Dc$2(d)){case 1:c=fc$2;break;case 4:c=gc$2;break;case 16:c=hc$1;break;case 536870912:c=jc$2;break;default:c=hc$1}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=s,a.callbackNode=c}}function Gk(a,s){if(Ak=-1,Bk=0,K$2&6)throw Error(p$3(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc$2(a,a===Q$3?Z$2:0);if(d===0)return null;if(d&30||d&a.expiredLanes||s)s=Ik(a,d);else{s=d;var et=K$2;K$2|=2;var g=Jk();(Q$3!==a||Z$2!==s)&&(uk=null,Gj=B$2()+500,Kk(a,s));do try{Lk();break}catch($t){Mk(a,$t)}while(!0);$g(),mk.current=g,K$2=et,Y$2!==null?s=0:(Q$3=null,Z$2=0,s=T$2)}if(s!==0){if(s===2&&(et=xc$2(a),et!==0&&(d=et,s=Nk(a,et))),s===1)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B$2()),c;if(s===6)Ck(a,d);else{if(et=a.current.alternate,!(d&30)&&!Ok(et)&&(s=Ik(a,d),s===2&&(g=xc$2(a),g!==0&&(d=g,s=Nk(a,g))),s===1))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B$2()),c;switch(a.finishedWork=et,a.finishedLanes=d,s){case 0:case 1:throw Error(p$3(345));case 2:Pk(a,tk,uk);break;case 3:if(Ck(a,d),(d&130023424)===d&&(s=fk+500-B$2(),10<s)){if(uc$2(a,0)!==0)break;if(et=a.suspendedLanes,(et&d)!==d){R$1(),a.pingedLanes|=a.suspendedLanes&et;break}a.timeoutHandle=Ff$1(Pk.bind(null,a,tk,uk),s);break}Pk(a,tk,uk);break;case 4:if(Ck(a,d),(d&4194240)===d)break;for(s=a.eventTimes,et=-1;0<d;){var at=31-oc$2(d);g=1<<at,at=s[at],at>et&&(et=at),d&=~g}if(d=et,d=B$2()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*lk(d/1960))-d,10<d){a.timeoutHandle=Ff$1(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p$3(329))}}}return Dk(a,B$2()),a.callbackNode===c?Gk.bind(null,a):null}function Nk(a,s){var c=sk;return a.current.memoizedState.isDehydrated&&(Kk(a,s).flags|=256),a=Ik(a,s),a!==2&&(s=tk,tk=c,s!==null&&Fj(s)),a}function Fj(a){tk===null?tk=a:tk.push.apply(tk,a)}function Ok(a){for(var s=a;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var et=c[d],g=et.getSnapshot;et=et.value;try{if(!He$1(g(),et))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(a,s){for(s&=~rk,s&=~qk,a.suspendedLanes|=s,a.pingedLanes&=~s,a=a.expirationTimes;0<s;){var c=31-oc$2(s),d=1<<c;a[c]=-1,s&=~d}}function Ek(a){if(K$2&6)throw Error(p$3(327));Hk();var s=uc$2(a,0);if(!(s&1))return Dk(a,B$2()),null;var c=Ik(a,s);if(a.tag!==0&&c===2){var d=xc$2(a);d!==0&&(s=d,c=Nk(a,d))}if(c===1)throw c=pk,Kk(a,0),Ck(a,s),Dk(a,B$2()),c;if(c===6)throw Error(p$3(345));return a.finishedWork=a.current.alternate,a.finishedLanes=s,Pk(a,tk,uk),Dk(a,B$2()),null}function Qk(a,s){var c=K$2;K$2|=1;try{return a(s)}finally{K$2=c,K$2===0&&(Gj=B$2()+500,fg$1&&jg())}}function Rk(a){wk!==null&&wk.tag===0&&!(K$2&6)&&Hk();var s=K$2;K$2|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K$2=s,!(K$2&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(a,s){a.finishedWork=null,a.finishedLanes=0;var c=a.timeoutHandle;if(c!==-1&&(a.timeoutHandle=-1,Gf$1(c)),Y$2!==null)for(c=Y$2.return;c!==null;){var d=c;switch(wg$1(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f$1();break;case 3:zh$1(),E$1(Wf$1),E$1(H$2),Eh$1();break;case 5:Bh$1(d);break;case 4:zh$1();break;case 13:E$1(L$2);break;case 19:E$1(L$2);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}if(Q$3=a,Y$2=a=Pg(a.current,null),Z$2=fj=s,T$2=0,pk=null,rk=qk=rh$1=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(c=fh[s],d=c.interleaved,d!==null){c.interleaved=null;var et=d.next,g=c.pending;if(g!==null){var at=g.next;g.next=et,d.next=at}c.pending=d}fh=null}return a}function Mk(a,s){do{var c=Y$2;try{if($g(),Fh$1.current=Rh$1,Ih){for(var d=M$3.memoizedState;d!==null;){var et=d.queue;et!==null&&(et.pending=null),d=d.next}Ih=!1}if(Hh$1=0,O$1=N$2=M$3=null,Jh$1=!1,Kh$1=0,nk.current=null,c===null||c.return===null){T$2=1,pk=s,Y$2=null;break}e:{var g=a,at=c.return,$t=c,vt=s;if(s=Z$2,$t.flags|=32768,vt!==null&&typeof vt=="object"&&typeof vt.then=="function"){var b=vt,pt=$t,st=pt.tag;if(!(pt.mode&1)&&(st===0||st===11||st===15)){var wt=pt.alternate;wt?(pt.updateQueue=wt.updateQueue,pt.memoizedState=wt.memoizedState,pt.lanes=wt.lanes):(pt.updateQueue=null,pt.memoizedState=null)}var Tt=Ui$2(at);if(Tt!==null){Tt.flags&=-257,Vi$1(Tt,at,$t,g,s),Tt.mode&1&&Si$1(g,b,s),s=Tt,vt=b;var Ct=s.updateQueue;if(Ct===null){var jt=new Set;jt.add(vt),s.updateQueue=jt}else Ct.add(vt);break e}else{if(!(s&1)){Si$1(g,b,s),tj();break e}vt=Error(p$3(426))}}else if(I&&$t.mode&1){var Lt=Ui$2(at);if(Lt!==null){!(Lt.flags&65536)&&(Lt.flags|=256),Vi$1(Lt,at,$t,g,s),Jg(Ji$2(vt,$t));break e}}g=vt=Ji$2(vt,$t),T$2!==4&&(T$2=2),sk===null?sk=[g]:sk.push(g),g=at;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var Ht=Ni$1(g,vt,s);ph$1(g,Ht);break e;case 1:$t=vt;var Gt=g.type,Kt=g.stateNode;if(!(g.flags&128)&&(typeof Gt.getDerivedStateFromError=="function"||Kt!==null&&typeof Kt.componentDidCatch=="function"&&(Ri$2===null||!Ri$2.has(Kt)))){g.flags|=65536,s&=-s,g.lanes|=s;var tr=Qi$2(g,$t,s);ph$1(g,tr);break e}}g=g.return}while(g!==null)}Sk(c)}catch(rr){s=rr,Y$2===c&&c!==null&&(Y$2=c=c.return);continue}break}while(!0)}function Jk(){var a=mk.current;return mk.current=Rh$1,a===null?Rh$1:a}function tj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),Q$3===null||!(rh$1&268435455)&&!(qk&268435455)||Ck(Q$3,Z$2)}function Ik(a,s){var c=K$2;K$2|=2;var d=Jk();(Q$3!==a||Z$2!==s)&&(uk=null,Kk(a,s));do try{Tk();break}catch(et){Mk(a,et)}while(!0);if($g(),K$2=c,mk.current=d,Y$2!==null)throw Error(p$3(261));return Q$3=null,Z$2=0,T$2}function Tk(){for(;Y$2!==null;)Uk(Y$2)}function Lk(){for(;Y$2!==null&&!cc$2();)Uk(Y$2)}function Uk(a){var s=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps,s===null?Sk(a):Y$2=s,nk.current=null}function Sk(a){var s=a;do{var c=s.alternate;if(a=s.return,s.flags&32768){if(c=Ij(c,s),c!==null){c.flags&=32767,Y$2=c;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T$2=6,Y$2=null;return}}else if(c=Ej(c,s,fj),c!==null){Y$2=c;return}if(s=s.sibling,s!==null){Y$2=s;return}Y$2=s=a}while(s!==null);T$2===0&&(T$2=5)}function Pk(a,s,c){var d=C,et=ok.transition;try{ok.transition=null,C=1,Wk(a,s,c,d)}finally{ok.transition=et,C=d}return null}function Wk(a,s,c,d){do Hk();while(wk!==null);if(K$2&6)throw Error(p$3(327));c=a.finishedWork;var et=a.finishedLanes;if(c===null)return null;if(a.finishedWork=null,a.finishedLanes=0,c===a.current)throw Error(p$3(177));a.callbackNode=null,a.callbackPriority=0;var g=c.lanes|c.childLanes;if(Bc$2(a,g),a===Q$3&&(Y$2=Q$3=null,Z$2=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||vk||(vk=!0,Fk(hc$1,function(){return Hk(),null})),g=(c.flags&15990)!==0,c.subtreeFlags&15990||g){g=ok.transition,ok.transition=null;var at=C;C=1;var $t=K$2;K$2|=4,nk.current=null,Oj(a,c),dk(c,a),Oe(Df$1),dd$2=!!Cf$1,Df$1=Cf$1=null,a.current=c,hk(c),dc$2(),K$2=$t,C=at,ok.transition=g}else a.current=c;if(vk&&(vk=!1,wk=a,xk=et),g=a.pendingLanes,g===0&&(Ri$2=null),mc$2(c.stateNode),Dk(a,B$2()),s!==null)for(d=a.onRecoverableError,c=0;c<s.length;c++)et=s[c],d(et.value,{componentStack:et.stack,digest:et.digest});if(Oi$2)throw Oi$2=!1,a=Pi$2,Pi$2=null,a;return xk&1&&a.tag!==0&&Hk(),g=a.pendingLanes,g&1?a===zk?yk++:(yk=0,zk=a):yk=0,jg(),null}function Hk(){if(wk!==null){var a=Dc$2(xk),s=ok.transition,c=C;try{if(ok.transition=null,C=16>a?16:a,wk===null)var d=!1;else{if(a=wk,wk=null,xk=0,K$2&6)throw Error(p$3(331));var et=K$2;for(K$2|=4,V$2=a.current;V$2!==null;){var g=V$2,at=g.child;if(V$2.flags&16){var $t=g.deletions;if($t!==null){for(var vt=0;vt<$t.length;vt++){var b=$t[vt];for(V$2=b;V$2!==null;){var pt=V$2;switch(pt.tag){case 0:case 11:case 15:Pj(8,pt,g)}var st=pt.child;if(st!==null)st.return=pt,V$2=st;else for(;V$2!==null;){pt=V$2;var wt=pt.sibling,Tt=pt.return;if(Sj(pt),pt===b){V$2=null;break}if(wt!==null){wt.return=Tt,V$2=wt;break}V$2=Tt}}}var Ct=g.alternate;if(Ct!==null){var jt=Ct.child;if(jt!==null){Ct.child=null;do{var Lt=jt.sibling;jt.sibling=null,jt=Lt}while(jt!==null)}}V$2=g}}if(g.subtreeFlags&2064&&at!==null)at.return=g,V$2=at;else e:for(;V$2!==null;){if(g=V$2,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Pj(9,g,g.return)}var Ht=g.sibling;if(Ht!==null){Ht.return=g.return,V$2=Ht;break e}V$2=g.return}}var Gt=a.current;for(V$2=Gt;V$2!==null;){at=V$2;var Kt=at.child;if(at.subtreeFlags&2064&&Kt!==null)Kt.return=at,V$2=Kt;else e:for(at=Gt;V$2!==null;){if($t=V$2,$t.flags&2048)try{switch($t.tag){case 0:case 11:case 15:Qj(9,$t)}}catch(rr){W$1($t,$t.return,rr)}if($t===at){V$2=null;break e}var tr=$t.sibling;if(tr!==null){tr.return=$t.return,V$2=tr;break e}V$2=$t.return}}if(K$2=et,jg(),lc$2&&typeof lc$2.onPostCommitFiberRoot=="function")try{lc$2.onPostCommitFiberRoot(kc$2,a)}catch{}d=!0}return d}finally{C=c,ok.transition=s}}return!1}function Xk(a,s,c){s=Ji$2(c,s),s=Ni$1(a,s,1),a=nh$1(a,s,1),s=R$1(),a!==null&&(Ac$2(a,1,s),Dk(a,s))}function W$1(a,s,c){if(a.tag===3)Xk(a,a,c);else for(;s!==null;){if(s.tag===3){Xk(s,a,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri$2===null||!Ri$2.has(d))){a=Ji$2(c,a),a=Qi$2(s,a,1),s=nh$1(s,a,1),a=R$1(),s!==null&&(Ac$2(s,1,a),Dk(s,a));break}}s=s.return}}function Ti$1(a,s,c){var d=a.pingCache;d!==null&&d.delete(s),s=R$1(),a.pingedLanes|=a.suspendedLanes&c,Q$3===a&&(Z$2&c)===c&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$2()-fk?Kk(a,0):rk|=c),Dk(a,s)}function Yk(a,s){s===0&&(a.mode&1?(s=sc$2,sc$2<<=1,!(sc$2&130023424)&&(sc$2=4194304)):s=1);var c=R$1();a=ih$1(a,s),a!==null&&(Ac$2(a,s,c),Dk(a,c))}function uj(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),Yk(a,c)}function bk(a,s){var c=0;switch(a.tag){case 13:var d=a.stateNode,et=a.memoizedState;et!==null&&(c=et.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p$3(314))}d!==null&&d.delete(s),Yk(a,c)}var Vk;Vk=function(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps||Wf$1.current)dh$1=!0;else{if(!(a.lanes&c)&&!(s.flags&128))return dh$1=!1,yj(a,s,c);dh$1=!!(a.flags&131072)}else dh$1=!1,I&&s.flags&1048576&&ug$1(s,ng$1,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;ij(a,s),a=s.pendingProps;var et=Yf$1(s,H$2.current);ch$1(s,c),et=Nh$1(null,s,d,a,et,c);var g=Sh$1();return s.flags|=1,typeof et=="object"&&et!==null&&typeof et.render=="function"&&et.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf$1(d)?(g=!0,cg$1(s)):g=!1,s.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,kh$1(s),et.updater=Ei$1,s.stateNode=et,et._reactInternals=s,Ii$1(s,d,a,c),s=jj(null,s,d,!0,g,c)):(s.tag=0,I&&g&&vg$1(s),Xi$2(null,s,et,c),s=s.child),s;case 16:d=s.elementType;e:{switch(ij(a,s),a=s.pendingProps,et=d._init,d=et(d._payload),s.type=d,et=s.tag=Zk(d),a=Ci$1(d,a),et){case 0:s=cj(null,s,d,a,c);break e;case 1:s=hj(null,s,d,a,c);break e;case 11:s=Yi$2(null,s,d,a,c);break e;case 14:s=$i$1(null,s,d,Ci$1(d.type,a),c);break e}throw Error(p$3(306,d,""))}return s;case 0:return d=s.type,et=s.pendingProps,et=s.elementType===d?et:Ci$1(d,et),cj(a,s,d,et,c);case 1:return d=s.type,et=s.pendingProps,et=s.elementType===d?et:Ci$1(d,et),hj(a,s,d,et,c);case 3:e:{if(kj(s),a===null)throw Error(p$3(387));d=s.pendingProps,g=s.memoizedState,et=g.element,lh$1(a,s),qh$1(s,d,null,c);var at=s.memoizedState;if(d=at.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:at.cache,pendingSuspenseBoundaries:at.pendingSuspenseBoundaries,transitions:at.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){et=Ji$2(Error(p$3(423)),s),s=lj(a,s,d,c,et);break e}else if(d!==et){et=Ji$2(Error(p$3(424)),s),s=lj(a,s,d,c,et);break e}else for(yg=Lf$1(s.stateNode.containerInfo.firstChild),xg$1=s,I=!0,zg=null,c=Vg(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ig(),d===et){s=Zi$2(a,s,c);break e}Xi$2(a,s,d,c)}s=s.child}return s;case 5:return Ah$1(s),a===null&&Eg(s),d=s.type,et=s.pendingProps,g=a!==null?a.memoizedProps:null,at=et.children,Ef$1(d,et)?at=null:g!==null&&Ef$1(d,g)&&(s.flags|=32),gj(a,s),Xi$2(a,s,at,c),s.child;case 6:return a===null&&Eg(s),null;case 13:return oj(a,s,c);case 4:return yh$1(s,s.stateNode.containerInfo),d=s.pendingProps,a===null?s.child=Ug(s,null,d,c):Xi$2(a,s,d,c),s.child;case 11:return d=s.type,et=s.pendingProps,et=s.elementType===d?et:Ci$1(d,et),Yi$2(a,s,d,et,c);case 7:return Xi$2(a,s,s.pendingProps,c),s.child;case 8:return Xi$2(a,s,s.pendingProps.children,c),s.child;case 12:return Xi$2(a,s,s.pendingProps.children,c),s.child;case 10:e:{if(d=s.type._context,et=s.pendingProps,g=s.memoizedProps,at=et.value,G$2(Wg,d._currentValue),d._currentValue=at,g!==null)if(He$1(g.value,at)){if(g.children===et.children&&!Wf$1.current){s=Zi$2(a,s,c);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var $t=g.dependencies;if($t!==null){at=g.child;for(var vt=$t.firstContext;vt!==null;){if(vt.context===d){if(g.tag===1){vt=mh$1(-1,c&-c),vt.tag=2;var b=g.updateQueue;if(b!==null){b=b.shared;var pt=b.pending;pt===null?vt.next=vt:(vt.next=pt.next,pt.next=vt),b.pending=vt}}g.lanes|=c,vt=g.alternate,vt!==null&&(vt.lanes|=c),bh$1(g.return,c,s),$t.lanes|=c;break}vt=vt.next}}else if(g.tag===10)at=g.type===s.type?null:g.child;else if(g.tag===18){if(at=g.return,at===null)throw Error(p$3(341));at.lanes|=c,$t=at.alternate,$t!==null&&($t.lanes|=c),bh$1(at,c,s),at=g.sibling}else at=g.child;if(at!==null)at.return=g;else for(at=g;at!==null;){if(at===s){at=null;break}if(g=at.sibling,g!==null){g.return=at.return,at=g;break}at=at.return}g=at}Xi$2(a,s,et.children,c),s=s.child}return s;case 9:return et=s.type,d=s.pendingProps.children,ch$1(s,c),et=eh$1(et),d=d(et),s.flags|=1,Xi$2(a,s,d,c),s.child;case 14:return d=s.type,et=Ci$1(d,s.pendingProps),et=Ci$1(d.type,et),$i$1(a,s,d,et,c);case 15:return bj(a,s,s.type,s.pendingProps,c);case 17:return d=s.type,et=s.pendingProps,et=s.elementType===d?et:Ci$1(d,et),ij(a,s),s.tag=1,Zf$1(d)?(a=!0,cg$1(s)):a=!1,ch$1(s,c),Gi$2(s,d,et),Ii$1(s,d,et,c),jj(null,s,d,!0,a,c);case 19:return xj(a,s,c);case 22:return dj(a,s,c)}throw Error(p$3(156,s.tag))};function Fk(a,s){return ac$2(a,s)}function $k(a,s,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,s,c,d){return new $k(a,s,c,d)}function aj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Zk(a){if(typeof a=="function")return aj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da$1)return 11;if(a===Ga$1)return 14}return 2}function Pg(a,s){var c=a.alternate;return c===null?(c=Bg(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&14680064,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function Rg(a,s,c,d,et,g){var at=2;if(d=a,typeof a=="function")aj(a)&&(at=1);else if(typeof a=="string")at=5;else e:switch(a){case ya$1:return Tg$1(c.children,et,g,s);case za$1:at=8,et|=8;break;case Aa$1:return a=Bg(12,c,s,et|2),a.elementType=Aa$1,a.lanes=g,a;case Ea$1:return a=Bg(13,c,s,et),a.elementType=Ea$1,a.lanes=g,a;case Fa$1:return a=Bg(19,c,s,et),a.elementType=Fa$1,a.lanes=g,a;case Ia$1:return pj(c,et,g,s);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba$1:at=10;break e;case Ca$1:at=9;break e;case Da$1:at=11;break e;case Ga$1:at=14;break e;case Ha$2:at=16,d=null;break e}throw Error(p$3(130,a==null?a:typeof a,""))}return s=Bg(at,c,s,et),s.elementType=a,s.type=d,s.lanes=g,s}function Tg$1(a,s,c,d){return a=Bg(7,a,d,s),a.lanes=c,a}function pj(a,s,c,d){return a=Bg(22,a,d,s),a.elementType=Ia$1,a.lanes=c,a.stateNode={isHidden:!1},a}function Qg(a,s,c){return a=Bg(6,a,null,s),a.lanes=c,a}function Sg(a,s,c){return s=Bg(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}function al$2(a,s,c,d,et){this.tag=s,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$2(0),this.expirationTimes=zc$2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$2(0),this.identifierPrefix=d,this.onRecoverableError=et,this.mutableSourceEagerHydrationData=null}function bl$2(a,s,c,d,et,g,at,$t,vt){return a=new al$2(a,s,c,$t,vt),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Bg(3,null,null,s),a.current=g,g.stateNode=a,g.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh$1(g),a}function cl$2(a,s,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:d==null?null:""+d,children:a,containerInfo:s,implementation:c}}function dl$2(a){if(!a)return Vf$1;a=a._reactInternals;e:{if(Vb$1(a)!==a||a.tag!==1)throw Error(p$3(170));var s=a;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf$1(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p$3(171))}if(a.tag===1){var c=a.type;if(Zf$1(c))return bg$1(a,c,s)}return s}function el$2(a,s,c,d,et,g,at,$t,vt){return a=bl$2(c,d,!0,a,et,g,at,$t,vt),a.context=dl$2(null),c=a.current,d=R$1(),et=yi$1(c),g=mh$1(d,et),g.callback=s??null,nh$1(c,g,et),a.current.lanes=et,Ac$2(a,et,d),Dk(a,d),a}function fl$2(a,s,c,d){var et=s.current,g=R$1(),at=yi$1(et);return c=dl$2(c),s.context===null?s.context=c:s.pendingContext=c,s=mh$1(g,at),s.payload={element:a},d=d===void 0?null:d,d!==null&&(s.callback=d),a=nh$1(et,s,at),a!==null&&(gi$1(a,et,at,g),oh$1(a,et,at)),at}function gl$2(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl$2(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function il$2(a,s){hl$2(a,s),(a=a.alternate)&&hl$2(a,s)}function jl$2(){return null}var kl$2=typeof reportError=="function"?reportError:function(a){console.error(a)};function ll$2(a){this._internalRoot=a}ml$2.prototype.render=ll$2.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(p$3(409));fl$2(a,s,null,null)};ml$2.prototype.unmount=ll$2.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;Rk(function(){fl$2(null,a,null,null)}),s[uf$2]=null}};function ml$2(a){this._internalRoot=a}ml$2.prototype.unstable_scheduleHydration=function(a){if(a){var s=Hc$2();a={blockedOn:null,target:a,priority:s};for(var c=0;c<Qc$2.length&&s!==0&&s<Qc$2[c].priority;c++);Qc$2.splice(c,0,a),c===0&&Vc$2(a)}};function nl$2(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ol$2(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function pl$2(){}function ql$2(a,s,c,d,et){if(et){if(typeof d=="function"){var g=d;d=function(){var b=gl$2(at);g.call(b)}}var at=el$2(s,d,a,0,null,!1,!1,"",pl$2);return a._reactRootContainer=at,a[uf$2]=at.current,sf$2(a.nodeType===8?a.parentNode:a),Rk(),at}for(;et=a.lastChild;)a.removeChild(et);if(typeof d=="function"){var $t=d;d=function(){var b=gl$2(vt);$t.call(b)}}var vt=bl$2(a,0,!1,null,null,!1,!1,"",pl$2);return a._reactRootContainer=vt,a[uf$2]=vt.current,sf$2(a.nodeType===8?a.parentNode:a),Rk(function(){fl$2(s,vt,c,d)}),vt}function rl$2(a,s,c,d,et){var g=c._reactRootContainer;if(g){var at=g;if(typeof et=="function"){var $t=et;et=function(){var vt=gl$2(at);$t.call(vt)}}fl$2(s,at,a,et)}else at=ql$2(c,s,a,et,d);return gl$2(at)}Ec$2=function(a){switch(a.tag){case 3:var s=a.stateNode;if(s.current.memoizedState.isDehydrated){var c=tc$1(s.pendingLanes);c!==0&&(Cc$2(s,c|1),Dk(s,B$2()),!(K$2&6)&&(Gj=B$2()+500,jg()))}break;case 13:Rk(function(){var d=ih$1(a,1);if(d!==null){var et=R$1();gi$1(d,a,1,et)}}),il$2(a,1)}};Fc$2=function(a){if(a.tag===13){var s=ih$1(a,134217728);if(s!==null){var c=R$1();gi$1(s,a,134217728,c)}il$2(a,134217728)}};Gc$2=function(a){if(a.tag===13){var s=yi$1(a),c=ih$1(a,s);if(c!==null){var d=R$1();gi$1(c,a,s,d)}il$2(a,s)}};Hc$2=function(){return C};Ic$2=function(a,s){var c=C;try{return C=a,s()}finally{C=c}};yb$1=function(a,s,c){switch(s){case"input":if(bb$1(a,c),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==a&&d.form===a.form){var et=Db$1(d);if(!et)throw Error(p$3(90));Wa$1(d),bb$1(d,et)}}}break;case"textarea":ib$1(a,c);break;case"select":s=c.value,s!=null&&fb$1(a,!!c.multiple,s,!1)}};Gb$1=Qk;Hb=Rk;var sl$2={usingClientEntryPoint:!1,Events:[Cb$1,ue$1,Db$1,Eb$1,Fb$1,Qk]},tl$2={findFiberByHostInstance:Wc$2,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul$2={bundleType:tl$2.bundleType,version:tl$2.version,rendererPackageName:tl$2.rendererPackageName,rendererConfig:tl$2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$2.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb$1(a),a===null?null:a.stateNode},findFiberByHostInstance:tl$2.findFiberByHostInstance||jl$2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl$2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl$2.isDisabled&&vl$2.supportsFiber)try{kc$2=vl$2.inject(ul$2),lc$2=vl$2}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl$2;reactDom_production_min.createPortal=function(a,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl$2(s))throw Error(p$3(200));return cl$2(a,s,null,c)};reactDom_production_min.createRoot=function(a,s){if(!nl$2(a))throw Error(p$3(299));var c=!1,d="",et=kl$2;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(et=s.onRecoverableError)),s=bl$2(a,1,!1,null,null,c,!1,d,et),a[uf$2]=s.current,sf$2(a.nodeType===8?a.parentNode:a),new ll$2(s)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(p$3(188)):(a=Object.keys(a).join(","),Error(p$3(268,a)));return a=Zb$1(s),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Rk(a)};reactDom_production_min.hydrate=function(a,s,c){if(!ol$2(s))throw Error(p$3(200));return rl$2(null,a,s,!0,c)};reactDom_production_min.hydrateRoot=function(a,s,c){if(!nl$2(a))throw Error(p$3(405));var d=c!=null&&c.hydratedSources||null,et=!1,g="",at=kl$2;if(c!=null&&(c.unstable_strictMode===!0&&(et=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(at=c.onRecoverableError)),s=el$2(s,null,a,1,c??null,et,!1,g,at),a[uf$2]=s.current,sf$2(a),d)for(a=0;a<d.length;a++)c=d[a],et=c._getVersion,et=et(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,et]:s.mutableSourceEagerHydrationData.push(c,et);return new ml$2(s)};reactDom_production_min.render=function(a,s,c){if(!ol$2(s))throw Error(p$3(200));return rl$2(null,a,s,!1,c)};reactDom_production_min.unmountComponentAtNode=function(a){if(!ol$2(a))throw Error(p$3(40));return a._reactRootContainer?(Rk(function(){rl$2(null,null,a,!1,function(){a._reactRootContainer=null,a[uf$2]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,s,c,d){if(!ol$2(c))throw Error(p$3(200));if(a==null||a._reactInternals===void 0)throw Error(p$3(38));return rl$2(a,s,c,!1,d)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$2=reactDomExports;client.createRoot=m$2.createRoot,client.hydrateRoot=m$2.hydrateRoot;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){return this.listeners.add(a),this.onSubscribe(),()=>{this.listeners.delete(a),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$3(){}function functionalUpdate(a,s){return typeof a=="function"?a(s):a}function isValidTimeout(a){return typeof a=="number"&&a>=0&&a!==1/0}function timeUntilStale(a,s){return Math.max(a+(s||0)-Date.now(),0)}function matchQuery(a,s){const{type:c="all",exact:d,fetchStatus:et,predicate:g,queryKey:at,stale:$t}=a;if(at){if(d){if(s.queryHash!==hashQueryKeyByOptions(at,s.options))return!1}else if(!partialMatchKey(s.queryKey,at))return!1}if(c!=="all"){const vt=s.isActive();if(c==="active"&&!vt||c==="inactive"&&vt)return!1}return!(typeof $t=="boolean"&&s.isStale()!==$t||et&&et!==s.state.fetchStatus||g&&!g(s))}function matchMutation(a,s){const{exact:c,status:d,predicate:et,mutationKey:g}=a;if(g){if(!s.options.mutationKey)return!1;if(c){if(hashKey(s.options.mutationKey)!==hashKey(g))return!1}else if(!partialMatchKey(s.options.mutationKey,g))return!1}return!(d&&s.state.status!==d||et&&!et(s))}function hashQueryKeyByOptions(a,s){return((s==null?void 0:s.queryKeyHashFn)||hashKey)(a)}function hashKey(a){return JSON.stringify(a,(s,c)=>isPlainObject$3(c)?Object.keys(c).sort().reduce((d,et)=>(d[et]=c[et],d),{}):c)}function partialMatchKey(a,s){return a===s?!0:typeof a!=typeof s?!1:a&&s&&typeof a=="object"&&typeof s=="object"?!Object.keys(s).some(c=>!partialMatchKey(a[c],s[c])):!1}function replaceEqualDeep(a,s){if(a===s)return a;const c=isPlainArray(a)&&isPlainArray(s);if(c||isPlainObject$3(a)&&isPlainObject$3(s)){const d=c?a:Object.keys(a),et=d.length,g=c?s:Object.keys(s),at=g.length,$t=c?[]:{};let vt=0;for(let b=0;b<at;b++){const pt=c?b:g[b];(!c&&d.includes(pt)||c)&&a[pt]===void 0&&s[pt]===void 0?($t[pt]=void 0,vt++):($t[pt]=replaceEqualDeep(a[pt],s[pt]),$t[pt]===a[pt]&&a[pt]!==void 0&&vt++)}return et===at&&vt===et?a:$t}return s}function isPlainArray(a){return Array.isArray(a)&&a.length===Object.keys(a).length}function isPlainObject$3(a){if(!hasObjectPrototype(a))return!1;const s=a.constructor;if(s===void 0)return!0;const c=s.prototype;return!(!hasObjectPrototype(c)||!c.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(a)!==Object.prototype)}function hasObjectPrototype(a){return Object.prototype.toString.call(a)==="[object Object]"}function sleep(a){return new Promise(s=>{setTimeout(s,a)})}function replaceData(a,s,c){return typeof c.structuralSharing=="function"?c.structuralSharing(a,s):c.structuralSharing!==!1?replaceEqualDeep(a,s):s}function addToEnd(a,s,c=0){const d=[...a,s];return c&&d.length>c?d.slice(1):d}function addToStart(a,s,c=0){const d=[s,...a];return c&&d.length>c?d.slice(0,-1):d}var skipToken=Symbol(),D$,$$,tx,PS,FocusManager=(PS=class extends Subscribable{constructor(){super();Q1(this,D$,void 0);Q1(this,$$,void 0);Q1(this,tx,void 0);N1(this,tx,s=>{if(!isServer&&window.addEventListener){const c=()=>s();return window.addEventListener("visibilitychange",c,!1),()=>{window.removeEventListener("visibilitychange",c)}}})}onSubscribe(){G0(this,$$)||this.setEventListener(G0(this,tx))}onUnsubscribe(){var s;this.hasListeners()||((s=G0(this,$$))==null||s.call(this),N1(this,$$,void 0))}setEventListener(s){var c;N1(this,tx,s),(c=G0(this,$$))==null||c.call(this),N1(this,$$,s(d=>{typeof d=="boolean"?this.setFocused(d):this.onFocus()}))}setFocused(s){G0(this,D$)!==s&&(N1(this,D$,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(c=>{c(s)})}isFocused(){var s;return typeof G0(this,D$)=="boolean"?G0(this,D$):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},D$=new WeakMap,$$=new WeakMap,tx=new WeakMap,PS),focusManager=new FocusManager,rx,x$,nx,kS,OnlineManager=(kS=class extends Subscribable{constructor(){super();Q1(this,rx,!0);Q1(this,x$,void 0);Q1(this,nx,void 0);N1(this,nx,s=>{if(!isServer&&window.addEventListener){const c=()=>s(!0),d=()=>s(!1);return window.addEventListener("online",c,!1),window.addEventListener("offline",d,!1),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}}})}onSubscribe(){G0(this,x$)||this.setEventListener(G0(this,nx))}onUnsubscribe(){var s;this.hasListeners()||((s=G0(this,x$))==null||s.call(this),N1(this,x$,void 0))}setEventListener(s){var c;N1(this,nx,s),(c=G0(this,x$))==null||c.call(this),N1(this,x$,s(this.setOnline.bind(this)))}setOnline(s){G0(this,rx)!==s&&(N1(this,rx,s),this.listeners.forEach(d=>{d(s)}))}isOnline(){return G0(this,rx)}},rx=new WeakMap,x$=new WeakMap,nx=new WeakMap,kS),onlineManager=new OnlineManager;function defaultRetryDelay(a){return Math.min(1e3*2**a,3e4)}function canFetch(a){return(a??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class{constructor(a){this.revert=a==null?void 0:a.revert,this.silent=a==null?void 0:a.silent}};function isCancelledError(a){return a instanceof CancelledError}function createRetryer(a){let s=!1,c=0,d=!1,et,g,at;const $t=new Promise((Ht,Gt)=>{g=Ht,at=Gt}),vt=Ht=>{var Gt;d||(Ct(new CancelledError(Ht)),(Gt=a.abort)==null||Gt.call(a))},b=()=>{s=!0},pt=()=>{s=!1},st=()=>focusManager.isFocused()&&(a.networkMode==="always"||onlineManager.isOnline())&&a.canRun(),wt=()=>canFetch(a.networkMode)&&a.canRun(),Tt=Ht=>{var Gt;d||(d=!0,(Gt=a.onSuccess)==null||Gt.call(a,Ht),et==null||et(),g(Ht))},Ct=Ht=>{var Gt;d||(d=!0,(Gt=a.onError)==null||Gt.call(a,Ht),et==null||et(),at(Ht))},jt=()=>new Promise(Ht=>{var Gt;et=Kt=>{(d||st())&&Ht(Kt)},(Gt=a.onPause)==null||Gt.call(a)}).then(()=>{var Ht;et=void 0,d||(Ht=a.onContinue)==null||Ht.call(a)}),Lt=()=>{if(d)return;let Ht;try{Ht=a.fn()}catch(Gt){Ht=Promise.reject(Gt)}Promise.resolve(Ht).then(Tt).catch(Gt=>{var jr;if(d)return;const Kt=a.retry??(isServer?0:3),tr=a.retryDelay??defaultRetryDelay,rr=typeof tr=="function"?tr(c,Gt):tr,Lr=Kt===!0||typeof Kt=="number"&&c<Kt||typeof Kt=="function"&&Kt(c,Gt);if(s||!Lr){Ct(Gt);return}c++,(jr=a.onFail)==null||jr.call(a,c,Gt),sleep(rr).then(()=>st()?void 0:jt()).then(()=>{s?Ct(Gt):Lt()})})};return{promise:$t,cancel:vt,continue:()=>(et==null||et(),$t),cancelRetry:b,continueRetry:pt,canStart:wt,start:()=>(wt()?Lt():jt().then(Lt),$t)}}function createNotifyManager(){let a=[],s=0,c=wt=>{wt()},d=wt=>{wt()},et=wt=>setTimeout(wt,0);const g=wt=>{et=wt},at=wt=>{let Tt;s++;try{Tt=wt()}finally{s--,s||b()}return Tt},$t=wt=>{s?a.push(wt):et(()=>{c(wt)})},vt=wt=>(...Tt)=>{$t(()=>{wt(...Tt)})},b=()=>{const wt=a;a=[],wt.length&&et(()=>{d(()=>{wt.forEach(Tt=>{c(Tt)})})})};return{batch:at,batchCalls:vt,schedule:$t,setNotifyFunction:wt=>{c=wt},setBatchNotifyFunction:wt=>{d=wt},setScheduler:g}}var notifyManager=createNotifyManager(),M$,DS,Removable=(DS=class{constructor(){Q1(this,M$,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&N1(this,M$,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(a){this.gcTime=Math.max(this.gcTime||0,a??(isServer?1/0:5*60*1e3))}clearGcTimeout(){G0(this,M$)&&(clearTimeout(G0(this,M$)),N1(this,M$,void 0))}},M$=new WeakMap,DS),ix,ox,by,Hv,Hx,N$,Dy,s$,MS,Query=(MS=class extends Removable{constructor(s){super();Q1(this,Dy);Q1(this,ix,void 0);Q1(this,ox,void 0);Q1(this,by,void 0);Q1(this,Hv,void 0);Q1(this,Hx,void 0);Q1(this,N$,void 0);N1(this,N$,!1),N1(this,Hx,s.defaultOptions),this.setOptions(s.options),this.observers=[],N1(this,by,s.cache),this.queryKey=s.queryKey,this.queryHash=s.queryHash,N1(this,ix,s.state||getDefaultState$1(this.options)),this.state=G0(this,ix),this.scheduleGc()}get meta(){return this.options.meta}setOptions(s){this.options={...G0(this,Hx),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G0(this,by).remove(this)}setData(s,c){const d=replaceData(this.state.data,s,this.options);return Nv(this,Dy,s$).call(this,{data:d,type:"success",dataUpdatedAt:c==null?void 0:c.updatedAt,manual:c==null?void 0:c.manual}),d}setState(s,c){Nv(this,Dy,s$).call(this,{type:"setState",state:s,setStateOptions:c})}cancel(s){var d,et;const c=(d=G0(this,Hv))==null?void 0:d.promise;return(et=G0(this,Hv))==null||et.cancel(s),c?c.then(noop$3).catch(noop$3):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G0(this,ix))}isActive(){return this.observers.some(s=>s.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,s)}onFocus(){var c;const s=this.observers.find(d=>d.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(c=G0(this,Hv))==null||c.continue()}onOnline(){var c;const s=this.observers.find(d=>d.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(c=G0(this,Hv))==null||c.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),G0(this,by).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(c=>c!==s),this.observers.length||(G0(this,Hv)&&(G0(this,N$)?G0(this,Hv).cancel({revert:!0}):G0(this,Hv).cancelRetry()),this.scheduleGc()),G0(this,by).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nv(this,Dy,s$).call(this,{type:"invalidate"})}fetch(s,c){var b,pt,st;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(c!=null&&c.cancelRefetch))this.cancel({silent:!0});else if(G0(this,Hv))return G0(this,Hv).continueRetry(),G0(this,Hv).promise}if(s&&this.setOptions(s),!this.options.queryFn){const wt=this.observers.find(Tt=>Tt.options.queryFn);wt&&this.setOptions(wt.options)}const d=new AbortController,et={queryKey:this.queryKey,meta:this.meta},g=wt=>{Object.defineProperty(wt,"signal",{enumerable:!0,get:()=>(N1(this,N$,!0),d.signal)})};g(et);const at=()=>!this.options.queryFn||this.options.queryFn===skipToken?Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)):(N1(this,N$,!1),this.options.persister?this.options.persister(this.options.queryFn,et,this):this.options.queryFn(et)),$t={fetchOptions:c,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:at};g($t),(b=this.options.behavior)==null||b.onFetch($t,this),N1(this,ox,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((pt=$t.fetchOptions)==null?void 0:pt.meta))&&Nv(this,Dy,s$).call(this,{type:"fetch",meta:(st=$t.fetchOptions)==null?void 0:st.meta});const vt=wt=>{var Tt,Ct,jt,Lt;isCancelledError(wt)&&wt.silent||Nv(this,Dy,s$).call(this,{type:"error",error:wt}),isCancelledError(wt)||((Ct=(Tt=G0(this,by).config).onError)==null||Ct.call(Tt,wt,this),(Lt=(jt=G0(this,by).config).onSettled)==null||Lt.call(jt,this.state.data,wt,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return N1(this,Hv,createRetryer({fn:$t.fetchFn,abort:d.abort.bind(d),onSuccess:wt=>{var Tt,Ct,jt,Lt;if(wt===void 0){vt(new Error(`${this.queryHash} data is undefined`));return}this.setData(wt),(Ct=(Tt=G0(this,by).config).onSuccess)==null||Ct.call(Tt,wt,this),(Lt=(jt=G0(this,by).config).onSettled)==null||Lt.call(jt,wt,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:vt,onFail:(wt,Tt)=>{Nv(this,Dy,s$).call(this,{type:"failed",failureCount:wt,error:Tt})},onPause:()=>{Nv(this,Dy,s$).call(this,{type:"pause"})},onContinue:()=>{Nv(this,Dy,s$).call(this,{type:"continue"})},retry:$t.options.retry,retryDelay:$t.options.retryDelay,networkMode:$t.options.networkMode,canRun:()=>!0})),G0(this,Hv).start()}},ix=new WeakMap,ox=new WeakMap,by=new WeakMap,Hv=new WeakMap,Hx=new WeakMap,N$=new WeakMap,Dy=new WeakSet,s$=function(s){const c=d=>{switch(s.type){case"failed":return{...d,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...d,fetchStatus:"paused"};case"continue":return{...d,fetchStatus:"fetching"};case"fetch":return{...d,...fetchState(d.data,this.options),fetchMeta:s.meta??null};case"success":return{...d,data:s.data,dataUpdateCount:d.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const et=s.error;return isCancelledError(et)&&et.revert&&G0(this,ox)?{...G0(this,ox),fetchStatus:"idle"}:{...d,error:et,errorUpdateCount:d.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:d.fetchFailureCount+1,fetchFailureReason:et,fetchStatus:"idle",status:"error"};case"invalidate":return{...d,isInvalidated:!0};case"setState":return{...d,...s.state}}};this.state=c(this.state),notifyManager.batch(()=>{this.observers.forEach(d=>{d.onQueryUpdate()}),G0(this,by).notify({query:this,type:"updated",action:s})})},MS);function fetchState(a,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(s.networkMode)?"fetching":"paused",...a===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(a){const s=typeof a.initialData=="function"?a.initialData():a.initialData,c=s!==void 0,d=c?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:c?d??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}var Vy,NS,QueryCache=(NS=class extends Subscribable{constructor(s={}){super();Q1(this,Vy,void 0);this.config=s,N1(this,Vy,new Map)}build(s,c,d){const et=c.queryKey,g=c.queryHash??hashQueryKeyByOptions(et,c);let at=this.get(g);return at||(at=new Query({cache:this,queryKey:et,queryHash:g,options:s.defaultQueryOptions(c),state:d,defaultOptions:s.getQueryDefaults(et)}),this.add(at)),at}add(s){G0(this,Vy).has(s.queryHash)||(G0(this,Vy).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const c=G0(this,Vy).get(s.queryHash);c&&(s.destroy(),c===s&&G0(this,Vy).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return G0(this,Vy).get(s)}getAll(){return[...G0(this,Vy).values()]}find(s){const c={exact:!0,...s};return this.getAll().find(d=>matchQuery(c,d))}findAll(s={}){const c=this.getAll();return Object.keys(s).length>0?c.filter(d=>matchQuery(s,d)):c}notify(s){notifyManager.batch(()=>{this.listeners.forEach(c=>{c(s)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Vy=new WeakMap,NS),Wy,Gv,L$,Hy,y$,LS,Mutation=(LS=class extends Removable{constructor(s){super();Q1(this,Hy);Q1(this,Wy,void 0);Q1(this,Gv,void 0);Q1(this,L$,void 0);this.mutationId=s.mutationId,N1(this,Gv,s.mutationCache),N1(this,Wy,[]),this.state=s.state||getDefaultState(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){G0(this,Wy).includes(s)||(G0(this,Wy).push(s),this.clearGcTimeout(),G0(this,Gv).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){N1(this,Wy,G0(this,Wy).filter(c=>c!==s)),this.scheduleGc(),G0(this,Gv).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){G0(this,Wy).length||(this.state.status==="pending"?this.scheduleGc():G0(this,Gv).remove(this))}continue(){var s;return((s=G0(this,L$))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var et,g,at,$t,vt,b,pt,st,wt,Tt,Ct,jt,Lt,Ht,Gt,Kt,tr,rr,Lr,jr;N1(this,L$,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(Yr,An)=>{Nv(this,Hy,y$).call(this,{type:"failed",failureCount:Yr,error:An})},onPause:()=>{Nv(this,Hy,y$).call(this,{type:"pause"})},onContinue:()=>{Nv(this,Hy,y$).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G0(this,Gv).canRun(this)}));const c=this.state.status==="pending",d=!G0(this,L$).canStart();try{if(!c){Nv(this,Hy,y$).call(this,{type:"pending",variables:s,isPaused:d}),await((g=(et=G0(this,Gv).config).onMutate)==null?void 0:g.call(et,s,this));const An=await(($t=(at=this.options).onMutate)==null?void 0:$t.call(at,s));An!==this.state.context&&Nv(this,Hy,y$).call(this,{type:"pending",context:An,variables:s,isPaused:d})}const Yr=await G0(this,L$).start();return await((b=(vt=G0(this,Gv).config).onSuccess)==null?void 0:b.call(vt,Yr,s,this.state.context,this)),await((st=(pt=this.options).onSuccess)==null?void 0:st.call(pt,Yr,s,this.state.context)),await((Tt=(wt=G0(this,Gv).config).onSettled)==null?void 0:Tt.call(wt,Yr,null,this.state.variables,this.state.context,this)),await((jt=(Ct=this.options).onSettled)==null?void 0:jt.call(Ct,Yr,null,s,this.state.context)),Nv(this,Hy,y$).call(this,{type:"success",data:Yr}),Yr}catch(Yr){try{throw await((Ht=(Lt=G0(this,Gv).config).onError)==null?void 0:Ht.call(Lt,Yr,s,this.state.context,this)),await((Kt=(Gt=this.options).onError)==null?void 0:Kt.call(Gt,Yr,s,this.state.context)),await((rr=(tr=G0(this,Gv).config).onSettled)==null?void 0:rr.call(tr,void 0,Yr,this.state.variables,this.state.context,this)),await((jr=(Lr=this.options).onSettled)==null?void 0:jr.call(Lr,void 0,Yr,s,this.state.context)),Yr}finally{Nv(this,Hy,y$).call(this,{type:"error",error:Yr})}}finally{G0(this,Gv).runNext(this)}}},Wy=new WeakMap,Gv=new WeakMap,L$=new WeakMap,Hy=new WeakSet,y$=function(s){const c=d=>{switch(s.type){case"failed":return{...d,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...d,isPaused:!0};case"continue":return{...d,isPaused:!1};case"pending":return{...d,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...d,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...d,data:void 0,error:s.error,failureCount:d.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=c(this.state),notifyManager.batch(()=>{G0(this,Wy).forEach(d=>{d.onMutationUpdate(s)}),G0(this,Gv).notify({mutation:this,type:"updated",action:s})})},LS);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ly,Gx,jS,MutationCache=(jS=class extends Subscribable{constructor(s={}){super();Q1(this,ly,void 0);Q1(this,Gx,void 0);this.config=s,N1(this,ly,new Map),N1(this,Gx,Date.now())}build(s,c,d){const et=new Mutation({mutationCache:this,mutationId:++Bw(this,Gx)._,options:s.defaultMutationOptions(c),state:d});return this.add(et),et}add(s){const c=scopeFor(s),d=G0(this,ly).get(c)??[];d.push(s),G0(this,ly).set(c,d),this.notify({type:"added",mutation:s})}remove(s){var d;const c=scopeFor(s);if(G0(this,ly).has(c)){const et=(d=G0(this,ly).get(c))==null?void 0:d.filter(g=>g!==s);et&&(et.length===0?G0(this,ly).delete(c):G0(this,ly).set(c,et))}this.notify({type:"removed",mutation:s})}canRun(s){var d;const c=(d=G0(this,ly).get(scopeFor(s)))==null?void 0:d.find(et=>et.state.status==="pending");return!c||c===s}runNext(s){var d;const c=(d=G0(this,ly).get(scopeFor(s)))==null?void 0:d.find(et=>et!==s&&et.state.isPaused);return(c==null?void 0:c.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}getAll(){return[...G0(this,ly).values()].flat()}find(s){const c={exact:!0,...s};return this.getAll().find(d=>matchMutation(c,d))}findAll(s={}){return this.getAll().filter(c=>matchMutation(s,c))}notify(s){notifyManager.batch(()=>{this.listeners.forEach(c=>{c(s)})})}resumePausedMutations(){const s=this.getAll().filter(c=>c.state.isPaused);return notifyManager.batch(()=>Promise.all(s.map(c=>c.continue().catch(noop$3))))}},ly=new WeakMap,Gx=new WeakMap,jS);function scopeFor(a){var s;return((s=a.options.scope)==null?void 0:s.id)??String(a.mutationId)}function infiniteQueryBehavior(a){return{onFetch:(s,c)=>{const d=async()=>{var Ct,jt,Lt,Ht,Gt;const et=s.options,g=(Lt=(jt=(Ct=s.fetchOptions)==null?void 0:Ct.meta)==null?void 0:jt.fetchMore)==null?void 0:Lt.direction,at=((Ht=s.state.data)==null?void 0:Ht.pages)||[],$t=((Gt=s.state.data)==null?void 0:Gt.pageParams)||[],vt={pages:[],pageParams:[]};let b=!1;const pt=Kt=>{Object.defineProperty(Kt,"signal",{enumerable:!0,get:()=>(s.signal.aborted?b=!0:s.signal.addEventListener("abort",()=>{b=!0}),s.signal)})},st=s.options.queryFn&&s.options.queryFn!==skipToken?s.options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${s.options.queryHash}'`)),wt=async(Kt,tr,rr)=>{if(b)return Promise.reject();if(tr==null&&Kt.pages.length)return Promise.resolve(Kt);const Lr={queryKey:s.queryKey,pageParam:tr,direction:rr?"backward":"forward",meta:s.options.meta};pt(Lr);const jr=await st(Lr),{maxPages:Yr}=s.options,An=rr?addToStart:addToEnd;return{pages:An(Kt.pages,jr,Yr),pageParams:An(Kt.pageParams,tr,Yr)}};let Tt;if(g&&at.length){const Kt=g==="backward",tr=Kt?getPreviousPageParam:getNextPageParam,rr={pages:at,pageParams:$t},Lr=tr(et,rr);Tt=await wt(rr,Lr,Kt)}else{Tt=await wt(vt,$t[0]??et.initialPageParam);const Kt=a??at.length;for(let tr=1;tr<Kt;tr++){const rr=getNextPageParam(et,Tt);Tt=await wt(Tt,rr)}}return Tt};s.options.persister?s.fetchFn=()=>{var et,g;return(g=(et=s.options).persister)==null?void 0:g.call(et,d,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},c)}:s.fetchFn=d}}}function getNextPageParam(a,{pages:s,pageParams:c}){const d=s.length-1;return a.getNextPageParam(s[d],s,c[d],c)}function getPreviousPageParam(a,{pages:s,pageParams:c}){var d;return(d=a.getPreviousPageParam)==null?void 0:d.call(a,s[0],s,c[0],c)}var cv,w$,_$,ax,sx,S$,lx,ux,FS,QueryClient=(FS=class{constructor(a={}){Q1(this,cv,void 0);Q1(this,w$,void 0);Q1(this,_$,void 0);Q1(this,ax,void 0);Q1(this,sx,void 0);Q1(this,S$,void 0);Q1(this,lx,void 0);Q1(this,ux,void 0);N1(this,cv,a.queryCache||new QueryCache),N1(this,w$,a.mutationCache||new MutationCache),N1(this,_$,a.defaultOptions||{}),N1(this,ax,new Map),N1(this,sx,new Map),N1(this,S$,0)}mount(){Bw(this,S$)._++,G0(this,S$)===1&&(N1(this,lx,focusManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),G0(this,cv).onFocus())})),N1(this,ux,onlineManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),G0(this,cv).onOnline())})))}unmount(){var a,s;Bw(this,S$)._--,G0(this,S$)===0&&((a=G0(this,lx))==null||a.call(this),N1(this,lx,void 0),(s=G0(this,ux))==null||s.call(this),N1(this,ux,void 0))}isFetching(a){return G0(this,cv).findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return G0(this,w$).findAll({...a,status:"pending"}).length}getQueryData(a){var c;const s=this.defaultQueryOptions({queryKey:a});return(c=G0(this,cv).get(s.queryHash))==null?void 0:c.state.data}ensureQueryData(a){const s=this.getQueryData(a.queryKey);if(s===void 0)return this.fetchQuery(a);{const c=this.defaultQueryOptions(a),d=G0(this,cv).build(this,c);return a.revalidateIfStale&&d.isStaleByTime(c.staleTime)&&this.prefetchQuery(c),Promise.resolve(s)}}getQueriesData(a){return G0(this,cv).findAll(a).map(({queryKey:s,state:c})=>{const d=c.data;return[s,d]})}setQueryData(a,s,c){const d=this.defaultQueryOptions({queryKey:a}),et=G0(this,cv).get(d.queryHash),g=et==null?void 0:et.state.data,at=functionalUpdate(s,g);if(at!==void 0)return G0(this,cv).build(this,d).setData(at,{...c,manual:!0})}setQueriesData(a,s,c){return notifyManager.batch(()=>G0(this,cv).findAll(a).map(({queryKey:d})=>[d,this.setQueryData(d,s,c)]))}getQueryState(a){var c;const s=this.defaultQueryOptions({queryKey:a});return(c=G0(this,cv).get(s.queryHash))==null?void 0:c.state}removeQueries(a){const s=G0(this,cv);notifyManager.batch(()=>{s.findAll(a).forEach(c=>{s.remove(c)})})}resetQueries(a,s){const c=G0(this,cv),d={type:"active",...a};return notifyManager.batch(()=>(c.findAll(a).forEach(et=>{et.reset()}),this.refetchQueries(d,s)))}cancelQueries(a={},s={}){const c={revert:!0,...s},d=notifyManager.batch(()=>G0(this,cv).findAll(a).map(et=>et.cancel(c)));return Promise.all(d).then(noop$3).catch(noop$3)}invalidateQueries(a={},s={}){return notifyManager.batch(()=>{if(G0(this,cv).findAll(a).forEach(d=>{d.invalidate()}),a.refetchType==="none")return Promise.resolve();const c={...a,type:a.refetchType??a.type??"active"};return this.refetchQueries(c,s)})}refetchQueries(a={},s){const c={...s,cancelRefetch:(s==null?void 0:s.cancelRefetch)??!0},d=notifyManager.batch(()=>G0(this,cv).findAll(a).filter(et=>!et.isDisabled()).map(et=>{let g=et.fetch(void 0,c);return c.throwOnError||(g=g.catch(noop$3)),et.state.fetchStatus==="paused"?Promise.resolve():g}));return Promise.all(d).then(noop$3)}fetchQuery(a){const s=this.defaultQueryOptions(a);s.retry===void 0&&(s.retry=!1);const c=G0(this,cv).build(this,s);return c.isStaleByTime(s.staleTime)?c.fetch(s):Promise.resolve(c.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(noop$3).catch(noop$3)}fetchInfiniteQuery(a){return a.behavior=infiniteQueryBehavior(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(noop$3).catch(noop$3)}resumePausedMutations(){return onlineManager.isOnline()?G0(this,w$).resumePausedMutations():Promise.resolve()}getQueryCache(){return G0(this,cv)}getMutationCache(){return G0(this,w$)}getDefaultOptions(){return G0(this,_$)}setDefaultOptions(a){N1(this,_$,a)}setQueryDefaults(a,s){G0(this,ax).set(hashKey(a),{queryKey:a,defaultOptions:s})}getQueryDefaults(a){const s=[...G0(this,ax).values()];let c={};return s.forEach(d=>{partialMatchKey(a,d.queryKey)&&(c={...c,...d.defaultOptions})}),c}setMutationDefaults(a,s){G0(this,sx).set(hashKey(a),{mutationKey:a,defaultOptions:s})}getMutationDefaults(a){const s=[...G0(this,sx).values()];let c={};return s.forEach(d=>{partialMatchKey(a,d.mutationKey)&&(c={...c,...d.defaultOptions})}),c}defaultQueryOptions(a){if(a._defaulted)return a;const s={...G0(this,_$).queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return s.queryHash||(s.queryHash=hashQueryKeyByOptions(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===skipToken&&(s.enabled=!1),s}defaultMutationOptions(a){return a!=null&&a._defaulted?a:{...G0(this,_$).mutations,...(a==null?void 0:a.mutationKey)&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){G0(this,cv).clear(),G0(this,w$).clear()}},cv=new WeakMap,w$=new WeakMap,_$=new WeakMap,ax=new WeakMap,sx=new WeakMap,S$=new WeakMap,lx=new WeakMap,ux=new WeakMap,FS),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:a,children:s})=>(reactExports.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:a,children:s}));function _objectWithoutPropertiesLoose(a,s){if(a==null)return{};var c={},d=Object.keys(a),et,g;for(g=0;g<d.length;g++)et=d[g],!(s.indexOf(et)>=0)&&(c[et]=a[et]);return c}var _excluded$e=["color"],ArrowDownIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$e);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M7.5 2C7.77614 2 8 2.22386 8 2.5L8 11.2929L11.1464 8.14645C11.3417 7.95118 11.6583 7.95118 11.8536 8.14645C12.0488 8.34171 12.0488 8.65829 11.8536 8.85355L7.85355 12.8536C7.75979 12.9473 7.63261 13 7.5 13C7.36739 13 7.24021 12.9473 7.14645 12.8536L3.14645 8.85355C2.95118 8.65829 2.95118 8.34171 3.14645 8.14645C3.34171 7.95118 3.65829 7.95118 3.85355 8.14645L7 11.2929L7 2.5C7 2.22386 7.22386 2 7.5 2Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$j=["color"],ArrowUpIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$j);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M7.14645 2.14645C7.34171 1.95118 7.65829 1.95118 7.85355 2.14645L11.8536 6.14645C12.0488 6.34171 12.0488 6.65829 11.8536 6.85355C11.6583 7.04882 11.3417 7.04882 11.1464 6.85355L8 3.70711L8 12.5C8 12.7761 7.77614 13 7.5 13C7.22386 13 7 12.7761 7 12.5L7 3.70711L3.85355 6.85355C3.65829 7.04882 3.34171 7.04882 3.14645 6.85355C2.95118 6.65829 2.95118 6.34171 3.14645 6.14645L7.14645 2.14645Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Q=["color"],CaretSortIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$Q);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$T=["color"],CheckIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$T);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$W=["color"],ChevronDownIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$W);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Y=["color"],ChevronRightIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$Y);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Z=["color"],ChevronUpIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$Z);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1r=["color"],Cross2Icon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$1r);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1I=["color"],DotFilledIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$1I);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:d}))}),_excluded$1L=["color"],DoubleArrowDownIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$1L);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M3.85355 2.14645C3.65829 1.95118 3.34171 1.95118 3.14645 2.14645C2.95118 2.34171 2.95118 2.65829 3.14645 2.85355L7.14645 6.85355C7.34171 7.04882 7.65829 7.04882 7.85355 6.85355L11.8536 2.85355C12.0488 2.65829 12.0488 2.34171 11.8536 2.14645C11.6583 1.95118 11.3417 1.95118 11.1464 2.14645L7.5 5.79289L3.85355 2.14645ZM3.85355 8.14645C3.65829 7.95118 3.34171 7.95118 3.14645 8.14645C2.95118 8.34171 2.95118 8.65829 3.14645 8.85355L7.14645 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L11.8536 8.85355C12.0488 8.65829 12.0488 8.34171 11.8536 8.14645C11.6583 7.95118 11.3417 7.95118 11.1464 8.14645L7.5 11.7929L3.85355 8.14645Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1O=["color"],DoubleArrowUpIcon=reactExports.forwardRef(function(a,s){var c=a.color,d=c===void 0?"currentColor":c,et=_objectWithoutPropertiesLoose(a,_excluded$1O);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{ref:s}),reactExports.createElement("path",{d:"M11.1464 6.85355C11.3417 7.04882 11.6583 7.04882 11.8536 6.85355C12.0488 6.65829 12.0488 6.34171 11.8536 6.14645L7.85355 2.14645C7.65829 1.95118 7.34171 1.95118 7.14645 2.14645L3.14645 6.14645C2.95118 6.34171 2.95118 6.65829 3.14645 6.85355C3.34171 7.04882 3.65829 7.04882 3.85355 6.85355L7.5 3.20711L11.1464 6.85355ZM11.1464 12.8536C11.3417 13.0488 11.6583 13.0488 11.8536 12.8536C12.0488 12.6583 12.0488 12.3417 11.8536 12.1464L7.85355 8.14645C7.65829 7.95118 7.34171 7.95118 7.14645 8.14645L3.14645 12.1464C2.95118 12.3417 2.95118 12.6583 3.14645 12.8536C3.34171 13.0488 3.65829 13.0488 3.85355 12.8536L7.5 9.20711L11.1464 12.8536Z",fill:d,fillRule:"evenodd",clipRule:"evenodd"}))});function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_extends$1.apply(this,arguments)}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(a,s,{checkForDefaultPrevented:c=!0}={}){return function(et){if(a==null||a(et),c===!1||!et.defaultPrevented)return s==null?void 0:s(et)}}function $6ed0406888f73fc4$var$setRef(a,s){typeof a=="function"?a(s):a!=null&&(a.current=s)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...a){return s=>a.forEach(c=>$6ed0406888f73fc4$var$setRef(c,s))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...a){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...a),a)}function $c512c27ab02ef895$export$fd42f52fd3ae1109(a,s){const c=reactExports.createContext(s);function d(g){const{children:at,...$t}=g,vt=reactExports.useMemo(()=>$t,Object.values($t));return reactExports.createElement(c.Provider,{value:vt},at)}function et(g){const at=reactExports.useContext(c);if(at)return at;if(s!==void 0)return s;throw new Error(`\`${g}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,et]}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(a,s=[]){let c=[];function d(g,at){const $t=reactExports.createContext(at),vt=c.length;c=[...c,at];function b(st){const{scope:wt,children:Tt,...Ct}=st,jt=(wt==null?void 0:wt[a][vt])||$t,Lt=reactExports.useMemo(()=>Ct,Object.values(Ct));return reactExports.createElement(jt.Provider,{value:Lt},Tt)}function pt(st,wt){const Tt=(wt==null?void 0:wt[a][vt])||$t,Ct=reactExports.useContext(Tt);if(Ct)return Ct;if(at!==void 0)return at;throw new Error(`\`${st}\` must be used within \`${g}\``)}return b.displayName=g+"Provider",[b,pt]}const et=()=>{const g=c.map(at=>reactExports.createContext(at));return function($t){const vt=($t==null?void 0:$t[a])||g;return reactExports.useMemo(()=>({[`__scope${a}`]:{...$t,[a]:vt}}),[$t,vt])}};return et.scopeName=a,[d,$c512c27ab02ef895$var$composeContextScopes(et,...s)]}function $c512c27ab02ef895$var$composeContextScopes(...a){const s=a[0];if(a.length===1)return s;const c=()=>{const d=a.map(et=>({useScope:et(),scopeName:et.scopeName}));return function(g){const at=d.reduce(($t,{useScope:vt,scopeName:b})=>{const st=vt(g)[`__scope${b}`];return{...$t,...st}},{});return reactExports.useMemo(()=>({[`__scope${s.scopeName}`]:at}),[at])}};return c.scopeName=s.scopeName,c}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((a,s)=>{const{children:c,...d}=a,et=reactExports.Children.toArray(c),g=et.find($5e63c961fc1ce211$var$isSlottable);if(g){const at=g.props.children,$t=et.map(vt=>vt===g?reactExports.Children.count(at)>1?reactExports.Children.only(null):reactExports.isValidElement(at)?at.props.children:null:vt);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},d,{ref:s}),reactExports.isValidElement(at)?reactExports.cloneElement(at,void 0,$t):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},d,{ref:s}),c)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((a,s)=>{const{children:c,...d}=a;return reactExports.isValidElement(c)?reactExports.cloneElement(c,{...$5e63c961fc1ce211$var$mergeProps(d,c.props),ref:s?$6ed0406888f73fc4$export$43e446d32b3d21af(s,c.ref):c.ref}):reactExports.Children.count(c)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:a})=>reactExports.createElement(reactExports.Fragment,null,a);function $5e63c961fc1ce211$var$isSlottable(a){return reactExports.isValidElement(a)&&a.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(a,s){const c={...s};for(const d in s){const et=a[d],g=s[d];/^on[A-Z]/.test(d)?et&&g?c[d]=(...$t)=>{g(...$t),et(...$t)}:et&&(c[d]=et):d==="style"?c[d]={...et,...g}:d==="className"&&(c[d]=[et,g].filter(Boolean).join(" "))}return{...a,...c}}function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(a){const s=a+"CollectionProvider",[c,d]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(s),[et,g]=c(s,{collectionRef:{current:null},itemMap:new Map}),at=Tt=>{const{scope:Ct,children:jt}=Tt,Lt=React.useRef(null),Ht=React.useRef(new Map).current;return React.createElement(et,{scope:Ct,itemMap:Ht,collectionRef:Lt},jt)},$t=a+"CollectionSlot",vt=React.forwardRef((Tt,Ct)=>{const{scope:jt,children:Lt}=Tt,Ht=g($t,jt),Gt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Ct,Ht.collectionRef);return React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:Gt},Lt)}),b=a+"CollectionItemSlot",pt="data-radix-collection-item",st=React.forwardRef((Tt,Ct)=>{const{scope:jt,children:Lt,...Ht}=Tt,Gt=React.useRef(null),Kt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Ct,Gt),tr=g(b,jt);return React.useEffect(()=>(tr.itemMap.set(Gt,{ref:Gt,...Ht}),()=>void tr.itemMap.delete(Gt))),React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[pt]:"",ref:Kt},Lt)});function wt(Tt){const Ct=g(a+"CollectionConsumer",Tt);return React.useCallback(()=>{const Lt=Ct.collectionRef.current;if(!Lt)return[];const Ht=Array.from(Lt.querySelectorAll(`[${pt}]`));return Array.from(Ct.itemMap.values()).sort((tr,rr)=>Ht.indexOf(tr.ref.current)-Ht.indexOf(rr.ref.current))},[Ct.collectionRef,Ct.itemMap])}return[{Provider:at,Slot:vt,ItemSlot:st},wt,d]}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((a,s)=>{const c=reactExports.forwardRef((d,et)=>{const{asChild:g,...at}=d,$t=g?$5e63c961fc1ce211$export$8c6ed5c666ac1360:s;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement($t,_extends$1({},at,{ref:et}))});return c.displayName=`Primitive.${s}`,{...a,[s]:c}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(a,s){a&&reactDomExports.flushSync(()=>a.dispatchEvent(s))}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a){const s=reactExports.useRef(a);return reactExports.useEffect(()=>{s.current=a}),reactExports.useMemo(()=>(...c)=>{var d;return(d=s.current)===null||d===void 0?void 0:d.call(s,...c)},[])}function $addc16e1bbe58fd0$export$3a72a57244d6e765(a,s=globalThis==null?void 0:globalThis.document){const c=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a);reactExports.useEffect(()=>{const d=et=>{et.key==="Escape"&&c(et)};return s.addEventListener("keydown",d),()=>s.removeEventListener("keydown",d)},[c,s])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((a,s)=>{var c;const{disableOutsidePointerEvents:d=!1,onEscapeKeyDown:et,onPointerDownOutside:g,onFocusOutside:at,onInteractOutside:$t,onDismiss:vt,...b}=a,pt=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[st,wt]=reactExports.useState(null),Tt=(c=st==null?void 0:st.ownerDocument)!==null&&c!==void 0?c:globalThis==null?void 0:globalThis.document,[,Ct]=reactExports.useState({}),jt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,Yr=>wt(Yr)),Lt=Array.from(pt.layers),[Ht]=[...pt.layersWithOutsidePointerEventsDisabled].slice(-1),Gt=Lt.indexOf(Ht),Kt=st?Lt.indexOf(st):-1,tr=pt.layersWithOutsidePointerEventsDisabled.size>0,rr=Kt>=Gt,Lr=$5cb92bef7577960e$var$usePointerDownOutside(Yr=>{const An=Yr.target,No=[...pt.branches].some(o0=>o0.contains(An));!rr||No||(g==null||g(Yr),$t==null||$t(Yr),Yr.defaultPrevented||vt==null||vt())},Tt),jr=$5cb92bef7577960e$var$useFocusOutside(Yr=>{const An=Yr.target;[...pt.branches].some(o0=>o0.contains(An))||(at==null||at(Yr),$t==null||$t(Yr),Yr.defaultPrevented||vt==null||vt())},Tt);return $addc16e1bbe58fd0$export$3a72a57244d6e765(Yr=>{Kt===pt.layers.size-1&&(et==null||et(Yr),!Yr.defaultPrevented&&vt&&(Yr.preventDefault(),vt()))},Tt),reactExports.useEffect(()=>{if(st)return d&&(pt.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=Tt.body.style.pointerEvents,Tt.body.style.pointerEvents="none"),pt.layersWithOutsidePointerEventsDisabled.add(st)),pt.layers.add(st),$5cb92bef7577960e$var$dispatchUpdate(),()=>{d&&pt.layersWithOutsidePointerEventsDisabled.size===1&&(Tt.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[st,Tt,d,pt]),reactExports.useEffect(()=>()=>{st&&(pt.layers.delete(st),pt.layersWithOutsidePointerEventsDisabled.delete(st),$5cb92bef7577960e$var$dispatchUpdate())},[st,pt]),reactExports.useEffect(()=>{const Yr=()=>Ct({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,Yr),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,Yr)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},b,{ref:jt,style:{pointerEvents:tr?rr?"auto":"none":void 0,...a.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocusCapture,jr.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onBlurCapture,jr.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDownCapture,Lr.onPointerDownCapture)}))}),$5cb92bef7577960e$export$4d5eb2109db14228=reactExports.forwardRef((a,s)=>{const c=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),d=reactExports.useRef(null),et=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return c.branches.add(g),()=>{c.branches.delete(g)}},[c.branches]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},a,{ref:et}))});function $5cb92bef7577960e$var$usePointerDownOutside(a,s=globalThis==null?void 0:globalThis.document){const c=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a),d=reactExports.useRef(!1),et=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const g=$t=>{if($t.target&&!d.current){let pt=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,c,b,{discrete:!0})};var vt=pt;const b={originalEvent:$t};$t.pointerType==="touch"?(s.removeEventListener("click",et.current),et.current=pt,s.addEventListener("click",et.current,{once:!0})):pt()}else s.removeEventListener("click",et.current);d.current=!1},at=window.setTimeout(()=>{s.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(at),s.removeEventListener("pointerdown",g),s.removeEventListener("click",et.current)}},[s,c]),{onPointerDownCapture:()=>d.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(a,s=globalThis==null?void 0:globalThis.document){const c=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a),d=reactExports.useRef(!1);return reactExports.useEffect(()=>{const et=g=>{g.target&&!d.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,c,{originalEvent:g},{discrete:!1})};return s.addEventListener("focusin",et),()=>s.removeEventListener("focusin",et)},[s,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const a=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(a)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(a,s,c,{discrete:d}){const et=c.originalEvent.target,g=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});s&&et.addEventListener(a,s,{once:!0}),d?$8927f6f2acc4f386$export$6d1a0317bde7de7f(et,g):et.dispatchEvent(g)}const $5cb92bef7577960e$export$be92b6f5f03c0fe9=$5cb92bef7577960e$export$177fb62ff3ec1f22,$5cb92bef7577960e$export$aecb2ddcb55c95be=$5cb92bef7577960e$export$4d5eb2109db14228,$f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((a,s)=>{var c;const{container:d=globalThis==null||(c=globalThis.document)===null||c===void 0?void 0:c.body,...et}=a;return d?ReactDOM.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},et,{ref:s})),d):null}),$9f79659886946c16$export$e5c5a5f917a5871c=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function $fe963b355347cc68$export$3e6543de14f8614f(a,s){return reactExports.useReducer((c,d)=>{const et=s[c][d];return et??c},a)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=a=>{const{present:s,children:c}=a,d=$921a889cee6df7e8$var$usePresence(s),et=typeof c=="function"?c({present:d.isPresent}):reactExports.Children.only(c),g=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(d.ref,et.ref);return typeof c=="function"||d.isPresent?reactExports.cloneElement(et,{ref:g}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(a){const[s,c]=reactExports.useState(),d=reactExports.useRef({}),et=reactExports.useRef(a),g=reactExports.useRef("none"),at=a?"mounted":"unmounted",[$t,vt]=$fe963b355347cc68$export$3e6543de14f8614f(at,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const b=$921a889cee6df7e8$var$getAnimationName(d.current);g.current=$t==="mounted"?b:"none"},[$t]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const b=d.current,pt=et.current;if(pt!==a){const wt=g.current,Tt=$921a889cee6df7e8$var$getAnimationName(b);a?vt("MOUNT"):Tt==="none"||(b==null?void 0:b.display)==="none"?vt("UNMOUNT"):vt(pt&&wt!==Tt?"ANIMATION_OUT":"UNMOUNT"),et.current=a}},[a,vt]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(s){const b=st=>{const Tt=$921a889cee6df7e8$var$getAnimationName(d.current).includes(st.animationName);st.target===s&&Tt&&reactDomExports.flushSync(()=>vt("ANIMATION_END"))},pt=st=>{st.target===s&&(g.current=$921a889cee6df7e8$var$getAnimationName(d.current))};return s.addEventListener("animationstart",pt),s.addEventListener("animationcancel",b),s.addEventListener("animationend",b),()=>{s.removeEventListener("animationstart",pt),s.removeEventListener("animationcancel",b),s.removeEventListener("animationend",b)}}else vt("ANIMATION_END")},[s,vt]),{isPresent:["mounted","unmountSuspended"].includes($t),ref:reactExports.useCallback(b=>{b&&(d.current=getComputedStyle(b)),c(b)},[])}}function $921a889cee6df7e8$var$getAnimationName(a){return(a==null?void 0:a.animationName)||"none"}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:a,defaultProp:s,onChange:c=()=>{}}){const[d,et]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:s,onChange:c}),g=a!==void 0,at=g?a:d,$t=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(c),vt=reactExports.useCallback(b=>{if(g){const st=typeof b=="function"?b(a):b;st!==a&&$t(st)}else et(b)},[g,a,et,$t]);return[at,vt]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:a,onChange:s}){const c=reactExports.useState(a),[d]=c,et=reactExports.useRef(d),g=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(s);return reactExports.useEffect(()=>{et.current!==d&&(g(d),et.current=d)},[d,et,g]),c}const $ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((a,s)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},a,{ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...a.style}}))),$ea1ef594cf570d83$export$be92b6f5f03c0fe9=$ea1ef594cf570d83$export$439d29a4e110a164,$054eb8030ebde76e$var$PROVIDER_NAME="ToastProvider",[$054eb8030ebde76e$var$Collection,$054eb8030ebde76e$var$useCollection,$054eb8030ebde76e$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2("Toast"),[$054eb8030ebde76e$var$createToastContext,$054eb8030ebde76e$export$8a359da18fbc9073]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Toast",[$054eb8030ebde76e$var$createCollectionScope]),[$054eb8030ebde76e$var$ToastProviderProvider,$054eb8030ebde76e$var$useToastProviderContext]=$054eb8030ebde76e$var$createToastContext($054eb8030ebde76e$var$PROVIDER_NAME),$054eb8030ebde76e$export$f5d03d415824e0e=a=>{const{__scopeToast:s,label:c="Notification",duration:d=5e3,swipeDirection:et="right",swipeThreshold:g=50,children:at}=a,[$t,vt]=reactExports.useState(null),[b,pt]=reactExports.useState(0),st=reactExports.useRef(!1),wt=reactExports.useRef(!1);return reactExports.createElement($054eb8030ebde76e$var$Collection.Provider,{scope:s},reactExports.createElement($054eb8030ebde76e$var$ToastProviderProvider,{scope:s,label:c,duration:d,swipeDirection:et,swipeThreshold:g,toastCount:b,viewport:$t,onViewportChange:vt,onToastAdd:reactExports.useCallback(()=>pt(Tt=>Tt+1),[]),onToastRemove:reactExports.useCallback(()=>pt(Tt=>Tt-1),[]),isFocusedToastEscapeKeyDownRef:st,isClosePausedRef:wt},at))};$054eb8030ebde76e$export$f5d03d415824e0e.propTypes={label(a){if(a.label&&typeof a.label=="string"&&!a.label.trim()){const s=`Invalid prop \`label\` supplied to \`${$054eb8030ebde76e$var$PROVIDER_NAME}\`. Expected non-empty \`string\`.`;return new Error(s)}return null}};const $054eb8030ebde76e$var$VIEWPORT_NAME="ToastViewport",$054eb8030ebde76e$var$VIEWPORT_DEFAULT_HOTKEY=["F8"],$054eb8030ebde76e$var$VIEWPORT_PAUSE="toast.viewportPause",$054eb8030ebde76e$var$VIEWPORT_RESUME="toast.viewportResume",$054eb8030ebde76e$export$6192c2425ecfd989=reactExports.forwardRef((a,s)=>{const{__scopeToast:c,hotkey:d=$054eb8030ebde76e$var$VIEWPORT_DEFAULT_HOTKEY,label:et="Notifications ({hotkey})",...g}=a,at=$054eb8030ebde76e$var$useToastProviderContext($054eb8030ebde76e$var$VIEWPORT_NAME,c),$t=$054eb8030ebde76e$var$useCollection(c),vt=reactExports.useRef(null),b=reactExports.useRef(null),pt=reactExports.useRef(null),st=reactExports.useRef(null),wt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,st,at.onViewportChange),Tt=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ct=at.toastCount>0;reactExports.useEffect(()=>{const Lt=Ht=>{var Gt;d.every(tr=>Ht[tr]||Ht.code===tr)&&((Gt=st.current)===null||Gt===void 0||Gt.focus())};return document.addEventListener("keydown",Lt),()=>document.removeEventListener("keydown",Lt)},[d]),reactExports.useEffect(()=>{const Lt=vt.current,Ht=st.current;if(Ct&&Lt&&Ht){const Gt=()=>{if(!at.isClosePausedRef.current){const Lr=new CustomEvent($054eb8030ebde76e$var$VIEWPORT_PAUSE);Ht.dispatchEvent(Lr),at.isClosePausedRef.current=!0}},Kt=()=>{if(at.isClosePausedRef.current){const Lr=new CustomEvent($054eb8030ebde76e$var$VIEWPORT_RESUME);Ht.dispatchEvent(Lr),at.isClosePausedRef.current=!1}},tr=Lr=>{!Lt.contains(Lr.relatedTarget)&&Kt()},rr=()=>{Lt.contains(document.activeElement)||Kt()};return Lt.addEventListener("focusin",Gt),Lt.addEventListener("focusout",tr),Lt.addEventListener("pointermove",Gt),Lt.addEventListener("pointerleave",rr),window.addEventListener("blur",Gt),window.addEventListener("focus",Kt),()=>{Lt.removeEventListener("focusin",Gt),Lt.removeEventListener("focusout",tr),Lt.removeEventListener("pointermove",Gt),Lt.removeEventListener("pointerleave",rr),window.removeEventListener("blur",Gt),window.removeEventListener("focus",Kt)}}},[Ct,at.isClosePausedRef]);const jt=reactExports.useCallback(({tabbingDirection:Lt})=>{const Gt=$t().map(Kt=>{const tr=Kt.ref.current,rr=[tr,...$054eb8030ebde76e$var$getTabbableCandidates(tr)];return Lt==="forwards"?rr:rr.reverse()});return(Lt==="forwards"?Gt.reverse():Gt).flat()},[$t]);return reactExports.useEffect(()=>{const Lt=st.current;if(Lt){const Ht=Gt=>{const Kt=Gt.altKey||Gt.ctrlKey||Gt.metaKey;if(Gt.key==="Tab"&&!Kt){const Yr=document.activeElement,An=Gt.shiftKey;if(Gt.target===Lt&&An){var rr;(rr=b.current)===null||rr===void 0||rr.focus();return}const t0=jt({tabbingDirection:An?"backwards":"forwards"}),c0=t0.findIndex(n0=>n0===Yr);if($054eb8030ebde76e$var$focusFirst(t0.slice(c0+1)))Gt.preventDefault();else{var Lr,jr;An?(Lr=b.current)===null||Lr===void 0||Lr.focus():(jr=pt.current)===null||jr===void 0||jr.focus()}}};return Lt.addEventListener("keydown",Ht),()=>Lt.removeEventListener("keydown",Ht)}},[$t,jt]),reactExports.createElement($5cb92bef7577960e$export$aecb2ddcb55c95be,{ref:vt,role:"region","aria-label":et.replace("{hotkey}",Tt),tabIndex:-1,style:{pointerEvents:Ct?void 0:"none"}},Ct&&reactExports.createElement($054eb8030ebde76e$var$FocusProxy,{ref:b,onFocusFromOutsideViewport:()=>{const Lt=jt({tabbingDirection:"forwards"});$054eb8030ebde76e$var$focusFirst(Lt)}}),reactExports.createElement($054eb8030ebde76e$var$Collection.Slot,{scope:c},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.ol,_extends$1({tabIndex:-1},g,{ref:wt}))),Ct&&reactExports.createElement($054eb8030ebde76e$var$FocusProxy,{ref:pt,onFocusFromOutsideViewport:()=>{const Lt=jt({tabbingDirection:"backwards"});$054eb8030ebde76e$var$focusFirst(Lt)}}))}),$054eb8030ebde76e$var$FOCUS_PROXY_NAME="ToastFocusProxy",$054eb8030ebde76e$var$FocusProxy=reactExports.forwardRef((a,s)=>{const{__scopeToast:c,onFocusFromOutsideViewport:d,...et}=a,g=$054eb8030ebde76e$var$useToastProviderContext($054eb8030ebde76e$var$FOCUS_PROXY_NAME,c);return reactExports.createElement($ea1ef594cf570d83$export$439d29a4e110a164,_extends$1({"aria-hidden":!0,tabIndex:0},et,{ref:s,style:{position:"fixed"},onFocus:at=>{var $t;const vt=at.relatedTarget;!(($t=g.viewport)!==null&&$t!==void 0&&$t.contains(vt))&&d()}}))}),$054eb8030ebde76e$var$TOAST_NAME="Toast",$054eb8030ebde76e$var$TOAST_SWIPE_START="toast.swipeStart",$054eb8030ebde76e$var$TOAST_SWIPE_MOVE="toast.swipeMove",$054eb8030ebde76e$var$TOAST_SWIPE_CANCEL="toast.swipeCancel",$054eb8030ebde76e$var$TOAST_SWIPE_END="toast.swipeEnd",$054eb8030ebde76e$export$8d8dc7d5f743331b=reactExports.forwardRef((a,s)=>{const{forceMount:c,open:d,defaultOpen:et,onOpenChange:g,...at}=a,[$t=!0,vt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:d,defaultProp:et,onChange:g});return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:c||$t},reactExports.createElement($054eb8030ebde76e$var$ToastImpl,_extends$1({open:$t},at,{ref:s,onClose:()=>vt(!1),onPause:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a.onPause),onResume:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a.onResume),onSwipeStart:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onSwipeStart,b=>{b.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onSwipeMove,b=>{const{x:pt,y:st}=b.detail.delta;b.currentTarget.setAttribute("data-swipe","move"),b.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${pt}px`),b.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${st}px`)}),onSwipeCancel:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onSwipeCancel,b=>{b.currentTarget.setAttribute("data-swipe","cancel"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),b.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onSwipeEnd,b=>{const{x:pt,y:st}=b.detail.delta;b.currentTarget.setAttribute("data-swipe","end"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),b.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${pt}px`),b.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${st}px`),vt(!1)})})))}),[$054eb8030ebde76e$var$ToastInteractiveProvider,$054eb8030ebde76e$var$useToastInteractiveContext]=$054eb8030ebde76e$var$createToastContext($054eb8030ebde76e$var$TOAST_NAME,{onClose(){}}),$054eb8030ebde76e$var$ToastImpl=reactExports.forwardRef((a,s)=>{const{__scopeToast:c,type:d="foreground",duration:et,open:g,onClose:at,onEscapeKeyDown:$t,onPause:vt,onResume:b,onSwipeStart:pt,onSwipeMove:st,onSwipeCancel:wt,onSwipeEnd:Tt,...Ct}=a,jt=$054eb8030ebde76e$var$useToastProviderContext($054eb8030ebde76e$var$TOAST_NAME,c),[Lt,Ht]=reactExports.useState(null),Gt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,n0=>Ht(n0)),Kt=reactExports.useRef(null),tr=reactExports.useRef(null),rr=et||jt.duration,Lr=reactExports.useRef(0),jr=reactExports.useRef(rr),Yr=reactExports.useRef(0),{onToastAdd:An,onToastRemove:No}=jt,o0=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(()=>{var n0;(Lt==null?void 0:Lt.contains(document.activeElement))&&((n0=jt.viewport)===null||n0===void 0||n0.focus()),at()}),t0=reactExports.useCallback(n0=>{!n0||n0===1/0||(window.clearTimeout(Yr.current),Lr.current=new Date().getTime(),Yr.current=window.setTimeout(o0,n0))},[o0]);reactExports.useEffect(()=>{const n0=jt.viewport;if(n0){const Qo=()=>{t0(jr.current),b==null||b()},Mo=()=>{const zo=new Date().getTime()-Lr.current;jr.current=jr.current-zo,window.clearTimeout(Yr.current),vt==null||vt()};return n0.addEventListener($054eb8030ebde76e$var$VIEWPORT_PAUSE,Mo),n0.addEventListener($054eb8030ebde76e$var$VIEWPORT_RESUME,Qo),()=>{n0.removeEventListener($054eb8030ebde76e$var$VIEWPORT_PAUSE,Mo),n0.removeEventListener($054eb8030ebde76e$var$VIEWPORT_RESUME,Qo)}}},[jt.viewport,rr,vt,b,t0]),reactExports.useEffect(()=>{g&&!jt.isClosePausedRef.current&&t0(rr)},[g,rr,jt.isClosePausedRef,t0]),reactExports.useEffect(()=>(An(),()=>No()),[An,No]);const c0=reactExports.useMemo(()=>Lt?$054eb8030ebde76e$var$getAnnounceTextContent(Lt):null,[Lt]);return jt.viewport?reactExports.createElement(reactExports.Fragment,null,c0&&reactExports.createElement($054eb8030ebde76e$var$ToastAnnounce,{__scopeToast:c,role:"status","aria-live":d==="foreground"?"assertive":"polite","aria-atomic":!0},c0),reactExports.createElement($054eb8030ebde76e$var$ToastInteractiveProvider,{scope:c,onClose:o0},reactDomExports.createPortal(reactExports.createElement($054eb8030ebde76e$var$Collection.ItemSlot,{scope:c},reactExports.createElement($5cb92bef7577960e$export$be92b6f5f03c0fe9,{asChild:!0,onEscapeKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10($t,()=>{jt.isFocusedToastEscapeKeyDownRef.current||o0(),jt.isFocusedToastEscapeKeyDownRef.current=!1})},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.li,_extends$1({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":g?"open":"closed","data-swipe-direction":jt.swipeDirection},Ct,{ref:Gt,style:{userSelect:"none",touchAction:"none",...a.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onKeyDown,n0=>{n0.key==="Escape"&&($t==null||$t(n0.nativeEvent),n0.nativeEvent.defaultPrevented||(jt.isFocusedToastEscapeKeyDownRef.current=!0,o0()))}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDown,n0=>{n0.button===0&&(Kt.current={x:n0.clientX,y:n0.clientY})}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerMove,n0=>{if(!Kt.current)return;const Qo=n0.clientX-Kt.current.x,Mo=n0.clientY-Kt.current.y,zo=!!tr.current,e0=["left","right"].includes(jt.swipeDirection),Xr=["left","up"].includes(jt.swipeDirection)?Math.min:Math.max,In=e0?Xr(0,Qo):0,Zr=e0?0:Xr(0,Mo),wn=n0.pointerType==="touch"?10:2,r0={x:In,y:Zr},ko={originalEvent:n0,delta:r0};zo?(tr.current=r0,$054eb8030ebde76e$var$handleAndDispatchCustomEvent($054eb8030ebde76e$var$TOAST_SWIPE_MOVE,st,ko,{discrete:!1})):$054eb8030ebde76e$var$isDeltaInDirection(r0,jt.swipeDirection,wn)?(tr.current=r0,$054eb8030ebde76e$var$handleAndDispatchCustomEvent($054eb8030ebde76e$var$TOAST_SWIPE_START,pt,ko,{discrete:!1}),n0.target.setPointerCapture(n0.pointerId)):(Math.abs(Qo)>wn||Math.abs(Mo)>wn)&&(Kt.current=null)}),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerUp,n0=>{const Qo=tr.current,Mo=n0.target;if(Mo.hasPointerCapture(n0.pointerId)&&Mo.releasePointerCapture(n0.pointerId),tr.current=null,Kt.current=null,Qo){const zo=n0.currentTarget,e0={originalEvent:n0,delta:Qo};$054eb8030ebde76e$var$isDeltaInDirection(Qo,jt.swipeDirection,jt.swipeThreshold)?$054eb8030ebde76e$var$handleAndDispatchCustomEvent($054eb8030ebde76e$var$TOAST_SWIPE_END,Tt,e0,{discrete:!0}):$054eb8030ebde76e$var$handleAndDispatchCustomEvent($054eb8030ebde76e$var$TOAST_SWIPE_CANCEL,wt,e0,{discrete:!0}),zo.addEventListener("click",Xr=>Xr.preventDefault(),{once:!0})}})})))),jt.viewport))):null});$054eb8030ebde76e$var$ToastImpl.propTypes={type(a){if(a.type&&!["foreground","background"].includes(a.type)){const s=`Invalid prop \`type\` supplied to \`${$054eb8030ebde76e$var$TOAST_NAME}\`. Expected \`foreground | background\`.`;return new Error(s)}return null}};const $054eb8030ebde76e$var$ToastAnnounce=a=>{const{__scopeToast:s,children:c,...d}=a,et=$054eb8030ebde76e$var$useToastProviderContext($054eb8030ebde76e$var$TOAST_NAME,s),[g,at]=reactExports.useState(!1),[$t,vt]=reactExports.useState(!1);return $054eb8030ebde76e$var$useNextFrame(()=>at(!0)),reactExports.useEffect(()=>{const b=window.setTimeout(()=>vt(!0),1e3);return()=>window.clearTimeout(b)},[]),$t?null:reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0},reactExports.createElement($ea1ef594cf570d83$export$439d29a4e110a164,d,g&&reactExports.createElement(reactExports.Fragment,null,et.label," ",c)))},$054eb8030ebde76e$export$16d42d7c29b95a4=reactExports.forwardRef((a,s)=>{const{__scopeToast:c,...d}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},d,{ref:s}))}),$054eb8030ebde76e$export$ecddd96c53621d9a=reactExports.forwardRef((a,s)=>{const{__scopeToast:c,...d}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},d,{ref:s}))}),$054eb8030ebde76e$var$ACTION_NAME="ToastAction",$054eb8030ebde76e$export$3019feecfda683d2=reactExports.forwardRef((a,s)=>{const{altText:c,...d}=a;return c?reactExports.createElement($054eb8030ebde76e$var$ToastAnnounceExclude,{altText:c,asChild:!0},reactExports.createElement($054eb8030ebde76e$export$811e70f61c205839,_extends$1({},d,{ref:s}))):null});$054eb8030ebde76e$export$3019feecfda683d2.propTypes={altText(a){return a.altText?null:new Error(`Missing prop \`altText\` expected on \`${$054eb8030ebde76e$var$ACTION_NAME}\``)}};const $054eb8030ebde76e$var$CLOSE_NAME="ToastClose",$054eb8030ebde76e$export$811e70f61c205839=reactExports.forwardRef((a,s)=>{const{__scopeToast:c,...d}=a,et=$054eb8030ebde76e$var$useToastInteractiveContext($054eb8030ebde76e$var$CLOSE_NAME,c);return reactExports.createElement($054eb8030ebde76e$var$ToastAnnounceExclude,{asChild:!0},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button"},d,{ref:s,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onClick,et.onClose)})))}),$054eb8030ebde76e$var$ToastAnnounceExclude=reactExports.forwardRef((a,s)=>{const{__scopeToast:c,altText:d,...et}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":d||void 0},et,{ref:s}))});function $054eb8030ebde76e$var$getAnnounceTextContent(a){const s=[];return Array.from(a.childNodes).forEach(d=>{if(d.nodeType===d.TEXT_NODE&&d.textContent&&s.push(d.textContent),$054eb8030ebde76e$var$isHTMLElement(d)){const et=d.ariaHidden||d.hidden||d.style.display==="none",g=d.dataset.radixToastAnnounceExclude==="";if(!et)if(g){const at=d.dataset.radixToastAnnounceAlt;at&&s.push(at)}else s.push(...$054eb8030ebde76e$var$getAnnounceTextContent(d))}}),s}function $054eb8030ebde76e$var$handleAndDispatchCustomEvent(a,s,c,{discrete:d}){const et=c.originalEvent.currentTarget,g=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:c});s&&et.addEventListener(a,s,{once:!0}),d?$8927f6f2acc4f386$export$6d1a0317bde7de7f(et,g):et.dispatchEvent(g)}const $054eb8030ebde76e$var$isDeltaInDirection=(a,s,c=0)=>{const d=Math.abs(a.x),et=Math.abs(a.y),g=d>et;return s==="left"||s==="right"?g&&d>c:!g&&et>c};function $054eb8030ebde76e$var$useNextFrame(a=()=>{}){const s=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{let c=0,d=0;return c=window.requestAnimationFrame(()=>d=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(c),window.cancelAnimationFrame(d)}},[s])}function $054eb8030ebde76e$var$isHTMLElement(a){return a.nodeType===a.ELEMENT_NODE}function $054eb8030ebde76e$var$getTabbableCandidates(a){const s=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const et=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||et?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)s.push(c.currentNode);return s}function $054eb8030ebde76e$var$focusFirst(a){const s=document.activeElement;return a.some(c=>c===s?!0:(c.focus(),document.activeElement!==s))}const $054eb8030ebde76e$export$2881499e37b75b9a=$054eb8030ebde76e$export$f5d03d415824e0e,$054eb8030ebde76e$export$d5c6c08dc2d3ca7=$054eb8030ebde76e$export$6192c2425ecfd989,$054eb8030ebde76e$export$be92b6f5f03c0fe9=$054eb8030ebde76e$export$8d8dc7d5f743331b,$054eb8030ebde76e$export$f99233281efd08a0=$054eb8030ebde76e$export$16d42d7c29b95a4,$054eb8030ebde76e$export$393edc798c47379d=$054eb8030ebde76e$export$ecddd96c53621d9a,$054eb8030ebde76e$export$e19cd5f9376f8cee=$054eb8030ebde76e$export$3019feecfda683d2,$054eb8030ebde76e$export$f39c2d165cd861fe=$054eb8030ebde76e$export$811e70f61c205839;function r$3(a){var s,c,d="";if(typeof a=="string"||typeof a=="number")d+=a;else if(typeof a=="object")if(Array.isArray(a))for(s=0;s<a.length;s++)a[s]&&(c=r$3(a[s]))&&(d&&(d+=" "),d+=c);else for(s in a)a[s]&&(d&&(d+=" "),d+=s);return d}function clsx$1(){for(var a,s,c=0,d="";c<arguments.length;)(a=arguments[c++])&&(s=r$3(a))&&(d&&(d+=" "),d+=s);return d}const falsyToString=a=>typeof a=="boolean"?"".concat(a):a===0?"0":a,cx=clsx$1,cva=(a,s)=>c=>{var d;if((s==null?void 0:s.variants)==null)return cx(a,c==null?void 0:c.class,c==null?void 0:c.className);const{variants:et,defaultVariants:g}=s,at=Object.keys(et).map(b=>{const pt=c==null?void 0:c[b],st=g==null?void 0:g[b];if(pt===null)return null;const wt=falsyToString(pt)||falsyToString(st);return et[b][wt]}),$t=c&&Object.entries(c).reduce((b,pt)=>{let[st,wt]=pt;return wt===void 0||(b[st]=wt),b},{}),vt=s==null||(d=s.compoundVariants)===null||d===void 0?void 0:d.reduce((b,pt)=>{let{class:st,className:wt,...Tt}=pt;return Object.entries(Tt).every(Ct=>{let[jt,Lt]=Ct;return Array.isArray(Lt)?Lt.includes({...g,...$t}[jt]):{...g,...$t}[jt]===Lt})?[...b,st,wt]:b},[]);return cx(a,at,vt,c==null?void 0:c.class,c==null?void 0:c.className)};function r$2(a){var s,c,d="";if(typeof a=="string"||typeof a=="number")d+=a;else if(typeof a=="object")if(Array.isArray(a)){var et=a.length;for(s=0;s<et;s++)a[s]&&(c=r$2(a[s]))&&(d&&(d+=" "),d+=c)}else for(c in a)a[c]&&(d&&(d+=" "),d+=c);return d}function clsx(){for(var a,s,c=0,d="",et=arguments.length;c<et;c++)(a=arguments[c])&&(s=r$2(a))&&(d&&(d+=" "),d+=s);return d}const CLASS_PART_SEPARATOR="-";function createClassUtils(a){const s=createClassMap(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;function et(at){const $t=at.split(CLASS_PART_SEPARATOR);return $t[0]===""&&$t.length!==1&&$t.shift(),getGroupRecursive($t,s)||getGroupIdForArbitraryProperty(at)}function g(at,$t){const vt=c[at]||[];return $t&&d[at]?[...vt,...d[at]]:vt}return{getClassGroupId:et,getConflictingClassGroupIds:g}}function getGroupRecursive(a,s){var at;if(a.length===0)return s.classGroupId;const c=a[0],d=s.nextPart.get(c),et=d?getGroupRecursive(a.slice(1),d):void 0;if(et)return et;if(s.validators.length===0)return;const g=a.join(CLASS_PART_SEPARATOR);return(at=s.validators.find(({validator:$t})=>$t(g)))==null?void 0:at.classGroupId}const arbitraryPropertyRegex=/^\[(.+)\]$/;function getGroupIdForArbitraryProperty(a){if(arbitraryPropertyRegex.test(a)){const s=arbitraryPropertyRegex.exec(a)[1],c=s==null?void 0:s.substring(0,s.indexOf(":"));if(c)return"arbitrary.."+c}}function createClassMap(a){const{theme:s,prefix:c}=a,d={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(a.classGroups),c).forEach(([g,at])=>{processClassesRecursively(at,d,g,s)}),d}function processClassesRecursively(a,s,c,d){a.forEach(et=>{if(typeof et=="string"){const g=et===""?s:getPart(s,et);g.classGroupId=c;return}if(typeof et=="function"){if(isThemeGetter(et)){processClassesRecursively(et(d),s,c,d);return}s.validators.push({validator:et,classGroupId:c});return}Object.entries(et).forEach(([g,at])=>{processClassesRecursively(at,getPart(s,g),c,d)})})}function getPart(a,s){let c=a;return s.split(CLASS_PART_SEPARATOR).forEach(d=>{c.nextPart.has(d)||c.nextPart.set(d,{nextPart:new Map,validators:[]}),c=c.nextPart.get(d)}),c}function isThemeGetter(a){return a.isThemeGetter}function getPrefixedClassGroupEntries(a,s){return s?a.map(([c,d])=>{const et=d.map(g=>typeof g=="string"?s+g:typeof g=="object"?Object.fromEntries(Object.entries(g).map(([at,$t])=>[s+at,$t])):g);return[c,et]}):a}function createLruCache(a){if(a<1)return{get:()=>{},set:()=>{}};let s=0,c=new Map,d=new Map;function et(g,at){c.set(g,at),s++,s>a&&(s=0,d=c,c=new Map)}return{get(g){let at=c.get(g);if(at!==void 0)return at;if((at=d.get(g))!==void 0)return et(g,at),at},set(g,at){c.has(g)?c.set(g,at):et(g,at)}}}const IMPORTANT_MODIFIER="!";function createSplitModifiers(a){const s=a.separator,c=s.length===1,d=s[0],et=s.length;return function(at){const $t=[];let vt=0,b=0,pt;for(let jt=0;jt<at.length;jt++){let Lt=at[jt];if(vt===0){if(Lt===d&&(c||at.slice(jt,jt+et)===s)){$t.push(at.slice(b,jt)),b=jt+et;continue}if(Lt==="/"){pt=jt;continue}}Lt==="["?vt++:Lt==="]"&&vt--}const st=$t.length===0?at:at.substring(b),wt=st.startsWith(IMPORTANT_MODIFIER),Tt=wt?st.substring(1):st,Ct=pt&&pt>b?pt-b:void 0;return{modifiers:$t,hasImportantModifier:wt,baseClassName:Tt,maybePostfixModifierPosition:Ct}}}function sortModifiers(a){if(a.length<=1)return a;const s=[];let c=[];return a.forEach(d=>{d[0]==="["?(s.push(...c.sort(),d),c=[]):c.push(d)}),s.push(...c.sort()),s}function createConfigUtils(a){return{cache:createLruCache(a.cacheSize),splitModifiers:createSplitModifiers(a),...createClassUtils(a)}}const SPLIT_CLASSES_REGEX=/\s+/;function mergeClassList(a,s){const{splitModifiers:c,getClassGroupId:d,getConflictingClassGroupIds:et}=s,g=new Set;return a.trim().split(SPLIT_CLASSES_REGEX).map(at=>{const{modifiers:$t,hasImportantModifier:vt,baseClassName:b,maybePostfixModifierPosition:pt}=c(at);let st=d(pt?b.substring(0,pt):b),wt=!!pt;if(!st){if(!pt)return{isTailwindClass:!1,originalClassName:at};if(st=d(b),!st)return{isTailwindClass:!1,originalClassName:at};wt=!1}const Tt=sortModifiers($t).join(":");return{isTailwindClass:!0,modifierId:vt?Tt+IMPORTANT_MODIFIER:Tt,classGroupId:st,originalClassName:at,hasPostfixModifier:wt}}).reverse().filter(at=>{if(!at.isTailwindClass)return!0;const{modifierId:$t,classGroupId:vt,hasPostfixModifier:b}=at,pt=$t+vt;return g.has(pt)?!1:(g.add(pt),et(vt,b).forEach(st=>g.add($t+st)),!0)}).reverse().map(at=>at.originalClassName).join(" ")}function twJoin(){let a=0,s,c,d="";for(;a<arguments.length;)(s=arguments[a++])&&(c=toValue(s))&&(d&&(d+=" "),d+=c);return d}function toValue(a){if(typeof a=="string")return a;let s,c="";for(let d=0;d<a.length;d++)a[d]&&(s=toValue(a[d]))&&(c&&(c+=" "),c+=s);return c}function createTailwindMerge(a,...s){let c,d,et,g=at;function at(vt){const b=s.reduce((pt,st)=>st(pt),a());return c=createConfigUtils(b),d=c.cache.get,et=c.cache.set,g=$t,$t(vt)}function $t(vt){const b=d(vt);if(b)return b;const pt=mergeClassList(vt,c);return et(vt,pt),pt}return function(){return g(twJoin.apply(null,arguments))}}function fromTheme(a){const s=c=>c[a]||[];return s.isThemeGetter=!0,s}const arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function isLength(a){return isNumber$1(a)||stringLengths.has(a)||fractionRegex.test(a)}function isArbitraryLength(a){return getIsArbitraryValue(a,"length",isLengthOnly)}function isNumber$1(a){return!!a&&!Number.isNaN(Number(a))}function isArbitraryNumber(a){return getIsArbitraryValue(a,"number",isNumber$1)}function isInteger(a){return!!a&&Number.isInteger(Number(a))}function isPercent(a){return a.endsWith("%")&&isNumber$1(a.slice(0,-1))}function isArbitraryValue(a){return arbitraryValueRegex.test(a)}function isTshirtSize(a){return tshirtUnitRegex.test(a)}const sizeLabels=new Set(["length","size","percentage"]);function isArbitrarySize(a){return getIsArbitraryValue(a,sizeLabels,isNever)}function isArbitraryPosition(a){return getIsArbitraryValue(a,"position",isNever)}const imageLabels=new Set(["image","url"]);function isArbitraryImage(a){return getIsArbitraryValue(a,imageLabels,isImage)}function isArbitraryShadow(a){return getIsArbitraryValue(a,"",isShadow)}function isAny(){return!0}function getIsArbitraryValue(a,s,c){const d=arbitraryValueRegex.exec(a);return d?d[1]?typeof s=="string"?d[1]===s:s.has(d[1]):c(d[2]):!1}function isLengthOnly(a){return lengthUnitRegex.test(a)&&!colorFunctionRegex.test(a)}function isNever(){return!1}function isShadow(a){return shadowRegex.test(a)}function isImage(a){return imageRegex.test(a)}function getDefaultConfig(){const a=fromTheme("colors"),s=fromTheme("spacing"),c=fromTheme("blur"),d=fromTheme("brightness"),et=fromTheme("borderColor"),g=fromTheme("borderRadius"),at=fromTheme("borderSpacing"),$t=fromTheme("borderWidth"),vt=fromTheme("contrast"),b=fromTheme("grayscale"),pt=fromTheme("hueRotate"),st=fromTheme("invert"),wt=fromTheme("gap"),Tt=fromTheme("gradientColorStops"),Ct=fromTheme("gradientColorStopPositions"),jt=fromTheme("inset"),Lt=fromTheme("margin"),Ht=fromTheme("opacity"),Gt=fromTheme("padding"),Kt=fromTheme("saturate"),tr=fromTheme("scale"),rr=fromTheme("sepia"),Lr=fromTheme("skew"),jr=fromTheme("space"),Yr=fromTheme("translate"),An=()=>["auto","contain","none"],No=()=>["auto","hidden","clip","visible","scroll"],o0=()=>["auto",isArbitraryValue,s],t0=()=>[isArbitraryValue,s],c0=()=>["",isLength,isArbitraryLength],n0=()=>["auto",isNumber$1,isArbitraryValue],Qo=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Mo=()=>["solid","dashed","dotted","double","none"],zo=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],e0=()=>["start","end","center","between","around","evenly","stretch"],Xr=()=>["","0",isArbitraryValue],In=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Zr=()=>[isNumber$1,isArbitraryNumber],wn=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Zr(),borderColor:[a],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:t0(),borderWidth:c0(),contrast:Zr(),grayscale:Xr(),hueRotate:wn(),invert:Xr(),gap:t0(),gradientColorStops:[a],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:o0(),margin:o0(),opacity:Zr(),padding:t0(),saturate:Zr(),scale:Zr(),sepia:Xr(),skew:wn(),space:t0(),translate:t0()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":In()}],"break-before":[{"break-before":In()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Qo(),isArbitraryValue]}],overflow:[{overflow:No()}],"overflow-x":[{"overflow-x":No()}],"overflow-y":[{"overflow-y":No()}],overscroll:[{overscroll:An()}],"overscroll-x":[{"overscroll-x":An()}],"overscroll-y":[{"overscroll-y":An()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[jt]}],"inset-x":[{"inset-x":[jt]}],"inset-y":[{"inset-y":[jt]}],start:[{start:[jt]}],end:[{end:[jt]}],top:[{top:[jt]}],right:[{right:[jt]}],bottom:[{bottom:[jt]}],left:[{left:[jt]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:o0()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Xr()}],shrink:[{shrink:Xr()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":n0()}],"col-end":[{"col-end":n0()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":n0()}],"row-end":[{"row-end":n0()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[wt]}],"gap-x":[{"gap-x":[wt]}],"gap-y":[{"gap-y":[wt]}],"justify-content":[{justify:["normal",...e0()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...e0(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...e0(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[Gt]}],px:[{px:[Gt]}],py:[{py:[Gt]}],ps:[{ps:[Gt]}],pe:[{pe:[Gt]}],pt:[{pt:[Gt]}],pr:[{pr:[Gt]}],pb:[{pb:[Gt]}],pl:[{pl:[Gt]}],m:[{m:[Lt]}],mx:[{mx:[Lt]}],my:[{my:[Lt]}],ms:[{ms:[Lt]}],me:[{me:[Lt]}],mt:[{mt:[Lt]}],mr:[{mr:[Lt]}],mb:[{mb:[Lt]}],ml:[{ml:[Lt]}],"space-x":[{"space-x":[jr]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[jr]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,s]}],"min-w":[{"min-w":[isArbitraryValue,s,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,s,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,s,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[a]}],"placeholder-opacity":[{"placeholder-opacity":[Ht]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[a]}],"text-opacity":[{"text-opacity":[Ht]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Mo(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[a]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:t0()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Ht]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Qo(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[a]}],"gradient-from-pos":[{from:[Ct]}],"gradient-via-pos":[{via:[Ct]}],"gradient-to-pos":[{to:[Ct]}],"gradient-from":[{from:[Tt]}],"gradient-via":[{via:[Tt]}],"gradient-to":[{to:[Tt]}],rounded:[{rounded:[g]}],"rounded-s":[{"rounded-s":[g]}],"rounded-e":[{"rounded-e":[g]}],"rounded-t":[{"rounded-t":[g]}],"rounded-r":[{"rounded-r":[g]}],"rounded-b":[{"rounded-b":[g]}],"rounded-l":[{"rounded-l":[g]}],"rounded-ss":[{"rounded-ss":[g]}],"rounded-se":[{"rounded-se":[g]}],"rounded-ee":[{"rounded-ee":[g]}],"rounded-es":[{"rounded-es":[g]}],"rounded-tl":[{"rounded-tl":[g]}],"rounded-tr":[{"rounded-tr":[g]}],"rounded-br":[{"rounded-br":[g]}],"rounded-bl":[{"rounded-bl":[g]}],"border-w":[{border:[$t]}],"border-w-x":[{"border-x":[$t]}],"border-w-y":[{"border-y":[$t]}],"border-w-s":[{"border-s":[$t]}],"border-w-e":[{"border-e":[$t]}],"border-w-t":[{"border-t":[$t]}],"border-w-r":[{"border-r":[$t]}],"border-w-b":[{"border-b":[$t]}],"border-w-l":[{"border-l":[$t]}],"border-opacity":[{"border-opacity":[Ht]}],"border-style":[{border:[...Mo(),"hidden"]}],"divide-x":[{"divide-x":[$t]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[$t]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Ht]}],"divide-style":[{divide:Mo()}],"border-color":[{border:[et]}],"border-color-x":[{"border-x":[et]}],"border-color-y":[{"border-y":[et]}],"border-color-t":[{"border-t":[et]}],"border-color-r":[{"border-r":[et]}],"border-color-b":[{"border-b":[et]}],"border-color-l":[{"border-l":[et]}],"divide-color":[{divide:[et]}],"outline-style":[{outline:["",...Mo()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[a]}],"ring-w":[{ring:c0()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[a]}],"ring-opacity":[{"ring-opacity":[Ht]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[a]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[Ht]}],"mix-blend":[{"mix-blend":[...zo(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":zo()}],filter:[{filter:["","none"]}],blur:[{blur:[c]}],brightness:[{brightness:[d]}],contrast:[{contrast:[vt]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[pt]}],invert:[{invert:[st]}],saturate:[{saturate:[Kt]}],sepia:[{sepia:[rr]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[c]}],"backdrop-brightness":[{"backdrop-brightness":[d]}],"backdrop-contrast":[{"backdrop-contrast":[vt]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[pt]}],"backdrop-invert":[{"backdrop-invert":[st]}],"backdrop-opacity":[{"backdrop-opacity":[Ht]}],"backdrop-saturate":[{"backdrop-saturate":[Kt]}],"backdrop-sepia":[{"backdrop-sepia":[rr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[at]}],"border-spacing-x":[{"border-spacing-x":[at]}],"border-spacing-y":[{"border-spacing-y":[at]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:wn()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:wn()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[tr]}],"scale-x":[{"scale-x":[tr]}],"scale-y":[{"scale-y":[tr]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[Yr]}],"translate-y":[{"translate-y":[Yr]}],"skew-x":[{"skew-x":[Lr]}],"skew-y":[{"skew-y":[Lr]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",a]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[a]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":t0()}],"scroll-mx":[{"scroll-mx":t0()}],"scroll-my":[{"scroll-my":t0()}],"scroll-ms":[{"scroll-ms":t0()}],"scroll-me":[{"scroll-me":t0()}],"scroll-mt":[{"scroll-mt":t0()}],"scroll-mr":[{"scroll-mr":t0()}],"scroll-mb":[{"scroll-mb":t0()}],"scroll-ml":[{"scroll-ml":t0()}],"scroll-p":[{"scroll-p":t0()}],"scroll-px":[{"scroll-px":t0()}],"scroll-py":[{"scroll-py":t0()}],"scroll-ps":[{"scroll-ps":t0()}],"scroll-pe":[{"scroll-pe":t0()}],"scroll-pt":[{"scroll-pt":t0()}],"scroll-pr":[{"scroll-pr":t0()}],"scroll-pb":[{"scroll-pb":t0()}],"scroll-pl":[{"scroll-pl":t0()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[a,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[a,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const twMerge=createTailwindMerge(getDefaultConfig),DEFAULT_BRUSH_SIZE=40,MIN_BRUSH_SIZE=3,MAX_BRUSH_SIZE=200,MODEL_TYPE_INPAINT="inpaint",MODEL_TYPE_DIFFUSERS_SD="diffusers_sd",MODEL_TYPE_DIFFUSERS_SDXL="diffusers_sdxl",MODEL_TYPE_DIFFUSERS_SD_INPAINT="diffusers_sd_inpaint",MODEL_TYPE_DIFFUSERS_SDXL_INPAINT="diffusers_sdxl_inpaint",MODEL_TYPE_OTHER="diffusers_other",BRUSH_COLOR="#ffcc00bb",LDM="ldm",CV2="cv2",PAINT_BY_EXAMPLE="Fantasy-Studio/Paint-by-Example",INSTRUCT_PIX2PIX="timbrooks/instruct-pix2pix",POWERPAINT="Sanster/PowerPaint-V1-stable-diffusion-inpainting",ANYTEXT="Sanster/AnyText",DEFAULT_NEGATIVE_PROMPT="out of frame, lowres, error, cropped, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, out of frame, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, disfigured, gross proportions, malformed limbs, watermark, signature",predefinedRatios=[{name:"1:1",ratio:1,width:1024,height:1024},{name:"3:2",ratio:3/2,width:1152,height:768},{name:"2:3",ratio:2/3,width:768,height:1152},{name:"4:3",ratio:4/3,width:1152,height:864},{name:"3:4",ratio:3/4,width:864,height:1152},{name:"16:9",ratio:16/9,width:1024,height:576},{name:"9:16",ratio:9/16,width:768,height:1360}],LOG_LEVELS={DEBUG:"debug",INFO:"info",ERROR:"error"};var fabric={};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);(function(a){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var s=s||{version:"5.3.0"};if(a.fabric=s,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?s.document=document:s.document=document.implementation.createHTMLDocument(""),s.window=window;else{var c=require$$2,d=new c.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;s.document=d.document,s.jsdomImplForWrapper=require$$2.implForWrapper,s.nodeCanvas=require$$2.Canvas,s.window=d,DOMParser=s.window.DOMParser}s.isTouchSupported="ontouchstart"in s.window||"ontouchstart"in s.document||s.window&&s.window.navigator&&s.window.navigator.maxTouchPoints>0,s.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",s.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],s.DPI=96,s.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",s.commaWsp="(?:\\s+,?\\s*|,\\s*)",s.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,s.reNonWord=/[ \n\.,;!\?\-]/,s.fontPaths={},s.iMatrix=[1,0,0,1,0,0],s.svgNS="http://www.w3.org/2000/svg",s.perfLimitSizeTotal=2097152,s.maxCacheSideLimit=4096,s.minCacheSideLimit=256,s.charWidthsCache={},s.textureSize=2048,s.disableStyleCopyPaste=!1,s.enableGLFiltering=!0,s.devicePixelRatio=s.window.devicePixelRatio||s.window.webkitDevicePixelRatio||s.window.mozDevicePixelRatio||1,s.browserShadowBlurConstant=1,s.arcToSegmentsCache={},s.boundsOfCurveCache={},s.cachesBoundsOfCurve=!0,s.forceGLPutImageData=!1,s.initFilterBackend=function(){if(s.enableGLFiltering&&s.isWebglSupported&&s.isWebglSupported(s.textureSize))return console.log("max texture size: "+s.maxTextureSize),new s.WebglFilterBackend({tileSize:s.textureSize});if(s.Canvas2dFilterBackend)return new s.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=s),function(){function $t(Tt,Ct){if(this.__eventListeners[Tt]){var jt=this.__eventListeners[Tt];Ct?jt[jt.indexOf(Ct)]=!1:s.util.array.fill(jt,!1)}}function vt(Tt,Ct){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var jt in Tt)this.on(jt,Tt[jt]);else this.__eventListeners[Tt]||(this.__eventListeners[Tt]=[]),this.__eventListeners[Tt].push(Ct);return this}function b(Tt,Ct){var jt=(function(){Ct.apply(this,arguments),this.off(Tt,jt)}).bind(this);this.on(Tt,jt)}function pt(Tt,Ct){if(arguments.length===1)for(var jt in Tt)b.call(this,jt,Tt[jt]);else b.call(this,Tt,Ct);return this}function st(Tt,Ct){if(!this.__eventListeners)return this;if(arguments.length===0)for(Tt in this.__eventListeners)$t.call(this,Tt);else if(arguments.length===1&&typeof arguments[0]=="object")for(var jt in Tt)$t.call(this,jt,Tt[jt]);else $t.call(this,Tt,Ct);return this}function wt(Tt,Ct){if(!this.__eventListeners)return this;var jt=this.__eventListeners[Tt];if(!jt)return this;for(var Lt=0,Ht=jt.length;Lt<Ht;Lt++)jt[Lt]&&jt[Lt].call(this,Ct||{});return this.__eventListeners[Tt]=jt.filter(function(Gt){return Gt!==!1}),this}s.Observable={fire:wt,on:vt,once:pt,off:st}}(),s.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var $t=0,vt=arguments.length;$t<vt;$t++)this._onObjectAdded(arguments[$t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function($t,vt,b){var pt=this._objects;return b?pt[vt]=$t:pt.splice(vt,0,$t),this._onObjectAdded&&this._onObjectAdded($t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var $t=this._objects,vt,b=!1,pt=0,st=arguments.length;pt<st;pt++)vt=$t.indexOf(arguments[pt]),vt!==-1&&(b=!0,$t.splice(vt,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[pt]));return this.renderOnAddRemove&&b&&this.requestRenderAll(),this},forEachObject:function($t,vt){for(var b=this.getObjects(),pt=0,st=b.length;pt<st;pt++)$t.call(vt,b[pt],pt,b);return this},getObjects:function($t){return typeof $t>"u"?this._objects.concat():this._objects.filter(function(vt){return vt.type===$t})},item:function($t){return this._objects[$t]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function($t,vt){return this._objects.indexOf($t)>-1?!0:vt?this._objects.some(function(b){return typeof b.contains=="function"&&b.contains($t,!0)}):!1},complexity:function(){return this._objects.reduce(function($t,vt){return $t+=vt.complexity?vt.complexity():0,$t},0)}},s.CommonMethods={_setOptions:function($t){for(var vt in $t)this.set(vt,$t[vt])},_initGradient:function($t,vt){$t&&$t.colorStops&&!($t instanceof s.Gradient)&&this.set(vt,new s.Gradient($t))},_initPattern:function($t,vt,b){$t&&$t.source&&!($t instanceof s.Pattern)?this.set(vt,new s.Pattern($t,b)):b&&b()},_setObject:function($t){for(var vt in $t)this._set(vt,$t[vt])},set:function($t,vt){return typeof $t=="object"?this._setObject($t):this._set($t,vt),this},_set:function($t,vt){this[$t]=vt},toggle:function($t){var vt=this.get($t);return typeof vt=="boolean"&&this.set($t,!vt),this},get:function($t){return this[$t]}},function($t){var vt=Math.sqrt,b=Math.atan2,pt=Math.pow,st=Math.PI/180,wt=Math.PI/2;s.util={cos:function(Tt){if(Tt===0)return 1;Tt<0&&(Tt=-Tt);var Ct=Tt/wt;switch(Ct){case 1:case 3:return 0;case 2:return-1}return Math.cos(Tt)},sin:function(Tt){if(Tt===0)return 0;var Ct=Tt/wt,jt=1;switch(Tt<0&&(jt=-1),Ct){case 1:return jt;case 2:return 0;case 3:return-jt}return Math.sin(Tt)},removeFromArray:function(Tt,Ct){var jt=Tt.indexOf(Ct);return jt!==-1&&Tt.splice(jt,1),Tt},getRandomInt:function(Tt,Ct){return Math.floor(Math.random()*(Ct-Tt+1))+Tt},degreesToRadians:function(Tt){return Tt*st},radiansToDegrees:function(Tt){return Tt/st},rotatePoint:function(Tt,Ct,jt){var Lt=new s.Point(Tt.x-Ct.x,Tt.y-Ct.y),Ht=s.util.rotateVector(Lt,jt);return new s.Point(Ht.x,Ht.y).addEquals(Ct)},rotateVector:function(Tt,Ct){var jt=s.util.sin(Ct),Lt=s.util.cos(Ct),Ht=Tt.x*Lt-Tt.y*jt,Gt=Tt.x*jt+Tt.y*Lt;return{x:Ht,y:Gt}},createVector:function(Tt,Ct){return new s.Point(Ct.x-Tt.x,Ct.y-Tt.y)},calcAngleBetweenVectors:function(Tt,Ct){return Math.acos((Tt.x*Ct.x+Tt.y*Ct.y)/(Math.hypot(Tt.x,Tt.y)*Math.hypot(Ct.x,Ct.y)))},getHatVector:function(Tt){return new s.Point(Tt.x,Tt.y).multiply(1/Math.hypot(Tt.x,Tt.y))},getBisector:function(Tt,Ct,jt){var Lt=s.util.createVector(Tt,Ct),Ht=s.util.createVector(Tt,jt),Gt=s.util.calcAngleBetweenVectors(Lt,Ht),Kt=s.util.calcAngleBetweenVectors(s.util.rotateVector(Lt,Gt),Ht),tr=Gt*(Kt===0?1:-1)/2;return{vector:s.util.getHatVector(s.util.rotateVector(Lt,tr)),angle:Gt}},projectStrokeOnPoints:function(Tt,Ct,jt){var Lt=[],Ht=Ct.strokeWidth/2,Gt=Ct.strokeUniform?new s.Point(1/Ct.scaleX,1/Ct.scaleY):new s.Point(1,1),Kt=function(tr){var rr=Ht/Math.hypot(tr.x,tr.y);return new s.Point(tr.x*rr*Gt.x,tr.y*rr*Gt.y)};return Tt.length<=1||Tt.forEach(function(tr,rr){var Lr=new s.Point(tr.x,tr.y),jr,Yr;rr===0?(Yr=Tt[rr+1],jr=jt?Kt(s.util.createVector(Yr,Lr)).addEquals(Lr):Tt[Tt.length-1]):rr===Tt.length-1?(jr=Tt[rr-1],Yr=jt?Kt(s.util.createVector(jr,Lr)).addEquals(Lr):Tt[0]):(jr=Tt[rr-1],Yr=Tt[rr+1]);var An=s.util.getBisector(Lr,jr,Yr),No=An.vector,o0=An.angle,t0,c0;if(Ct.strokeLineJoin==="miter"&&(t0=-Ht/Math.sin(o0/2),c0=new s.Point(No.x*t0*Gt.x,No.y*t0*Gt.y),Math.hypot(c0.x,c0.y)/Ht<=Ct.strokeMiterLimit)){Lt.push(Lr.add(c0)),Lt.push(Lr.subtract(c0));return}t0=-Ht*Math.SQRT2,c0=new s.Point(No.x*t0*Gt.x,No.y*t0*Gt.y),Lt.push(Lr.add(c0)),Lt.push(Lr.subtract(c0))}),Lt},transformPoint:function(Tt,Ct,jt){return jt?new s.Point(Ct[0]*Tt.x+Ct[2]*Tt.y,Ct[1]*Tt.x+Ct[3]*Tt.y):new s.Point(Ct[0]*Tt.x+Ct[2]*Tt.y+Ct[4],Ct[1]*Tt.x+Ct[3]*Tt.y+Ct[5])},makeBoundingBoxFromPoints:function(Tt,Ct){if(Ct)for(var jt=0;jt<Tt.length;jt++)Tt[jt]=s.util.transformPoint(Tt[jt],Ct);var Lt=[Tt[0].x,Tt[1].x,Tt[2].x,Tt[3].x],Ht=s.util.array.min(Lt),Gt=s.util.array.max(Lt),Kt=Gt-Ht,tr=[Tt[0].y,Tt[1].y,Tt[2].y,Tt[3].y],rr=s.util.array.min(tr),Lr=s.util.array.max(tr),jr=Lr-rr;return{left:Ht,top:rr,width:Kt,height:jr}},invertTransform:function(Tt){var Ct=1/(Tt[0]*Tt[3]-Tt[1]*Tt[2]),jt=[Ct*Tt[3],-Ct*Tt[1],-Ct*Tt[2],Ct*Tt[0]],Lt=s.util.transformPoint({x:Tt[4],y:Tt[5]},jt,!0);return jt[4]=-Lt.x,jt[5]=-Lt.y,jt},toFixed:function(Tt,Ct){return parseFloat(Number(Tt).toFixed(Ct))},parseUnit:function(Tt,Ct){var jt=/\D{0,2}$/.exec(Tt),Lt=parseFloat(Tt);switch(Ct||(Ct=s.Text.DEFAULT_SVG_FONT_SIZE),jt[0]){case"mm":return Lt*s.DPI/25.4;case"cm":return Lt*s.DPI/2.54;case"in":return Lt*s.DPI;case"pt":return Lt*s.DPI/72;case"pc":return Lt*s.DPI/72*12;case"em":return Lt*Ct;default:return Lt}},falseFunction:function(){return!1},getKlass:function(Tt,Ct){return Tt=s.util.string.camelize(Tt.charAt(0).toUpperCase()+Tt.slice(1)),s.util.resolveNamespace(Ct)[Tt]},getSvgAttributes:function(Tt){var Ct=["instantiated_by_use","style","id","class"];switch(Tt){case"linearGradient":Ct=Ct.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":Ct=Ct.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":Ct=Ct.concat(["offset","stop-color","stop-opacity"]);break}return Ct},resolveNamespace:function(Tt){if(!Tt)return s;var Ct=Tt.split("."),jt=Ct.length,Lt,Ht=$t||s.window;for(Lt=0;Lt<jt;++Lt)Ht=Ht[Ct[Lt]];return Ht},loadImage:function(Tt,Ct,jt,Lt){if(!Tt){Ct&&Ct.call(jt,Tt);return}var Ht=s.util.createImage(),Gt=function(){Ct&&Ct.call(jt,Ht,!1),Ht=Ht.onload=Ht.onerror=null};Ht.onload=Gt,Ht.onerror=function(){s.log("Error loading "+Ht.src),Ct&&Ct.call(jt,null,!0),Ht=Ht.onload=Ht.onerror=null},Tt.indexOf("data")!==0&&Lt!==void 0&&Lt!==null&&(Ht.crossOrigin=Lt),Tt.substring(0,14)==="data:image/svg"&&(Ht.onload=null,s.util.loadImageInDom(Ht,Gt)),Ht.src=Tt},loadImageInDom:function(Tt,Ct){var jt=s.document.createElement("div");jt.style.width=jt.style.height="1px",jt.style.left=jt.style.top="-100%",jt.style.position="absolute",jt.appendChild(Tt),s.document.querySelector("body").appendChild(jt),Tt.onload=function(){Ct(),jt.parentNode.removeChild(jt),jt=null}},enlivenObjects:function(Tt,Ct,jt,Lt){Tt=Tt||[];var Ht=[],Gt=0,Kt=Tt.length;function tr(){++Gt===Kt&&Ct&&Ct(Ht.filter(function(rr){return rr}))}if(!Kt){Ct&&Ct(Ht);return}Tt.forEach(function(rr,Lr){if(!rr||!rr.type){tr();return}var jr=s.util.getKlass(rr.type,jt);jr.fromObject(rr,function(Yr,An){An||(Ht[Lr]=Yr),Lt&&Lt(rr,Yr,An),tr()})})},enlivenObjectEnlivables:function(Tt,Ct,jt){var Lt=s.Object.ENLIVEN_PROPS.filter(function(Ht){return!!Tt[Ht]});s.util.enlivenObjects(Lt.map(function(Ht){return Tt[Ht]}),function(Ht){var Gt={};Lt.forEach(function(Kt,tr){Gt[Kt]=Ht[tr],Ct&&(Ct[Kt]=Ht[tr])}),jt&&jt(Gt)})},enlivenPatterns:function(Tt,Ct){Tt=Tt||[];function jt(){++Ht===Gt&&Ct&&Ct(Lt)}var Lt=[],Ht=0,Gt=Tt.length;if(!Gt){Ct&&Ct(Lt);return}Tt.forEach(function(Kt,tr){Kt&&Kt.source?new s.Pattern(Kt,function(rr){Lt[tr]=rr,jt()}):(Lt[tr]=Kt,jt())})},groupSVGElements:function(Tt,Ct,jt){var Lt;return Tt&&Tt.length===1?(typeof jt<"u"&&(Tt[0].sourcePath=jt),Tt[0]):(Ct&&(Ct.width&&Ct.height?Ct.centerPoint={x:Ct.width/2,y:Ct.height/2}:(delete Ct.width,delete Ct.height)),Lt=new s.Group(Tt,Ct),typeof jt<"u"&&(Lt.sourcePath=jt),Lt)},populateWithProperties:function(Tt,Ct,jt){if(jt&&Array.isArray(jt))for(var Lt=0,Ht=jt.length;Lt<Ht;Lt++)jt[Lt]in Tt&&(Ct[jt[Lt]]=Tt[jt[Lt]])},createCanvasElement:function(){return s.document.createElement("canvas")},copyCanvasElement:function(Tt){var Ct=s.util.createCanvasElement();return Ct.width=Tt.width,Ct.height=Tt.height,Ct.getContext("2d").drawImage(Tt,0,0),Ct},toDataURL:function(Tt,Ct,jt){return Tt.toDataURL("image/"+Ct,jt)},createImage:function(){return s.document.createElement("img")},multiplyTransformMatrices:function(Tt,Ct,jt){return[Tt[0]*Ct[0]+Tt[2]*Ct[1],Tt[1]*Ct[0]+Tt[3]*Ct[1],Tt[0]*Ct[2]+Tt[2]*Ct[3],Tt[1]*Ct[2]+Tt[3]*Ct[3],jt?0:Tt[0]*Ct[4]+Tt[2]*Ct[5]+Tt[4],jt?0:Tt[1]*Ct[4]+Tt[3]*Ct[5]+Tt[5]]},qrDecompose:function(Tt){var Ct=b(Tt[1],Tt[0]),jt=pt(Tt[0],2)+pt(Tt[1],2),Lt=vt(jt),Ht=(Tt[0]*Tt[3]-Tt[2]*Tt[1])/Lt,Gt=b(Tt[0]*Tt[2]+Tt[1]*Tt[3],jt);return{angle:Ct/st,scaleX:Lt,scaleY:Ht,skewX:Gt/st,skewY:0,translateX:Tt[4],translateY:Tt[5]}},calcRotateMatrix:function(Tt){if(!Tt.angle)return s.iMatrix.concat();var Ct=s.util.degreesToRadians(Tt.angle),jt=s.util.cos(Ct),Lt=s.util.sin(Ct);return[jt,Lt,-Lt,jt,0,0]},calcDimensionsMatrix:function(Tt){var Ct=typeof Tt.scaleX>"u"?1:Tt.scaleX,jt=typeof Tt.scaleY>"u"?1:Tt.scaleY,Lt=[Tt.flipX?-Ct:Ct,0,0,Tt.flipY?-jt:jt,0,0],Ht=s.util.multiplyTransformMatrices,Gt=s.util.degreesToRadians;return Tt.skewX&&(Lt=Ht(Lt,[1,0,Math.tan(Gt(Tt.skewX)),1],!0)),Tt.skewY&&(Lt=Ht(Lt,[1,Math.tan(Gt(Tt.skewY)),0,1],!0)),Lt},composeMatrix:function(Tt){var Ct=[1,0,0,1,Tt.translateX||0,Tt.translateY||0],jt=s.util.multiplyTransformMatrices;return Tt.angle&&(Ct=jt(Ct,s.util.calcRotateMatrix(Tt))),(Tt.scaleX!==1||Tt.scaleY!==1||Tt.skewX||Tt.skewY||Tt.flipX||Tt.flipY)&&(Ct=jt(Ct,s.util.calcDimensionsMatrix(Tt))),Ct},resetObjectTransform:function(Tt){Tt.scaleX=1,Tt.scaleY=1,Tt.skewX=0,Tt.skewY=0,Tt.flipX=!1,Tt.flipY=!1,Tt.rotate(0)},saveObjectTransform:function(Tt){return{scaleX:Tt.scaleX,scaleY:Tt.scaleY,skewX:Tt.skewX,skewY:Tt.skewY,angle:Tt.angle,left:Tt.left,flipX:Tt.flipX,flipY:Tt.flipY,top:Tt.top}},isTransparent:function(Tt,Ct,jt,Lt){Lt>0&&(Ct>Lt?Ct-=Lt:Ct=0,jt>Lt?jt-=Lt:jt=0);var Ht=!0,Gt,Kt,tr=Tt.getImageData(Ct,jt,Lt*2||1,Lt*2||1),rr=tr.data.length;for(Gt=3;Gt<rr&&(Kt=tr.data[Gt],Ht=Kt<=0,Ht!==!1);Gt+=4);return tr=null,Ht},parsePreserveAspectRatioAttribute:function(Tt){var Ct="meet",jt="Mid",Lt="Mid",Ht=Tt.split(" "),Gt;return Ht&&Ht.length&&(Ct=Ht.pop(),Ct!=="meet"&&Ct!=="slice"?(Gt=Ct,Ct="meet"):Ht.length&&(Gt=Ht.pop())),jt=Gt!=="none"?Gt.slice(1,4):"none",Lt=Gt!=="none"?Gt.slice(5,8):"none",{meetOrSlice:Ct,alignX:jt,alignY:Lt}},clearFabricFontCache:function(Tt){Tt=(Tt||"").toLowerCase(),Tt?s.charWidthsCache[Tt]&&delete s.charWidthsCache[Tt]:s.charWidthsCache={}},limitDimsByArea:function(Tt,Ct){var jt=Math.sqrt(Ct*Tt),Lt=Math.floor(Ct/jt);return{x:Math.floor(jt),y:Lt}},capValue:function(Tt,Ct,jt){return Math.max(Tt,Math.min(Ct,jt))},findScaleToFit:function(Tt,Ct){return Math.min(Ct.width/Tt.width,Ct.height/Tt.height)},findScaleToCover:function(Tt,Ct){return Math.max(Ct.width/Tt.width,Ct.height/Tt.height)},matrixToSVG:function(Tt){return"matrix("+Tt.map(function(Ct){return s.util.toFixed(Ct,s.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(Tt,Ct){var jt=s.util.invertTransform(Ct),Lt=s.util.multiplyTransformMatrices(jt,Tt.calcOwnMatrix());s.util.applyTransformToObject(Tt,Lt)},addTransformToObject:function(Tt,Ct){s.util.applyTransformToObject(Tt,s.util.multiplyTransformMatrices(Ct,Tt.calcOwnMatrix()))},applyTransformToObject:function(Tt,Ct){var jt=s.util.qrDecompose(Ct),Lt=new s.Point(jt.translateX,jt.translateY);Tt.flipX=!1,Tt.flipY=!1,Tt.set("scaleX",jt.scaleX),Tt.set("scaleY",jt.scaleY),Tt.skewX=jt.skewX,Tt.skewY=jt.skewY,Tt.angle=jt.angle,Tt.setPositionByOrigin(Lt,"center","center")},sizeAfterTransform:function(Tt,Ct,jt){var Lt=Tt/2,Ht=Ct/2,Gt=[{x:-Lt,y:-Ht},{x:Lt,y:-Ht},{x:-Lt,y:Ht},{x:Lt,y:Ht}],Kt=s.util.calcDimensionsMatrix(jt),tr=s.util.makeBoundingBoxFromPoints(Gt,Kt);return{x:tr.width,y:tr.height}},mergeClipPaths:function(Tt,Ct){var jt=Tt,Lt=Ct;jt.inverted&&!Lt.inverted&&(jt=Ct,Lt=Tt),s.util.applyTransformToObject(Lt,s.util.multiplyTransformMatrices(s.util.invertTransform(jt.calcTransformMatrix()),Lt.calcTransformMatrix()));var Ht=jt.inverted&&Lt.inverted;return Ht&&(jt.inverted=Lt.inverted=!1),new s.Group([jt],{clipPath:Lt,inverted:Ht})},hasStyleChanged:function(Tt,Ct,jt){return jt=jt||!1,Tt.fill!==Ct.fill||Tt.stroke!==Ct.stroke||Tt.strokeWidth!==Ct.strokeWidth||Tt.fontSize!==Ct.fontSize||Tt.fontFamily!==Ct.fontFamily||Tt.fontWeight!==Ct.fontWeight||Tt.fontStyle!==Ct.fontStyle||Tt.textBackgroundColor!==Ct.textBackgroundColor||Tt.deltaY!==Ct.deltaY||jt&&(Tt.overline!==Ct.overline||Tt.underline!==Ct.underline||Tt.linethrough!==Ct.linethrough)},stylesToArray:function(jt,Ct){for(var jt=s.util.object.clone(jt,!0),Lt=Ct.split(`
`),Ht=-1,Gt={},Kt=[],tr=0;tr<Lt.length;tr++){if(!jt[tr]){Ht+=Lt[tr].length;continue}for(var rr=0;rr<Lt[tr].length;rr++){Ht++;var Lr=jt[tr][rr];if(Lr&&Object.keys(Lr).length>0){var jr=s.util.hasStyleChanged(Gt,Lr,!0);jr?Kt.push({start:Ht,end:Ht+1,style:Lr}):Kt[Kt.length-1].end++}Gt=Lr||{}}}return Kt},stylesFromArray:function(Tt,Ct){if(!Array.isArray(Tt))return Tt;for(var jt=Ct.split(`
`),Lt=-1,Ht=0,Gt={},Kt=0;Kt<jt.length;Kt++)for(var tr=0;tr<jt[Kt].length;tr++)Lt++,Tt[Ht]&&Tt[Ht].start<=Lt&&Lt<Tt[Ht].end&&(Gt[Kt]=Gt[Kt]||{},Gt[Kt][tr]=Object.assign({},Tt[Ht].style),Lt===Tt[Ht].end-1&&Ht++);return Gt}}}(a),function(){var $t=Array.prototype.join,vt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},b={m:"l",M:"L"};function pt(Xr,In,Zr,wn,r0,ko,_n,i0,a0,m0,p0){var x0=s.util.cos(Xr),S0=s.util.sin(Xr),R0=s.util.cos(In),$0=s.util.sin(In),f0=Zr*r0*R0-wn*ko*$0+_n,P0=wn*r0*R0+Zr*ko*$0+i0,M0=m0+a0*(-Zr*r0*S0-wn*ko*x0),C0=p0+a0*(-wn*r0*S0+Zr*ko*x0),Uo=f0+a0*(Zr*r0*$0+wn*ko*R0),l0=P0+a0*(wn*r0*$0-Zr*ko*R0);return["C",M0,C0,Uo,l0,f0,P0]}function st(Xr,In,Zr,wn,r0,ko,_n){var i0=Math.PI,a0=_n*i0/180,m0=s.util.sin(a0),p0=s.util.cos(a0),x0=0,S0=0;Zr=Math.abs(Zr),wn=Math.abs(wn);var R0=-p0*Xr*.5-m0*In*.5,$0=-p0*In*.5+m0*Xr*.5,f0=Zr*Zr,P0=wn*wn,M0=$0*$0,C0=R0*R0,Uo=f0*P0-f0*M0-P0*C0,l0=0;if(Uo<0){var b0=Math.sqrt(1-Uo/(f0*P0));Zr*=b0,wn*=b0}else l0=(r0===ko?-1:1)*Math.sqrt(Uo/(f0*M0+P0*C0));var k0=l0*Zr*$0/wn,d0=-l0*wn*R0/Zr,E0=p0*k0-m0*d0+Xr*.5,V0=m0*k0+p0*d0+In*.5,Z0=wt(1,0,(R0-k0)/Zr,($0-d0)/wn),h1=wt((R0-k0)/Zr,($0-d0)/wn,(-R0-k0)/Zr,(-$0-d0)/wn);ko===0&&h1>0?h1-=2*i0:ko===1&&h1<0&&(h1+=2*i0);for(var r1=Math.ceil(Math.abs(h1/i0*2)),I1=[],f1=h1/r1,q1=8/3*Math.sin(f1/4)*Math.sin(f1/4)/Math.sin(f1/2),c1=Z0+f1,B1=0;B1<r1;B1++)I1[B1]=pt(Z0,c1,p0,m0,Zr,wn,E0,V0,q1,x0,S0),x0=I1[B1][5],S0=I1[B1][6],Z0=c1,c1+=f1;return I1}function wt(Xr,In,Zr,wn){var r0=Math.atan2(In,Xr),ko=Math.atan2(wn,Zr);return ko>=r0?ko-r0:2*Math.PI-(r0-ko)}function Tt(Xr,In,Zr,wn,r0,ko,_n,i0){var a0;if(s.cachesBoundsOfCurve&&(a0=$t.call(arguments),s.boundsOfCurveCache[a0]))return s.boundsOfCurveCache[a0];var m0=Math.sqrt,p0=Math.min,x0=Math.max,S0=Math.abs,R0=[],$0=[[],[]],f0,P0,M0,C0,Uo,l0,b0,k0;P0=6*Xr-12*Zr+6*r0,f0=-3*Xr+9*Zr-9*r0+3*_n,M0=3*Zr-3*Xr;for(var d0=0;d0<2;++d0){if(d0>0&&(P0=6*In-12*wn+6*ko,f0=-3*In+9*wn-9*ko+3*i0,M0=3*wn-3*In),S0(f0)<1e-12){if(S0(P0)<1e-12)continue;C0=-M0/P0,0<C0&&C0<1&&R0.push(C0);continue}b0=P0*P0-4*M0*f0,!(b0<0)&&(k0=m0(b0),Uo=(-P0+k0)/(2*f0),0<Uo&&Uo<1&&R0.push(Uo),l0=(-P0-k0)/(2*f0),0<l0&&l0<1&&R0.push(l0))}for(var E0,V0,Z0=R0.length,h1=Z0,r1;Z0--;)C0=R0[Z0],r1=1-C0,E0=r1*r1*r1*Xr+3*r1*r1*C0*Zr+3*r1*C0*C0*r0+C0*C0*C0*_n,$0[0][Z0]=E0,V0=r1*r1*r1*In+3*r1*r1*C0*wn+3*r1*C0*C0*ko+C0*C0*C0*i0,$0[1][Z0]=V0;$0[0][h1]=Xr,$0[1][h1]=In,$0[0][h1+1]=_n,$0[1][h1+1]=i0;var I1=[{x:p0.apply(null,$0[0]),y:p0.apply(null,$0[1])},{x:x0.apply(null,$0[0]),y:x0.apply(null,$0[1])}];return s.cachesBoundsOfCurve&&(s.boundsOfCurveCache[a0]=I1),I1}function Ct(Xr,In,Zr){for(var wn=Zr[1],r0=Zr[2],ko=Zr[3],_n=Zr[4],i0=Zr[5],a0=Zr[6],m0=Zr[7],p0=st(a0-Xr,m0-In,wn,r0,_n,i0,ko),x0=0,S0=p0.length;x0<S0;x0++)p0[x0][1]+=Xr,p0[x0][2]+=In,p0[x0][3]+=Xr,p0[x0][4]+=In,p0[x0][5]+=Xr,p0[x0][6]+=In;return p0}function jt(Xr){var In=0,Zr=0,wn=Xr.length,r0=0,ko=0,_n,i0,a0,m0=[],p0,x0,S0;for(i0=0;i0<wn;++i0){switch(a0=!1,_n=Xr[i0].slice(0),_n[0]){case"l":_n[0]="L",_n[1]+=In,_n[2]+=Zr;case"L":In=_n[1],Zr=_n[2];break;case"h":_n[1]+=In;case"H":_n[0]="L",_n[2]=Zr,In=_n[1];break;case"v":_n[1]+=Zr;case"V":_n[0]="L",Zr=_n[1],_n[1]=In,_n[2]=Zr;break;case"m":_n[0]="M",_n[1]+=In,_n[2]+=Zr;case"M":In=_n[1],Zr=_n[2],r0=_n[1],ko=_n[2];break;case"c":_n[0]="C",_n[1]+=In,_n[2]+=Zr,_n[3]+=In,_n[4]+=Zr,_n[5]+=In,_n[6]+=Zr;case"C":x0=_n[3],S0=_n[4],In=_n[5],Zr=_n[6];break;case"s":_n[0]="S",_n[1]+=In,_n[2]+=Zr,_n[3]+=In,_n[4]+=Zr;case"S":p0==="C"?(x0=2*In-x0,S0=2*Zr-S0):(x0=In,S0=Zr),In=_n[3],Zr=_n[4],_n[0]="C",_n[5]=_n[3],_n[6]=_n[4],_n[3]=_n[1],_n[4]=_n[2],_n[1]=x0,_n[2]=S0,x0=_n[3],S0=_n[4];break;case"q":_n[0]="Q",_n[1]+=In,_n[2]+=Zr,_n[3]+=In,_n[4]+=Zr;case"Q":x0=_n[1],S0=_n[2],In=_n[3],Zr=_n[4];break;case"t":_n[0]="T",_n[1]+=In,_n[2]+=Zr;case"T":p0==="Q"?(x0=2*In-x0,S0=2*Zr-S0):(x0=In,S0=Zr),_n[0]="Q",In=_n[1],Zr=_n[2],_n[1]=x0,_n[2]=S0,_n[3]=In,_n[4]=Zr;break;case"a":_n[0]="A",_n[6]+=In,_n[7]+=Zr;case"A":a0=!0,m0=m0.concat(Ct(In,Zr,_n)),In=_n[6],Zr=_n[7];break;case"z":case"Z":In=r0,Zr=ko;break}a0||m0.push(_n),p0=_n[0]}return m0}function Lt(Xr,In,Zr,wn){return Math.sqrt((Zr-Xr)*(Zr-Xr)+(wn-In)*(wn-In))}function Ht(Xr){return Xr*Xr*Xr}function Gt(Xr){return 3*Xr*Xr*(1-Xr)}function Kt(Xr){return 3*Xr*(1-Xr)*(1-Xr)}function tr(Xr){return(1-Xr)*(1-Xr)*(1-Xr)}function rr(Xr,In,Zr,wn,r0,ko,_n,i0){return function(a0){var m0=Ht(a0),p0=Gt(a0),x0=Kt(a0),S0=tr(a0);return{x:_n*m0+r0*p0+Zr*x0+Xr*S0,y:i0*m0+ko*p0+wn*x0+In*S0}}}function Lr(Xr,In,Zr,wn,r0,ko,_n,i0){return function(a0){var m0=1-a0,p0=3*m0*m0*(Zr-Xr)+6*m0*a0*(r0-Zr)+3*a0*a0*(_n-r0),x0=3*m0*m0*(wn-In)+6*m0*a0*(ko-wn)+3*a0*a0*(i0-ko);return Math.atan2(x0,p0)}}function jr(Xr){return Xr*Xr}function Yr(Xr){return 2*Xr*(1-Xr)}function An(Xr){return(1-Xr)*(1-Xr)}function No(Xr,In,Zr,wn,r0,ko){return function(_n){var i0=jr(_n),a0=Yr(_n),m0=An(_n);return{x:r0*i0+Zr*a0+Xr*m0,y:ko*i0+wn*a0+In*m0}}}function o0(Xr,In,Zr,wn,r0,ko){return function(_n){var i0=1-_n,a0=2*i0*(Zr-Xr)+2*_n*(r0-Zr),m0=2*i0*(wn-In)+2*_n*(ko-wn);return Math.atan2(m0,a0)}}function t0(Xr,In,Zr){var wn={x:In,y:Zr},r0,ko=0,_n;for(_n=1;_n<=100;_n+=1)r0=Xr(_n/100),ko+=Lt(wn.x,wn.y,r0.x,r0.y),wn=r0;return ko}function c0(Xr,In){for(var Zr=0,wn=0,r0=Xr.iterator,ko={x:Xr.x,y:Xr.y},_n,i0,a0=.01,m0=Xr.angleFinder,p0;wn<In&&a0>1e-4;)_n=r0(Zr),p0=Zr,i0=Lt(ko.x,ko.y,_n.x,_n.y),i0+wn>In?(Zr-=a0,a0/=2):(ko=_n,Zr+=a0,wn+=i0);return _n.angle=m0(p0),_n}function n0(Xr){for(var In=0,Zr=Xr.length,wn,r0=0,ko=0,_n=0,i0=0,a0=[],m0,p0,x0,S0=0;S0<Zr;S0++){switch(wn=Xr[S0],p0={x:r0,y:ko,command:wn[0]},wn[0]){case"M":p0.length=0,_n=r0=wn[1],i0=ko=wn[2];break;case"L":p0.length=Lt(r0,ko,wn[1],wn[2]),r0=wn[1],ko=wn[2];break;case"C":m0=rr(r0,ko,wn[1],wn[2],wn[3],wn[4],wn[5],wn[6]),x0=Lr(r0,ko,wn[1],wn[2],wn[3],wn[4],wn[5],wn[6]),p0.iterator=m0,p0.angleFinder=x0,p0.length=t0(m0,r0,ko),r0=wn[5],ko=wn[6];break;case"Q":m0=No(r0,ko,wn[1],wn[2],wn[3],wn[4]),x0=o0(r0,ko,wn[1],wn[2],wn[3],wn[4]),p0.iterator=m0,p0.angleFinder=x0,p0.length=t0(m0,r0,ko),r0=wn[3],ko=wn[4];break;case"Z":case"z":p0.destX=_n,p0.destY=i0,p0.length=Lt(r0,ko,_n,i0),r0=_n,ko=i0;break}In+=p0.length,a0.push(p0)}return a0.push({length:In,x:r0,y:ko}),a0}function Qo(Xr,In,Zr){Zr||(Zr=n0(Xr));for(var wn=0;In-Zr[wn].length>0&&wn<Zr.length-2;)In-=Zr[wn].length,wn++;var r0=Zr[wn],ko=In/r0.length,_n=r0.command,i0=Xr[wn],a0;switch(_n){case"M":return{x:r0.x,y:r0.y,angle:0};case"Z":case"z":return a0=new s.Point(r0.x,r0.y).lerp(new s.Point(r0.destX,r0.destY),ko),a0.angle=Math.atan2(r0.destY-r0.y,r0.destX-r0.x),a0;case"L":return a0=new s.Point(r0.x,r0.y).lerp(new s.Point(i0[1],i0[2]),ko),a0.angle=Math.atan2(i0[2]-r0.y,i0[1]-r0.x),a0;case"C":return c0(r0,In);case"Q":return c0(r0,In)}}function Mo(Xr){var In=[],Zr=[],wn,r0,ko=s.rePathCommand,_n="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",i0="("+_n+")"+s.commaWsp,a0="([01])"+s.commaWsp+"?",m0=i0+"?"+i0+"?"+i0+a0+a0+i0+"?("+_n+")",p0=new RegExp(m0,"g"),x0,S0,R0;if(!Xr||!Xr.match)return In;R0=Xr.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var $0=0,f0,P0=R0.length;$0<P0;$0++){wn=R0[$0],S0=wn.slice(1).trim(),Zr.length=0;var M0=wn.charAt(0);if(f0=[M0],M0.toLowerCase()==="a")for(var C0;C0=p0.exec(S0);)for(var Uo=1;Uo<C0.length;Uo++)Zr.push(C0[Uo]);else for(;x0=ko.exec(S0);)Zr.push(x0[0]);for(var Uo=0,l0=Zr.length;Uo<l0;Uo++)r0=parseFloat(Zr[Uo]),isNaN(r0)||f0.push(r0);var b0=vt[M0.toLowerCase()],k0=b[M0]||M0;if(f0.length-1>b0)for(var d0=1,E0=f0.length;d0<E0;d0+=b0)In.push([M0].concat(f0.slice(d0,d0+b0))),M0=k0;else In.push(f0)}return In}function zo(Xr,In){var Zr=[],wn,r0=new s.Point(Xr[0].x,Xr[0].y),ko=new s.Point(Xr[1].x,Xr[1].y),_n=Xr.length,i0=1,a0=0,m0=_n>2;for(In=In||0,m0&&(i0=Xr[2].x<ko.x?-1:Xr[2].x===ko.x?0:1,a0=Xr[2].y<ko.y?-1:Xr[2].y===ko.y?0:1),Zr.push(["M",r0.x-i0*In,r0.y-a0*In]),wn=1;wn<_n;wn++){if(!r0.eq(ko)){var p0=r0.midPointFrom(ko);Zr.push(["Q",r0.x,r0.y,p0.x,p0.y])}r0=Xr[wn],wn+1<Xr.length&&(ko=Xr[wn+1])}return m0&&(i0=r0.x>Xr[wn-2].x?1:r0.x===Xr[wn-2].x?0:-1,a0=r0.y>Xr[wn-2].y?1:r0.y===Xr[wn-2].y?0:-1),Zr.push(["L",r0.x+i0*In,r0.y+a0*In]),Zr}function e0(Xr,In,Zr){return Zr&&(In=s.util.multiplyTransformMatrices(In,[1,0,0,1,-Zr.x,-Zr.y])),Xr.map(function(wn){for(var r0=wn.slice(0),ko={},_n=1;_n<wn.length-1;_n+=2)ko.x=wn[_n],ko.y=wn[_n+1],ko=s.util.transformPoint(ko,In),r0[_n]=ko.x,r0[_n+1]=ko.y;return r0})}s.util.joinPath=function(Xr){return Xr.map(function(In){return In.join(" ")}).join(" ")},s.util.parsePath=Mo,s.util.makePathSimpler=jt,s.util.getSmoothPathFromPoints=zo,s.util.getPathSegmentsInfo=n0,s.util.getBoundsOfCurve=Tt,s.util.getPointOnPath=Qo,s.util.transformPath=e0}(),function(){var $t=Array.prototype.slice;function vt(Tt,Ct){for(var jt=$t.call(arguments,2),Lt=[],Ht=0,Gt=Tt.length;Ht<Gt;Ht++)Lt[Ht]=jt.length?Tt[Ht][Ct].apply(Tt[Ht],jt):Tt[Ht][Ct].call(Tt[Ht]);return Lt}function b(Tt,Ct){return wt(Tt,Ct,function(jt,Lt){return jt>=Lt})}function pt(Tt,Ct){return wt(Tt,Ct,function(jt,Lt){return jt<Lt})}function st(Tt,Ct){for(var jt=Tt.length;jt--;)Tt[jt]=Ct;return Tt}function wt(Tt,Ct,jt){if(!(!Tt||Tt.length===0)){var Lt=Tt.length-1,Ht=Ct?Tt[Lt][Ct]:Tt[Lt];if(Ct)for(;Lt--;)jt(Tt[Lt][Ct],Ht)&&(Ht=Tt[Lt][Ct]);else for(;Lt--;)jt(Tt[Lt],Ht)&&(Ht=Tt[Lt]);return Ht}}s.util.array={fill:st,invoke:vt,min:pt,max:b}}(),function(){function $t(b,pt,st){if(st)if(!s.isLikelyNode&&pt instanceof Element)b=pt;else if(pt instanceof Array){b=[];for(var wt=0,Tt=pt.length;wt<Tt;wt++)b[wt]=$t({},pt[wt],st)}else if(pt&&typeof pt=="object")for(var Ct in pt)Ct==="canvas"||Ct==="group"?b[Ct]=null:pt.hasOwnProperty(Ct)&&(b[Ct]=$t({},pt[Ct],st));else b=pt;else for(var Ct in pt)b[Ct]=pt[Ct];return b}function vt(b,pt){return $t({},b,pt)}s.util.object={extend:$t,clone:vt},s.util.object.extend(s.util,s.Observable)}(),function(){function $t(wt){return wt.replace(/-+(.)?/g,function(Tt,Ct){return Ct?Ct.toUpperCase():""})}function vt(wt,Tt){return wt.charAt(0).toUpperCase()+(Tt?wt.slice(1):wt.slice(1).toLowerCase())}function b(wt){return wt.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function pt(wt){var Tt=0,Ct,jt=[];for(Tt=0,Ct;Tt<wt.length;Tt++)(Ct=st(wt,Tt))!==!1&&jt.push(Ct);return jt}function st(wt,Tt){var Ct=wt.charCodeAt(Tt);if(isNaN(Ct))return"";if(Ct<55296||Ct>57343)return wt.charAt(Tt);if(55296<=Ct&&Ct<=56319){if(wt.length<=Tt+1)throw"High surrogate without following low surrogate";var jt=wt.charCodeAt(Tt+1);if(56320>jt||jt>57343)throw"High surrogate without following low surrogate";return wt.charAt(Tt)+wt.charAt(Tt+1)}if(Tt===0)throw"Low surrogate without preceding high surrogate";var Lt=wt.charCodeAt(Tt-1);if(55296>Lt||Lt>56319)throw"Low surrogate without preceding high surrogate";return!1}s.util.string={camelize:$t,capitalize:vt,escapeXml:b,graphemeSplit:pt}}(),function(){var $t=Array.prototype.slice,vt=function(){},b=function(){for(var Ct in{toString:1})if(Ct==="toString")return!1;return!0}(),pt=function(Ct,jt,Lt){for(var Ht in jt)Ht in Ct.prototype&&typeof Ct.prototype[Ht]=="function"&&(jt[Ht]+"").indexOf("callSuper")>-1?Ct.prototype[Ht]=function(Gt){return function(){var Kt=this.constructor.superclass;this.constructor.superclass=Lt;var tr=jt[Gt].apply(this,arguments);if(this.constructor.superclass=Kt,Gt!=="initialize")return tr}}(Ht):Ct.prototype[Ht]=jt[Ht],b&&(jt.toString!==Object.prototype.toString&&(Ct.prototype.toString=jt.toString),jt.valueOf!==Object.prototype.valueOf&&(Ct.prototype.valueOf=jt.valueOf))};function st(){}function wt(Ct){for(var jt=null,Lt=this;Lt.constructor.superclass;){var Ht=Lt.constructor.superclass.prototype[Ct];if(Lt[Ct]!==Ht){jt=Ht;break}Lt=Lt.constructor.superclass.prototype}return jt?arguments.length>1?jt.apply(this,$t.call(arguments,1)):jt.call(this):console.log("tried to callSuper "+Ct+", method not found in prototype chain",this)}function Tt(){var Ct=null,jt=$t.call(arguments,0);typeof jt[0]=="function"&&(Ct=jt.shift());function Lt(){this.initialize.apply(this,arguments)}Lt.superclass=Ct,Lt.subclasses=[],Ct&&(st.prototype=Ct.prototype,Lt.prototype=new st,Ct.subclasses.push(Lt));for(var Ht=0,Gt=jt.length;Ht<Gt;Ht++)pt(Lt,jt[Ht],Ct);return Lt.prototype.initialize||(Lt.prototype.initialize=vt),Lt.prototype.constructor=Lt,Lt.prototype.callSuper=wt,Lt}s.util.createClass=Tt}(),function(){var $t=!!s.document.createElement("div").attachEvent,vt=["touchstart","touchmove","touchend"];s.util.addListener=function(pt,st,wt,Tt){pt&&pt.addEventListener(st,wt,$t?!1:Tt)},s.util.removeListener=function(pt,st,wt,Tt){pt&&pt.removeEventListener(st,wt,$t?!1:Tt)};function b(pt){var st=pt.changedTouches;return st&&st[0]?st[0]:pt}s.util.getPointer=function(pt){var st=pt.target,wt=s.util.getScrollLeftTop(st),Tt=b(pt);return{x:Tt.clientX+wt.left,y:Tt.clientY+wt.top}},s.util.isTouchEvent=function(pt){return vt.indexOf(pt.type)>-1||pt.pointerType==="touch"}}(),function(){function $t(Tt,Ct){var jt=Tt.style;if(!jt)return Tt;if(typeof Ct=="string")return Tt.style.cssText+=";"+Ct,Ct.indexOf("opacity")>-1?wt(Tt,Ct.match(/opacity:\s*(\d?\.?\d*)/)[1]):Tt;for(var Lt in Ct)if(Lt==="opacity")wt(Tt,Ct[Lt]);else{var Ht=Lt==="float"||Lt==="cssFloat"?typeof jt.styleFloat>"u"?"cssFloat":"styleFloat":Lt;jt.setProperty(Ht,Ct[Lt])}return Tt}var vt=s.document.createElement("div"),b=typeof vt.style.opacity=="string",pt=typeof vt.style.filter=="string",st=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,wt=function(Tt){return Tt};b?wt=function(Tt,Ct){return Tt.style.opacity=Ct,Tt}:pt&&(wt=function(Tt,Ct){var jt=Tt.style;return Tt.currentStyle&&!Tt.currentStyle.hasLayout&&(jt.zoom=1),st.test(jt.filter)?(Ct=Ct>=.9999?"":"alpha(opacity="+Ct*100+")",jt.filter=jt.filter.replace(st,Ct)):jt.filter+=" alpha(opacity="+Ct*100+")",Tt}),s.util.setStyle=$t}(),function(){var $t=Array.prototype.slice;function vt(tr){return typeof tr=="string"?s.document.getElementById(tr):tr}var b,pt=function(tr){return $t.call(tr,0)};try{b=pt(s.document.childNodes)instanceof Array}catch{}b||(pt=function(tr){for(var rr=new Array(tr.length),Lr=tr.length;Lr--;)rr[Lr]=tr[Lr];return rr});function st(tr,rr){var Lr=s.document.createElement(tr);for(var jr in rr)jr==="class"?Lr.className=rr[jr]:jr==="for"?Lr.htmlFor=rr[jr]:Lr.setAttribute(jr,rr[jr]);return Lr}function wt(tr,rr){tr&&(" "+tr.className+" ").indexOf(" "+rr+" ")===-1&&(tr.className+=(tr.className?" ":"")+rr)}function Tt(tr,rr,Lr){return typeof rr=="string"&&(rr=st(rr,Lr)),tr.parentNode&&tr.parentNode.replaceChild(rr,tr),rr.appendChild(tr),rr}function Ct(tr){for(var rr=0,Lr=0,jr=s.document.documentElement,Yr=s.document.body||{scrollLeft:0,scrollTop:0};tr&&(tr.parentNode||tr.host)&&(tr=tr.parentNode||tr.host,tr===s.document?(rr=Yr.scrollLeft||jr.scrollLeft||0,Lr=Yr.scrollTop||jr.scrollTop||0):(rr+=tr.scrollLeft||0,Lr+=tr.scrollTop||0),!(tr.nodeType===1&&tr.style.position==="fixed")););return{left:rr,top:Lr}}function jt(tr){var rr,Lr=tr&&tr.ownerDocument,jr={left:0,top:0},Yr={left:0,top:0},An,No={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!Lr)return Yr;for(var o0 in No)Yr[No[o0]]+=parseInt(Lt(tr,o0),10)||0;return rr=Lr.documentElement,typeof tr.getBoundingClientRect<"u"&&(jr=tr.getBoundingClientRect()),An=Ct(tr),{left:jr.left+An.left-(rr.clientLeft||0)+Yr.left,top:jr.top+An.top-(rr.clientTop||0)+Yr.top}}var Lt;s.document.defaultView&&s.document.defaultView.getComputedStyle?Lt=function(tr,rr){var Lr=s.document.defaultView.getComputedStyle(tr,null);return Lr?Lr[rr]:void 0}:Lt=function(tr,rr){var Lr=tr.style[rr];return!Lr&&tr.currentStyle&&(Lr=tr.currentStyle[rr]),Lr},function(){var tr=s.document.documentElement.style,rr="userSelect"in tr?"userSelect":"MozUserSelect"in tr?"MozUserSelect":"WebkitUserSelect"in tr?"WebkitUserSelect":"KhtmlUserSelect"in tr?"KhtmlUserSelect":"";function Lr(Yr){return typeof Yr.onselectstart<"u"&&(Yr.onselectstart=s.util.falseFunction),rr?Yr.style[rr]="none":typeof Yr.unselectable=="string"&&(Yr.unselectable="on"),Yr}function jr(Yr){return typeof Yr.onselectstart<"u"&&(Yr.onselectstart=null),rr?Yr.style[rr]="":typeof Yr.unselectable=="string"&&(Yr.unselectable=""),Yr}s.util.makeElementUnselectable=Lr,s.util.makeElementSelectable=jr}();function Ht(tr){var rr=s.jsdomImplForWrapper(tr);return rr._canvas||rr._image}function Gt(tr){if(s.isLikelyNode){var rr=s.jsdomImplForWrapper(tr);rr&&(rr._image=null,rr._canvas=null,rr._currentSrc=null,rr._attributes=null,rr._classList=null)}}function Kt(tr,rr){tr.imageSmoothingEnabled=tr.imageSmoothingEnabled||tr.webkitImageSmoothingEnabled||tr.mozImageSmoothingEnabled||tr.msImageSmoothingEnabled||tr.oImageSmoothingEnabled,tr.imageSmoothingEnabled=rr}s.util.setImageSmoothing=Kt,s.util.getById=vt,s.util.toArray=pt,s.util.addClass=wt,s.util.makeElement=st,s.util.wrapElement=Tt,s.util.getScrollLeftTop=Ct,s.util.getElementOffset=jt,s.util.getNodeCanvas=Ht,s.util.cleanUpJsdomNode=Gt}(),function(){function $t(pt,st){return pt+(/\?/.test(pt)?"&":"?")+st}function vt(){}function b(pt,st){st||(st={});var wt=st.method?st.method.toUpperCase():"GET",Tt=st.onComplete||function(){},Ct=new s.window.XMLHttpRequest,jt=st.body||st.parameters;return Ct.onreadystatechange=function(){Ct.readyState===4&&(Tt(Ct),Ct.onreadystatechange=vt)},wt==="GET"&&(jt=null,typeof st.parameters=="string"&&(pt=$t(pt,st.parameters))),Ct.open(wt,pt,!0),(wt==="POST"||wt==="PUT")&&Ct.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Ct.send(jt),Ct}s.util.request=b}(),s.log=console.log,s.warn=console.warn,function(){var $t=s.util.object.extend,vt=s.util.object.clone,b=[];s.util.object.extend(b,{cancelAll:function(){var Ht=this.splice(0);return Ht.forEach(function(Gt){Gt.cancel()}),Ht},cancelByCanvas:function(Ht){if(!Ht)return[];var Gt=this.filter(function(Kt){return typeof Kt.target=="object"&&Kt.target.canvas===Ht});return Gt.forEach(function(Kt){Kt.cancel()}),Gt},cancelByTarget:function(Ht){var Gt=this.findAnimationsByTarget(Ht);return Gt.forEach(function(Kt){Kt.cancel()}),Gt},findAnimationIndex:function(Ht){return this.indexOf(this.findAnimation(Ht))},findAnimation:function(Ht){return this.find(function(Gt){return Gt.cancel===Ht})},findAnimationsByTarget:function(Ht){return Ht?this.filter(function(Gt){return Gt.target===Ht}):[]}});function pt(){return!1}function st(Ht,Gt,Kt,tr){return-Kt*Math.cos(Ht/tr*(Math.PI/2))+Kt+Gt}function wt(Ht){Ht||(Ht={});var Gt=!1,Kt,tr=function(){var rr=s.runningAnimations.indexOf(Kt);return rr>-1&&s.runningAnimations.splice(rr,1)[0]};return Kt=$t(vt(Ht),{cancel:function(){return Gt=!0,tr()},currentValue:"startValue"in Ht?Ht.startValue:0,completionRate:0,durationRate:0}),s.runningAnimations.push(Kt),jt(function(rr){var Lr=rr||+new Date,jr=Ht.duration||500,Yr=Lr+jr,An,No=Ht.onChange||pt,o0=Ht.abort||pt,t0=Ht.onComplete||pt,c0=Ht.easing||st,n0="startValue"in Ht?Ht.startValue.length>0:!1,Qo="startValue"in Ht?Ht.startValue:0,Mo="endValue"in Ht?Ht.endValue:100,zo=Ht.byValue||(n0?Qo.map(function(e0,Xr){return Mo[Xr]-Qo[Xr]}):Mo-Qo);Ht.onStart&&Ht.onStart(),function e0(Xr){An=Xr||+new Date;var In=An>Yr?jr:An-Lr,Zr=In/jr,wn=n0?Qo.map(function(ko,_n){return c0(In,Qo[_n],zo[_n],jr)}):c0(In,Qo,zo,jr),r0=Math.abs(n0?(wn[0]-Qo[0])/zo[0]:(wn-Qo)/zo);if(Kt.currentValue=n0?wn.slice():wn,Kt.completionRate=r0,Kt.durationRate=Zr,!Gt){if(o0(wn,r0,Zr)){tr();return}if(An>Yr){Kt.currentValue=n0?Mo.slice():Mo,Kt.completionRate=1,Kt.durationRate=1,No(n0?Mo.slice():Mo,1,1),t0(Mo,1,1),tr();return}else No(wn,r0,Zr),jt(e0)}}(Lr)}),Kt.cancel}var Tt=s.window.requestAnimationFrame||s.window.webkitRequestAnimationFrame||s.window.mozRequestAnimationFrame||s.window.oRequestAnimationFrame||s.window.msRequestAnimationFrame||function(Ht){return s.window.setTimeout(Ht,1e3/60)},Ct=s.window.cancelAnimationFrame||s.window.clearTimeout;function jt(){return Tt.apply(s.window,arguments)}function Lt(){return Ct.apply(s.window,arguments)}s.util.animate=wt,s.util.requestAnimFrame=jt,s.util.cancelAnimFrame=Lt,s.runningAnimations=b}(),function(){function $t(b,pt,st){var wt="rgba("+parseInt(b[0]+st*(pt[0]-b[0]),10)+","+parseInt(b[1]+st*(pt[1]-b[1]),10)+","+parseInt(b[2]+st*(pt[2]-b[2]),10);return wt+=","+(b&&pt?parseFloat(b[3]+st*(pt[3]-b[3])):1),wt+=")",wt}function vt(b,pt,st,wt){var Tt=new s.Color(b).getSource(),Ct=new s.Color(pt).getSource(),jt=wt.onComplete,Lt=wt.onChange;return wt=wt||{},s.util.animate(s.util.object.extend(wt,{duration:st||500,startValue:Tt,endValue:Ct,byValue:Ct,easing:function(Ht,Gt,Kt,tr){var rr=wt.colorEasing?wt.colorEasing(Ht,tr):1-Math.cos(Ht/tr*(Math.PI/2));return $t(Gt,Kt,rr)},onComplete:function(Ht,Gt,Kt){if(jt)return jt($t(Ct,Ct,0),Gt,Kt)},onChange:function(Ht,Gt,Kt){if(Lt){if(Array.isArray(Ht))return Lt($t(Ht,Ht,0),Gt,Kt);Lt(Ht,Gt,Kt)}}}))}s.util.animateColor=vt}(),function(){function $t(Xr,In,Zr,wn){return Xr<Math.abs(In)?(Xr=In,wn=Zr/4):In===0&&Xr===0?wn=Zr/(2*Math.PI)*Math.asin(1):wn=Zr/(2*Math.PI)*Math.asin(In/Xr),{a:Xr,c:In,p:Zr,s:wn}}function vt(Xr,In,Zr){return Xr.a*Math.pow(2,10*(In-=1))*Math.sin((In*Zr-Xr.s)*(2*Math.PI)/Xr.p)}function b(Xr,In,Zr,wn){return Zr*((Xr=Xr/wn-1)*Xr*Xr+1)+In}function pt(Xr,In,Zr,wn){return Xr/=wn/2,Xr<1?Zr/2*Xr*Xr*Xr+In:Zr/2*((Xr-=2)*Xr*Xr+2)+In}function st(Xr,In,Zr,wn){return Zr*(Xr/=wn)*Xr*Xr*Xr+In}function wt(Xr,In,Zr,wn){return-Zr*((Xr=Xr/wn-1)*Xr*Xr*Xr-1)+In}function Tt(Xr,In,Zr,wn){return Xr/=wn/2,Xr<1?Zr/2*Xr*Xr*Xr*Xr+In:-Zr/2*((Xr-=2)*Xr*Xr*Xr-2)+In}function Ct(Xr,In,Zr,wn){return Zr*(Xr/=wn)*Xr*Xr*Xr*Xr+In}function jt(Xr,In,Zr,wn){return Zr*((Xr=Xr/wn-1)*Xr*Xr*Xr*Xr+1)+In}function Lt(Xr,In,Zr,wn){return Xr/=wn/2,Xr<1?Zr/2*Xr*Xr*Xr*Xr*Xr+In:Zr/2*((Xr-=2)*Xr*Xr*Xr*Xr+2)+In}function Ht(Xr,In,Zr,wn){return-Zr*Math.cos(Xr/wn*(Math.PI/2))+Zr+In}function Gt(Xr,In,Zr,wn){return Zr*Math.sin(Xr/wn*(Math.PI/2))+In}function Kt(Xr,In,Zr,wn){return-Zr/2*(Math.cos(Math.PI*Xr/wn)-1)+In}function tr(Xr,In,Zr,wn){return Xr===0?In:Zr*Math.pow(2,10*(Xr/wn-1))+In}function rr(Xr,In,Zr,wn){return Xr===wn?In+Zr:Zr*(-Math.pow(2,-10*Xr/wn)+1)+In}function Lr(Xr,In,Zr,wn){return Xr===0?In:Xr===wn?In+Zr:(Xr/=wn/2,Xr<1?Zr/2*Math.pow(2,10*(Xr-1))+In:Zr/2*(-Math.pow(2,-10*--Xr)+2)+In)}function jr(Xr,In,Zr,wn){return-Zr*(Math.sqrt(1-(Xr/=wn)*Xr)-1)+In}function Yr(Xr,In,Zr,wn){return Zr*Math.sqrt(1-(Xr=Xr/wn-1)*Xr)+In}function An(Xr,In,Zr,wn){return Xr/=wn/2,Xr<1?-Zr/2*(Math.sqrt(1-Xr*Xr)-1)+In:Zr/2*(Math.sqrt(1-(Xr-=2)*Xr)+1)+In}function No(Xr,In,Zr,wn){var r0=1.70158,ko=0,_n=Zr;if(Xr===0)return In;if(Xr/=wn,Xr===1)return In+Zr;ko||(ko=wn*.3);var i0=$t(_n,Zr,ko,r0);return-vt(i0,Xr,wn)+In}function o0(Xr,In,Zr,wn){var r0=1.70158,ko=0,_n=Zr;if(Xr===0)return In;if(Xr/=wn,Xr===1)return In+Zr;ko||(ko=wn*.3);var i0=$t(_n,Zr,ko,r0);return i0.a*Math.pow(2,-10*Xr)*Math.sin((Xr*wn-i0.s)*(2*Math.PI)/i0.p)+i0.c+In}function t0(Xr,In,Zr,wn){var r0=1.70158,ko=0,_n=Zr;if(Xr===0)return In;if(Xr/=wn/2,Xr===2)return In+Zr;ko||(ko=wn*(.3*1.5));var i0=$t(_n,Zr,ko,r0);return Xr<1?-.5*vt(i0,Xr,wn)+In:i0.a*Math.pow(2,-10*(Xr-=1))*Math.sin((Xr*wn-i0.s)*(2*Math.PI)/i0.p)*.5+i0.c+In}function c0(Xr,In,Zr,wn,r0){return r0===void 0&&(r0=1.70158),Zr*(Xr/=wn)*Xr*((r0+1)*Xr-r0)+In}function n0(Xr,In,Zr,wn,r0){return r0===void 0&&(r0=1.70158),Zr*((Xr=Xr/wn-1)*Xr*((r0+1)*Xr+r0)+1)+In}function Qo(Xr,In,Zr,wn,r0){return r0===void 0&&(r0=1.70158),Xr/=wn/2,Xr<1?Zr/2*(Xr*Xr*(((r0*=1.525)+1)*Xr-r0))+In:Zr/2*((Xr-=2)*Xr*(((r0*=1.525)+1)*Xr+r0)+2)+In}function Mo(Xr,In,Zr,wn){return Zr-zo(wn-Xr,0,Zr,wn)+In}function zo(Xr,In,Zr,wn){return(Xr/=wn)<1/2.75?Zr*(7.5625*Xr*Xr)+In:Xr<2/2.75?Zr*(7.5625*(Xr-=1.5/2.75)*Xr+.75)+In:Xr<2.5/2.75?Zr*(7.5625*(Xr-=2.25/2.75)*Xr+.9375)+In:Zr*(7.5625*(Xr-=2.625/2.75)*Xr+.984375)+In}function e0(Xr,In,Zr,wn){return Xr<wn/2?Mo(Xr*2,0,Zr,wn)*.5+In:zo(Xr*2-wn,0,Zr,wn)*.5+Zr*.5+In}s.util.ease={easeInQuad:function(Xr,In,Zr,wn){return Zr*(Xr/=wn)*Xr+In},easeOutQuad:function(Xr,In,Zr,wn){return-Zr*(Xr/=wn)*(Xr-2)+In},easeInOutQuad:function(Xr,In,Zr,wn){return Xr/=wn/2,Xr<1?Zr/2*Xr*Xr+In:-Zr/2*(--Xr*(Xr-2)-1)+In},easeInCubic:function(Xr,In,Zr,wn){return Zr*(Xr/=wn)*Xr*Xr+In},easeOutCubic:b,easeInOutCubic:pt,easeInQuart:st,easeOutQuart:wt,easeInOutQuart:Tt,easeInQuint:Ct,easeOutQuint:jt,easeInOutQuint:Lt,easeInSine:Ht,easeOutSine:Gt,easeInOutSine:Kt,easeInExpo:tr,easeOutExpo:rr,easeInOutExpo:Lr,easeInCirc:jr,easeOutCirc:Yr,easeInOutCirc:An,easeInElastic:No,easeOutElastic:o0,easeInOutElastic:t0,easeInBack:c0,easeOutBack:n0,easeInOutBack:Qo,easeInBounce:Mo,easeOutBounce:zo,easeInOutBounce:e0}}(),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend,pt=vt.util.object.clone,st=vt.util.toFixed,wt=vt.util.parseUnit,Tt=vt.util.multiplyTransformMatrices,Ct=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],jt=["symbol","image","marker","pattern","view","svg"],Lt=["pattern","defs","symbol","metadata","clipPath","mask","desc"],Ht=["symbol","g","a","svg","clipPath","defs"],Gt={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Kt={stroke:"strokeOpacity",fill:"fillOpacity"},tr="font-size",rr="clip-path";vt.svgValidTagNamesRegEx=Yr(Ct),vt.svgViewBoxElementsRegEx=Yr(jt),vt.svgInvalidAncestorsRegEx=Yr(Lt),vt.svgValidParentsRegEx=Yr(Ht),vt.cssRules={},vt.gradientDefs={},vt.clipPaths={};function Lr(ko){return ko in Gt?Gt[ko]:ko}function jr(ko,_n,i0,a0){var m0=Array.isArray(_n),p0;if((ko==="fill"||ko==="stroke")&&_n==="none")_n="";else{if(ko==="strokeUniform")return _n==="non-scaling-stroke";if(ko==="strokeDashArray")_n==="none"?_n=null:_n=_n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(ko==="transformMatrix")i0&&i0.transformMatrix?_n=Tt(i0.transformMatrix,vt.parseTransformAttribute(_n)):_n=vt.parseTransformAttribute(_n);else if(ko==="visible")_n=_n!=="none"&&_n!=="hidden",i0&&i0.visible===!1&&(_n=!1);else if(ko==="opacity")_n=parseFloat(_n),i0&&typeof i0.opacity<"u"&&(_n*=i0.opacity);else if(ko==="textAnchor")_n=_n==="start"?"left":_n==="end"?"right":"center";else if(ko==="charSpacing")p0=wt(_n,a0)/a0*1e3;else if(ko==="paintFirst"){var x0=_n.indexOf("fill"),S0=_n.indexOf("stroke"),_n="fill";(x0>-1&&S0>-1&&S0<x0||x0===-1&&S0>-1)&&(_n="stroke")}else{if(ko==="href"||ko==="xlink:href"||ko==="font")return _n;if(ko==="imageSmoothing")return _n==="optimizeQuality";p0=m0?_n.map(wt):wt(_n,a0)}}return!m0&&isNaN(p0)?_n:p0}function Yr(ko){return new RegExp("^("+ko.join("|")+")\\b","i")}function An(ko){for(var _n in Kt)if(!(typeof ko[Kt[_n]]>"u"||ko[_n]==="")){if(typeof ko[_n]>"u"){if(!vt.Object.prototype[_n])continue;ko[_n]=vt.Object.prototype[_n]}if(ko[_n].indexOf("url(")!==0){var i0=new vt.Color(ko[_n]);ko[_n]=i0.setAlpha(st(i0.getAlpha()*ko[Kt[_n]],2)).toRgba()}}return ko}function No(ko,_n){var i0,a0=[],m0,p0,x0;for(p0=0,x0=_n.length;p0<x0;p0++)i0=_n[p0],m0=ko.getElementsByTagName(i0),a0=a0.concat(Array.prototype.slice.call(m0));return a0}vt.parseTransformAttribute=function(){function ko(d0,E0){var V0=vt.util.cos(E0[0]),Z0=vt.util.sin(E0[0]),h1=0,r1=0;E0.length===3&&(h1=E0[1],r1=E0[2]),d0[0]=V0,d0[1]=Z0,d0[2]=-Z0,d0[3]=V0,d0[4]=h1-(V0*h1-Z0*r1),d0[5]=r1-(Z0*h1+V0*r1)}function _n(d0,E0){var V0=E0[0],Z0=E0.length===2?E0[1]:E0[0];d0[0]=V0,d0[3]=Z0}function i0(d0,E0,V0){d0[V0]=Math.tan(vt.util.degreesToRadians(E0[0]))}function a0(d0,E0){d0[4]=E0[0],E0.length===2&&(d0[5]=E0[1])}var m0=vt.iMatrix,p0=vt.reNum,x0=vt.commaWsp,S0="(?:(skewX)\\s*\\(\\s*("+p0+")\\s*\\))",R0="(?:(skewY)\\s*\\(\\s*("+p0+")\\s*\\))",$0="(?:(rotate)\\s*\\(\\s*("+p0+")(?:"+x0+"("+p0+")"+x0+"("+p0+"))?\\s*\\))",f0="(?:(scale)\\s*\\(\\s*("+p0+")(?:"+x0+"("+p0+"))?\\s*\\))",P0="(?:(translate)\\s*\\(\\s*("+p0+")(?:"+x0+"("+p0+"))?\\s*\\))",M0="(?:(matrix)\\s*\\(\\s*("+p0+")"+x0+"("+p0+")"+x0+"("+p0+")"+x0+"("+p0+")"+x0+"("+p0+")"+x0+"("+p0+")\\s*\\))",C0="(?:"+M0+"|"+P0+"|"+f0+"|"+$0+"|"+S0+"|"+R0+")",Uo="(?:"+C0+"(?:"+x0+"*"+C0+")*)",l0="^\\s*(?:"+Uo+"?)\\s*$",b0=new RegExp(l0),k0=new RegExp(C0,"g");return function(d0){var E0=m0.concat(),V0=[];if(!d0||d0&&!b0.test(d0))return E0;d0.replace(k0,function(h1){var r1=new RegExp(C0).exec(h1).filter(function(q1){return!!q1}),I1=r1[1],f1=r1.slice(2).map(parseFloat);switch(I1){case"translate":a0(E0,f1);break;case"rotate":f1[0]=vt.util.degreesToRadians(f1[0]),ko(E0,f1);break;case"scale":_n(E0,f1);break;case"skewX":i0(E0,f1,2);break;case"skewY":i0(E0,f1,1);break;case"matrix":E0=f1;break}V0.push(E0.concat()),E0=m0.concat()});for(var Z0=V0[0];V0.length>1;)V0.shift(),Z0=vt.util.multiplyTransformMatrices(Z0,V0[0]);return Z0}}();function o0(ko,_n){var i0,a0;ko.replace(/;\s*$/,"").split(";").forEach(function(m0){var p0=m0.split(":");i0=p0[0].trim().toLowerCase(),a0=p0[1].trim(),_n[i0]=a0})}function t0(ko,_n){var i0,a0;for(var m0 in ko)typeof ko[m0]>"u"||(i0=m0.toLowerCase(),a0=ko[m0],_n[i0]=a0)}function c0(ko,_n){var i0={};for(var a0 in vt.cssRules[_n])if(n0(ko,a0.split(" ")))for(var m0 in vt.cssRules[_n][a0])i0[m0]=vt.cssRules[_n][a0][m0];return i0}function n0(ko,_n){var i0,a0=!0;return i0=Mo(ko,_n.pop()),i0&&_n.length&&(a0=Qo(ko,_n)),i0&&a0&&_n.length===0}function Qo(ko,_n){for(var i0,a0=!0;ko.parentNode&&ko.parentNode.nodeType===1&&_n.length;)a0&&(i0=_n.pop()),ko=ko.parentNode,a0=Mo(ko,i0);return _n.length===0}function Mo(ko,_n){var i0=ko.nodeName,a0=ko.getAttribute("class"),m0=ko.getAttribute("id"),p0,x0;if(p0=new RegExp("^"+i0,"i"),_n=_n.replace(p0,""),m0&&_n.length&&(p0=new RegExp("#"+m0+"(?![a-zA-Z\\-]+)","i"),_n=_n.replace(p0,"")),a0&&_n.length)for(a0=a0.split(" "),x0=a0.length;x0--;)p0=new RegExp("\\."+a0[x0]+"(?![a-zA-Z\\-]+)","i"),_n=_n.replace(p0,"");return _n.length===0}function zo(ko,_n){var i0;if(ko.getElementById&&(i0=ko.getElementById(_n)),i0)return i0;var a0,m0,p0,x0=ko.getElementsByTagName("*");for(m0=0,p0=x0.length;m0<p0;m0++)if(a0=x0[m0],_n===a0.getAttribute("id"))return a0}function e0(ko){for(var _n=No(ko,["use","svg:use"]),i0=0;_n.length&&i0<_n.length;){var a0=_n[i0],m0=a0.getAttribute("xlink:href")||a0.getAttribute("href");if(m0===null)return;var p0=m0.slice(1),x0=a0.getAttribute("x")||0,S0=a0.getAttribute("y")||0,R0=zo(ko,p0).cloneNode(!0),$0=(R0.getAttribute("transform")||"")+" translate("+x0+", "+S0+")",f0,P0=_n.length,M0,C0,Uo,l0,b0=vt.svgNS;if(In(R0),/^svg$/i.test(R0.nodeName)){var k0=R0.ownerDocument.createElementNS(b0,"g");for(C0=0,Uo=R0.attributes,l0=Uo.length;C0<l0;C0++)M0=Uo.item(C0),k0.setAttributeNS(b0,M0.nodeName,M0.nodeValue);for(;R0.firstChild;)k0.appendChild(R0.firstChild);R0=k0}for(C0=0,Uo=a0.attributes,l0=Uo.length;C0<l0;C0++)M0=Uo.item(C0),!(M0.nodeName==="x"||M0.nodeName==="y"||M0.nodeName==="xlink:href"||M0.nodeName==="href")&&(M0.nodeName==="transform"?$0=M0.nodeValue+" "+$0:R0.setAttribute(M0.nodeName,M0.nodeValue));R0.setAttribute("transform",$0),R0.setAttribute("instantiated_by_use","1"),R0.removeAttribute("id"),f0=a0.parentNode,f0.replaceChild(R0,a0),_n.length===P0&&i0++}}var Xr=new RegExp("^\\s*("+vt.reNum+"+)\\s*,?\\s*("+vt.reNum+"+)\\s*,?\\s*("+vt.reNum+"+)\\s*,?\\s*("+vt.reNum+"+)\\s*$");function In(ko){if(!vt.svgViewBoxElementsRegEx.test(ko.nodeName))return{};var _n=ko.getAttribute("viewBox"),i0=1,a0=1,m0=0,p0=0,x0,S0,R0,$0,f0=ko.getAttribute("width"),P0=ko.getAttribute("height"),M0=ko.getAttribute("x")||0,C0=ko.getAttribute("y")||0,Uo=ko.getAttribute("preserveAspectRatio")||"",l0=!_n||!(_n=_n.match(Xr)),b0=!f0||!P0||f0==="100%"||P0==="100%",k0=l0&&b0,d0={},E0="",V0=0,Z0=0;if(d0.width=0,d0.height=0,d0.toBeParsed=k0,l0&&(M0||C0)&&ko.parentNode&&ko.parentNode.nodeName!=="#document"&&(E0=" translate("+wt(M0)+" "+wt(C0)+") ",R0=(ko.getAttribute("transform")||"")+E0,ko.setAttribute("transform",R0),ko.removeAttribute("x"),ko.removeAttribute("y")),k0)return d0;if(l0)return d0.width=wt(f0),d0.height=wt(P0),d0;if(m0=-parseFloat(_n[1]),p0=-parseFloat(_n[2]),x0=parseFloat(_n[3]),S0=parseFloat(_n[4]),d0.minX=m0,d0.minY=p0,d0.viewBoxWidth=x0,d0.viewBoxHeight=S0,b0?(d0.width=x0,d0.height=S0):(d0.width=wt(f0),d0.height=wt(P0),i0=d0.width/x0,a0=d0.height/S0),Uo=vt.util.parsePreserveAspectRatioAttribute(Uo),Uo.alignX!=="none"&&(Uo.meetOrSlice==="meet"&&(a0=i0=i0>a0?a0:i0),Uo.meetOrSlice==="slice"&&(a0=i0=i0>a0?i0:a0),V0=d0.width-x0*i0,Z0=d0.height-S0*i0,Uo.alignX==="Mid"&&(V0/=2),Uo.alignY==="Mid"&&(Z0/=2),Uo.alignX==="Min"&&(V0=0),Uo.alignY==="Min"&&(Z0=0)),i0===1&&a0===1&&m0===0&&p0===0&&M0===0&&C0===0)return d0;if((M0||C0)&&ko.parentNode.nodeName!=="#document"&&(E0=" translate("+wt(M0)+" "+wt(C0)+") "),R0=E0+" matrix("+i0+" 0 0 "+a0+" "+(m0*i0+V0)+" "+(p0*a0+Z0)+") ",ko.nodeName==="svg"){for($0=ko.ownerDocument.createElementNS(vt.svgNS,"g");ko.firstChild;)$0.appendChild(ko.firstChild);ko.appendChild($0)}else $0=ko,$0.removeAttribute("x"),$0.removeAttribute("y"),R0=$0.getAttribute("transform")+R0;return $0.setAttribute("transform",R0),d0}function Zr(ko,_n){for(;ko&&(ko=ko.parentNode);)if(ko.nodeName&&_n.test(ko.nodeName.replace("svg:",""))&&!ko.getAttribute("instantiated_by_use"))return!0;return!1}vt.parseSVGDocument=function(ko,_n,i0,a0){if(ko){e0(ko);var m0=vt.Object.__uid++,p0,x0,S0=In(ko),R0=vt.util.toArray(ko.getElementsByTagName("*"));if(S0.crossOrigin=a0&&a0.crossOrigin,S0.svgUid=m0,R0.length===0&&vt.isLikelyNode){R0=ko.selectNodes('//*[name(.)!="svg"]');var $0=[];for(p0=0,x0=R0.length;p0<x0;p0++)$0[p0]=R0[p0];R0=$0}var f0=R0.filter(function(M0){return In(M0),vt.svgValidTagNamesRegEx.test(M0.nodeName.replace("svg:",""))&&!Zr(M0,vt.svgInvalidAncestorsRegEx)});if(!f0||f0&&!f0.length){_n&&_n([],{});return}var P0={};R0.filter(function(M0){return M0.nodeName.replace("svg:","")==="clipPath"}).forEach(function(M0){var C0=M0.getAttribute("id");P0[C0]=vt.util.toArray(M0.getElementsByTagName("*")).filter(function(Uo){return vt.svgValidTagNamesRegEx.test(Uo.nodeName.replace("svg:",""))})}),vt.gradientDefs[m0]=vt.getGradientDefs(ko),vt.cssRules[m0]=vt.getCSSRules(ko),vt.clipPaths[m0]=P0,vt.parseElements(f0,function(M0,C0){_n&&(_n(M0,S0,C0,R0),delete vt.gradientDefs[m0],delete vt.cssRules[m0],delete vt.clipPaths[m0])},pt(S0),i0,a0)}};function wn(ko,_n){var i0=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],a0="xlink:href",m0=_n.getAttribute(a0).slice(1),p0=zo(ko,m0);if(p0&&p0.getAttribute(a0)&&wn(ko,p0),i0.forEach(function(S0){p0&&!_n.hasAttribute(S0)&&p0.hasAttribute(S0)&&_n.setAttribute(S0,p0.getAttribute(S0))}),!_n.children.length)for(var x0=p0.cloneNode(!0);x0.firstChild;)_n.appendChild(x0.firstChild);_n.removeAttribute(a0)}var r0=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+vt.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+vt.reNum+"))?\\s+(.*)");b(vt,{parseFontDeclaration:function(ko,_n){var i0=ko.match(r0);if(i0){var a0=i0[1],m0=i0[3],p0=i0[4],x0=i0[5],S0=i0[6];a0&&(_n.fontStyle=a0),m0&&(_n.fontWeight=isNaN(parseFloat(m0))?m0:parseFloat(m0)),p0&&(_n.fontSize=wt(p0)),S0&&(_n.fontFamily=S0),x0&&(_n.lineHeight=x0==="normal"?1:x0)}},getGradientDefs:function(ko){var _n=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],i0=No(ko,_n),a0,m0=0,p0={};for(m0=i0.length;m0--;)a0=i0[m0],a0.getAttribute("xlink:href")&&wn(ko,a0),p0[a0.getAttribute("id")]=a0;return p0},parseAttributes:function(ko,_n,i0){if(ko){var a0,m0={},p0,x0;typeof i0>"u"&&(i0=ko.getAttribute("svgUid")),ko.parentNode&&vt.svgValidParentsRegEx.test(ko.parentNode.nodeName)&&(m0=vt.parseAttributes(ko.parentNode,_n,i0));var S0=_n.reduce(function(Uo,l0){return a0=ko.getAttribute(l0),a0&&(Uo[l0]=a0),Uo},{}),R0=b(c0(ko,i0),vt.parseStyleAttribute(ko));S0=b(S0,R0),R0[rr]&&ko.setAttribute(rr,R0[rr]),p0=x0=m0.fontSize||vt.Text.DEFAULT_SVG_FONT_SIZE,S0[tr]&&(S0[tr]=p0=wt(S0[tr],x0));var $0,f0,P0={};for(var M0 in S0)$0=Lr(M0),f0=jr($0,S0[M0],m0,p0),P0[$0]=f0;P0&&P0.font&&vt.parseFontDeclaration(P0.font,P0);var C0=b(m0,P0);return vt.svgValidParentsRegEx.test(ko.nodeName)?C0:An(C0)}},parseElements:function(ko,_n,i0,a0,m0){new vt.ElementsParser(ko,_n,i0,a0,m0).parse()},parseStyleAttribute:function(ko){var _n={},i0=ko.getAttribute("style");return i0&&(typeof i0=="string"?o0(i0,_n):t0(i0,_n)),_n},parsePointsAttribute:function(ko){if(!ko)return null;ko=ko.replace(/,/g," ").trim(),ko=ko.split(/\s+/);var _n=[],i0,a0;for(i0=0,a0=ko.length;i0<a0;i0+=2)_n.push({x:parseFloat(ko[i0]),y:parseFloat(ko[i0+1])});return _n},getCSSRules:function(ko){var _n=ko.getElementsByTagName("style"),i0,a0,m0={},p0;for(i0=0,a0=_n.length;i0<a0;i0++){var x0=_n[i0].textContent;x0=x0.replace(/\/\*[\s\S]*?\*\//g,""),x0.trim()!==""&&(p0=x0.split("}"),p0=p0.filter(function(S0){return S0.trim()}),p0.forEach(function(S0){var R0=S0.split("{"),$0={},f0=R0[1].trim(),P0=f0.split(";").filter(function(l0){return l0.trim()});for(i0=0,a0=P0.length;i0<a0;i0++){var M0=P0[i0].split(":"),C0=M0[0].trim(),Uo=M0[1].trim();$0[C0]=Uo}S0=R0[0].trim(),S0.split(",").forEach(function(l0){l0=l0.replace(/^svg/i,"").trim(),l0!==""&&(m0[l0]?vt.util.object.extend(m0[l0],$0):m0[l0]=vt.util.object.clone($0))})}))}return m0},loadSVGFromURL:function(ko,_n,i0,a0){ko=ko.replace(/^\n\s*/,"").trim(),new vt.util.request(ko,{method:"get",onComplete:m0});function m0(p0){var x0=p0.responseXML;if(!x0||!x0.documentElement)return _n&&_n(null),!1;vt.parseSVGDocument(x0.documentElement,function(S0,R0,$0,f0){_n&&_n(S0,R0,$0,f0)},i0,a0)}},loadSVGFromString:function(ko,_n,i0,a0){var m0=new vt.window.DOMParser,p0=m0.parseFromString(ko.trim(),"text/xml");vt.parseSVGDocument(p0.documentElement,function(x0,S0,R0,$0){_n(x0,S0,R0,$0)},i0,a0)}})}(a),s.ElementsParser=function($t,vt,b,pt,st,wt){this.elements=$t,this.callback=vt,this.options=b,this.reviver=pt,this.svgUid=b&&b.svgUid||0,this.parsingOptions=st,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=wt},function($t){$t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},$t.createObjects=function(){var vt=this;this.elements.forEach(function(b,pt){b.setAttribute("svgUid",vt.svgUid),vt.createObject(b,pt)})},$t.findTag=function(vt){return s[s.util.string.capitalize(vt.tagName.replace("svg:",""))]},$t.createObject=function(vt,b){var pt=this.findTag(vt);if(pt&&pt.fromElement)try{pt.fromElement(vt,this.createCallback(b,vt),this.options)}catch(st){s.log(st)}else this.checkIfDone()},$t.createCallback=function(vt,b){var pt=this;return function(st){var wt;pt.resolveGradient(st,b,"fill"),pt.resolveGradient(st,b,"stroke"),st instanceof s.Image&&st._originalElement&&(wt=st.parsePreserveAspectRatioAttribute(b)),st._removeTransformMatrix(wt),pt.resolveClipPath(st,b),pt.reviver&&pt.reviver(b,st),pt.instances[vt]=st,pt.checkIfDone()}},$t.extractPropertyDefinition=function(vt,b,pt){var st=vt[b],wt=this.regexUrl;if(wt.test(st)){wt.lastIndex=0;var Tt=wt.exec(st)[1];return wt.lastIndex=0,s[pt][this.svgUid][Tt]}},$t.resolveGradient=function(vt,b,pt){var st=this.extractPropertyDefinition(vt,pt,"gradientDefs");if(st){var wt=b.getAttribute(pt+"-opacity"),Tt=s.Gradient.fromElement(st,vt,wt,this.options);vt.set(pt,Tt)}},$t.createClipPathCallback=function(vt,b){return function(pt){pt._removeTransformMatrix(),pt.fillRule=pt.clipRule,b.push(pt)}},$t.resolveClipPath=function(vt,b){var pt=this.extractPropertyDefinition(vt,"clipPath","clipPaths"),st,wt,Tt,Ct,jt,Lt;if(pt){Ct=[],Tt=s.util.invertTransform(vt.calcTransformMatrix());for(var Ht=pt[0].parentNode,Gt=b;Gt.parentNode&&Gt.getAttribute("clip-path")!==vt.clipPath;)Gt=Gt.parentNode;Gt.parentNode.appendChild(Ht);for(var Kt=0;Kt<pt.length;Kt++)st=pt[Kt],wt=this.findTag(st),wt.fromElement(st,this.createClipPathCallback(vt,Ct),this.options);Ct.length===1?pt=Ct[0]:pt=new s.Group(Ct),jt=s.util.multiplyTransformMatrices(Tt,pt.calcTransformMatrix()),pt.clipPath&&this.resolveClipPath(pt,Gt);var Lt=s.util.qrDecompose(jt);pt.flipX=!1,pt.flipY=!1,pt.set("scaleX",Lt.scaleX),pt.set("scaleY",Lt.scaleY),pt.angle=Lt.angle,pt.skewX=Lt.skewX,pt.skewY=0,pt.setPositionByOrigin({x:Lt.translateX,y:Lt.translateY},"center","center"),vt.clipPath=pt}else delete vt.clipPath},$t.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(vt){return vt!=null}),this.callback(this.instances,this.elements))}}(s.ElementsParser.prototype),function($t){var vt=$t.fabric||($t.fabric={});if(vt.Point){vt.warn("fabric.Point is already defined");return}vt.Point=b;function b(pt,st){this.x=pt,this.y=st}b.prototype={type:"point",constructor:b,add:function(pt){return new b(this.x+pt.x,this.y+pt.y)},addEquals:function(pt){return this.x+=pt.x,this.y+=pt.y,this},scalarAdd:function(pt){return new b(this.x+pt,this.y+pt)},scalarAddEquals:function(pt){return this.x+=pt,this.y+=pt,this},subtract:function(pt){return new b(this.x-pt.x,this.y-pt.y)},subtractEquals:function(pt){return this.x-=pt.x,this.y-=pt.y,this},scalarSubtract:function(pt){return new b(this.x-pt,this.y-pt)},scalarSubtractEquals:function(pt){return this.x-=pt,this.y-=pt,this},multiply:function(pt){return new b(this.x*pt,this.y*pt)},multiplyEquals:function(pt){return this.x*=pt,this.y*=pt,this},divide:function(pt){return new b(this.x/pt,this.y/pt)},divideEquals:function(pt){return this.x/=pt,this.y/=pt,this},eq:function(pt){return this.x===pt.x&&this.y===pt.y},lt:function(pt){return this.x<pt.x&&this.y<pt.y},lte:function(pt){return this.x<=pt.x&&this.y<=pt.y},gt:function(pt){return this.x>pt.x&&this.y>pt.y},gte:function(pt){return this.x>=pt.x&&this.y>=pt.y},lerp:function(pt,st){return typeof st>"u"&&(st=.5),st=Math.max(Math.min(1,st),0),new b(this.x+(pt.x-this.x)*st,this.y+(pt.y-this.y)*st)},distanceFrom:function(pt){var st=this.x-pt.x,wt=this.y-pt.y;return Math.sqrt(st*st+wt*wt)},midPointFrom:function(pt){return this.lerp(pt)},min:function(pt){return new b(Math.min(this.x,pt.x),Math.min(this.y,pt.y))},max:function(pt){return new b(Math.max(this.x,pt.x),Math.max(this.y,pt.y))},toString:function(){return this.x+","+this.y},setXY:function(pt,st){return this.x=pt,this.y=st,this},setX:function(pt){return this.x=pt,this},setY:function(pt){return this.y=pt,this},setFromPoint:function(pt){return this.x=pt.x,this.y=pt.y,this},swap:function(pt){var st=this.x,wt=this.y;this.x=pt.x,this.y=pt.y,pt.x=st,pt.y=wt},clone:function(){return new b(this.x,this.y)}}}(a),function($t){var vt=$t.fabric||($t.fabric={});if(vt.Intersection){vt.warn("fabric.Intersection is already defined");return}function b(pt){this.status=pt,this.points=[]}vt.Intersection=b,vt.Intersection.prototype={constructor:b,appendPoint:function(pt){return this.points.push(pt),this},appendPoints:function(pt){return this.points=this.points.concat(pt),this}},vt.Intersection.intersectLineLine=function(pt,st,wt,Tt){var Ct,jt=(Tt.x-wt.x)*(pt.y-wt.y)-(Tt.y-wt.y)*(pt.x-wt.x),Lt=(st.x-pt.x)*(pt.y-wt.y)-(st.y-pt.y)*(pt.x-wt.x),Ht=(Tt.y-wt.y)*(st.x-pt.x)-(Tt.x-wt.x)*(st.y-pt.y);if(Ht!==0){var Gt=jt/Ht,Kt=Lt/Ht;0<=Gt&&Gt<=1&&0<=Kt&&Kt<=1?(Ct=new b("Intersection"),Ct.appendPoint(new vt.Point(pt.x+Gt*(st.x-pt.x),pt.y+Gt*(st.y-pt.y)))):Ct=new b}else jt===0||Lt===0?Ct=new b("Coincident"):Ct=new b("Parallel");return Ct},vt.Intersection.intersectLinePolygon=function(pt,st,wt){var Tt=new b,Ct=wt.length,jt,Lt,Ht,Gt;for(Gt=0;Gt<Ct;Gt++)jt=wt[Gt],Lt=wt[(Gt+1)%Ct],Ht=b.intersectLineLine(pt,st,jt,Lt),Tt.appendPoints(Ht.points);return Tt.points.length>0&&(Tt.status="Intersection"),Tt},vt.Intersection.intersectPolygonPolygon=function(pt,st){var wt=new b,Tt=pt.length,Ct;for(Ct=0;Ct<Tt;Ct++){var jt=pt[Ct],Lt=pt[(Ct+1)%Tt],Ht=b.intersectLinePolygon(jt,Lt,st);wt.appendPoints(Ht.points)}return wt.points.length>0&&(wt.status="Intersection"),wt},vt.Intersection.intersectPolygonRectangle=function(pt,st,wt){var Tt=st.min(wt),Ct=st.max(wt),jt=new vt.Point(Ct.x,Tt.y),Lt=new vt.Point(Tt.x,Ct.y),Ht=b.intersectLinePolygon(Tt,jt,pt),Gt=b.intersectLinePolygon(jt,Ct,pt),Kt=b.intersectLinePolygon(Ct,Lt,pt),tr=b.intersectLinePolygon(Lt,Tt,pt),rr=new b;return rr.appendPoints(Ht.points),rr.appendPoints(Gt.points),rr.appendPoints(Kt.points),rr.appendPoints(tr.points),rr.points.length>0&&(rr.status="Intersection"),rr}}(a),function($t){var vt=$t.fabric||($t.fabric={});if(vt.Color){vt.warn("fabric.Color is already defined.");return}function b(st){st?this._tryParsingColor(st):this.setSource([0,0,0,1])}vt.Color=b,vt.Color.prototype={_tryParsingColor:function(st){var wt;st in b.colorNameMap&&(st=b.colorNameMap[st]),st==="transparent"&&(wt=[255,255,255,0]),wt||(wt=b.sourceFromHex(st)),wt||(wt=b.sourceFromRgb(st)),wt||(wt=b.sourceFromHsl(st)),wt||(wt=[0,0,0,1]),wt&&this.setSource(wt)},_rgbToHsl:function(st,wt,Tt){st/=255,wt/=255,Tt/=255;var Ct,jt,Lt,Ht=vt.util.array.max([st,wt,Tt]),Gt=vt.util.array.min([st,wt,Tt]);if(Lt=(Ht+Gt)/2,Ht===Gt)Ct=jt=0;else{var Kt=Ht-Gt;switch(jt=Lt>.5?Kt/(2-Ht-Gt):Kt/(Ht+Gt),Ht){case st:Ct=(wt-Tt)/Kt+(wt<Tt?6:0);break;case wt:Ct=(Tt-st)/Kt+2;break;case Tt:Ct=(st-wt)/Kt+4;break}Ct/=6}return[Math.round(Ct*360),Math.round(jt*100),Math.round(Lt*100)]},getSource:function(){return this._source},setSource:function(st){this._source=st},toRgb:function(){var st=this.getSource();return"rgb("+st[0]+","+st[1]+","+st[2]+")"},toRgba:function(){var st=this.getSource();return"rgba("+st[0]+","+st[1]+","+st[2]+","+st[3]+")"},toHsl:function(){var st=this.getSource(),wt=this._rgbToHsl(st[0],st[1],st[2]);return"hsl("+wt[0]+","+wt[1]+"%,"+wt[2]+"%)"},toHsla:function(){var st=this.getSource(),wt=this._rgbToHsl(st[0],st[1],st[2]);return"hsla("+wt[0]+","+wt[1]+"%,"+wt[2]+"%,"+st[3]+")"},toHex:function(){var st=this.getSource(),wt,Tt,Ct;return wt=st[0].toString(16),wt=wt.length===1?"0"+wt:wt,Tt=st[1].toString(16),Tt=Tt.length===1?"0"+Tt:Tt,Ct=st[2].toString(16),Ct=Ct.length===1?"0"+Ct:Ct,wt.toUpperCase()+Tt.toUpperCase()+Ct.toUpperCase()},toHexa:function(){var st=this.getSource(),wt;return wt=Math.round(st[3]*255),wt=wt.toString(16),wt=wt.length===1?"0"+wt:wt,this.toHex()+wt.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(st){var wt=this.getSource();return wt[3]=st,this.setSource(wt),this},toGrayscale:function(){var st=this.getSource(),wt=parseInt((st[0]*.3+st[1]*.59+st[2]*.11).toFixed(0),10),Tt=st[3];return this.setSource([wt,wt,wt,Tt]),this},toBlackWhite:function(st){var wt=this.getSource(),Tt=(wt[0]*.3+wt[1]*.59+wt[2]*.11).toFixed(0),Ct=wt[3];return st=st||127,Tt=Number(Tt)<Number(st)?0:255,this.setSource([Tt,Tt,Tt,Ct]),this},overlayWith:function(st){st instanceof b||(st=new b(st));var wt=[],Tt=this.getAlpha(),Ct=.5,jt=this.getSource(),Lt=st.getSource(),Ht;for(Ht=0;Ht<3;Ht++)wt.push(Math.round(jt[Ht]*(1-Ct)+Lt[Ht]*Ct));return wt[3]=Tt,this.setSource(wt),this}},vt.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,vt.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,vt.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,vt.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function pt(st,wt,Tt){return Tt<0&&(Tt+=1),Tt>1&&(Tt-=1),Tt<1/6?st+(wt-st)*6*Tt:Tt<1/2?wt:Tt<2/3?st+(wt-st)*(2/3-Tt)*6:st}vt.Color.fromRgb=function(st){return b.fromSource(b.sourceFromRgb(st))},vt.Color.sourceFromRgb=function(st){var wt=st.match(b.reRGBa);if(wt){var Tt=parseInt(wt[1],10)/(/%$/.test(wt[1])?100:1)*(/%$/.test(wt[1])?255:1),Ct=parseInt(wt[2],10)/(/%$/.test(wt[2])?100:1)*(/%$/.test(wt[2])?255:1),jt=parseInt(wt[3],10)/(/%$/.test(wt[3])?100:1)*(/%$/.test(wt[3])?255:1);return[parseInt(Tt,10),parseInt(Ct,10),parseInt(jt,10),wt[4]?parseFloat(wt[4]):1]}},vt.Color.fromRgba=b.fromRgb,vt.Color.fromHsl=function(st){return b.fromSource(b.sourceFromHsl(st))},vt.Color.sourceFromHsl=function(st){var wt=st.match(b.reHSLa);if(wt){var Tt=(parseFloat(wt[1])%360+360)%360/360,Ct=parseFloat(wt[2])/(/%$/.test(wt[2])?100:1),jt=parseFloat(wt[3])/(/%$/.test(wt[3])?100:1),Lt,Ht,Gt;if(Ct===0)Lt=Ht=Gt=jt;else{var Kt=jt<=.5?jt*(Ct+1):jt+Ct-jt*Ct,tr=jt*2-Kt;Lt=pt(tr,Kt,Tt+1/3),Ht=pt(tr,Kt,Tt),Gt=pt(tr,Kt,Tt-1/3)}return[Math.round(Lt*255),Math.round(Ht*255),Math.round(Gt*255),wt[4]?parseFloat(wt[4]):1]}},vt.Color.fromHsla=b.fromHsl,vt.Color.fromHex=function(st){return b.fromSource(b.sourceFromHex(st))},vt.Color.sourceFromHex=function(st){if(st.match(b.reHex)){var wt=st.slice(st.indexOf("#")+1),Tt=wt.length===3||wt.length===4,Ct=wt.length===8||wt.length===4,jt=Tt?wt.charAt(0)+wt.charAt(0):wt.substring(0,2),Lt=Tt?wt.charAt(1)+wt.charAt(1):wt.substring(2,4),Ht=Tt?wt.charAt(2)+wt.charAt(2):wt.substring(4,6),Gt=Ct?Tt?wt.charAt(3)+wt.charAt(3):wt.substring(6,8):"FF";return[parseInt(jt,16),parseInt(Lt,16),parseInt(Ht,16),parseFloat((parseInt(Gt,16)/255).toFixed(2))]}},vt.Color.fromSource=function(st){var wt=new b;return wt.setSource(st),wt}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=["e","se","s","sw","w","nw","n","ne","e"],pt=["ns","nesw","ew","nwse"],st={},wt="left",Tt="top",Ct="right",jt="bottom",Lt="center",Ht={top:jt,bottom:Tt,left:Ct,right:wt,center:Lt},Gt=vt.util.radiansToDegrees,Kt=Math.sign||function($0){return($0>0)-($0<0)||+$0};function tr($0,f0){var P0=$0.angle+Gt(Math.atan2(f0.y,f0.x))+360;return Math.round(P0%360/45)}function rr($0,f0){var P0=f0.transform.target,M0=P0.canvas,C0=vt.util.object.clone(f0);C0.target=P0,M0&&M0.fire("object:"+$0,C0),P0.fire($0,f0)}function Lr($0,f0){var P0=f0.canvas,M0=P0.uniScaleKey,C0=$0[M0];return P0.uniformScaling&&!C0||!P0.uniformScaling&&C0}function jr($0){return $0.originX===Lt&&$0.originY===Lt}function Yr($0,f0,P0){var M0=$0.lockScalingX,C0=$0.lockScalingY;return!!(M0&&C0||!f0&&(M0||C0)&&P0||M0&&f0==="x"||C0&&f0==="y")}function An($0,f0,P0){var M0="not-allowed",C0=Lr($0,P0),Uo="";if(f0.x!==0&&f0.y===0?Uo="x":f0.x===0&&f0.y!==0&&(Uo="y"),Yr(P0,Uo,C0))return M0;var l0=tr(P0,f0);return b[l0]+"-resize"}function No($0,f0,P0){var M0="not-allowed";if(f0.x!==0&&P0.lockSkewingY||f0.y!==0&&P0.lockSkewingX)return M0;var C0=tr(P0,f0)%4;return pt[C0]+"-resize"}function o0($0,f0,P0){return $0[P0.canvas.altActionKey]?st.skewCursorStyleHandler($0,f0,P0):st.scaleCursorStyleHandler($0,f0,P0)}function t0($0,f0,P0){var M0=$0[P0.canvas.altActionKey];if(f0.x===0)return M0?"skewX":"scaleY";if(f0.y===0)return M0?"skewY":"scaleX"}function c0($0,f0,P0){return P0.lockRotation?"not-allowed":f0.cursorStyle}function n0($0,f0,P0,M0){return{e:$0,transform:f0,pointer:{x:P0,y:M0}}}function Qo($0){return function(f0,P0,M0,C0){var Uo=P0.target,l0=Uo.getCenterPoint(),b0=Uo.translateToOriginPoint(l0,P0.originX,P0.originY),k0=$0(f0,P0,M0,C0);return Uo.setPositionByOrigin(b0,P0.originX,P0.originY),k0}}function Mo($0,f0){return function(P0,M0,C0,Uo){var l0=f0(P0,M0,C0,Uo);return l0&&rr($0,n0(P0,M0,C0,Uo)),l0}}function zo($0,f0,P0,M0,C0){var Uo=$0.target,l0=Uo.controls[$0.corner],b0=Uo.canvas.getZoom(),k0=Uo.padding/b0,d0=Uo.toLocalPoint(new vt.Point(M0,C0),f0,P0);return d0.x>=k0&&(d0.x-=k0),d0.x<=-k0&&(d0.x+=k0),d0.y>=k0&&(d0.y-=k0),d0.y<=k0&&(d0.y+=k0),d0.x-=l0.offsetX,d0.y-=l0.offsetY,d0}function e0($0){return $0.flipX!==$0.flipY}function Xr($0,f0,P0,M0,C0){if($0[f0]!==0){var Uo=$0._getTransformedDimensions()[M0],l0=C0/Uo*$0[P0];$0.set(P0,l0)}}function In($0,f0,P0,M0){var C0=f0.target,Uo=C0._getTransformedDimensions(0,C0.skewY),l0=zo(f0,f0.originX,f0.originY,P0,M0),b0=Math.abs(l0.x*2)-Uo.x,k0=C0.skewX,d0;b0<2?d0=0:(d0=Gt(Math.atan2(b0/C0.scaleX,Uo.y/C0.scaleY)),f0.originX===wt&&f0.originY===jt&&(d0=-d0),f0.originX===Ct&&f0.originY===Tt&&(d0=-d0),e0(C0)&&(d0=-d0));var E0=k0!==d0;if(E0){var V0=C0._getTransformedDimensions().y;C0.set("skewX",d0),Xr(C0,"skewY","scaleY","y",V0)}return E0}function Zr($0,f0,P0,M0){var C0=f0.target,Uo=C0._getTransformedDimensions(C0.skewX,0),l0=zo(f0,f0.originX,f0.originY,P0,M0),b0=Math.abs(l0.y*2)-Uo.y,k0=C0.skewY,d0;b0<2?d0=0:(d0=Gt(Math.atan2(b0/C0.scaleY,Uo.x/C0.scaleX)),f0.originX===wt&&f0.originY===jt&&(d0=-d0),f0.originX===Ct&&f0.originY===Tt&&(d0=-d0),e0(C0)&&(d0=-d0));var E0=k0!==d0;if(E0){var V0=C0._getTransformedDimensions().x;C0.set("skewY",d0),Xr(C0,"skewX","scaleX","x",V0)}return E0}function wn($0,f0,P0,M0){var C0=f0.target,Uo=C0.skewX,l0,b0=f0.originY;if(C0.lockSkewingX)return!1;if(Uo===0){var k0=zo(f0,Lt,Lt,P0,M0);k0.x>0?l0=wt:l0=Ct}else Uo>0&&(l0=b0===Tt?wt:Ct),Uo<0&&(l0=b0===Tt?Ct:wt),e0(C0)&&(l0=l0===wt?Ct:wt);f0.originX=l0;var d0=Mo("skewing",Qo(In));return d0($0,f0,P0,M0)}function r0($0,f0,P0,M0){var C0=f0.target,Uo=C0.skewY,l0,b0=f0.originX;if(C0.lockSkewingY)return!1;if(Uo===0){var k0=zo(f0,Lt,Lt,P0,M0);k0.y>0?l0=Tt:l0=jt}else Uo>0&&(l0=b0===wt?Tt:jt),Uo<0&&(l0=b0===wt?jt:Tt),e0(C0)&&(l0=l0===Tt?jt:Tt);f0.originY=l0;var d0=Mo("skewing",Qo(Zr));return d0($0,f0,P0,M0)}function ko($0,f0,P0,M0){var C0=f0,Uo=C0.target,l0=Uo.translateToOriginPoint(Uo.getCenterPoint(),C0.originX,C0.originY);if(Uo.lockRotation)return!1;var b0=Math.atan2(C0.ey-l0.y,C0.ex-l0.x),k0=Math.atan2(M0-l0.y,P0-l0.x),d0=Gt(k0-b0+C0.theta),E0=!0;if(Uo.snapAngle>0){var V0=Uo.snapAngle,Z0=Uo.snapThreshold||V0,h1=Math.ceil(d0/V0)*V0,r1=Math.floor(d0/V0)*V0;Math.abs(d0-r1)<Z0?d0=r1:Math.abs(d0-h1)<Z0&&(d0=h1)}return d0<0&&(d0=360+d0),d0%=360,E0=Uo.angle!==d0,Uo.angle=d0,E0}function _n($0,f0,P0,M0,C0){C0=C0||{};var Uo=f0.target,l0=Uo.lockScalingX,b0=Uo.lockScalingY,k0=C0.by,d0,E0,V0,Z0,h1=Lr($0,Uo),r1=Yr(Uo,k0,h1),I1,f1,q1=f0.gestureScale;if(r1)return!1;if(q1)E0=f0.scaleX*q1,V0=f0.scaleY*q1;else{if(d0=zo(f0,f0.originX,f0.originY,P0,M0),I1=k0!=="y"?Kt(d0.x):1,f1=k0!=="x"?Kt(d0.y):1,f0.signX||(f0.signX=I1),f0.signY||(f0.signY=f1),Uo.lockScalingFlip&&(f0.signX!==I1||f0.signY!==f1))return!1;if(Z0=Uo._getTransformedDimensions(),h1&&!k0){var c1=Math.abs(d0.x)+Math.abs(d0.y),B1=f0.original,nv=Math.abs(Z0.x*B1.scaleX/Uo.scaleX)+Math.abs(Z0.y*B1.scaleY/Uo.scaleY),iv=c1/nv;E0=B1.scaleX*iv,V0=B1.scaleY*iv}else E0=Math.abs(d0.x*Uo.scaleX/Z0.x),V0=Math.abs(d0.y*Uo.scaleY/Z0.y);jr(f0)&&(E0*=2,V0*=2),f0.signX!==I1&&k0!=="y"&&(f0.originX=Ht[f0.originX],E0*=-1,f0.signX=I1),f0.signY!==f1&&k0!=="x"&&(f0.originY=Ht[f0.originY],V0*=-1,f0.signY=f1)}var t1=Uo.scaleX,dv=Uo.scaleY;return k0?(k0==="x"&&Uo.set("scaleX",E0),k0==="y"&&Uo.set("scaleY",V0)):(!l0&&Uo.set("scaleX",E0),!b0&&Uo.set("scaleY",V0)),t1!==Uo.scaleX||dv!==Uo.scaleY}function i0($0,f0,P0,M0){return _n($0,f0,P0,M0)}function a0($0,f0,P0,M0){return _n($0,f0,P0,M0,{by:"x"})}function m0($0,f0,P0,M0){return _n($0,f0,P0,M0,{by:"y"})}function p0($0,f0,P0,M0){return $0[f0.target.canvas.altActionKey]?st.skewHandlerX($0,f0,P0,M0):st.scalingY($0,f0,P0,M0)}function x0($0,f0,P0,M0){return $0[f0.target.canvas.altActionKey]?st.skewHandlerY($0,f0,P0,M0):st.scalingX($0,f0,P0,M0)}function S0($0,f0,P0,M0){var C0=f0.target,Uo=zo(f0,f0.originX,f0.originY,P0,M0),l0=C0.strokeWidth/(C0.strokeUniform?C0.scaleX:1),b0=jr(f0)?2:1,k0=C0.width,d0=Math.abs(Uo.x*b0/C0.scaleX)-l0;return C0.set("width",Math.max(d0,0)),k0!==d0}function R0($0,f0,P0,M0){var C0=f0.target,Uo=P0-f0.offsetX,l0=M0-f0.offsetY,b0=!C0.get("lockMovementX")&&C0.left!==Uo,k0=!C0.get("lockMovementY")&&C0.top!==l0;return b0&&C0.set("left",Uo),k0&&C0.set("top",l0),(b0||k0)&&rr("moving",n0($0,f0,P0,M0)),b0||k0}st.scaleCursorStyleHandler=An,st.skewCursorStyleHandler=No,st.scaleSkewCursorStyleHandler=o0,st.rotationWithSnapping=Mo("rotating",Qo(ko)),st.scalingEqually=Mo("scaling",Qo(i0)),st.scalingX=Mo("scaling",Qo(a0)),st.scalingY=Mo("scaling",Qo(m0)),st.scalingYOrSkewingX=p0,st.scalingXOrSkewingY=x0,st.changeWidth=Mo("resizing",Qo(S0)),st.skewHandlerX=wn,st.skewHandlerY=r0,st.dragHandler=R0,st.scaleOrSkewActionName=t0,st.rotationStyleHandler=c0,st.fireEvent=rr,st.wrapWithFixedAnchor=Qo,st.wrapWithFireEvent=Mo,st.getLocalPoint=zo,vt.controlsUtils=st}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.degreesToRadians,pt=vt.controlsUtils;function st(Tt,Ct,jt,Lt,Ht){Lt=Lt||{};var Gt=this.sizeX||Lt.cornerSize||Ht.cornerSize,Kt=this.sizeY||Lt.cornerSize||Ht.cornerSize,tr=typeof Lt.transparentCorners<"u"?Lt.transparentCorners:Ht.transparentCorners,rr=tr?"stroke":"fill",Lr=!tr&&(Lt.cornerStrokeColor||Ht.cornerStrokeColor),jr=Ct,Yr=jt,An;Tt.save(),Tt.fillStyle=Lt.cornerColor||Ht.cornerColor,Tt.strokeStyle=Lt.cornerStrokeColor||Ht.cornerStrokeColor,Gt>Kt?(An=Gt,Tt.scale(1,Kt/Gt),Yr=jt*Gt/Kt):Kt>Gt?(An=Kt,Tt.scale(Gt/Kt,1),jr=Ct*Kt/Gt):An=Gt,Tt.lineWidth=1,Tt.beginPath(),Tt.arc(jr,Yr,An/2,0,2*Math.PI,!1),Tt[rr](),Lr&&Tt.stroke(),Tt.restore()}function wt(Tt,Ct,jt,Lt,Ht){Lt=Lt||{};var Gt=this.sizeX||Lt.cornerSize||Ht.cornerSize,Kt=this.sizeY||Lt.cornerSize||Ht.cornerSize,tr=typeof Lt.transparentCorners<"u"?Lt.transparentCorners:Ht.transparentCorners,rr=tr?"stroke":"fill",Lr=!tr&&(Lt.cornerStrokeColor||Ht.cornerStrokeColor),jr=Gt/2,Yr=Kt/2;Tt.save(),Tt.fillStyle=Lt.cornerColor||Ht.cornerColor,Tt.strokeStyle=Lt.cornerStrokeColor||Ht.cornerStrokeColor,Tt.lineWidth=1,Tt.translate(Ct,jt),Tt.rotate(b(Ht.angle)),Tt[rr+"Rect"](-jr,-Yr,Gt,Kt),Lr&&Tt.strokeRect(-jr,-Yr,Gt,Kt),Tt.restore()}pt.renderCircleControl=st,pt.renderSquareControl=wt}(a),function($t){var vt=$t.fabric||($t.fabric={});function b(pt){for(var st in pt)this[st]=pt[st]}vt.Control=b,vt.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(pt,st){return st.cursorStyle},getActionName:function(pt,st){return st.actionName},getVisibility:function(pt,st){var wt=pt._controlsVisibility;return wt&&typeof wt[st]<"u"?wt[st]:this.visible},setVisibility:function(pt){this.visible=pt},positionHandler:function(pt,st){var wt=vt.util.transformPoint({x:this.x*pt.x+this.offsetX,y:this.y*pt.y+this.offsetY},st);return wt},calcCornerCoords:function(pt,st,wt,Tt,Ct){var jt,Lt,Ht,Gt,Kt=Ct?this.touchSizeX:this.sizeX,tr=Ct?this.touchSizeY:this.sizeY;if(Kt&&tr&&Kt!==tr){var rr=Math.atan2(tr,Kt),Lr=Math.sqrt(Kt*Kt+tr*tr)/2,jr=rr-vt.util.degreesToRadians(pt),Yr=Math.PI/2-rr-vt.util.degreesToRadians(pt);jt=Lr*vt.util.cos(jr),Lt=Lr*vt.util.sin(jr),Ht=Lr*vt.util.cos(Yr),Gt=Lr*vt.util.sin(Yr)}else{var An=Kt&&tr?Kt:st;Lr=An*.7071067812;var jr=vt.util.degreesToRadians(45-pt);jt=Ht=Lr*vt.util.cos(jr),Lt=Gt=Lr*vt.util.sin(jr)}return{tl:{x:wt-Gt,y:Tt-Ht},tr:{x:wt+jt,y:Tt-Lt},bl:{x:wt-jt,y:Tt+Lt},br:{x:wt+Gt,y:Tt+Ht}}},render:function(pt,st,wt,Tt,Ct){switch(Tt=Tt||{},Tt.cornerStyle||Ct.cornerStyle){case"circle":vt.controlsUtils.renderCircleControl.call(this,pt,st,wt,Tt,Ct);break;default:vt.controlsUtils.renderSquareControl.call(this,pt,st,wt,Tt,Ct)}}}}(a),function(){function $t(wt,Tt){var Ct=wt.getAttribute("style"),jt=wt.getAttribute("offset")||0,Lt,Ht,Gt,Kt;if(jt=parseFloat(jt)/(/%$/.test(jt)?100:1),jt=jt<0?0:jt>1?1:jt,Ct){var tr=Ct.split(/\s*;\s*/);for(tr[tr.length-1]===""&&tr.pop(),Kt=tr.length;Kt--;){var rr=tr[Kt].split(/\s*:\s*/),Lr=rr[0].trim(),jr=rr[1].trim();Lr==="stop-color"?Lt=jr:Lr==="stop-opacity"&&(Gt=jr)}}return Lt||(Lt=wt.getAttribute("stop-color")||"rgb(0,0,0)"),Gt||(Gt=wt.getAttribute("stop-opacity")),Lt=new s.Color(Lt),Ht=Lt.getAlpha(),Gt=isNaN(parseFloat(Gt))?1:parseFloat(Gt),Gt*=Ht*Tt,{offset:jt,color:Lt.toRgb(),opacity:Gt}}function vt(wt){return{x1:wt.getAttribute("x1")||0,y1:wt.getAttribute("y1")||0,x2:wt.getAttribute("x2")||"100%",y2:wt.getAttribute("y2")||0}}function b(wt){return{x1:wt.getAttribute("fx")||wt.getAttribute("cx")||"50%",y1:wt.getAttribute("fy")||wt.getAttribute("cy")||"50%",r1:0,x2:wt.getAttribute("cx")||"50%",y2:wt.getAttribute("cy")||"50%",r2:wt.getAttribute("r")||"50%"}}var pt=s.util.object.clone;s.Gradient=s.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(wt){wt||(wt={}),wt.coords||(wt.coords={});var Tt,Ct=this;Object.keys(wt).forEach(function(jt){Ct[jt]=wt[jt]}),this.id?this.id+="_"+s.Object.__uid++:this.id=s.Object.__uid++,Tt={x1:wt.coords.x1||0,y1:wt.coords.y1||0,x2:wt.coords.x2||0,y2:wt.coords.y2||0},this.type==="radial"&&(Tt.r1=wt.coords.r1||0,Tt.r2=wt.coords.r2||0),this.coords=Tt,this.colorStops=wt.colorStops.slice()},addColorStop:function(wt){for(var Tt in wt){var Ct=new s.Color(wt[Tt]);this.colorStops.push({offset:parseFloat(Tt),color:Ct.toRgb(),opacity:Ct.getAlpha()})}return this},toObject:function(wt){var Tt={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return s.util.populateWithProperties(this,Tt,wt),Tt},toSVG:function(wt,Ht){var Ct=pt(this.coords,!0),jt,Lt,Ht=Ht||{},Gt,Kt,tr=pt(this.colorStops,!0),rr=Ct.r1>Ct.r2,Lr=this.gradientTransform?this.gradientTransform.concat():s.iMatrix.concat(),jr=-this.offsetX,Yr=-this.offsetY,An=!!Ht.additionalTransform,No=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(tr.sort(function(Qo,Mo){return Qo.offset-Mo.offset}),No==="objectBoundingBox"?(jr/=wt.width,Yr/=wt.height):(jr+=wt.width/2,Yr+=wt.height/2),wt.type==="path"&&this.gradientUnits!=="percentage"&&(jr-=wt.pathOffset.x,Yr-=wt.pathOffset.y),Lr[4]-=jr,Lr[5]-=Yr,Kt='id="SVGID_'+this.id+'" gradientUnits="'+No+'"',Kt+=' gradientTransform="'+(An?Ht.additionalTransform+" ":"")+s.util.matrixToSVG(Lr)+'" ',this.type==="linear"?Gt=["<linearGradient ",Kt,' x1="',Ct.x1,'" y1="',Ct.y1,'" x2="',Ct.x2,'" y2="',Ct.y2,`">
`]:this.type==="radial"&&(Gt=["<radialGradient ",Kt,' cx="',rr?Ct.x1:Ct.x2,'" cy="',rr?Ct.y1:Ct.y2,'" r="',rr?Ct.r1:Ct.r2,'" fx="',rr?Ct.x2:Ct.x1,'" fy="',rr?Ct.y2:Ct.y1,`">
`]),this.type==="radial"){if(rr)for(tr=tr.concat(),tr.reverse(),jt=0,Lt=tr.length;jt<Lt;jt++)tr[jt].offset=1-tr[jt].offset;var o0=Math.min(Ct.r1,Ct.r2);if(o0>0){var t0=Math.max(Ct.r1,Ct.r2),c0=o0/t0;for(jt=0,Lt=tr.length;jt<Lt;jt++)tr[jt].offset+=c0*(1-tr[jt].offset)}}for(jt=0,Lt=tr.length;jt<Lt;jt++){var n0=tr[jt];Gt.push("<stop ",'offset="',n0.offset*100+"%",'" style="stop-color:',n0.color,typeof n0.opacity<"u"?";stop-opacity: "+n0.opacity:";",`"/>
`)}return Gt.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),Gt.join("")},toLive:function(wt){var Tt,Ct=s.util.object.clone(this.coords),jt,Lt;if(this.type){for(this.type==="linear"?Tt=wt.createLinearGradient(Ct.x1,Ct.y1,Ct.x2,Ct.y2):this.type==="radial"&&(Tt=wt.createRadialGradient(Ct.x1,Ct.y1,Ct.r1,Ct.x2,Ct.y2,Ct.r2)),jt=0,Lt=this.colorStops.length;jt<Lt;jt++){var Ht=this.colorStops[jt].color,Gt=this.colorStops[jt].opacity,Kt=this.colorStops[jt].offset;typeof Gt<"u"&&(Ht=new s.Color(Ht).setAlpha(Gt).toRgba()),Tt.addColorStop(Kt,Ht)}return Tt}}}),s.util.object.extend(s.Gradient,{fromElement:function(wt,Tt,Ct,jt){var Lt=parseFloat(Ct)/(/%$/.test(Ct)?100:1);Lt=Lt<0?0:Lt>1?1:Lt,isNaN(Lt)&&(Lt=1);var Ht=wt.getElementsByTagName("stop"),Gt,Kt=wt.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",tr=wt.getAttribute("gradientTransform")||"",rr=[],Lr,jr,Yr=0,An=0,No;for(wt.nodeName==="linearGradient"||wt.nodeName==="LINEARGRADIENT"?(Gt="linear",Lr=vt(wt)):(Gt="radial",Lr=b(wt)),jr=Ht.length;jr--;)rr.push($t(Ht[jr],Lt));No=s.parseTransformAttribute(tr),st(Tt,Lr,jt,Kt),Kt==="pixels"&&(Yr=-Tt.left,An=-Tt.top);var o0=new s.Gradient({id:wt.getAttribute("id"),type:Gt,coords:Lr,colorStops:rr,gradientUnits:Kt,gradientTransform:No,offsetX:Yr,offsetY:An});return o0}});function st(wt,Tt,Ct,jt){var Lt,Ht;Object.keys(Tt).forEach(function(Gt){Lt=Tt[Gt],Lt==="Infinity"?Ht=1:Lt==="-Infinity"?Ht=0:(Ht=parseFloat(Tt[Gt],10),typeof Lt=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(Lt)&&(Ht*=.01,jt==="pixels"&&((Gt==="x1"||Gt==="x2"||Gt==="r2")&&(Ht*=Ct.viewBoxWidth||Ct.width),(Gt==="y1"||Gt==="y2")&&(Ht*=Ct.viewBoxHeight||Ct.height)))),Tt[Gt]=Ht})}}(),function(){var $t=s.util.toFixed;s.Pattern=s.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(vt,b){if(vt||(vt={}),this.id=s.Object.__uid++,this.setOptions(vt),!vt.source||vt.source&&typeof vt.source!="string"){b&&b(this);return}else{var pt=this;this.source=s.util.createImage(),s.util.loadImage(vt.source,function(st,wt){pt.source=st,b&&b(pt,wt)},null,this.crossOrigin)}},toObject:function(vt){var b=s.Object.NUM_FRACTION_DIGITS,pt,st;return typeof this.source.src=="string"?pt=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(pt=this.source.toDataURL()),st={type:"pattern",source:pt,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:$t(this.offsetX,b),offsetY:$t(this.offsetY,b),patternTransform:this.patternTransform?this.patternTransform.concat():null},s.util.populateWithProperties(this,st,vt),st},toSVG:function(vt){var b=typeof this.source=="function"?this.source():this.source,pt=b.width/vt.width,st=b.height/vt.height,wt=this.offsetX/vt.width,Tt=this.offsetY/vt.height,Ct="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(st=1,Tt&&(st+=Math.abs(Tt))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(pt=1,wt&&(pt+=Math.abs(wt))),b.src?Ct=b.src:b.toDataURL&&(Ct=b.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+wt+'" y="'+Tt+'" width="'+pt+'" height="'+st+`">
<image x="0" y="0" width="`+b.width+'" height="'+b.height+'" xlink:href="'+Ct+`"></image>
</pattern>
`},setOptions:function(vt){for(var b in vt)this[b]=vt[b]},toLive:function(vt){var b=this.source;return!b||typeof b.src<"u"&&(!b.complete||b.naturalWidth===0||b.naturalHeight===0)?"":vt.createPattern(b,this.repeat)}})}(),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.toFixed;if(vt.Shadow){vt.warn("fabric.Shadow is already defined.");return}vt.Shadow=vt.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(pt){typeof pt=="string"&&(pt=this._parseShadow(pt));for(var st in pt)this[st]=pt[st];this.id=vt.Object.__uid++},_parseShadow:function(pt){var st=pt.trim(),wt=vt.Shadow.reOffsetsAndBlur.exec(st)||[],Tt=st.replace(vt.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:Tt.trim(),offsetX:parseFloat(wt[1],10)||0,offsetY:parseFloat(wt[2],10)||0,blur:parseFloat(wt[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(pt){var st=40,wt=40,Tt=vt.Object.NUM_FRACTION_DIGITS,Ct=vt.util.rotateVector({x:this.offsetX,y:this.offsetY},vt.util.degreesToRadians(-pt.angle)),jt=20,Lt=new vt.Color(this.color);return pt.width&&pt.height&&(st=b((Math.abs(Ct.x)+this.blur)/pt.width,Tt)*100+jt,wt=b((Math.abs(Ct.y)+this.blur)/pt.height,Tt)*100+jt),pt.flipX&&(Ct.x*=-1),pt.flipY&&(Ct.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+wt+'%" height="'+(100+2*wt)+'%" x="-'+st+'%" width="'+(100+2*st)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+b(this.blur?this.blur/2:0,Tt)+`"></feGaussianBlur>
	<feOffset dx="`+b(Ct.x,Tt)+'" dy="'+b(Ct.y,Tt)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+Lt.toRgb()+'" flood-opacity="'+Lt.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var pt={},st=vt.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(wt){this[wt]!==st[wt]&&(pt[wt]=this[wt])},this),pt}}),vt.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(a),function(){if(s.StaticCanvas){s.warn("fabric.StaticCanvas is already defined.");return}var $t=s.util.object.extend,vt=s.util.getElementOffset,b=s.util.removeFromArray,pt=s.util.toFixed,st=s.util.transformPoint,wt=s.util.invertTransform,Tt=s.util.getNodeCanvas,Ct=s.util.createCanvasElement,jt=new Error("Could not initialize `canvas` element");s.StaticCanvas=s.util.createClass(s.CommonMethods,{initialize:function(Lt,Ht){Ht||(Ht={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(Lt,Ht)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:s.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(Lt,Ht){var Gt=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(Lt),this._initOptions(Ht),this.interactive||this._initRetinaScaling(),Ht.overlayImage&&this.setOverlayImage(Ht.overlayImage,Gt),Ht.backgroundImage&&this.setBackgroundImage(Ht.backgroundImage,Gt),Ht.backgroundColor&&this.setBackgroundColor(Ht.backgroundColor,Gt),Ht.overlayColor&&this.setOverlayColor(Ht.overlayColor,Gt),this.calcOffset()},_isRetinaScaling:function(){return s.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,s.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var Lt=s.devicePixelRatio;this.__initRetinaScaling(Lt,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(Lt,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(Lt,Ht,Gt){Ht.setAttribute("width",this.width*Lt),Ht.setAttribute("height",this.height*Lt),Gt.scale(Lt,Lt)},calcOffset:function(){return this._offset=vt(this.lowerCanvasEl),this},setOverlayImage:function(Lt,Ht,Gt){return this.__setBgOverlayImage("overlayImage",Lt,Ht,Gt)},setBackgroundImage:function(Lt,Ht,Gt){return this.__setBgOverlayImage("backgroundImage",Lt,Ht,Gt)},setOverlayColor:function(Lt,Ht){return this.__setBgOverlayColor("overlayColor",Lt,Ht)},setBackgroundColor:function(Lt,Ht){return this.__setBgOverlayColor("backgroundColor",Lt,Ht)},__setBgOverlayImage:function(Lt,Ht,Gt,Kt){return typeof Ht=="string"?s.util.loadImage(Ht,function(tr,rr){if(tr){var Lr=new s.Image(tr,Kt);this[Lt]=Lr,Lr.canvas=this}Gt&&Gt(tr,rr)},this,Kt&&Kt.crossOrigin):(Kt&&Ht.setOptions(Kt),this[Lt]=Ht,Ht&&(Ht.canvas=this),Gt&&Gt(Ht,!1)),this},__setBgOverlayColor:function(Lt,Ht,Gt){return this[Lt]=Ht,this._initGradient(Ht,Lt),this._initPattern(Ht,Lt,Gt),this},_createCanvasElement:function(){var Lt=Ct();if(!Lt||(Lt.style||(Lt.style={}),typeof Lt.getContext>"u"))throw jt;return Lt},_initOptions:function(Lt){var Ht=this.lowerCanvasEl;this._setOptions(Lt),this.width=this.width||parseInt(Ht.width,10)||0,this.height=this.height||parseInt(Ht.height,10)||0,this.lowerCanvasEl.style&&(Ht.width=this.width,Ht.height=this.height,Ht.style.width=this.width+"px",Ht.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(Lt){Lt&&Lt.getContext?this.lowerCanvasEl=Lt:this.lowerCanvasEl=s.util.getById(Lt)||this._createCanvasElement(),s.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(Lt,Ht){return this.setDimensions({width:Lt},Ht)},setHeight:function(Lt,Ht){return this.setDimensions({height:Lt},Ht)},setDimensions:function(Lt,Ht){var Gt;Ht=Ht||{};for(var Kt in Lt)Gt=Lt[Kt],Ht.cssOnly||(this._setBackstoreDimension(Kt,Lt[Kt]),Gt+="px",this.hasLostContext=!0),Ht.backstoreOnly||this._setCssDimension(Kt,Gt);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),Ht.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(Lt,Ht){return this.lowerCanvasEl[Lt]=Ht,this.upperCanvasEl&&(this.upperCanvasEl[Lt]=Ht),this.cacheCanvasEl&&(this.cacheCanvasEl[Lt]=Ht),this[Lt]=Ht,this},_setCssDimension:function(Lt,Ht){return this.lowerCanvasEl.style[Lt]=Ht,this.upperCanvasEl&&(this.upperCanvasEl.style[Lt]=Ht),this.wrapperEl&&(this.wrapperEl.style[Lt]=Ht),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(Lt){var Ht=this._activeObject,Gt=this.backgroundImage,Kt=this.overlayImage,tr,rr,Lr;for(this.viewportTransform=Lt,rr=0,Lr=this._objects.length;rr<Lr;rr++)tr=this._objects[rr],tr.group||tr.setCoords(!0);return Ht&&Ht.setCoords(),Gt&&Gt.setCoords(!0),Kt&&Kt.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(Lt,Ht){var Gt=Lt,Kt=this.viewportTransform.slice(0);Lt=st(Lt,wt(this.viewportTransform)),Kt[0]=Ht,Kt[3]=Ht;var tr=st(Lt,Kt);return Kt[4]+=Gt.x-tr.x,Kt[5]+=Gt.y-tr.y,this.setViewportTransform(Kt)},setZoom:function(Lt){return this.zoomToPoint(new s.Point(0,0),Lt),this},absolutePan:function(Lt){var Ht=this.viewportTransform.slice(0);return Ht[4]=-Lt.x,Ht[5]=-Lt.y,this.setViewportTransform(Ht)},relativePan:function(Lt){return this.absolutePan(new s.Point(-Lt.x-this.viewportTransform[4],-Lt.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(Lt){this.stateful&&Lt.setupState(),Lt._set("canvas",this),Lt.setCoords(),this.fire("object:added",{target:Lt}),Lt.fire("added")},_onObjectRemoved:function(Lt){this.fire("object:removed",{target:Lt}),Lt.fire("removed"),delete Lt.canvas},clearContext:function(Lt){return Lt.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var Lt=this.contextContainer;return this.renderCanvas(Lt,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=s.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var Lt={},Ht=this.width,Gt=this.height,Kt=wt(this.viewportTransform);return Lt.tl=st({x:0,y:0},Kt),Lt.br=st({x:Ht,y:Gt},Kt),Lt.tr=new s.Point(Lt.br.x,Lt.tl.y),Lt.bl=new s.Point(Lt.tl.x,Lt.br.y),this.vptCoords=Lt,Lt},cancelRequestedRender:function(){this.isRendering&&(s.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(Lt,Ht){var Gt=this.viewportTransform,Kt=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(Lt),s.util.setImageSmoothing(Lt,this.imageSmoothingEnabled),this.fire("before:render",{ctx:Lt}),this._renderBackground(Lt),Lt.save(),Lt.transform(Gt[0],Gt[1],Gt[2],Gt[3],Gt[4],Gt[5]),this._renderObjects(Lt,Ht),Lt.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(Lt),Kt&&(Kt.canvas=this,Kt.shouldCache(),Kt._transformDone=!0,Kt.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(Lt)),this._renderOverlay(Lt),this.controlsAboveOverlay&&this.interactive&&this.drawControls(Lt),this.fire("after:render",{ctx:Lt})},drawClipPathOnCanvas:function(Lt){var Ht=this.viewportTransform,Gt=this.clipPath;Lt.save(),Lt.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5]),Lt.globalCompositeOperation="destination-in",Gt.transform(Lt),Lt.scale(1/Gt.zoomX,1/Gt.zoomY),Lt.drawImage(Gt._cacheCanvas,-Gt.cacheTranslationX,-Gt.cacheTranslationY),Lt.restore()},_renderObjects:function(Lt,Ht){var Gt,Kt;for(Gt=0,Kt=Ht.length;Gt<Kt;++Gt)Ht[Gt]&&Ht[Gt].render(Lt)},_renderBackgroundOrOverlay:function(Lt,Ht){var Gt=this[Ht+"Color"],Kt=this[Ht+"Image"],tr=this.viewportTransform,rr=this[Ht+"Vpt"];if(!(!Gt&&!Kt)){if(Gt){Lt.save(),Lt.beginPath(),Lt.moveTo(0,0),Lt.lineTo(this.width,0),Lt.lineTo(this.width,this.height),Lt.lineTo(0,this.height),Lt.closePath(),Lt.fillStyle=Gt.toLive?Gt.toLive(Lt,this):Gt,rr&&Lt.transform(tr[0],tr[1],tr[2],tr[3],tr[4],tr[5]),Lt.transform(1,0,0,1,Gt.offsetX||0,Gt.offsetY||0);var Lr=Gt.gradientTransform||Gt.patternTransform;Lr&&Lt.transform(Lr[0],Lr[1],Lr[2],Lr[3],Lr[4],Lr[5]),Lt.fill(),Lt.restore()}Kt&&(Lt.save(),rr&&Lt.transform(tr[0],tr[1],tr[2],tr[3],tr[4],tr[5]),Kt.render(Lt),Lt.restore())}},_renderBackground:function(Lt){this._renderBackgroundOrOverlay(Lt,"background")},_renderOverlay:function(Lt){this._renderBackgroundOrOverlay(Lt,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new s.Point(this.width/2,this.height/2)},centerObjectH:function(Lt){return this._centerObject(Lt,new s.Point(this.getCenterPoint().x,Lt.getCenterPoint().y))},centerObjectV:function(Lt){return this._centerObject(Lt,new s.Point(Lt.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(Lt){var Ht=this.getCenterPoint();return this._centerObject(Lt,Ht)},viewportCenterObject:function(Lt){var Ht=this.getVpCenter();return this._centerObject(Lt,Ht)},viewportCenterObjectH:function(Lt){var Ht=this.getVpCenter();return this._centerObject(Lt,new s.Point(Ht.x,Lt.getCenterPoint().y)),this},viewportCenterObjectV:function(Lt){var Ht=this.getVpCenter();return this._centerObject(Lt,new s.Point(Lt.getCenterPoint().x,Ht.y))},getVpCenter:function(){var Lt=this.getCenterPoint(),Ht=wt(this.viewportTransform);return st(Lt,Ht)},_centerObject:function(Lt,Ht){return Lt.setPositionByOrigin(Ht,"center","center"),Lt.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(Lt){return this.toDatalessObject(Lt)},toObject:function(Lt){return this._toObjectMethod("toObject",Lt)},toDatalessObject:function(Lt){return this._toObjectMethod("toDatalessObject",Lt)},_toObjectMethod:function(Lt,Ht){var Gt=this.clipPath,Kt={version:s.version,objects:this._toObjects(Lt,Ht)};return Gt&&!Gt.excludeFromExport&&(Kt.clipPath=this._toObject(this.clipPath,Lt,Ht)),$t(Kt,this.__serializeBgOverlay(Lt,Ht)),s.util.populateWithProperties(this,Kt,Ht),Kt},_toObjects:function(Lt,Ht){return this._objects.filter(function(Gt){return!Gt.excludeFromExport}).map(function(Gt){return this._toObject(Gt,Lt,Ht)},this)},_toObject:function(Lt,Ht,Gt){var Kt;this.includeDefaultValues||(Kt=Lt.includeDefaultValues,Lt.includeDefaultValues=!1);var tr=Lt[Ht](Gt);return this.includeDefaultValues||(Lt.includeDefaultValues=Kt),tr},__serializeBgOverlay:function(Lt,Ht){var Gt={},Kt=this.backgroundImage,tr=this.overlayImage,rr=this.backgroundColor,Lr=this.overlayColor;return rr&&rr.toObject?rr.excludeFromExport||(Gt.background=rr.toObject(Ht)):rr&&(Gt.background=rr),Lr&&Lr.toObject?Lr.excludeFromExport||(Gt.overlay=Lr.toObject(Ht)):Lr&&(Gt.overlay=Lr),Kt&&!Kt.excludeFromExport&&(Gt.backgroundImage=this._toObject(Kt,Lt,Ht)),tr&&!tr.excludeFromExport&&(Gt.overlayImage=this._toObject(tr,Lt,Ht)),Gt},svgViewportTransformation:!0,toSVG:function(Lt,Ht){Lt||(Lt={}),Lt.reviver=Ht;var Gt=[];return this._setSVGPreamble(Gt,Lt),this._setSVGHeader(Gt,Lt),this.clipPath&&Gt.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(Gt,"background"),this._setSVGBgOverlayImage(Gt,"backgroundImage",Ht),this._setSVGObjects(Gt,Ht),this.clipPath&&Gt.push(`</g>
`),this._setSVGBgOverlayColor(Gt,"overlay"),this._setSVGBgOverlayImage(Gt,"overlayImage",Ht),Gt.push("</svg>"),Gt.join("")},_setSVGPreamble:function(Lt,Ht){Ht.suppressPreamble||Lt.push('<?xml version="1.0" encoding="',Ht.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(Lt,Ht){var Gt=Ht.width||this.width,Kt=Ht.height||this.height,tr,rr='viewBox="0 0 '+this.width+" "+this.height+'" ',Lr=s.Object.NUM_FRACTION_DIGITS;Ht.viewBox?rr='viewBox="'+Ht.viewBox.x+" "+Ht.viewBox.y+" "+Ht.viewBox.width+" "+Ht.viewBox.height+'" ':this.svgViewportTransformation&&(tr=this.viewportTransform,rr='viewBox="'+pt(-tr[4]/tr[0],Lr)+" "+pt(-tr[5]/tr[3],Lr)+" "+pt(this.width/tr[0],Lr)+" "+pt(this.height/tr[3],Lr)+'" '),Lt.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',Gt,'" ','height="',Kt,'" ',rr,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",s.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(Ht),`</defs>
`)},createSVGClipPathMarkup:function(Lt){var Ht=this.clipPath;return Ht?(Ht.clipPathId="CLIPPATH_"+s.Object.__uid++,'<clipPath id="'+Ht.clipPathId+`" >
`+this.clipPath.toClipPathSVG(Lt.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var Lt=this,Ht=["background","overlay"].map(function(Gt){var Kt=Lt[Gt+"Color"];if(Kt&&Kt.toLive){var tr=Lt[Gt+"Vpt"],rr=Lt.viewportTransform,Lr={width:Lt.width/(tr?rr[0]:1),height:Lt.height/(tr?rr[3]:1)};return Kt.toSVG(Lr,{additionalTransform:tr?s.util.matrixToSVG(rr):""})}});return Ht.join("")},createSVGFontFacesMarkup:function(){var Lt="",Ht={},Gt,Kt,tr,rr,Lr,jr,Yr,An,No,o0=s.fontPaths,t0=[];for(this._objects.forEach(function n0(Qo){t0.push(Qo),Qo._objects&&Qo._objects.forEach(n0)}),An=0,No=t0.length;An<No;An++)if(Gt=t0[An],Kt=Gt.fontFamily,!(Gt.type.indexOf("text")===-1||Ht[Kt]||!o0[Kt])&&(Ht[Kt]=!0,!!Gt.styles)){tr=Gt.styles;for(Lr in tr){rr=tr[Lr];for(Yr in rr)jr=rr[Yr],Kt=jr.fontFamily,!Ht[Kt]&&o0[Kt]&&(Ht[Kt]=!0)}}for(var c0 in Ht)Lt+=[`		@font-face {
`,"			font-family: '",c0,`';
`,"			src: url('",o0[c0],`');
`,`		}
`].join("");return Lt&&(Lt=['	<style type="text/css">',`<![CDATA[
`,Lt,"]]>",`</style>
`].join("")),Lt},_setSVGObjects:function(Lt,Ht){var Gt,Kt,tr,rr=this._objects;for(Kt=0,tr=rr.length;Kt<tr;Kt++)Gt=rr[Kt],!Gt.excludeFromExport&&this._setSVGObject(Lt,Gt,Ht)},_setSVGObject:function(Lt,Ht,Gt){Lt.push(Ht.toSVG(Gt))},_setSVGBgOverlayImage:function(Lt,Ht,Gt){this[Ht]&&!this[Ht].excludeFromExport&&this[Ht].toSVG&&Lt.push(this[Ht].toSVG(Gt))},_setSVGBgOverlayColor:function(Lt,Ht){var Gt=this[Ht+"Color"],Kt=this.viewportTransform,tr=this.width,rr=this.height;if(Gt)if(Gt.toLive){var Lr=Gt.repeat,jr=s.util.invertTransform(Kt),Yr=this[Ht+"Vpt"],An=Yr?s.util.matrixToSVG(jr):"";Lt.push('<rect transform="'+An+" translate(",tr/2,",",rr/2,')"',' x="',Gt.offsetX-tr/2,'" y="',Gt.offsetY-rr/2,'" ','width="',Lr==="repeat-y"||Lr==="no-repeat"?Gt.source.width:tr,'" height="',Lr==="repeat-x"||Lr==="no-repeat"?Gt.source.height:rr,'" fill="url(#SVGID_'+Gt.id+')"',`></rect>
`)}else Lt.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',Gt,'"',`></rect>
`)},sendToBack:function(Lt){if(!Lt)return this;var Ht=this._activeObject,Gt,Kt,tr;if(Lt===Ht&&Lt.type==="activeSelection")for(tr=Ht._objects,Gt=tr.length;Gt--;)Kt=tr[Gt],b(this._objects,Kt),this._objects.unshift(Kt);else b(this._objects,Lt),this._objects.unshift(Lt);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(Lt){if(!Lt)return this;var Ht=this._activeObject,Gt,Kt,tr;if(Lt===Ht&&Lt.type==="activeSelection")for(tr=Ht._objects,Gt=0;Gt<tr.length;Gt++)Kt=tr[Gt],b(this._objects,Kt),this._objects.push(Kt);else b(this._objects,Lt),this._objects.push(Lt);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(Lt,Ht){if(!Lt)return this;var Gt=this._activeObject,Kt,tr,rr,Lr,jr,Yr=0;if(Lt===Gt&&Lt.type==="activeSelection")for(jr=Gt._objects,Kt=0;Kt<jr.length;Kt++)tr=jr[Kt],rr=this._objects.indexOf(tr),rr>0+Yr&&(Lr=rr-1,b(this._objects,tr),this._objects.splice(Lr,0,tr)),Yr++;else rr=this._objects.indexOf(Lt),rr!==0&&(Lr=this._findNewLowerIndex(Lt,rr,Ht),b(this._objects,Lt),this._objects.splice(Lr,0,Lt));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(Lt,Ht,Gt){var Kt,tr;if(Gt)for(Kt=Ht,tr=Ht-1;tr>=0;--tr){var rr=Lt.intersectsWithObject(this._objects[tr])||Lt.isContainedWithinObject(this._objects[tr])||this._objects[tr].isContainedWithinObject(Lt);if(rr){Kt=tr;break}}else Kt=Ht-1;return Kt},bringForward:function(Lt,Ht){if(!Lt)return this;var Gt=this._activeObject,Kt,tr,rr,Lr,jr,Yr=0;if(Lt===Gt&&Lt.type==="activeSelection")for(jr=Gt._objects,Kt=jr.length;Kt--;)tr=jr[Kt],rr=this._objects.indexOf(tr),rr<this._objects.length-1-Yr&&(Lr=rr+1,b(this._objects,tr),this._objects.splice(Lr,0,tr)),Yr++;else rr=this._objects.indexOf(Lt),rr!==this._objects.length-1&&(Lr=this._findNewUpperIndex(Lt,rr,Ht),b(this._objects,Lt),this._objects.splice(Lr,0,Lt));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(Lt,Ht,Gt){var Kt,tr,rr;if(Gt)for(Kt=Ht,tr=Ht+1,rr=this._objects.length;tr<rr;++tr){var Lr=Lt.intersectsWithObject(this._objects[tr])||Lt.isContainedWithinObject(this._objects[tr])||this._objects[tr].isContainedWithinObject(Lt);if(Lr){Kt=tr;break}}else Kt=Ht+1;return Kt},moveTo:function(Lt,Ht){return b(this._objects,Lt),this._objects.splice(Ht,0,Lt),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(s.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(Lt){Lt.dispose&&Lt.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),s.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),s.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),$t(s.StaticCanvas.prototype,s.Observable),$t(s.StaticCanvas.prototype,s.Collection),$t(s.StaticCanvas.prototype,s.DataURLExporter),$t(s.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(Lt){var Ht=Ct();if(!Ht||!Ht.getContext)return null;var Gt=Ht.getContext("2d");if(!Gt)return null;switch(Lt){case"setLineDash":return typeof Gt.setLineDash<"u";default:return null}}}),s.StaticCanvas.prototype.toJSON=s.StaticCanvas.prototype.toObject,s.isLikelyNode&&(s.StaticCanvas.prototype.createPNGStream=function(){var Lt=Tt(this.lowerCanvasEl);return Lt&&Lt.createPNGStream()},s.StaticCanvas.prototype.createJPEGStream=function(Lt){var Ht=Tt(this.lowerCanvasEl);return Ht&&Ht.createJPEGStream(Lt)})}(),s.BaseBrush=s.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function($t){$t.strokeStyle=this.color,$t.lineWidth=this.width,$t.lineCap=this.strokeLineCap,$t.miterLimit=this.strokeMiterLimit,$t.lineJoin=this.strokeLineJoin,$t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function($t){var vt=this.canvas.viewportTransform;$t.save(),$t.transform(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5])},_setShadow:function(){if(this.shadow){var $t=this.canvas,vt=this.shadow,b=$t.contextTop,pt=$t.getZoom();$t&&$t._isRetinaScaling()&&(pt*=s.devicePixelRatio),b.shadowColor=vt.color,b.shadowBlur=vt.blur*pt,b.shadowOffsetX=vt.offsetX*pt,b.shadowOffsetY=vt.offsetY*pt}},needsFullRender:function(){var $t=new s.Color(this.color);return $t.getAlpha()<1||!!this.shadow},_resetShadow:function(){var $t=this.canvas.contextTop;$t.shadowColor="",$t.shadowBlur=$t.shadowOffsetX=$t.shadowOffsetY=0},_isOutSideCanvas:function($t){return $t.x<0||$t.x>this.canvas.getWidth()||$t.y<0||$t.y>this.canvas.getHeight()}}),function(){s.PencilBrush=s.util.createClass(s.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function($t){this.canvas=$t,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function($t,vt,b){var pt=vt.midPointFrom(b);return $t.quadraticCurveTo(vt.x,vt.y,pt.x,pt.y),pt},onMouseDown:function($t,vt){this.canvas._isMainEvent(vt.e)&&(this.drawStraightLine=vt.e[this.straightLineKey],this._prepareForDrawing($t),this._captureDrawingPath($t),this._render())},onMouseMove:function($t,vt){if(this.canvas._isMainEvent(vt.e)&&(this.drawStraightLine=vt.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas($t))&&this._captureDrawingPath($t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var b=this._points,pt=b.length,st=this.canvas.contextTop;this._saveAndTransform(st),this.oldEnd&&(st.beginPath(),st.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(st,b[pt-2],b[pt-1],!0),st.stroke(),st.restore()}},onMouseUp:function($t){return this.canvas._isMainEvent($t.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function($t){var vt=new s.Point($t.x,$t.y);this._reset(),this._addPoint(vt),this.canvas.contextTop.moveTo(vt.x,vt.y)},_addPoint:function($t){return this._points.length>1&&$t.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push($t),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function($t){var vt=new s.Point($t.x,$t.y);return this._addPoint(vt)},_render:function($t){var vt,b,pt=this._points[0],st=this._points[1];if($t=$t||this.canvas.contextTop,this._saveAndTransform($t),$t.beginPath(),this._points.length===2&&pt.x===st.x&&pt.y===st.y){var wt=this.width/1e3;pt=new s.Point(pt.x,pt.y),st=new s.Point(st.x,st.y),pt.x-=wt,st.x+=wt}for($t.moveTo(pt.x,pt.y),vt=1,b=this._points.length;vt<b;vt++)this._drawSegment($t,pt,st),pt=this._points[vt],st=this._points[vt+1];$t.lineTo(pt.x,pt.y),$t.stroke(),$t.restore()},convertPointsToSVGPath:function($t){var vt=this.width/1e3;return s.util.getSmoothPathFromPoints($t,vt)},_isEmptySVGPath:function($t){var vt=s.util.joinPath($t);return vt==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function($t){var vt=new s.Path($t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,vt.shadow=new s.Shadow(this.shadow)),vt},decimatePoints:function($t,vt){if($t.length<=2)return $t;var b=this.canvas.getZoom(),pt=Math.pow(vt/b,2),st,wt=$t.length-1,Tt=$t[0],Ct=[Tt],jt;for(st=1;st<wt-1;st++)jt=Math.pow(Tt.x-$t[st].x,2)+Math.pow(Tt.y-$t[st].y,2),jt>=pt&&(Tt=$t[st],Ct.push(Tt));return Ct.push($t[wt]),Ct},_finalizeAndAddPath:function(){var $t=this.canvas.contextTop;$t.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var vt=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(vt)){this.canvas.requestRenderAll();return}var b=this.createPath(vt);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:b}),this.canvas.add(b),this.canvas.requestRenderAll(),b.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:b})}})}(),s.CircleBrush=s.util.createClass(s.BaseBrush,{width:10,initialize:function($t){this.canvas=$t,this.points=[]},drawDot:function($t){var vt=this.addPoint($t),b=this.canvas.contextTop;this._saveAndTransform(b),this.dot(b,vt),b.restore()},dot:function($t,vt){$t.fillStyle=vt.fill,$t.beginPath(),$t.arc(vt.x,vt.y,vt.radius,0,Math.PI*2,!1),$t.closePath(),$t.fill()},onMouseDown:function($t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot($t)},_render:function(){var $t=this.canvas.contextTop,vt,b,pt=this.points;for(this._saveAndTransform($t),vt=0,b=pt.length;vt<b;vt++)this.dot($t,pt[vt]);$t.restore()},onMouseMove:function($t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas($t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint($t),this._render()):this.drawDot($t))},onMouseUp:function(){var $t=this.canvas.renderOnAddRemove,vt,b;this.canvas.renderOnAddRemove=!1;var pt=[];for(vt=0,b=this.points.length;vt<b;vt++){var st=this.points[vt],wt=new s.Circle({radius:st.radius,left:st.x,top:st.y,originX:"center",originY:"center",fill:st.fill});this.shadow&&(wt.shadow=new s.Shadow(this.shadow)),pt.push(wt)}var Tt=new s.Group(pt);Tt.canvas=this.canvas,this.canvas.fire("before:path:created",{path:Tt}),this.canvas.add(Tt),this.canvas.fire("path:created",{path:Tt}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=$t,this.canvas.requestRenderAll()},addPoint:function($t){var vt=new s.Point($t.x,$t.y),b=s.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,pt=new s.Color(this.color).setAlpha(s.util.getRandomInt(0,100)/100).toRgba();return vt.radius=b,vt.fill=pt,this.points.push(vt),vt}}),s.SprayBrush=s.util.createClass(s.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function($t){this.canvas=$t,this.sprayChunks=[]},onMouseDown:function($t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk($t),this.render(this.sprayChunkPoints)},onMouseMove:function($t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas($t)||(this.addSprayChunk($t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var $t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var vt=[],b=0,pt=this.sprayChunks.length;b<pt;b++)for(var st=this.sprayChunks[b],wt=0,Tt=st.length;wt<Tt;wt++){var Ct=new s.Rect({width:st[wt].width,height:st[wt].width,left:st[wt].x+1,top:st[wt].y+1,originX:"center",originY:"center",fill:this.color});vt.push(Ct)}this.optimizeOverlapping&&(vt=this._getOptimizedRects(vt));var jt=new s.Group(vt);this.shadow&&jt.set("shadow",new s.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:jt}),this.canvas.add(jt),this.canvas.fire("path:created",{path:jt}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=$t,this.canvas.requestRenderAll()},_getOptimizedRects:function($t){var vt={},b,pt,st;for(pt=0,st=$t.length;pt<st;pt++)b=$t[pt].left+""+$t[pt].top,vt[b]||(vt[b]=$t[pt]);var wt=[];for(b in vt)wt.push(vt[b]);return wt},render:function($t){var vt=this.canvas.contextTop,b,pt;for(vt.fillStyle=this.color,this._saveAndTransform(vt),b=0,pt=$t.length;b<pt;b++){var st=$t[b];typeof st.opacity<"u"&&(vt.globalAlpha=st.opacity),vt.fillRect(st.x,st.y,st.width,st.width)}vt.restore()},_render:function(){var $t=this.canvas.contextTop,vt,b;for($t.fillStyle=this.color,this._saveAndTransform($t),vt=0,b=this.sprayChunks.length;vt<b;vt++)this.render(this.sprayChunks[vt]);$t.restore()},addSprayChunk:function($t){this.sprayChunkPoints=[];var vt,b,pt,st=this.width/2,wt;for(wt=0;wt<this.density;wt++){vt=s.util.getRandomInt($t.x-st,$t.x+st),b=s.util.getRandomInt($t.y-st,$t.y+st),this.dotWidthVariance?pt=s.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):pt=this.dotWidth;var Tt=new s.Point(vt,b);Tt.width=pt,this.randomOpacity&&(Tt.opacity=s.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(Tt)}this.sprayChunks.push(this.sprayChunkPoints)}}),s.PatternBrush=s.util.createClass(s.PencilBrush,{getPatternSrc:function(){var $t=20,vt=5,b=s.util.createCanvasElement(),pt=b.getContext("2d");return b.width=b.height=$t+vt,pt.fillStyle=this.color,pt.beginPath(),pt.arc($t/2,$t/2,$t/2,0,Math.PI*2,!1),pt.closePath(),pt.fill(),b},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function($t){return $t.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function($t){this.callSuper("_setBrushStyles",$t),$t.strokeStyle=this.getPattern($t)},createPath:function($t){var vt=this.callSuper("createPath",$t),b=vt._getLeftTopCoords().scalarAdd(vt.strokeWidth/2);return vt.stroke=new s.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-b.x,offsetY:-b.y}),vt}}),function(){var $t=s.util.getPointer,vt=s.util.degreesToRadians,b=s.util.isTouchEvent;s.Canvas=s.util.createClass(s.StaticCanvas,{initialize:function(st,wt){wt||(wt={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(st,wt),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=s.PencilBrush&&new s.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var st=this.getActiveObjects(),wt,Tt,Ct;if(st.length>0&&!this.preserveObjectStacking){Tt=[],Ct=[];for(var jt=0,Lt=this._objects.length;jt<Lt;jt++)wt=this._objects[jt],st.indexOf(wt)===-1?Tt.push(wt):Ct.push(wt);st.length>1&&(this._activeObject._objects=Ct),Tt.push.apply(Tt,Ct)}else Tt=this._objects;return Tt},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var st=this.contextContainer;return this.renderCanvas(st,this._chooseObjectsToRender()),this},renderTopLayer:function(st){st.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(st),this.contextTopDirty=!0),st.restore()},renderTop:function(){var st=this.contextTop;return this.clearContext(st),this.renderTopLayer(st),this.fire("after:render"),this},_normalizePointer:function(st,wt){var Tt=st.calcTransformMatrix(),Ct=s.util.invertTransform(Tt),jt=this.restorePointerVpt(wt);return s.util.transformPoint(jt,Ct)},isTargetTransparent:function(st,wt,Tt){if(st.shouldCache()&&st._cacheCanvas&&st!==this._activeObject){var Ct=this._normalizePointer(st,{x:wt,y:Tt}),jt=Math.max(st.cacheTranslationX+Ct.x*st.zoomX,0),Lt=Math.max(st.cacheTranslationY+Ct.y*st.zoomY,0),tr=s.util.isTransparent(st._cacheContext,Math.round(jt),Math.round(Lt),this.targetFindTolerance);return tr}var Ht=this.contextCache,Gt=st.selectionBackgroundColor,Kt=this.viewportTransform;st.selectionBackgroundColor="",this.clearContext(Ht),Ht.save(),Ht.transform(Kt[0],Kt[1],Kt[2],Kt[3],Kt[4],Kt[5]),st.render(Ht),Ht.restore(),st.selectionBackgroundColor=Gt;var tr=s.util.isTransparent(Ht,wt,Tt,this.targetFindTolerance);return tr},_isSelectionKeyPressed:function(st){var wt=!1;return Array.isArray(this.selectionKey)?wt=!!this.selectionKey.find(function(Tt){return st[Tt]===!0}):wt=st[this.selectionKey],wt},_shouldClearSelection:function(st,wt){var Tt=this.getActiveObjects(),Ct=this._activeObject;return!wt||wt&&Ct&&Tt.length>1&&Tt.indexOf(wt)===-1&&Ct!==wt&&!this._isSelectionKeyPressed(st)||wt&&!wt.evented||wt&&!wt.selectable&&Ct&&Ct!==wt},_shouldCenterTransform:function(st,wt,Tt){if(st){var Ct;return wt==="scale"||wt==="scaleX"||wt==="scaleY"||wt==="resizing"?Ct=this.centeredScaling||st.centeredScaling:wt==="rotate"&&(Ct=this.centeredRotation||st.centeredRotation),Ct?!Tt:Tt}},_getOriginFromCorner:function(st,wt){var Tt={x:st.originX,y:st.originY};return wt==="ml"||wt==="tl"||wt==="bl"?Tt.x="right":(wt==="mr"||wt==="tr"||wt==="br")&&(Tt.x="left"),wt==="tl"||wt==="mt"||wt==="tr"?Tt.y="bottom":(wt==="bl"||wt==="mb"||wt==="br")&&(Tt.y="top"),Tt},_getActionFromCorner:function(st,wt,Tt,Ct){if(!wt||!st)return"drag";var jt=Ct.controls[wt];return jt.getActionName(Tt,jt,Ct)},_setupCurrentTransform:function(st,wt,Tt){if(wt){var Ct=this.getPointer(st),jt=wt.__corner,Lt=wt.controls[jt],Ht=Tt&&jt?Lt.getActionHandler(st,wt,Lt):s.controlsUtils.dragHandler,Gt=this._getActionFromCorner(Tt,jt,st,wt),Kt=this._getOriginFromCorner(wt,jt),tr=st[this.centeredKey],rr={target:wt,action:Gt,actionHandler:Ht,corner:jt,scaleX:wt.scaleX,scaleY:wt.scaleY,skewX:wt.skewX,skewY:wt.skewY,offsetX:Ct.x-wt.left,offsetY:Ct.y-wt.top,originX:Kt.x,originY:Kt.y,ex:Ct.x,ey:Ct.y,lastX:Ct.x,lastY:Ct.y,theta:vt(wt.angle),width:wt.width*wt.scaleX,shiftKey:st.shiftKey,altKey:tr,original:s.util.saveObjectTransform(wt)};this._shouldCenterTransform(wt,Gt,tr)&&(rr.originX="center",rr.originY="center"),rr.original.originX=Kt.x,rr.original.originY=Kt.y,this._currentTransform=rr,this._beforeTransform(st)}},setCursor:function(st){this.upperCanvasEl.style.cursor=st},_drawSelection:function(st){var wt=this._groupSelector,Tt=new s.Point(wt.ex,wt.ey),Ct=s.util.transformPoint(Tt,this.viewportTransform),jt=new s.Point(wt.ex+wt.left,wt.ey+wt.top),Lt=s.util.transformPoint(jt,this.viewportTransform),Ht=Math.min(Ct.x,Lt.x),Gt=Math.min(Ct.y,Lt.y),Kt=Math.max(Ct.x,Lt.x),tr=Math.max(Ct.y,Lt.y),rr=this.selectionLineWidth/2;this.selectionColor&&(st.fillStyle=this.selectionColor,st.fillRect(Ht,Gt,Kt-Ht,tr-Gt)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(st.lineWidth=this.selectionLineWidth,st.strokeStyle=this.selectionBorderColor,Ht+=rr,Gt+=rr,Kt-=rr,tr-=rr,s.Object.prototype._setLineDash.call(this,st,this.selectionDashArray),st.strokeRect(Ht,Gt,Kt-Ht,tr-Gt))},findTarget:function(st,wt){if(!this.skipTargetFind){var Tt=!0,Ct=this.getPointer(st,Tt),jt=this._activeObject,Lt=this.getActiveObjects(),Ht,Gt,Kt=b(st),tr=Lt.length>1&&!wt||Lt.length===1;if(this.targets=[],tr&&jt._findTargetCorner(Ct,Kt)||Lt.length>1&&!wt&&jt===this._searchPossibleTargets([jt],Ct))return jt;if(Lt.length===1&&jt===this._searchPossibleTargets([jt],Ct))if(this.preserveObjectStacking)Ht=jt,Gt=this.targets,this.targets=[];else return jt;var rr=this._searchPossibleTargets(this._objects,Ct);return st[this.altSelectionKey]&&rr&&Ht&&rr!==Ht&&(rr=Ht,this.targets=Gt),rr}},_checkTarget:function(st,wt,Tt){if(wt&&wt.visible&&wt.evented&&wt.containsPoint(st))if((this.perPixelTargetFind||wt.perPixelTargetFind)&&!wt.isEditing){var Ct=this.isTargetTransparent(wt,Tt.x,Tt.y);if(!Ct)return!0}else return!0},_searchPossibleTargets:function(st,wt){for(var Tt,Ct=st.length,jt;Ct--;){var Lt=st[Ct],Ht=Lt.group?this._normalizePointer(Lt.group,wt):wt;if(this._checkTarget(Ht,Lt,wt)){Tt=st[Ct],Tt.subTargetCheck&&Tt instanceof s.Group&&(jt=this._searchPossibleTargets(Tt._objects,wt),jt&&this.targets.push(jt));break}}return Tt},restorePointerVpt:function(st){return s.util.transformPoint(st,s.util.invertTransform(this.viewportTransform))},getPointer:function(st,wt){if(this._absolutePointer&&!wt)return this._absolutePointer;if(this._pointer&&wt)return this._pointer;var Tt=$t(st),Ct=this.upperCanvasEl,jt=Ct.getBoundingClientRect(),Lt=jt.width||0,Ht=jt.height||0,Gt;(!Lt||!Ht)&&("top"in jt&&"bottom"in jt&&(Ht=Math.abs(jt.top-jt.bottom)),"right"in jt&&"left"in jt&&(Lt=Math.abs(jt.right-jt.left))),this.calcOffset(),Tt.x=Tt.x-this._offset.left,Tt.y=Tt.y-this._offset.top,wt||(Tt=this.restorePointerVpt(Tt));var Kt=this.getRetinaScaling();return Kt!==1&&(Tt.x/=Kt,Tt.y/=Kt),Lt===0||Ht===0?Gt={width:1,height:1}:Gt={width:Ct.width/Lt,height:Ct.height/Ht},{x:Tt.x*Gt.width,y:Tt.y*Gt.height}},_createUpperCanvas:function(){var st=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),wt=this.lowerCanvasEl,Tt=this.upperCanvasEl;Tt?Tt.className="":(Tt=this._createCanvasElement(),this.upperCanvasEl=Tt),s.util.addClass(Tt,"upper-canvas "+st),this.wrapperEl.appendChild(Tt),this._copyCanvasStyle(wt,Tt),this._applyCanvasStyle(Tt),this.contextTop=Tt.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=s.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),s.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),s.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(st){var wt=this.width||st.width,Tt=this.height||st.height;s.util.setStyle(st,{position:"absolute",width:wt+"px",height:Tt+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),st.width=wt,st.height=Tt,s.util.makeElementUnselectable(st)},_copyCanvasStyle:function(st,wt){wt.style.cssText=st.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var st=this._activeObject;return st?st.type==="activeSelection"&&st._objects?st._objects.slice(0):[st]:[]},_onObjectRemoved:function(st){st===this._activeObject&&(this.fire("before:selection:cleared",{target:st}),this._discardActiveObject(),this.fire("selection:cleared",{target:st}),st.fire("deselected")),st===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",st)},_fireSelectionEvents:function(st,wt){var Tt=!1,Ct=this.getActiveObjects(),jt=[],Lt=[];st.forEach(function(Ht){Ct.indexOf(Ht)===-1&&(Tt=!0,Ht.fire("deselected",{e:wt,target:Ht}),Lt.push(Ht))}),Ct.forEach(function(Ht){st.indexOf(Ht)===-1&&(Tt=!0,Ht.fire("selected",{e:wt,target:Ht}),jt.push(Ht))}),st.length>0&&Ct.length>0?Tt&&this.fire("selection:updated",{e:wt,selected:jt,deselected:Lt}):Ct.length>0?this.fire("selection:created",{e:wt,selected:jt}):st.length>0&&this.fire("selection:cleared",{e:wt,deselected:Lt})},setActiveObject:function(st,wt){var Tt=this.getActiveObjects();return this._setActiveObject(st,wt),this._fireSelectionEvents(Tt,wt),this},_setActiveObject:function(st,wt){return this._activeObject===st||!this._discardActiveObject(wt,st)||st.onSelect({e:wt})?!1:(this._activeObject=st,!0)},_discardActiveObject:function(st,wt){var Tt=this._activeObject;if(Tt){if(Tt.onDeselect({e:st,object:wt}))return!1;this._activeObject=null}return!0},discardActiveObject:function(st){var wt=this.getActiveObjects(),Tt=this.getActiveObject();return wt.length&&this.fire("before:selection:cleared",{target:Tt,e:st}),this._discardActiveObject(st),this._fireSelectionEvents(wt,st),this},dispose:function(){var st=this.wrapperEl;return this.removeListeners(),st.removeChild(this.upperCanvasEl),st.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(wt){s.util.cleanUpJsdomNode(this[wt]),this[wt]=void 0}).bind(this)),st.parentNode&&st.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,s.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(st){var wt=this._activeObject;wt&&wt._renderControls(st)},_toObject:function(st,wt,Tt){var Ct=this._realizeGroupTransformOnObject(st),jt=this.callSuper("_toObject",st,wt,Tt);return this._unwindGroupTransformOnObject(st,Ct),jt},_realizeGroupTransformOnObject:function(st){if(st.group&&st.group.type==="activeSelection"&&this._activeObject===st.group){var wt=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],Tt={};return wt.forEach(function(Ct){Tt[Ct]=st[Ct]}),s.util.addTransformToObject(st,this._activeObject.calcOwnMatrix()),Tt}else return null},_unwindGroupTransformOnObject:function(st,wt){wt&&st.set(wt)},_setSVGObject:function(st,wt,Tt){var Ct=this._realizeGroupTransformOnObject(wt);this.callSuper("_setSVGObject",st,wt,Tt),this._unwindGroupTransformOnObject(wt,Ct)},setViewportTransform:function(st){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),s.StaticCanvas.prototype.setViewportTransform.call(this,st)}});for(var pt in s.StaticCanvas)pt!=="prototype"&&(s.Canvas[pt]=s.StaticCanvas[pt])}(),function(){var $t=s.util.addListener,vt=s.util.removeListener,b=3,pt=2,st=1,wt={passive:!1};function Tt(Ct,jt){return Ct.button&&Ct.button===jt-1}s.util.object.extend(s.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove($t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(Ct,jt){var Lt=this.upperCanvasEl,Ht=this._getEventPrefix();Ct(s.window,"resize",this._onResize),Ct(Lt,Ht+"down",this._onMouseDown),Ct(Lt,Ht+"move",this._onMouseMove,wt),Ct(Lt,Ht+"out",this._onMouseOut),Ct(Lt,Ht+"enter",this._onMouseEnter),Ct(Lt,"wheel",this._onMouseWheel),Ct(Lt,"contextmenu",this._onContextMenu),Ct(Lt,"dblclick",this._onDoubleClick),Ct(Lt,"dragover",this._onDragOver),Ct(Lt,"dragenter",this._onDragEnter),Ct(Lt,"dragleave",this._onDragLeave),Ct(Lt,"drop",this._onDrop),this.enablePointerEvents||Ct(Lt,"touchstart",this._onTouchStart,wt),typeof eventjs<"u"&&jt in eventjs&&(eventjs[jt](Lt,"gesture",this._onGesture),eventjs[jt](Lt,"drag",this._onDrag),eventjs[jt](Lt,"orientation",this._onOrientationChange),eventjs[jt](Lt,"shake",this._onShake),eventjs[jt](Lt,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(vt,"remove");var Ct=this._getEventPrefix();vt(s.document,Ct+"up",this._onMouseUp),vt(s.document,"touchend",this._onTouchEnd,wt),vt(s.document,Ct+"move",this._onMouseMove,wt),vt(s.document,"touchmove",this._onMouseMove,wt)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(Ct,jt){this.__onTransformGesture&&this.__onTransformGesture(Ct,jt)},_onDrag:function(Ct,jt){this.__onDrag&&this.__onDrag(Ct,jt)},_onMouseWheel:function(Ct){this.__onMouseWheel(Ct)},_onMouseOut:function(Ct){var jt=this._hoveredTarget;this.fire("mouse:out",{target:jt,e:Ct}),this._hoveredTarget=null,jt&&jt.fire("mouseout",{e:Ct});var Lt=this;this._hoveredTargets.forEach(function(Ht){Lt.fire("mouse:out",{target:jt,e:Ct}),Ht&&jt.fire("mouseout",{e:Ct})}),this._hoveredTargets=[]},_onMouseEnter:function(Ct){!this._currentTransform&&!this.findTarget(Ct)&&(this.fire("mouse:over",{target:null,e:Ct}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(Ct,jt){this.__onOrientationChange&&this.__onOrientationChange(Ct,jt)},_onShake:function(Ct,jt){this.__onShake&&this.__onShake(Ct,jt)},_onLongPress:function(Ct,jt){this.__onLongPress&&this.__onLongPress(Ct,jt)},_onDragOver:function(Ct){Ct.preventDefault();var jt=this._simpleEventHandler("dragover",Ct);this._fireEnterLeaveEvents(jt,Ct)},_onDrop:function(Ct){return this._simpleEventHandler("drop:before",Ct),this._simpleEventHandler("drop",Ct)},_onContextMenu:function(Ct){return this.stopContextMenu&&(Ct.stopPropagation(),Ct.preventDefault()),!1},_onDoubleClick:function(Ct){this._cacheTransformEventData(Ct),this._handleEvent(Ct,"dblclick"),this._resetTransformEventData(Ct)},getPointerId:function(Ct){var jt=Ct.changedTouches;return jt?jt[0]&&jt[0].identifier:this.enablePointerEvents?Ct.pointerId:-1},_isMainEvent:function(Ct){return Ct.isPrimary===!0?!0:Ct.isPrimary===!1?!1:Ct.type==="touchend"&&Ct.touches.length===0?!0:Ct.changedTouches?Ct.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(Ct){Ct.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(Ct)),this.__onMouseDown(Ct),this._resetTransformEventData();var jt=this.upperCanvasEl,Lt=this._getEventPrefix();$t(s.document,"touchend",this._onTouchEnd,wt),$t(s.document,"touchmove",this._onMouseMove,wt),vt(jt,Lt+"down",this._onMouseDown)},_onMouseDown:function(Ct){this.__onMouseDown(Ct),this._resetTransformEventData();var jt=this.upperCanvasEl,Lt=this._getEventPrefix();vt(jt,Lt+"move",this._onMouseMove,wt),$t(s.document,Lt+"up",this._onMouseUp),$t(s.document,Lt+"move",this._onMouseMove,wt)},_onTouchEnd:function(Ct){if(!(Ct.touches.length>0)){this.__onMouseUp(Ct),this._resetTransformEventData(),this.mainTouchId=null;var jt=this._getEventPrefix();vt(s.document,"touchend",this._onTouchEnd,wt),vt(s.document,"touchmove",this._onMouseMove,wt);var Lt=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){$t(Lt.upperCanvasEl,jt+"down",Lt._onMouseDown),Lt._willAddMouseDown=0},400)}},_onMouseUp:function(Ct){this.__onMouseUp(Ct),this._resetTransformEventData();var jt=this.upperCanvasEl,Lt=this._getEventPrefix();this._isMainEvent(Ct)&&(vt(s.document,Lt+"up",this._onMouseUp),vt(s.document,Lt+"move",this._onMouseMove,wt),$t(jt,Lt+"move",this._onMouseMove,wt))},_onMouseMove:function(Ct){!this.allowTouchScrolling&&Ct.preventDefault&&Ct.preventDefault(),this.__onMouseMove(Ct)},_onResize:function(){this.calcOffset()},_shouldRender:function(Ct){var jt=this._activeObject;return!!jt!=!!Ct||jt&&Ct&&jt!==Ct?!0:(jt&&jt.isEditing,!1)},__onMouseUp:function(Ct){var jt,Lt=this._currentTransform,Ht=this._groupSelector,Gt=!1,Kt=!Ht||Ht.left===0&&Ht.top===0;if(this._cacheTransformEventData(Ct),jt=this._target,this._handleEvent(Ct,"up:before"),Tt(Ct,b)){this.fireRightClick&&this._handleEvent(Ct,"up",b,Kt);return}if(Tt(Ct,pt)){this.fireMiddleClick&&this._handleEvent(Ct,"up",pt,Kt),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(Ct);return}if(this._isMainEvent(Ct)){if(Lt&&(this._finalizeCurrentTransform(Ct),Gt=Lt.actionPerformed),!Kt){var tr=jt===this._activeObject;this._maybeGroupObjects(Ct),Gt||(Gt=this._shouldRender(jt)||!tr&&jt===this._activeObject)}var rr,Lr;if(jt){if(rr=jt._findTargetCorner(this.getPointer(Ct,!0),s.util.isTouchEvent(Ct)),jt.selectable&&jt!==this._activeObject&&jt.activeOn==="up")this.setActiveObject(jt,Ct),Gt=!0;else{var jr=jt.controls[rr],Yr=jr&&jr.getMouseUpHandler(Ct,jt,jr);Yr&&(Lr=this.getPointer(Ct),Yr(Ct,Lt,Lr.x,Lr.y))}jt.isMoving=!1}if(Lt&&(Lt.target!==jt||Lt.corner!==rr)){var An=Lt.target&&Lt.target.controls[Lt.corner],No=An&&An.getMouseUpHandler(Ct,jt,jr);Lr=Lr||this.getPointer(Ct),No&&No(Ct,Lt,Lr.x,Lr.y)}this._setCursorFromEvent(Ct,jt),this._handleEvent(Ct,"up",st,Kt),this._groupSelector=null,this._currentTransform=null,jt&&(jt.__corner=0),Gt?this.requestRenderAll():Kt||this.renderTop()}},_simpleEventHandler:function(Ct,jt){var Lt=this.findTarget(jt),Ht=this.targets,Gt={e:jt,target:Lt,subTargets:Ht};if(this.fire(Ct,Gt),Lt&&Lt.fire(Ct,Gt),!Ht)return Lt;for(var Kt=0;Kt<Ht.length;Kt++)Ht[Kt].fire(Ct,Gt);return Lt},_handleEvent:function(Ct,jt,Lt,Ht){var Gt=this._target,Kt=this.targets||[],tr={e:Ct,target:Gt,subTargets:Kt,button:Lt||st,isClick:Ht||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};jt==="up"&&(tr.currentTarget=this.findTarget(Ct),tr.currentSubTargets=this.targets),this.fire("mouse:"+jt,tr),Gt&&Gt.fire("mouse"+jt,tr);for(var rr=0;rr<Kt.length;rr++)Kt[rr].fire("mouse"+jt,tr)},_finalizeCurrentTransform:function(Ct){var jt=this._currentTransform,Lt=jt.target,Ht={e:Ct,target:Lt,transform:jt,action:jt.action};Lt._scaling&&(Lt._scaling=!1),Lt.setCoords(),(jt.actionPerformed||this.stateful&&Lt.hasStateChanged())&&this._fire("modified",Ht)},_onMouseDownInDrawingMode:function(Ct){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(Ct).requestRenderAll();var jt=this.getPointer(Ct);this.freeDrawingBrush.onMouseDown(jt,{e:Ct,pointer:jt}),this._handleEvent(Ct,"down")},_onMouseMoveInDrawingMode:function(Ct){if(this._isCurrentlyDrawing){var jt=this.getPointer(Ct);this.freeDrawingBrush.onMouseMove(jt,{e:Ct,pointer:jt})}this.setCursor(this.freeDrawingCursor),this._handleEvent(Ct,"move")},_onMouseUpInDrawingMode:function(Ct){var jt=this.getPointer(Ct);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:Ct,pointer:jt}),this._handleEvent(Ct,"up")},__onMouseDown:function(Ct){this._cacheTransformEventData(Ct),this._handleEvent(Ct,"down:before");var jt=this._target;if(Tt(Ct,b)){this.fireRightClick&&this._handleEvent(Ct,"down",b);return}if(Tt(Ct,pt)){this.fireMiddleClick&&this._handleEvent(Ct,"down",pt);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(Ct);return}if(this._isMainEvent(Ct)&&!this._currentTransform){var Lt=this._pointer;this._previousPointer=Lt;var Ht=this._shouldRender(jt),Gt=this._shouldGroup(Ct,jt);if(this._shouldClearSelection(Ct,jt)?this.discardActiveObject(Ct):Gt&&(this._handleGrouping(Ct,jt),jt=this._activeObject),this.selection&&(!jt||!jt.selectable&&!jt.isEditing&&jt!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),jt){var Kt=jt===this._activeObject;jt.selectable&&jt.activeOn==="down"&&this.setActiveObject(jt,Ct);var tr=jt._findTargetCorner(this.getPointer(Ct,!0),s.util.isTouchEvent(Ct));if(jt.__corner=tr,jt===this._activeObject&&(tr||!Gt)){this._setupCurrentTransform(Ct,jt,Kt);var rr=jt.controls[tr],Lt=this.getPointer(Ct),Lr=rr&&rr.getMouseDownHandler(Ct,jt,rr);Lr&&Lr(Ct,this._currentTransform,Lt.x,Lt.y)}}this._handleEvent(Ct,"down"),(Ht||Gt)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(Ct){this._resetTransformEventData(),this._pointer=this.getPointer(Ct,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(Ct)||null},_beforeTransform:function(Ct){var jt=this._currentTransform;this.stateful&&jt.target.saveState(),this.fire("before:transform",{e:Ct,transform:jt})},__onMouseMove:function(Ct){this._handleEvent(Ct,"move:before"),this._cacheTransformEventData(Ct);var jt,Lt;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(Ct);return}if(this._isMainEvent(Ct)){var Ht=this._groupSelector;Ht?(Lt=this._absolutePointer,Ht.left=Lt.x-Ht.ex,Ht.top=Lt.y-Ht.ey,this.renderTop()):this._currentTransform?this._transformObject(Ct):(jt=this.findTarget(Ct)||null,this._setCursorFromEvent(Ct,jt),this._fireOverOutEvents(jt,Ct)),this._handleEvent(Ct,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(Ct,jt){var Lt=this._hoveredTarget,Ht=this._hoveredTargets,Gt=this.targets,Kt=Math.max(Ht.length,Gt.length);this.fireSyntheticInOutEvents(Ct,jt,{oldTarget:Lt,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var tr=0;tr<Kt;tr++)this.fireSyntheticInOutEvents(Gt[tr],jt,{oldTarget:Ht[tr],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=Ct,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(Ct,jt){var Lt=this._draggedoverTarget,Ht=this._hoveredTargets,Gt=this.targets,Kt=Math.max(Ht.length,Gt.length);this.fireSyntheticInOutEvents(Ct,jt,{oldTarget:Lt,evtOut:"dragleave",evtIn:"dragenter"});for(var tr=0;tr<Kt;tr++)this.fireSyntheticInOutEvents(Gt[tr],jt,{oldTarget:Ht[tr],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=Ct},fireSyntheticInOutEvents:function(Ct,jt,Lt){var Ht,Gt,Kt=Lt.oldTarget,tr,rr,Lr=Kt!==Ct,jr=Lt.canvasEvtIn,Yr=Lt.canvasEvtOut;Lr&&(Ht={e:jt,target:Ct,previousTarget:Kt},Gt={e:jt,target:Kt,nextTarget:Ct}),rr=Ct&&Lr,tr=Kt&&Lr,tr&&(Yr&&this.fire(Yr,Gt),Kt.fire(Lt.evtOut,Gt)),rr&&(jr&&this.fire(jr,Ht),Ct.fire(Lt.evtIn,Ht))},__onMouseWheel:function(Ct){this._cacheTransformEventData(Ct),this._handleEvent(Ct,"wheel"),this._resetTransformEventData()},_transformObject:function(Ct){var jt=this.getPointer(Ct),Lt=this._currentTransform;Lt.reset=!1,Lt.shiftKey=Ct.shiftKey,Lt.altKey=Ct[this.centeredKey],this._performTransformAction(Ct,Lt,jt),Lt.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(Ct,jt,Lt){var Ht=Lt.x,Gt=Lt.y,Kt=jt.action,tr=!1,rr=jt.actionHandler;rr&&(tr=rr(Ct,jt,Ht,Gt)),Kt==="drag"&&tr&&(jt.target.isMoving=!0,this.setCursor(jt.target.moveCursor||this.moveCursor)),jt.actionPerformed=jt.actionPerformed||tr},_fire:s.controlsUtils.fireEvent,_setCursorFromEvent:function(Ct,jt){if(!jt)return this.setCursor(this.defaultCursor),!1;var Lt=jt.hoverCursor||this.hoverCursor,Ht=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,Gt=(!Ht||!Ht.contains(jt))&&jt._findTargetCorner(this.getPointer(Ct,!0));Gt?this.setCursor(this.getCornerCursor(Gt,jt,Ct)):(jt.subTargetCheck&&this.targets.concat().reverse().map(function(Kt){Lt=Kt.hoverCursor||Lt}),this.setCursor(Lt))},getCornerCursor:function(Ct,jt,Lt){var Ht=jt.controls[Ct];return Ht.cursorStyleHandler(Lt,Ht,jt)}})}(),function(){var $t=Math.min,vt=Math.max;s.util.object.extend(s.Canvas.prototype,{_shouldGroup:function(b,pt){var st=this._activeObject;return st&&this._isSelectionKeyPressed(b)&&pt&&pt.selectable&&this.selection&&(st!==pt||st.type==="activeSelection")&&!pt.onSelect({e:b})},_handleGrouping:function(b,pt){var st=this._activeObject;st.__corner||pt===st&&(pt=this.findTarget(b,!0),!pt||!pt.selectable)||(st&&st.type==="activeSelection"?this._updateActiveSelection(pt,b):this._createActiveSelection(pt,b))},_updateActiveSelection:function(b,pt){var st=this._activeObject,wt=st._objects.slice(0);st.contains(b)?(st.removeWithUpdate(b),this._hoveredTarget=b,this._hoveredTargets=this.targets.concat(),st.size()===1&&this._setActiveObject(st.item(0),pt)):(st.addWithUpdate(b),this._hoveredTarget=st,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(wt,pt)},_createActiveSelection:function(b,pt){var st=this.getActiveObjects(),wt=this._createGroup(b);this._hoveredTarget=wt,this._setActiveObject(wt,pt),this._fireSelectionEvents(st,pt)},_createGroup:function(b){var pt=this._objects,st=pt.indexOf(this._activeObject)<pt.indexOf(b),wt=st?[this._activeObject,b]:[b,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new s.ActiveSelection(wt,{canvas:this})},_groupSelectedObjects:function(b){var pt=this._collectObjects(b),st;pt.length===1?this.setActiveObject(pt[0],b):pt.length>1&&(st=new s.ActiveSelection(pt.reverse(),{canvas:this}),this.setActiveObject(st,b))},_collectObjects:function(b){for(var pt=[],st,wt=this._groupSelector.ex,Tt=this._groupSelector.ey,Ct=wt+this._groupSelector.left,jt=Tt+this._groupSelector.top,Lt=new s.Point($t(wt,Ct),$t(Tt,jt)),Ht=new s.Point(vt(wt,Ct),vt(Tt,jt)),Gt=!this.selectionFullyContained,Kt=wt===Ct&&Tt===jt,tr=this._objects.length;tr--&&(st=this._objects[tr],!(!(!st||!st.selectable||!st.visible)&&(Gt&&st.intersectsWithRect(Lt,Ht,!0)||st.isContainedWithinRect(Lt,Ht,!0)||Gt&&st.containsPoint(Lt,null,!0)||Gt&&st.containsPoint(Ht,null,!0))&&(pt.push(st),Kt))););return pt.length>1&&(pt=pt.filter(function(rr){return!rr.onSelect({e:b})})),pt},_maybeGroupObjects:function(b){this.selection&&this._groupSelector&&this._groupSelectedObjects(b),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){s.util.object.extend(s.StaticCanvas.prototype,{toDataURL:function($t){$t||($t={});var vt=$t.format||"png",b=$t.quality||1,pt=($t.multiplier||1)*($t.enableRetinaScaling?this.getRetinaScaling():1),st=this.toCanvasElement(pt,$t);return s.util.toDataURL(st,vt,b)},toCanvasElement:function($t,vt){$t=$t||1,vt=vt||{};var b=(vt.width||this.width)*$t,pt=(vt.height||this.height)*$t,st=this.getZoom(),wt=this.width,Tt=this.height,Ct=st*$t,jt=this.viewportTransform,Lt=(jt[4]-(vt.left||0))*$t,Ht=(jt[5]-(vt.top||0))*$t,Gt=this.interactive,Kt=[Ct,0,0,Ct,Lt,Ht],tr=this.enableRetinaScaling,rr=s.util.createCanvasElement(),Lr=this.contextTop;return rr.width=b,rr.height=pt,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=Kt,this.width=b,this.height=pt,this.calcViewportBoundaries(),this.renderCanvas(rr.getContext("2d"),this._objects),this.viewportTransform=jt,this.width=wt,this.height=Tt,this.calcViewportBoundaries(),this.interactive=Gt,this.enableRetinaScaling=tr,this.contextTop=Lr,rr}})}(),s.util.object.extend(s.StaticCanvas.prototype,{loadFromJSON:function($t,vt,b){if($t){var pt=typeof $t=="string"?JSON.parse($t):s.util.object.clone($t),st=this,wt=pt.clipPath,Tt=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete pt.clipPath,this._enlivenObjects(pt.objects,function(Ct){st.clear(),st._setBgOverlay(pt,function(){wt?st._enlivenObjects([wt],function(jt){st.clipPath=jt[0],st.__setupCanvas.call(st,pt,Ct,Tt,vt)}):st.__setupCanvas.call(st,pt,Ct,Tt,vt)})},b),this}},__setupCanvas:function($t,vt,b,pt){var st=this;vt.forEach(function(wt,Tt){st.insertAt(wt,Tt)}),this.renderOnAddRemove=b,delete $t.objects,delete $t.backgroundImage,delete $t.overlayImage,delete $t.background,delete $t.overlay,this._setOptions($t),this.renderAll(),pt&&pt()},_setBgOverlay:function($t,vt){var b={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!$t.backgroundImage&&!$t.overlayImage&&!$t.background&&!$t.overlay){vt&&vt();return}var pt=function(){b.backgroundImage&&b.overlayImage&&b.backgroundColor&&b.overlayColor&&vt&&vt()};this.__setBgOverlay("backgroundImage",$t.backgroundImage,b,pt),this.__setBgOverlay("overlayImage",$t.overlayImage,b,pt),this.__setBgOverlay("backgroundColor",$t.background,b,pt),this.__setBgOverlay("overlayColor",$t.overlay,b,pt)},__setBgOverlay:function($t,vt,b,pt){var st=this;if(!vt){b[$t]=!0,pt&&pt();return}$t==="backgroundImage"||$t==="overlayImage"?s.util.enlivenObjects([vt],function(wt){st[$t]=wt[0],b[$t]=!0,pt&&pt()}):this["set"+s.util.string.capitalize($t,!0)](vt,function(){b[$t]=!0,pt&&pt()})},_enlivenObjects:function($t,vt,b){if(!$t||$t.length===0){vt&&vt([]);return}s.util.enlivenObjects($t,function(pt){vt&&vt(pt)},null,b)},_toDataURL:function($t,vt){this.clone(function(b){vt(b.toDataURL($t))})},_toDataURLWithMultiplier:function($t,vt,b){this.clone(function(pt){b(pt.toDataURLWithMultiplier($t,vt))})},clone:function($t,vt){var b=JSON.stringify(this.toJSON(vt));this.cloneWithoutData(function(pt){pt.loadFromJSON(b,function(){$t&&$t(pt)})})},cloneWithoutData:function($t){var vt=s.util.createCanvasElement();vt.width=this.width,vt.height=this.height;var b=new s.Canvas(vt);this.backgroundImage?(b.setBackgroundImage(this.backgroundImage.src,function(){b.renderAll(),$t&&$t(b)}),b.backgroundImageOpacity=this.backgroundImageOpacity,b.backgroundImageStretch=this.backgroundImageStretch):$t&&$t(b)}}),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend,pt=vt.util.object.clone,st=vt.util.toFixed,wt=vt.util.string.capitalize,Tt=vt.util.degreesToRadians,Ct=!vt.isLikelyNode,jt=2;vt.Object||(vt.Object=vt.util.createClass(vt.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:Ct,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(Lt){Lt&&this.setOptions(Lt)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=vt.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(Lt){var Ht=vt.perfLimitSizeTotal,Gt=Lt.width,Kt=Lt.height,tr=vt.maxCacheSideLimit,rr=vt.minCacheSideLimit;if(Gt<=tr&&Kt<=tr&&Gt*Kt<=Ht)return Gt<rr&&(Lt.width=rr),Kt<rr&&(Lt.height=rr),Lt;var Lr=Gt/Kt,jr=vt.util.limitDimsByArea(Lr,Ht),Yr=vt.util.capValue,An=Yr(rr,jr.x,tr),No=Yr(rr,jr.y,tr);return Gt>An&&(Lt.zoomX/=Gt/An,Lt.width=An,Lt.capped=!0),Kt>No&&(Lt.zoomY/=Kt/No,Lt.height=No,Lt.capped=!0),Lt},_getCacheCanvasDimensions:function(){var Lt=this.getTotalObjectScaling(),Ht=this._getTransformedDimensions(0,0),Gt=Ht.x*Lt.scaleX/this.scaleX,Kt=Ht.y*Lt.scaleY/this.scaleY;return{width:Gt+jt,height:Kt+jt,zoomX:Lt.scaleX,zoomY:Lt.scaleY,x:Gt,y:Kt}},_updateCacheCanvas:function(){var Lt=this.canvas;if(this.noScaleCache&&Lt&&Lt._currentTransform){var Ht=Lt._currentTransform.target,Gt=Lt._currentTransform.action;if(this===Ht&&Gt.slice&&Gt.slice(0,5)==="scale")return!1}var Kt=this._cacheCanvas,tr=this._limitCacheSize(this._getCacheCanvasDimensions()),rr=vt.minCacheSideLimit,Lr=tr.width,jr=tr.height,Yr,An,No=tr.zoomX,o0=tr.zoomY,t0=Lr!==this.cacheWidth||jr!==this.cacheHeight,c0=this.zoomX!==No||this.zoomY!==o0,n0=t0||c0,Qo=0,Mo=0,zo=!1;if(t0){var e0=this._cacheCanvas.width,Xr=this._cacheCanvas.height,In=Lr>e0||jr>Xr,Zr=(Lr<e0*.9||jr<Xr*.9)&&e0>rr&&Xr>rr;zo=In||Zr,In&&!tr.capped&&(Lr>rr||jr>rr)&&(Qo=Lr*.1,Mo=jr*.1)}return this instanceof vt.Text&&this.path&&(n0=!0,zo=!0,Qo+=this.getHeightOfLine(0)*this.zoomX,Mo+=this.getHeightOfLine(0)*this.zoomY),n0?(zo?(Kt.width=Math.ceil(Lr+Qo),Kt.height=Math.ceil(jr+Mo)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,Kt.width,Kt.height)),Yr=tr.x/2,An=tr.y/2,this.cacheTranslationX=Math.round(Kt.width/2-Yr)+Yr,this.cacheTranslationY=Math.round(Kt.height/2-An)+An,this.cacheWidth=Lr,this.cacheHeight=jr,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(No,o0),this.zoomX=No,this.zoomY=o0,!0):!1},setOptions:function(Lt){this._setOptions(Lt),this._initGradient(Lt.fill,"fill"),this._initGradient(Lt.stroke,"stroke"),this._initPattern(Lt.fill,"fill"),this._initPattern(Lt.stroke,"stroke")},transform:function(Lt){var Ht=this.group&&!this.group._transformDone||this.group&&this.canvas&&Lt===this.canvas.contextTop,Gt=this.calcTransformMatrix(!Ht);Lt.transform(Gt[0],Gt[1],Gt[2],Gt[3],Gt[4],Gt[5])},toObject:function(Lt){var Ht=vt.Object.NUM_FRACTION_DIGITS,Gt={type:this.type,version:vt.version,originX:this.originX,originY:this.originY,left:st(this.left,Ht),top:st(this.top,Ht),width:st(this.width,Ht),height:st(this.height,Ht),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:st(this.strokeWidth,Ht),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:st(this.strokeMiterLimit,Ht),scaleX:st(this.scaleX,Ht),scaleY:st(this.scaleY,Ht),angle:st(this.angle,Ht),flipX:this.flipX,flipY:this.flipY,opacity:st(this.opacity,Ht),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:st(this.skewX,Ht),skewY:st(this.skewY,Ht)};return this.clipPath&&!this.clipPath.excludeFromExport&&(Gt.clipPath=this.clipPath.toObject(Lt),Gt.clipPath.inverted=this.clipPath.inverted,Gt.clipPath.absolutePositioned=this.clipPath.absolutePositioned),vt.util.populateWithProperties(this,Gt,Lt),this.includeDefaultValues||(Gt=this._removeDefaultValues(Gt)),Gt},toDatalessObject:function(Lt){return this.toObject(Lt)},_removeDefaultValues:function(Lt){var Ht=vt.util.getKlass(Lt.type).prototype,Gt=Ht.stateProperties;return Gt.forEach(function(Kt){Kt==="left"||Kt==="top"||(Lt[Kt]===Ht[Kt]&&delete Lt[Kt],Array.isArray(Lt[Kt])&&Array.isArray(Ht[Kt])&&Lt[Kt].length===0&&Ht[Kt].length===0&&delete Lt[Kt])}),Lt},toString:function(){return"#<fabric."+wt(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var Lt=vt.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(Lt.scaleX),scaleY:Math.abs(Lt.scaleY)}},getTotalObjectScaling:function(){var Lt=this.getObjectScaling(),Ht=Lt.scaleX,Gt=Lt.scaleY;if(this.canvas){var Kt=this.canvas.getZoom(),tr=this.canvas.getRetinaScaling();Ht*=Kt*tr,Gt*=Kt*tr}return{scaleX:Ht,scaleY:Gt}},getObjectOpacity:function(){var Lt=this.opacity;return this.group&&(Lt*=this.group.getObjectOpacity()),Lt},_set:function(Lt,Ht){var Gt=Lt==="scaleX"||Lt==="scaleY",Kt=this[Lt]!==Ht,tr=!1;return Gt&&(Ht=this._constrainScale(Ht)),Lt==="scaleX"&&Ht<0?(this.flipX=!this.flipX,Ht*=-1):Lt==="scaleY"&&Ht<0?(this.flipY=!this.flipY,Ht*=-1):Lt==="shadow"&&Ht&&!(Ht instanceof vt.Shadow)?Ht=new vt.Shadow(Ht):Lt==="dirty"&&this.group&&this.group.set("dirty",Ht),this[Lt]=Ht,Kt&&(tr=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(Lt)>-1?(this.dirty=!0,tr&&this.group.set("dirty",!0)):tr&&this.stateProperties.indexOf(Lt)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:vt.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(Lt){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(Lt.save(),this._setupCompositeOperation(Lt),this.drawSelectionBackground(Lt),this.transform(Lt),this._setOpacity(Lt),this._setShadow(Lt,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(Lt)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(Lt),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),Lt.restore())},renderCache:function(Lt){Lt=Lt||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,Lt.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(Lt,Ht){if(Lt.save(),Ht.inverted?Lt.globalCompositeOperation="destination-out":Lt.globalCompositeOperation="destination-in",Ht.absolutePositioned){var Gt=vt.util.invertTransform(this.calcTransformMatrix());Lt.transform(Gt[0],Gt[1],Gt[2],Gt[3],Gt[4],Gt[5])}Ht.transform(Lt),Lt.scale(1/Ht.zoomX,1/Ht.zoomY),Lt.drawImage(Ht._cacheCanvas,-Ht.cacheTranslationX,-Ht.cacheTranslationY),Lt.restore()},drawObject:function(Lt,Ht){var Gt=this.fill,Kt=this.stroke;Ht?(this.fill="black",this.stroke="",this._setClippingProperties(Lt)):this._renderBackground(Lt),this._render(Lt),this._drawClipPath(Lt,this.clipPath),this.fill=Gt,this.stroke=Kt},_drawClipPath:function(Lt,Ht){Ht&&(Ht.canvas=this.canvas,Ht.shouldCache(),Ht._transformDone=!0,Ht.renderCache({forClipping:!0}),this.drawClipPathOnCache(Lt,Ht))},drawCacheOnCanvas:function(Lt){Lt.scale(1/this.zoomX,1/this.zoomY),Lt.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(Lt){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!Lt&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!Lt){var Ht=this.cacheWidth/this.zoomX,Gt=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-Ht/2,-Gt/2,Ht,Gt)}return!0}return!1},_renderBackground:function(Lt){if(this.backgroundColor){var Ht=this._getNonTransformedDimensions();Lt.fillStyle=this.backgroundColor,Lt.fillRect(-Ht.x/2,-Ht.y/2,Ht.x,Ht.y),this._removeShadow(Lt)}},_setOpacity:function(Lt){this.group&&!this.group._transformDone?Lt.globalAlpha=this.getObjectOpacity():Lt.globalAlpha*=this.opacity},_setStrokeStyles:function(Lt,Ht){var Gt=Ht.stroke;Gt&&(Lt.lineWidth=Ht.strokeWidth,Lt.lineCap=Ht.strokeLineCap,Lt.lineDashOffset=Ht.strokeDashOffset,Lt.lineJoin=Ht.strokeLineJoin,Lt.miterLimit=Ht.strokeMiterLimit,Gt.toLive?Gt.gradientUnits==="percentage"||Gt.gradientTransform||Gt.patternTransform?this._applyPatternForTransformedGradient(Lt,Gt):(Lt.strokeStyle=Gt.toLive(Lt,this),this._applyPatternGradientTransform(Lt,Gt)):Lt.strokeStyle=Ht.stroke)},_setFillStyles:function(Lt,Ht){var Gt=Ht.fill;Gt&&(Gt.toLive?(Lt.fillStyle=Gt.toLive(Lt,this),this._applyPatternGradientTransform(Lt,Ht.fill)):Lt.fillStyle=Gt)},_setClippingProperties:function(Lt){Lt.globalAlpha=1,Lt.strokeStyle="transparent",Lt.fillStyle="#000000"},_setLineDash:function(Lt,Ht){!Ht||Ht.length===0||(1&Ht.length&&Ht.push.apply(Ht,Ht),Lt.setLineDash(Ht))},_renderControls:function(Lt,Ht){var Gt=this.getViewportTransform(),Kt=this.calcTransformMatrix(),tr,rr,Lr;Ht=Ht||{},rr=typeof Ht.hasBorders<"u"?Ht.hasBorders:this.hasBorders,Lr=typeof Ht.hasControls<"u"?Ht.hasControls:this.hasControls,Kt=vt.util.multiplyTransformMatrices(Gt,Kt),tr=vt.util.qrDecompose(Kt),Lt.save(),Lt.translate(tr.translateX,tr.translateY),Lt.lineWidth=1*this.borderScaleFactor,this.group||(Lt.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(tr.angle-=180),Lt.rotate(Tt(this.group?tr.angle:this.angle)),Ht.forActiveSelection||this.group?rr&&this.drawBordersInGroup(Lt,tr,Ht):rr&&this.drawBorders(Lt,Ht),Lr&&this.drawControls(Lt,Ht),Lt.restore()},_setShadow:function(Lt){if(this.shadow){var Ht=this.shadow,Gt=this.canvas,Kt,tr=Gt&&Gt.viewportTransform[0]||1,rr=Gt&&Gt.viewportTransform[3]||1;Ht.nonScaling?Kt={scaleX:1,scaleY:1}:Kt=this.getObjectScaling(),Gt&&Gt._isRetinaScaling()&&(tr*=vt.devicePixelRatio,rr*=vt.devicePixelRatio),Lt.shadowColor=Ht.color,Lt.shadowBlur=Ht.blur*vt.browserShadowBlurConstant*(tr+rr)*(Kt.scaleX+Kt.scaleY)/4,Lt.shadowOffsetX=Ht.offsetX*tr*Kt.scaleX,Lt.shadowOffsetY=Ht.offsetY*rr*Kt.scaleY}},_removeShadow:function(Lt){this.shadow&&(Lt.shadowColor="",Lt.shadowBlur=Lt.shadowOffsetX=Lt.shadowOffsetY=0)},_applyPatternGradientTransform:function(Lt,Ht){if(!Ht||!Ht.toLive)return{offsetX:0,offsetY:0};var Gt=Ht.gradientTransform||Ht.patternTransform,Kt=-this.width/2+Ht.offsetX||0,tr=-this.height/2+Ht.offsetY||0;return Ht.gradientUnits==="percentage"?Lt.transform(this.width,0,0,this.height,Kt,tr):Lt.transform(1,0,0,1,Kt,tr),Gt&&Lt.transform(Gt[0],Gt[1],Gt[2],Gt[3],Gt[4],Gt[5]),{offsetX:Kt,offsetY:tr}},_renderPaintInOrder:function(Lt){this.paintFirst==="stroke"?(this._renderStroke(Lt),this._renderFill(Lt)):(this._renderFill(Lt),this._renderStroke(Lt))},_render:function(){},_renderFill:function(Lt){this.fill&&(Lt.save(),this._setFillStyles(Lt,this),this.fillRule==="evenodd"?Lt.fill("evenodd"):Lt.fill(),Lt.restore())},_renderStroke:function(Lt){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(Lt),Lt.save(),this.strokeUniform&&this.group){var Ht=this.getObjectScaling();Lt.scale(1/Ht.scaleX,1/Ht.scaleY)}else this.strokeUniform&&Lt.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(Lt,this.strokeDashArray),this._setStrokeStyles(Lt,this),Lt.stroke(),Lt.restore()}},_applyPatternForTransformedGradient:function(Lt,Ht){var Gt=this._limitCacheSize(this._getCacheCanvasDimensions()),Kt=vt.util.createCanvasElement(),tr,rr=this.canvas.getRetinaScaling(),Lr=Gt.x/this.scaleX/rr,jr=Gt.y/this.scaleY/rr;Kt.width=Lr,Kt.height=jr,tr=Kt.getContext("2d"),tr.beginPath(),tr.moveTo(0,0),tr.lineTo(Lr,0),tr.lineTo(Lr,jr),tr.lineTo(0,jr),tr.closePath(),tr.translate(Lr/2,jr/2),tr.scale(Gt.zoomX/this.scaleX/rr,Gt.zoomY/this.scaleY/rr),this._applyPatternGradientTransform(tr,Ht),tr.fillStyle=Ht.toLive(Lt),tr.fill(),Lt.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),Lt.scale(rr*this.scaleX/Gt.zoomX,rr*this.scaleY/Gt.zoomY),Lt.strokeStyle=tr.createPattern(Kt,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var Lt=vt.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",Lt.scaleX),this.set("scaleY",Lt.scaleY),this.angle=Lt.angle,this.skewX=Lt.skewX,this.skewY=0}},_removeTransformMatrix:function(Lt){var Ht=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),Ht=vt.util.transformPoint(Ht,this.transformMatrix)),this.transformMatrix=null,Lt&&(this.scaleX*=Lt.scaleX,this.scaleY*=Lt.scaleY,this.cropX=Lt.cropX,this.cropY=Lt.cropY,Ht.x+=Lt.offsetLeft,Ht.y+=Lt.offsetTop,this.width=Lt.width,this.height=Lt.height),this.setPositionByOrigin(Ht,"center","center")},clone:function(Lt,Ht){var Gt=this.toObject(Ht);this.constructor.fromObject?this.constructor.fromObject(Gt,Lt):vt.Object._fromObject("Object",Gt,Lt)},cloneAsImage:function(Lt,Ht){var Gt=this.toCanvasElement(Ht);return Lt&&Lt(new vt.Image(Gt)),this},toCanvasElement:function(Lt){Lt||(Lt={});var Ht=vt.util,Gt=Ht.saveObjectTransform(this),Kt=this.group,tr=this.shadow,rr=Math.abs,Lr=(Lt.multiplier||1)*(Lt.enableRetinaScaling?vt.devicePixelRatio:1);delete this.group,Lt.withoutTransform&&Ht.resetObjectTransform(this),Lt.withoutShadow&&(this.shadow=null);var jr=vt.util.createCanvasElement(),Yr=this.getBoundingRect(!0,!0),An=this.shadow,No,o0={x:0,y:0},t0,c0,n0;An&&(t0=An.blur,An.nonScaling?No={scaleX:1,scaleY:1}:No=this.getObjectScaling(),o0.x=2*Math.round(rr(An.offsetX)+t0)*rr(No.scaleX),o0.y=2*Math.round(rr(An.offsetY)+t0)*rr(No.scaleY)),c0=Yr.width+o0.x,n0=Yr.height+o0.y,jr.width=Math.ceil(c0),jr.height=Math.ceil(n0);var Qo=new vt.StaticCanvas(jr,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});Lt.format==="jpeg"&&(Qo.backgroundColor="#fff"),this.setPositionByOrigin(new vt.Point(Qo.width/2,Qo.height/2),"center","center");var Mo=this.canvas;Qo.add(this);var zo=Qo.toCanvasElement(Lr||1,Lt);return this.shadow=tr,this.set("canvas",Mo),Kt&&(this.group=Kt),this.set(Gt).setCoords(),Qo._objects=[],Qo.dispose(),Qo=null,zo},toDataURL:function(Lt){return Lt||(Lt={}),vt.util.toDataURL(this.toCanvasElement(Lt),Lt.format||"png",Lt.quality||1)},isType:function(Lt){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===Lt},complexity:function(){return 1},toJSON:function(Lt){return this.toObject(Lt)},rotate:function(Lt){var Ht=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return Ht&&this._setOriginToCenter(),this.set("angle",Lt),Ht&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(Lt,Ht){Ht=Ht||this.canvas.getPointer(Lt);var Gt=new vt.Point(Ht.x,Ht.y),Kt=this._getLeftTopCoords();return this.angle&&(Gt=vt.util.rotatePoint(Gt,Kt,Tt(-this.angle))),{x:Gt.x-Kt.x,y:Gt.y-Kt.y}},_setupCompositeOperation:function(Lt){this.globalCompositeOperation&&(Lt.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){vt.runningAnimations&&vt.runningAnimations.cancelByTarget(this)}}),vt.util.createAccessors&&vt.util.createAccessors(vt.Object),b(vt.Object.prototype,vt.Observable),vt.Object.NUM_FRACTION_DIGITS=2,vt.Object.ENLIVEN_PROPS=["clipPath"],vt.Object._fromObject=function(Lt,Ht,Gt,Kt){var tr=vt[Lt];Ht=pt(Ht,!0),vt.util.enlivenPatterns([Ht.fill,Ht.stroke],function(rr){typeof rr[0]<"u"&&(Ht.fill=rr[0]),typeof rr[1]<"u"&&(Ht.stroke=rr[1]),vt.util.enlivenObjectEnlivables(Ht,Ht,function(){var Lr=Kt?new tr(Ht[Kt],Ht):new tr(Ht);Gt&&Gt(Lr)})})},vt.Object.__uid=0)}(a),function(){var $t=s.util.degreesToRadians,vt={left:-.5,center:0,right:.5},b={top:-.5,center:0,bottom:.5};s.util.object.extend(s.Object.prototype,{translateToGivenOrigin:function(pt,st,wt,Tt,Ct){var jt=pt.x,Lt=pt.y,Ht,Gt,Kt;return typeof st=="string"?st=vt[st]:st-=.5,typeof Tt=="string"?Tt=vt[Tt]:Tt-=.5,Ht=Tt-st,typeof wt=="string"?wt=b[wt]:wt-=.5,typeof Ct=="string"?Ct=b[Ct]:Ct-=.5,Gt=Ct-wt,(Ht||Gt)&&(Kt=this._getTransformedDimensions(),jt=pt.x+Ht*Kt.x,Lt=pt.y+Gt*Kt.y),new s.Point(jt,Lt)},translateToCenterPoint:function(pt,st,wt){var Tt=this.translateToGivenOrigin(pt,st,wt,"center","center");return this.angle?s.util.rotatePoint(Tt,pt,$t(this.angle)):Tt},translateToOriginPoint:function(pt,st,wt){var Tt=this.translateToGivenOrigin(pt,"center","center",st,wt);return this.angle?s.util.rotatePoint(Tt,pt,$t(this.angle)):Tt},getCenterPoint:function(){var pt=new s.Point(this.left,this.top);return this.translateToCenterPoint(pt,this.originX,this.originY)},getPointByOrigin:function(pt,st){var wt=this.getCenterPoint();return this.translateToOriginPoint(wt,pt,st)},toLocalPoint:function(pt,st,wt){var Tt=this.getCenterPoint(),Ct,jt;return typeof st<"u"&&typeof wt<"u"?Ct=this.translateToGivenOrigin(Tt,"center","center",st,wt):Ct=new s.Point(this.left,this.top),jt=new s.Point(pt.x,pt.y),this.angle&&(jt=s.util.rotatePoint(jt,Tt,-$t(this.angle))),jt.subtractEquals(Ct)},setPositionByOrigin:function(pt,st,wt){var Tt=this.translateToCenterPoint(pt,st,wt),Ct=this.translateToOriginPoint(Tt,this.originX,this.originY);this.set("left",Ct.x),this.set("top",Ct.y)},adjustPosition:function(pt){var st=$t(this.angle),wt=this.getScaledWidth(),Tt=s.util.cos(st)*wt,Ct=s.util.sin(st)*wt,jt,Lt;typeof this.originX=="string"?jt=vt[this.originX]:jt=this.originX-.5,typeof pt=="string"?Lt=vt[pt]:Lt=pt-.5,this.left+=Tt*(Lt-jt),this.top+=Ct*(Lt-jt),this.setCoords(),this.originX=pt},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var pt=this.getCenterPoint();this.originX="center",this.originY="center",this.left=pt.x,this.top=pt.y},_resetOrigin:function(){var pt=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=pt.x,this.top=pt.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function $t(wt){return[new s.Point(wt.tl.x,wt.tl.y),new s.Point(wt.tr.x,wt.tr.y),new s.Point(wt.br.x,wt.br.y),new s.Point(wt.bl.x,wt.bl.y)]}var vt=s.util,b=vt.degreesToRadians,pt=vt.multiplyTransformMatrices,st=vt.transformPoint;vt.object.extend(s.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(wt,Tt){return Tt?wt?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),wt?this.aCoords:this.lineCoords)},getCoords:function(wt,Tt){return $t(this._getCoords(wt,Tt))},intersectsWithRect:function(wt,Tt,Ct,jt){var Lt=this.getCoords(Ct,jt),Ht=s.Intersection.intersectPolygonRectangle(Lt,wt,Tt);return Ht.status==="Intersection"},intersectsWithObject:function(wt,Tt,Ct){var jt=s.Intersection.intersectPolygonPolygon(this.getCoords(Tt,Ct),wt.getCoords(Tt,Ct));return jt.status==="Intersection"||wt.isContainedWithinObject(this,Tt,Ct)||this.isContainedWithinObject(wt,Tt,Ct)},isContainedWithinObject:function(wt,Tt,Ct){for(var jt=this.getCoords(Tt,Ct),Lt=Tt?wt.aCoords:wt.lineCoords,Ht=0,Gt=wt._getImageLines(Lt);Ht<4;Ht++)if(!wt.containsPoint(jt[Ht],Gt))return!1;return!0},isContainedWithinRect:function(wt,Tt,Ct,jt){var Lt=this.getBoundingRect(Ct,jt);return Lt.left>=wt.x&&Lt.left+Lt.width<=Tt.x&&Lt.top>=wt.y&&Lt.top+Lt.height<=Tt.y},containsPoint:function(wt,Ht,Ct,jt){var Lt=this._getCoords(Ct,jt),Ht=Ht||this._getImageLines(Lt),Gt=this._findCrossPoints(wt,Ht);return Gt!==0&&Gt%2===1},isOnScreen:function(wt){if(!this.canvas)return!1;var Tt=this.canvas.vptCoords.tl,Ct=this.canvas.vptCoords.br,jt=this.getCoords(!0,wt);return jt.some(function(Lt){return Lt.x<=Ct.x&&Lt.x>=Tt.x&&Lt.y<=Ct.y&&Lt.y>=Tt.y})||this.intersectsWithRect(Tt,Ct,!0,wt)?!0:this._containsCenterOfCanvas(Tt,Ct,wt)},_containsCenterOfCanvas:function(wt,Tt,Ct){var jt={x:(wt.x+Tt.x)/2,y:(wt.y+Tt.y)/2};return!!this.containsPoint(jt,null,!0,Ct)},isPartiallyOnScreen:function(wt){if(!this.canvas)return!1;var Tt=this.canvas.vptCoords.tl,Ct=this.canvas.vptCoords.br;if(this.intersectsWithRect(Tt,Ct,!0,wt))return!0;var jt=this.getCoords(!0,wt).every(function(Lt){return(Lt.x>=Ct.x||Lt.x<=Tt.x)&&(Lt.y>=Ct.y||Lt.y<=Tt.y)});return jt&&this._containsCenterOfCanvas(Tt,Ct,wt)},_getImageLines:function(wt){var Tt={topline:{o:wt.tl,d:wt.tr},rightline:{o:wt.tr,d:wt.br},bottomline:{o:wt.br,d:wt.bl},leftline:{o:wt.bl,d:wt.tl}};return Tt},_findCrossPoints:function(wt,Tt){var Ct,jt,Lt,Ht,Gt,Kt=0,tr;for(var rr in Tt)if(tr=Tt[rr],!(tr.o.y<wt.y&&tr.d.y<wt.y)&&!(tr.o.y>=wt.y&&tr.d.y>=wt.y)&&(tr.o.x===tr.d.x&&tr.o.x>=wt.x?Gt=tr.o.x:(Ct=0,jt=(tr.d.y-tr.o.y)/(tr.d.x-tr.o.x),Lt=wt.y-Ct*wt.x,Ht=tr.o.y-jt*tr.o.x,Gt=-(Lt-Ht)/(Ct-jt)),Gt>=wt.x&&(Kt+=1),Kt===2))break;return Kt},getBoundingRect:function(wt,Tt){var Ct=this.getCoords(wt,Tt);return vt.makeBoundingBoxFromPoints(Ct)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(wt){return Math.abs(wt)<this.minScaleLimit?wt<0?-this.minScaleLimit:this.minScaleLimit:wt===0?1e-4:wt},scale:function(wt){return this._set("scaleX",wt),this._set("scaleY",wt),this.setCoords()},scaleToWidth:function(wt,Tt){var Ct=this.getBoundingRect(Tt).width/this.getScaledWidth();return this.scale(wt/this.width/Ct)},scaleToHeight:function(wt,Tt){var Ct=this.getBoundingRect(Tt).height/this.getScaledHeight();return this.scale(wt/this.height/Ct)},calcLineCoords:function(){var wt=this.getViewportTransform(),Tt=this.padding,Ct=b(this.angle),jt=vt.cos(Ct),Lt=vt.sin(Ct),Ht=jt*Tt,Gt=Lt*Tt,Kt=Ht+Gt,tr=Ht-Gt,rr=this.calcACoords(),Lr={tl:st(rr.tl,wt),tr:st(rr.tr,wt),bl:st(rr.bl,wt),br:st(rr.br,wt)};return Tt&&(Lr.tl.x-=tr,Lr.tl.y-=Kt,Lr.tr.x+=Kt,Lr.tr.y-=tr,Lr.bl.x-=Kt,Lr.bl.y+=tr,Lr.br.x+=tr,Lr.br.y+=Kt),Lr},calcOCoords:function(){var wt=this._calcRotateMatrix(),Tt=this._calcTranslateMatrix(),Ct=this.getViewportTransform(),jt=pt(Ct,Tt),Lt=pt(jt,wt),Lt=pt(Lt,[1/Ct[0],0,0,1/Ct[3],0,0]),Ht=this._calculateCurrentDimensions(),Gt={};return this.forEachControl(function(Kt,tr,rr){Gt[tr]=Kt.positionHandler(Ht,Lt,rr)}),Gt},calcACoords:function(){var wt=this._calcRotateMatrix(),Tt=this._calcTranslateMatrix(),Ct=pt(Tt,wt),jt=this._getTransformedDimensions(),Lt=jt.x/2,Ht=jt.y/2;return{tl:st({x:-Lt,y:-Ht},Ct),tr:st({x:Lt,y:-Ht},Ct),bl:st({x:-Lt,y:Ht},Ct),br:st({x:Lt,y:Ht},Ct)}},setCoords:function(wt){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),wt?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return vt.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var wt=this.getCenterPoint();return[1,0,0,1,wt.x,wt.y]},transformMatrixKey:function(wt){var Tt="_",Ct="";return!wt&&this.group&&(Ct=this.group.transformMatrixKey(wt)+Tt),Ct+this.top+Tt+this.left+Tt+this.scaleX+Tt+this.scaleY+Tt+this.skewX+Tt+this.skewY+Tt+this.angle+Tt+this.originX+Tt+this.originY+Tt+this.width+Tt+this.height+Tt+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(wt){var Tt=this.calcOwnMatrix();if(wt||!this.group)return Tt;var Ct=this.transformMatrixKey(wt),jt=this.matrixCache||(this.matrixCache={});return jt.key===Ct?jt.value:(this.group&&(Tt=pt(this.group.calcTransformMatrix(!1),Tt)),jt.key=Ct,jt.value=Tt,Tt)},calcOwnMatrix:function(){var wt=this.transformMatrixKey(!0),Tt=this.ownMatrixCache||(this.ownMatrixCache={});if(Tt.key===wt)return Tt.value;var Ct=this._calcTranslateMatrix(),jt={angle:this.angle,translateX:Ct[4],translateY:Ct[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return Tt.key=wt,Tt.value=vt.composeMatrix(jt),Tt.value},_getNonTransformedDimensions:function(){var wt=this.strokeWidth,Tt=this.width+wt,Ct=this.height+wt;return{x:Tt,y:Ct}},_getTransformedDimensions:function(wt,Tt){typeof wt>"u"&&(wt=this.skewX),typeof Tt>"u"&&(Tt=this.skewY);var Ct,jt,Lt,Ht=wt===0&&Tt===0;if(this.strokeUniform?(jt=this.width,Lt=this.height):(Ct=this._getNonTransformedDimensions(),jt=Ct.x,Lt=Ct.y),Ht)return this._finalizeDimensions(jt*this.scaleX,Lt*this.scaleY);var Gt=vt.sizeAfterTransform(jt,Lt,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:wt,skewY:Tt});return this._finalizeDimensions(Gt.x,Gt.y)},_finalizeDimensions:function(wt,Tt){return this.strokeUniform?{x:wt+this.strokeWidth,y:Tt+this.strokeWidth}:{x:wt,y:Tt}},_calculateCurrentDimensions:function(){var wt=this.getViewportTransform(),Tt=this._getTransformedDimensions(),Ct=st(Tt,wt,!0);return Ct.scalarAdd(2*this.padding)}})}(),s.util.object.extend(s.Object.prototype,{sendToBack:function(){return this.group?s.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?s.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function($t){return this.group?s.StaticCanvas.prototype.sendBackwards.call(this.group,this,$t):this.canvas&&this.canvas.sendBackwards(this,$t),this},bringForward:function($t){return this.group?s.StaticCanvas.prototype.bringForward.call(this.group,this,$t):this.canvas&&this.canvas.bringForward(this,$t),this},moveTo:function($t){return this.group&&this.group.type!=="activeSelection"?s.StaticCanvas.prototype.moveTo.call(this.group,this,$t):this.canvas&&this.canvas.moveTo(this,$t),this}}),function(){function $t(b,pt){if(pt){if(pt.toLive)return b+": url(#SVGID_"+pt.id+"); ";var st=new s.Color(pt),wt=b+": "+st.toRgb()+"; ",Tt=st.getAlpha();return Tt!==1&&(wt+=b+"-opacity: "+Tt.toString()+"; "),wt}else return b+": none; "}var vt=s.util.toFixed;s.util.object.extend(s.Object.prototype,{getSvgStyles:function(b){var pt=this.fillRule?this.fillRule:"nonzero",st=this.strokeWidth?this.strokeWidth:"0",wt=this.strokeDashArray?this.strokeDashArray.join(" "):"none",Tt=this.strokeDashOffset?this.strokeDashOffset:"0",Ct=this.strokeLineCap?this.strokeLineCap:"butt",jt=this.strokeLineJoin?this.strokeLineJoin:"miter",Lt=this.strokeMiterLimit?this.strokeMiterLimit:"4",Ht=typeof this.opacity<"u"?this.opacity:"1",Gt=this.visible?"":" visibility: hidden;",Kt=b?"":this.getSvgFilter(),tr=$t("fill",this.fill),rr=$t("stroke",this.stroke);return[rr,"stroke-width: ",st,"; ","stroke-dasharray: ",wt,"; ","stroke-linecap: ",Ct,"; ","stroke-dashoffset: ",Tt,"; ","stroke-linejoin: ",jt,"; ","stroke-miterlimit: ",Lt,"; ",tr,"fill-rule: ",pt,"; ","opacity: ",Ht,";",Kt,Gt].join("")},getSvgSpanStyles:function(b,pt){var st="; ",Tt=b.fontFamily?"font-family: "+(b.fontFamily.indexOf("'")===-1&&b.fontFamily.indexOf('"')===-1?"'"+b.fontFamily+"'":b.fontFamily)+st:"",wt=b.strokeWidth?"stroke-width: "+b.strokeWidth+st:"",Tt=Tt,Ct=b.fontSize?"font-size: "+b.fontSize+"px"+st:"",jt=b.fontStyle?"font-style: "+b.fontStyle+st:"",Lt=b.fontWeight?"font-weight: "+b.fontWeight+st:"",Ht=b.fill?$t("fill",b.fill):"",Gt=b.stroke?$t("stroke",b.stroke):"",Kt=this.getSvgTextDecoration(b),tr=b.deltaY?"baseline-shift: "+-b.deltaY+"; ":"";return Kt&&(Kt="text-decoration: "+Kt+st),[Gt,wt,Tt,Ct,jt,Lt,Kt,Ht,tr,pt?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(b){return["overline","underline","line-through"].filter(function(pt){return b[pt.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(b,pt){var st=b?this.calcTransformMatrix():this.calcOwnMatrix(),wt='transform="'+s.util.matrixToSVG(st);return wt+(pt||"")+'" '},_setSVGBg:function(b){if(this.backgroundColor){var pt=s.Object.NUM_FRACTION_DIGITS;b.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',vt(-this.width/2,pt),'" y="',vt(-this.height/2,pt),'" width="',vt(this.width,pt),'" height="',vt(this.height,pt),`"></rect>
`)}},toSVG:function(b){return this._createBaseSVGMarkup(this._toSVG(b),{reviver:b})},toClipPathSVG:function(b){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(b),{reviver:b})},_createBaseClipPathSVGMarkup:function(b,pt){pt=pt||{};var st=pt.reviver,wt=pt.additionalTransform||"",Tt=[this.getSvgTransform(!0,wt),this.getSvgCommons()].join(""),Ct=b.indexOf("COMMON_PARTS");return b[Ct]=Tt,st?st(b.join("")):b.join("")},_createBaseSVGMarkup:function(b,pt){pt=pt||{};var st=pt.noStyle,wt=pt.reviver,Tt=st?"":'style="'+this.getSvgStyles()+'" ',Ct=pt.withShadow?'style="'+this.getSvgFilter()+'" ':"",jt=this.clipPath,Lt=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",Ht=jt&&jt.absolutePositioned,Gt=this.stroke,Kt=this.fill,tr=this.shadow,rr,Lr=[],jr,Yr=b.indexOf("COMMON_PARTS"),An=pt.additionalTransform;return jt&&(jt.clipPathId="CLIPPATH_"+s.Object.__uid++,jr='<clipPath id="'+jt.clipPathId+`" >
`+jt.toClipPathSVG(wt)+`</clipPath>
`),Ht&&Lr.push("<g ",Ct,this.getSvgCommons(),` >
`),Lr.push("<g ",this.getSvgTransform(!1),Ht?"":Ct+this.getSvgCommons(),` >
`),rr=[Tt,Lt,st?"":this.addPaintOrder()," ",An?'transform="'+An+'" ':""].join(""),b[Yr]=rr,Kt&&Kt.toLive&&Lr.push(Kt.toSVG(this)),Gt&&Gt.toLive&&Lr.push(Gt.toSVG(this)),tr&&Lr.push(tr.toSVG(this)),jt&&Lr.push(jr),Lr.push(b.join("")),Lr.push(`</g>
`),Ht&&Lr.push(`</g>
`),wt?wt(Lr.join("")):Lr.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var $t=s.util.object.extend,vt="stateProperties";function b(st,wt,Tt){var Ct={},jt=!0;Tt.forEach(function(Lt){Ct[Lt]=st[Lt]}),$t(st[wt],Ct,jt)}function pt(st,wt,Tt){if(st===wt)return!0;if(Array.isArray(st)){if(!Array.isArray(wt)||st.length!==wt.length)return!1;for(var Ct=0,jt=st.length;Ct<jt;Ct++)if(!pt(st[Ct],wt[Ct]))return!1;return!0}else if(st&&typeof st=="object"){var Lt=Object.keys(st),Ht;if(!wt||typeof wt!="object"||!Tt&&Lt.length!==Object.keys(wt).length)return!1;for(var Ct=0,jt=Lt.length;Ct<jt;Ct++)if(Ht=Lt[Ct],!(Ht==="canvas"||Ht==="group")&&!pt(st[Ht],wt[Ht]))return!1;return!0}}s.util.object.extend(s.Object.prototype,{hasStateChanged:function(st){st=st||vt;var wt="_"+st;return Object.keys(this[wt]).length<this[st].length?!0:!pt(this[wt],this,!0)},saveState:function(st){var wt=st&&st.propertySet||vt,Tt="_"+wt;return this[Tt]?(b(this,Tt,this[wt]),st&&st.stateProperties&&b(this,Tt,st.stateProperties),this):this.setupState(st)},setupState:function(st){st=st||{};var wt=st.propertySet||vt;return st.propertySet=wt,this["_"+wt]={},this.saveState(st),this}})}(),function(){var $t=s.util.degreesToRadians;s.util.object.extend(s.Object.prototype,{_findTargetCorner:function(vt,b){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var pt=vt.x,st=vt.y,wt,Tt,Ct=Object.keys(this.oCoords),jt=Ct.length-1,Lt;for(this.__corner=0;jt>=0;jt--)if(Lt=Ct[jt],!!this.isControlVisible(Lt)&&(Tt=this._getImageLines(b?this.oCoords[Lt].touchCorner:this.oCoords[Lt].corner),wt=this._findCrossPoints({x:pt,y:st},Tt),wt!==0&&wt%2===1))return this.__corner=Lt,Lt;return!1},forEachControl:function(vt){for(var b in this.controls)vt(this.controls[b],b,this)},_setCornerCoords:function(){var vt=this.oCoords;for(var b in vt){var pt=this.controls[b];vt[b].corner=pt.calcCornerCoords(this.angle,this.cornerSize,vt[b].x,vt[b].y,!1),vt[b].touchCorner=pt.calcCornerCoords(this.angle,this.touchCornerSize,vt[b].x,vt[b].y,!0)}},drawSelectionBackground:function(vt){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;vt.save();var b=this.getCenterPoint(),pt=this._calculateCurrentDimensions(),st=this.canvas.viewportTransform;return vt.translate(b.x,b.y),vt.scale(1/st[0],1/st[3]),vt.rotate($t(this.angle)),vt.fillStyle=this.selectionBackgroundColor,vt.fillRect(-pt.x/2,-pt.y/2,pt.x,pt.y),vt.restore(),this},drawBorders:function(vt,b){b=b||{};var pt=this._calculateCurrentDimensions(),st=this.borderScaleFactor,wt=pt.x+st,Tt=pt.y+st,Ct=typeof b.hasControls<"u"?b.hasControls:this.hasControls,jt=!1;return vt.save(),vt.strokeStyle=b.borderColor||this.borderColor,this._setLineDash(vt,b.borderDashArray||this.borderDashArray),vt.strokeRect(-wt/2,-Tt/2,wt,Tt),Ct&&(vt.beginPath(),this.forEachControl(function(Lt,Ht,Gt){Lt.withConnection&&Lt.getVisibility(Gt,Ht)&&(jt=!0,vt.moveTo(Lt.x*wt,Lt.y*Tt),vt.lineTo(Lt.x*wt+Lt.offsetX,Lt.y*Tt+Lt.offsetY))}),jt&&vt.stroke()),vt.restore(),this},drawBordersInGroup:function(vt,b,pt){pt=pt||{};var st=s.util.sizeAfterTransform(this.width,this.height,b),wt=this.strokeWidth,Tt=this.strokeUniform,Ct=this.borderScaleFactor,jt=st.x+wt*(Tt?this.canvas.getZoom():b.scaleX)+Ct,Lt=st.y+wt*(Tt?this.canvas.getZoom():b.scaleY)+Ct;return vt.save(),this._setLineDash(vt,pt.borderDashArray||this.borderDashArray),vt.strokeStyle=pt.borderColor||this.borderColor,vt.strokeRect(-jt/2,-Lt/2,jt,Lt),vt.restore(),this},drawControls:function(vt,b){b=b||{},vt.save();var pt=this.canvas.getRetinaScaling(),st,wt;return vt.setTransform(pt,0,0,pt,0,0),vt.strokeStyle=vt.fillStyle=b.cornerColor||this.cornerColor,this.transparentCorners||(vt.strokeStyle=b.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(vt,b.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(st=this.group.calcTransformMatrix()),this.forEachControl(function(Tt,Ct,jt){wt=jt.oCoords[Ct],Tt.getVisibility(jt,Ct)&&(st&&(wt=s.util.transformPoint(wt,st)),Tt.render(vt,wt.x,wt.y,b,jt))}),vt.restore(),this},isControlVisible:function(vt){return this.controls[vt]&&this.controls[vt].getVisibility(this,vt)},setControlVisible:function(vt,b){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[vt]=b,this},setControlsVisibility:function(vt){vt||(vt={});for(var b in vt)this.setControlVisible(b,vt[b]);return this},onDeselect:function(){},onSelect:function(){}})}(),s.util.object.extend(s.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function($t,vt){vt=vt||{};var b=function(){},pt=vt.onComplete||b,st=vt.onChange||b,wt=this;return s.util.animate({target:this,startValue:$t.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(Tt){$t.set("left",Tt),wt.requestRenderAll(),st()},onComplete:function(){$t.setCoords(),pt()}})},fxCenterObjectV:function($t,vt){vt=vt||{};var b=function(){},pt=vt.onComplete||b,st=vt.onChange||b,wt=this;return s.util.animate({target:this,startValue:$t.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(Tt){$t.set("top",Tt),wt.requestRenderAll(),st()},onComplete:function(){$t.setCoords(),pt()}})},fxRemove:function($t,vt){vt=vt||{};var b=function(){},pt=vt.onComplete||b,st=vt.onChange||b,wt=this;return s.util.animate({target:this,startValue:$t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(Tt){$t.set("opacity",Tt),wt.requestRenderAll(),st()},onComplete:function(){wt.remove($t),pt()}})}}),s.util.object.extend(s.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var $t=[],vt,b,pt=[];for(vt in arguments[0])$t.push(vt);for(var st=0,wt=$t.length;st<wt;st++)vt=$t[st],b=st!==wt-1,pt.push(this._animate(vt,arguments[0][vt],arguments[1],b));return pt}else return this._animate.apply(this,arguments)},_animate:function($t,vt,b,pt){var st=this,wt;vt=vt.toString(),b?b=s.util.object.clone(b):b={},~$t.indexOf(".")&&(wt=$t.split("."));var Tt=st.colorProperties.indexOf($t)>-1||wt&&st.colorProperties.indexOf(wt[1])>-1,Ct=wt?this.get(wt[0])[wt[1]]:this.get($t);"from"in b||(b.from=Ct),Tt||(~vt.indexOf("=")?vt=Ct+parseFloat(vt.replace("=","")):vt=parseFloat(vt));var jt={target:this,startValue:b.from,endValue:vt,byValue:b.by,easing:b.easing,duration:b.duration,abort:b.abort&&function(Lt,Ht,Gt){return b.abort.call(st,Lt,Ht,Gt)},onChange:function(Lt,Ht,Gt){wt?st[wt[0]][wt[1]]=Lt:st.set($t,Lt),!pt&&b.onChange&&b.onChange(Lt,Ht,Gt)},onComplete:function(Lt,Ht,Gt){pt||(st.setCoords(),b.onComplete&&b.onComplete(Lt,Ht,Gt))}};return Tt?s.util.animateColor(jt.startValue,jt.endValue,jt.duration,jt):s.util.animate(jt)}}),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend,pt=vt.util.object.clone,st={x1:1,x2:1,y1:1,y2:1};if(vt.Line){vt.warn("fabric.Line is already defined");return}vt.Line=vt.util.createClass(vt.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:vt.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(Tt,Ct){Tt||(Tt=[0,0,0,0]),this.callSuper("initialize",Ct),this.set("x1",Tt[0]),this.set("y1",Tt[1]),this.set("x2",Tt[2]),this.set("y2",Tt[3]),this._setWidthHeight(Ct)},_setWidthHeight:function(Tt){Tt||(Tt={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in Tt?Tt.left:this._getLeftToOriginX(),this.top="top"in Tt?Tt.top:this._getTopToOriginY()},_set:function(Tt,Ct){return this.callSuper("_set",Tt,Ct),typeof st[Tt]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:wt({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:wt({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(Tt){Tt.beginPath();var Ct=this.calcLinePoints();Tt.moveTo(Ct.x1,Ct.y1),Tt.lineTo(Ct.x2,Ct.y2),Tt.lineWidth=this.strokeWidth;var jt=Tt.strokeStyle;Tt.strokeStyle=this.stroke||Tt.fillStyle,this.stroke&&this._renderStroke(Tt),Tt.strokeStyle=jt},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(Tt){return b(this.callSuper("toObject",Tt),this.calcLinePoints())},_getNonTransformedDimensions:function(){var Tt=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(Tt.y-=this.strokeWidth),this.height===0&&(Tt.x-=this.strokeWidth)),Tt},calcLinePoints:function(){var Tt=this.x1<=this.x2?-1:1,Ct=this.y1<=this.y2?-1:1,jt=Tt*this.width*.5,Lt=Ct*this.height*.5,Ht=Tt*this.width*-.5,Gt=Ct*this.height*-.5;return{x1:jt,x2:Ht,y1:Lt,y2:Gt}},_toSVG:function(){var Tt=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',Tt.x1,'" y1="',Tt.y1,'" x2="',Tt.x2,'" y2="',Tt.y2,`" />
`]}}),vt.Line.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),vt.Line.fromElement=function(Tt,Ct,jt){jt=jt||{};var Lt=vt.parseAttributes(Tt,vt.Line.ATTRIBUTE_NAMES),Ht=[Lt.x1||0,Lt.y1||0,Lt.x2||0,Lt.y2||0];Ct(new vt.Line(Ht,b(Lt,jt)))},vt.Line.fromObject=function(Tt,Ct){function jt(Ht){delete Ht.points,Ct&&Ct(Ht)}var Lt=pt(Tt,!0);Lt.points=[Tt.x1,Tt.y1,Tt.x2,Tt.y2],vt.Object._fromObject("Line",Lt,jt,"points")};function wt(Tt,Ct){var jt=Tt.origin,Lt=Tt.axis1,Ht=Tt.axis2,Gt=Tt.dimension,Kt=Ct.nearest,tr=Ct.center,rr=Ct.farthest;return function(){switch(this.get(jt)){case Kt:return Math.min(this.get(Lt),this.get(Ht));case tr:return Math.min(this.get(Lt),this.get(Ht))+.5*this.get(Gt);case rr:return Math.max(this.get(Lt),this.get(Ht))}}}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.degreesToRadians;if(vt.Circle){vt.warn("fabric.Circle is already defined.");return}vt.Circle=vt.util.createClass(vt.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:vt.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(st,wt){return this.callSuper("_set",st,wt),st==="radius"&&this.setRadius(wt),this},toObject:function(st){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(st))},_toSVG:function(){var st,wt=0,Tt=0,Ct=(this.endAngle-this.startAngle)%360;if(Ct===0)st=["<circle ","COMMON_PARTS",'cx="'+wt+'" cy="'+Tt+'" ','r="',this.radius,`" />
`];else{var jt=b(this.startAngle),Lt=b(this.endAngle),Ht=this.radius,Gt=vt.util.cos(jt)*Ht,Kt=vt.util.sin(jt)*Ht,tr=vt.util.cos(Lt)*Ht,rr=vt.util.sin(Lt)*Ht,Lr=Ct>180?"1":"0";st=['<path d="M '+Gt+" "+Kt," A "+Ht+" "+Ht," 0 ",+Lr+" 1"," "+tr+" "+rr,'" ',"COMMON_PARTS",` />
`]}return st},_render:function(st){st.beginPath(),st.arc(0,0,this.radius,b(this.startAngle),b(this.endAngle),!1),this._renderPaintInOrder(st)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(st){return this.radius=st,this.set("width",st*2).set("height",st*2)}}),vt.Circle.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),vt.Circle.fromElement=function(st,wt){var Tt=vt.parseAttributes(st,vt.Circle.ATTRIBUTE_NAMES);if(!pt(Tt))throw new Error("value of `r` attribute is required and can not be negative");Tt.left=(Tt.left||0)-Tt.radius,Tt.top=(Tt.top||0)-Tt.radius,wt(new vt.Circle(Tt))};function pt(st){return"radius"in st&&st.radius>=0}vt.Circle.fromObject=function(st,wt){vt.Object._fromObject("Circle",st,wt)}}(a),function($t){var vt=$t.fabric||($t.fabric={});if(vt.Triangle){vt.warn("fabric.Triangle is already defined");return}vt.Triangle=vt.util.createClass(vt.Object,{type:"triangle",width:100,height:100,_render:function(b){var pt=this.width/2,st=this.height/2;b.beginPath(),b.moveTo(-pt,st),b.lineTo(0,-st),b.lineTo(pt,st),b.closePath(),this._renderPaintInOrder(b)},_toSVG:function(){var b=this.width/2,pt=this.height/2,st=[-b+" "+pt,"0 "+-pt,b+" "+pt].join(",");return["<polygon ","COMMON_PARTS",'points="',st,'" />']}}),vt.Triangle.fromObject=function(b,pt){return vt.Object._fromObject("Triangle",b,pt)}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=Math.PI*2;if(vt.Ellipse){vt.warn("fabric.Ellipse is already defined.");return}vt.Ellipse=vt.util.createClass(vt.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:vt.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(pt){this.callSuper("initialize",pt),this.set("rx",pt&&pt.rx||0),this.set("ry",pt&&pt.ry||0)},_set:function(pt,st){switch(this.callSuper("_set",pt,st),pt){case"rx":this.rx=st,this.set("width",st*2);break;case"ry":this.ry=st,this.set("height",st*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(pt){return this.callSuper("toObject",["rx","ry"].concat(pt))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(pt){pt.beginPath(),pt.save(),pt.transform(1,0,0,this.ry/this.rx,0,0),pt.arc(0,0,this.rx,0,b,!1),pt.restore(),this._renderPaintInOrder(pt)}}),vt.Ellipse.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),vt.Ellipse.fromElement=function(pt,st){var wt=vt.parseAttributes(pt,vt.Ellipse.ATTRIBUTE_NAMES);wt.left=(wt.left||0)-wt.rx,wt.top=(wt.top||0)-wt.ry,st(new vt.Ellipse(wt))},vt.Ellipse.fromObject=function(pt,st){vt.Object._fromObject("Ellipse",pt,st)}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend;if(vt.Rect){vt.warn("fabric.Rect is already defined");return}vt.Rect=vt.util.createClass(vt.Object,{stateProperties:vt.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:vt.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(pt){this.callSuper("initialize",pt),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(pt){var st=this.rx?Math.min(this.rx,this.width/2):0,wt=this.ry?Math.min(this.ry,this.height/2):0,Tt=this.width,Ct=this.height,jt=-this.width/2,Lt=-this.height/2,Ht=st!==0||wt!==0,Gt=1-.5522847498;pt.beginPath(),pt.moveTo(jt+st,Lt),pt.lineTo(jt+Tt-st,Lt),Ht&&pt.bezierCurveTo(jt+Tt-Gt*st,Lt,jt+Tt,Lt+Gt*wt,jt+Tt,Lt+wt),pt.lineTo(jt+Tt,Lt+Ct-wt),Ht&&pt.bezierCurveTo(jt+Tt,Lt+Ct-Gt*wt,jt+Tt-Gt*st,Lt+Ct,jt+Tt-st,Lt+Ct),pt.lineTo(jt+st,Lt+Ct),Ht&&pt.bezierCurveTo(jt+Gt*st,Lt+Ct,jt,Lt+Ct-Gt*wt,jt,Lt+Ct-wt),pt.lineTo(jt,Lt+wt),Ht&&pt.bezierCurveTo(jt,Lt+Gt*wt,jt+Gt*st,Lt,jt+st,Lt),pt.closePath(),this._renderPaintInOrder(pt)},toObject:function(pt){return this.callSuper("toObject",["rx","ry"].concat(pt))},_toSVG:function(){var pt=-this.width/2,st=-this.height/2;return["<rect ","COMMON_PARTS",'x="',pt,'" y="',st,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),vt.Rect.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),vt.Rect.fromElement=function(pt,st,wt){if(!pt)return st(null);wt=wt||{};var Tt=vt.parseAttributes(pt,vt.Rect.ATTRIBUTE_NAMES);Tt.left=Tt.left||0,Tt.top=Tt.top||0,Tt.height=Tt.height||0,Tt.width=Tt.width||0;var Ct=new vt.Rect(b(wt?vt.util.object.clone(wt):{},Tt));Ct.visible=Ct.visible&&Ct.width>0&&Ct.height>0,st(Ct)},vt.Rect.fromObject=function(pt,st){return vt.Object._fromObject("Rect",pt,st)}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend,pt=vt.util.array.min,st=vt.util.array.max,wt=vt.util.toFixed,Tt=vt.util.projectStrokeOnPoints;if(vt.Polyline){vt.warn("fabric.Polyline is already defined");return}vt.Polyline=vt.util.createClass(vt.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:vt.Object.prototype.cacheProperties.concat("points"),initialize:function(Ct,jt){jt=jt||{},this.points=Ct||[],this.callSuper("initialize",jt),this._setPositionDimensions(jt)},_projectStrokeOnPoints:function(){return Tt(this.points,this,!0)},_setPositionDimensions:function(Ct){var jt=this._calcDimensions(Ct),Lt,Ht=this.exactBoundingBox?this.strokeWidth:0;this.width=jt.width-Ht,this.height=jt.height-Ht,Ct.fromSVG||(Lt=this.translateToGivenOrigin({x:jt.left-this.strokeWidth/2+Ht/2,y:jt.top-this.strokeWidth/2+Ht/2},"left","top",this.originX,this.originY)),typeof Ct.left>"u"&&(this.left=Ct.fromSVG?jt.left:Lt.x),typeof Ct.top>"u"&&(this.top=Ct.fromSVG?jt.top:Lt.y),this.pathOffset={x:jt.left+this.width/2+Ht/2,y:jt.top+this.height/2+Ht/2}},_calcDimensions:function(){var Ct=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,jt=pt(Ct,"x")||0,Lt=pt(Ct,"y")||0,Ht=st(Ct,"x")||0,Gt=st(Ct,"y")||0,Kt=Ht-jt,tr=Gt-Lt;return{left:jt,top:Lt,width:Kt,height:tr}},toObject:function(Ct){return b(this.callSuper("toObject",Ct),{points:this.points.concat()})},_toSVG:function(){for(var Ct=[],jt=this.pathOffset.x,Lt=this.pathOffset.y,Ht=vt.Object.NUM_FRACTION_DIGITS,Gt=0,Kt=this.points.length;Gt<Kt;Gt++)Ct.push(wt(this.points[Gt].x-jt,Ht),",",wt(this.points[Gt].y-Lt,Ht)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',Ct.join(""),`" />
`]},commonRender:function(Ct){var jt,Lt=this.points.length,Ht=this.pathOffset.x,Gt=this.pathOffset.y;if(!Lt||isNaN(this.points[Lt-1].y))return!1;Ct.beginPath(),Ct.moveTo(this.points[0].x-Ht,this.points[0].y-Gt);for(var Kt=0;Kt<Lt;Kt++)jt=this.points[Kt],Ct.lineTo(jt.x-Ht,jt.y-Gt);return!0},_render:function(Ct){this.commonRender(Ct)&&this._renderPaintInOrder(Ct)},complexity:function(){return this.get("points").length}}),vt.Polyline.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat(),vt.Polyline.fromElementGenerator=function(Ct){return function(jt,Lt,Ht){if(!jt)return Lt(null);Ht||(Ht={});var Gt=vt.parsePointsAttribute(jt.getAttribute("points")),Kt=vt.parseAttributes(jt,vt[Ct].ATTRIBUTE_NAMES);Kt.fromSVG=!0,Lt(new vt[Ct](Gt,b(Kt,Ht)))}},vt.Polyline.fromElement=vt.Polyline.fromElementGenerator("Polyline"),vt.Polyline.fromObject=function(Ct,jt){return vt.Object._fromObject("Polyline",Ct,jt,"points")}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.projectStrokeOnPoints;if(vt.Polygon){vt.warn("fabric.Polygon is already defined");return}vt.Polygon=vt.util.createClass(vt.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return b(this.points,this)},_render:function(pt){this.commonRender(pt)&&(pt.closePath(),this._renderPaintInOrder(pt))}}),vt.Polygon.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat(),vt.Polygon.fromElement=vt.Polyline.fromElementGenerator("Polygon"),vt.Polygon.fromObject=function(pt,st){vt.Object._fromObject("Polygon",pt,st,"points")}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.array.min,pt=vt.util.array.max,st=vt.util.object.extend,wt=vt.util.object.clone,Tt=vt.util.toFixed;if(vt.Path){vt.warn("fabric.Path is already defined");return}vt.Path=vt.util.createClass(vt.Object,{type:"path",path:null,cacheProperties:vt.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:vt.Object.prototype.stateProperties.concat("path"),initialize:function(Ct,jt){jt=wt(jt||{}),delete jt.path,this.callSuper("initialize",jt),this._setPath(Ct||[],jt)},_setPath:function(Ct,jt){this.path=vt.util.makePathSimpler(Array.isArray(Ct)?Ct:vt.util.parsePath(Ct)),vt.Polyline.prototype._setPositionDimensions.call(this,jt||{})},_renderPathCommands:function(Ct){var jt,Lt=0,Ht=0,Gt=0,Kt=0,tr=0,rr=0,Lr=-this.pathOffset.x,jr=-this.pathOffset.y;Ct.beginPath();for(var Yr=0,An=this.path.length;Yr<An;++Yr)switch(jt=this.path[Yr],jt[0]){case"L":Gt=jt[1],Kt=jt[2],Ct.lineTo(Gt+Lr,Kt+jr);break;case"M":Gt=jt[1],Kt=jt[2],Lt=Gt,Ht=Kt,Ct.moveTo(Gt+Lr,Kt+jr);break;case"C":Gt=jt[5],Kt=jt[6],tr=jt[3],rr=jt[4],Ct.bezierCurveTo(jt[1]+Lr,jt[2]+jr,tr+Lr,rr+jr,Gt+Lr,Kt+jr);break;case"Q":Ct.quadraticCurveTo(jt[1]+Lr,jt[2]+jr,jt[3]+Lr,jt[4]+jr),Gt=jt[3],Kt=jt[4],tr=jt[1],rr=jt[2];break;case"z":case"Z":Gt=Lt,Kt=Ht,Ct.closePath();break}},_render:function(Ct){this._renderPathCommands(Ct),this._renderPaintInOrder(Ct)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(Ct){return st(this.callSuper("toObject",Ct),{path:this.path.map(function(jt){return jt.slice()})})},toDatalessObject:function(Ct){var jt=this.toObject(["sourcePath"].concat(Ct));return jt.sourcePath&&delete jt.path,jt},_toSVG:function(){var Ct=vt.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',Ct,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var Ct=vt.Object.NUM_FRACTION_DIGITS;return" translate("+Tt(-this.pathOffset.x,Ct)+", "+Tt(-this.pathOffset.y,Ct)+")"},toClipPathSVG:function(Ct){var jt=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:Ct,additionalTransform:jt})},toSVG:function(Ct){var jt=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:Ct,additionalTransform:jt})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var Ct=[],jt=[],Lt,Ht=0,Gt=0,Kt=0,tr=0,rr,Lr=0,jr=this.path.length;Lr<jr;++Lr){switch(Lt=this.path[Lr],Lt[0]){case"L":Kt=Lt[1],tr=Lt[2],rr=[];break;case"M":Kt=Lt[1],tr=Lt[2],Ht=Kt,Gt=tr,rr=[];break;case"C":rr=vt.util.getBoundsOfCurve(Kt,tr,Lt[1],Lt[2],Lt[3],Lt[4],Lt[5],Lt[6]),Kt=Lt[5],tr=Lt[6];break;case"Q":rr=vt.util.getBoundsOfCurve(Kt,tr,Lt[1],Lt[2],Lt[1],Lt[2],Lt[3],Lt[4]),Kt=Lt[3],tr=Lt[4];break;case"z":case"Z":Kt=Ht,tr=Gt;break}rr.forEach(function(n0){Ct.push(n0.x),jt.push(n0.y)}),Ct.push(Kt),jt.push(tr)}var Yr=b(Ct)||0,An=b(jt)||0,No=pt(Ct)||0,o0=pt(jt)||0,t0=No-Yr,c0=o0-An;return{left:Yr,top:An,width:t0,height:c0}}}),vt.Path.fromObject=function(Ct,jt){if(typeof Ct.sourcePath=="string"){var Lt=Ct.sourcePath;vt.loadSVGFromURL(Lt,function(Ht){var Gt=Ht[0];Gt.setOptions(Ct),Ct.clipPath?vt.util.enlivenObjects([Ct.clipPath],function(Kt){Gt.clipPath=Kt[0],jt&&jt(Gt)}):jt&&jt(Gt)})}else vt.Object._fromObject("Path",Ct,jt,"path")},vt.Path.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat(["d"]),vt.Path.fromElement=function(Ct,jt,Lt){var Ht=vt.parseAttributes(Ct,vt.Path.ATTRIBUTE_NAMES);Ht.fromSVG=!0,jt(new vt.Path(Ht.d,st(Ht,Lt)))}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.array.min,pt=vt.util.array.max;vt.Group||(vt.Group=vt.util.createClass(vt.Object,vt.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(st,wt,Tt){wt=wt||{},this._objects=[],Tt&&this.callSuper("initialize",wt),this._objects=st||[];for(var Ct=this._objects.length;Ct--;)this._objects[Ct].group=this;if(Tt)this._updateObjectsACoords();else{var jt=wt&&wt.centerPoint;wt.originX!==void 0&&(this.originX=wt.originX),wt.originY!==void 0&&(this.originY=wt.originY),jt||this._calcBounds(),this._updateObjectsCoords(jt),delete wt.centerPoint,this.callSuper("initialize",wt)}this.setCoords()},_updateObjectsACoords:function(){for(var st=!0,wt=this._objects.length;wt--;)this._objects[wt].setCoords(st)},_updateObjectsCoords:function(wt){for(var wt=wt||this.getCenterPoint(),Tt=this._objects.length;Tt--;)this._updateObjectCoords(this._objects[Tt],wt)},_updateObjectCoords:function(st,wt){var Tt=st.left,Ct=st.top,jt=!0;st.set({left:Tt-wt.x,top:Ct-wt.y}),st.group=this,st.setCoords(jt)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(st){var wt=!!this.group;return this._restoreObjectsState(),vt.util.resetObjectTransform(this),st&&(wt&&vt.util.removeTransformFromObject(st,this.group.calcTransformMatrix()),this._objects.push(st),st.group=this,st._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,wt?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(st){return this._restoreObjectsState(),vt.util.resetObjectTransform(this),this.remove(st),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(st){this.dirty=!0,st.group=this,st._set("canvas",this.canvas)},_onObjectRemoved:function(st){this.dirty=!0,delete st.group},_set:function(st,wt){var Tt=this._objects.length;if(this.useSetOnGroup)for(;Tt--;)this._objects[Tt].setOnGroup(st,wt);if(st==="canvas")for(;Tt--;)this._objects[Tt]._set(st,wt);vt.Object.prototype._set.call(this,st,wt)},toObject:function(st){var wt=this.includeDefaultValues,Tt=this._objects.filter(function(jt){return!jt.excludeFromExport}).map(function(jt){var Lt=jt.includeDefaultValues;jt.includeDefaultValues=wt;var Ht=jt.toObject(st);return jt.includeDefaultValues=Lt,Ht}),Ct=vt.Object.prototype.toObject.call(this,st);return Ct.objects=Tt,Ct},toDatalessObject:function(st){var wt,Tt=this.sourcePath;if(Tt)wt=Tt;else{var Ct=this.includeDefaultValues;wt=this._objects.map(function(Lt){var Ht=Lt.includeDefaultValues;Lt.includeDefaultValues=Ct;var Gt=Lt.toDatalessObject(st);return Lt.includeDefaultValues=Ht,Gt})}var jt=vt.Object.prototype.toDatalessObject.call(this,st);return jt.objects=wt,jt},render:function(st){this._transformDone=!0,this.callSuper("render",st),this._transformDone=!1},shouldCache:function(){var st=vt.Object.prototype.shouldCache.call(this);if(st){for(var wt=0,Tt=this._objects.length;wt<Tt;wt++)if(this._objects[wt].willDrawShadow())return this.ownCaching=!1,!1}return st},willDrawShadow:function(){if(vt.Object.prototype.willDrawShadow.call(this))return!0;for(var st=0,wt=this._objects.length;st<wt;st++)if(this._objects[st].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(st){for(var wt=0,Tt=this._objects.length;wt<Tt;wt++)this._objects[wt].render(st);this._drawClipPath(st,this.clipPath)},isCacheDirty:function(st){if(this.callSuper("isCacheDirty",st))return!0;if(!this.statefullCache)return!1;for(var wt=0,Tt=this._objects.length;wt<Tt;wt++)if(this._objects[wt].isCacheDirty(!0)){if(this._cacheCanvas){var Ct=this.cacheWidth/this.zoomX,jt=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-Ct/2,-jt/2,Ct,jt)}return!0}return!1},_restoreObjectsState:function(){var st=this.calcOwnMatrix();return this._objects.forEach(function(wt){vt.util.addTransformToObject(wt,st),delete wt.group,wt.setCoords()}),this},destroy:function(){return this._objects.forEach(function(st){st.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(st){st.dispose&&st.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var st=this._objects,wt=this.canvas;this._objects=[];var Tt=this.toObject();delete Tt.objects;var Ct=new vt.ActiveSelection([]);return Ct.set(Tt),Ct.type="activeSelection",wt.remove(this),st.forEach(function(jt){jt.group=Ct,jt.dirty=!0,wt.add(jt)}),Ct.canvas=wt,Ct._objects=st,wt._activeObject=Ct,Ct.setCoords(),Ct}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var st=!0;return this.forEachObject(function(wt){wt.setCoords(st)}),this},_calcBounds:function(st){for(var wt=[],Tt=[],Ct,jt,Lt,Ht=["tr","br","bl","tl"],Gt=0,Kt=this._objects.length,tr,rr=Ht.length;Gt<Kt;++Gt){for(Ct=this._objects[Gt],Lt=Ct.calcACoords(),tr=0;tr<rr;tr++)jt=Ht[tr],wt.push(Lt[jt].x),Tt.push(Lt[jt].y);Ct.aCoords=Lt}this._getBounds(wt,Tt,st)},_getBounds:function(st,wt,Tt){var Ct=new vt.Point(b(st),b(wt)),jt=new vt.Point(pt(st),pt(wt)),Lt=Ct.y||0,Ht=Ct.x||0,Gt=jt.x-Ct.x||0,Kt=jt.y-Ct.y||0;this.width=Gt,this.height=Kt,Tt||this.setPositionByOrigin({x:Ht,y:Lt},"left","top")},_toSVG:function(st){for(var wt=["<g ","COMMON_PARTS",` >
`],Tt=0,Ct=this._objects.length;Tt<Ct;Tt++)wt.push("		",this._objects[Tt].toSVG(st));return wt.push(`</g>
`),wt},getSvgStyles:function(){var st=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",wt=this.visible?"":" visibility: hidden;";return[st,this.getSvgFilter(),wt].join("")},toClipPathSVG:function(st){for(var wt=[],Tt=0,Ct=this._objects.length;Tt<Ct;Tt++)wt.push("	",this._objects[Tt].toClipPathSVG(st));return this._createBaseClipPathSVGMarkup(wt,{reviver:st})}}),vt.Group.fromObject=function(st,wt){var Tt=st.objects,Ct=vt.util.object.clone(st,!0);if(delete Ct.objects,typeof Tt=="string"){vt.loadSVGFromURL(Tt,function(jt){var Lt=vt.util.groupSVGElements(jt,st,Tt),Ht=Ct.clipPath;delete Ct.clipPath,Lt.set(Ct),Ht?vt.util.enlivenObjects([Ht],function(Gt){Lt.clipPath=Gt[0],wt&&wt(Lt)}):wt&&wt(Lt)});return}vt.util.enlivenObjects(Tt,function(jt){vt.util.enlivenObjectEnlivables(st,Ct,function(){wt&&wt(new vt.Group(jt,Ct,!0))})})})}(a),function($t){var vt=$t.fabric||($t.fabric={});vt.ActiveSelection||(vt.ActiveSelection=vt.util.createClass(vt.Group,{type:"activeSelection",initialize:function(b,pt){pt=pt||{},this._objects=b||[];for(var st=this._objects.length;st--;)this._objects[st].group=this;pt.originX&&(this.originX=pt.originX),pt.originY&&(this.originY=pt.originY),this._calcBounds(),this._updateObjectsCoords(),vt.Object.prototype.initialize.call(this,pt),this.setCoords()},toGroup:function(){var b=this._objects.concat();this._objects=[];var pt=vt.Object.prototype.toObject.call(this),st=new vt.Group([]);if(delete pt.type,st.set(pt),b.forEach(function(Tt){Tt.canvas.remove(Tt),Tt.group=st}),st._objects=b,!this.canvas)return st;var wt=this.canvas;return wt.add(st),wt._activeObject=st,st.setCoords(),st},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(b,pt,st){b.save(),b.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",b,pt),st=st||{},typeof st.hasControls>"u"&&(st.hasControls=!1),st.forActiveSelection=!0;for(var wt=0,Tt=this._objects.length;wt<Tt;wt++)this._objects[wt]._renderControls(b,st);b.restore()}}),vt.ActiveSelection.fromObject=function(b,pt){vt.util.enlivenObjects(b.objects,function(st){delete b.objects,pt&&pt(new vt.ActiveSelection(st,b,!0))})})}(a),function($t){var vt=s.util.object.extend;if($t.fabric||($t.fabric={}),$t.fabric.Image){s.warn("fabric.Image is already defined.");return}s.Image=s.util.createClass(s.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:s.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:s.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(b,pt){pt||(pt={}),this.filters=[],this.cacheKey="texture"+s.Object.__uid++,this.callSuper("initialize",pt),this._initElement(b,pt)},getElement:function(){return this._element||{}},setElement:function(b,pt){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=b,this._originalElement=b,this._initConfig(pt),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(b){var pt=s.filterBackend;pt&&pt.evictCachesForKey&&pt.evictCachesForKey(b)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(b){s.util.cleanUpJsdomNode(this[b]),this[b]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var b=this.getElement();return{width:b.naturalWidth||b.width,height:b.naturalHeight||b.height}},_stroke:function(b){if(!(!this.stroke||this.strokeWidth===0)){var pt=this.width/2,st=this.height/2;b.beginPath(),b.moveTo(-pt,-st),b.lineTo(pt,-st),b.lineTo(pt,st),b.lineTo(-pt,st),b.lineTo(-pt,-st),b.closePath()}},toObject:function(b){var pt=[];this.filters.forEach(function(wt){wt&&pt.push(wt.toObject())});var st=vt(this.callSuper("toObject",["cropX","cropY"].concat(b)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:pt});return this.resizeFilter&&(st.resizeFilter=this.resizeFilter.toObject()),st},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var b=[],pt=[],st,wt=this._element,Tt=-this.width/2,Ct=-this.height/2,jt="",Lt="";if(!wt)return[];if(this.hasCrop()){var Ht=s.Object.__uid++;b.push('<clipPath id="imageCrop_'+Ht+`">
`,'	<rect x="'+Tt+'" y="'+Ct+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),jt=' clip-path="url(#imageCrop_'+Ht+')" '}if(this.imageSmoothing||(Lt='" image-rendering="optimizeSpeed'),pt.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',Tt-this.cropX,'" y="',Ct-this.cropY,'" width="',wt.width||wt.naturalWidth,'" height="',wt.height||wt.height,Lt,'"',jt,`></image>
`),this.stroke||this.strokeDashArray){var Gt=this.fill;this.fill=null,st=["	<rect ",'x="',Tt,'" y="',Ct,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=Gt}return this.paintFirst!=="fill"?b=b.concat(st,pt):b=b.concat(pt,st),b},getSrc:function(b){var pt=b?this._element:this._originalElement;return pt?pt.toDataURL?pt.toDataURL():this.srcFromAttribute?pt.getAttribute("src"):pt.src:this.src||""},setSrc:function(b,pt,st){return s.util.loadImage(b,function(wt,Tt){this.setElement(wt,st),this._setWidthHeight(),pt&&pt(this,Tt)},this,st&&st.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var b=this.resizeFilter,pt=this.minimumScaleTrigger,st=this.getTotalObjectScaling(),wt=st.scaleX,Tt=st.scaleY,Ct=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!b||wt>pt&&Tt>pt){this._element=Ct,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=wt,this._lastScaleY=Tt;return}s.filterBackend||(s.filterBackend=s.initFilterBackend());var jt=s.util.createCanvasElement(),Lt=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,Ht=Ct.width,Gt=Ct.height;jt.width=Ht,jt.height=Gt,this._element=jt,this._lastScaleX=b.scaleX=wt,this._lastScaleY=b.scaleY=Tt,s.filterBackend.applyFilters([b],Ct,Ht,Gt,this._element,Lt),this._filterScalingX=jt.width/this._originalElement.width,this._filterScalingY=jt.height/this._originalElement.height},applyFilters:function(b){if(b=b||this.filters||[],b=b.filter(function(Ct){return Ct&&!Ct.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),b.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var pt=this._originalElement,st=pt.naturalWidth||pt.width,wt=pt.naturalHeight||pt.height;if(this._element===this._originalElement){var Tt=s.util.createCanvasElement();Tt.width=st,Tt.height=wt,this._element=Tt,this._filteredEl=Tt}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,st,wt),this._lastScaleX=1,this._lastScaleY=1;return s.filterBackend||(s.filterBackend=s.initFilterBackend()),s.filterBackend.applyFilters(b,this._originalElement,st,wt,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(b){s.util.setImageSmoothing(b,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(b),this._renderPaintInOrder(b)},drawCacheOnCanvas:function(b){s.util.setImageSmoothing(b,this.imageSmoothing),s.Object.prototype.drawCacheOnCanvas.call(this,b)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(b){var pt=this._element;if(pt){var st=this._filterScalingX,wt=this._filterScalingY,Tt=this.width,Ct=this.height,jt=Math.min,Lt=Math.max,Ht=Lt(this.cropX,0),Gt=Lt(this.cropY,0),Kt=pt.naturalWidth||pt.width,tr=pt.naturalHeight||pt.height,rr=Ht*st,Lr=Gt*wt,jr=jt(Tt*st,Kt-rr),Yr=jt(Ct*wt,tr-Lr),An=-Tt/2,No=-Ct/2,o0=jt(Tt,Kt/st-Ht),t0=jt(Ct,tr/wt-Gt);pt&&b.drawImage(pt,rr,Lr,jr,Yr,An,No,o0,t0)}},_needsResize:function(){var b=this.getTotalObjectScaling();return b.scaleX!==this._lastScaleX||b.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(b,pt){this.setElement(s.util.getById(b),pt),s.util.addClass(this.getElement(),s.Image.CSS_CANVAS)},_initConfig:function(b){b||(b={}),this.setOptions(b),this._setWidthHeight(b)},_initFilters:function(b,pt){b&&b.length?s.util.enlivenObjects(b,function(st){pt&&pt(st)},"fabric.Image.filters"):pt&&pt()},_setWidthHeight:function(b){b||(b={});var pt=this.getElement();this.width=b.width||pt.naturalWidth||pt.width||0,this.height=b.height||pt.naturalHeight||pt.height||0},parsePreserveAspectRatioAttribute:function(){var b=s.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),pt=this._element.width,st=this._element.height,wt=1,Tt=1,Ct=0,jt=0,Lt=0,Ht=0,Gt,Kt=this.width,tr=this.height,rr={width:Kt,height:tr};return b&&(b.alignX!=="none"||b.alignY!=="none")?(b.meetOrSlice==="meet"&&(wt=Tt=s.util.findScaleToFit(this._element,rr),Gt=(Kt-pt*wt)/2,b.alignX==="Min"&&(Ct=-Gt),b.alignX==="Max"&&(Ct=Gt),Gt=(tr-st*Tt)/2,b.alignY==="Min"&&(jt=-Gt),b.alignY==="Max"&&(jt=Gt)),b.meetOrSlice==="slice"&&(wt=Tt=s.util.findScaleToCover(this._element,rr),Gt=pt-Kt/wt,b.alignX==="Mid"&&(Lt=Gt/2),b.alignX==="Max"&&(Lt=Gt),Gt=st-tr/Tt,b.alignY==="Mid"&&(Ht=Gt/2),b.alignY==="Max"&&(Ht=Gt),pt=Kt/wt,st=tr/Tt)):(wt=Kt/pt,Tt=tr/st),{width:pt,height:st,scaleX:wt,scaleY:Tt,offsetLeft:Ct,offsetTop:jt,cropX:Lt,cropY:Ht}}}),s.Image.CSS_CANVAS="canvas-img",s.Image.prototype.getSvgSrc=s.Image.prototype.getSrc,s.Image.fromObject=function(b,pt){var st=s.util.object.clone(b);s.util.loadImage(st.src,function(wt,Tt){if(Tt){pt&&pt(null,!0);return}s.Image.prototype._initFilters.call(st,st.filters,function(Ct){st.filters=Ct||[],s.Image.prototype._initFilters.call(st,[st.resizeFilter],function(jt){st.resizeFilter=jt[0],s.util.enlivenObjectEnlivables(st,st,function(){var Lt=new s.Image(wt,st);pt(Lt,!1)})})})},null,st.crossOrigin)},s.Image.fromURL=function(b,pt,st){s.util.loadImage(b,function(wt,Tt){pt&&pt(new s.Image(wt,st),Tt)},null,st&&st.crossOrigin)},s.Image.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),s.Image.fromElement=function(b,pt,st){var wt=s.parseAttributes(b,s.Image.ATTRIBUTE_NAMES);s.Image.fromURL(wt["xlink:href"],pt,vt(st?s.util.object.clone(st):{},wt))}}(a),s.util.object.extend(s.Object.prototype,{_getAngleValueForStraighten:function(){var $t=this.angle%360;return $t>0?Math.round(($t-1)/90)*90:Math.round($t/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function($t){$t=$t||{};var vt=function(){},b=$t.onComplete||vt,pt=$t.onChange||vt,st=this;return s.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(wt){st.rotate(wt),pt()},onComplete:function(){st.setCoords(),b()}})}}),s.util.object.extend(s.StaticCanvas.prototype,{straightenObject:function($t){return $t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function($t){return $t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function $t(b,pt){var st="precision "+pt+` float;
void main(){}`,wt=b.createShader(b.FRAGMENT_SHADER);return b.shaderSource(wt,st),b.compileShader(wt),!!b.getShaderParameter(wt,b.COMPILE_STATUS)}s.isWebglSupported=function(b){if(s.isLikelyNode)return!1;b=b||s.WebglFilterBackend.prototype.tileSize;var pt=document.createElement("canvas"),st=pt.getContext("webgl")||pt.getContext("experimental-webgl"),wt=!1;if(st){s.maxTextureSize=st.getParameter(st.MAX_TEXTURE_SIZE),wt=s.maxTextureSize>=b;for(var Tt=["highp","mediump","lowp"],Ct=0;Ct<3;Ct++)if($t(st,Tt[Ct])){s.webGlPrecision=Tt[Ct];break}}return this.isSupported=wt,wt},s.WebglFilterBackend=vt;function vt(b){b&&b.tileSize&&(this.tileSize=b.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}vt.prototype={tileSize:2048,resources:{},setupGLContext:function(b,pt){this.dispose(),this.createWebGLCanvas(b,pt),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(b,pt)},chooseFastestCopyGLTo2DMethod:function(b,pt){var st=typeof window.performance<"u",wt;try{new ImageData(1,1),wt=!0}catch{wt=!1}var Tt=typeof ArrayBuffer<"u",Ct=typeof Uint8ClampedArray<"u";if(st&&wt&&Tt&&Ct){var jt=s.util.createCanvasElement(),Lt=new ArrayBuffer(b*pt*4);if(s.forceGLPutImageData){this.imageBuffer=Lt,this.copyGLTo2D=at;return}var Ht={imageBuffer:Lt,destinationWidth:b,destinationHeight:pt,targetCanvas:jt},Gt,Kt,tr;jt.width=b,jt.height=pt,Gt=window.performance.now(),g.call(Ht,this.gl,Ht),Kt=window.performance.now()-Gt,Gt=window.performance.now(),at.call(Ht,this.gl,Ht),tr=window.performance.now()-Gt,Kt>tr?(this.imageBuffer=Lt,this.copyGLTo2D=at):this.copyGLTo2D=g}},createWebGLCanvas:function(b,pt){var st=s.util.createCanvasElement();st.width=b,st.height=pt;var wt={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},Tt=st.getContext("webgl",wt);Tt||(Tt=st.getContext("experimental-webgl",wt)),Tt&&(Tt.clearColor(0,0,0,0),this.canvas=st,this.gl=Tt)},applyFilters:function(b,pt,st,wt,Tt,Ct){var jt=this.gl,Lt;Ct&&(Lt=this.getCachedTexture(Ct,pt));var Ht={originalWidth:pt.width||pt.originalWidth,originalHeight:pt.height||pt.originalHeight,sourceWidth:st,sourceHeight:wt,destinationWidth:st,destinationHeight:wt,context:jt,sourceTexture:this.createTexture(jt,st,wt,!Lt&&pt),targetTexture:this.createTexture(jt,st,wt),originalTexture:Lt||this.createTexture(jt,st,wt,!Lt&&pt),passes:b.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:Tt},Gt=jt.createFramebuffer();return jt.bindFramebuffer(jt.FRAMEBUFFER,Gt),b.forEach(function(Kt){Kt&&Kt.applyTo(Ht)}),et(Ht),this.copyGLTo2D(jt,Ht),jt.bindTexture(jt.TEXTURE_2D,null),jt.deleteTexture(Ht.sourceTexture),jt.deleteTexture(Ht.targetTexture),jt.deleteFramebuffer(Gt),Tt.getContext("2d").setTransform(1,0,0,1,0,0),Ht},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(b,pt,st,wt,Tt){var Ct=b.createTexture();return b.bindTexture(b.TEXTURE_2D,Ct),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,Tt||b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,Tt||b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),wt?b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,wt):b.texImage2D(b.TEXTURE_2D,0,b.RGBA,pt,st,0,b.RGBA,b.UNSIGNED_BYTE,null),Ct},getCachedTexture:function(b,pt){if(this.textureCache[b])return this.textureCache[b];var st=this.createTexture(this.gl,pt.width,pt.height,pt);return this.textureCache[b]=st,st},evictCachesForKey:function(b){this.textureCache[b]&&(this.gl.deleteTexture(this.textureCache[b]),delete this.textureCache[b])},copyGLTo2D:g,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var b=this.gl,pt={renderer:"",vendor:""};if(!b)return pt;var st=b.getExtension("WEBGL_debug_renderer_info");if(st){var wt=b.getParameter(st.UNMASKED_RENDERER_WEBGL),Tt=b.getParameter(st.UNMASKED_VENDOR_WEBGL);wt&&(pt.renderer=wt.toLowerCase()),Tt&&(pt.vendor=Tt.toLowerCase())}return this.gpuInfo=pt,pt}}}();function et($t){var vt=$t.targetCanvas,b=vt.width,pt=vt.height,st=$t.destinationWidth,wt=$t.destinationHeight;(b!==st||pt!==wt)&&(vt.width=st,vt.height=wt)}function g($t,vt){var b=$t.canvas,pt=vt.targetCanvas,st=pt.getContext("2d");st.translate(0,pt.height),st.scale(1,-1);var wt=b.height-pt.height;st.drawImage(b,0,wt,pt.width,pt.height,0,0,pt.width,pt.height)}function at($t,vt){var b=vt.targetCanvas,pt=b.getContext("2d"),st=vt.destinationWidth,wt=vt.destinationHeight,Tt=st*wt*4,Ct=new Uint8Array(this.imageBuffer,0,Tt),jt=new Uint8ClampedArray(this.imageBuffer,0,Tt);$t.readPixels(0,0,st,wt,$t.RGBA,$t.UNSIGNED_BYTE,Ct);var Lt=new ImageData(jt,st,wt);pt.putImageData(Lt,0,0)}(function(){var $t=function(){};s.Canvas2dFilterBackend=vt;function vt(){}vt.prototype={evictCachesForKey:$t,dispose:$t,clearWebGLCaches:$t,resources:{},applyFilters:function(b,pt,st,wt,Tt){var Ct=Tt.getContext("2d");Ct.drawImage(pt,0,0,st,wt);var jt=Ct.getImageData(0,0,st,wt),Lt=Ct.getImageData(0,0,st,wt),Ht={sourceWidth:st,sourceHeight:wt,imageData:jt,originalEl:pt,originalImageData:Lt,canvasEl:Tt,ctx:Ct,filterBackend:this};return b.forEach(function(Gt){Gt.applyTo(Ht)}),(Ht.imageData.width!==st||Ht.imageData.height!==wt)&&(Tt.width=Ht.imageData.width,Tt.height=Ht.imageData.height),Ct.putImageData(Ht.imageData,0,0),Ht}}})(),s.Image=s.Image||{},s.Image.filters=s.Image.filters||{},s.Image.filters.BaseFilter=s.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function($t){$t&&this.setOptions($t)},setOptions:function($t){for(var vt in $t)this[vt]=$t[vt]},createProgram:function($t,vt,b){vt=vt||this.fragmentSource,b=b||this.vertexSource,s.webGlPrecision!=="highp"&&(vt=vt.replace(/precision highp float/g,"precision "+s.webGlPrecision+" float"));var pt=$t.createShader($t.VERTEX_SHADER);if($t.shaderSource(pt,b),$t.compileShader(pt),!$t.getShaderParameter(pt,$t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+$t.getShaderInfoLog(pt));var st=$t.createShader($t.FRAGMENT_SHADER);if($t.shaderSource(st,vt),$t.compileShader(st),!$t.getShaderParameter(st,$t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+$t.getShaderInfoLog(st));var wt=$t.createProgram();if($t.attachShader(wt,pt),$t.attachShader(wt,st),$t.linkProgram(wt),!$t.getProgramParameter(wt,$t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+$t.getProgramInfoLog(wt));var Tt=this.getAttributeLocations($t,wt),Ct=this.getUniformLocations($t,wt)||{};return Ct.uStepW=$t.getUniformLocation(wt,"uStepW"),Ct.uStepH=$t.getUniformLocation(wt,"uStepH"),{program:wt,attributeLocations:Tt,uniformLocations:Ct}},getAttributeLocations:function($t,vt){return{aPosition:$t.getAttribLocation(vt,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function($t,vt,b){var pt=vt.aPosition,st=$t.createBuffer();$t.bindBuffer($t.ARRAY_BUFFER,st),$t.enableVertexAttribArray(pt),$t.vertexAttribPointer(pt,2,$t.FLOAT,!1,0,0),$t.bufferData($t.ARRAY_BUFFER,b,$t.STATIC_DRAW)},_setupFrameBuffer:function($t){var vt=$t.context,b,pt;$t.passes>1?(b=$t.destinationWidth,pt=$t.destinationHeight,($t.sourceWidth!==b||$t.sourceHeight!==pt)&&(vt.deleteTexture($t.targetTexture),$t.targetTexture=$t.filterBackend.createTexture(vt,b,pt)),vt.framebufferTexture2D(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_2D,$t.targetTexture,0)):(vt.bindFramebuffer(vt.FRAMEBUFFER,null),vt.finish())},_swapTextures:function($t){$t.passes--,$t.pass++;var vt=$t.targetTexture;$t.targetTexture=$t.sourceTexture,$t.sourceTexture=vt},isNeutralState:function(){var $t=this.mainParameter,vt=s.Image.filters[this.type].prototype;if($t)if(Array.isArray(vt[$t])){for(var b=vt[$t].length;b--;)if(this[$t][b]!==vt[$t][b])return!1;return!0}else return vt[$t]===this[$t];else return!1},applyTo:function($t){$t.webgl?(this._setupFrameBuffer($t),this.applyToWebGL($t),this._swapTextures($t)):this.applyTo2d($t)},retrieveShader:function($t){return $t.programCache.hasOwnProperty(this.type)||($t.programCache[this.type]=this.createProgram($t.context)),$t.programCache[this.type]},applyToWebGL:function($t){var vt=$t.context,b=this.retrieveShader($t);$t.pass===0&&$t.originalTexture?vt.bindTexture(vt.TEXTURE_2D,$t.originalTexture):vt.bindTexture(vt.TEXTURE_2D,$t.sourceTexture),vt.useProgram(b.program),this.sendAttributeData(vt,b.attributeLocations,$t.aPosition),vt.uniform1f(b.uniformLocations.uStepW,1/$t.sourceWidth),vt.uniform1f(b.uniformLocations.uStepH,1/$t.sourceHeight),this.sendUniformData(vt,b.uniformLocations),vt.viewport(0,0,$t.destinationWidth,$t.destinationHeight),vt.drawArrays(vt.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function($t,vt,b){$t.activeTexture(b),$t.bindTexture($t.TEXTURE_2D,vt),$t.activeTexture($t.TEXTURE0)},unbindAdditionalTexture:function($t,vt){$t.activeTexture(vt),$t.bindTexture($t.TEXTURE_2D,null),$t.activeTexture($t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function($t){this[this.mainParameter]=$t},sendUniformData:function(){},createHelpLayer:function($t){if(!$t.helpLayer){var vt=document.createElement("canvas");vt.width=$t.sourceWidth,vt.height=$t.sourceHeight,$t.helpLayer=vt}},toObject:function(){var $t={type:this.type},vt=this.mainParameter;return vt&&($t[vt]=this[vt]),$t},toJSON:function(){return this.toObject()}}),s.Image.filters.BaseFilter.fromObject=function($t,vt){var b=new s.Image.filters[$t.type]($t);return vt&&vt(b),b},function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.ColorMatrix=pt(b.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(st){this.callSuper("initialize",st),this.matrix=this.matrix.slice(0)},applyTo2d:function(st){var wt=st.imageData,Tt=wt.data,Ct=Tt.length,jt=this.matrix,Lt,Ht,Gt,Kt,tr,rr=this.colorsOnly;for(tr=0;tr<Ct;tr+=4)Lt=Tt[tr],Ht=Tt[tr+1],Gt=Tt[tr+2],rr?(Tt[tr]=Lt*jt[0]+Ht*jt[1]+Gt*jt[2]+jt[4]*255,Tt[tr+1]=Lt*jt[5]+Ht*jt[6]+Gt*jt[7]+jt[9]*255,Tt[tr+2]=Lt*jt[10]+Ht*jt[11]+Gt*jt[12]+jt[14]*255):(Kt=Tt[tr+3],Tt[tr]=Lt*jt[0]+Ht*jt[1]+Gt*jt[2]+Kt*jt[3]+jt[4]*255,Tt[tr+1]=Lt*jt[5]+Ht*jt[6]+Gt*jt[7]+Kt*jt[8]+jt[9]*255,Tt[tr+2]=Lt*jt[10]+Ht*jt[11]+Gt*jt[12]+Kt*jt[13]+jt[14]*255,Tt[tr+3]=Lt*jt[15]+Ht*jt[16]+Gt*jt[17]+Kt*jt[18]+jt[19]*255)},getUniformLocations:function(st,wt){return{uColorMatrix:st.getUniformLocation(wt,"uColorMatrix"),uConstants:st.getUniformLocation(wt,"uConstants")}},sendUniformData:function(st,wt){var Tt=this.matrix,Ct=[Tt[0],Tt[1],Tt[2],Tt[3],Tt[5],Tt[6],Tt[7],Tt[8],Tt[10],Tt[11],Tt[12],Tt[13],Tt[15],Tt[16],Tt[17],Tt[18]],jt=[Tt[4],Tt[9],Tt[14],Tt[19]];st.uniformMatrix4fv(wt.uColorMatrix,!1,Ct),st.uniform4fv(wt.uConstants,jt)}}),vt.Image.filters.ColorMatrix.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Brightness=pt(b.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(st){if(this.brightness!==0){var wt=st.imageData,Tt=wt.data,Ct,jt=Tt.length,Lt=Math.round(this.brightness*255);for(Ct=0;Ct<jt;Ct+=4)Tt[Ct]=Tt[Ct]+Lt,Tt[Ct+1]=Tt[Ct+1]+Lt,Tt[Ct+2]=Tt[Ct+2]+Lt}},getUniformLocations:function(st,wt){return{uBrightness:st.getUniformLocation(wt,"uBrightness")}},sendUniformData:function(st,wt){st.uniform1f(wt.uBrightness,this.brightness)}}),vt.Image.filters.Brightness.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend,pt=vt.Image.filters,st=vt.util.createClass;pt.Convolute=st(pt.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(wt){var Tt=Math.sqrt(this.matrix.length),Ct=this.type+"_"+Tt+"_"+(this.opaque?1:0),jt=this.fragmentSource[Ct];return wt.programCache.hasOwnProperty(Ct)||(wt.programCache[Ct]=this.createProgram(wt.context,jt)),wt.programCache[Ct]},applyTo2d:function(wt){var Tt=wt.imageData,Ct=Tt.data,jt=this.matrix,Lt=Math.round(Math.sqrt(jt.length)),Ht=Math.floor(Lt/2),Gt=Tt.width,Kt=Tt.height,tr=wt.ctx.createImageData(Gt,Kt),rr=tr.data,Lr=this.opaque?1:0,jr,Yr,An,No,o0,t0,c0,n0,Qo,Mo,zo,e0,Xr;for(zo=0;zo<Kt;zo++)for(Mo=0;Mo<Gt;Mo++){for(o0=(zo*Gt+Mo)*4,jr=0,Yr=0,An=0,No=0,Xr=0;Xr<Lt;Xr++)for(e0=0;e0<Lt;e0++)c0=zo+Xr-Ht,t0=Mo+e0-Ht,!(c0<0||c0>=Kt||t0<0||t0>=Gt)&&(n0=(c0*Gt+t0)*4,Qo=jt[Xr*Lt+e0],jr+=Ct[n0]*Qo,Yr+=Ct[n0+1]*Qo,An+=Ct[n0+2]*Qo,Lr||(No+=Ct[n0+3]*Qo));rr[o0]=jr,rr[o0+1]=Yr,rr[o0+2]=An,Lr?rr[o0+3]=Ct[o0+3]:rr[o0+3]=No}wt.imageData=tr},getUniformLocations:function(wt,Tt){return{uMatrix:wt.getUniformLocation(Tt,"uMatrix"),uOpaque:wt.getUniformLocation(Tt,"uOpaque"),uHalfSize:wt.getUniformLocation(Tt,"uHalfSize"),uSize:wt.getUniformLocation(Tt,"uSize")}},sendUniformData:function(wt,Tt){wt.uniform1fv(Tt.uMatrix,this.matrix)},toObject:function(){return b(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),vt.Image.filters.Convolute.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Grayscale=pt(b.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(st){var wt=st.imageData,Tt=wt.data,Ct,jt=Tt.length,Lt,Ht=this.mode;for(Ct=0;Ct<jt;Ct+=4)Ht==="average"?Lt=(Tt[Ct]+Tt[Ct+1]+Tt[Ct+2])/3:Ht==="lightness"?Lt=(Math.min(Tt[Ct],Tt[Ct+1],Tt[Ct+2])+Math.max(Tt[Ct],Tt[Ct+1],Tt[Ct+2]))/2:Ht==="luminosity"&&(Lt=.21*Tt[Ct]+.72*Tt[Ct+1]+.07*Tt[Ct+2]),Tt[Ct]=Lt,Tt[Ct+1]=Lt,Tt[Ct+2]=Lt},retrieveShader:function(st){var wt=this.type+"_"+this.mode;if(!st.programCache.hasOwnProperty(wt)){var Tt=this.fragmentSource[this.mode];st.programCache[wt]=this.createProgram(st.context,Tt)}return st.programCache[wt]},getUniformLocations:function(st,wt){return{uMode:st.getUniformLocation(wt,"uMode")}},sendUniformData:function(st,wt){var Tt=1;st.uniform1i(wt.uMode,Tt)},isNeutralState:function(){return!1}}),vt.Image.filters.Grayscale.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Invert=pt(b.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(st){var wt=st.imageData,Tt=wt.data,Ct,jt=Tt.length;for(Ct=0;Ct<jt;Ct+=4)Tt[Ct]=255-Tt[Ct],Tt[Ct+1]=255-Tt[Ct+1],Tt[Ct+2]=255-Tt[Ct+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(st,wt){return{uInvert:st.getUniformLocation(wt,"uInvert")}},sendUniformData:function(st,wt){st.uniform1i(wt.uInvert,this.invert)}}),vt.Image.filters.Invert.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend,pt=vt.Image.filters,st=vt.util.createClass;pt.Noise=st(pt.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(wt){if(this.noise!==0){var Tt=wt.imageData,Ct=Tt.data,jt,Lt=Ct.length,Ht=this.noise,Gt;for(jt=0,Lt=Ct.length;jt<Lt;jt+=4)Gt=(.5-Math.random())*Ht,Ct[jt]+=Gt,Ct[jt+1]+=Gt,Ct[jt+2]+=Gt}},getUniformLocations:function(wt,Tt){return{uNoise:wt.getUniformLocation(Tt,"uNoise"),uSeed:wt.getUniformLocation(Tt,"uSeed")}},sendUniformData:function(wt,Tt){wt.uniform1f(Tt.uNoise,this.noise/255),wt.uniform1f(Tt.uSeed,Math.random())},toObject:function(){return b(this.callSuper("toObject"),{noise:this.noise})}}),vt.Image.filters.Noise.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Pixelate=pt(b.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(st){var wt=st.imageData,Tt=wt.data,Ct=wt.height,jt=wt.width,Lt,Ht,Gt,Kt,tr,rr,Lr,jr,Yr,An,No;for(Ht=0;Ht<Ct;Ht+=this.blocksize)for(Gt=0;Gt<jt;Gt+=this.blocksize)for(Lt=Ht*4*jt+Gt*4,Kt=Tt[Lt],tr=Tt[Lt+1],rr=Tt[Lt+2],Lr=Tt[Lt+3],An=Math.min(Ht+this.blocksize,Ct),No=Math.min(Gt+this.blocksize,jt),jr=Ht;jr<An;jr++)for(Yr=Gt;Yr<No;Yr++)Lt=jr*4*jt+Yr*4,Tt[Lt]=Kt,Tt[Lt+1]=tr,Tt[Lt+2]=rr,Tt[Lt+3]=Lr},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(st,wt){return{uBlocksize:st.getUniformLocation(wt,"uBlocksize"),uStepW:st.getUniformLocation(wt,"uStepW"),uStepH:st.getUniformLocation(wt,"uStepH")}},sendUniformData:function(st,wt){st.uniform1f(wt.uBlocksize,this.blocksize)}}),vt.Image.filters.Pixelate.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.extend,pt=vt.Image.filters,st=vt.util.createClass;pt.RemoveColor=st(pt.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(wt){var Tt=wt.imageData,Ct=Tt.data,jt,Lt=this.distance*255,Ht,Gt,Kt,tr=new vt.Color(this.color).getSource(),rr=[tr[0]-Lt,tr[1]-Lt,tr[2]-Lt],Lr=[tr[0]+Lt,tr[1]+Lt,tr[2]+Lt];for(jt=0;jt<Ct.length;jt+=4)Ht=Ct[jt],Gt=Ct[jt+1],Kt=Ct[jt+2],Ht>rr[0]&&Gt>rr[1]&&Kt>rr[2]&&Ht<Lr[0]&&Gt<Lr[1]&&Kt<Lr[2]&&(Ct[jt+3]=0)},getUniformLocations:function(wt,Tt){return{uLow:wt.getUniformLocation(Tt,"uLow"),uHigh:wt.getUniformLocation(Tt,"uHigh")}},sendUniformData:function(wt,Tt){var Ct=new vt.Color(this.color).getSource(),jt=parseFloat(this.distance),Lt=[0+Ct[0]/255-jt,0+Ct[1]/255-jt,0+Ct[2]/255-jt,1],Ht=[Ct[0]/255+jt,Ct[1]/255+jt,Ct[2]/255+jt,1];wt.uniform4fv(Tt.uLow,Lt),wt.uniform4fv(Tt.uHigh,Ht)},toObject:function(){return b(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),vt.Image.filters.RemoveColor.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass,st={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var wt in st)b[wt]=pt(b.ColorMatrix,{type:wt,matrix:st[wt],mainParameter:!1,colorsOnly:!0}),vt.Image.filters[wt].fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric,b=vt.Image.filters,pt=vt.util.createClass;b.BlendColor=pt(b.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(st){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[st]+`}
}`},retrieveShader:function(st){var wt=this.type+"_"+this.mode,Tt;return st.programCache.hasOwnProperty(wt)||(Tt=this.buildSource(this.mode),st.programCache[wt]=this.createProgram(st.context,Tt)),st.programCache[wt]},applyTo2d:function(st){var wt=st.imageData,Tt=wt.data,Ct=Tt.length,jt,Lt,Ht,Gt,Kt,tr,rr,Lr=1-this.alpha;rr=new vt.Color(this.color).getSource(),jt=rr[0]*this.alpha,Lt=rr[1]*this.alpha,Ht=rr[2]*this.alpha;for(var jr=0;jr<Ct;jr+=4)switch(Gt=Tt[jr],Kt=Tt[jr+1],tr=Tt[jr+2],this.mode){case"multiply":Tt[jr]=Gt*jt/255,Tt[jr+1]=Kt*Lt/255,Tt[jr+2]=tr*Ht/255;break;case"screen":Tt[jr]=255-(255-Gt)*(255-jt)/255,Tt[jr+1]=255-(255-Kt)*(255-Lt)/255,Tt[jr+2]=255-(255-tr)*(255-Ht)/255;break;case"add":Tt[jr]=Gt+jt,Tt[jr+1]=Kt+Lt,Tt[jr+2]=tr+Ht;break;case"diff":case"difference":Tt[jr]=Math.abs(Gt-jt),Tt[jr+1]=Math.abs(Kt-Lt),Tt[jr+2]=Math.abs(tr-Ht);break;case"subtract":Tt[jr]=Gt-jt,Tt[jr+1]=Kt-Lt,Tt[jr+2]=tr-Ht;break;case"darken":Tt[jr]=Math.min(Gt,jt),Tt[jr+1]=Math.min(Kt,Lt),Tt[jr+2]=Math.min(tr,Ht);break;case"lighten":Tt[jr]=Math.max(Gt,jt),Tt[jr+1]=Math.max(Kt,Lt),Tt[jr+2]=Math.max(tr,Ht);break;case"overlay":Tt[jr]=jt<128?2*Gt*jt/255:255-2*(255-Gt)*(255-jt)/255,Tt[jr+1]=Lt<128?2*Kt*Lt/255:255-2*(255-Kt)*(255-Lt)/255,Tt[jr+2]=Ht<128?2*tr*Ht/255:255-2*(255-tr)*(255-Ht)/255;break;case"exclusion":Tt[jr]=jt+Gt-2*jt*Gt/255,Tt[jr+1]=Lt+Kt-2*Lt*Kt/255,Tt[jr+2]=Ht+tr-2*Ht*tr/255;break;case"tint":Tt[jr]=jt+Gt*Lr,Tt[jr+1]=Lt+Kt*Lr,Tt[jr+2]=Ht+tr*Lr}},getUniformLocations:function(st,wt){return{uColor:st.getUniformLocation(wt,"uColor")}},sendUniformData:function(st,wt){var Tt=new vt.Color(this.color).getSource();Tt[0]=this.alpha*Tt[0]/255,Tt[1]=this.alpha*Tt[1]/255,Tt[2]=this.alpha*Tt[2]/255,Tt[3]=this.alpha,st.uniform4fv(wt.uColor,Tt)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),vt.Image.filters.BlendColor.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric,b=vt.Image.filters,pt=vt.util.createClass;b.BlendImage=pt(b.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(st){var wt=this.type+"_"+this.mode,Tt=this.fragmentSource[this.mode];return st.programCache.hasOwnProperty(wt)||(st.programCache[wt]=this.createProgram(st.context,Tt)),st.programCache[wt]},applyToWebGL:function(st){var wt=st.context,Tt=this.createTexture(st.filterBackend,this.image);this.bindAdditionalTexture(wt,Tt,wt.TEXTURE1),this.callSuper("applyToWebGL",st),this.unbindAdditionalTexture(wt,wt.TEXTURE1)},createTexture:function(st,wt){return st.getCachedTexture(wt.cacheKey,wt._element)},calculateMatrix:function(){var st=this.image,wt=st._element.width,Tt=st._element.height;return[1/st.scaleX,0,0,0,1/st.scaleY,0,-st.left/wt,-st.top/Tt,1]},applyTo2d:function(st){var wt=st.imageData,Tt=st.filterBackend.resources,Ct=wt.data,jt=Ct.length,Lt=wt.width,Ht=wt.height,Gt,Kt,tr,rr,Lr,jr,Yr,An,No,o0,t0=this.image,c0;Tt.blendImage||(Tt.blendImage=vt.util.createCanvasElement()),No=Tt.blendImage,o0=No.getContext("2d"),No.width!==Lt||No.height!==Ht?(No.width=Lt,No.height=Ht):o0.clearRect(0,0,Lt,Ht),o0.setTransform(t0.scaleX,0,0,t0.scaleY,t0.left,t0.top),o0.drawImage(t0._element,0,0,Lt,Ht),c0=o0.getImageData(0,0,Lt,Ht).data;for(var n0=0;n0<jt;n0+=4)switch(Lr=Ct[n0],jr=Ct[n0+1],Yr=Ct[n0+2],An=Ct[n0+3],Gt=c0[n0],Kt=c0[n0+1],tr=c0[n0+2],rr=c0[n0+3],this.mode){case"multiply":Ct[n0]=Lr*Gt/255,Ct[n0+1]=jr*Kt/255,Ct[n0+2]=Yr*tr/255,Ct[n0+3]=An*rr/255;break;case"mask":Ct[n0+3]=rr;break}},getUniformLocations:function(st,wt){return{uTransformMatrix:st.getUniformLocation(wt,"uTransformMatrix"),uImage:st.getUniformLocation(wt,"uImage")}},sendUniformData:function(st,wt){var Tt=this.calculateMatrix();st.uniform1i(wt.uImage,1),st.uniformMatrix3fv(wt.uTransformMatrix,!1,Tt)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),vt.Image.filters.BlendImage.fromObject=function(st,wt){vt.Image.fromObject(st.image,function(Tt){var Ct=vt.util.object.clone(st);Ct.image=Tt,wt(new vt.Image.filters.BlendImage(Ct))})}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=Math.pow,pt=Math.floor,st=Math.sqrt,wt=Math.abs,Tt=Math.round,Ct=Math.sin,jt=Math.ceil,Lt=vt.Image.filters,Ht=vt.util.createClass;Lt.Resize=Ht(Lt.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(Gt,Kt){return{uDelta:Gt.getUniformLocation(Kt,"uDelta"),uTaps:Gt.getUniformLocation(Kt,"uTaps")}},sendUniformData:function(Gt,Kt){Gt.uniform2fv(Kt.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),Gt.uniform1fv(Kt.uTaps,this.taps)},retrieveShader:function(Gt){var Kt=this.getFilterWindow(),tr=this.type+"_"+Kt;if(!Gt.programCache.hasOwnProperty(tr)){var rr=this.generateShader(Kt);Gt.programCache[tr]=this.createProgram(Gt.context,rr)}return Gt.programCache[tr]},getFilterWindow:function(){var Gt=this.tempScale;return Math.ceil(this.lanczosLobes/Gt)},getTaps:function(){for(var Gt=this.lanczosCreate(this.lanczosLobes),Kt=this.tempScale,tr=this.getFilterWindow(),rr=new Array(tr),Lr=1;Lr<=tr;Lr++)rr[Lr-1]=Gt(Lr*Kt);return rr},generateShader:function(rr){for(var Kt=new Array(rr),tr=this.fragmentSourceTOP,rr,Lr=1;Lr<=rr;Lr++)Kt[Lr-1]=Lr+".0 * uDelta";return tr+="uniform float uTaps["+rr+`];
`,tr+=`void main() {
`,tr+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,tr+=`  float sum = 1.0;
`,Kt.forEach(function(jr,Yr){tr+="  color += texture2D(uTexture, vTexCoord + "+jr+") * uTaps["+Yr+`];
`,tr+="  color += texture2D(uTexture, vTexCoord - "+jr+") * uTaps["+Yr+`];
`,tr+="  sum += 2.0 * uTaps["+Yr+`];
`}),tr+=`  gl_FragColor = color / sum;
`,tr+="}",tr},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(Gt){Gt.webgl?(Gt.passes++,this.width=Gt.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=Gt.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),Gt.destinationWidth=this.dW,this._setupFrameBuffer(Gt),this.applyToWebGL(Gt),this._swapTextures(Gt),Gt.sourceWidth=Gt.destinationWidth,this.height=Gt.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),Gt.destinationHeight=this.dH,this._setupFrameBuffer(Gt),this.applyToWebGL(Gt),this._swapTextures(Gt),Gt.sourceHeight=Gt.destinationHeight):this.applyTo2d(Gt)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(Gt){return function(Kt){if(Kt>=Gt||Kt<=-Gt)return 0;if(Kt<11920929e-14&&Kt>-11920929e-14)return 1;Kt*=Math.PI;var tr=Kt/Gt;return Ct(Kt)/Kt*Ct(tr)/tr}},applyTo2d:function(Gt){var Kt=Gt.imageData,tr=this.scaleX,rr=this.scaleY;this.rcpScaleX=1/tr,this.rcpScaleY=1/rr;var Lr=Kt.width,jr=Kt.height,Yr=Tt(Lr*tr),An=Tt(jr*rr),No;this.resizeType==="sliceHack"?No=this.sliceByTwo(Gt,Lr,jr,Yr,An):this.resizeType==="hermite"?No=this.hermiteFastResize(Gt,Lr,jr,Yr,An):this.resizeType==="bilinear"?No=this.bilinearFiltering(Gt,Lr,jr,Yr,An):this.resizeType==="lanczos"&&(No=this.lanczosResize(Gt,Lr,jr,Yr,An)),Gt.imageData=No},sliceByTwo:function(Gt,Kt,tr,rr,Lr){var jr=Gt.imageData,Yr=.5,An=!1,No=!1,o0=Kt*Yr,t0=tr*Yr,c0=vt.filterBackend.resources,n0,Qo,Mo=0,zo=0,e0=Kt,Xr=0;for(c0.sliceByTwo||(c0.sliceByTwo=document.createElement("canvas")),n0=c0.sliceByTwo,(n0.width<Kt*1.5||n0.height<tr)&&(n0.width=Kt*1.5,n0.height=tr),Qo=n0.getContext("2d"),Qo.clearRect(0,0,Kt*1.5,tr),Qo.putImageData(jr,0,0),rr=pt(rr),Lr=pt(Lr);!An||!No;)Kt=o0,tr=t0,rr<pt(o0*Yr)?o0=pt(o0*Yr):(o0=rr,An=!0),Lr<pt(t0*Yr)?t0=pt(t0*Yr):(t0=Lr,No=!0),Qo.drawImage(n0,Mo,zo,Kt,tr,e0,Xr,o0,t0),Mo=e0,zo=Xr,Xr+=t0;return Qo.getImageData(Mo,zo,rr,Lr)},lanczosResize:function(Gt,Kt,tr,rr,Lr){function jr(Zr){var wn,r0,ko,_n,i0,a0,m0,p0,x0,S0,R0;for(Xr.x=(Zr+.5)*t0,In.x=pt(Xr.x),wn=0;wn<Lr;wn++){for(Xr.y=(wn+.5)*c0,In.y=pt(Xr.y),i0=0,a0=0,m0=0,p0=0,x0=0,r0=In.x-Mo;r0<=In.x+Mo;r0++)if(!(r0<0||r0>=Kt)){S0=pt(1e3*wt(r0-Xr.x)),e0[S0]||(e0[S0]={});for(var $0=In.y-zo;$0<=In.y+zo;$0++)$0<0||$0>=tr||(R0=pt(1e3*wt($0-Xr.y)),e0[S0][R0]||(e0[S0][R0]=o0(st(b(S0*n0,2)+b(R0*Qo,2))/1e3)),ko=e0[S0][R0],ko>0&&(_n=($0*Kt+r0)*4,i0+=ko,a0+=ko*Yr[_n],m0+=ko*Yr[_n+1],p0+=ko*Yr[_n+2],x0+=ko*Yr[_n+3]))}_n=(wn*rr+Zr)*4,No[_n]=a0/i0,No[_n+1]=m0/i0,No[_n+2]=p0/i0,No[_n+3]=x0/i0}return++Zr<rr?jr(Zr):An}var Yr=Gt.imageData.data,An=Gt.ctx.createImageData(rr,Lr),No=An.data,o0=this.lanczosCreate(this.lanczosLobes),t0=this.rcpScaleX,c0=this.rcpScaleY,n0=2/this.rcpScaleX,Qo=2/this.rcpScaleY,Mo=jt(t0*this.lanczosLobes/2),zo=jt(c0*this.lanczosLobes/2),e0={},Xr={},In={};return jr(0)},bilinearFiltering:function(Gt,Kt,tr,rr,Lr){var jr,Yr,An,No,o0,t0,c0,n0,Qo,Mo,zo,e0,Xr=0,In,Zr=this.rcpScaleX,wn=this.rcpScaleY,r0=4*(Kt-1),ko=Gt.imageData,_n=ko.data,i0=Gt.ctx.createImageData(rr,Lr),a0=i0.data;for(c0=0;c0<Lr;c0++)for(n0=0;n0<rr;n0++)for(o0=pt(Zr*n0),t0=pt(wn*c0),Qo=Zr*n0-o0,Mo=wn*c0-t0,In=4*(t0*Kt+o0),zo=0;zo<4;zo++)jr=_n[In+zo],Yr=_n[In+4+zo],An=_n[In+r0+zo],No=_n[In+r0+4+zo],e0=jr*(1-Qo)*(1-Mo)+Yr*Qo*(1-Mo)+An*Mo*(1-Qo)+No*Qo*Mo,a0[Xr++]=e0;return i0},hermiteFastResize:function(Gt,Kt,tr,rr,Lr){for(var jr=this.rcpScaleX,Yr=this.rcpScaleY,An=jt(jr/2),No=jt(Yr/2),o0=Gt.imageData,t0=o0.data,c0=Gt.ctx.createImageData(rr,Lr),n0=c0.data,Qo=0;Qo<Lr;Qo++)for(var Mo=0;Mo<rr;Mo++){for(var zo=(Mo+Qo*rr)*4,e0=0,Xr=0,In=0,Zr=0,wn=0,r0=0,ko=0,_n=(Qo+.5)*Yr,i0=pt(Qo*Yr);i0<(Qo+1)*Yr;i0++)for(var a0=wt(_n-(i0+.5))/No,m0=(Mo+.5)*jr,p0=a0*a0,x0=pt(Mo*jr);x0<(Mo+1)*jr;x0++){var S0=wt(m0-(x0+.5))/An,R0=st(p0+S0*S0);R0>1&&R0<-1||(e0=2*R0*R0*R0-3*R0*R0+1,e0>0&&(S0=4*(x0+i0*Kt),ko+=e0*t0[S0+3],In+=e0,t0[S0+3]<255&&(e0=e0*t0[S0+3]/250),Zr+=e0*t0[S0],wn+=e0*t0[S0+1],r0+=e0*t0[S0+2],Xr+=e0))}n0[zo]=Zr/Xr,n0[zo+1]=wn/Xr,n0[zo+2]=r0/Xr,n0[zo+3]=ko/In}return c0},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),vt.Image.filters.Resize.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Contrast=pt(b.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(st){if(this.contrast!==0){var wt=st.imageData,Tt,jt,Ct=wt.data,jt=Ct.length,Lt=Math.floor(this.contrast*255),Ht=259*(Lt+255)/(255*(259-Lt));for(Tt=0;Tt<jt;Tt+=4)Ct[Tt]=Ht*(Ct[Tt]-128)+128,Ct[Tt+1]=Ht*(Ct[Tt+1]-128)+128,Ct[Tt+2]=Ht*(Ct[Tt+2]-128)+128}},getUniformLocations:function(st,wt){return{uContrast:st.getUniformLocation(wt,"uContrast")}},sendUniformData:function(st,wt){st.uniform1f(wt.uContrast,this.contrast)}}),vt.Image.filters.Contrast.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Saturation=pt(b.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(st){if(this.saturation!==0){var wt=st.imageData,Tt=wt.data,Ct=Tt.length,jt=-this.saturation,Lt,Ht;for(Lt=0;Lt<Ct;Lt+=4)Ht=Math.max(Tt[Lt],Tt[Lt+1],Tt[Lt+2]),Tt[Lt]+=Ht!==Tt[Lt]?(Ht-Tt[Lt])*jt:0,Tt[Lt+1]+=Ht!==Tt[Lt+1]?(Ht-Tt[Lt+1])*jt:0,Tt[Lt+2]+=Ht!==Tt[Lt+2]?(Ht-Tt[Lt+2])*jt:0}},getUniformLocations:function(st,wt){return{uSaturation:st.getUniformLocation(wt,"uSaturation")}},sendUniformData:function(st,wt){st.uniform1f(wt.uSaturation,-this.saturation)}}),vt.Image.filters.Saturation.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Vibrance=pt(b.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(st){if(this.vibrance!==0){var wt=st.imageData,Tt=wt.data,Ct=Tt.length,jt=-this.vibrance,Lt,Ht,Gt,Kt;for(Lt=0;Lt<Ct;Lt+=4)Ht=Math.max(Tt[Lt],Tt[Lt+1],Tt[Lt+2]),Gt=(Tt[Lt]+Tt[Lt+1]+Tt[Lt+2])/3,Kt=Math.abs(Ht-Gt)*2/255*jt,Tt[Lt]+=Ht!==Tt[Lt]?(Ht-Tt[Lt])*Kt:0,Tt[Lt+1]+=Ht!==Tt[Lt+1]?(Ht-Tt[Lt+1])*Kt:0,Tt[Lt+2]+=Ht!==Tt[Lt+2]?(Ht-Tt[Lt+2])*Kt:0}},getUniformLocations:function(st,wt){return{uVibrance:st.getUniformLocation(wt,"uVibrance")}},sendUniformData:function(st,wt){st.uniform1f(wt.uVibrance,-this.vibrance)}}),vt.Image.filters.Vibrance.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Blur=pt(b.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(st){st.webgl?(this.aspectRatio=st.sourceWidth/st.sourceHeight,st.passes++,this._setupFrameBuffer(st),this.horizontal=!0,this.applyToWebGL(st),this._swapTextures(st),this._setupFrameBuffer(st),this.horizontal=!1,this.applyToWebGL(st),this._swapTextures(st)):this.applyTo2d(st)},applyTo2d:function(st){st.imageData=this.simpleBlur(st)},simpleBlur:function(st){var wt=st.filterBackend.resources,Tt,Ct,jt=st.imageData.width,Lt=st.imageData.height;wt.blurLayer1||(wt.blurLayer1=vt.util.createCanvasElement(),wt.blurLayer2=vt.util.createCanvasElement()),Tt=wt.blurLayer1,Ct=wt.blurLayer2,(Tt.width!==jt||Tt.height!==Lt)&&(Ct.width=Tt.width=jt,Ct.height=Tt.height=Lt);var Ht=Tt.getContext("2d"),Gt=Ct.getContext("2d"),Kt=15,tr,rr,Lr,jr,Yr=this.blur*.06*.5;for(Ht.putImageData(st.imageData,0,0),Gt.clearRect(0,0,jt,Lt),jr=-Kt;jr<=Kt;jr++)tr=(Math.random()-.5)/4,rr=jr/Kt,Lr=Yr*rr*jt+tr,Gt.globalAlpha=1-Math.abs(rr),Gt.drawImage(Tt,Lr,tr),Ht.drawImage(Ct,0,0),Gt.globalAlpha=1,Gt.clearRect(0,0,Ct.width,Ct.height);for(jr=-Kt;jr<=Kt;jr++)tr=(Math.random()-.5)/4,rr=jr/Kt,Lr=Yr*rr*Lt+tr,Gt.globalAlpha=1-Math.abs(rr),Gt.drawImage(Tt,tr,Lr),Ht.drawImage(Ct,0,0),Gt.globalAlpha=1,Gt.clearRect(0,0,Ct.width,Ct.height);st.ctx.drawImage(Tt,0,0);var An=st.ctx.getImageData(0,0,Tt.width,Tt.height);return Ht.globalAlpha=1,Ht.clearRect(0,0,Tt.width,Tt.height),An},getUniformLocations:function(st,wt){return{delta:st.getUniformLocation(wt,"uDelta")}},sendUniformData:function(st,wt){var Tt=this.chooseRightDelta();st.uniform2fv(wt.delta,Tt)},chooseRightDelta:function(){var st=1,wt=[0,0],Tt;return this.horizontal?this.aspectRatio>1&&(st=1/this.aspectRatio):this.aspectRatio<1&&(st=this.aspectRatio),Tt=st*this.blur*.12,this.horizontal?wt[0]=Tt:wt[1]=Tt,wt}}),b.Blur.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Gamma=pt(b.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(st){this.gamma=[1,1,1],b.BaseFilter.prototype.initialize.call(this,st)},applyTo2d:function(st){var wt=st.imageData,Tt=wt.data,Ct=this.gamma,jt=Tt.length,Lt=1/Ct[0],Ht=1/Ct[1],Gt=1/Ct[2],Kt;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),Kt=0,jt=256;Kt<jt;Kt++)this.rVals[Kt]=Math.pow(Kt/255,Lt)*255,this.gVals[Kt]=Math.pow(Kt/255,Ht)*255,this.bVals[Kt]=Math.pow(Kt/255,Gt)*255;for(Kt=0,jt=Tt.length;Kt<jt;Kt+=4)Tt[Kt]=this.rVals[Tt[Kt]],Tt[Kt+1]=this.gVals[Tt[Kt+1]],Tt[Kt+2]=this.bVals[Tt[Kt+2]]},getUniformLocations:function(st,wt){return{uGamma:st.getUniformLocation(wt,"uGamma")}},sendUniformData:function(st,wt){st.uniform3fv(wt.uGamma,this.gamma)}}),vt.Image.filters.Gamma.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.Composed=pt(b.BaseFilter,{type:"Composed",subFilters:[],initialize:function(st){this.callSuper("initialize",st),this.subFilters=this.subFilters.slice(0)},applyTo:function(st){st.passes+=this.subFilters.length-1,this.subFilters.forEach(function(wt){wt.applyTo(st)})},toObject:function(){return vt.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(st){return st.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(st){return!st.isNeutralState()})}}),vt.Image.filters.Composed.fromObject=function(st,wt){var Tt=st.subFilters||[],Ct=Tt.map(function(Lt){return new vt.Image.filters[Lt.type](Lt)}),jt=new vt.Image.filters.Composed({subFilters:Ct});return wt&&wt(jt),jt}}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.Image.filters,pt=vt.util.createClass;b.HueRotation=pt(b.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var st=this.rotation*Math.PI,wt=vt.util.cos(st),Tt=vt.util.sin(st),Ct=1/3,jt=Math.sqrt(Ct)*Tt,Lt=1-wt;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=wt+Lt/3,this.matrix[1]=Ct*Lt-jt,this.matrix[2]=Ct*Lt+jt,this.matrix[5]=Ct*Lt+jt,this.matrix[6]=wt+Ct*Lt,this.matrix[7]=Ct*Lt-jt,this.matrix[10]=Ct*Lt-jt,this.matrix[11]=Ct*Lt+jt,this.matrix[12]=wt+Ct*Lt},isNeutralState:function(st){return this.calculateMatrix(),b.BaseFilter.prototype.isNeutralState.call(this,st)},applyTo:function(st){this.calculateMatrix(),b.BaseFilter.prototype.applyTo.call(this,st)}}),vt.Image.filters.HueRotation.fromObject=vt.Image.filters.BaseFilter.fromObject}(a),function($t){var vt=$t.fabric||($t.fabric={}),b=vt.util.object.clone;if(vt.Text){vt.warn("fabric.Text is already defined");return}var pt="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");vt.Text=vt.util.createClass(vt.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:vt.Object.prototype.stateProperties.concat(pt),cacheProperties:vt.Object.prototype.cacheProperties.concat(pt),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(st,wt){this.styles=wt?wt.styles||{}:{},this.text=st,this.__skipDimension=!0,this.callSuper("initialize",wt),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var st=this.path;st&&(st.segmentsInfo=vt.util.getPathSegmentsInfo(st.path))},getMeasuringContext:function(){return vt._measuringContext||(vt._measuringContext=this.canvas&&this.canvas.contextCache||vt.util.createCanvasElement().getContext("2d")),vt._measuringContext},_splitText:function(){var st=this._splitTextIntoLines(this.text);return this.textLines=st.lines,this._textLines=st.graphemeLines,this._unwrappedTextLines=st._unwrappedLines,this._text=st.graphemeText,st},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var st,wt,Tt,Ct,jt,Lt,Ht,Gt=0,Kt=this._textLines.length;Gt<Kt;Gt++)if(!(this.textAlign!=="justify"&&(Gt===Kt-1||this.isEndOfWrapping(Gt)))&&(Ct=0,jt=this._textLines[Gt],wt=this.getLineWidth(Gt),wt<this.width&&(Ht=this.textLines[Gt].match(this._reSpacesAndTabs)))){Tt=Ht.length,st=(this.width-wt)/Tt;for(var tr=0,rr=jt.length;tr<=rr;tr++)Lt=this.__charBounds[Gt][tr],this._reSpaceAndTab.test(jt[tr])?(Lt.width+=st,Lt.kernedWidth+=st,Lt.left+=Ct,Ct+=st):Lt.left+=Ct}},isEndOfWrapping:function(st){return st===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var st=this.callSuper("_getCacheCanvasDimensions"),wt=this.fontSize;return st.width+=wt*st.zoomX,st.height+=wt*st.zoomY,st},_render:function(st){var wt=this.path;wt&&!wt.isNotVisible()&&wt._render(st),this._setTextStyles(st),this._renderTextLinesBackground(st),this._renderTextDecoration(st,"underline"),this._renderText(st),this._renderTextDecoration(st,"overline"),this._renderTextDecoration(st,"linethrough")},_renderText:function(st){this.paintFirst==="stroke"?(this._renderTextStroke(st),this._renderTextFill(st)):(this._renderTextFill(st),this._renderTextStroke(st))},_setTextStyles:function(st,wt,Tt){if(st.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":st.textBaseline="middle";break;case"ascender":st.textBaseline="top";break;case"descender":st.textBaseline="bottom";break}st.font=this._getFontDeclaration(wt,Tt)},calcTextWidth:function(){for(var st=this.getLineWidth(0),wt=1,Tt=this._textLines.length;wt<Tt;wt++){var Ct=this.getLineWidth(wt);Ct>st&&(st=Ct)}return st},_renderTextLine:function(st,wt,Tt,Ct,jt,Lt){this._renderChars(st,wt,Tt,Ct,jt,Lt)},_renderTextLinesBackground:function(st){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var wt,Tt,Ct=st.fillStyle,jt,Lt,Ht=this._getLeftOffset(),Gt=this._getTopOffset(),Kt=0,tr=0,rr,Lr,jr=this.path,Yr,An=0,No=this._textLines.length;An<No;An++){if(wt=this.getHeightOfLine(An),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",An)){Gt+=wt;continue}jt=this._textLines[An],Tt=this._getLineLeftOffset(An),tr=0,Kt=0,Lt=this.getValueOfPropertyAt(An,0,"textBackgroundColor");for(var o0=0,t0=jt.length;o0<t0;o0++)rr=this.__charBounds[An][o0],Lr=this.getValueOfPropertyAt(An,o0,"textBackgroundColor"),jr?(st.save(),st.translate(rr.renderLeft,rr.renderTop),st.rotate(rr.angle),st.fillStyle=Lr,Lr&&st.fillRect(-rr.width/2,-wt/this.lineHeight*(1-this._fontSizeFraction),rr.width,wt/this.lineHeight),st.restore()):Lr!==Lt?(Yr=Ht+Tt+Kt,this.direction==="rtl"&&(Yr=this.width-Yr-tr),st.fillStyle=Lt,Lt&&st.fillRect(Yr,Gt,tr,wt/this.lineHeight),Kt=rr.left,tr=rr.width,Lt=Lr):tr+=rr.kernedWidth;Lr&&!jr&&(Yr=Ht+Tt+Kt,this.direction==="rtl"&&(Yr=this.width-Yr-tr),st.fillStyle=Lr,st.fillRect(Yr,Gt,tr,wt/this.lineHeight)),Gt+=wt}st.fillStyle=Ct,this._removeShadow(st)}},getFontCache:function(st){var wt=st.fontFamily.toLowerCase();vt.charWidthsCache[wt]||(vt.charWidthsCache[wt]={});var Tt=vt.charWidthsCache[wt],Ct=st.fontStyle.toLowerCase()+"_"+(st.fontWeight+"").toLowerCase();return Tt[Ct]||(Tt[Ct]={}),Tt[Ct]},_measureChar:function(st,wt,Tt,Ct){var jt=this.getFontCache(wt),Lt=this._getFontDeclaration(wt),Ht=this._getFontDeclaration(Ct),Gt=Tt+st,Kt=Lt===Ht,tr,rr,Lr,jr=wt.fontSize/this.CACHE_FONT_SIZE,Yr;if(Tt&&jt[Tt]!==void 0&&(Lr=jt[Tt]),jt[st]!==void 0&&(Yr=tr=jt[st]),Kt&&jt[Gt]!==void 0&&(rr=jt[Gt],Yr=rr-Lr),tr===void 0||Lr===void 0||rr===void 0){var An=this.getMeasuringContext();this._setTextStyles(An,wt,!0)}return tr===void 0&&(Yr=tr=An.measureText(st).width,jt[st]=tr),Lr===void 0&&Kt&&Tt&&(Lr=An.measureText(Tt).width,jt[Tt]=Lr),Kt&&rr===void 0&&(rr=An.measureText(Gt).width,jt[Gt]=rr,Yr=rr-Lr),{width:tr*jr,kernedWidth:Yr*jr}},getHeightOfChar:function(st,wt){return this.getValueOfPropertyAt(st,wt,"fontSize")},measureLine:function(st){var wt=this._measureLine(st);return this.charSpacing!==0&&(wt.width-=this._getWidthOfCharSpacing()),wt.width<0&&(wt.width=0),wt},_measureLine:function(st){var wt=0,Tt,Ct,jt=this._textLines[st],Lt,Ht,Gt=0,Kt=new Array(jt.length),tr=0,rr,Lr,jr=this.path,Yr=this.pathSide==="right";for(this.__charBounds[st]=Kt,Tt=0;Tt<jt.length;Tt++)Ct=jt[Tt],Ht=this._getGraphemeBox(Ct,st,Tt,Lt),Kt[Tt]=Ht,wt+=Ht.kernedWidth,Lt=Ct;if(Kt[Tt]={left:Ht?Ht.left+Ht.width:0,width:0,kernedWidth:0,height:this.fontSize},jr){switch(Lr=jr.segmentsInfo[jr.segmentsInfo.length-1].length,rr=vt.util.getPointOnPath(jr.path,0,jr.segmentsInfo),rr.x+=jr.pathOffset.x,rr.y+=jr.pathOffset.y,this.textAlign){case"left":tr=Yr?Lr-wt:0;break;case"center":tr=(Lr-wt)/2;break;case"right":tr=Yr?0:Lr-wt;break}for(tr+=this.pathStartOffset*(Yr?-1:1),Tt=Yr?jt.length-1:0;Yr?Tt>=0:Tt<jt.length;Yr?Tt--:Tt++)Ht=Kt[Tt],tr>Lr?tr%=Lr:tr<0&&(tr+=Lr),this._setGraphemeOnPath(tr,Ht,rr),tr+=Ht.kernedWidth}return{width:wt,numOfSpaces:Gt}},_setGraphemeOnPath:function(st,wt,Tt){var Ct=st+wt.kernedWidth/2,jt=this.path,Lt=vt.util.getPointOnPath(jt.path,Ct,jt.segmentsInfo);wt.renderLeft=Lt.x-Tt.x,wt.renderTop=Lt.y-Tt.y,wt.angle=Lt.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(st,wt,Tt,Ct,jt){var Lt=this.getCompleteStyleDeclaration(wt,Tt),Ht=Ct?this.getCompleteStyleDeclaration(wt,Tt-1):{},Gt=this._measureChar(st,Lt,Ct,Ht),Kt=Gt.kernedWidth,tr=Gt.width,rr;this.charSpacing!==0&&(rr=this._getWidthOfCharSpacing(),tr+=rr,Kt+=rr);var Lr={width:tr,left:0,height:Lt.fontSize,kernedWidth:Kt,deltaY:Lt.deltaY};if(Tt>0&&!jt){var jr=this.__charBounds[wt][Tt-1];Lr.left=jr.left+jr.width+Gt.kernedWidth-Gt.width}return Lr},getHeightOfLine:function(st){if(this.__lineHeights[st])return this.__lineHeights[st];for(var wt=this._textLines[st],Tt=this.getHeightOfChar(st,0),Ct=1,jt=wt.length;Ct<jt;Ct++)Tt=Math.max(this.getHeightOfChar(st,Ct),Tt);return this.__lineHeights[st]=Tt*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var st,wt=0,Tt=0,Ct=this._textLines.length;Tt<Ct;Tt++)st=this.getHeightOfLine(Tt),wt+=Tt===Ct-1?st/this.lineHeight:st;return wt},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(st,wt){st.save();for(var Tt=0,Ct=this._getLeftOffset(),jt=this._getTopOffset(),Lt=0,Ht=this._textLines.length;Lt<Ht;Lt++){var Gt=this.getHeightOfLine(Lt),Kt=Gt/this.lineHeight,tr=this._getLineLeftOffset(Lt);this._renderTextLine(wt,st,this._textLines[Lt],Ct+tr,jt+Tt+Kt,Lt),Tt+=Gt}st.restore()},_renderTextFill:function(st){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(st,"fillText")},_renderTextStroke:function(st){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(st),st.save(),this._setLineDash(st,this.strokeDashArray),st.beginPath(),this._renderTextCommon(st,"strokeText"),st.closePath(),st.restore())},_renderChars:function(st,wt,Tt,Ct,jt,Lt){var Ht=this.getHeightOfLine(Lt),Gt=this.textAlign.indexOf("justify")!==-1,Kt,tr,rr="",Lr,jr=0,Yr,An=this.path,No=!Gt&&this.charSpacing===0&&this.isEmptyStyles(Lt)&&!An,o0=this.direction==="ltr",t0=this.direction==="ltr"?1:-1,c0,n0=wt.canvas.getAttribute("dir");if(wt.save(),n0!==this.direction&&(wt.canvas.setAttribute("dir",o0?"ltr":"rtl"),wt.direction=o0?"ltr":"rtl",wt.textAlign=o0?"left":"right"),jt-=Ht*this._fontSizeFraction/this.lineHeight,No){this._renderChar(st,wt,Lt,0,Tt.join(""),Ct,jt,Ht),wt.restore();return}for(var Qo=0,Mo=Tt.length-1;Qo<=Mo;Qo++)Yr=Qo===Mo||this.charSpacing||An,rr+=Tt[Qo],Lr=this.__charBounds[Lt][Qo],jr===0?(Ct+=t0*(Lr.kernedWidth-Lr.width),jr+=Lr.width):jr+=Lr.kernedWidth,Gt&&!Yr&&this._reSpaceAndTab.test(Tt[Qo])&&(Yr=!0),Yr||(Kt=Kt||this.getCompleteStyleDeclaration(Lt,Qo),tr=this.getCompleteStyleDeclaration(Lt,Qo+1),Yr=vt.util.hasStyleChanged(Kt,tr,!1)),Yr&&(An?(wt.save(),wt.translate(Lr.renderLeft,Lr.renderTop),wt.rotate(Lr.angle),this._renderChar(st,wt,Lt,Qo,rr,-jr/2,0,Ht),wt.restore()):(c0=Ct,this._renderChar(st,wt,Lt,Qo,rr,c0,jt,Ht)),rr="",Kt=tr,Ct+=t0*jr,jr=0);wt.restore()},_applyPatternGradientTransformText:function(st){var wt=vt.util.createCanvasElement(),Tt,Ct=this.width+this.strokeWidth,jt=this.height+this.strokeWidth;return wt.width=Ct,wt.height=jt,Tt=wt.getContext("2d"),Tt.beginPath(),Tt.moveTo(0,0),Tt.lineTo(Ct,0),Tt.lineTo(Ct,jt),Tt.lineTo(0,jt),Tt.closePath(),Tt.translate(Ct/2,jt/2),Tt.fillStyle=st.toLive(Tt),this._applyPatternGradientTransform(Tt,st),Tt.fill(),Tt.createPattern(wt,"no-repeat")},handleFiller:function(st,wt,Tt){var Ct,jt;return Tt.toLive?Tt.gradientUnits==="percentage"||Tt.gradientTransform||Tt.patternTransform?(Ct=-this.width/2,jt=-this.height/2,st.translate(Ct,jt),st[wt]=this._applyPatternGradientTransformText(Tt),{offsetX:Ct,offsetY:jt}):(st[wt]=Tt.toLive(st,this),this._applyPatternGradientTransform(st,Tt)):(st[wt]=Tt,{offsetX:0,offsetY:0})},_setStrokeStyles:function(st,wt){return st.lineWidth=wt.strokeWidth,st.lineCap=this.strokeLineCap,st.lineDashOffset=this.strokeDashOffset,st.lineJoin=this.strokeLineJoin,st.miterLimit=this.strokeMiterLimit,this.handleFiller(st,"strokeStyle",wt.stroke)},_setFillStyles:function(st,wt){return this.handleFiller(st,"fillStyle",wt.fill)},_renderChar:function(st,wt,Tt,Ct,jt,Lt,Ht){var Gt=this._getStyleDeclaration(Tt,Ct),Kt=this.getCompleteStyleDeclaration(Tt,Ct),tr=st==="fillText"&&Kt.fill,rr=st==="strokeText"&&Kt.stroke&&Kt.strokeWidth,Lr,jr;!rr&&!tr||(wt.save(),tr&&(Lr=this._setFillStyles(wt,Kt)),rr&&(jr=this._setStrokeStyles(wt,Kt)),wt.font=this._getFontDeclaration(Kt),Gt&&Gt.textBackgroundColor&&this._removeShadow(wt),Gt&&Gt.deltaY&&(Ht+=Gt.deltaY),tr&&wt.fillText(jt,Lt-Lr.offsetX,Ht-Lr.offsetY),rr&&wt.strokeText(jt,Lt-jr.offsetX,Ht-jr.offsetY),wt.restore())},setSuperscript:function(st,wt){return this._setScript(st,wt,this.superscript)},setSubscript:function(st,wt){return this._setScript(st,wt,this.subscript)},_setScript:function(st,wt,Tt){var Ct=this.get2DCursorLocation(st,!0),jt=this.getValueOfPropertyAt(Ct.lineIndex,Ct.charIndex,"fontSize"),Lt=this.getValueOfPropertyAt(Ct.lineIndex,Ct.charIndex,"deltaY"),Ht={fontSize:jt*Tt.size,deltaY:Lt+jt*Tt.baseline};return this.setSelectionStyles(Ht,st,wt),this},_getLineLeftOffset:function(st){var wt=this.getLineWidth(st),Tt=this.width-wt,Ct=this.textAlign,jt=this.direction,Ht,Lt=0,Ht=this.isEndOfWrapping(st);return Ct==="justify"||Ct==="justify-center"&&!Ht||Ct==="justify-right"&&!Ht||Ct==="justify-left"&&!Ht?0:(Ct==="center"&&(Lt=Tt/2),Ct==="right"&&(Lt=Tt),Ct==="justify-center"&&(Lt=Tt/2),Ct==="justify-right"&&(Lt=Tt),jt==="rtl"&&(Lt-=Tt),Lt)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var st=this._forceClearCache;return st||(st=this.hasStateChanged("_dimensionAffectingProps")),st&&(this.dirty=!0,this._forceClearCache=!1),st},getLineWidth:function(st){if(this.__lineWidths[st]!==void 0)return this.__lineWidths[st];var wt=this.measureLine(st),Tt=wt.width;return this.__lineWidths[st]=Tt,Tt},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(st,wt,Tt){var Ct=this._getStyleDeclaration(st,wt);return Ct&&typeof Ct[Tt]<"u"?Ct[Tt]:this[Tt]},_renderTextDecoration:function(st,wt){if(!(!this[wt]&&!this.styleHas(wt))){for(var Tt,Ct,jt,Lt,Ht,Gt,Kt,tr,rr=this._getLeftOffset(),Lr=this._getTopOffset(),jr,Yr,An,No,o0,t0,c0,n0,Qo=this.path,Mo=this._getWidthOfCharSpacing(),zo=this.offsets[wt],e0=0,Xr=this._textLines.length;e0<Xr;e0++){if(Tt=this.getHeightOfLine(e0),!this[wt]&&!this.styleHas(wt,e0)){Lr+=Tt;continue}Kt=this._textLines[e0],t0=Tt/this.lineHeight,Lt=this._getLineLeftOffset(e0),Yr=0,An=0,tr=this.getValueOfPropertyAt(e0,0,wt),n0=this.getValueOfPropertyAt(e0,0,"fill"),jr=Lr+t0*(1-this._fontSizeFraction),Ct=this.getHeightOfChar(e0,0),Ht=this.getValueOfPropertyAt(e0,0,"deltaY");for(var In=0,Zr=Kt.length;In<Zr;In++)if(No=this.__charBounds[e0][In],o0=this.getValueOfPropertyAt(e0,In,wt),c0=this.getValueOfPropertyAt(e0,In,"fill"),jt=this.getHeightOfChar(e0,In),Gt=this.getValueOfPropertyAt(e0,In,"deltaY"),Qo&&o0&&c0)st.save(),st.fillStyle=n0,st.translate(No.renderLeft,No.renderTop),st.rotate(No.angle),st.fillRect(-No.kernedWidth/2,zo*jt+Gt,No.kernedWidth,this.fontSize/15),st.restore();else if((o0!==tr||c0!==n0||jt!==Ct||Gt!==Ht)&&An>0){var wn=rr+Lt+Yr;this.direction==="rtl"&&(wn=this.width-wn-An),tr&&n0&&(st.fillStyle=n0,st.fillRect(wn,jr+zo*Ct+Ht,An,this.fontSize/15)),Yr=No.left,An=No.width,tr=o0,n0=c0,Ct=jt,Ht=Gt}else An+=No.kernedWidth;var wn=rr+Lt+Yr;this.direction==="rtl"&&(wn=this.width-wn-An),st.fillStyle=c0,o0&&c0&&st.fillRect(wn,jr+zo*Ct+Ht,An-Mo,this.fontSize/15),Lr+=Tt}this._removeShadow(st)}},_getFontDeclaration:function(st,wt){var Tt=st||this,Ct=this.fontFamily,jt=vt.Text.genericFonts.indexOf(Ct.toLowerCase())>-1,Lt=Ct===void 0||Ct.indexOf("'")>-1||Ct.indexOf(",")>-1||Ct.indexOf('"')>-1||jt?Tt.fontFamily:'"'+Tt.fontFamily+'"';return[vt.isLikelyNode?Tt.fontWeight:Tt.fontStyle,vt.isLikelyNode?Tt.fontStyle:Tt.fontWeight,wt?this.CACHE_FONT_SIZE+"px":Tt.fontSize+"px",Lt].join(" ")},render:function(st){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",st)))},_splitTextIntoLines:function(st){for(var wt=st.split(this._reNewline),Tt=new Array(wt.length),Ct=[`
`],jt=[],Lt=0;Lt<wt.length;Lt++)Tt[Lt]=vt.util.string.graphemeSplit(wt[Lt]),jt=jt.concat(Tt[Lt],Ct);return jt.pop(),{_unwrappedLines:Tt,lines:wt,graphemeText:jt,graphemeLines:Tt}},toObject:function(st){var wt=pt.concat(st),Tt=this.callSuper("toObject",wt);return Tt.styles=vt.util.stylesToArray(this.styles,this.text),Tt.path&&(Tt.path=this.path.toObject()),Tt},set:function(st,wt){this.callSuper("set",st,wt);var Tt=!1,Ct=!1;if(typeof st=="object")for(var jt in st)jt==="path"&&this.setPathInfo(),Tt=Tt||this._dimensionAffectingProps.indexOf(jt)!==-1,Ct=Ct||jt==="path";else Tt=this._dimensionAffectingProps.indexOf(st)!==-1,Ct=st==="path";return Ct&&this.setPathInfo(),Tt&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),vt.Text.ATTRIBUTE_NAMES=vt.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),vt.Text.DEFAULT_SVG_FONT_SIZE=16,vt.Text.fromElement=function(st,wt,Tt){if(!st)return wt(null);var Ct=vt.parseAttributes(st,vt.Text.ATTRIBUTE_NAMES),jt=Ct.textAnchor||"left";if(Tt=vt.util.object.extend(Tt?b(Tt):{},Ct),Tt.top=Tt.top||0,Tt.left=Tt.left||0,Ct.textDecoration){var Lt=Ct.textDecoration;Lt.indexOf("underline")!==-1&&(Tt.underline=!0),Lt.indexOf("overline")!==-1&&(Tt.overline=!0),Lt.indexOf("line-through")!==-1&&(Tt.linethrough=!0),delete Tt.textDecoration}"dx"in Ct&&(Tt.left+=Ct.dx),"dy"in Ct&&(Tt.top+=Ct.dy),"fontSize"in Tt||(Tt.fontSize=vt.Text.DEFAULT_SVG_FONT_SIZE);var Ht="";"textContent"in st?Ht=st.textContent:"firstChild"in st&&st.firstChild!==null&&"data"in st.firstChild&&st.firstChild.data!==null&&(Ht=st.firstChild.data),Ht=Ht.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var Gt=Tt.strokeWidth;Tt.strokeWidth=0;var Kt=new vt.Text(Ht,Tt),tr=Kt.getScaledHeight()/Kt.height,rr=(Kt.height+Kt.strokeWidth)*Kt.lineHeight-Kt.height,Lr=rr*tr,jr=Kt.getScaledHeight()+Lr,Yr=0;jt==="center"&&(Yr=Kt.getScaledWidth()/2),jt==="right"&&(Yr=Kt.getScaledWidth()),Kt.set({left:Kt.left-Yr,top:Kt.top-(jr-Kt.fontSize*(.07+Kt._fontSizeFraction))/Kt.lineHeight,strokeWidth:typeof Gt<"u"?Gt:1}),wt(Kt)},vt.Text.fromObject=function(st,wt){var Tt=b(st),Ct=st.path;return delete Tt.path,vt.Object._fromObject("Text",Tt,function(jt){jt.styles=vt.util.stylesFromArray(st.styles,st.text),Ct?vt.Object._fromObject("Path",Ct,function(Lt){jt.set("path",Lt),wt(jt)},"path"):wt(jt)},"text")},vt.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],vt.util.createAccessors&&vt.util.createAccessors(vt.Text)}(a),function(){s.util.object.extend(s.Text.prototype,{isEmptyStyles:function($t){if(!this.styles||typeof $t<"u"&&!this.styles[$t])return!0;var vt=typeof $t>"u"?this.styles:{line:this.styles[$t]};for(var b in vt)for(var pt in vt[b])for(var st in vt[b][pt])return!1;return!0},styleHas:function($t,vt){if(!this.styles||!$t||$t===""||typeof vt<"u"&&!this.styles[vt])return!1;var b=typeof vt>"u"?this.styles:{0:this.styles[vt]};for(var pt in b)for(var st in b[pt])if(typeof b[pt][st][$t]<"u")return!0;return!1},cleanStyle:function($t){if(!this.styles||!$t||$t==="")return!1;var vt=this.styles,b=0,pt,st,wt=!0,Tt=0,Ct;for(var jt in vt){pt=0;for(var Lt in vt[jt]){var Ct=vt[jt][Lt],Ht=Ct.hasOwnProperty($t);b++,Ht?(st?Ct[$t]!==st&&(wt=!1):st=Ct[$t],Ct[$t]===this[$t]&&delete Ct[$t]):wt=!1,Object.keys(Ct).length!==0?pt++:delete vt[jt][Lt]}pt===0&&delete vt[jt]}for(var Gt=0;Gt<this._textLines.length;Gt++)Tt+=this._textLines[Gt].length;wt&&b===Tt&&(this[$t]=st,this.removeStyle($t))},removeStyle:function($t){if(!(!this.styles||!$t||$t==="")){var vt=this.styles,b,pt,st;for(pt in vt){b=vt[pt];for(st in b)delete b[st][$t],Object.keys(b[st]).length===0&&delete b[st];Object.keys(b).length===0&&delete vt[pt]}}},_extendStyles:function($t,vt){var b=this.get2DCursorLocation($t);this._getLineStyle(b.lineIndex)||this._setLineStyle(b.lineIndex),this._getStyleDeclaration(b.lineIndex,b.charIndex)||this._setStyleDeclaration(b.lineIndex,b.charIndex,{}),s.util.object.extend(this._getStyleDeclaration(b.lineIndex,b.charIndex),vt)},get2DCursorLocation:function($t,vt){typeof $t>"u"&&($t=this.selectionStart);for(var b=vt?this._unwrappedTextLines:this._textLines,pt=b.length,st=0;st<pt;st++){if($t<=b[st].length)return{lineIndex:st,charIndex:$t};$t-=b[st].length+this.missingNewlineOffset(st)}return{lineIndex:st-1,charIndex:b[st-1].length<$t?b[st-1].length:$t}},getSelectionStyles:function($t,vt,b){typeof $t>"u"&&($t=this.selectionStart||0),typeof vt>"u"&&(vt=this.selectionEnd||$t);for(var pt=[],st=$t;st<vt;st++)pt.push(this.getStyleAtPosition(st,b));return pt},getStyleAtPosition:function($t,vt){var b=this.get2DCursorLocation($t),pt=vt?this.getCompleteStyleDeclaration(b.lineIndex,b.charIndex):this._getStyleDeclaration(b.lineIndex,b.charIndex);return pt||{}},setSelectionStyles:function($t,vt,b){typeof vt>"u"&&(vt=this.selectionStart||0),typeof b>"u"&&(b=this.selectionEnd||vt);for(var pt=vt;pt<b;pt++)this._extendStyles(pt,$t);return this._forceClearCache=!0,this},_getStyleDeclaration:function($t,vt){var b=this.styles&&this.styles[$t];return b?b[vt]:null},getCompleteStyleDeclaration:function($t,vt){for(var b=this._getStyleDeclaration($t,vt)||{},pt={},st,wt=0;wt<this._styleProperties.length;wt++)st=this._styleProperties[wt],pt[st]=typeof b[st]>"u"?this[st]:b[st];return pt},_setStyleDeclaration:function($t,vt,b){this.styles[$t][vt]=b},_deleteStyleDeclaration:function($t,vt){delete this.styles[$t][vt]},_getLineStyle:function($t){return!!this.styles[$t]},_setLineStyle:function($t){this.styles[$t]={}},_deleteLineStyle:function($t){delete this.styles[$t]}})}(),function(){function $t(vt){vt.textDecoration&&(vt.textDecoration.indexOf("underline")>-1&&(vt.underline=!0),vt.textDecoration.indexOf("line-through")>-1&&(vt.linethrough=!0),vt.textDecoration.indexOf("overline")>-1&&(vt.overline=!0),delete vt.textDecoration)}s.IText=s.util.createClass(s.Text,s.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(vt,b){this.callSuper("initialize",vt,b),this.initBehavior()},setSelectionStart:function(vt){vt=Math.max(vt,0),this._updateAndFire("selectionStart",vt)},setSelectionEnd:function(vt){vt=Math.min(vt,this.text.length),this._updateAndFire("selectionEnd",vt)},_updateAndFire:function(vt,b){this[vt]!==b&&(this._fireSelectionChanged(),this[vt]=b),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(vt){this.clearContextTop(),this.callSuper("render",vt),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(vt){this.callSuper("_render",vt)},clearContextTop:function(vt){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var b=this.canvas.contextTop,pt=this.canvas.viewportTransform;b.save(),b.transform(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]),this.transform(b),this._clearTextArea(b),vt||b.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var vt=this._getCursorBoundaries(),b=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(vt,b):this.renderSelection(vt,b),b.restore()}},_clearTextArea:function(vt){var b=this.width+4,pt=this.height+4;vt.clearRect(-b/2,-pt/2,b,pt)},_getCursorBoundaries:function(vt){typeof vt>"u"&&(vt=this.selectionStart);var b=this._getLeftOffset(),pt=this._getTopOffset(),st=this._getCursorBoundariesOffsets(vt);return{left:b,top:pt,leftOffset:st.left,topOffset:st.top}},_getCursorBoundariesOffsets:function(vt){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var b,pt,st,wt=0,Tt=0,Ct,jt=this.get2DCursorLocation(vt);st=jt.charIndex,pt=jt.lineIndex;for(var Lt=0;Lt<pt;Lt++)wt+=this.getHeightOfLine(Lt);b=this._getLineLeftOffset(pt);var Ht=this.__charBounds[pt][st];return Ht&&(Tt=Ht.left),this.charSpacing!==0&&st===this._textLines[pt].length&&(Tt-=this._getWidthOfCharSpacing()),Ct={top:wt,left:b+(Tt>0?Tt:0)},this.direction==="rtl"&&(Ct.left*=-1),this.cursorOffsetCache=Ct,this.cursorOffsetCache},renderCursor:function(vt,b){var pt=this.get2DCursorLocation(),st=pt.lineIndex,wt=pt.charIndex>0?pt.charIndex-1:0,Tt=this.getValueOfPropertyAt(st,wt,"fontSize"),Ct=this.scaleX*this.canvas.getZoom(),jt=this.cursorWidth/Ct,Lt=vt.topOffset,Ht=this.getValueOfPropertyAt(st,wt,"deltaY");Lt+=(1-this._fontSizeFraction)*this.getHeightOfLine(st)/this.lineHeight-Tt*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(vt,b),b.fillStyle=this.cursorColor||this.getValueOfPropertyAt(st,wt,"fill"),b.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,b.fillRect(vt.left+vt.leftOffset-jt/2,Lt+vt.top+Ht,jt,Tt)},renderSelection:function(vt,b){for(var pt=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,st=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,wt=this.textAlign.indexOf("justify")!==-1,Tt=this.get2DCursorLocation(pt),Ct=this.get2DCursorLocation(st),jt=Tt.lineIndex,Lt=Ct.lineIndex,Ht=Tt.charIndex<0?0:Tt.charIndex,Gt=Ct.charIndex<0?0:Ct.charIndex,Kt=jt;Kt<=Lt;Kt++){var tr=this._getLineLeftOffset(Kt)||0,rr=this.getHeightOfLine(Kt),Lr=0,jr=0,Yr=0;if(Kt===jt&&(jr=this.__charBounds[jt][Ht].left),Kt>=jt&&Kt<Lt)Yr=wt&&!this.isEndOfWrapping(Kt)?this.width:this.getLineWidth(Kt)||5;else if(Kt===Lt)if(Gt===0)Yr=this.__charBounds[Lt][Gt].left;else{var An=this._getWidthOfCharSpacing();Yr=this.__charBounds[Lt][Gt-1].left+this.__charBounds[Lt][Gt-1].width-An}Lr=rr,(this.lineHeight<1||Kt===Lt&&this.lineHeight>1)&&(rr/=this.lineHeight);var No=vt.left+tr+jr,o0=Yr-jr,t0=rr,c0=0;this.inCompositionMode?(b.fillStyle=this.compositionColor||"black",t0=1,c0=rr):b.fillStyle=this.selectionColor,this.direction==="rtl"&&(No=this.width-No-o0),b.fillRect(No,vt.top+vt.topOffset+c0,o0,t0),vt.topOffset+=Lr}},getCurrentCharFontSize:function(){var vt=this._getCurrentCharIndex();return this.getValueOfPropertyAt(vt.l,vt.c,"fontSize")},getCurrentCharColor:function(){var vt=this._getCurrentCharIndex();return this.getValueOfPropertyAt(vt.l,vt.c,"fill")},_getCurrentCharIndex:function(){var vt=this.get2DCursorLocation(this.selectionStart,!0),b=vt.charIndex>0?vt.charIndex-1:0;return{l:vt.lineIndex,c:b}}}),s.IText.fromObject=function(vt,b){var pt=s.util.stylesFromArray(vt.styles,vt.text),st=Object.assign({},vt,{styles:pt});if($t(st),st.styles)for(var wt in st.styles)for(var Tt in st.styles[wt])$t(st.styles[wt][Tt]);s.Object._fromObject("IText",st,b,"text")}}(),function(){var $t=s.util.object.clone;s.util.object.extend(s.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var vt=this;this.on("added",function(){var b=vt.canvas;b&&(b._hasITextHandlers||(b._hasITextHandlers=!0,vt._initCanvasHandlers(b)),b._iTextInstances=b._iTextInstances||[],b._iTextInstances.push(vt))})},initRemovedHandler:function(){var vt=this;this.on("removed",function(){var b=vt.canvas;b&&(b._iTextInstances=b._iTextInstances||[],s.util.removeFromArray(b._iTextInstances,vt),b._iTextInstances.length===0&&(b._hasITextHandlers=!1,vt._removeCanvasHandlers(b)))})},_initCanvasHandlers:function(vt){vt._mouseUpITextHandler=function(){vt._iTextInstances&&vt._iTextInstances.forEach(function(b){b.__isMousedown=!1})},vt.on("mouse:up",vt._mouseUpITextHandler)},_removeCanvasHandlers:function(vt){vt.off("mouse:up",vt._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(vt,b,pt,st){var wt;return wt={isAborted:!1,abort:function(){this.isAborted=!0}},vt.animate("_currentCursorOpacity",b,{duration:pt,onComplete:function(){wt.isAborted||vt[st]()},onChange:function(){vt.canvas&&vt.selectionStart===vt.selectionEnd&&vt.renderCursorOrSelection()},abort:function(){return wt.isAborted}}),wt},_onTickComplete:function(){var vt=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){vt._currentTickCompleteState=vt._animateCursor(vt,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(vt){var b=this,pt=vt?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){b._tick()},pt)},abortCursorAnimation:function(){var vt=this._currentTickState||this._currentTickCompleteState,b=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,vt&&b&&b.clearContext(b.contextTop||b.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(vt){var b=0,pt=vt-1;if(this._reSpace.test(this._text[pt]))for(;this._reSpace.test(this._text[pt]);)b++,pt--;for(;/\S/.test(this._text[pt])&&pt>-1;)b++,pt--;return vt-b},findWordBoundaryRight:function(vt){var b=0,pt=vt;if(this._reSpace.test(this._text[pt]))for(;this._reSpace.test(this._text[pt]);)b++,pt++;for(;/\S/.test(this._text[pt])&&pt<this._text.length;)b++,pt++;return vt+b},findLineBoundaryLeft:function(vt){for(var b=0,pt=vt-1;!/\n/.test(this._text[pt])&&pt>-1;)b++,pt--;return vt-b},findLineBoundaryRight:function(vt){for(var b=0,pt=vt;!/\n/.test(this._text[pt])&&pt<this._text.length;)b++,pt++;return vt+b},searchWordBoundary:function(vt,b){for(var pt=this._text,st=this._reSpace.test(pt[vt])?vt-1:vt,wt=pt[st],Tt=s.reNonWord;!Tt.test(wt)&&st>0&&st<pt.length;)st+=b,wt=pt[st];return Tt.test(wt)&&(st+=b===1?0:1),st},selectWord:function(vt){vt=vt||this.selectionStart;var b=this.searchWordBoundary(vt,-1),pt=this.searchWordBoundary(vt,1);this.selectionStart=b,this.selectionEnd=pt,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(vt){vt=vt||this.selectionStart;var b=this.findLineBoundaryLeft(vt),pt=this.findLineBoundaryRight(vt);return this.selectionStart=b,this.selectionEnd=pt,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(vt){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(vt),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(vt){vt._iTextInstances&&vt._iTextInstances.forEach(function(b){b.selected=!1,b.isEditing&&b.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(vt){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var b=this.getSelectionStartFromPointer(vt.e),pt=this.selectionStart,st=this.selectionEnd;(b!==this.__selectionStartOnMouseDown||pt===st)&&(pt===b||st===b)||(b>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=b):(this.selectionStart=b,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==pt||this.selectionEnd!==st)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(vt,b,pt){var st=pt.slice(0,vt),wt=s.util.string.graphemeSplit(st).length;if(vt===b)return{selectionStart:wt,selectionEnd:wt};var Tt=pt.slice(vt,b),Ct=s.util.string.graphemeSplit(Tt).length;return{selectionStart:wt,selectionEnd:wt+Ct}},fromGraphemeToStringSelection:function(vt,b,pt){var st=pt.slice(0,vt),wt=st.join("").length;if(vt===b)return{selectionStart:wt,selectionEnd:wt};var Tt=pt.slice(vt,b),Ct=Tt.join("").length;return{selectionStart:wt,selectionEnd:wt+Ct}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var vt=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=vt.selectionStart,this.hiddenTextarea.selectionEnd=vt.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var vt=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=vt.selectionEnd,this.inCompositionMode||(this.selectionStart=vt.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var vt=this._calcTextareaPosition();this.hiddenTextarea.style.left=vt.left,this.hiddenTextarea.style.top=vt.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var vt=this.inCompositionMode?this.compositionStart:this.selectionStart,b=this._getCursorBoundaries(vt),pt=this.get2DCursorLocation(vt),st=pt.lineIndex,wt=pt.charIndex,Tt=this.getValueOfPropertyAt(st,wt,"fontSize")*this.lineHeight,Ct=b.leftOffset,jt=this.calcTransformMatrix(),Lt={x:b.left+Ct,y:b.top+b.topOffset+Tt},Ht=this.canvas.getRetinaScaling(),Gt=this.canvas.upperCanvasEl,Kt=Gt.width/Ht,tr=Gt.height/Ht,rr=Kt-Tt,Lr=tr-Tt,jr=Gt.clientWidth/Kt,Yr=Gt.clientHeight/tr;return Lt=s.util.transformPoint(Lt,jt),Lt=s.util.transformPoint(Lt,this.canvas.viewportTransform),Lt.x*=jr,Lt.y*=Yr,Lt.x<0&&(Lt.x=0),Lt.x>rr&&(Lt.x=rr),Lt.y<0&&(Lt.y=0),Lt.y>Lr&&(Lt.y=Lr),Lt.x+=this.canvas._offset.left,Lt.y+=this.canvas._offset.top,{left:Lt.x+"px",top:Lt.y+"px",fontSize:Tt+"px",charHeight:Tt}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var vt=this._textBeforeEdit!==this.text,b=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,b&&(b.blur&&b.blur(),b.parentNode&&b.parentNode.removeChild(b)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),vt&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),vt&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var vt in this.styles)this._textLines[vt]||delete this.styles[vt]},removeStyleFromTo:function(vt,b){var pt=this.get2DCursorLocation(vt,!0),st=this.get2DCursorLocation(b,!0),wt=pt.lineIndex,Tt=pt.charIndex,Ct=st.lineIndex,jt=st.charIndex,Lt,Ht;if(wt!==Ct){if(this.styles[wt])for(Lt=Tt;Lt<this._unwrappedTextLines[wt].length;Lt++)delete this.styles[wt][Lt];if(this.styles[Ct])for(Lt=jt;Lt<this._unwrappedTextLines[Ct].length;Lt++)Ht=this.styles[Ct][Lt],Ht&&(this.styles[wt]||(this.styles[wt]={}),this.styles[wt][Tt+Lt-jt]=Ht);for(Lt=wt+1;Lt<=Ct;Lt++)delete this.styles[Lt];this.shiftLineStyles(Ct,wt-Ct)}else if(this.styles[wt]){Ht=this.styles[wt];var Gt=jt-Tt,Kt,tr;for(Lt=Tt;Lt<jt;Lt++)delete Ht[Lt];for(tr in this.styles[wt])Kt=parseInt(tr,10),Kt>=jt&&(Ht[Kt-Gt]=Ht[tr],delete Ht[tr])}},shiftLineStyles:function(vt,b){var pt=$t(this.styles);for(var st in this.styles){var wt=parseInt(st,10);wt>vt&&(this.styles[wt+b]=pt[wt],pt[wt-b]||delete this.styles[wt])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(vt,b,pt,st){var wt,Tt={},Ct=!1,jt=this._unwrappedTextLines[vt].length===b;pt||(pt=1),this.shiftLineStyles(vt,pt),this.styles[vt]&&(wt=this.styles[vt][b===0?b:b-1]);for(var Lt in this.styles[vt]){var Ht=parseInt(Lt,10);Ht>=b&&(Ct=!0,Tt[Ht-b]=this.styles[vt][Lt],jt&&b===0||delete this.styles[vt][Lt])}var Gt=!1;for(Ct&&!jt&&(this.styles[vt+pt]=Tt,Gt=!0),Gt&&pt--;pt>0;)st&&st[pt-1]?this.styles[vt+pt]={0:$t(st[pt-1])}:wt?this.styles[vt+pt]={0:$t(wt)}:delete this.styles[vt+pt],pt--;this._forceClearCache=!0},insertCharStyleObject:function(vt,b,pt,st){this.styles||(this.styles={});var wt=this.styles[vt],Tt=wt?$t(wt):{};pt||(pt=1);for(var Ct in Tt){var jt=parseInt(Ct,10);jt>=b&&(wt[jt+pt]=Tt[jt],Tt[jt-pt]||delete wt[jt])}if(this._forceClearCache=!0,st){for(;pt--;)Object.keys(st[pt]).length&&(this.styles[vt]||(this.styles[vt]={}),this.styles[vt][b+pt]=$t(st[pt]));return}if(wt)for(var Lt=wt[b?b-1:1];Lt&&pt--;)this.styles[vt][b+pt]=$t(Lt)},insertNewStyleBlock:function(vt,b,pt){for(var st=this.get2DCursorLocation(b,!0),wt=[0],Tt=0,Ct=0;Ct<vt.length;Ct++)vt[Ct]===`
`?(Tt++,wt[Tt]=0):wt[Tt]++;wt[0]>0&&(this.insertCharStyleObject(st.lineIndex,st.charIndex,wt[0],pt),pt=pt&&pt.slice(wt[0]+1)),Tt&&this.insertNewlineStyleObject(st.lineIndex,st.charIndex+wt[0],Tt);for(var Ct=1;Ct<Tt;Ct++)wt[Ct]>0?this.insertCharStyleObject(st.lineIndex+Ct,0,wt[Ct],pt):pt&&this.styles[st.lineIndex+Ct]&&pt[0]&&(this.styles[st.lineIndex+Ct][0]=pt[0]),pt=pt&&pt.slice(wt[Ct]+1);wt[Ct]>0&&this.insertCharStyleObject(st.lineIndex+Ct,0,wt[Ct],pt)},setSelectionStartEndWithShift:function(vt,b,pt){pt<=vt?(b===vt?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=vt),this.selectionStart=pt):pt>vt&&pt<b?this._selectionDirection==="right"?this.selectionEnd=pt:this.selectionStart=pt:(b===vt?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=b),this.selectionEnd=pt)},setSelectionInBoundaries:function(){var vt=this.text.length;this.selectionStart>vt?this.selectionStart=vt:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>vt?this.selectionEnd=vt:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),s.util.object.extend(s.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function($t){if(this.canvas){this.__newClickTime=+new Date;var vt=$t.pointer;this.isTripleClick(vt)&&(this.fire("tripleclick",$t),this._stopEvent($t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=vt,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function($t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===$t.x&&this.__lastPointer.y===$t.y},_stopEvent:function($t){$t.preventDefault&&$t.preventDefault(),$t.stopPropagation&&$t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function($t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer($t.e))},tripleClickHandler:function($t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer($t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function($t){!this.canvas||!this.editable||$t.e.button&&$t.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick($t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function($t){!this.canvas||!this.editable||$t.e.button&&$t.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function($t){if(this.__isMousedown=!1,!(!this.editable||this.group||$t.transform&&$t.transform.actionPerformed||$t.e.button&&$t.e.button!==1)){if(this.canvas){var vt=this.canvas._activeObject;if(vt&&vt!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing($t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function($t){var vt=this.getSelectionStartFromPointer($t),b=this.selectionStart,pt=this.selectionEnd;$t.shiftKey?this.setSelectionStartEndWithShift(b,pt,vt):(this.selectionStart=vt,this.selectionEnd=vt),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function($t){for(var vt=this.getLocalPointer($t),b=0,pt=0,st=0,wt=0,Tt=0,Ct,jt,Lt=0,Ht=this._textLines.length;Lt<Ht&&st<=vt.y;Lt++)st+=this.getHeightOfLine(Lt)*this.scaleY,Tt=Lt,Lt>0&&(wt+=this._textLines[Lt-1].length+this.missingNewlineOffset(Lt-1));Ct=this._getLineLeftOffset(Tt),pt=Ct*this.scaleX,jt=this._textLines[Tt],this.direction==="rtl"&&(vt.x=this.width*this.scaleX-vt.x+pt);for(var Gt=0,Kt=jt.length;Gt<Kt&&(b=pt,pt+=this.__charBounds[Tt][Gt].kernedWidth*this.scaleX,pt<=vt.x);Gt++)wt++;return this._getNewSelectionStartFromOffset(vt,b,pt,wt,Kt)},_getNewSelectionStartFromOffset:function($t,vt,b,pt,st){var wt=$t.x-vt,Tt=b-$t.x,Ct=Tt>wt||Tt<0?0:1,jt=pt+Ct;return this.flipX&&(jt=st-jt),jt>this._text.length&&(jt=this._text.length),jt}}),s.util.object.extend(s.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=s.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var $t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+$t.top+"; left: "+$t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+$t.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):s.document.body.appendChild(this.hiddenTextarea),s.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),s.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),s.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),s.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),s.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),s.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),s.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),s.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),s.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(s.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function($t){if(this.isEditing){var vt=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if($t.keyCode in vt)this[vt[$t.keyCode]]($t);else if($t.keyCode in this.ctrlKeysMapDown&&($t.ctrlKey||$t.metaKey))this[this.ctrlKeysMapDown[$t.keyCode]]($t);else return;$t.stopImmediatePropagation(),$t.preventDefault(),$t.keyCode>=33&&$t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function($t){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if($t.keyCode in this.ctrlKeysMapUp&&($t.ctrlKey||$t.metaKey))this[this.ctrlKeysMapUp[$t.keyCode]]($t);else return;$t.stopImmediatePropagation(),$t.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function($t){var vt=this.fromPaste;if(this.fromPaste=!1,$t&&$t.stopPropagation(),!!this.isEditing){var b=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,pt=this._text.length,st=b.length,wt,Tt,Ct=st-pt,jt=this.selectionStart,Lt=this.selectionEnd,Ht=jt!==Lt,Gt,Kt,tr;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var rr=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),Lr=jt>rr.selectionStart;Ht?(wt=this._text.slice(jt,Lt),Ct+=Lt-jt):st<pt&&(Lr?wt=this._text.slice(Lt+Ct,Lt):wt=this._text.slice(jt,jt-Ct)),Tt=b.slice(rr.selectionEnd-Ct,rr.selectionEnd),wt&&wt.length&&(Tt.length&&(Gt=this.getSelectionStyles(jt,jt+1,!1),Gt=Tt.map(function(){return Gt[0]})),Ht?(Kt=jt,tr=Lt):Lr?(Kt=Lt-wt.length,tr=Lt):(Kt=Lt,tr=Lt+wt.length),this.removeStyleFromTo(Kt,tr)),Tt.length&&(vt&&Tt.join("")===s.copiedText&&!s.disableStyleCopyPaste&&(Gt=s.copiedTextStyle),this.insertNewStyleBlock(Tt,jt,Gt)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function($t){this.compositionStart=$t.target.selectionStart,this.compositionEnd=$t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(s.copiedText=this.getSelectedText(),s.disableStyleCopyPaste?s.copiedTextStyle=null:s.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function($t){return $t&&$t.clipboardData||s.window.clipboardData},_getWidthBeforeCursor:function($t,vt){var b=this._getLineLeftOffset($t),pt;return vt>0&&(pt=this.__charBounds[$t][vt-1],b+=pt.left+pt.width),b},getDownCursorOffset:function($t,vt){var b=this._getSelectionForOffset($t,vt),pt=this.get2DCursorLocation(b),st=pt.lineIndex;if(st===this._textLines.length-1||$t.metaKey||$t.keyCode===34)return this._text.length-b;var wt=pt.charIndex,Tt=this._getWidthBeforeCursor(st,wt),Ct=this._getIndexOnLine(st+1,Tt),jt=this._textLines[st].slice(wt);return jt.length+Ct+1+this.missingNewlineOffset(st)},_getSelectionForOffset:function($t,vt){return $t.shiftKey&&this.selectionStart!==this.selectionEnd&&vt?this.selectionEnd:this.selectionStart},getUpCursorOffset:function($t,vt){var b=this._getSelectionForOffset($t,vt),pt=this.get2DCursorLocation(b),st=pt.lineIndex;if(st===0||$t.metaKey||$t.keyCode===33)return-b;var wt=pt.charIndex,Tt=this._getWidthBeforeCursor(st,wt),Ct=this._getIndexOnLine(st-1,Tt),jt=this._textLines[st].slice(0,wt),Lt=this.missingNewlineOffset(st-1);return-this._textLines[st-1].length+Ct-jt.length+(1-Lt)},_getIndexOnLine:function($t,vt){for(var b=this._textLines[$t],pt=this._getLineLeftOffset($t),st=pt,wt=0,Tt,Ct,jt=0,Lt=b.length;jt<Lt;jt++)if(Tt=this.__charBounds[$t][jt].width,st+=Tt,st>vt){Ct=!0;var Ht=st-Tt,Gt=st,Kt=Math.abs(Ht-vt),tr=Math.abs(Gt-vt);wt=tr<Kt?jt:jt-1;break}return Ct||(wt=b.length-1),wt},moveCursorDown:function($t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",$t)},moveCursorUp:function($t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",$t)},_moveCursorUpOrDown:function($t,vt){var b="get"+$t+"CursorOffset",pt=this[b](vt,this._selectionDirection==="right");vt.shiftKey?this.moveCursorWithShift(pt):this.moveCursorWithoutShift(pt),pt!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function($t){var vt=this._selectionDirection==="left"?this.selectionStart+$t:this.selectionEnd+$t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,vt),$t!==0},moveCursorWithoutShift:function($t){return $t<0?(this.selectionStart+=$t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=$t,this.selectionStart=this.selectionEnd),$t!==0},moveCursorLeft:function($t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",$t)},_move:function($t,vt,b){var pt;if($t.altKey)pt=this["findWordBoundary"+b](this[vt]);else if($t.metaKey||$t.keyCode===35||$t.keyCode===36)pt=this["findLineBoundary"+b](this[vt]);else return this[vt]+=b==="Left"?-1:1,!0;if(typeof pt<"u"&&this[vt]!==pt)return this[vt]=pt,!0},_moveLeft:function($t,vt){return this._move($t,vt,"Left")},_moveRight:function($t,vt){return this._move($t,vt,"Right")},moveCursorLeftWithoutShift:function($t){var vt=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(vt=this._moveLeft($t,"selectionStart")),this.selectionEnd=this.selectionStart,vt},moveCursorLeftWithShift:function($t){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft($t,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft($t,"selectionStart")},moveCursorRight:function($t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",$t)},_moveCursorLeftOrRight:function($t,vt){var b="moveCursor"+$t+"With";this._currentCursorOpacity=1,vt.shiftKey?b+="Shift":b+="outShift",this[b](vt)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function($t){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight($t,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight($t,"selectionEnd")},moveCursorRightWithoutShift:function($t){var vt=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(vt=this._moveRight($t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,vt},removeChars:function($t,vt){typeof vt>"u"&&(vt=$t+1),this.removeStyleFromTo($t,vt),this._text.splice($t,vt-$t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function($t,vt,b,pt){typeof pt>"u"&&(pt=b),pt>b&&this.removeStyleFromTo(b,pt);var st=s.util.string.graphemeSplit($t);this.insertNewStyleBlock(st,b,vt),this._text=[].concat(this._text.slice(0,b),st,this._text.slice(pt)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var $t=s.util.toFixed,vt=/  +/g;s.util.object.extend(s.Text.prototype,{_toSVG:function(){var b=this._getSVGLeftTopOffsets(),pt=this._getSVGTextAndBg(b.textTop,b.textLeft);return this._wrapSVGTextAndBg(pt)},toSVG:function(b){return this._createBaseSVGMarkup(this._toSVG(),{reviver:b,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(b){var pt=!0,st=this.getSvgTextDecoration(this);return[b.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",st?'text-decoration="'+st+'" ':"",'style="',this.getSvgStyles(pt),'"',this.addPaintOrder()," >",b.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(b,pt){var st=[],wt=[],Tt=b,Ct;this._setSVGBg(wt);for(var jt=0,Lt=this._textLines.length;jt<Lt;jt++)Ct=this._getLineLeftOffset(jt),(this.textBackgroundColor||this.styleHas("textBackgroundColor",jt))&&this._setSVGTextLineBg(wt,jt,pt+Ct,Tt),this._setSVGTextLineText(st,jt,pt+Ct,Tt),Tt+=this.getHeightOfLine(jt);return{textSpans:st,textBgRects:wt}},_createTextCharSpan:function(b,pt,st,wt){var Tt=b!==b.trim()||b.match(vt),Ct=this.getSvgSpanStyles(pt,Tt),jt=Ct?'style="'+Ct+'"':"",Lt=pt.deltaY,Ht="",Gt=s.Object.NUM_FRACTION_DIGITS;return Lt&&(Ht=' dy="'+$t(Lt,Gt)+'" '),['<tspan x="',$t(st,Gt),'" y="',$t(wt,Gt),'" ',Ht,jt,">",s.util.string.escapeXml(b),"</tspan>"].join("")},_setSVGTextLineText:function(b,pt,st,wt){var Tt=this.getHeightOfLine(pt),Ct=this.textAlign.indexOf("justify")!==-1,jt,Lt,Ht="",Gt,Kt,tr=0,rr=this._textLines[pt],Lr;wt+=Tt*(1-this._fontSizeFraction)/this.lineHeight;for(var jr=0,Yr=rr.length-1;jr<=Yr;jr++)Lr=jr===Yr||this.charSpacing,Ht+=rr[jr],Gt=this.__charBounds[pt][jr],tr===0?(st+=Gt.kernedWidth-Gt.width,tr+=Gt.width):tr+=Gt.kernedWidth,Ct&&!Lr&&this._reSpaceAndTab.test(rr[jr])&&(Lr=!0),Lr||(jt=jt||this.getCompleteStyleDeclaration(pt,jr),Lt=this.getCompleteStyleDeclaration(pt,jr+1),Lr=s.util.hasStyleChanged(jt,Lt,!0)),Lr&&(Kt=this._getStyleDeclaration(pt,jr)||{},b.push(this._createTextCharSpan(Ht,Kt,st,wt)),Ht="",jt=Lt,st+=tr,tr=0)},_pushTextBgRect:function(b,pt,st,wt,Tt,Ct){var jt=s.Object.NUM_FRACTION_DIGITS;b.push("		<rect ",this._getFillAttributes(pt),' x="',$t(st,jt),'" y="',$t(wt,jt),'" width="',$t(Tt,jt),'" height="',$t(Ct,jt),`"></rect>
`)},_setSVGTextLineBg:function(b,pt,st,wt){for(var Tt=this._textLines[pt],Ct=this.getHeightOfLine(pt)/this.lineHeight,jt=0,Lt=0,Ht,Gt,Kt=this.getValueOfPropertyAt(pt,0,"textBackgroundColor"),tr=0,rr=Tt.length;tr<rr;tr++)Ht=this.__charBounds[pt][tr],Gt=this.getValueOfPropertyAt(pt,tr,"textBackgroundColor"),Gt!==Kt?(Kt&&this._pushTextBgRect(b,Kt,st+Lt,wt,jt,Ct),Lt=Ht.left,jt=Ht.width,Kt=Gt):jt+=Ht.kernedWidth;Gt&&this._pushTextBgRect(b,Gt,st+Lt,wt,jt,Ct)},_getFillAttributes:function(b){var pt=b&&typeof b=="string"?new s.Color(b):"";return!pt||!pt.getSource()||pt.getAlpha()===1?'fill="'+b+'"':'opacity="'+pt.getAlpha()+'" fill="'+pt.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(b){for(var pt=0,st=0,wt=0;wt<b;wt++)pt+=this.getHeightOfLine(wt);return st=this.getHeightOfLine(wt),{lineTop:pt,offset:(this._fontSizeMult-this._fontSizeFraction)*st/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(b){var pt=s.Object.prototype.getSvgStyles.call(this,b);return pt+" white-space: pre;"}})}(),function($t){var vt=$t.fabric||($t.fabric={});vt.Textbox=vt.util.createClass(vt.IText,vt.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:vt.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(b){for(var pt=0,st=0,wt=0,Tt={},Ct=0;Ct<b.graphemeLines.length;Ct++)b.graphemeText[wt]===`
`&&Ct>0?(st=0,wt++,pt++):!this.splitByGrapheme&&this._reSpaceAndTab.test(b.graphemeText[wt])&&Ct>0&&(st++,wt++),Tt[Ct]={line:pt,offset:st},wt+=b.graphemeLines[Ct].length,st+=b.graphemeLines[Ct].length;return Tt},styleHas:function(b,pt){if(this._styleMap&&!this.isWrapping){var st=this._styleMap[pt];st&&(pt=st.line)}return vt.Text.prototype.styleHas.call(this,b,pt)},isEmptyStyles:function(b){if(!this.styles)return!0;var pt=0,st=b+1,wt,Tt,Ct=!1,jt=this._styleMap[b],Lt=this._styleMap[b+1];jt&&(b=jt.line,pt=jt.offset),Lt&&(st=Lt.line,Ct=st===b,wt=Lt.offset),Tt=typeof b>"u"?this.styles:{line:this.styles[b]};for(var Ht in Tt)for(var Gt in Tt[Ht])if(Gt>=pt&&(!Ct||Gt<wt))for(var Kt in Tt[Ht][Gt])return!1;return!0},_getStyleDeclaration:function(b,pt){if(this._styleMap&&!this.isWrapping){var st=this._styleMap[b];if(!st)return null;b=st.line,pt=st.offset+pt}return this.callSuper("_getStyleDeclaration",b,pt)},_setStyleDeclaration:function(b,pt,st){var wt=this._styleMap[b];b=wt.line,pt=wt.offset+pt,this.styles[b][pt]=st},_deleteStyleDeclaration:function(b,pt){var st=this._styleMap[b];b=st.line,pt=st.offset+pt,delete this.styles[b][pt]},_getLineStyle:function(b){var pt=this._styleMap[b];return!!this.styles[pt.line]},_setLineStyle:function(b){var pt=this._styleMap[b];this.styles[pt.line]={}},_wrapText:function(b,pt){var st=[],wt;for(this.isWrapping=!0,wt=0;wt<b.length;wt++)st=st.concat(this._wrapLine(b[wt],wt,pt));return this.isWrapping=!1,st},_measureWord:function(b,pt,st){var wt=0,Tt,Ct=!0;st=st||0;for(var jt=0,Lt=b.length;jt<Lt;jt++){var Ht=this._getGraphemeBox(b[jt],pt,jt+st,Tt,Ct);wt+=Ht.kernedWidth,Tt=b[jt]}return wt},_wrapLine:function(b,pt,st,No){var Tt=0,Ct=this.splitByGrapheme,jt=[],Lt=[],Ht=Ct?vt.util.string.graphemeSplit(b):b.split(this._wordJoiners),Gt="",Kt=0,tr=Ct?"":" ",rr=0,Lr=0,jr=0,Yr=!0,An=this._getWidthOfCharSpacing(),No=No||0;Ht.length===0&&Ht.push([]),st-=No;for(var o0=0;o0<Ht.length;o0++)Gt=Ct?Ht[o0]:vt.util.string.graphemeSplit(Ht[o0]),rr=this._measureWord(Gt,pt,Kt),Kt+=Gt.length,Tt+=Lr+rr-An,Tt>st&&!Yr?(jt.push(Lt),Lt=[],Tt=rr,Yr=!0):Tt+=An,!Yr&&!Ct&&Lt.push(tr),Lt=Lt.concat(Gt),Lr=Ct?0:this._measureWord([tr],pt,Kt),Kt++,Yr=!1,rr>jr&&(jr=rr);return o0&&jt.push(Lt),jr+No>this.dynamicMinWidth&&(this.dynamicMinWidth=jr-An+No),jt},isEndOfWrapping:function(b){return!this._styleMap[b+1]||this._styleMap[b+1].line!==this._styleMap[b].line},missingNewlineOffset:function(b){return this.splitByGrapheme?this.isEndOfWrapping(b)?1:0:1},_splitTextIntoLines:function(b){for(var pt=vt.Text.prototype._splitTextIntoLines.call(this,b),st=this._wrapText(pt.lines,this.width),wt=new Array(st.length),Tt=0;Tt<st.length;Tt++)wt[Tt]=st[Tt].join("");return pt.lines=wt,pt.graphemeLines=st,pt},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var b={};for(var pt in this._styleMap)this._textLines[pt]&&(b[this._styleMap[pt].line]=1);for(var pt in this.styles)b[pt]||delete this.styles[pt]},toObject:function(b){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(b))}}),vt.Textbox.fromObject=function(b,pt){var st=vt.util.stylesFromArray(b.styles,b.text),wt=Object.assign({},b,{styles:st});return vt.Object._fromObject("Textbox",wt,pt,"text")}}(a),function(){var $t=s.controlsUtils,vt=$t.scaleSkewCursorStyleHandler,b=$t.scaleCursorStyleHandler,pt=$t.scalingEqually,st=$t.scalingYOrSkewingX,wt=$t.scalingXOrSkewingY,Tt=$t.scaleOrSkewActionName,Ct=s.Object.prototype.controls;if(Ct.ml=new s.Control({x:-.5,y:0,cursorStyleHandler:vt,actionHandler:wt,getActionName:Tt}),Ct.mr=new s.Control({x:.5,y:0,cursorStyleHandler:vt,actionHandler:wt,getActionName:Tt}),Ct.mb=new s.Control({x:0,y:.5,cursorStyleHandler:vt,actionHandler:st,getActionName:Tt}),Ct.mt=new s.Control({x:0,y:-.5,cursorStyleHandler:vt,actionHandler:st,getActionName:Tt}),Ct.tl=new s.Control({x:-.5,y:-.5,cursorStyleHandler:b,actionHandler:pt}),Ct.tr=new s.Control({x:.5,y:-.5,cursorStyleHandler:b,actionHandler:pt}),Ct.bl=new s.Control({x:-.5,y:.5,cursorStyleHandler:b,actionHandler:pt}),Ct.br=new s.Control({x:.5,y:.5,cursorStyleHandler:b,actionHandler:pt}),Ct.mtr=new s.Control({x:0,y:-.5,actionHandler:$t.rotationWithSnapping,cursorStyleHandler:$t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),s.Textbox){var jt=s.Textbox.prototype.controls={};jt.mtr=Ct.mtr,jt.tr=Ct.tr,jt.br=Ct.br,jt.tl=Ct.tl,jt.bl=Ct.bl,jt.mt=Ct.mt,jt.mb=Ct.mb,jt.mr=new s.Control({x:.5,y:0,actionHandler:$t.changeWidth,cursorStyleHandler:vt,actionName:"resizing"}),jt.ml=new s.Control({x:-.5,y:0,actionHandler:$t.changeWidth,cursorStyleHandler:vt,actionName:"resizing"})}}()})(fabric);function cn$1(...a){return twMerge(clsx(a))}function dataURItoBlob(a){const s=a.split(",")[0].split(":")[1].split(";")[0],c=atob(a.split(",")[1]),d=[];for(let et=0;et<c.length;et+=1)d.push(c.charCodeAt(et));return new Blob([new Uint8Array(d)],{type:s})}async function urlToDataURI(a){const c=await(await fetch(a,{method:"GET",mode:"cors",cache:"no-cache",headers:{Origin:window.location.origin}})).blob();return new Promise((d,et)=>{const g=new FileReader;g.onloadend=()=>{d(g.result)},g.onerror=et,g.readAsDataURL(c)})}function loadImage(a,s){return new Promise((c,d)=>{const et=a.src,g=a;g.onload=c,g.onerror=at=>{g.src=et,d(at)},g.src=s})}async function blobToImage(a){const s=URL.createObjectURL(a),c=new Image;return await loadImage(c,s),c}function canvasToImage(a){return new Promise((s,c)=>{const d=new Image;d.addEventListener("load",()=>{s(d)}),d.addEventListener("error",et=>{c(et)}),d.src=a.toDataURL()})}function srcToFile(a,s,c){return fetch(a).then(function(d){return d.arrayBuffer()}).then(function(d){return new File([d],s,{type:c})})}function randomNumberInRange(a,s){return Math.floor(Math.random()*(s-a+1))+a}function base64ToBlob(a){const s=atob(a),c=new Array(s.length);for(let g=0;g<s.length;g++)c[g]=s.charCodeAt(g);const d=new Uint8Array(c);return new Blob([d],{type:"image/png"})}function isMidClick(a){return a.e.button===1}function drawLines(a,s,c=BRUSH_COLOR){a.strokeStyle=c,a.lineCap="round",a.lineJoin="round",s.forEach(d=>{!(d!=null&&d.pts.length)||!d.size||(a.lineWidth=d.size,a.beginPath(),a.moveTo(d.pts[0].x,d.pts[0].y),d.pts.forEach(et=>a.lineTo(et.x,et.y)),a.stroke())})}const generateMask=(a,s,c,d=[],et="white")=>{const g=document.createElement("canvas");g.width=a,g.height=s;const at=g.getContext("2d");if(!at)throw new Error("could not retrieve mask canvas");return d.forEach($t=>{at.drawImage($t,0,0,a,s)}),c.forEach($t=>{drawLines(at,$t,et)}),g},generateFromCanvas=(a,s,c)=>new Promise((d,et)=>{var g=new fabric.fabric.Canvas(null,{width:s,height:c});let at,$t;const vt=JSON.parse(a),b=vt.objects.filter(Tt=>Tt.type==="path"),pt={...vt,objects:b},st=vt.objects.filter(Tt=>Tt.type==="image"),wt={...vt,objects:st};g.loadFromJSON(pt,()=>{try{if($t=g.toDataURL(),!$t)throw new Error("Mask generation failed")}catch(Tt){et(Tt)}}),g.clear(),g.loadFromJSON(wt,()=>{try{if(at=g.toDataURL(),!at)throw new Error("Image generation failed");d({targetMask:$t,targetFile:at})}catch(Tt){et(Tt)}})}),convertToBase64=a=>new Promise((s,c)=>{const d=new FileReader;d.onload=et=>{var at;const g=(at=et.target)==null?void 0:at.result;s(g)},d.onerror=et=>{c(et)},d.readAsDataURL(a)}),getLogLevelPriority=a=>{switch(a){case LOG_LEVELS.DEBUG:return 0;case LOG_LEVELS.INFO:return 1;case LOG_LEVELS.ERROR:return 2;default:return 0}},currentLogLevel="debug",currentLogLevelPriority=getLogLevelPriority(currentLogLevel),getCallerInfo=()=>{const c=new Error().stack.split(`
`)[3].trim(),d=c.match(/\((.*):(\d+):(\d+)\)/);if(d)return`${d[1]}:${d[2]}`;{const et=c.match(/at\s+(.*):(\d+):(\d+)/);if(et)return`${et[1]}:${et[2]}`}return"unknown"},debugLog=(a,...s)=>{if(getLogLevelPriority(a)>=currentLogLevelPriority){const d=getCallerInfo();console.log(`[${a.toUpperCase()}] [${d}] 
`,...s)}},ToastProvider=$054eb8030ebde76e$export$2881499e37b75b9a,ToastViewport=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($054eb8030ebde76e$export$d5c6c08dc2d3ca7,{ref:c,className:cn$1("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),tabIndex:-1,...s}));ToastViewport.displayName=$054eb8030ebde76e$export$d5c6c08dc2d3ca7.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:a,variant:s,...c},d)=>jsxRuntimeExports.jsx($054eb8030ebde76e$export$be92b6f5f03c0fe9,{ref:d,className:cn$1(toastVariants({variant:s}),a),tabIndex:-1,...c}));Toast.displayName=$054eb8030ebde76e$export$be92b6f5f03c0fe9.displayName;const ToastAction=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($054eb8030ebde76e$export$e19cd5f9376f8cee,{ref:c,className:cn$1("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),tabIndex:-1,...s}));ToastAction.displayName=$054eb8030ebde76e$export$e19cd5f9376f8cee.displayName;const ToastClose=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($054eb8030ebde76e$export$f39c2d165cd861fe,{ref:c,className:cn$1("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",tabIndex:-1,...s,children:jsxRuntimeExports.jsx(Cross2Icon,{className:"h-4 w-4"})}));ToastClose.displayName=$054eb8030ebde76e$export$f39c2d165cd861fe.displayName;const ToastTitle=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($054eb8030ebde76e$export$f99233281efd08a0,{ref:c,className:cn$1("text-sm font-semibold [&+div]:text-xs",a),tabIndex:-1,...s}));ToastTitle.displayName=$054eb8030ebde76e$export$f99233281efd08a0.displayName;const ToastDescription=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($054eb8030ebde76e$export$393edc798c47379d,{ref:c,className:cn$1("text-sm opacity-90",a),...s,tabIndex:-1}));ToastDescription.displayName=$054eb8030ebde76e$export$393edc798c47379d.displayName;const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_VALUE,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=a=>{if(toastTimeouts.has(a))return;const s=setTimeout(()=>{toastTimeouts.delete(a),dispatch({type:"REMOVE_TOAST",toastId:a})},TOAST_REMOVE_DELAY);toastTimeouts.set(a,s)},reducer=(a,s)=>{switch(s.type){case"ADD_TOAST":return{...a,toasts:[s.toast,...a.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(c=>c.id===s.toast.id?{...c,...s.toast}:c)};case"DISMISS_TOAST":{const{toastId:c}=s;return c?addToRemoveQueue(c):a.toasts.forEach(d=>{addToRemoveQueue(d.id)}),{...a,toasts:a.toasts.map(d=>d.id===c||c===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return s.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(c=>c.id!==s.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(a){memoryState=reducer(memoryState,a),listeners.forEach(s=>{s(memoryState)})}function toast({...a}){const s=genId(),c=et=>dispatch({type:"UPDATE_TOAST",toast:{...et,id:s}}),d=()=>dispatch({type:"DISMISS_TOAST",toastId:s});return dispatch({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:et=>{et||d()}}}),{id:s,dismiss:d,update:c}}function useToast(){const[a,s]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(s),()=>{const c=listeners.indexOf(s);c>-1&&listeners.splice(c,1)}),[a]),{...a,toast,dismiss:c=>dispatch({type:"DISMISS_TOAST",toastId:c})}}function Toaster(){const{toasts:a}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[a.map(function({id:s,title:c,description:d,action:et,...g}){return jsxRuntimeExports.jsxs(Toast,{...g,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[c&&jsxRuntimeExports.jsx(ToastTitle,{children:c}),d&&jsxRuntimeExports.jsx(ToastDescription,{children:d})]}),et,jsxRuntimeExports.jsx(ToastClose,{})]},s)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...a)=>a.filter((s,c,d)=>!!s&&d.indexOf(s)===c).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:et="",children:g,iconNode:at,...$t},vt)=>reactExports.createElement("svg",{ref:vt,...defaultAttributes,width:s,height:s,stroke:a,strokeWidth:d?Number(c)*24/Number(s):c,className:mergeClasses("lucide",et),...$t},[...at.map(([b,pt])=>reactExports.createElement(b,pt)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(a,s)=>{const c=reactExports.forwardRef(({className:d,...et},g)=>reactExports.createElement(Icon,{ref:g,iconNode:s,className:mergeClasses(`lucide-${toKebabCase(a)}`,d),...et}));return c.displayName=`${a}`,c};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronsUpDown=createLucideIcon("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eraser=createLucideIcon("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Expand=createLucideIcon("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$1=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Images=createLucideIcon("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Keyboard=createLucideIcon("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Layers=createLucideIcon("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Paintbrush=createLucideIcon("Paintbrush",[["path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z",key:"m6k5sh"}],["path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7",key:"arzq70"}],["path",{d:"M14.5 17.5 4.5 15",key:"s7fvrz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Paperclip=createLucideIcon("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RectangleHorizontal=createLucideIcon("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RectangleVertical=createLucideIcon("RectangleVertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Redo=createLucideIcon("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Square=createLucideIcon("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Undo=createLucideIcon("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WandSparkles=createLucideIcon("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var define_import_meta_env_default$1={VITE_BACKEND:"https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",VITE_RUNPOD:"J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",VITE_DEBUG:"true",VITE_LOG_LEVEL:"debug",BASE_URL:"/images-project",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function createJSONStorage(a,s){let c;try{c=a()}catch{return}return{getItem:et=>{var g;const at=vt=>vt===null?null:JSON.parse(vt,void 0),$t=(g=c.getItem(et))!=null?g:null;return $t instanceof Promise?$t.then(at):at($t)},setItem:(et,g)=>c.setItem(et,JSON.stringify(g,void 0)),removeItem:et=>c.removeItem(et)}}const toThenable=a=>s=>{try{const c=a(s);return c instanceof Promise?c:{then(d){return toThenable(d)(c)},catch(d){return this}}}catch(c){return{then(d){return this},catch(d){return toThenable(d)(c)}}}},oldImpl=(a,s)=>(c,d,et)=>{let g={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:Lt=>Lt,version:0,merge:(Lt,Ht)=>({...Ht,...Lt}),...s},at=!1;const $t=new Set,vt=new Set;let b;try{b=g.getStorage()}catch{}if(!b)return a((...Lt)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),c(...Lt)},d,et);const pt=toThenable(g.serialize),st=()=>{const Lt=g.partialize({...d()});let Ht;const Gt=pt({state:Lt,version:g.version}).then(Kt=>b.setItem(g.name,Kt)).catch(Kt=>{Ht=Kt});if(Ht)throw Ht;return Gt},wt=et.setState;et.setState=(Lt,Ht)=>{wt(Lt,Ht),st()};const Tt=a((...Lt)=>{c(...Lt),st()},d,et);let Ct;const jt=()=>{var Lt;if(!b)return;at=!1,$t.forEach(Gt=>Gt(d()));const Ht=((Lt=g.onRehydrateStorage)==null?void 0:Lt.call(g,d()))||void 0;return toThenable(b.getItem.bind(b))(g.name).then(Gt=>{if(Gt)return g.deserialize(Gt)}).then(Gt=>{if(Gt)if(typeof Gt.version=="number"&&Gt.version!==g.version){if(g.migrate)return g.migrate(Gt.state,Gt.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return Gt.state}).then(Gt=>{var Kt;return Ct=g.merge(Gt,(Kt=d())!=null?Kt:Tt),c(Ct,!0),st()}).then(()=>{Ht==null||Ht(Ct,void 0),at=!0,vt.forEach(Gt=>Gt(Ct))}).catch(Gt=>{Ht==null||Ht(void 0,Gt)})};return et.persist={setOptions:Lt=>{g={...g,...Lt},Lt.getStorage&&(b=Lt.getStorage())},clearStorage:()=>{b==null||b.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>jt(),hasHydrated:()=>at,onHydrate:Lt=>($t.add(Lt),()=>{$t.delete(Lt)}),onFinishHydration:Lt=>(vt.add(Lt),()=>{vt.delete(Lt)})},jt(),Ct||Tt},newImpl=(a,s)=>(c,d,et)=>{let g={storage:createJSONStorage(()=>localStorage),partialize:jt=>jt,version:0,merge:(jt,Lt)=>({...Lt,...jt}),...s},at=!1;const $t=new Set,vt=new Set;let b=g.storage;if(!b)return a((...jt)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),c(...jt)},d,et);const pt=()=>{const jt=g.partialize({...d()});return b.setItem(g.name,{state:jt,version:g.version})},st=et.setState;et.setState=(jt,Lt)=>{st(jt,Lt),pt()};const wt=a((...jt)=>{c(...jt),pt()},d,et);et.getInitialState=()=>wt;let Tt;const Ct=()=>{var jt,Lt;if(!b)return;at=!1,$t.forEach(Gt=>{var Kt;return Gt((Kt=d())!=null?Kt:wt)});const Ht=((Lt=g.onRehydrateStorage)==null?void 0:Lt.call(g,(jt=d())!=null?jt:wt))||void 0;return toThenable(b.getItem.bind(b))(g.name).then(Gt=>{if(Gt)if(typeof Gt.version=="number"&&Gt.version!==g.version){if(g.migrate)return g.migrate(Gt.state,Gt.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return Gt.state}).then(Gt=>{var Kt;return Tt=g.merge(Gt,(Kt=d())!=null?Kt:wt),c(Tt,!0),pt()}).then(()=>{Ht==null||Ht(Tt,void 0),Tt=d(),at=!0,vt.forEach(Gt=>Gt(Tt))}).catch(Gt=>{Ht==null||Ht(void 0,Gt)})};return et.persist={setOptions:jt=>{g={...g,...jt},jt.storage&&(b=jt.storage)},clearStorage:()=>{b==null||b.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>Ct(),hasHydrated:()=>at,onHydrate:jt=>($t.add(jt),()=>{$t.delete(jt)}),onFinishHydration:jt=>(vt.add(jt),()=>{vt.delete(jt)})},g.skipHydration||Ct(),Tt||wt},persistImpl=(a,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((define_import_meta_env_default$1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(a,s)):newImpl(a,s),persist=persistImpl;function shallow$1(a,s){if(Object.is(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;if(a instanceof Map&&s instanceof Map){if(a.size!==s.size)return!1;for(const[d,et]of a)if(!Object.is(et,s.get(d)))return!1;return!0}if(a instanceof Set&&s instanceof Set){if(a.size!==s.size)return!1;for(const d of a)if(!s.has(d))return!1;return!0}const c=Object.keys(a);if(c.length!==Object.keys(s).length)return!1;for(const d of c)if(!Object.prototype.hasOwnProperty.call(s,d)||!Object.is(a[d],s[d]))return!1;return!0}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(a,...s){throw new Error(`[Immer] minified error nr: ${a}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft(a){return!!a&&!!a[DRAFT_STATE]}function isDraftable(a){var s;return a?isPlainObject$2(a)||Array.isArray(a)||!!a[DRAFTABLE]||!!((s=a.constructor)!=null&&s[DRAFTABLE])||isMap(a)||isSet(a):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject$2(a){if(!a||typeof a!="object")return!1;const s=getPrototypeOf$1(a);if(s===null)return!0;const c=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return c===Object?!0:typeof c=="function"&&Function.toString.call(c)===objectCtorString}function each(a,s){getArchtype(a)===0?Reflect.ownKeys(a).forEach(c=>{s(c,a[c],a)}):a.forEach((c,d)=>s(d,c,a))}function getArchtype(a){const s=a[DRAFT_STATE];return s?s.type_:Array.isArray(a)?1:isMap(a)?2:isSet(a)?3:0}function has(a,s){return getArchtype(a)===2?a.has(s):Object.prototype.hasOwnProperty.call(a,s)}function set$1(a,s,c){const d=getArchtype(a);d===2?a.set(s,c):d===3?a.add(c):a[s]=c}function is$2(a,s){return a===s?a!==0||1/a===1/s:a!==a&&s!==s}function isMap(a){return a instanceof Map}function isSet(a){return a instanceof Set}function latest(a){return a.copy_||a.base_}function shallowCopy(a,s){if(isMap(a))return new Map(a);if(isSet(a))return new Set(a);if(Array.isArray(a))return Array.prototype.slice.call(a);const c=isPlainObject$2(a);if(s===!0||s==="class_only"&&!c){const d=Object.getOwnPropertyDescriptors(a);delete d[DRAFT_STATE];let et=Reflect.ownKeys(d);for(let g=0;g<et.length;g++){const at=et[g],$t=d[at];$t.writable===!1&&($t.writable=!0,$t.configurable=!0),($t.get||$t.set)&&(d[at]={configurable:!0,writable:!0,enumerable:$t.enumerable,value:a[at]})}return Object.create(getPrototypeOf$1(a),d)}else{const d=getPrototypeOf$1(a);if(d!==null&&c)return{...a};const et=Object.create(d);return Object.assign(et,a)}}function freeze(a,s=!1){return isFrozen(a)||isDraft(a)||!isDraftable(a)||(getArchtype(a)>1&&(a.set=a.add=a.clear=a.delete=dontMutateFrozenCollections),Object.freeze(a),s&&Object.entries(a).forEach(([c,d])=>freeze(d,!0))),a}function dontMutateFrozenCollections(){die(2)}function isFrozen(a){return Object.isFrozen(a)}var plugins={};function getPlugin(a){const s=plugins[a];return s||die(0,a),s}var currentScope;function getCurrentScope(){return currentScope}function createScope(a,s){return{drafts_:[],parent_:a,immer_:s,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(a,s){s&&(getPlugin("Patches"),a.patches_=[],a.inversePatches_=[],a.patchListener_=s)}function revokeScope(a){leaveScope(a),a.drafts_.forEach(revokeDraft),a.drafts_=null}function leaveScope(a){a===currentScope&&(currentScope=a.parent_)}function enterScope(a){return currentScope=createScope(currentScope,a)}function revokeDraft(a){const s=a[DRAFT_STATE];s.type_===0||s.type_===1?s.revoke_():s.revoked_=!0}function processResult(a,s){s.unfinalizedDrafts_=s.drafts_.length;const c=s.drafts_[0];return a!==void 0&&a!==c?(c[DRAFT_STATE].modified_&&(revokeScope(s),die(4)),isDraftable(a)&&(a=finalize(s,a),s.parent_||maybeFreeze(s,a)),s.patches_&&getPlugin("Patches").generateReplacementPatches_(c[DRAFT_STATE].base_,a,s.patches_,s.inversePatches_)):a=finalize(s,c,[]),revokeScope(s),s.patches_&&s.patchListener_(s.patches_,s.inversePatches_),a!==NOTHING?a:void 0}function finalize(a,s,c){if(isFrozen(s))return s;const d=s[DRAFT_STATE];if(!d)return each(s,(et,g)=>finalizeProperty(a,d,s,et,g,c)),s;if(d.scope_!==a)return s;if(!d.modified_)return maybeFreeze(a,d.base_,!0),d.base_;if(!d.finalized_){d.finalized_=!0,d.scope_.unfinalizedDrafts_--;const et=d.copy_;let g=et,at=!1;d.type_===3&&(g=new Set(et),et.clear(),at=!0),each(g,($t,vt)=>finalizeProperty(a,d,et,$t,vt,c,at)),maybeFreeze(a,et,!1),c&&a.patches_&&getPlugin("Patches").generatePatches_(d,c,a.patches_,a.inversePatches_)}return d.copy_}function finalizeProperty(a,s,c,d,et,g,at){if(isDraft(et)){const $t=g&&s&&s.type_!==3&&!has(s.assigned_,d)?g.concat(d):void 0,vt=finalize(a,et,$t);if(set$1(c,d,vt),isDraft(vt))a.canAutoFreeze_=!1;else return}else at&&c.add(et);if(isDraftable(et)&&!isFrozen(et)){if(!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1)return;finalize(a,et),(!s||!s.scope_.parent_)&&typeof d!="symbol"&&Object.prototype.propertyIsEnumerable.call(c,d)&&maybeFreeze(a,et)}}function maybeFreeze(a,s,c=!1){!a.parent_&&a.immer_.autoFreeze_&&a.canAutoFreeze_&&freeze(s,c)}function createProxyProxy(a,s){const c=Array.isArray(a),d={type_:c?1:0,scope_:s?s.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:s,base_:a,draft_:null,copy_:null,revoke_:null,isManual_:!1};let et=d,g=objectTraps;c&&(et=[d],g=arrayTraps);const{revoke:at,proxy:$t}=Proxy.revocable(et,g);return d.draft_=$t,d.revoke_=at,$t}var objectTraps={get(a,s){if(s===DRAFT_STATE)return a;const c=latest(a);if(!has(c,s))return readPropFromProto(a,c,s);const d=c[s];return a.finalized_||!isDraftable(d)?d:d===peek(a.base_,s)?(prepareCopy(a),a.copy_[s]=createProxy(d,a)):d},has(a,s){return s in latest(a)},ownKeys(a){return Reflect.ownKeys(latest(a))},set(a,s,c){const d=getDescriptorFromProto(latest(a),s);if(d!=null&&d.set)return d.set.call(a.draft_,c),!0;if(!a.modified_){const et=peek(latest(a),s),g=et==null?void 0:et[DRAFT_STATE];if(g&&g.base_===c)return a.copy_[s]=c,a.assigned_[s]=!1,!0;if(is$2(c,et)&&(c!==void 0||has(a.base_,s)))return!0;prepareCopy(a),markChanged(a)}return a.copy_[s]===c&&(c!==void 0||s in a.copy_)||Number.isNaN(c)&&Number.isNaN(a.copy_[s])||(a.copy_[s]=c,a.assigned_[s]=!0),!0},deleteProperty(a,s){return peek(a.base_,s)!==void 0||s in a.base_?(a.assigned_[s]=!1,prepareCopy(a),markChanged(a)):delete a.assigned_[s],a.copy_&&delete a.copy_[s],!0},getOwnPropertyDescriptor(a,s){const c=latest(a),d=Reflect.getOwnPropertyDescriptor(c,s);return d&&{writable:!0,configurable:a.type_!==1||s!=="length",enumerable:d.enumerable,value:c[s]}},defineProperty(){die(11)},getPrototypeOf(a){return getPrototypeOf$1(a.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(a,s)=>{arrayTraps[a]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}});arrayTraps.deleteProperty=function(a,s){return arrayTraps.set.call(this,a,s,void 0)};arrayTraps.set=function(a,s,c){return objectTraps.set.call(this,a[0],s,c,a[0])};function peek(a,s){const c=a[DRAFT_STATE];return(c?latest(c):a)[s]}function readPropFromProto(a,s,c){var et;const d=getDescriptorFromProto(s,c);return d?"value"in d?d.value:(et=d.get)==null?void 0:et.call(a.draft_):void 0}function getDescriptorFromProto(a,s){if(!(s in a))return;let c=getPrototypeOf$1(a);for(;c;){const d=Object.getOwnPropertyDescriptor(c,s);if(d)return d;c=getPrototypeOf$1(c)}}function markChanged(a){a.modified_||(a.modified_=!0,a.parent_&&markChanged(a.parent_))}function prepareCopy(a){a.copy_||(a.copy_=shallowCopy(a.base_,a.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(a){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(s,c,d)=>{if(typeof s=="function"&&typeof c!="function"){const g=c;c=s;const at=this;return function(vt=g,...b){return at.produce(vt,pt=>c.call(this,pt,...b))}}typeof c!="function"&&die(6),d!==void 0&&typeof d!="function"&&die(7);let et;if(isDraftable(s)){const g=enterScope(this),at=createProxy(s,void 0);let $t=!0;try{et=c(at),$t=!1}finally{$t?revokeScope(g):leaveScope(g)}return usePatchesInScope(g,d),processResult(et,g)}else if(!s||typeof s!="object"){if(et=c(s),et===void 0&&(et=s),et===NOTHING&&(et=void 0),this.autoFreeze_&&freeze(et,!0),d){const g=[],at=[];getPlugin("Patches").generateReplacementPatches_(s,et,g,at),d(g,at)}return et}else die(1,s)},this.produceWithPatches=(s,c)=>{if(typeof s=="function")return(at,...$t)=>this.produceWithPatches(at,vt=>s(vt,...$t));let d,et;return[this.produce(s,c,(at,$t)=>{d=at,et=$t}),d,et]},typeof(a==null?void 0:a.autoFreeze)=="boolean"&&this.setAutoFreeze(a.autoFreeze),typeof(a==null?void 0:a.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(a.useStrictShallowCopy)}createDraft(a){isDraftable(a)||die(8),isDraft(a)&&(a=current(a));const s=enterScope(this),c=createProxy(a,void 0);return c[DRAFT_STATE].isManual_=!0,leaveScope(s),c}finishDraft(a,s){const c=a&&a[DRAFT_STATE];(!c||!c.isManual_)&&die(9);const{scope_:d}=c;return usePatchesInScope(d,s),processResult(void 0,d)}setAutoFreeze(a){this.autoFreeze_=a}setUseStrictShallowCopy(a){this.useStrictShallowCopy_=a}applyPatches(a,s){let c;for(c=s.length-1;c>=0;c--){const et=s[c];if(et.path.length===0&&et.op==="replace"){a=et.value;break}}c>-1&&(s=s.slice(c+1));const d=getPlugin("Patches").applyPatches_;return isDraft(a)?d(a,s):this.produce(a,et=>d(et,s))}};function createProxy(a,s){const c=isMap(a)?getPlugin("MapSet").proxyMap_(a,s):isSet(a)?getPlugin("MapSet").proxySet_(a,s):createProxyProxy(a,s);return(s?s.scope_:getCurrentScope()).drafts_.push(c),c}function current(a){return isDraft(a)||die(10,a),currentImpl(a)}function currentImpl(a){if(!isDraftable(a)||isFrozen(a))return a;const s=a[DRAFT_STATE];let c;if(s){if(!s.modified_)return s.base_;s.finalized_=!0,c=shallowCopy(a,s.scope_.immer_.useStrictShallowCopy_)}else c=shallowCopy(a,!0);return each(c,(d,et)=>{set$1(c,d,currentImpl(et))}),s&&(s.finalized_=!1),c}var immer$1=new Immer2,produce=immer$1.produce;immer$1.produceWithPatches.bind(immer$1);immer$1.setAutoFreeze.bind(immer$1);immer$1.setUseStrictShallowCopy.bind(immer$1);immer$1.applyPatches.bind(immer$1);immer$1.createDraft.bind(immer$1);immer$1.finishDraft.bind(immer$1);function castDraft(a){return a}const immerImpl=a=>(s,c,d)=>(d.setState=(et,g,...at)=>{const $t=typeof et=="function"?produce(et):et;return s($t,g,...at)},a(d.setState,c,d)),immer=immerImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$1(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var k$2=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m$1=e.useEffect,n$3=e.useLayoutEffect,p$2=e.useDebugValue;function q$1(a,s){var c=s(),d=l({inst:{value:c,getSnapshot:s}}),et=d[0].inst,g=d[1];return n$3(function(){et.value=c,et.getSnapshot=s,r$1(et)&&g({inst:et})},[a,c,s]),m$1(function(){return r$1(et)&&g({inst:et}),a(function(){r$1(et)&&g({inst:et})})},[a]),p$2(c),c}function r$1(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!k$2(a,c)}catch{return!0}}function t$3(a,s){return s()}var u$2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$3:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$2;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n$2=shimExports;function p$1(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var q=typeof Object.is=="function"?Object.is:p$1,r=n$2.useSyncExternalStore,t$2=h.useRef,u$1=h.useEffect,v=h.useMemo,w=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(a,s,c,d,et){var g=t$2(null);if(g.current===null){var at={hasValue:!1,value:null};g.current=at}else at=g.current;g=v(function(){function vt(Tt){if(!b){if(b=!0,pt=Tt,Tt=d(Tt),et!==void 0&&at.hasValue){var Ct=at.value;if(et(Ct,Tt))return st=Ct}return st=Tt}if(Ct=st,q(pt,Tt))return Ct;var jt=d(Tt);return et!==void 0&&et(Ct,jt)?Ct:(pt=Tt,st=jt)}var b=!1,pt,st,wt=c===void 0?null:c;return[function(){return vt(s())},wt===null?void 0:function(){return vt(wt())}]},[s,c,d,et]);var $t=r(a,g[0],g[1]);return u$1(function(){at.hasValue=!0,at.value=$t},[$t]),w($t),$t};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports);var define_import_meta_env_default={VITE_BACKEND:"https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",VITE_RUNPOD:"J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",VITE_DEBUG:"true",VITE_LOG_LEVEL:"debug",BASE_URL:"/images-project",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const createStoreImpl=a=>{let s;const c=new Set,d=(pt,st)=>{const wt=typeof pt=="function"?pt(s):pt;if(!Object.is(wt,s)){const Tt=s;s=st??(typeof wt!="object"||wt===null)?wt:Object.assign({},s,wt),c.forEach(Ct=>Ct(s,Tt))}},et=()=>s,vt={setState:d,getState:et,getInitialState:()=>b,subscribe:pt=>(c.add(pt),()=>c.delete(pt)),destroy:()=>{(define_import_meta_env_default?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),c.clear()}},b=s=a(d,et,vt);return vt},createStore=a=>a?createStoreImpl(a):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity=a=>a;function useStoreWithEqualityFn(a,s=identity,c){const d=useSyncExternalStoreWithSelector(a.subscribe,a.getState,a.getServerState||a.getInitialState,s,c);return useDebugValue(d),d}const createWithEqualityFnImpl=(a,s)=>{const c=createStore(a),d=(et,g=s)=>useStoreWithEqualityFn(c,et,g);return Object.assign(d,c),d},createWithEqualityFn=(a,s)=>a?createWithEqualityFnImpl(a,s):createWithEqualityFnImpl;var PluginName=(a=>(a.RemoveBG="RemoveBG",a.AnimeSeg="AnimeSeg",a.RealESRGAN="RealESRGAN",a.GFPGAN="GFPGAN",a.RestoreFormer="RestoreFormer",a.InteractiveSeg="InteractiveSeg",a))(PluginName||{}),SortBy=(a=>(a.NAME="name",a.CTIME="ctime",a.MTIME="mtime",a))(SortBy||{}),SortOrder=(a=>(a.DESCENDING="desc",a.ASCENDING="asc",a))(SortOrder||{}),LDMSampler=(a=>(a.ddim="ddim",a.plms="plms",a))(LDMSampler||{}),CV2Flag=(a=>(a.INPAINT_NS="INPAINT_NS",a.INPAINT_TELEA="INPAINT_TELEA",a))(CV2Flag||{}),ExtenderDirection=(a=>(a.x="x",a.y="y",a.xy="xy",a))(ExtenderDirection||{}),PowerPaintTask=(a=>(a.text_guided="text-guided",a.shape_guided="shape-guided",a.object_remove="object-remove",a.outpainting="outpainting",a))(PowerPaintTask||{});const paintByExampleConfig={plugins:[{name:"RemoveBG",support_gen_image:!0,support_gen_mask:!0}],modelInfos:[{name:"lama",path:"lama",model_type:"inpaint",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"cv2",path:"cv2",model_type:"inpaint",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"runwayml/stable-diffusion-v1-5",path:"runwayml/stable-diffusion-v1-5",model_type:"diffusers_sd",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!0,support_controlnet:!0,support_freeu:!0},{name:"Sanster/PowerPaint-V1-stable-diffusion-inpainting",path:"Sanster/PowerPaint-V1-stable-diffusion-inpainting",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},{name:"redstonehero/ReV_Animated_Inpainting",path:"redstonehero/ReV_Animated_Inpainting",model_type:"diffusers_sd",is_single_file_diffusers:!1,need_prompt:!0,controlnets:["lllyasviel/control_v11p_sd15_canny","lllyasviel/control_v11p_sd15_openpose","lllyasviel/control_v11p_sd15_inpaint","lllyasviel/control_v11f1p_sd15_depth"],support_strength:!0,support_outpainting:!0,support_lcm_lora:!0,support_controlnet:!0,support_freeu:!0},{name:"Fantasy-Studio/Paint-by-Example",path:"Fantasy-Studio/Paint-by-Example",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1}],removeBGModel:"briaai/RMBG-1.4",removeBGModels:["u2net","u2netp","u2net_human_seg","u2net_cloth_seg","silueta","isnet-general-use","briaai/RMBG-1.4"],realesrganModel:"realesr-general-x4v3",realesrganModels:["realesr-general-x4v3","RealESRGAN_x4plus","RealESRGAN_x4plus_anime_6B"],interactiveSegModel:"vit_b",interactiveSegModels:["vit_b","vit_l","vit_h","sam_hq_vit_b","sam_hq_vit_l","sam_hq_vit_h","mobile_sam"],enableFileManager:!1,enableAutoSaving:!1,enableControlnet:!1,controlnetMethod:"",disableModelSwitch:!1,isDesktop:!1,samplers:["DPM++ 2M","DPM++ 2M Karras","DPM++ 2M SDE","DPM++ 2M SDE Karras","DPM++ SDE","DPM++ SDE Karras","DPM2","DPM2 Karras","DPM2 a","DPM2 a Karras","Euler","Euler a","Heun","LMS","LMS Karras","DDIM","PNDM","UniPC","LCM"]};function bind(a,s){return function(){return a.apply(s,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(a=>s=>{const c=toString.call(s);return a[c]||(a[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=a=>(a=a.toLowerCase(),s=>kindOf(s)===a),typeOfTest=a=>s=>typeof s===a,{isArray}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$2(a){return a!==null&&!isUndefined$1(a)&&a.constructor!==null&&!isUndefined$1(a.constructor)&&isFunction$1(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(a){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(a):s=a&&a.buffer&&isArrayBuffer(a.buffer),s}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=a=>a!==null&&typeof a=="object",isBoolean$1=a=>a===!0||a===!1,isPlainObject$1=a=>{if(kindOf(a)!=="object")return!1;const s=getPrototypeOf(a);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=a=>isObject$1(a)&&isFunction$1(a.pipe),isFormData=a=>{let s;return a&&(typeof FormData=="function"&&a instanceof FormData||isFunction$1(a.append)&&((s=kindOf(a))==="formdata"||s==="object"&&isFunction$1(a.toString)&&a.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(a,s,{allOwnKeys:c=!1}={}){if(a===null||typeof a>"u")return;let d,et;if(typeof a!="object"&&(a=[a]),isArray(a))for(d=0,et=a.length;d<et;d++)s.call(null,a[d],d,a);else{const g=c?Object.getOwnPropertyNames(a):Object.keys(a),at=g.length;let $t;for(d=0;d<at;d++)$t=g[d],s.call(null,a[$t],$t,a)}}function findKey(a,s){s=s.toLowerCase();const c=Object.keys(a);let d=c.length,et;for(;d-- >0;)if(et=c[d],s===et.toLowerCase())return et;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=a=>!isUndefined$1(a)&&a!==_global;function merge(){const{caseless:a}=isContextDefined(this)&&this||{},s={},c=(d,et)=>{const g=a&&findKey(s,et)||et;isPlainObject$1(s[g])&&isPlainObject$1(d)?s[g]=merge(s[g],d):isPlainObject$1(d)?s[g]=merge({},d):isArray(d)?s[g]=d.slice():s[g]=d};for(let d=0,et=arguments.length;d<et;d++)arguments[d]&&forEach$1(arguments[d],c);return s}const extend=(a,s,c,{allOwnKeys:d}={})=>(forEach$1(s,(et,g)=>{c&&isFunction$1(et)?a[g]=bind(et,c):a[g]=et},{allOwnKeys:d}),a),stripBOM=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),inherits=(a,s,c,d)=>{a.prototype=Object.create(s.prototype,d),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:s.prototype}),c&&Object.assign(a.prototype,c)},toFlatObject=(a,s,c,d)=>{let et,g,at;const $t={};if(s=s||{},a==null)return s;do{for(et=Object.getOwnPropertyNames(a),g=et.length;g-- >0;)at=et[g],(!d||d(at,a,s))&&!$t[at]&&(s[at]=a[at],$t[at]=!0);a=c!==!1&&getPrototypeOf(a)}while(a&&(!c||c(a,s))&&a!==Object.prototype);return s},endsWith=(a,s,c)=>{a=String(a),(c===void 0||c>a.length)&&(c=a.length),c-=s.length;const d=a.indexOf(s,c);return d!==-1&&d===c},toArray=a=>{if(!a)return null;if(isArray(a))return a;let s=a.length;if(!isNumber(s))return null;const c=new Array(s);for(;s-- >0;)c[s]=a[s];return c},isTypedArray=(a=>s=>a&&s instanceof a)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(a,s)=>{const d=(a&&a[Symbol.iterator]).call(a);let et;for(;(et=d.next())&&!et.done;){const g=et.value;s.call(a,g[0],g[1])}},matchAll=(a,s)=>{let c;const d=[];for(;(c=a.exec(s))!==null;)d.push(c);return d},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,d,et){return d.toUpperCase()+et}),hasOwnProperty=(({hasOwnProperty:a})=>(s,c)=>a.call(s,c))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(a,s)=>{const c=Object.getOwnPropertyDescriptors(a),d={};forEach$1(c,(et,g)=>{let at;(at=s(et,g,a))!==!1&&(d[g]=at||et)}),Object.defineProperties(a,d)},freezeMethods=a=>{reduceDescriptors(a,(s,c)=>{if(isFunction$1(a)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const d=a[c];if(isFunction$1(d)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},toObjectSet=(a,s)=>{const c={},d=et=>{et.forEach(g=>{c[g]=!0})};return isArray(a)?d(a):d(String(a).split(s)),c},noop$2=()=>{},toFiniteNumber=(a,s)=>(a=+a,Number.isFinite(a)?a:s),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(a=16,s=ALPHABET.ALPHA_DIGIT)=>{let c="";const{length:d}=s;for(;a--;)c+=s[Math.random()*d|0];return c};function isSpecCompliantForm(a){return!!(a&&isFunction$1(a.append)&&a[Symbol.toStringTag]==="FormData"&&a[Symbol.iterator])}const toJSONObject=a=>{const s=new Array(10),c=(d,et)=>{if(isObject$1(d)){if(s.indexOf(d)>=0)return;if(!("toJSON"in d)){s[et]=d;const g=isArray(d)?[]:{};return forEach$1(d,(at,$t)=>{const vt=c(at,et+1);!isUndefined$1(vt)&&(g[$t]=vt)}),s[et]=void 0,g}}return d};return c(a,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=a=>a&&(isObject$1(a)||isFunction$1(a))&&isFunction$1(a.then)&&isFunction$1(a.catch),utils$1={isArray,isArrayBuffer,isBuffer:isBuffer$2,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(a,s,c,d,et){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",s&&(this.code=s),c&&(this.config=c),d&&(this.request=d),et&&(this.response=et)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{descriptors[a]={value:a}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(a,s,c,d,et,g)=>{const at=Object.create(prototype$1);return utils$1.toFlatObject(a,at,function(vt){return vt!==Error.prototype},$t=>$t!=="isAxiosError"),AxiosError.call(at,a.message,s,c,d,et),at.cause=a,at.name=a.name,g&&Object.assign(at,g),at};const httpAdapter=null;function isVisitable(a){return utils$1.isPlainObject(a)||utils$1.isArray(a)}function removeBrackets(a){return utils$1.endsWith(a,"[]")?a.slice(0,-2):a}function renderKey(a,s,c){return a?a.concat(s).map(function(et,g){return et=removeBrackets(et),!c&&g?"["+et+"]":et}).join(c?".":""):s}function isFlatArray(a){return utils$1.isArray(a)&&!a.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(s){return/^is[A-Z]/.test(s)});function toFormData(a,s,c){if(!utils$1.isObject(a))throw new TypeError("target must be an object");s=s||new FormData,c=utils$1.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(jt,Lt){return!utils$1.isUndefined(Lt[jt])});const d=c.metaTokens,et=c.visitor||pt,g=c.dots,at=c.indexes,vt=(c.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(s);if(!utils$1.isFunction(et))throw new TypeError("visitor must be a function");function b(Ct){if(Ct===null)return"";if(utils$1.isDate(Ct))return Ct.toISOString();if(!vt&&utils$1.isBlob(Ct))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Ct)||utils$1.isTypedArray(Ct)?vt&&typeof Blob=="function"?new Blob([Ct]):Buffer.from(Ct):Ct}function pt(Ct,jt,Lt){let Ht=Ct;if(Ct&&!Lt&&typeof Ct=="object"){if(utils$1.endsWith(jt,"{}"))jt=d?jt:jt.slice(0,-2),Ct=JSON.stringify(Ct);else if(utils$1.isArray(Ct)&&isFlatArray(Ct)||(utils$1.isFileList(Ct)||utils$1.endsWith(jt,"[]"))&&(Ht=utils$1.toArray(Ct)))return jt=removeBrackets(jt),Ht.forEach(function(Kt,tr){!(utils$1.isUndefined(Kt)||Kt===null)&&s.append(at===!0?renderKey([jt],tr,g):at===null?jt:jt+"[]",b(Kt))}),!1}return isVisitable(Ct)?!0:(s.append(renderKey(Lt,jt,g),b(Ct)),!1)}const st=[],wt=Object.assign(predicates,{defaultVisitor:pt,convertValue:b,isVisitable});function Tt(Ct,jt){if(!utils$1.isUndefined(Ct)){if(st.indexOf(Ct)!==-1)throw Error("Circular reference detected in "+jt.join("."));st.push(Ct),utils$1.forEach(Ct,function(Ht,Gt){(!(utils$1.isUndefined(Ht)||Ht===null)&&et.call(s,Ht,utils$1.isString(Gt)?Gt.trim():Gt,jt,wt))===!0&&Tt(Ht,jt?jt.concat(Gt):[Gt])}),st.pop()}}if(!utils$1.isObject(a))throw new TypeError("data must be an object");return Tt(a),s}function encode$1(a){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(d){return s[d]})}function AxiosURLSearchParams(a,s){this._pairs=[],a&&toFormData(a,this,s)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(s,c){this._pairs.push([s,c])};prototype.toString=function(s){const c=s?function(d){return s.call(this,d,encode$1)}:encode$1;return this._pairs.map(function(et){return c(et[0])+"="+c(et[1])},"").join("&")};function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(a,s,c){if(!s)return a;const d=c&&c.encode||encode,et=c&&c.serialize;let g;if(et?g=et(s,c):g=utils$1.isURLSearchParams(s)?s.toString():new AxiosURLSearchParams(s,c).toString(d),g){const at=a.indexOf("#");at!==-1&&(a=a.slice(0,at)),a+=(a.indexOf("?")===-1?"?":"&")+g}return a}class InterceptorManager{constructor(){this.handlers=[]}use(s,c,d){return this.handlers.push({fulfilled:s,rejected:c,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){utils$1.forEach(this.handlers,function(d){d!==null&&s(d)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(a=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(a)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform$1={...utils,...platform$2};function toURLEncodedForm(a,s){return toFormData(a,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(c,d,et,g){return platform$1.isNode&&utils$1.isBuffer(c)?(this.append(d,c.toString("base64")),!1):g.defaultVisitor.apply(this,arguments)}},s))}function parsePropPath(a){return utils$1.matchAll(/\w+|\[(\w*)]/g,a).map(s=>s[0]==="[]"?"":s[1]||s[0])}function arrayToObject(a){const s={},c=Object.keys(a);let d;const et=c.length;let g;for(d=0;d<et;d++)g=c[d],s[g]=a[g];return s}function formDataToJSON(a){function s(c,d,et,g){let at=c[g++];if(at==="__proto__")return!0;const $t=Number.isFinite(+at),vt=g>=c.length;return at=!at&&utils$1.isArray(et)?et.length:at,vt?(utils$1.hasOwnProp(et,at)?et[at]=[et[at],d]:et[at]=d,!$t):((!et[at]||!utils$1.isObject(et[at]))&&(et[at]=[]),s(c,d,et[at],g)&&utils$1.isArray(et[at])&&(et[at]=arrayToObject(et[at])),!$t)}if(utils$1.isFormData(a)&&utils$1.isFunction(a.entries)){const c={};return utils$1.forEachEntry(a,(d,et)=>{s(parsePropPath(d),et,c,0)}),c}return null}function stringifySafely(a,s,c){if(utils$1.isString(a))try{return(s||JSON.parse)(a),utils$1.trim(a)}catch(d){if(d.name!=="SyntaxError")throw d}return(c||JSON.stringify)(a)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(s,c){const d=c.getContentType()||"",et=d.indexOf("application/json")>-1,g=utils$1.isObject(s);if(g&&utils$1.isHTMLForm(s)&&(s=new FormData(s)),utils$1.isFormData(s))return et?JSON.stringify(formDataToJSON(s)):s;if(utils$1.isArrayBuffer(s)||utils$1.isBuffer(s)||utils$1.isStream(s)||utils$1.isFile(s)||utils$1.isBlob(s))return s;if(utils$1.isArrayBufferView(s))return s.buffer;if(utils$1.isURLSearchParams(s))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let $t;if(g){if(d.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(s,this.formSerializer).toString();if(($t=utils$1.isFileList(s))||d.indexOf("multipart/form-data")>-1){const vt=this.env&&this.env.FormData;return toFormData($t?{"files[]":s}:s,vt&&new vt,this.formSerializer)}}return g||et?(c.setContentType("application/json",!1),stringifySafely(s)):s}],transformResponse:[function(s){const c=this.transitional||defaults$1.transitional,d=c&&c.forcedJSONParsing,et=this.responseType==="json";if(s&&utils$1.isString(s)&&(d&&!this.responseType||et)){const at=!(c&&c.silentJSONParsing)&&et;try{return JSON.parse(s)}catch($t){if(at)throw $t.name==="SyntaxError"?AxiosError.from($t,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):$t}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],a=>{defaults$1.headers[a]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=a=>{const s={};let c,d,et;return a&&a.split(`
`).forEach(function(at){et=at.indexOf(":"),c=at.substring(0,et).trim().toLowerCase(),d=at.substring(et+1).trim(),!(!c||s[c]&&ignoreDuplicateOf[c])&&(c==="set-cookie"?s[c]?s[c].push(d):s[c]=[d]:s[c]=s[c]?s[c]+", "+d:d)}),s},$internals=Symbol("internals");function normalizeHeader(a){return a&&String(a).trim().toLowerCase()}function normalizeValue(a){return a===!1||a==null?a:utils$1.isArray(a)?a.map(normalizeValue):String(a)}function parseTokens(a){const s=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=c.exec(a);)s[d[1]]=d[2];return s}const isValidHeaderName=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function matchHeaderValue(a,s,c,d,et){if(utils$1.isFunction(d))return d.call(this,s,c);if(et&&(s=c),!!utils$1.isString(s)){if(utils$1.isString(d))return s.indexOf(d)!==-1;if(utils$1.isRegExp(d))return d.test(s)}}function formatHeader(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,c,d)=>c.toUpperCase()+d)}function buildAccessors(a,s){const c=utils$1.toCamelCase(" "+s);["get","set","has"].forEach(d=>{Object.defineProperty(a,d+c,{value:function(et,g,at){return this[d].call(this,s,et,g,at)},configurable:!0})})}class AxiosHeaders{constructor(s){s&&this.set(s)}set(s,c,d){const et=this;function g($t,vt,b){const pt=normalizeHeader(vt);if(!pt)throw new Error("header name must be a non-empty string");const st=utils$1.findKey(et,pt);(!st||et[st]===void 0||b===!0||b===void 0&&et[st]!==!1)&&(et[st||vt]=normalizeValue($t))}const at=($t,vt)=>utils$1.forEach($t,(b,pt)=>g(b,pt,vt));return utils$1.isPlainObject(s)||s instanceof this.constructor?at(s,c):utils$1.isString(s)&&(s=s.trim())&&!isValidHeaderName(s)?at(parseHeaders(s),c):s!=null&&g(c,s,d),this}get(s,c){if(s=normalizeHeader(s),s){const d=utils$1.findKey(this,s);if(d){const et=this[d];if(!c)return et;if(c===!0)return parseTokens(et);if(utils$1.isFunction(c))return c.call(this,et,d);if(utils$1.isRegExp(c))return c.exec(et);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,c){if(s=normalizeHeader(s),s){const d=utils$1.findKey(this,s);return!!(d&&this[d]!==void 0&&(!c||matchHeaderValue(this,this[d],d,c)))}return!1}delete(s,c){const d=this;let et=!1;function g(at){if(at=normalizeHeader(at),at){const $t=utils$1.findKey(d,at);$t&&(!c||matchHeaderValue(d,d[$t],$t,c))&&(delete d[$t],et=!0)}}return utils$1.isArray(s)?s.forEach(g):g(s),et}clear(s){const c=Object.keys(this);let d=c.length,et=!1;for(;d--;){const g=c[d];(!s||matchHeaderValue(this,this[g],g,s,!0))&&(delete this[g],et=!0)}return et}normalize(s){const c=this,d={};return utils$1.forEach(this,(et,g)=>{const at=utils$1.findKey(d,g);if(at){c[at]=normalizeValue(et),delete c[g];return}const $t=s?formatHeader(g):String(g).trim();$t!==g&&delete c[g],c[$t]=normalizeValue(et),d[$t]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const c=Object.create(null);return utils$1.forEach(this,(d,et)=>{d!=null&&d!==!1&&(c[et]=s&&utils$1.isArray(d)?d.join(", "):d)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,c])=>s+": "+c).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...c){const d=new this(s);return c.forEach(et=>d.set(et)),d}static accessor(s){const d=(this[$internals]=this[$internals]={accessors:{}}).accessors,et=this.prototype;function g(at){const $t=normalizeHeader(at);d[$t]||(buildAccessors(et,at),d[$t]=!0)}return utils$1.isArray(s)?s.forEach(g):g(s),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:a},s)=>{let c=s[0].toUpperCase()+s.slice(1);return{get:()=>a,set(d){this[c]=d}}});utils$1.freezeMethods(AxiosHeaders);function transformData(a,s){const c=this||defaults$1,d=s||c,et=AxiosHeaders.from(d.headers);let g=d.data;return utils$1.forEach(a,function($t){g=$t.call(c,g,et.normalize(),s?s.status:void 0)}),et.normalize(),g}function isCancel(a){return!!(a&&a.__CANCEL__)}function CanceledError(a,s,c){AxiosError.call(this,a??"canceled",AxiosError.ERR_CANCELED,s,c),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(a,s,c){const d=c.config.validateStatus;!c.status||!d||d(c.status)?a(c):s(new AxiosError("Request failed with status code "+c.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}const cookies=platform$1.hasStandardBrowserEnv?{write(a,s,c,d,et,g){const at=[a+"="+encodeURIComponent(s)];utils$1.isNumber(c)&&at.push("expires="+new Date(c).toGMTString()),utils$1.isString(d)&&at.push("path="+d),utils$1.isString(et)&&at.push("domain="+et),g===!0&&at.push("secure"),document.cookie=at.join("; ")},read(a){const s=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function combineURLs(a,s){return s?a.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):a}function buildFullPath(a,s){return a&&!isAbsoluteURL(s)?combineURLs(a,s):s}const isURLSameOrigin=platform$1.hasStandardBrowserEnv?function(){const s=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a");let d;function et(g){let at=g;return s&&(c.setAttribute("href",at),at=c.href),c.setAttribute("href",at),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return d=et(window.location.href),function(at){const $t=utils$1.isString(at)?et(at):at;return $t.protocol===d.protocol&&$t.host===d.host}}():function(){return function(){return!0}}();function parseProtocol(a){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return s&&s[1]||""}function speedometer(a,s){a=a||10;const c=new Array(a),d=new Array(a);let et=0,g=0,at;return s=s!==void 0?s:1e3,function(vt){const b=Date.now(),pt=d[g];at||(at=b),c[et]=vt,d[et]=b;let st=g,wt=0;for(;st!==et;)wt+=c[st++],st=st%a;if(et=(et+1)%a,et===g&&(g=(g+1)%a),b-at<s)return;const Tt=pt&&b-pt;return Tt?Math.round(wt*1e3/Tt):void 0}}function progressEventReducer(a,s){let c=0;const d=speedometer(50,250);return et=>{const g=et.loaded,at=et.lengthComputable?et.total:void 0,$t=g-c,vt=d($t),b=g<=at;c=g;const pt={loaded:g,total:at,progress:at?g/at:void 0,bytes:$t,rate:vt||void 0,estimated:vt&&at&&b?(at-g)/vt:void 0,event:et};pt[s?"download":"upload"]=!0,a(pt)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(a){return new Promise(function(c,d){let et=a.data;const g=AxiosHeaders.from(a.headers).normalize();let{responseType:at,withXSRFToken:$t}=a,vt;function b(){a.cancelToken&&a.cancelToken.unsubscribe(vt),a.signal&&a.signal.removeEventListener("abort",vt)}let pt;if(utils$1.isFormData(et)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)g.setContentType(!1);else if((pt=g.getContentType())!==!1){const[jt,...Lt]=pt?pt.split(";").map(Ht=>Ht.trim()).filter(Boolean):[];g.setContentType([jt||"multipart/form-data",...Lt].join("; "))}}let st=new XMLHttpRequest;if(a.auth){const jt=a.auth.username||"",Lt=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"";g.set("Authorization","Basic "+btoa(jt+":"+Lt))}const wt=buildFullPath(a.baseURL,a.url);st.open(a.method.toUpperCase(),buildURL(wt,a.params,a.paramsSerializer),!0),st.timeout=a.timeout;function Tt(){if(!st)return;const jt=AxiosHeaders.from("getAllResponseHeaders"in st&&st.getAllResponseHeaders()),Ht={data:!at||at==="text"||at==="json"?st.responseText:st.response,status:st.status,statusText:st.statusText,headers:jt,config:a,request:st};settle(function(Kt){c(Kt),b()},function(Kt){d(Kt),b()},Ht),st=null}if("onloadend"in st?st.onloadend=Tt:st.onreadystatechange=function(){!st||st.readyState!==4||st.status===0&&!(st.responseURL&&st.responseURL.indexOf("file:")===0)||setTimeout(Tt)},st.onabort=function(){st&&(d(new AxiosError("Request aborted",AxiosError.ECONNABORTED,a,st)),st=null)},st.onerror=function(){d(new AxiosError("Network Error",AxiosError.ERR_NETWORK,a,st)),st=null},st.ontimeout=function(){let Lt=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const Ht=a.transitional||transitionalDefaults;a.timeoutErrorMessage&&(Lt=a.timeoutErrorMessage),d(new AxiosError(Lt,Ht.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,a,st)),st=null},platform$1.hasStandardBrowserEnv&&($t&&utils$1.isFunction($t)&&($t=$t(a)),$t||$t!==!1&&isURLSameOrigin(wt))){const jt=a.xsrfHeaderName&&a.xsrfCookieName&&cookies.read(a.xsrfCookieName);jt&&g.set(a.xsrfHeaderName,jt)}et===void 0&&g.setContentType(null),"setRequestHeader"in st&&utils$1.forEach(g.toJSON(),function(Lt,Ht){st.setRequestHeader(Ht,Lt)}),utils$1.isUndefined(a.withCredentials)||(st.withCredentials=!!a.withCredentials),at&&at!=="json"&&(st.responseType=a.responseType),typeof a.onDownloadProgress=="function"&&st.addEventListener("progress",progressEventReducer(a.onDownloadProgress,!0)),typeof a.onUploadProgress=="function"&&st.upload&&st.upload.addEventListener("progress",progressEventReducer(a.onUploadProgress)),(a.cancelToken||a.signal)&&(vt=jt=>{st&&(d(!jt||jt.type?new CanceledError(null,a,st):jt),st.abort(),st=null)},a.cancelToken&&a.cancelToken.subscribe(vt),a.signal&&(a.signal.aborted?vt():a.signal.addEventListener("abort",vt)));const Ct=parseProtocol(wt);if(Ct&&platform$1.protocols.indexOf(Ct)===-1){d(new AxiosError("Unsupported protocol "+Ct+":",AxiosError.ERR_BAD_REQUEST,a));return}st.send(et||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(a,s)=>{if(a){try{Object.defineProperty(a,"name",{value:s})}catch{}Object.defineProperty(a,"adapterName",{value:s})}});const renderReason=a=>`- ${a}`,isResolvedHandle=a=>utils$1.isFunction(a)||a===null||a===!1,adapters={getAdapter:a=>{a=utils$1.isArray(a)?a:[a];const{length:s}=a;let c,d;const et={};for(let g=0;g<s;g++){c=a[g];let at;if(d=c,!isResolvedHandle(c)&&(d=knownAdapters[(at=String(c)).toLowerCase()],d===void 0))throw new AxiosError(`Unknown adapter '${at}'`);if(d)break;et[at||"#"+g]=d}if(!d){const g=Object.entries(et).map(([$t,vt])=>`adapter ${$t} `+(vt===!1?"is not supported by the environment":"is not available in the build"));let at=s?g.length>1?`since :
`+g.map(renderReason).join(`
`):" "+renderReason(g[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+at,"ERR_NOT_SUPPORT")}return d},adapters:knownAdapters};function throwIfCancellationRequested(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new CanceledError(null,a)}function dispatchRequest(a){return throwIfCancellationRequested(a),a.headers=AxiosHeaders.from(a.headers),a.data=transformData.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(a.adapter||defaults$1.adapter)(a).then(function(d){return throwIfCancellationRequested(a),d.data=transformData.call(a,a.transformResponse,d),d.headers=AxiosHeaders.from(d.headers),d},function(d){return isCancel(d)||(throwIfCancellationRequested(a),d&&d.response&&(d.response.data=transformData.call(a,a.transformResponse,d.response),d.response.headers=AxiosHeaders.from(d.response.headers))),Promise.reject(d)})}const headersToObject=a=>a instanceof AxiosHeaders?{...a}:a;function mergeConfig(a,s){s=s||{};const c={};function d(b,pt,st){return utils$1.isPlainObject(b)&&utils$1.isPlainObject(pt)?utils$1.merge.call({caseless:st},b,pt):utils$1.isPlainObject(pt)?utils$1.merge({},pt):utils$1.isArray(pt)?pt.slice():pt}function et(b,pt,st){if(utils$1.isUndefined(pt)){if(!utils$1.isUndefined(b))return d(void 0,b,st)}else return d(b,pt,st)}function g(b,pt){if(!utils$1.isUndefined(pt))return d(void 0,pt)}function at(b,pt){if(utils$1.isUndefined(pt)){if(!utils$1.isUndefined(b))return d(void 0,b)}else return d(void 0,pt)}function $t(b,pt,st){if(st in s)return d(b,pt);if(st in a)return d(void 0,b)}const vt={url:g,method:g,data:g,baseURL:at,transformRequest:at,transformResponse:at,paramsSerializer:at,timeout:at,timeoutMessage:at,withCredentials:at,withXSRFToken:at,adapter:at,responseType:at,xsrfCookieName:at,xsrfHeaderName:at,onUploadProgress:at,onDownloadProgress:at,decompress:at,maxContentLength:at,maxBodyLength:at,beforeRedirect:at,transport:at,httpAgent:at,httpsAgent:at,cancelToken:at,socketPath:at,responseEncoding:at,validateStatus:$t,headers:(b,pt)=>et(headersToObject(b),headersToObject(pt),!0)};return utils$1.forEach(Object.keys(Object.assign({},a,s)),function(pt){const st=vt[pt]||et,wt=st(a[pt],s[pt],pt);utils$1.isUndefined(wt)&&st!==$t||(c[pt]=wt)}),c}const VERSION="1.6.8",validators$1={};["object","boolean","number","function","string","symbol"].forEach((a,s)=>{validators$1[a]=function(d){return typeof d===a||"a"+(s<1?"n ":" ")+a}});const deprecatedWarnings={};validators$1.transitional=function(s,c,d){function et(g,at){return"[Axios v"+VERSION+"] Transitional option '"+g+"'"+at+(d?". "+d:"")}return(g,at,$t)=>{if(s===!1)throw new AxiosError(et(at," has been removed"+(c?" in "+c:"")),AxiosError.ERR_DEPRECATED);return c&&!deprecatedWarnings[at]&&(deprecatedWarnings[at]=!0,console.warn(et(at," has been deprecated since v"+c+" and will be removed in the near future"))),s?s(g,at,$t):!0}};function assertOptions(a,s,c){if(typeof a!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const d=Object.keys(a);let et=d.length;for(;et-- >0;){const g=d[et],at=s[g];if(at){const $t=a[g],vt=$t===void 0||at($t,g,a);if(vt!==!0)throw new AxiosError("option "+g+" must be "+vt,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new AxiosError("Unknown option "+g,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(s){this.defaults=s,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(s,c){try{return await this._request(s,c)}catch(d){if(d instanceof Error){let et;Error.captureStackTrace?Error.captureStackTrace(et={}):et=new Error;const g=et.stack?et.stack.replace(/^.+\n/,""):"";d.stack?g&&!String(d.stack).endsWith(g.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+g):d.stack=g}throw d}}_request(s,c){typeof s=="string"?(c=c||{},c.url=s):c=s||{},c=mergeConfig(this.defaults,c);const{transitional:d,paramsSerializer:et,headers:g}=c;d!==void 0&&validator.assertOptions(d,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),et!=null&&(utils$1.isFunction(et)?c.paramsSerializer={serialize:et}:validator.assertOptions(et,{encode:validators.function,serialize:validators.function},!0)),c.method=(c.method||this.defaults.method||"get").toLowerCase();let at=g&&utils$1.merge(g.common,g[c.method]);g&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Ct=>{delete g[Ct]}),c.headers=AxiosHeaders.concat(at,g);const $t=[];let vt=!0;this.interceptors.request.forEach(function(jt){typeof jt.runWhen=="function"&&jt.runWhen(c)===!1||(vt=vt&&jt.synchronous,$t.unshift(jt.fulfilled,jt.rejected))});const b=[];this.interceptors.response.forEach(function(jt){b.push(jt.fulfilled,jt.rejected)});let pt,st=0,wt;if(!vt){const Ct=[dispatchRequest.bind(this),void 0];for(Ct.unshift.apply(Ct,$t),Ct.push.apply(Ct,b),wt=Ct.length,pt=Promise.resolve(c);st<wt;)pt=pt.then(Ct[st++],Ct[st++]);return pt}wt=$t.length;let Tt=c;for(st=0;st<wt;){const Ct=$t[st++],jt=$t[st++];try{Tt=Ct(Tt)}catch(Lt){jt.call(this,Lt);break}}try{pt=dispatchRequest.call(this,Tt)}catch(Ct){return Promise.reject(Ct)}for(st=0,wt=b.length;st<wt;)pt=pt.then(b[st++],b[st++]);return pt}getUri(s){s=mergeConfig(this.defaults,s);const c=buildFullPath(s.baseURL,s.url);return buildURL(c,s.params,s.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(s){Axios.prototype[s]=function(c,d){return this.request(mergeConfig(d||{},{method:s,url:c,data:(d||{}).data}))}});utils$1.forEach(["post","put","patch"],function(s){function c(d){return function(g,at,$t){return this.request(mergeConfig($t||{},{method:s,headers:d?{"Content-Type":"multipart/form-data"}:{},url:g,data:at}))}}Axios.prototype[s]=c(),Axios.prototype[s+"Form"]=c(!0)});class CancelToken{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(g){c=g});const d=this;this.promise.then(et=>{if(!d._listeners)return;let g=d._listeners.length;for(;g-- >0;)d._listeners[g](et);d._listeners=null}),this.promise.then=et=>{let g;const at=new Promise($t=>{d.subscribe($t),g=$t}).then(et);return at.cancel=function(){d.unsubscribe(g)},at},s(function(g,at,$t){d.reason||(d.reason=new CanceledError(g,at,$t),c(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const c=this._listeners.indexOf(s);c!==-1&&this._listeners.splice(c,1)}static source(){let s;return{token:new CancelToken(function(et){s=et}),cancel:s}}}function spread(a){return function(c){return a.apply(null,c)}}function isAxiosError(a){return utils$1.isObject(a)&&a.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([a,s])=>{HttpStatusCode[s]=a});function createInstance(a){const s=new Axios(a),c=bind(Axios.prototype.request,s);return utils$1.extend(c,Axios.prototype,s,{allOwnKeys:!0}),utils$1.extend(c,s,null,{allOwnKeys:!0}),c.create=function(et){return createInstance(mergeConfig(a,et))},c}const axios=createInstance(defaults$1);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(s){return Promise.all(s)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=a=>formDataToJSON(utils$1.isHTMLForm(a)?new FormData(a):a);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;const API_ENDPOINT="https://api.runpod.ai/v2/sa6txt6v9ok382/runsync",TOKEN="J9AEA4HA0M792XF35GRC8FHVHWQAH2LU3LZB635Q",api=axios.create({baseURL:API_ENDPOINT});async function inpaint(a,s,c,d,et,g=null,at){const $t=await convertToBase64(a),vt=await convertToBase64(et),b=g?await convertToBase64(g):null,pt=await fetch(`${API_ENDPOINT}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${TOKEN}`},body:JSON.stringify({id:randomNumberInRange(1,65536),input:{image:$t,mask:vt,call_to_api:{api_call:"inpainting"},model:at,ldm_steps:s.ldmSteps,ldm_sampler:s.ldmSampler,zits_wireframe:s.zitsWireframe,cv2_flag:s.cv2Flag,cv2_radius:s.cv2Radius,hd_strategy:"Crop",hd_strategy_crop_triger_size:640,hd_strategy_crop_margin:128,hd_trategy_resize_imit:2048,prompt:s.prompt,negative_prompt:s.negativePrompt,use_croper:s.showCropper,croper_x:c.x,croper_y:c.y,croper_height:c.height,croper_width:c.width,use_extender:s.showExtender,extender_x:d.x,extender_y:d.y,extender_height:d.height,extender_width:d.width,sd_mask_blur:s.sdMaskBlur,sd_strength:s.sdStrength,sd_steps:s.sdSteps,sd_guidance_scale:s.sdGuidanceScale,sd_sampler:s.sdSampler,sd_seed:s.seedFixed?s.seed:-1,sd_match_histograms:s.sdMatchHistograms,sd_freeu:s.enableFreeu,sd_freeu_config:s.freeuConfig,sd_lcm_lora:s.enableLCMLora,paint_by_example_example_image:b,p2p_image_guidance_scale:s.p2pImageGuidanceScale,enable_controlnet:s.enableControlnet,controlnet_conditioning_scale:s.controlnetConditioningScale,controlnet_method:s.controlnetMethod?s.controlnetMethod:"",powerpaint_task:s.showExtender?PowerPaintTask.outpainting:s.powerpaintTask}})});if(pt.ok){const wt=await pt.json(),{output:Tt}=wt,Ct=base64ToBlob(Tt);return{blob:URL.createObjectURL(Ct),seed:"42"}}const st=await pt.json();throw new Error(`Something went wrong: ${st.errors}`)}async function switchPluginModel(a,s){return api.post("/switch_plugin_model",{plugin_name:a,model_name:s})}async function runPlugin(a,s,c,d,et,g){const at=await convertToBase64(c),$t=await fetch(`${API_ENDPOINT}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${TOKEN}`},body:JSON.stringify({id:randomNumberInRange(1,65536),input:{call_to_api:{api_call:s,plugin_name:s,model_name:d.removeBGModel},name:s,image:at,upscale:et,clicks:g}})});if($t.ok){const b=await $t.json(),{output:pt}=b,st=base64ToBlob(pt);return{blob:URL.createObjectURL(st)}}const vt=await $t.json();throw new Error(vt)}async function postAdjustMask(a,s,c){const d=await convertToBase64(a),et=await fetch(`${API_ENDPOINT}/adjust_mask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mask:d,operate:s,kernel_size:c})});if(et.ok)return await et.blob();const g=await et.json();throw new Error(g)}const defaultValues={file:null,paintByExampleFile:null,customMask:null,imageHeight:0,imageWidth:0,clipWidth:0,clipHeight:0,scaledWidth:0,scaledHeight:0,aspectRatio:"16:9",isInpainting:!1,isPluginRunning:!1,isAdjustingMask:!1,disableShortCuts:!1,windowSize:{height:600,width:800},editorState:{baseBrushSize:DEFAULT_BRUSH_SIZE,brushSizeScale:1,renders:[],extraMasks:[],prevExtraMasks:[],temporaryMasks:[],lineGroups:[],lastLineGroup:[],curLineGroup:[],canvasGroups:[],currCanvasGroups:[],lastCanvasGroups:[],redoRenders:[],redoCurLines:[],redoLineGroups:[],redoCurCanvas:[]},interactiveSegState:{isInteractiveSeg:!1,tmpInteractiveSegMask:null,clicks:[]},cropperState:{x:0,y:0,width:512,height:512},extenderState:{x:0,y:0,width:512,height:512},isCropperExtenderResizing:!1,fileManagerState:{sortBy:SortBy.CTIME,sortOrder:SortOrder.DESCENDING,layout:"masonry",searchText:"",inputDirectory:"",outputDirectory:""},serverConfig:paintByExampleConfig,settings:{model:{name:"lama",path:"lama",model_type:"inpaint",support_controlnet:!1,support_strength:!1,support_outpainting:!1,controlnets:[],support_freeu:!1,support_lcm_lora:!1,is_single_file_diffusers:!1,need_prompt:!1},enableControlnet:!1,showCropper:!1,showExtender:!1,showDrawing:!1,showSelectable:!1,extenderDirection:ExtenderDirection.xy,enableDownloadMask:!1,enableManualInpainting:!1,enableUploadMask:!1,enableAutoExtractPrompt:!0,ldmSteps:30,ldmSampler:LDMSampler.ddim,zitsWireframe:!0,cv2Radius:5,cv2Flag:CV2Flag.INPAINT_NS,prompt:"",negativePrompt:DEFAULT_NEGATIVE_PROMPT,seed:42,seedFixed:!1,sdMaskBlur:12,sdStrength:1,sdSteps:50,sdGuidanceScale:7.5,sdSampler:"DPM++ 2M",sdMatchHistograms:!1,sdScale:1,p2pImageGuidanceScale:1.5,controlnetConditioningScale:.4,controlnetMethod:"lllyasviel/control_v11p_sd15_canny",enableLCMLora:!1,enableFreeu:!1,freeuConfig:{s1:.9,s2:.2,b1:1.2,b2:1.4},powerpaintTask:PowerPaintTask.text_guided,adjustMaskKernelSize:12}},useLanguageStore=createWithEqualityFn(a=>({language:"",setLanguage:s=>a({language:s})})),useStore=createWithEqualityFn()(persist(immer((a,s)=>({...defaultValues,showPrevMask:async()=>{if(s().settings.showExtender)return;const{lastLineGroup:c,curLineGroup:d,prevExtraMasks:et,extraMasks:g}=s().editorState;if(d.length!==0||g.length!==0)return;const{imageWidth:at,imageHeight:$t}=s(),vt=generateMask(at,$t,[c],et,BRUSH_COLOR);try{const b=await canvasToImage(vt);a(pt=>{pt.editorState.temporaryMasks.push(b)})}catch(b){console.error(b);return}},hidePrevMask:()=>{a(c=>{c.editorState.temporaryMasks=[]})},getCurrentTargetFile:async()=>{const c=s().file,d=s().editorState.renders;let et=c;if(d.length>0){const g=d[d.length-1];et=await srcToFile(g.currentSrc,c.name,c.type)}return et},runInpainting:async c=>{const{isInpainting:d,aspectRatio:et,file:g,paintByExampleFile:at,imageWidth:$t,imageHeight:vt,settings:b,cropperState:pt,extenderState:st}=s();if(d||g===null||s().settings.model.support_outpainting&&b.showExtender&&st.height===vt&&st.width===$t)return;const{lastLineGroup:wt,curLineGroup:Tt,lineGroups:Ct,renders:jt,prevExtraMasks:Lt,extraMasks:Ht,currCanvasGroups:Gt}=s().editorState;let Kt=[],tr=[];if(Gt.length===0){toast({variant:"destructive",description:"Please draw mask on picture"});return}const rr=[...Ct,tr];a(Yr=>{Yr.isInpainting=!0});const{targetMask:Lr,targetFile:jr}=await generateFromCanvas(Gt[Gt.length-1],$t,vt);try{const Yr=await inpaint(dataURItoBlob(jr),b,pt,st,dataURItoBlob(Lr),at,c),{blob:An,seed:No}=Yr;No&&s().setSeed(parseInt(No,10));const o0=new Image;await loadImage(o0,An);const t0=[...jt,o0];s().setImageSize(o0.width,o0.height),s().updateEditorState({renders:t0,lineGroups:rr,lastLineGroup:tr,curLineGroup:[],extraMasks:[],prevExtraMasks:Kt})}catch(Yr){toast({variant:"destructive",description:Yr.message?Yr.message:Yr.toString()})}s().resetRedoState(),a(Yr=>{Yr.isInpainting=!1,Yr.editorState.temporaryMasks=[]})},runRenderablePlugin:async(c,d,et={upscale:1})=>{const{renders:g,lineGroups:at}=s().editorState;a($t=>{$t.isPluginRunning=!0});try{const $t=new Date,vt=await s().getCurrentTargetFile(),b=await runPlugin(c,d,vt,s().serverConfig,et.upscale),{blob:pt}=b;if(c){const Tt=new Image;await loadImage(Tt,pt),a(Ct=>{Ct.editorState.extraMasks.push(Tt)})}else{const Tt=new Image;await loadImage(Tt,pt),s().setImageSize(Tt.width,Tt.height);const Ct=[...g,Tt],jt=[...at,[]];s().updateEditorState({renders:Ct,lineGroups:jt})}const wt=new Date().getTime()-$t.getTime();toast({description:`Run ${d} successfully in ${wt/1e3}s`})}catch($t){toast({variant:"destructive",description:$t.message?$t.message:$t.toString()})}a($t=>{$t.isPluginRunning=!1})},updateEditorState:c=>{a(d=>{d.editorState={...d.editorState,...c}})},cleanCurLineGroup:()=>{s().updateEditorState({curLineGroup:[]})},handleCanvasMouseDown:c=>{let d=[];const et=s();et.runMannually()&&(d=[...et.editorState.curLineGroup]),d.push({size:et.getBrushSize(),pts:[c]}),a(g=>{g.editorState.curLineGroup=d})},handleSaveState:c=>{let d=[];d=[...s().editorState.currCanvasGroups],debugLog(LOG_LEVELS.DEBUG,`canvaGroup
`,d);const g=c.toJSON(["lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","gradientAngle","selectable","hasControls","source","editable"]),at=JSON.stringify(g),vt={id:Date.now()+"_"+Math.floor(Math.random()*1e4),data:at};debugLog(LOG_LEVELS.DEBUG,`newElement
`,vt),d.push(vt),a(b=>{b.editorState.currCanvasGroups=d})},handleCanvasMouseMove:c=>{a(d=>{const et=d.editorState.curLineGroup;et.length&&et[et.length-1].pts.push(c)})},runMannually:()=>{const c=s();return c.settings.enableManualInpainting||c.settings.model.model_type!==MODEL_TYPE_INPAINT},getIsProcessing:()=>s().isInpainting||s().isPluginRunning||s().isAdjustingMask,isSD:()=>s().settings.model.model_type!==MODEL_TYPE_INPAINT,undoDisabled:()=>{const c=s().editorState;if(c.renders.length>0)return!1;if(s().runMannually()){if(c.currCanvasGroups.length===0)return!0}else if(c.renders.length===0)return!0;return!1},undo:()=>{s().editorState.currCanvasGroups.length!==0?a(c=>{const d=c.editorState;if(d.currCanvasGroups.length===0)return;d.lastCanvasGroups=[];const et=d.currCanvasGroups.pop();debugLog(LOG_LEVELS.DEBUG,`lastSaved
`,JSON.parse(et.data)),d.redoCurCanvas.push(et)}):a(c=>{const d=c.editorState;if(d.renders.length===0||d.lineGroups.length===0)return;const et=d.lineGroups.pop();d.redoLineGroups.push(et),d.redoCurLines=[],d.curLineGroup=[];const g=d.renders.pop();d.redoRenders.push(g)})},redoDisabled:()=>{const c=s().editorState;if(c.redoRenders.length>0)return!1;if(s().runMannually()){if(c.redoCurCanvas.length===0)return!0}else if(c.redoRenders.length===0)return!0;return!1},redo:()=>{s().runMannually()&&s().editorState.redoCurCanvas.length!==0?a(c=>{const d=c.editorState;if(d.redoCurCanvas.length===0)return;const et=d.redoCurCanvas.pop();d.currCanvasGroups.push(et)}):a(c=>{const d=c.editorState;if(d.redoRenders.length===0||d.redoLineGroups.length===0)return;const et=d.redoLineGroups.pop();d.lineGroups.push(et),d.curLineGroup=[];const g=d.redoRenders.pop();d.renders.push(g)})},resetRedoState:()=>{a(c=>{c.editorState.redoCurLines=[],c.editorState.redoLineGroups=[],c.editorState.redoRenders=[]})},updateAppState:c=>{a(()=>c)},getBrushSize:()=>s().editorState.baseBrushSize*s().editorState.brushSizeScale,showPromptInput:()=>{const c=s().settings.model;return c.model_type!==MODEL_TYPE_INPAINT&&c.name!==PAINT_BY_EXAMPLE},setServerConfig:c=>{a(d=>{d.serverConfig=c,d.settings.enableControlnet=c.enableControlnet,d.settings.controlnetMethod=c.controlnetMethod})},updateServerConfig:c=>{a(d=>{d.serverConfig={...d.serverConfig,...c},console.log(d.serverConfig)})},updateSettings:c=>{a(d=>{d.settings={...d.settings,...c}})},setModel:c=>{a(d=>{d.settings.model=c,c.support_controlnet&&!c.controlnets.includes(d.settings.controlnetMethod)&&(d.settings.controlnetMethod=c.controlnets[0])})},updateFileManagerState:c=>{a(d=>{d.fileManagerState={...d.fileManagerState,...c}})},updateInteractiveSegState:c=>{a(d=>({...d,interactiveSegState:{...d.interactiveSegState,...c}}))},resetInteractiveSegState:()=>{s().updateInteractiveSegState(defaultValues.interactiveSegState)},handleInteractiveSegAccept:()=>{a(c=>{c.interactiveSegState.tmpInteractiveSegMask&&c.editorState.extraMasks.push(c.interactiveSegState.tmpInteractiveSegMask),c.interactiveSegState={...defaultValues.interactiveSegState}})},setIsInpainting:c=>a(d=>{d.isInpainting=c}),setFile:async c=>{a(d=>{d.file=c})},setCustomFile:c=>a(d=>{d.customMask=c}),setBaseBrushSize:c=>a(d=>{d.editorState.baseBrushSize=c}),decreaseBaseBrushSize:()=>{const c=s().editorState.baseBrushSize;let d=c;c>10&&(d=c-10),c<=10&&c>0&&(d=c-3),s().setBaseBrushSize(d)},increaseBaseBrushSize:()=>{const c=s().editorState.baseBrushSize,d=Math.min(c+10,MAX_BRUSH_SIZE);s().setBaseBrushSize(d)},setImageSize:(c,d)=>{a(et=>{et.imageWidth=c,et.imageHeight=d,et.editorState.brushSizeScale=Math.max(Math.min(c,d),512)/512}),s().resetExtender(c,d)},setCropperX:c=>a(d=>{d.cropperState.x=c}),setCropperY:c=>a(d=>{d.cropperState.y=c}),setCropperWidth:c=>a(d=>{d.cropperState.width=c}),setCropperHeight:c=>a(d=>{d.cropperState.height=c}),setExtenderX:c=>a(d=>{d.extenderState.x=c}),setExtenderY:c=>a(d=>{d.extenderState.y=c}),setExtenderWidth:c=>a(d=>{d.extenderState.width=c}),setExtenderHeight:c=>a(d=>{d.extenderState.height=c}),setIsCropperExtenderResizing:c=>a(d=>{d.isCropperExtenderResizing=c}),updateExtenderDirection:c=>{console.log(`updateExtenderDirection: ${JSON.stringify(s().extenderState)}`),a(d=>{d.settings.extenderDirection=c,d.extenderState.x=0,d.extenderState.y=0,d.extenderState.width=d.imageWidth,d.extenderState.height=d.imageHeight}),s().updateExtenderByBuiltIn(c,1.5)},updateExtenderByBuiltIn:(c,d)=>{const et={...defaultValues.extenderState};let{x:g,y:at,width:$t,height:vt}=et;const{imageWidth:b,imageHeight:pt}=s();switch($t=b,vt=pt,c){case ExtenderDirection.x:g=-Math.ceil(b*(d-1)/2),$t=Math.ceil(b*d);break;case ExtenderDirection.y:at=-Math.ceil(pt*(d-1)/2),vt=Math.ceil(pt*d);break;case ExtenderDirection.xy:g=-Math.ceil(b*(d-1)/2),at=-Math.ceil(pt*(d-1)/2),$t=Math.ceil(b*d),vt=Math.ceil(pt*d);break}a(st=>{st.extenderState.x=g,st.extenderState.y=at,st.extenderState.width=$t,st.extenderState.height=vt})},resetExtender:(c,d)=>{a(et=>{et.extenderState.x=0,et.extenderState.y=0,et.extenderState.width=c,et.extenderState.height=d})},setSeed:c=>a(d=>{d.settings.seed=c}),adjustMask:async c=>{const{imageWidth:d,imageHeight:et}=s(),{curLineGroup:g,extraMasks:at}=s().editorState,{adjustMaskKernelSize:$t}=s().settings;if(g.length===0&&at.length===0)return;a(wt=>{wt.isAdjustingMask=!0});const vt=generateMask(d,et,[g],at,BRUSH_COLOR),b=dataURItoBlob(vt.toDataURL()),pt=await postAdjustMask(b,c,$t),st=await blobToImage(pt);a(wt=>{wt.editorState.extraMasks=[st],wt.editorState.curLineGroup=[]}),a(wt=>{wt.isAdjustingMask=!1})},clearMask:()=>{a(c=>{c.editorState.extraMasks=[],c.editorState.curLineGroup=[]})}})),{name:"ZUSTAND_STATE",version:1,partialize:a=>Object.fromEntries(Object.entries(a).filter(([s])=>["fileManagerState","settings"].includes(s)))}),shallow$1),Input=reactExports.forwardRef(({className:a,type:s,...c},d)=>{const et=useStore($t=>$t.updateAppState),g=()=>{et({disableShortCuts:!0})},at=()=>{et({disableShortCuts:!1})};return jsxRuntimeExports.jsx("input",{type:s,className:cn$1("flex h-8 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:d,autoComplete:"off",tabIndex:-1,onFocus:g,onBlur:at,...c})});Input.displayName="Input";const NumberInput=reactExports.forwardRef(({numberValue:a,allowFloat:s,onNumberValueChange:c,...d},et)=>{const[g,at]=reactExports.useState(a.toString());reactExports.useEffect(()=>{g!==a.toString()+"."&&at(a.toString())},[a]);const $t=vt=>{let pt=vt.target.value;if(s){if(pt=pt.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1"),pt.length===0){c(0);return}c(parseFloat(pt))}else{if(pt=pt.replace(/\D/g,""),pt.length===0){c(0);return}c(parseInt(pt,10))}at(pt)};return jsxRuntimeExports.jsx(Input,{ref:et,value:g,onInput:$t,...d})}),$1746a345f3d73bb7$var$useReactId=React$1.useId||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(a){const[s,c]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{c(d=>d??String($1746a345f3d73bb7$var$count++))},[a]),s?`radix-${s}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=a=>({x:a,y:a}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(a,s,c){return max(a,min(s,c))}function evaluate(a,s){return typeof a=="function"?a(s):a}function getSide(a){return a.split("-")[0]}function getAlignment(a){return a.split("-")[1]}function getOppositeAxis(a){return a==="x"?"y":"x"}function getAxisLength(a){return a==="y"?"height":"width"}function getSideAxis(a){return["top","bottom"].includes(getSide(a))?"y":"x"}function getAlignmentAxis(a){return getOppositeAxis(getSideAxis(a))}function getAlignmentSides(a,s,c){c===void 0&&(c=!1);const d=getAlignment(a),et=getAlignmentAxis(a),g=getAxisLength(et);let at=et==="x"?d===(c?"end":"start")?"right":"left":d==="start"?"bottom":"top";return s.reference[g]>s.floating[g]&&(at=getOppositePlacement(at)),[at,getOppositePlacement(at)]}function getExpandedPlacements(a){const s=getOppositePlacement(a);return[getOppositeAlignmentPlacement(a),s,getOppositeAlignmentPlacement(s)]}function getOppositeAlignmentPlacement(a){return a.replace(/start|end/g,s=>oppositeAlignmentMap[s])}function getSideList(a,s,c){const d=["left","right"],et=["right","left"],g=["top","bottom"],at=["bottom","top"];switch(a){case"top":case"bottom":return c?s?et:d:s?d:et;case"left":case"right":return s?g:at;default:return[]}}function getOppositeAxisPlacements(a,s,c,d){const et=getAlignment(a);let g=getSideList(getSide(a),c==="start",d);return et&&(g=g.map(at=>at+"-"+et),s&&(g=g.concat(g.map(getOppositeAlignmentPlacement)))),g}function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,s=>oppositeSideMap[s])}function expandPaddingObject(a){return{top:0,right:0,bottom:0,left:0,...a}}function getPaddingObject(a){return typeof a!="number"?expandPaddingObject(a):{top:a,right:a,bottom:a,left:a}}function rectToClientRect(a){const{x:s,y:c,width:d,height:et}=a;return{width:d,height:et,top:c,left:s,right:s+d,bottom:c+et,x:s,y:c}}function computeCoordsFromPlacement(a,s,c){let{reference:d,floating:et}=a;const g=getSideAxis(s),at=getAlignmentAxis(s),$t=getAxisLength(at),vt=getSide(s),b=g==="y",pt=d.x+d.width/2-et.width/2,st=d.y+d.height/2-et.height/2,wt=d[$t]/2-et[$t]/2;let Tt;switch(vt){case"top":Tt={x:pt,y:d.y-et.height};break;case"bottom":Tt={x:pt,y:d.y+d.height};break;case"right":Tt={x:d.x+d.width,y:st};break;case"left":Tt={x:d.x-et.width,y:st};break;default:Tt={x:d.x,y:d.y}}switch(getAlignment(s)){case"start":Tt[at]-=wt*(c&&b?-1:1);break;case"end":Tt[at]+=wt*(c&&b?-1:1);break}return Tt}const computePosition$1=async(a,s,c)=>{const{placement:d="bottom",strategy:et="absolute",middleware:g=[],platform:at}=c,$t=g.filter(Boolean),vt=await(at.isRTL==null?void 0:at.isRTL(s));let b=await at.getElementRects({reference:a,floating:s,strategy:et}),{x:pt,y:st}=computeCoordsFromPlacement(b,d,vt),wt=d,Tt={},Ct=0;for(let jt=0;jt<$t.length;jt++){const{name:Lt,fn:Ht}=$t[jt],{x:Gt,y:Kt,data:tr,reset:rr}=await Ht({x:pt,y:st,initialPlacement:d,placement:wt,strategy:et,middlewareData:Tt,rects:b,platform:at,elements:{reference:a,floating:s}});pt=Gt??pt,st=Kt??st,Tt={...Tt,[Lt]:{...Tt[Lt],...tr}},rr&&Ct<=50&&(Ct++,typeof rr=="object"&&(rr.placement&&(wt=rr.placement),rr.rects&&(b=rr.rects===!0?await at.getElementRects({reference:a,floating:s,strategy:et}):rr.rects),{x:pt,y:st}=computeCoordsFromPlacement(b,wt,vt)),jt=-1)}return{x:pt,y:st,placement:wt,strategy:et,middlewareData:Tt}};async function detectOverflow(a,s){var c;s===void 0&&(s={});const{x:d,y:et,platform:g,rects:at,elements:$t,strategy:vt}=a,{boundary:b="clippingAncestors",rootBoundary:pt="viewport",elementContext:st="floating",altBoundary:wt=!1,padding:Tt=0}=evaluate(s,a),Ct=getPaddingObject(Tt),Lt=$t[wt?st==="floating"?"reference":"floating":st],Ht=rectToClientRect(await g.getClippingRect({element:(c=await(g.isElement==null?void 0:g.isElement(Lt)))==null||c?Lt:Lt.contextElement||await(g.getDocumentElement==null?void 0:g.getDocumentElement($t.floating)),boundary:b,rootBoundary:pt,strategy:vt})),Gt=st==="floating"?{x:d,y:et,width:at.floating.width,height:at.floating.height}:at.reference,Kt=await(g.getOffsetParent==null?void 0:g.getOffsetParent($t.floating)),tr=await(g.isElement==null?void 0:g.isElement(Kt))?await(g.getScale==null?void 0:g.getScale(Kt))||{x:1,y:1}:{x:1,y:1},rr=rectToClientRect(g.convertOffsetParentRelativeRectToViewportRelativeRect?await g.convertOffsetParentRelativeRectToViewportRelativeRect({elements:$t,rect:Gt,offsetParent:Kt,strategy:vt}):Gt);return{top:(Ht.top-rr.top+Ct.top)/tr.y,bottom:(rr.bottom-Ht.bottom+Ct.bottom)/tr.y,left:(Ht.left-rr.left+Ct.left)/tr.x,right:(rr.right-Ht.right+Ct.right)/tr.x}}const arrow$2=a=>({name:"arrow",options:a,async fn(s){const{x:c,y:d,placement:et,rects:g,platform:at,elements:$t,middlewareData:vt}=s,{element:b,padding:pt=0}=evaluate(a,s)||{};if(b==null)return{};const st=getPaddingObject(pt),wt={x:c,y:d},Tt=getAlignmentAxis(et),Ct=getAxisLength(Tt),jt=await at.getDimensions(b),Lt=Tt==="y",Ht=Lt?"top":"left",Gt=Lt?"bottom":"right",Kt=Lt?"clientHeight":"clientWidth",tr=g.reference[Ct]+g.reference[Tt]-wt[Tt]-g.floating[Ct],rr=wt[Tt]-g.reference[Tt],Lr=await(at.getOffsetParent==null?void 0:at.getOffsetParent(b));let jr=Lr?Lr[Kt]:0;(!jr||!await(at.isElement==null?void 0:at.isElement(Lr)))&&(jr=$t.floating[Kt]||g.floating[Ct]);const Yr=tr/2-rr/2,An=jr/2-jt[Ct]/2-1,No=min(st[Ht],An),o0=min(st[Gt],An),t0=No,c0=jr-jt[Ct]-o0,n0=jr/2-jt[Ct]/2+Yr,Qo=clamp(t0,n0,c0),Mo=!vt.arrow&&getAlignment(et)!=null&&n0!==Qo&&g.reference[Ct]/2-(n0<t0?No:o0)-jt[Ct]/2<0,zo=Mo?n0<t0?n0-t0:n0-c0:0;return{[Tt]:wt[Tt]+zo,data:{[Tt]:Qo,centerOffset:n0-Qo-zo,...Mo&&{alignmentOffset:zo}},reset:Mo}}}),flip$1=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(s){var c,d;const{placement:et,middlewareData:g,rects:at,initialPlacement:$t,platform:vt,elements:b}=s,{mainAxis:pt=!0,crossAxis:st=!0,fallbackPlacements:wt,fallbackStrategy:Tt="bestFit",fallbackAxisSideDirection:Ct="none",flipAlignment:jt=!0,...Lt}=evaluate(a,s);if((c=g.arrow)!=null&&c.alignmentOffset)return{};const Ht=getSide(et),Gt=getSide($t)===$t,Kt=await(vt.isRTL==null?void 0:vt.isRTL(b.floating)),tr=wt||(Gt||!jt?[getOppositePlacement($t)]:getExpandedPlacements($t));!wt&&Ct!=="none"&&tr.push(...getOppositeAxisPlacements($t,jt,Ct,Kt));const rr=[$t,...tr],Lr=await detectOverflow(s,Lt),jr=[];let Yr=((d=g.flip)==null?void 0:d.overflows)||[];if(pt&&jr.push(Lr[Ht]),st){const t0=getAlignmentSides(et,at,Kt);jr.push(Lr[t0[0]],Lr[t0[1]])}if(Yr=[...Yr,{placement:et,overflows:jr}],!jr.every(t0=>t0<=0)){var An,No;const t0=(((An=g.flip)==null?void 0:An.index)||0)+1,c0=rr[t0];if(c0)return{data:{index:t0,overflows:Yr},reset:{placement:c0}};let n0=(No=Yr.filter(Qo=>Qo.overflows[0]<=0).sort((Qo,Mo)=>Qo.overflows[1]-Mo.overflows[1])[0])==null?void 0:No.placement;if(!n0)switch(Tt){case"bestFit":{var o0;const Qo=(o0=Yr.map(Mo=>[Mo.placement,Mo.overflows.filter(zo=>zo>0).reduce((zo,e0)=>zo+e0,0)]).sort((Mo,zo)=>Mo[1]-zo[1])[0])==null?void 0:o0[0];Qo&&(n0=Qo);break}case"initialPlacement":n0=$t;break}if(et!==n0)return{reset:{placement:n0}}}return{}}}};function getSideOffsets(a,s){return{top:a.top-s.height,right:a.right-s.width,bottom:a.bottom-s.height,left:a.left-s.width}}function isAnySideFullyClipped(a){return sides.some(s=>a[s]>=0)}const hide$1=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(s){const{rects:c}=s,{strategy:d="referenceHidden",...et}=evaluate(a,s);switch(d){case"referenceHidden":{const g=await detectOverflow(s,{...et,elementContext:"reference"}),at=getSideOffsets(g,c.reference);return{data:{referenceHiddenOffsets:at,referenceHidden:isAnySideFullyClipped(at)}}}case"escaped":{const g=await detectOverflow(s,{...et,altBoundary:!0}),at=getSideOffsets(g,c.floating);return{data:{escapedOffsets:at,escaped:isAnySideFullyClipped(at)}}}default:return{}}}}};async function convertValueToCoords(a,s){const{placement:c,platform:d,elements:et}=a,g=await(d.isRTL==null?void 0:d.isRTL(et.floating)),at=getSide(c),$t=getAlignment(c),vt=getSideAxis(c)==="y",b=["left","top"].includes(at)?-1:1,pt=g&&vt?-1:1,st=evaluate(s,a);let{mainAxis:wt,crossAxis:Tt,alignmentAxis:Ct}=typeof st=="number"?{mainAxis:st,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...st};return $t&&typeof Ct=="number"&&(Tt=$t==="end"?Ct*-1:Ct),vt?{x:Tt*pt,y:wt*b}:{x:wt*b,y:Tt*pt}}const offset$1=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(s){var c,d;const{x:et,y:g,placement:at,middlewareData:$t}=s,vt=await convertValueToCoords(s,a);return at===((c=$t.offset)==null?void 0:c.placement)&&(d=$t.arrow)!=null&&d.alignmentOffset?{}:{x:et+vt.x,y:g+vt.y,data:{...vt,placement:at}}}}},shift$1=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(s){const{x:c,y:d,placement:et}=s,{mainAxis:g=!0,crossAxis:at=!1,limiter:$t={fn:Lt=>{let{x:Ht,y:Gt}=Lt;return{x:Ht,y:Gt}}},...vt}=evaluate(a,s),b={x:c,y:d},pt=await detectOverflow(s,vt),st=getSideAxis(getSide(et)),wt=getOppositeAxis(st);let Tt=b[wt],Ct=b[st];if(g){const Lt=wt==="y"?"top":"left",Ht=wt==="y"?"bottom":"right",Gt=Tt+pt[Lt],Kt=Tt-pt[Ht];Tt=clamp(Gt,Tt,Kt)}if(at){const Lt=st==="y"?"top":"left",Ht=st==="y"?"bottom":"right",Gt=Ct+pt[Lt],Kt=Ct-pt[Ht];Ct=clamp(Gt,Ct,Kt)}const jt=$t.fn({...s,[wt]:Tt,[st]:Ct});return{...jt,data:{x:jt.x-c,y:jt.y-d}}}}},limitShift$1=function(a){return a===void 0&&(a={}),{options:a,fn(s){const{x:c,y:d,placement:et,rects:g,middlewareData:at}=s,{offset:$t=0,mainAxis:vt=!0,crossAxis:b=!0}=evaluate(a,s),pt={x:c,y:d},st=getSideAxis(et),wt=getOppositeAxis(st);let Tt=pt[wt],Ct=pt[st];const jt=evaluate($t,s),Lt=typeof jt=="number"?{mainAxis:jt,crossAxis:0}:{mainAxis:0,crossAxis:0,...jt};if(vt){const Kt=wt==="y"?"height":"width",tr=g.reference[wt]-g.floating[Kt]+Lt.mainAxis,rr=g.reference[wt]+g.reference[Kt]-Lt.mainAxis;Tt<tr?Tt=tr:Tt>rr&&(Tt=rr)}if(b){var Ht,Gt;const Kt=wt==="y"?"width":"height",tr=["top","left"].includes(getSide(et)),rr=g.reference[st]-g.floating[Kt]+(tr&&((Ht=at.offset)==null?void 0:Ht[st])||0)+(tr?0:Lt.crossAxis),Lr=g.reference[st]+g.reference[Kt]+(tr?0:((Gt=at.offset)==null?void 0:Gt[st])||0)-(tr?Lt.crossAxis:0);Ct<rr?Ct=rr:Ct>Lr&&(Ct=Lr)}return{[wt]:Tt,[st]:Ct}}}},size$1=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(s){const{placement:c,rects:d,platform:et,elements:g}=s,{apply:at=()=>{},...$t}=evaluate(a,s),vt=await detectOverflow(s,$t),b=getSide(c),pt=getAlignment(c),st=getSideAxis(c)==="y",{width:wt,height:Tt}=d.floating;let Ct,jt;b==="top"||b==="bottom"?(Ct=b,jt=pt===(await(et.isRTL==null?void 0:et.isRTL(g.floating))?"start":"end")?"left":"right"):(jt=b,Ct=pt==="end"?"top":"bottom");const Lt=Tt-vt[Ct],Ht=wt-vt[jt],Gt=!s.middlewareData.shift;let Kt=Lt,tr=Ht;if(st){const Lr=wt-vt.left-vt.right;tr=pt||Gt?min(Ht,Lr):Lr}else{const Lr=Tt-vt.top-vt.bottom;Kt=pt||Gt?min(Lt,Lr):Lr}if(Gt&&!pt){const Lr=max(vt.left,0),jr=max(vt.right,0),Yr=max(vt.top,0),An=max(vt.bottom,0);st?tr=wt-2*(Lr!==0||jr!==0?Lr+jr:max(vt.left,vt.right)):Kt=Tt-2*(Yr!==0||An!==0?Yr+An:max(vt.top,vt.bottom))}await at({...s,availableWidth:tr,availableHeight:Kt});const rr=await et.getDimensions(g.floating);return wt!==rr.width||Tt!==rr.height?{reset:{rects:!0}}:{}}}};function getNodeName(a){return isNode(a)?(a.nodeName||"").toLowerCase():"#document"}function getWindow(a){var s;return(a==null||(s=a.ownerDocument)==null?void 0:s.defaultView)||window}function getDocumentElement(a){var s;return(s=(isNode(a)?a.ownerDocument:a.document)||window.document)==null?void 0:s.documentElement}function isNode(a){return a instanceof Node||a instanceof getWindow(a).Node}function isElement(a){return a instanceof Element||a instanceof getWindow(a).Element}function isHTMLElement$1(a){return a instanceof HTMLElement||a instanceof getWindow(a).HTMLElement}function isShadowRoot(a){return typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof getWindow(a).ShadowRoot}function isOverflowElement(a){const{overflow:s,overflowX:c,overflowY:d,display:et}=getComputedStyle$1(a);return/auto|scroll|overlay|hidden|clip/.test(s+d+c)&&!["inline","contents"].includes(et)}function isTableElement(a){return["table","td","th"].includes(getNodeName(a))}function isContainingBlock(a){const s=isWebKit(),c=getComputedStyle$1(a);return c.transform!=="none"||c.perspective!=="none"||(c.containerType?c.containerType!=="normal":!1)||!s&&(c.backdropFilter?c.backdropFilter!=="none":!1)||!s&&(c.filter?c.filter!=="none":!1)||["transform","perspective","filter"].some(d=>(c.willChange||"").includes(d))||["paint","layout","strict","content"].some(d=>(c.contain||"").includes(d))}function getContainingBlock(a){let s=getParentNode(a);for(;isHTMLElement$1(s)&&!isLastTraversableNode(s);){if(isContainingBlock(s))return s;s=getParentNode(s)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(a){return["html","body","#document"].includes(getNodeName(a))}function getComputedStyle$1(a){return getWindow(a).getComputedStyle(a)}function getNodeScroll(a){return isElement(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function getParentNode(a){if(getNodeName(a)==="html")return a;const s=a.assignedSlot||a.parentNode||isShadowRoot(a)&&a.host||getDocumentElement(a);return isShadowRoot(s)?s.host:s}function getNearestOverflowAncestor(a){const s=getParentNode(a);return isLastTraversableNode(s)?a.ownerDocument?a.ownerDocument.body:a.body:isHTMLElement$1(s)&&isOverflowElement(s)?s:getNearestOverflowAncestor(s)}function getOverflowAncestors(a,s,c){var d;s===void 0&&(s=[]),c===void 0&&(c=!0);const et=getNearestOverflowAncestor(a),g=et===((d=a.ownerDocument)==null?void 0:d.body),at=getWindow(et);return g?s.concat(at,at.visualViewport||[],isOverflowElement(et)?et:[],at.frameElement&&c?getOverflowAncestors(at.frameElement):[]):s.concat(et,getOverflowAncestors(et,[],c))}function getCssDimensions(a){const s=getComputedStyle$1(a);let c=parseFloat(s.width)||0,d=parseFloat(s.height)||0;const et=isHTMLElement$1(a),g=et?a.offsetWidth:c,at=et?a.offsetHeight:d,$t=round(c)!==g||round(d)!==at;return $t&&(c=g,d=at),{width:c,height:d,$:$t}}function unwrapElement(a){return isElement(a)?a:a.contextElement}function getScale(a){const s=unwrapElement(a);if(!isHTMLElement$1(s))return createCoords(1);const c=s.getBoundingClientRect(),{width:d,height:et,$:g}=getCssDimensions(s);let at=(g?round(c.width):c.width)/d,$t=(g?round(c.height):c.height)/et;return(!at||!Number.isFinite(at))&&(at=1),(!$t||!Number.isFinite($t))&&($t=1),{x:at,y:$t}}const noOffsets=createCoords(0);function getVisualOffsets(a){const s=getWindow(a);return!isWebKit()||!s.visualViewport?noOffsets:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function shouldAddVisualOffsets(a,s,c){return s===void 0&&(s=!1),!c||s&&c!==getWindow(a)?!1:s}function getBoundingClientRect(a,s,c,d){s===void 0&&(s=!1),c===void 0&&(c=!1);const et=a.getBoundingClientRect(),g=unwrapElement(a);let at=createCoords(1);s&&(d?isElement(d)&&(at=getScale(d)):at=getScale(a));const $t=shouldAddVisualOffsets(g,c,d)?getVisualOffsets(g):createCoords(0);let vt=(et.left+$t.x)/at.x,b=(et.top+$t.y)/at.y,pt=et.width/at.x,st=et.height/at.y;if(g){const wt=getWindow(g),Tt=d&&isElement(d)?getWindow(d):d;let Ct=wt,jt=Ct.frameElement;for(;jt&&d&&Tt!==Ct;){const Lt=getScale(jt),Ht=jt.getBoundingClientRect(),Gt=getComputedStyle$1(jt),Kt=Ht.left+(jt.clientLeft+parseFloat(Gt.paddingLeft))*Lt.x,tr=Ht.top+(jt.clientTop+parseFloat(Gt.paddingTop))*Lt.y;vt*=Lt.x,b*=Lt.y,pt*=Lt.x,st*=Lt.y,vt+=Kt,b+=tr,Ct=getWindow(jt),jt=Ct.frameElement}}return rectToClientRect({width:pt,height:st,x:vt,y:b})}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(a){return topLayerSelectors.some(s=>{try{return a.matches(s)}catch{return!1}})}function convertOffsetParentRelativeRectToViewportRelativeRect(a){let{elements:s,rect:c,offsetParent:d,strategy:et}=a;const g=et==="fixed",at=getDocumentElement(d),$t=s?isTopLayer(s.floating):!1;if(d===at||$t&&g)return c;let vt={scrollLeft:0,scrollTop:0},b=createCoords(1);const pt=createCoords(0),st=isHTMLElement$1(d);if((st||!st&&!g)&&((getNodeName(d)!=="body"||isOverflowElement(at))&&(vt=getNodeScroll(d)),isHTMLElement$1(d))){const wt=getBoundingClientRect(d);b=getScale(d),pt.x=wt.x+d.clientLeft,pt.y=wt.y+d.clientTop}return{width:c.width*b.x,height:c.height*b.y,x:c.x*b.x-vt.scrollLeft*b.x+pt.x,y:c.y*b.y-vt.scrollTop*b.y+pt.y}}function getClientRects(a){return Array.from(a.getClientRects())}function getWindowScrollBarX(a){return getBoundingClientRect(getDocumentElement(a)).left+getNodeScroll(a).scrollLeft}function getDocumentRect(a){const s=getDocumentElement(a),c=getNodeScroll(a),d=a.ownerDocument.body,et=max(s.scrollWidth,s.clientWidth,d.scrollWidth,d.clientWidth),g=max(s.scrollHeight,s.clientHeight,d.scrollHeight,d.clientHeight);let at=-c.scrollLeft+getWindowScrollBarX(a);const $t=-c.scrollTop;return getComputedStyle$1(d).direction==="rtl"&&(at+=max(s.clientWidth,d.clientWidth)-et),{width:et,height:g,x:at,y:$t}}function getViewportRect(a,s){const c=getWindow(a),d=getDocumentElement(a),et=c.visualViewport;let g=d.clientWidth,at=d.clientHeight,$t=0,vt=0;if(et){g=et.width,at=et.height;const b=isWebKit();(!b||b&&s==="fixed")&&($t=et.offsetLeft,vt=et.offsetTop)}return{width:g,height:at,x:$t,y:vt}}function getInnerBoundingClientRect(a,s){const c=getBoundingClientRect(a,!0,s==="fixed"),d=c.top+a.clientTop,et=c.left+a.clientLeft,g=isHTMLElement$1(a)?getScale(a):createCoords(1),at=a.clientWidth*g.x,$t=a.clientHeight*g.y,vt=et*g.x,b=d*g.y;return{width:at,height:$t,x:vt,y:b}}function getClientRectFromClippingAncestor(a,s,c){let d;if(s==="viewport")d=getViewportRect(a,c);else if(s==="document")d=getDocumentRect(getDocumentElement(a));else if(isElement(s))d=getInnerBoundingClientRect(s,c);else{const et=getVisualOffsets(a);d={...s,x:s.x-et.x,y:s.y-et.y}}return rectToClientRect(d)}function hasFixedPositionAncestor(a,s){const c=getParentNode(a);return c===s||!isElement(c)||isLastTraversableNode(c)?!1:getComputedStyle$1(c).position==="fixed"||hasFixedPositionAncestor(c,s)}function getClippingElementAncestors(a,s){const c=s.get(a);if(c)return c;let d=getOverflowAncestors(a,[],!1).filter($t=>isElement($t)&&getNodeName($t)!=="body"),et=null;const g=getComputedStyle$1(a).position==="fixed";let at=g?getParentNode(a):a;for(;isElement(at)&&!isLastTraversableNode(at);){const $t=getComputedStyle$1(at),vt=isContainingBlock(at);!vt&&$t.position==="fixed"&&(et=null),(g?!vt&&!et:!vt&&$t.position==="static"&&!!et&&["absolute","fixed"].includes(et.position)||isOverflowElement(at)&&!vt&&hasFixedPositionAncestor(a,at))?d=d.filter(pt=>pt!==at):et=$t,at=getParentNode(at)}return s.set(a,d),d}function getClippingRect(a){let{element:s,boundary:c,rootBoundary:d,strategy:et}=a;const at=[...c==="clippingAncestors"?isTopLayer(s)?[]:getClippingElementAncestors(s,this._c):[].concat(c),d],$t=at[0],vt=at.reduce((b,pt)=>{const st=getClientRectFromClippingAncestor(s,pt,et);return b.top=max(st.top,b.top),b.right=min(st.right,b.right),b.bottom=min(st.bottom,b.bottom),b.left=max(st.left,b.left),b},getClientRectFromClippingAncestor(s,$t,et));return{width:vt.right-vt.left,height:vt.bottom-vt.top,x:vt.left,y:vt.top}}function getDimensions(a){const{width:s,height:c}=getCssDimensions(a);return{width:s,height:c}}function getRectRelativeToOffsetParent(a,s,c){const d=isHTMLElement$1(s),et=getDocumentElement(s),g=c==="fixed",at=getBoundingClientRect(a,!0,g,s);let $t={scrollLeft:0,scrollTop:0};const vt=createCoords(0);if(d||!d&&!g)if((getNodeName(s)!=="body"||isOverflowElement(et))&&($t=getNodeScroll(s)),d){const st=getBoundingClientRect(s,!0,g,s);vt.x=st.x+s.clientLeft,vt.y=st.y+s.clientTop}else et&&(vt.x=getWindowScrollBarX(et));const b=at.left+$t.scrollLeft-vt.x,pt=at.top+$t.scrollTop-vt.y;return{x:b,y:pt,width:at.width,height:at.height}}function isStaticPositioned(a){return getComputedStyle$1(a).position==="static"}function getTrueOffsetParent(a,s){return!isHTMLElement$1(a)||getComputedStyle$1(a).position==="fixed"?null:s?s(a):a.offsetParent}function getOffsetParent(a,s){const c=getWindow(a);if(isTopLayer(a))return c;if(!isHTMLElement$1(a)){let et=getParentNode(a);for(;et&&!isLastTraversableNode(et);){if(isElement(et)&&!isStaticPositioned(et))return et;et=getParentNode(et)}return c}let d=getTrueOffsetParent(a,s);for(;d&&isTableElement(d)&&isStaticPositioned(d);)d=getTrueOffsetParent(d,s);return d&&isLastTraversableNode(d)&&isStaticPositioned(d)&&!isContainingBlock(d)?c:d||getContainingBlock(a)||c}const getElementRects=async function(a){const s=this.getOffsetParent||getOffsetParent,c=this.getDimensions,d=await c(a.floating);return{reference:getRectRelativeToOffsetParent(a.reference,await s(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}};function isRTL(a){return getComputedStyle$1(a).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(a,s){let c=null,d;const et=getDocumentElement(a);function g(){var $t;clearTimeout(d),($t=c)==null||$t.disconnect(),c=null}function at($t,vt){$t===void 0&&($t=!1),vt===void 0&&(vt=1),g();const{left:b,top:pt,width:st,height:wt}=a.getBoundingClientRect();if($t||s(),!st||!wt)return;const Tt=floor(pt),Ct=floor(et.clientWidth-(b+st)),jt=floor(et.clientHeight-(pt+wt)),Lt=floor(b),Gt={rootMargin:-Tt+"px "+-Ct+"px "+-jt+"px "+-Lt+"px",threshold:max(0,min(1,vt))||1};let Kt=!0;function tr(rr){const Lr=rr[0].intersectionRatio;if(Lr!==vt){if(!Kt)return at();Lr?at(!1,Lr):d=setTimeout(()=>{at(!1,1e-7)},1e3)}Kt=!1}try{c=new IntersectionObserver(tr,{...Gt,root:et.ownerDocument})}catch{c=new IntersectionObserver(tr,Gt)}c.observe(a)}return at(!0),g}function autoUpdate(a,s,c,d){d===void 0&&(d={});const{ancestorScroll:et=!0,ancestorResize:g=!0,elementResize:at=typeof ResizeObserver=="function",layoutShift:$t=typeof IntersectionObserver=="function",animationFrame:vt=!1}=d,b=unwrapElement(a),pt=et||g?[...b?getOverflowAncestors(b):[],...getOverflowAncestors(s)]:[];pt.forEach(Ht=>{et&&Ht.addEventListener("scroll",c,{passive:!0}),g&&Ht.addEventListener("resize",c)});const st=b&&$t?observeMove(b,c):null;let wt=-1,Tt=null;at&&(Tt=new ResizeObserver(Ht=>{let[Gt]=Ht;Gt&&Gt.target===b&&Tt&&(Tt.unobserve(s),cancelAnimationFrame(wt),wt=requestAnimationFrame(()=>{var Kt;(Kt=Tt)==null||Kt.observe(s)})),c()}),b&&!vt&&Tt.observe(b),Tt.observe(s));let Ct,jt=vt?getBoundingClientRect(a):null;vt&&Lt();function Lt(){const Ht=getBoundingClientRect(a);jt&&(Ht.x!==jt.x||Ht.y!==jt.y||Ht.width!==jt.width||Ht.height!==jt.height)&&c(),jt=Ht,Ct=requestAnimationFrame(Lt)}return c(),()=>{var Ht;pt.forEach(Gt=>{et&&Gt.removeEventListener("scroll",c),g&&Gt.removeEventListener("resize",c)}),st==null||st(),(Ht=Tt)==null||Ht.disconnect(),Tt=null,vt&&cancelAnimationFrame(Ct)}}const offset=offset$1,shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow$1=arrow$2,limitShift=limitShift$1,computePosition=(a,s,c)=>{const d=new Map,et={platform,...c},g={...et.platform,_c:d};return computePosition$1(a,s,{...et,platform:g})},arrow=a=>{function s(c){return{}.hasOwnProperty.call(c,"current")}return{name:"arrow",options:a,fn(c){const{element:d,padding:et}=typeof a=="function"?a(c):a;return d&&s(d)?d.current!=null?arrow$1({element:d.current,padding:et}).fn(c):{}:d?arrow$1({element:d,padding:et}).fn(c):{}}}};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$2(a,s){if(a===s)return!0;if(typeof a!=typeof s)return!1;if(typeof a=="function"&&a.toString()===s.toString())return!0;let c,d,et;if(a&&s&&typeof a=="object"){if(Array.isArray(a)){if(c=a.length,c!==s.length)return!1;for(d=c;d--!==0;)if(!deepEqual$2(a[d],s[d]))return!1;return!0}if(et=Object.keys(a),c=et.length,c!==Object.keys(s).length)return!1;for(d=c;d--!==0;)if(!{}.hasOwnProperty.call(s,et[d]))return!1;for(d=c;d--!==0;){const g=et[d];if(!(g==="_owner"&&a.$$typeof)&&!deepEqual$2(a[g],s[g]))return!1}return!0}return a!==a&&s!==s}function getDPR(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(a,s){const c=getDPR(a);return Math.round(s*c)/c}function useLatestRef(a){const s=reactExports.useRef(a);return index(()=>{s.current=a}),s}function useFloating(a){a===void 0&&(a={});const{placement:s="bottom",strategy:c="absolute",middleware:d=[],platform:et,elements:{reference:g,floating:at}={},transform:$t=!0,whileElementsMounted:vt,open:b}=a,[pt,st]=reactExports.useState({x:0,y:0,strategy:c,placement:s,middlewareData:{},isPositioned:!1}),[wt,Tt]=reactExports.useState(d);deepEqual$2(wt,d)||Tt(d);const[Ct,jt]=reactExports.useState(null),[Lt,Ht]=reactExports.useState(null),Gt=reactExports.useCallback(zo=>{zo!==Lr.current&&(Lr.current=zo,jt(zo))},[]),Kt=reactExports.useCallback(zo=>{zo!==jr.current&&(jr.current=zo,Ht(zo))},[]),tr=g||Ct,rr=at||Lt,Lr=reactExports.useRef(null),jr=reactExports.useRef(null),Yr=reactExports.useRef(pt),An=vt!=null,No=useLatestRef(vt),o0=useLatestRef(et),t0=reactExports.useCallback(()=>{if(!Lr.current||!jr.current)return;const zo={placement:s,strategy:c,middleware:wt};o0.current&&(zo.platform=o0.current),computePosition(Lr.current,jr.current,zo).then(e0=>{const Xr={...e0,isPositioned:!0};c0.current&&!deepEqual$2(Yr.current,Xr)&&(Yr.current=Xr,reactDomExports.flushSync(()=>{st(Xr)}))})},[wt,s,c,o0]);index(()=>{b===!1&&Yr.current.isPositioned&&(Yr.current.isPositioned=!1,st(zo=>({...zo,isPositioned:!1})))},[b]);const c0=reactExports.useRef(!1);index(()=>(c0.current=!0,()=>{c0.current=!1}),[]),index(()=>{if(tr&&(Lr.current=tr),rr&&(jr.current=rr),tr&&rr){if(No.current)return No.current(tr,rr,t0);t0()}},[tr,rr,t0,No,An]);const n0=reactExports.useMemo(()=>({reference:Lr,floating:jr,setReference:Gt,setFloating:Kt}),[Gt,Kt]),Qo=reactExports.useMemo(()=>({reference:tr,floating:rr}),[tr,rr]),Mo=reactExports.useMemo(()=>{const zo={position:c,left:0,top:0};if(!Qo.floating)return zo;const e0=roundByDPR(Qo.floating,pt.x),Xr=roundByDPR(Qo.floating,pt.y);return $t?{...zo,transform:"translate("+e0+"px, "+Xr+"px)",...getDPR(Qo.floating)>=1.5&&{willChange:"transform"}}:{position:c,left:e0,top:Xr}},[c,$t,Qo.floating,pt.x,pt.y]);return reactExports.useMemo(()=>({...pt,update:t0,refs:n0,elements:Qo,floatingStyles:Mo}),[pt,t0,n0,Qo,Mo])}const $7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((a,s)=>{const{children:c,width:d=10,height:et=5,...g}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$1({},g,{ref:s,width:d,height:et,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?c:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5;function $db6c3485150b8e66$export$1ab7ae714698c4b8(a){const[s,c]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});const d=new ResizeObserver(et=>{if(!Array.isArray(et)||!et.length)return;const g=et[0];let at,$t;if("borderBoxSize"in g){const vt=g.borderBoxSize,b=Array.isArray(vt)?vt[0]:vt;at=b.inlineSize,$t=b.blockSize}else at=a.offsetWidth,$t=a.offsetHeight;c({width:at,height:$t})});return d.observe(a,{box:"border-box"}),()=>d.unobserve(a)}else c(void 0)},[a]),s}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=a=>{const{__scopePopper:s,children:c}=a,[d,et]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:s,anchor:d,onAnchorChange:et},c)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((a,s)=>{const{__scopePopper:c,virtualRef:d,...et}=a,g=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,c),at=reactExports.useRef(null),$t=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,at);return reactExports.useEffect(()=>{g.onAnchorChange((d==null?void 0:d.current)||at.current)}),d?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},et,{ref:$t}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((a,s)=>{var c,d,et,g,at,$t,vt,b;const{__scopePopper:pt,side:st="bottom",sideOffset:wt=0,align:Tt="center",alignOffset:Ct=0,arrowPadding:jt=0,avoidCollisions:Lt=!0,collisionBoundary:Ht=[],collisionPadding:Gt=0,sticky:Kt="partial",hideWhenDetached:tr=!1,updatePositionStrategy:rr="optimized",onPlaced:Lr,...jr}=a,Yr=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,pt),[An,No]=reactExports.useState(null),o0=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,P0=>No(P0)),[t0,c0]=reactExports.useState(null),n0=$db6c3485150b8e66$export$1ab7ae714698c4b8(t0),Qo=(c=n0==null?void 0:n0.width)!==null&&c!==void 0?c:0,Mo=(d=n0==null?void 0:n0.height)!==null&&d!==void 0?d:0,zo=st+(Tt!=="center"?"-"+Tt:""),e0=typeof Gt=="number"?Gt:{top:0,right:0,bottom:0,left:0,...Gt},Xr=Array.isArray(Ht)?Ht:[Ht],In=Xr.length>0,Zr={padding:e0,boundary:Xr.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:In},{refs:wn,floatingStyles:r0,placement:ko,isPositioned:_n,middlewareData:i0}=useFloating({strategy:"fixed",placement:zo,whileElementsMounted:(...P0)=>autoUpdate(...P0,{animationFrame:rr==="always"}),elements:{reference:Yr.anchor},middleware:[offset({mainAxis:wt+Mo,alignmentAxis:Ct}),Lt&&shift({mainAxis:!0,crossAxis:!1,limiter:Kt==="partial"?limitShift():void 0,...Zr}),Lt&&flip({...Zr}),size({...Zr,apply:({elements:P0,rects:M0,availableWidth:C0,availableHeight:Uo})=>{const{width:l0,height:b0}=M0.reference,k0=P0.floating.style;k0.setProperty("--radix-popper-available-width",`${C0}px`),k0.setProperty("--radix-popper-available-height",`${Uo}px`),k0.setProperty("--radix-popper-anchor-width",`${l0}px`),k0.setProperty("--radix-popper-anchor-height",`${b0}px`)}}),t0&&arrow({element:t0,padding:jt}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Qo,arrowHeight:Mo}),tr&&hide({strategy:"referenceHidden",...Zr})]}),[a0,m0]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(ko),p0=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Lr);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{_n&&(p0==null||p0())},[_n,p0]);const x0=(et=i0.arrow)===null||et===void 0?void 0:et.x,S0=(g=i0.arrow)===null||g===void 0?void 0:g.y,R0=((at=i0.arrow)===null||at===void 0?void 0:at.centerOffset)!==0,[$0,f0]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{An&&f0(window.getComputedStyle(An).zIndex)},[An]),reactExports.createElement("div",{ref:wn.setFloating,"data-radix-popper-content-wrapper":"",style:{...r0,transform:_n?r0.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$0,"--radix-popper-transform-origin":[($t=i0.transformOrigin)===null||$t===void 0?void 0:$t.x,(vt=i0.transformOrigin)===null||vt===void 0?void 0:vt.y].join(" ")},dir:a.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:pt,placedSide:a0,onArrowChange:c0,arrowX:x0,arrowY:S0,shouldHideArrow:R0},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":a0,"data-align":m0},jr,{ref:o0,style:{...jr.style,animation:_n?void 0:"none",opacity:(b=i0.hide)!==null&&b!==void 0&&b.referenceHidden?0:void 0}}))))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function(s,c){const{__scopePopper:d,...et}=s,g=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,d),at=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[g.placedSide];return reactExports.createElement("span",{ref:g.onArrowChange,style:{position:"absolute",left:g.arrowX,top:g.arrowY,[at]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[g.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[g.placedSide],visibility:g.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$1({},et,{ref:c,style:{...et.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(a){return a!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=a=>({name:"transformOrigin",options:a,fn(s){var c,d,et,g,at;const{placement:$t,rects:vt,middlewareData:b}=s,st=((c=b.arrow)===null||c===void 0?void 0:c.centerOffset)!==0,wt=st?0:a.arrowWidth,Tt=st?0:a.arrowHeight,[Ct,jt]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement($t),Lt={start:"0%",center:"50%",end:"100%"}[jt],Ht=((d=(et=b.arrow)===null||et===void 0?void 0:et.x)!==null&&d!==void 0?d:0)+wt/2,Gt=((g=(at=b.arrow)===null||at===void 0?void 0:at.y)!==null&&g!==void 0?g:0)+Tt/2;let Kt="",tr="";return Ct==="bottom"?(Kt=st?Lt:`${Ht}px`,tr=`${-Tt}px`):Ct==="top"?(Kt=st?Lt:`${Ht}px`,tr=`${vt.floating.height+Tt}px`):Ct==="right"?(Kt=`${-Tt}px`,tr=st?Lt:`${Gt}px`):Ct==="left"&&(Kt=`${vt.floating.width+Tt}px`,tr=st?Lt:`${Gt}px`),{data:{x:Kt,y:tr}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(a){const[s,c="center"]=a.split("-");return[s,c]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,[$a093c7e1ec25a057$var$createTooltipContext,$a093c7e1ec25a057$export$1c540a2224f0d865]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Tooltip",[$cf1ac5d9fe0e8206$export$722aac194ae923]),$a093c7e1ec25a057$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$a093c7e1ec25a057$var$PROVIDER_NAME="TooltipProvider",$a093c7e1ec25a057$var$DEFAULT_DELAY_DURATION=700,$a093c7e1ec25a057$var$TOOLTIP_OPEN="tooltip.open",[$a093c7e1ec25a057$var$TooltipProviderContextProvider,$a093c7e1ec25a057$var$useTooltipProviderContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PROVIDER_NAME),$a093c7e1ec25a057$export$f78649fb9ca566b8=a=>{const{__scopeTooltip:s,delayDuration:c=$a093c7e1ec25a057$var$DEFAULT_DELAY_DURATION,skipDelayDuration:d=300,disableHoverableContent:et=!1,children:g}=a,[at,$t]=reactExports.useState(!0),vt=reactExports.useRef(!1),b=reactExports.useRef(0);return reactExports.useEffect(()=>{const pt=b.current;return()=>window.clearTimeout(pt)},[]),reactExports.createElement($a093c7e1ec25a057$var$TooltipProviderContextProvider,{scope:s,isOpenDelayed:at,delayDuration:c,onOpen:reactExports.useCallback(()=>{window.clearTimeout(b.current),$t(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>$t(!0),d)},[d]),isPointerInTransitRef:vt,onPointerInTransitChange:reactExports.useCallback(pt=>{vt.current=pt},[]),disableHoverableContent:et},g)},$a093c7e1ec25a057$var$TOOLTIP_NAME="Tooltip",[$a093c7e1ec25a057$var$TooltipContextProvider,$a093c7e1ec25a057$var$useTooltipContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME),$a093c7e1ec25a057$export$28c660c63b792dea=a=>{const{__scopeTooltip:s,children:c,open:d,defaultOpen:et=!1,onOpenChange:g,disableHoverableContent:at,delayDuration:$t}=a,vt=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TOOLTIP_NAME,a.__scopeTooltip),b=$a093c7e1ec25a057$var$usePopperScope(s),[pt,st]=reactExports.useState(null),wt=$1746a345f3d73bb7$export$f680877a34711e37(),Tt=reactExports.useRef(0),Ct=at??vt.disableHoverableContent,jt=$t??vt.delayDuration,Lt=reactExports.useRef(!1),[Ht=!1,Gt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:d,defaultProp:et,onChange:jr=>{jr?(vt.onOpen(),document.dispatchEvent(new CustomEvent($a093c7e1ec25a057$var$TOOLTIP_OPEN))):vt.onClose(),g==null||g(jr)}}),Kt=reactExports.useMemo(()=>Ht?Lt.current?"delayed-open":"instant-open":"closed",[Ht]),tr=reactExports.useCallback(()=>{window.clearTimeout(Tt.current),Lt.current=!1,Gt(!0)},[Gt]),rr=reactExports.useCallback(()=>{window.clearTimeout(Tt.current),Gt(!1)},[Gt]),Lr=reactExports.useCallback(()=>{window.clearTimeout(Tt.current),Tt.current=window.setTimeout(()=>{Lt.current=!0,Gt(!0)},jt)},[jt,Gt]);return reactExports.useEffect(()=>()=>window.clearTimeout(Tt.current),[]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,b,reactExports.createElement($a093c7e1ec25a057$var$TooltipContextProvider,{scope:s,contentId:wt,open:Ht,stateAttribute:Kt,trigger:pt,onTriggerChange:st,onTriggerEnter:reactExports.useCallback(()=>{vt.isOpenDelayed?Lr():tr()},[vt.isOpenDelayed,Lr,tr]),onTriggerLeave:reactExports.useCallback(()=>{Ct?rr():window.clearTimeout(Tt.current)},[rr,Ct]),onOpen:tr,onClose:rr,disableHoverableContent:Ct},c))},$a093c7e1ec25a057$var$TRIGGER_NAME="TooltipTrigger",$a093c7e1ec25a057$export$8c610744efcf8a1d=reactExports.forwardRef((a,s)=>{const{__scopeTooltip:c,...d}=a,et=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$TRIGGER_NAME,c),g=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TRIGGER_NAME,c),at=$a093c7e1ec25a057$var$usePopperScope(c),$t=reactExports.useRef(null),vt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,$t,et.onTriggerChange),b=reactExports.useRef(!1),pt=reactExports.useRef(!1),st=reactExports.useCallback(()=>b.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",st),[st]),reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},at),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({"aria-describedby":et.open?et.contentId:void 0,"data-state":et.stateAttribute},d,{ref:vt,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerMove,wt=>{wt.pointerType!=="touch"&&!pt.current&&!g.isPointerInTransitRef.current&&(et.onTriggerEnter(),pt.current=!0)}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerLeave,()=>{et.onTriggerLeave(),pt.current=!1}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDown,()=>{b.current=!0,document.addEventListener("pointerup",st,{once:!0})}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocus,()=>{b.current||et.onOpen()}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onBlur,et.onClose),onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onClick,et.onClose)})))}),$a093c7e1ec25a057$var$PORTAL_NAME="TooltipPortal",[$a093c7e1ec25a057$var$PortalProvider,$a093c7e1ec25a057$var$usePortalContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PORTAL_NAME,{forceMount:void 0}),$a093c7e1ec25a057$var$CONTENT_NAME="TooltipContent",$a093c7e1ec25a057$export$e9003e2be37ec060=reactExports.forwardRef((a,s)=>{const c=$a093c7e1ec25a057$var$usePortalContext($a093c7e1ec25a057$var$CONTENT_NAME,a.__scopeTooltip),{forceMount:d=c.forceMount,side:et="top",...g}=a,at=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,a.__scopeTooltip);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:d||at.open},at.disableHoverableContent?reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({side:et},g,{ref:s})):reactExports.createElement($a093c7e1ec25a057$var$TooltipContentHoverable,_extends$1({side:et},g,{ref:s})))}),$a093c7e1ec25a057$var$TooltipContentHoverable=reactExports.forwardRef((a,s)=>{const c=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,a.__scopeTooltip),d=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$CONTENT_NAME,a.__scopeTooltip),et=reactExports.useRef(null),g=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,et),[at,$t]=reactExports.useState(null),{trigger:vt,onClose:b}=c,pt=et.current,{onPointerInTransitChange:st}=d,wt=reactExports.useCallback(()=>{$t(null),st(!1)},[st]),Tt=reactExports.useCallback((Ct,jt)=>{const Lt=Ct.currentTarget,Ht={x:Ct.clientX,y:Ct.clientY},Gt=$a093c7e1ec25a057$var$getExitSideFromRect(Ht,Lt.getBoundingClientRect()),Kt=$a093c7e1ec25a057$var$getPaddedExitPoints(Ht,Gt),tr=$a093c7e1ec25a057$var$getPointsFromRect(jt.getBoundingClientRect()),rr=$a093c7e1ec25a057$var$getHull([...Kt,...tr]);$t(rr),st(!0)},[st]);return reactExports.useEffect(()=>()=>wt(),[wt]),reactExports.useEffect(()=>{if(vt&&pt){const Ct=Lt=>Tt(Lt,pt),jt=Lt=>Tt(Lt,vt);return vt.addEventListener("pointerleave",Ct),pt.addEventListener("pointerleave",jt),()=>{vt.removeEventListener("pointerleave",Ct),pt.removeEventListener("pointerleave",jt)}}},[vt,pt,Tt,wt]),reactExports.useEffect(()=>{if(at){const Ct=jt=>{const Lt=jt.target,Ht={x:jt.clientX,y:jt.clientY},Gt=(vt==null?void 0:vt.contains(Lt))||(pt==null?void 0:pt.contains(Lt)),Kt=!$a093c7e1ec25a057$var$isPointInPolygon(Ht,at);Gt?wt():Kt&&(wt(),b())};return document.addEventListener("pointermove",Ct),()=>document.removeEventListener("pointermove",Ct)}},[vt,pt,at,b,wt]),reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({},a,{ref:g}))}),[$a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,$a093c7e1ec25a057$var$useVisuallyHiddenContentContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME,{isInside:!1}),$a093c7e1ec25a057$var$TooltipContentImpl=reactExports.forwardRef((a,s)=>{const{__scopeTooltip:c,children:d,"aria-label":et,onEscapeKeyDown:g,onPointerDownOutside:at,...$t}=a,vt=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,c),b=$a093c7e1ec25a057$var$usePopperScope(c),{onClose:pt}=vt;return reactExports.useEffect(()=>(document.addEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,pt),()=>document.removeEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,pt)),[pt]),reactExports.useEffect(()=>{if(vt.trigger){const st=wt=>{const Tt=wt.target;Tt!=null&&Tt.contains(vt.trigger)&&pt()};return window.addEventListener("scroll",st,{capture:!0}),()=>window.removeEventListener("scroll",st,{capture:!0})}},[vt.trigger,pt]),reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:g,onPointerDownOutside:at,onFocusOutside:st=>st.preventDefault(),onDismiss:pt},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({"data-state":vt.stateAttribute},b,$t,{ref:s,style:{...$t.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),reactExports.createElement($5e63c961fc1ce211$export$d9f1ccf0bdb05d45,null,d),reactExports.createElement($a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,{scope:c,isInside:!0},reactExports.createElement($ea1ef594cf570d83$export$be92b6f5f03c0fe9,{id:vt.contentId,role:"tooltip"},et||d))))});function $a093c7e1ec25a057$var$getExitSideFromRect(a,s){const c=Math.abs(s.top-a.y),d=Math.abs(s.bottom-a.y),et=Math.abs(s.right-a.x),g=Math.abs(s.left-a.x);switch(Math.min(c,d,et,g)){case g:return"left";case et:return"right";case c:return"top";case d:return"bottom";default:throw new Error("unreachable")}}function $a093c7e1ec25a057$var$getPaddedExitPoints(a,s,c=5){const d=[];switch(s){case"top":d.push({x:a.x-c,y:a.y+c},{x:a.x+c,y:a.y+c});break;case"bottom":d.push({x:a.x-c,y:a.y-c},{x:a.x+c,y:a.y-c});break;case"left":d.push({x:a.x+c,y:a.y-c},{x:a.x+c,y:a.y+c});break;case"right":d.push({x:a.x-c,y:a.y-c},{x:a.x-c,y:a.y+c});break}return d}function $a093c7e1ec25a057$var$getPointsFromRect(a){const{top:s,right:c,bottom:d,left:et}=a;return[{x:et,y:s},{x:c,y:s},{x:c,y:d},{x:et,y:d}]}function $a093c7e1ec25a057$var$isPointInPolygon(a,s){const{x:c,y:d}=a;let et=!1;for(let g=0,at=s.length-1;g<s.length;at=g++){const $t=s[g].x,vt=s[g].y,b=s[at].x,pt=s[at].y;vt>d!=pt>d&&c<(b-$t)*(d-vt)/(pt-vt)+$t&&(et=!et)}return et}function $a093c7e1ec25a057$var$getHull(a){const s=a.slice();return s.sort((c,d)=>c.x<d.x?-1:c.x>d.x?1:c.y<d.y?-1:c.y>d.y?1:0),$a093c7e1ec25a057$var$getHullPresorted(s)}function $a093c7e1ec25a057$var$getHullPresorted(a){if(a.length<=1)return a.slice();const s=[];for(let d=0;d<a.length;d++){const et=a[d];for(;s.length>=2;){const g=s[s.length-1],at=s[s.length-2];if((g.x-at.x)*(et.y-at.y)>=(g.y-at.y)*(et.x-at.x))s.pop();else break}s.push(et)}s.pop();const c=[];for(let d=a.length-1;d>=0;d--){const et=a[d];for(;c.length>=2;){const g=c[c.length-1],at=c[c.length-2];if((g.x-at.x)*(et.y-at.y)>=(g.y-at.y)*(et.x-at.x))c.pop();else break}c.push(et)}return c.pop(),s.length===1&&c.length===1&&s[0].x===c[0].x&&s[0].y===c[0].y?s:s.concat(c)}const $a093c7e1ec25a057$export$2881499e37b75b9a=$a093c7e1ec25a057$export$f78649fb9ca566b8,$a093c7e1ec25a057$export$be92b6f5f03c0fe9=$a093c7e1ec25a057$export$28c660c63b792dea,$a093c7e1ec25a057$export$41fb9f06171c75f4=$a093c7e1ec25a057$export$8c610744efcf8a1d,$a093c7e1ec25a057$export$7c6e2c02157bb7d2=$a093c7e1ec25a057$export$e9003e2be37ec060,TooltipProvider=$a093c7e1ec25a057$export$2881499e37b75b9a,Tooltip=$a093c7e1ec25a057$export$be92b6f5f03c0fe9,TooltipTrigger=$a093c7e1ec25a057$export$41fb9f06171c75f4,TooltipContent=reactExports.forwardRef(({className:a,sideOffset:s=4,...c},d)=>jsxRuntimeExports.jsx($a093c7e1ec25a057$export$7c6e2c02157bb7d2,{ref:d,sideOffset:s,className:cn$1("z-50 border overflow-hidden rounded-md bg-background text-foreground px-3 py-1.5 text-xs animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c}));TooltipContent.displayName=$a093c7e1ec25a057$export$7c6e2c02157bb7d2.displayName;const buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:a,variant:s,size:c,asChild:d=!1,...et},g)=>{const at=d?$5e63c961fc1ce211$export$8c6ed5c666ac1360:"button";return jsxRuntimeExports.jsx(at,{className:cn$1(buttonVariants({variant:s,size:c,className:a}),"outline-none cursor-default select-none"),ref:g,tabIndex:-1,...et})});Button.displayName="Button";const IconButton=reactExports.forwardRef(({tooltip:a,children:s,...c},d)=>jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",...c,ref:d,tabIndex:-1,className:"cursor-default bg-background",children:jsxRuntimeExports.jsx("div",{className:"icon-button-icon-wrapper",children:s})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:a})})]})),ImageUploadButton=a=>{const{onFileUpload:s,children:c,...d}=a,[et]=reactExports.useState(`file-upload-${Math.random().toString()}`),g=at=>{var vt;const $t=(vt=at.currentTarget.files)==null?void 0:vt[0];$t&&s($t)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{htmlFor:et,children:jsxRuntimeExports.jsx(IconButton,{...d,asChild:!0,children:c})}),jsxRuntimeExports.jsx(Input,{style:{display:"none"},id:et,name:et,type:"file",onChange:g,accept:"image/png, image/jpeg"})]})};function useToggle$1(a){const[s,c]=reactExports.useState(()=>a),d=reactExports.useCallback(et=>c(typeof et=="boolean"?et:g=>!g),[]);return[s,d]}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((a,s)=>{const{loop:c=!1,trapped:d=!1,onMountAutoFocus:et,onUnmountAutoFocus:g,...at}=a,[$t,vt]=reactExports.useState(null),b=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(et),pt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(g),st=reactExports.useRef(null),wt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,jt=>vt(jt)),Tt=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(d){let Gt=function(Lr){if(Tt.paused||!$t)return;const jr=Lr.target;$t.contains(jr)?st.current=jr:$d3863c46a17e8a28$var$focus(st.current,{select:!0})},Kt=function(Lr){if(Tt.paused||!$t)return;const jr=Lr.relatedTarget;jr!==null&&($t.contains(jr)||$d3863c46a17e8a28$var$focus(st.current,{select:!0}))},tr=function(Lr){if(document.activeElement===document.body)for(const Yr of Lr)Yr.removedNodes.length>0&&$d3863c46a17e8a28$var$focus($t)};var jt=Gt,Lt=Kt,Ht=tr;document.addEventListener("focusin",Gt),document.addEventListener("focusout",Kt);const rr=new MutationObserver(tr);return $t&&rr.observe($t,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",Gt),document.removeEventListener("focusout",Kt),rr.disconnect()}}},[d,$t,Tt.paused]),reactExports.useEffect(()=>{if($t){$d3863c46a17e8a28$var$focusScopesStack.add(Tt);const jt=document.activeElement;if(!$t.contains(jt)){const Ht=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);$t.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,b),$t.dispatchEvent(Ht),Ht.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates($t)),{select:!0}),document.activeElement===jt&&$d3863c46a17e8a28$var$focus($t))}return()=>{$t.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,b),setTimeout(()=>{const Ht=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);$t.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,pt),$t.dispatchEvent(Ht),Ht.defaultPrevented||$d3863c46a17e8a28$var$focus(jt??document.body,{select:!0}),$t.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,pt),$d3863c46a17e8a28$var$focusScopesStack.remove(Tt)},0)}}},[$t,b,pt,Tt]);const Ct=reactExports.useCallback(jt=>{if(!c&&!d||Tt.paused)return;const Lt=jt.key==="Tab"&&!jt.altKey&&!jt.ctrlKey&&!jt.metaKey,Ht=document.activeElement;if(Lt&&Ht){const Gt=jt.currentTarget,[Kt,tr]=$d3863c46a17e8a28$var$getTabbableEdges(Gt);Kt&&tr?!jt.shiftKey&&Ht===tr?(jt.preventDefault(),c&&$d3863c46a17e8a28$var$focus(Kt,{select:!0})):jt.shiftKey&&Ht===Kt&&(jt.preventDefault(),c&&$d3863c46a17e8a28$var$focus(tr,{select:!0})):Ht===Gt&&jt.preventDefault()}},[c,d,Tt.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:-1},at,{ref:wt,onKeyDown:Ct}))});function $d3863c46a17e8a28$var$focusFirst(a,{select:s=!1}={}){const c=document.activeElement;for(const d of a)if($d3863c46a17e8a28$var$focus(d,{select:s}),document.activeElement!==c)return}function $d3863c46a17e8a28$var$getTabbableEdges(a){const s=$d3863c46a17e8a28$var$getTabbableCandidates(a),c=$d3863c46a17e8a28$var$findVisible(s,a),d=$d3863c46a17e8a28$var$findVisible(s.reverse(),a);return[c,d]}function $d3863c46a17e8a28$var$getTabbableCandidates(a){const s=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const et=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||et?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)s.push(c.currentNode);return s}function $d3863c46a17e8a28$var$findVisible(a,s){for(const c of a)if(!$d3863c46a17e8a28$var$isHidden(c,{upTo:s}))return c}function $d3863c46a17e8a28$var$isHidden(a,{upTo:s}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(s!==void 0&&a===s)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(a){return a instanceof HTMLInputElement&&"select"in a}function $d3863c46a17e8a28$var$focus(a,{select:s=!1}={}){if(a&&a.focus){const c=document.activeElement;a.focus({preventScroll:!0}),a!==c&&$d3863c46a17e8a28$var$isSelectableInput(a)&&s&&a.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let a=[];return{add(s){const c=a[0];s!==c&&(c==null||c.pause()),a=$d3863c46a17e8a28$var$arrayRemove(a,s),a.unshift(s)},remove(s){var c;a=$d3863c46a17e8a28$var$arrayRemove(a,s),(c=a[0])===null||c===void 0||c.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(a,s){const c=[...a],d=c.indexOf(s);return d!==-1&&c.splice(d,1),c}function $d3863c46a17e8a28$var$removeLinks(a){return a.filter(s=>s.tagName!=="A")}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var a,s;const c=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(a=c[0])!==null&&a!==void 0?a:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(s=c[1])!==null&&s!==void 0?s:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(d=>d.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",a}var __assign=function(){return __assign=Object.assign||function(s){for(var c,d=1,et=arguments.length;d<et;d++){c=arguments[d];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(s[g]=c[g])}return s},__assign.apply(this,arguments)};function __rest(a,s){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&s.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,d=Object.getOwnPropertySymbols(a);et<d.length;et++)s.indexOf(d[et])<0&&Object.prototype.propertyIsEnumerable.call(a,d[et])&&(c[d[et]]=a[d[et]]);return c}function __spreadArray(a,s,c){if(c||arguments.length===2)for(var d=0,et=s.length,g;d<et;d++)(g||!(d in s))&&(g||(g=Array.prototype.slice.call(s,0,d)),g[d]=s[d]);return a.concat(g||Array.prototype.slice.call(s))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(a,s){return typeof a=="function"?a(s):a&&(a.current=s),a}function useCallbackRef$1(a,s){var c=reactExports.useState(function(){return{value:a,callback:s,facade:{get current(){return c.value},set current(d){var et=c.value;et!==d&&(c.value=d,c.callback(d,et))}}}})[0];return c.callback=s,c.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(a,s){var c=useCallbackRef$1(null,function(d){return a.forEach(function(et){return assignRef(et,d)})});return useIsomorphicLayoutEffect(function(){var d=currentValues.get(c);if(d){var et=new Set(d),g=new Set(a),at=c.current;et.forEach(function($t){g.has($t)||assignRef($t,null)}),g.forEach(function($t){et.has($t)||assignRef($t,at)})}currentValues.set(c,a)},[a]),c}function ItoI(a){return a}function innerCreateMedium(a,s){s===void 0&&(s=ItoI);var c=[],d=!1,et={read:function(){if(d)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return c.length?c[c.length-1]:a},useMedium:function(g){var at=s(g,d);return c.push(at),function(){c=c.filter(function($t){return $t!==at})}},assignSyncMedium:function(g){for(d=!0;c.length;){var at=c;c=[],at.forEach(g)}c={push:function($t){return g($t)},filter:function(){return c}}},assignMedium:function(g){d=!0;var at=[];if(c.length){var $t=c;c=[],$t.forEach(g),at=c}var vt=function(){var pt=at;at=[],pt.forEach(g)},b=function(){return Promise.resolve().then(vt)};b(),c={push:function(pt){at.push(pt),b()},filter:function(pt){return at=at.filter(pt),c}}}};return et}function createSidecarMedium(a){a===void 0&&(a={});var s=innerCreateMedium(null);return s.options=__assign({async:!0,ssr:!1},a),s}var SideCar$2=function(a){var s=a.sideCar,c=__rest(a,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var d=s.read();if(!d)throw new Error("Sidecar medium not found");return reactExports.createElement(d,__assign({},c))};SideCar$2.isSideCarExport=!0;function exportSidecar(a,s){return a.useMedium(s),SideCar$2}var effectCar$1=createSidecarMedium(),nothing$1=function(){},RemoveScroll$1=reactExports.forwardRef(function(a,s){var c=reactExports.useRef(null),d=reactExports.useState({onScrollCapture:nothing$1,onWheelCapture:nothing$1,onTouchMoveCapture:nothing$1}),et=d[0],g=d[1],at=a.forwardProps,$t=a.children,vt=a.className,b=a.removeScrollBar,pt=a.enabled,st=a.shards,wt=a.sideCar,Tt=a.noIsolation,Ct=a.inert,jt=a.allowPinchZoom,Lt=a.as,Ht=Lt===void 0?"div":Lt,Gt=__rest(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),Kt=wt,tr=useMergeRefs([c,s]),rr=__assign(__assign({},Gt),et);return reactExports.createElement(reactExports.Fragment,null,pt&&reactExports.createElement(Kt,{sideCar:effectCar$1,removeScrollBar:b,shards:st,noIsolation:Tt,inert:Ct,setCallbacks:g,allowPinchZoom:!!jt,lockRef:c}),at?reactExports.cloneElement(reactExports.Children.only($t),__assign(__assign({},rr),{ref:tr})):reactExports.createElement(Ht,__assign({},rr,{className:vt,ref:tr}),$t))});RemoveScroll$1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$1.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var s=getNonce();return s&&a.setAttribute("nonce",s),a}function injectStyles(a,s){a.styleSheet?a.styleSheet.cssText=s:a.appendChild(document.createTextNode(s))}function insertStyleTag(a){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(a)}var stylesheetSingleton=function(){var a=0,s=null;return{add:function(c){a==0&&(s=makeStyleTag())&&(injectStyles(s,c),insertStyleTag(s)),a++},remove:function(){a--,!a&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},styleHookSingleton=function(){var a=stylesheetSingleton();return function(s,c){reactExports.useEffect(function(){return a.add(s),function(){a.remove()}},[s&&c])}},styleSingleton=function(){var a=styleHookSingleton(),s=function(c){var d=c.styles,et=c.dynamic;return a(d,et),null};return s},zeroGap={left:0,top:0,right:0,gap:0},parse=function(a){return parseInt(a||"",10)||0},getOffset=function(a){var s=window.getComputedStyle(document.body),c=s[a==="padding"?"paddingLeft":"marginLeft"],d=s[a==="padding"?"paddingTop":"marginTop"],et=s[a==="padding"?"paddingRight":"marginRight"];return[parse(c),parse(d),parse(et)]},getGapWidth=function(a){if(a===void 0&&(a="margin"),typeof window>"u")return zeroGap;var s=getOffset(a),c=document.documentElement.clientWidth,d=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,d-c+s[2]-s[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(a,s,c,d){var et=a.left,g=a.top,at=a.right,$t=a.gap;return c===void 0&&(c="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(d,`;
   padding-right: `).concat($t,"px ").concat(d,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(d,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(d,";"),c==="margin"&&`
    padding-left: `.concat(et,`px;
    padding-top: `).concat(g,`px;
    padding-right: `).concat(at,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat($t,"px ").concat(d,`;
    `),c==="padding"&&"padding-right: ".concat($t,"px ").concat(d,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat($t,"px ").concat(d,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat($t,"px ").concat(d,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(d,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(d,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat($t,`px;
  }
`)},getCurrentUseCounter=function(){var a=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(a)?a:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var a=getCurrentUseCounter()-1;a<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,a.toString())}},[])},RemoveScrollBar=function(a){var s=a.noRelative,c=a.noImportant,d=a.gapMode,et=d===void 0?"margin":d;useLockAttribute();var g=reactExports.useMemo(function(){return getGapWidth(et)},[et]);return reactExports.createElement(Style,{styles:getStyles(g,!s,et,c?"":"!important")})},passiveSupported$1=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){return passiveSupported$1=!0,!0}});window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveSupported$1=!1}var nonPassive$1=passiveSupported$1?{passive:!1}:!1,alwaysContainsScroll$1=function(a){return a.tagName==="TEXTAREA"},elementCanBeScrolled$1=function(a,s){var c=window.getComputedStyle(a);return c[s]!=="hidden"&&!(c.overflowY===c.overflowX&&!alwaysContainsScroll$1(a)&&c[s]==="visible")},elementCouldBeVScrolled$1=function(a){return elementCanBeScrolled$1(a,"overflowY")},elementCouldBeHScrolled$1=function(a){return elementCanBeScrolled$1(a,"overflowX")},locationCouldBeScrolled$1=function(a,s){var c=s;do{typeof ShadowRoot<"u"&&c instanceof ShadowRoot&&(c=c.host);var d=elementCouldBeScrolled$1(a,c);if(d){var et=getScrollVariables$1(a,c),g=et[1],at=et[2];if(g>at)return!0}c=c.parentNode}while(c&&c!==document.body);return!1},getVScrollVariables$1=function(a){var s=a.scrollTop,c=a.scrollHeight,d=a.clientHeight;return[s,c,d]},getHScrollVariables$1=function(a){var s=a.scrollLeft,c=a.scrollWidth,d=a.clientWidth;return[s,c,d]},elementCouldBeScrolled$1=function(a,s){return a==="v"?elementCouldBeVScrolled$1(s):elementCouldBeHScrolled$1(s)},getScrollVariables$1=function(a,s){return a==="v"?getVScrollVariables$1(s):getHScrollVariables$1(s)},getDirectionFactor$1=function(a,s){return a==="h"&&s==="rtl"?-1:1},handleScroll$1=function(a,s,c,d,et){var g=getDirectionFactor$1(a,window.getComputedStyle(s).direction),at=g*d,$t=c.target,vt=s.contains($t),b=!1,pt=at>0,st=0,wt=0;do{var Tt=getScrollVariables$1(a,$t),Ct=Tt[0],jt=Tt[1],Lt=Tt[2],Ht=jt-Lt-g*Ct;(Ct||Ht)&&elementCouldBeScrolled$1(a,$t)&&(st+=Ht,wt+=Ct),$t=$t.parentNode}while(!vt&&$t!==document.body||vt&&(s.contains($t)||s===$t));return(pt&&(st===0||!et)||!pt&&(wt===0||!et))&&(b=!0),b},getTouchXY$1=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},getDeltaXY$1=function(a){return[a.deltaX,a.deltaY]},extractRef$1=function(a){return a&&"current"in a?a.current:a},deltaCompare$1=function(a,s){return a[0]===s[0]&&a[1]===s[1]},generateStyle$1=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},idCounter$1=0,lockStack$1=[];function RemoveScrollSideCar$1(a){var s=reactExports.useRef([]),c=reactExports.useRef([0,0]),d=reactExports.useRef(),et=reactExports.useState(idCounter$1++)[0],g=reactExports.useState(function(){return styleSingleton()})[0],at=reactExports.useRef(a);reactExports.useEffect(function(){at.current=a},[a]),reactExports.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(et));var jt=__spreadArray([a.lockRef.current],(a.shards||[]).map(extractRef$1),!0).filter(Boolean);return jt.forEach(function(Lt){return Lt.classList.add("allow-interactivity-".concat(et))}),function(){document.body.classList.remove("block-interactivity-".concat(et)),jt.forEach(function(Lt){return Lt.classList.remove("allow-interactivity-".concat(et))})}}},[a.inert,a.lockRef.current,a.shards]);var $t=reactExports.useCallback(function(jt,Lt){if("touches"in jt&&jt.touches.length===2)return!at.current.allowPinchZoom;var Ht=getTouchXY$1(jt),Gt=c.current,Kt="deltaX"in jt?jt.deltaX:Gt[0]-Ht[0],tr="deltaY"in jt?jt.deltaY:Gt[1]-Ht[1],rr,Lr=jt.target,jr=Math.abs(Kt)>Math.abs(tr)?"h":"v";if("touches"in jt&&jr==="h"&&Lr.type==="range")return!1;var Yr=locationCouldBeScrolled$1(jr,Lr);if(!Yr)return!0;if(Yr?rr=jr:(rr=jr==="v"?"h":"v",Yr=locationCouldBeScrolled$1(jr,Lr)),!Yr)return!1;if(!d.current&&"changedTouches"in jt&&(Kt||tr)&&(d.current=rr),!rr)return!0;var An=d.current||rr;return handleScroll$1(An,Lt,jt,An==="h"?Kt:tr,!0)},[]),vt=reactExports.useCallback(function(jt){var Lt=jt;if(!(!lockStack$1.length||lockStack$1[lockStack$1.length-1]!==g)){var Ht="deltaY"in Lt?getDeltaXY$1(Lt):getTouchXY$1(Lt),Gt=s.current.filter(function(rr){return rr.name===Lt.type&&rr.target===Lt.target&&deltaCompare$1(rr.delta,Ht)})[0];if(Gt&&Gt.should){Lt.cancelable&&Lt.preventDefault();return}if(!Gt){var Kt=(at.current.shards||[]).map(extractRef$1).filter(Boolean).filter(function(rr){return rr.contains(Lt.target)}),tr=Kt.length>0?$t(Lt,Kt[0]):!at.current.noIsolation;tr&&Lt.cancelable&&Lt.preventDefault()}}},[]),b=reactExports.useCallback(function(jt,Lt,Ht,Gt){var Kt={name:jt,delta:Lt,target:Ht,should:Gt};s.current.push(Kt),setTimeout(function(){s.current=s.current.filter(function(tr){return tr!==Kt})},1)},[]),pt=reactExports.useCallback(function(jt){c.current=getTouchXY$1(jt),d.current=void 0},[]),st=reactExports.useCallback(function(jt){b(jt.type,getDeltaXY$1(jt),jt.target,$t(jt,a.lockRef.current))},[]),wt=reactExports.useCallback(function(jt){b(jt.type,getTouchXY$1(jt),jt.target,$t(jt,a.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$1.push(g),a.setCallbacks({onScrollCapture:st,onWheelCapture:st,onTouchMoveCapture:wt}),document.addEventListener("wheel",vt,nonPassive$1),document.addEventListener("touchmove",vt,nonPassive$1),document.addEventListener("touchstart",pt,nonPassive$1),function(){lockStack$1=lockStack$1.filter(function(jt){return jt!==g}),document.removeEventListener("wheel",vt,nonPassive$1),document.removeEventListener("touchmove",vt,nonPassive$1),document.removeEventListener("touchstart",pt,nonPassive$1)}},[]);var Tt=a.removeScrollBar,Ct=a.inert;return reactExports.createElement(reactExports.Fragment,null,Ct?reactExports.createElement(g,{styles:generateStyle$1(et)}):null,Tt?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar$1=exportSidecar(effectCar$1,RemoveScrollSideCar$1);var ReactRemoveScroll$1=reactExports.forwardRef(function(a,s){return reactExports.createElement(RemoveScroll$1,__assign({},a,{ref:s,sideCar:SideCar$1}))});ReactRemoveScroll$1.classNames=RemoveScroll$1.classNames;var getDefaultParent=function(a){if(typeof document>"u")return null;var s=Array.isArray(a)?a[0]:a;return s.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(a){return a&&(a.host||unwrapHost(a.parentNode))},correctTargets=function(a,s){return s.map(function(c){if(a.contains(c))return c;var d=unwrapHost(c);return d&&a.contains(d)?d:(console.error("aria-hidden",c,"in not contained inside",a,". Doing nothing"),null)}).filter(function(c){return!!c})},applyAttributeToOthers=function(a,s,c,d){var et=correctTargets(s,Array.isArray(a)?a:[a]);markerMap[c]||(markerMap[c]=new WeakMap);var g=markerMap[c],at=[],$t=new Set,vt=new Set(et),b=function(st){!st||$t.has(st)||($t.add(st),b(st.parentNode))};et.forEach(b);var pt=function(st){!st||vt.has(st)||Array.prototype.forEach.call(st.children,function(wt){if($t.has(wt))pt(wt);else try{var Tt=wt.getAttribute(d),Ct=Tt!==null&&Tt!=="false",jt=(counterMap.get(wt)||0)+1,Lt=(g.get(wt)||0)+1;counterMap.set(wt,jt),g.set(wt,Lt),at.push(wt),jt===1&&Ct&&uncontrolledNodes.set(wt,!0),Lt===1&&wt.setAttribute(c,"true"),Ct||wt.setAttribute(d,"true")}catch(Ht){console.error("aria-hidden: cannot operate on ",wt,Ht)}})};return pt(s),$t.clear(),lockCount++,function(){at.forEach(function(st){var wt=counterMap.get(st)-1,Tt=g.get(st)-1;counterMap.set(st,wt),g.set(st,Tt),wt||(uncontrolledNodes.has(st)||st.removeAttribute(d),uncontrolledNodes.delete(st)),Tt||st.removeAttribute(c)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(a,s,c){c===void 0&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),et=getDefaultParent(a);return et?(d.push.apply(d,Array.from(et.querySelectorAll("[aria-live]"))),applyAttributeToOthers(d,et,c,"aria-hidden")):function(){return null}};const $5d3850c4d0b4e6c7$var$DIALOG_NAME="Dialog",[$5d3850c4d0b4e6c7$var$createDialogContext,$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($5d3850c4d0b4e6c7$var$DIALOG_NAME),[$5d3850c4d0b4e6c7$var$DialogProvider,$5d3850c4d0b4e6c7$var$useDialogContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$DIALOG_NAME),$5d3850c4d0b4e6c7$export$3ddf2d174ce01153=a=>{const{__scopeDialog:s,children:c,open:d,defaultOpen:et,onOpenChange:g,modal:at=!0}=a,$t=reactExports.useRef(null),vt=reactExports.useRef(null),[b=!1,pt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:d,defaultProp:et,onChange:g});return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogProvider,{scope:s,triggerRef:$t,contentRef:vt,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),titleId:$1746a345f3d73bb7$export$f680877a34711e37(),descriptionId:$1746a345f3d73bb7$export$f680877a34711e37(),open:b,onOpenChange:pt,onOpenToggle:reactExports.useCallback(()=>pt(st=>!st),[pt]),modal:at},c)},$5d3850c4d0b4e6c7$var$TRIGGER_NAME="DialogTrigger",$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88=reactExports.forwardRef((a,s)=>{const{__scopeDialog:c,...d}=a,et=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TRIGGER_NAME,c),g=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,et.triggerRef);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-haspopup":"dialog","aria-expanded":et.open,"aria-controls":et.contentId,"data-state":$5d3850c4d0b4e6c7$var$getState(et.open)},d,{ref:g,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onClick,et.onOpenToggle)}))}),$5d3850c4d0b4e6c7$var$PORTAL_NAME="DialogPortal",[$5d3850c4d0b4e6c7$var$PortalProvider,$5d3850c4d0b4e6c7$var$usePortalContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,{forceMount:void 0}),$5d3850c4d0b4e6c7$export$dad7c95542bacce0=a=>{const{__scopeDialog:s,forceMount:c,children:d,container:et}=a,g=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,s);return reactExports.createElement($5d3850c4d0b4e6c7$var$PortalProvider,{scope:s,forceMount:c},reactExports.Children.map(d,at=>reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:c||g.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:et},at))))},$5d3850c4d0b4e6c7$var$OVERLAY_NAME="DialogOverlay",$5d3850c4d0b4e6c7$export$bd1d06c79be19e17=reactExports.forwardRef((a,s)=>{const c=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,a.__scopeDialog),{forceMount:d=c.forceMount,...et}=a,g=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,a.__scopeDialog);return g.modal?reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:d||g.open},reactExports.createElement($5d3850c4d0b4e6c7$var$DialogOverlayImpl,_extends$1({},et,{ref:s}))):null}),$5d3850c4d0b4e6c7$var$DialogOverlayImpl=reactExports.forwardRef((a,s)=>{const{__scopeDialog:c,...d}=a,et=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,c);return reactExports.createElement(ReactRemoveScroll$1,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0,shards:[et.contentRef]},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$5d3850c4d0b4e6c7$var$getState(et.open)},d,{ref:s,style:{pointerEvents:"auto",...d.style}})))}),$5d3850c4d0b4e6c7$var$CONTENT_NAME="DialogContent",$5d3850c4d0b4e6c7$export$b6d9565de1e068cf=reactExports.forwardRef((a,s)=>{const c=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,a.__scopeDialog),{forceMount:d=c.forceMount,...et}=a,g=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,a.__scopeDialog);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:d||g.open},g.modal?reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentModal,_extends$1({},et,{ref:s})):reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentNonModal,_extends$1({},et,{ref:s})))}),$5d3850c4d0b4e6c7$var$DialogContentModal=reactExports.forwardRef((a,s)=>{const c=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,a.__scopeDialog),d=reactExports.useRef(null),et=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,c.contentRef,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return hideOthers(g)},[]),reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends$1({},a,{ref:et,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onCloseAutoFocus,g=>{var at;g.preventDefault(),(at=c.triggerRef.current)===null||at===void 0||at.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDownOutside,g=>{const at=g.detail.originalEvent,$t=at.button===0&&at.ctrlKey===!0;(at.button===2||$t)&&g.preventDefault()}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocusOutside,g=>g.preventDefault())}))}),$5d3850c4d0b4e6c7$var$DialogContentNonModal=reactExports.forwardRef((a,s)=>{const c=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,a.__scopeDialog),d=reactExports.useRef(!1),et=reactExports.useRef(!1);return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends$1({},a,{ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var at;if((at=a.onCloseAutoFocus)===null||at===void 0||at.call(a,g),!g.defaultPrevented){var $t;d.current||($t=c.triggerRef.current)===null||$t===void 0||$t.focus(),g.preventDefault()}d.current=!1,et.current=!1},onInteractOutside:g=>{var at,$t;(at=a.onInteractOutside)===null||at===void 0||at.call(a,g),g.defaultPrevented||(d.current=!0,g.detail.originalEvent.type==="pointerdown"&&(et.current=!0));const vt=g.target;(($t=c.triggerRef.current)===null||$t===void 0?void 0:$t.contains(vt))&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&et.current&&g.preventDefault()}}))}),$5d3850c4d0b4e6c7$var$DialogContentImpl=reactExports.forwardRef((a,s)=>{const{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:et,onCloseAutoFocus:g,...at}=a,$t=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,c),vt=reactExports.useRef(null),b=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,vt);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:et,onUnmountAutoFocus:g},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,_extends$1({role:"dialog",id:$t.contentId,"aria-describedby":$t.descriptionId,"aria-labelledby":$t.titleId,"data-state":$5d3850c4d0b4e6c7$var$getState($t.open)},at,{ref:b,onDismiss:()=>$t.onOpenChange(!1)}))),!1)}),$5d3850c4d0b4e6c7$var$TITLE_NAME="DialogTitle",$5d3850c4d0b4e6c7$export$16f7638e4a34b909=reactExports.forwardRef((a,s)=>{const{__scopeDialog:c,...d}=a,et=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TITLE_NAME,c);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.h2,_extends$1({id:et.titleId},d,{ref:s}))}),$5d3850c4d0b4e6c7$var$DESCRIPTION_NAME="DialogDescription",$5d3850c4d0b4e6c7$export$94e94c2ec2c954d5=reactExports.forwardRef((a,s)=>{const{__scopeDialog:c,...d}=a,et=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$DESCRIPTION_NAME,c);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.p,_extends$1({id:et.descriptionId},d,{ref:s}))}),$5d3850c4d0b4e6c7$var$CLOSE_NAME="DialogClose",$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac=reactExports.forwardRef((a,s)=>{const{__scopeDialog:c,...d}=a,et=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CLOSE_NAME,c);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button"},d,{ref:s,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onClick,()=>et.onOpenChange(!1))}))});function $5d3850c4d0b4e6c7$var$getState(a){return a?"open":"closed"}const $5d3850c4d0b4e6c7$var$TITLE_WARNING_NAME="DialogTitleWarning",[$5d3850c4d0b4e6c7$export$69b62a49393917d6,$5d3850c4d0b4e6c7$var$useWarningContext]=$c512c27ab02ef895$export$fd42f52fd3ae1109($5d3850c4d0b4e6c7$var$TITLE_WARNING_NAME,{contentName:$5d3850c4d0b4e6c7$var$CONTENT_NAME,titleName:$5d3850c4d0b4e6c7$var$TITLE_NAME,docsSlug:"dialog"}),$5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9=$5d3850c4d0b4e6c7$export$3ddf2d174ce01153,$5d3850c4d0b4e6c7$export$41fb9f06171c75f4=$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88,$5d3850c4d0b4e6c7$export$602eac185826482c=$5d3850c4d0b4e6c7$export$dad7c95542bacce0,$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff=$5d3850c4d0b4e6c7$export$bd1d06c79be19e17,$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2=$5d3850c4d0b4e6c7$export$b6d9565de1e068cf,$5d3850c4d0b4e6c7$export$f99233281efd08a0=$5d3850c4d0b4e6c7$export$16f7638e4a34b909,$5d3850c4d0b4e6c7$export$393edc798c47379d=$5d3850c4d0b4e6c7$export$94e94c2ec2c954d5,$5d3850c4d0b4e6c7$export$f39c2d165cd861fe=$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac,Dialog=$5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,DialogTrigger=$5d3850c4d0b4e6c7$export$41fb9f06171c75f4,DialogPortal=$5d3850c4d0b4e6c7$export$602eac185826482c,DialogOverlay=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{ref:c,className:cn$1("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s}));DialogOverlay.displayName=$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff.displayName;const DialogContent=reactExports.forwardRef(({className:a,children:s,...c},d)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{ref:d,className:cn$1("fixed left-[50%] top-[50%] z-50 flex flex-col w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a,"outline-none"),onCloseAutoFocus:et=>et.preventDefault(),...c,children:[s,jsxRuntimeExports.jsxs($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(Cross2Icon,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2.displayName;const DialogHeader=({className:a,...s})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-1.5 text-center sm:text-left",a),...s});DialogHeader.displayName="DialogHeader";const DialogTitle=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f99233281efd08a0,{ref:c,className:cn$1("text-2xl font-semibold leading-none tracking-tight",a),...s}));DialogTitle.displayName=$5d3850c4d0b4e6c7$export$f99233281efd08a0.displayName;const DialogDescription=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$393edc798c47379d,{ref:c,className:cn$1("text-sm text-muted-foreground",a),...s}));DialogDescription.displayName=$5d3850c4d0b4e6c7$export$393edc798c47379d.displayName;function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_extends.apply(this,arguments)}var reservedModifierKeywords=["shift","alt","meta","mod","ctrl"],mappedKeys={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function mapKey(a){return(mappedKeys[a]||a).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function isHotkeyModifier(a){return reservedModifierKeywords.includes(a)}function parseKeysHookInput(a,s){return s===void 0&&(s=","),a.split(s)}function parseHotkey(a,s,c){s===void 0&&(s="+");var d=a.toLocaleLowerCase().split(s).map(function(at){return mapKey(at)}),et={alt:d.includes("alt"),ctrl:d.includes("ctrl")||d.includes("control"),shift:d.includes("shift"),meta:d.includes("meta"),mod:d.includes("mod")},g=d.filter(function(at){return!reservedModifierKeywords.includes(at)});return _extends({},et,{keys:g,description:c})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(a){a.key!==void 0&&pushToCurrentlyPressedKeys([mapKey(a.key),mapKey(a.code)])}),document.addEventListener("keyup",function(a){a.key!==void 0&&removeFromCurrentlyPressedKeys([mapKey(a.key),mapKey(a.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){currentlyPressedKeys.clear()})})();var currentlyPressedKeys=new Set;function isReadonlyArray(a){return Array.isArray(a)}function isHotkeyPressed(a,s){s===void 0&&(s=",");var c=isReadonlyArray(a)?a:a.split(s);return c.every(function(d){return currentlyPressedKeys.has(d.trim().toLowerCase())})}function pushToCurrentlyPressedKeys(a){var s=Array.isArray(a)?a:[a];currentlyPressedKeys.has("meta")&&currentlyPressedKeys.forEach(function(c){return!isHotkeyModifier(c)&&currentlyPressedKeys.delete(c.toLowerCase())}),s.forEach(function(c){return currentlyPressedKeys.add(c.toLowerCase())})}function removeFromCurrentlyPressedKeys(a){var s=Array.isArray(a)?a:[a];a==="meta"?currentlyPressedKeys.clear():s.forEach(function(c){return currentlyPressedKeys.delete(c.toLowerCase())})}function maybePreventDefault(a,s,c){(typeof c=="function"&&c(a,s)||c===!0)&&a.preventDefault()}function isHotkeyEnabled(a,s,c){return typeof c=="function"?c(a,s):c===!0||c===void 0}function isKeyboardEventTriggeredByInput(a){return isHotkeyEnabledOnTag(a,["input","textarea","select"])}function isHotkeyEnabledOnTag(a,s){var c=a.target;s===void 0&&(s=!1);var d=c&&c.tagName;return isReadonlyArray(s)?!!(d&&s&&s.some(function(et){return et.toLowerCase()===d.toLowerCase()})):!!(d&&s&&s===!0)}function isScopeActive(a,s){return a.length===0&&s?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):s?a.some(function(c){return s.includes(c)})||a.includes("*"):!0}var isHotkeyMatchingKeyboardEvent=function(s,c,d){d===void 0&&(d=!1);var et=c.alt,g=c.meta,at=c.mod,$t=c.shift,vt=c.ctrl,b=c.keys,pt=s.key,st=s.code,wt=s.ctrlKey,Tt=s.metaKey,Ct=s.shiftKey,jt=s.altKey,Lt=mapKey(st),Ht=pt.toLowerCase();if(!(b!=null&&b.includes(Lt))&&!(b!=null&&b.includes(Ht))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(Lt))return!1;if(!d){if(et===!jt&&Ht!=="alt"||$t===!Ct&&Ht!=="shift")return!1;if(at){if(!Tt&&!wt)return!1}else if(g===!Tt&&Ht!=="meta"&&Ht!=="os"||vt===!wt&&Ht!=="ctrl"&&Ht!=="control")return!1}return b&&b.length===1&&(b.includes(Ht)||b.includes(Lt))?!0:b?isHotkeyPressed(b):!b},BoundHotkeysProxyProvider=reactExports.createContext(void 0),useBoundHotkeysProxy=function(){return reactExports.useContext(BoundHotkeysProxyProvider)};function deepEqual$1(a,s){return a&&s&&typeof a=="object"&&typeof s=="object"?Object.keys(a).length===Object.keys(s).length&&Object.keys(a).reduce(function(c,d){return c&&deepEqual$1(a[d],s[d])},!0):a===s}var HotkeysContext=reactExports.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),useHotkeysContext=function(){return reactExports.useContext(HotkeysContext)};function useDeepEqualMemo(a){var s=reactExports.useRef(void 0);return deepEqual$1(s.current,a)||(s.current=a),s.current}var stopPropagation=function(s){s.stopPropagation(),s.preventDefault(),s.stopImmediatePropagation()},useSafeLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useHotkeys(a,s,c,d){var et=reactExports.useRef(null),g=reactExports.useRef(!1),at=c instanceof Array?d instanceof Array?void 0:d:c,$t=isReadonlyArray(a)?a.join(at==null?void 0:at.splitKey):a,vt=c instanceof Array?c:d instanceof Array?d:void 0,b=reactExports.useCallback(s,vt??[]),pt=reactExports.useRef(b);vt?pt.current=b:pt.current=s;var st=useDeepEqualMemo(at),wt=useHotkeysContext(),Tt=wt.enabledScopes,Ct=useBoundHotkeysProxy();return useSafeLayoutEffect(function(){if(!((st==null?void 0:st.enabled)===!1||!isScopeActive(Tt,st==null?void 0:st.scopes))){var jt=function(tr,rr){var Lr;if(rr===void 0&&(rr=!1),!(isKeyboardEventTriggeredByInput(tr)&&!isHotkeyEnabledOnTag(tr,st==null?void 0:st.enableOnFormTags))){if(et.current!==null){var jr=et.current.getRootNode();if((jr instanceof Document||jr instanceof ShadowRoot)&&jr.activeElement!==et.current&&!et.current.contains(jr.activeElement)){stopPropagation(tr);return}}(Lr=tr.target)!=null&&Lr.isContentEditable&&!(st!=null&&st.enableOnContentEditable)||parseKeysHookInput($t,st==null?void 0:st.splitKey).forEach(function(Yr){var An,No=parseHotkey(Yr,st==null?void 0:st.combinationKey);if(isHotkeyMatchingKeyboardEvent(tr,No,st==null?void 0:st.ignoreModifiers)||(An=No.keys)!=null&&An.includes("*")){if(st!=null&&st.ignoreEventWhen!=null&&st.ignoreEventWhen(tr)||rr&&g.current)return;if(maybePreventDefault(tr,No,st==null?void 0:st.preventDefault),!isHotkeyEnabled(tr,No,st==null?void 0:st.enabled)){stopPropagation(tr);return}pt.current(tr,No),rr||(g.current=!0)}})}},Lt=function(tr){tr.key!==void 0&&(pushToCurrentlyPressedKeys(mapKey(tr.code)),((st==null?void 0:st.keydown)===void 0&&(st==null?void 0:st.keyup)!==!0||st!=null&&st.keydown)&&jt(tr))},Ht=function(tr){tr.key!==void 0&&(removeFromCurrentlyPressedKeys(mapKey(tr.code)),g.current=!1,st!=null&&st.keyup&&jt(tr,!0))},Gt=et.current||(at==null?void 0:at.document)||document;return Gt.addEventListener("keyup",Ht),Gt.addEventListener("keydown",Lt),Ct&&parseKeysHookInput($t,st==null?void 0:st.splitKey).forEach(function(Kt){return Ct.addHotkey(parseHotkey(Kt,st==null?void 0:st.combinationKey,st==null?void 0:st.description))}),function(){Gt.removeEventListener("keyup",Ht),Gt.removeEventListener("keydown",Lt),Ct&&parseKeysHookInput($t,st==null?void 0:st.splitKey).forEach(function(Kt){return Ct.removeHotkey(parseHotkey(Kt,st==null?void 0:st.combinationKey,st==null?void 0:st.description))})}}},[$t,st,Tt]),et}const useHotKey=(a,s,c)=>{const d=useStore(g=>g.disableShortCuts);return useHotkeys(a,s,{enabled:!d},c)};function warn(){if(console&&console.warn){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];typeof s[0]=="string"&&(s[0]=`react-i18next:: ${s[0]}`),console.warn(...s)}}const alreadyWarned={};function warnOnce(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];typeof s[0]=="string"&&alreadyWarned[s[0]]||(typeof s[0]=="string"&&(alreadyWarned[s[0]]=new Date),warn(...s))}const loadedClb=(a,s)=>()=>{if(a.isInitialized)s();else{const c=()=>{setTimeout(()=>{a.off("initialized",c)},0),s()};a.on("initialized",c)}};function loadNamespaces(a,s,c){a.loadNamespaces(s,loadedClb(a,c))}function loadLanguages(a,s,c,d){typeof c=="string"&&(c=[c]),c.forEach(et=>{a.options.ns.indexOf(et)<0&&a.options.ns.push(et)}),a.loadLanguages(s,loadedClb(a,d))}function oldI18nextHasLoadedNamespace(a,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const d=s.languages[0],et=s.options?s.options.fallbackLng:!1,g=s.languages[s.languages.length-1];if(d.toLowerCase()==="cimode")return!0;const at=($t,vt)=>{const b=s.services.backendConnector.state[`${$t}|${vt}`];return b===-1||b===2};return c.bindI18n&&c.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!at(s.isLanguageChangingTo,a)?!1:!!(s.hasResourceBundle(d,a)||!s.services.backendConnector.backend||s.options.resources&&!s.options.partialBundledLanguages||at(d,a)&&(!et||at(g,a)))}function hasLoadedNamespace(a,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!s.languages||!s.languages.length?(warnOnce("i18n.languages were undefined or empty",s.languages),!0):s.options.ignoreJSONStructure!==void 0?s.hasLoadedNamespace(a,{lng:c.lng,precheck:(et,g)=>{if(c.bindI18n&&c.bindI18n.indexOf("languageChanging")>-1&&et.services.backendConnector.backend&&et.isLanguageChangingTo&&!g(et.isLanguageChangingTo,a))return!1}}):oldI18nextHasLoadedNamespace(a,s,c)}const matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=a=>htmlEntities[a],unescape$1=a=>a.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions$1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};function setDefaults(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};defaultOptions$1={...defaultOptions$1,...a}}function getDefaults$1(){return defaultOptions$1}let i18nInstance;function setI18n(a){i18nInstance=a}function getI18n(){return i18nInstance}const initReactI18next={type:"3rdParty",init(a){setDefaults(a.options.react),setI18n(a)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(c=>{this.usedNamespaces[c]||(this.usedNamespaces[c]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(a,s)=>{const c=reactExports.useRef();return reactExports.useEffect(()=>{c.current=a},[a,s]),c.current};function alwaysNewT(a,s,c,d){return a.getFixedT(s,c,d)}function useMemoizedT(a,s,c,d){return reactExports.useCallback(alwaysNewT(a,s,c,d),[a,s,c,d])}function useTranslation(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:c}=s,{i18n:d,defaultNS:et}=reactExports.useContext(I18nContext)||{},g=c||d||getI18n();if(g&&!g.reportNamespaces&&(g.reportNamespaces=new ReportNamespaces),!g){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const tr=(Lr,jr)=>typeof jr=="string"?jr:jr&&typeof jr=="object"&&typeof jr.defaultValue=="string"?jr.defaultValue:Array.isArray(Lr)?Lr[Lr.length-1]:Lr,rr=[tr,{},!1];return rr.t=tr,rr.i18n={},rr.ready=!1,rr}g.options.react&&g.options.react.wait!==void 0&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const at={...getDefaults$1(),...g.options.react,...s},{useSuspense:$t,keyPrefix:vt}=at;let b=et||g.options&&g.options.defaultNS;b=typeof b=="string"?[b]:b||["translation"],g.reportNamespaces.addUsedNamespaces&&g.reportNamespaces.addUsedNamespaces(b);const pt=(g.isInitialized||g.initializedStoreOnce)&&b.every(tr=>hasLoadedNamespace(tr,g,at)),st=useMemoizedT(g,s.lng||null,at.nsMode==="fallback"?b:b[0],vt),wt=()=>st,Tt=()=>alwaysNewT(g,s.lng||null,at.nsMode==="fallback"?b:b[0],vt),[Ct,jt]=reactExports.useState(wt);let Lt=b.join();s.lng&&(Lt=`${s.lng}${Lt}`);const Ht=usePrevious(Lt),Gt=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:tr,bindI18nStore:rr}=at;Gt.current=!0,!pt&&!$t&&(s.lng?loadLanguages(g,s.lng,b,()=>{Gt.current&&jt(Tt)}):loadNamespaces(g,b,()=>{Gt.current&&jt(Tt)})),pt&&Ht&&Ht!==Lt&&Gt.current&&jt(Tt);function Lr(){Gt.current&&jt(Tt)}return tr&&g&&g.on(tr,Lr),rr&&g&&g.store.on(rr,Lr),()=>{Gt.current=!1,tr&&g&&tr.split(" ").forEach(jr=>g.off(jr,Lr)),rr&&g&&rr.split(" ").forEach(jr=>g.store.off(jr,Lr))}},[g,Lt]),reactExports.useEffect(()=>{Gt.current&&pt&&jt(wt)},[g,vt,pt]);const Kt=[Ct,g,pt];if(Kt.t=Ct,Kt.i18n=g,Kt.ready=pt,pt||!pt&&!$t)return Kt;throw new Promise(tr=>{s.lng?loadLanguages(g,s.lng,b,()=>tr()):loadNamespaces(g,b,()=>tr())})}function ShortCut(a){const{content:s,keys:c}=a;return jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("div",{children:s}),jsxRuntimeExports.jsx("div",{className:"flex gap-[8px]",children:c.map(d=>jsxRuntimeExports.jsx("div",{className:"border px-2 py-1 rounded-lg",children:d},d))})]})}const isMac=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},CmdOrCtrl=()=>isMac()?"Cmd":"Ctrl";function Shortcuts(){const[a,s]=useToggle$1(!1),{t:c}=useTranslation();return useHotKey("h",()=>{s()}),jsxRuntimeExports.jsxs(Dialog,{open:a,onOpenChange:s,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(IconButton,{tooltip:"Hotkeys",children:jsxRuntimeExports.jsx(Keyboard,{})})}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Hotkeys"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-col pt-4",children:[jsxRuntimeExports.jsx(ShortCut,{content:c("Pan"),keys:["Space + Drag"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Reset Zoom/Pan"),keys:["Esc"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Decrease Brush Size"),keys:["["]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Increase Brush Size"),keys:["]"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("View Original Image"),keys:["Hold Tab"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Undo"),keys:[CmdOrCtrl(),"Z"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Redo"),keys:[CmdOrCtrl(),"Shift","Z"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Copy Result"),keys:[CmdOrCtrl(),"C"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Paste Image"),keys:[CmdOrCtrl(),"V"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Trigger Manually Inpainting"),keys:["Shift","R"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Toggle Hotkeys Dialog"),keys:["H"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Toggle Settings Dialog"),keys:["S"]}),jsxRuntimeExports.jsx(ShortCut,{content:c("Toggle File Manager"),keys:["F"]})]})]})})]})}var isCheckBoxInput=a=>a.type==="checkbox",isDateObject=a=>a instanceof Date,isNullOrUndefined=a=>a==null;const isObjectType=a=>typeof a=="object";var isObject=a=>!isNullOrUndefined(a)&&!Array.isArray(a)&&isObjectType(a)&&!isDateObject(a),getEventValue=a=>isObject(a)&&a.target?isCheckBoxInput(a.target)?a.target.checked:a.target.value:a,getNodeParentName=a=>a.substring(0,a.search(/\.\d+(\.|$)/))||a,isNameInFieldArray=(a,s)=>a.has(getNodeParentName(s)),isPlainObject=a=>{const s=a.constructor&&a.constructor.prototype;return isObject(s)&&s.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(a){let s;const c=Array.isArray(a);if(a instanceof Date)s=new Date(a);else if(a instanceof Set)s=new Set(a);else if(!(isWeb&&(a instanceof Blob||a instanceof FileList))&&(c||isObject(a)))if(s=c?[]:{},!c&&!isPlainObject(a))s=a;else for(const d in a)a.hasOwnProperty(d)&&(s[d]=cloneObject(a[d]));else return a;return s}var compact=a=>Array.isArray(a)?a.filter(Boolean):[],isUndefined=a=>a===void 0,get$1=(a,s,c)=>{if(!s||!isObject(a))return c;const d=compact(s.split(/[,[\].]+?/)).reduce((et,g)=>isNullOrUndefined(et)?et:et[g],a);return isUndefined(d)||d===a?isUndefined(a[s])?c:a[s]:d},isBoolean=a=>typeof a=="boolean";const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext),FormProvider=a=>{const{children:s,...c}=a;return React.createElement(HookFormContext.Provider,{value:c},s)};var getProxyFormState=(a,s,c,d=!0)=>{const et={defaultValues:s._defaultValues};for(const g in a)Object.defineProperty(et,g,{get:()=>{const at=g;return s._proxyFormState[at]!==VALIDATION_MODE.all&&(s._proxyFormState[at]=!d||VALIDATION_MODE.all),c&&(c[at]=!0),a[at]}});return et},isEmptyObject=a=>isObject(a)&&!Object.keys(a).length,shouldRenderFormState=(a,s,c,d)=>{c(a);const{name:et,...g}=a;return isEmptyObject(g)||Object.keys(g).length>=Object.keys(s).length||Object.keys(g).find(at=>s[at]===(!d||VALIDATION_MODE.all))},convertToArrayPayload=a=>Array.isArray(a)?a:[a],shouldSubscribeByName=(a,s,c)=>!a||!s||a===s||convertToArrayPayload(a).some(d=>d&&(c?d===s:d.startsWith(s)||s.startsWith(d)));function useSubscribe(a){const s=React.useRef(a);s.current=a,React.useEffect(()=>{const c=!a.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{c&&c.unsubscribe()}},[a.disabled])}function useFormState(a){const s=useFormContext(),{control:c=s.control,disabled:d,name:et,exact:g}=a||{},[at,$t]=React.useState(c._formState),vt=React.useRef(!0),b=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),pt=React.useRef(et);return pt.current=et,useSubscribe({disabled:d,next:st=>vt.current&&shouldSubscribeByName(pt.current,st.name,g)&&shouldRenderFormState(st,b.current,c._updateFormState)&&$t({...c._formState,...st}),subject:c._subjects.state}),React.useEffect(()=>(vt.current=!0,b.current.isValid&&c._updateValid(!0),()=>{vt.current=!1}),[c]),getProxyFormState(at,c,b.current,!1)}var isString=a=>typeof a=="string",generateWatchOutput=(a,s,c,d,et)=>isString(a)?(d&&s.watch.add(a),get$1(c,a,et)):Array.isArray(a)?a.map(g=>(d&&s.watch.add(g),get$1(c,g))):(d&&(s.watchAll=!0),c);function useWatch(a){const s=useFormContext(),{control:c=s.control,name:d,defaultValue:et,disabled:g,exact:at}=a||{},$t=React.useRef(d);$t.current=d,useSubscribe({disabled:g,subject:c._subjects.values,next:pt=>{shouldSubscribeByName($t.current,pt.name,at)&&b(cloneObject(generateWatchOutput($t.current,c._names,pt.values||c._formValues,!1,et)))}});const[vt,b]=React.useState(c._getWatch(d,et));return React.useEffect(()=>c._removeUnmounted()),vt}var isKey=a=>/^\w*$/.test(a),stringToPath=a=>compact(a.replace(/["|']|\]/g,"").split(/\.|\[/)),set=(a,s,c)=>{let d=-1;const et=isKey(s)?[s]:stringToPath(s),g=et.length,at=g-1;for(;++d<g;){const $t=et[d];let vt=c;if(d!==at){const b=a[$t];vt=isObject(b)||Array.isArray(b)?b:isNaN(+et[d+1])?{}:[]}a[$t]=vt,a=a[$t]}return a};function useController(a){const s=useFormContext(),{name:c,disabled:d,control:et=s.control,shouldUnregister:g}=a,at=isNameInFieldArray(et._names.array,c),$t=useWatch({control:et,name:c,defaultValue:get$1(et._formValues,c,get$1(et._defaultValues,c,a.defaultValue)),exact:!0}),vt=useFormState({control:et,name:c}),b=React.useRef(et.register(c,{...a.rules,value:$t,...isBoolean(a.disabled)?{disabled:a.disabled}:{}}));return React.useEffect(()=>{const pt=et._options.shouldUnregister||g,st=(wt,Tt)=>{const Ct=get$1(et._fields,wt);Ct&&(Ct._f.mount=Tt)};if(st(c,!0),pt){const wt=cloneObject(get$1(et._options.defaultValues,c));set(et._defaultValues,c,wt),isUndefined(get$1(et._formValues,c))&&set(et._formValues,c,wt)}return()=>{(at?pt&&!et._state.action:pt)?et.unregister(c):st(c,!1)}},[c,et,at,g]),React.useEffect(()=>{get$1(et._fields,c)&&et._updateDisabledField({disabled:d,fields:et._fields,name:c,value:get$1(et._fields,c)._f.value})},[d,c,et]),{field:{name:c,value:$t,...isBoolean(d)||vt.disabled?{disabled:vt.disabled||d}:{},onChange:React.useCallback(pt=>b.current.onChange({target:{value:getEventValue(pt),name:c},type:EVENTS.CHANGE}),[c]),onBlur:React.useCallback(()=>b.current.onBlur({target:{value:get$1(et._formValues,c),name:c},type:EVENTS.BLUR}),[c,et]),ref:pt=>{const st=get$1(et._fields,c);st&&pt&&(st._f.ref={focus:()=>pt.focus(),select:()=>pt.select(),setCustomValidity:wt=>pt.setCustomValidity(wt),reportValidity:()=>pt.reportValidity()})}},formState:vt,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get$1(vt.errors,c)},isDirty:{enumerable:!0,get:()=>!!get$1(vt.dirtyFields,c)},isTouched:{enumerable:!0,get:()=>!!get$1(vt.touchedFields,c)},isValidating:{enumerable:!0,get:()=>!!get$1(vt.validatingFields,c)},error:{enumerable:!0,get:()=>get$1(vt.errors,c)}})}}const Controller=a=>a.render(useController(a));var appendErrors=(a,s,c,d,et)=>s?{...c[a],types:{...c[a]&&c[a].types?c[a].types:{},[d]:et||!0}}:{},getValidationModes=a=>({isOnSubmit:!a||a===VALIDATION_MODE.onSubmit,isOnBlur:a===VALIDATION_MODE.onBlur,isOnChange:a===VALIDATION_MODE.onChange,isOnAll:a===VALIDATION_MODE.all,isOnTouch:a===VALIDATION_MODE.onTouched}),isWatched=(a,s,c)=>!c&&(s.watchAll||s.watch.has(a)||[...s.watch].some(d=>a.startsWith(d)&&/^\.\w+/.test(a.slice(d.length))));const iterateFieldsByAction=(a,s,c,d)=>{for(const et of c||Object.keys(a)){const g=get$1(a,et);if(g){const{_f:at,...$t}=g;if(at){if(at.refs&&at.refs[0]&&s(at.refs[0],et)&&!d)break;if(at.ref&&s(at.ref,at.name)&&!d)break;iterateFieldsByAction($t,s)}else isObject($t)&&iterateFieldsByAction($t,s)}}};var updateFieldArrayRootError=(a,s,c)=>{const d=compact(get$1(a,c));return set(d,"root",s[c]),set(a,c,d),a},isFileInput=a=>a.type==="file",isFunction=a=>typeof a=="function",isHTMLElement=a=>{if(!isWeb)return!1;const s=a?a.ownerDocument:0;return a instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},isMessage=a=>isString(a),isRadioInput=a=>a.type==="radio",isRegex=a=>a instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=a=>{if(Array.isArray(a)){if(a.length>1){const s=a.filter(c=>c&&c.checked&&!c.disabled).map(c=>c.value);return{value:s,isValid:!!s.length}}return a[0].checked&&!a[0].disabled?a[0].attributes&&!isUndefined(a[0].attributes.value)?isUndefined(a[0].value)||a[0].value===""?validResult:{value:a[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=a=>Array.isArray(a)?a.reduce((s,c)=>c&&c.checked&&!c.disabled?{isValid:!0,value:c.value}:s,defaultReturn):defaultReturn;function getValidateError(a,s,c="validate"){if(isMessage(a)||Array.isArray(a)&&a.every(isMessage)||isBoolean(a)&&!a)return{type:c,message:isMessage(a)?a:"",ref:s}}var getValueAndMessage=a=>isObject(a)&&!isRegex(a)?a:{value:a,message:""},validateField=async(a,s,c,d,et)=>{const{ref:g,refs:at,required:$t,maxLength:vt,minLength:b,min:pt,max:st,pattern:wt,validate:Tt,name:Ct,valueAsNumber:jt,mount:Lt,disabled:Ht}=a._f,Gt=get$1(s,Ct);if(!Lt||Ht)return{};const Kt=at?at[0]:g,tr=t0=>{d&&Kt.reportValidity&&(Kt.setCustomValidity(isBoolean(t0)?"":t0||""),Kt.reportValidity())},rr={},Lr=isRadioInput(g),jr=isCheckBoxInput(g),Yr=Lr||jr,An=(jt||isFileInput(g))&&isUndefined(g.value)&&isUndefined(Gt)||isHTMLElement(g)&&g.value===""||Gt===""||Array.isArray(Gt)&&!Gt.length,No=appendErrors.bind(null,Ct,c,rr),o0=(t0,c0,n0,Qo=INPUT_VALIDATION_RULES.maxLength,Mo=INPUT_VALIDATION_RULES.minLength)=>{const zo=t0?c0:n0;rr[Ct]={type:t0?Qo:Mo,message:zo,ref:g,...No(t0?Qo:Mo,zo)}};if(et?!Array.isArray(Gt)||!Gt.length:$t&&(!Yr&&(An||isNullOrUndefined(Gt))||isBoolean(Gt)&&!Gt||jr&&!getCheckboxValue(at).isValid||Lr&&!getRadioValue(at).isValid)){const{value:t0,message:c0}=isMessage($t)?{value:!!$t,message:$t}:getValueAndMessage($t);if(t0&&(rr[Ct]={type:INPUT_VALIDATION_RULES.required,message:c0,ref:Kt,...No(INPUT_VALIDATION_RULES.required,c0)},!c))return tr(c0),rr}if(!An&&(!isNullOrUndefined(pt)||!isNullOrUndefined(st))){let t0,c0;const n0=getValueAndMessage(st),Qo=getValueAndMessage(pt);if(!isNullOrUndefined(Gt)&&!isNaN(Gt)){const Mo=g.valueAsNumber||Gt&&+Gt;isNullOrUndefined(n0.value)||(t0=Mo>n0.value),isNullOrUndefined(Qo.value)||(c0=Mo<Qo.value)}else{const Mo=g.valueAsDate||new Date(Gt),zo=In=>new Date(new Date().toDateString()+" "+In),e0=g.type=="time",Xr=g.type=="week";isString(n0.value)&&Gt&&(t0=e0?zo(Gt)>zo(n0.value):Xr?Gt>n0.value:Mo>new Date(n0.value)),isString(Qo.value)&&Gt&&(c0=e0?zo(Gt)<zo(Qo.value):Xr?Gt<Qo.value:Mo<new Date(Qo.value))}if((t0||c0)&&(o0(!!t0,n0.message,Qo.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!c))return tr(rr[Ct].message),rr}if((vt||b)&&!An&&(isString(Gt)||et&&Array.isArray(Gt))){const t0=getValueAndMessage(vt),c0=getValueAndMessage(b),n0=!isNullOrUndefined(t0.value)&&Gt.length>+t0.value,Qo=!isNullOrUndefined(c0.value)&&Gt.length<+c0.value;if((n0||Qo)&&(o0(n0,t0.message,c0.message),!c))return tr(rr[Ct].message),rr}if(wt&&!An&&isString(Gt)){const{value:t0,message:c0}=getValueAndMessage(wt);if(isRegex(t0)&&!Gt.match(t0)&&(rr[Ct]={type:INPUT_VALIDATION_RULES.pattern,message:c0,ref:g,...No(INPUT_VALIDATION_RULES.pattern,c0)},!c))return tr(c0),rr}if(Tt){if(isFunction(Tt)){const t0=await Tt(Gt,s),c0=getValidateError(t0,Kt);if(c0&&(rr[Ct]={...c0,...No(INPUT_VALIDATION_RULES.validate,c0.message)},!c))return tr(c0.message),rr}else if(isObject(Tt)){let t0={};for(const c0 in Tt){if(!isEmptyObject(t0)&&!c)break;const n0=getValidateError(await Tt[c0](Gt,s),Kt,c0);n0&&(t0={...n0,...No(c0,n0.message)},tr(n0.message),c&&(rr[Ct]=t0))}if(!isEmptyObject(t0)&&(rr[Ct]={ref:Kt,...t0},!c))return rr}}return tr(!0),rr};function baseGet(a,s){const c=s.slice(0,-1).length;let d=0;for(;d<c;)a=isUndefined(a)?d++:a[s[d++]];return a}function isEmptyArray(a){for(const s in a)if(a.hasOwnProperty(s)&&!isUndefined(a[s]))return!1;return!0}function unset(a,s){const c=Array.isArray(s)?s:isKey(s)?[s]:stringToPath(s),d=c.length===1?a:baseGet(a,c),et=c.length-1,g=c[et];return d&&delete d[g],et!==0&&(isObject(d)&&isEmptyObject(d)||Array.isArray(d)&&isEmptyArray(d))&&unset(a,c.slice(0,-1)),a}var createSubject=()=>{let a=[];return{get observers(){return a},next:et=>{for(const g of a)g.next&&g.next(et)},subscribe:et=>(a.push(et),{unsubscribe:()=>{a=a.filter(g=>g!==et)}}),unsubscribe:()=>{a=[]}}},isPrimitive=a=>isNullOrUndefined(a)||!isObjectType(a);function deepEqual(a,s){if(isPrimitive(a)||isPrimitive(s))return a===s;if(isDateObject(a)&&isDateObject(s))return a.getTime()===s.getTime();const c=Object.keys(a),d=Object.keys(s);if(c.length!==d.length)return!1;for(const et of c){const g=a[et];if(!d.includes(et))return!1;if(et!=="ref"){const at=s[et];if(isDateObject(g)&&isDateObject(at)||isObject(g)&&isObject(at)||Array.isArray(g)&&Array.isArray(at)?!deepEqual(g,at):g!==at)return!1}}return!0}var isMultipleSelect=a=>a.type==="select-multiple",isRadioOrCheckbox=a=>isRadioInput(a)||isCheckBoxInput(a),live=a=>isHTMLElement(a)&&a.isConnected,objectHasFunction=a=>{for(const s in a)if(isFunction(a[s]))return!0;return!1};function markFieldsDirty(a,s={}){const c=Array.isArray(a);if(isObject(a)||c)for(const d in a)Array.isArray(a[d])||isObject(a[d])&&!objectHasFunction(a[d])?(s[d]=Array.isArray(a[d])?[]:{},markFieldsDirty(a[d],s[d])):isNullOrUndefined(a[d])||(s[d]=!0);return s}function getDirtyFieldsFromDefaultValues(a,s,c){const d=Array.isArray(a);if(isObject(a)||d)for(const et in a)Array.isArray(a[et])||isObject(a[et])&&!objectHasFunction(a[et])?isUndefined(s)||isPrimitive(c[et])?c[et]=Array.isArray(a[et])?markFieldsDirty(a[et],[]):{...markFieldsDirty(a[et])}:getDirtyFieldsFromDefaultValues(a[et],isNullOrUndefined(s)?{}:s[et],c[et]):c[et]=!deepEqual(a[et],s[et]);return c}var getDirtyFields=(a,s)=>getDirtyFieldsFromDefaultValues(a,s,markFieldsDirty(s)),getFieldValueAs=(a,{valueAsNumber:s,valueAsDate:c,setValueAs:d})=>isUndefined(a)?a:s?a===""?NaN:a&&+a:c&&isString(a)?new Date(a):d?d(a):a;function getFieldValue(a){const s=a.ref;if(!(a.refs?a.refs.every(c=>c.disabled):s.disabled))return isFileInput(s)?s.files:isRadioInput(s)?getRadioValue(a.refs).value:isMultipleSelect(s)?[...s.selectedOptions].map(({value:c})=>c):isCheckBoxInput(s)?getCheckboxValue(a.refs).value:getFieldValueAs(isUndefined(s.value)?a.ref.value:s.value,a)}var getResolverOptions=(a,s,c,d)=>{const et={};for(const g of a){const at=get$1(s,g);at&&set(et,g,at._f)}return{criteriaMode:c,names:[...a],fields:et,shouldUseNativeValidation:d}},getRuleValue=a=>isUndefined(a)?a:isRegex(a)?a.source:isObject(a)?isRegex(a.value)?a.value.source:a.value:a,hasValidation=a=>a.mount&&(a.required||a.min||a.max||a.maxLength||a.minLength||a.pattern||a.validate);function schemaErrorLookup(a,s,c){const d=get$1(a,c);if(d||isKey(c))return{error:d,name:c};const et=c.split(".");for(;et.length;){const g=et.join("."),at=get$1(s,g),$t=get$1(a,g);if(at&&!Array.isArray(at)&&c!==g)return{name:c};if($t&&$t.type)return{name:g,error:$t};et.pop()}return{name:c}}var skipValidation=(a,s,c,d,et)=>et.isOnAll?!1:!c&&et.isOnTouch?!(s||a):(c?d.isOnBlur:et.isOnBlur)?!a:(c?d.isOnChange:et.isOnChange)?a:!0,unsetEmptyArray=(a,s)=>!compact(get$1(a,s)).length&&unset(a,s);const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(a={}){let s={...defaultOptions,...a},c={submitCount:0,isDirty:!1,isLoading:isFunction(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},d={},et=isObject(s.defaultValues)||isObject(s.values)?cloneObject(s.defaultValues||s.values)||{}:{},g=s.shouldUnregister?{}:cloneObject(et),at={action:!1,mount:!1,watch:!1},$t={mount:new Set,unMount:new Set,array:new Set,watch:new Set},vt,b=0;const pt={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},st={values:createSubject(),array:createSubject(),state:createSubject()},wt=getValidationModes(s.mode),Tt=getValidationModes(s.reValidateMode),Ct=s.criteriaMode===VALIDATION_MODE.all,jt=Uo=>l0=>{clearTimeout(b),b=setTimeout(Uo,l0)},Lt=async Uo=>{if(pt.isValid||Uo){const l0=s.resolver?isEmptyObject((await Yr()).errors):await No(d,!0);l0!==c.isValid&&st.state.next({isValid:l0})}},Ht=(Uo,l0)=>{(pt.isValidating||pt.validatingFields)&&((Uo||Array.from($t.mount)).forEach(b0=>{b0&&(l0?set(c.validatingFields,b0,l0):unset(c.validatingFields,b0))}),st.state.next({validatingFields:c.validatingFields,isValidating:!isEmptyObject(c.validatingFields)}))},Gt=(Uo,l0=[],b0,k0,d0=!0,E0=!0)=>{if(k0&&b0){if(at.action=!0,E0&&Array.isArray(get$1(d,Uo))){const V0=b0(get$1(d,Uo),k0.argA,k0.argB);d0&&set(d,Uo,V0)}if(E0&&Array.isArray(get$1(c.errors,Uo))){const V0=b0(get$1(c.errors,Uo),k0.argA,k0.argB);d0&&set(c.errors,Uo,V0),unsetEmptyArray(c.errors,Uo)}if(pt.touchedFields&&E0&&Array.isArray(get$1(c.touchedFields,Uo))){const V0=b0(get$1(c.touchedFields,Uo),k0.argA,k0.argB);d0&&set(c.touchedFields,Uo,V0)}pt.dirtyFields&&(c.dirtyFields=getDirtyFields(et,g)),st.state.next({name:Uo,isDirty:t0(Uo,l0),dirtyFields:c.dirtyFields,errors:c.errors,isValid:c.isValid})}else set(g,Uo,l0)},Kt=(Uo,l0)=>{set(c.errors,Uo,l0),st.state.next({errors:c.errors})},tr=Uo=>{c.errors=Uo,st.state.next({errors:c.errors,isValid:!1})},rr=(Uo,l0,b0,k0)=>{const d0=get$1(d,Uo);if(d0){const E0=get$1(g,Uo,isUndefined(b0)?get$1(et,Uo):b0);isUndefined(E0)||k0&&k0.defaultChecked||l0?set(g,Uo,l0?E0:getFieldValue(d0._f)):Qo(Uo,E0),at.mount&&Lt()}},Lr=(Uo,l0,b0,k0,d0)=>{let E0=!1,V0=!1;const Z0={name:Uo},h1=!!(get$1(d,Uo)&&get$1(d,Uo)._f.disabled);if(!b0||k0){pt.isDirty&&(V0=c.isDirty,c.isDirty=Z0.isDirty=t0(),E0=V0!==Z0.isDirty);const r1=h1||deepEqual(get$1(et,Uo),l0);V0=!!(!h1&&get$1(c.dirtyFields,Uo)),r1||h1?unset(c.dirtyFields,Uo):set(c.dirtyFields,Uo,!0),Z0.dirtyFields=c.dirtyFields,E0=E0||pt.dirtyFields&&V0!==!r1}if(b0){const r1=get$1(c.touchedFields,Uo);r1||(set(c.touchedFields,Uo,b0),Z0.touchedFields=c.touchedFields,E0=E0||pt.touchedFields&&r1!==b0)}return E0&&d0&&st.state.next(Z0),E0?Z0:{}},jr=(Uo,l0,b0,k0)=>{const d0=get$1(c.errors,Uo),E0=pt.isValid&&isBoolean(l0)&&c.isValid!==l0;if(a.delayError&&b0?(vt=jt(()=>Kt(Uo,b0)),vt(a.delayError)):(clearTimeout(b),vt=null,b0?set(c.errors,Uo,b0):unset(c.errors,Uo)),(b0?!deepEqual(d0,b0):d0)||!isEmptyObject(k0)||E0){const V0={...k0,...E0&&isBoolean(l0)?{isValid:l0}:{},errors:c.errors,name:Uo};c={...c,...V0},st.state.next(V0)}},Yr=async Uo=>{Ht(Uo,!0);const l0=await s.resolver(g,s.context,getResolverOptions(Uo||$t.mount,d,s.criteriaMode,s.shouldUseNativeValidation));return Ht(Uo),l0},An=async Uo=>{const{errors:l0}=await Yr(Uo);if(Uo)for(const b0 of Uo){const k0=get$1(l0,b0);k0?set(c.errors,b0,k0):unset(c.errors,b0)}else c.errors=l0;return l0},No=async(Uo,l0,b0={valid:!0})=>{for(const k0 in Uo){const d0=Uo[k0];if(d0){const{_f:E0,...V0}=d0;if(E0){const Z0=$t.array.has(E0.name);Ht([k0],!0);const h1=await validateField(d0,g,Ct,s.shouldUseNativeValidation&&!l0,Z0);if(Ht([k0]),h1[E0.name]&&(b0.valid=!1,l0))break;!l0&&(get$1(h1,E0.name)?Z0?updateFieldArrayRootError(c.errors,h1,E0.name):set(c.errors,E0.name,h1[E0.name]):unset(c.errors,E0.name))}V0&&await No(V0,l0,b0)}}return b0.valid},o0=()=>{for(const Uo of $t.unMount){const l0=get$1(d,Uo);l0&&(l0._f.refs?l0._f.refs.every(b0=>!live(b0)):!live(l0._f.ref))&&i0(Uo)}$t.unMount=new Set},t0=(Uo,l0)=>(Uo&&l0&&set(g,Uo,l0),!deepEqual(Zr(),et)),c0=(Uo,l0,b0)=>generateWatchOutput(Uo,$t,{...at.mount?g:isUndefined(l0)?et:isString(Uo)?{[Uo]:l0}:l0},b0,l0),n0=Uo=>compact(get$1(at.mount?g:et,Uo,a.shouldUnregister?get$1(et,Uo,[]):[])),Qo=(Uo,l0,b0={})=>{const k0=get$1(d,Uo);let d0=l0;if(k0){const E0=k0._f;E0&&(!E0.disabled&&set(g,Uo,getFieldValueAs(l0,E0)),d0=isHTMLElement(E0.ref)&&isNullOrUndefined(l0)?"":l0,isMultipleSelect(E0.ref)?[...E0.ref.options].forEach(V0=>V0.selected=d0.includes(V0.value)):E0.refs?isCheckBoxInput(E0.ref)?E0.refs.length>1?E0.refs.forEach(V0=>(!V0.defaultChecked||!V0.disabled)&&(V0.checked=Array.isArray(d0)?!!d0.find(Z0=>Z0===V0.value):d0===V0.value)):E0.refs[0]&&(E0.refs[0].checked=!!d0):E0.refs.forEach(V0=>V0.checked=V0.value===d0):isFileInput(E0.ref)?E0.ref.value="":(E0.ref.value=d0,E0.ref.type||st.values.next({name:Uo,values:{...g}})))}(b0.shouldDirty||b0.shouldTouch)&&Lr(Uo,d0,b0.shouldTouch,b0.shouldDirty,!0),b0.shouldValidate&&In(Uo)},Mo=(Uo,l0,b0)=>{for(const k0 in l0){const d0=l0[k0],E0=`${Uo}.${k0}`,V0=get$1(d,E0);($t.array.has(Uo)||!isPrimitive(d0)||V0&&!V0._f)&&!isDateObject(d0)?Mo(E0,d0,b0):Qo(E0,d0,b0)}},zo=(Uo,l0,b0={})=>{const k0=get$1(d,Uo),d0=$t.array.has(Uo),E0=cloneObject(l0);set(g,Uo,E0),d0?(st.array.next({name:Uo,values:{...g}}),(pt.isDirty||pt.dirtyFields)&&b0.shouldDirty&&st.state.next({name:Uo,dirtyFields:getDirtyFields(et,g),isDirty:t0(Uo,E0)})):k0&&!k0._f&&!isNullOrUndefined(E0)?Mo(Uo,E0,b0):Qo(Uo,E0,b0),isWatched(Uo,$t)&&st.state.next({...c}),st.values.next({name:at.mount?Uo:void 0,values:{...g}})},e0=async Uo=>{at.mount=!0;const l0=Uo.target;let b0=l0.name,k0=!0;const d0=get$1(d,b0),E0=()=>l0.type?getFieldValue(d0._f):getEventValue(Uo),V0=Z0=>{k0=Number.isNaN(Z0)||Z0===get$1(g,b0,Z0)};if(d0){let Z0,h1;const r1=E0(),I1=Uo.type===EVENTS.BLUR||Uo.type===EVENTS.FOCUS_OUT,f1=!hasValidation(d0._f)&&!s.resolver&&!get$1(c.errors,b0)&&!d0._f.deps||skipValidation(I1,get$1(c.touchedFields,b0),c.isSubmitted,Tt,wt),q1=isWatched(b0,$t,I1);set(g,b0,r1),I1?(d0._f.onBlur&&d0._f.onBlur(Uo),vt&&vt(0)):d0._f.onChange&&d0._f.onChange(Uo);const c1=Lr(b0,r1,I1,!1),B1=!isEmptyObject(c1)||q1;if(!I1&&st.values.next({name:b0,type:Uo.type,values:{...g}}),f1)return pt.isValid&&Lt(),B1&&st.state.next({name:b0,...q1?{}:c1});if(!I1&&q1&&st.state.next({...c}),s.resolver){const{errors:nv}=await Yr([b0]);if(V0(r1),k0){const iv=schemaErrorLookup(c.errors,d,b0),t1=schemaErrorLookup(nv,d,iv.name||b0);Z0=t1.error,b0=t1.name,h1=isEmptyObject(nv)}}else Ht([b0],!0),Z0=(await validateField(d0,g,Ct,s.shouldUseNativeValidation))[b0],Ht([b0]),V0(r1),k0&&(Z0?h1=!1:pt.isValid&&(h1=await No(d,!0)));k0&&(d0._f.deps&&In(d0._f.deps),jr(b0,h1,Z0,c1))}},Xr=(Uo,l0)=>{if(get$1(c.errors,l0)&&Uo.focus)return Uo.focus(),1},In=async(Uo,l0={})=>{let b0,k0;const d0=convertToArrayPayload(Uo);if(s.resolver){const E0=await An(isUndefined(Uo)?Uo:d0);b0=isEmptyObject(E0),k0=Uo?!d0.some(V0=>get$1(E0,V0)):b0}else Uo?(k0=(await Promise.all(d0.map(async E0=>{const V0=get$1(d,E0);return await No(V0&&V0._f?{[E0]:V0}:V0)}))).every(Boolean),!(!k0&&!c.isValid)&&Lt()):k0=b0=await No(d);return st.state.next({...!isString(Uo)||pt.isValid&&b0!==c.isValid?{}:{name:Uo},...s.resolver||!Uo?{isValid:b0}:{},errors:c.errors}),l0.shouldFocus&&!k0&&iterateFieldsByAction(d,Xr,Uo?d0:$t.mount),k0},Zr=Uo=>{const l0={...at.mount?g:et};return isUndefined(Uo)?l0:isString(Uo)?get$1(l0,Uo):Uo.map(b0=>get$1(l0,b0))},wn=(Uo,l0)=>({invalid:!!get$1((l0||c).errors,Uo),isDirty:!!get$1((l0||c).dirtyFields,Uo),isTouched:!!get$1((l0||c).touchedFields,Uo),isValidating:!!get$1((l0||c).validatingFields,Uo),error:get$1((l0||c).errors,Uo)}),r0=Uo=>{Uo&&convertToArrayPayload(Uo).forEach(l0=>unset(c.errors,l0)),st.state.next({errors:Uo?c.errors:{}})},ko=(Uo,l0,b0)=>{const k0=(get$1(d,Uo,{_f:{}})._f||{}).ref;set(c.errors,Uo,{...l0,ref:k0}),st.state.next({name:Uo,errors:c.errors,isValid:!1}),b0&&b0.shouldFocus&&k0&&k0.focus&&k0.focus()},_n=(Uo,l0)=>isFunction(Uo)?st.values.subscribe({next:b0=>Uo(c0(void 0,l0),b0)}):c0(Uo,l0,!0),i0=(Uo,l0={})=>{for(const b0 of Uo?convertToArrayPayload(Uo):$t.mount)$t.mount.delete(b0),$t.array.delete(b0),l0.keepValue||(unset(d,b0),unset(g,b0)),!l0.keepError&&unset(c.errors,b0),!l0.keepDirty&&unset(c.dirtyFields,b0),!l0.keepTouched&&unset(c.touchedFields,b0),!l0.keepIsValidating&&unset(c.validatingFields,b0),!s.shouldUnregister&&!l0.keepDefaultValue&&unset(et,b0);st.values.next({values:{...g}}),st.state.next({...c,...l0.keepDirty?{isDirty:t0()}:{}}),!l0.keepIsValid&&Lt()},a0=({disabled:Uo,name:l0,field:b0,fields:k0,value:d0})=>{if(isBoolean(Uo)){const E0=Uo?void 0:isUndefined(d0)?getFieldValue(b0?b0._f:get$1(k0,l0)._f):d0;set(g,l0,E0),Lr(l0,E0,!1,!1,!0)}},m0=(Uo,l0={})=>{let b0=get$1(d,Uo);const k0=isBoolean(l0.disabled);return set(d,Uo,{...b0||{},_f:{...b0&&b0._f?b0._f:{ref:{name:Uo}},name:Uo,mount:!0,...l0}}),$t.mount.add(Uo),b0?a0({field:b0,disabled:l0.disabled,name:Uo,value:l0.value}):rr(Uo,!0,l0.value),{...k0?{disabled:l0.disabled}:{},...s.progressive?{required:!!l0.required,min:getRuleValue(l0.min),max:getRuleValue(l0.max),minLength:getRuleValue(l0.minLength),maxLength:getRuleValue(l0.maxLength),pattern:getRuleValue(l0.pattern)}:{},name:Uo,onChange:e0,onBlur:e0,ref:d0=>{if(d0){m0(Uo,l0),b0=get$1(d,Uo);const E0=isUndefined(d0.value)&&d0.querySelectorAll&&d0.querySelectorAll("input,select,textarea")[0]||d0,V0=isRadioOrCheckbox(E0),Z0=b0._f.refs||[];if(V0?Z0.find(h1=>h1===E0):E0===b0._f.ref)return;set(d,Uo,{_f:{...b0._f,...V0?{refs:[...Z0.filter(live),E0,...Array.isArray(get$1(et,Uo))?[{}]:[]],ref:{type:E0.type,name:Uo}}:{ref:E0}}}),rr(Uo,!1,void 0,E0)}else b0=get$1(d,Uo,{}),b0._f&&(b0._f.mount=!1),(s.shouldUnregister||l0.shouldUnregister)&&!(isNameInFieldArray($t.array,Uo)&&at.action)&&$t.unMount.add(Uo)}}},p0=()=>s.shouldFocusError&&iterateFieldsByAction(d,Xr,$t.mount),x0=Uo=>{isBoolean(Uo)&&(st.state.next({disabled:Uo}),iterateFieldsByAction(d,(l0,b0)=>{let k0=Uo;const d0=get$1(d,b0);d0&&isBoolean(d0._f.disabled)&&(k0||(k0=d0._f.disabled)),l0.disabled=k0},0,!1))},S0=(Uo,l0)=>async b0=>{let k0;b0&&(b0.preventDefault&&b0.preventDefault(),b0.persist&&b0.persist());let d0=cloneObject(g);if(st.state.next({isSubmitting:!0}),s.resolver){const{errors:E0,values:V0}=await Yr();c.errors=E0,d0=V0}else await No(d);if(unset(c.errors,"root"),isEmptyObject(c.errors)){st.state.next({errors:{}});try{await Uo(d0,b0)}catch(E0){k0=E0}}else l0&&await l0({...c.errors},b0),p0(),setTimeout(p0);if(st.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(c.errors)&&!k0,submitCount:c.submitCount+1,errors:c.errors}),k0)throw k0},R0=(Uo,l0={})=>{get$1(d,Uo)&&(isUndefined(l0.defaultValue)?zo(Uo,cloneObject(get$1(et,Uo))):(zo(Uo,l0.defaultValue),set(et,Uo,cloneObject(l0.defaultValue))),l0.keepTouched||unset(c.touchedFields,Uo),l0.keepDirty||(unset(c.dirtyFields,Uo),c.isDirty=l0.defaultValue?t0(Uo,cloneObject(get$1(et,Uo))):t0()),l0.keepError||(unset(c.errors,Uo),pt.isValid&&Lt()),st.state.next({...c}))},$0=(Uo,l0={})=>{const b0=Uo?cloneObject(Uo):et,k0=cloneObject(b0),d0=isEmptyObject(Uo),E0=d0?et:k0;if(l0.keepDefaultValues||(et=b0),!l0.keepValues){if(l0.keepDirtyValues)for(const V0 of $t.mount)get$1(c.dirtyFields,V0)?set(E0,V0,get$1(g,V0)):zo(V0,get$1(E0,V0));else{if(isWeb&&isUndefined(Uo))for(const V0 of $t.mount){const Z0=get$1(d,V0);if(Z0&&Z0._f){const h1=Array.isArray(Z0._f.refs)?Z0._f.refs[0]:Z0._f.ref;if(isHTMLElement(h1)){const r1=h1.closest("form");if(r1){r1.reset();break}}}}d={}}g=a.shouldUnregister?l0.keepDefaultValues?cloneObject(et):{}:cloneObject(E0),st.array.next({values:{...E0}}),st.values.next({values:{...E0}})}$t={mount:l0.keepDirtyValues?$t.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},at.mount=!pt.isValid||!!l0.keepIsValid||!!l0.keepDirtyValues,at.watch=!!a.shouldUnregister,st.state.next({submitCount:l0.keepSubmitCount?c.submitCount:0,isDirty:d0?!1:l0.keepDirty?c.isDirty:!!(l0.keepDefaultValues&&!deepEqual(Uo,et)),isSubmitted:l0.keepIsSubmitted?c.isSubmitted:!1,dirtyFields:d0?[]:l0.keepDirtyValues?l0.keepDefaultValues&&g?getDirtyFields(et,g):c.dirtyFields:l0.keepDefaultValues&&Uo?getDirtyFields(et,Uo):{},touchedFields:l0.keepTouched?c.touchedFields:{},errors:l0.keepErrors?c.errors:{},isSubmitSuccessful:l0.keepIsSubmitSuccessful?c.isSubmitSuccessful:!1,isSubmitting:!1})},f0=(Uo,l0)=>$0(isFunction(Uo)?Uo(g):Uo,l0);return{control:{register:m0,unregister:i0,getFieldState:wn,handleSubmit:S0,setError:ko,_executeSchema:Yr,_getWatch:c0,_getDirty:t0,_updateValid:Lt,_removeUnmounted:o0,_updateFieldArray:Gt,_updateDisabledField:a0,_getFieldArray:n0,_reset:$0,_resetDefaultValues:()=>isFunction(s.defaultValues)&&s.defaultValues().then(Uo=>{f0(Uo,s.resetOptions),st.state.next({isLoading:!1})}),_updateFormState:Uo=>{c={...c,...Uo}},_disableForm:x0,_subjects:st,_proxyFormState:pt,_setErrors:tr,get _fields(){return d},get _formValues(){return g},get _state(){return at},set _state(Uo){at=Uo},get _defaultValues(){return et},get _names(){return $t},set _names(Uo){$t=Uo},get _formState(){return c},set _formState(Uo){c=Uo},get _options(){return s},set _options(Uo){s={...s,...Uo}}},trigger:In,register:m0,handleSubmit:S0,watch:_n,setValue:zo,getValues:Zr,reset:f0,resetField:R0,clearErrors:r0,unregister:i0,setError:ko,setFocus:(Uo,l0={})=>{const b0=get$1(d,Uo),k0=b0&&b0._f;if(k0){const d0=k0.refs?k0.refs[0]:k0.ref;d0.focus&&(d0.focus(),l0.shouldSelect&&d0.select())}},getFieldState:wn}}function useForm(a={}){const s=React.useRef(),c=React.useRef(),[d,et]=React.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(a.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1,defaultValues:isFunction(a.defaultValues)?void 0:a.defaultValues});s.current||(s.current={...createFormControl(a),formState:d});const g=s.current.control;return g._options=a,useSubscribe({subject:g._subjects.state,next:at=>{shouldRenderFormState(at,g._proxyFormState,g._updateFormState,!0)&&et({...g._formState})}}),React.useEffect(()=>g._disableForm(a.disabled),[g,a.disabled]),React.useEffect(()=>{if(g._proxyFormState.isDirty){const at=g._getDirty();at!==d.isDirty&&g._subjects.state.next({isDirty:at})}},[g,d.isDirty]),React.useEffect(()=>{a.values&&!deepEqual(a.values,c.current)?(g._reset(a.values,g._options.resetOptions),c.current=a.values,et(at=>({...at}))):g._resetDefaultValues()},[a.values,g]),React.useEffect(()=>{a.errors&&g._setErrors(a.errors)},[a.errors,g]),React.useEffect(()=>{g._state.mount||(g._updateValid(),g._state.mount=!0),g._state.watch&&(g._state.watch=!1,g._subjects.state.next({...g._formState})),g._removeUnmounted()}),React.useEffect(()=>{a.shouldUnregister&&g._subjects.values.next({values:g._getWatch()})},[a.shouldUnregister,g]),s.current.formState=getProxyFormState(d,g),s.current}var t$1=function(a,s,c){if(a&&"reportValidity"in a){var d=get$1(c,s);a.setCustomValidity(d&&d.message||""),a.reportValidity()}},i=function(a,s){var c=function(et){var g=s.fields[et];g&&g.ref&&"reportValidity"in g.ref?t$1(g.ref,et,a):g.refs&&g.refs.forEach(function(at){return t$1(at,et,a)})};for(var d in s.fields)c(d)},n$1=function(a,s){s.shouldUseNativeValidation&&i(a,s);var c={};for(var d in a){var et=get$1(s.fields,d),g=Object.assign(a[d]||{},{ref:et&&et.ref});if(o(s.names||Object.keys(a),d)){var at=Object.assign({},get$1(c,d));set(at,"root",g),set(c,d,at)}else set(c,d,g)}return c},o=function(a,s){return a.some(function(c){return c.startsWith(s+".")})},n=function(a,s){for(var c={};a.length;){var d=a[0],et=d.code,g=d.message,at=d.path.join(".");if(!c[at])if("unionErrors"in d){var $t=d.unionErrors[0].errors[0];c[at]={message:$t.message,type:$t.code}}else c[at]={message:g,type:et};if("unionErrors"in d&&d.unionErrors.forEach(function(pt){return pt.errors.forEach(function(st){return a.push(st)})}),s){var vt=c[at].types,b=vt&&vt[d.code];c[at]=appendErrors(at,s,c,et,b?[].concat(b,d.message):d.message)}a.shift()}return c},t=function(a,s,c){return c===void 0&&(c={}),function(d,et,g){try{return Promise.resolve(function(at,$t){try{var vt=Promise.resolve(a[c.mode==="sync"?"parse":"parseAsync"](d,s)).then(function(b){return g.shouldUseNativeValidation&&i({},g),{errors:{},values:c.raw?d:b}})}catch(b){return $t(b)}return vt&&vt.then?vt.then(void 0,$t):vt}(0,function(at){if(function($t){return $t.errors!=null}(at))return{values:{},errors:n$1(n(at.errors,!g.shouldUseNativeValidation&&g.criteriaMode==="all"),g)};throw at}))}catch(at){return Promise.reject(at)}}},util;(function(a){a.assertEqual=et=>et;function s(et){}a.assertIs=s;function c(et){throw new Error}a.assertNever=c,a.arrayToEnum=et=>{const g={};for(const at of et)g[at]=at;return g},a.getValidEnumValues=et=>{const g=a.objectKeys(et).filter($t=>typeof et[et[$t]]!="number"),at={};for(const $t of g)at[$t]=et[$t];return a.objectValues(at)},a.objectValues=et=>a.objectKeys(et).map(function(g){return et[g]}),a.objectKeys=typeof Object.keys=="function"?et=>Object.keys(et):et=>{const g=[];for(const at in et)Object.prototype.hasOwnProperty.call(et,at)&&g.push(at);return g},a.find=(et,g)=>{for(const at of et)if(g(at))return at},a.isInteger=typeof Number.isInteger=="function"?et=>Number.isInteger(et):et=>typeof et=="number"&&isFinite(et)&&Math.floor(et)===et;function d(et,g=" | "){return et.map(at=>typeof at=="string"?`'${at}'`:at).join(g)}a.joinValues=d,a.jsonStringifyReplacer=(et,g)=>typeof g=="bigint"?g.toString():g})(util||(util={}));var objectUtil;(function(a){a.mergeShapes=(s,c)=>({...s,...c})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=a=>{switch(typeof a){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(a)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(a)?ZodParsedType.array:a===null?ZodParsedType.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&a instanceof Map?ZodParsedType.map:typeof Set<"u"&&a instanceof Set?ZodParsedType.set:typeof Date<"u"&&a instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(s){super(),this.issues=[],this.addIssue=d=>{this.issues=[...this.issues,d]},this.addIssues=(d=[])=>{this.issues=[...this.issues,...d]};const c=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,c):this.__proto__=c,this.name="ZodError",this.issues=s}get errors(){return this.issues}format(s){const c=s||function(g){return g.message},d={_errors:[]},et=g=>{for(const at of g.issues)if(at.code==="invalid_union")at.unionErrors.map(et);else if(at.code==="invalid_return_type")et(at.returnTypeError);else if(at.code==="invalid_arguments")et(at.argumentsError);else if(at.path.length===0)d._errors.push(c(at));else{let $t=d,vt=0;for(;vt<at.path.length;){const b=at.path[vt];vt===at.path.length-1?($t[b]=$t[b]||{_errors:[]},$t[b]._errors.push(c(at))):$t[b]=$t[b]||{_errors:[]},$t=$t[b],vt++}}};return et(this),d}static assert(s){if(!(s instanceof ZodError))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=c=>c.message){const c={},d=[];for(const et of this.issues)et.path.length>0?(c[et.path[0]]=c[et.path[0]]||[],c[et.path[0]].push(s(et))):d.push(s(et));return{formErrors:d,fieldErrors:c}}get formErrors(){return this.flatten()}}ZodError.create=a=>new ZodError(a);const errorMap=(a,s)=>{let c;switch(a.code){case ZodIssueCode.invalid_type:a.received===ZodParsedType.undefined?c="Required":c=`Expected ${a.expected}, received ${a.received}`;break;case ZodIssueCode.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:c=`Unrecognized key(s) in object: ${util.joinValues(a.keys,", ")}`;break;case ZodIssueCode.invalid_union:c="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${util.joinValues(a.options)}`;break;case ZodIssueCode.invalid_enum_value:c=`Invalid enum value. Expected ${util.joinValues(a.options)}, received '${a.received}'`;break;case ZodIssueCode.invalid_arguments:c="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:c="Invalid function return type";break;case ZodIssueCode.invalid_date:c="Invalid date";break;case ZodIssueCode.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:util.assertNever(a.validation):a.validation!=="regex"?c=`Invalid ${a.validation}`:c="Invalid";break;case ZodIssueCode.too_small:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:c="Invalid input";break;case ZodIssueCode.too_big:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?c=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:c="Invalid input";break;case ZodIssueCode.custom:c="Invalid input";break;case ZodIssueCode.invalid_intersection_types:c="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case ZodIssueCode.not_finite:c="Number must be finite";break;default:c=s.defaultError,util.assertNever(a)}return{message:c}};let overrideErrorMap=errorMap;function setErrorMap(a){overrideErrorMap=a}function getErrorMap(){return overrideErrorMap}const makeIssue=a=>{const{data:s,path:c,errorMaps:d,issueData:et}=a,g=[...c,...et.path||[]],at={...et,path:g};if(et.message!==void 0)return{...et,path:g,message:et.message};let $t="";const vt=d.filter(b=>!!b).slice().reverse();for(const b of vt)$t=b(at,{data:s,defaultError:$t}).message;return{...et,path:g,message:$t}},EMPTY_PATH=[];function addIssueToContext(a,s){const c=getErrorMap(),d=makeIssue({issueData:s,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,c,c===errorMap?void 0:errorMap].filter(et=>!!et)});a.common.issues.push(d)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,c){const d=[];for(const et of c){if(et.status==="aborted")return INVALID;et.status==="dirty"&&s.dirty(),d.push(et.value)}return{status:s.value,value:d}}static async mergeObjectAsync(s,c){const d=[];for(const et of c){const g=await et.key,at=await et.value;d.push({key:g,value:at})}return ParseStatus.mergeObjectSync(s,d)}static mergeObjectSync(s,c){const d={};for(const et of c){const{key:g,value:at}=et;if(g.status==="aborted"||at.status==="aborted")return INVALID;g.status==="dirty"&&s.dirty(),at.status==="dirty"&&s.dirty(),g.value!=="__proto__"&&(typeof at.value<"u"||et.alwaysSet)&&(d[g.value]=at.value)}return{status:s.value,value:d}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=a=>({status:"dirty",value:a}),OK=a=>({status:"valid",value:a}),isAborted=a=>a.status==="aborted",isDirty=a=>a.status==="dirty",isValid=a=>a.status==="valid",isAsync=a=>typeof Promise<"u"&&a instanceof Promise;function __classPrivateFieldGet(a,s,c,d){if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s.get(a)}function __classPrivateFieldSet(a,s,c,d,et){if(typeof s=="function"?a!==s||!et:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s.set(a,c),c}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(a){a.errToObj=s=>typeof s=="string"?{message:s}:s||{},a.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(s,c,d,et){this._cachedPath=[],this.parent=s,this.data=c,this._path=d,this._key=et}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(a,s)=>{if(isValid(s))return{success:!0,data:s.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const c=new ZodError(a.common.issues);return this._error=c,this._error}}};function processCreateParams(a){if(!a)return{};const{errorMap:s,invalid_type_error:c,required_error:d,description:et}=a;if(s&&(c||d))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:et}:{errorMap:(at,$t)=>{var vt,b;const{message:pt}=a;return at.code==="invalid_enum_value"?{message:pt??$t.defaultError}:typeof $t.data>"u"?{message:(vt=pt??d)!==null&&vt!==void 0?vt:$t.defaultError}:at.code!=="invalid_type"?{message:$t.defaultError}:{message:(b=pt??c)!==null&&b!==void 0?b:$t.defaultError}},description:et}}class ZodType{constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(s){return getParsedType(s.data)}_getOrReturnCtx(s,c){return c||{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new ParseStatus,ctx:{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const c=this._parse(s);if(isAsync(c))throw new Error("Synchronous parse encountered promise.");return c}_parseAsync(s){const c=this._parse(s);return Promise.resolve(c)}parse(s,c){const d=this.safeParse(s,c);if(d.success)return d.data;throw d.error}safeParse(s,c){var d;const et={common:{issues:[],async:(d=c==null?void 0:c.async)!==null&&d!==void 0?d:!1,contextualErrorMap:c==null?void 0:c.errorMap},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},g=this._parseSync({data:s,path:et.path,parent:et});return handleResult(et,g)}async parseAsync(s,c){const d=await this.safeParseAsync(s,c);if(d.success)return d.data;throw d.error}async safeParseAsync(s,c){const d={common:{issues:[],contextualErrorMap:c==null?void 0:c.errorMap,async:!0},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},et=this._parse({data:s,path:d.path,parent:d}),g=await(isAsync(et)?et:Promise.resolve(et));return handleResult(d,g)}refine(s,c){const d=et=>typeof c=="string"||typeof c>"u"?{message:c}:typeof c=="function"?c(et):c;return this._refinement((et,g)=>{const at=s(et),$t=()=>g.addIssue({code:ZodIssueCode.custom,...d(et)});return typeof Promise<"u"&&at instanceof Promise?at.then(vt=>vt?!0:($t(),!1)):at?!0:($t(),!1)})}refinement(s,c){return this._refinement((d,et)=>s(d)?!0:(et.addIssue(typeof c=="function"?c(d,et):c),!1))}_refinement(s){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(s){return ZodUnion.create([this,s],this._def)}and(s){return ZodIntersection.create(this,s,this._def)}transform(s){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const c=typeof s=="function"?s:()=>s;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:c,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(s){const c=typeof s=="function"?s:()=>s;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:c,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(s){const c=this.constructor;return new c({...this._def,description:s})}pipe(s){return ZodPipeline.create(this,s)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(a){let s="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return a.precision?s=`${s}\\.\\d{${a.precision}}`:a.precision==null&&(s=`${s}(\\.\\d+)?`),s}function timeRegex(a){return new RegExp(`^${timeRegexSource(a)}$`)}function datetimeRegex(a){let s=`${dateRegexSource}T${timeRegexSource(a)}`;const c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${c.join("|")})`,new RegExp(`^${s}$`)}function isValidIP(a,s){return!!((s==="v4"||!s)&&ipv4Regex.test(a)||(s==="v6"||!s)&&ipv6Regex.test(a))}class ZodString extends ZodType{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==ZodParsedType.string){const g=this._getOrReturnCtx(s);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:g.parsedType}),INVALID}const d=new ParseStatus;let et;for(const g of this._def.checks)if(g.kind==="min")s.data.length<g.value&&(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="max")s.data.length>g.value&&(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="length"){const at=s.data.length>g.value,$t=s.data.length<g.value;(at||$t)&&(et=this._getOrReturnCtx(s,et),at?addIssueToContext(et,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}):$t&&addIssueToContext(et,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}),d.dirty())}else if(g.kind==="email")emailRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"email",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"emoji",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="uuid")uuidRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"uuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="nanoid")nanoidRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid")cuidRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"cuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid2")cuid2Regex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="ulid")ulidRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"ulid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="url")try{new URL(s.data)}catch{et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"url",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()}else g.kind==="regex"?(g.regex.lastIndex=0,g.regex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"regex",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty())):g.kind==="trim"?s.data=s.data.trim():g.kind==="includes"?s.data.includes(g.value,g.position)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.invalid_string,validation:{includes:g.value,position:g.position},message:g.message}),d.dirty()):g.kind==="toLowerCase"?s.data=s.data.toLowerCase():g.kind==="toUpperCase"?s.data=s.data.toUpperCase():g.kind==="startsWith"?s.data.startsWith(g.value)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.invalid_string,validation:{startsWith:g.value},message:g.message}),d.dirty()):g.kind==="endsWith"?s.data.endsWith(g.value)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.invalid_string,validation:{endsWith:g.value},message:g.message}),d.dirty()):g.kind==="datetime"?datetimeRegex(g).test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.invalid_string,validation:"datetime",message:g.message}),d.dirty()):g.kind==="date"?dateRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.invalid_string,validation:"date",message:g.message}),d.dirty()):g.kind==="time"?timeRegex(g).test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.invalid_string,validation:"time",message:g.message}),d.dirty()):g.kind==="duration"?durationRegex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"duration",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="ip"?isValidIP(s.data,g.version)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"ip",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="base64"?base64Regex.test(s.data)||(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{validation:"base64",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):util.assertNever(g);return{status:d.value,value:s.data}}_regex(s,c,d){return this.refinement(et=>s.test(et),{validation:c,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(d)})}_addCheck(s){return new ZodString({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...errorUtil.errToObj(s)})}url(s){return this._addCheck({kind:"url",...errorUtil.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...errorUtil.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...errorUtil.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...errorUtil.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...errorUtil.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...errorUtil.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...errorUtil.errToObj(s)})}datetime(s){var c,d;return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(c=s==null?void 0:s.offset)!==null&&c!==void 0?c:!1,local:(d=s==null?void 0:s.local)!==null&&d!==void 0?d:!1,...errorUtil.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...errorUtil.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...errorUtil.errToObj(s)})}regex(s,c){return this._addCheck({kind:"regex",regex:s,...errorUtil.errToObj(c)})}includes(s,c){return this._addCheck({kind:"includes",value:s,position:c==null?void 0:c.position,...errorUtil.errToObj(c==null?void 0:c.message)})}startsWith(s,c){return this._addCheck({kind:"startsWith",value:s,...errorUtil.errToObj(c)})}endsWith(s,c){return this._addCheck({kind:"endsWith",value:s,...errorUtil.errToObj(c)})}min(s,c){return this._addCheck({kind:"min",value:s,...errorUtil.errToObj(c)})}max(s,c){return this._addCheck({kind:"max",value:s,...errorUtil.errToObj(c)})}length(s,c){return this._addCheck({kind:"length",value:s,...errorUtil.errToObj(c)})}nonempty(s){return this.min(1,errorUtil.errToObj(s))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get minLength(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s}get maxLength(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s}}ZodString.create=a=>{var s;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(s=a==null?void 0:a.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(a)})};function floatSafeRemainder(a,s){const c=(a.toString().split(".")[1]||"").length,d=(s.toString().split(".")[1]||"").length,et=c>d?c:d,g=parseInt(a.toFixed(et).replace(".","")),at=parseInt(s.toFixed(et).replace(".",""));return g%at/Math.pow(10,et)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==ZodParsedType.number){const g=this._getOrReturnCtx(s);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:g.parsedType}),INVALID}let d;const et=new ParseStatus;for(const g of this._def.checks)g.kind==="int"?util.isInteger(s.data)||(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:g.message}),et.dirty()):g.kind==="min"?(g.inclusive?s.data<g.value:s.data<=g.value)&&(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),et.dirty()):g.kind==="max"?(g.inclusive?s.data>g.value:s.data>=g.value)&&(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),et.dirty()):g.kind==="multipleOf"?floatSafeRemainder(s.data,g.value)!==0&&(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),et.dirty()):g.kind==="finite"?Number.isFinite(s.data)||(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.not_finite,message:g.message}),et.dirty()):util.assertNever(g);return{status:et.value,value:s.data}}gte(s,c){return this.setLimit("min",s,!0,errorUtil.toString(c))}gt(s,c){return this.setLimit("min",s,!1,errorUtil.toString(c))}lte(s,c){return this.setLimit("max",s,!0,errorUtil.toString(c))}lt(s,c){return this.setLimit("max",s,!1,errorUtil.toString(c))}setLimit(s,c,d,et){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:s,value:c,inclusive:d,message:errorUtil.toString(et)}]})}_addCheck(s){return new ZodNumber({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:errorUtil.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,c){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(c)})}finite(s){return this._addCheck({kind:"finite",message:errorUtil.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(s)})}get minValue(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s}get maxValue(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&util.isInteger(s.value))}get isFinite(){let s=null,c=null;for(const d of this._def.checks){if(d.kind==="finite"||d.kind==="int"||d.kind==="multipleOf")return!0;d.kind==="min"?(c===null||d.value>c)&&(c=d.value):d.kind==="max"&&(s===null||d.value<s)&&(s=d.value)}return Number.isFinite(c)&&Number.isFinite(s)}}ZodNumber.create=a=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce&&(s.data=BigInt(s.data)),this._getType(s)!==ZodParsedType.bigint){const g=this._getOrReturnCtx(s);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:g.parsedType}),INVALID}let d;const et=new ParseStatus;for(const g of this._def.checks)g.kind==="min"?(g.inclusive?s.data<g.value:s.data<=g.value)&&(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.too_small,type:"bigint",minimum:g.value,inclusive:g.inclusive,message:g.message}),et.dirty()):g.kind==="max"?(g.inclusive?s.data>g.value:s.data>=g.value)&&(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.too_big,type:"bigint",maximum:g.value,inclusive:g.inclusive,message:g.message}),et.dirty()):g.kind==="multipleOf"?s.data%g.value!==BigInt(0)&&(d=this._getOrReturnCtx(s,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),et.dirty()):util.assertNever(g);return{status:et.value,value:s.data}}gte(s,c){return this.setLimit("min",s,!0,errorUtil.toString(c))}gt(s,c){return this.setLimit("min",s,!1,errorUtil.toString(c))}lte(s,c){return this.setLimit("max",s,!0,errorUtil.toString(c))}lt(s,c){return this.setLimit("max",s,!1,errorUtil.toString(c))}setLimit(s,c,d,et){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:s,value:c,inclusive:d,message:errorUtil.toString(et)}]})}_addCheck(s){return new ZodBigInt({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,c){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(c)})}get minValue(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s}get maxValue(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s}}ZodBigInt.create=a=>{var s;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(s=a==null?void 0:a.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(a)})};class ZodBoolean extends ZodType{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==ZodParsedType.boolean){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:d.parsedType}),INVALID}return OK(s.data)}}ZodBoolean.create=a=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodDate extends ZodType{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==ZodParsedType.date){const g=this._getOrReturnCtx(s);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:g.parsedType}),INVALID}if(isNaN(s.data.getTime())){const g=this._getOrReturnCtx(s);return addIssueToContext(g,{code:ZodIssueCode.invalid_date}),INVALID}const d=new ParseStatus;let et;for(const g of this._def.checks)g.kind==="min"?s.data.getTime()<g.value&&(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.too_small,message:g.message,inclusive:!0,exact:!1,minimum:g.value,type:"date"}),d.dirty()):g.kind==="max"?s.data.getTime()>g.value&&(et=this._getOrReturnCtx(s,et),addIssueToContext(et,{code:ZodIssueCode.too_big,message:g.message,inclusive:!0,exact:!1,maximum:g.value,type:"date"}),d.dirty()):util.assertNever(g);return{status:d.value,value:new Date(s.data.getTime())}}_addCheck(s){return new ZodDate({...this._def,checks:[...this._def.checks,s]})}min(s,c){return this._addCheck({kind:"min",value:s.getTime(),message:errorUtil.toString(c)})}max(s,c){return this._addCheck({kind:"max",value:s.getTime(),message:errorUtil.toString(c)})}get minDate(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s!=null?new Date(s):null}}ZodDate.create=a=>new ZodDate({checks:[],coerce:(a==null?void 0:a.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(a)});class ZodSymbol extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.symbol){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:d.parsedType}),INVALID}return OK(s.data)}}ZodSymbol.create=a=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(a)});class ZodUndefined extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:d.parsedType}),INVALID}return OK(s.data)}}ZodUndefined.create=a=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(a)});class ZodNull extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.null){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:d.parsedType}),INVALID}return OK(s.data)}}ZodNull.create=a=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(a)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(s){return OK(s.data)}}ZodAny.create=a=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(a)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(s){return OK(s.data)}}ZodUnknown.create=a=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(a)});class ZodNever extends ZodType{_parse(s){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:c.parsedType}),INVALID}}ZodNever.create=a=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(a)});class ZodVoid extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:d.parsedType}),INVALID}return OK(s.data)}}ZodVoid.create=a=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(a)});class ZodArray extends ZodType{_parse(s){const{ctx:c,status:d}=this._processInputParams(s),et=this._def;if(c.parsedType!==ZodParsedType.array)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:c.parsedType}),INVALID;if(et.exactLength!==null){const at=c.data.length>et.exactLength.value,$t=c.data.length<et.exactLength.value;(at||$t)&&(addIssueToContext(c,{code:at?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:$t?et.exactLength.value:void 0,maximum:at?et.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:et.exactLength.message}),d.dirty())}if(et.minLength!==null&&c.data.length<et.minLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:et.minLength.value,type:"array",inclusive:!0,exact:!1,message:et.minLength.message}),d.dirty()),et.maxLength!==null&&c.data.length>et.maxLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:et.maxLength.value,type:"array",inclusive:!0,exact:!1,message:et.maxLength.message}),d.dirty()),c.common.async)return Promise.all([...c.data].map((at,$t)=>et.type._parseAsync(new ParseInputLazyPath(c,at,c.path,$t)))).then(at=>ParseStatus.mergeArray(d,at));const g=[...c.data].map((at,$t)=>et.type._parseSync(new ParseInputLazyPath(c,at,c.path,$t)));return ParseStatus.mergeArray(d,g)}get element(){return this._def.type}min(s,c){return new ZodArray({...this._def,minLength:{value:s,message:errorUtil.toString(c)}})}max(s,c){return new ZodArray({...this._def,maxLength:{value:s,message:errorUtil.toString(c)}})}length(s,c){return new ZodArray({...this._def,exactLength:{value:s,message:errorUtil.toString(c)}})}nonempty(s){return this.min(1,s)}}ZodArray.create=(a,s)=>new ZodArray({type:a,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(s)});function deepPartialify(a){if(a instanceof ZodObject){const s={};for(const c in a.shape){const d=a.shape[c];s[c]=ZodOptional.create(deepPartialify(d))}return new ZodObject({...a._def,shape:()=>s})}else return a instanceof ZodArray?new ZodArray({...a._def,type:deepPartialify(a.element)}):a instanceof ZodOptional?ZodOptional.create(deepPartialify(a.unwrap())):a instanceof ZodNullable?ZodNullable.create(deepPartialify(a.unwrap())):a instanceof ZodTuple?ZodTuple.create(a.items.map(s=>deepPartialify(s))):a}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),c=util.objectKeys(s);return this._cached={shape:s,keys:c}}_parse(s){if(this._getType(s)!==ZodParsedType.object){const b=this._getOrReturnCtx(s);return addIssueToContext(b,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:b.parsedType}),INVALID}const{status:d,ctx:et}=this._processInputParams(s),{shape:g,keys:at}=this._getCached(),$t=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const b in et.data)at.includes(b)||$t.push(b);const vt=[];for(const b of at){const pt=g[b],st=et.data[b];vt.push({key:{status:"valid",value:b},value:pt._parse(new ParseInputLazyPath(et,st,et.path,b)),alwaysSet:b in et.data})}if(this._def.catchall instanceof ZodNever){const b=this._def.unknownKeys;if(b==="passthrough")for(const pt of $t)vt.push({key:{status:"valid",value:pt},value:{status:"valid",value:et.data[pt]}});else if(b==="strict")$t.length>0&&(addIssueToContext(et,{code:ZodIssueCode.unrecognized_keys,keys:$t}),d.dirty());else if(b!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const b=this._def.catchall;for(const pt of $t){const st=et.data[pt];vt.push({key:{status:"valid",value:pt},value:b._parse(new ParseInputLazyPath(et,st,et.path,pt)),alwaysSet:pt in et.data})}}return et.common.async?Promise.resolve().then(async()=>{const b=[];for(const pt of vt){const st=await pt.key,wt=await pt.value;b.push({key:st,value:wt,alwaysSet:pt.alwaysSet})}return b}).then(b=>ParseStatus.mergeObjectSync(d,b)):ParseStatus.mergeObjectSync(d,vt)}get shape(){return this._def.shape()}strict(s){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(c,d)=>{var et,g,at,$t;const vt=(at=(g=(et=this._def).errorMap)===null||g===void 0?void 0:g.call(et,c,d).message)!==null&&at!==void 0?at:d.defaultError;return c.code==="unrecognized_keys"?{message:($t=errorUtil.errToObj(s).message)!==null&&$t!==void 0?$t:vt}:{message:vt}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(s){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new ZodObject({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(s,c){return this.augment({[s]:c})}catchall(s){return new ZodObject({...this._def,catchall:s})}pick(s){const c={};return util.objectKeys(s).forEach(d=>{s[d]&&this.shape[d]&&(c[d]=this.shape[d])}),new ZodObject({...this._def,shape:()=>c})}omit(s){const c={};return util.objectKeys(this.shape).forEach(d=>{s[d]||(c[d]=this.shape[d])}),new ZodObject({...this._def,shape:()=>c})}deepPartial(){return deepPartialify(this)}partial(s){const c={};return util.objectKeys(this.shape).forEach(d=>{const et=this.shape[d];s&&!s[d]?c[d]=et:c[d]=et.optional()}),new ZodObject({...this._def,shape:()=>c})}required(s){const c={};return util.objectKeys(this.shape).forEach(d=>{if(s&&!s[d])c[d]=this.shape[d];else{let g=this.shape[d];for(;g instanceof ZodOptional;)g=g._def.innerType;c[d]=g}}),new ZodObject({...this._def,shape:()=>c})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(a,s)=>new ZodObject({shape:()=>a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});ZodObject.strictCreate=(a,s)=>new ZodObject({shape:()=>a,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});ZodObject.lazycreate=(a,s)=>new ZodObject({shape:a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});class ZodUnion extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s),d=this._def.options;function et(g){for(const $t of g)if($t.result.status==="valid")return $t.result;for(const $t of g)if($t.result.status==="dirty")return c.common.issues.push(...$t.ctx.common.issues),$t.result;const at=g.map($t=>new ZodError($t.ctx.common.issues));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:at}),INVALID}if(c.common.async)return Promise.all(d.map(async g=>{const at={...c,common:{...c.common,issues:[]},parent:null};return{result:await g._parseAsync({data:c.data,path:c.path,parent:at}),ctx:at}})).then(et);{let g;const at=[];for(const vt of d){const b={...c,common:{...c.common,issues:[]},parent:null},pt=vt._parseSync({data:c.data,path:c.path,parent:b});if(pt.status==="valid")return pt;pt.status==="dirty"&&!g&&(g={result:pt,ctx:b}),b.common.issues.length&&at.push(b.common.issues)}if(g)return c.common.issues.push(...g.ctx.common.issues),g.result;const $t=at.map(vt=>new ZodError(vt));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:$t}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(a,s)=>new ZodUnion({options:a,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(s)});const getDiscriminator=a=>a instanceof ZodLazy?getDiscriminator(a.schema):a instanceof ZodEffects?getDiscriminator(a.innerType()):a instanceof ZodLiteral?[a.value]:a instanceof ZodEnum?a.options:a instanceof ZodNativeEnum?util.objectValues(a.enum):a instanceof ZodDefault?getDiscriminator(a._def.innerType):a instanceof ZodUndefined?[void 0]:a instanceof ZodNull?[null]:a instanceof ZodOptional?[void 0,...getDiscriminator(a.unwrap())]:a instanceof ZodNullable?[null,...getDiscriminator(a.unwrap())]:a instanceof ZodBranded||a instanceof ZodReadonly?getDiscriminator(a.unwrap()):a instanceof ZodCatch?getDiscriminator(a._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s);if(c.parsedType!==ZodParsedType.object)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:c.parsedType}),INVALID;const d=this.discriminator,et=c.data[d],g=this.optionsMap.get(et);return g?c.common.async?g._parseAsync({data:c.data,path:c.path,parent:c}):g._parseSync({data:c.data,path:c.path,parent:c}):(addIssueToContext(c,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[d]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(s,c,d){const et=new Map;for(const g of c){const at=getDiscriminator(g.shape[s]);if(!at.length)throw new Error(`A discriminator value for key \`${s}\` could not be extracted from all schema options`);for(const $t of at){if(et.has($t))throw new Error(`Discriminator property ${String(s)} has duplicate value ${String($t)}`);et.set($t,g)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:s,options:c,optionsMap:et,...processCreateParams(d)})}}function mergeValues(a,s){const c=getParsedType(a),d=getParsedType(s);if(a===s)return{valid:!0,data:a};if(c===ZodParsedType.object&&d===ZodParsedType.object){const et=util.objectKeys(s),g=util.objectKeys(a).filter($t=>et.indexOf($t)!==-1),at={...a,...s};for(const $t of g){const vt=mergeValues(a[$t],s[$t]);if(!vt.valid)return{valid:!1};at[$t]=vt.data}return{valid:!0,data:at}}else if(c===ZodParsedType.array&&d===ZodParsedType.array){if(a.length!==s.length)return{valid:!1};const et=[];for(let g=0;g<a.length;g++){const at=a[g],$t=s[g],vt=mergeValues(at,$t);if(!vt.valid)return{valid:!1};et.push(vt.data)}return{valid:!0,data:et}}else return c===ZodParsedType.date&&d===ZodParsedType.date&&+a==+s?{valid:!0,data:a}:{valid:!1}}class ZodIntersection extends ZodType{_parse(s){const{status:c,ctx:d}=this._processInputParams(s),et=(g,at)=>{if(isAborted(g)||isAborted(at))return INVALID;const $t=mergeValues(g.value,at.value);return $t.valid?((isDirty(g)||isDirty(at))&&c.dirty(),{status:c.value,value:$t.data}):(addIssueToContext(d,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return d.common.async?Promise.all([this._def.left._parseAsync({data:d.data,path:d.path,parent:d}),this._def.right._parseAsync({data:d.data,path:d.path,parent:d})]).then(([g,at])=>et(g,at)):et(this._def.left._parseSync({data:d.data,path:d.path,parent:d}),this._def.right._parseSync({data:d.data,path:d.path,parent:d}))}}ZodIntersection.create=(a,s,c)=>new ZodIntersection({left:a,right:s,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(c)});class ZodTuple extends ZodType{_parse(s){const{status:c,ctx:d}=this._processInputParams(s);if(d.parsedType!==ZodParsedType.array)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:d.parsedType}),INVALID;if(d.data.length<this._def.items.length)return addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&d.data.length>this._def.items.length&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),c.dirty());const g=[...d.data].map((at,$t)=>{const vt=this._def.items[$t]||this._def.rest;return vt?vt._parse(new ParseInputLazyPath(d,at,d.path,$t)):null}).filter(at=>!!at);return d.common.async?Promise.all(g).then(at=>ParseStatus.mergeArray(c,at)):ParseStatus.mergeArray(c,g)}get items(){return this._def.items}rest(s){return new ZodTuple({...this._def,rest:s})}}ZodTuple.create=(a,s)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:a,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(s)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:c,ctx:d}=this._processInputParams(s);if(d.parsedType!==ZodParsedType.object)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:d.parsedType}),INVALID;const et=[],g=this._def.keyType,at=this._def.valueType;for(const $t in d.data)et.push({key:g._parse(new ParseInputLazyPath(d,$t,d.path,$t)),value:at._parse(new ParseInputLazyPath(d,d.data[$t],d.path,$t)),alwaysSet:$t in d.data});return d.common.async?ParseStatus.mergeObjectAsync(c,et):ParseStatus.mergeObjectSync(c,et)}get element(){return this._def.valueType}static create(s,c,d){return c instanceof ZodType?new ZodRecord({keyType:s,valueType:c,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(d)}):new ZodRecord({keyType:ZodString.create(),valueType:s,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(c)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:c,ctx:d}=this._processInputParams(s);if(d.parsedType!==ZodParsedType.map)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:d.parsedType}),INVALID;const et=this._def.keyType,g=this._def.valueType,at=[...d.data.entries()].map(([$t,vt],b)=>({key:et._parse(new ParseInputLazyPath(d,$t,d.path,[b,"key"])),value:g._parse(new ParseInputLazyPath(d,vt,d.path,[b,"value"]))}));if(d.common.async){const $t=new Map;return Promise.resolve().then(async()=>{for(const vt of at){const b=await vt.key,pt=await vt.value;if(b.status==="aborted"||pt.status==="aborted")return INVALID;(b.status==="dirty"||pt.status==="dirty")&&c.dirty(),$t.set(b.value,pt.value)}return{status:c.value,value:$t}})}else{const $t=new Map;for(const vt of at){const b=vt.key,pt=vt.value;if(b.status==="aborted"||pt.status==="aborted")return INVALID;(b.status==="dirty"||pt.status==="dirty")&&c.dirty(),$t.set(b.value,pt.value)}return{status:c.value,value:$t}}}}ZodMap.create=(a,s,c)=>new ZodMap({valueType:s,keyType:a,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(c)});class ZodSet extends ZodType{_parse(s){const{status:c,ctx:d}=this._processInputParams(s);if(d.parsedType!==ZodParsedType.set)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:d.parsedType}),INVALID;const et=this._def;et.minSize!==null&&d.data.size<et.minSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:et.minSize.value,type:"set",inclusive:!0,exact:!1,message:et.minSize.message}),c.dirty()),et.maxSize!==null&&d.data.size>et.maxSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:et.maxSize.value,type:"set",inclusive:!0,exact:!1,message:et.maxSize.message}),c.dirty());const g=this._def.valueType;function at(vt){const b=new Set;for(const pt of vt){if(pt.status==="aborted")return INVALID;pt.status==="dirty"&&c.dirty(),b.add(pt.value)}return{status:c.value,value:b}}const $t=[...d.data.values()].map((vt,b)=>g._parse(new ParseInputLazyPath(d,vt,d.path,b)));return d.common.async?Promise.all($t).then(vt=>at(vt)):at($t)}min(s,c){return new ZodSet({...this._def,minSize:{value:s,message:errorUtil.toString(c)}})}max(s,c){return new ZodSet({...this._def,maxSize:{value:s,message:errorUtil.toString(c)}})}size(s,c){return this.min(s,c).max(s,c)}nonempty(s){return this.min(1,s)}}ZodSet.create=(a,s)=>new ZodSet({valueType:a,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(s)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(s){const{ctx:c}=this._processInputParams(s);if(c.parsedType!==ZodParsedType.function)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:c.parsedType}),INVALID;function d($t,vt){return makeIssue({data:$t,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(b=>!!b),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:vt}})}function et($t,vt){return makeIssue({data:$t,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(b=>!!b),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:vt}})}const g={errorMap:c.common.contextualErrorMap},at=c.data;if(this._def.returns instanceof ZodPromise){const $t=this;return OK(async function(...vt){const b=new ZodError([]),pt=await $t._def.args.parseAsync(vt,g).catch(Tt=>{throw b.addIssue(d(vt,Tt)),b}),st=await Reflect.apply(at,this,pt);return await $t._def.returns._def.type.parseAsync(st,g).catch(Tt=>{throw b.addIssue(et(st,Tt)),b})})}else{const $t=this;return OK(function(...vt){const b=$t._def.args.safeParse(vt,g);if(!b.success)throw new ZodError([d(vt,b.error)]);const pt=Reflect.apply(at,this,b.data),st=$t._def.returns.safeParse(pt,g);if(!st.success)throw new ZodError([et(pt,st.error)]);return st.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...s){return new ZodFunction({...this._def,args:ZodTuple.create(s).rest(ZodUnknown.create())})}returns(s){return new ZodFunction({...this._def,returns:s})}implement(s){return this.parse(s)}strictImplement(s){return this.parse(s)}static create(s,c,d){return new ZodFunction({args:s||ZodTuple.create([]).rest(ZodUnknown.create()),returns:c||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(d)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(s){const{ctx:c}=this._processInputParams(s);return this._def.getter()._parse({data:c.data,path:c.path,parent:c})}}ZodLazy.create=(a,s)=>new ZodLazy({getter:a,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(s)});class ZodLiteral extends ZodType{_parse(s){if(s.data!==this._def.value){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:s.data}}get value(){return this._def.value}}ZodLiteral.create=(a,s)=>new ZodLiteral({value:a,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(s)});function createZodEnum(a,s){return new ZodEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(s)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(s){if(typeof s.data!="string"){const c=this._getOrReturnCtx(s),d=this._def.values;return addIssueToContext(c,{expected:util.joinValues(d),received:c.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(s.data)){const c=this._getOrReturnCtx(s),d=this._def.values;return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_enum_value,options:d}),INVALID}return OK(s.data)}get options(){return this._def.values}get enum(){const s={};for(const c of this._def.values)s[c]=c;return s}get Values(){const s={};for(const c of this._def.values)s[c]=c;return s}get Enum(){const s={};for(const c of this._def.values)s[c]=c;return s}extract(s,c=this._def){return ZodEnum.create(s,{...this._def,...c})}exclude(s,c=this._def){return ZodEnum.create(this.options.filter(d=>!s.includes(d)),{...this._def,...c})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(s){const c=util.getValidEnumValues(this._def.values),d=this._getOrReturnCtx(s);if(d.parsedType!==ZodParsedType.string&&d.parsedType!==ZodParsedType.number){const et=util.objectValues(c);return addIssueToContext(d,{expected:util.joinValues(et),received:d.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(s.data)){const et=util.objectValues(c);return addIssueToContext(d,{received:d.data,code:ZodIssueCode.invalid_enum_value,options:et}),INVALID}return OK(s.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(a,s)=>new ZodNativeEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(s)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(s){const{ctx:c}=this._processInputParams(s);if(c.parsedType!==ZodParsedType.promise&&c.common.async===!1)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:c.parsedType}),INVALID;const d=c.parsedType===ZodParsedType.promise?c.data:Promise.resolve(c.data);return OK(d.then(et=>this._def.type.parseAsync(et,{path:c.path,errorMap:c.common.contextualErrorMap})))}}ZodPromise.create=(a,s)=>new ZodPromise({type:a,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(s)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:c,ctx:d}=this._processInputParams(s),et=this._def.effect||null,g={addIssue:at=>{addIssueToContext(d,at),at.fatal?c.abort():c.dirty()},get path(){return d.path}};if(g.addIssue=g.addIssue.bind(g),et.type==="preprocess"){const at=et.transform(d.data,g);if(d.common.async)return Promise.resolve(at).then(async $t=>{if(c.value==="aborted")return INVALID;const vt=await this._def.schema._parseAsync({data:$t,path:d.path,parent:d});return vt.status==="aborted"?INVALID:vt.status==="dirty"||c.value==="dirty"?DIRTY(vt.value):vt});{if(c.value==="aborted")return INVALID;const $t=this._def.schema._parseSync({data:at,path:d.path,parent:d});return $t.status==="aborted"?INVALID:$t.status==="dirty"||c.value==="dirty"?DIRTY($t.value):$t}}if(et.type==="refinement"){const at=$t=>{const vt=et.refinement($t,g);if(d.common.async)return Promise.resolve(vt);if(vt instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return $t};if(d.common.async===!1){const $t=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});return $t.status==="aborted"?INVALID:($t.status==="dirty"&&c.dirty(),at($t.value),{status:c.value,value:$t.value})}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then($t=>$t.status==="aborted"?INVALID:($t.status==="dirty"&&c.dirty(),at($t.value).then(()=>({status:c.value,value:$t.value}))))}if(et.type==="transform")if(d.common.async===!1){const at=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});if(!isValid(at))return at;const $t=et.transform(at.value,g);if($t instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:c.value,value:$t}}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then(at=>isValid(at)?Promise.resolve(et.transform(at.value,g)).then($t=>({status:c.value,value:$t})):at);util.assertNever(et)}}ZodEffects.create=(a,s,c)=>new ZodEffects({schema:a,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:s,...processCreateParams(c)});ZodEffects.createWithPreprocess=(a,s,c)=>new ZodEffects({schema:s,effect:{type:"preprocess",transform:a},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(c)});class ZodOptional extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodOptional.create=(a,s)=>new ZodOptional({innerType:a,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(s)});class ZodNullable extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.null?OK(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodNullable.create=(a,s)=>new ZodNullable({innerType:a,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(s)});class ZodDefault extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s);let d=c.data;return c.parsedType===ZodParsedType.undefined&&(d=this._def.defaultValue()),this._def.innerType._parse({data:d,path:c.path,parent:c})}removeDefault(){return this._def.innerType}}ZodDefault.create=(a,s)=>new ZodDefault({innerType:a,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...processCreateParams(s)});class ZodCatch extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s),d={...c,common:{...c.common,issues:[]}},et=this._def.innerType._parse({data:d.data,path:d.path,parent:{...d}});return isAsync(et)?et.then(g=>({status:"valid",value:g.status==="valid"?g.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})})):{status:"valid",value:et.status==="valid"?et.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(a,s)=>new ZodCatch({innerType:a,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...processCreateParams(s)});class ZodNaN extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.nan){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:d.parsedType}),INVALID}return{status:"valid",value:s.data}}}ZodNaN.create=a=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(a)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s),d=c.data;return this._def.type._parse({data:d,path:c.path,parent:c})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(s){const{status:c,ctx:d}=this._processInputParams(s);if(d.common.async)return(async()=>{const g=await this._def.in._parseAsync({data:d.data,path:d.path,parent:d});return g.status==="aborted"?INVALID:g.status==="dirty"?(c.dirty(),DIRTY(g.value)):this._def.out._parseAsync({data:g.value,path:d.path,parent:d})})();{const et=this._def.in._parseSync({data:d.data,path:d.path,parent:d});return et.status==="aborted"?INVALID:et.status==="dirty"?(c.dirty(),{status:"dirty",value:et.value}):this._def.out._parseSync({data:et.value,path:d.path,parent:d})}}static create(s,c){return new ZodPipeline({in:s,out:c,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(s){const c=this._def.innerType._parse(s),d=et=>(isValid(et)&&(et.value=Object.freeze(et.value)),et);return isAsync(c)?c.then(et=>d(et)):d(c)}unwrap(){return this._def.innerType}}ZodReadonly.create=(a,s)=>new ZodReadonly({innerType:a,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(s)});function custom(a,s={},c){return a?ZodAny.create().superRefine((d,et)=>{var g,at;if(!a(d)){const $t=typeof s=="function"?s(d):typeof s=="string"?{message:s}:s,vt=(at=(g=$t.fatal)!==null&&g!==void 0?g:c)!==null&&at!==void 0?at:!0,b=typeof $t=="string"?{message:$t}:$t;et.addIssue({code:"custom",...b,fatal:vt})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(a,s={message:`Input not instance of ${a.name}`})=>custom(c=>c instanceof a,s),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:a=>ZodString.create({...a,coerce:!0}),number:a=>ZodNumber.create({...a,coerce:!0}),boolean:a=>ZodBoolean.create({...a,coerce:!0}),bigint:a=>ZodBigInt.create({...a,coerce:!0}),date:a=>ZodDate.create({...a,coerce:!0})},NEVER=INVALID;var z$1=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const $89eedd556c436f6a$var$DEFAULT_ORIENTATION="horizontal",$89eedd556c436f6a$var$ORIENTATIONS=["horizontal","vertical"],$89eedd556c436f6a$export$1ff3c3f08ae963c0=reactExports.forwardRef((a,s)=>{const{decorative:c,orientation:d=$89eedd556c436f6a$var$DEFAULT_ORIENTATION,...et}=a,g=$89eedd556c436f6a$var$isValidOrientation(d)?d:$89eedd556c436f6a$var$DEFAULT_ORIENTATION,$t=c?{role:"none"}:{"aria-orientation":g==="vertical"?g:void 0,role:"separator"};return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-orientation":g},$t,et,{ref:s}))});$89eedd556c436f6a$export$1ff3c3f08ae963c0.propTypes={orientation(a,s,c){const d=a[s],et=String(d);return d&&!$89eedd556c436f6a$var$isValidOrientation(d)?new Error($89eedd556c436f6a$var$getInvalidOrientationError(et,c)):null}};function $89eedd556c436f6a$var$getInvalidOrientationError(a,s){return`Invalid prop \`orientation\` of value \`${a}\` supplied to \`${s}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${$89eedd556c436f6a$var$DEFAULT_ORIENTATION}\`.`}function $89eedd556c436f6a$var$isValidOrientation(a){return $89eedd556c436f6a$var$ORIENTATIONS.includes(a)}const $89eedd556c436f6a$export$be92b6f5f03c0fe9=$89eedd556c436f6a$export$1ff3c3f08ae963c0,Separator$1=reactExports.forwardRef(({className:a,orientation:s="horizontal",decorative:c=!0,...d},et)=>jsxRuntimeExports.jsx($89eedd556c436f6a$export$be92b6f5f03c0fe9,{ref:et,decorative:c,orientation:s,className:cn$1("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...d}));Separator$1.displayName=$89eedd556c436f6a$export$be92b6f5f03c0fe9.displayName;const $b73a6c6685e72184$export$b04be29aa201d4f5=reactExports.forwardRef((a,s)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.label,_extends$1({},a,{ref:s,onMouseDown:c=>{var d;(d=a.onMouseDown)===null||d===void 0||d.call(a,c),!c.defaultPrevented&&c.detail>1&&c.preventDefault()}}))),$b73a6c6685e72184$export$be92b6f5f03c0fe9=$b73a6c6685e72184$export$b04be29aa201d4f5,labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$1=reactExports.forwardRef(({className:a,disabled:s,...c},d)=>jsxRuntimeExports.jsx($b73a6c6685e72184$export$be92b6f5f03c0fe9,{ref:d,className:cn$1(labelVariants(),a,s?"opacity-50":"","select-none"),...c}));Label$1.displayName=$b73a6c6685e72184$export$be92b6f5f03c0fe9.displayName;const Form=FormProvider,FormFieldContext=reactExports.createContext({}),FormField=({...a})=>jsxRuntimeExports.jsx(FormFieldContext.Provider,{value:{name:a.name},children:jsxRuntimeExports.jsx(Controller,{...a})}),useFormField=()=>{const a=reactExports.useContext(FormFieldContext),s=reactExports.useContext(FormItemContext),{getFieldState:c,formState:d}=useFormContext(),et=c(a.name,d);if(!a)throw new Error("useFormField should be used within <FormField>");const{id:g}=s;return{id:g,name:a.name,formItemId:`${g}-form-item`,formDescriptionId:`${g}-form-item-description`,formMessageId:`${g}-form-item-message`,...et}},FormItemContext=reactExports.createContext({}),FormItem=reactExports.forwardRef(({className:a,...s},c)=>{const d=reactExports.useId();return jsxRuntimeExports.jsx(FormItemContext.Provider,{value:{id:d},children:jsxRuntimeExports.jsx("div",{ref:c,className:cn$1("space-y-2",a),...s})})});FormItem.displayName="FormItem";const FormLabel=reactExports.forwardRef(({className:a,...s},c)=>{const{error:d,formItemId:et}=useFormField();return jsxRuntimeExports.jsx(Label$1,{ref:c,className:cn$1(d&&"text-destructive","text-sm",a),htmlFor:et,...s})});FormLabel.displayName="FormLabel";const FormControl=reactExports.forwardRef(({...a},s)=>{const{error:c,formItemId:d,formDescriptionId:et,formMessageId:g}=useFormField();return jsxRuntimeExports.jsx($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:s,id:d,"aria-describedby":c?`${et} ${g}`:`${et}`,"aria-invalid":!!c,...a})});FormControl.displayName="FormControl";const FormDescription=reactExports.forwardRef(({className:a,...s},c)=>{const{formDescriptionId:d}=useFormField();return jsxRuntimeExports.jsx("p",{ref:c,id:d,className:cn$1("text-[0.8rem] text-muted-foreground",a),...s})});FormDescription.displayName="FormDescription";const FormMessage=reactExports.forwardRef(({className:a,children:s,...c},d)=>{const{error:et,formMessageId:g}=useFormField(),at=et?String(et==null?void 0:et.message):s;return at?jsxRuntimeExports.jsx("p",{ref:d,id:g,className:cn$1("text-[0.8rem] font-medium text-destructive",a),...c,children:at}):null});FormMessage.displayName="FormMessage";function $010c2913dbd2fe3d$export$5cae361ad82dce8b(a){const s=reactExports.useRef({value:a,previous:a});return reactExports.useMemo(()=>(s.current.value!==a&&(s.current.previous=s.current.value,s.current.value=a),s.current.previous),[a])}const $6be4966fd9bbc698$var$SWITCH_NAME="Switch",[$6be4966fd9bbc698$var$createSwitchContext,$6be4966fd9bbc698$export$cf7f5f17f69cbd43]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6be4966fd9bbc698$var$SWITCH_NAME),[$6be4966fd9bbc698$var$SwitchProvider,$6be4966fd9bbc698$var$useSwitchContext]=$6be4966fd9bbc698$var$createSwitchContext($6be4966fd9bbc698$var$SWITCH_NAME),$6be4966fd9bbc698$export$b5d5cf8927ab7262=reactExports.forwardRef((a,s)=>{const{__scopeSwitch:c,name:d,checked:et,defaultChecked:g,required:at,disabled:$t,value:vt="on",onCheckedChange:b,...pt}=a,[st,wt]=reactExports.useState(null),Tt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,Gt=>wt(Gt)),Ct=reactExports.useRef(!1),jt=st?!!st.closest("form"):!0,[Lt=!1,Ht]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:et,defaultProp:g,onChange:b});return reactExports.createElement($6be4966fd9bbc698$var$SwitchProvider,{scope:c,checked:Lt,disabled:$t},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"switch","aria-checked":Lt,"aria-required":at,"data-state":$6be4966fd9bbc698$var$getState(Lt),"data-disabled":$t?"":void 0,disabled:$t,value:vt},pt,{ref:Tt,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onClick,Gt=>{Ht(Kt=>!Kt),jt&&(Ct.current=Gt.isPropagationStopped(),Ct.current||Gt.stopPropagation())})})),jt&&reactExports.createElement($6be4966fd9bbc698$var$BubbleInput,{control:st,bubbles:!Ct.current,name:d,value:vt,checked:Lt,required:at,disabled:$t,style:{transform:"translateX(-100%)"}}))}),$6be4966fd9bbc698$var$THUMB_NAME="SwitchThumb",$6be4966fd9bbc698$export$4d07bf653ea69106=reactExports.forwardRef((a,s)=>{const{__scopeSwitch:c,...d}=a,et=$6be4966fd9bbc698$var$useSwitchContext($6be4966fd9bbc698$var$THUMB_NAME,c);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"data-state":$6be4966fd9bbc698$var$getState(et.checked),"data-disabled":et.disabled?"":void 0},d,{ref:s}))}),$6be4966fd9bbc698$var$BubbleInput=a=>{const{control:s,checked:c,bubbles:d=!0,...et}=a,g=reactExports.useRef(null),at=$010c2913dbd2fe3d$export$5cae361ad82dce8b(c),$t=$db6c3485150b8e66$export$1ab7ae714698c4b8(s);return reactExports.useEffect(()=>{const vt=g.current,b=window.HTMLInputElement.prototype,st=Object.getOwnPropertyDescriptor(b,"checked").set;if(at!==c&&st){const wt=new Event("click",{bubbles:d});st.call(vt,c),vt.dispatchEvent(wt)}},[at,c,d]),reactExports.createElement("input",_extends$1({type:"checkbox","aria-hidden":!0,defaultChecked:c},et,{tabIndex:-1,ref:g,style:{...a.style,...$t,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $6be4966fd9bbc698$var$getState(a){return a?"checked":"unchecked"}const $6be4966fd9bbc698$export$be92b6f5f03c0fe9=$6be4966fd9bbc698$export$b5d5cf8927ab7262,$6be4966fd9bbc698$export$6521433ed15a34db=$6be4966fd9bbc698$export$4d07bf653ea69106,Switch=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($6be4966fd9bbc698$export$be92b6f5f03c0fe9,{className:cn$1("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),tabIndex:-1,...s,ref:c,children:jsxRuntimeExports.jsx($6be4966fd9bbc698$export$6521433ed15a34db,{className:cn$1("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=$6be4966fd9bbc698$export$be92b6f5f03c0fe9.displayName;const $f631663db3294ace$var$DirectionContext=reactExports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(a){const s=reactExports.useContext($f631663db3294ace$var$DirectionContext);return a||s||"ltr"}const $d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=reactExports.forwardRef((a,s)=>reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:a.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:a.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends$1({},a,{ref:s}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=reactExports.forwardRef((a,s)=>{const{__scopeRovingFocusGroup:c,orientation:d,loop:et=!1,dir:g,currentTabStopId:at,defaultCurrentTabStopId:$t,onCurrentTabStopIdChange:vt,onEntryFocus:b,...pt}=a,st=reactExports.useRef(null),wt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,st),Tt=$f631663db3294ace$export$b39126d51d94e6f3(g),[Ct=null,jt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:at,defaultProp:$t,onChange:vt}),[Lt,Ht]=reactExports.useState(!1),Gt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(b),Kt=$d7bdfb9eb0fdf311$var$useCollection(c),tr=reactExports.useRef(!1),[rr,Lr]=reactExports.useState(0);return reactExports.useEffect(()=>{const jr=st.current;if(jr)return jr.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Gt),()=>jr.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Gt)},[Gt]),reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:c,orientation:d,dir:Tt,loop:et,currentTabStopId:Ct,onItemFocus:reactExports.useCallback(jr=>jt(jr),[jt]),onItemShiftTab:reactExports.useCallback(()=>Ht(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>Lr(jr=>jr+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>Lr(jr=>jr-1),[])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:Lt||rr===0?-1:0,"data-orientation":d},pt,{ref:wt,style:{outline:"none",...a.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onMouseDown,()=>{tr.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocus,jr=>{const Yr=!tr.current;if(jr.target===jr.currentTarget&&Yr&&!Lt){const An=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(jr.currentTarget.dispatchEvent(An),!An.defaultPrevented){const No=Kt().filter(Qo=>Qo.focusable),o0=No.find(Qo=>Qo.active),t0=No.find(Qo=>Qo.id===Ct),n0=[o0,t0,...No].filter(Boolean).map(Qo=>Qo.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(n0)}}tr.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onBlur,()=>Ht(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=reactExports.forwardRef((a,s)=>{const{__scopeRovingFocusGroup:c,focusable:d=!0,active:et=!1,tabStopId:g,...at}=a,$t=$1746a345f3d73bb7$export$f680877a34711e37(),vt=g||$t,b=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,c),pt=b.currentTabStopId===vt,st=$d7bdfb9eb0fdf311$var$useCollection(c),{onFocusableItemAdd:wt,onFocusableItemRemove:Tt}=b;return reactExports.useEffect(()=>{if(d)return wt(),()=>Tt()},[d,wt,Tt]),reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:c,id:vt,focusable:d,active:et},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({tabIndex:pt?0:-1,"data-orientation":b.orientation},at,{ref:s,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onMouseDown,Ct=>{d?b.onItemFocus(vt):Ct.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocus,()=>b.onItemFocus(vt)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onKeyDown,Ct=>{if(Ct.key==="Tab"&&Ct.shiftKey){b.onItemShiftTab();return}if(Ct.target!==Ct.currentTarget)return;const jt=$d7bdfb9eb0fdf311$var$getFocusIntent(Ct,b.orientation,b.dir);if(jt!==void 0){Ct.preventDefault();let Ht=st().filter(Gt=>Gt.focusable).map(Gt=>Gt.ref.current);if(jt==="last")Ht.reverse();else if(jt==="prev"||jt==="next"){jt==="prev"&&Ht.reverse();const Gt=Ht.indexOf(Ct.currentTarget);Ht=b.loop?$d7bdfb9eb0fdf311$var$wrapArray(Ht,Gt+1):Ht.slice(Gt+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(Ht))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(a,s){return s!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function $d7bdfb9eb0fdf311$var$getFocusIntent(a,s,c){const d=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(a.key,c);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(d))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(d)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[d]}function $d7bdfb9eb0fdf311$var$focusFirst(a){const s=document.activeElement;for(const c of a)if(c===s||(c.focus(),document.activeElement!==s))return}function $d7bdfb9eb0fdf311$var$wrapArray(a,s){return a.map((c,d)=>a[(s+d)%a.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454,$69cb30bb0017df05$var$TABS_NAME="Tabs",[$69cb30bb0017df05$var$createTabsContext,$69cb30bb0017df05$export$355f5bd209d7b13a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($69cb30bb0017df05$var$TABS_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$69cb30bb0017df05$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$69cb30bb0017df05$var$TabsProvider,$69cb30bb0017df05$var$useTabsContext]=$69cb30bb0017df05$var$createTabsContext($69cb30bb0017df05$var$TABS_NAME),$69cb30bb0017df05$export$b2539bed5023c21c=reactExports.forwardRef((a,s)=>{const{__scopeTabs:c,value:d,onValueChange:et,defaultValue:g,orientation:at="horizontal",dir:$t,activationMode:vt="automatic",...b}=a,pt=$f631663db3294ace$export$b39126d51d94e6f3($t),[st,wt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:d,onChange:et,defaultProp:g});return reactExports.createElement($69cb30bb0017df05$var$TabsProvider,{scope:c,baseId:$1746a345f3d73bb7$export$f680877a34711e37(),value:st,onValueChange:wt,orientation:at,dir:pt,activationMode:vt},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({dir:pt,"data-orientation":at},b,{ref:s})))}),$69cb30bb0017df05$var$TAB_LIST_NAME="TabsList",$69cb30bb0017df05$export$9712d22edc0d78c1=reactExports.forwardRef((a,s)=>{const{__scopeTabs:c,loop:d=!0,...et}=a,g=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TAB_LIST_NAME,c),at=$69cb30bb0017df05$var$useRovingFocusGroupScope(c);return reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},at,{orientation:g.orientation,dir:g.dir,loop:d}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"tablist","aria-orientation":g.orientation},et,{ref:s})))}),$69cb30bb0017df05$var$TRIGGER_NAME="TabsTrigger",$69cb30bb0017df05$export$8114b9fdfdf9f3ba=reactExports.forwardRef((a,s)=>{const{__scopeTabs:c,value:d,disabled:et=!1,...g}=a,at=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TRIGGER_NAME,c),$t=$69cb30bb0017df05$var$useRovingFocusGroupScope(c),vt=$69cb30bb0017df05$var$makeTriggerId(at.baseId,d),b=$69cb30bb0017df05$var$makeContentId(at.baseId,d),pt=d===at.value;return reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},$t,{focusable:!et,active:pt}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"tab","aria-selected":pt,"aria-controls":b,"data-state":pt?"active":"inactive","data-disabled":et?"":void 0,disabled:et,id:vt},g,{ref:s,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onMouseDown,st=>{!et&&st.button===0&&st.ctrlKey===!1?at.onValueChange(d):st.preventDefault()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onKeyDown,st=>{[" ","Enter"].includes(st.key)&&at.onValueChange(d)}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocus,()=>{const st=at.activationMode!=="manual";!pt&&!et&&st&&at.onValueChange(d)})})))}),$69cb30bb0017df05$var$CONTENT_NAME="TabsContent",$69cb30bb0017df05$export$bd905d70e8fd2ebb=reactExports.forwardRef((a,s)=>{const{__scopeTabs:c,value:d,forceMount:et,children:g,...at}=a,$t=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$CONTENT_NAME,c),vt=$69cb30bb0017df05$var$makeTriggerId($t.baseId,d),b=$69cb30bb0017df05$var$makeContentId($t.baseId,d),pt=d===$t.value,st=reactExports.useRef(pt);return reactExports.useEffect(()=>{const wt=requestAnimationFrame(()=>st.current=!1);return()=>cancelAnimationFrame(wt)},[]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:et||pt},({present:wt})=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":pt?"active":"inactive","data-orientation":$t.orientation,role:"tabpanel","aria-labelledby":vt,hidden:!wt,id:b,tabIndex:0},at,{ref:s,style:{...a.style,animationDuration:st.current?"0s":void 0}}),wt&&g))});function $69cb30bb0017df05$var$makeTriggerId(a,s){return`${a}-trigger-${s}`}function $69cb30bb0017df05$var$makeContentId(a,s){return`${a}-content-${s}`}const $69cb30bb0017df05$export$be92b6f5f03c0fe9=$69cb30bb0017df05$export$b2539bed5023c21c,$69cb30bb0017df05$export$54c2e3dc7acea9f5=$69cb30bb0017df05$export$9712d22edc0d78c1,$69cb30bb0017df05$export$41fb9f06171c75f4=$69cb30bb0017df05$export$8114b9fdfdf9f3ba,$69cb30bb0017df05$export$7c6e2c02157bb7d2=$69cb30bb0017df05$export$bd905d70e8fd2ebb,Tabs=$69cb30bb0017df05$export$be92b6f5f03c0fe9,TabsList=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($69cb30bb0017df05$export$54c2e3dc7acea9f5,{ref:c,className:cn$1("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),tabIndex:-1,...s}));TabsList.displayName=$69cb30bb0017df05$export$54c2e3dc7acea9f5.displayName;const TabsTrigger=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($69cb30bb0017df05$export$41fb9f06171c75f4,{ref:c,className:cn$1("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),tabIndex:-1,...s}));TabsTrigger.displayName=$69cb30bb0017df05$export$41fb9f06171c75f4.displayName;const TabsContent=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($69cb30bb0017df05$export$7c6e2c02157bb7d2,{ref:c,className:cn$1("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),tabIndex:-1,...s}));TabsContent.displayName=$69cb30bb0017df05$export$7c6e2c02157bb7d2.displayName;function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(a,[s,c]){return Math.min(c,Math.max(s,a))}function $6c2e24571c90391f$export$3e6543de14f8614f(a,s){return reactExports.useReducer((c,d)=>{const et=s[c][d];return et??c},a)}const $57acba87d6e25586$var$SCROLL_AREA_NAME="ScrollArea",[$57acba87d6e25586$var$createScrollAreaContext,$57acba87d6e25586$export$488468afe3a6f2b1]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($57acba87d6e25586$var$SCROLL_AREA_NAME),[$57acba87d6e25586$var$ScrollAreaProvider,$57acba87d6e25586$var$useScrollAreaContext]=$57acba87d6e25586$var$createScrollAreaContext($57acba87d6e25586$var$SCROLL_AREA_NAME),$57acba87d6e25586$export$ccf8d8d7bbf3c2cc=reactExports.forwardRef((a,s)=>{const{__scopeScrollArea:c,type:d="hover",dir:et,scrollHideDelay:g=600,...at}=a,[$t,vt]=reactExports.useState(null),[b,pt]=reactExports.useState(null),[st,wt]=reactExports.useState(null),[Tt,Ct]=reactExports.useState(null),[jt,Lt]=reactExports.useState(null),[Ht,Gt]=reactExports.useState(0),[Kt,tr]=reactExports.useState(0),[rr,Lr]=reactExports.useState(!1),[jr,Yr]=reactExports.useState(!1),An=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,o0=>vt(o0)),No=$f631663db3294ace$export$b39126d51d94e6f3(et);return reactExports.createElement($57acba87d6e25586$var$ScrollAreaProvider,{scope:c,type:d,dir:No,scrollHideDelay:g,scrollArea:$t,viewport:b,onViewportChange:pt,content:st,onContentChange:wt,scrollbarX:Tt,onScrollbarXChange:Ct,scrollbarXEnabled:rr,onScrollbarXEnabledChange:Lr,scrollbarY:jt,onScrollbarYChange:Lt,scrollbarYEnabled:jr,onScrollbarYEnabledChange:Yr,onCornerWidthChange:Gt,onCornerHeightChange:tr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({dir:No},at,{ref:An,style:{position:"relative","--radix-scroll-area-corner-width":Ht+"px","--radix-scroll-area-corner-height":Kt+"px",...a.style}})))}),$57acba87d6e25586$var$VIEWPORT_NAME="ScrollAreaViewport",$57acba87d6e25586$export$a21cbf9f11fca853=reactExports.forwardRef((a,s)=>{const{__scopeScrollArea:c,children:d,...et}=a,g=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$VIEWPORT_NAME,c),at=reactExports.useRef(null),$t=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,at,g.onViewportChange);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-radix-scroll-area-viewport":""},et,{ref:$t,style:{overflowX:g.scrollbarXEnabled?"scroll":"hidden",overflowY:g.scrollbarYEnabled?"scroll":"hidden",...a.style}}),reactExports.createElement("div",{ref:g.onContentChange,style:{minWidth:"100%",display:"table"}},d)))}),$57acba87d6e25586$var$SCROLLBAR_NAME="ScrollAreaScrollbar",$57acba87d6e25586$export$2fabd85d0eba3c57=reactExports.forwardRef((a,s)=>{const{forceMount:c,...d}=a,et=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,a.__scopeScrollArea),{onScrollbarXEnabledChange:g,onScrollbarYEnabledChange:at}=et,$t=a.orientation==="horizontal";return reactExports.useEffect(()=>($t?g(!0):at(!0),()=>{$t?g(!1):at(!1)}),[$t,g,at]),et.type==="hover"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarHover,_extends$1({},d,{ref:s,forceMount:c})):et.type==="scroll"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarScroll,_extends$1({},d,{ref:s,forceMount:c})):et.type==="auto"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarAuto,_extends$1({},d,{ref:s,forceMount:c})):et.type==="always"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarVisible,_extends$1({},d,{ref:s})):null}),$57acba87d6e25586$var$ScrollAreaScrollbarHover=reactExports.forwardRef((a,s)=>{const{forceMount:c,...d}=a,et=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,a.__scopeScrollArea),[g,at]=reactExports.useState(!1);return reactExports.useEffect(()=>{const $t=et.scrollArea;let vt=0;if($t){const b=()=>{window.clearTimeout(vt),at(!0)},pt=()=>{vt=window.setTimeout(()=>at(!1),et.scrollHideDelay)};return $t.addEventListener("pointerenter",b),$t.addEventListener("pointerleave",pt),()=>{window.clearTimeout(vt),$t.removeEventListener("pointerenter",b),$t.removeEventListener("pointerleave",pt)}}},[et.scrollArea,et.scrollHideDelay]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:c||g},reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarAuto,_extends$1({"data-state":g?"visible":"hidden"},d,{ref:s})))}),$57acba87d6e25586$var$ScrollAreaScrollbarScroll=reactExports.forwardRef((a,s)=>{const{forceMount:c,...d}=a,et=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,a.__scopeScrollArea),g=a.orientation==="horizontal",at=$57acba87d6e25586$var$useDebounceCallback(()=>vt("SCROLL_END"),100),[$t,vt]=$6c2e24571c90391f$export$3e6543de14f8614f("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if($t==="idle"){const b=window.setTimeout(()=>vt("HIDE"),et.scrollHideDelay);return()=>window.clearTimeout(b)}},[$t,et.scrollHideDelay,vt]),reactExports.useEffect(()=>{const b=et.viewport,pt=g?"scrollLeft":"scrollTop";if(b){let st=b[pt];const wt=()=>{const Tt=b[pt];st!==Tt&&(vt("SCROLL"),at()),st=Tt};return b.addEventListener("scroll",wt),()=>b.removeEventListener("scroll",wt)}},[et.viewport,g,vt,at]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:c||$t!=="hidden"},reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarVisible,_extends$1({"data-state":$t==="hidden"?"hidden":"visible"},d,{ref:s,onPointerEnter:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerEnter,()=>vt("POINTER_ENTER")),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerLeave,()=>vt("POINTER_LEAVE"))})))}),$57acba87d6e25586$var$ScrollAreaScrollbarAuto=reactExports.forwardRef((a,s)=>{const c=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,a.__scopeScrollArea),{forceMount:d,...et}=a,[g,at]=reactExports.useState(!1),$t=a.orientation==="horizontal",vt=$57acba87d6e25586$var$useDebounceCallback(()=>{if(c.viewport){const b=c.viewport.offsetWidth<c.viewport.scrollWidth,pt=c.viewport.offsetHeight<c.viewport.scrollHeight;at($t?b:pt)}},10);return $57acba87d6e25586$var$useResizeObserver(c.viewport,vt),$57acba87d6e25586$var$useResizeObserver(c.content,vt),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:d||g},reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarVisible,_extends$1({"data-state":g?"visible":"hidden"},et,{ref:s})))}),$57acba87d6e25586$var$ScrollAreaScrollbarVisible=reactExports.forwardRef((a,s)=>{const{orientation:c="vertical",...d}=a,et=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,a.__scopeScrollArea),g=reactExports.useRef(null),at=reactExports.useRef(0),[$t,vt]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),b=$57acba87d6e25586$var$getThumbRatio($t.viewport,$t.content),pt={...d,sizes:$t,onSizesChange:vt,hasThumb:b>0&&b<1,onThumbChange:wt=>g.current=wt,onThumbPointerUp:()=>at.current=0,onThumbPointerDown:wt=>at.current=wt};function st(wt,Tt){return $57acba87d6e25586$var$getScrollPositionFromPointer(wt,at.current,$t,Tt)}return c==="horizontal"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarX,_extends$1({},pt,{ref:s,onThumbPositionChange:()=>{if(et.viewport&&g.current){const wt=et.viewport.scrollLeft,Tt=$57acba87d6e25586$var$getThumbOffsetFromScroll(wt,$t,et.dir);g.current.style.transform=`translate3d(${Tt}px, 0, 0)`}},onWheelScroll:wt=>{et.viewport&&(et.viewport.scrollLeft=wt)},onDragScroll:wt=>{et.viewport&&(et.viewport.scrollLeft=st(wt,et.dir))}})):c==="vertical"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarY,_extends$1({},pt,{ref:s,onThumbPositionChange:()=>{if(et.viewport&&g.current){const wt=et.viewport.scrollTop,Tt=$57acba87d6e25586$var$getThumbOffsetFromScroll(wt,$t);g.current.style.transform=`translate3d(0, ${Tt}px, 0)`}},onWheelScroll:wt=>{et.viewport&&(et.viewport.scrollTop=wt)},onDragScroll:wt=>{et.viewport&&(et.viewport.scrollTop=st(wt))}})):null}),$57acba87d6e25586$var$ScrollAreaScrollbarX=reactExports.forwardRef((a,s)=>{const{sizes:c,onSizesChange:d,...et}=a,g=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,a.__scopeScrollArea),[at,$t]=reactExports.useState(),vt=reactExports.useRef(null),b=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,vt,g.onScrollbarXChange);return reactExports.useEffect(()=>{vt.current&&$t(getComputedStyle(vt.current))},[vt]),reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarImpl,_extends$1({"data-orientation":"horizontal"},et,{ref:b,sizes:c,style:{bottom:0,left:g.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:g.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$57acba87d6e25586$var$getThumbSize(c)+"px",...a.style},onThumbPointerDown:pt=>a.onThumbPointerDown(pt.x),onDragScroll:pt=>a.onDragScroll(pt.x),onWheelScroll:(pt,st)=>{if(g.viewport){const wt=g.viewport.scrollLeft+pt.deltaX;a.onWheelScroll(wt),$57acba87d6e25586$var$isScrollingWithinScrollbarBounds(wt,st)&&pt.preventDefault()}},onResize:()=>{vt.current&&g.viewport&&at&&d({content:g.viewport.scrollWidth,viewport:g.viewport.offsetWidth,scrollbar:{size:vt.current.clientWidth,paddingStart:$57acba87d6e25586$var$toInt(at.paddingLeft),paddingEnd:$57acba87d6e25586$var$toInt(at.paddingRight)}})}}))}),$57acba87d6e25586$var$ScrollAreaScrollbarY=reactExports.forwardRef((a,s)=>{const{sizes:c,onSizesChange:d,...et}=a,g=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,a.__scopeScrollArea),[at,$t]=reactExports.useState(),vt=reactExports.useRef(null),b=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,vt,g.onScrollbarYChange);return reactExports.useEffect(()=>{vt.current&&$t(getComputedStyle(vt.current))},[vt]),reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarImpl,_extends$1({"data-orientation":"vertical"},et,{ref:b,sizes:c,style:{top:0,right:g.dir==="ltr"?0:void 0,left:g.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$57acba87d6e25586$var$getThumbSize(c)+"px",...a.style},onThumbPointerDown:pt=>a.onThumbPointerDown(pt.y),onDragScroll:pt=>a.onDragScroll(pt.y),onWheelScroll:(pt,st)=>{if(g.viewport){const wt=g.viewport.scrollTop+pt.deltaY;a.onWheelScroll(wt),$57acba87d6e25586$var$isScrollingWithinScrollbarBounds(wt,st)&&pt.preventDefault()}},onResize:()=>{vt.current&&g.viewport&&at&&d({content:g.viewport.scrollHeight,viewport:g.viewport.offsetHeight,scrollbar:{size:vt.current.clientHeight,paddingStart:$57acba87d6e25586$var$toInt(at.paddingTop),paddingEnd:$57acba87d6e25586$var$toInt(at.paddingBottom)}})}}))}),[$57acba87d6e25586$var$ScrollbarProvider,$57acba87d6e25586$var$useScrollbarContext]=$57acba87d6e25586$var$createScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME),$57acba87d6e25586$var$ScrollAreaScrollbarImpl=reactExports.forwardRef((a,s)=>{const{__scopeScrollArea:c,sizes:d,hasThumb:et,onThumbChange:g,onThumbPointerUp:at,onThumbPointerDown:$t,onThumbPositionChange:vt,onDragScroll:b,onWheelScroll:pt,onResize:st,...wt}=a,Tt=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,c),[Ct,jt]=reactExports.useState(null),Lt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,An=>jt(An)),Ht=reactExports.useRef(null),Gt=reactExports.useRef(""),Kt=Tt.viewport,tr=d.content-d.viewport,rr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(pt),Lr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(vt),jr=$57acba87d6e25586$var$useDebounceCallback(st,10);function Yr(An){if(Ht.current){const No=An.clientX-Ht.current.left,o0=An.clientY-Ht.current.top;b({x:No,y:o0})}}return reactExports.useEffect(()=>{const An=No=>{const o0=No.target;(Ct==null?void 0:Ct.contains(o0))&&rr(No,tr)};return document.addEventListener("wheel",An,{passive:!1}),()=>document.removeEventListener("wheel",An,{passive:!1})},[Kt,Ct,tr,rr]),reactExports.useEffect(Lr,[d,Lr]),$57acba87d6e25586$var$useResizeObserver(Ct,jr),$57acba87d6e25586$var$useResizeObserver(Tt.content,jr),reactExports.createElement($57acba87d6e25586$var$ScrollbarProvider,{scope:c,scrollbar:Ct,hasThumb:et,onThumbChange:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(g),onThumbPointerUp:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(at),onThumbPositionChange:Lr,onThumbPointerDown:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a($t)},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},wt,{ref:Lt,style:{position:"absolute",...wt.style},onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDown,An=>{An.button===0&&(An.target.setPointerCapture(An.pointerId),Ht.current=Ct.getBoundingClientRect(),Gt.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",Tt.viewport&&(Tt.viewport.style.scrollBehavior="auto"),Yr(An))}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerMove,Yr),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerUp,An=>{const No=An.target;No.hasPointerCapture(An.pointerId)&&No.releasePointerCapture(An.pointerId),document.body.style.webkitUserSelect=Gt.current,Tt.viewport&&(Tt.viewport.style.scrollBehavior=""),Ht.current=null})})))}),$57acba87d6e25586$var$THUMB_NAME="ScrollAreaThumb",$57acba87d6e25586$export$9fba1154677d7cd2=reactExports.forwardRef((a,s)=>{const{forceMount:c,...d}=a,et=$57acba87d6e25586$var$useScrollbarContext($57acba87d6e25586$var$THUMB_NAME,a.__scopeScrollArea);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:c||et.hasThumb},reactExports.createElement($57acba87d6e25586$var$ScrollAreaThumbImpl,_extends$1({ref:s},d)))}),$57acba87d6e25586$var$ScrollAreaThumbImpl=reactExports.forwardRef((a,s)=>{const{__scopeScrollArea:c,style:d,...et}=a,g=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$THUMB_NAME,c),at=$57acba87d6e25586$var$useScrollbarContext($57acba87d6e25586$var$THUMB_NAME,c),{onThumbPositionChange:$t}=at,vt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,st=>at.onThumbChange(st)),b=reactExports.useRef(),pt=$57acba87d6e25586$var$useDebounceCallback(()=>{b.current&&(b.current(),b.current=void 0)},100);return reactExports.useEffect(()=>{const st=g.viewport;if(st){const wt=()=>{if(pt(),!b.current){const Tt=$57acba87d6e25586$var$addUnlinkedScrollListener(st,$t);b.current=Tt,$t()}};return $t(),st.addEventListener("scroll",wt),()=>st.removeEventListener("scroll",wt)}},[g.viewport,pt,$t]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":at.hasThumb?"visible":"hidden"},et,{ref:vt,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...d},onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDownCapture,st=>{const Tt=st.target.getBoundingClientRect(),Ct=st.clientX-Tt.left,jt=st.clientY-Tt.top;at.onThumbPointerDown({x:Ct,y:jt})}),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerUp,at.onThumbPointerUp)}))}),$57acba87d6e25586$var$CORNER_NAME="ScrollAreaCorner",$57acba87d6e25586$export$56969d565df7cc4b=reactExports.forwardRef((a,s)=>{const c=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$CORNER_NAME,a.__scopeScrollArea),d=!!(c.scrollbarX&&c.scrollbarY);return c.type!=="scroll"&&d?reactExports.createElement($57acba87d6e25586$var$ScrollAreaCornerImpl,_extends$1({},a,{ref:s})):null}),$57acba87d6e25586$var$ScrollAreaCornerImpl=reactExports.forwardRef((a,s)=>{const{__scopeScrollArea:c,...d}=a,et=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$CORNER_NAME,c),[g,at]=reactExports.useState(0),[$t,vt]=reactExports.useState(0),b=!!(g&&$t);return $57acba87d6e25586$var$useResizeObserver(et.scrollbarX,()=>{var pt;const st=((pt=et.scrollbarX)===null||pt===void 0?void 0:pt.offsetHeight)||0;et.onCornerHeightChange(st),vt(st)}),$57acba87d6e25586$var$useResizeObserver(et.scrollbarY,()=>{var pt;const st=((pt=et.scrollbarY)===null||pt===void 0?void 0:pt.offsetWidth)||0;et.onCornerWidthChange(st),at(st)}),b?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},d,{ref:s,style:{width:g,height:$t,position:"absolute",right:et.dir==="ltr"?0:void 0,left:et.dir==="rtl"?0:void 0,bottom:0,...a.style}})):null});function $57acba87d6e25586$var$toInt(a){return a?parseInt(a,10):0}function $57acba87d6e25586$var$getThumbRatio(a,s){const c=a/s;return isNaN(c)?0:c}function $57acba87d6e25586$var$getThumbSize(a){const s=$57acba87d6e25586$var$getThumbRatio(a.viewport,a.content),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,d=(a.scrollbar.size-c)*s;return Math.max(d,18)}function $57acba87d6e25586$var$getScrollPositionFromPointer(a,s,c,d="ltr"){const et=$57acba87d6e25586$var$getThumbSize(c),g=et/2,at=s||g,$t=et-at,vt=c.scrollbar.paddingStart+at,b=c.scrollbar.size-c.scrollbar.paddingEnd-$t,pt=c.content-c.viewport,st=d==="ltr"?[0,pt]:[pt*-1,0];return $57acba87d6e25586$var$linearScale([vt,b],st)(a)}function $57acba87d6e25586$var$getThumbOffsetFromScroll(a,s,c="ltr"){const d=$57acba87d6e25586$var$getThumbSize(s),et=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,g=s.scrollbar.size-et,at=s.content-s.viewport,$t=g-d,vt=c==="ltr"?[0,at]:[at*-1,0],b=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(a,vt);return $57acba87d6e25586$var$linearScale([0,at],[0,$t])(b)}function $57acba87d6e25586$var$linearScale(a,s){return c=>{if(a[0]===a[1]||s[0]===s[1])return s[0];const d=(s[1]-s[0])/(a[1]-a[0]);return s[0]+d*(c-a[0])}}function $57acba87d6e25586$var$isScrollingWithinScrollbarBounds(a,s){return a>0&&a<s}const $57acba87d6e25586$var$addUnlinkedScrollListener=(a,s=()=>{})=>{let c={left:a.scrollLeft,top:a.scrollTop},d=0;return function et(){const g={left:a.scrollLeft,top:a.scrollTop},at=c.left!==g.left,$t=c.top!==g.top;(at||$t)&&s(),c=g,d=window.requestAnimationFrame(et)}(),()=>window.cancelAnimationFrame(d)};function $57acba87d6e25586$var$useDebounceCallback(a,s){const c=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a),d=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(d.current),[]),reactExports.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(c,s)},[c,s])}function $57acba87d6e25586$var$useResizeObserver(a,s){const c=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(s);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{let d=0;if(a){const et=new ResizeObserver(()=>{cancelAnimationFrame(d),d=window.requestAnimationFrame(c)});return et.observe(a),()=>{window.cancelAnimationFrame(d),et.unobserve(a)}}},[a,c])}const $57acba87d6e25586$export$be92b6f5f03c0fe9=$57acba87d6e25586$export$ccf8d8d7bbf3c2cc,$57acba87d6e25586$export$d5c6c08dc2d3ca7=$57acba87d6e25586$export$a21cbf9f11fca853,$57acba87d6e25586$export$ac61190d9fc311a9=$57acba87d6e25586$export$56969d565df7cc4b,ScrollArea=reactExports.forwardRef(({className:a,children:s,...c},d)=>jsxRuntimeExports.jsxs($57acba87d6e25586$export$be92b6f5f03c0fe9,{ref:d,className:cn$1("relative overflow-hidden",a),scrollHideDelay:400,...c,children:[jsxRuntimeExports.jsx($57acba87d6e25586$export$d5c6c08dc2d3ca7,{className:"h-full w-full rounded-[inherit]",children:s}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx($57acba87d6e25586$export$ac61190d9fc311a9,{})]}));ScrollArea.displayName=$57acba87d6e25586$export$be92b6f5f03c0fe9.displayName;const ScrollBar=reactExports.forwardRef(({className:a,orientation:s="vertical",...c},d)=>jsxRuntimeExports.jsx($57acba87d6e25586$export$2fabd85d0eba3c57,{ref:d,orientation:s,className:cn$1("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:jsxRuntimeExports.jsx($57acba87d6e25586$export$9fba1154677d7cd2,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=$57acba87d6e25586$export$2fabd85d0eba3c57.displayName;const $905f4ae918aab1aa$var$ROOT_NAME="AlertDialog",[$905f4ae918aab1aa$var$createAlertDialogContext,$905f4ae918aab1aa$export$b8891880751c2c5b]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($905f4ae918aab1aa$var$ROOT_NAME,[$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]),$905f4ae918aab1aa$var$useDialogScope=$5d3850c4d0b4e6c7$export$cc702773b8ea3e41(),$905f4ae918aab1aa$export$de466dd8317b0b75=a=>{const{__scopeAlertDialog:s,...c}=a,d=$905f4ae918aab1aa$var$useDialogScope(s);return reactExports.createElement($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,_extends$1({},d,c,{modal:!0}))},$905f4ae918aab1aa$export$660f2bfdb986706c=a=>{const{__scopeAlertDialog:s,...c}=a,d=$905f4ae918aab1aa$var$useDialogScope(s);return reactExports.createElement($5d3850c4d0b4e6c7$export$602eac185826482c,_extends$1({},d,c))},$905f4ae918aab1aa$export$a707a4895ce23256=reactExports.forwardRef((a,s)=>{const{__scopeAlertDialog:c,...d}=a,et=$905f4ae918aab1aa$var$useDialogScope(c);return reactExports.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,_extends$1({},et,d,{ref:s}))}),$905f4ae918aab1aa$var$CONTENT_NAME="AlertDialogContent",[$905f4ae918aab1aa$var$AlertDialogContentProvider,$905f4ae918aab1aa$var$useAlertDialogContentContext]=$905f4ae918aab1aa$var$createAlertDialogContext($905f4ae918aab1aa$var$CONTENT_NAME),$905f4ae918aab1aa$export$94e6af45f0af4efd=reactExports.forwardRef((a,s)=>{const{__scopeAlertDialog:c,children:d,...et}=a,g=$905f4ae918aab1aa$var$useDialogScope(c),at=reactExports.useRef(null),$t=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,at),vt=reactExports.useRef(null);return reactExports.createElement($5d3850c4d0b4e6c7$export$69b62a49393917d6,{contentName:$905f4ae918aab1aa$var$CONTENT_NAME,titleName:$905f4ae918aab1aa$var$TITLE_NAME,docsSlug:"alert-dialog"},reactExports.createElement($905f4ae918aab1aa$var$AlertDialogContentProvider,{scope:c,cancelRef:vt},reactExports.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,_extends$1({role:"alertdialog"},g,et,{ref:$t,onOpenAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et.onOpenAutoFocus,b=>{var pt;b.preventDefault(),(pt=vt.current)===null||pt===void 0||pt.focus({preventScroll:!0})}),onPointerDownOutside:b=>b.preventDefault(),onInteractOutside:b=>b.preventDefault()}),reactExports.createElement($5e63c961fc1ce211$export$d9f1ccf0bdb05d45,null,d),!1)))}),$905f4ae918aab1aa$var$TITLE_NAME="AlertDialogTitle",$905f4ae918aab1aa$export$225e0da62d314b7=reactExports.forwardRef((a,s)=>{const{__scopeAlertDialog:c,...d}=a,et=$905f4ae918aab1aa$var$useDialogScope(c);return reactExports.createElement($5d3850c4d0b4e6c7$export$f99233281efd08a0,_extends$1({},et,d,{ref:s}))}),$905f4ae918aab1aa$export$a23b55cde55ad9a5=reactExports.forwardRef((a,s)=>{const{__scopeAlertDialog:c,...d}=a,et=$905f4ae918aab1aa$var$useDialogScope(c);return reactExports.createElement($5d3850c4d0b4e6c7$export$393edc798c47379d,_extends$1({},et,d,{ref:s}))}),$905f4ae918aab1aa$export$b454f818c58ee85d=reactExports.forwardRef((a,s)=>{const{__scopeAlertDialog:c,...d}=a,et=$905f4ae918aab1aa$var$useDialogScope(c);return reactExports.createElement($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,_extends$1({},et,d,{ref:s}))}),$905f4ae918aab1aa$var$CANCEL_NAME="AlertDialogCancel",$905f4ae918aab1aa$export$2f67a923571aaea0=reactExports.forwardRef((a,s)=>{const{__scopeAlertDialog:c,...d}=a,{cancelRef:et}=$905f4ae918aab1aa$var$useAlertDialogContentContext($905f4ae918aab1aa$var$CANCEL_NAME,c),g=$905f4ae918aab1aa$var$useDialogScope(c),at=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,et);return reactExports.createElement($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,_extends$1({},g,d,{ref:at}))}),$905f4ae918aab1aa$export$be92b6f5f03c0fe9=$905f4ae918aab1aa$export$de466dd8317b0b75,$905f4ae918aab1aa$export$602eac185826482c=$905f4ae918aab1aa$export$660f2bfdb986706c,$905f4ae918aab1aa$export$c6fdb837b070b4ff=$905f4ae918aab1aa$export$a707a4895ce23256,$905f4ae918aab1aa$export$7c6e2c02157bb7d2=$905f4ae918aab1aa$export$94e6af45f0af4efd,$905f4ae918aab1aa$export$e19cd5f9376f8cee=$905f4ae918aab1aa$export$b454f818c58ee85d,$905f4ae918aab1aa$export$848c9b7ead0df967=$905f4ae918aab1aa$export$2f67a923571aaea0,$905f4ae918aab1aa$export$f99233281efd08a0=$905f4ae918aab1aa$export$225e0da62d314b7,$905f4ae918aab1aa$export$393edc798c47379d=$905f4ae918aab1aa$export$a23b55cde55ad9a5,AlertDialog=$905f4ae918aab1aa$export$be92b6f5f03c0fe9,AlertDialogPortal=$905f4ae918aab1aa$export$602eac185826482c,AlertDialogOverlay=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$c6fdb837b070b4ff,{className:cn$1("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:c}));AlertDialogOverlay.displayName=$905f4ae918aab1aa$export$c6fdb837b070b4ff.displayName;const AlertDialogContent=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsxs(AlertDialogPortal,{children:[jsxRuntimeExports.jsx(AlertDialogOverlay,{}),jsxRuntimeExports.jsx($905f4ae918aab1aa$export$7c6e2c02157bb7d2,{ref:c,className:cn$1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));AlertDialogContent.displayName=$905f4ae918aab1aa$export$7c6e2c02157bb7d2.displayName;const AlertDialogHeader=({className:a,...s})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-2 text-center sm:text-left",a),...s});AlertDialogHeader.displayName="AlertDialogHeader";const AlertDialogTitle=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$f99233281efd08a0,{ref:c,className:cn$1("text-lg font-semibold",a),...s}));AlertDialogTitle.displayName=$905f4ae918aab1aa$export$f99233281efd08a0.displayName;const AlertDialogDescription=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$393edc798c47379d,{ref:c,className:cn$1("text-sm text-muted-foreground",a),...s}));AlertDialogDescription.displayName=$905f4ae918aab1aa$export$393edc798c47379d.displayName;const AlertDialogAction=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$e19cd5f9376f8cee,{ref:c,className:cn$1(buttonVariants(),a),...s}));AlertDialogAction.displayName=$905f4ae918aab1aa$export$e19cd5f9376f8cee.displayName;const AlertDialogCancel=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$848c9b7ead0df967,{ref:c,className:cn$1(buttonVariants({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));AlertDialogCancel.displayName=$905f4ae918aab1aa$export$848c9b7ead0df967.displayName;const $cc7e05a45900e73f$var$OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],$cc7e05a45900e73f$var$SELECTION_KEYS=[" ","Enter"],$cc7e05a45900e73f$var$SELECT_NAME="Select",[$cc7e05a45900e73f$var$Collection,$cc7e05a45900e73f$var$useCollection,$cc7e05a45900e73f$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$createSelectContext,$cc7e05a45900e73f$export$286727a75dc039bd]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cc7e05a45900e73f$var$SELECT_NAME,[$cc7e05a45900e73f$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923]),$cc7e05a45900e73f$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cc7e05a45900e73f$var$SelectProvider,$cc7e05a45900e73f$var$useSelectContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$SelectNativeOptionsProvider,$cc7e05a45900e73f$var$useSelectNativeOptionsContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),$cc7e05a45900e73f$export$ef9b1a59e592288f=a=>{const{__scopeSelect:s,children:c,open:d,defaultOpen:et,onOpenChange:g,value:at,defaultValue:$t,onValueChange:vt,dir:b,name:pt,autoComplete:st,disabled:wt,required:Tt}=a,Ct=$cc7e05a45900e73f$var$usePopperScope(s),[jt,Lt]=reactExports.useState(null),[Ht,Gt]=reactExports.useState(null),[Kt,tr]=reactExports.useState(!1),rr=$f631663db3294ace$export$b39126d51d94e6f3(b),[Lr=!1,jr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:d,defaultProp:et,onChange:g}),[Yr,An]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:at,defaultProp:$t,onChange:vt}),No=reactExports.useRef(null),o0=jt?!!jt.closest("form"):!0,[t0,c0]=reactExports.useState(new Set),n0=Array.from(t0).map(Qo=>Qo.props.value).join(";");return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,Ct,reactExports.createElement($cc7e05a45900e73f$var$SelectProvider,{required:Tt,scope:s,trigger:jt,onTriggerChange:Lt,valueNode:Ht,onValueNodeChange:Gt,valueNodeHasChildren:Kt,onValueNodeHasChildrenChange:tr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),value:Yr,onValueChange:An,open:Lr,onOpenChange:jr,dir:rr,triggerPointerDownPosRef:No,disabled:wt},reactExports.createElement($cc7e05a45900e73f$var$Collection.Provider,{scope:s},reactExports.createElement($cc7e05a45900e73f$var$SelectNativeOptionsProvider,{scope:a.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Qo=>{c0(Mo=>new Set(Mo).add(Qo))},[]),onNativeOptionRemove:reactExports.useCallback(Qo=>{c0(Mo=>{const zo=new Set(Mo);return zo.delete(Qo),zo})},[])},c)),o0?reactExports.createElement($cc7e05a45900e73f$var$BubbleSelect,{key:n0,"aria-hidden":!0,required:Tt,tabIndex:-1,name:pt,autoComplete:st,value:Yr,onChange:Qo=>An(Qo.target.value),disabled:wt},Yr===void 0?reactExports.createElement("option",{value:""}):null,Array.from(t0)):null))},$cc7e05a45900e73f$var$TRIGGER_NAME="SelectTrigger",$cc7e05a45900e73f$export$3ac1e88a1c0b9f1=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,disabled:d=!1,...et}=a,g=$cc7e05a45900e73f$var$usePopperScope(c),at=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$TRIGGER_NAME,c),$t=at.disabled||d,vt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,at.onTriggerChange),b=$cc7e05a45900e73f$var$useCollection(c),[pt,st,wt]=$cc7e05a45900e73f$var$useTypeaheadSearch(Ct=>{const jt=b().filter(Gt=>!Gt.disabled),Lt=jt.find(Gt=>Gt.value===at.value),Ht=$cc7e05a45900e73f$var$findNextItem(jt,Ct,Lt);Ht!==void 0&&at.onValueChange(Ht.value)}),Tt=()=>{$t||(at.onOpenChange(!0),wt())};return reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},g),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"combobox","aria-controls":at.contentId,"aria-expanded":at.open,"aria-required":at.required,"aria-autocomplete":"none",dir:at.dir,"data-state":at.open?"open":"closed",disabled:$t,"data-disabled":$t?"":void 0,"data-placeholder":$cc7e05a45900e73f$var$shouldShowPlaceholder(at.value)?"":void 0},et,{ref:vt,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et.onClick,Ct=>{Ct.currentTarget.focus()}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et.onPointerDown,Ct=>{const jt=Ct.target;jt.hasPointerCapture(Ct.pointerId)&&jt.releasePointerCapture(Ct.pointerId),Ct.button===0&&Ct.ctrlKey===!1&&(Tt(),at.triggerPointerDownPosRef.current={x:Math.round(Ct.pageX),y:Math.round(Ct.pageY)},Ct.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et.onKeyDown,Ct=>{const jt=pt.current!=="";!(Ct.ctrlKey||Ct.altKey||Ct.metaKey)&&Ct.key.length===1&&st(Ct.key),!(jt&&Ct.key===" ")&&$cc7e05a45900e73f$var$OPEN_KEYS.includes(Ct.key)&&(Tt(),Ct.preventDefault())})})))}),$cc7e05a45900e73f$var$VALUE_NAME="SelectValue",$cc7e05a45900e73f$export$e288731fd71264f0=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,className:d,style:et,children:g,placeholder:at="",...$t}=a,vt=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$VALUE_NAME,c),{onValueNodeHasChildrenChange:b}=vt,pt=g!==void 0,st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,vt.onValueNodeChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{b(pt)},[b,pt]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},$t,{ref:st,style:{pointerEvents:"none"}}),$cc7e05a45900e73f$var$shouldShowPlaceholder(vt.value)?reactExports.createElement(reactExports.Fragment,null,at):g)}),$cc7e05a45900e73f$export$99b400cabb58c515=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,children:d,...et}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},et,{ref:s}),d||"▼")}),$cc7e05a45900e73f$export$b2af6c9944296213=a=>reactExports.createElement($f1701beae083dbae$export$602eac185826482c,_extends$1({asChild:!0},a)),$cc7e05a45900e73f$var$CONTENT_NAME="SelectContent",$cc7e05a45900e73f$export$c973a4b3cb86a03d=reactExports.forwardRef((a,s)=>{const c=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,a.__scopeSelect),[d,et]=reactExports.useState();if($9f79659886946c16$export$e5c5a5f917a5871c(()=>{et(new DocumentFragment)},[]),!c.open){const g=d;return g?reactDomExports.createPortal(reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:a.__scopeSelect},reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:a.__scopeSelect},reactExports.createElement("div",null,a.children))),g):null}return reactExports.createElement($cc7e05a45900e73f$var$SelectContentImpl,_extends$1({},a,{ref:s}))}),$cc7e05a45900e73f$var$CONTENT_MARGIN=10,[$cc7e05a45900e73f$var$SelectContentProvider,$cc7e05a45900e73f$var$useSelectContentContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME),$cc7e05a45900e73f$var$SelectContentImpl=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,position:d="item-aligned",onCloseAutoFocus:et,onEscapeKeyDown:g,onPointerDownOutside:at,side:$t,sideOffset:vt,align:b,alignOffset:pt,arrowPadding:st,collisionBoundary:wt,collisionPadding:Tt,sticky:Ct,hideWhenDetached:jt,avoidCollisions:Lt,...Ht}=a,Gt=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,c),[Kt,tr]=reactExports.useState(null),[rr,Lr]=reactExports.useState(null),jr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,a0=>tr(a0)),[Yr,An]=reactExports.useState(null),[No,o0]=reactExports.useState(null),t0=$cc7e05a45900e73f$var$useCollection(c),[c0,n0]=reactExports.useState(!1),Qo=reactExports.useRef(!1);reactExports.useEffect(()=>{if(Kt)return hideOthers(Kt)},[Kt]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c();const Mo=reactExports.useCallback(a0=>{const[m0,...p0]=t0().map(R0=>R0.ref.current),[x0]=p0.slice(-1),S0=document.activeElement;for(const R0 of a0)if(R0===S0||(R0==null||R0.scrollIntoView({block:"nearest"}),R0===m0&&rr&&(rr.scrollTop=0),R0===x0&&rr&&(rr.scrollTop=rr.scrollHeight),R0==null||R0.focus(),document.activeElement!==S0))return},[t0,rr]),zo=reactExports.useCallback(()=>Mo([Yr,Kt]),[Mo,Yr,Kt]);reactExports.useEffect(()=>{c0&&zo()},[c0,zo]);const{onOpenChange:e0,triggerPointerDownPosRef:Xr}=Gt;reactExports.useEffect(()=>{if(Kt){let a0={x:0,y:0};const m0=x0=>{var S0,R0,$0,f0;a0={x:Math.abs(Math.round(x0.pageX)-((S0=(R0=Xr.current)===null||R0===void 0?void 0:R0.x)!==null&&S0!==void 0?S0:0)),y:Math.abs(Math.round(x0.pageY)-(($0=(f0=Xr.current)===null||f0===void 0?void 0:f0.y)!==null&&$0!==void 0?$0:0))}},p0=x0=>{a0.x<=10&&a0.y<=10?x0.preventDefault():Kt.contains(x0.target)||e0(!1),document.removeEventListener("pointermove",m0),Xr.current=null};return Xr.current!==null&&(document.addEventListener("pointermove",m0),document.addEventListener("pointerup",p0,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",m0),document.removeEventListener("pointerup",p0,{capture:!0})}}},[Kt,e0,Xr]),reactExports.useEffect(()=>{const a0=()=>e0(!1);return window.addEventListener("blur",a0),window.addEventListener("resize",a0),()=>{window.removeEventListener("blur",a0),window.removeEventListener("resize",a0)}},[e0]);const[In,Zr]=$cc7e05a45900e73f$var$useTypeaheadSearch(a0=>{const m0=t0().filter(S0=>!S0.disabled),p0=m0.find(S0=>S0.ref.current===document.activeElement),x0=$cc7e05a45900e73f$var$findNextItem(m0,a0,p0);x0&&setTimeout(()=>x0.ref.current.focus())}),wn=reactExports.useCallback((a0,m0,p0)=>{const x0=!Qo.current&&!p0;(Gt.value!==void 0&&Gt.value===m0||x0)&&(An(a0),x0&&(Qo.current=!0))},[Gt.value]),r0=reactExports.useCallback(()=>Kt==null?void 0:Kt.focus(),[Kt]),ko=reactExports.useCallback((a0,m0,p0)=>{const x0=!Qo.current&&!p0;(Gt.value!==void 0&&Gt.value===m0||x0)&&o0(a0)},[Gt.value]),_n=d==="popper"?$cc7e05a45900e73f$var$SelectPopperPosition:$cc7e05a45900e73f$var$SelectItemAlignedPosition,i0=_n===$cc7e05a45900e73f$var$SelectPopperPosition?{side:$t,sideOffset:vt,align:b,alignOffset:pt,arrowPadding:st,collisionBoundary:wt,collisionPadding:Tt,sticky:Ct,hideWhenDetached:jt,avoidCollisions:Lt}:{};return reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:c,content:Kt,viewport:rr,onViewportChange:Lr,itemRefCallback:wn,selectedItem:Yr,onItemLeave:r0,itemTextRefCallback:ko,focusSelectedItem:zo,selectedItemText:No,position:d,isPositioned:c0,searchRef:In},reactExports.createElement(ReactRemoveScroll$1,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:Gt.open,onMountAutoFocus:a0=>{a0.preventDefault()},onUnmountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et,a0=>{var m0;(m0=Gt.trigger)===null||m0===void 0||m0.focus({preventScroll:!0}),a0.preventDefault()})},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:g,onPointerDownOutside:at,onFocusOutside:a0=>a0.preventDefault(),onDismiss:()=>Gt.onOpenChange(!1)},reactExports.createElement(_n,_extends$1({role:"listbox",id:Gt.contentId,"data-state":Gt.open?"open":"closed",dir:Gt.dir,onContextMenu:a0=>a0.preventDefault()},Ht,i0,{onPlaced:()=>n0(!0),ref:jr,style:{display:"flex",flexDirection:"column",outline:"none",...Ht.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Ht.onKeyDown,a0=>{const m0=a0.ctrlKey||a0.altKey||a0.metaKey;if(a0.key==="Tab"&&a0.preventDefault(),!m0&&a0.key.length===1&&Zr(a0.key),["ArrowUp","ArrowDown","Home","End"].includes(a0.key)){let x0=t0().filter(S0=>!S0.disabled).map(S0=>S0.ref.current);if(["ArrowUp","End"].includes(a0.key)&&(x0=x0.slice().reverse()),["ArrowUp","ArrowDown"].includes(a0.key)){const S0=a0.target,R0=x0.indexOf(S0);x0=x0.slice(R0+1)}setTimeout(()=>Mo(x0)),a0.preventDefault()}})}))))))}),$cc7e05a45900e73f$var$SelectItemAlignedPosition=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,onPlaced:d,...et}=a,g=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,c),at=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$CONTENT_NAME,c),[$t,vt]=reactExports.useState(null),[b,pt]=reactExports.useState(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,jr=>pt(jr)),wt=$cc7e05a45900e73f$var$useCollection(c),Tt=reactExports.useRef(!1),Ct=reactExports.useRef(!0),{viewport:jt,selectedItem:Lt,selectedItemText:Ht,focusSelectedItem:Gt}=at,Kt=reactExports.useCallback(()=>{if(g.trigger&&g.valueNode&&$t&&b&&jt&&Lt&&Ht){const jr=g.trigger.getBoundingClientRect(),Yr=b.getBoundingClientRect(),An=g.valueNode.getBoundingClientRect(),No=Ht.getBoundingClientRect();if(g.dir!=="rtl"){const S0=No.left-Yr.left,R0=An.left-S0,$0=jr.left-R0,f0=jr.width+$0,P0=Math.max(f0,Yr.width),M0=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,C0=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(R0,[$cc7e05a45900e73f$var$CONTENT_MARGIN,M0-P0]);$t.style.minWidth=f0+"px",$t.style.left=C0+"px"}else{const S0=Yr.right-No.right,R0=window.innerWidth-An.right-S0,$0=window.innerWidth-jr.right-R0,f0=jr.width+$0,P0=Math.max(f0,Yr.width),M0=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,C0=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(R0,[$cc7e05a45900e73f$var$CONTENT_MARGIN,M0-P0]);$t.style.minWidth=f0+"px",$t.style.right=C0+"px"}const o0=wt(),t0=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,c0=jt.scrollHeight,n0=window.getComputedStyle(b),Qo=parseInt(n0.borderTopWidth,10),Mo=parseInt(n0.paddingTop,10),zo=parseInt(n0.borderBottomWidth,10),e0=parseInt(n0.paddingBottom,10),Xr=Qo+Mo+c0+e0+zo,In=Math.min(Lt.offsetHeight*5,Xr),Zr=window.getComputedStyle(jt),wn=parseInt(Zr.paddingTop,10),r0=parseInt(Zr.paddingBottom,10),ko=jr.top+jr.height/2-$cc7e05a45900e73f$var$CONTENT_MARGIN,_n=t0-ko,i0=Lt.offsetHeight/2,a0=Lt.offsetTop+i0,m0=Qo+Mo+a0,p0=Xr-m0;if(m0<=ko){const S0=Lt===o0[o0.length-1].ref.current;$t.style.bottom="0px";const R0=b.clientHeight-jt.offsetTop-jt.offsetHeight,$0=Math.max(_n,i0+(S0?r0:0)+R0+zo),f0=m0+$0;$t.style.height=f0+"px"}else{const S0=Lt===o0[0].ref.current;$t.style.top="0px";const $0=Math.max(ko,Qo+jt.offsetTop+(S0?wn:0)+i0)+p0;$t.style.height=$0+"px",jt.scrollTop=m0-ko+jt.offsetTop}$t.style.margin=`${$cc7e05a45900e73f$var$CONTENT_MARGIN}px 0`,$t.style.minHeight=In+"px",$t.style.maxHeight=t0+"px",d==null||d(),requestAnimationFrame(()=>Tt.current=!0)}},[wt,g.trigger,g.valueNode,$t,b,jt,Lt,Ht,g.dir,d]);$9f79659886946c16$export$e5c5a5f917a5871c(()=>Kt(),[Kt]);const[tr,rr]=reactExports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{b&&rr(window.getComputedStyle(b).zIndex)},[b]);const Lr=reactExports.useCallback(jr=>{jr&&Ct.current===!0&&(Kt(),Gt==null||Gt(),Ct.current=!1)},[Kt,Gt]);return reactExports.createElement($cc7e05a45900e73f$var$SelectViewportProvider,{scope:c,contentWrapper:$t,shouldExpandOnScrollRef:Tt,onScrollButtonChange:Lr},reactExports.createElement("div",{ref:vt,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:tr}},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},et,{ref:st,style:{boxSizing:"border-box",maxHeight:"100%",...et.style}}))))}),$cc7e05a45900e73f$var$SelectPopperPosition=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,align:d="start",collisionPadding:et=$cc7e05a45900e73f$var$CONTENT_MARGIN,...g}=a,at=$cc7e05a45900e73f$var$usePopperScope(c);return reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({},at,g,{ref:s,align:d,collisionPadding:et,style:{boxSizing:"border-box",...g.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[$cc7e05a45900e73f$var$SelectViewportProvider,$cc7e05a45900e73f$var$useSelectViewportContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,{}),$cc7e05a45900e73f$var$VIEWPORT_NAME="SelectViewport",$cc7e05a45900e73f$export$9ed6e7b40248d36d=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,...d}=a,et=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$VIEWPORT_NAME,c),g=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$VIEWPORT_NAME,c),at=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,et.onViewportChange),$t=reactExports.useRef(0);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:c},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-radix-select-viewport":"",role:"presentation"},d,{ref:at,style:{position:"relative",flex:1,overflow:"auto",...d.style},onScroll:$e42e1063c40fb3ef$export$b9ecd428b558ff10(d.onScroll,vt=>{const b=vt.currentTarget,{contentWrapper:pt,shouldExpandOnScrollRef:st}=g;if(st!=null&&st.current&&pt){const wt=Math.abs($t.current-b.scrollTop);if(wt>0){const Tt=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,Ct=parseFloat(pt.style.minHeight),jt=parseFloat(pt.style.height),Lt=Math.max(Ct,jt);if(Lt<Tt){const Ht=Lt+wt,Gt=Math.min(Tt,Ht),Kt=Ht-Gt;pt.style.height=Gt+"px",pt.style.bottom==="0px"&&(b.scrollTop=Kt>0?Kt:0,pt.style.justifyContent="flex-end")}}}$t.current=b.scrollTop})}))))}),$cc7e05a45900e73f$var$GROUP_NAME="SelectGroup",[$cc7e05a45900e73f$var$SelectGroupContextProvider,$cc7e05a45900e73f$var$useSelectGroupContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$GROUP_NAME),$cc7e05a45900e73f$export$ee25a334c55de1f4=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,...d}=a,et=$1746a345f3d73bb7$export$f680877a34711e37();return reactExports.createElement($cc7e05a45900e73f$var$SelectGroupContextProvider,{scope:c,id:et},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"group","aria-labelledby":et},d,{ref:s})))}),$cc7e05a45900e73f$var$LABEL_NAME="SelectLabel",$cc7e05a45900e73f$export$f67338d29bd972f8=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,...d}=a,et=$cc7e05a45900e73f$var$useSelectGroupContext($cc7e05a45900e73f$var$LABEL_NAME,c);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({id:et.id},d,{ref:s}))}),$cc7e05a45900e73f$var$ITEM_NAME="SelectItem",[$cc7e05a45900e73f$var$SelectItemContextProvider,$cc7e05a45900e73f$var$useSelectItemContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$ITEM_NAME),$cc7e05a45900e73f$export$13ef48a934230896=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,value:d,disabled:et=!1,textValue:g,...at}=a,$t=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_NAME,c),vt=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_NAME,c),b=$t.value===d,[pt,st]=reactExports.useState(g??""),[wt,Tt]=reactExports.useState(!1),Ct=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,Ht=>{var Gt;return(Gt=vt.itemRefCallback)===null||Gt===void 0?void 0:Gt.call(vt,Ht,d,et)}),jt=$1746a345f3d73bb7$export$f680877a34711e37(),Lt=()=>{et||($t.onValueChange(d),$t.onOpenChange(!1))};if(d==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return reactExports.createElement($cc7e05a45900e73f$var$SelectItemContextProvider,{scope:c,value:d,disabled:et,textId:jt,isSelected:b,onItemTextChange:reactExports.useCallback(Ht=>{st(Gt=>{var Kt;return Gt||((Kt=Ht==null?void 0:Ht.textContent)!==null&&Kt!==void 0?Kt:"").trim()})},[])},reactExports.createElement($cc7e05a45900e73f$var$Collection.ItemSlot,{scope:c,value:d,disabled:et,textValue:pt},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"option","aria-labelledby":jt,"data-highlighted":wt?"":void 0,"aria-selected":b&&wt,"data-state":b?"checked":"unchecked","aria-disabled":et||void 0,"data-disabled":et?"":void 0,tabIndex:et?void 0:-1},at,{ref:Ct,onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(at.onFocus,()=>Tt(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(at.onBlur,()=>Tt(!1)),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(at.onPointerUp,Lt),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(at.onPointerMove,Ht=>{if(et){var Gt;(Gt=vt.onItemLeave)===null||Gt===void 0||Gt.call(vt)}else Ht.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(at.onPointerLeave,Ht=>{if(Ht.currentTarget===document.activeElement){var Gt;(Gt=vt.onItemLeave)===null||Gt===void 0||Gt.call(vt)}}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(at.onKeyDown,Ht=>{var Gt;((Gt=vt.searchRef)===null||Gt===void 0?void 0:Gt.current)!==""&&Ht.key===" "||($cc7e05a45900e73f$var$SELECTION_KEYS.includes(Ht.key)&&Lt(),Ht.key===" "&&Ht.preventDefault())})}))))}),$cc7e05a45900e73f$var$ITEM_TEXT_NAME="SelectItemText",$cc7e05a45900e73f$export$3572fb0fb821ff49=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,className:d,style:et,...g}=a,at=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,c),$t=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,c),vt=$cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,c),b=$cc7e05a45900e73f$var$useSelectNativeOptionsContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,c),[pt,st]=reactExports.useState(null),wt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,Ht=>st(Ht),vt.onItemTextChange,Ht=>{var Gt;return(Gt=$t.itemTextRefCallback)===null||Gt===void 0?void 0:Gt.call($t,Ht,vt.value,vt.disabled)}),Tt=pt==null?void 0:pt.textContent,Ct=reactExports.useMemo(()=>reactExports.createElement("option",{key:vt.value,value:vt.value,disabled:vt.disabled},Tt),[vt.disabled,vt.value,Tt]),{onNativeOptionAdd:jt,onNativeOptionRemove:Lt}=b;return $9f79659886946c16$export$e5c5a5f917a5871c(()=>(jt(Ct),()=>Lt(Ct)),[jt,Lt,Ct]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({id:vt.textId},g,{ref:wt})),vt.isSelected&&at.valueNode&&!at.valueNodeHasChildren?reactDomExports.createPortal(g.children,at.valueNode):null)}),$cc7e05a45900e73f$var$ITEM_INDICATOR_NAME="SelectItemIndicator",$cc7e05a45900e73f$export$6b9198de19accfe6=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,...d}=a;return $cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_INDICATOR_NAME,c).isSelected?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},d,{ref:s})):null}),$cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",$cc7e05a45900e73f$export$d8117927658af6d7=reactExports.forwardRef((a,s)=>{const c=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,a.__scopeSelect),d=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,a.__scopeSelect),[et,g]=reactExports.useState(!1),at=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,d.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(c.viewport&&c.isPositioned){let b=function(){const pt=vt.scrollTop>0;g(pt)};var $t=b;const vt=c.viewport;return b(),vt.addEventListener("scroll",b),()=>vt.removeEventListener("scroll",b)}},[c.viewport,c.isPositioned]),et?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},a,{ref:at,onAutoScroll:()=>{const{viewport:$t,selectedItem:vt}=c;$t&&vt&&($t.scrollTop=$t.scrollTop-vt.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",$cc7e05a45900e73f$export$ff951e476c12189=reactExports.forwardRef((a,s)=>{const c=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,a.__scopeSelect),d=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,a.__scopeSelect),[et,g]=reactExports.useState(!1),at=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,d.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(c.viewport&&c.isPositioned){let b=function(){const pt=vt.scrollHeight-vt.clientHeight,st=Math.ceil(vt.scrollTop)<pt;g(st)};var $t=b;const vt=c.viewport;return b(),vt.addEventListener("scroll",b),()=>vt.removeEventListener("scroll",b)}},[c.viewport,c.isPositioned]),et?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},a,{ref:at,onAutoScroll:()=>{const{viewport:$t,selectedItem:vt}=c;$t&&vt&&($t.scrollTop=$t.scrollTop+vt.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SelectScrollButtonImpl=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,onAutoScroll:d,...et}=a,g=$cc7e05a45900e73f$var$useSelectContentContext("SelectScrollButton",c),at=reactExports.useRef(null),$t=$cc7e05a45900e73f$var$useCollection(c),vt=reactExports.useCallback(()=>{at.current!==null&&(window.clearInterval(at.current),at.current=null)},[]);return reactExports.useEffect(()=>()=>vt(),[vt]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{var b;const pt=$t().find(st=>st.ref.current===document.activeElement);pt==null||(b=pt.ref.current)===null||b===void 0||b.scrollIntoView({block:"nearest"})},[$t]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"aria-hidden":!0},et,{ref:s,style:{flexShrink:0,...et.style},onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et.onPointerDown,()=>{at.current===null&&(at.current=window.setInterval(d,50))}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et.onPointerMove,()=>{var b;(b=g.onItemLeave)===null||b===void 0||b.call(g),at.current===null&&(at.current=window.setInterval(d,50))}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(et.onPointerLeave,()=>{vt()})}))}),$cc7e05a45900e73f$export$eba4b1df07cb1d3=reactExports.forwardRef((a,s)=>{const{__scopeSelect:c,...d}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"aria-hidden":!0},d,{ref:s}))});function $cc7e05a45900e73f$var$shouldShowPlaceholder(a){return a===""||a===void 0}const $cc7e05a45900e73f$var$BubbleSelect=reactExports.forwardRef((a,s)=>{const{value:c,...d}=a,et=reactExports.useRef(null),g=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,et),at=$010c2913dbd2fe3d$export$5cae361ad82dce8b(c);return reactExports.useEffect(()=>{const $t=et.current,vt=window.HTMLSelectElement.prototype,pt=Object.getOwnPropertyDescriptor(vt,"value").set;if(at!==c&&pt){const st=new Event("change",{bubbles:!0});pt.call($t,c),$t.dispatchEvent(st)}},[at,c]),reactExports.createElement($ea1ef594cf570d83$export$439d29a4e110a164,{asChild:!0},reactExports.createElement("select",_extends$1({},d,{ref:g,defaultValue:c})))});$cc7e05a45900e73f$var$BubbleSelect.displayName="BubbleSelect";function $cc7e05a45900e73f$var$useTypeaheadSearch(a){const s=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(a),c=reactExports.useRef(""),d=reactExports.useRef(0),et=reactExports.useCallback(at=>{const $t=c.current+at;s($t),function vt(b){c.current=b,window.clearTimeout(d.current),b!==""&&(d.current=window.setTimeout(()=>vt(""),1e3))}($t)},[s]),g=reactExports.useCallback(()=>{c.current="",window.clearTimeout(d.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(d.current),[]),[c,et,g]}function $cc7e05a45900e73f$var$findNextItem(a,s,c){const et=s.length>1&&Array.from(s).every(b=>b===s[0])?s[0]:s,g=c?a.indexOf(c):-1;let at=$cc7e05a45900e73f$var$wrapArray(a,Math.max(g,0));et.length===1&&(at=at.filter(b=>b!==c));const vt=at.find(b=>b.textValue.toLowerCase().startsWith(et.toLowerCase()));return vt!==c?vt:void 0}function $cc7e05a45900e73f$var$wrapArray(a,s){return a.map((c,d)=>a[(s+d)%a.length])}const $cc7e05a45900e73f$export$be92b6f5f03c0fe9=$cc7e05a45900e73f$export$ef9b1a59e592288f,$cc7e05a45900e73f$export$41fb9f06171c75f4=$cc7e05a45900e73f$export$3ac1e88a1c0b9f1,$cc7e05a45900e73f$export$4c8d1a57a761ef94=$cc7e05a45900e73f$export$e288731fd71264f0,$cc7e05a45900e73f$export$f04a61298a47a40f=$cc7e05a45900e73f$export$99b400cabb58c515,$cc7e05a45900e73f$export$602eac185826482c=$cc7e05a45900e73f$export$b2af6c9944296213,$cc7e05a45900e73f$export$7c6e2c02157bb7d2=$cc7e05a45900e73f$export$c973a4b3cb86a03d,$cc7e05a45900e73f$export$d5c6c08dc2d3ca7=$cc7e05a45900e73f$export$9ed6e7b40248d36d,$cc7e05a45900e73f$export$eb2fcfdbd7ba97d4=$cc7e05a45900e73f$export$ee25a334c55de1f4,$cc7e05a45900e73f$export$b04be29aa201d4f5=$cc7e05a45900e73f$export$f67338d29bd972f8,$cc7e05a45900e73f$export$6d08773d2e66f8f2=$cc7e05a45900e73f$export$13ef48a934230896,$cc7e05a45900e73f$export$d6e5bf9c43ea9319=$cc7e05a45900e73f$export$3572fb0fb821ff49,$cc7e05a45900e73f$export$c3468e2714d175fa=$cc7e05a45900e73f$export$6b9198de19accfe6,$cc7e05a45900e73f$export$2f60d3ec9ad468f2=$cc7e05a45900e73f$export$d8117927658af6d7,$cc7e05a45900e73f$export$bf1aedc3039c8d63=$cc7e05a45900e73f$export$ff951e476c12189,$cc7e05a45900e73f$export$1ff3c3f08ae963c0=$cc7e05a45900e73f$export$eba4b1df07cb1d3,Select=$cc7e05a45900e73f$export$be92b6f5f03c0fe9,SelectGroup=$cc7e05a45900e73f$export$eb2fcfdbd7ba97d4,SelectValue=$cc7e05a45900e73f$export$4c8d1a57a761ef94,SelectTrigger=reactExports.forwardRef(({className:a,children:s,...c},d)=>jsxRuntimeExports.jsxs($cc7e05a45900e73f$export$41fb9f06171c75f4,{ref:d,className:cn$1("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),tabIndex:-1,...c,children:[s,jsxRuntimeExports.jsx($cc7e05a45900e73f$export$f04a61298a47a40f,{asChild:!0,children:jsxRuntimeExports.jsx(CaretSortIcon,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=$cc7e05a45900e73f$export$41fb9f06171c75f4.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($cc7e05a45900e73f$export$2f60d3ec9ad468f2,{ref:c,className:cn$1("flex cursor-default items-center justify-center py-1",a),...s,children:jsxRuntimeExports.jsx(ChevronUpIcon,{})}));SelectScrollUpButton.displayName=$cc7e05a45900e73f$export$2f60d3ec9ad468f2.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($cc7e05a45900e73f$export$bf1aedc3039c8d63,{ref:c,className:cn$1("flex cursor-default items-center justify-center py-1",a),...s,children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}));SelectScrollDownButton.displayName=$cc7e05a45900e73f$export$bf1aedc3039c8d63.displayName;const SelectContent=reactExports.forwardRef(({className:a,children:s,position:c="popper",...d},et)=>jsxRuntimeExports.jsx($cc7e05a45900e73f$export$602eac185826482c,{children:jsxRuntimeExports.jsxs($cc7e05a45900e73f$export$7c6e2c02157bb7d2,{ref:et,className:cn$1("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,onCloseAutoFocus:g=>g.preventDefault(),...d,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx($cc7e05a45900e73f$export$d5c6c08dc2d3ca7,{className:cn$1("p-1",c==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=$cc7e05a45900e73f$export$7c6e2c02157bb7d2.displayName;const SelectLabel=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($cc7e05a45900e73f$export$b04be29aa201d4f5,{ref:c,className:cn$1("px-2 py-1.5 text-sm font-semibold",a),...s}));SelectLabel.displayName=$cc7e05a45900e73f$export$b04be29aa201d4f5.displayName;const SelectItem=reactExports.forwardRef(({className:a,children:s,...c},d)=>jsxRuntimeExports.jsxs($cc7e05a45900e73f$export$6d08773d2e66f8f2,{ref:d,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[jsxRuntimeExports.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx($cc7e05a45900e73f$export$c3468e2714d175fa,{children:jsxRuntimeExports.jsx(CheckIcon,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx($cc7e05a45900e73f$export$d6e5bf9c43ea9319,{children:s})]}));SelectItem.displayName=$cc7e05a45900e73f$export$6d08773d2e66f8f2.displayName;const SelectSeparator=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($cc7e05a45900e73f$export$1ff3c3f08ae963c0,{ref:c,className:cn$1("-mx-1 my-1 h-px bg-muted",a),...s}));SelectSeparator.displayName=$cc7e05a45900e73f$export$1ff3c3f08ae963c0.displayName;const formSchema=objectType({enableFileManager:booleanType(),inputDirectory:stringType(),outputDirectory:stringType(),enableDownloadMask:booleanType(),enableManualInpainting:booleanType(),enableUploadMask:booleanType(),enableAutoExtractPrompt:booleanType(),removeBGModel:stringType(),realesrganModel:stringType(),interactiveSegModel:stringType()}),TAB_GENERAL="General",TAB_MODEL="Model",TAB_PLUGINS="Plugins",TAB_NAMES=[TAB_MODEL,TAB_GENERAL,TAB_PLUGINS];function SettingsDialog(){const[a,s]=useToggle$1(!1),[c,d]=reactExports.useState(TAB_MODEL),[et,g,at,$t,vt,b,pt,st]=useStore(Qo=>[Qo.updateAppState,Qo.settings,Qo.updateSettings,Qo.fileManagerState,Qo.setModel,Qo.serverConfig,Qo.updateServerConfig,Qo.setServerConfig]),{toast:wt}=useToast(),[Tt,Ct]=reactExports.useState(g.model),[jt,Lt]=reactExports.useState([]),Ht=jt.length>0;reactExports.useEffect(()=>{Ct(g.model)},[g.model]);const Gt=useForm({resolver:t(formSchema),defaultValues:{enableDownloadMask:g.enableDownloadMask,enableManualInpainting:g.enableManualInpainting,enableUploadMask:g.enableUploadMask,enableAutoExtractPrompt:g.enableAutoExtractPrompt,inputDirectory:$t.inputDirectory,outputDirectory:$t.outputDirectory,removeBGModel:b==null?void 0:b.removeBGModel,realesrganModel:b==null?void 0:b.realesrganModel,interactiveSegModel:b==null?void 0:b.interactiveSegModel}});reactExports.useEffect(()=>{b&&(st(b),Gt.setValue("removeBGModel",b.removeBGModel),Gt.setValue("realesrganModel",b.realesrganModel),Gt.setValue("interactiveSegModel",b.interactiveSegModel))},[Gt,b]);async function Kt(Qo){at({enableDownloadMask:Qo.enableDownloadMask,enableManualInpainting:Qo.enableManualInpainting,enableUploadMask:Qo.enableUploadMask,enableAutoExtractPrompt:Qo.enableAutoExtractPrompt});const Mo=Tt.name!==g.model.name,zo=(b==null?void 0:b.removeBGModel)!==Qo.removeBGModel&&Lr,e0=(b==null?void 0:b.realesrganModel)!==Qo.realesrganModel&&jr,Xr=(b==null?void 0:b.interactiveSegModel)!==Qo.interactiveSegModel&&Yr;if(Mo||zo||e0||Xr){const Zr=[];if(Mo&&Zr.push(`Switching model from ${g.model.name} to ${Tt.name}`),zo&&Zr.push(`Switching RemoveBG model from ${b==null?void 0:b.removeBGModel} to ${Qo.removeBGModel}`),e0&&Zr.push(`Switching RealESRGAN model from ${b==null?void 0:b.realesrganModel} to ${Qo.realesrganModel}`),Xr&&Zr.push(`Switching ${PluginName.InteractiveSeg} model from ${b==null?void 0:b.interactiveSegModel} to ${Qo.interactiveSegModel}`),Lt(Zr),et({disableShortCuts:!0}),Mo)try{wt({title:`Switch to ${Tt.name} success`}),vt(Tt)}catch(wn){wt({variant:"destructive",title:`Switch to ${Tt.name} failed: ${wn}`}),Ct(g.model)}if(zo)try{pt({removeBGModel:Qo.removeBGModel}),wt({title:`Switch to removeBG ${Qo.removeBGModel} success`})}catch(wn){wt({variant:"destructive",title:`Switch RemoveBG model to ${Qo.removeBGModel} failed: ${wn}`})}if(e0)try{const wn=await switchPluginModel(PluginName.RealESRGAN,Qo.realesrganModel);if(wn.status!==200)throw new Error(wn.statusText)}catch(wn){wt({variant:"destructive",title:`Switch RealESRGAN model to ${Qo.realesrganModel} failed: ${wn}`})}if(Xr)try{const wn=await switchPluginModel(PluginName.InteractiveSeg,Qo.interactiveSegModel);if(wn.status!==200)throw new Error(wn.statusText)}catch(wn){wt({variant:"destructive",title:`Switch ${PluginName.InteractiveSeg} model to ${Qo.interactiveSegModel} failed: ${wn}`})}Lt([]),et({disableShortCuts:!1})}}useHotKey("s",()=>{s(),a&&Kt(Gt.getValues())},[a,Gt,Tt,b]);const tr=b.modelInfos,rr=b.plugins,Lr=rr.some(Qo=>Qo.name===PluginName.RemoveBG),jr=rr.some(Qo=>Qo.name===PluginName.RealESRGAN),Yr=rr.some(Qo=>Qo.name===PluginName.InteractiveSeg);function An(Qo){s(),Qo||Kt(Gt.getValues())}function No(Qo){Ct(Qo)}function o0(Qo){return tr?tr.filter(Mo=>Qo.includes(Mo.model_type)).map(Mo=>jsxRuntimeExports.jsxs("div",{onClick:()=>No(Mo),className:"px-2",children:[jsxRuntimeExports.jsx("div",{className:cn$1([Mo.name===Tt.name?"bg-muted":"hover:bg-muted","rounded-md px-2 py-2","cursor-default"]),children:jsxRuntimeExports.jsx("div",{className:"text-base",children:Mo.name})}),jsxRuntimeExports.jsx(Separator$1,{className:"my-1"})]},Mo.name)):jsxRuntimeExports.jsx("div",{children:"Please download model first"})}function t0(){let Qo=MODEL_TYPE_INPAINT;for(let Mo of tr)if(Tt.name===Mo.name){Qo=Mo.model_type,Qo===MODEL_TYPE_DIFFUSERS_SDXL&&(Qo=MODEL_TYPE_DIFFUSERS_SD),Qo===MODEL_TYPE_DIFFUSERS_SDXL_INPAINT&&(Qo=MODEL_TYPE_DIFFUSERS_SD_INPAINT);break}return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 w-[510px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 rounded-md",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Current Model"}),jsxRuntimeExports.jsx("div",{children:Tt.name})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-4  rounded-md",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-1 items-center justify-start",children:jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Available models"})}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:Qo,children:[jsxRuntimeExports.jsxs(TabsList,{children:[jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_INPAINT,children:"Inpaint"}),jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_DIFFUSERS_SD,children:"Stable Diffusion"}),jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_DIFFUSERS_SD_INPAINT,children:"Stable Diffusion Inpaint"}),jsxRuntimeExports.jsx(TabsTrigger,{value:MODEL_TYPE_OTHER,children:"Other Diffusion"})]}),jsxRuntimeExports.jsxs(ScrollArea,{className:"h-[240px] w-full mt-2 outline-none border rounded-lg",children:[jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_INPAINT,children:o0([MODEL_TYPE_INPAINT])}),jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_DIFFUSERS_SD,children:o0([MODEL_TYPE_DIFFUSERS_SD,MODEL_TYPE_DIFFUSERS_SDXL])}),jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_DIFFUSERS_SD_INPAINT,children:o0([MODEL_TYPE_DIFFUSERS_SD_INPAINT,MODEL_TYPE_DIFFUSERS_SDXL_INPAINT])}),jsxRuntimeExports.jsx(TabsContent,{value:MODEL_TYPE_OTHER,children:o0([MODEL_TYPE_OTHER])})]})]})]})]})}function c0(){return jsxRuntimeExports.jsxs("div",{className:"space-y-4 w-[510px]",children:[jsxRuntimeExports.jsx(FormField,{control:Gt.control,name:"enableManualInpainting",render:({field:Qo})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Enable manual inpainting"}),jsxRuntimeExports.jsx(FormDescription,{children:"For erase model, click a button to trigger inpainting after draw mask."})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:Qo.value,onCheckedChange:Qo.onChange})})]})}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsx(FormField,{control:Gt.control,name:"enableDownloadMask",render:({field:Qo})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Enable download mask"}),jsxRuntimeExports.jsx(FormDescription,{children:"Also download the mask after save the inpainting result."})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:Qo.value,onCheckedChange:Qo.onChange})})]})}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsx(FormField,{control:Gt.control,name:"enableAutoExtractPrompt",render:({field:Qo})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Enable auto extract prompt"}),jsxRuntimeExports.jsx(FormDescription,{children:"Automatically extract prompt/negativate prompt from the image meta."})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:Qo.value,onCheckedChange:Qo.onChange})})]})})]})}function n0(){return jsxRuntimeExports.jsxs("div",{className:"space-y-4 w-[510px]",children:[jsxRuntimeExports.jsx(FormField,{control:Gt.control,name:"removeBGModel",render:({field:Qo})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Remove Background"}),jsxRuntimeExports.jsx(FormDescription,{children:"Remove background model"})]}),jsxRuntimeExports.jsxs(Select,{onValueChange:Qo.onChange,defaultValue:Qo.value,disabled:!Lr,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select removebg model"})})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:b==null?void 0:b.removeBGModels.map(Mo=>jsxRuntimeExports.jsx(SelectItem,{value:Mo,children:Mo},Mo))})})]})]})}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsx(FormField,{control:Gt.control,name:"realesrganModel",render:({field:Qo})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"RealESRGAN"}),jsxRuntimeExports.jsx(FormDescription,{children:"RealESRGAN Model"})]}),jsxRuntimeExports.jsxs(Select,{onValueChange:Qo.onChange,defaultValue:Qo.value,disabled:!jr,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select RealESRGAN model"})})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:b==null?void 0:b.realesrganModels.map(Mo=>jsxRuntimeExports.jsx(SelectItem,{value:Mo,children:Mo},Mo))})})]})]})}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsx(FormField,{control:Gt.control,name:"interactiveSegModel",render:({field:Qo})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Interactive Segmentation"}),jsxRuntimeExports.jsx(FormDescription,{children:"Interactive Segmentation Model"})]}),jsxRuntimeExports.jsxs(Select,{onValueChange:Qo.onChange,defaultValue:Qo.value,disabled:!Yr,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select interactive segmentation model"})})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:b==null?void 0:b.interactiveSegModels.map(Mo=>jsxRuntimeExports.jsx(SelectItem,{value:Mo,children:Mo},Mo))})})]})]})})]})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertDialog,{open:Ht,children:jsxRuntimeExports.jsx(AlertDialogContent,{children:jsxRuntimeExports.jsx(AlertDialogHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{role:"status",children:[jsxRuntimeExports.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-primary",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Loading..."})]}),jt?jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jt.map((Qo,Mo)=>jsxRuntimeExports.jsx("div",{children:Qo},Mo))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})})})}),jsxRuntimeExports.jsxs(Dialog,{open:a,onOpenChange:An,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(IconButton,{tooltip:"Settings",children:jsxRuntimeExports.jsx(Settings,{})})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-3xl h-[600px]",onOpenAutoFocus:Qo=>Qo.preventDefault(),children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Settings"}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row space-x-8 h-full",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col space-y-1",children:TAB_NAMES.map(Qo=>jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>d(Qo),className:cn$1(c===Qo?"bg-muted ":"hover:bg-muted","justify-start"),children:Qo},Qo))}),jsxRuntimeExports.jsx(Separator$1,{orientation:"vertical"}),jsxRuntimeExports.jsx(Form,{...Gt,children:jsxRuntimeExports.jsx("div",{className:"flex w-full justify-center",children:jsxRuntimeExports.jsxs("form",{onSubmit:Gt.handleSubmit(Kt),children:[c===TAB_MODEL?t0():jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),c===TAB_GENERAL?c0():jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),c===TAB_PLUGINS?n0():jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx("div",{className:"absolute right-10 bottom-6",children:jsxRuntimeExports.jsx(Button,{onClick:()=>An(!1),children:"Ok"})})]})})})]})]})]})]})}var U$3=1,Y$1=.9,H$1=.8,J=.17,p=.1,u=.999,$=.9999,k$1=.99,m=/[\\\/_+.#"@\[\(\{&]/,B$1=/[\\\/_+.#"@\[\(\{&]/g,K$1=/[\s-]/,X$2=/[\s-]/g;function G$1(a,s,c,d,et,g,at){if(g===s.length)return et===a.length?U$3:k$1;var $t=`${et},${g}`;if(at[$t]!==void 0)return at[$t];for(var vt=d.charAt(g),b=c.indexOf(vt,et),pt=0,st,wt,Tt,Ct;b>=0;)st=G$1(a,s,c,d,b+1,g+1,at),st>pt&&(b===et?st*=U$3:m.test(a.charAt(b-1))?(st*=H$1,Tt=a.slice(et,b-1).match(B$1),Tt&&et>0&&(st*=Math.pow(u,Tt.length))):K$1.test(a.charAt(b-1))?(st*=Y$1,Ct=a.slice(et,b-1).match(X$2),Ct&&et>0&&(st*=Math.pow(u,Ct.length))):(st*=J,et>0&&(st*=Math.pow(u,b-et))),a.charAt(b)!==s.charAt(g)&&(st*=$)),(st<p&&c.charAt(b-1)===d.charAt(g+1)||d.charAt(g+1)===d.charAt(g)&&c.charAt(b-1)!==d.charAt(g))&&(wt=G$1(a,s,c,d,b+1,g+2,at),wt*p>st&&(st=wt*p)),st>pt&&(pt=st),b=c.indexOf(vt,b+1);return at[$t]=pt,pt}function D$1(a){return a.toLowerCase().replace(X$2," ")}function W(a,s,c){return a=c&&c.length>0?`${a+" "+c.join(" ")}`:a,G$1(a,s,D$1(a),D$1(s),0,0,{})}var V$1='[cmdk-group=""]',X$1='[cmdk-group-items=""]',ge='[cmdk-group-heading=""]',Y='[cmdk-item=""]',le$1=`${Y}:not([aria-disabled="true"])`,Q$2="cmdk-item-select",M$2="data-value",Re=(a,s,c)=>W(a,s,c),ue=reactExports.createContext(void 0),G=()=>reactExports.useContext(ue),de=reactExports.createContext(void 0),Z$1=()=>reactExports.useContext(de),fe$2=reactExports.createContext(void 0),me$1=reactExports.forwardRef((a,s)=>{let c=k(()=>{var wn,r0;return{search:"",value:(r0=(wn=a.value)!=null?wn:a.defaultValue)!=null?r0:"",filtered:{count:0,items:new Map,groups:new Set}}}),d=k(()=>new Set),et=k(()=>new Map),g=k(()=>new Map),at=k(()=>new Set),$t=pe(a),{label:vt,children:b,value:pt,onValueChange:st,filter:wt,shouldFilter:Tt,loop:Ct,disablePointerSelection:jt=!1,vimBindings:Lt=!0,...Ht}=a,Gt=reactExports.useId(),Kt=reactExports.useId(),tr=reactExports.useId(),rr=reactExports.useRef(null),Lr=Me$1();T$1(()=>{if(pt!==void 0){let wn=pt.trim();c.current.value=wn,jr.emit()}},[pt]),T$1(()=>{Lr(6,c0)},[]);let jr=reactExports.useMemo(()=>({subscribe:wn=>(at.current.add(wn),()=>at.current.delete(wn)),snapshot:()=>c.current,setState:(wn,r0,ko)=>{var _n,i0,a0;if(!Object.is(c.current[wn],r0)){if(c.current[wn]=r0,wn==="search")t0(),No(),Lr(1,o0);else if(wn==="value"&&(ko||Lr(5,c0),((_n=$t.current)==null?void 0:_n.value)!==void 0)){let m0=r0??"";(a0=(i0=$t.current).onValueChange)==null||a0.call(i0,m0);return}jr.emit()}},emit:()=>{at.current.forEach(wn=>wn())}}),[]),Yr=reactExports.useMemo(()=>({value:(wn,r0,ko)=>{var _n;r0!==((_n=g.current.get(wn))==null?void 0:_n.value)&&(g.current.set(wn,{value:r0,keywords:ko}),c.current.filtered.items.set(wn,An(r0,ko)),Lr(2,()=>{No(),jr.emit()}))},item:(wn,r0)=>(d.current.add(wn),r0&&(et.current.has(r0)?et.current.get(r0).add(wn):et.current.set(r0,new Set([wn]))),Lr(3,()=>{t0(),No(),c.current.value||o0(),jr.emit()}),()=>{g.current.delete(wn),d.current.delete(wn),c.current.filtered.items.delete(wn);let ko=n0();Lr(4,()=>{t0(),(ko==null?void 0:ko.getAttribute("id"))===wn&&o0(),jr.emit()})}),group:wn=>(et.current.has(wn)||et.current.set(wn,new Set),()=>{g.current.delete(wn),et.current.delete(wn)}),filter:()=>$t.current.shouldFilter,label:vt||a["aria-label"],disablePointerSelection:jt,listId:Gt,inputId:tr,labelId:Kt,listInnerRef:rr}),[]);function An(wn,r0){var ko,_n;let i0=(_n=(ko=$t.current)==null?void 0:ko.filter)!=null?_n:Re;return wn?i0(wn,c.current.search,r0):0}function No(){if(!c.current.search||$t.current.shouldFilter===!1)return;let wn=c.current.filtered.items,r0=[];c.current.filtered.groups.forEach(_n=>{let i0=et.current.get(_n),a0=0;i0.forEach(m0=>{let p0=wn.get(m0);a0=Math.max(p0,a0)}),r0.push([_n,a0])});let ko=rr.current;Qo().sort((_n,i0)=>{var a0,m0;let p0=_n.getAttribute("id"),x0=i0.getAttribute("id");return((a0=wn.get(x0))!=null?a0:0)-((m0=wn.get(p0))!=null?m0:0)}).forEach(_n=>{let i0=_n.closest(X$1);i0?i0.appendChild(_n.parentElement===i0?_n:_n.closest(`${X$1} > *`)):ko.appendChild(_n.parentElement===ko?_n:_n.closest(`${X$1} > *`))}),r0.sort((_n,i0)=>i0[1]-_n[1]).forEach(_n=>{let i0=rr.current.querySelector(`${V$1}[${M$2}="${encodeURIComponent(_n[0])}"]`);i0==null||i0.parentElement.appendChild(i0)})}function o0(){let wn=Qo().find(ko=>ko.getAttribute("aria-disabled")!=="true"),r0=wn==null?void 0:wn.getAttribute(M$2);jr.setState("value",r0||void 0)}function t0(){var wn,r0,ko,_n;if(!c.current.search||$t.current.shouldFilter===!1){c.current.filtered.count=d.current.size;return}c.current.filtered.groups=new Set;let i0=0;for(let a0 of d.current){let m0=(r0=(wn=g.current.get(a0))==null?void 0:wn.value)!=null?r0:"",p0=(_n=(ko=g.current.get(a0))==null?void 0:ko.keywords)!=null?_n:[],x0=An(m0,p0);c.current.filtered.items.set(a0,x0),x0>0&&i0++}for(let[a0,m0]of et.current)for(let p0 of m0)if(c.current.filtered.items.get(p0)>0){c.current.filtered.groups.add(a0);break}c.current.filtered.count=i0}function c0(){var wn,r0,ko;let _n=n0();_n&&(((wn=_n.parentElement)==null?void 0:wn.firstChild)===_n&&((ko=(r0=_n.closest(V$1))==null?void 0:r0.querySelector(ge))==null||ko.scrollIntoView({block:"nearest"})),_n.scrollIntoView({block:"nearest"}))}function n0(){var wn;return(wn=rr.current)==null?void 0:wn.querySelector(`${Y}[aria-selected="true"]`)}function Qo(){var wn;return Array.from((wn=rr.current)==null?void 0:wn.querySelectorAll(le$1))}function Mo(wn){let r0=Qo()[wn];r0&&jr.setState("value",r0.getAttribute(M$2))}function zo(wn){var r0;let ko=n0(),_n=Qo(),i0=_n.findIndex(m0=>m0===ko),a0=_n[i0+wn];(r0=$t.current)!=null&&r0.loop&&(a0=i0+wn<0?_n[_n.length-1]:i0+wn===_n.length?_n[0]:_n[i0+wn]),a0&&jr.setState("value",a0.getAttribute(M$2))}function e0(wn){let r0=n0(),ko=r0==null?void 0:r0.closest(V$1),_n;for(;ko&&!_n;)ko=wn>0?we$2(ko,V$1):Ie(ko,V$1),_n=ko==null?void 0:ko.querySelector(le$1);_n?jr.setState("value",_n.getAttribute(M$2)):zo(wn)}let Xr=()=>Mo(Qo().length-1),In=wn=>{wn.preventDefault(),wn.metaKey?Xr():wn.altKey?e0(1):zo(1)},Zr=wn=>{wn.preventDefault(),wn.metaKey?Mo(0):wn.altKey?e0(-1):zo(-1)};return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:s,tabIndex:-1,...Ht,"cmdk-root":"",onKeyDown:wn=>{var r0;if((r0=Ht.onKeyDown)==null||r0.call(Ht,wn),!wn.defaultPrevented)switch(wn.key){case"n":case"j":{Lt&&wn.ctrlKey&&In(wn);break}case"ArrowDown":{In(wn);break}case"p":case"k":{Lt&&wn.ctrlKey&&Zr(wn);break}case"ArrowUp":{Zr(wn);break}case"Home":{wn.preventDefault(),Mo(0);break}case"End":{wn.preventDefault(),Xr();break}case"Enter":if(!wn.nativeEvent.isComposing&&wn.keyCode!==229){wn.preventDefault();let ko=n0();if(ko){let _n=new Event(Q$2);ko.dispatchEvent(_n)}}}}},reactExports.createElement("label",{"cmdk-label":"",htmlFor:Yr.inputId,id:Yr.labelId,style:De$2},vt),F(a,wn=>reactExports.createElement(de.Provider,{value:jr},reactExports.createElement(ue.Provider,{value:Yr},wn))))}),be$1=reactExports.forwardRef((a,s)=>{var c,d;let et=reactExports.useId(),g=reactExports.useRef(null),at=reactExports.useContext(fe$2),$t=G(),vt=pe(a),b=(d=(c=vt.current)==null?void 0:c.forceMount)!=null?d:at==null?void 0:at.forceMount;T$1(()=>{if(!b)return $t.item(et,at==null?void 0:at.id)},[b]);let pt=ve$1(et,g,[a.value,a.children,g],a.keywords),st=Z$1(),wt=D(Lr=>Lr.value&&Lr.value===pt.current),Tt=D(Lr=>b||$t.filter()===!1?!0:Lr.search?Lr.filtered.items.get(et)>0:!0);reactExports.useEffect(()=>{let Lr=g.current;if(!(!Lr||a.disabled))return Lr.addEventListener(Q$2,Ct),()=>Lr.removeEventListener(Q$2,Ct)},[Tt,a.onSelect,a.disabled]);function Ct(){var Lr,jr;jt(),(jr=(Lr=vt.current).onSelect)==null||jr.call(Lr,pt.current)}function jt(){st.setState("value",pt.current,!0)}if(!Tt)return null;let{disabled:Lt,value:Ht,onSelect:Gt,forceMount:Kt,keywords:tr,...rr}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([g,s]),...rr,id:et,"cmdk-item":"",role:"option","aria-disabled":!!Lt,"aria-selected":!!wt,"data-disabled":!!Lt,"data-selected":!!wt,onPointerMove:Lt||$t.disablePointerSelection?void 0:jt,onClick:Lt?void 0:Ct},a.children)}),he=reactExports.forwardRef((a,s)=>{let{heading:c,children:d,forceMount:et,...g}=a,at=reactExports.useId(),$t=reactExports.useRef(null),vt=reactExports.useRef(null),b=reactExports.useId(),pt=G(),st=D(Tt=>et||pt.filter()===!1?!0:Tt.search?Tt.filtered.groups.has(at):!0);T$1(()=>pt.group(at),[]),ve$1(at,$t,[a.value,a.heading,vt]);let wt=reactExports.useMemo(()=>({id:at,forceMount:et}),[et]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([$t,s]),...g,"cmdk-group":"",role:"presentation",hidden:st?void 0:!0},c&&reactExports.createElement("div",{ref:vt,"cmdk-group-heading":"","aria-hidden":!0,id:b},c),F(a,Tt=>reactExports.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":c?b:void 0},reactExports.createElement(fe$2.Provider,{value:wt},Tt))))}),ye$2=reactExports.forwardRef((a,s)=>{let{alwaysRender:c,...d}=a,et=reactExports.useRef(null),g=D(at=>!at.search);return!c&&!g?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([et,s]),...d,"cmdk-separator":"",role:"separator"})}),Ee$1=reactExports.forwardRef((a,s)=>{let{onValueChange:c,...d}=a,et=a.value!=null,g=Z$1(),at=D(pt=>pt.search),$t=D(pt=>pt.value),vt=G(),b=reactExports.useMemo(()=>{var pt;let st=(pt=vt.listInnerRef.current)==null?void 0:pt.querySelector(`${Y}[${M$2}="${encodeURIComponent($t)}"]`);return st==null?void 0:st.getAttribute("id")},[]);return reactExports.useEffect(()=>{a.value!=null&&g.setState("search",a.value)},[a.value]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.input,{ref:s,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":vt.listId,"aria-labelledby":vt.labelId,"aria-activedescendant":b,id:vt.inputId,type:"text",value:et?a.value:at,onChange:pt=>{et||g.setState("search",pt.target.value),c==null||c(pt.target.value)}})}),Se=reactExports.forwardRef((a,s)=>{let{children:c,label:d="Suggestions",...et}=a,g=reactExports.useRef(null),at=reactExports.useRef(null),$t=G();return reactExports.useEffect(()=>{if(at.current&&g.current){let vt=at.current,b=g.current,pt,st=new ResizeObserver(()=>{pt=requestAnimationFrame(()=>{let wt=vt.offsetHeight;b.style.setProperty("--cmdk-list-height",wt.toFixed(1)+"px")})});return st.observe(vt),()=>{cancelAnimationFrame(pt),st.unobserve(vt)}}},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:N$1([g,s]),...et,"cmdk-list":"",role:"listbox","aria-label":d,id:$t.listId},F(a,vt=>reactExports.createElement("div",{ref:N$1([at,$t.listInnerRef]),"cmdk-list-sizer":""},vt)))}),Ce=reactExports.forwardRef((a,s)=>{let{open:c,onOpenChange:d,overlayClassName:et,contentClassName:g,container:at,...$t}=a;return reactExports.createElement($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,{open:c,onOpenChange:d},reactExports.createElement($5d3850c4d0b4e6c7$export$602eac185826482c,{container:at},reactExports.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{"cmdk-overlay":"",className:et}),reactExports.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{"aria-label":a.label,"cmdk-dialog":"",className:g},reactExports.createElement(me$1,{ref:s,...$t}))))}),xe$1=reactExports.forwardRef((a,s)=>D(c=>c.filtered.count===0)?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:s,...a,"cmdk-empty":"",role:"presentation"}):null),Pe$1=reactExports.forwardRef((a,s)=>{let{progress:c,children:d,label:et="Loading...",...g}=a;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{ref:s,...g,"cmdk-loading":"",role:"progressbar","aria-valuenow":c,"aria-valuemin":0,"aria-valuemax":100,"aria-label":et},F(a,at=>reactExports.createElement("div",{"aria-hidden":!0},at)))}),He=Object.assign(me$1,{List:Se,Item:be$1,Input:Ee$1,Group:he,Separator:ye$2,Dialog:Ce,Empty:xe$1,Loading:Pe$1});function we$2(a,s){let c=a.nextElementSibling;for(;c;){if(c.matches(s))return c;c=c.nextElementSibling}}function Ie(a,s){let c=a.previousElementSibling;for(;c;){if(c.matches(s))return c;c=c.previousElementSibling}}function pe(a){let s=reactExports.useRef(a);return T$1(()=>{s.current=a}),s}var T$1=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect;function k(a){let s=reactExports.useRef();return s.current===void 0&&(s.current=a()),s}function N$1(a){return s=>{a.forEach(c=>{typeof c=="function"?c(s):c!=null&&(c.current=s)})}}function D(a){let s=Z$1(),c=()=>a(s.snapshot());return reactExports.useSyncExternalStore(s.subscribe,c,c)}function ve$1(a,s,c,d=[]){let et=reactExports.useRef(),g=G();return T$1(()=>{var at;let $t=(()=>{var b;for(let pt of c){if(typeof pt=="string")return pt.trim();if(typeof pt=="object"&&"current"in pt)return pt.current?(b=pt.current.textContent)==null?void 0:b.trim():et.current}})(),vt=d.map(b=>b.trim());g.value(a,$t,vt),(at=s.current)==null||at.setAttribute(M$2,$t),et.current=$t}),et}var Me$1=()=>{let[a,s]=reactExports.useState(),c=k(()=>new Map);return T$1(()=>{c.current.forEach(d=>d()),c.current=new Map},[a]),(d,et)=>{c.current.set(d,et),s({})}};function Te(a){let s=a.type;return typeof s=="function"?s(a.props):"render"in s?s.render(a.props):a}function F({asChild:a,children:s},c){return a&&reactExports.isValidElement(s)?reactExports.cloneElement(Te(s),{ref:s.ref},c(s.props.children)):c(s)}var De$2={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Command=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(He,{ref:c,className:cn$1("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...s}));Command.displayName=He.displayName;const CommandInput=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[jsxRuntimeExports.jsx(Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),jsxRuntimeExports.jsx(He.Input,{ref:c,className:cn$1("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...s})]}));CommandInput.displayName=He.Input.displayName;const CommandList=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(He.List,{ref:c,className:cn$1("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...s}));CommandList.displayName=He.List.displayName;const CommandEmpty=reactExports.forwardRef((a,s)=>jsxRuntimeExports.jsx(He.Empty,{ref:s,className:"py-6 text-center text-sm",...a}));CommandEmpty.displayName=He.Empty.displayName;const CommandGroup=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(He.Group,{ref:c,className:cn$1("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...s}));CommandGroup.displayName=He.Group.displayName;const CommandSeparator=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(He.Separator,{ref:c,className:cn$1("-mx-1 h-px bg-border",a),...s}));CommandSeparator.displayName=He.Separator.displayName;const CommandItem=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(He.Item,{ref:c,className:cn$1("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",a),...s}));CommandItem.displayName=He.Item.displayName;const $cb5cc270b50c6fcd$var$POPOVER_NAME="Popover",[$cb5cc270b50c6fcd$var$createPopoverContext,$cb5cc270b50c6fcd$export$c8393c9e73286932]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cb5cc270b50c6fcd$var$POPOVER_NAME,[$cf1ac5d9fe0e8206$export$722aac194ae923]),$cb5cc270b50c6fcd$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cb5cc270b50c6fcd$var$PopoverProvider,$cb5cc270b50c6fcd$var$usePopoverContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$POPOVER_NAME),$cb5cc270b50c6fcd$export$5b6b19405a83ff9d=a=>{const{__scopePopover:s,children:c,open:d,defaultOpen:et,onOpenChange:g,modal:at=!1}=a,$t=$cb5cc270b50c6fcd$var$usePopperScope(s),vt=reactExports.useRef(null),[b,pt]=reactExports.useState(!1),[st=!1,wt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:d,defaultProp:et,onChange:g});return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,$t,reactExports.createElement($cb5cc270b50c6fcd$var$PopoverProvider,{scope:s,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:vt,open:st,onOpenChange:wt,onOpenToggle:reactExports.useCallback(()=>wt(Tt=>!Tt),[wt]),hasCustomAnchor:b,onCustomAnchorAdd:reactExports.useCallback(()=>pt(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>pt(!1),[]),modal:at},c))},$cb5cc270b50c6fcd$var$TRIGGER_NAME="PopoverTrigger",$cb5cc270b50c6fcd$export$7dacb05d26466c3=reactExports.forwardRef((a,s)=>{const{__scopePopover:c,...d}=a,et=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$TRIGGER_NAME,c),g=$cb5cc270b50c6fcd$var$usePopperScope(c),at=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,et.triggerRef),$t=reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-haspopup":"dialog","aria-expanded":et.open,"aria-controls":et.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(et.open)},d,{ref:at,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onClick,et.onOpenToggle)}));return et.hasCustomAnchor?$t:reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},g),$t)}),$cb5cc270b50c6fcd$var$PORTAL_NAME="PopoverPortal",[$cb5cc270b50c6fcd$var$PortalProvider,$cb5cc270b50c6fcd$var$usePortalContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$PORTAL_NAME,{forceMount:void 0}),$cb5cc270b50c6fcd$export$dd679ffb4362d2d4=a=>{const{__scopePopover:s,forceMount:c,children:d,container:et}=a,g=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$PORTAL_NAME,s);return reactExports.createElement($cb5cc270b50c6fcd$var$PortalProvider,{scope:s,forceMount:c},reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:c||g.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:et},d)))},$cb5cc270b50c6fcd$var$CONTENT_NAME="PopoverContent",$cb5cc270b50c6fcd$export$d7e1f420b25549ff=reactExports.forwardRef((a,s)=>{const c=$cb5cc270b50c6fcd$var$usePortalContext($cb5cc270b50c6fcd$var$CONTENT_NAME,a.__scopePopover),{forceMount:d=c.forceMount,...et}=a,g=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,a.__scopePopover);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:d||g.open},g.modal?reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentModal,_extends$1({},et,{ref:s})):reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentNonModal,_extends$1({},et,{ref:s})))}),$cb5cc270b50c6fcd$var$PopoverContentModal=reactExports.forwardRef((a,s)=>{const c=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,a.__scopePopover),d=reactExports.useRef(null),et=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,d),g=reactExports.useRef(!1);return reactExports.useEffect(()=>{const at=d.current;if(at)return hideOthers(at)},[]),reactExports.createElement(ReactRemoveScroll$1,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},a,{ref:et,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onCloseAutoFocus,at=>{var $t;at.preventDefault(),g.current||($t=c.triggerRef.current)===null||$t===void 0||$t.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDownOutside,at=>{const $t=at.detail.originalEvent,vt=$t.button===0&&$t.ctrlKey===!0,b=$t.button===2||vt;g.current=b},{checkForDefaultPrevented:!1}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocusOutside,at=>at.preventDefault(),{checkForDefaultPrevented:!1})})))}),$cb5cc270b50c6fcd$var$PopoverContentNonModal=reactExports.forwardRef((a,s)=>{const c=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,a.__scopePopover),d=reactExports.useRef(!1),et=reactExports.useRef(!1);return reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},a,{ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var at;if((at=a.onCloseAutoFocus)===null||at===void 0||at.call(a,g),!g.defaultPrevented){var $t;d.current||($t=c.triggerRef.current)===null||$t===void 0||$t.focus(),g.preventDefault()}d.current=!1,et.current=!1},onInteractOutside:g=>{var at,$t;(at=a.onInteractOutside)===null||at===void 0||at.call(a,g),g.defaultPrevented||(d.current=!0,g.detail.originalEvent.type==="pointerdown"&&(et.current=!0));const vt=g.target;(($t=c.triggerRef.current)===null||$t===void 0?void 0:$t.contains(vt))&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&et.current&&g.preventDefault()}}))}),$cb5cc270b50c6fcd$var$PopoverContentImpl=reactExports.forwardRef((a,s)=>{const{__scopePopover:c,trapFocus:d,onOpenAutoFocus:et,onCloseAutoFocus:g,disableOutsidePointerEvents:at,onEscapeKeyDown:$t,onPointerDownOutside:vt,onFocusOutside:b,onInteractOutside:pt,...st}=a,wt=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,c),Tt=$cb5cc270b50c6fcd$var$usePopperScope(c);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:et,onUnmountAutoFocus:g},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:at,onInteractOutside:pt,onEscapeKeyDown:$t,onPointerDownOutside:vt,onFocusOutside:b,onDismiss:()=>wt.onOpenChange(!1)},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({"data-state":$cb5cc270b50c6fcd$var$getState(wt.open),role:"dialog",id:wt.contentId},Tt,st,{ref:s,style:{...st.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function $cb5cc270b50c6fcd$var$getState(a){return a?"open":"closed"}const $cb5cc270b50c6fcd$export$be92b6f5f03c0fe9=$cb5cc270b50c6fcd$export$5b6b19405a83ff9d,$cb5cc270b50c6fcd$export$41fb9f06171c75f4=$cb5cc270b50c6fcd$export$7dacb05d26466c3,$cb5cc270b50c6fcd$export$602eac185826482c=$cb5cc270b50c6fcd$export$dd679ffb4362d2d4,$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2=$cb5cc270b50c6fcd$export$d7e1f420b25549ff,Popover=$cb5cc270b50c6fcd$export$be92b6f5f03c0fe9,PopoverTrigger=$cb5cc270b50c6fcd$export$41fb9f06171c75f4,PopoverContent=reactExports.forwardRef(({className:a,align:s="center",sideOffset:c=4,...d},et)=>jsxRuntimeExports.jsx($cb5cc270b50c6fcd$export$602eac185826482c,{children:jsxRuntimeExports.jsx($cb5cc270b50c6fcd$export$7c6e2c02157bb7d2,{ref:et,align:s,sideOffset:c,className:cn$1("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})}));PopoverContent.displayName=$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2.displayName;const languages=[{label:"English",value:"en"},{label:"Español",value:"es"}];function LanguageSwitcher(){var at;const[a,s]=useLanguageStore($t=>[$t.language,$t.setLanguage]),{i18n:{changeLanguage:c}}=useTranslation(),[d,et]=React.useState(!1),g=$t=>{s($t),c($t),et(!1)};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Popover,{open:d,onOpenChange:et,children:[jsxRuntimeExports.jsx(PopoverTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",role:"combobox",className:"w-[150px] justify-between",children:[a?(at=languages.find($t=>$t.value===a))==null?void 0:at.label:"Select language",jsxRuntimeExports.jsx(ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),jsxRuntimeExports.jsx(PopoverContent,{className:"w-[150px] p-2",children:jsxRuntimeExports.jsx(Command,{children:jsxRuntimeExports.jsx(CommandList,{children:jsxRuntimeExports.jsx(CommandGroup,{heading:"Suggestions",children:languages.map($t=>jsxRuntimeExports.jsxs(CommandItem,{onSelect:()=>g($t.value),children:[jsxRuntimeExports.jsx(Check,{className:`mr-2 h-4 w-4 ${$t.value===a?"opacity-100":"opacity-0"}`}),$t.label]},$t.value))})})})})]})})}function useFirstMountState(){var a=reactExports.useRef(!0);return a.current?(a.current=!1,!0):a.current}var useUpdateEffect=function(a,s){var c=useFirstMountState();reactExports.useEffect(function(){if(!c)return a()},s)},noop$1=function(){};function on$1(a){for(var s=[],c=1;c<arguments.length;c++)s[c-1]=arguments[c];a&&a.addEventListener&&a.addEventListener.apply(a,s)}function off(a){for(var s=[],c=1;c<arguments.length;c++)s[c-1]=arguments[c];a&&a.removeEventListener&&a.removeEventListener.apply(a,s)}var isBrowser=typeof window<"u",toggleReducer=function(a,s){return typeof s=="boolean"?s:!a},useToggle=function(a){return reactExports.useReducer(toggleReducer,a)},defaultEvents=["mousedown","touchstart"],useClickAway=function(a,s,c){c===void 0&&(c=defaultEvents);var d=reactExports.useRef(s);reactExports.useEffect(function(){d.current=s},[s]),reactExports.useEffect(function(){for(var et=function(vt){var b=a.current;b&&!b.contains(vt.target)&&d.current(vt)},g=0,at=c;g<at.length;g++){var $t=at[g];on$1(document,$t,et)}return function(){for(var vt=0,b=c;vt<b.length;vt++){var pt=b[vt];off(document,pt,et)}}},[c,a])},useEffectOnce=function(a){reactExports.useEffect(a,[])},defaultTarget=isBrowser?window:null,isListenerType1=function(a){return!!a.addEventListener},isListenerType2=function(a){return!!a.on},useEvent=function(a,s,c,d){c===void 0&&(c=defaultTarget),reactExports.useEffect(function(){if(s&&c)return isListenerType1(c)?on$1(c,a,s,d):isListenerType2(c)&&c.on(a,s,d),function(){isListenerType1(c)?off(c,a,s,d):isListenerType2(c)&&c.off(a,s,d)}},[a,s,c,JSON.stringify(d)])},createKeyPredicate=function(a){return typeof a=="function"?a:typeof a=="string"?function(s){return s.key===a}:a?function(){return!0}:function(){return!1}},useKey=function(a,s,c,d){s===void 0&&(s=noop$1),c===void 0&&(c={}),d===void 0&&(d=[a]);var et=c.event,g=et===void 0?"keydown":et,at=c.target,$t=c.options,vt=reactExports.useMemo(function(){var b=createKeyPredicate(a),pt=function(st){if(b(st))return s(st)};return pt},d);useEvent(g,vt,at,$t)},useKeyPress=function(a){var s=reactExports.useState([!1,null]),c=s[0],d=s[1];return useKey(a,function(et){return d([!0,et])},{event:"keydown"},[c]),useKey(a,function(et){return d([!1,et])},{event:"keyup"},[c]),c},useKeyPressEvent=function(a,s,c,d){d===void 0&&(d=useKeyPress);var et=d(a),g=et[0],at=et[1];useUpdateEffect(function(){!g&&c?c(at):g&&s&&s(at)},[g])},useUnmount=function(a){var s=reactExports.useRef(a);s.current=a,useEffectOnce(function(){return function(){return s.current()}})},useRafState=function(a){var s=reactExports.useRef(0),c=reactExports.useState(a),d=c[0],et=c[1],g=reactExports.useCallback(function(at){cancelAnimationFrame(s.current),s.current=requestAnimationFrame(function(){et(at)})},[]);return useUnmount(function(){cancelAnimationFrame(s.current)}),[d,g]},useWindowSize=function(a,s){a===void 0&&(a=1/0),s===void 0&&(s=1/0);var c=useRafState({width:isBrowser?window.innerWidth:a,height:isBrowser?window.innerHeight:s}),d=c[0],et=c[1];return reactExports.useEffect(function(){if(isBrowser){var g=function(){et({width:window.innerWidth,height:window.innerHeight})};return on$1(window,"resize",g),function(){off(window,"resize",g)}}},[]),d};const Textarea=reactExports.forwardRef(({className:a,...s},c)=>{const d=useStore(at=>at.updateAppState),et=()=>{d({disableShortCuts:!0})},g=()=>{d({disableShortCuts:!1})};return jsxRuntimeExports.jsx("textarea",{className:cn$1("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50","overflow-auto",a),tabIndex:-1,ref:c,onFocus:et,onBlur:g,...s})});Textarea.displayName="Textarea";const PromptInput=()=>{const[a,s,c,d,et,g]=useStore(Ct=>[Ct.getIsProcessing(),Ct.settings.prompt,Ct.updateSettings,Ct.runInpainting,Ct.showPrevMask,Ct.hidePrevMask]),[at,$t]=useToggle(!1),vt=reactExports.useRef(null);useClickAway(vt,()=>{vt!=null&&vt.current&&vt.current.blur()});const b=Ct=>{Ct.preventDefault(),Ct.stopPropagation();const jt=Ct.target;c({prompt:jt.value})},pt=()=>{},st=Ct=>{Ct.key==="Enter"&&Ct.ctrlKey&&s.length},wt=()=>{et()},Tt=()=>{g()};return jsxRuntimeExports.jsx("div",{className:"flex gap-4 relative w-full justify-center h-full",children:jsxRuntimeExports.jsxs("div",{className:"absolute flex gap-4",children:[jsxRuntimeExports.jsx(Textarea,{ref:vt,placeholder:"I want to repaint of...",className:cn$1(at?"focus:overflow-y-auto":"overflow-y-hidden","min-h-[32px] h-[32px] overflow-x-hidden focus:h-[120px] overflow-y-hidden transition-[height] w-[500px] py-1 px-3 bg-background resize-none"),style:{scrollbarGutter:"stable"},value:s,onInput:b,onKeyUp:st,onTransitionEnd:$t}),jsxRuntimeExports.jsx(Button,{size:"sm",onClick:pt,disabled:a,onMouseEnter:wt,onMouseLeave:Tt,children:"Paint"})]})})},Header=()=>{const[a,s,c,d,et,g,at,$t,vt,b,pt,st,wt,Tt]=useStore(Ct=>[Ct.file,Ct.customMask,Ct.isInpainting,Ct.serverConfig,Ct.runMannually(),Ct.settings.enableUploadMask,Ct.settings.model,Ct.setFile,Ct.setCustomFile,Ct.runInpainting,Ct.showPrevMask,Ct.hidePrevMask,Ct.imageHeight,Ct.imageWidth]);return jsxRuntimeExports.jsxs("header",{className:"h-[60px] px-6 py-4 absolute top-[0] flex justify-between items-center w-full z-20 border-b backdrop-filter backdrop-blur-md bg-background/70",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:jsxRuntimeExports.jsx(ImageUploadButton,{disabled:c,tooltip:"Upload image",onFileUpload:Ct=>{$t(Ct)},children:jsxRuntimeExports.jsx(Image$1,{})})}),jsxRuntimeExports.jsx(PromptInput,{}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(LanguageSwitcher,{}),jsxRuntimeExports.jsx(Shortcuts,{}),jsxRuntimeExports.jsx(SettingsDialog,{})]})]})};function useImage(a){const[s,c]=reactExports.useState(null),[d,et]=reactExports.useState(!1),g=reactExports.useRef(document.createElement("canvas")),at=($t,vt)=>{const b=$t/vt;let pt=predefinedRatios[0],st=Math.abs(b-predefinedRatios[0].ratio);for(const wt of predefinedRatios){const Tt=Math.abs(b-wt.ratio);Tt<st&&(pt=wt,st=Tt)}return{targetWidth:pt.width,targetHeight:pt.height}};return reactExports.useEffect(()=>{if(!a)return;et(!1);const $t=new Image;return(async()=>{let b=null;if(typeof a=="string"){const pt=await urlToDataURI(a),st=dataURItoBlob(pt);b=new File([st],"image",{type:st.type})}else b=a;b&&($t.src=URL.createObjectURL(b),$t.onload=()=>{const{targetWidth:pt,targetHeight:st}=at($t.width,$t.height),wt=g.current,Tt=wt.getContext("2d");wt.width=pt,wt.height=st;const Ct=pt/$t.width,jt=st/$t.height,Lt=Math.min(Ct,jt),Ht=wt.width/2-$t.width/2*Lt,Gt=wt.height/2-$t.height/2*Lt;Tt.clearRect(0,0,wt.width,wt.height),Tt.drawImage($t,Ht,Gt,$t.width*Lt,$t.height*Lt);const Kt=new Image;Kt.src=wt.toDataURL("image/png"),Kt.onload=()=>{et(!0),c(Kt)}})})(),()=>{$t.onload=null}},[a]),[s,d]}const $faa2e61a3361514f$var$PAGE_KEYS=["PageUp","PageDown"],$faa2e61a3361514f$var$ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$faa2e61a3361514f$var$BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$faa2e61a3361514f$var$SLIDER_NAME="Slider",[$faa2e61a3361514f$var$Collection,$faa2e61a3361514f$var$useCollection,$faa2e61a3361514f$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($faa2e61a3361514f$var$SLIDER_NAME),[$faa2e61a3361514f$var$createSliderContext,$faa2e61a3361514f$export$ef72632d7b901f97]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($faa2e61a3361514f$var$SLIDER_NAME,[$faa2e61a3361514f$var$createCollectionScope]),[$faa2e61a3361514f$var$SliderProvider,$faa2e61a3361514f$var$useSliderContext]=$faa2e61a3361514f$var$createSliderContext($faa2e61a3361514f$var$SLIDER_NAME),$faa2e61a3361514f$export$472062a354075cee=reactExports.forwardRef((a,s)=>{const{name:c,min:d=0,max:et=100,step:g=1,orientation:at="horizontal",disabled:$t=!1,minStepsBetweenThumbs:vt=0,defaultValue:b=[d],value:pt,onValueChange:st=()=>{},onValueCommit:wt=()=>{},inverted:Tt=!1,...Ct}=a,[jt,Lt]=reactExports.useState(null),Ht=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,n0=>Lt(n0)),Gt=reactExports.useRef(new Set),Kt=reactExports.useRef(0),tr=at==="horizontal",rr=jt?!!jt.closest("form"):!0,Lr=tr?$faa2e61a3361514f$var$SliderHorizontal:$faa2e61a3361514f$var$SliderVertical,[jr=[],Yr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:pt,defaultProp:b,onChange:n0=>{var Qo;(Qo=[...Gt.current][Kt.current])===null||Qo===void 0||Qo.focus(),st(n0)}}),An=reactExports.useRef(jr);function No(n0){const Qo=$faa2e61a3361514f$var$getClosestValueIndex(jr,n0);c0(n0,Qo)}function o0(n0){c0(n0,Kt.current)}function t0(){const n0=An.current[Kt.current];jr[Kt.current]!==n0&&wt(jr)}function c0(n0,Qo,{commit:Mo}={commit:!1}){const zo=$faa2e61a3361514f$var$getDecimalCount(g),e0=$faa2e61a3361514f$var$roundValue(Math.round((n0-d)/g)*g+d,zo),Xr=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(e0,[d,et]);Yr((In=[])=>{const Zr=$faa2e61a3361514f$var$getNextSortedValues(In,Xr,Qo);if($faa2e61a3361514f$var$hasMinStepsBetweenValues(Zr,vt*g)){Kt.current=Zr.indexOf(Xr);const wn=String(Zr)!==String(In);return wn&&Mo&&wt(Zr),wn?Zr:In}else return In})}return reactExports.createElement($faa2e61a3361514f$var$SliderProvider,{scope:a.__scopeSlider,disabled:$t,min:d,max:et,valueIndexToChangeRef:Kt,thumbs:Gt.current,values:jr,orientation:at},reactExports.createElement($faa2e61a3361514f$var$Collection.Provider,{scope:a.__scopeSlider},reactExports.createElement($faa2e61a3361514f$var$Collection.Slot,{scope:a.__scopeSlider},reactExports.createElement(Lr,_extends$1({"aria-disabled":$t,"data-disabled":$t?"":void 0},Ct,{ref:Ht,onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Ct.onPointerDown,()=>{$t||(An.current=jr)}),min:d,max:et,inverted:Tt,onSlideStart:$t?void 0:No,onSlideMove:$t?void 0:o0,onSlideEnd:$t?void 0:t0,onHomeKeyDown:()=>!$t&&c0(d,0,{commit:!0}),onEndKeyDown:()=>!$t&&c0(et,jr.length-1,{commit:!0}),onStepKeyDown:({event:n0,direction:Qo})=>{if(!$t){const e0=$faa2e61a3361514f$var$PAGE_KEYS.includes(n0.key)||n0.shiftKey&&$faa2e61a3361514f$var$ARROW_KEYS.includes(n0.key)?10:1,Xr=Kt.current,In=jr[Xr],Zr=g*e0*Qo;c0(In+Zr,Xr,{commit:!0})}}})))),rr&&jr.map((n0,Qo)=>reactExports.createElement($faa2e61a3361514f$var$BubbleInput,{key:Qo,name:c?c+(jr.length>1?"[]":""):void 0,value:n0})))}),[$faa2e61a3361514f$var$SliderOrientationProvider,$faa2e61a3361514f$var$useSliderOrientationContext]=$faa2e61a3361514f$var$createSliderContext($faa2e61a3361514f$var$SLIDER_NAME,{startEdge:"left",endEdge:"right",size:"width",direction:1}),$faa2e61a3361514f$var$SliderHorizontal=reactExports.forwardRef((a,s)=>{const{min:c,max:d,dir:et,inverted:g,onSlideStart:at,onSlideMove:$t,onSlideEnd:vt,onStepKeyDown:b,...pt}=a,[st,wt]=reactExports.useState(null),Tt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,Kt=>wt(Kt)),Ct=reactExports.useRef(),jt=$f631663db3294ace$export$b39126d51d94e6f3(et),Lt=jt==="ltr",Ht=Lt&&!g||!Lt&&g;function Gt(Kt){const tr=Ct.current||st.getBoundingClientRect(),rr=[0,tr.width],jr=$faa2e61a3361514f$var$linearScale(rr,Ht?[c,d]:[d,c]);return Ct.current=tr,jr(Kt-tr.left)}return reactExports.createElement($faa2e61a3361514f$var$SliderOrientationProvider,{scope:a.__scopeSlider,startEdge:Ht?"left":"right",endEdge:Ht?"right":"left",direction:Ht?1:-1,size:"width"},reactExports.createElement($faa2e61a3361514f$var$SliderImpl,_extends$1({dir:jt,"data-orientation":"horizontal"},pt,{ref:Tt,style:{...pt.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:Kt=>{const tr=Gt(Kt.clientX);at==null||at(tr)},onSlideMove:Kt=>{const tr=Gt(Kt.clientX);$t==null||$t(tr)},onSlideEnd:()=>{Ct.current=void 0,vt==null||vt()},onStepKeyDown:Kt=>{const rr=$faa2e61a3361514f$var$BACK_KEYS[Ht?"from-left":"from-right"].includes(Kt.key);b==null||b({event:Kt,direction:rr?-1:1})}})))}),$faa2e61a3361514f$var$SliderVertical=reactExports.forwardRef((a,s)=>{const{min:c,max:d,inverted:et,onSlideStart:g,onSlideMove:at,onSlideEnd:$t,onStepKeyDown:vt,...b}=a,pt=reactExports.useRef(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,pt),wt=reactExports.useRef(),Tt=!et;function Ct(jt){const Lt=wt.current||pt.current.getBoundingClientRect(),Ht=[0,Lt.height],Kt=$faa2e61a3361514f$var$linearScale(Ht,Tt?[d,c]:[c,d]);return wt.current=Lt,Kt(jt-Lt.top)}return reactExports.createElement($faa2e61a3361514f$var$SliderOrientationProvider,{scope:a.__scopeSlider,startEdge:Tt?"bottom":"top",endEdge:Tt?"top":"bottom",size:"height",direction:Tt?1:-1},reactExports.createElement($faa2e61a3361514f$var$SliderImpl,_extends$1({"data-orientation":"vertical"},b,{ref:st,style:{...b.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:jt=>{const Lt=Ct(jt.clientY);g==null||g(Lt)},onSlideMove:jt=>{const Lt=Ct(jt.clientY);at==null||at(Lt)},onSlideEnd:()=>{wt.current=void 0,$t==null||$t()},onStepKeyDown:jt=>{const Ht=$faa2e61a3361514f$var$BACK_KEYS[Tt?"from-bottom":"from-top"].includes(jt.key);vt==null||vt({event:jt,direction:Ht?-1:1})}})))}),$faa2e61a3361514f$var$SliderImpl=reactExports.forwardRef((a,s)=>{const{__scopeSlider:c,onSlideStart:d,onSlideMove:et,onSlideEnd:g,onHomeKeyDown:at,onEndKeyDown:$t,onStepKeyDown:vt,...b}=a,pt=$faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$SLIDER_NAME,c);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},b,{ref:s,onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onKeyDown,st=>{st.key==="Home"?(at(st),st.preventDefault()):st.key==="End"?($t(st),st.preventDefault()):$faa2e61a3361514f$var$PAGE_KEYS.concat($faa2e61a3361514f$var$ARROW_KEYS).includes(st.key)&&(vt(st),st.preventDefault())}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerDown,st=>{const wt=st.target;wt.setPointerCapture(st.pointerId),st.preventDefault(),pt.thumbs.has(wt)?wt.focus():d(st)}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerMove,st=>{st.target.hasPointerCapture(st.pointerId)&&et(st)}),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onPointerUp,st=>{const wt=st.target;wt.hasPointerCapture(st.pointerId)&&(wt.releasePointerCapture(st.pointerId),g(st))})}))}),$faa2e61a3361514f$var$TRACK_NAME="SliderTrack",$faa2e61a3361514f$export$105594979f116971=reactExports.forwardRef((a,s)=>{const{__scopeSlider:c,...d}=a,et=$faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$TRACK_NAME,c);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"data-disabled":et.disabled?"":void 0,"data-orientation":et.orientation},d,{ref:s}))}),$faa2e61a3361514f$var$RANGE_NAME="SliderRange",$faa2e61a3361514f$export$a5cf38a7a000fe77=reactExports.forwardRef((a,s)=>{const{__scopeSlider:c,...d}=a,et=$faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$RANGE_NAME,c),g=$faa2e61a3361514f$var$useSliderOrientationContext($faa2e61a3361514f$var$RANGE_NAME,c),at=reactExports.useRef(null),$t=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,at),vt=et.values.length,b=et.values.map(wt=>$faa2e61a3361514f$var$convertValueToPercentage(wt,et.min,et.max)),pt=vt>1?Math.min(...b):0,st=100-Math.max(...b);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"data-orientation":et.orientation,"data-disabled":et.disabled?"":void 0},d,{ref:$t,style:{...a.style,[g.startEdge]:pt+"%",[g.endEdge]:st+"%"}}))}),$faa2e61a3361514f$var$THUMB_NAME="SliderThumb",$faa2e61a3361514f$export$2c1b491743890dec=reactExports.forwardRef((a,s)=>{const c=$faa2e61a3361514f$var$useCollection(a.__scopeSlider),[d,et]=reactExports.useState(null),g=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,$t=>et($t)),at=reactExports.useMemo(()=>d?c().findIndex($t=>$t.ref.current===d):-1,[c,d]);return reactExports.createElement($faa2e61a3361514f$var$SliderThumbImpl,_extends$1({},a,{ref:g,index:at}))}),$faa2e61a3361514f$var$SliderThumbImpl=reactExports.forwardRef((a,s)=>{const{__scopeSlider:c,index:d,...et}=a,g=$faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$THUMB_NAME,c),at=$faa2e61a3361514f$var$useSliderOrientationContext($faa2e61a3361514f$var$THUMB_NAME,c),[$t,vt]=reactExports.useState(null),b=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(s,Lt=>vt(Lt)),pt=$db6c3485150b8e66$export$1ab7ae714698c4b8($t),st=g.values[d],wt=st===void 0?0:$faa2e61a3361514f$var$convertValueToPercentage(st,g.min,g.max),Tt=$faa2e61a3361514f$var$getLabel(d,g.values.length),Ct=pt==null?void 0:pt[at.size],jt=Ct?$faa2e61a3361514f$var$getThumbInBoundsOffset(Ct,wt,at.direction):0;return reactExports.useEffect(()=>{if($t)return g.thumbs.add($t),()=>{g.thumbs.delete($t)}},[$t,g.thumbs]),reactExports.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[at.startEdge]:`calc(${wt}% + ${jt}px)`}},reactExports.createElement($faa2e61a3361514f$var$Collection.ItemSlot,{scope:a.__scopeSlider},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({role:"slider","aria-label":a["aria-label"]||Tt,"aria-valuemin":g.min,"aria-valuenow":st,"aria-valuemax":g.max,"aria-orientation":g.orientation,"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,tabIndex:g.disabled?void 0:0},et,{ref:b,style:st===void 0?{display:"none"}:a.style,onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onFocus,()=>{g.valueIndexToChangeRef.current=d})}))))}),$faa2e61a3361514f$var$BubbleInput=a=>{const{value:s,...c}=a,d=reactExports.useRef(null),et=$010c2913dbd2fe3d$export$5cae361ad82dce8b(s);return reactExports.useEffect(()=>{const g=d.current,at=window.HTMLInputElement.prototype,vt=Object.getOwnPropertyDescriptor(at,"value").set;if(et!==s&&vt){const b=new Event("input",{bubbles:!0});vt.call(g,s),g.dispatchEvent(b)}},[et,s]),reactExports.createElement("input",_extends$1({style:{display:"none"}},c,{ref:d,defaultValue:s}))};function $faa2e61a3361514f$var$getNextSortedValues(a=[],s,c){const d=[...a];return d[c]=s,d.sort((et,g)=>et-g)}function $faa2e61a3361514f$var$convertValueToPercentage(a,s,c){const g=100/(c-s)*(a-s);return $ae6933e535247d3d$export$7d15b64cf5a3a4c4(g,[0,100])}function $faa2e61a3361514f$var$getLabel(a,s){return s>2?`Value ${a+1} of ${s}`:s===2?["Minimum","Maximum"][a]:void 0}function $faa2e61a3361514f$var$getClosestValueIndex(a,s){if(a.length===1)return 0;const c=a.map(et=>Math.abs(et-s)),d=Math.min(...c);return c.indexOf(d)}function $faa2e61a3361514f$var$getThumbInBoundsOffset(a,s,c){const d=a/2,g=$faa2e61a3361514f$var$linearScale([0,50],[0,d]);return(d-g(s)*c)*c}function $faa2e61a3361514f$var$getStepsBetweenValues(a){return a.slice(0,-1).map((s,c)=>a[c+1]-s)}function $faa2e61a3361514f$var$hasMinStepsBetweenValues(a,s){if(s>0){const c=$faa2e61a3361514f$var$getStepsBetweenValues(a);return Math.min(...c)>=s}return!0}function $faa2e61a3361514f$var$linearScale(a,s){return c=>{if(a[0]===a[1]||s[0]===s[1])return s[0];const d=(s[1]-s[0])/(a[1]-a[0]);return s[0]+d*(c-a[0])}}function $faa2e61a3361514f$var$getDecimalCount(a){return(String(a).split(".")[1]||"").length}function $faa2e61a3361514f$var$roundValue(a,s){const c=Math.pow(10,s);return Math.round(a*c)/c}const $faa2e61a3361514f$export$be92b6f5f03c0fe9=$faa2e61a3361514f$export$472062a354075cee,$faa2e61a3361514f$export$13921ac0cc260818=$faa2e61a3361514f$export$105594979f116971,$faa2e61a3361514f$export$9a58ef0d7ad3278c=$faa2e61a3361514f$export$a5cf38a7a000fe77,$faa2e61a3361514f$export$6521433ed15a34db=$faa2e61a3361514f$export$2c1b491743890dec,Slider=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsxs($faa2e61a3361514f$export$be92b6f5f03c0fe9,{ref:c,className:cn$1("relative flex w-full touch-none select-none items-center",a),tabIndex:-1,...s,children:[jsxRuntimeExports.jsx($faa2e61a3361514f$export$13921ac0cc260818,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20 data-[disabled]:cursor-not-allowed data-[disabled]:opacity-50",children:jsxRuntimeExports.jsx($faa2e61a3361514f$export$9a58ef0d7ad3278c,{className:"absolute h-full bg-primary data-[disabled]:cursor-not-allowed "})}),jsxRuntimeExports.jsx($faa2e61a3361514f$export$6521433ed15a34db,{tabIndex:-1,className:"block h-4 w-4 rounded-full border border-primary/60 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring data-[disabled]:cursor-not-allowed"})]}));Slider.displayName=$faa2e61a3361514f$export$be92b6f5f03c0fe9.displayName;const $b3bbe2732c13b576$export$bea8ebba691c5813=reactExports.forwardRef((a,s)=>{const{pressed:c,defaultPressed:d=!1,onPressedChange:et,...g}=a,[at=!1,$t]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:c,onChange:et,defaultProp:d});return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-pressed":at,"data-state":at?"on":"off","data-disabled":a.disabled?"":void 0},g,{ref:s,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(a.onClick,()=>{a.disabled||$t(!at)})}))}),$b3bbe2732c13b576$export$be92b6f5f03c0fe9=$b3bbe2732c13b576$export$bea8ebba691c5813,toggleVariants=cva("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),Toggle=reactExports.forwardRef(({className:a,variant:s,size:c,...d},et)=>jsxRuntimeExports.jsx($b3bbe2732c13b576$export$be92b6f5f03c0fe9,{ref:et,className:cn$1(toggleVariants({variant:s,size:c,className:a})),...d}));Toggle.displayName=$b3bbe2732c13b576$export$be92b6f5f03c0fe9.displayName;function iota$1(a){for(var s=new Array(a),c=0;c<a;++c)s[c]=c;return s}var iota_1=iota$1;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(a){return a!=null&&(isBuffer$1(a)||isSlowBuffer(a)||!!a._isBuffer)};function isBuffer$1(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isSlowBuffer(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&isBuffer$1(a.slice(0,0))}var iota=iota_1,isBuffer=isBuffer_1,hasTypedArrays=typeof Float64Array<"u";function compare1st(a,s){return a[0]-s[0]}function order(){var a=this.stride,s=new Array(a.length),c;for(c=0;c<s.length;++c)s[c]=[Math.abs(a[c]),c];s.sort(compare1st);var d=new Array(s.length);for(c=0;c<d.length;++c)d[c]=s[c][1];return d}function compileConstructor(a,s){var c=["View",s,"d",a].join("");s<0&&(c="View_Nil"+a);var d=a==="generic";if(s===-1){var et="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",jt=new Function(et);return jt()}else if(s===0){var et="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",jt=new Function("TrivialArray",et);return jt(CACHED_CONSTRUCTORS[a][0])}var et=["'use strict'"],g=iota(s),at=g.map(function(Lt){return"i"+Lt}),$t="this.offset+"+g.map(function(Lt){return"this.stride["+Lt+"]*i"+Lt}).join("+"),vt=g.map(function(Lt){return"b"+Lt}).join(","),b=g.map(function(Lt){return"c"+Lt}).join(",");et.push("function "+c+"(a,"+vt+","+b+",d){this.data=a","this.shape=["+vt+"]","this.stride=["+b+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+s),et.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+g.map(function(Lt){return"this.shape["+Lt+"]"}).join("*"),"}})"),s===1?et.push("proto.order=[0]"):(et.push("Object.defineProperty(proto,'order',{get:"),s<4?(et.push("function "+c+"_order(){"),s===2?et.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):s===3&&et.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):et.push("ORDER})")),et.push("proto.set=function "+c+"_set("+at.join(",")+",v){"),d?et.push("return this.data.set("+$t+",v)}"):et.push("return this.data["+$t+"]=v}"),et.push("proto.get=function "+c+"_get("+at.join(",")+"){"),d?et.push("return this.data.get("+$t+")}"):et.push("return this.data["+$t+"]}"),et.push("proto.index=function "+c+"_index(",at.join(),"){return "+$t+"}"),et.push("proto.hi=function "+c+"_hi("+at.join(",")+"){return new "+c+"(this.data,"+g.map(function(Lt){return["(typeof i",Lt,"!=='number'||i",Lt,"<0)?this.shape[",Lt,"]:i",Lt,"|0"].join("")}).join(",")+","+g.map(function(Lt){return"this.stride["+Lt+"]"}).join(",")+",this.offset)}");var pt=g.map(function(Lt){return"a"+Lt+"=this.shape["+Lt+"]"}),st=g.map(function(Lt){return"c"+Lt+"=this.stride["+Lt+"]"});et.push("proto.lo=function "+c+"_lo("+at.join(",")+"){var b=this.offset,d=0,"+pt.join(",")+","+st.join(","));for(var wt=0;wt<s;++wt)et.push("if(typeof i"+wt+"==='number'&&i"+wt+">=0){d=i"+wt+"|0;b+=c"+wt+"*d;a"+wt+"-=d}");et.push("return new "+c+"(this.data,"+g.map(function(Lt){return"a"+Lt}).join(",")+","+g.map(function(Lt){return"c"+Lt}).join(",")+",b)}"),et.push("proto.step=function "+c+"_step("+at.join(",")+"){var "+g.map(function(Lt){return"a"+Lt+"=this.shape["+Lt+"]"}).join(",")+","+g.map(function(Lt){return"b"+Lt+"=this.stride["+Lt+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var wt=0;wt<s;++wt)et.push("if(typeof i"+wt+"==='number'){d=i"+wt+"|0;if(d<0){c+=b"+wt+"*(a"+wt+"-1);a"+wt+"=ceil(-a"+wt+"/d)}else{a"+wt+"=ceil(a"+wt+"/d)}b"+wt+"*=d}");et.push("return new "+c+"(this.data,"+g.map(function(Lt){return"a"+Lt}).join(",")+","+g.map(function(Lt){return"b"+Lt}).join(",")+",c)}");for(var Tt=new Array(s),Ct=new Array(s),wt=0;wt<s;++wt)Tt[wt]="a[i"+wt+"]",Ct[wt]="b[i"+wt+"]";et.push("proto.transpose=function "+c+"_transpose("+at+"){"+at.map(function(Lt,Ht){return Lt+"=("+Lt+"===undefined?"+Ht+":"+Lt+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+Tt.join(",")+","+Ct.join(",")+",this.offset)}"),et.push("proto.pick=function "+c+"_pick("+at+"){var a=[],b=[],c=this.offset");for(var wt=0;wt<s;++wt)et.push("if(typeof i"+wt+"==='number'&&i"+wt+">=0){c=(c+this.stride["+wt+"]*i"+wt+")|0}else{a.push(this.shape["+wt+"]);b.push(this.stride["+wt+"])}");et.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),et.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+g.map(function(Lt){return"shape["+Lt+"]"}).join(",")+","+g.map(function(Lt){return"stride["+Lt+"]"}).join(",")+",offset)}");var jt=new Function("CTOR_LIST","ORDER",et.join(`
`));return jt(CACHED_CONSTRUCTORS[a],order)}function arrayDType(a){if(isBuffer(a))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(a)?"array":"generic"}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function wrappedNDArrayCtor(a,s,c,d){if(a===void 0){var b=CACHED_CONSTRUCTORS.array[0];return b([])}else typeof a=="number"&&(a=[a]);s===void 0&&(s=[a.length]);var et=s.length;if(c===void 0){c=new Array(et);for(var g=et-1,at=1;g>=0;--g)c[g]=at,at*=s[g]}if(d===void 0){d=0;for(var g=0;g<et;++g)c[g]<0&&(d-=(s[g]-1)*c[g])}for(var $t=arrayDType(a),vt=CACHED_CONSTRUCTORS[$t];vt.length<=et+1;)vt.push(compileConstructor($t,vt.length-1));var b=vt[et+1];return b(a,s,c,d)}var ndarray=wrappedNDArrayCtor;const ndarray4=getDefaultExportFromCjs(ndarray);/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var vd$1=Object.create,Pn$1=Object.defineProperty,_d$1=Object.getOwnPropertyDescriptor,Od$1=Object.getOwnPropertyNames,Id$1=Object.getPrototypeOf,Sd$1=Object.prototype.hasOwnProperty,L$1=(a,s)=>()=>(a&&(s=a(a=0)),s),me=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),Sr=(a,s)=>{for(var c in s)Pn$1(a,c,{get:s[c],enumerable:!0})},Va$1=(a,s,c,d)=>{if(s&&typeof s=="object"||typeof s=="function")for(let et of Od$1(s))!Sd$1.call(a,et)&&et!==c&&Pn$1(a,et,{get:()=>s[et],enumerable:!(d=_d$1(s,et))||d.enumerable});return a},Ar=(a,s,c)=>(c=a!=null?vd$1(Id$1(a)):{},Va$1(!a||!a.__esModule?Pn$1(c,"default",{value:a,enumerable:!0}):c,a)),ar=a=>Va$1(Pn$1({},"__esModule",{value:!0}),a),En,sr$1,Pr$1,Ad$1,Dn$1,Ln$1=L$1(()=>{En=new Map,sr$1=[],Pr$1=(a,s,c)=>{if(s&&typeof s.init=="function"&&typeof s.createInferenceSessionHandler=="function"){let d=En.get(a);if(d===void 0)En.set(a,{backend:s,priority:c});else{if(d.priority>c)return;if(d.priority===c&&d.backend!==s)throw new Error(`cannot register backend "${a}" using priority ${c}`)}if(c>=0){let et=sr$1.indexOf(a);et!==-1&&sr$1.splice(et,1);for(let g=0;g<sr$1.length;g++)if(En.get(sr$1[g]).priority<=c){sr$1.splice(g,0,a);return}sr$1.push(a)}return}throw new TypeError("not a valid backend")},Ad$1=async a=>{let s=En.get(a);if(!s)return"backend not found.";if(s.initialized)return s.backend;if(s.aborted)return s.error;{let c=!!s.initPromise;try{return c||(s.initPromise=s.backend.init(a)),await s.initPromise,s.initialized=!0,s.backend}catch(d){return c||(s.error=`${d}`,s.aborted=!0),s.error}finally{delete s.initPromise}}},Dn$1=async a=>{let s=a.executionProviders||[],c=s.map(vt=>typeof vt=="string"?vt:vt.name),d=c.length===0?sr$1:c,et,g=[],at=new Set;for(let vt of d){let b=await Ad$1(vt);typeof b=="string"?g.push({name:vt,err:b}):(et||(et=b),et===b&&at.add(vt))}if(!et)throw new Error(`no available backend found. ERR: ${g.map(vt=>`[${vt.name}] ${vt.err}`).join(", ")}`);for(let{name:vt,err:b}of g)c.includes(vt)&&console.warn(`removing requested execution provider "${vt}" from session options because it is not available: ${b}`);let $t=s.filter(vt=>at.has(typeof vt=="string"?vt:vt.name));return[et,new Proxy(a,{get:(vt,b)=>b==="executionProviders"?$t:Reflect.get(vt,b)})]}}),Wa=L$1(()=>{Ln$1()}),Ha$1,qa$1=L$1(()=>{Ha$1="1.18.0"}),ja$1,ut$1,Vo=L$1(()=>{qa$1(),ja$1="warning",ut$1={wasm:{},webgl:{},webgpu:{},versions:{common:Ha$1},set logLevel(a){if(a!==void 0){if(typeof a!="string"||["verbose","info","warning","error","fatal"].indexOf(a)===-1)throw new Error(`Unsupported logging level: ${a}`);ja$1=a}},get logLevel(){return ja$1}},Object.defineProperty(ut$1,"logLevel",{enumerable:!0})}),Z,Ya$1=L$1(()=>{Vo(),Z=ut$1}),Xa$1,Ka$1,Ja$1=L$1(()=>{Xa$1=(a,s)=>{let c=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);c.width=a.dims[3],c.height=a.dims[2];let d=c.getContext("2d");if(d!=null){let et,g;(s==null?void 0:s.tensorLayout)!==void 0&&s.tensorLayout==="NHWC"?(et=a.dims[2],g=a.dims[3]):(et=a.dims[3],g=a.dims[2]);let at=(s==null?void 0:s.format)!==void 0?s.format:"RGB",$t=s==null?void 0:s.norm,vt,b;$t===void 0||$t.mean===void 0?vt=[255,255,255,255]:typeof $t.mean=="number"?vt=[$t.mean,$t.mean,$t.mean,$t.mean]:(vt=[$t.mean[0],$t.mean[1],$t.mean[2],0],$t.mean[3]!==void 0&&(vt[3]=$t.mean[3])),$t===void 0||$t.bias===void 0?b=[0,0,0,0]:typeof $t.bias=="number"?b=[$t.bias,$t.bias,$t.bias,$t.bias]:(b=[$t.bias[0],$t.bias[1],$t.bias[2],0],$t.bias[3]!==void 0&&(b[3]=$t.bias[3]));let pt=g*et,st=0,wt=pt,Tt=pt*2,Ct=-1;at==="RGBA"?(st=0,wt=pt,Tt=pt*2,Ct=pt*3):at==="RGB"?(st=0,wt=pt,Tt=pt*2):at==="RBG"&&(st=0,Tt=pt,wt=pt*2);for(let jt=0;jt<g;jt++)for(let Lt=0;Lt<et;Lt++){let Ht=(a.data[st++]-b[0])*vt[0],Gt=(a.data[wt++]-b[1])*vt[1],Kt=(a.data[Tt++]-b[2])*vt[2],tr=Ct===-1?255:(a.data[Ct++]-b[3])*vt[3];d.fillStyle="rgba("+Ht+","+Gt+","+Kt+","+tr+")",d.fillRect(Lt,jt,1,1)}if("toDataURL"in c)return c.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ka$1=(a,s)=>{let c=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),d;if(c!=null){let et,g,at;(s==null?void 0:s.tensorLayout)!==void 0&&s.tensorLayout==="NHWC"?(et=a.dims[2],g=a.dims[1],at=a.dims[3]):(et=a.dims[3],g=a.dims[2],at=a.dims[1]);let $t=s!==void 0&&s.format!==void 0?s.format:"RGB",vt=s==null?void 0:s.norm,b,pt;vt===void 0||vt.mean===void 0?b=[255,255,255,255]:typeof vt.mean=="number"?b=[vt.mean,vt.mean,vt.mean,vt.mean]:(b=[vt.mean[0],vt.mean[1],vt.mean[2],255],vt.mean[3]!==void 0&&(b[3]=vt.mean[3])),vt===void 0||vt.bias===void 0?pt=[0,0,0,0]:typeof vt.bias=="number"?pt=[vt.bias,vt.bias,vt.bias,vt.bias]:(pt=[vt.bias[0],vt.bias[1],vt.bias[2],0],vt.bias[3]!==void 0&&(pt[3]=vt.bias[3]));let st=g*et;if(s!==void 0&&(s.format!==void 0&&at===4&&s.format!=="RGBA"||at===3&&s.format!=="RGB"&&s.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let wt=4,Tt=0,Ct=1,jt=2,Lt=3,Ht=0,Gt=st,Kt=st*2,tr=-1;$t==="RGBA"?(Ht=0,Gt=st,Kt=st*2,tr=st*3):$t==="RGB"?(Ht=0,Gt=st,Kt=st*2):$t==="RBG"&&(Ht=0,Kt=st,Gt=st*2),d=c.createImageData(et,g);for(let rr=0;rr<g*et;Tt+=wt,Ct+=wt,jt+=wt,Lt+=wt,rr++)d.data[Tt]=(a.data[Ht++]-pt[0])*b[0],d.data[Ct]=(a.data[Gt++]-pt[1])*b[1],d.data[jt]=(a.data[Kt++]-pt[2])*b[2],d.data[Lt]=tr===-1?255:(a.data[tr++]-pt[3])*b[3]}else throw new Error("Can not access image data");return d}}),Wo,Za$1,Qa$1,es$1,ts$1,rs$1=L$1(()=>{Cn(),Wo=(a,s)=>{if(a===void 0)throw new Error("Image buffer must be defined");if(s.height===void 0||s.width===void 0)throw new Error("Image height and width must be defined");if(s.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:c,width:d}=s,et=s.norm??{mean:255,bias:0},g,at;typeof et.mean=="number"?g=[et.mean,et.mean,et.mean,et.mean]:g=[et.mean[0],et.mean[1],et.mean[2],et.mean[3]??255],typeof et.bias=="number"?at=[et.bias,et.bias,et.bias,et.bias]:at=[et.bias[0],et.bias[1],et.bias[2],et.bias[3]??0];let $t=s.format!==void 0?s.format:"RGBA",vt=s.tensorFormat!==void 0&&s.tensorFormat!==void 0?s.tensorFormat:"RGB",b=c*d,pt=vt==="RGBA"?new Float32Array(b*4):new Float32Array(b*3),st=4,wt=0,Tt=1,Ct=2,jt=3,Lt=0,Ht=b,Gt=b*2,Kt=-1;$t==="RGB"&&(st=3,wt=0,Tt=1,Ct=2,jt=-1),vt==="RGBA"?Kt=b*3:vt==="RBG"?(Lt=0,Gt=b,Ht=b*2):vt==="BGR"&&(Gt=0,Ht=b,Lt=b*2);for(let tr=0;tr<b;tr++,wt+=st,Ct+=st,Tt+=st,jt+=st)pt[Lt++]=(a[wt]+at[0])/g[0],pt[Ht++]=(a[Tt]+at[1])/g[1],pt[Gt++]=(a[Ct]+at[2])/g[2],Kt!==-1&&jt!==-1&&(pt[Kt++]=(a[jt]+at[3])/g[3]);return vt==="RGBA"?new Je("float32",pt,[1,4,c,d]):new Je("float32",pt,[1,3,c,d])},Za$1=async(a,s)=>{let c=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,d=typeof ImageData<"u"&&a instanceof ImageData,et=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,g=typeof a=="string",at,$t=s??{},vt=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},b=pt=>pt instanceof HTMLCanvasElement||pt instanceof OffscreenCanvas?pt.getContext("2d"):null;if(c){let pt=vt();pt.width=a.width,pt.height=a.height;let st=b(pt);if(st!=null){let wt=a.height,Tt=a.width;if(s!==void 0&&s.resizedHeight!==void 0&&s.resizedWidth!==void 0&&(wt=s.resizedHeight,Tt=s.resizedWidth),s!==void 0){if($t=s,s.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");$t.tensorFormat="RGBA",$t.height=wt,$t.width=Tt}else $t.tensorFormat="RGBA",$t.height=wt,$t.width=Tt;st.drawImage(a,0,0),at=st.getImageData(0,0,Tt,wt).data}else throw new Error("Can not access image data")}else if(d){let pt,st;if(s!==void 0&&s.resizedWidth!==void 0&&s.resizedHeight!==void 0?(pt=s.resizedHeight,st=s.resizedWidth):(pt=a.height,st=a.width),s!==void 0&&($t=s),$t.format="RGBA",$t.height=pt,$t.width=st,s!==void 0){let wt=vt();wt.width=st,wt.height=pt;let Tt=b(wt);if(Tt!=null)Tt.putImageData(a,0,0),at=Tt.getImageData(0,0,st,pt).data;else throw new Error("Can not access image data")}else at=a.data}else if(et){if(s===void 0)throw new Error("Please provide image config with format for Imagebitmap");let pt=vt();pt.width=a.width,pt.height=a.height;let st=b(pt);if(st!=null){let wt=a.height,Tt=a.width;return st.drawImage(a,0,0,Tt,wt),at=st.getImageData(0,0,Tt,wt).data,$t.height=wt,$t.width=Tt,Wo(at,$t)}else throw new Error("Can not access image data")}else{if(g)return new Promise((pt,st)=>{let wt=vt(),Tt=b(wt);if(!a||!Tt)return st();let Ct=new Image;Ct.crossOrigin="Anonymous",Ct.src=a,Ct.onload=()=>{wt.width=Ct.width,wt.height=Ct.height,Tt.drawImage(Ct,0,0,wt.width,wt.height);let jt=Tt.getImageData(0,0,wt.width,wt.height);$t.height=wt.height,$t.width=wt.width,pt(Wo(jt.data,$t))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(at!==void 0)return Wo(at,$t);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa$1=(a,s)=>{let{width:c,height:d,download:et,dispose:g}=s,at=[1,d,c,4];return new Je({location:"texture",type:"float32",texture:a,dims:at,download:et,dispose:g})},es$1=(a,s)=>{let{dataType:c,dims:d,download:et,dispose:g}=s;return new Je({location:"gpu-buffer",type:c??"float32",gpuBuffer:a,dims:d,download:et,dispose:g})},ts$1=(a,s,c)=>new Je({location:"cpu-pinned",type:a,data:s,dims:c??[s.length]})}),ur$1,Qr$1,ns,os$1,is$1=L$1(()=>{ur$1=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr$1=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns=!1,os$1=()=>{if(!ns){ns=!0;let a=typeof BigInt64Array<"u"&&BigInt64Array.from,s=typeof BigUint64Array<"u"&&BigUint64Array.from,c=typeof Float16Array<"u"&&Float16Array.from;a&&(ur$1.set("int64",BigInt64Array),Qr$1.set(BigInt64Array,"int64")),s&&(ur$1.set("uint64",BigUint64Array),Qr$1.set(BigUint64Array,"uint64")),c?(ur$1.set("float16",Float16Array),Qr$1.set(Float16Array,"float16")):ur$1.set("float16",Uint16Array)}}}),as$1,ss$1,us$1=L$1(()=>{Cn(),as$1=a=>{let s=1;for(let c=0;c<a.length;c++){let d=a[c];if(typeof d!="number"||!Number.isSafeInteger(d))throw new TypeError(`dims[${c}] must be an integer, got: ${d}`);if(d<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${d}`);s*=d}return s},ss$1=(a,s)=>{switch(a.location){case"cpu":return new Je(a.type,a.data,s);case"cpu-pinned":return new Je({location:"cpu-pinned",data:a.data,type:a.type,dims:s});case"texture":return new Je({location:"texture",texture:a.texture,type:a.type,dims:s});case"gpu-buffer":return new Je({location:"gpu-buffer",gpuBuffer:a.gpuBuffer,type:a.type,dims:s});default:throw new Error(`tensorReshape: tensor location ${a.location} is not supported`)}}}),Je,Cn=L$1(()=>{Ja$1(),rs$1(),is$1(),us$1(),Je=class{constructor(a,s,c){os$1();let d,et;if(typeof a=="object"&&"location"in a)switch(this.dataLocation=a.location,d=a.type,et=a.dims,a.location){case"cpu-pinned":{let at=ur$1.get(d);if(!at)throw new TypeError(`unsupported type "${d}" to create tensor from pinned buffer`);if(!(a.data instanceof at))throw new TypeError(`buffer should be of type ${at.name}`);this.cpuData=a.data;break}case"texture":{if(d!=="float32")throw new TypeError(`unsupported type "${d}" to create tensor from texture`);this.gpuTextureData=a.texture,this.downloader=a.download,this.disposer=a.dispose;break}case"gpu-buffer":{if(d!=="float32"&&d!=="float16"&&d!=="int32"&&d!=="int64"&&d!=="uint32"&&d!=="uint8"&&d!=="bool")throw new TypeError(`unsupported type "${d}" to create tensor from gpu buffer`);this.gpuBufferData=a.gpuBuffer,this.downloader=a.download,this.disposer=a.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let at,$t;if(typeof a=="string")if(d=a,$t=c,a==="string"){if(!Array.isArray(s))throw new TypeError("A string tensor's data must be a string array.");at=s}else{let vt=ur$1.get(a);if(vt===void 0)throw new TypeError(`Unsupported tensor type: ${a}.`);if(Array.isArray(s)){if(a==="float16"&&vt===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");a==="uint64"||a==="int64"?at=vt.from(s,BigInt):at=vt.from(s)}else if(s instanceof vt)at=s;else throw new TypeError(`A ${d} tensor's data must be type of ${vt}`)}else if($t=s,Array.isArray(a)){if(a.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let vt=typeof a[0];if(vt==="string")d="string",at=a;else if(vt==="boolean")d="bool",at=Uint8Array.from(a);else throw new TypeError(`Invalid element type of data array: ${vt}.`)}else{let vt=Qr$1.get(a.constructor);if(vt===void 0)throw new TypeError(`Unsupported type for tensor data: ${a.constructor}.`);d=vt,at=a}if($t===void 0)$t=[at.length];else if(!Array.isArray($t))throw new TypeError("A tensor's dims must be a number array");et=$t,this.cpuData=at,this.dataLocation="cpu"}let g=as$1(et);if(this.cpuData&&g!==this.cpuData.length)throw new Error(`Tensor's size(${g}) does not match data length(${this.cpuData.length}).`);this.type=d,this.dims=et,this.size=g}static async fromImage(a,s){return Za$1(a,s)}static fromTexture(a,s){return Qa$1(a,s)}static fromGpuBuffer(a,s){return es$1(a,s)}static fromPinnedBuffer(a,s,c){return ts$1(a,s,c)}toDataURL(a){return Xa$1(this,a)}toImageData(a){return Ka$1(this,a)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(a){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let s=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=s,a&&this.disposer&&(this.disposer(),this.disposer=void 0),s}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(a){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss$1(this,a)}}}),Me,Fn$1=L$1(()=>{Cn(),Me=Je}),ls$1,fs$1,lr$1,fr$1,Ho=L$1(()=>{Vo(),ls$1=(a,s)=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||console.timeStamp(`${a}::ORT::${s}`)},fs$1=(a,s)=>{var et;let c=((et=new Error().stack)==null?void 0:et.split(/\r\n|\r|\n/g))||[],d=!1;for(let g=0;g<c.length;g++){if(d&&!c[g].includes("TRACE_FUNC")){let at=`FUNC_${a}::${c[g].trim().split(" ")[1]}`;s&&(at+=`::${s}`),ls$1("CPU",at);return}c[g].includes("TRACE_FUNC")&&(d=!0)}},lr$1=a=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("BEGIN",a)},fr$1=a=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("END",a)}}),$n,cs$1=L$1(()=>{Ln$1(),Fn$1(),Ho(),$n=class BS{constructor(s){this.handler=s}async run(s,c,d){lr$1();let et={},g={};if(typeof s!="object"||s===null||s instanceof Me||Array.isArray(s))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let at=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");at=!1;for(let b of c){if(typeof b!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(b)===-1)throw new RangeError(`'fetches' contains invalid output name: ${b}.`);et[b]=null}if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let b=!1,pt=Object.getOwnPropertyNames(c);for(let st of this.outputNames)if(pt.indexOf(st)!==-1){let wt=c[st];(wt===null||wt instanceof Me)&&(b=!0,at=!1,et[st]=wt)}if(b){if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else g=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let b of this.inputNames)if(typeof s[b]>"u")throw new Error(`input '${b}' is missing in 'feeds'.`);if(at)for(let b of this.outputNames)et[b]=null;let $t=await this.handler.run(s,et,g),vt={};for(let b in $t)if(Object.hasOwnProperty.call($t,b)){let pt=$t[b];pt instanceof Me?vt[b]=pt:vt[b]=new Me(pt.type,pt.data,pt.dims)}return fr$1(),vt}async release(){return this.handler.dispose()}static async create(s,c,d,et){lr$1();let g,at={};if(typeof s=="string"){if(g=s,typeof c=="object"&&c!==null)at=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(s instanceof Uint8Array){if(g=s,typeof c=="object"&&c!==null)at=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(s instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&s instanceof SharedArrayBuffer){let pt=s,st=0,wt=s.byteLength;if(typeof c=="object"&&c!==null)at=c;else if(typeof c=="number"){if(st=c,!Number.isSafeInteger(st))throw new RangeError("'byteOffset' must be an integer.");if(st<0||st>=pt.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${pt.byteLength}).`);if(wt=s.byteLength-st,typeof d=="number"){if(wt=d,!Number.isSafeInteger(wt))throw new RangeError("'byteLength' must be an integer.");if(wt<=0||st+wt>pt.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${pt.byteLength-st}].`);if(typeof et=="object"&&et!==null)at=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(typeof d<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof c<"u")throw new TypeError("'options' must be an object.");g=new Uint8Array(pt,st,wt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[$t,vt]=await Dn$1(at),b=await $t.createInferenceSessionHandler(g,vt);return fr$1(),new BS(b)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd$1,ps$1=L$1(()=>{cs$1(),Pd$1=$n}),ds$1=L$1(()=>{}),hs$1=L$1(()=>{}),ms$1=L$1(()=>{}),bs$1=L$1(()=>{}),Ed$1,kn$1,gs$1=L$1(()=>{Ln$1(),Fn$1(),Ed$1="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn$1=class zS{constructor(s,c,d){this.handler=s,this.hasOptimizerModel=c,this.hasEvalModel=d}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(s,c){let d=s.evalModel||"",et=s.optimizerModel||"",g=c||{},[at,$t]=await Dn$1(g);if(at.createTrainingSessionHandler){let vt=await at.createTrainingSessionHandler(s.checkpointState,s.trainModel,d,et,$t);return new zS(vt,!!s.optimizerModel,!!s.evalModel)}else throw new Error(Ed$1)}typeNarrowingForRunStep(s,c,d,et,g){let at={},$t={};if(typeof d!="object"||d===null||d instanceof Me||Array.isArray(d))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let vt=!0;if(typeof et=="object"){if(et===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(et instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(et)){if(et.length===0)throw new TypeError("'fetches' cannot be an empty array.");vt=!1;for(let b of et){if(typeof b!="string")throw new TypeError("'fetches' must be a string array or an object.");if(c.indexOf(b)===-1)throw new RangeError(`'fetches' contains invalid output name: ${b}.`);at[b]=null}if(typeof g=="object"&&g!==null)$t=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else{let b=!1,pt=Object.getOwnPropertyNames(et);for(let st of c)if(pt.indexOf(st)!==-1){let wt=et[st];(wt===null||wt instanceof Me)&&(b=!0,vt=!1,at[st]=wt)}if(b){if(typeof g=="object"&&g!==null)$t=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else $t=et}}else if(typeof et<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let b of s)if(typeof d[b]>"u")throw new Error(`input '${b}' is missing in 'feeds'.`);if(vt)for(let b of c)at[b]=null;return[at,$t]}convertHandlerReturnTypeToMapOfTensors(s){let c={};for(let d in s)if(Object.hasOwnProperty.call(s,d)){let et=s[d];et instanceof Me?c[d]=et:c[d]=new Me(et.type,et.data,et.dims)}return c}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(s,c,d){let[et,g]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,s,c,d),at=await this.handler.runTrainStep(s,et,g);return this.convertHandlerReturnTypeToMapOfTensors(at)}async runOptimizerStep(s){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(s||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(s,c,d){if(this.hasEvalModel){let[et,g]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,s,c,d),at=await this.handler.runEvalStep(s,et,g);return this.convertHandlerReturnTypeToMapOfTensors(at)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(s=!0){return this.handler.getParametersSize(s)}async loadParametersBuffer(s,c=!0){let d=await this.getParametersSize(c);if(s.length!==4*d)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(s,c)}async getContiguousParameters(s=!0){return this.handler.getContiguousParameters(s)}async release(){return this.handler.dispose()}}}),Dd$1,ys$1=L$1(()=>{gs$1(),Dd$1=kn$1}),qo={};Sr(qo,{InferenceSession:()=>Pd$1,TRACE:()=>ls$1,TRACE_FUNC_BEGIN:()=>lr$1,TRACE_FUNC_END:()=>fr$1,Tensor:()=>Me,TrainingSession:()=>Dd$1,env:()=>Z,registerBackend:()=>Pr$1});var Ot$1=L$1(()=>{Wa(),Ya$1(),ps$1(),Fn$1(),ds$1(),hs$1(),Ho(),ms$1(),bs$1(),ys$1()});function Xt$1(a,s,c,d){if(s===void 0)return Cd$1(a);if(c===void 0)Bn$1(a,s);else if(typeof c=="number"&&d===void 0)Bn$1(a,s);else if(typeof c=="string"&&d===void 0)Bn$1(a,c,1,s);else if(typeof c=="string"&&typeof d=="number")Bn$1(a,c,d,s);else throw new TypeError("input is valid")}function Cd$1(a){return{verbose:Xt$1.verbose.bind(null,a),info:Xt$1.info.bind(null,a),warning:Xt$1.warning.bind(null,a),error:Xt$1.error.bind(null,a),fatal:Xt$1.fatal.bind(null,a)}}function Bn$1(a,s,c,d){let et=en$1[d||""]||en$1[""];xs$1[a]<xs$1[et.minimalSeverity]||(et.logDateTime&&(s=`${new Date().toISOString()}|${s}`),et.logSourceLocation,Ld$1[et.provider].log(a,s,d))}var jo,Yo,xs$1,Ld$1,ws$1,en$1,ce,Rn$1,Mn$1,Gn$1,Nn$1,lt$1=L$1(()=>{jo=class{log(a,s,c){}},Yo=class{log(a,s,c){console.log(`${this.color(a)} ${c?"\x1B[35m"+c+"\x1B[0m ":""}${s}`)}color(a){switch(a){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${a}`)}}},xs$1={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld$1={none:new jo,console:new Yo},ws$1={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en$1={"":ws$1},(a=>{function s(b,pt){a("verbose",b,pt)}a.verbose=s;function c(b,pt){a("info",b,pt)}a.info=c;function d(b,pt){a("warning",b,pt)}a.warning=d;function et(b,pt){a("error",b,pt)}a.error=et;function g(b,pt){a("fatal",b,pt)}a.fatal=g;function at(b){en$1={},$t("",b||{})}a.reset=at;function $t(b,pt){if(b==="*")at(pt);else{let st=en$1[b]||ws$1;en$1[b]={provider:pt.provider||st.provider,minimalSeverity:pt.minimalSeverity||st.minimalSeverity,logDateTime:pt.logDateTime===void 0?st.logDateTime:pt.logDateTime,logSourceLocation:pt.logSourceLocation===void 0?st.logSourceLocation:pt.logSourceLocation}}}a.set=$t;function vt(b){let pt={};b.logLevel&&(pt.minimalSeverity=b.logLevel),$t("",pt)}a.setWithEnv=vt})(Xt$1||(Xt$1={})),ce=Xt$1,Rn$1=class{constructor(a,s,c,d,et,g){this.category=a,this.name=s,this.startTime=c,this.endCallback=d,this.timer=et,this.ctx=g}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn$1=class{constructor(a,s,c,d){this.category=a,this.name=s,this.startTime=c,this.endTime=d}},Gn$1=class{constructor(a,s,c){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=a===void 0?1e4:a,this._flushBatchSize=s===void 0?10:s,this._flushIntervalInMilliseconds=c===void 0?5e3:c}static create(a){return a===void 0?new this:new this(a.maxNumberEvents,a.flushBatchSize,a.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn$1(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(a,s,c,d){let et=this._started?this.begin(a,s,d):void 0,g=!1,at=c();if(at&&typeof at.then=="function")return g=!0,new Promise(($t,vt)=>{at.then(async b=>{et&&await et.end(),$t(b)},async b=>{et&&await et.end(),vt(b)})});if(!g&&et){let $t=et.end();if($t&&typeof $t.then=="function")return new Promise((vt,b)=>{$t.then(()=>{vt(at)},pt=>{b(pt)})})}return at}begin(a,s,c){if(!this._started)throw new Error("profiler is not started yet");if(c===void 0){let d=Nn$1();return this.flush(d),new Rn$1(a,s,d,et=>this.endSync(et))}else{let d=c.beginTimer();return new Rn$1(a,s,0,async et=>this.end(et),d,c)}}async end(a){let s=await a.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(a.category,a.name,a.startTime,s)),this.flush(s))}endSync(a){let s=Nn$1();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(a.category,a.name,a.startTime,s)),this.flush(s))}logOneEvent(a){ce.verbose(`Profiler.${a.category}`,`${(a.endTime-a.startTime).toFixed(2)}ms on event '${a.name}' at ${a.endTime.toFixed(2)}`)}flush(a){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||a-this._flushTime>=this._flushIntervalInMilliseconds){for(let s=this._flushPointer;this._flushPointer<s+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn$1()}}get started(){return this._started}},Nn$1=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs$1(a,s,c){for(let d of c){let et=d[0],g=d[1],at=d[2],$t=d[3],vt=d[4];if(a.opType===et){for(let b of s)if((b.domain===g||b.domain==="ai.onnx"&&g==="")&&Fd$1(b.version,at))return{opImpl:$t,opInit:vt}}}throw new TypeError(`cannot resolve operator '${a.opType}' with opsets: ${s.map(d=>`${d.domain||"ai.onnx"} v${d.version}`).join(", ")}`)}function Fd$1(a,s){if(s.endsWith("+")){let c=Number.parseInt(s.substring(0,s.length-1),10);return!isNaN(c)&&c<=a}else if(s.split("-").length===2){let c=s.split("-"),d=Number.parseInt(c[0],10),et=Number.parseInt(c[1],10);return!isNaN(d)&&!isNaN(et)&&d<=a&&a<=et}else return Number.parseInt(s,10)===a}var _s$1=L$1(()=>{}),Os$1=me(a=>{a.__esModule=!0;var s=function(){function c(d){if(!d)throw new TypeError("Invalid argument; `value` has no value.");this.value=c.EMPTY,d&&c.isGuid(d)&&(this.value=d)}return c.isGuid=function(d){var et=d.toString();return d&&(d instanceof c||c.validator.test(et))},c.create=function(){return new c([c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-"))},c.createEmpty=function(){return new c("emptyguid")},c.parse=function(d){return new c(d)},c.raw=function(){return[c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-")},c.gen=function(d){for(var et="",g=0;g<d;g++)et+=((1+Math.random())*65536|0).toString(16).substring(1);return et},c.prototype.equals=function(d){return c.isGuid(d)&&this.value===d.toString()},c.prototype.isEmpty=function(){return this.value===c.EMPTY},c.prototype.toString=function(){return this.value},c.prototype.toJSON=function(){return{value:this.value}},c.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),c.EMPTY="00000000-0000-0000-0000-000000000000",c}();a.Guid=s});function be(a,s,c){this.low=a|0,this.high=s|0,this.unsigned=!!c}function Xe(a){return(a&&a.__isLong__)===!0}function Is$1(a){var s=Math.clz32(a&-a);return a?31-s:s}function cr$1(a,s){var c,d,et;return s?(a>>>=0,(et=0<=a&&a<256)&&(d=As$1[a],d)?d:(c=le(a,0,!0),et&&(As$1[a]=c),c)):(a|=0,(et=-128<=a&&a<128)&&(d=Ss$1[a],d)?d:(c=le(a,a<0?-1:0,!1),et&&(Ss$1[a]=c),c))}function ct(a,s){if(isNaN(a))return s?zt$1:It;if(s){if(a<0)return zt$1;if(a>=Ls$1)return $s$1}else{if(a<=-Es$1)return nt$1;if(a+1>=Es$1)return Fs$1}return a<0?ct(-a,s).neg():le(a%Dr|0,a/Dr|0,s)}function le(a,s,c){return new be(a,s,c)}function Jo(a,s,c){if(a.length===0)throw Error("empty string");if(typeof s=="number"?(c=s,s=!1):s=!!s,a==="NaN"||a==="Infinity"||a==="+Infinity"||a==="-Infinity")return s?zt$1:It;if(c=c||10,c<2||36<c)throw RangeError("radix");var d;if((d=a.indexOf("-"))>0)throw Error("interior hyphen");if(d===0)return Jo(a.substring(1),s,c).neg();for(var et=ct(Un$1(c,8)),g=It,at=0;at<a.length;at+=8){var $t=Math.min(8,a.length-at),vt=parseInt(a.substring(at,at+$t),c);if($t<8){var b=ct(Un$1(c,$t));g=g.mul(b).add(ct(vt))}else g=g.mul(et),g=g.add(ct(vt))}return g.unsigned=s,g}function St$1(a,s){return typeof a=="number"?ct(a,s):typeof a=="string"?Jo(a,s):le(a.low,a.high,typeof s=="boolean"?s:a.unsigned)}var ft,Ss$1,As$1,Un$1,Ps$1,kd$1,Dr,Ls$1,Es$1,Ds$1,It,zt$1,Er$1,Cs$1,Ko,Fs$1,$s$1,nt$1,B,Vt,Zo=L$1(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=Xe,Ss$1={},As$1={},be.fromInt=cr$1,be.fromNumber=ct,be.fromBits=le,Un$1=Math.pow,be.fromString=Jo,be.fromValue=St$1,Ps$1=65536,kd$1=1<<24,Dr=Ps$1*Ps$1,Ls$1=Dr*Dr,Es$1=Ls$1/2,Ds$1=cr$1(kd$1),It=cr$1(0),be.ZERO=It,zt$1=cr$1(0,!0),be.UZERO=zt$1,Er$1=cr$1(1),be.ONE=Er$1,Cs$1=cr$1(1,!0),be.UONE=Cs$1,Ko=cr$1(-1),be.NEG_ONE=Ko,Fs$1=le(-1,2147483647,!1),be.MAX_VALUE=Fs$1,$s$1=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s$1,nt$1=le(0,-2147483648,!1),be.MIN_VALUE=nt$1,B=be.prototype,B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(a){if(a=a||10,a<2||36<a)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt$1)){var s=ct(a),c=this.div(s),d=c.mul(s).sub(this);return c.toString(a)+d.toInt().toString(a)}else return"-"+this.neg().toString(a);for(var et=ct(Un$1(a,6),this.unsigned),g=this,at="";;){var $t=g.div(et),vt=g.sub($t.mul(et)).toInt()>>>0,b=vt.toString(a);if(g=$t,g.isZero())return b+at;for(;b.length<6;)b="0"+b;at=""+b+at}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt$1)?64:this.neg().getNumBitsAbs();for(var a=this.high!=0?this.high:this.low,s=31;s>0&&!(a&1<<s);s--);return this.high!=0?s+33:s+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(a){return Xe(a)||(a=St$1(a)),this.unsigned!==a.unsigned&&this.high>>>31===1&&a.high>>>31===1?!1:this.high===a.high&&this.low===a.low},B.eq=B.equals,B.notEquals=function(a){return!this.eq(a)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(a){return this.comp(a)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(a){return this.comp(a)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(a){return this.comp(a)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(a){return this.comp(a)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(a){if(Xe(a)||(a=St$1(a)),this.eq(a))return 0;var s=this.isNegative(),c=a.isNegative();return s&&!c?-1:!s&&c?1:this.unsigned?a.high>>>0>this.high>>>0||a.high===this.high&&a.low>>>0>this.low>>>0?-1:1:this.sub(a).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt$1)?nt$1:this.not().add(Er$1)},B.neg=B.negate,B.add=function(a){Xe(a)||(a=St$1(a));var s=this.high>>>16,c=this.high&65535,d=this.low>>>16,et=this.low&65535,g=a.high>>>16,at=a.high&65535,$t=a.low>>>16,vt=a.low&65535,b=0,pt=0,st=0,wt=0;return wt+=et+vt,st+=wt>>>16,wt&=65535,st+=d+$t,pt+=st>>>16,st&=65535,pt+=c+at,b+=pt>>>16,pt&=65535,b+=s+g,b&=65535,le(st<<16|wt,b<<16|pt,this.unsigned)},B.subtract=function(a){return Xe(a)||(a=St$1(a)),this.add(a.neg())},B.sub=B.subtract,B.multiply=function(a){if(this.isZero())return this;if(Xe(a)||(a=St$1(a)),ft){var s=ft.mul(this.low,this.high,a.low,a.high);return le(s,ft.get_high(),this.unsigned)}if(a.isZero())return this.unsigned?zt$1:It;if(this.eq(nt$1))return a.isOdd()?nt$1:It;if(a.eq(nt$1))return this.isOdd()?nt$1:It;if(this.isNegative())return a.isNegative()?this.neg().mul(a.neg()):this.neg().mul(a).neg();if(a.isNegative())return this.mul(a.neg()).neg();if(this.lt(Ds$1)&&a.lt(Ds$1))return ct(this.toNumber()*a.toNumber(),this.unsigned);var c=this.high>>>16,d=this.high&65535,et=this.low>>>16,g=this.low&65535,at=a.high>>>16,$t=a.high&65535,vt=a.low>>>16,b=a.low&65535,pt=0,st=0,wt=0,Tt=0;return Tt+=g*b,wt+=Tt>>>16,Tt&=65535,wt+=et*b,st+=wt>>>16,wt&=65535,wt+=g*vt,st+=wt>>>16,wt&=65535,st+=d*b,pt+=st>>>16,st&=65535,st+=et*vt,pt+=st>>>16,st&=65535,st+=g*$t,pt+=st>>>16,st&=65535,pt+=c*b+d*vt+et*$t+g*at,pt&=65535,le(wt<<16|Tt,pt<<16|st,this.unsigned)},B.mul=B.multiply,B.divide=function(a){if(Xe(a)||(a=St$1(a)),a.isZero())throw Error("division by zero");if(ft){if(!this.unsigned&&this.high===-2147483648&&a.low===-1&&a.high===-1)return this;var s=(this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,a.low,a.high);return le(s,ft.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt$1:It;var c,d,et;if(this.unsigned){if(a.unsigned||(a=a.toUnsigned()),a.gt(this))return zt$1;if(a.gt(this.shru(1)))return Cs$1;et=zt$1}else{if(this.eq(nt$1)){if(a.eq(Er$1)||a.eq(Ko))return nt$1;if(a.eq(nt$1))return Er$1;var g=this.shr(1);return c=g.div(a).shl(1),c.eq(It)?a.isNegative()?Er$1:Ko:(d=this.sub(a.mul(c)),et=c.add(d.div(a)),et)}else if(a.eq(nt$1))return this.unsigned?zt$1:It;if(this.isNegative())return a.isNegative()?this.neg().div(a.neg()):this.neg().div(a).neg();if(a.isNegative())return this.div(a.neg()).neg();et=It}for(d=this;d.gte(a);){c=Math.max(1,Math.floor(d.toNumber()/a.toNumber()));for(var at=Math.ceil(Math.log(c)/Math.LN2),$t=at<=48?1:Un$1(2,at-48),vt=ct(c),b=vt.mul(a);b.isNegative()||b.gt(d);)c-=$t,vt=ct(c,this.unsigned),b=vt.mul(a);vt.isZero()&&(vt=Er$1),et=et.add(vt),d=d.sub(b)}return et},B.div=B.divide,B.modulo=function(a){if(Xe(a)||(a=St$1(a)),ft){var s=(this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,a.low,a.high);return le(s,ft.get_high(),this.unsigned)}return this.sub(this.div(a).mul(a))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is$1(this.low):Is$1(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(a){return Xe(a)||(a=St$1(a)),le(this.low&a.low,this.high&a.high,this.unsigned)},B.or=function(a){return Xe(a)||(a=St$1(a)),le(this.low|a.low,this.high|a.high,this.unsigned)},B.xor=function(a){return Xe(a)||(a=St$1(a)),le(this.low^a.low,this.high^a.high,this.unsigned)},B.shiftLeft=function(a){return Xe(a)&&(a=a.toInt()),(a&=63)===0?this:a<32?le(this.low<<a,this.high<<a|this.low>>>32-a,this.unsigned):le(0,this.low<<a-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(a){return Xe(a)&&(a=a.toInt()),(a&=63)===0?this:a<32?le(this.low>>>a|this.high<<32-a,this.high>>a,this.unsigned):le(this.high>>a-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(a){return Xe(a)&&(a=a.toInt()),(a&=63)===0?this:a<32?le(this.low>>>a|this.high<<32-a,this.high>>>a,this.unsigned):a===32?le(this.high,0,this.unsigned):le(this.high>>>a-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(a){var s;return Xe(a)&&(a=a.toInt()),(a&=63)===0?this:a===32?le(this.high,this.low,this.unsigned):a<32?(s=32-a,le(this.low<<a|this.high>>>s,this.high<<a|this.low>>>s,this.unsigned)):(a-=32,s=32-a,le(this.high<<a|this.low>>>s,this.low<<a|this.high>>>s,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(a){var s;return Xe(a)&&(a=a.toInt()),(a&=63)===0?this:a===32?le(this.high,this.low,this.unsigned):a<32?(s=32-a,le(this.high<<s|this.low>>>a,this.low<<s|this.high>>>a,this.unsigned)):(a-=32,s=32-a,le(this.low<<s|this.high>>>a,this.high<<s|this.low>>>a,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(a){return a?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var a=this.high,s=this.low;return[s&255,s>>>8&255,s>>>16&255,s>>>24,a&255,a>>>8&255,a>>>16&255,a>>>24]},B.toBytesBE=function(){var a=this.high,s=this.low;return[a>>>24,a>>>16&255,a>>>8&255,a&255,s>>>24,s>>>16&255,s>>>8&255,s&255]},be.fromBytes=function(a,s,c){return c?be.fromBytesLE(a,s):be.fromBytesBE(a,s)},be.fromBytesLE=function(a,s){return new be(a[0]|a[1]<<8|a[2]<<16|a[3]<<24,a[4]|a[5]<<8|a[6]<<16|a[7]<<24,s)},be.fromBytesBE=function(a,s){return new be(a[4]<<24|a[5]<<16|a[6]<<8|a[7],a[0]<<24|a[1]<<16|a[2]<<8|a[3],s)},Vt=be}),_$1,zn$1=L$1(()=>{_$1={},_$1.Offset,_$1.Table,_$1.SIZEOF_SHORT=2,_$1.SIZEOF_INT=4,_$1.FILE_IDENTIFIER_LENGTH=4,_$1.SIZE_PREFIX_LENGTH=4,_$1.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_$1.int32=new Int32Array(2),_$1.float32=new Float32Array(_$1.int32.buffer),_$1.float64=new Float64Array(_$1.int32.buffer),_$1.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_$1.Long=function(a,s){this.low=a|0,this.high=s|0},_$1.Long.create=function(a,s){return a==0&&s==0?_$1.Long.ZERO:new _$1.Long(a,s)},_$1.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_$1.Long.prototype.equals=function(a){return this.low==a.low&&this.high==a.high},_$1.Long.ZERO=new _$1.Long(0,0),_$1.Builder=function(a){if(a)var s=a;else var s=1024;this.bb=_$1.ByteBuffer.allocate(s),this.space=s,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_$1.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_$1.Builder.prototype.forceDefaults=function(a){this.force_defaults=a},_$1.Builder.prototype.dataBuffer=function(){return this.bb},_$1.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_$1.Builder.prototype.prep=function(a,s){a>this.minalign&&(this.minalign=a);for(var c=~(this.bb.capacity()-this.space+s)+1&a-1;this.space<c+a+s;){var d=this.bb.capacity();this.bb=_$1.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-d}this.pad(c)},_$1.Builder.prototype.pad=function(a){for(var s=0;s<a;s++)this.bb.writeInt8(--this.space,0)},_$1.Builder.prototype.writeInt8=function(a){this.bb.writeInt8(this.space-=1,a)},_$1.Builder.prototype.writeInt16=function(a){this.bb.writeInt16(this.space-=2,a)},_$1.Builder.prototype.writeInt32=function(a){this.bb.writeInt32(this.space-=4,a)},_$1.Builder.prototype.writeInt64=function(a){this.bb.writeInt64(this.space-=8,a)},_$1.Builder.prototype.writeFloat32=function(a){this.bb.writeFloat32(this.space-=4,a)},_$1.Builder.prototype.writeFloat64=function(a){this.bb.writeFloat64(this.space-=8,a)},_$1.Builder.prototype.addInt8=function(a){this.prep(1,0),this.writeInt8(a)},_$1.Builder.prototype.addInt16=function(a){this.prep(2,0),this.writeInt16(a)},_$1.Builder.prototype.addInt32=function(a){this.prep(4,0),this.writeInt32(a)},_$1.Builder.prototype.addInt64=function(a){this.prep(8,0),this.writeInt64(a)},_$1.Builder.prototype.addFloat32=function(a){this.prep(4,0),this.writeFloat32(a)},_$1.Builder.prototype.addFloat64=function(a){this.prep(8,0),this.writeFloat64(a)},_$1.Builder.prototype.addFieldInt8=function(a,s,c){(this.force_defaults||s!=c)&&(this.addInt8(s),this.slot(a))},_$1.Builder.prototype.addFieldInt16=function(a,s,c){(this.force_defaults||s!=c)&&(this.addInt16(s),this.slot(a))},_$1.Builder.prototype.addFieldInt32=function(a,s,c){(this.force_defaults||s!=c)&&(this.addInt32(s),this.slot(a))},_$1.Builder.prototype.addFieldInt64=function(a,s,c){(this.force_defaults||!s.equals(c))&&(this.addInt64(s),this.slot(a))},_$1.Builder.prototype.addFieldFloat32=function(a,s,c){(this.force_defaults||s!=c)&&(this.addFloat32(s),this.slot(a))},_$1.Builder.prototype.addFieldFloat64=function(a,s,c){(this.force_defaults||s!=c)&&(this.addFloat64(s),this.slot(a))},_$1.Builder.prototype.addFieldOffset=function(a,s,c){(this.force_defaults||s!=c)&&(this.addOffset(s),this.slot(a))},_$1.Builder.prototype.addFieldStruct=function(a,s,c){s!=c&&(this.nested(s),this.slot(a))},_$1.Builder.prototype.nested=function(a){if(a!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_$1.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_$1.Builder.prototype.slot=function(a){this.vtable[a]=this.offset()},_$1.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_$1.Builder.growByteBuffer=function(a){var s=a.capacity();if(s&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var c=s<<1,d=_$1.ByteBuffer.allocate(c);return d.setPosition(c-s),d.bytes().set(a.bytes(),c-s),d},_$1.Builder.prototype.addOffset=function(a){this.prep(_$1.SIZEOF_INT,0),this.writeInt32(this.offset()-a+_$1.SIZEOF_INT)},_$1.Builder.prototype.startObject=function(a){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=a;for(var s=0;s<a;s++)this.vtable[s]=0;this.isNested=!0,this.object_start=this.offset()},_$1.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var a=this.offset(),s=this.vtable_in_use-1;s>=0&&this.vtable[s]==0;s--);for(var c=s+1;s>=0;s--)this.addInt16(this.vtable[s]!=0?a-this.vtable[s]:0);var d=2;this.addInt16(a-this.object_start);var et=(c+d)*_$1.SIZEOF_SHORT;this.addInt16(et);var g=0,at=this.space;e:for(s=0;s<this.vtables.length;s++){var $t=this.bb.capacity()-this.vtables[s];if(et==this.bb.readInt16($t)){for(var vt=_$1.SIZEOF_SHORT;vt<et;vt+=_$1.SIZEOF_SHORT)if(this.bb.readInt16(at+vt)!=this.bb.readInt16($t+vt))continue e;g=this.vtables[s];break}}return g?(this.space=this.bb.capacity()-a,this.bb.writeInt32(this.space,g-a)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-a,this.offset()-a)),this.isNested=!1,a},_$1.Builder.prototype.finish=function(a,s,c){var d=c?_$1.SIZE_PREFIX_LENGTH:0;if(s){var et=s;if(this.prep(this.minalign,_$1.SIZEOF_INT+_$1.FILE_IDENTIFIER_LENGTH+d),et.length!=_$1.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_$1.FILE_IDENTIFIER_LENGTH);for(var g=_$1.FILE_IDENTIFIER_LENGTH-1;g>=0;g--)this.writeInt8(et.charCodeAt(g))}this.prep(this.minalign,_$1.SIZEOF_INT+d),this.addOffset(a),d&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_$1.Builder.prototype.finishSizePrefixed=function(a,s){this.finish(a,s,!0)},_$1.Builder.prototype.requiredField=function(a,s){var c=this.bb.capacity()-a,d=c-this.bb.readInt32(c),et=this.bb.readInt16(d+s)!=0;if(!et)throw new Error("FlatBuffers: field "+s+" must be set")},_$1.Builder.prototype.startVector=function(a,s,c){this.notNested(),this.vector_num_elems=s,this.prep(_$1.SIZEOF_INT,a*s),this.prep(c,a*s)},_$1.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_$1.Builder.prototype.createString=function(a){if(a instanceof Uint8Array)var s=a;else for(var s=[],c=0;c<a.length;){var d,et=a.charCodeAt(c++);if(et<55296||et>=56320)d=et;else{var g=a.charCodeAt(c++);d=(et<<10)+g+-56613888}d<128?s.push(d):(d<2048?s.push(d>>6&31|192):(d<65536?s.push(d>>12&15|224):s.push(d>>18&7|240,d>>12&63|128),s.push(d>>6&63|128)),s.push(d&63|128))}this.addInt8(0),this.startVector(1,s.length,1),this.bb.setPosition(this.space-=s.length);for(var c=0,at=this.space,$t=this.bb.bytes();c<s.length;c++)$t[at++]=s[c];return this.endVector()},_$1.Builder.prototype.createLong=function(a,s){return _$1.Long.create(a,s)},_$1.ByteBuffer=function(a){this.bytes_=a,this.position_=0},_$1.ByteBuffer.allocate=function(a){return new _$1.ByteBuffer(new Uint8Array(a))},_$1.ByteBuffer.prototype.clear=function(){this.position_=0},_$1.ByteBuffer.prototype.bytes=function(){return this.bytes_},_$1.ByteBuffer.prototype.position=function(){return this.position_},_$1.ByteBuffer.prototype.setPosition=function(a){this.position_=a},_$1.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_$1.ByteBuffer.prototype.readInt8=function(a){return this.readUint8(a)<<24>>24},_$1.ByteBuffer.prototype.readUint8=function(a){return this.bytes_[a]},_$1.ByteBuffer.prototype.readInt16=function(a){return this.readUint16(a)<<16>>16},_$1.ByteBuffer.prototype.readUint16=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8},_$1.ByteBuffer.prototype.readInt32=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8|this.bytes_[a+2]<<16|this.bytes_[a+3]<<24},_$1.ByteBuffer.prototype.readUint32=function(a){return this.readInt32(a)>>>0},_$1.ByteBuffer.prototype.readInt64=function(a){return new _$1.Long(this.readInt32(a),this.readInt32(a+4))},_$1.ByteBuffer.prototype.readUint64=function(a){return new _$1.Long(this.readUint32(a),this.readUint32(a+4))},_$1.ByteBuffer.prototype.readFloat32=function(a){return _$1.int32[0]=this.readInt32(a),_$1.float32[0]},_$1.ByteBuffer.prototype.readFloat64=function(a){return _$1.int32[_$1.isLittleEndian?0:1]=this.readInt32(a),_$1.int32[_$1.isLittleEndian?1:0]=this.readInt32(a+4),_$1.float64[0]},_$1.ByteBuffer.prototype.writeInt8=function(a,s){this.bytes_[a]=s},_$1.ByteBuffer.prototype.writeUint8=function(a,s){this.bytes_[a]=s},_$1.ByteBuffer.prototype.writeInt16=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8},_$1.ByteBuffer.prototype.writeUint16=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8},_$1.ByteBuffer.prototype.writeInt32=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8,this.bytes_[a+2]=s>>16,this.bytes_[a+3]=s>>24},_$1.ByteBuffer.prototype.writeUint32=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8,this.bytes_[a+2]=s>>16,this.bytes_[a+3]=s>>24},_$1.ByteBuffer.prototype.writeInt64=function(a,s){this.writeInt32(a,s.low),this.writeInt32(a+4,s.high)},_$1.ByteBuffer.prototype.writeUint64=function(a,s){this.writeUint32(a,s.low),this.writeUint32(a+4,s.high)},_$1.ByteBuffer.prototype.writeFloat32=function(a,s){_$1.float32[0]=s,this.writeInt32(a,_$1.int32[0])},_$1.ByteBuffer.prototype.writeFloat64=function(a,s){_$1.float64[0]=s,this.writeInt32(a,_$1.int32[_$1.isLittleEndian?0:1]),this.writeInt32(a+4,_$1.int32[_$1.isLittleEndian?1:0])},_$1.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_$1.SIZEOF_INT+_$1.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var a="",s=0;s<_$1.FILE_IDENTIFIER_LENGTH;s++)a+=String.fromCharCode(this.readInt8(this.position_+_$1.SIZEOF_INT+s));return a},_$1.ByteBuffer.prototype.__offset=function(a,s){var c=a-this.readInt32(a);return s<this.readInt16(c)?this.readInt16(c+s):0},_$1.ByteBuffer.prototype.__union=function(a,s){return a.bb_pos=s+this.readInt32(s),a.bb=this,a},_$1.ByteBuffer.prototype.__string=function(a,s){a+=this.readInt32(a);var c=this.readInt32(a),d="",et=0;if(a+=_$1.SIZEOF_INT,s===_$1.Encoding.UTF8_BYTES)return this.bytes_.subarray(a,a+c);for(;et<c;){var g,at=this.readUint8(a+et++);if(at<192)g=at;else{var $t=this.readUint8(a+et++);if(at<224)g=(at&31)<<6|$t&63;else{var vt=this.readUint8(a+et++);if(at<240)g=(at&15)<<12|($t&63)<<6|vt&63;else{var b=this.readUint8(a+et++);g=(at&7)<<18|($t&63)<<12|(vt&63)<<6|b&63}}}g<65536?d+=String.fromCharCode(g):(g-=65536,d+=String.fromCharCode((g>>10)+55296,(g&1023)+56320))}return d},_$1.ByteBuffer.prototype.__indirect=function(a){return a+this.readInt32(a)},_$1.ByteBuffer.prototype.__vector=function(a){return a+this.readInt32(a)+_$1.SIZEOF_INT},_$1.ByteBuffer.prototype.__vector_len=function(a){return this.readInt32(a+this.readInt32(a))},_$1.ByteBuffer.prototype.__has_identifier=function(a){if(a.length!=_$1.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_$1.FILE_IDENTIFIER_LENGTH);for(var s=0;s<_$1.FILE_IDENTIFIER_LENGTH;s++)if(a.charCodeAt(s)!=this.readInt8(this.position_+_$1.SIZEOF_INT+s))return!1;return!0},_$1.ByteBuffer.prototype.createLong=function(a,s){return _$1.Long.create(a,s)}}),V,tn$1=L$1(()=>{zn$1(),(a=>{(s=>{(c=>{(d=>(d[d.UNDEFINED=0]="UNDEFINED",d[d.FLOAT=1]="FLOAT",d[d.INT=2]="INT",d[d.STRING=3]="STRING",d[d.TENSOR=4]="TENSOR",d[d.GRAPH=5]="GRAPH",d[d.FLOATS=6]="FLOATS",d[d.INTS=7]="INTS",d[d.STRINGS=8]="STRINGS",d[d.TENSORS=9]="TENSORS",d[d.GRAPHS=10]="GRAPHS",d[d.SPARSE_TENSOR=11]="SPARSE_TENSOR",d[d.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(c.AttributeType||(c.AttributeType={}))})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{(d=>(d[d.UNKNOWN=0]="UNKNOWN",d[d.VALUE=1]="VALUE",d[d.PARAM=2]="PARAM"))(c.DimensionValueType||(c.DimensionValueType={}))})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{(d=>(d[d.UNDEFINED=0]="UNDEFINED",d[d.FLOAT=1]="FLOAT",d[d.UINT8=2]="UINT8",d[d.INT8=3]="INT8",d[d.UINT16=4]="UINT16",d[d.INT16=5]="INT16",d[d.INT32=6]="INT32",d[d.INT64=7]="INT64",d[d.STRING=8]="STRING",d[d.BOOL=9]="BOOL",d[d.FLOAT16=10]="FLOAT16",d[d.DOUBLE=11]="DOUBLE",d[d.UINT32=12]="UINT32",d[d.UINT64=13]="UINT64",d[d.COMPLEX64=14]="COMPLEX64",d[d.COMPLEX128=15]="COMPLEX128",d[d.BFLOAT16=16]="BFLOAT16",d[d.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",d[d.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",d[d.FLOAT8E5M2=19]="FLOAT8E5M2",d[d.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(c.TensorDataType||(c.TensorDataType={}))})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{(d=>(d[d.Primitive=0]="Primitive",d[d.Fused=1]="Fused"))(c.NodeType||(c.NodeType={}))})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{(d=>(d[d.NONE=0]="NONE",d[d.tensor_type=1]="tensor_type",d[d.sequence_type=2]="sequence_type",d[d.map_type=3]="map_type"))(c.TypeInfoValue||(c.TypeInfoValue={}))})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsShape(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsShape(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}dim(g,at){let $t=this.bb.__offset(this.bb_pos,4);return $t?(at||new a.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}dimLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}static startShape(g){g.startObject(1)}static addDim(g,at){g.addFieldOffset(0,at,0)}static createDimVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startDimVector(g,at){g.startVector(4,at,4)}static endShape(g){return g.endObject()}static createShape(g,at){return d.startShape(g),d.addDim(g,at),d.endShape(g)}}c.Shape=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsDimension(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsDimension(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}value(g){let at=this.bb.__offset(this.bb_pos,4);return at?(g||new a.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}denotation(g){let at=this.bb.__offset(this.bb_pos,6);return at?this.bb.__string(this.bb_pos+at,g):null}static startDimension(g){g.startObject(2)}static addValue(g,at){g.addFieldOffset(0,at,0)}static addDenotation(g,at){g.addFieldOffset(1,at,0)}static endDimension(g){return g.endObject()}static createDimension(g,at,$t){return d.startDimension(g),d.addValue(g,at),d.addDenotation(g,$t),d.endDimension(g)}}c.Dimension=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsDimensionValue(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsDimensionValue(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}dimType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt8(this.bb_pos+g):0}dimValue(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}dimParam(g){let at=this.bb.__offset(this.bb_pos,8);return at?this.bb.__string(this.bb_pos+at,g):null}static startDimensionValue(g){g.startObject(3)}static addDimType(g,at){g.addFieldInt8(0,at,0)}static addDimValue(g,at){g.addFieldInt64(1,at,g.createLong(0,0))}static addDimParam(g,at){g.addFieldOffset(2,at,0)}static endDimensionValue(g){return g.endObject()}static createDimensionValue(g,at,$t,vt){return d.startDimensionValue(g),d.addDimType(g,at),d.addDimValue(g,$t),d.addDimParam(g,vt),d.endDimensionValue(g)}}c.DimensionValue=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsTensorTypeAndShape(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTensorTypeAndShape(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}elemType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt32(this.bb_pos+g):0}shape(g){let at=this.bb.__offset(this.bb_pos,6);return at?(g||new a.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}static startTensorTypeAndShape(g){g.startObject(2)}static addElemType(g,at){g.addFieldInt32(0,at,0)}static addShape(g,at){g.addFieldOffset(1,at,0)}static endTensorTypeAndShape(g){return g.endObject()}static createTensorTypeAndShape(g,at,$t){return d.startTensorTypeAndShape(g),d.addElemType(g,at),d.addShape(g,$t),d.endTensorTypeAndShape(g)}}c.TensorTypeAndShape=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsMapType(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsMapType(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}keyType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt32(this.bb_pos+g):0}valueType(g){let at=this.bb.__offset(this.bb_pos,6);return at?(g||new a.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}static startMapType(g){g.startObject(2)}static addKeyType(g,at){g.addFieldInt32(0,at,0)}static addValueType(g,at){g.addFieldOffset(1,at,0)}static endMapType(g){return g.endObject()}static createMapType(g,at,$t){return d.startMapType(g),d.addKeyType(g,at),d.addValueType(g,$t),d.endMapType(g)}}c.MapType=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsSequenceType(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSequenceType(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}elemType(g){let at=this.bb.__offset(this.bb_pos,4);return at?(g||new a.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}static startSequenceType(g){g.startObject(1)}static addElemType(g,at){g.addFieldOffset(0,at,0)}static endSequenceType(g){return g.endObject()}static createSequenceType(g,at){return d.startSequenceType(g),d.addElemType(g,at),d.endSequenceType(g)}}c.SequenceType=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(g,at,$t,vt){return g.prep(4,12),g.writeInt32(vt),g.writeInt32($t),g.writeInt32(at),g.offset()}}c.EdgeEnd=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsNodeEdge(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsNodeEdge(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}nodeIndex(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readUint32(this.bb_pos+g):0}inputEdges(g,at){let $t=this.bb.__offset(this.bb_pos,6);return $t?(at||new a.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+$t)+g*12,this.bb):null}inputEdgesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}outputEdges(g,at){let $t=this.bb.__offset(this.bb_pos,8);return $t?(at||new a.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+$t)+g*12,this.bb):null}outputEdgesLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}static startNodeEdge(g){g.startObject(3)}static addNodeIndex(g,at){g.addFieldInt32(0,at,0)}static addInputEdges(g,at){g.addFieldOffset(1,at,0)}static startInputEdgesVector(g,at){g.startVector(12,at,4)}static addOutputEdges(g,at){g.addFieldOffset(2,at,0)}static startOutputEdgesVector(g,at){g.startVector(12,at,4)}static endNodeEdge(g){return g.endObject()}static createNodeEdge(g,at,$t,vt){return d.startNodeEdge(g),d.addNodeIndex(g,at),d.addInputEdges(g,$t),d.addOutputEdges(g,vt),d.endNodeEdge(g)}}c.NodeEdge=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsNode(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsNode(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}docString(g){let at=this.bb.__offset(this.bb_pos,6);return at?this.bb.__string(this.bb_pos+at,g):null}domain(g){let at=this.bb.__offset(this.bb_pos,8);return at?this.bb.__string(this.bb_pos+at,g):null}sinceVersion(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readInt32(this.bb_pos+g):0}index(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.readUint32(this.bb_pos+g):0}opType(g){let at=this.bb.__offset(this.bb_pos,14);return at?this.bb.__string(this.bb_pos+at,g):null}type(){let g=this.bb.__offset(this.bb_pos,16);return g?this.bb.readInt32(this.bb_pos+g):0}executionProviderType(g){let at=this.bb.__offset(this.bb_pos,18);return at?this.bb.__string(this.bb_pos+at,g):null}inputs(g,at){let $t=this.bb.__offset(this.bb_pos,20);return $t?this.bb.__string(this.bb.__vector(this.bb_pos+$t)+g*4,at):null}inputsLength(){let g=this.bb.__offset(this.bb_pos,20);return g?this.bb.__vector_len(this.bb_pos+g):0}outputs(g,at){let $t=this.bb.__offset(this.bb_pos,22);return $t?this.bb.__string(this.bb.__vector(this.bb_pos+$t)+g*4,at):null}outputsLength(){let g=this.bb.__offset(this.bb_pos,22);return g?this.bb.__vector_len(this.bb_pos+g):0}attributes(g,at){let $t=this.bb.__offset(this.bb_pos,24);return $t?(at||new a.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}attributesLength(){let g=this.bb.__offset(this.bb_pos,24);return g?this.bb.__vector_len(this.bb_pos+g):0}inputArgCounts(g){let at=this.bb.__offset(this.bb_pos,26);return at?this.bb.readInt32(this.bb.__vector(this.bb_pos+at)+g*4):0}inputArgCountsLength(){let g=this.bb.__offset(this.bb_pos,26);return g?this.bb.__vector_len(this.bb_pos+g):0}inputArgCountsArray(){let g=this.bb.__offset(this.bb_pos,26);return g?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}implicitInputs(g,at){let $t=this.bb.__offset(this.bb_pos,28);return $t?this.bb.__string(this.bb.__vector(this.bb_pos+$t)+g*4,at):null}implicitInputsLength(){let g=this.bb.__offset(this.bb_pos,28);return g?this.bb.__vector_len(this.bb_pos+g):0}static startNode(g){g.startObject(13)}static addName(g,at){g.addFieldOffset(0,at,0)}static addDocString(g,at){g.addFieldOffset(1,at,0)}static addDomain(g,at){g.addFieldOffset(2,at,0)}static addSinceVersion(g,at){g.addFieldInt32(3,at,0)}static addIndex(g,at){g.addFieldInt32(4,at,0)}static addOpType(g,at){g.addFieldOffset(5,at,0)}static addType(g,at){g.addFieldInt32(6,at,0)}static addExecutionProviderType(g,at){g.addFieldOffset(7,at,0)}static addInputs(g,at){g.addFieldOffset(8,at,0)}static createInputsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startInputsVector(g,at){g.startVector(4,at,4)}static addOutputs(g,at){g.addFieldOffset(9,at,0)}static createOutputsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startOutputsVector(g,at){g.startVector(4,at,4)}static addAttributes(g,at){g.addFieldOffset(10,at,0)}static createAttributesVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startAttributesVector(g,at){g.startVector(4,at,4)}static addInputArgCounts(g,at){g.addFieldOffset(11,at,0)}static createInputArgCountsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addInt32(at[$t]);return g.endVector()}static startInputArgCountsVector(g,at){g.startVector(4,at,4)}static addImplicitInputs(g,at){g.addFieldOffset(12,at,0)}static createImplicitInputsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startImplicitInputsVector(g,at){g.startVector(4,at,4)}static endNode(g){return g.endObject()}static createNode(g,at,$t,vt,b,pt,st,wt,Tt,Ct,jt,Lt,Ht,Gt){return d.startNode(g),d.addName(g,at),d.addDocString(g,$t),d.addDomain(g,vt),d.addSinceVersion(g,b),d.addIndex(g,pt),d.addOpType(g,st),d.addType(g,wt),d.addExecutionProviderType(g,Tt),d.addInputs(g,Ct),d.addOutputs(g,jt),d.addAttributes(g,Lt),d.addInputArgCounts(g,Ht),d.addImplicitInputs(g,Gt),d.endNode(g)}}c.Node=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsValueInfo(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsValueInfo(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}docString(g){let at=this.bb.__offset(this.bb_pos,6);return at?this.bb.__string(this.bb_pos+at,g):null}type(g){let at=this.bb.__offset(this.bb_pos,8);return at?(g||new a.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}static startValueInfo(g){g.startObject(3)}static addName(g,at){g.addFieldOffset(0,at,0)}static addDocString(g,at){g.addFieldOffset(1,at,0)}static addType(g,at){g.addFieldOffset(2,at,0)}static endValueInfo(g){return g.endObject()}static createValueInfo(g,at,$t,vt){return d.startValueInfo(g),d.addName(g,at),d.addDocString(g,$t),d.addType(g,vt),d.endValueInfo(g)}}c.ValueInfo=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsTypeInfo(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTypeInfo(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}denotation(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}valueType(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readUint8(this.bb_pos+g):0}value(g){let at=this.bb.__offset(this.bb_pos,8);return at?this.bb.__union(g,this.bb_pos+at):null}static startTypeInfo(g){g.startObject(3)}static addDenotation(g,at){g.addFieldOffset(0,at,0)}static addValueType(g,at){g.addFieldInt8(1,at,0)}static addValue(g,at){g.addFieldOffset(2,at,0)}static endTypeInfo(g){return g.endObject()}static createTypeInfo(g,at,$t,vt){return d.startTypeInfo(g),d.addDenotation(g,at),d.addValueType(g,$t),d.addValue(g,vt),d.endTypeInfo(g)}}c.TypeInfo=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsOperatorSetId(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsOperatorSetId(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}domain(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}version(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}static startOperatorSetId(g){g.startObject(2)}static addDomain(g,at){g.addFieldOffset(0,at,0)}static addVersion(g,at){g.addFieldInt64(1,at,g.createLong(0,0))}static endOperatorSetId(g){return g.endObject()}static createOperatorSetId(g,at,$t){return d.startOperatorSetId(g),d.addDomain(g,at),d.addVersion(g,$t),d.endOperatorSetId(g)}}c.OperatorSetId=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsTensor(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTensor(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}docString(g){let at=this.bb.__offset(this.bb_pos,6);return at?this.bb.__string(this.bb_pos+at,g):null}dims(g){let at=this.bb.__offset(this.bb_pos,8);return at?this.bb.readInt64(this.bb.__vector(this.bb_pos+at)+g*8):this.bb.createLong(0,0)}dimsLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}dataType(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readInt32(this.bb_pos+g):0}rawData(g){let at=this.bb.__offset(this.bb_pos,12);return at?this.bb.readUint8(this.bb.__vector(this.bb_pos+at)+g):0}rawDataLength(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.__vector_len(this.bb_pos+g):0}rawDataArray(){let g=this.bb.__offset(this.bb_pos,12);return g?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}stringData(g,at){let $t=this.bb.__offset(this.bb_pos,14);return $t?this.bb.__string(this.bb.__vector(this.bb_pos+$t)+g*4,at):null}stringDataLength(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__vector_len(this.bb_pos+g):0}static startTensor(g){g.startObject(6)}static addName(g,at){g.addFieldOffset(0,at,0)}static addDocString(g,at){g.addFieldOffset(1,at,0)}static addDims(g,at){g.addFieldOffset(2,at,0)}static createDimsVector(g,at){g.startVector(8,at.length,8);for(let $t=at.length-1;$t>=0;$t--)g.addInt64(at[$t]);return g.endVector()}static startDimsVector(g,at){g.startVector(8,at,8)}static addDataType(g,at){g.addFieldInt32(3,at,0)}static addRawData(g,at){g.addFieldOffset(4,at,0)}static createRawDataVector(g,at){g.startVector(1,at.length,1);for(let $t=at.length-1;$t>=0;$t--)g.addInt8(at[$t]);return g.endVector()}static startRawDataVector(g,at){g.startVector(1,at,1)}static addStringData(g,at){g.addFieldOffset(5,at,0)}static createStringDataVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startStringDataVector(g,at){g.startVector(4,at,4)}static endTensor(g){return g.endObject()}static createTensor(g,at,$t,vt,b,pt,st){return d.startTensor(g),d.addName(g,at),d.addDocString(g,$t),d.addDims(g,vt),d.addDataType(g,b),d.addRawData(g,pt),d.addStringData(g,st),d.endTensor(g)}}c.Tensor=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsSparseTensor(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSparseTensor(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}values(g){let at=this.bb.__offset(this.bb_pos,4);return at?(g||new a.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}indices(g){let at=this.bb.__offset(this.bb_pos,6);return at?(g||new a.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}dims(g){let at=this.bb.__offset(this.bb_pos,8);return at?this.bb.readInt64(this.bb.__vector(this.bb_pos+at)+g*8):this.bb.createLong(0,0)}dimsLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}static startSparseTensor(g){g.startObject(3)}static addValues(g,at){g.addFieldOffset(0,at,0)}static addIndices(g,at){g.addFieldOffset(1,at,0)}static addDims(g,at){g.addFieldOffset(2,at,0)}static createDimsVector(g,at){g.startVector(8,at.length,8);for(let $t=at.length-1;$t>=0;$t--)g.addInt64(at[$t]);return g.endVector()}static startDimsVector(g,at){g.startVector(8,at,8)}static endSparseTensor(g){return g.endObject()}static createSparseTensor(g,at,$t,vt){return d.startSparseTensor(g),d.addValues(g,at),d.addIndices(g,$t),d.addDims(g,vt),d.endSparseTensor(g)}}c.SparseTensor=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsAttribute(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsAttribute(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}docString(g){let at=this.bb.__offset(this.bb_pos,6);return at?this.bb.__string(this.bb_pos+at,g):null}type(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.readInt32(this.bb_pos+g):0}f(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readFloat32(this.bb_pos+g):0}i(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}s(g){let at=this.bb.__offset(this.bb_pos,14);return at?this.bb.__string(this.bb_pos+at,g):null}t(g){let at=this.bb.__offset(this.bb_pos,16);return at?(g||new a.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}g(g){let at=this.bb.__offset(this.bb_pos,18);return at?(g||new a.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}floats(g){let at=this.bb.__offset(this.bb_pos,20);return at?this.bb.readFloat32(this.bb.__vector(this.bb_pos+at)+g*4):0}floatsLength(){let g=this.bb.__offset(this.bb_pos,20);return g?this.bb.__vector_len(this.bb_pos+g):0}floatsArray(){let g=this.bb.__offset(this.bb_pos,20);return g?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}ints(g){let at=this.bb.__offset(this.bb_pos,22);return at?this.bb.readInt64(this.bb.__vector(this.bb_pos+at)+g*8):this.bb.createLong(0,0)}intsLength(){let g=this.bb.__offset(this.bb_pos,22);return g?this.bb.__vector_len(this.bb_pos+g):0}strings(g,at){let $t=this.bb.__offset(this.bb_pos,24);return $t?this.bb.__string(this.bb.__vector(this.bb_pos+$t)+g*4,at):null}stringsLength(){let g=this.bb.__offset(this.bb_pos,24);return g?this.bb.__vector_len(this.bb_pos+g):0}tensors(g,at){let $t=this.bb.__offset(this.bb_pos,26);return $t?(at||new a.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}tensorsLength(){let g=this.bb.__offset(this.bb_pos,26);return g?this.bb.__vector_len(this.bb_pos+g):0}graphs(g,at){let $t=this.bb.__offset(this.bb_pos,28);return $t?(at||new a.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}graphsLength(){let g=this.bb.__offset(this.bb_pos,28);return g?this.bb.__vector_len(this.bb_pos+g):0}static startAttribute(g){g.startObject(13)}static addName(g,at){g.addFieldOffset(0,at,0)}static addDocString(g,at){g.addFieldOffset(1,at,0)}static addType(g,at){g.addFieldInt32(2,at,0)}static addF(g,at){g.addFieldFloat32(3,at,0)}static addI(g,at){g.addFieldInt64(4,at,g.createLong(0,0))}static addS(g,at){g.addFieldOffset(5,at,0)}static addT(g,at){g.addFieldOffset(6,at,0)}static addG(g,at){g.addFieldOffset(7,at,0)}static addFloats(g,at){g.addFieldOffset(8,at,0)}static createFloatsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addFloat32(at[$t]);return g.endVector()}static startFloatsVector(g,at){g.startVector(4,at,4)}static addInts(g,at){g.addFieldOffset(9,at,0)}static createIntsVector(g,at){g.startVector(8,at.length,8);for(let $t=at.length-1;$t>=0;$t--)g.addInt64(at[$t]);return g.endVector()}static startIntsVector(g,at){g.startVector(8,at,8)}static addStrings(g,at){g.addFieldOffset(10,at,0)}static createStringsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startStringsVector(g,at){g.startVector(4,at,4)}static addTensors(g,at){g.addFieldOffset(11,at,0)}static createTensorsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startTensorsVector(g,at){g.startVector(4,at,4)}static addGraphs(g,at){g.addFieldOffset(12,at,0)}static createGraphsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startGraphsVector(g,at){g.startVector(4,at,4)}static endAttribute(g){return g.endObject()}static createAttribute(g,at,$t,vt,b,pt,st,wt,Tt,Ct,jt,Lt,Ht,Gt){return d.startAttribute(g),d.addName(g,at),d.addDocString(g,$t),d.addType(g,vt),d.addF(g,b),d.addI(g,pt),d.addS(g,st),d.addT(g,wt),d.addG(g,Tt),d.addFloats(g,Ct),d.addInts(g,jt),d.addStrings(g,Lt),d.addTensors(g,Ht),d.addGraphs(g,Gt),d.endAttribute(g)}}c.Attribute=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsGraph(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsGraph(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}initializers(g,at){let $t=this.bb.__offset(this.bb_pos,4);return $t?(at||new a.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}initializersLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}nodeArgs(g,at){let $t=this.bb.__offset(this.bb_pos,6);return $t?(at||new a.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}nodeArgsLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}nodes(g,at){let $t=this.bb.__offset(this.bb_pos,8);return $t?(at||new a.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}nodesLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}maxNodeIndex(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readUint32(this.bb_pos+g):0}nodeEdges(g,at){let $t=this.bb.__offset(this.bb_pos,12);return $t?(at||new a.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}nodeEdgesLength(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.__vector_len(this.bb_pos+g):0}inputs(g,at){let $t=this.bb.__offset(this.bb_pos,14);return $t?this.bb.__string(this.bb.__vector(this.bb_pos+$t)+g*4,at):null}inputsLength(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__vector_len(this.bb_pos+g):0}outputs(g,at){let $t=this.bb.__offset(this.bb_pos,16);return $t?this.bb.__string(this.bb.__vector(this.bb_pos+$t)+g*4,at):null}outputsLength(){let g=this.bb.__offset(this.bb_pos,16);return g?this.bb.__vector_len(this.bb_pos+g):0}sparseInitializers(g,at){let $t=this.bb.__offset(this.bb_pos,18);return $t?(at||new a.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}sparseInitializersLength(){let g=this.bb.__offset(this.bb_pos,18);return g?this.bb.__vector_len(this.bb_pos+g):0}static startGraph(g){g.startObject(8)}static addInitializers(g,at){g.addFieldOffset(0,at,0)}static createInitializersVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startInitializersVector(g,at){g.startVector(4,at,4)}static addNodeArgs(g,at){g.addFieldOffset(1,at,0)}static createNodeArgsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startNodeArgsVector(g,at){g.startVector(4,at,4)}static addNodes(g,at){g.addFieldOffset(2,at,0)}static createNodesVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startNodesVector(g,at){g.startVector(4,at,4)}static addMaxNodeIndex(g,at){g.addFieldInt32(3,at,0)}static addNodeEdges(g,at){g.addFieldOffset(4,at,0)}static createNodeEdgesVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startNodeEdgesVector(g,at){g.startVector(4,at,4)}static addInputs(g,at){g.addFieldOffset(5,at,0)}static createInputsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startInputsVector(g,at){g.startVector(4,at,4)}static addOutputs(g,at){g.addFieldOffset(6,at,0)}static createOutputsVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startOutputsVector(g,at){g.startVector(4,at,4)}static addSparseInitializers(g,at){g.addFieldOffset(7,at,0)}static createSparseInitializersVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startSparseInitializersVector(g,at){g.startVector(4,at,4)}static endGraph(g){return g.endObject()}static createGraph(g,at,$t,vt,b,pt,st,wt,Tt){return d.startGraph(g),d.addInitializers(g,at),d.addNodeArgs(g,$t),d.addNodes(g,vt),d.addMaxNodeIndex(g,b),d.addNodeEdges(g,pt),d.addInputs(g,st),d.addOutputs(g,wt),d.addSparseInitializers(g,Tt),d.endGraph(g)}}c.Graph=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsModel(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsModel(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}irVersion(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}opsetImport(g,at){let $t=this.bb.__offset(this.bb_pos,6);return $t?(at||new a.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}opsetImportLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}producerName(g){let at=this.bb.__offset(this.bb_pos,8);return at?this.bb.__string(this.bb_pos+at,g):null}producerVersion(g){let at=this.bb.__offset(this.bb_pos,10);return at?this.bb.__string(this.bb_pos+at,g):null}domain(g){let at=this.bb.__offset(this.bb_pos,12);return at?this.bb.__string(this.bb_pos+at,g):null}modelVersion(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}docString(g){let at=this.bb.__offset(this.bb_pos,16);return at?this.bb.__string(this.bb_pos+at,g):null}graph(g){let at=this.bb.__offset(this.bb_pos,18);return at?(g||new a.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}graphDocString(g){let at=this.bb.__offset(this.bb_pos,20);return at?this.bb.__string(this.bb_pos+at,g):null}static startModel(g){g.startObject(9)}static addIrVersion(g,at){g.addFieldInt64(0,at,g.createLong(0,0))}static addOpsetImport(g,at){g.addFieldOffset(1,at,0)}static createOpsetImportVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startOpsetImportVector(g,at){g.startVector(4,at,4)}static addProducerName(g,at){g.addFieldOffset(2,at,0)}static addProducerVersion(g,at){g.addFieldOffset(3,at,0)}static addDomain(g,at){g.addFieldOffset(4,at,0)}static addModelVersion(g,at){g.addFieldInt64(5,at,g.createLong(0,0))}static addDocString(g,at){g.addFieldOffset(6,at,0)}static addGraph(g,at){g.addFieldOffset(7,at,0)}static addGraphDocString(g,at){g.addFieldOffset(8,at,0)}static endModel(g){return g.endObject()}static createModel(g,at,$t,vt,b,pt,st,wt,Tt,Ct){return d.startModel(g),d.addIrVersion(g,at),d.addOpsetImport(g,$t),d.addProducerName(g,vt),d.addProducerVersion(g,b),d.addDomain(g,pt),d.addModelVersion(g,st),d.addDocString(g,wt),d.addGraph(g,Tt),d.addGraphDocString(g,Ct),d.endModel(g)}}c.Model=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsKernelCreateInfos(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsKernelCreateInfos(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}nodeIndices(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.readUint32(this.bb.__vector(this.bb_pos+at)+g*4):0}nodeIndicesLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}nodeIndicesArray(){let g=this.bb.__offset(this.bb_pos,4);return g?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}kernelDefHashes(g){let at=this.bb.__offset(this.bb_pos,6);return at?this.bb.readUint64(this.bb.__vector(this.bb_pos+at)+g*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}static startKernelCreateInfos(g){g.startObject(2)}static addNodeIndices(g,at){g.addFieldOffset(0,at,0)}static createNodeIndicesVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addInt32(at[$t]);return g.endVector()}static startNodeIndicesVector(g,at){g.startVector(4,at,4)}static addKernelDefHashes(g,at){g.addFieldOffset(1,at,0)}static createKernelDefHashesVector(g,at){g.startVector(8,at.length,8);for(let $t=at.length-1;$t>=0;$t--)g.addInt64(at[$t]);return g.endVector()}static startKernelDefHashesVector(g,at){g.startVector(8,at,8)}static endKernelCreateInfos(g){return g.endObject()}static createKernelCreateInfos(g,at,$t){return d.startKernelCreateInfos(g),d.addNodeIndices(g,at),d.addKernelDefHashes(g,$t),d.endKernelCreateInfos(g)}}c.KernelCreateInfos=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsSubGraphSessionState(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSubGraphSessionState(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}graphId(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}sessionState(g){let at=this.bb.__offset(this.bb_pos,6);return at?(g||new a.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}static startSubGraphSessionState(g){g.startObject(2)}static addGraphId(g,at){g.addFieldOffset(0,at,0)}static addSessionState(g,at){g.addFieldOffset(1,at,0)}static endSubGraphSessionState(g){let at=g.endObject();return g.requiredField(at,4),at}static createSubGraphSessionState(g,at,$t){return d.startSubGraphSessionState(g),d.addGraphId(g,at),d.addSessionState(g,$t),d.endSubGraphSessionState(g)}}c.SubGraphSessionState=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsSessionState(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSessionState(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}kernels(g){let at=this.bb.__offset(this.bb_pos,4);return at?(g||new a.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}subGraphSessionStates(g,at){let $t=this.bb.__offset(this.bb_pos,6);return $t?(at||new a.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+$t)+g*4),this.bb):null}subGraphSessionStatesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}static startSessionState(g){g.startObject(2)}static addKernels(g,at){g.addFieldOffset(0,at,0)}static addSubGraphSessionStates(g,at){g.addFieldOffset(1,at,0)}static createSubGraphSessionStatesVector(g,at){g.startVector(4,at.length,4);for(let $t=at.length-1;$t>=0;$t--)g.addOffset(at[$t]);return g.endVector()}static startSubGraphSessionStatesVector(g,at){g.startVector(4,at,4)}static endSessionState(g){return g.endObject()}static createSessionState(g,at,$t){return d.startSessionState(g),d.addKernels(g,at),d.addSubGraphSessionStates(g,$t),d.endSessionState(g)}}c.SessionState=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={})),(a=>{(s=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,at){return this.bb_pos=g,this.bb=at,this}static getRootAsInferenceSession(g,at){return(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsInferenceSession(g,at){return g.setPosition(g.position()+_$1.SIZE_PREFIX_LENGTH),(at||new d).__init(g.readInt32(g.position())+g.position(),g)}static bufferHasIdentifier(g){return g.__has_identifier("ORTM")}ortVersion(g){let at=this.bb.__offset(this.bb_pos,4);return at?this.bb.__string(this.bb_pos+at,g):null}model(g){let at=this.bb.__offset(this.bb_pos,6);return at?(g||new a.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}sessionState(g){let at=this.bb.__offset(this.bb_pos,8);return at?(g||new a.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+at),this.bb):null}static startInferenceSession(g){g.startObject(3)}static addOrtVersion(g,at){g.addFieldOffset(0,at,0)}static addModel(g,at){g.addFieldOffset(1,at,0)}static addSessionState(g,at){g.addFieldOffset(2,at,0)}static endInferenceSession(g){return g.endObject()}static finishInferenceSessionBuffer(g,at){g.finish(at,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(g,at){g.finish(at,"ORTM",!0)}static createInferenceSession(g,at,$t,vt){return d.startInferenceSession(g),d.addOrtVersion(g,at),d.addModel(g,$t),d.addSessionState(g,vt),d.endInferenceSession(g)}}c.InferenceSession=d})(s.fbs||(s.fbs={}))})(a.experimental||(a.experimental={}))})(V||(V={}))}),Bs$1=me((a,s)=>{s.exports=c;function c(d,et){for(var g=new Array(arguments.length-1),at=0,$t=2,vt=!0;$t<arguments.length;)g[at++]=arguments[$t++];return new Promise(function(b,pt){g[at]=function(st){if(vt)if(vt=!1,st)pt(st);else{for(var wt=new Array(arguments.length-1),Tt=0;Tt<wt.length;)wt[Tt++]=arguments[Tt];b.apply(null,wt)}};try{d.apply(et||null,g)}catch(st){vt&&(vt=!1,pt(st))}})}}),Gs$1=me(a=>{var s=a;s.length=function(at){var $t=at.length;if(!$t)return 0;for(var vt=0;--$t%4>1&&at.charAt($t)==="=";)++vt;return Math.ceil(at.length*3)/4-vt};var c=new Array(64),d=new Array(123);for(et=0;et<64;)d[c[et]=et<26?et+65:et<52?et+71:et<62?et-4:et-59|43]=et++;var et;s.encode=function(at,$t,vt){for(var b=null,pt=[],st=0,wt=0,Tt;$t<vt;){var Ct=at[$t++];switch(wt){case 0:pt[st++]=c[Ct>>2],Tt=(Ct&3)<<4,wt=1;break;case 1:pt[st++]=c[Tt|Ct>>4],Tt=(Ct&15)<<2,wt=2;break;case 2:pt[st++]=c[Tt|Ct>>6],pt[st++]=c[Ct&63],wt=0;break}st>8191&&((b||(b=[])).push(String.fromCharCode.apply(String,pt)),st=0)}return wt&&(pt[st++]=c[Tt],pt[st++]=61,wt===1&&(pt[st++]=61)),b?(st&&b.push(String.fromCharCode.apply(String,pt.slice(0,st))),b.join("")):String.fromCharCode.apply(String,pt.slice(0,st))};var g="invalid encoding";s.decode=function(at,$t,vt){for(var b=vt,pt=0,st,wt=0;wt<at.length;){var Tt=at.charCodeAt(wt++);if(Tt===61&&pt>1)break;if((Tt=d[Tt])===void 0)throw Error(g);switch(pt){case 0:st=Tt,pt=1;break;case 1:$t[vt++]=st<<2|(Tt&48)>>4,st=Tt,pt=2;break;case 2:$t[vt++]=(st&15)<<4|(Tt&60)>>2,st=Tt,pt=3;break;case 3:$t[vt++]=(st&3)<<6|Tt,pt=0;break}}if(pt===1)throw Error(g);return vt-b},s.test=function(at){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(at)}}),zs$1=me((a,s)=>{s.exports=c;function c(){this._listeners={}}c.prototype.on=function(d,et,g){return(this._listeners[d]||(this._listeners[d]=[])).push({fn:et,ctx:g||this}),this},c.prototype.off=function(d,et){if(d===void 0)this._listeners={};else if(et===void 0)this._listeners[d]=[];else for(var g=this._listeners[d],at=0;at<g.length;)g[at].fn===et?g.splice(at,1):++at;return this},c.prototype.emit=function(d){var et=this._listeners[d];if(et){for(var g=[],at=1;at<arguments.length;)g.push(arguments[at++]);for(at=0;at<et.length;)et[at].fn.apply(et[at++].ctx,g)}return this}}),Xs$1=me((a,s)=>{s.exports=c(c);function c($t){return typeof Float32Array<"u"?function(){var vt=new Float32Array([-0]),b=new Uint8Array(vt.buffer),pt=b[3]===128;function st(jt,Lt,Ht){vt[0]=jt,Lt[Ht]=b[0],Lt[Ht+1]=b[1],Lt[Ht+2]=b[2],Lt[Ht+3]=b[3]}function wt(jt,Lt,Ht){vt[0]=jt,Lt[Ht]=b[3],Lt[Ht+1]=b[2],Lt[Ht+2]=b[1],Lt[Ht+3]=b[0]}$t.writeFloatLE=pt?st:wt,$t.writeFloatBE=pt?wt:st;function Tt(jt,Lt){return b[0]=jt[Lt],b[1]=jt[Lt+1],b[2]=jt[Lt+2],b[3]=jt[Lt+3],vt[0]}function Ct(jt,Lt){return b[3]=jt[Lt],b[2]=jt[Lt+1],b[1]=jt[Lt+2],b[0]=jt[Lt+3],vt[0]}$t.readFloatLE=pt?Tt:Ct,$t.readFloatBE=pt?Ct:Tt}():function(){function vt(pt,st,wt,Tt){var Ct=st<0?1:0;if(Ct&&(st=-st),st===0)pt(1/st>0?0:2147483648,wt,Tt);else if(isNaN(st))pt(2143289344,wt,Tt);else if(st>34028234663852886e22)pt((Ct<<31|2139095040)>>>0,wt,Tt);else if(st<11754943508222875e-54)pt((Ct<<31|Math.round(st/1401298464324817e-60))>>>0,wt,Tt);else{var jt=Math.floor(Math.log(st)/Math.LN2),Lt=Math.round(st*Math.pow(2,-jt)*8388608)&8388607;pt((Ct<<31|jt+127<<23|Lt)>>>0,wt,Tt)}}$t.writeFloatLE=vt.bind(null,d),$t.writeFloatBE=vt.bind(null,et);function b(pt,st,wt){var Tt=pt(st,wt),Ct=(Tt>>31)*2+1,jt=Tt>>>23&255,Lt=Tt&8388607;return jt===255?Lt?NaN:Ct*(1/0):jt===0?Ct*1401298464324817e-60*Lt:Ct*Math.pow(2,jt-150)*(Lt+8388608)}$t.readFloatLE=b.bind(null,g),$t.readFloatBE=b.bind(null,at)}(),typeof Float64Array<"u"?function(){var vt=new Float64Array([-0]),b=new Uint8Array(vt.buffer),pt=b[7]===128;function st(jt,Lt,Ht){vt[0]=jt,Lt[Ht]=b[0],Lt[Ht+1]=b[1],Lt[Ht+2]=b[2],Lt[Ht+3]=b[3],Lt[Ht+4]=b[4],Lt[Ht+5]=b[5],Lt[Ht+6]=b[6],Lt[Ht+7]=b[7]}function wt(jt,Lt,Ht){vt[0]=jt,Lt[Ht]=b[7],Lt[Ht+1]=b[6],Lt[Ht+2]=b[5],Lt[Ht+3]=b[4],Lt[Ht+4]=b[3],Lt[Ht+5]=b[2],Lt[Ht+6]=b[1],Lt[Ht+7]=b[0]}$t.writeDoubleLE=pt?st:wt,$t.writeDoubleBE=pt?wt:st;function Tt(jt,Lt){return b[0]=jt[Lt],b[1]=jt[Lt+1],b[2]=jt[Lt+2],b[3]=jt[Lt+3],b[4]=jt[Lt+4],b[5]=jt[Lt+5],b[6]=jt[Lt+6],b[7]=jt[Lt+7],vt[0]}function Ct(jt,Lt){return b[7]=jt[Lt],b[6]=jt[Lt+1],b[5]=jt[Lt+2],b[4]=jt[Lt+3],b[3]=jt[Lt+4],b[2]=jt[Lt+5],b[1]=jt[Lt+6],b[0]=jt[Lt+7],vt[0]}$t.readDoubleLE=pt?Tt:Ct,$t.readDoubleBE=pt?Ct:Tt}():function(){function vt(pt,st,wt,Tt,Ct,jt){var Lt=Tt<0?1:0;if(Lt&&(Tt=-Tt),Tt===0)pt(0,Ct,jt+st),pt(1/Tt>0?0:2147483648,Ct,jt+wt);else if(isNaN(Tt))pt(0,Ct,jt+st),pt(2146959360,Ct,jt+wt);else if(Tt>17976931348623157e292)pt(0,Ct,jt+st),pt((Lt<<31|2146435072)>>>0,Ct,jt+wt);else{var Ht;if(Tt<22250738585072014e-324)Ht=Tt/5e-324,pt(Ht>>>0,Ct,jt+st),pt((Lt<<31|Ht/4294967296)>>>0,Ct,jt+wt);else{var Gt=Math.floor(Math.log(Tt)/Math.LN2);Gt===1024&&(Gt=1023),Ht=Tt*Math.pow(2,-Gt),pt(Ht*4503599627370496>>>0,Ct,jt+st),pt((Lt<<31|Gt+1023<<20|Ht*1048576&1048575)>>>0,Ct,jt+wt)}}}$t.writeDoubleLE=vt.bind(null,d,0,4),$t.writeDoubleBE=vt.bind(null,et,4,0);function b(pt,st,wt,Tt,Ct){var jt=pt(Tt,Ct+st),Lt=pt(Tt,Ct+wt),Ht=(Lt>>31)*2+1,Gt=Lt>>>20&2047,Kt=4294967296*(Lt&1048575)+jt;return Gt===2047?Kt?NaN:Ht*(1/0):Gt===0?Ht*5e-324*Kt:Ht*Math.pow(2,Gt-1075)*(Kt+4503599627370496)}$t.readDoubleLE=b.bind(null,g,0,4),$t.readDoubleBE=b.bind(null,at,4,0)}(),$t}function d($t,vt,b){vt[b]=$t&255,vt[b+1]=$t>>>8&255,vt[b+2]=$t>>>16&255,vt[b+3]=$t>>>24}function et($t,vt,b){vt[b]=$t>>>24,vt[b+1]=$t>>>16&255,vt[b+2]=$t>>>8&255,vt[b+3]=$t&255}function g($t,vt){return($t[vt]|$t[vt+1]<<8|$t[vt+2]<<16|$t[vt+3]<<24)>>>0}function at($t,vt){return($t[vt]<<24|$t[vt+1]<<16|$t[vt+2]<<8|$t[vt+3])>>>0}}),Ks$1=me((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}}),Zs$1=me(a=>{var s=a;s.length=function(c){for(var d=0,et=0,g=0;g<c.length;++g)et=c.charCodeAt(g),et<128?d+=1:et<2048?d+=2:(et&64512)===55296&&(c.charCodeAt(g+1)&64512)===56320?(++g,d+=4):d+=3;return d},s.read=function(c,d,et){var g=et-d;if(g<1)return"";for(var at=null,$t=[],vt=0,b;d<et;)b=c[d++],b<128?$t[vt++]=b:b>191&&b<224?$t[vt++]=(b&31)<<6|c[d++]&63:b>239&&b<365?(b=((b&7)<<18|(c[d++]&63)<<12|(c[d++]&63)<<6|c[d++]&63)-65536,$t[vt++]=55296+(b>>10),$t[vt++]=56320+(b&1023)):$t[vt++]=(b&15)<<12|(c[d++]&63)<<6|c[d++]&63,vt>8191&&((at||(at=[])).push(String.fromCharCode.apply(String,$t)),vt=0);return at?(vt&&at.push(String.fromCharCode.apply(String,$t.slice(0,vt))),at.join("")):String.fromCharCode.apply(String,$t.slice(0,vt))},s.write=function(c,d,et){for(var g=et,at,$t,vt=0;vt<c.length;++vt)at=c.charCodeAt(vt),at<128?d[et++]=at:at<2048?(d[et++]=at>>6|192,d[et++]=at&63|128):(at&64512)===55296&&(($t=c.charCodeAt(vt+1))&64512)===56320?(at=65536+((at&1023)<<10)+($t&1023),++vt,d[et++]=at>>18|240,d[et++]=at>>12&63|128,d[et++]=at>>6&63|128,d[et++]=at&63|128):(d[et++]=at>>12|224,d[et++]=at>>6&63|128,d[et++]=at&63|128);return et-g}}),eu$1=me((a,s)=>{s.exports=c;function c(d,et,g){var at=g||8192,$t=at>>>1,vt=null,b=at;return function(pt){if(pt<1||pt>$t)return d(pt);b+pt>at&&(vt=d(at),b=0);var st=et.call(vt,b,b+=pt);return b&7&&(b=(b|7)+1),st}}}),ru$1=me((a,s)=>{s.exports=d;var c=Jt();function d($t,vt){this.lo=$t>>>0,this.hi=vt>>>0}var et=d.zero=new d(0,0);et.toNumber=function(){return 0},et.zzEncode=et.zzDecode=function(){return this},et.length=function(){return 1};var g=d.zeroHash="\0\0\0\0\0\0\0\0";d.fromNumber=function($t){if($t===0)return et;var vt=$t<0;vt&&($t=-$t);var b=$t>>>0,pt=($t-b)/4294967296>>>0;return vt&&(pt=~pt>>>0,b=~b>>>0,++b>4294967295&&(b=0,++pt>4294967295&&(pt=0))),new d(b,pt)},d.from=function($t){if(typeof $t=="number")return d.fromNumber($t);if(c.isString($t))if(c.Long)$t=c.Long.fromString($t);else return d.fromNumber(parseInt($t,10));return $t.low||$t.high?new d($t.low>>>0,$t.high>>>0):et},d.prototype.toNumber=function($t){if(!$t&&this.hi>>>31){var vt=~this.lo+1>>>0,b=~this.hi>>>0;return vt||(b=b+1>>>0),-(vt+b*4294967296)}return this.lo+this.hi*4294967296},d.prototype.toLong=function($t){return c.Long?new c.Long(this.lo|0,this.hi|0,!!$t):{low:this.lo|0,high:this.hi|0,unsigned:!!$t}};var at=String.prototype.charCodeAt;d.fromHash=function($t){return $t===g?et:new d((at.call($t,0)|at.call($t,1)<<8|at.call($t,2)<<16|at.call($t,3)<<24)>>>0,(at.call($t,4)|at.call($t,5)<<8|at.call($t,6)<<16|at.call($t,7)<<24)>>>0)},d.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},d.prototype.zzEncode=function(){var $t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$t)>>>0,this.lo=(this.lo<<1^$t)>>>0,this},d.prototype.zzDecode=function(){var $t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$t)>>>0,this.hi=(this.hi>>>1^$t)>>>0,this},d.prototype.length=function(){var $t=this.lo,vt=(this.lo>>>28|this.hi<<4)>>>0,b=this.hi>>>24;return b===0?vt===0?$t<16384?$t<128?1:2:$t<2097152?3:4:vt<16384?vt<128?5:6:vt<2097152?7:8:b<128?9:10}}),Jt=me(a=>{var s=a;s.asPromise=Bs$1(),s.base64=Gs$1(),s.EventEmitter=zs$1(),s.float=Xs$1(),s.inquire=Ks$1(),s.utf8=Zs$1(),s.pool=eu$1(),s.LongBits=ru$1(),s.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),s.global=s.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||a,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(et){return typeof et=="number"&&isFinite(et)&&Math.floor(et)===et},s.isString=function(et){return typeof et=="string"||et instanceof String},s.isObject=function(et){return et&&typeof et=="object"},s.isset=s.isSet=function(et,g){var at=et[g];return at!=null&&et.hasOwnProperty(g)?typeof at!="object"||(Array.isArray(at)?at.length:Object.keys(at).length)>0:!1},s.Buffer=function(){try{var et=s.inquire("buffer").Buffer;return et.prototype.utf8Write?et:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(et){return typeof et=="number"?s.Buffer?s._Buffer_allocUnsafe(et):new s.Array(et):s.Buffer?s._Buffer_from(et):typeof Uint8Array>"u"?et:new Uint8Array(et)},s.Array=typeof Uint8Array<"u"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(et){return et?s.LongBits.from(et).toHash():s.LongBits.zeroHash},s.longFromHash=function(et,g){var at=s.LongBits.fromHash(et);return s.Long?s.Long.fromBits(at.lo,at.hi,g):at.toNumber(!!g)};function c(et,g,at){for(var $t=Object.keys(g),vt=0;vt<$t.length;++vt)(et[$t[vt]]===void 0||!at)&&(et[$t[vt]]=g[$t[vt]]);return et}s.merge=c,s.lcFirst=function(et){return et.charAt(0).toLowerCase()+et.substring(1)};function d(et){function g(at,$t){if(!(this instanceof g))return new g(at,$t);Object.defineProperty(this,"message",{get:function(){return at}}),Error.captureStackTrace?Error.captureStackTrace(this,g):Object.defineProperty(this,"stack",{value:new Error().stack||""}),$t&&c(this,$t)}return g.prototype=Object.create(Error.prototype,{constructor:{value:g,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return et},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),g}s.newError=d,s.ProtocolError=d("ProtocolError"),s.oneOfGetter=function(et){for(var g={},at=0;at<et.length;++at)g[et[at]]=1;return function(){for(var $t=Object.keys(this),vt=$t.length-1;vt>-1;--vt)if(g[$t[vt]]===1&&this[$t[vt]]!==void 0&&this[$t[vt]]!==null)return $t[vt]}},s.oneOfSetter=function(et){return function(g){for(var at=0;at<et.length;++at)et[at]!==g&&delete this[et[at]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var et=s.Buffer;if(!et){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=et.from!==Uint8Array.from&&et.from||function(g,at){return new et(g,at)},s._Buffer_allocUnsafe=et.allocUnsafe||function(g){return new et(g)}}}),si$1=me((a,s)=>{s.exports=pt;var c=Jt(),d,et=c.LongBits,g=c.base64,at=c.utf8;function $t(Gt,Kt,tr){this.fn=Gt,this.len=Kt,this.next=void 0,this.val=tr}function vt(){}function b(Gt){this.head=Gt.head,this.tail=Gt.tail,this.len=Gt.len,this.next=Gt.states}function pt(){this.len=0,this.head=new $t(vt,0,0),this.tail=this.head,this.states=null}var st=function(){return c.Buffer?function(){return(pt.create=function(){return new d})()}:function(){return new pt}};pt.create=st(),pt.alloc=function(Gt){return new c.Array(Gt)},c.Array!==Array&&(pt.alloc=c.pool(pt.alloc,c.Array.prototype.subarray)),pt.prototype._push=function(Gt,Kt,tr){return this.tail=this.tail.next=new $t(Gt,Kt,tr),this.len+=Kt,this};function wt(Gt,Kt,tr){Kt[tr]=Gt&255}function Tt(Gt,Kt,tr){for(;Gt>127;)Kt[tr++]=Gt&127|128,Gt>>>=7;Kt[tr]=Gt}function Ct(Gt,Kt){this.len=Gt,this.next=void 0,this.val=Kt}Ct.prototype=Object.create($t.prototype),Ct.prototype.fn=Tt,pt.prototype.uint32=function(Gt){return this.len+=(this.tail=this.tail.next=new Ct((Gt=Gt>>>0)<128?1:Gt<16384?2:Gt<2097152?3:Gt<268435456?4:5,Gt)).len,this},pt.prototype.int32=function(Gt){return Gt<0?this._push(jt,10,et.fromNumber(Gt)):this.uint32(Gt)},pt.prototype.sint32=function(Gt){return this.uint32((Gt<<1^Gt>>31)>>>0)};function jt(Gt,Kt,tr){for(;Gt.hi;)Kt[tr++]=Gt.lo&127|128,Gt.lo=(Gt.lo>>>7|Gt.hi<<25)>>>0,Gt.hi>>>=7;for(;Gt.lo>127;)Kt[tr++]=Gt.lo&127|128,Gt.lo=Gt.lo>>>7;Kt[tr++]=Gt.lo}pt.prototype.uint64=function(Gt){var Kt=et.from(Gt);return this._push(jt,Kt.length(),Kt)},pt.prototype.int64=pt.prototype.uint64,pt.prototype.sint64=function(Gt){var Kt=et.from(Gt).zzEncode();return this._push(jt,Kt.length(),Kt)},pt.prototype.bool=function(Gt){return this._push(wt,1,Gt?1:0)};function Lt(Gt,Kt,tr){Kt[tr]=Gt&255,Kt[tr+1]=Gt>>>8&255,Kt[tr+2]=Gt>>>16&255,Kt[tr+3]=Gt>>>24}pt.prototype.fixed32=function(Gt){return this._push(Lt,4,Gt>>>0)},pt.prototype.sfixed32=pt.prototype.fixed32,pt.prototype.fixed64=function(Gt){var Kt=et.from(Gt);return this._push(Lt,4,Kt.lo)._push(Lt,4,Kt.hi)},pt.prototype.sfixed64=pt.prototype.fixed64,pt.prototype.float=function(Gt){return this._push(c.float.writeFloatLE,4,Gt)},pt.prototype.double=function(Gt){return this._push(c.float.writeDoubleLE,8,Gt)};var Ht=c.Array.prototype.set?function(Gt,Kt,tr){Kt.set(Gt,tr)}:function(Gt,Kt,tr){for(var rr=0;rr<Gt.length;++rr)Kt[tr+rr]=Gt[rr]};pt.prototype.bytes=function(Gt){var Kt=Gt.length>>>0;if(!Kt)return this._push(wt,1,0);if(c.isString(Gt)){var tr=pt.alloc(Kt=g.length(Gt));g.decode(Gt,tr,0),Gt=tr}return this.uint32(Kt)._push(Ht,Kt,Gt)},pt.prototype.string=function(Gt){var Kt=at.length(Gt);return Kt?this.uint32(Kt)._push(at.write,Kt,Gt):this._push(wt,1,0)},pt.prototype.fork=function(){return this.states=new b(this),this.head=this.tail=new $t(vt,0,0),this.len=0,this},pt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new $t(vt,0,0),this.len=0),this},pt.prototype.ldelim=function(){var Gt=this.head,Kt=this.tail,tr=this.len;return this.reset().uint32(tr),tr&&(this.tail.next=Gt.next,this.tail=Kt,this.len+=tr),this},pt.prototype.finish=function(){for(var Gt=this.head.next,Kt=this.constructor.alloc(this.len),tr=0;Gt;)Gt.fn(Gt.val,Kt,tr),tr+=Gt.len,Gt=Gt.next;return Kt},pt._configure=function(Gt){d=Gt,pt.create=st(),d._configure()}}),cu$1=me((a,s)=>{s.exports=et;var c=si$1();(et.prototype=Object.create(c.prototype)).constructor=et;var d=Jt();function et(){c.call(this)}et._configure=function(){et.alloc=d._Buffer_allocUnsafe,et.writeBytesBuffer=d.Buffer&&d.Buffer.prototype instanceof Uint8Array&&d.Buffer.prototype.set.name==="set"?function(at,$t,vt){$t.set(at,vt)}:function(at,$t,vt){if(at.copy)at.copy($t,vt,0,at.length);else for(var b=0;b<at.length;)$t[vt++]=at[b++]}},et.prototype.bytes=function(at){d.isString(at)&&(at=d._Buffer_from(at,"base64"));var $t=at.length>>>0;return this.uint32($t),$t&&this._push(et.writeBytesBuffer,$t,at),this};function g(at,$t,vt){at.length<40?d.utf8.write(at,$t,vt):$t.utf8Write?$t.utf8Write(at,vt):$t.write(at,vt)}et.prototype.string=function(at){var $t=d.Buffer.byteLength(at);return this.uint32($t),$t&&this._push(g,$t,at),this},et._configure()}),fi$1=me((a,s)=>{s.exports=$t;var c=Jt(),d,et=c.LongBits,g=c.utf8;function at(Tt,Ct){return RangeError("index out of range: "+Tt.pos+" + "+(Ct||1)+" > "+Tt.len)}function $t(Tt){this.buf=Tt,this.pos=0,this.len=Tt.length}var vt=typeof Uint8Array<"u"?function(Tt){if(Tt instanceof Uint8Array||Array.isArray(Tt))return new $t(Tt);throw Error("illegal buffer")}:function(Tt){if(Array.isArray(Tt))return new $t(Tt);throw Error("illegal buffer")},b=function(){return c.Buffer?function(Tt){return($t.create=function(Ct){return c.Buffer.isBuffer(Ct)?new d(Ct):vt(Ct)})(Tt)}:vt};$t.create=b(),$t.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,$t.prototype.uint32=function(){var Tt=4294967295;return function(){if(Tt=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(Tt=(Tt|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(Tt=(Tt|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(Tt=(Tt|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(Tt=(Tt|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return Tt;if((this.pos+=5)>this.len)throw this.pos=this.len,at(this,10);return Tt}}(),$t.prototype.int32=function(){return this.uint32()|0},$t.prototype.sint32=function(){var Tt=this.uint32();return Tt>>>1^-(Tt&1)|0};function pt(){var Tt=new et(0,0),Ct=0;if(this.len-this.pos>4){for(;Ct<4;++Ct)if(Tt.lo=(Tt.lo|(this.buf[this.pos]&127)<<Ct*7)>>>0,this.buf[this.pos++]<128)return Tt;if(Tt.lo=(Tt.lo|(this.buf[this.pos]&127)<<28)>>>0,Tt.hi=(Tt.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return Tt;Ct=0}else{for(;Ct<3;++Ct){if(this.pos>=this.len)throw at(this);if(Tt.lo=(Tt.lo|(this.buf[this.pos]&127)<<Ct*7)>>>0,this.buf[this.pos++]<128)return Tt}return Tt.lo=(Tt.lo|(this.buf[this.pos++]&127)<<Ct*7)>>>0,Tt}if(this.len-this.pos>4){for(;Ct<5;++Ct)if(Tt.hi=(Tt.hi|(this.buf[this.pos]&127)<<Ct*7+3)>>>0,this.buf[this.pos++]<128)return Tt}else for(;Ct<5;++Ct){if(this.pos>=this.len)throw at(this);if(Tt.hi=(Tt.hi|(this.buf[this.pos]&127)<<Ct*7+3)>>>0,this.buf[this.pos++]<128)return Tt}throw Error("invalid varint encoding")}$t.prototype.bool=function(){return this.uint32()!==0};function st(Tt,Ct){return(Tt[Ct-4]|Tt[Ct-3]<<8|Tt[Ct-2]<<16|Tt[Ct-1]<<24)>>>0}$t.prototype.fixed32=function(){if(this.pos+4>this.len)throw at(this,4);return st(this.buf,this.pos+=4)},$t.prototype.sfixed32=function(){if(this.pos+4>this.len)throw at(this,4);return st(this.buf,this.pos+=4)|0};function wt(){if(this.pos+8>this.len)throw at(this,8);return new et(st(this.buf,this.pos+=4),st(this.buf,this.pos+=4))}$t.prototype.float=function(){if(this.pos+4>this.len)throw at(this,4);var Tt=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Tt},$t.prototype.double=function(){if(this.pos+8>this.len)throw at(this,4);var Tt=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Tt},$t.prototype.bytes=function(){var Tt=this.uint32(),Ct=this.pos,jt=this.pos+Tt;if(jt>this.len)throw at(this,Tt);if(this.pos+=Tt,Array.isArray(this.buf))return this.buf.slice(Ct,jt);if(Ct===jt){var Lt=c.Buffer;return Lt?Lt.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,Ct,jt)},$t.prototype.string=function(){var Tt=this.bytes();return g.read(Tt,0,Tt.length)},$t.prototype.skip=function(Tt){if(typeof Tt=="number"){if(this.pos+Tt>this.len)throw at(this,Tt);this.pos+=Tt}else do if(this.pos>=this.len)throw at(this);while(this.buf[this.pos++]&128);return this},$t.prototype.skipType=function(Tt){switch(Tt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Tt=this.uint32()&7)!==4;)this.skipType(Tt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Tt+" at offset "+this.pos)}return this},$t._configure=function(Tt){d=Tt,$t.create=b(),d._configure();var Ct=c.Long?"toLong":"toNumber";c.merge($t.prototype,{int64:function(){return pt.call(this)[Ct](!1)},uint64:function(){return pt.call(this)[Ct](!0)},sint64:function(){return pt.call(this).zzDecode()[Ct](!1)},fixed64:function(){return wt.call(this)[Ct](!0)},sfixed64:function(){return wt.call(this)[Ct](!1)}})}}),xu=me((a,s)=>{s.exports=et;var c=fi$1();(et.prototype=Object.create(c.prototype)).constructor=et;var d=Jt();function et(g){c.call(this,g)}et._configure=function(){d.Buffer&&(et.prototype._slice=d.Buffer.prototype.slice)},et.prototype.string=function(){var g=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+g,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+g,this.len))},et._configure()}),vu$1=me((a,s)=>{s.exports=d;var c=Jt();(d.prototype=Object.create(c.EventEmitter.prototype)).constructor=d;function d(et,g,at){if(typeof et!="function")throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=et,this.requestDelimited=!!g,this.responseDelimited=!!at}d.prototype.rpcCall=function et(g,at,$t,vt,b){if(!vt)throw TypeError("request must be specified");var pt=this;if(!b)return c.asPromise(et,pt,g,at,$t,vt);if(!pt.rpcImpl){setTimeout(function(){b(Error("already ended"))},0);return}try{return pt.rpcImpl(g,at[pt.requestDelimited?"encodeDelimited":"encode"](vt).finish(),function(st,wt){if(st)return pt.emit("error",st,g),b(st);if(wt===null){pt.end(!0);return}if(!(wt instanceof $t))try{wt=$t[pt.responseDelimited?"decodeDelimited":"decode"](wt)}catch(Tt){return pt.emit("error",Tt,g),b(Tt)}return pt.emit("data",wt,g),b(null,wt)})}catch(st){pt.emit("error",st,g),setTimeout(function(){b(st)},0);return}},d.prototype.end=function(et){return this.rpcImpl&&(et||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou$1=me(a=>{var s=a;s.Service=vu$1()}),Su$1=me((a,s)=>{s.exports={}}),Eu$1=me(a=>{var s=a;s.build="minimal",s.Writer=si$1(),s.BufferWriter=cu$1(),s.Reader=fi$1(),s.BufferReader=xu(),s.util=Jt(),s.rpc=Ou$1(),s.roots=Su$1(),s.configure=c;function c(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}c()}),Lu$1=me((a,s)=>{s.exports=Eu$1()}),Cr=me((a,s)=>{var c=Lu$1(),d=c.Reader,et=c.Writer,g=c.util,at=c.roots.default||(c.roots.default={});at.onnx=function(){var $t={};return $t.Version=function(){var vt={},b=Object.create(vt);return b[vt[0]="_START_VERSION"]=0,b[vt[1]="IR_VERSION_2017_10_10"]=1,b[vt[2]="IR_VERSION_2017_10_30"]=2,b[vt[3]="IR_VERSION_2017_11_3"]=3,b[vt[4]="IR_VERSION_2019_1_22"]=4,b[vt[5]="IR_VERSION_2019_3_18"]=5,b[vt[6]="IR_VERSION_2019_9_19"]=6,b[vt[7]="IR_VERSION_2020_5_8"]=7,b[vt[8]="IR_VERSION_2021_7_30"]=8,b[vt[9]="IR_VERSION"]=9,b}(),$t.AttributeProto=function(){function vt(b){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.name="",vt.prototype.refAttrName="",vt.prototype.docString="",vt.prototype.type=0,vt.prototype.f=0,vt.prototype.i=g.Long?g.Long.fromBits(0,0,!1):0,vt.prototype.s=g.newBuffer([]),vt.prototype.t=null,vt.prototype.g=null,vt.prototype.sparseTensor=null,vt.prototype.tp=null,vt.prototype.floats=g.emptyArray,vt.prototype.ints=g.emptyArray,vt.prototype.strings=g.emptyArray,vt.prototype.tensors=g.emptyArray,vt.prototype.graphs=g.emptyArray,vt.prototype.sparseTensors=g.emptyArray,vt.prototype.typeProtos=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.name!=null&&Object.hasOwnProperty.call(b,"name")&&pt.uint32(10).string(b.name),b.f!=null&&Object.hasOwnProperty.call(b,"f")&&pt.uint32(21).float(b.f),b.i!=null&&Object.hasOwnProperty.call(b,"i")&&pt.uint32(24).int64(b.i),b.s!=null&&Object.hasOwnProperty.call(b,"s")&&pt.uint32(34).bytes(b.s),b.t!=null&&Object.hasOwnProperty.call(b,"t")&&at.onnx.TensorProto.encode(b.t,pt.uint32(42).fork()).ldelim(),b.g!=null&&Object.hasOwnProperty.call(b,"g")&&at.onnx.GraphProto.encode(b.g,pt.uint32(50).fork()).ldelim(),b.floats!=null&&b.floats.length){pt.uint32(58).fork();for(var st=0;st<b.floats.length;++st)pt.float(b.floats[st]);pt.ldelim()}if(b.ints!=null&&b.ints.length){pt.uint32(66).fork();for(var st=0;st<b.ints.length;++st)pt.int64(b.ints[st]);pt.ldelim()}if(b.strings!=null&&b.strings.length)for(var st=0;st<b.strings.length;++st)pt.uint32(74).bytes(b.strings[st]);if(b.tensors!=null&&b.tensors.length)for(var st=0;st<b.tensors.length;++st)at.onnx.TensorProto.encode(b.tensors[st],pt.uint32(82).fork()).ldelim();if(b.graphs!=null&&b.graphs.length)for(var st=0;st<b.graphs.length;++st)at.onnx.GraphProto.encode(b.graphs[st],pt.uint32(90).fork()).ldelim();if(b.docString!=null&&Object.hasOwnProperty.call(b,"docString")&&pt.uint32(106).string(b.docString),b.tp!=null&&Object.hasOwnProperty.call(b,"tp")&&at.onnx.TypeProto.encode(b.tp,pt.uint32(114).fork()).ldelim(),b.typeProtos!=null&&b.typeProtos.length)for(var st=0;st<b.typeProtos.length;++st)at.onnx.TypeProto.encode(b.typeProtos[st],pt.uint32(122).fork()).ldelim();if(b.type!=null&&Object.hasOwnProperty.call(b,"type")&&pt.uint32(160).int32(b.type),b.refAttrName!=null&&Object.hasOwnProperty.call(b,"refAttrName")&&pt.uint32(170).string(b.refAttrName),b.sparseTensor!=null&&Object.hasOwnProperty.call(b,"sparseTensor")&&at.onnx.SparseTensorProto.encode(b.sparseTensor,pt.uint32(178).fork()).ldelim(),b.sparseTensors!=null&&b.sparseTensors.length)for(var st=0;st<b.sparseTensors.length;++st)at.onnx.SparseTensorProto.encode(b.sparseTensors[st],pt.uint32(186).fork()).ldelim();return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.AttributeProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.name=b.string();break}case 21:{wt.refAttrName=b.string();break}case 13:{wt.docString=b.string();break}case 20:{wt.type=b.int32();break}case 2:{wt.f=b.float();break}case 3:{wt.i=b.int64();break}case 4:{wt.s=b.bytes();break}case 5:{wt.t=at.onnx.TensorProto.decode(b,b.uint32());break}case 6:{wt.g=at.onnx.GraphProto.decode(b,b.uint32());break}case 22:{wt.sparseTensor=at.onnx.SparseTensorProto.decode(b,b.uint32());break}case 14:{wt.tp=at.onnx.TypeProto.decode(b,b.uint32());break}case 7:{if(wt.floats&&wt.floats.length||(wt.floats=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.floats.push(b.float());else wt.floats.push(b.float());break}case 8:{if(wt.ints&&wt.ints.length||(wt.ints=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.ints.push(b.int64());else wt.ints.push(b.int64());break}case 9:{wt.strings&&wt.strings.length||(wt.strings=[]),wt.strings.push(b.bytes());break}case 10:{wt.tensors&&wt.tensors.length||(wt.tensors=[]),wt.tensors.push(at.onnx.TensorProto.decode(b,b.uint32()));break}case 11:{wt.graphs&&wt.graphs.length||(wt.graphs=[]),wt.graphs.push(at.onnx.GraphProto.decode(b,b.uint32()));break}case 23:{wt.sparseTensors&&wt.sparseTensors.length||(wt.sparseTensors=[]),wt.sparseTensors.push(at.onnx.SparseTensorProto.decode(b,b.uint32()));break}case 15:{wt.typeProtos&&wt.typeProtos.length||(wt.typeProtos=[]),wt.typeProtos.push(at.onnx.TypeProto.decode(b,b.uint32()));break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.name!=null&&b.hasOwnProperty("name")&&!g.isString(b.name))return"name: string expected";if(b.refAttrName!=null&&b.hasOwnProperty("refAttrName")&&!g.isString(b.refAttrName))return"refAttrName: string expected";if(b.docString!=null&&b.hasOwnProperty("docString")&&!g.isString(b.docString))return"docString: string expected";if(b.type!=null&&b.hasOwnProperty("type"))switch(b.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(b.f!=null&&b.hasOwnProperty("f")&&typeof b.f!="number")return"f: number expected";if(b.i!=null&&b.hasOwnProperty("i")&&!g.isInteger(b.i)&&!(b.i&&g.isInteger(b.i.low)&&g.isInteger(b.i.high)))return"i: integer|Long expected";if(b.s!=null&&b.hasOwnProperty("s")&&!(b.s&&typeof b.s.length=="number"||g.isString(b.s)))return"s: buffer expected";if(b.t!=null&&b.hasOwnProperty("t")){var pt=at.onnx.TensorProto.verify(b.t);if(pt)return"t."+pt}if(b.g!=null&&b.hasOwnProperty("g")){var pt=at.onnx.GraphProto.verify(b.g);if(pt)return"g."+pt}if(b.sparseTensor!=null&&b.hasOwnProperty("sparseTensor")){var pt=at.onnx.SparseTensorProto.verify(b.sparseTensor);if(pt)return"sparseTensor."+pt}if(b.tp!=null&&b.hasOwnProperty("tp")){var pt=at.onnx.TypeProto.verify(b.tp);if(pt)return"tp."+pt}if(b.floats!=null&&b.hasOwnProperty("floats")){if(!Array.isArray(b.floats))return"floats: array expected";for(var st=0;st<b.floats.length;++st)if(typeof b.floats[st]!="number")return"floats: number[] expected"}if(b.ints!=null&&b.hasOwnProperty("ints")){if(!Array.isArray(b.ints))return"ints: array expected";for(var st=0;st<b.ints.length;++st)if(!g.isInteger(b.ints[st])&&!(b.ints[st]&&g.isInteger(b.ints[st].low)&&g.isInteger(b.ints[st].high)))return"ints: integer|Long[] expected"}if(b.strings!=null&&b.hasOwnProperty("strings")){if(!Array.isArray(b.strings))return"strings: array expected";for(var st=0;st<b.strings.length;++st)if(!(b.strings[st]&&typeof b.strings[st].length=="number"||g.isString(b.strings[st])))return"strings: buffer[] expected"}if(b.tensors!=null&&b.hasOwnProperty("tensors")){if(!Array.isArray(b.tensors))return"tensors: array expected";for(var st=0;st<b.tensors.length;++st){var pt=at.onnx.TensorProto.verify(b.tensors[st]);if(pt)return"tensors."+pt}}if(b.graphs!=null&&b.hasOwnProperty("graphs")){if(!Array.isArray(b.graphs))return"graphs: array expected";for(var st=0;st<b.graphs.length;++st){var pt=at.onnx.GraphProto.verify(b.graphs[st]);if(pt)return"graphs."+pt}}if(b.sparseTensors!=null&&b.hasOwnProperty("sparseTensors")){if(!Array.isArray(b.sparseTensors))return"sparseTensors: array expected";for(var st=0;st<b.sparseTensors.length;++st){var pt=at.onnx.SparseTensorProto.verify(b.sparseTensors[st]);if(pt)return"sparseTensors."+pt}}if(b.typeProtos!=null&&b.hasOwnProperty("typeProtos")){if(!Array.isArray(b.typeProtos))return"typeProtos: array expected";for(var st=0;st<b.typeProtos.length;++st){var pt=at.onnx.TypeProto.verify(b.typeProtos[st]);if(pt)return"typeProtos."+pt}}return null},vt.fromObject=function(b){if(b instanceof at.onnx.AttributeProto)return b;var pt=new at.onnx.AttributeProto;switch(b.name!=null&&(pt.name=String(b.name)),b.refAttrName!=null&&(pt.refAttrName=String(b.refAttrName)),b.docString!=null&&(pt.docString=String(b.docString)),b.type){default:if(typeof b.type=="number"){pt.type=b.type;break}break;case"UNDEFINED":case 0:pt.type=0;break;case"FLOAT":case 1:pt.type=1;break;case"INT":case 2:pt.type=2;break;case"STRING":case 3:pt.type=3;break;case"TENSOR":case 4:pt.type=4;break;case"GRAPH":case 5:pt.type=5;break;case"SPARSE_TENSOR":case 11:pt.type=11;break;case"TYPE_PROTO":case 13:pt.type=13;break;case"FLOATS":case 6:pt.type=6;break;case"INTS":case 7:pt.type=7;break;case"STRINGS":case 8:pt.type=8;break;case"TENSORS":case 9:pt.type=9;break;case"GRAPHS":case 10:pt.type=10;break;case"SPARSE_TENSORS":case 12:pt.type=12;break;case"TYPE_PROTOS":case 14:pt.type=14;break}if(b.f!=null&&(pt.f=Number(b.f)),b.i!=null&&(g.Long?(pt.i=g.Long.fromValue(b.i)).unsigned=!1:typeof b.i=="string"?pt.i=parseInt(b.i,10):typeof b.i=="number"?pt.i=b.i:typeof b.i=="object"&&(pt.i=new g.LongBits(b.i.low>>>0,b.i.high>>>0).toNumber())),b.s!=null&&(typeof b.s=="string"?g.base64.decode(b.s,pt.s=g.newBuffer(g.base64.length(b.s)),0):b.s.length>=0&&(pt.s=b.s)),b.t!=null){if(typeof b.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");pt.t=at.onnx.TensorProto.fromObject(b.t)}if(b.g!=null){if(typeof b.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");pt.g=at.onnx.GraphProto.fromObject(b.g)}if(b.sparseTensor!=null){if(typeof b.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");pt.sparseTensor=at.onnx.SparseTensorProto.fromObject(b.sparseTensor)}if(b.tp!=null){if(typeof b.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");pt.tp=at.onnx.TypeProto.fromObject(b.tp)}if(b.floats){if(!Array.isArray(b.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");pt.floats=[];for(var st=0;st<b.floats.length;++st)pt.floats[st]=Number(b.floats[st])}if(b.ints){if(!Array.isArray(b.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");pt.ints=[];for(var st=0;st<b.ints.length;++st)g.Long?(pt.ints[st]=g.Long.fromValue(b.ints[st])).unsigned=!1:typeof b.ints[st]=="string"?pt.ints[st]=parseInt(b.ints[st],10):typeof b.ints[st]=="number"?pt.ints[st]=b.ints[st]:typeof b.ints[st]=="object"&&(pt.ints[st]=new g.LongBits(b.ints[st].low>>>0,b.ints[st].high>>>0).toNumber())}if(b.strings){if(!Array.isArray(b.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");pt.strings=[];for(var st=0;st<b.strings.length;++st)typeof b.strings[st]=="string"?g.base64.decode(b.strings[st],pt.strings[st]=g.newBuffer(g.base64.length(b.strings[st])),0):b.strings[st].length>=0&&(pt.strings[st]=b.strings[st])}if(b.tensors){if(!Array.isArray(b.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");pt.tensors=[];for(var st=0;st<b.tensors.length;++st){if(typeof b.tensors[st]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");pt.tensors[st]=at.onnx.TensorProto.fromObject(b.tensors[st])}}if(b.graphs){if(!Array.isArray(b.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");pt.graphs=[];for(var st=0;st<b.graphs.length;++st){if(typeof b.graphs[st]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");pt.graphs[st]=at.onnx.GraphProto.fromObject(b.graphs[st])}}if(b.sparseTensors){if(!Array.isArray(b.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");pt.sparseTensors=[];for(var st=0;st<b.sparseTensors.length;++st){if(typeof b.sparseTensors[st]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");pt.sparseTensors[st]=at.onnx.SparseTensorProto.fromObject(b.sparseTensors[st])}}if(b.typeProtos){if(!Array.isArray(b.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");pt.typeProtos=[];for(var st=0;st<b.typeProtos.length;++st){if(typeof b.typeProtos[st]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");pt.typeProtos[st]=at.onnx.TypeProto.fromObject(b.typeProtos[st])}}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.floats=[],st.ints=[],st.strings=[],st.tensors=[],st.graphs=[],st.typeProtos=[],st.sparseTensors=[]),pt.defaults){if(st.name="",st.f=0,g.Long){var wt=new g.Long(0,0,!1);st.i=pt.longs===String?wt.toString():pt.longs===Number?wt.toNumber():wt}else st.i=pt.longs===String?"0":0;pt.bytes===String?st.s="":(st.s=[],pt.bytes!==Array&&(st.s=g.newBuffer(st.s))),st.t=null,st.g=null,st.docString="",st.tp=null,st.type=pt.enums===String?"UNDEFINED":0,st.refAttrName="",st.sparseTensor=null}if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.f!=null&&b.hasOwnProperty("f")&&(st.f=pt.json&&!isFinite(b.f)?String(b.f):b.f),b.i!=null&&b.hasOwnProperty("i")&&(typeof b.i=="number"?st.i=pt.longs===String?String(b.i):b.i:st.i=pt.longs===String?g.Long.prototype.toString.call(b.i):pt.longs===Number?new g.LongBits(b.i.low>>>0,b.i.high>>>0).toNumber():b.i),b.s!=null&&b.hasOwnProperty("s")&&(st.s=pt.bytes===String?g.base64.encode(b.s,0,b.s.length):pt.bytes===Array?Array.prototype.slice.call(b.s):b.s),b.t!=null&&b.hasOwnProperty("t")&&(st.t=at.onnx.TensorProto.toObject(b.t,pt)),b.g!=null&&b.hasOwnProperty("g")&&(st.g=at.onnx.GraphProto.toObject(b.g,pt)),b.floats&&b.floats.length){st.floats=[];for(var Tt=0;Tt<b.floats.length;++Tt)st.floats[Tt]=pt.json&&!isFinite(b.floats[Tt])?String(b.floats[Tt]):b.floats[Tt]}if(b.ints&&b.ints.length){st.ints=[];for(var Tt=0;Tt<b.ints.length;++Tt)typeof b.ints[Tt]=="number"?st.ints[Tt]=pt.longs===String?String(b.ints[Tt]):b.ints[Tt]:st.ints[Tt]=pt.longs===String?g.Long.prototype.toString.call(b.ints[Tt]):pt.longs===Number?new g.LongBits(b.ints[Tt].low>>>0,b.ints[Tt].high>>>0).toNumber():b.ints[Tt]}if(b.strings&&b.strings.length){st.strings=[];for(var Tt=0;Tt<b.strings.length;++Tt)st.strings[Tt]=pt.bytes===String?g.base64.encode(b.strings[Tt],0,b.strings[Tt].length):pt.bytes===Array?Array.prototype.slice.call(b.strings[Tt]):b.strings[Tt]}if(b.tensors&&b.tensors.length){st.tensors=[];for(var Tt=0;Tt<b.tensors.length;++Tt)st.tensors[Tt]=at.onnx.TensorProto.toObject(b.tensors[Tt],pt)}if(b.graphs&&b.graphs.length){st.graphs=[];for(var Tt=0;Tt<b.graphs.length;++Tt)st.graphs[Tt]=at.onnx.GraphProto.toObject(b.graphs[Tt],pt)}if(b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.tp!=null&&b.hasOwnProperty("tp")&&(st.tp=at.onnx.TypeProto.toObject(b.tp,pt)),b.typeProtos&&b.typeProtos.length){st.typeProtos=[];for(var Tt=0;Tt<b.typeProtos.length;++Tt)st.typeProtos[Tt]=at.onnx.TypeProto.toObject(b.typeProtos[Tt],pt)}if(b.type!=null&&b.hasOwnProperty("type")&&(st.type=pt.enums===String?at.onnx.AttributeProto.AttributeType[b.type]===void 0?b.type:at.onnx.AttributeProto.AttributeType[b.type]:b.type),b.refAttrName!=null&&b.hasOwnProperty("refAttrName")&&(st.refAttrName=b.refAttrName),b.sparseTensor!=null&&b.hasOwnProperty("sparseTensor")&&(st.sparseTensor=at.onnx.SparseTensorProto.toObject(b.sparseTensor,pt)),b.sparseTensors&&b.sparseTensors.length){st.sparseTensors=[];for(var Tt=0;Tt<b.sparseTensors.length;++Tt)st.sparseTensors[Tt]=at.onnx.SparseTensorProto.toObject(b.sparseTensors[Tt],pt)}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.AttributeProto"},vt.AttributeType=function(){var b={},pt=Object.create(b);return pt[b[0]="UNDEFINED"]=0,pt[b[1]="FLOAT"]=1,pt[b[2]="INT"]=2,pt[b[3]="STRING"]=3,pt[b[4]="TENSOR"]=4,pt[b[5]="GRAPH"]=5,pt[b[11]="SPARSE_TENSOR"]=11,pt[b[13]="TYPE_PROTO"]=13,pt[b[6]="FLOATS"]=6,pt[b[7]="INTS"]=7,pt[b[8]="STRINGS"]=8,pt[b[9]="TENSORS"]=9,pt[b[10]="GRAPHS"]=10,pt[b[12]="SPARSE_TENSORS"]=12,pt[b[14]="TYPE_PROTOS"]=14,pt}(),vt}(),$t.ValueInfoProto=function(){function vt(b){if(b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.name="",vt.prototype.type=null,vt.prototype.docString="",vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){return pt||(pt=et.create()),b.name!=null&&Object.hasOwnProperty.call(b,"name")&&pt.uint32(10).string(b.name),b.type!=null&&Object.hasOwnProperty.call(b,"type")&&at.onnx.TypeProto.encode(b.type,pt.uint32(18).fork()).ldelim(),b.docString!=null&&Object.hasOwnProperty.call(b,"docString")&&pt.uint32(26).string(b.docString),pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.ValueInfoProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.name=b.string();break}case 2:{wt.type=at.onnx.TypeProto.decode(b,b.uint32());break}case 3:{wt.docString=b.string();break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.name!=null&&b.hasOwnProperty("name")&&!g.isString(b.name))return"name: string expected";if(b.type!=null&&b.hasOwnProperty("type")){var pt=at.onnx.TypeProto.verify(b.type);if(pt)return"type."+pt}return b.docString!=null&&b.hasOwnProperty("docString")&&!g.isString(b.docString)?"docString: string expected":null},vt.fromObject=function(b){if(b instanceof at.onnx.ValueInfoProto)return b;var pt=new at.onnx.ValueInfoProto;if(b.name!=null&&(pt.name=String(b.name)),b.type!=null){if(typeof b.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");pt.type=at.onnx.TypeProto.fromObject(b.type)}return b.docString!=null&&(pt.docString=String(b.docString)),pt},vt.toObject=function(b,pt){pt||(pt={});var st={};return pt.defaults&&(st.name="",st.type=null,st.docString=""),b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.type!=null&&b.hasOwnProperty("type")&&(st.type=at.onnx.TypeProto.toObject(b.type,pt)),b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.ValueInfoProto"},vt}(),$t.NodeProto=function(){function vt(b){if(this.input=[],this.output=[],this.attribute=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.input=g.emptyArray,vt.prototype.output=g.emptyArray,vt.prototype.name="",vt.prototype.opType="",vt.prototype.domain="",vt.prototype.attribute=g.emptyArray,vt.prototype.docString="",vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.input!=null&&b.input.length)for(var st=0;st<b.input.length;++st)pt.uint32(10).string(b.input[st]);if(b.output!=null&&b.output.length)for(var st=0;st<b.output.length;++st)pt.uint32(18).string(b.output[st]);if(b.name!=null&&Object.hasOwnProperty.call(b,"name")&&pt.uint32(26).string(b.name),b.opType!=null&&Object.hasOwnProperty.call(b,"opType")&&pt.uint32(34).string(b.opType),b.attribute!=null&&b.attribute.length)for(var st=0;st<b.attribute.length;++st)at.onnx.AttributeProto.encode(b.attribute[st],pt.uint32(42).fork()).ldelim();return b.docString!=null&&Object.hasOwnProperty.call(b,"docString")&&pt.uint32(50).string(b.docString),b.domain!=null&&Object.hasOwnProperty.call(b,"domain")&&pt.uint32(58).string(b.domain),pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.NodeProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.input&&wt.input.length||(wt.input=[]),wt.input.push(b.string());break}case 2:{wt.output&&wt.output.length||(wt.output=[]),wt.output.push(b.string());break}case 3:{wt.name=b.string();break}case 4:{wt.opType=b.string();break}case 7:{wt.domain=b.string();break}case 5:{wt.attribute&&wt.attribute.length||(wt.attribute=[]),wt.attribute.push(at.onnx.AttributeProto.decode(b,b.uint32()));break}case 6:{wt.docString=b.string();break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.input!=null&&b.hasOwnProperty("input")){if(!Array.isArray(b.input))return"input: array expected";for(var pt=0;pt<b.input.length;++pt)if(!g.isString(b.input[pt]))return"input: string[] expected"}if(b.output!=null&&b.hasOwnProperty("output")){if(!Array.isArray(b.output))return"output: array expected";for(var pt=0;pt<b.output.length;++pt)if(!g.isString(b.output[pt]))return"output: string[] expected"}if(b.name!=null&&b.hasOwnProperty("name")&&!g.isString(b.name))return"name: string expected";if(b.opType!=null&&b.hasOwnProperty("opType")&&!g.isString(b.opType))return"opType: string expected";if(b.domain!=null&&b.hasOwnProperty("domain")&&!g.isString(b.domain))return"domain: string expected";if(b.attribute!=null&&b.hasOwnProperty("attribute")){if(!Array.isArray(b.attribute))return"attribute: array expected";for(var pt=0;pt<b.attribute.length;++pt){var st=at.onnx.AttributeProto.verify(b.attribute[pt]);if(st)return"attribute."+st}}return b.docString!=null&&b.hasOwnProperty("docString")&&!g.isString(b.docString)?"docString: string expected":null},vt.fromObject=function(b){if(b instanceof at.onnx.NodeProto)return b;var pt=new at.onnx.NodeProto;if(b.input){if(!Array.isArray(b.input))throw TypeError(".onnx.NodeProto.input: array expected");pt.input=[];for(var st=0;st<b.input.length;++st)pt.input[st]=String(b.input[st])}if(b.output){if(!Array.isArray(b.output))throw TypeError(".onnx.NodeProto.output: array expected");pt.output=[];for(var st=0;st<b.output.length;++st)pt.output[st]=String(b.output[st])}if(b.name!=null&&(pt.name=String(b.name)),b.opType!=null&&(pt.opType=String(b.opType)),b.domain!=null&&(pt.domain=String(b.domain)),b.attribute){if(!Array.isArray(b.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");pt.attribute=[];for(var st=0;st<b.attribute.length;++st){if(typeof b.attribute[st]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");pt.attribute[st]=at.onnx.AttributeProto.fromObject(b.attribute[st])}}return b.docString!=null&&(pt.docString=String(b.docString)),pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.input=[],st.output=[],st.attribute=[]),pt.defaults&&(st.name="",st.opType="",st.docString="",st.domain=""),b.input&&b.input.length){st.input=[];for(var wt=0;wt<b.input.length;++wt)st.input[wt]=b.input[wt]}if(b.output&&b.output.length){st.output=[];for(var wt=0;wt<b.output.length;++wt)st.output[wt]=b.output[wt]}if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.opType!=null&&b.hasOwnProperty("opType")&&(st.opType=b.opType),b.attribute&&b.attribute.length){st.attribute=[];for(var wt=0;wt<b.attribute.length;++wt)st.attribute[wt]=at.onnx.AttributeProto.toObject(b.attribute[wt],pt)}return b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.domain!=null&&b.hasOwnProperty("domain")&&(st.domain=b.domain),st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.NodeProto"},vt}(),$t.TrainingInfoProto=function(){function vt(b){if(this.initializationBinding=[],this.updateBinding=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.initialization=null,vt.prototype.algorithm=null,vt.prototype.initializationBinding=g.emptyArray,vt.prototype.updateBinding=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.initialization!=null&&Object.hasOwnProperty.call(b,"initialization")&&at.onnx.GraphProto.encode(b.initialization,pt.uint32(10).fork()).ldelim(),b.algorithm!=null&&Object.hasOwnProperty.call(b,"algorithm")&&at.onnx.GraphProto.encode(b.algorithm,pt.uint32(18).fork()).ldelim(),b.initializationBinding!=null&&b.initializationBinding.length)for(var st=0;st<b.initializationBinding.length;++st)at.onnx.StringStringEntryProto.encode(b.initializationBinding[st],pt.uint32(26).fork()).ldelim();if(b.updateBinding!=null&&b.updateBinding.length)for(var st=0;st<b.updateBinding.length;++st)at.onnx.StringStringEntryProto.encode(b.updateBinding[st],pt.uint32(34).fork()).ldelim();return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.TrainingInfoProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.initialization=at.onnx.GraphProto.decode(b,b.uint32());break}case 2:{wt.algorithm=at.onnx.GraphProto.decode(b,b.uint32());break}case 3:{wt.initializationBinding&&wt.initializationBinding.length||(wt.initializationBinding=[]),wt.initializationBinding.push(at.onnx.StringStringEntryProto.decode(b,b.uint32()));break}case 4:{wt.updateBinding&&wt.updateBinding.length||(wt.updateBinding=[]),wt.updateBinding.push(at.onnx.StringStringEntryProto.decode(b,b.uint32()));break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.initialization!=null&&b.hasOwnProperty("initialization")){var pt=at.onnx.GraphProto.verify(b.initialization);if(pt)return"initialization."+pt}if(b.algorithm!=null&&b.hasOwnProperty("algorithm")){var pt=at.onnx.GraphProto.verify(b.algorithm);if(pt)return"algorithm."+pt}if(b.initializationBinding!=null&&b.hasOwnProperty("initializationBinding")){if(!Array.isArray(b.initializationBinding))return"initializationBinding: array expected";for(var st=0;st<b.initializationBinding.length;++st){var pt=at.onnx.StringStringEntryProto.verify(b.initializationBinding[st]);if(pt)return"initializationBinding."+pt}}if(b.updateBinding!=null&&b.hasOwnProperty("updateBinding")){if(!Array.isArray(b.updateBinding))return"updateBinding: array expected";for(var st=0;st<b.updateBinding.length;++st){var pt=at.onnx.StringStringEntryProto.verify(b.updateBinding[st]);if(pt)return"updateBinding."+pt}}return null},vt.fromObject=function(b){if(b instanceof at.onnx.TrainingInfoProto)return b;var pt=new at.onnx.TrainingInfoProto;if(b.initialization!=null){if(typeof b.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");pt.initialization=at.onnx.GraphProto.fromObject(b.initialization)}if(b.algorithm!=null){if(typeof b.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");pt.algorithm=at.onnx.GraphProto.fromObject(b.algorithm)}if(b.initializationBinding){if(!Array.isArray(b.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");pt.initializationBinding=[];for(var st=0;st<b.initializationBinding.length;++st){if(typeof b.initializationBinding[st]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");pt.initializationBinding[st]=at.onnx.StringStringEntryProto.fromObject(b.initializationBinding[st])}}if(b.updateBinding){if(!Array.isArray(b.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");pt.updateBinding=[];for(var st=0;st<b.updateBinding.length;++st){if(typeof b.updateBinding[st]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");pt.updateBinding[st]=at.onnx.StringStringEntryProto.fromObject(b.updateBinding[st])}}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.initializationBinding=[],st.updateBinding=[]),pt.defaults&&(st.initialization=null,st.algorithm=null),b.initialization!=null&&b.hasOwnProperty("initialization")&&(st.initialization=at.onnx.GraphProto.toObject(b.initialization,pt)),b.algorithm!=null&&b.hasOwnProperty("algorithm")&&(st.algorithm=at.onnx.GraphProto.toObject(b.algorithm,pt)),b.initializationBinding&&b.initializationBinding.length){st.initializationBinding=[];for(var wt=0;wt<b.initializationBinding.length;++wt)st.initializationBinding[wt]=at.onnx.StringStringEntryProto.toObject(b.initializationBinding[wt],pt)}if(b.updateBinding&&b.updateBinding.length){st.updateBinding=[];for(var wt=0;wt<b.updateBinding.length;++wt)st.updateBinding[wt]=at.onnx.StringStringEntryProto.toObject(b.updateBinding[wt],pt)}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.TrainingInfoProto"},vt}(),$t.ModelProto=function(){function vt(b){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.irVersion=g.Long?g.Long.fromBits(0,0,!1):0,vt.prototype.opsetImport=g.emptyArray,vt.prototype.producerName="",vt.prototype.producerVersion="",vt.prototype.domain="",vt.prototype.modelVersion=g.Long?g.Long.fromBits(0,0,!1):0,vt.prototype.docString="",vt.prototype.graph=null,vt.prototype.metadataProps=g.emptyArray,vt.prototype.trainingInfo=g.emptyArray,vt.prototype.functions=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.irVersion!=null&&Object.hasOwnProperty.call(b,"irVersion")&&pt.uint32(8).int64(b.irVersion),b.producerName!=null&&Object.hasOwnProperty.call(b,"producerName")&&pt.uint32(18).string(b.producerName),b.producerVersion!=null&&Object.hasOwnProperty.call(b,"producerVersion")&&pt.uint32(26).string(b.producerVersion),b.domain!=null&&Object.hasOwnProperty.call(b,"domain")&&pt.uint32(34).string(b.domain),b.modelVersion!=null&&Object.hasOwnProperty.call(b,"modelVersion")&&pt.uint32(40).int64(b.modelVersion),b.docString!=null&&Object.hasOwnProperty.call(b,"docString")&&pt.uint32(50).string(b.docString),b.graph!=null&&Object.hasOwnProperty.call(b,"graph")&&at.onnx.GraphProto.encode(b.graph,pt.uint32(58).fork()).ldelim(),b.opsetImport!=null&&b.opsetImport.length)for(var st=0;st<b.opsetImport.length;++st)at.onnx.OperatorSetIdProto.encode(b.opsetImport[st],pt.uint32(66).fork()).ldelim();if(b.metadataProps!=null&&b.metadataProps.length)for(var st=0;st<b.metadataProps.length;++st)at.onnx.StringStringEntryProto.encode(b.metadataProps[st],pt.uint32(114).fork()).ldelim();if(b.trainingInfo!=null&&b.trainingInfo.length)for(var st=0;st<b.trainingInfo.length;++st)at.onnx.TrainingInfoProto.encode(b.trainingInfo[st],pt.uint32(162).fork()).ldelim();if(b.functions!=null&&b.functions.length)for(var st=0;st<b.functions.length;++st)at.onnx.FunctionProto.encode(b.functions[st],pt.uint32(202).fork()).ldelim();return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.ModelProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.irVersion=b.int64();break}case 8:{wt.opsetImport&&wt.opsetImport.length||(wt.opsetImport=[]),wt.opsetImport.push(at.onnx.OperatorSetIdProto.decode(b,b.uint32()));break}case 2:{wt.producerName=b.string();break}case 3:{wt.producerVersion=b.string();break}case 4:{wt.domain=b.string();break}case 5:{wt.modelVersion=b.int64();break}case 6:{wt.docString=b.string();break}case 7:{wt.graph=at.onnx.GraphProto.decode(b,b.uint32());break}case 14:{wt.metadataProps&&wt.metadataProps.length||(wt.metadataProps=[]),wt.metadataProps.push(at.onnx.StringStringEntryProto.decode(b,b.uint32()));break}case 20:{wt.trainingInfo&&wt.trainingInfo.length||(wt.trainingInfo=[]),wt.trainingInfo.push(at.onnx.TrainingInfoProto.decode(b,b.uint32()));break}case 25:{wt.functions&&wt.functions.length||(wt.functions=[]),wt.functions.push(at.onnx.FunctionProto.decode(b,b.uint32()));break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.irVersion!=null&&b.hasOwnProperty("irVersion")&&!g.isInteger(b.irVersion)&&!(b.irVersion&&g.isInteger(b.irVersion.low)&&g.isInteger(b.irVersion.high)))return"irVersion: integer|Long expected";if(b.opsetImport!=null&&b.hasOwnProperty("opsetImport")){if(!Array.isArray(b.opsetImport))return"opsetImport: array expected";for(var pt=0;pt<b.opsetImport.length;++pt){var st=at.onnx.OperatorSetIdProto.verify(b.opsetImport[pt]);if(st)return"opsetImport."+st}}if(b.producerName!=null&&b.hasOwnProperty("producerName")&&!g.isString(b.producerName))return"producerName: string expected";if(b.producerVersion!=null&&b.hasOwnProperty("producerVersion")&&!g.isString(b.producerVersion))return"producerVersion: string expected";if(b.domain!=null&&b.hasOwnProperty("domain")&&!g.isString(b.domain))return"domain: string expected";if(b.modelVersion!=null&&b.hasOwnProperty("modelVersion")&&!g.isInteger(b.modelVersion)&&!(b.modelVersion&&g.isInteger(b.modelVersion.low)&&g.isInteger(b.modelVersion.high)))return"modelVersion: integer|Long expected";if(b.docString!=null&&b.hasOwnProperty("docString")&&!g.isString(b.docString))return"docString: string expected";if(b.graph!=null&&b.hasOwnProperty("graph")){var st=at.onnx.GraphProto.verify(b.graph);if(st)return"graph."+st}if(b.metadataProps!=null&&b.hasOwnProperty("metadataProps")){if(!Array.isArray(b.metadataProps))return"metadataProps: array expected";for(var pt=0;pt<b.metadataProps.length;++pt){var st=at.onnx.StringStringEntryProto.verify(b.metadataProps[pt]);if(st)return"metadataProps."+st}}if(b.trainingInfo!=null&&b.hasOwnProperty("trainingInfo")){if(!Array.isArray(b.trainingInfo))return"trainingInfo: array expected";for(var pt=0;pt<b.trainingInfo.length;++pt){var st=at.onnx.TrainingInfoProto.verify(b.trainingInfo[pt]);if(st)return"trainingInfo."+st}}if(b.functions!=null&&b.hasOwnProperty("functions")){if(!Array.isArray(b.functions))return"functions: array expected";for(var pt=0;pt<b.functions.length;++pt){var st=at.onnx.FunctionProto.verify(b.functions[pt]);if(st)return"functions."+st}}return null},vt.fromObject=function(b){if(b instanceof at.onnx.ModelProto)return b;var pt=new at.onnx.ModelProto;if(b.irVersion!=null&&(g.Long?(pt.irVersion=g.Long.fromValue(b.irVersion)).unsigned=!1:typeof b.irVersion=="string"?pt.irVersion=parseInt(b.irVersion,10):typeof b.irVersion=="number"?pt.irVersion=b.irVersion:typeof b.irVersion=="object"&&(pt.irVersion=new g.LongBits(b.irVersion.low>>>0,b.irVersion.high>>>0).toNumber())),b.opsetImport){if(!Array.isArray(b.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");pt.opsetImport=[];for(var st=0;st<b.opsetImport.length;++st){if(typeof b.opsetImport[st]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");pt.opsetImport[st]=at.onnx.OperatorSetIdProto.fromObject(b.opsetImport[st])}}if(b.producerName!=null&&(pt.producerName=String(b.producerName)),b.producerVersion!=null&&(pt.producerVersion=String(b.producerVersion)),b.domain!=null&&(pt.domain=String(b.domain)),b.modelVersion!=null&&(g.Long?(pt.modelVersion=g.Long.fromValue(b.modelVersion)).unsigned=!1:typeof b.modelVersion=="string"?pt.modelVersion=parseInt(b.modelVersion,10):typeof b.modelVersion=="number"?pt.modelVersion=b.modelVersion:typeof b.modelVersion=="object"&&(pt.modelVersion=new g.LongBits(b.modelVersion.low>>>0,b.modelVersion.high>>>0).toNumber())),b.docString!=null&&(pt.docString=String(b.docString)),b.graph!=null){if(typeof b.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");pt.graph=at.onnx.GraphProto.fromObject(b.graph)}if(b.metadataProps){if(!Array.isArray(b.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");pt.metadataProps=[];for(var st=0;st<b.metadataProps.length;++st){if(typeof b.metadataProps[st]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");pt.metadataProps[st]=at.onnx.StringStringEntryProto.fromObject(b.metadataProps[st])}}if(b.trainingInfo){if(!Array.isArray(b.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");pt.trainingInfo=[];for(var st=0;st<b.trainingInfo.length;++st){if(typeof b.trainingInfo[st]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");pt.trainingInfo[st]=at.onnx.TrainingInfoProto.fromObject(b.trainingInfo[st])}}if(b.functions){if(!Array.isArray(b.functions))throw TypeError(".onnx.ModelProto.functions: array expected");pt.functions=[];for(var st=0;st<b.functions.length;++st){if(typeof b.functions[st]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");pt.functions[st]=at.onnx.FunctionProto.fromObject(b.functions[st])}}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.opsetImport=[],st.metadataProps=[],st.trainingInfo=[],st.functions=[]),pt.defaults){if(g.Long){var wt=new g.Long(0,0,!1);st.irVersion=pt.longs===String?wt.toString():pt.longs===Number?wt.toNumber():wt}else st.irVersion=pt.longs===String?"0":0;if(st.producerName="",st.producerVersion="",st.domain="",g.Long){var wt=new g.Long(0,0,!1);st.modelVersion=pt.longs===String?wt.toString():pt.longs===Number?wt.toNumber():wt}else st.modelVersion=pt.longs===String?"0":0;st.docString="",st.graph=null}if(b.irVersion!=null&&b.hasOwnProperty("irVersion")&&(typeof b.irVersion=="number"?st.irVersion=pt.longs===String?String(b.irVersion):b.irVersion:st.irVersion=pt.longs===String?g.Long.prototype.toString.call(b.irVersion):pt.longs===Number?new g.LongBits(b.irVersion.low>>>0,b.irVersion.high>>>0).toNumber():b.irVersion),b.producerName!=null&&b.hasOwnProperty("producerName")&&(st.producerName=b.producerName),b.producerVersion!=null&&b.hasOwnProperty("producerVersion")&&(st.producerVersion=b.producerVersion),b.domain!=null&&b.hasOwnProperty("domain")&&(st.domain=b.domain),b.modelVersion!=null&&b.hasOwnProperty("modelVersion")&&(typeof b.modelVersion=="number"?st.modelVersion=pt.longs===String?String(b.modelVersion):b.modelVersion:st.modelVersion=pt.longs===String?g.Long.prototype.toString.call(b.modelVersion):pt.longs===Number?new g.LongBits(b.modelVersion.low>>>0,b.modelVersion.high>>>0).toNumber():b.modelVersion),b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.graph!=null&&b.hasOwnProperty("graph")&&(st.graph=at.onnx.GraphProto.toObject(b.graph,pt)),b.opsetImport&&b.opsetImport.length){st.opsetImport=[];for(var Tt=0;Tt<b.opsetImport.length;++Tt)st.opsetImport[Tt]=at.onnx.OperatorSetIdProto.toObject(b.opsetImport[Tt],pt)}if(b.metadataProps&&b.metadataProps.length){st.metadataProps=[];for(var Tt=0;Tt<b.metadataProps.length;++Tt)st.metadataProps[Tt]=at.onnx.StringStringEntryProto.toObject(b.metadataProps[Tt],pt)}if(b.trainingInfo&&b.trainingInfo.length){st.trainingInfo=[];for(var Tt=0;Tt<b.trainingInfo.length;++Tt)st.trainingInfo[Tt]=at.onnx.TrainingInfoProto.toObject(b.trainingInfo[Tt],pt)}if(b.functions&&b.functions.length){st.functions=[];for(var Tt=0;Tt<b.functions.length;++Tt)st.functions[Tt]=at.onnx.FunctionProto.toObject(b.functions[Tt],pt)}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.ModelProto"},vt}(),$t.StringStringEntryProto=function(){function vt(b){if(b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.key="",vt.prototype.value="",vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){return pt||(pt=et.create()),b.key!=null&&Object.hasOwnProperty.call(b,"key")&&pt.uint32(10).string(b.key),b.value!=null&&Object.hasOwnProperty.call(b,"value")&&pt.uint32(18).string(b.value),pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.StringStringEntryProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.key=b.string();break}case 2:{wt.value=b.string();break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){return typeof b!="object"||b===null?"object expected":b.key!=null&&b.hasOwnProperty("key")&&!g.isString(b.key)?"key: string expected":b.value!=null&&b.hasOwnProperty("value")&&!g.isString(b.value)?"value: string expected":null},vt.fromObject=function(b){if(b instanceof at.onnx.StringStringEntryProto)return b;var pt=new at.onnx.StringStringEntryProto;return b.key!=null&&(pt.key=String(b.key)),b.value!=null&&(pt.value=String(b.value)),pt},vt.toObject=function(b,pt){pt||(pt={});var st={};return pt.defaults&&(st.key="",st.value=""),b.key!=null&&b.hasOwnProperty("key")&&(st.key=b.key),b.value!=null&&b.hasOwnProperty("value")&&(st.value=b.value),st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.StringStringEntryProto"},vt}(),$t.TensorAnnotation=function(){function vt(b){if(this.quantParameterTensorNames=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.tensorName="",vt.prototype.quantParameterTensorNames=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.tensorName!=null&&Object.hasOwnProperty.call(b,"tensorName")&&pt.uint32(10).string(b.tensorName),b.quantParameterTensorNames!=null&&b.quantParameterTensorNames.length)for(var st=0;st<b.quantParameterTensorNames.length;++st)at.onnx.StringStringEntryProto.encode(b.quantParameterTensorNames[st],pt.uint32(18).fork()).ldelim();return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.TensorAnnotation;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.tensorName=b.string();break}case 2:{wt.quantParameterTensorNames&&wt.quantParameterTensorNames.length||(wt.quantParameterTensorNames=[]),wt.quantParameterTensorNames.push(at.onnx.StringStringEntryProto.decode(b,b.uint32()));break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.tensorName!=null&&b.hasOwnProperty("tensorName")&&!g.isString(b.tensorName))return"tensorName: string expected";if(b.quantParameterTensorNames!=null&&b.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(b.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var pt=0;pt<b.quantParameterTensorNames.length;++pt){var st=at.onnx.StringStringEntryProto.verify(b.quantParameterTensorNames[pt]);if(st)return"quantParameterTensorNames."+st}}return null},vt.fromObject=function(b){if(b instanceof at.onnx.TensorAnnotation)return b;var pt=new at.onnx.TensorAnnotation;if(b.tensorName!=null&&(pt.tensorName=String(b.tensorName)),b.quantParameterTensorNames){if(!Array.isArray(b.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");pt.quantParameterTensorNames=[];for(var st=0;st<b.quantParameterTensorNames.length;++st){if(typeof b.quantParameterTensorNames[st]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");pt.quantParameterTensorNames[st]=at.onnx.StringStringEntryProto.fromObject(b.quantParameterTensorNames[st])}}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.quantParameterTensorNames=[]),pt.defaults&&(st.tensorName=""),b.tensorName!=null&&b.hasOwnProperty("tensorName")&&(st.tensorName=b.tensorName),b.quantParameterTensorNames&&b.quantParameterTensorNames.length){st.quantParameterTensorNames=[];for(var wt=0;wt<b.quantParameterTensorNames.length;++wt)st.quantParameterTensorNames[wt]=at.onnx.StringStringEntryProto.toObject(b.quantParameterTensorNames[wt],pt)}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.TensorAnnotation"},vt}(),$t.GraphProto=function(){function vt(b){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.node=g.emptyArray,vt.prototype.name="",vt.prototype.initializer=g.emptyArray,vt.prototype.sparseInitializer=g.emptyArray,vt.prototype.docString="",vt.prototype.input=g.emptyArray,vt.prototype.output=g.emptyArray,vt.prototype.valueInfo=g.emptyArray,vt.prototype.quantizationAnnotation=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.node!=null&&b.node.length)for(var st=0;st<b.node.length;++st)at.onnx.NodeProto.encode(b.node[st],pt.uint32(10).fork()).ldelim();if(b.name!=null&&Object.hasOwnProperty.call(b,"name")&&pt.uint32(18).string(b.name),b.initializer!=null&&b.initializer.length)for(var st=0;st<b.initializer.length;++st)at.onnx.TensorProto.encode(b.initializer[st],pt.uint32(42).fork()).ldelim();if(b.docString!=null&&Object.hasOwnProperty.call(b,"docString")&&pt.uint32(82).string(b.docString),b.input!=null&&b.input.length)for(var st=0;st<b.input.length;++st)at.onnx.ValueInfoProto.encode(b.input[st],pt.uint32(90).fork()).ldelim();if(b.output!=null&&b.output.length)for(var st=0;st<b.output.length;++st)at.onnx.ValueInfoProto.encode(b.output[st],pt.uint32(98).fork()).ldelim();if(b.valueInfo!=null&&b.valueInfo.length)for(var st=0;st<b.valueInfo.length;++st)at.onnx.ValueInfoProto.encode(b.valueInfo[st],pt.uint32(106).fork()).ldelim();if(b.quantizationAnnotation!=null&&b.quantizationAnnotation.length)for(var st=0;st<b.quantizationAnnotation.length;++st)at.onnx.TensorAnnotation.encode(b.quantizationAnnotation[st],pt.uint32(114).fork()).ldelim();if(b.sparseInitializer!=null&&b.sparseInitializer.length)for(var st=0;st<b.sparseInitializer.length;++st)at.onnx.SparseTensorProto.encode(b.sparseInitializer[st],pt.uint32(122).fork()).ldelim();return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.GraphProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.node&&wt.node.length||(wt.node=[]),wt.node.push(at.onnx.NodeProto.decode(b,b.uint32()));break}case 2:{wt.name=b.string();break}case 5:{wt.initializer&&wt.initializer.length||(wt.initializer=[]),wt.initializer.push(at.onnx.TensorProto.decode(b,b.uint32()));break}case 15:{wt.sparseInitializer&&wt.sparseInitializer.length||(wt.sparseInitializer=[]),wt.sparseInitializer.push(at.onnx.SparseTensorProto.decode(b,b.uint32()));break}case 10:{wt.docString=b.string();break}case 11:{wt.input&&wt.input.length||(wt.input=[]),wt.input.push(at.onnx.ValueInfoProto.decode(b,b.uint32()));break}case 12:{wt.output&&wt.output.length||(wt.output=[]),wt.output.push(at.onnx.ValueInfoProto.decode(b,b.uint32()));break}case 13:{wt.valueInfo&&wt.valueInfo.length||(wt.valueInfo=[]),wt.valueInfo.push(at.onnx.ValueInfoProto.decode(b,b.uint32()));break}case 14:{wt.quantizationAnnotation&&wt.quantizationAnnotation.length||(wt.quantizationAnnotation=[]),wt.quantizationAnnotation.push(at.onnx.TensorAnnotation.decode(b,b.uint32()));break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.node!=null&&b.hasOwnProperty("node")){if(!Array.isArray(b.node))return"node: array expected";for(var pt=0;pt<b.node.length;++pt){var st=at.onnx.NodeProto.verify(b.node[pt]);if(st)return"node."+st}}if(b.name!=null&&b.hasOwnProperty("name")&&!g.isString(b.name))return"name: string expected";if(b.initializer!=null&&b.hasOwnProperty("initializer")){if(!Array.isArray(b.initializer))return"initializer: array expected";for(var pt=0;pt<b.initializer.length;++pt){var st=at.onnx.TensorProto.verify(b.initializer[pt]);if(st)return"initializer."+st}}if(b.sparseInitializer!=null&&b.hasOwnProperty("sparseInitializer")){if(!Array.isArray(b.sparseInitializer))return"sparseInitializer: array expected";for(var pt=0;pt<b.sparseInitializer.length;++pt){var st=at.onnx.SparseTensorProto.verify(b.sparseInitializer[pt]);if(st)return"sparseInitializer."+st}}if(b.docString!=null&&b.hasOwnProperty("docString")&&!g.isString(b.docString))return"docString: string expected";if(b.input!=null&&b.hasOwnProperty("input")){if(!Array.isArray(b.input))return"input: array expected";for(var pt=0;pt<b.input.length;++pt){var st=at.onnx.ValueInfoProto.verify(b.input[pt]);if(st)return"input."+st}}if(b.output!=null&&b.hasOwnProperty("output")){if(!Array.isArray(b.output))return"output: array expected";for(var pt=0;pt<b.output.length;++pt){var st=at.onnx.ValueInfoProto.verify(b.output[pt]);if(st)return"output."+st}}if(b.valueInfo!=null&&b.hasOwnProperty("valueInfo")){if(!Array.isArray(b.valueInfo))return"valueInfo: array expected";for(var pt=0;pt<b.valueInfo.length;++pt){var st=at.onnx.ValueInfoProto.verify(b.valueInfo[pt]);if(st)return"valueInfo."+st}}if(b.quantizationAnnotation!=null&&b.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(b.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var pt=0;pt<b.quantizationAnnotation.length;++pt){var st=at.onnx.TensorAnnotation.verify(b.quantizationAnnotation[pt]);if(st)return"quantizationAnnotation."+st}}return null},vt.fromObject=function(b){if(b instanceof at.onnx.GraphProto)return b;var pt=new at.onnx.GraphProto;if(b.node){if(!Array.isArray(b.node))throw TypeError(".onnx.GraphProto.node: array expected");pt.node=[];for(var st=0;st<b.node.length;++st){if(typeof b.node[st]!="object")throw TypeError(".onnx.GraphProto.node: object expected");pt.node[st]=at.onnx.NodeProto.fromObject(b.node[st])}}if(b.name!=null&&(pt.name=String(b.name)),b.initializer){if(!Array.isArray(b.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");pt.initializer=[];for(var st=0;st<b.initializer.length;++st){if(typeof b.initializer[st]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");pt.initializer[st]=at.onnx.TensorProto.fromObject(b.initializer[st])}}if(b.sparseInitializer){if(!Array.isArray(b.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");pt.sparseInitializer=[];for(var st=0;st<b.sparseInitializer.length;++st){if(typeof b.sparseInitializer[st]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");pt.sparseInitializer[st]=at.onnx.SparseTensorProto.fromObject(b.sparseInitializer[st])}}if(b.docString!=null&&(pt.docString=String(b.docString)),b.input){if(!Array.isArray(b.input))throw TypeError(".onnx.GraphProto.input: array expected");pt.input=[];for(var st=0;st<b.input.length;++st){if(typeof b.input[st]!="object")throw TypeError(".onnx.GraphProto.input: object expected");pt.input[st]=at.onnx.ValueInfoProto.fromObject(b.input[st])}}if(b.output){if(!Array.isArray(b.output))throw TypeError(".onnx.GraphProto.output: array expected");pt.output=[];for(var st=0;st<b.output.length;++st){if(typeof b.output[st]!="object")throw TypeError(".onnx.GraphProto.output: object expected");pt.output[st]=at.onnx.ValueInfoProto.fromObject(b.output[st])}}if(b.valueInfo){if(!Array.isArray(b.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");pt.valueInfo=[];for(var st=0;st<b.valueInfo.length;++st){if(typeof b.valueInfo[st]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");pt.valueInfo[st]=at.onnx.ValueInfoProto.fromObject(b.valueInfo[st])}}if(b.quantizationAnnotation){if(!Array.isArray(b.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");pt.quantizationAnnotation=[];for(var st=0;st<b.quantizationAnnotation.length;++st){if(typeof b.quantizationAnnotation[st]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");pt.quantizationAnnotation[st]=at.onnx.TensorAnnotation.fromObject(b.quantizationAnnotation[st])}}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.node=[],st.initializer=[],st.input=[],st.output=[],st.valueInfo=[],st.quantizationAnnotation=[],st.sparseInitializer=[]),pt.defaults&&(st.name="",st.docString=""),b.node&&b.node.length){st.node=[];for(var wt=0;wt<b.node.length;++wt)st.node[wt]=at.onnx.NodeProto.toObject(b.node[wt],pt)}if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.initializer&&b.initializer.length){st.initializer=[];for(var wt=0;wt<b.initializer.length;++wt)st.initializer[wt]=at.onnx.TensorProto.toObject(b.initializer[wt],pt)}if(b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.input&&b.input.length){st.input=[];for(var wt=0;wt<b.input.length;++wt)st.input[wt]=at.onnx.ValueInfoProto.toObject(b.input[wt],pt)}if(b.output&&b.output.length){st.output=[];for(var wt=0;wt<b.output.length;++wt)st.output[wt]=at.onnx.ValueInfoProto.toObject(b.output[wt],pt)}if(b.valueInfo&&b.valueInfo.length){st.valueInfo=[];for(var wt=0;wt<b.valueInfo.length;++wt)st.valueInfo[wt]=at.onnx.ValueInfoProto.toObject(b.valueInfo[wt],pt)}if(b.quantizationAnnotation&&b.quantizationAnnotation.length){st.quantizationAnnotation=[];for(var wt=0;wt<b.quantizationAnnotation.length;++wt)st.quantizationAnnotation[wt]=at.onnx.TensorAnnotation.toObject(b.quantizationAnnotation[wt],pt)}if(b.sparseInitializer&&b.sparseInitializer.length){st.sparseInitializer=[];for(var wt=0;wt<b.sparseInitializer.length;++wt)st.sparseInitializer[wt]=at.onnx.SparseTensorProto.toObject(b.sparseInitializer[wt],pt)}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.GraphProto"},vt}(),$t.TensorProto=function(){function vt(b){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.dims=g.emptyArray,vt.prototype.dataType=0,vt.prototype.segment=null,vt.prototype.floatData=g.emptyArray,vt.prototype.int32Data=g.emptyArray,vt.prototype.stringData=g.emptyArray,vt.prototype.int64Data=g.emptyArray,vt.prototype.name="",vt.prototype.docString="",vt.prototype.rawData=g.newBuffer([]),vt.prototype.externalData=g.emptyArray,vt.prototype.dataLocation=0,vt.prototype.doubleData=g.emptyArray,vt.prototype.uint64Data=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.dims!=null&&b.dims.length){pt.uint32(10).fork();for(var st=0;st<b.dims.length;++st)pt.int64(b.dims[st]);pt.ldelim()}if(b.dataType!=null&&Object.hasOwnProperty.call(b,"dataType")&&pt.uint32(16).int32(b.dataType),b.segment!=null&&Object.hasOwnProperty.call(b,"segment")&&at.onnx.TensorProto.Segment.encode(b.segment,pt.uint32(26).fork()).ldelim(),b.floatData!=null&&b.floatData.length){pt.uint32(34).fork();for(var st=0;st<b.floatData.length;++st)pt.float(b.floatData[st]);pt.ldelim()}if(b.int32Data!=null&&b.int32Data.length){pt.uint32(42).fork();for(var st=0;st<b.int32Data.length;++st)pt.int32(b.int32Data[st]);pt.ldelim()}if(b.stringData!=null&&b.stringData.length)for(var st=0;st<b.stringData.length;++st)pt.uint32(50).bytes(b.stringData[st]);if(b.int64Data!=null&&b.int64Data.length){pt.uint32(58).fork();for(var st=0;st<b.int64Data.length;++st)pt.int64(b.int64Data[st]);pt.ldelim()}if(b.name!=null&&Object.hasOwnProperty.call(b,"name")&&pt.uint32(66).string(b.name),b.rawData!=null&&Object.hasOwnProperty.call(b,"rawData")&&pt.uint32(74).bytes(b.rawData),b.doubleData!=null&&b.doubleData.length){pt.uint32(82).fork();for(var st=0;st<b.doubleData.length;++st)pt.double(b.doubleData[st]);pt.ldelim()}if(b.uint64Data!=null&&b.uint64Data.length){pt.uint32(90).fork();for(var st=0;st<b.uint64Data.length;++st)pt.uint64(b.uint64Data[st]);pt.ldelim()}if(b.docString!=null&&Object.hasOwnProperty.call(b,"docString")&&pt.uint32(98).string(b.docString),b.externalData!=null&&b.externalData.length)for(var st=0;st<b.externalData.length;++st)at.onnx.StringStringEntryProto.encode(b.externalData[st],pt.uint32(106).fork()).ldelim();return b.dataLocation!=null&&Object.hasOwnProperty.call(b,"dataLocation")&&pt.uint32(112).int32(b.dataLocation),pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.TensorProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{if(wt.dims&&wt.dims.length||(wt.dims=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.dims.push(b.int64());else wt.dims.push(b.int64());break}case 2:{wt.dataType=b.int32();break}case 3:{wt.segment=at.onnx.TensorProto.Segment.decode(b,b.uint32());break}case 4:{if(wt.floatData&&wt.floatData.length||(wt.floatData=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.floatData.push(b.float());else wt.floatData.push(b.float());break}case 5:{if(wt.int32Data&&wt.int32Data.length||(wt.int32Data=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.int32Data.push(b.int32());else wt.int32Data.push(b.int32());break}case 6:{wt.stringData&&wt.stringData.length||(wt.stringData=[]),wt.stringData.push(b.bytes());break}case 7:{if(wt.int64Data&&wt.int64Data.length||(wt.int64Data=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.int64Data.push(b.int64());else wt.int64Data.push(b.int64());break}case 8:{wt.name=b.string();break}case 12:{wt.docString=b.string();break}case 9:{wt.rawData=b.bytes();break}case 13:{wt.externalData&&wt.externalData.length||(wt.externalData=[]),wt.externalData.push(at.onnx.StringStringEntryProto.decode(b,b.uint32()));break}case 14:{wt.dataLocation=b.int32();break}case 10:{if(wt.doubleData&&wt.doubleData.length||(wt.doubleData=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.doubleData.push(b.double());else wt.doubleData.push(b.double());break}case 11:{if(wt.uint64Data&&wt.uint64Data.length||(wt.uint64Data=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.uint64Data.push(b.uint64());else wt.uint64Data.push(b.uint64());break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.dims!=null&&b.hasOwnProperty("dims")){if(!Array.isArray(b.dims))return"dims: array expected";for(var pt=0;pt<b.dims.length;++pt)if(!g.isInteger(b.dims[pt])&&!(b.dims[pt]&&g.isInteger(b.dims[pt].low)&&g.isInteger(b.dims[pt].high)))return"dims: integer|Long[] expected"}if(b.dataType!=null&&b.hasOwnProperty("dataType")&&!g.isInteger(b.dataType))return"dataType: integer expected";if(b.segment!=null&&b.hasOwnProperty("segment")){var st=at.onnx.TensorProto.Segment.verify(b.segment);if(st)return"segment."+st}if(b.floatData!=null&&b.hasOwnProperty("floatData")){if(!Array.isArray(b.floatData))return"floatData: array expected";for(var pt=0;pt<b.floatData.length;++pt)if(typeof b.floatData[pt]!="number")return"floatData: number[] expected"}if(b.int32Data!=null&&b.hasOwnProperty("int32Data")){if(!Array.isArray(b.int32Data))return"int32Data: array expected";for(var pt=0;pt<b.int32Data.length;++pt)if(!g.isInteger(b.int32Data[pt]))return"int32Data: integer[] expected"}if(b.stringData!=null&&b.hasOwnProperty("stringData")){if(!Array.isArray(b.stringData))return"stringData: array expected";for(var pt=0;pt<b.stringData.length;++pt)if(!(b.stringData[pt]&&typeof b.stringData[pt].length=="number"||g.isString(b.stringData[pt])))return"stringData: buffer[] expected"}if(b.int64Data!=null&&b.hasOwnProperty("int64Data")){if(!Array.isArray(b.int64Data))return"int64Data: array expected";for(var pt=0;pt<b.int64Data.length;++pt)if(!g.isInteger(b.int64Data[pt])&&!(b.int64Data[pt]&&g.isInteger(b.int64Data[pt].low)&&g.isInteger(b.int64Data[pt].high)))return"int64Data: integer|Long[] expected"}if(b.name!=null&&b.hasOwnProperty("name")&&!g.isString(b.name))return"name: string expected";if(b.docString!=null&&b.hasOwnProperty("docString")&&!g.isString(b.docString))return"docString: string expected";if(b.rawData!=null&&b.hasOwnProperty("rawData")&&!(b.rawData&&typeof b.rawData.length=="number"||g.isString(b.rawData)))return"rawData: buffer expected";if(b.externalData!=null&&b.hasOwnProperty("externalData")){if(!Array.isArray(b.externalData))return"externalData: array expected";for(var pt=0;pt<b.externalData.length;++pt){var st=at.onnx.StringStringEntryProto.verify(b.externalData[pt]);if(st)return"externalData."+st}}if(b.dataLocation!=null&&b.hasOwnProperty("dataLocation"))switch(b.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(b.doubleData!=null&&b.hasOwnProperty("doubleData")){if(!Array.isArray(b.doubleData))return"doubleData: array expected";for(var pt=0;pt<b.doubleData.length;++pt)if(typeof b.doubleData[pt]!="number")return"doubleData: number[] expected"}if(b.uint64Data!=null&&b.hasOwnProperty("uint64Data")){if(!Array.isArray(b.uint64Data))return"uint64Data: array expected";for(var pt=0;pt<b.uint64Data.length;++pt)if(!g.isInteger(b.uint64Data[pt])&&!(b.uint64Data[pt]&&g.isInteger(b.uint64Data[pt].low)&&g.isInteger(b.uint64Data[pt].high)))return"uint64Data: integer|Long[] expected"}return null},vt.fromObject=function(b){if(b instanceof at.onnx.TensorProto)return b;var pt=new at.onnx.TensorProto;if(b.dims){if(!Array.isArray(b.dims))throw TypeError(".onnx.TensorProto.dims: array expected");pt.dims=[];for(var st=0;st<b.dims.length;++st)g.Long?(pt.dims[st]=g.Long.fromValue(b.dims[st])).unsigned=!1:typeof b.dims[st]=="string"?pt.dims[st]=parseInt(b.dims[st],10):typeof b.dims[st]=="number"?pt.dims[st]=b.dims[st]:typeof b.dims[st]=="object"&&(pt.dims[st]=new g.LongBits(b.dims[st].low>>>0,b.dims[st].high>>>0).toNumber())}if(b.dataType!=null&&(pt.dataType=b.dataType|0),b.segment!=null){if(typeof b.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");pt.segment=at.onnx.TensorProto.Segment.fromObject(b.segment)}if(b.floatData){if(!Array.isArray(b.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");pt.floatData=[];for(var st=0;st<b.floatData.length;++st)pt.floatData[st]=Number(b.floatData[st])}if(b.int32Data){if(!Array.isArray(b.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");pt.int32Data=[];for(var st=0;st<b.int32Data.length;++st)pt.int32Data[st]=b.int32Data[st]|0}if(b.stringData){if(!Array.isArray(b.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");pt.stringData=[];for(var st=0;st<b.stringData.length;++st)typeof b.stringData[st]=="string"?g.base64.decode(b.stringData[st],pt.stringData[st]=g.newBuffer(g.base64.length(b.stringData[st])),0):b.stringData[st].length>=0&&(pt.stringData[st]=b.stringData[st])}if(b.int64Data){if(!Array.isArray(b.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");pt.int64Data=[];for(var st=0;st<b.int64Data.length;++st)g.Long?(pt.int64Data[st]=g.Long.fromValue(b.int64Data[st])).unsigned=!1:typeof b.int64Data[st]=="string"?pt.int64Data[st]=parseInt(b.int64Data[st],10):typeof b.int64Data[st]=="number"?pt.int64Data[st]=b.int64Data[st]:typeof b.int64Data[st]=="object"&&(pt.int64Data[st]=new g.LongBits(b.int64Data[st].low>>>0,b.int64Data[st].high>>>0).toNumber())}if(b.name!=null&&(pt.name=String(b.name)),b.docString!=null&&(pt.docString=String(b.docString)),b.rawData!=null&&(typeof b.rawData=="string"?g.base64.decode(b.rawData,pt.rawData=g.newBuffer(g.base64.length(b.rawData)),0):b.rawData.length>=0&&(pt.rawData=b.rawData)),b.externalData){if(!Array.isArray(b.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");pt.externalData=[];for(var st=0;st<b.externalData.length;++st){if(typeof b.externalData[st]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");pt.externalData[st]=at.onnx.StringStringEntryProto.fromObject(b.externalData[st])}}switch(b.dataLocation){default:if(typeof b.dataLocation=="number"){pt.dataLocation=b.dataLocation;break}break;case"DEFAULT":case 0:pt.dataLocation=0;break;case"EXTERNAL":case 1:pt.dataLocation=1;break}if(b.doubleData){if(!Array.isArray(b.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");pt.doubleData=[];for(var st=0;st<b.doubleData.length;++st)pt.doubleData[st]=Number(b.doubleData[st])}if(b.uint64Data){if(!Array.isArray(b.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");pt.uint64Data=[];for(var st=0;st<b.uint64Data.length;++st)g.Long?(pt.uint64Data[st]=g.Long.fromValue(b.uint64Data[st])).unsigned=!0:typeof b.uint64Data[st]=="string"?pt.uint64Data[st]=parseInt(b.uint64Data[st],10):typeof b.uint64Data[st]=="number"?pt.uint64Data[st]=b.uint64Data[st]:typeof b.uint64Data[st]=="object"&&(pt.uint64Data[st]=new g.LongBits(b.uint64Data[st].low>>>0,b.uint64Data[st].high>>>0).toNumber(!0))}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.dims=[],st.floatData=[],st.int32Data=[],st.stringData=[],st.int64Data=[],st.doubleData=[],st.uint64Data=[],st.externalData=[]),pt.defaults&&(st.dataType=0,st.segment=null,st.name="",pt.bytes===String?st.rawData="":(st.rawData=[],pt.bytes!==Array&&(st.rawData=g.newBuffer(st.rawData))),st.docString="",st.dataLocation=pt.enums===String?"DEFAULT":0),b.dims&&b.dims.length){st.dims=[];for(var wt=0;wt<b.dims.length;++wt)typeof b.dims[wt]=="number"?st.dims[wt]=pt.longs===String?String(b.dims[wt]):b.dims[wt]:st.dims[wt]=pt.longs===String?g.Long.prototype.toString.call(b.dims[wt]):pt.longs===Number?new g.LongBits(b.dims[wt].low>>>0,b.dims[wt].high>>>0).toNumber():b.dims[wt]}if(b.dataType!=null&&b.hasOwnProperty("dataType")&&(st.dataType=b.dataType),b.segment!=null&&b.hasOwnProperty("segment")&&(st.segment=at.onnx.TensorProto.Segment.toObject(b.segment,pt)),b.floatData&&b.floatData.length){st.floatData=[];for(var wt=0;wt<b.floatData.length;++wt)st.floatData[wt]=pt.json&&!isFinite(b.floatData[wt])?String(b.floatData[wt]):b.floatData[wt]}if(b.int32Data&&b.int32Data.length){st.int32Data=[];for(var wt=0;wt<b.int32Data.length;++wt)st.int32Data[wt]=b.int32Data[wt]}if(b.stringData&&b.stringData.length){st.stringData=[];for(var wt=0;wt<b.stringData.length;++wt)st.stringData[wt]=pt.bytes===String?g.base64.encode(b.stringData[wt],0,b.stringData[wt].length):pt.bytes===Array?Array.prototype.slice.call(b.stringData[wt]):b.stringData[wt]}if(b.int64Data&&b.int64Data.length){st.int64Data=[];for(var wt=0;wt<b.int64Data.length;++wt)typeof b.int64Data[wt]=="number"?st.int64Data[wt]=pt.longs===String?String(b.int64Data[wt]):b.int64Data[wt]:st.int64Data[wt]=pt.longs===String?g.Long.prototype.toString.call(b.int64Data[wt]):pt.longs===Number?new g.LongBits(b.int64Data[wt].low>>>0,b.int64Data[wt].high>>>0).toNumber():b.int64Data[wt]}if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.rawData!=null&&b.hasOwnProperty("rawData")&&(st.rawData=pt.bytes===String?g.base64.encode(b.rawData,0,b.rawData.length):pt.bytes===Array?Array.prototype.slice.call(b.rawData):b.rawData),b.doubleData&&b.doubleData.length){st.doubleData=[];for(var wt=0;wt<b.doubleData.length;++wt)st.doubleData[wt]=pt.json&&!isFinite(b.doubleData[wt])?String(b.doubleData[wt]):b.doubleData[wt]}if(b.uint64Data&&b.uint64Data.length){st.uint64Data=[];for(var wt=0;wt<b.uint64Data.length;++wt)typeof b.uint64Data[wt]=="number"?st.uint64Data[wt]=pt.longs===String?String(b.uint64Data[wt]):b.uint64Data[wt]:st.uint64Data[wt]=pt.longs===String?g.Long.prototype.toString.call(b.uint64Data[wt]):pt.longs===Number?new g.LongBits(b.uint64Data[wt].low>>>0,b.uint64Data[wt].high>>>0).toNumber(!0):b.uint64Data[wt]}if(b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.externalData&&b.externalData.length){st.externalData=[];for(var wt=0;wt<b.externalData.length;++wt)st.externalData[wt]=at.onnx.StringStringEntryProto.toObject(b.externalData[wt],pt)}return b.dataLocation!=null&&b.hasOwnProperty("dataLocation")&&(st.dataLocation=pt.enums===String?at.onnx.TensorProto.DataLocation[b.dataLocation]===void 0?b.dataLocation:at.onnx.TensorProto.DataLocation[b.dataLocation]:b.dataLocation),st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.TensorProto"},vt.DataType=function(){var b={},pt=Object.create(b);return pt[b[0]="UNDEFINED"]=0,pt[b[1]="FLOAT"]=1,pt[b[2]="UINT8"]=2,pt[b[3]="INT8"]=3,pt[b[4]="UINT16"]=4,pt[b[5]="INT16"]=5,pt[b[6]="INT32"]=6,pt[b[7]="INT64"]=7,pt[b[8]="STRING"]=8,pt[b[9]="BOOL"]=9,pt[b[10]="FLOAT16"]=10,pt[b[11]="DOUBLE"]=11,pt[b[12]="UINT32"]=12,pt[b[13]="UINT64"]=13,pt[b[14]="COMPLEX64"]=14,pt[b[15]="COMPLEX128"]=15,pt[b[16]="BFLOAT16"]=16,pt[b[17]="FLOAT8E4M3FN"]=17,pt[b[18]="FLOAT8E4M3FNUZ"]=18,pt[b[19]="FLOAT8E5M2"]=19,pt[b[20]="FLOAT8E5M2FNUZ"]=20,pt}(),vt.Segment=function(){function b(pt){if(pt)for(var st=Object.keys(pt),wt=0;wt<st.length;++wt)pt[st[wt]]!=null&&(this[st[wt]]=pt[st[wt]])}return b.prototype.begin=g.Long?g.Long.fromBits(0,0,!1):0,b.prototype.end=g.Long?g.Long.fromBits(0,0,!1):0,b.create=function(pt){return new b(pt)},b.encode=function(pt,st){return st||(st=et.create()),pt.begin!=null&&Object.hasOwnProperty.call(pt,"begin")&&st.uint32(8).int64(pt.begin),pt.end!=null&&Object.hasOwnProperty.call(pt,"end")&&st.uint32(16).int64(pt.end),st},b.encodeDelimited=function(pt,st){return this.encode(pt,st).ldelim()},b.decode=function(pt,st){pt instanceof d||(pt=d.create(pt));for(var wt=st===void 0?pt.len:pt.pos+st,Tt=new at.onnx.TensorProto.Segment;pt.pos<wt;){var Ct=pt.uint32();switch(Ct>>>3){case 1:{Tt.begin=pt.int64();break}case 2:{Tt.end=pt.int64();break}default:pt.skipType(Ct&7);break}}return Tt},b.decodeDelimited=function(pt){return pt instanceof d||(pt=new d(pt)),this.decode(pt,pt.uint32())},b.verify=function(pt){return typeof pt!="object"||pt===null?"object expected":pt.begin!=null&&pt.hasOwnProperty("begin")&&!g.isInteger(pt.begin)&&!(pt.begin&&g.isInteger(pt.begin.low)&&g.isInteger(pt.begin.high))?"begin: integer|Long expected":pt.end!=null&&pt.hasOwnProperty("end")&&!g.isInteger(pt.end)&&!(pt.end&&g.isInteger(pt.end.low)&&g.isInteger(pt.end.high))?"end: integer|Long expected":null},b.fromObject=function(pt){if(pt instanceof at.onnx.TensorProto.Segment)return pt;var st=new at.onnx.TensorProto.Segment;return pt.begin!=null&&(g.Long?(st.begin=g.Long.fromValue(pt.begin)).unsigned=!1:typeof pt.begin=="string"?st.begin=parseInt(pt.begin,10):typeof pt.begin=="number"?st.begin=pt.begin:typeof pt.begin=="object"&&(st.begin=new g.LongBits(pt.begin.low>>>0,pt.begin.high>>>0).toNumber())),pt.end!=null&&(g.Long?(st.end=g.Long.fromValue(pt.end)).unsigned=!1:typeof pt.end=="string"?st.end=parseInt(pt.end,10):typeof pt.end=="number"?st.end=pt.end:typeof pt.end=="object"&&(st.end=new g.LongBits(pt.end.low>>>0,pt.end.high>>>0).toNumber())),st},b.toObject=function(pt,st){st||(st={});var wt={};if(st.defaults){if(g.Long){var Tt=new g.Long(0,0,!1);wt.begin=st.longs===String?Tt.toString():st.longs===Number?Tt.toNumber():Tt}else wt.begin=st.longs===String?"0":0;if(g.Long){var Tt=new g.Long(0,0,!1);wt.end=st.longs===String?Tt.toString():st.longs===Number?Tt.toNumber():Tt}else wt.end=st.longs===String?"0":0}return pt.begin!=null&&pt.hasOwnProperty("begin")&&(typeof pt.begin=="number"?wt.begin=st.longs===String?String(pt.begin):pt.begin:wt.begin=st.longs===String?g.Long.prototype.toString.call(pt.begin):st.longs===Number?new g.LongBits(pt.begin.low>>>0,pt.begin.high>>>0).toNumber():pt.begin),pt.end!=null&&pt.hasOwnProperty("end")&&(typeof pt.end=="number"?wt.end=st.longs===String?String(pt.end):pt.end:wt.end=st.longs===String?g.Long.prototype.toString.call(pt.end):st.longs===Number?new g.LongBits(pt.end.low>>>0,pt.end.high>>>0).toNumber():pt.end),wt},b.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},b.getTypeUrl=function(pt){return pt===void 0&&(pt="type.googleapis.com"),pt+"/onnx.TensorProto.Segment"},b}(),vt.DataLocation=function(){var b={},pt=Object.create(b);return pt[b[0]="DEFAULT"]=0,pt[b[1]="EXTERNAL"]=1,pt}(),vt}(),$t.SparseTensorProto=function(){function vt(b){if(this.dims=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.values=null,vt.prototype.indices=null,vt.prototype.dims=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.values!=null&&Object.hasOwnProperty.call(b,"values")&&at.onnx.TensorProto.encode(b.values,pt.uint32(10).fork()).ldelim(),b.indices!=null&&Object.hasOwnProperty.call(b,"indices")&&at.onnx.TensorProto.encode(b.indices,pt.uint32(18).fork()).ldelim(),b.dims!=null&&b.dims.length){pt.uint32(26).fork();for(var st=0;st<b.dims.length;++st)pt.int64(b.dims[st]);pt.ldelim()}return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.SparseTensorProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.values=at.onnx.TensorProto.decode(b,b.uint32());break}case 2:{wt.indices=at.onnx.TensorProto.decode(b,b.uint32());break}case 3:{if(wt.dims&&wt.dims.length||(wt.dims=[]),(Tt&7)===2)for(var Ct=b.uint32()+b.pos;b.pos<Ct;)wt.dims.push(b.int64());else wt.dims.push(b.int64());break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.values!=null&&b.hasOwnProperty("values")){var pt=at.onnx.TensorProto.verify(b.values);if(pt)return"values."+pt}if(b.indices!=null&&b.hasOwnProperty("indices")){var pt=at.onnx.TensorProto.verify(b.indices);if(pt)return"indices."+pt}if(b.dims!=null&&b.hasOwnProperty("dims")){if(!Array.isArray(b.dims))return"dims: array expected";for(var st=0;st<b.dims.length;++st)if(!g.isInteger(b.dims[st])&&!(b.dims[st]&&g.isInteger(b.dims[st].low)&&g.isInteger(b.dims[st].high)))return"dims: integer|Long[] expected"}return null},vt.fromObject=function(b){if(b instanceof at.onnx.SparseTensorProto)return b;var pt=new at.onnx.SparseTensorProto;if(b.values!=null){if(typeof b.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");pt.values=at.onnx.TensorProto.fromObject(b.values)}if(b.indices!=null){if(typeof b.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");pt.indices=at.onnx.TensorProto.fromObject(b.indices)}if(b.dims){if(!Array.isArray(b.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");pt.dims=[];for(var st=0;st<b.dims.length;++st)g.Long?(pt.dims[st]=g.Long.fromValue(b.dims[st])).unsigned=!1:typeof b.dims[st]=="string"?pt.dims[st]=parseInt(b.dims[st],10):typeof b.dims[st]=="number"?pt.dims[st]=b.dims[st]:typeof b.dims[st]=="object"&&(pt.dims[st]=new g.LongBits(b.dims[st].low>>>0,b.dims[st].high>>>0).toNumber())}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.dims=[]),pt.defaults&&(st.values=null,st.indices=null),b.values!=null&&b.hasOwnProperty("values")&&(st.values=at.onnx.TensorProto.toObject(b.values,pt)),b.indices!=null&&b.hasOwnProperty("indices")&&(st.indices=at.onnx.TensorProto.toObject(b.indices,pt)),b.dims&&b.dims.length){st.dims=[];for(var wt=0;wt<b.dims.length;++wt)typeof b.dims[wt]=="number"?st.dims[wt]=pt.longs===String?String(b.dims[wt]):b.dims[wt]:st.dims[wt]=pt.longs===String?g.Long.prototype.toString.call(b.dims[wt]):pt.longs===Number?new g.LongBits(b.dims[wt].low>>>0,b.dims[wt].high>>>0).toNumber():b.dims[wt]}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.SparseTensorProto"},vt}(),$t.TensorShapeProto=function(){function vt(b){if(this.dim=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.dim=g.emptyArray,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.dim!=null&&b.dim.length)for(var st=0;st<b.dim.length;++st)at.onnx.TensorShapeProto.Dimension.encode(b.dim[st],pt.uint32(10).fork()).ldelim();return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.TensorShapeProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.dim&&wt.dim.length||(wt.dim=[]),wt.dim.push(at.onnx.TensorShapeProto.Dimension.decode(b,b.uint32()));break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.dim!=null&&b.hasOwnProperty("dim")){if(!Array.isArray(b.dim))return"dim: array expected";for(var pt=0;pt<b.dim.length;++pt){var st=at.onnx.TensorShapeProto.Dimension.verify(b.dim[pt]);if(st)return"dim."+st}}return null},vt.fromObject=function(b){if(b instanceof at.onnx.TensorShapeProto)return b;var pt=new at.onnx.TensorShapeProto;if(b.dim){if(!Array.isArray(b.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");pt.dim=[];for(var st=0;st<b.dim.length;++st){if(typeof b.dim[st]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");pt.dim[st]=at.onnx.TensorShapeProto.Dimension.fromObject(b.dim[st])}}return pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.dim=[]),b.dim&&b.dim.length){st.dim=[];for(var wt=0;wt<b.dim.length;++wt)st.dim[wt]=at.onnx.TensorShapeProto.Dimension.toObject(b.dim[wt],pt)}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.TensorShapeProto"},vt.Dimension=function(){function b(st){if(st)for(var wt=Object.keys(st),Tt=0;Tt<wt.length;++Tt)st[wt[Tt]]!=null&&(this[wt[Tt]]=st[wt[Tt]])}b.prototype.dimValue=null,b.prototype.dimParam=null,b.prototype.denotation="";var pt;return Object.defineProperty(b.prototype,"value",{get:g.oneOfGetter(pt=["dimValue","dimParam"]),set:g.oneOfSetter(pt)}),b.create=function(st){return new b(st)},b.encode=function(st,wt){return wt||(wt=et.create()),st.dimValue!=null&&Object.hasOwnProperty.call(st,"dimValue")&&wt.uint32(8).int64(st.dimValue),st.dimParam!=null&&Object.hasOwnProperty.call(st,"dimParam")&&wt.uint32(18).string(st.dimParam),st.denotation!=null&&Object.hasOwnProperty.call(st,"denotation")&&wt.uint32(26).string(st.denotation),wt},b.encodeDelimited=function(st,wt){return this.encode(st,wt).ldelim()},b.decode=function(st,wt){st instanceof d||(st=d.create(st));for(var Tt=wt===void 0?st.len:st.pos+wt,Ct=new at.onnx.TensorShapeProto.Dimension;st.pos<Tt;){var jt=st.uint32();switch(jt>>>3){case 1:{Ct.dimValue=st.int64();break}case 2:{Ct.dimParam=st.string();break}case 3:{Ct.denotation=st.string();break}default:st.skipType(jt&7);break}}return Ct},b.decodeDelimited=function(st){return st instanceof d||(st=new d(st)),this.decode(st,st.uint32())},b.verify=function(st){if(typeof st!="object"||st===null)return"object expected";var wt={};if(st.dimValue!=null&&st.hasOwnProperty("dimValue")&&(wt.value=1,!g.isInteger(st.dimValue)&&!(st.dimValue&&g.isInteger(st.dimValue.low)&&g.isInteger(st.dimValue.high))))return"dimValue: integer|Long expected";if(st.dimParam!=null&&st.hasOwnProperty("dimParam")){if(wt.value===1)return"value: multiple values";if(wt.value=1,!g.isString(st.dimParam))return"dimParam: string expected"}return st.denotation!=null&&st.hasOwnProperty("denotation")&&!g.isString(st.denotation)?"denotation: string expected":null},b.fromObject=function(st){if(st instanceof at.onnx.TensorShapeProto.Dimension)return st;var wt=new at.onnx.TensorShapeProto.Dimension;return st.dimValue!=null&&(g.Long?(wt.dimValue=g.Long.fromValue(st.dimValue)).unsigned=!1:typeof st.dimValue=="string"?wt.dimValue=parseInt(st.dimValue,10):typeof st.dimValue=="number"?wt.dimValue=st.dimValue:typeof st.dimValue=="object"&&(wt.dimValue=new g.LongBits(st.dimValue.low>>>0,st.dimValue.high>>>0).toNumber())),st.dimParam!=null&&(wt.dimParam=String(st.dimParam)),st.denotation!=null&&(wt.denotation=String(st.denotation)),wt},b.toObject=function(st,wt){wt||(wt={});var Tt={};return wt.defaults&&(Tt.denotation=""),st.dimValue!=null&&st.hasOwnProperty("dimValue")&&(typeof st.dimValue=="number"?Tt.dimValue=wt.longs===String?String(st.dimValue):st.dimValue:Tt.dimValue=wt.longs===String?g.Long.prototype.toString.call(st.dimValue):wt.longs===Number?new g.LongBits(st.dimValue.low>>>0,st.dimValue.high>>>0).toNumber():st.dimValue,wt.oneofs&&(Tt.value="dimValue")),st.dimParam!=null&&st.hasOwnProperty("dimParam")&&(Tt.dimParam=st.dimParam,wt.oneofs&&(Tt.value="dimParam")),st.denotation!=null&&st.hasOwnProperty("denotation")&&(Tt.denotation=st.denotation),Tt},b.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},b.getTypeUrl=function(st){return st===void 0&&(st="type.googleapis.com"),st+"/onnx.TensorShapeProto.Dimension"},b}(),vt}(),$t.TypeProto=function(){function vt(pt){if(pt)for(var st=Object.keys(pt),wt=0;wt<st.length;++wt)pt[st[wt]]!=null&&(this[st[wt]]=pt[st[wt]])}vt.prototype.tensorType=null,vt.prototype.sequenceType=null,vt.prototype.mapType=null,vt.prototype.optionalType=null,vt.prototype.sparseTensorType=null,vt.prototype.denotation="";var b;return Object.defineProperty(vt.prototype,"value",{get:g.oneOfGetter(b=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:g.oneOfSetter(b)}),vt.create=function(pt){return new vt(pt)},vt.encode=function(pt,st){return st||(st=et.create()),pt.tensorType!=null&&Object.hasOwnProperty.call(pt,"tensorType")&&at.onnx.TypeProto.Tensor.encode(pt.tensorType,st.uint32(10).fork()).ldelim(),pt.sequenceType!=null&&Object.hasOwnProperty.call(pt,"sequenceType")&&at.onnx.TypeProto.Sequence.encode(pt.sequenceType,st.uint32(34).fork()).ldelim(),pt.mapType!=null&&Object.hasOwnProperty.call(pt,"mapType")&&at.onnx.TypeProto.Map.encode(pt.mapType,st.uint32(42).fork()).ldelim(),pt.denotation!=null&&Object.hasOwnProperty.call(pt,"denotation")&&st.uint32(50).string(pt.denotation),pt.sparseTensorType!=null&&Object.hasOwnProperty.call(pt,"sparseTensorType")&&at.onnx.TypeProto.SparseTensor.encode(pt.sparseTensorType,st.uint32(66).fork()).ldelim(),pt.optionalType!=null&&Object.hasOwnProperty.call(pt,"optionalType")&&at.onnx.TypeProto.Optional.encode(pt.optionalType,st.uint32(74).fork()).ldelim(),st},vt.encodeDelimited=function(pt,st){return this.encode(pt,st).ldelim()},vt.decode=function(pt,st){pt instanceof d||(pt=d.create(pt));for(var wt=st===void 0?pt.len:pt.pos+st,Tt=new at.onnx.TypeProto;pt.pos<wt;){var Ct=pt.uint32();switch(Ct>>>3){case 1:{Tt.tensorType=at.onnx.TypeProto.Tensor.decode(pt,pt.uint32());break}case 4:{Tt.sequenceType=at.onnx.TypeProto.Sequence.decode(pt,pt.uint32());break}case 5:{Tt.mapType=at.onnx.TypeProto.Map.decode(pt,pt.uint32());break}case 9:{Tt.optionalType=at.onnx.TypeProto.Optional.decode(pt,pt.uint32());break}case 8:{Tt.sparseTensorType=at.onnx.TypeProto.SparseTensor.decode(pt,pt.uint32());break}case 6:{Tt.denotation=pt.string();break}default:pt.skipType(Ct&7);break}}return Tt},vt.decodeDelimited=function(pt){return pt instanceof d||(pt=new d(pt)),this.decode(pt,pt.uint32())},vt.verify=function(pt){if(typeof pt!="object"||pt===null)return"object expected";var st={};if(pt.tensorType!=null&&pt.hasOwnProperty("tensorType")){st.value=1;{var wt=at.onnx.TypeProto.Tensor.verify(pt.tensorType);if(wt)return"tensorType."+wt}}if(pt.sequenceType!=null&&pt.hasOwnProperty("sequenceType")){if(st.value===1)return"value: multiple values";st.value=1;{var wt=at.onnx.TypeProto.Sequence.verify(pt.sequenceType);if(wt)return"sequenceType."+wt}}if(pt.mapType!=null&&pt.hasOwnProperty("mapType")){if(st.value===1)return"value: multiple values";st.value=1;{var wt=at.onnx.TypeProto.Map.verify(pt.mapType);if(wt)return"mapType."+wt}}if(pt.optionalType!=null&&pt.hasOwnProperty("optionalType")){if(st.value===1)return"value: multiple values";st.value=1;{var wt=at.onnx.TypeProto.Optional.verify(pt.optionalType);if(wt)return"optionalType."+wt}}if(pt.sparseTensorType!=null&&pt.hasOwnProperty("sparseTensorType")){if(st.value===1)return"value: multiple values";st.value=1;{var wt=at.onnx.TypeProto.SparseTensor.verify(pt.sparseTensorType);if(wt)return"sparseTensorType."+wt}}return pt.denotation!=null&&pt.hasOwnProperty("denotation")&&!g.isString(pt.denotation)?"denotation: string expected":null},vt.fromObject=function(pt){if(pt instanceof at.onnx.TypeProto)return pt;var st=new at.onnx.TypeProto;if(pt.tensorType!=null){if(typeof pt.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");st.tensorType=at.onnx.TypeProto.Tensor.fromObject(pt.tensorType)}if(pt.sequenceType!=null){if(typeof pt.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");st.sequenceType=at.onnx.TypeProto.Sequence.fromObject(pt.sequenceType)}if(pt.mapType!=null){if(typeof pt.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");st.mapType=at.onnx.TypeProto.Map.fromObject(pt.mapType)}if(pt.optionalType!=null){if(typeof pt.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");st.optionalType=at.onnx.TypeProto.Optional.fromObject(pt.optionalType)}if(pt.sparseTensorType!=null){if(typeof pt.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");st.sparseTensorType=at.onnx.TypeProto.SparseTensor.fromObject(pt.sparseTensorType)}return pt.denotation!=null&&(st.denotation=String(pt.denotation)),st},vt.toObject=function(pt,st){st||(st={});var wt={};return st.defaults&&(wt.denotation=""),pt.tensorType!=null&&pt.hasOwnProperty("tensorType")&&(wt.tensorType=at.onnx.TypeProto.Tensor.toObject(pt.tensorType,st),st.oneofs&&(wt.value="tensorType")),pt.sequenceType!=null&&pt.hasOwnProperty("sequenceType")&&(wt.sequenceType=at.onnx.TypeProto.Sequence.toObject(pt.sequenceType,st),st.oneofs&&(wt.value="sequenceType")),pt.mapType!=null&&pt.hasOwnProperty("mapType")&&(wt.mapType=at.onnx.TypeProto.Map.toObject(pt.mapType,st),st.oneofs&&(wt.value="mapType")),pt.denotation!=null&&pt.hasOwnProperty("denotation")&&(wt.denotation=pt.denotation),pt.sparseTensorType!=null&&pt.hasOwnProperty("sparseTensorType")&&(wt.sparseTensorType=at.onnx.TypeProto.SparseTensor.toObject(pt.sparseTensorType,st),st.oneofs&&(wt.value="sparseTensorType")),pt.optionalType!=null&&pt.hasOwnProperty("optionalType")&&(wt.optionalType=at.onnx.TypeProto.Optional.toObject(pt.optionalType,st),st.oneofs&&(wt.value="optionalType")),wt},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(pt){return pt===void 0&&(pt="type.googleapis.com"),pt+"/onnx.TypeProto"},vt.Tensor=function(){function pt(st){if(st)for(var wt=Object.keys(st),Tt=0;Tt<wt.length;++Tt)st[wt[Tt]]!=null&&(this[wt[Tt]]=st[wt[Tt]])}return pt.prototype.elemType=0,pt.prototype.shape=null,pt.create=function(st){return new pt(st)},pt.encode=function(st,wt){return wt||(wt=et.create()),st.elemType!=null&&Object.hasOwnProperty.call(st,"elemType")&&wt.uint32(8).int32(st.elemType),st.shape!=null&&Object.hasOwnProperty.call(st,"shape")&&at.onnx.TensorShapeProto.encode(st.shape,wt.uint32(18).fork()).ldelim(),wt},pt.encodeDelimited=function(st,wt){return this.encode(st,wt).ldelim()},pt.decode=function(st,wt){st instanceof d||(st=d.create(st));for(var Tt=wt===void 0?st.len:st.pos+wt,Ct=new at.onnx.TypeProto.Tensor;st.pos<Tt;){var jt=st.uint32();switch(jt>>>3){case 1:{Ct.elemType=st.int32();break}case 2:{Ct.shape=at.onnx.TensorShapeProto.decode(st,st.uint32());break}default:st.skipType(jt&7);break}}return Ct},pt.decodeDelimited=function(st){return st instanceof d||(st=new d(st)),this.decode(st,st.uint32())},pt.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.elemType!=null&&st.hasOwnProperty("elemType")&&!g.isInteger(st.elemType))return"elemType: integer expected";if(st.shape!=null&&st.hasOwnProperty("shape")){var wt=at.onnx.TensorShapeProto.verify(st.shape);if(wt)return"shape."+wt}return null},pt.fromObject=function(st){if(st instanceof at.onnx.TypeProto.Tensor)return st;var wt=new at.onnx.TypeProto.Tensor;if(st.elemType!=null&&(wt.elemType=st.elemType|0),st.shape!=null){if(typeof st.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");wt.shape=at.onnx.TensorShapeProto.fromObject(st.shape)}return wt},pt.toObject=function(st,wt){wt||(wt={});var Tt={};return wt.defaults&&(Tt.elemType=0,Tt.shape=null),st.elemType!=null&&st.hasOwnProperty("elemType")&&(Tt.elemType=st.elemType),st.shape!=null&&st.hasOwnProperty("shape")&&(Tt.shape=at.onnx.TensorShapeProto.toObject(st.shape,wt)),Tt},pt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},pt.getTypeUrl=function(st){return st===void 0&&(st="type.googleapis.com"),st+"/onnx.TypeProto.Tensor"},pt}(),vt.Sequence=function(){function pt(st){if(st)for(var wt=Object.keys(st),Tt=0;Tt<wt.length;++Tt)st[wt[Tt]]!=null&&(this[wt[Tt]]=st[wt[Tt]])}return pt.prototype.elemType=null,pt.create=function(st){return new pt(st)},pt.encode=function(st,wt){return wt||(wt=et.create()),st.elemType!=null&&Object.hasOwnProperty.call(st,"elemType")&&at.onnx.TypeProto.encode(st.elemType,wt.uint32(10).fork()).ldelim(),wt},pt.encodeDelimited=function(st,wt){return this.encode(st,wt).ldelim()},pt.decode=function(st,wt){st instanceof d||(st=d.create(st));for(var Tt=wt===void 0?st.len:st.pos+wt,Ct=new at.onnx.TypeProto.Sequence;st.pos<Tt;){var jt=st.uint32();switch(jt>>>3){case 1:{Ct.elemType=at.onnx.TypeProto.decode(st,st.uint32());break}default:st.skipType(jt&7);break}}return Ct},pt.decodeDelimited=function(st){return st instanceof d||(st=new d(st)),this.decode(st,st.uint32())},pt.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.elemType!=null&&st.hasOwnProperty("elemType")){var wt=at.onnx.TypeProto.verify(st.elemType);if(wt)return"elemType."+wt}return null},pt.fromObject=function(st){if(st instanceof at.onnx.TypeProto.Sequence)return st;var wt=new at.onnx.TypeProto.Sequence;if(st.elemType!=null){if(typeof st.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");wt.elemType=at.onnx.TypeProto.fromObject(st.elemType)}return wt},pt.toObject=function(st,wt){wt||(wt={});var Tt={};return wt.defaults&&(Tt.elemType=null),st.elemType!=null&&st.hasOwnProperty("elemType")&&(Tt.elemType=at.onnx.TypeProto.toObject(st.elemType,wt)),Tt},pt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},pt.getTypeUrl=function(st){return st===void 0&&(st="type.googleapis.com"),st+"/onnx.TypeProto.Sequence"},pt}(),vt.Map=function(){function pt(st){if(st)for(var wt=Object.keys(st),Tt=0;Tt<wt.length;++Tt)st[wt[Tt]]!=null&&(this[wt[Tt]]=st[wt[Tt]])}return pt.prototype.keyType=0,pt.prototype.valueType=null,pt.create=function(st){return new pt(st)},pt.encode=function(st,wt){return wt||(wt=et.create()),st.keyType!=null&&Object.hasOwnProperty.call(st,"keyType")&&wt.uint32(8).int32(st.keyType),st.valueType!=null&&Object.hasOwnProperty.call(st,"valueType")&&at.onnx.TypeProto.encode(st.valueType,wt.uint32(18).fork()).ldelim(),wt},pt.encodeDelimited=function(st,wt){return this.encode(st,wt).ldelim()},pt.decode=function(st,wt){st instanceof d||(st=d.create(st));for(var Tt=wt===void 0?st.len:st.pos+wt,Ct=new at.onnx.TypeProto.Map;st.pos<Tt;){var jt=st.uint32();switch(jt>>>3){case 1:{Ct.keyType=st.int32();break}case 2:{Ct.valueType=at.onnx.TypeProto.decode(st,st.uint32());break}default:st.skipType(jt&7);break}}return Ct},pt.decodeDelimited=function(st){return st instanceof d||(st=new d(st)),this.decode(st,st.uint32())},pt.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.keyType!=null&&st.hasOwnProperty("keyType")&&!g.isInteger(st.keyType))return"keyType: integer expected";if(st.valueType!=null&&st.hasOwnProperty("valueType")){var wt=at.onnx.TypeProto.verify(st.valueType);if(wt)return"valueType."+wt}return null},pt.fromObject=function(st){if(st instanceof at.onnx.TypeProto.Map)return st;var wt=new at.onnx.TypeProto.Map;if(st.keyType!=null&&(wt.keyType=st.keyType|0),st.valueType!=null){if(typeof st.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");wt.valueType=at.onnx.TypeProto.fromObject(st.valueType)}return wt},pt.toObject=function(st,wt){wt||(wt={});var Tt={};return wt.defaults&&(Tt.keyType=0,Tt.valueType=null),st.keyType!=null&&st.hasOwnProperty("keyType")&&(Tt.keyType=st.keyType),st.valueType!=null&&st.hasOwnProperty("valueType")&&(Tt.valueType=at.onnx.TypeProto.toObject(st.valueType,wt)),Tt},pt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},pt.getTypeUrl=function(st){return st===void 0&&(st="type.googleapis.com"),st+"/onnx.TypeProto.Map"},pt}(),vt.Optional=function(){function pt(st){if(st)for(var wt=Object.keys(st),Tt=0;Tt<wt.length;++Tt)st[wt[Tt]]!=null&&(this[wt[Tt]]=st[wt[Tt]])}return pt.prototype.elemType=null,pt.create=function(st){return new pt(st)},pt.encode=function(st,wt){return wt||(wt=et.create()),st.elemType!=null&&Object.hasOwnProperty.call(st,"elemType")&&at.onnx.TypeProto.encode(st.elemType,wt.uint32(10).fork()).ldelim(),wt},pt.encodeDelimited=function(st,wt){return this.encode(st,wt).ldelim()},pt.decode=function(st,wt){st instanceof d||(st=d.create(st));for(var Tt=wt===void 0?st.len:st.pos+wt,Ct=new at.onnx.TypeProto.Optional;st.pos<Tt;){var jt=st.uint32();switch(jt>>>3){case 1:{Ct.elemType=at.onnx.TypeProto.decode(st,st.uint32());break}default:st.skipType(jt&7);break}}return Ct},pt.decodeDelimited=function(st){return st instanceof d||(st=new d(st)),this.decode(st,st.uint32())},pt.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.elemType!=null&&st.hasOwnProperty("elemType")){var wt=at.onnx.TypeProto.verify(st.elemType);if(wt)return"elemType."+wt}return null},pt.fromObject=function(st){if(st instanceof at.onnx.TypeProto.Optional)return st;var wt=new at.onnx.TypeProto.Optional;if(st.elemType!=null){if(typeof st.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");wt.elemType=at.onnx.TypeProto.fromObject(st.elemType)}return wt},pt.toObject=function(st,wt){wt||(wt={});var Tt={};return wt.defaults&&(Tt.elemType=null),st.elemType!=null&&st.hasOwnProperty("elemType")&&(Tt.elemType=at.onnx.TypeProto.toObject(st.elemType,wt)),Tt},pt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},pt.getTypeUrl=function(st){return st===void 0&&(st="type.googleapis.com"),st+"/onnx.TypeProto.Optional"},pt}(),vt.SparseTensor=function(){function pt(st){if(st)for(var wt=Object.keys(st),Tt=0;Tt<wt.length;++Tt)st[wt[Tt]]!=null&&(this[wt[Tt]]=st[wt[Tt]])}return pt.prototype.elemType=0,pt.prototype.shape=null,pt.create=function(st){return new pt(st)},pt.encode=function(st,wt){return wt||(wt=et.create()),st.elemType!=null&&Object.hasOwnProperty.call(st,"elemType")&&wt.uint32(8).int32(st.elemType),st.shape!=null&&Object.hasOwnProperty.call(st,"shape")&&at.onnx.TensorShapeProto.encode(st.shape,wt.uint32(18).fork()).ldelim(),wt},pt.encodeDelimited=function(st,wt){return this.encode(st,wt).ldelim()},pt.decode=function(st,wt){st instanceof d||(st=d.create(st));for(var Tt=wt===void 0?st.len:st.pos+wt,Ct=new at.onnx.TypeProto.SparseTensor;st.pos<Tt;){var jt=st.uint32();switch(jt>>>3){case 1:{Ct.elemType=st.int32();break}case 2:{Ct.shape=at.onnx.TensorShapeProto.decode(st,st.uint32());break}default:st.skipType(jt&7);break}}return Ct},pt.decodeDelimited=function(st){return st instanceof d||(st=new d(st)),this.decode(st,st.uint32())},pt.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.elemType!=null&&st.hasOwnProperty("elemType")&&!g.isInteger(st.elemType))return"elemType: integer expected";if(st.shape!=null&&st.hasOwnProperty("shape")){var wt=at.onnx.TensorShapeProto.verify(st.shape);if(wt)return"shape."+wt}return null},pt.fromObject=function(st){if(st instanceof at.onnx.TypeProto.SparseTensor)return st;var wt=new at.onnx.TypeProto.SparseTensor;if(st.elemType!=null&&(wt.elemType=st.elemType|0),st.shape!=null){if(typeof st.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");wt.shape=at.onnx.TensorShapeProto.fromObject(st.shape)}return wt},pt.toObject=function(st,wt){wt||(wt={});var Tt={};return wt.defaults&&(Tt.elemType=0,Tt.shape=null),st.elemType!=null&&st.hasOwnProperty("elemType")&&(Tt.elemType=st.elemType),st.shape!=null&&st.hasOwnProperty("shape")&&(Tt.shape=at.onnx.TensorShapeProto.toObject(st.shape,wt)),Tt},pt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},pt.getTypeUrl=function(st){return st===void 0&&(st="type.googleapis.com"),st+"/onnx.TypeProto.SparseTensor"},pt}(),vt}(),$t.OperatorSetIdProto=function(){function vt(b){if(b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.domain="",vt.prototype.version=g.Long?g.Long.fromBits(0,0,!1):0,vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){return pt||(pt=et.create()),b.domain!=null&&Object.hasOwnProperty.call(b,"domain")&&pt.uint32(10).string(b.domain),b.version!=null&&Object.hasOwnProperty.call(b,"version")&&pt.uint32(16).int64(b.version),pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.OperatorSetIdProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.domain=b.string();break}case 2:{wt.version=b.int64();break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){return typeof b!="object"||b===null?"object expected":b.domain!=null&&b.hasOwnProperty("domain")&&!g.isString(b.domain)?"domain: string expected":b.version!=null&&b.hasOwnProperty("version")&&!g.isInteger(b.version)&&!(b.version&&g.isInteger(b.version.low)&&g.isInteger(b.version.high))?"version: integer|Long expected":null},vt.fromObject=function(b){if(b instanceof at.onnx.OperatorSetIdProto)return b;var pt=new at.onnx.OperatorSetIdProto;return b.domain!=null&&(pt.domain=String(b.domain)),b.version!=null&&(g.Long?(pt.version=g.Long.fromValue(b.version)).unsigned=!1:typeof b.version=="string"?pt.version=parseInt(b.version,10):typeof b.version=="number"?pt.version=b.version:typeof b.version=="object"&&(pt.version=new g.LongBits(b.version.low>>>0,b.version.high>>>0).toNumber())),pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if(pt.defaults)if(st.domain="",g.Long){var wt=new g.Long(0,0,!1);st.version=pt.longs===String?wt.toString():pt.longs===Number?wt.toNumber():wt}else st.version=pt.longs===String?"0":0;return b.domain!=null&&b.hasOwnProperty("domain")&&(st.domain=b.domain),b.version!=null&&b.hasOwnProperty("version")&&(typeof b.version=="number"?st.version=pt.longs===String?String(b.version):b.version:st.version=pt.longs===String?g.Long.prototype.toString.call(b.version):pt.longs===Number?new g.LongBits(b.version.low>>>0,b.version.high>>>0).toNumber():b.version),st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.OperatorSetIdProto"},vt}(),$t.OperatorStatus=function(){var vt={},b=Object.create(vt);return b[vt[0]="EXPERIMENTAL"]=0,b[vt[1]="STABLE"]=1,b}(),$t.FunctionProto=function(){function vt(b){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],b)for(var pt=Object.keys(b),st=0;st<pt.length;++st)b[pt[st]]!=null&&(this[pt[st]]=b[pt[st]])}return vt.prototype.name="",vt.prototype.input=g.emptyArray,vt.prototype.output=g.emptyArray,vt.prototype.attribute=g.emptyArray,vt.prototype.attributeProto=g.emptyArray,vt.prototype.node=g.emptyArray,vt.prototype.docString="",vt.prototype.opsetImport=g.emptyArray,vt.prototype.domain="",vt.create=function(b){return new vt(b)},vt.encode=function(b,pt){if(pt||(pt=et.create()),b.name!=null&&Object.hasOwnProperty.call(b,"name")&&pt.uint32(10).string(b.name),b.input!=null&&b.input.length)for(var st=0;st<b.input.length;++st)pt.uint32(34).string(b.input[st]);if(b.output!=null&&b.output.length)for(var st=0;st<b.output.length;++st)pt.uint32(42).string(b.output[st]);if(b.attribute!=null&&b.attribute.length)for(var st=0;st<b.attribute.length;++st)pt.uint32(50).string(b.attribute[st]);if(b.node!=null&&b.node.length)for(var st=0;st<b.node.length;++st)at.onnx.NodeProto.encode(b.node[st],pt.uint32(58).fork()).ldelim();if(b.docString!=null&&Object.hasOwnProperty.call(b,"docString")&&pt.uint32(66).string(b.docString),b.opsetImport!=null&&b.opsetImport.length)for(var st=0;st<b.opsetImport.length;++st)at.onnx.OperatorSetIdProto.encode(b.opsetImport[st],pt.uint32(74).fork()).ldelim();if(b.domain!=null&&Object.hasOwnProperty.call(b,"domain")&&pt.uint32(82).string(b.domain),b.attributeProto!=null&&b.attributeProto.length)for(var st=0;st<b.attributeProto.length;++st)at.onnx.AttributeProto.encode(b.attributeProto[st],pt.uint32(90).fork()).ldelim();return pt},vt.encodeDelimited=function(b,pt){return this.encode(b,pt).ldelim()},vt.decode=function(b,pt){b instanceof d||(b=d.create(b));for(var st=pt===void 0?b.len:b.pos+pt,wt=new at.onnx.FunctionProto;b.pos<st;){var Tt=b.uint32();switch(Tt>>>3){case 1:{wt.name=b.string();break}case 4:{wt.input&&wt.input.length||(wt.input=[]),wt.input.push(b.string());break}case 5:{wt.output&&wt.output.length||(wt.output=[]),wt.output.push(b.string());break}case 6:{wt.attribute&&wt.attribute.length||(wt.attribute=[]),wt.attribute.push(b.string());break}case 11:{wt.attributeProto&&wt.attributeProto.length||(wt.attributeProto=[]),wt.attributeProto.push(at.onnx.AttributeProto.decode(b,b.uint32()));break}case 7:{wt.node&&wt.node.length||(wt.node=[]),wt.node.push(at.onnx.NodeProto.decode(b,b.uint32()));break}case 8:{wt.docString=b.string();break}case 9:{wt.opsetImport&&wt.opsetImport.length||(wt.opsetImport=[]),wt.opsetImport.push(at.onnx.OperatorSetIdProto.decode(b,b.uint32()));break}case 10:{wt.domain=b.string();break}default:b.skipType(Tt&7);break}}return wt},vt.decodeDelimited=function(b){return b instanceof d||(b=new d(b)),this.decode(b,b.uint32())},vt.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.name!=null&&b.hasOwnProperty("name")&&!g.isString(b.name))return"name: string expected";if(b.input!=null&&b.hasOwnProperty("input")){if(!Array.isArray(b.input))return"input: array expected";for(var pt=0;pt<b.input.length;++pt)if(!g.isString(b.input[pt]))return"input: string[] expected"}if(b.output!=null&&b.hasOwnProperty("output")){if(!Array.isArray(b.output))return"output: array expected";for(var pt=0;pt<b.output.length;++pt)if(!g.isString(b.output[pt]))return"output: string[] expected"}if(b.attribute!=null&&b.hasOwnProperty("attribute")){if(!Array.isArray(b.attribute))return"attribute: array expected";for(var pt=0;pt<b.attribute.length;++pt)if(!g.isString(b.attribute[pt]))return"attribute: string[] expected"}if(b.attributeProto!=null&&b.hasOwnProperty("attributeProto")){if(!Array.isArray(b.attributeProto))return"attributeProto: array expected";for(var pt=0;pt<b.attributeProto.length;++pt){var st=at.onnx.AttributeProto.verify(b.attributeProto[pt]);if(st)return"attributeProto."+st}}if(b.node!=null&&b.hasOwnProperty("node")){if(!Array.isArray(b.node))return"node: array expected";for(var pt=0;pt<b.node.length;++pt){var st=at.onnx.NodeProto.verify(b.node[pt]);if(st)return"node."+st}}if(b.docString!=null&&b.hasOwnProperty("docString")&&!g.isString(b.docString))return"docString: string expected";if(b.opsetImport!=null&&b.hasOwnProperty("opsetImport")){if(!Array.isArray(b.opsetImport))return"opsetImport: array expected";for(var pt=0;pt<b.opsetImport.length;++pt){var st=at.onnx.OperatorSetIdProto.verify(b.opsetImport[pt]);if(st)return"opsetImport."+st}}return b.domain!=null&&b.hasOwnProperty("domain")&&!g.isString(b.domain)?"domain: string expected":null},vt.fromObject=function(b){if(b instanceof at.onnx.FunctionProto)return b;var pt=new at.onnx.FunctionProto;if(b.name!=null&&(pt.name=String(b.name)),b.input){if(!Array.isArray(b.input))throw TypeError(".onnx.FunctionProto.input: array expected");pt.input=[];for(var st=0;st<b.input.length;++st)pt.input[st]=String(b.input[st])}if(b.output){if(!Array.isArray(b.output))throw TypeError(".onnx.FunctionProto.output: array expected");pt.output=[];for(var st=0;st<b.output.length;++st)pt.output[st]=String(b.output[st])}if(b.attribute){if(!Array.isArray(b.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");pt.attribute=[];for(var st=0;st<b.attribute.length;++st)pt.attribute[st]=String(b.attribute[st])}if(b.attributeProto){if(!Array.isArray(b.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");pt.attributeProto=[];for(var st=0;st<b.attributeProto.length;++st){if(typeof b.attributeProto[st]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");pt.attributeProto[st]=at.onnx.AttributeProto.fromObject(b.attributeProto[st])}}if(b.node){if(!Array.isArray(b.node))throw TypeError(".onnx.FunctionProto.node: array expected");pt.node=[];for(var st=0;st<b.node.length;++st){if(typeof b.node[st]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");pt.node[st]=at.onnx.NodeProto.fromObject(b.node[st])}}if(b.docString!=null&&(pt.docString=String(b.docString)),b.opsetImport){if(!Array.isArray(b.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");pt.opsetImport=[];for(var st=0;st<b.opsetImport.length;++st){if(typeof b.opsetImport[st]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");pt.opsetImport[st]=at.onnx.OperatorSetIdProto.fromObject(b.opsetImport[st])}}return b.domain!=null&&(pt.domain=String(b.domain)),pt},vt.toObject=function(b,pt){pt||(pt={});var st={};if((pt.arrays||pt.defaults)&&(st.input=[],st.output=[],st.attribute=[],st.node=[],st.opsetImport=[],st.attributeProto=[]),pt.defaults&&(st.name="",st.docString="",st.domain=""),b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.input&&b.input.length){st.input=[];for(var wt=0;wt<b.input.length;++wt)st.input[wt]=b.input[wt]}if(b.output&&b.output.length){st.output=[];for(var wt=0;wt<b.output.length;++wt)st.output[wt]=b.output[wt]}if(b.attribute&&b.attribute.length){st.attribute=[];for(var wt=0;wt<b.attribute.length;++wt)st.attribute[wt]=b.attribute[wt]}if(b.node&&b.node.length){st.node=[];for(var wt=0;wt<b.node.length;++wt)st.node[wt]=at.onnx.NodeProto.toObject(b.node[wt],pt)}if(b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.opsetImport&&b.opsetImport.length){st.opsetImport=[];for(var wt=0;wt<b.opsetImport.length;++wt)st.opsetImport[wt]=at.onnx.OperatorSetIdProto.toObject(b.opsetImport[wt],pt)}if(b.domain!=null&&b.hasOwnProperty("domain")&&(st.domain=b.domain),b.attributeProto&&b.attributeProto.length){st.attributeProto=[];for(var wt=0;wt<b.attributeProto.length;++wt)st.attributeProto[wt]=at.onnx.AttributeProto.toObject(b.attributeProto[wt],pt)}return st},vt.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},vt.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.FunctionProto"},vt}(),$t}(),s.exports=at});function Fr(a,s){if(!a)throw new Error(typeof s=="string"?s:s())}function sn$1(a){return new TextDecoder().decode(a)}var ye$1,hr$1,pi$1,Ze$1,jn$1,We$1,it,U$2,an$1,mr$1,br,gr$1,fe$1=L$1(()=>{zn$1(),Zo(),ye$1=Ar(Cr()),yr(),hr$1=class{static arraysEqual(a,s){if(a.length!==s.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==s[c])return!1;return!0}},pi$1=class{static preprocessInputShapes(a,s){let c=a.length===1?[1,a[0]]:a,d=s.length===1?[s[0],1]:s;return[c,d]}static postprocessOutputShape(a,s,c){s===1&&a.splice(a.length-2,1),c===1&&a.pop()}static calcMatMulShape(a,s){return a[1]!==s[0]?void 0:[a[0],s[1]]}},Ze$1=class Bx{static calcShape(s,c,d=!1){let et=s.length,g=c.length;if(et===0)return c;if(g===0)return s;let at=Math.max(s.length,c.length),$t=new Array(at);if(d){if(et<2||g<2)return;let vt=pi$1.calcMatMulShape([s[et-2],s[et-1]],[c[g-2],c[g-1]]);if(vt===void 0)return;[$t[at-2],$t[at-1]]=vt}for(let vt=d?3:1;vt<=at;vt++){let b=et-vt<0?1:s[et-vt],pt=g-vt<0?1:c[g-vt];if(b!==pt&&b>1&&pt>1)return;$t[at-vt]=Math.max(b,pt)}return $t}static index(s,c){let d=new Array(c.length);return Bx.fillIndex(s,c,d),d}static fillIndex(s,c,d){let et=s.length-c.length;for(let g=0;g<c.length;g++)d[g]=s[et+g]%c[g]}static calc(s,c,d,et,g){let at=Bx.calcShape(s.dims,c.dims);if(at){if(et&&!U$2.areEqual(at,s.dims))return;let $t=U$2.size(at),vt=et?s:new $e(at,g||s.type);if(at.length===0)vt.set([],d(s.get([]),c.get([])));else{let b=new Array(at.length),pt=new Array(s.dims.length),st=new Array(c.dims.length),wt=0,Tt=0,Ct=!1,jt=!1;s.dims.length===0&&(wt=s.get([]),Ct=!0),c.dims.length===0&&(Tt=c.get([]),jt=!0);let Lt;for(let Ht=0;Ht<$t;Ht++){Lt=Ht;for(let Gt=at.length-1;Gt>=0;Gt--)b[Gt]=Lt%at[Gt],Lt=Math.floor(Lt/at[Gt]);Ct||(Bx.fillIndex(b,s.dims,pt),wt=s.get(pt)),jt||(Bx.fillIndex(b,c.dims,st),Tt=c.get(st)),vt.set(b,d(wt,Tt))}}return vt}}static isValidBroadcast(s,c){let d=s.length,et=c.length;if(d>et)return!1;for(let g=1;g<=d;g++)if(s[d-g]!==1&&s[d-g]!==c[et-g])return!1;return!0}static getBroadcastDims(s,c){let d=s.length,et=[];for(let g=0;g<d;g++){let at=d-1-g,$t=s[at]||1;(c[c.length-1-g]||1)>1&&$t===1&&et.unshift(at)}return et}},jn$1=class{static getShapeOfGemmResult(a,s,c,d,et){if(a.length!==2||c.length!==2)throw new Error("shape need to be of size 2");let g,at,$t;s?(g=a[1],at=a[0]):(g=a[0],at=a[1]);let vt=-1;if(d?($t=c[0],vt=1):($t=c[1],vt=0),c[vt]!==at)throw new Error("dimension mismatch");if(g<=0||$t<=0||at<=0)throw new Error("invalid shape specified");if(et&&!Ze$1.isValidBroadcast(et,[g,$t]))throw new Error("gemm: invalid bias shape for broadcast");return[g,$t,at]}},We$1=class F2{static tensorDataTypeFromProto(s){switch(s){case ye$1.onnx.TensorProto.DataType.INT8:return"int8";case ye$1.onnx.TensorProto.DataType.UINT8:return"uint8";case ye$1.onnx.TensorProto.DataType.BOOL:return"bool";case ye$1.onnx.TensorProto.DataType.INT16:return"int16";case ye$1.onnx.TensorProto.DataType.UINT16:return"uint16";case ye$1.onnx.TensorProto.DataType.INT32:return"int32";case ye$1.onnx.TensorProto.DataType.UINT32:return"uint32";case ye$1.onnx.TensorProto.DataType.FLOAT:return"float32";case ye$1.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye$1.onnx.TensorProto.DataType.STRING:return"string";case ye$1.onnx.TensorProto.DataType.INT64:return"int32";case ye$1.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye$1.onnx.TensorProto.DataType[s]}`)}}static tensorDataTypeStringToEnum(s){switch(s){case"int8":return ye$1.onnx.TensorProto.DataType.INT8;case"uint8":return ye$1.onnx.TensorProto.DataType.UINT8;case"bool":return ye$1.onnx.TensorProto.DataType.BOOL;case"int16":return ye$1.onnx.TensorProto.DataType.INT16;case"uint16":return ye$1.onnx.TensorProto.DataType.UINT16;case"int32":return ye$1.onnx.TensorProto.DataType.INT32;case"uint32":return ye$1.onnx.TensorProto.DataType.UINT32;case"float32":return ye$1.onnx.TensorProto.DataType.FLOAT;case"float64":return ye$1.onnx.TensorProto.DataType.DOUBLE;case"string":return ye$1.onnx.TensorProto.DataType.STRING;case"int64":return ye$1.onnx.TensorProto.DataType.INT64;case"uint64":return ye$1.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${s}`)}}static tensorDimsFromProto(s){return s.map(c=>Vt.isLong(c)?c.toNumber():c)}static tensorValueTypeFromProto(s){return{tensorType:F2.tensorDataTypeFromProto(s.elemType),shape:{dims:F2.tensorDimsFromProto(s.shape.dim.map(c=>c.dimValue))}}}static tensorDimsFromORTFormat(s){let c=[];for(let d=0;d<s.dimsLength();d++)c.push(it.longToNumber(s.dims(d)));return c}static tensorAttributesFromORTFormat(s){let c=[];for(let d=0;d<s.attributesLength();d++)c.push(s.attributes(d));return c}},it=class{static longToNumber(a,s){return Vt.isLong(a)?a.toNumber():a instanceof _$1.Long?Vt.fromValue({low:a.low,high:a.high,unsigned:s??!1}).toNumber():a}static isLong(a){return Vt.isLong(a)||a instanceof _$1.Long}},U$2=class b${static size(s){return b$.getSizeFromDimensionRange(s,0,s.length)}static sizeFromDimension(s,c){if(c<0||c>s.length)throw new Error(`invalid dimension of ${c} for sizeFromDimension as Tensor has ${s.length} dimensions.`);return b$.getSizeFromDimensionRange(s,c,s.length)}static sizeToDimension(s,c){if(c<0||c>s.length)throw new Error(`invalid dimension of ${c} for sizeToDimension as Tensor has ${s.length} dimensions.`);return b$.getSizeFromDimensionRange(s,0,c)}static getSizeFromDimensionRange(s,c,d){let et=1;for(let g=c;g<d;g++){if(s[g]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");et*=s[g]}return et}static computeStrides(s){let c=s.length;if(c===0)return[];if(c===1)return[1];let d=new Array(c);d[c-1]=1,d[c-2]=s[c-1];for(let et=c-3;et>=0;--et)d[et]=d[et+1]*s[et+1];return d}static transpose(s){return s.slice().reverse()}static indicesToOffset(s,c,d){d===void 0&&(d=s.length);let et=0;for(let g=0;g<d;++g)et+=c[g]*s[g];return et}static offsetToIndices(s,c){let d=c.length;if(d===0)return[];if(d===1)return[s*c[0]];let et=new Array(c.length);for(let g=0;g<et.length-1;++g)et[g]=Math.floor(s/c[g]),s-=et[g]*c[g];return et[et.length-1]=s,et}static normalizeAxis(s,c){if(s<-c&&s>=c)throw new Error("unsupported axis for this operation.");return s<0?s+c:s}static normalizeAxes(s,c){return s.map(d=>this.normalizeAxis(d,c))}static incrementIndex(s,c,d){if(c.length===0||s.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(d===void 0)d=c.length;else if(d<=0||d>c.length)throw new Error("Incorrect axis to increment on");for(let et=d-1;et>=0&&(s[et]++,!(s[et]<c[et]));--et)s[et]=0}static calculateReshapedDims(s,c){if(c.length===0){if(s.length===0||b$.size(s)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let d=c.length,et=new Array(d),g=-1,at=1;for(let vt=0;vt<d;vt++){if(c[vt]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(c[vt]===-1){if(g!==-1)throw new Error("at most one dimension in shape hints can be -1");g=vt}else{if(c[vt]===0){if(vt>=s.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");et[vt]=s[vt]}else et[vt]=c[vt];at*=et[vt]}}let $t=b$.size(s);if(g!==-1){if($t%at!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${s}] Output shape: [${c}]`);et[g]=$t/at}else if(at!==$t)throw new Error("reshapedDims and originalDims don't have matching sizes");return et}static sortBasedOnPerm(s,c){return c?c.map(d=>s[d]):s.slice().reverse()}static padShape(s,c){let d=s.length;return s.map((et,g)=>et+c[g]+c[g+d])}static areEqual(s,c){return s.length!==c.length?!1:s.every((d,et)=>d===c[et])}static validateDimsAndCalcSize(s){if(s.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let c=1;for(let d of s){if(!Number.isInteger(d))throw new TypeError(`Invalid shape: ${d} is not an integer`);if(d<0||d>2147483647)throw new TypeError(`Invalid shape: length ${d} is not allowed`);c*=d}return c}static flattenShape(s,c){c<0&&(c+=s.length);let d=s.reduce((g,at)=>g*at,1),et=s.slice(c).reduce((g,at)=>g*at,1);return[d/et,et]}static squeezeShape(s,c){let d=new Array;c=b$.normalizeAxes(c,s.length);for(let et=0;et<s.length;et++){let g=c.indexOf(et)>=0;if(g&&s[et]!==1)throw new Error("squeeze an axis of size different than 1");(c.length===0&&s[et]>1||c.length>0&&!g)&&d.push(s[et])}return d}static unsqueezeShape(s,c){let d=new Array(s.length+c.length);d.fill(0);for(let g=0;g<c.length;g++){let at=b$.normalizeAxis(c[g],d.length);if(at>=d.length)throw new Error("'axes' has an out of range axis");if(d[at]!==0)throw new Error("'axes' has a duplicate axis");d[at]=1}let et=0;for(let g=0;g<d.length;g++)d[g]===0&&(d[g]=s[et++]);if(et!==s.length)throw new Error("the unsqueezed dimension could not be established");return d}},an$1=class US{static splitShape(s,c,d,et){if(d.length===0){if(!et)throw new Error("need to know number of outputs when the 'split' attribute is not specified");US.determineSplit(s[c],et,d)}let g=[],at=[0];for(let $t=0;$t<d.length;++$t){$t!==0&&at.push(at[$t-1]+d[$t-1]);let vt=s.slice();vt[c]=d[$t],g.push(vt)}return[g,at]}static determineSplit(s,c,d){if(s%c!==0)throw new Error("cannot split tensor to equal sized parts");for(let et=0;et<c;++et)d.push(s/c)}},mr$1=class zx{static adjustPoolAttributes(s,c,d,et,g,at){if(!s&&d.length!==c.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(s)for(let $t=0;$t<c.length-2;$t++)$t>=d.length?d.push(c[$t+2]):d[$t]=c[$t+2];for(let $t=0;$t<d.length;$t++)if($t<et.length){if(et[$t]<0)throw new Error("strides should be greater than or equal to 1")}else et.push(1);for(let $t=0;$t<d.length;$t++)if($t<g.length){if(g[$t]<0)throw new Error("dilations should be greater than or equal to 1")}else g.push(1);for(let $t=0;$t<d.length*2;$t++)if($t<at.length){if(at[$t]<0)throw new Error("pad should be greater than or equal to 1")}else at.push(0);for(let $t=0;$t<d.length;$t++){if(d[$t]<=0)throw new Error("kernel shapes need to be greater than 0");if(at[$t]>=d[$t]||at[$t+d.length]>=d[$t])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(s,c,d,et,g,at){if(at){if(g.length!==2*(s.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(c.length!==s.length-2)throw new Error("length of strides should be the length of data dimensions");if(et.length!==s.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let $t=0;$t<s.length-2;$t++)zx.adjustPadAndReturnShape(s[$t+2],c[$t],d[$t],et[$t],g,$t,$t+s.length-2,at)}}static computePoolOutputShape(s,c,d,et,g,at,$t){if(c.length<=0)throw new Error("input shape must be of size greater than 0");let vt=[c[0],c[1]];return zx.computeShapeHelper(s,c,vt,d,et,g,at,$t),vt}static computeConvOutputShape(s,c,d,et,g,at,$t){if(s.length<=0||c.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let vt=[s[0],c[0]];return zx.computeShapeHelper(!1,s,vt,d,et,g,at,$t),vt}static computeShapeHelper(s,c,d,et,g,at,$t,vt){if(s)for(let b=0;b<c.length-2;b++)d.push(1);else for(let b=0;b<c.length-2;b++)d.push(zx.adjustPadAndReturnShape(c[b+2],et[b],g[b],at[b],$t,b,b+c.length-2,vt))}static adjustPadAndReturnShape(s,c,d,et,g,at,$t,vt){let b=d*(et-1)+1;if(vt&&vt!=="NOTSET")switch(vt){case"VALID":return g[at]=0,g[$t]=0,Math.floor((s-b)/c+1);case"SAME_LOWER":case"SAME_UPPER":if(d!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let pt=((s+c-1)/c-1)*c+et-s;return g[at]=Math.floor(vt==="SAME_LOWER"?(pt+1)/2:pt/2),g[$t]=pt-g[at],Math.floor((s+pt-et)/c+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((s+g[at]+g[$t]-b)/c+1)}},br=-34028234663852886e22,gr$1=34028234663852886e22});function Hd$1(a){switch(a){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${a}`)}}function Fu$1(a){switch(a){case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.BOOL:return 1;case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT16:return 2;case ne.onnx.TensorProto.DataType.FLOAT:case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.UINT32:return 4;case ne.onnx.TensorProto.DataType.INT64:case ne.onnx.TensorProto.DataType.DOUBLE:case ne.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne.onnx.TensorProto.DataType[a]}`)}}function qd$1(a,s){return new(Bu$1(s))(a)}function Bu$1(a){switch(a){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi$1(a,s){if(s===ne.onnx.TensorProto.DataType.INT64||s===di$1.TensorDataType.INT64){if(a.greaterThanOrEqual(2147483648)||a.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(s===ne.onnx.TensorProto.DataType.UINT32||s===di$1.TensorDataType.UINT32||s===ne.onnx.TensorProto.DataType.UINT64||s===di$1.TensorDataType.UINT64){if(a.greaterThanOrEqual(4294967296)||a.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ne.onnx.TensorProto.DataType[s]}`);return a.toNumber()}function $u$1(a,s,c){switch(s){case ne.onnx.TensorProto.DataType.BOOL:case ne.onnx.TensorProto.DataType.UINT8:return a.getUint8(c);case ne.onnx.TensorProto.DataType.INT8:return a.getInt8(c);case ne.onnx.TensorProto.DataType.UINT16:return a.getUint16(c,!0);case ne.onnx.TensorProto.DataType.INT16:return a.getInt16(c,!0);case ne.onnx.TensorProto.DataType.FLOAT:return a.getFloat32(c,!0);case ne.onnx.TensorProto.DataType.INT32:return a.getInt32(c,!0);case ne.onnx.TensorProto.DataType.UINT32:return a.getUint32(c,!0);case ne.onnx.TensorProto.DataType.INT64:return hi$1(Vt.fromBits(a.getUint32(c,!0),a.getUint32(c+4,!0),!1),s);case ne.onnx.TensorProto.DataType.DOUBLE:return a.getFloat64(c,!0);case ne.onnx.TensorProto.DataType.UINT64:return hi$1(Vt.fromBits(a.getUint32(c,!0),a.getUint32(c+4,!0),!0),s);default:throw new Error(`cannot read from DataView for type ${ne.onnx.TensorProto.DataType[s]}`)}}var ku$1,ne,di$1,$e,yr=L$1(()=>{ku$1=Ar(Os$1()),Zo(),tn$1(),ne=Ar(Cr()),fe$1(),di$1=V.experimental.fbs,$e=class zw{constructor(s,c,d,et,g,at=ku$1.Guid.create()){this.dims=s,this.type=c,this.dataProvider=d,this.asyncDataProvider=et,this.cache=g,this.dataId=at,this.size=U$2.validateDimsAndCalcSize(s);let $t=this.size,vt=d===void 0&&et===void 0&&g===void 0;if(g!==void 0&&g.length!==$t)throw new RangeError("Input dims doesn't match data length.");if(c==="string"){if(g!==void 0&&(!Array.isArray(g)||!g.every(b=>typeof b=="string")))throw new TypeError("cache should be a string array");vt&&(this.cache=new Array($t))}else{if(g!==void 0){let b=Bu$1(c);if(!(g instanceof b))throw new TypeError(`cache should be type ${b.name}`)}if(vt){let b=new ArrayBuffer($t*Hd$1(c));this.cache=qd$1(b,c)}}}get data(){if(this.cache===void 0){let s=this.dataProvider(this.dataId);if(s.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=s}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(s){return this.data[U$2.indicesToOffset(s,this.strides)]}set(s,c){this.data[U$2.indicesToOffset(s,this.strides)]=c}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U$2.computeStrides(this.dims)),this._strides}static fromProto(s){if(!s)throw new Error("cannot construct Value from an empty tensor");let c=We$1.tensorDataTypeFromProto(s.dataType),d=We$1.tensorDimsFromProto(s.dims),et=new zw(d,c);if(c==="string")s.stringData.forEach((g,at)=>{et.data[at]=sn$1(g)});else if(s.rawData&&typeof s.rawData.byteLength=="number"&&s.rawData.byteLength>0){let g=et.data,at=new DataView(s.rawData.buffer,s.rawData.byteOffset,s.rawData.byteLength),$t=Fu$1(s.dataType),vt=s.rawData.byteLength/$t;if(s.rawData.byteLength%$t!==0)throw new Error("invalid buffer length");if(g.length!==vt)throw new Error("buffer length mismatch");for(let b=0;b<vt;b++){let pt=$u$1(at,s.dataType,b*$t);g[b]=pt}}else{let g;switch(s.dataType){case ne.onnx.TensorProto.DataType.FLOAT:g=s.floatData;break;case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.INT16:case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.BOOL:g=s.int32Data;break;case ne.onnx.TensorProto.DataType.INT64:g=s.int64Data;break;case ne.onnx.TensorProto.DataType.DOUBLE:g=s.doubleData;break;case ne.onnx.TensorProto.DataType.UINT32:case ne.onnx.TensorProto.DataType.UINT64:g=s.uint64Data;break;default:throw new Error("unspecific error")}if(g==null)throw new Error("failed to populate data from a tensorproto value");let at=et.data;if(at.length!==g.length)throw new Error("array length mismatch");for(let $t=0;$t<g.length;$t++){let vt=g[$t];Vt.isLong(vt)?at[$t]=hi$1(vt,s.dataType):at[$t]=vt}}return et}static fromData(s,c,d){return new zw(c,d,void 0,void 0,s)}static fromOrtTensor(s){if(!s)throw new Error("cannot construct Value from an empty tensor");let c=We$1.tensorDimsFromORTFormat(s),d=We$1.tensorDataTypeFromProto(s.dataType()),et=new zw(c,d);if(d==="string")for(let g=0;g<s.stringDataLength();g++)et.data[g]=s.stringData(g);else if(s.rawDataArray()&&typeof s.rawDataLength()=="number"&&s.rawDataLength()>0){let g=et.data,at=new DataView(s.rawDataArray().buffer,s.rawDataArray().byteOffset,s.rawDataLength()),$t=Fu$1(s.dataType()),vt=s.rawDataLength()/$t;if(s.rawDataLength()%$t!==0)throw new Error("invalid buffer length");if(g.length!==vt)throw new Error("buffer length mismatch");for(let b=0;b<vt;b++){let pt=$u$1(at,s.dataType(),b*$t);g[b]=pt}}return et}}});function H(a){return a===1?jd$1:Yd$1}function Nu$1(a){let s=H(a);return`${s.version}
      precision highp float;
      ${s.attribute} vec3 position;
      ${s.attribute} vec2 textureCoord;

      ${s.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Ru$1(a){let s=H(a);return`${s.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${s.varyingFrag} vec2 TexCoords;
    ${s.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Mu$1(a,s){let c=H(a);return`
  void main() {
    int indices[${s}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${c.output} = result;
  }
  `}var jd$1,Yd$1,we$1=L$1(()=>{jd$1={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd$1={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L$1(()=>{});async function mi$1(a,s=d=>0,c){return new Promise((d,et)=>{let g=0,at=()=>{if(a()){d();return}g++;let $t=s(g);setTimeout(at,$t)};at()})}function Yn$1(a){return Fr(typeof a<"u"&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)}function Gu$1(a){return Fr(typeof a<"u"&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)+"AtOutCoords"}function $r(a,s){let c=JSON.parse(JSON.stringify(a));return c=s,c}function kr$1(a,s){return s.map(c=>a[c]).join(", ")}function Qe(a){if(a<=1)return"int";if(a===2)return"ivec2";if(a===3)return"ivec3";if(a===4)return"ivec4";if(a===5)return"ivec5";if(a===6)return"ivec6";throw Error(`GPU for rank ${a} is not yet supported`)}function Dt$1(a=6){return["x","y","z","w","u","v"].slice(0,a)}var Bt$1=L$1(()=>{fe$1()});function Xd$1(a,s){return Dt$1(s).map(c=>`${a}.${c}`)}function Br$1(a,s){return s===1?[a]:Xd$1(a,s)}function Nt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Tr=L$1(()=>{Bt$1()});function Jd(a,s,c){if(a===0)return"false";if(a===1)return`rc > ${s[0]}`;let d="";for(let et=a-2;et<a;et++)d+=`${c[et]} >= ${s[et-a+2]}`,et<a-1&&(d+="||");return d}function Zd(a,s){let c=a.length;if(c===0)return"getA(), 0, 0, 0";if(c===1)return`getA(rc),
            rc + 1 >= ${a[0]} ? 0. : getA(rc + 1),
            0, 0`;let d="r, c",et="r, cp1",g="rp1, c",at="rp1, cp1",$t="";if(c>2)for(let vt=0;vt<c-2;++vt)$t=$t+`${s[vt]},`;return`getA(${$t}${d}),
          rEdge ? 0. : getA(${$t}${g}),
          cEdge ? 0. : getA(${$t}${et}),
          rEdge || cEdge ? 0. : getA(${$t}${at})`}function Qd(a,s,c,d){return a===0||a===1?"":`
    int r = ${s[a-2]};
    int c = ${s[a-1]};
    int rp1 = ${s[a-2]} + 1;
    int cp1 = ${s[a-1]} + 1;
    bool rEdge = rp1 >= ${d};
    bool cEdge = cp1 >= ${c};
    `}var Uu$1,Kd$1,zu$1,Vu$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Uu$1={name:"pack",inputNames:["A"],inputTypes:[1]},Kd$1=(a,s)=>{let c=H(a.session.backend.glContext.version),d=s.dims,et=d.length,g=s.dims.length,at=Qe(g),$t=Br$1("rc",g),vt=Qd(g,$t,d[d.length-2],d[d.length-1]),b;et===0?b=[1,1]:et===1?b=[d[0],1]:b=[d[g-1],d[g-2]];let pt=Jd(g,b,$t),st=Zd(d,$t),wt=`
        void main() {
          ${at} rc = getOutputCoords();

          if(${pt}) {
            ${c.output} = vec4(0);
          } else {
            ${vt}

            ${c.output} = vec4(${st});
          }
        }
      `;return{...Uu$1,hasMain:!0,output:{dims:s.dims,type:s.type,textureType:2},shaderSource:wt}},zu$1=(a,s)=>({...Uu$1,get:()=>Kd$1(a,s)})});function bi(a){if(a.length===0)return[1,1,1];let s=1;for(let c=0;c<a.length-2;++c)s*=a[c];return[s,a.length>1?a[a.length-2]:1,a[a.length-1]]}function Hu$1(a,s){let c=!1;return a.length===0||s.length===0?c=!0:a.length<2||s.length<2?c=a[a.length-1]===s[s.length-1]:c=a[a.length-1]===s[s.length-1]&&a[a.length-2]===s[s.length-2],c}function rh(a){let s=U$2.computeStrides(a),c=["b","r","c"],d="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${s.map((et,g)=>{let at=`int ${c[g]} = ${d} / ${et}`,$t=g===s.length-1?`int ${c[g+1]} = ${d} - ${c[g]} * ${et}`:`index -= ${c[g]} * ${et}`;return`${at}; ${$t};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function nh(a){let s=U$2.computeStrides(a);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${s[0]} + coords.z * ${s[1]} + coords.y;
  }
`}var eh,th,Wu$1,qu$1=L$1(()=>{fe$1(),we$1(),ae(),Tr(),eh=a=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${a}`}),th=(a,s,c,d)=>{let et=s.dims,g=d,at="";for(let b=0;b<4;b++){let pt="";switch(b){case 0:pt="outputCoords = rc;";break;case 1:pt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:pt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:pt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}at+=`
        ${pt}
        ${b>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${b}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${b>0?"}":""}
      `}let $t=H(a.session.backend.glContext.version),vt=`
      ${rh(et)}
      ${nh(g)}
      ${Nt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${g[2]};
        int cols = ${g[1]};

        ${at}
        ${$t.output} = result;
      }
    `;return{...c,output:{dims:g,type:s.type,textureType:2},shaderSource:vt,hasMain:!0}},Wu$1=(a,s,c)=>{let d=eh(c);return{...d,get:()=>th(a,s,d,c)}}}),gi,ju$1=L$1(()=>{we$1(),ae(),gi=(a,s)=>{let c=s.shape,d=H(a.session.backend.glContext.version),et=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${d.texture2D}(X,TexCoords).r;
      ${d.output} = encodeAsUint8(value);
    }`,g={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:c,type:s.tensor.type,textureType:3},shaderSource:et,hasMain:!0};return a.executeProgram(g,[s.tensor])}});function ih(a,s){if(a===1)return"rc";let c="";for(let d=0;d<a;d++)c+=s[d],d<a-1&&(c+=",");return c}var Yu$1,oh,Xu$1,Ku$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Yu$1={name:"unpack",inputNames:["A"],inputTypes:[2]},oh=(a,s)=>{let c=s.dims.length,d=Br$1("rc",c),et=d.slice(-2),g=Qe(c),at=Nt(),$t=s.dims.length===0?"":ih(c,d),vt=c<=1?"rc":`vec2(${et.join(",")})`,b=H(a.session.backend.glContext.version),pt=`
    ${at}
    void main() {
      ${g} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${$t});

       ${b.output} = vec4(getChannel(packedInput, ${vt}), 0, 0, 0);
     }
   `;return{...Yu$1,hasMain:!0,output:{dims:s.dims,type:s.type,textureType:0},shaderSource:pt}},Xu$1=(a,s)=>({...Yu$1,get:()=>oh(a,s)})}),Xn$1,un,Kn$1,ln=L$1(()=>{lt$1(),Xn$1=class{constructor(a,s=1){if(s===1)this.internalFormat=a.R32F,this.format=a.RED,this.textureType=a.FLOAT,this.channelSize=s;else if(s===4)this.internalFormat=a.RGBA32F,this.format=a.RGBA,this.textureType=a.FLOAT,this.channelSize=s;else throw new Error(`Invalid number of channels: ${s}`)}encode(a,s){let c,d;return a.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),d=new Float32Array(a)),s*this.channelSize>a.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),d=a,c=this.allocate(s*this.channelSize),d.forEach((et,g)=>c[g]=et)):(d=a,c=d),c}allocate(a){return new Float32Array(a*4)}decode(a,s){return this.channelSize===1?a.filter((c,d)=>d%4===0).subarray(0,s):a.subarray(0,s)}},un=class{constructor(a,s=1,c){if(s!==1&&s!==4)throw new Error(`Invalid number of channels: ${s}`);this.internalFormat=a.RGBA,this.format=a.RGBA,this.channelSize=s,this.textureType=c||a.FLOAT}encode(a,s){let c=a;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),c=this.allocate(s),a.forEach((d,et)=>c[et*4]=d)),c}allocate(a){return new Float32Array(a*4)}decode(a,s){return this.channelSize===1?a.filter((c,d)=>d%4===0).subarray(0,s):a.subarray(0,s)}},Kn$1=class{constructor(a,s=1){if(this.channelSize=4,s===1)this.internalFormat=a.ALPHA,this.format=a.ALPHA,this.textureType=a.UNSIGNED_BYTE,this.channelSize=s;else if(s===4)this.internalFormat=a.RGBA,this.format=a.RGBA,this.textureType=a.UNSIGNED_BYTE,this.channelSize=s;else throw new Error(`Invalid number of channels: ${s}`)}encode(a,s){return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}allocate(a){return new Uint8Array(a*this.channelSize)}decode(a,s){if(a instanceof Uint8Array)return a.subarray(0,s);throw new Error(`Invalid array type: ${a.constructor}`)}}}),fn,Ju$1,yi,Zu$1=L$1(()=>{fe$1(),ae(),fn=(a,s,c)=>{let d=c===0||c===1?1:4,et=c===2,g=c===1||c===2,at=c===4?s.length-1:void 0,$t=c===4?s.map((vt,b)=>b===s.length-1?vt*4:vt):void 0;return yi(a,s,d,$t,{isPacked:et,reverseWH:g,breakAxis:at})},Ju$1=(a,s,c)=>{let d=fn(a,s,c);return[d.width,d.height]},yi=(a,s,c=1,d,et)=>{let g=!!(et&&et.isPacked),[at,$t]=a.computeTextureWH(g&&d||s,et),vt=s.length,b=s.slice(0);if(vt===0&&(b=[1]),c===1)d=s;else if(g){if(c!==4)throw new Error("a packed texture must be 4-channel");d=s,vt>0&&(b[vt-1]=Math.ceil(b[vt-1]/2)),vt>1&&(b[vt-2]=Math.ceil(b[vt-2]/2))}else if(!d)throw new Error("Unpacked shape is needed when using channels > 1");return{width:at,height:$t,channels:c,isPacked:g,shape:b,strides:U$2.computeStrides(b),unpackedShape:d,reversedWH:et&&et.reverseWH}}}),sh,Jn$1,el$1=L$1(()=>{lt$1(),yr(),fe$1(),Vu$1(),qu$1(),ju$1(),Ku$1(),ln(),Zu$1(),ae(),sh=(a,s)=>{let c=s.map(et=>`${et.unpackedShape.join(",")};${et.width}x${et.height}`).join("_"),d=a.name;return a.cacheHint&&(d+="["+a.cacheHint+"]"),d+=":"+c,d},Jn$1=class{constructor(a){this.session=a,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(a,s){return Ju$1(this.session.layoutStrategy,a,s)}executeProgram(a,s){if(s.length<a.inputNames.length)throw new Error(`Input size mustn't be less than ${a.inputNames.length}.`);if(a.inputNames.length!==a.inputTypes.length)throw new Error("input names size does not match input types");let c=[];for(let vt=0;vt<a.inputNames.length;++vt)c[vt]=this.getOrCreateTextureData(s[vt],a.inputTypes[vt]);let d=sh(a,c),et=this.session.programManager.getArtifact(d),g=et?et.programInfo:typeof a.get=="function"?a.get():a,at=fn(this.session.layoutStrategy,g.output.dims,g.output.textureType),$t=this.createTextureData(at,g.output.type);return et||(et=this.session.programManager.build(g,c,$t),this.session.programManager.setArtifact(d,et)),this.runProgram(et,c,$t),$t}run(a,s){return this.executeProgram(a,s).tensor}runProgram(a,s,c){for(let d=0;d<s.length;++d)if(!!s[d].isPacked!=(a.programInfo.inputTypes[d]===2))throw new Error(`input[${d}] property packed inconsistent`);if(!!c.isPacked!=(a.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(a,s,c)}getOrCreateTextureData(a,s){let c=this.getTextureData(a.dataId,s===2);if(!c&&(c=this.getTextureData(a.dataId,s!==2),c))return s===2?this.pack(c):this.unpack(c);if(!c){let d=fn(this.session.layoutStrategy,a.dims,s);if(s===4){let et=a.dims;if(et.length===4){let g=[et[0],Math.ceil(et[1]*et[2]*et[3]/4)],at=fn(this.session.layoutStrategy,g,s),$t=a.numberData;if(et[1]*et[2]*et[3]%4!==0){let vt=et[0],b=et[1]*et[2]*et[3],pt=Math.ceil(b*1/4)*4,st=vt*pt;$t=new Float32Array(st);for(let wt=0;wt<vt;++wt){let Tt=wt*b,Ct=wt*pt+wt%1*b;$t.set(a.numberData.subarray(Tt,Tt+b),Ct)}}return this.createTextureData(at,a.type,$t,a,1)}}if(s===2){let et=yi(this.session.layoutStrategy,a.dims,1,[],{reverseWH:!0}),g=this.createTextureData(et,a.type,a.numberData,a,1);c=this.pack(g)}else c=this.createTextureData(d,a.type,a.numberData,a,1)}return c}createTextureDataFromLayoutBindTensor(a,s,c,d){return this.createTextureData(a,s,c,d,1)}createTextureData(a,s,c,d,et){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(a)}]`);let g=this.session.textureManager.createTextureFromLayout(s,a,c,et);return this.createTextureDataFromTexture(a,s,g,d)}reshapeUnpacked(a,s){let c=this.getOrCreateTextureData(a,0),d={channels:c.channels,height:c.height,width:c.width,shape:s.length!==0?s:[1],strides:U$2.computeStrides(s),unpackedShape:s};return this.createTextureDataFromTexture(d,a.type,c.texture).tensor}reshapePacked(a,s){let c=this.getOrCreateTextureData(a,2);if(Hu$1(a.dims,s)){let $t={channels:c.channels,height:c.height,width:c.width,shape:s.length!==0?s:[1],strides:U$2.computeStrides(s),unpackedShape:s,isPacked:!0};return this.createTextureDataFromTexture($t,a.type,c.texture).tensor}let d=bi(a.dims),et=bi(s),g=this.reshapePacked(a,d),at=this.run(Wu$1(this,g,et),[g]);return this.reshapePacked(at,s)}cast(a,s){let c=this.getOrCreateTextureData(a,0);return this.createTextureDataFromTexture(c,s,c.texture).tensor}createTextureDataFromTexture(a,s,c,d,et){let g={...a,tensor:d||new $e(a.unpackedShape,s,at=>this.readTexture(g),async at=>this.readTextureAsync(g),void 0,et),texture:c};return this.setTextureData(g.tensor.dataId,g,a.isPacked),g}getTextureData(a,s=!1){return this.session.isInitializer(a)?this.session.getTextureData(a,s):s?this.packedTextureDataCache.get(a):this.unpackedTextureDataCache.get(a)}setTextureData(a,s,c=!1){this.session.isInitializer(a)?this.session.setTextureData(a,s,c):(c?this.packedTextureDataCache:this.unpackedTextureDataCache).set(a,s)}isTextureLayoutCached(a,s=!1){return!!this.getTextureData(a.dataId,s)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(a=>this.session.textureManager.releaseTexture(a)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(a=>this.session.textureManager.releaseTexture(a)),this.unpackedTextureDataCache=new Map}readTexture(a){return a.isPacked?this.readTexture(this.unpack(a)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(a,a.tensor.type,a.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,a))}async readTextureAsync(a){return a.isPacked?this.readTextureAsync(this.unpack(a)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(a,a.tensor.type,a.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,a))}pack(a){return this.executeProgram(zu$1(this,a.tensor),[a.tensor])}unpack(a){return this.executeProgram(Xu$1(this,a.tensor),[a.tensor])}}}),Ti,Q$1,Ue$1=L$1(()=>{Ti=class{constructor(a){Object.assign(this,a)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(a=>`${this[a]}`).join(";")),this.key}},Q$1=a=>new Ti(a)}),tl$1,rl$1,nl$1,uh,lh,ol$1=L$1(()=>{Ue$1(),we$1(),ae(),tl$1={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl$1=(a,s,c)=>(lh(s),[a.run({...tl$1,cacheHint:c.cacheKey,get:()=>uh(a,s,c)},s)]),nl$1=a=>{let s=a.attributes.getFloat("epsilon",1e-5),c=a.attributes.getFloat("momentum",.9),d=a.attributes.getInt("spatial",1);return Q$1({epsilon:s,momentum:c,spatial:d})},uh=(a,s,c)=>{let d=H(a.session.backend.glContext.version),et=s[0].dims.length,[g,at]=a.calculateTextureWidthAndHeight(s[1].dims,0),$t=`
  float process(int[${et}] indices) {
    vec2 position = offsetToCoords(indices[1], ${g}, ${at});
    float scale = getColorAsFloat(${d.texture2D}(Scale, position));
    float mean = getColorAsFloat(${d.texture2D}(Mean, position));
    float variance = getColorAsFloat(${d.texture2D}(Variance, position));
    float b = getColorAsFloat(${d.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${c.epsilon})) ) + b;
  }`;return{...tl$1,output:{dims:s[0].dims,type:s[0].type,textureType:0},shaderSource:$t}},lh=a=>{if(!a||a.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let s=a[0],c=a[1],d=a[2],et=a[3],g=a[4];if(s.dims.length<3||c.dims.length!==1||d.dims.length!==1||et.dims.length!==1||g.dims.length!==1)throw new Error("invalid input shape.");if(c.dims[0]!==s.dims[1]||d.dims[0]!==s.dims[1]||et.dims[0]!==s.dims[1]||g.dims[0]!==s.dims[1])throw new Error("invalid input shape.");if(s.type!=="float32"&&s.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||d.type!=="float32"&&d.type!=="float64"||et.type!=="float32"&&et.type!=="float64"||g.type!=="float32"&&g.type!=="float64")throw new Error("invalid input tensor types.")}}),Zn$1,dt,R,cn,Qn$1,Wt$1=L$1(()=>{Zn$1=class{constructor(a,s,c,d){this.glContext=a,this.programInfo=s,this.inputTextureLayouts=c,this.outputTextureLayout=d}},dt=class{constructor(a){this.context=a}},R=class{constructor(a,s){this.routineBody=a,this.dependencies=s}},cn=class{constructor(a,s,c){this.name=a,c?this.dependencies=c:this.dependencies=[],s&&(this.routineBody=s)}addDependency(a){a&&this.dependencies.push(a)}},Qn$1=class{static returnOrderedNodes(a){if(!a||a.length===0)return[];if(a.length===1)return a;let s=new Set,c=new Set,d=new Array;return this.createOrderedNodes(a,s,c,d),d}static createOrderedNodes(a,s,c,d){for(let et=0;et<a.length;++et)this.dfsTraverse(a[et],s,c,d)}static dfsTraverse(a,s,c,d){if(!a||c.has(a.name))return;if(s.has(a.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");s.add(a.name);let et=a.dependencies;if(et&&et.length>0)for(let g=0;g<et.length;++g)this.dfsTraverse(et[g],s,c,d);d.push(a),c.add(a.name),s.delete(a.name)}}});function ch(){let a="add_";return{body:`
  float ${a}(float a, float b) {
    return a + b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:a,type:0}}function ph(){let a="div_";return{body:`
  float ${a}(float a, float b) {
    return a / b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:a,type:0}}function dh(){let a="mul_";return{body:`
  float ${a}(float a, float b) {
    return a * b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:a,type:0}}function hh(){let a="sub_";return{body:`
  float ${a}(float a, float b) {
    return a - b;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:a,type:0}}function mh(){let a="equal_";return{body:`
  float ${a}(float a, float b) {
    return float(a == b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:a,type:0}}function bh(){let a="greater_";return{body:`
  float ${a}(float a, float b) {
    return float(a > b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:a,type:0}}function gh(){let a="less_";return{body:`
  float ${a}(float a, float b) {
    return float(a < b);
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:a,type:0}}function yh(){let a="and_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:a,type:0}}function Th(){let a="or_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:a,type:0}}function xh(){let a="xor_";return{body:`
  float ${a}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:a,type:0}}function wh(){return _h("pow")}function vh(){let a="prelu_";return{body:`
  float ${a}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${a}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:a,type:0}}function _h(a){let s=`${a}_`;return{body:`
  float ${s}(float a, float b) {
    return ${a}(a, b);
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return ${a}(v1, v2);
  }
  `,name:s,type:0}}var ht,Oh,il$1,al$1,sl$1,ul$1,ll$1,fl$1,cl$1,pl$1,dl$1,hl$1,ml$1,bl$1,gl$1=L$1(()=>{fe$1(),Wt$1(),we$1(),ae(),ht=(a,s,c,d=s[0].type,et)=>{let g=a.session.pack?2:0;return{name:c.name,inputNames:["A","B"],inputTypes:[g,g],cacheHint:et,get:()=>Oh(a,s,c,d)}},Oh=(a,s,c,d=s[0].type)=>{let et=a.session.pack?2:0,g=!U$2.areEqual(s[0].dims,s[1].dims),at=s[0].dims,$t=a.session.pack;if(g){let pt=Ze$1.calcShape(s[0].dims,s[1].dims,!1);if(!pt)throw new Error("Can't perform binary op on the given tensors");at=pt;let st=at.length,wt=s[0].dims.length!==0?s[0].dims.length:1,Tt=s[1].dims.length!==0?s[1].dims.length:1,Ct=s[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",jt=s[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Lt=H(a.session.backend.glContext.version),Ht=$t?`
      ${c.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${c.name}(a, b);
        ${Lt.output} = result;
      }`:`
      ${c.body}
      float process(int indices[${st}]) {
        int aindices[${wt}];
        int bindices[${Tt}];
        ${Ct}
        ${jt}
        return ${c.name}(_A(aindices), _B(bindices));
      }`;return{name:c.name,inputNames:["A","B"],inputTypes:[et,et],output:{dims:at,type:d,textureType:et},shaderSource:Ht,hasMain:$t}}let vt=H(a.session.backend.glContext.version),b=`
    ${c.body}
    void main() {
      vec4 v1 = ${vt.texture2D}(A, TexCoords);
      vec4 v2 = ${vt.texture2D}(B, TexCoords);
      vec4 result = ${c.name}(v1, v2);
      ${vt.output} = result;
    }
    `;return{name:c.name,inputNames:["A","B"],inputTypes:[et,et],output:{dims:s[0].dims,type:d,textureType:et},shaderSource:b,hasMain:!0}},il$1=(a,s)=>[a.run(ht(a,s,ch()),s)],al$1=(a,s)=>[a.run(ht(a,s,yh(),"bool"),s)],sl$1=(a,s)=>[a.run(ht(a,s,ph()),s)],ul$1=(a,s)=>[a.run(ht(a,s,mh(),"bool"),s)],ll$1=(a,s)=>[a.run(ht(a,s,bh(),"bool"),s)],fl$1=(a,s)=>[a.run(ht(a,s,gh(),"bool"),s)],cl$1=(a,s)=>[a.run(ht(a,s,dh()),s)],pl$1=(a,s)=>[a.run(ht(a,s,Th(),"bool"),s)],dl$1=(a,s)=>[a.run(ht(a,s,wh()),s)],hl$1=(a,s)=>[a.run(ht(a,s,vh()),s)],ml$1=(a,s)=>[a.run(ht(a,s,hh()),s)],bl$1=(a,s)=>[a.run(ht(a,s,xh(),"bool"),s)]}),yl$1,Tl$1,Sh,xl$1=L$1(()=>{fe$1(),yl$1=(a,s,c)=>(Sh(s),[a.cast(s[0],c)]),Tl$1=a=>We$1.tensorDataTypeFromProto(a.attributes.getInt("to")),Sh=a=>{if(!a||a.length!==1)throw new Error("Cast requires 1 input.");if(a[0].type==="string")throw new Error("Invalid input type.")}}),Ah,Ph,wl$1,eo$1,vl$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Ah=(a,s)=>({name:"Concat (packed)",inputNames:Array.from({length:a},(c,d)=>`X${d}`),inputTypes:Array(a).fill(2),cacheHint:s}),Ph=(a,s,c,d)=>{let et=c[0].dims.slice();if(d>=et.length||d<-1*et.length)throw new Error("axis specified for concat doesn't match input dimensionality");d<0&&(d=et.length+d);let g=et.slice(0);for(let rr=1;rr<c.length;rr++){let Lr=c[rr].dims.slice();for(let jr=0;jr<et.length;jr++)if(jr===d)g[d]+=Lr[jr];else if(et[jr]!==Lr[jr])throw new Error("non concat dimensions must match")}let at=g.length,$t=Br$1("coords",at),vt=Qe(at),b=Nt(),pt=c.map(rr=>rr.dims),st=Dt$1(at),wt=new Array(pt.length-1);wt[0]=pt[0][d];for(let rr=1;rr<wt.length;rr++)wt[rr]=wt[rr-1]+pt[rr][d];let Tt=st[d],Ct=st.slice(-2),jt=st.join(),Lt=`if (${Tt} < ${wt[0]}) {
        return getChannel(
            getX0(${jt}), vec2(${Ct.join()}));
        }`;for(let rr=1;rr<wt.length;rr++){let Lr=wt[rr-1];Lt+=`
            if (${Tt} < ${wt[rr]}  && ${Tt} >= ${wt[rr-1]}) {
              return getChannel(
                getX${rr}(${eo$1(st,Tt,Lr)}),
                vec2(${eo$1(Ct,Tt,Lr)}));
            }`}let Ht=wt.length,Gt=wt[wt.length-1];Lt+=`
            return getChannel(
              getX${Ht}(${eo$1(st,Tt,Gt)}),
              vec2(${eo$1(Ct,Tt,Gt)}));`;let Kt=H(a.session.backend.glContext.version),tr=`
          ${b}
          float getValue(${st.map(rr=>"int "+rr)}) {
            ${Lt}
          }

          void main() {
            ${vt} coords = getOutputCoords();
            int lastDim = coords.${st[at-1]};
            coords.${st[at-1]} = coords.${st[at-2]};
            coords.${st[at-2]} = lastDim;

            vec4 result = vec4(getValue(${$t}), 0., 0., 0.);

            ${$t[at-1]} = ${$t[at-1]} + 1;
            if (${$t[at-1]} < ${g[at-1]}) {
              result.g = getValue(${$t});
            }

            ${$t[at-2]} = ${$t[at-2]} + 1;
            if (${$t[at-2]} < ${g[at-2]}) {
              result.a = getValue(${$t});
            }

            ${$t[at-1]} = ${$t[at-1]} - 1;
            if (${$t[at-2]} < ${g[at-2]} &&
                ${$t[at-1]} < ${g[at-1]}) {
              result.b = getValue(${$t});
            }
            ${Kt.output} = result;
          }
        `;return{...s,output:{dims:g,type:c[0].type,textureType:2},shaderSource:tr,hasMain:!0}},wl$1=(a,s,c)=>{let d=Ah(s.length,c.cacheKey);return{...d,get:()=>Ph(a,d,s,c.axis)}},eo$1=(a,s,c)=>{let d=a.indexOf(s);return a.map((et,g)=>g===d?`${et} - ${c}`:et).join()}}),_l$1,Eh,Dh,Lh,Ol$1,Ch,Fh,$h,Il$1,kh,Sl$1=L$1(()=>{Ue$1(),ae(),vl$1(),_l$1=(a,s,c)=>(kh(s),a.session.pack&&s[0].dims.length>1?[a.run(wl$1(a,s,c),s)]:[a.run(Lh(a,s,c),s)]),Eh=(a,s)=>({name:"Concat",inputNames:Array.from({length:a},(c,d)=>`X${d}`),inputTypes:Array(a).fill(0),cacheHint:s}),Dh=(a,s,c,d)=>{let et=c[0].dims.slice();if(d>=et.length||d<-1*et.length)throw new Error("axis specified for concat doesn't match input dimensionality");d<0&&(d=et.length+d);let g=et.slice(0);for(let Tt=1;Tt<c.length;Tt++){let Ct=c[Tt].dims.slice();for(let jt=0;jt<et.length;jt++)if(jt===d)g[d]+=Ct[jt];else if(et[jt]!==Ct[jt])throw new Error("non concat dimensions must match")}let at=g.length,$t=new Array(c.length),vt=0;for(let Tt=0;Tt<$t.length;++Tt)vt+=c[Tt].dims[d],$t[Tt]=vt;let b="";c.length<5?b=Ol$1($t):b=Ch($t);let pt=Fh(c.length,at),st=$h($t),wt=`
        ${pt}
        ${st}
        ${b}
        float process(int indices[${at}]) {
          int textureIndex = getTextureWhereDataResides (indices[${d}]);

          if(textureIndex != 0) {
            indices[${d}] = indices[${d}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...s,output:{dims:g,type:c[0].type,textureType:0},shaderSource:wt}},Lh=(a,s,c)=>{let d=Eh(s.length,c.cacheKey);return{...d,get:()=>Dh(a,d,s,c.axis)}},Ol$1=a=>`int getTextureWhereDataResides(int index) {
      ${a.map((s,c)=>`if(index<${s}) {return ${c};}
`).join("")}
    }`,Ch=a=>Ol$1(a),Fh=(a,s)=>{let c=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${s}]) {`];for(let d=0;d<a;++d)d===0?c.push(`	if (textureIndex == ${d}) { return _X${d}(indices); }`):d===a-1?c.push(`	else { return _X${d}(indices); }`):c.push(`	else if (textureIndex == ${d}) { return _X${d}(indices); }`);return c.push("	}"),c.join(`
`)},$h=a=>{let s=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let c=0;c<a.length;++c)c===0?s.push(`	if (index == ${c}) { return ${a[c]}; }`):c===a.length-1?s.push(`	else { return ${a[c]}; }`):s.push(`	else if (index == ${c}) { return ${a[c]}; }`);return s.push("	}"),s.join(`
`)},Il$1=a=>Q$1({axis:a.attributes.getInt("axis")}),kh=a=>{if(!a||a.length<1)throw new Error("too few inputs");let s=a[0].type,c=a[0].dims.length;if(s==="string")throw new Error("string tensor is not supported yet");for(let d of a){if(d.type!==s)throw new Error("input tensors should be one type");if(d.dims.length!==c)throw new Error("input tensors should have the same shape")}}});function Bh(){return mt("abs")}function Nh(){return mt("acos")}function Rh(){return mt("asin")}function Mh(){return mt("atan")}function Gh(){return mt("ceil")}function Uh(){return mt("cos")}function zh(a){let s="elu";return{body:`
  const float alpha = float(${a});

  float ${s}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${s}_(vec4 v) {
    return vec4(${s}_(v.x), ${s}_(v.y), ${s}_(v.z), ${s}_(v.w));
  }
  `,name:s,type:0}}function Vh(){return mt("exp")}function Wh(){return mt("floor")}function xi(a,s){let c="clip";return{body:`
  const float min = float(${a});
  const float max = float(${s});

  float ${c}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${c}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:c,type:0}}function Hh(){let a="indentity";return{body:`
  float ${a}_(float a) {
    return a;
  }
  vec4 ${a}_(vec4 v) {
    return v;
  }
  `,name:a,type:0}}function qh(a){let s="leakyRelu";return{body:`
  const float alpha = float(${a});

  float ${s}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${s}_(vec4 v) {
    return vec4(${s}_(v.x), ${s}_(v.y), ${s}_(v.z), ${s}_(v.w));
  }
  `,name:s,type:0}}function jh(){return mt("log")}function Yh(){let a="neg";return{body:`
  float ${a}_(float a) {
    return -a;
  }
  vec4 ${a}_(vec4 v) {
    return -v;
  }
  `,name:a,type:0}}function Xh(){let a="not";return{body:`
  float ${a}_(float a) {
    return float( ! bool(a) );
  }
  bool ${a}_(bool a) {
    return !a;
  }
  vec4 ${a}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${a}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:a,type:0}}function Kh(){return mt("sin")}function wi(){let a="relu";return{body:`
  float ${a}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${a}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:a,type:0}}function vi(){let a="sigmoid";return{body:`
  float ${a}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${a}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:a,type:0}}function Jh(){return mt("sqrt")}function Zh(){return mt("tan")}function Qh(){let a="tanh";return{body:`
  float ${a}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${a}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:a,type:0}}function mt(a){return{body:`
  float ${a}_(float a) {
    return ${a}(a);
  }
  vec4 ${a}_(vec4 v) {
    return ${a}(v);
  }
  `,name:a,type:0}}var em$1,Ee,Al$1,Pl$1,El$1,Dl$1,_i,Ll$1,Cl$1,tm$1,Fl$1,$l$1,kl$1,Bl$1,Nl$1,Rl$1,Oi$1,Ml$1,Gl$1,Ul$1,zl$1,Vl$1,Wl$1,Hl$1,ql$1,jl$1,Yl$1,Xl$1,Ii=L$1(()=>{Ue$1(),fe$1(),Wt$1(),we$1(),ae(),em$1=(a,s,c,d)=>{let et=a.session.pack?2:0,g=H(a.session.backend.glContext.version);return{...s,output:{dims:c.dims,type:c.type,textureType:et},shaderSource:`
     ${d.body}
     void main() {
       vec4 v = ${g.texture2D}(A, TexCoords);
       v = ${d.name}_(v);
       ${g.output} = v;
     }
     `,hasMain:!0}},Ee=(a,s,c,d)=>{let et=a.session.pack?2:0,g={name:c.name,inputTypes:[et],inputNames:["A"],cacheHint:d};return{...g,get:()=>em$1(a,g,s,c)}},Al$1=(a,s)=>[a.run(Ee(a,s[0],Bh()),s)],Pl$1=(a,s)=>[a.run(Ee(a,s[0],Nh()),s)],El$1=(a,s)=>[a.run(Ee(a,s[0],Rh()),s)],Dl$1=(a,s)=>[a.run(Ee(a,s[0],Mh()),s)],_i=(a,s,c)=>[a.run(Ee(a,s[0],xi(c.min,c.max),c.cacheKey),s)],Ll$1=a=>Q$1({min:a.attributes.getFloat("min",br),max:a.attributes.getFloat("max",gr$1)}),Cl$1=(a,s)=>{let c=tm$1(a,s);return _i(a,[s[0]],c)},tm$1=(a,s)=>{if(s.length>=3&&(!a.session.isInitializer(s[1].dataId)||!a.session.isInitializer(s[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let c=s.length>=3?s[1].numberData[0]:br,d=s.length>=3?s[2].numberData[0]:gr$1;return Q$1({min:c,max:d})},Fl$1=(a,s)=>[a.run(Ee(a,s[0],Gh()),s)],$l$1=(a,s)=>[a.run(Ee(a,s[0],Uh()),s)],kl$1=(a,s,c)=>[a.run(Ee(a,s[0],zh(c.alpha),c.cacheKey),s)],Bl$1=a=>Q$1({alpha:a.attributes.getFloat("alpha",1)}),Nl$1=(a,s)=>[a.run(Ee(a,s[0],Vh()),s)],Rl$1=(a,s)=>[a.run(Ee(a,s[0],Wh()),s)],Oi$1=(a,s)=>[a.run(Ee(a,s[0],Hh()),s)],Ml$1=(a,s,c)=>[a.run(Ee(a,s[0],qh(c.alpha),c.cacheKey),s)],Gl$1=a=>Q$1({alpha:a.attributes.getFloat("alpha",.01)}),Ul$1=(a,s)=>[a.run(Ee(a,s[0],jh()),s)],zl$1=(a,s)=>[a.run(Ee(a,s[0],Yh()),s)],Vl$1=(a,s)=>[a.run(Ee(a,s[0],Xh()),s)],Wl$1=(a,s)=>[a.run(Ee(a,s[0],wi()),s)],Hl$1=(a,s)=>[a.run(Ee(a,s[0],vi()),s)],ql$1=(a,s)=>[a.run(Ee(a,s[0],Kh()),s)],jl$1=(a,s)=>[a.run(Ee(a,s[0],Jh()),s)],Yl$1=(a,s)=>[a.run(Ee(a,s[0],Zh()),s)],Xl$1=(a,s)=>[a.run(Ee(a,s[0],Qh()),s)]});function Rt(a){let s;switch(a.activation){case"Relu":s=wi();break;case"Sigmoid":s=vi();break;case"Clip":s=xi(a.clipMin,a.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let c=s.name,d=s.body,et=`value = ${c}_(value);`;return{activationFunction:d,applyActivation:et}}var Nr,xr=L$1(()=>{fe$1(),Ii(),Nr=a=>{let s=a.getString("activation","");if(s==="Clip"){let[c,d]=a.getFloats("activation_params",[br,gr$1]);return{activation:s,clipMax:d,clipMin:c,activationCacheKey:`${s}:${c},${d}`}}return{activation:s,activationCacheKey:s}}}),nm$1,om$1,Kl$1,Jl$1=L$1(()=>{lt$1(),we$1(),ae(),to$1(),xr(),nm$1=(a,s)=>({name:"GroupedConv",inputNames:a?["X","W","Bias"]:["X","W"],inputTypes:a?[0,0,0]:[0,0],cacheHint:s}),om$1=(a,s,c,d)=>{let et=s.length>2?"value += getBias(output_channel);":"",g=s[0].dims.slice(),at=s[1].dims.slice(),$t=at[0]/d.group;ce.verbose("GroupedConv",`autpPad:${d.autoPad}, dilations:${d.dilations}, group:${d.group}, kernelShape:${d.kernelShape}, pads:${d.pads}, strides:${d.strides}`);let vt=Rr$1(g,at,d.dilations,d.pads,d.strides),b=H(a.session.backend.glContext.version),{activationFunction:pt,applyActivation:st}=Rt(d),wt=`
  const ivec2 strides = ivec2(${d.strides[0]}, ${d.strides[1]});
  const ivec2 pads = ivec2(${d.pads[0]}, ${d.pads[1]});
  ${pt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${$t};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${at[1]}; wInChannel++) {
      int input_channel = group_id * ${at[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${at[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${d.dilations[0]};

        if (xHeight < 0 || xHeight >= ${g[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${at[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${d.dilations[1]};
          if (xWidth < 0 || xWidth >= ${g[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${et}
    ${st}
    ${b.output} = vec4(value, .0, .0, .0);
  }
`;return{...c,output:{dims:vt,type:s[0].type,textureType:0},shaderSource:wt,hasMain:!0}},Kl$1=(a,s,c)=>{let d=nm$1(s.length>2,c.cacheKey);return{...d,get:()=>om$1(a,s,d,c)}}}),im$1,am$1,Zl$1,Ql$1=L$1(()=>{we$1(),ae(),Tr(),im$1=a=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:a}),am$1=(a,s,c,d,et,g)=>{let at=c.dims,$t=d.dims,vt=2,b=3,pt=et.length,st=[$t[1]*$t[2]*$t[3],et[2]*et[3]],wt=$t[2]*$t[3],Tt=Nt(),Ct=H(a.session.backend.glContext.version),jt="";for(let Ht=0;Ht<=1;Ht++)for(let Gt=0;Gt<=1;Gt++)jt+=`
            blockIndex = rc.x + ${Gt};
            pos = rc.y + ${Ht};

            if(blockIndex < ${st[1]} && pos < ${st[0]}) {
              offsetY = int(blockIndex / (${et[pt-1]})) * ${g.strides[0]} -
                ${g.pads[0]};
              d0 = offsetY + ${g.dilations[0]} * (imod(pos, ${wt}) / ${$t[2]});

              if(d0 < ${at[vt]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${et[pt-1]}) * ${g.strides[1]} -
                  ${g.pads[1]};
                d1 = offsetX + ${g.dilations[1]} * imod(imod(pos, ${wt}), ${$t[2]});

                if(d1 < ${at[b]} && d1 >= 0) {

                  ch = int(float(pos)/ ${wt}.);
                    innerDims = vec2(d0, d1);
                    result[${Ht*2+Gt}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let Lt=`
      ${Tt}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${jt}
          ${Ct.output} = result;
      }
            `;return{...s,output:{dims:st,type:c.type,textureType:2},shaderSource:Lt,hasMain:!0}},Zl$1=(a,s,c,d,et)=>{let g=im$1(et.cacheKey);return{...g,get:()=>am$1(a,g,s,c,d,et)}}});function um$1(a,s,c){let d=s[0].dims,et=s[1].dims,g=Ze$1.calcShape(d,et,!0);if(!g)throw new Error("Can't use matmul on the given tensors");let at=Qe(g.length),$t=Dt$1(),{activationFunction:vt,applyActivation:b}=Rt(c),pt=s.length>2,st=pt?"value += getBiasForMatmul();":"",wt=pt?`${Ai(at,$t,s[2].dims,g,!1)}`:"",Tt=g.length,Ct=d.length,jt=et.length,Lt=d[d.length-1],Ht=`
    ${vt}
    ${wt}
    float process(int indices[${Tt}]) {
        int a[${Ct}];
        int b[${jt}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${Lt}; ++k) {
            a[${Ct-1}] = k;
            b[${jt-2}] = k;
            value += _A(a) * _B(b);
        }
        ${st}
        ${b}
        return value;
    }`;return{...a,output:{dims:g,type:s[0].type,textureType:0},shaderSource:Ht}}function Si(a,s){let c=sm$1(a.length>2,s.activationCacheKey);return{...c,get:()=>um$1(c,a,s)}}function Ai(a,s,c,d,et){let g="",at=c.length,$t=d.length,vt=$t-at;$t<2&&at>0?g="coords":g=c.map((wt,Tt)=>`coords.${s[Tt+vt]}`).join(", ");let b=Ze$1.getBroadcastDims(c,d).map(wt=>`coords.${s[wt+vt]} = 0;`).join(`
`),pt=U$2.size(c)===1,st="vec4(outputValue.xx, outputValue.yy)";return pt&&(st="vec4(outputValue.x)"),et?`
vec4 getBiasForMatmul() {
  ${a} coords = getOutputCoords();
  ${b}
  vec4 outputValue = getBias(${g});
  return ${st};
}`:`
float getBiasForMatmul() {
  ${a} coords = getOutputCoords();
  ${b}
  return getBias(coords.x);
}`}var ef$1,tf$1,sm$1,lm$1,ro$1=L$1(()=>{fe$1(),ae(),Bt$1(),xr(),Pi$1(),ef$1=(a,s,c)=>(lm$1(s),a.session.pack?[a.run(no$1(a,s,c),s)]:[a.run(Si(s,c),s)]),tf$1=a=>Nr(a.attributes),sm$1=(a,s)=>({name:"MatMul",inputNames:a?["A","B","Bias"]:["A","B"],inputTypes:a?[0,0,0]:[0,0],cacheHint:s}),lm$1=a=>{if(!a||a.length!==2)throw new Error("MatMul requires 2 inputs.");if(a[0].dims[a[0].dims.length-1]!==a[1].dims[a[1].dims.length-2])throw new Error("shared dimension does not match.");if(a[0].type!=="float32"&&a[0].type!=="float64"||a[1].type!=="float32"&&a[1].type!=="float64")throw new Error("inputs should be float type");if(a[0].type!==a[1].type)throw new Error("inputs types should match")}});function pm$1(a,s,c,d){let et=[],g=[],at=c[0].dims,$t=c[1].dims,vt=at.length,b=$t.length,pt=d.length,st=pt-vt,wt=pt-b;et=at.map((Gt,Kt)=>`coords.${s[Kt+st]}`),et[vt-1]="i*2",et.join(", "),g=$t.map((Gt,Kt)=>`coords.${s[Kt+wt]}`),g[b-2]="i*2",g.join(", ");let Tt=Ze$1.getBroadcastDims(at,d),Ct=Ze$1.getBroadcastDims($t,d),jt=Tt.map(Gt=>`coords.${s[Gt+st]} = 0;`).join(`
`),Lt=Ct.map(Gt=>`coords.${s[Gt+wt]} = 0;`).join(`
`),Ht=`int lastDim = coords.${s[pt-1]};
  coords.${s[pt-1]} = coords.${s[pt-2]};
  coords.${s[pt-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${a} coords = getOutputCoords();
  ${Ht}
  ${jt}
  vec4 outputValue = getA(${et});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${a} coords = getOutputCoords();
  ${Ht}
  ${Lt}
  vec4 outputValue = getB(${g});
  return outputValue;
}`}function dm$1(a,s){let c="";for(let d=0;d<s-2;d++)c+=`rc.${a[d]}, `;return c+=`rc.${a[s-2]}, i*2`,c}function hm$1(a,s){let c="";for(let d=0;d<s-2;d++)c+=`rc.${a[d]}, `;return c+=`i*2, rc.${a[s-1]}`,c}var fm$1,cm$1,no$1,Pi$1=L$1(()=>{fe$1(),we$1(),ae(),Bt$1(),xr(),ro$1(),fm$1=(a,s)=>({name:"MatMul (packed)",inputNames:a?["A","B","Bias"]:["A","B"],inputTypes:a?[2,2,2]:[2,2],cacheHint:s}),cm$1=(a,s,c,d)=>{let et=c.length>2,g=et?"value += getBiasForMatmul();":"",at=c[0].dims,$t=c[1].dims,vt=Ze$1.calcShape(at,$t,!0),b=!U$2.areEqual(c[0].dims,c[1].dims);if(!vt)throw new Error("Can't use matmul on the given tensors");let pt=at[at.length-1],st=Math.ceil(pt/2),wt=at.length,Tt=$t.length,Ct=H(a.session.backend.glContext.version),jt=Qe(vt.length),Lt=vt.length,Ht=Dt$1(),{activationFunction:Gt,applyActivation:Kt}=Rt(d),tr=et?`${Ai(jt,Ht,c[2].dims,vt,!0)}`:"",rr=b?`${pm$1(jt,Ht,c,vt)}`:"",Lr=b?"getAAtOutCoordsMatmul(i)":`getA(${dm$1(Ht,wt)})`,jr=b?"getBAtOutCoordsMatmul(i)":`getB(${hm$1(Ht,Tt)})`,Yr=b?"":`${jt} rc =
          getOutputCoords(); int lastDim = rc.${Ht[Lt-1]}; rc.${Ht[Lt-1]} =
          rc.${Ht[Lt-2]}; rc.${Ht[Lt-2]} = lastDim;
      `,An=`
            ${rr}
            ${tr}
            ${Gt}
            void main() {
              ${Yr}

              vec4 value = vec4(0);
              for (int i = 0; i < ${st}; i++) {
                vec4 a = ${Lr};
                vec4 b = ${jr};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${g}
              ${Kt}
              ${Ct.output} = value;
            }`;return{...s,output:{dims:vt,type:c[0].type,textureType:2},shaderSource:An,hasMain:!0}},no$1=(a,s,c)=>{let d=fm$1(s.length>2,c.activationCacheKey);return{...d,get:()=>cm$1(a,d,s,c)}}}),rf$1,nf$1=L$1(()=>{to$1(),Ql$1(),Pi$1(),rf$1=(a,s,c)=>{let d=s[0].dims,et=s[1].dims,g=Rr$1(d,et,c.dilations,c.pads,c.strides),at=a.run(Zl$1(a,s[0],s[1],g,c),[s[0]]),$t=a.reshapePacked(s[1],[et[0],et[1]*et[2]*et[3]]),vt=s.length===3?[$t,at,s[2]]:[$t,at],b=a.run(no$1(a,vt,c),vt);return a.reshapePacked(b,g)}}),mm$1,bm$1,of$1,Ei,Di$1=L$1(()=>{ae(),mm$1=a=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:a}),bm$1=(a,s,c,d,et,g)=>{let at=c.dims,$t=d.dims,vt=et.length,b=Ei(at,$t,et,4),pt=`
        const int XC = ${at[1]};
        const int XH = ${at[2]};
        const int XW = ${at[3]};
        const int KH = ${g.kernelShape[0]};
        const int KW = ${g.kernelShape[1]};
        const int dilationH = ${g.dilations[0]};
        const int dilationW = ${g.dilations[1]};
        const int strideH = ${g.strides[0]};
        const int strideW = ${g.strides[1]};
        const int padH = ${g.pads[0]};
        const int padW = ${g.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${vt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${at.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...s,output:{dims:b,type:c.type,textureType:4},shaderSource:pt}},of$1=(a,s,c,d,et)=>{let g=mm$1(et.cacheKey);return{...g,get:()=>bm$1(a,g,s,c,d,et)}},Ei=(a,s,c,d=4)=>[c[0],c[2],c[3],Math.ceil(a[1]*s[2]*s[3]/d)]}),gm$1,ym$1,af$1,sf$1=L$1(()=>{fe$1(),we$1(),ae(),xr(),Di$1(),gm$1=(a,s)=>({name:"ConvDotProduct",inputNames:a?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:a?[0,4,0]:[0,4],cacheKey:s.activationCacheKey}),ym$1=(a,s,c,d,et)=>{let g=c[0].dims,at=c[1].dims,$t=[at[0],Math.ceil(g[1]*at[2]*at[3]/4)],vt=Ei(g,at,d),[b,pt]=a.calculateTextureWidthAndHeight($t,4),st=U$2.computeStrides(vt),[wt,Tt]=a.calculateTextureWidthAndHeight(vt,4),Ct=d.length,jt=c.length<3?"0.0":"_B(b)",Lt=Math.ceil(g[1]*at[2]*at[3]/4),{activationFunction:Ht,applyActivation:Gt}=Rt(et),Kt=H(a.session.backend.glContext.version),tr=`
${Ht}
float process(int indices[${Ct}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${st[0]} + im2col[1] * ${st[1]} + im2col[2] * ${st[2]};
  int kernelOffset = indices[1] * ${$t[1]};
  float value = ${jt};
  for (int i = 0; i < ${Lt}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${wt}, ${Tt});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${b}, ${pt});
    value += dot(${Kt.texture2D}(Im2Col, im2colCoords), ${Kt.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Gt}
  return value;
}`;return{...s,output:{dims:d,type:c[0].type,textureType:0},shaderSource:tr}},af$1=(a,s,c,d)=>{let et=gm$1(s.length>2,d);return{...et,get:()=>ym$1(a,et,s,c,d)}}}),Rr$1,Li$1,Tm$1,xm$1,wm$1,vm,Ci,_m$1,to$1=L$1(()=>{Ue$1(),fe$1(),Jl$1(),nf$1(),sf$1(),xr(),Di$1(),ro$1(),Rr$1=(a,s,c,d,et)=>{let g=a[0],at=a.slice(2),$t=at.length,vt=s[0],b=s.slice(2).map((st,wt)=>st+(st-1)*(c[wt]-1)),pt=at.map((st,wt)=>st+d[wt]+d[wt+$t]).map((st,wt)=>Math.floor((st-b[wt]+et[wt])/et[wt]));return[g,vt].concat(...pt)},Li$1=(a,s,c)=>(_m$1(s,c),Tm$1(a,s,c)),Tm$1=(a,s,c)=>{let d=vm(c,s),et=a.session.pack,g=d.kernelShape[0]===1&&d.kernelShape[1]===1;return d.group>1?[a.run(Kl$1(a,s,d),s)]:g&&et?[xm$1(a,s,d)]:et&&s[0].dims.length===4&&s[0].dims[0]===1&&!g?[rf$1(a,s,d)]:[wm$1(a,s,d)]},xm$1=(a,s,c)=>{let d=s[0].dims,et=s[1].dims,g=Rr$1(d,et,c.dilations,c.pads,c.strides),at=a.reshapeUnpacked(s[0],[d[1],d[2]*d[3]]),$t=a.reshapeUnpacked(s[1],[et[0],et[1]]),vt=s.length>2?[$t,at,s[2]]:[$t,at],b=a.run(Si(vt,c),vt);return a.reshapeUnpacked(b,g)},wm$1=(a,s,c)=>{let d=s[0].dims,et=s[1].dims,g=Rr$1(d,et,c.dilations,c.pads,c.strides),at=a.run(of$1(a,s[0],s[1],g,c),[s[0]]),$t=s.length===3?[at,s[1],s[2]]:[at,s[1]];return a.run(af$1(a,s,g,c),$t)},vm=(a,s)=>{let c=a.kernelShape.slice();if(a.kernelShape.length===0)for(let g=2;g<s[1].dims.length;++g)c.push(s[1].dims[g]);let d=a.pads.slice();mr$1.adjustPadsBasedOnAutoPad(s[0].dims,a.strides,a.dilations,c,d,a.autoPad);let et=Object.assign({},a);return Object.assign(et,{kernelShape:c,pads:d,cacheKey:a.cacheKey}),et},Ci=a=>{let s=a.attributes,c=Nr(s),d=s.getString("auto_pad","NOTSET"),et=s.getInts("dilations",[1,1]),g=s.getInt("group",1),at=s.getInts("kernel_shape",[]),$t=s.getInts("pads",[0,0,0,0]),vt=s.getInts("strides",[1,1]);return Q$1({autoPad:d,dilations:et,group:g,kernelShape:at,pads:$t,strides:vt,...c})},_m$1=(a,s)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4||a[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let c=a[0].dims[1],d=a[1].dims[1]*s.group;if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(a.length===3&&(a[2].dims.length!==1||a[1].dims[0]!==a[2].dims[0]))throw new Error("invalid bias");let et=a[0].dims.length-2;if(s.dilations.length!==et)throw new Error(`dilations should be ${et}D`);if(s.strides.length!==et)throw new Error(`strides should be ${et}D`);if(s.pads.length!==et*2)throw new Error(`pads should be ${et*2}D`);if(s.kernelShape.length!==0&&s.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape");if(a[0].type!=="float32"||a[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(a.length===3&&a[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Om$1,Im$1,Sm$1,uf$1,Am$1,Pm$1,Em$1,Dm$1,Lm$1,Cm$1,lf$1,Fm$1,ff$1=L$1(()=>{Ue$1(),we$1(),ae(),xr(),Om$1=(a,s,c,d,et,g)=>(a-1)*s+c+(d-1)*et+1-g,Im$1=(a,s,c,d,et)=>{let g=Math.floor(a/2);s==="SAME_UPPER"?(c[d]=g,c[et]=a-g):s==="SAME_LOWER"&&(c[d]=a-g,c[et]=g)},Sm$1=(a,s,c,d,et,g,at,$t)=>{let vt=a.length-2,b=$t.length===0;for(let pt=0;pt<vt;++pt){let st=b?a[pt+2]*g[pt]:$t[pt],wt=Om$1(a[pt+2],g[pt],et[pt],s[pt],c[pt],st);Im$1(wt,d,et,pt,pt+vt),b&&$t.push(g[pt]*(a[pt+2]-1)+at[pt]+(s[pt]-1)*c[pt]+1-et[pt]-et[pt+vt])}},uf$1=(a,s,c)=>(Fm$1(s,c),Am$1(a,s,c)),Am$1=(a,s,c)=>{let d=Cm$1(c,s);return[Lm$1(a,s,d)]},Pm$1=(a,s)=>({name:"ConvTranspose",inputNames:a?["X","W","B"]:["X","W"],inputTypes:a?[0,0,0]:[0,0],cacheHint:s}),Em$1=(a,s,c,d)=>{let et=s.length>2?"getB(output_channel)":"0.0",g=s[0].dims,at=s[1].dims,$t=at[1],vt=at[0]/d.group,b=[s[0].dims[0],s[1].dims[1]*d.group,...d.outputShape],pt=H(a.session.backend.glContext.version),{activationFunction:st,applyActivation:wt}=Rt(d),Tt=`
  const ivec2 strides = ivec2(${d.strides[0]}, ${d.strides[1]});
  const ivec2 pads = ivec2(${d.pads[0]}, ${d.pads[1]});
  ${st}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${$t};
    int wOutChannel = output_channel - group_id * ${$t};

    float value = ${et};
    for (int inChannelOffset = 0; inChannelOffset < ${vt}; inChannelOffset++) {
      int input_channel = group_id * ${vt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${at[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${at[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${d.dilations[0]}, wHOff * ${d.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${g[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${g[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${wt}
    ${pt.output} = vec4(value, .0, .0, .0);
  }
`;return{...c,output:{dims:b,type:s[0].type,textureType:0},shaderSource:Tt,hasMain:!0}},Dm$1=(a,s,c)=>{let d=Pm$1(s.length>2,c.cacheKey);return{...d,get:()=>Em$1(a,s,d,c)}},Lm$1=(a,s,c)=>a.run(Dm$1(a,s,c),s),Cm$1=(a,s)=>{let c=a.kernelShape.slice();if(a.kernelShape.length===0)for(let $t=2;$t<s[1].dims.length;++$t)c.push(s[1].dims[$t]);let d=a.pads.slice(),et=a.outputShape.slice(),g=s[0].dims;Sm$1(g,c,a.dilations,a.autoPad,d,a.strides,a.outputPadding,et);let at=Object.assign({},a);return Object.assign(at,{kernelShape:c,pads:d,outputShape:et,cacheKey:a.cacheKey}),at},lf$1=a=>{let s=a.attributes,c=Nr(s),d=s.getString("auto_pad","NOTSET"),et=s.getInts("dilations",[1,1]),g=s.getInt("group",1),at=s.getInts("kernel_shape",[]),$t=s.getInts("output_padding",[0,0]),vt=s.getInts("output_shape",[]),b=s.getInts("pads",[0,0,0,0]),pt=s.getInts("strides",[1,1]);return Q$1({autoPad:d,dilations:et,group:g,kernelShape:at,outputPadding:$t,outputShape:vt,pads:b,strides:pt,...c})},Fm$1=(a,s)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4||a[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let c=a[0].dims[1],d=a[1].dims[0];if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let et=a[1].dims[1]*s.group;if(a.length===3&&(a[2].dims.length!==1||a[2].dims[0]!==et))throw new Error("invalid bias");let g=a[0].dims.length-2;if(s.dilations.length!==g)throw new Error(`dilations should be ${g}D`);if(s.strides.length!==g)throw new Error(`strides should be ${g}D`);if(s.pads.length!==g*2)throw new Error(`pads should be ${g*2}D`);if(s.outputPadding.length!==g)throw new Error(`output_padding should be ${g}D`);if(s.kernelShape.length!==0&&s.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape");if(s.outputShape.length!==0&&s.outputShape.length!==a[0].dims.length-2)throw new Error("invalid output shape");if(a[0].type!=="float32"||a[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(a.length===3&&a[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf,wr,pf$1,$m$1,df,km$1,Bm$1,Nm$1,oo$1=L$1(()=>{Ue$1(),fe$1(),ae(),cf={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr=(a,s,c)=>(Nm$1(s),[a.run({...cf,cacheHint:c.cacheKey,get:()=>$m$1(a,s[0],c.perm)},s)]),pf$1=a=>Q$1({perm:a.attributes.getInts("perm",[])}),$m$1=(a,s,c)=>{let d=s.dims;c=df(d,c);let et=km$1(d,c),g=d.length,at=`
      ${Bm$1("perm",c,g)}
      float process(int indices[${g}]) {
        int a[${g}];
        perm(a, indices);
        return _A(a);
      }`;return{...cf,output:{dims:et,type:s.type,textureType:0},shaderSource:at}},df=(a,s)=>(s&&s.length!==a.length&&(s=[...a.keys()].reverse()),s),km$1=(a,s)=>(s=df(a,s),U$2.sortBasedOnPerm(a,s)),Bm$1=(a,s,c)=>{let d=[];d.push(`void ${a}(out int a[${c}], int src[${c}]) {`);for(let et=0;et<c;++et)d.push(`	a[${s[et]}]=src[${et}];`);return d.push("	}"),d.join(`
`)},Nm$1=a=>{if(!a||a.length!==1)throw new Error("Transpose requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("input should be float tensor")}}),hf$1,mf$1,Rm$1,bf=L$1(()=>{oo$1(),hf$1=(a,s,c)=>{Rm$1(s);let d=c.blocksize,et=d*d,g=c.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],at=c.mode==="DCR"?[s[0].dims[0],d,d,s[0].dims[1]/et,s[0].dims[2],s[0].dims[3]]:[s[0].dims[0],s[0].dims[1]/et,d,d,s[0].dims[2],s[0].dims[3]],$t=a.reshapeUnpacked(s[0],at),vt={perm:g,cacheKey:`${g}`},[b]=wr(a,[$t],vt),pt=[s[0].dims[0],s[0].dims[1]/et,s[0].dims[2]*d,s[0].dims[3]*d];return[a.reshapeUnpacked(b,pt)]},mf$1=a=>{let s=a.attributes.getInt("blocksize");if(s<1)throw new Error(`blocksize must be >= 1, but got : ${s} for DepthToSpace`);let c=a.attributes.getString("mode","DCR");if(c!=="DCR"&&c!=="CRD")throw new Error(`unrecognized mode: ${c} for DepthToSpace`);return{mode:c,blocksize:s}},Rm$1=a=>{if(a.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${a.length}`);if(a[0].type==="string"||a[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf,yf,Mm$1,Tf=L$1(()=>{fe$1(),gf=(a,s,c)=>{Mm$1(s,c);let d=U$2.flattenShape(s[0].dims,c);return[a.reshapeUnpacked(s[0],d)]},yf=a=>a.attributes.getInt("axis",1),Mm$1=(a,s)=>{if(!a||a.length!==1)throw new Error("Flatten requires 1 input.");let c=a[0].dims.length;if(c===0)throw new Error("scalar tensor is not supported.");if(s<-c||s>c)throw new Error("Invalid axis");if(a[0].type==="string")throw new Error("string tensor is not supported.")}}),Qt,pn=L$1(()=>{Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf,wf,Gm$1,Um$1,zm$1,Vm$1,vf=L$1(()=>{Ue$1(),pn(),fe$1(),ae(),xf=(a,s,c)=>(Vm$1(s,c.axis),[a.run(zm$1(a,s,c),s)]),wf=a=>Q$1({axis:a.attributes.getInt("axis",0)}),Gm$1={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um$1=(a,s,c,d)=>{let et=c[0].dims.slice(),g=c[1].dims.slice(),at=new Array(et.length+g.length-1);d=U$2.normalizeAxis(d,et.length);let $t=[];for(let wt=0;wt<at.length;wt++)wt<d?(at[wt]=et[wt],$t.push(`inputIdx[${wt}] = outputIdx[${wt}];`)):wt<d+g.length?(at[wt]=g[wt-d],$t.push(`indexDataIdx[${wt-d}] = outputIdx[${wt}];`)):(at[wt]=et[wt-g.length+1],$t.push(`inputIdx[${wt-g.length+1}] = outputIdx[${wt}];`));let vt=at.length||1,b=et.length,pt=g.length||1,st=`
      float process(int outputIdx[${vt}]) {
        int inputIdx[${b}];
        int indexDataIdx[${pt}];
        indexDataIdx[0] = 0;
        ${$t.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${d}] = idx < 0 ? idx + ${et[d]} : idx;
        return _A(inputIdx);
      }`;return{...s,output:{dims:at,type:c[0].type,textureType:0},shaderSource:st}},zm$1=(a,s,c)=>{let d={...Gm$1,cacheHint:c.cacheKey};return{...d,get:()=>Um$1(a,d,s,c.axis)}},Vm$1=(a,s)=>{if(!a||a.length!==2)throw new Error("Gather requires 2 inputs.");let c=a[0].dims.length;if(c<1)throw new Error("Invalid input shape.");if(s<-c||s>c-1)throw new Error("Invalid axis.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invaid input type.");if(a[1].type!=="int32"&&a[1].type!=="int16")throw new Error("Invaid input type.")}}),Fi$1,_f,Of,If,Wm$1,Hm$1,qm$1,Sf=L$1(()=>{Ue$1(),fe$1(),ae(),Fi$1=(a,s,c)=>(qm$1(s,c),[a.run(Wm$1(s,c),s)]),_f=(a,s)=>{let c=a.attributes.getInt("transA",0)!==0,d=a.attributes.getInt("transB",0)!==0,et=a.attributes.getFloat("alpha",1),g=a.attributes.getFloat("beta",1);return Q$1({transA:c,transB:d,alpha:et,beta:g,isOptionalC:s})},Of=a=>_f(a,!1),If=a=>_f(a,!0),Wm$1=(a,s)=>{let c={name:"Gemm",inputNames:a.length===3?["A","B","C"]:["A","B"],inputTypes:a.length===3?[0,0,0]:[0,0],key:s.cacheKey};return{...c,get:()=>Hm$1(c,a,s)}},Hm$1=(a,s,c)=>{let d=s[0].dims.slice(),et=s[1].dims.slice(),[g,at]=jn$1.getShapeOfGemmResult(d,c.transA,et,c.transB,s.length===3?s[2].dims:void 0),$t=[g,at];if(!$t)throw new Error("Can't use gemm on the given tensors");let vt=d[d.length-1],b="";c.transA&&(vt=d[0]),c.transA&&c.transB?b="value += _A_T(a) * _B_T(b);":c.transA&&!c.transB?b="value += _A_T(a) * _B(b);":!c.transA&&c.transB?b="value += _A(a) * _B_T(b);":!c.transA&&!c.transB&&(b="value += _A(a) * _B(b);");let pt=$t.length,st=s.length===3?`int c[${s[2].dims.length}];`:"",wt=s.length===3?"bcastIndices_C(indices, c);":"",Tt=s.length===3?"value += beta * _C(c);":"",Ct=`
      float process(int indices[${pt}]) {
          int a[${pt}];
          int b[${pt}];
          ${st}

          copyVec(indices, a);
          copyVec(indices, b);
          ${wt}

          float value = 0.0;
          for (int k=0; k<${vt}; ++k) {
              a[${pt-1}] = k;
              b[${pt-2}] = k;
              ${b}
          }

          value = value * alpha;
          ${Tt}
          return value;
      }`;return{...a,output:{dims:$t,type:s[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:c.alpha},{name:"beta",type:"float",data:c.beta}],shaderSource:Ct}},qm$1=(a,s)=>{if(!a)throw new Error("Input is missing");if(s.isOptionalC&&(a.length<2||a.length>3))throw new Error("Invaid input shape.");if(!s.isOptionalC&&a.length!==3)throw new Error("Gemm requires 3 inputs");if(a.length===3&&a[2].dims.length!==1&&a[2].dims.length!==2)throw new Error("Invalid input shape of C");if(a[0].type!=="float32"&&a[0].type!=="float64"||a[1].type!=="float32"&&a[1].type!=="float64"||a.length===3&&a[2].type!=="float32"&&a[2].type!=="float64")throw new Error("Invalid input type.");if(a[0].type!==a[1].type||a.length===3&&a[0].type!==a[2].type)throw new Error("Input types are mismatched")}}),Af,Pf,jm$1,Ym$1,Xm$1,Km$1,Jm$1,Ef=L$1(()=>{Ue$1(),ae(),Af=(a,s,c)=>(Jm$1(s),[a.run(Xm$1(a,s,c),s)]),Pf=a=>{let s=a.attributes.getFloat("scale"),c=a.attributes.getFloats("bias");return Q$1({scale:s,bias:c})},jm$1={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym$1=(a,s,c,d)=>{let et=c[0].dims.slice(),g=et.length,at=`
      ${Km$1(d.bias.length)}
      float process(int indices[${g}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...s,output:{dims:et,type:c[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:d.bias.length,data:d.bias},{name:"scale",type:"float",data:d.scale}],shaderSource:at}},Xm$1=(a,s,c)=>{let d={...jm$1,cacheHint:c.cacheKey};return{...d,get:()=>Ym$1(a,d,s,c)}},Km$1=a=>{let s=[`float getBias(float bias[${a}], int channel) {`];for(let c=0;c<a;++c)c===0?s.push(`	if (channel == ${c}) { return bias[${c}]; }`):c===a-1?s.push(`	else { return bias[${c}]; }`):s.push(`	else if (channel == ${c}) { return bias[${c}]; }`);return s.push("	}"),s.join(`
`)},Jm$1=a=>{if(!a||a.length!==1)throw new Error("ImageScaler requires 1 input.");if(a[0].dims.length!==4)throw new Error("Invalid input shape.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")}}),Lf,Cf,Df,Zm$1,Qm$1,eb,tb,rb,nb,Ff=L$1(()=>{we$1(),ae(),Lf=(a,s,c)=>{nb(s);let d=a.run(Qm$1(s[0]),s);return[a.run(rb(a,s[0],c,d.dims),[s[0],d,s[1],s[2]])]},Cf=a=>a.attributes.getFloat("epsilon",1e-5),Df={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm$1=(a,s)=>{let c=s.dims.slice(),d=c[1],et=c[2]*c[3],g=[c[0],d],at=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${c[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${c[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${et});
        temp = 0.0;
        for(int a2=0; a2<${c[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${c[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${et});

        return v;
      }`;return{...a,output:{dims:g,type:s.type,textureType:4},shaderSource:at}},Qm$1=a=>({...Df,get:()=>Zm$1(Df,a)}),eb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb=(a,s,c,d,et)=>{let g=H(a.session.backend.glContext.version),[at,$t]=a.calculateTextureWidthAndHeight(et,4),[vt,b]=[at/4,$t],pt=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${vt}, ${b});
        return ${g.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...s,output:{dims:c.dims,type:c.type,textureType:0},variables:[{name:"epsilon",type:"float",data:d}],shaderSource:pt}},rb=(a,s,c,d)=>{let et={...eb,cacheHint:`${c}`};return{...et,get:()=>tb(a,et,s,c,d)}},nb=a=>{if(!a||a.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let s=a[0],c=a[1],d=a[2];if(s.dims.length<3||c.dims.length!==1||d.dims.length!==1)throw new Error("Invalid input shape.");if(c.dims[0]!==s.dims[1]||d.dims[0]!==s.dims[1])throw new Error("Input shapes are mismatched.");if(s.type!=="float32"&&s.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||d.type!=="float32"&&d.type!=="float64")throw new Error("Invalid input type.");if(a[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ob(a,s){let c=a[0].dims[1],d=a[0].dims.length,et=-Math.floor((s.size-1)/2),g=Math.ceil((s.size-1)/2),at=`float(${s.alpha}) / float(${s.size})`,$t=`float(${s.bias})`,vt=`float(${s.beta})`,b=`
    float process(int indices[${d}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${et}; i <= ${g}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${c}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${$t} + ${at} * square_sum, ${vt});
    }`;return{...Bf,cacheHint:s.cacheKey,output:{dims:a[0].dims,type:a[0].type,textureType:0},shaderSource:b}}function ib(a,s){return{...Bf,cacheHint:s.cacheKey,get:()=>ob(a,s)}}var $f,kf,Bf,ab,Nf=L$1(()=>{Ue$1(),ae(),$f=(a,s,c)=>(ab(s),[a.run(ib(s,c),s)]),kf=a=>{let s=a.attributes.getFloat("alpha",1e-4),c=a.attributes.getFloat("beta",.75),d=a.attributes.getFloat("bias",1),et=a.attributes.getInt("size");return Q$1({alpha:s,beta:c,bias:d,size:et})},Bf={name:"LRN",inputNames:["X"],inputTypes:[0]},ab=a=>{if(!a||a.length!==1)throw new Error("LRN requires 1 input.");if(a[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(a[0].type!=="float32")throw new Error("input should be float type")}}),sb,$i,Rf,Mf,Gf,ub,lb,fb,cb,pb,db,hb,mb,Uf=L$1(()=>{Ue$1(),fe$1(),we$1(),ae(),sb={name:"Pad",inputNames:["A"],inputTypes:[0]},$i=(a,s,c)=>(fb(s),[a.run({...sb,cacheHint:c.cacheKey,get:()=>lb(a,s[0],c)},s)]),Rf=a=>{let s=a.attributes.getString("mode","constant"),c=a.attributes.getFloat("value",0),d=a.attributes.getInts("pads");return Q$1({mode:s,value:c,pads:d})},Mf=(a,s,c)=>{cb(s);let d=ub(a,s,c);return $i(a,[s[0]],d)},Gf=a=>a.attributes.getString("mode","constant"),ub=(a,s,c)=>{if(!a.session.isInitializer(s[1].dataId)||s.length>=3&&!a.session.isInitializer(s[2].dataId))throw new Error("dynamic pad attributes are not allowed");let d=Array.from(s[1].integerData),et=s.length>=3?s[2].floatData[0]:0;return Q$1({mode:c,pads:d,value:et})},lb=(a,s,c)=>{let d=U$2.padShape(s.dims.slice(),c.pads),et=d.length,g=`
      ${pb(a,s,c)}
      float process(int[${et}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:d,type:s.type,textureType:0},shaderSource:g}},fb=a=>{if(!a||a.length!==1)throw new Error("Pad requires 1 input");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")},cb=a=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(a[1].type!=="int32")throw new Error("Invalid input type.");if(a.length>=3&&a[2].type==="string")throw new Error("Invalid input type.")},pb=(a,s,c)=>{let d=H(a.session.backend.glContext.version),[et,g]=a.calculateTextureWidthAndHeight(s.dims,0),at=U$2.computeStrides(s.dims);switch(c.mode){case"constant":return db(d,s.dims,at,et,g,c.pads,c.value);case"reflect":return hb(d,s.dims,at,et,g,c.pads);case"edge":return mb(d,s.dims,at,et,g,c.pads);default:throw new Error("Invalid mode")}},db=(a,s,c,d,et,g,at)=>{let $t=s.length,vt="";for(let b=$t-1;b>=0;--b)vt+=`
        k = m[${b}] - ${g[b]};
        if (k < 0)  return constant;
        if (k >= ${s[b]}) return constant;
        offset += k * ${c[b]};
        `;return`
      float padA(int m[${$t}]) {
        const float constant = float(${at});
        int offset = 0;
        int k = 0;
        ${vt}
        vec2 coords = offsetToCoords(offset, ${d}, ${et});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `},hb=(a,s,c,d,et,g)=>{let at=s.length,$t="";for(let vt=at-1;vt>=0;--vt)$t+=`
        k = m[${vt}] - ${g[vt]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(s[vt]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${s[vt]}) { k = _2n_1 - k; }
        }
        offset += k * ${c[vt]};
        `;return`
      float padA(int m[${at}]) {
        int offset = 0;
        int k = 0;
        ${$t}
        vec2 coords = offsetToCoords(offset, ${d}, ${et});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `},mb=(a,s,c,d,et,g)=>{let at=s.length,$t="";for(let vt=at-1;vt>=0;--vt)$t+=`
        k = m[${vt}] - ${g[vt]};
        if (k < 0)  k = 0;
        if (k >= ${s[vt]}) k = ${s[vt]-1};
        offset += k * ${c[vt]};
      `;return`
      float padA(int m[${at}]) {
        int offset = 0;
        int k = 0;
        ${$t}
        vec2 coords = offsetToCoords(offset, ${d}, ${et});
        float value = getColorAsFloat(${a.texture2D}(A, coords));
        return value;
      }
      `}}),Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,Jf,bb,zf,Zf,ao$1,Qf,io$1,gb,ec=L$1(()=>{Ue$1(),fe$1(),ae(),Vf=(a,s,c)=>{ao$1(s);let d={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:c.cacheKey};return[a.run({...d,get:()=>Hf(s,d,!1,c)},s)]},Wf=a=>{let s=a.attributes.getString("auto_pad","NOTSET"),c=a.attributes.getInt("ceil_mode",0),d=a.attributes.getInt("count_include_pad",0)!==0,et=a.attributes.getInts("kernel_shape"),g=a.attributes.getInts("strides",[]),at=a.attributes.getInts("pads",[]);if(c!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q$1({autoPad:s,ceilMode:c,countIncludePad:d,kernelShape:et,strides:g,pads:at})},Hf=(a,s,c,d)=>{let[et,g]=Jf(a,d,c),at=U$2.size(et.kernelShape),$t="value += _X(x);",vt="";et.countIncludePad?vt+=`value /= float(${at});`:vt+=`value /= float(${at} - pad);`;let b=`
        ${Qf(a[0].dims,et,$t,vt,"0.0")}
      `;return{...s,output:{dims:g,type:a[0].type,textureType:0},shaderSource:b}},qf=(a,s,c)=>{ao$1(s);let d={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${c.countIncludePad}`};return[a.run({...d,get:()=>Hf(s,d,!0,c)},s)]},jf=a=>{let s=a.attributes.getInt("count_include_pad",0)!==0;return Q$1({autoPad:"",ceilMode:0,countIncludePad:s,kernelShape:[],strides:[],pads:[]})},Yf=(a,s,c)=>{ao$1(s);let d={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:c.cacheKey};return[a.run({...d,get:()=>Kf(s,d,!1,c)},s)]},Xf=a=>{let s=a.attributes.getString("auto_pad","NOTSET"),c=a.attributes.getInt("ceil_mode",0),d=a.attributes.getInts("kernel_shape"),et=a.attributes.getInts("strides",[]),g=a.attributes.getInts("pads",[]),at=a.attributes.getInt("storage_order",0),$t=a.attributes.getInts("dilations",[]);if(at!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(c!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q$1({autoPad:s,ceilMode:c,countIncludePad:!1,kernelShape:d,strides:et,pads:g,storageOrder:at,dilations:$t})},Kf=(a,s,c,d)=>{let[et,g]=Jf(a,d,c),at=`
      value = max(_X(x), value);
    `,$t="",vt=`
      ${Qf(a[0].dims,et,at,$t,"-1e5")}
    `;return{...s,output:{dims:g,type:a[0].type,textureType:0},shaderSource:vt}},Jf=(a,s,c)=>{let d=a[0].dims.slice(),et=Object.hasOwnProperty.call(s,"dilations"),g=s.kernelShape.slice(),at=s.strides.slice(),$t=et?s.dilations.slice():[],vt=s.pads.slice();mr$1.adjustPoolAttributes(c,d,g,at,$t,vt);let b=mr$1.computePoolOutputShape(c,d,at,$t,g,vt,s.autoPad),pt=Object.assign({},s);return et?Object.assign(pt,{kernelShape:g,strides:at,pads:vt,dilations:$t,cacheKey:s.cacheKey}):Object.assign(pt,{kernelShape:g,strides:at,pads:vt,cacheKey:s.cacheKey}),[pt,b]},bb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf=(a,s)=>(ao$1(s),[a.run({...zf,get:()=>Kf(s,zf,!0,bb)},s)]),ao$1=a=>{if(!a||a.length!==1)throw new Error("Pool ops requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.")},Qf=(a,s,c,d,et)=>{let g=a.length;if(s.kernelShape.length<=2){let at=s.kernelShape[s.kernelShape.length-1],$t=s.strides[s.strides.length-1],vt=s.pads[s.pads.length/2-1],b=s.pads[s.pads.length-1],pt=a[g-1],st="",wt="",Tt="";if(vt+b!==0?st=`
          for (int i = 0; i < ${at}; i++) {
            x[${g} - 1] = indices[${g} - 1] * ${$t} - ${vt} + i;
            if (x[${g} - 1] < 0 || x[${g} - 1] >= ${pt}) {
              pad++;
              continue;
            }
            ${c}
          }`:st=`
          for (int i = 0; i < ${at}; i++) {
            x[${g} - 1] = indices[${g} - 1] * ${$t} - ${vt} + i;
            ${c}
          }`,s.kernelShape.length===2){let Ct=s.kernelShape[s.kernelShape.length-2],jt=s.strides[s.strides.length-2],Lt=s.pads[s.pads.length/2-2],Ht=s.pads[s.pads.length-2],Gt=a[g-2];Lt+Ht!==0?wt=`
            for (int j = 0; j < ${Ct}; j++) {
              x[${g} - 2] = indices[${g} - 2] * ${jt} - ${Lt} + j;
              if (x[${g} - 2] < 0 || x[${g} - 2] >= ${Gt}) {
                pad+= ${at};
                continue;
              }
          `:wt=`
            for (int j = 0; j < ${Ct}; j++) {
              x[${g} - 2] = indices[${g} - 2] * ${jt} - ${Lt} + j;
            `,Tt=`
          }
        `}return`
        float process(int indices[${g}]) {
          int x[${g}];
          copyVec(indices, x);

          float value = ${et};
          int pad = 0;
          ${wt}
          ${st}
          ${Tt}
          ${d}
          return value;
        }
      `}else{let at=U$2.size(s.kernelShape),$t=U$2.computeStrides(s.kernelShape),vt=$t.length,b=s.pads.length,pt=gb(vt),st=io$1(a,"inputDims"),wt=io$1(s.pads,"pads"),Tt=io$1($t,"kernelStrides"),Ct=io$1(s.strides,"strides"),jt=s.pads.reduce((Ht,Gt)=>Ht+Gt),Lt="";return jt?Lt=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${c}
          }`:Lt=`
          }
          ${c}
        `,`
        ${pt}
        float process(int indices[${g}]) {
          int x[${g}];
          copyVec(indices, x);
          int offset[${vt}];
          int pads[${b}];
          int inputDims[${g}];
          int kernelStrides[${vt}];
          int strides[${vt}];
          ${wt}
          ${st}
          ${Ct}
          ${Tt}

          float value = ${et};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${at}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${g} - ${vt}; j < ${g}; j++) {
              x[j] = indices[j] * strides[j - ${g} + ${vt}]
                + offset[j - ${g} + ${vt}] - pads[j - 2];
              ${Lt}
          }
          ${d}

          return value;
        }
      `}},io$1=(a,s)=>{let c="";for(let d=0;d<a.length;d++)c+=`
      ${s}[${d}] = ${a[d]};
    `;return c},gb=a=>`
  void offsetToIndices(int offset, int[${a}] strides, out int[${a}] indices) {
    if (${a} == 0) {
      return;
    }
    for (int i = 0; i < ${a} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${a} - 1] = offset;
  }`}),vr,er,yb,Tb,tc,rc,nc$1,oc$1,ic$1,ac$1,sc$1,uc$1=L$1(()=>{Ue$1(),pn(),fe$1(),ae(),vr=(a,s,c,d,et)=>{Tb(s);let g={name:d,inputNames:["A"],inputTypes:[0]};return[a.run({...g,cacheHint:c.cacheKey,get:()=>yb(a,s,c,d,et,g)},s)]},er=a=>{let s=a.attributes.getInts("axes",[]),c=a.attributes.getInt("keepdims",1)===1;return Q$1({axes:s,keepDims:c})},yb=(a,s,c,d,et,g)=>{let at=[],$t=s[0].dims.length||1,vt=[],b=U$2.normalizeAxes(c.axes,s[0].dims.length),pt=et(s,b),st=pt[1];for(let Tt=0;Tt<s[0].dims.length;Tt++)b.indexOf(Tt)>=0||b.length===0?(c.keepDims&&at.push(1),st=`
          for(int j${Tt} = 0; j${Tt} < ${s[0].dims[Tt]}; j${Tt}++) {
            inputIdx[${Tt}] = j${Tt};
            ${st}
          }`):(vt.push(`inputIdx[${Tt}] = outputIdx[${at.length}];`),at.push(s[0].dims[Tt]));let wt=`
      float process(int outputIdx[${at.length||1}]) {
        float value;                 // final result
        int inputIdx[${$t}];      // addressing input data
        ${vt.join(`
`)}
        ${pt[0]}       // init ops for reduce max/min
        ${st}
        ${pt[2]}       // final computation for reduce mean
        return value;
      }`;return{...g,output:{dims:at,type:s[0].type,textureType:0},shaderSource:wt}},Tb=a=>{if(!a||a.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invalid input type.")},tc=(a,s,c)=>vr(a,s,c,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(a,s,c)=>vr(a,s,c,"ReduceMean",(d,et)=>{let g=1;for(let at=0;at<d[0].dims.length;at++)(et.indexOf(at)>=0||et.length===0)&&(g*=d[0].dims[at]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${g}.;`]}),nc$1=(a,s,c)=>vr(a,s,c,"ReduceMax",(d,et)=>{let g=[];for(let at=0;at<d[0].dims.length;at++)(et.indexOf(at)>=0||et.length===0)&&g.push(`inputIdx[${at}] = 0;`);return[`${g.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc$1=(a,s,c)=>vr(a,s,c,"ReduceMin",(d,et)=>{let g=[];for(let at=0;at<d[0].dims.length;at++)(et.indexOf(at)>=0||et.length===0)&&g.push(`inputIdx[${at}] = 0;`);return[`${g.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic$1=(a,s,c)=>vr(a,s,c,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac$1=(a,s,c)=>vr(a,s,c,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc$1=(a,s,c)=>vr(a,s,c,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc$1,fc$1=L$1(()=>{fe$1(),lc$1=(a,s)=>{let c=U$2.calculateReshapedDims(s[0].dims,s[1].integerData);return a.session.pack?[a.reshapePacked(s[0],c)]:[a.reshapeUnpacked(s[0],c)]}}),cc$1,ki,pc$1,dc$1,dn,xb,Bi$1,so$1,Ni=L$1(()=>{Ue$1(),we$1(),ae(),cc$1={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(a,s,c)=>(Bi$1(s,c),[a.run({...cc$1,cacheHint:c.cacheKey,get:()=>xb(a,s,c)},s)]),pc$1=a=>dn(a,7),dc$1=a=>dn(a,9),dn=(a,s)=>{let c=s>=10,d=a.attributes.getString("mode","nearest");if(d!=="nearest"&&d!=="linear"&&(s<11||d!=="cubic"))throw new Error(`unrecognized mode: ${d}`);let et=[];s<9&&(et=a.attributes.getFloats("scales"),so$1(et,d,c));let g=a.attributes.getFloat("extrapolation_value",0),at=s>10?a.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(at)===-1)throw new Error(`coordinate_transform_mode '${at}' is not supported`);let $t=at==="tf_crop_and_resize",vt=$t,b=d==="nearest"&&s>=11?a.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(b)===-1)throw new Error(`nearest_mode '${b}' is not supported`);let pt=a.attributes.getFloat("cubic_coeff_a",-.75),st=a.attributes.getInt("exclude_outside",0)!==0;if(st&&d!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let wt=s<11?!0:d==="nearest"&&at==="asymmetric"&&b==="floor",Tt=0,Ct=0,jt=0;return s>10?a.inputs.length>2?(Tt=1,Ct=2,jt=3):(Ct=1,jt=2):s===9&&(Ct=1),Q$1({opset:s,isResize:c,mode:d,scales:et,extrapolationValue:g,coordinateTransformMode:at,useExtrapolation:vt,needRoiInput:$t,nearestMode:b,cubicCoefficientA:pt,excludeOutside:st,useNearest2xOptimization:wt,roiInputIdx:Tt,scalesInputIdx:Ct,sizesInputIdx:jt})},xb=(a,s,c)=>{let d=H(a.session.backend.glContext.version),[et,g]=a.calculateTextureWidthAndHeight(s[0].dims,0),at=s[0].dims.map((jt,Lt)=>Math.floor(jt*c.scales[Lt])),[$t,vt]=a.calculateTextureWidthAndHeight(at,0),b=at.length,pt=new Array(b),st=new Array(b),wt=`
      int output_pitches[${b}];
      int input_pitches[${b}];
      `;for(let jt=b-1;jt>=0;jt--)pt[jt]=jt===b-1?1:pt[jt+1]*at[jt+1],st[jt]=jt===b-1?1:st[jt+1]*s[0].dims[jt+1],wt+=`
        output_pitches[${jt}] = ${pt[jt]};
        input_pitches[${jt}] = ${st[jt]};
        `;let Tt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${et}, ${g});
        float value = getColorAsFloat(${d.texture2D}(X, coords));
        return value;
      }
      `,Ct=c.mode==="nearest"?`
    ${Tt}
    float process(int indices[${b}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${$t}, ${vt});

      ${wt}

      int d, m;
      for (int dim = 0; dim < ${b}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:b===4?`
    ${Tt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${$t}, ${vt});

      ${wt}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${s[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${Tt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${$t}, ${vt});

      ${wt}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${s[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...cc$1,output:{dims:at,type:s[0].type,textureType:0},shaderSource:Ct,variables:[{name:"scales",type:"int",arrayLength:c.scales.length,data:c.scales.map(jt=>Math.ceil(jt))}]}},Bi$1=(a,s)=>{if(!a||s.opset<9&&a.length!==1||s.opset>=9&&s.opset<11&&a.length!==2||s.opset>=11&&a.length<2)throw new Error("invalid inputs.");if(s.scales.length>0&&a[0].dims.length!==s.scales.length)throw new Error("Invalid input shape.");if(a[0].type==="string")throw new Error("Invalid input tensor types.")},so$1=(a,s,c)=>{if(c){for(let d of a)if(d<=0)throw new Error("Scale value should be greater than 0.")}else for(let d of a)if(d<1)throw new Error("Scale value should be greater than or equal to 1.");if((s==="linear"||s==="cubic")&&a.length!==2&&(a.length!==4||a[0]!==1||a[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${c?"Resize":"Upsample"} opeartor.`)}}),Ri$1,Mi$1,hc,mc$1,wb,vb,_b,Ob,bc$1=L$1(()=>{we$1(),ae(),Bt$1(),Tr(),Ni(),Ri$1={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi$1=(a,s,c)=>(Bi$1(s,c),[a.run({...Ri$1,cacheHint:c.cacheKey,get:()=>wb(a,s,c)},s)]),hc=a=>dn(a,10),mc$1=a=>dn(a,11),wb=(a,s,c)=>{let d=H(a.session.backend.glContext.version),[et,g]=vb(s,c);if(et.every(Gt=>Gt===1)&&c.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri$1,output:{dims:g,type:s[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${d.texture2D}(X, TexCoords);
                    ${d.output} = v;
                }`};let at=g.length;if(at<2)throw new Error(`output dimension should be at least 2, but got ${at}`);let $t=g[at-2],vt=g[at-1],b=s[0].dims;if(at!==b.length)throw new Error(`output dimension should match input ${b.length}, but got ${at}`);let pt=b[at-2],st=b[at-1],wt=et[at-2],Tt=et[at-1],Ct="";if(c.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${c.mode}'`);switch(c.coordinateTransformMode){case"asymmetric":Ct=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Ct=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Ct=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${vt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${$t}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${vt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${$t}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Ct=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${vt}.0 - 1.0, ${$t}.0 - 1.0, ${vt}.0 - 1.0,
                            ${$t}.0 - 1.0);
                        vec4 original = vec4(${st}.0 - 1.0, ${pt}.0 - 1.0, ${st}.0 - 1.0,
                            ${pt}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${c.coordinateTransformMode}'`)}let jt=Qe(at),Lt=Nt(),Ht=`
            const vec2 inputWH = vec2(${pt}.0, ${st}.0);
            const vec4 scaleWHWH = vec4(float(${wt}), float(${Tt}), float(${wt}), float(${Tt}));
            ${Lt}
            ${Ct}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${jt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${$t-1};
                bool hasNextCol = rc.z < ${vt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${d.output} = vec4(newValue);
            }
        `;return{...Ri$1,output:{dims:g,type:s[0].type,textureType:2},hasMain:!0,shaderSource:Ht}},vb=(a,s)=>{let c=a[0].dims,d=s.scales,et;if(d.length===0){let at=a[s.scalesInputIdx];if(at&&at.size!==0){if(a[s.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");d=_b(at,s.mode,s.isResize)}else{let $t=a[s.sizesInputIdx];if(!$t||$t.size===0)throw new Error("Either scales or sizes MUST be provided as input.");et=Array.from($t.integerData),d=Ob(et,c,s.mode,s.isResize)}}else if(a[s.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let g=et||c.map((at,$t)=>Math.floor(at*d[$t]));return[d,g]},_b=(a,s,c)=>{let d=Array.from(a.floatData);return so$1(d,s,c),d},Ob=(a,s,c,d)=>{let et=s.length,g=new Array(et);for(let at=0,$t=et;at<$t;at++)if(s[at]===0){if(a[at]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");g[at]=1}else g[at]=a[at]/s[at];return so$1(g,c,d),g}}),gc$1,Ib,yc$1=L$1(()=>{yr(),gc$1=(a,s)=>(Ib(s),[new $e([s[0].dims.length],"int32",void 0,void 0,new Int32Array(s[0].dims))]),Ib=a=>{if(!a||a.length!==1)throw new Error("Shape requires 1 input.")}}),Gi$1,Tc$1,xc$1,wc$1,Sb,vc$1,Ab,Pb,_c$1=L$1(()=>{Ue$1(),pn(),fe$1(),ae(),Gi$1={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc$1=(a,s,c)=>(Sb(s),[a.run({...Gi$1,cacheHint:c.cacheKey,get:()=>wc$1(a,s[0],c)},s)]),xc$1=a=>{let s=a.attributes.getInts("starts"),c=a.attributes.getInts("ends"),d=a.attributes.getInts("axes",[]);return Q$1({starts:s,ends:c,axes:d})},wc$1=(a,s,c)=>{let d=c.axes.length===0?s.dims.slice(0).map((pt,st)=>st):c.axes,et=U$2.normalizeAxes(d,s.dims.length),g=c.starts.map((pt,st)=>pt>s.dims[et[st]]-1?s.dims[et[st]]:U$2.normalizeAxis(pt,s.dims[et[st]])),at=c.ends.map((pt,st)=>pt>s.dims[et[st]]-1?s.dims[et[st]]:U$2.normalizeAxis(pt,s.dims[et[st]])),$t=s.dims.slice(),vt=[];for(let pt=0;pt<et.length;pt++)$t[et[pt]]=at[pt]-g[pt],g[pt]>0&&vt.push(`outputIdx[${et[pt]}] += ${g[pt]};`);let b=`
      float process(int outputIdx[${$t.length}]) {
        ${vt.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Gi$1,output:{dims:$t,type:s.type,textureType:0},shaderSource:b}},Sb=a=>{if(!a||a.length!==1)throw new Error("Slice requires 1 input.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invalid input type.")},vc$1=(a,s)=>{Pb(s);let c=Ab(a,s);return[a.run({...Gi$1,cacheHint:c.cacheKey,get:()=>wc$1(a,s[0],c)},[s[0]])]},Ab=(a,s)=>{if(!a.session.isInitializer(s[1].dataId)||!a.session.isInitializer(s[2].dataId)||s.length>=4&&!a.session.isInitializer(s[3].dataId)||s.length>=5&&!a.session.isInitializer(s[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(s.length>=5&&s[4].integerData.some(at=>at!==1))throw new Error("currently non-1 steps is not supported for Slice");let c=Array.from(s[1].integerData),d=Array.from(s[2].integerData),et=s.length>=4?Array.from(s[3].integerData):[],g=`${et};${c};${d}`;return{starts:c,ends:d,axes:et,cacheKey:g}},Pb=a=>{if(!a||a.length<3||a.length>5)throw new Error("Invalid input number.");if(a[1].type!=="int32"||a[1].dims.length!==1)throw new Error("Invalid input type.");if(a[2].type!=="int32"||a[2].dims.length!==1)throw new Error("Invalid input type.");if(a.length>=4&&(a[3].type!=="int32"||a[3].dims.length!==1))throw new Error("Invalid input type.");if(a.length>=5&&(a[4].type!=="int32"||a[4].dims.length!==1))throw new Error("Invalid input type.")}}),Oc$1,Ic$1,Sc$1,Ac$1,Pc$1,Ec$1,Dc$1,Lc$1,Eb,Db,Lb,Cc$1,Fc$1=L$1(()=>{Ue$1(),fe$1(),we$1(),ae(),oo$1(),Oc$1={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic$1={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc$1={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac$1=(a,s,c)=>{Cc$1(s);let d=s[0].dims.slice(),et=U$2.normalizeAxis(c.axis,d.length),g=U$2.sizeToDimension(d,et),at=U$2.sizeFromDimension(d,et);return Lc$1(a,s,c,g,at)},Pc$1=a=>Q$1({axis:a.attributes.getInt("axis",1)}),Ec$1=a=>Q$1({axis:a.attributes.getInt("axis",-1)}),Dc$1=(a,s,c)=>{Cc$1(s);let d=s[0].dims.slice(),et=U$2.normalizeAxis(c.axis,d.length),g=d.length,at=et!==g-1,$t=[],vt=[],b=[],pt;at&&(vt=Array.from({length:g}).map((Ct,jt)=>jt),vt[et]=g-1,vt[g-1]=et,vt.map(Ct=>$t.push(d[Ct])),pt=Q$1({perm:vt}),b=wr(a,s,pt));let st=at?U$2.sizeToDimension($t,g-1):U$2.sizeToDimension(d,g-1),wt=at?U$2.sizeFromDimension($t,g-1):U$2.sizeFromDimension(d,g-1),Tt=Lc$1(a,at?b:s,c,st,wt);return at?wr(a,Tt,pt):Tt},Lc$1=(a,s,c,d,et)=>{let g=Eb(a,s[0],d,et,[d]),at=a.run({...Oc$1,cacheHint:c.cacheKey,get:()=>g},s),$t=Db(a,s[0],d,et,g.output.dims,[d]),vt=a.run({...Ic$1,cacheHint:c.cacheKey,get:()=>$t},[s[0],at]),b=Lb(a,s[0],d,et,g.output.dims,$t.output.dims);return[a.run({...Sc$1,cacheHint:c.cacheKey,get:()=>b},[s[0],at,vt])]},Eb=(a,s,c,d,et)=>{let[g,at]=a.calculateTextureWidthAndHeight(s.dims,0),$t=et.length;if(c<1||d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(et.length!==1)throw new Error("Dimensionality of the output should be 1");if(et[0]!==c)throw new Error("Shape of the output should be equal to logical row count");let vt=H(a.session.backend.glContext.version),b=`
      float process(int[${$t}] indices) {
        int logical_row_start_offset = indices[0] * ${d};

        float max = getColorAsFloat(${vt.texture2D}(A, offsetToCoords(logical_row_start_offset, ${g},
        ${at} )));
        for(int i=1; i<${d}; ++i)
        {
          float current = getColorAsFloat(${vt.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${g}, ${at})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Oc$1,output:{dims:et,type:s.type,textureType:0},shaderSource:b}},Db=(a,s,c,d,et,g)=>{let[at,$t]=a.calculateTextureWidthAndHeight(s.dims,0),vt=g.length;if(c<1||d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(g.length!==1)throw new Error("Dimensionality of the output should be 1");if(g[0]!==c)throw new Error("Shape of the output should be equal to logical row count");if(et.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(et[0]!==c)throw new Error("Shape of the intermediate results should be equal to logical row count");let b=H(a.session.backend.glContext.version),pt=`
      float process(int[${vt}] indices) {
        int logical_row_start_offset = indices[0] * ${d};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${d}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${b.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${at}, ${$t}))) - max);
        }

        return norm_factor;
      }`;return{...Ic$1,output:{dims:g,type:s.type,textureType:0},shaderSource:pt}},Lb=(a,s,c,d,et,g)=>{let[at,$t]=a.calculateTextureWidthAndHeight(s.dims,0),vt=s.dims.length;if(c<1||d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(et.length!==1||g.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(et[0]!==c||g[0]!==c)throw new Error("Shape of the intermediate results should be equal to logical row count");let b=`
      float process(int[${vt}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${at}, ${$t});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${d};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Sc$1,output:{dims:s.dims,type:s.type,textureType:0},shaderSource:b}},Cc$1=a=>{if(!a||a.length!==1)throw new Error("Softmax requires 1 input.");if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type")}}),$c$1,kc$1,Bc$1,Cb,Fb,$b,Nc$1=L$1(()=>{Ue$1(),fe$1(),ae(),$c$1={name:"Split",inputNames:["A"],inputTypes:[0]},kc$1=(a,s,c)=>{$b(s);let d=U$2.normalizeAxis(c.axis,s[0].dims.length),et=Cb(a,s,d,c),g=[];for(let at=0;at<et;++at)g.push(a.run({...$c$1,cacheHint:`${c.cacheKey};${at}`,get:()=>Fb(a,s[0],c,d,at)},s));return g},Bc$1=a=>{let s=a.attributes.getInt("axis",0),c=a.attributes.getInts("split",[]),d=a.outputs.length;return Q$1({axis:s,split:c,numOutputs:d})},Cb=(a,s,c,d)=>{let[,et]=an$1.splitShape(s[0].dims,c,d.split,d.numOutputs);return et.length},Fb=(a,s,c,d,et)=>{let[g,at]=an$1.splitShape(s.dims,d,c.split,c.numOutputs),$t=at[et],vt=g[et],b=`
      float process(int indices[${vt.length}]) {
        indices[${d}] += ${$t};
        return _A(indices);
      }
    `;return{...$c$1,cacheHint:`${c.cacheKey}:${et}`,output:{dims:vt,type:s.type,textureType:0},shaderSource:b}},$b=a=>{if(!a||a.length!==1)throw new Error("Split requires one input.");if(a[0].type!=="int8"&&a[0].type!=="uint8"&&a[0].type!=="int16"&&a[0].type!=="uint16"&&a[0].type!=="int32"&&a[0].type!=="uint32"&&a[0].type!=="float32"&&a[0].type!=="float64"&&a[0].type!=="bool")throw new Error("Invalid input type.")}}),Ui$1,Rc$1,Mc$1,kb,Bb,Gc$1=L$1(()=>{fe$1(),Ui$1=(a,s,c)=>{kb(s);let d=U$2.squeezeShape(s[0].dims,c);return[a.reshapeUnpacked(s[0],d)]},Rc$1=(a,s)=>(Bb(s),Ui$1(a,[s[0]],Array.from(s[1].integerData))),Mc$1=a=>a.attributes.getInts("axes"),kb=a=>{if(!a||a.length!==1)throw new Error("Squeeze requires 1 input.");if(a[0].type==="string")throw new Error("invalid input tensor types.")},Bb=a=>{if(!a||a.length!==2)throw new Error("Squeeze requires 2 inputs.");if(a[1].type!=="int32")throw new Error("Invalid input type.")}}),Uc$1,Nb,Rb,zc$1=L$1(()=>{we$1(),ae(),Uc$1=(a,s)=>{Rb(s);let c={name:"Sum",inputNames:s.map((d,et)=>`X${et}`),inputTypes:new Array(s.length).fill(0)};return[a.run({...c,get:()=>Nb(a,s,c)},s)]},Nb=(a,s,c)=>{let d=H(a.session.backend.glContext.version),et=s[0].dims.slice(),g=`
      void main() {
        vec4 result = ${s.map((at,$t)=>`${d.texture2D}(X${$t},TexCoords)`).join(" + ")};
        ${d.output} = result;
      }
    `;return{...c,output:{dims:et,type:s[0].type,textureType:0},hasMain:!0,shaderSource:g}},Rb=a=>{if(!a||a.length===0)throw new Error("Sum requires inputs.");let s=a[0].dims.length;for(let c=1;c<a.length;c++){if(s!==a[c].dims.length)throw new Error("Input shapes are mismatched.");for(let d=0;d<s;d++)if(a[0].dims[d]!==a[c].dims[d])throw new Error("Input shapes are not matched.")}if(a[0].type!=="float32"&&a[0].type!=="float64")throw new Error("Invalid input type.");for(let c=1;c<a.length;c++)if(a[0].type!==a[c].type)throw new Error("Input types are not matched.")}}),Vc$1,Mb,Gb,Wc$1=L$1(()=>{pn(),ae(),Vc$1=(a,s)=>{Gb(s);let c={name:"Tile",inputNames:["A"],inputTypes:[0]};return[a.run({...c,get:()=>Mb(a,s,c)},s)]},Mb=(a,s,c)=>{let d=s[0].dims.slice(),et=new Array(d.length),g=[];for(let vt=0;vt<d.length;vt++)et[vt]=d[vt]*s[1].numberData[vt],g.push(`inputIdx[${vt}] = int(mod(float(outputIdx[${vt}]), ${d[vt]}.));`);let at=et.length,$t=`
      float process(int outputIdx[${at}]) {
        int inputIdx[${at}];
        ${g.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...c,output:{dims:et,type:s[0].type,textureType:0},shaderSource:$t}},Gb=a=>{if(!a||a.length!==2)throw new Error("Tile requires 2 input.");if(a[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(a[1].dims[0]!==a[0].dims.length)throw new Error("Invalid input shape.");if(Qt.indexOf(a[0].type)===-1)throw new Error("Invalid input type.");if(a[1].type!=="int32"&&a[1].type!=="int16")throw new Error("Invalid repeat type.")}}),zi$1,Hc$1,qc$1,Ub,zb,jc$1=L$1(()=>{fe$1(),zi$1=(a,s,c)=>{Ub(s);let d=U$2.unsqueezeShape(s[0].dims,c);return[a.reshapeUnpacked(s[0],d)]},Hc$1=(a,s)=>(zb(s),zi$1(a,[s[0]],Array.from(s[1].integerData))),qc$1=a=>a.attributes.getInts("axes"),Ub=a=>{if(!a||a.length!==1)throw new Error("Unsqueeze requires 1 input.");if(a[0].type==="string")throw new Error("invalid input tensor types.")},zb=a=>{if(!a||a.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(a[1].type!=="int32")throw new Error("Invalid input type.")}}),Yc$1,Xc$1=L$1(()=>{ol$1(),gl$1(),xl$1(),Sl$1(),to$1(),ff$1(),bf(),Tf(),vf(),Sf(),Ef(),Ff(),Nf(),ro$1(),Uf(),ec(),uc$1(),fc$1(),bc$1(),yc$1(),_c$1(),Fc$1(),Nc$1(),Gc$1(),zc$1(),Wc$1(),oo$1(),Ii(),jc$1(),Ni(),Yc$1=[["Abs","","6+",Al$1],["Acos","","7+",Pl$1],["Add","","7+",il$1],["And","","7+",al$1],["Asin","","7+",El$1],["Atan","","7+",Dl$1],["AveragePool","","7+",Vf,Wf],["BatchNormalization","","7+",rl$1,nl$1],["Cast","","6+",yl$1,Tl$1],["Ceil","","6+",Fl$1],["Clip","","6-10",_i,Ll$1],["Clip","","11+",Cl$1],["Concat","","4+",_l$1,Il$1],["Conv","","1+",Li$1,Ci],["ConvTranspose","","1+",uf$1,lf$1],["Cos","","7+",$l$1],["Div","","7+",sl$1],["Dropout","","7+",Oi$1],["DepthToSpace","","1+",hf$1,mf$1],["Equal","","7+",ul$1],["Elu","","6+",kl$1,Bl$1],["Exp","","6+",Nl$1],["Flatten","","1+",gf,yf],["Floor","","6+",Rl$1],["FusedConv","com.microsoft","1+",Li$1,Ci],["Gather","","1+",xf,wf],["Gemm","","7-10",Fi$1,Of],["Gemm","","11+",Fi$1,If],["GlobalAveragePool","","1+",qf,jf],["GlobalMaxPool","","1+",Zf],["Greater","","7+",ll$1],["Identity","","1+",Oi$1],["ImageScaler","","1+",Af,Pf],["InstanceNormalization","","6+",Lf,Cf],["LeakyRelu","","6+",Ml$1,Gl$1],["Less","","7+",fl$1],["LRN","","1+",$f,kf],["Log","","6+",Ul$1],["MatMul","","1+",ef$1,tf$1],["MaxPool","","1+",Yf,Xf],["Mul","","7+",cl$1],["Neg","","6+",zl$1],["Not","","1+",Vl$1],["Or","","7+",pl$1],["Pad","","2-10",$i,Rf],["Pad","","11+",Mf,Gf],["Pow","","7+",dl$1],["PRelu","","7+",hl$1],["ReduceLogSum","","1+",ac$1,er],["ReduceMax","","1+",nc$1,er],["ReduceMean","","1+",rc,er],["ReduceMin","","1+",oc$1,er],["ReduceProd","","1+",ic$1,er],["ReduceSum","","1-12",tc,er],["ReduceSumSquare","","1+",sc$1,er],["Relu","","6+",Wl$1],["Reshape","","5+",lc$1],["Resize","","10",Mi$1,hc],["Resize","","11+",Mi$1,mc$1],["Shape","","1+",gc$1],["Sigmoid","","6+",Hl$1],["Sin","","7+",ql$1],["Slice","","10+",vc$1],["Slice","","1-9",Tc$1,xc$1],["Softmax","","1-12",Ac$1,Pc$1],["Softmax","","13+",Dc$1,Ec$1],["Split","","2-12",kc$1,Bc$1],["Sqrt","","6+",jl$1],["Squeeze","","1-12",Ui$1,Mc$1],["Squeeze","","13+",Rc$1],["Sub","","7+",ml$1],["Sum","","6+",Uc$1],["Tan","","7+",Yl$1],["Tanh","","6+",Xl$1],["Tile","","6+",Vc$1],["Transpose","","1+",wr,pf$1],["Upsample","","7-8",ki,pc$1],["Upsample","","9",ki,dc$1],["Unsqueeze","","1-12",zi$1,qc$1],["Unsqueeze","","13+",Hc$1],["Xor","","7+",bl$1]]});function Jc$1(a){let s={},c;for(;(c=Kc$1.exec(a))!==null;){let d=c[3].split(",").map(et=>{let g=et.trim().split(" ");return g&&g.length===2?{type:g[0],name:g[1]}:null}).filter(et=>et!==null);s[c[2]]={params:d,body:c[4]}}for(let d in s){let et=Vb.replace("__FUNC__",d),g=new RegExp(et,"gm");for(;(c=g.exec(a))!==null;){let at=c[1],$t=c[2],vt=c[3].split(","),b=at?`${at} ${$t};`:"",pt=s[d].body,st="";s[d].params.forEach((Tt,Ct)=>{Tt&&(st+=`${Tt.type} ${Tt.name} = ${vt[Ct]};
`)}),pt=`${st}
 ${pt}`,pt=pt.replace("return",`${$t} = `);let wt=`
      ${b}
      {
        ${pt}
      }
      `;a=a.replace(c[0],wt)}}return a=a.replace(Kc$1,""),a}var Kc$1,Vb,Zc$1=L$1(()=>{Kc$1=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr(a,s){let c=[],d=[];for(let et=0;et<a.length;++et)a[et]!==1&&(c.push(a[et]),d.push(et));return{newShape:c,keptDims:d}}function qb(a){if(a.length===0)return 1;let s=a[0];for(let c=1;c<a.length;c++)s*=a[c];return s}function Qc$1(a){let s=Math.ceil(Math.sqrt(a));return[s,Math.ceil(a/s)]}var uo$1,Vi=L$1(()=>{lt$1(),fe$1(),uo$1=class{constructor(a){this.maxTextureSize=a}computeTextureWH(a,s){let c=this.computeTexture(a,s);return s&&s.isPacked&&(c[0]/=2,c[1]/=2),s&&s.reverseWH?[c[1],c[0]]:c}computeTexture(a,s){let c=s&&s.isPacked;if(a.length===0)return c?[2,2]:[1,1];let d=this.maxTextureSize;if(s&&s.breakAxis!==void 0){let at=s.breakAxis>=a.length?1:a.slice(s.breakAxis).reduce((vt,b)=>vt*b),$t=s.breakAxis<=0?1:a.slice(0,s.breakAxis).reduce((vt,b)=>vt*b);if(at>d||$t>d)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${a}, breakAxis:${s.breakAxis}`);else return[at,$t]}let et=a.slice(0);c&&(d=d*2,et=et.map((at,$t)=>$t>=et.length-2?et[$t]%2===0?et[$t]:et[$t]+1:et[$t]),et.length===1&&(et=[2,et[0]])),et.length!==2&&(et=Mr(et).newShape);let g=qb(et);return et.length<=1&&g<=d?[1,g]:et.length===2&&et[0]<=d&&et[1]<=d?et:et.length===3&&et[0]*et[1]<=d&&et[2]<=d?[et[0]*et[1],et[2]]:et.length===3&&et[0]<=d&&et[1]*et[2]<=d?[et[0],et[1]*et[2]]:et.length===4&&et[0]*et[1]*et[2]<=d&&et[3]<=d?[et[0]*et[1]*et[2],et[3]]:et.length===4&&et[0]<=d&&et[1]*et[2]*et[3]<=d?[et[0],et[1]*et[2]*et[3]]:c?Qc$1(g/4).map(at=>at*2):Qc$1(g)}}}),lo$1,ep$1=L$1(()=>{fe$1(),Wt$1(),we$1(),Vi(),Bt$1(),lo$1=class extends dt{constructor(a){super(a)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let a="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${a}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let a="coordsToOffset";return{coordsToOffset:new R(`
      int ${a}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let a=this.context.outputTextureLayout;return a.isPacked?this.getPackedOutputSamplingSnippet(a):this.getUnpackedOutputSamplingSnippet(a)}getPackedOutputSamplingSnippet(a){let s=a.unpackedShape,c=[a.width,a.height],d={},et="getOutputCoords";switch(s.length){case 0:d[et]=this.getOutputScalarCoords();break;case 1:d[et]=this.getOutputPacked1DCoords(s,c);break;case 2:d[et]=this.getOutputPacked2DCoords(s,c);break;case 3:d[et]=this.getOutputPacked3DCoords(s,c);break;default:d[et]=this.getOutputPackedNDCoords(s,c)}let g=`
      void setOutput(vec4 val) {
        ${H(this.context.glContext.version).output} = val;
      }
    `,at="floatTextureSetRGBA";return d[at]=new R(g),d}getUnpackedOutputSamplingSnippet(a){let s=a.unpackedShape,c=[a.width,a.height],d={},et="getOutputCoords";switch(s.length){case 0:d[et]=this.getOutputScalarCoords();break;case 1:d[et]=this.getOutputUnpacked1DCoords(s,c);break;case 2:d[et]=this.getOutputUnpacked2DCoords(s,c);break;case 3:d[et]=this.getOutputUnpacked3DCoords(s,c);break;case 4:d[et]=this.getOutputUnpacked4DCoords(s,c);break;case 5:d[et]=this.getOutputUnpacked5DCoords(s,c);break;case 6:d[et]=this.getOutputUnpacked6DCoords(s,c);break;default:throw new Error(`Unsupported output dimensionality: ${s.length}`)}let g=`
        void setOutput(float val) {
          ${H(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,at="floatTextureSetR";return d[at]=new R(g),d}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(a,s){let c=s,d="";return c[0]===1?(d=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${c[1]}.0);
          }
        `,new R(d)):c[1]===1?(d=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${c[0]}.0);
          }
        `,new R(d)):(d=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${c[0]}, ${c[1]}));
          return 2 * (resTexRC.y * ${c[0]} + resTexRC.x);
        }
      `,new R(d))}getOutputPacked2DCoords(a,s){let c="";if(hr$1.arraysEqual(a,s))return c=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${s[0]}, ${s[1]}));
        }
      `,new R(c);let d=s,et=Math.ceil(a[1]/2);return c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${d[0]}, ${d[1]}));

          int index = resTexRC.y * ${d[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${et}) * 2;
          int c = 2 * (index / ${et});

          return ivec2(r, c);
        }
      `,new R(c)}getOutputPacked3DCoords(a,s){let c=[s[0],s[1]],d=Math.ceil(a[2]/2),et=d*Math.ceil(a[1]/2),g=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${c[0]}, ${c[1]}));
          int index = resTexRC.y * ${c[0]} + resTexRC.x;

          int b = index / ${et};
          index -= b * ${et};

          // reverse r and c order for packed texture
          int r = imod(index, ${d}) * 2;
          int c = 2 * (index / ${d});

          return ivec3(b, r, c);
        }
      `;return new R(g)}getOutputPackedNDCoords(a,s){let c=[s[0],s[1]],d=Math.ceil(a[a.length-1]/2),et=d*Math.ceil(a[a.length-2]/2),g=et,at="",$t="b, r, c";for(let b=2;b<a.length-1;b++)g*=a[a.length-b-1],at=`
      int b${b} = index / ${g};
      index -= b${b} * ${g};
    `+at,$t=`b${b}, `+$t;let vt=`
      ivec${a.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${c[0]}, ${c[1]}));
        int index = resTexRC.y * ${c[0]} + resTexRC.x;

        ${at}

        int b = index / ${et};
        index -= b * ${et};

        // reverse r and c order for packed texture
        int r = imod(index, ${d}) * 2;
        int c = 2 * (index / ${d});

        return ivec${a.length}(${$t});
      }
    `;return new R(vt)}getOutputUnpacked1DCoords(a,s){let c=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${s[0]}, ${s[1]}));
          return resTexRC.y * ${s[0]} + resTexRC.x;
        }
      `;return new R(c)}getOutputUnpacked2DCoords(a,s){let c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${s[0]}, ${s[1]}));
          int index = resTexRC.y * ${s[0]} + resTexRC.x;
          int r = index / ${a[1]};
          int c = index - r * ${a[1]};
          return ivec2(r, c);
        }
      `;return new R(c)}getOutputUnpacked3DCoords(a,s){let c="",d=a.length,et=null;d<2&&(et=[]),et=new Array(d-1),et[d-2]=a[d-1];for(let $t=d-3;$t>=0;--$t)et[$t]=et[$t+1]*a[$t+1];let g=["r","c","d"],at=et.map(($t,vt)=>{let b=`int ${g[vt]} = index / ${$t}`,pt=vt===et.length-1?`int ${g[vt+1]} = index - ${g[vt]} * ${$t}`:`index -= ${g[vt]} * ${$t}`;return`${b}; ${pt};`}).join("");return c=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${s[0]}, ${s[1]}));
          int index = resTexRC.y * ${s[0]} + resTexRC.x;
          ${at}
          return ivec3(r, c, d);
        }
      `,new R(c)}getOutputUnpacked4DCoords(a,s){let c="",d=a.length,et=null;d<2&&(et=[]),et=new Array(d-1),et[d-2]=a[d-1];for(let $t=d-3;$t>=0;--$t)et[$t]=et[$t+1]*a[$t+1];let g=["r","c","d","d2"],at=et.map(($t,vt)=>{let b=`int ${g[vt]} = index / ${$t}`,pt=vt===et.length-1?`int ${g[vt+1]} = index - ${g[vt]} * ${$t}`:`index -= ${g[vt]} * ${$t}`;return`${b}; ${pt};`}).join("");return c=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${s[0]}, ${s[1]}));
          int index = resTexRC.y * ${s[0]} + resTexRC.x;
          ${at}
          return ivec4(r, c, d, d2);
        }
      `,new R(c)}getOutputUnpacked5DCoords(a,s){let c="",d=a.length,et=null;d<2&&(et=[]),et=new Array(d-1),et[d-2]=a[d-1];for(let $t=d-3;$t>=0;--$t)et[$t]=et[$t+1]*a[$t+1];let g=["r","c","d","d2","d3"],at=et.map(($t,vt)=>{let b=`int ${g[vt]} = index / ${$t}`,pt=vt===et.length-1?`int ${g[vt+1]} = index - ${g[vt]} * ${$t}`:`index -= ${g[vt]} * ${$t}`;return`${b}; ${pt};`}).join("");return c=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${s[0]}, ${s[1]}));
          int index = resTexRC.y * ${s[0]} + resTexRC.x;
          ${at}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(c)}getOutputUnpacked6DCoords(a,s){let c="",d=a.length,et=null;d<2&&(et=[]),et=new Array(d-1),et[d-2]=a[d-1];for(let $t=d-3;$t>=0;--$t)et[$t]=et[$t+1]*a[$t+1];let g=["r","c","d","d2","d3","d4"],at=et.map(($t,vt)=>{let b=`int ${g[vt]} = index / ${$t}`,pt=vt===et.length-1?`int ${g[vt+1]} = index - ${g[vt]} * ${$t}`:`index -= ${g[vt]} * ${$t}`;return`${b}; ${pt};`}).join("");return c=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${s[0]}, ${s[1]}));
         int index = resTexRC.y * ${s[0]} + resTexRC.x;
         ${at}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(c)}getCommonUtilFuncs(){let a={},s="uvFromFlat";a[s]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),s="packedUVfrom1D",a[s]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),s="packedUVfrom2D",a[s]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),s="packedUVfrom3D",a[s]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),s="sampleTexture";let c=H(this.context.glContext.version);return a[s]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${c.texture2D}(textureSampler, uv).r;
        }`),a}getInputsSamplingSnippets(){let a={},s=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((c,d)=>{let et=this.context.inputTextureLayouts[d],g=Yn$1(c);et.isPacked?a[g]=this.getPackedSamplerFromInput(g,c,et):a[g]=this.getUnpackedSamplerFromInput(g,c,et);let at=Gu$1(c);et.unpackedShape.length<=s.unpackedShape.length&&(et.isPacked?a[at]=this.getPackedSamplerAtOutputCoords(at,et,s,c):a[at]=this.getUnpackedSamplerAtOutputCoords(at,et,s,c))}),a}getPackedSamplerAtOutputCoords(a,s,c,d){let et=s.unpackedShape,g=c.unpackedShape,at=Yn$1(d),$t=et.length,vt=g.length,b=Ze$1.getBroadcastDims(et,g),pt=Qe(vt),st=vt-$t,wt,Tt=Dt$1();$t===0?wt="":vt<2&&b.length>=1?wt="coords = 0;":wt=b.map(tr=>`coords.${Tt[tr+st]} = 0;`).join(`
`);let Ct="";vt<2&&$t>0?Ct="coords":Ct=et.map((tr,rr)=>`coords.${Tt[rr+st]}`).join(", ");let jt="return outputValue;",Lt=U$2.size(et)===1,Ht=U$2.size(g)===1;if($t===1&&!Lt&&!Ht)jt=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(Lt&&!Ht)vt===1?jt=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:jt=`
          return vec4(outputValue.x);
        `;else if(b.length){let tr=$t-2,rr=$t-1;b.indexOf(tr)>-1&&b.indexOf(rr)>-1?jt="return vec4(outputValue.x);":b.indexOf(tr)>-1?jt="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":b.indexOf(rr)>-1&&(jt="return vec4(outputValue.xx, outputValue.zz);")}let Gt=`
        int lastDim = coords.${Tt[vt-1]};
        coords.${Tt[vt-1]} = coords.${Tt[vt-2]};
        coords.${Tt[vt-2]} = lastDim;
      `,Kt=`
      vec4 ${a}() {
        ${pt} coords = getOutputCoords();
        ${Gt}
        ${wt}
        vec4 outputValue = ${at}(${Ct});
        ${jt}
      }
    `;return new R(Kt,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(a,s,c,d){let et=[c.width,c.height],g=[s.width,s.height],at=s.unpackedShape.length,$t=c.unpackedShape.length,vt=s.unpackedShape,b=c.unpackedShape,pt=Yn$1(d);if(at===$t&&hr$1.arraysEqual(g,et)){let Gt=`
          float ${a}() {
            return sampleTexture(${d}, TexCoords);
          }
        `;return new R(Gt,["coordinates.sampleTexture"])}let st=Qe($t),wt=Ze$1.getBroadcastDims(vt,b),Tt=$t-at,Ct,jt=Dt$1();at===0?Ct="":$t<2&&wt.length>=1?Ct="coords = 0;":Ct=wt.map(Gt=>`coords.${jt[Gt+Tt]} = 0;`).join(`
`);let Lt="";$t<2&&at>0?Lt="coords":Lt=s.unpackedShape.map((Gt,Kt)=>`coords.${jt[Kt+Tt]}`).join(", ");let Ht=`
        float ${a}() {
          ${st} coords = getOutputCoords();
          ${Ct}
          return ${pt}(${Lt});
        }
      `;return new R(Ht,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(a,s,c){switch(c.unpackedShape.length){case 0:return this.getPackedSamplerScalar(a,s);case 1:return this.getPackedSampler1D(a,s,c);case 2:return this.getPackedSampler2D(a,s,c);case 3:return this.getPackedSampler3D(a,s,c);default:return this.getPackedSamplerND(a,s,c)}}getUnpackedSamplerFromInput(a,s,c){let d=c.unpackedShape;switch(d.length){case 0:return this.getUnpackedSamplerScalar(a,s,c);case 1:return this.getUnpackedSampler1D(a,s,c);case 2:return this.getUnpackedSampler2D(a,s,c);case 3:return this.getUnpackedSampler3D(a,s,c);case 4:return this.getUnpackedSampler4D(a,s,c);case 5:return this.getUnpackedSampler5D(a,s,c);case 6:return this.getUnpackedSampler6D(a,s,c);default:throw new Error(`Unsupported dimension ${d.length}-D`)}}getPackedSamplerScalar(a,s){let c=H(this.context.glContext.version),d=`
          vec4 ${a}() {
            return ${c.texture2D}(${s}, halfCR);
          }
        `;return new R(d)}getPackedSampler1D(a,s,c){let d=[c.width,c.height],et=[d[1],d[0]],g=H(this.context.glContext.version),at=`vec4 ${a}(int index) {
      vec2 uv = packedUVfrom1D(
      ${et[0]}, ${et[1]}, index);
      return ${g.texture2D}(${s}, uv);
    }`;return new R(at,["coordinates.packedUVfrom1D"])}getPackedSampler2D(a,s,c){let d=c.unpackedShape,et=[c.width,c.height],g=H(this.context.glContext.version),at=et[0],$t=et[1];if(et!=null&&hr$1.arraysEqual(d,et)){let st=`vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${$t}.0, ${at}.0);
        return ${g.texture2D}(${s}, uv);
      }`;return new R(st)}let vt=et,b=Math.ceil(d[1]/2),pt=`vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${vt[1]}, ${vt[0]}, ${b}, row, col);
      return ${g.texture2D}(${s}, uv);
    }`;return new R(pt,["coordinates.packedUVfrom2D"])}getPackedSampler3D(a,s,c){let d=c.unpackedShape,et=[c.width,c.height],g=[et[0],et[1]],at=H(this.context.glContext.version);if(d[0]===1){let wt=d.slice(1),Tt=[1,2],Ct=$r(d,wt),jt=["b","row","col"],Lt=JSON.parse(JSON.stringify(c));Lt.unpackedShape=Ct;let Ht=this.getPackedSamplerFromInput(a,s,Lt),Gt=`${Ht.routineBody}
      vec4 ${a}(int b, int row, int col) {
        return ${a}(${kr$1(jt,Tt)});
      } `;return new R(Gt,Ht.dependencies)}let $t=g[0],vt=g[1],b=Math.ceil(d[2]/2),pt=b*Math.ceil(d[1]/2),st=`vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${vt}, ${$t}, ${pt}, ${b}, b, row, col);
      return ${at.texture2D}(${s}, uv);}`;return new R(st,["coordinates.packedUVfrom3D"])}getPackedSamplerND(a,s,c){let d=c.unpackedShape,et=d.length,g=[c.width,c.height],at=H(this.context.glContext.version),$t=[g[0],g[1]],vt=$t[1],b=$t[0],pt=Math.ceil(d[et-1]/2),st=pt*Math.ceil(d[et-2]/2),wt="int b, int row, int col",Tt=`b * ${st} + (row / 2) * ${pt} + (col / 2)`;for(let jt=2;jt<et-1;jt++)wt=`int b${jt}, `+wt,st*=d[et-jt-1],Tt=`b${jt} * ${st} + `+Tt;let Ct=`vec4 ${a}(${wt}) {
      int index = ${Tt};
      int texR = index / ${b};
      int texC = index - texR * ${b};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${b}, ${vt});
      return ${at.texture2D}(${s}, uv);
    }`;return new R(Ct)}getUnpackedSamplerScalar(a,s,c){let[d,et]=[c.width,c.height];if(d===1&&et===1){let at=`
          float ${a}() {
            return sampleTexture(${s}, halfCR);
          }
        `;return new R(at,["coordinates.sampleTexture"])}let g=`
        float ${a}() {
          int offset_${s} = coordsToOffset(TexCoords, ${d}, ${et});
          vec2 uv = uvFromFlat(${d}, ${et}, offset_${s});
          return sampleTexture(${s}, uv);
        }
      `;return new R(g,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(a,s,c){let d=c.width,et=c.height;if(et===1&&d===1){let at=`
        float ${a}(int index) {
          return sampleTexture(${s}, halfCR);
        }
      `;return new R(at,["coordinates.sampleTexture"])}if(et===1){let at=`
          float ${a}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${d}.0, 0.5);
            return sampleTexture(${s}, uv);
          }
        `;return new R(at,["coordinates.sampleTexture"])}if(d===1){let at=`
          float ${a}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${et}.0);
            return sampleTexture(${s}, uv);
          }
        `;return new R(at,["coordinates.sampleTexture"])}let g=`
        float ${a}(int index) {
          vec2 uv = uvFromFlat(${d}, ${et}, index);
          return sampleTexture(${s}, uv);
        }
      `;return new R(g,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(a,s,c){let d=c.unpackedShape,et=[c.height,c.width];if(et!=null&&hr$1.arraysEqual(d,et)){let st=et[1],wt=et[0],Tt=`
          float ${a}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${st}.0, ${wt}.0);
            return sampleTexture(${s}, uv);
          }
        `;return new R(Tt,["coordinates.sampleTexture"])}let{newShape:g,keptDims:at}=Mr(d),$t=g;if($t.length<d.length){let st=$r(d,$t),wt=JSON.parse(JSON.stringify(c));wt.unpackedShape=st;let Tt=["col","row"],Ct=`
          ${this.getUnpackedSamplerFromInput(a,s,wt).routineBody}
          float ${a}(int row, int col) {
            return ${a}(${kr$1(Tt,at)});
          }
        `;return new R(Ct,["coordinates.sampleTexture"])}let vt=et[1],b=et[0];if(b===1){let st=`
          float ${a}(int row, int col) {
            int offset_${s} = coordsToOffset(TexCoords, ${vt}, ${b});
            float index = dot(vec3(row, col, offset_${s}), vec3(${d[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${vt}.0);
            return sampleTexture(${s}, uv);
          }
        `;return new R(st,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(vt===1){let st=`
          float ${a}(int row, int col) {
            int offset_${s} = coordsToOffset(TexCoords, ${vt}, ${b});
            float index = dot(vec3(row, col, offset_${s}), vec3(${d[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${b}.0, 0.5);
            return sampleTexture(${s}, uv);
          }
        `;return new R(st,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let pt=`
        float ${a}(int row, int col) {
          int index = col * ${d[1]} + row;
          vec2 uv = uvFromFlat(${vt}, ${b}, index);
          return sampleTexture(${s}, uv);
        }
      `;return new R(pt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(a,s,c){let d=c.unpackedShape,et=d[1]*d[2],g=d[2],{newShape:at,keptDims:$t}=Mr(d),vt=at;if(vt.length<d.length){let wt=$r(d,vt),Tt=["batch","col","row"],Ct=JSON.parse(JSON.stringify(c));Ct.unpackedShape=wt;let jt=this.getUnpackedSamplerFromInput(a,s,Ct),Lt=$t.reverse(),Ht=`
          ${jt.routineBody}
          float ${a}(int batch, int row, int col) {
            return ${a}(${kr$1(Tt,Lt)});
          }
        `;return new R(Ht,jt.dependencies)}let b=c.width,pt=c.height,st=`
          float ${a}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${et} + col * ${g} + row;
            vec2 uv = uvFromFlat(${b}, ${pt}, index);
            return sampleTexture(${s}, uv);
          }
      `;return new R(st,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(a,s,c){let d=c.unpackedShape,et=d[3],g=d[2]*et,at=d[1]*g,$t=c.width,vt=c.height,b=`
        float ${a}(int row, int col, int depth, int depth2) {
          int index = row * ${at} + col * ${g} +
              depth2 * ${et} + depth;
          vec2 uv = uvFromFlat(${$t}, ${vt}, index);
          return sampleTexture(${s}, uv);
        }
      `;return new R(b,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(a,s,c){let d=c.unpackedShape,et=d[4],g=d[3]*et,at=d[2]*g,$t=d[1]*at,{newShape:vt,keptDims:b}=Mr(d);if(vt.length<d.length){let Tt=$r(d,vt),Ct=["row","col","depth","depth2","depth3"],jt=JSON.parse(JSON.stringify(c));jt.unpackedShape=Tt;let Lt=`
          ${this.getUnpackedSamplerFromInput(a,s,jt).routineBody}
          float ${a}(int row, int col, int depth, int depth2, int depth3) {
            return ${a}(${kr$1(Ct,b)});
          }
        `;return new R(Lt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let pt=c.width,st=c.height,wt=`
        float ${a}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${$t} + col * ${at} + depth * ${g} +
          depth3 * ${et} + depth2;
          vec2 uv = uvFromFlat(${pt}, ${st}, index);
          return sampleTexture(${s}, uv);
        }
      `;return new R(wt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(a,s,c){let d=c.unpackedShape,et=d[5],g=d[4]*et,at=d[3]*g,$t=d[2]*at,vt=d[1]*$t,{newShape:b,keptDims:pt}=Mr(d);if(b.length<d.length){let Ct=$r(d,b),jt=["row","col","depth","depth2","depth3","depth4"],Lt=JSON.parse(JSON.stringify(c));Lt.unpackedShape=Ct;let Ht=`
            ${this.getUnpackedSamplerFromInput(a,s,Lt).routineBody}
            float ${a}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${a}(${kr$1(jt,pt)});
            }
          `;return new R(Ht,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let st=c.width,wt=c.height,Tt=`
          float ${a}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${vt} + col * ${$t} + depth * ${at} +
            depth2 * ${g} + depth3 * ${et} + depth4;
            vec2 uv = uvFromFlat(${st}, ${wt}, index);
            return sampleTexture(${s}, uv);
          }
        `;return new R(Tt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let a=this.context.outputTextureLayout,s=a.shape.length,c=a.strides,d=a.width,et=a.height,g=[];for(let $t=0;$t<s-1;++$t)g.push(`
        c[${$t}] = offset / ${c[$t]};`),g.push(`
        offset -= c[${$t}] * ${c[$t]};`);g.push(`
        c[${s-1}] = offset;`);let at=`
      void toVec(vec2 texCoords, out int c[${s}]) {
        int offset = coordsToOffset(texCoords, ${d}, ${et});
        ${g.join("")}
      }
      void toVec(int offset, out int c[${s}]) {
        ${g.join("")}
      }
    `;return{toVec:new R(at,["coordinates.coordsToOffset"])}}valueFrom(){let a={};return this.context.programInfo.inputNames.forEach((s,c)=>{let d=this.context.inputTextureLayouts[c],et=(d.unpackedShape.length>0?d.unpackedShape:d.shape).length,g=`_${s}`;a[g]=new R(this.getValueFromSingle(s,et,d.width,d.height,!1),[`shapeUtils.indicesToOffset${g}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),g=g+"_T",a[g]=new R(this.getValueFromSingle(s,et,d.width,d.height,!0),[`shapeUtils.indicesToOffset${g}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),a}getValueFromSingle(a,s,c,d,et){let g=`_${a}`;et&&(g=g+"_T");let at=H(this.context.glContext.version);return`
        float ${g}(int m[${s}]) {
          int offset = indicesToOffset${g}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${d});
          float value = getColorAsFloat(${at.texture2D}(${a}, coords));
          return value;
        }
        `}getPackedValueFrom(a,s,c,d,et){let g=`_${a}_Pack`;et&&(g=g+"_T");let at=H(this.context.glContext.version);return`
        vec4 ${g}(int m[${s}]) {
          int offset = indicesToOffset_${a}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${d});
          return ${at.texture2D}(${a}, coords);
        }
        `}}}),fo$1,tp$1=L$1(()=>{Wt$1(),fo$1=class B2 extends dt{constructor(s){super(s)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let s=B2.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${s}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let s=B2.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${s}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let s=new ArrayBuffer(4),c=new Uint32Array(s),d=new Uint8Array(s);if(c[0]=3735928559,d[0]===239)return!0;if(d[0]===222)return!1;throw new Error("unknown endianness")}}}),co$1,rp$1=L$1(()=>{Wt$1(),we$1(),co$1=class extends dt{constructor(a){super(a)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let a=H(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${a.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),po$1,np$1=L$1(()=>{Wt$1(),po$1=class Ux extends dt{constructor(s){super(s)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let s=this.context.outputTextureLayout.shape.length,c={};return this.context.programInfo.inputNames.forEach((d,et)=>{let g=this.context.inputTextureLayouts[et].unpackedShape;if(g.length<=s){let at=g.length,$t=s-at,vt=`bcastIndices_${d}`,b="";for(let st=0;st<at;++st)b+=`
          realIndices[${st}] = int( mod(float(bcastedIndices[${$t+st}]), ${g[st]}.0) );
          `;let pt=`
        void ${vt} (int bcastedIndices[${s}], out int realIndices[${at}]) {
          ${b}
        }
        `;c[vt]=new R(pt)}}),c}bcastMatmulIndex(){let s=this.context.outputTextureLayout.shape.length,c={};return this.context.programInfo.inputNames.forEach((d,et)=>{let g=this.context.inputTextureLayouts[et].shape;if(!(g.length<2||g.length>s)){let at=g.length,$t=s-at,vt=`bcastMatmulIndices_${d}`,b="";for(let st=0;st<at-2;++st)b+=`
          realIndices[${st}] = int( mod(float(bcastedIndices[${$t+st}]), ${g[st]}.0) );
          `;let pt=`
        void ${vt}(int bcastedIndices[${s}], out int realIndices[${at}]) {
          ${b}
          realIndices[${at-1}] = bcastedIndices[${s-1}];
          realIndices[${at-2}] = bcastedIndices[${s-2}];
        }
        `;c[vt]=new R(pt)}}),c}indicesToOffset(){let s={};return this.context.programInfo.inputNames.forEach((c,d)=>{let et=this.context.inputTextureLayouts[d].shape,g=this.context.inputTextureLayouts[d].strides,at=et.length,$t=`indicesToOffset_${c}`;s[$t]=new R(Ux.indexToOffsetSingle($t,at,g)),$t=`indicesToOffset_${c}_T`,s[$t]=new R(Ux.indexToOffsetSingle($t,at,g.slice().reverse()))}),s}static indexToOffsetSingle(s,c,d){let et="";for(let g=c-1;g>=0;--g)et+=`
        offset += indices[${g}] * ${d[g]};
        `;return`
      int ${s}(int indices[${c}]) {
        int offset = 0;
        ${et}
        return offset;
      }
      `}offsetToIndices(){let s={};return this.context.programInfo.inputNames.forEach((c,d)=>{let et=this.context.inputTextureLayouts[d].shape,g=this.context.inputTextureLayouts[d].strides,at=et.length,$t=`offsetToIndices_${c}`;s[$t]=new R(Ux.offsetToIndicesSingle($t,at,g)),$t=`offsetToIndices_${c}_T`,s[$t]=new R(Ux.offsetToIndicesSingle($t,at,g.slice().reverse()))}),s}static offsetToIndicesSingle(s,c,d){let et=[];for(let g=0;g<c-1;++g)et.push(`
      indices[${g}] = offset / ${d[g]};`),et.push(`
        offset -= indices[${g}] * ${d[g]};`);return et.push(`
      indices[${c-1}] = offset;`),`
      void ${s}(int offset, out int indices[${c}]) {
        ${et.join("")}
      }
      `}incrementIndices(){let s={};return this.context.programInfo.inputNames.forEach((c,d)=>{let et=this.context.inputTextureLayouts[d].shape,g=et.length,at=`incrementIndices_${c}`,$t="";for(let b=0;b<g;++b)$t+=`
        shape[${b}] = ${et[b]};`;let vt=`
        void ${at}(int axis, out int indices[${g}]) {
          int shape[${g}];
          ${$t};
          for(int i = ${g} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;s[at]=new R(vt)}),s}}}),ho$1,op$1=L$1(()=>{Wt$1(),ho$1=class extends dt{constructor(a){super(a)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let a=this.context.outputTextureLayout.shape.length,s={add:"+=",sub:"-=",mul:"*=",div:"/="},c={};for(let d in s){let et=`${d}Vec`,g="";for(let $t=0;$t<a;++$t)g+=`
          dest[${$t}] ${s[d]} src[${$t}];
          `;let at=`
        void ${et}(int src[${a}], out int dest[${a}]) {
          ${g}
        }
        `;c[et]=new R(at)}return c}copyVec(){let a=this.context.outputTextureLayout.shape.length,s="";for(let d=0;d<a;++d)s+=`
        dest[${d}] = src[${d}];
        `;let c=`
      void copyVec(int src[${a}], out int dest[${a}]) {
        ${s}
      }
      `;return{copyVec:new R(c)}}setVecItem(){let a=this.context.outputTextureLayout.shape.length,s=`
        if(index < 0)
            index =${a} + index;
        if (index == 0)
            m[0] = value;
        `;for(let d=1;d<a-1;++d)s+=`
        else if (index == ${d})
            m[${d}] = value;
            `;s+=`
        else
            m[${a-1}] = value;
        `;let c=`
      void setVecItem(out int m[${a}], int index, int value) {
        ${s}
      }
        `;return{setVecItem:new R(c)}}getVecItem(){let a=this.context.outputTextureLayout.shape.length,s=`
        if(index < 0)
            index = ${a} + index;
        if (index == 0)
            return m[0];
      `;for(let d=1;d<a-1;++d)s+=`
        else if (index == ${d})
            return m[${d}];
      `;s+=`
        else
            return m[${a-1}];
        `;let c=`
      int getVecItem(int m[${a}], int index) {
        ${s}
      }
    `;return{getVecItem:new R(c)}}}}),Wi$1,ip$1=L$1(()=>{ep$1(),tp$1(),rp$1(),np$1(),op$1(),Wi$1={encoding:fo$1,fragcolor:co$1,vec:ho$1,shapeUtils:po$1,coordinates:lo$1}}),mo$1,ap$1=L$1(()=>{Wt$1(),Zc$1(),ip$1(),we$1(),mo$1=class{constructor(a,s,c,d){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn$1(a,s,c,d),Object.keys(Wi$1).forEach(g=>{let at=new Wi$1[g](this.context);this.libs[g]=at});let et=this.glslLibRoutineDependencyGraph;for(let g in this.libs){let at=this.libs[g].getFunctions();for(let $t in at){let vt=g+"."+$t,b;et[vt]?(b=et[vt],b.routineBody=at[$t].routineBody):(b=new cn(vt,at[$t].routineBody),et[vt]=b);let pt=at[$t].dependencies;if(pt)for(let st=0;st<pt.length;++st)if(et[pt[st]])b.addDependency(et[pt[st]]);else{let wt=new cn(pt[st]);et[pt[st]]=wt,b.addDependency(wt)}}}}preprocess(){let a=this.context.programInfo,s=a.shaderSource;return this.context.programInfo.hasMain||(s=`${s}
      ${Mu$1(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),s=Jc$1(s),`${Ru$1(this.context.glContext.version)}
    ${this.getUniforms(a.inputNames,a.variables)}
    ${this.getImports(s)}
    ${s}`}getImports(a){let s=this.selectGlslLibRoutinesToBeIncluded(a);if(s.length===0)return"";let c="";for(let d=0;d<s.length;++d)if(s[d].routineBody)c+=s[d].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${s[d].name}`);return c}selectGlslLibRoutinesToBeIncluded(a){let s=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(c=>{let d=c.split(".")[1];a.indexOf(d)!==-1&&s.push(this.glslLibRoutineDependencyGraph[c])}),Qn$1.returnOrderedNodes(s)}getUniforms(a,s){let c=[];if(a)for(let d of a)c.push(`uniform sampler2D ${d};`);if(s)for(let d of s)c.push(`uniform ${d.type} ${d.name}${d.arrayLength?`[${d.arrayLength}]`:""};`);return c.join(`
`)}}}),bo$1,sp$1=L$1(()=>{Ot$1(),lt$1(),ap$1(),we$1(),bo$1=class{constructor(a,s,c){this.profiler=a,this.glContext=s,this.textureLayoutStrategy=c,this.repo=new Map,this.attributesBound=!1}getArtifact(a){return this.repo.get(a)}setArtifact(a,s){this.repo.set(a,s)}run(a,s,c){this.profiler.event("op",`ProgramManager.run ${a.programInfo.name??"unknown kernel"}`,()=>{let d=this.glContext.gl,et=a.program;d.useProgram(et);try{this.bindOutput(c),this.attributesBound||this.bindAttributes(a.attribLocations),this.bindUniforms(a.uniformLocations,a.programInfo.variables??[],s)}catch(g){throw ce.error("ProgramManager",a.programInfo.shaderSource),g}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(a=>this.glContext.deleteProgram(a.program))}build(a,s,c){return this.profiler.event("backend","ProgramManager.build",()=>{let d=new mo$1(this.glContext,a,s,c),et=d.preprocess(),g=this.compile(et);return{programInfo:a,program:g,uniformLocations:this.getUniformLocations(g,d.context.programInfo.inputNames,d.context.programInfo.variables),attribLocations:this.getAttribLocations(g)}})}compile(a){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let d=Nu$1(this.glContext.version);this.vertexShader=this.glContext.compileShader(d,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${a}
`);let s=this.glContext.compileShader(a,this.glContext.gl.FRAGMENT_SHADER),c=this.glContext.createProgram(this.vertexShader,s);return this.glContext.deleteShader(s),c}bindOutput(a){let s=a.width,c=a.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${s}/${c}, shape=${a.shape}, type=${a.tensor.type}`),this.glContext.attachFramebuffer(a.texture,s,c)}bindAttributes(a){let s=a.position,c=a.textureCoord;this.glContext.setVertexAttributes(s,c),this.attributesBound=!0}bindUniforms(a,s,c){var g;let d=this.glContext.gl,et=0;for(let{name:at,type:$t,location:vt,arrayLength:b}of a){let pt=(g=s.find(st=>st.name===at))==null?void 0:g.data;if($t!=="sampler2D"&&!pt)throw new Error(`variable '${at}' does not have data defined in program info`);switch($t){case"sampler2D":this.bindTexture(c[et],vt,et),et++;break;case"float":b?d.uniform1fv(vt,pt):d.uniform1f(vt,pt);break;case"int":b?d.uniform1iv(vt,pt):d.uniform1i(vt,pt);break;default:throw new Error(`Uniform not implemented: ${$t}`)}}}bindTexture(a,s,c){this.glContext.bindTextureToUniform(a.texture,c,s)}getAttribLocations(a){return{position:this.getAttribLocation(a,"position"),textureCoord:this.getAttribLocation(a,"textureCoord")}}getUniformLocations(a,s,c){let d=[];if(s)for(let et of s)d.push({name:et,type:"sampler2D",location:this.getUniformLocation(a,et)});if(c)for(let et of c)d.push({...et,location:this.getUniformLocation(a,et.name)});return d}getUniformLocation(a,s){let c=this.glContext.gl.getUniformLocation(a,s);if(c===null)throw new Error(`Uniform ${s} not found.`);return c}getAttribLocation(a,s){return this.glContext.gl.getAttribLocation(a,s)}}}),go$1,up$1=L$1(()=>{lt$1(),ln(),go$1=class{constructor(a,s,c,d){this.glContext=a,this.layoutStrategy=s,this.profiler=c,this.config=d,this.pendingRead=new Map,d.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(a,s,c,d){let et=this.toEncoderType(a),g=this.glContext.getEncoder(et,s.channels||1,d);if(s.isPacked&&d===1)throw new Error("not implemented");let at=s.width,$t=s.height,vt,b;if(this.config.reuseTextures){vt=`${at}x${$t}_${g.format}_${g.internalFormat}_${g.textureType}`,b=this.inUseTextures.get(vt),b||(b=[],this.inUseTextures.set(vt,b));let st=this.idleTextures.get(vt);if(st&&st.length>0){let wt=st.pop();return b.push(wt),d===1&&this.glContext.updateTexture(wt,at,$t,g,this.toTextureData(a,c)),wt}}ce.verbose("TextureManager",`Creating new texture of size ${s.width}x${s.height}`);let pt=this.glContext.allocateTexture(at,$t,g,this.toTextureData(a,c));return this.config.reuseTextures&&(b.push(pt),this.textureLookup.set(pt,vt)),pt}readTexture(a,s,c){return c||(c=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let d=a.shape.reduce((g,at)=>g*at)*c,et=this.glContext.readTexture(a.texture,a.width,a.height,d,this.toEncoderType(s),c);return this.toTensorData(s,et)})}async readTextureAsync(a,s,c){let d=a.tensor.dataId;if(c||(c=1),this.pendingRead.has(d)){let et=this.pendingRead.get(d);return new Promise(g=>et==null?void 0:et.push(g))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(d,[]);let et=a.shape.reduce((vt,b)=>vt*b)*c;await this.glContext.createAndWaitForFence();let g=this.glContext.readTexture(a.texture,a.width,a.height,et,this.toEncoderType(s),c),at=this.toTensorData(s,g),$t=this.pendingRead.get(d);return this.pendingRead.delete(d),$t==null||$t.forEach(vt=>vt(at)),at})}readUint8TextureAsFloat(a){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let s=a.shape.reduce((d,et)=>d*et),c=this.glContext.readTexture(a.texture,a.width,a.height,s*4,"byte",4);return new Float32Array(c.buffer,c.byteOffset,s)})}releaseTexture(a,s){let c;if(this.config.reuseTextures&&(c=this.textureLookup.get(a.texture),c)){s&&this.textureLookup.delete(c);let d=this.inUseTextures.get(c);if(d){let et=d.indexOf(a.texture);if(et!==-1){d.splice(et,1);let g=this.idleTextures.get(c);g||(g=[],this.idleTextures.set(c,g)),g.push(a.texture)}}}(!c||s)&&(ce.verbose("TextureManager",`Deleting texture of size ${a.width}x${a.height}`),this.glContext.deleteTexture(a.texture))}toTensorData(a,s){switch(a){case"int16":return s instanceof Int16Array?s:Int16Array.from(s);case"int32":return s instanceof Int32Array?s:Int32Array.from(s);case"int8":return s instanceof Int8Array?s:Int8Array.from(s);case"uint16":return s instanceof Uint16Array?s:Uint16Array.from(s);case"uint32":return s instanceof Uint32Array?s:Uint32Array.from(s);case"uint8":case"bool":return s instanceof Uint8Array?s:Uint8Array.from(s);case"float32":return s instanceof Float32Array?s:Float32Array.from(s);case"float64":return s instanceof Float64Array?s:Float64Array.from(s);default:throw new Error(`TensorData type ${a} is not supported`)}}toTextureData(a,s){if(s)return s instanceof Float32Array?s:new Float32Array(s)}toEncoderType(a){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo$1,lp$1=L$1(()=>{lt$1(),_s$1(),el$1(),Xc$1(),sp$1(),Vi(),up$1(),yo$1=class{constructor(a,s){this.backend=a,this.context=s,this.layoutStrategy=new uo$1(a.glContext.maxTextureSize),this.programManager=new bo$1(this.context.profiler,a.glContext,this.layoutStrategy),this.textureManager=new go$1(a.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:a.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=a.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn$1(this)}onGraphInitialized(a){let s=a.getValues().filter(c=>c.from===-1&&c.tensor).map(c=>c.tensor.dataId);this.initializers=new Set(s)}isInitializer(a){return this.initializers?this.initializers.has(a):!1}addInitializer(a){this.initializers.add(a)}getTextureData(a,s){return s?this.packedTextureDataCache.get(a):this.unpackedTextureDataCache.get(a)}setTextureData(a,s,c=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),c?this.packedTextureDataCache.set(a,s):this.unpackedTextureDataCache.set(a,s)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(a=>this.textureManager.releaseTexture(a,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(a=>this.textureManager.releaseTexture(a,!0)),this.unpackedTextureDataCache=new Map}resolve(a,s,c){let d=vs$1(a,s,Yc$1);return{impl:d.opImpl,context:d.opInit?d.opInit(a,c):a}}}});function jb(a){let s=0;for(;s<a.length&&a[s]();++s);return s-1}var hn,fp$1=L$1(()=>{Ot$1(),ln(),ln(),Bt$1(),hn=class{constructor(a,s){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=a,this.version=s,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(a,s,c,d){let et=this.gl,g=et.createTexture();et.bindTexture(et.TEXTURE_2D,g),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MIN_FILTER,et.NEAREST),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MAG_FILTER,et.NEAREST),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_S,et.CLAMP_TO_EDGE),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_T,et.CLAMP_TO_EDGE);let at=d?c.encode(d,a*s):null;return et.texImage2D(et.TEXTURE_2D,0,c.internalFormat,a,s,0,c.format,c.textureType,at),this.checkError(),g}updateTexture(a,s,c,d,et){let g=this.gl;g.bindTexture(g.TEXTURE_2D,a);let at=d.encode(et,s*c);g.texSubImage2D(g.TEXTURE_2D,0,0,0,s,c,d.format,d.textureType,at),this.checkError()}attachFramebuffer(a,s,c){let d=this.gl;d.bindTexture(d.TEXTURE_2D,a),d.bindFramebuffer(d.FRAMEBUFFER,this.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.checkError(),d.viewport(0,0,s,c),d.scissor(0,0,s,c)}readTexture(a,s,c,d,et,g){let at=this.gl;g||(g=1),this.frameBufferBound||this.attachFramebuffer(a,s,c);let $t=this.getEncoder(et,g),vt=$t.allocate(s*c);return at.bindTexture(at.TEXTURE_2D,a),at.framebufferTexture2D(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,a,0),at.readPixels(0,0,s,c,at.RGBA,$t.textureType,vt),this.checkError(),$t.decode(vt,d)}isFramebufferReady(){return!0}getActiveTexture(){let a=this.gl;return`TEXTURE${a.getParameter(this.gl.ACTIVE_TEXTURE)-a.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(a,s){let c=this.gl;c.vertexAttribPointer(a,3,c.FLOAT,!1,20,0),c.enableVertexAttribArray(a),s!==-1&&(c.vertexAttribPointer(s,2,c.FLOAT,!1,20,12),c.enableVertexAttribArray(s)),this.checkError()}createProgram(a,s){let c=this.gl,d=c.createProgram();return c.attachShader(d,a),c.attachShader(d,s),c.linkProgram(d),d}compileShader(a,s){let c=this.gl,d=c.createShader(s);if(!d)throw new Error(`createShader() returned null with type ${s}`);if(c.shaderSource(d,a),c.compileShader(d),c.getShaderParameter(d,c.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${c.getShaderInfoLog(d)}
Shader source:
${a}`);return d}deleteShader(a){this.gl.deleteShader(a)}bindTextureToUniform(a,s,c){let d=this.gl;d.activeTexture(d.TEXTURE0+s),this.checkError(),d.bindTexture(d.TEXTURE_2D,a),this.checkError(),d.uniform1i(c,s),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let a=this.gl,s=a.getError(),c="";switch(s){case a.NO_ERROR:return;case a.INVALID_ENUM:c="INVALID_ENUM";break;case a.INVALID_VALUE:c="INVALID_VALUE";break;case a.INVALID_OPERATION:c="INVALID_OPERATION";break;case a.INVALID_FRAMEBUFFER_OPERATION:c="INVALID_FRAMEBUFFER_OPERATION";break;case a.OUT_OF_MEMORY:c="OUT_OF_MEMORY";break;case a.CONTEXT_LOST_WEBGL:c="CONTEXT_LOST_WEBGL";break;default:c=`Unknown WebGL Error: ${s.toString(16)}`}throw new Error(c)}}deleteTexture(a){this.gl.deleteTexture(a)}deleteProgram(a){this.gl.deleteProgram(a)}getEncoder(a,s,c=0){if(this.version===2)return new Xn$1(this.gl,s);switch(a){case"float":return c===1||this.isRenderFloat32Supported?new un(this.gl,s):new un(this.gl,s,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn$1(this.gl,s);default:throw new Error(`Invalid dataType: ${a}`)}}clearActiveTextures(){let a=this.gl;for(let s=0;s<this.maxTextureImageUnits;++s)a.activeTexture(a.TEXTURE0+s),a.bindTexture(a.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteFramebuffer(this.framebuffer),a.bindBuffer(a.ARRAY_BUFFER,null),a.deleteBuffer(this.vertexbuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null),a.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let a=this.gl,s=a.createBuffer();if(!s)throw new Error("createBuffer() returned null");let c=this.createDefaultGeometry();return a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW),this.checkError(),s}createFramebuffer(){let a=this.gl.createFramebuffer();if(!a)throw new Error("createFramebuffer returned null");return a}queryVitalParameters(){let a=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let a=this.gl,s=a.createTexture();a.bindTexture(a.TEXTURE_2D,s);let c=this.version===2?a.RGBA32F:a.RGBA;a.texImage2D(a.TEXTURE_2D,0,c,1,1,0,a.RGBA,a.FLOAT,null);let d=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,d),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,s,0);let et=a.checkFramebufferStatus(a.FRAMEBUFFER)===a.FRAMEBUFFER_COMPLETE;return a.bindTexture(a.TEXTURE_2D,null),a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteTexture(s),a.deleteFramebuffer(d),et}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let a=this.gl,s,c,d,et,g;try{s=a.createTexture(),c=a.createFramebuffer(),a.bindTexture(a.TEXTURE_2D,s);let at=this.version===2?a.RGBA32F:a.RGBA;return a.texImage2D(a.TEXTURE_2D,0,at,1,1,0,a.RGBA,a.FLOAT,null),a.bindFramebuffer(a.FRAMEBUFFER,c),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,s,0),a.enable(a.BLEND),d=a.createShader(a.VERTEX_SHADER),!d||(a.shaderSource(d,"void main(){}"),a.compileShader(d),et=a.createShader(a.FRAGMENT_SHADER),!et)||(a.shaderSource(et,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),a.compileShader(et),g=a.createProgram(),!g)?!1:(a.attachShader(g,d),a.attachShader(g,et),a.linkProgram(g),a.useProgram(g),a.drawArrays(a.POINTS,0,1),a.getError()===a.NO_ERROR)}finally{a.disable(a.BLEND),g&&a.deleteProgram(g),d&&a.deleteShader(d),et&&a.deleteShader(et),c&&(a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteFramebuffer(c)),s&&(a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(s))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let a=this.gl,s=this.disjointTimerQueryWebgl2Extension,c=a.createQuery();return a.beginQuery(s.TIME_ELAPSED_EXT,c),c}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let a=this.gl,s=this.disjointTimerQueryWebgl2Extension;a.endQuery(s.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(a){let s=!1,c=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let d=this.gl,et=this.disjointTimerQueryWebgl2Extension;s=d.getQueryParameter(a,d.QUERY_RESULT_AVAILABLE),c=d.getParameter(et.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return s&&!c}getTimerResult(a){let s=0;if(this.version===2){let c=this.gl;s=c.getQueryParameter(a,c.QUERY_RESULT),c.deleteQuery(a)}else throw new Error("WebGL1 profiling currently not supported");return s/1e6}async waitForQueryAndGetTime(a){return await mi$1(()=>this.isTimerResultAvailable(a)),this.getTimerResult(a)}async createAndWaitForFence(){let a=this.createFence(this.gl);return this.pollFence(a)}createFence(a){let s,c=a,d=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);return a.flush(),d===null?s=()=>!0:s=()=>{let et=c.clientWaitSync(d,0,0);return et===c.ALREADY_SIGNALED||et===c.CONDITION_SATISFIED},{query:d,isFencePassed:s}}async pollFence(a){return new Promise(s=>{this.addItemToPoll(()=>a.isFencePassed(),()=>s())})}pollItems(){let a=jb(this.itemsToPoll.map(s=>s.isDoneFn));for(let s=0;s<=a;++s){let{resolveFn:c}=this.itemsToPoll[s];c()}this.itemsToPoll=this.itemsToPoll.slice(a+1)}async addItemToPoll(a,s){this.itemsToPoll.push({isDoneFn:a,resolveFn:s}),!(this.itemsToPoll.length>1)&&await mi$1(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Hi$1(a){let s;if((!a||a==="webgl2")&&"webgl2"in Gr?s=Gr.webgl2:(!a||a==="webgl")&&"webgl"in Gr&&(s=Gr.webgl),!s)try{let d=Xb();s=cp$1(d,a)}catch{let d=Yb();s=cp$1(d,a)}a=a||s.version===1?"webgl":"webgl2";let c=s.gl;return Gr[a]=s,c.isContextLost()?(delete Gr[a],Hi$1(a)):(c.disable(c.DEPTH_TEST),c.disable(c.STENCIL_TEST),c.disable(c.BLEND),c.disable(c.DITHER),c.disable(c.POLYGON_OFFSET_FILL),c.disable(c.SAMPLE_COVERAGE),c.enable(c.SCISSOR_TEST),c.enable(c.CULL_FACE),c.cullFace(c.BACK),s)}function cp$1(a,s){let c={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},d,et=c;if((!s||s==="webgl2")&&(d=a.getContext("webgl2",et),d))try{return new hn(d,2)}catch(g){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${g}`)}if((!s||s==="webgl")&&(d=a.getContext("webgl",et)||a.getContext("experimental-webgl",et),d))try{return new hn(d,1)}catch(g){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${g}`)}throw new Error("WebGL is not supported")}function Yb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let a=document.createElement("canvas");return a.width=1,a.height=1,a}function Xb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr,pp$1=L$1(()=>{lt$1(),fp$1(),Gr={}}),To$1,dp$1=L$1(()=>{Ot$1(),lt$1(),lp$1(),pp$1(),To$1=class{get contextId(){return Z.webgl.contextId}set contextId(a){Z.webgl.contextId=a}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(a){Z.webgl.matmulMaxBatchSize=a}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(a){Z.webgl.textureCacheMode=a}get pack(){return Z.webgl.pack}set pack(a){Z.webgl.pack=a}get async(){return Z.webgl.async}set async(a){Z.webgl.async=a}initialize(){try{return this.glContext=Hi$1(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(a){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${a}`),!1}}createSessionHandler(a){return new yo$1(this,a)}dispose(){this.glContext.dispose()}}});async function qi$1(a){if(a){let s=typeof a=="string"?[a]:a;for(let c of s){let d=hp$1.get(c);if(d)return d;let et=await Jb(c);if(et)return et}}else return qi$1(["webgl"]);throw new Error("no available backend to use")}async function Jb(a){let s=Kb;if(typeof s[a]<"u"&&Zb(s[a])){let c=s[a],d=c.initialize();if(typeof d=="object"&&"then"in d&&(d=await d),d)return hp$1.set(a,c),c}}function Zb(a){let s=a;return"initialize"in s&&typeof s.initialize=="function"&&"createSessionHandler"in s&&typeof s.createSessionHandler=="function"&&"dispose"in s&&typeof s.dispose=="function"}var hp$1,Kb,mp$1=L$1(()=>{dp$1(),hp$1=new Map,Kb={webgl:new To$1}}),ji$1,xo$1,bp=L$1(()=>{lt$1(),ji$1=class{constructor(a,s){this.op=a,this.node=s}},xo$1=class{constructor(a,s,c){this.graph=a,this.profiler=c,this.initialize(s)}initialize(a){this.profiler.event("session","ExecutionPlan.initialize",()=>{let s=this.graph.getNodes();if(s.length!==a.length)throw new Error("The size of nodes and OPs do not match.");this._ops=a.map((c,d)=>new ji$1(c,s[d])),this.reset(),this._starter=[],this._ops.forEach((c,d)=>{let et=!0;for(let g of c.node.inputs)if(!this._values[g]&&this.graph.getInputIndices().indexOf(g)===-1){et=!1;break}et&&this._starter.push(d)})})}reset(){this._values=this.graph.getValues().map(a=>a.tensor)}async execute(a,s){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let c=a.createInferenceHandler(),d=this.graph.getInputIndices();if(s.length!==d.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${s.length} expected: ${d.length}`);s.forEach((b,pt)=>{let st=d[pt];this._values[st]=b});let et=this._starter.slice(0),g=this.graph.getValues(),at=this.graph.getNodes(),$t=0;for(;$t<et.length;){let b=et[$t++],pt=this._ops[b],st=pt.node.inputs.map(jt=>this._values[jt]);if(st.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${pt.node}`);let wt=st;ce.verbose("ExecPlan",`Runing op:${pt.node.name} (${wt.map((jt,Lt)=>`'${pt.node.inputs[Lt]}': ${jt.type}[${jt.dims.join(",")}]`).join(", ")})`);let Tt=await this.profiler.event("node",pt.node.name,async()=>pt.op.impl(c,wt,pt.op.context));if(Tt.length!==pt.node.outputs.length)throw new Error("the size of output does not match model definition.");Tt.forEach((jt,Lt)=>{let Ht=pt.node.outputs[Lt];if(this._values[Ht])throw new Error(`output [${Ht}] already has value: op:${pt.node.name}`);this._values[Ht]=jt});let Ct=new Set;Tt.forEach((jt,Lt)=>{let Ht=pt.node.outputs[Lt];for(let Gt of g[Ht].to){let Kt=at[Gt],tr=!0;for(let rr of Kt.inputs)if(!this._values[rr]){tr=!1;break}tr&&Ct.add(Gt)}}),et.push(...Ct)}let vt=[];for(let b=0;b<this.graph.getOutputIndices().length;b++){let pt=this.graph.getOutputIndices()[b],st=this._values[pt];if(st===void 0)throw new Error(`required output [${pt}] does not have value`);pt===0?await st.getData():st.data,vt.push(st)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),c.dispose(),vt})}}}),oe,bt,mn,gp$1=L$1(()=>{tn$1(),oe=Ar(Cr()),yr(),fe$1(),bt=V.experimental.fbs,mn=class Vx{constructor(s){if(this._attributes=new Map,s!=null){for(let c of s)c instanceof oe.onnx.AttributeProto?this._attributes.set(c.name,[Vx.getValue(c),Vx.getType(c)]):c instanceof bt.Attribute&&this._attributes.set(c.name(),[Vx.getValue(c),Vx.getType(c)]);if(this._attributes.size<s.length)throw new Error("duplicated attribute names")}}set(s,c,d){this._attributes.set(s,[d,c])}delete(s){this._attributes.delete(s)}getFloat(s,c){return this.get(s,"float",c)}getInt(s,c){return this.get(s,"int",c)}getString(s,c){return this.get(s,"string",c)}getTensor(s,c){return this.get(s,"tensor",c)}getFloats(s,c){return this.get(s,"floats",c)}getInts(s,c){return this.get(s,"ints",c)}getStrings(s,c){return this.get(s,"strings",c)}getTensors(s,c){return this.get(s,"tensors",c)}get(s,c,d){let et=this._attributes.get(s);if(et===void 0){if(d!==void 0)return d;throw new Error(`required attribute not found: ${s}`)}if(et[1]!==c)throw new Error(`type mismatch: expected ${c} but got ${et[1]}`);return et[0]}static getType(s){let c=s instanceof oe.onnx.AttributeProto?s.type:s.type();switch(c){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[c]}`)}}static getValue(s){let c=s instanceof oe.onnx.AttributeProto?s.type:s.type();if(c===oe.onnx.AttributeProto.AttributeType.GRAPH||c===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let d=this.getValueNoCheck(s);if(c===oe.onnx.AttributeProto.AttributeType.INT&&it.isLong(d))return it.longToNumber(d);if(c===oe.onnx.AttributeProto.AttributeType.INTS){let et=d,g=new Array(et.length);for(let at=0;at<et.length;at++){let $t=et[at];g[at]=it.longToNumber($t)}return g}if(c===oe.onnx.AttributeProto.AttributeType.TENSOR)return s instanceof oe.onnx.AttributeProto?$e.fromProto(d):$e.fromOrtTensor(d);if(c===oe.onnx.AttributeProto.AttributeType.TENSORS){if(s instanceof oe.onnx.AttributeProto)return d.map(et=>$e.fromProto(et));if(s instanceof bt.Attribute)return d.map(et=>$e.fromOrtTensor(et))}return c===oe.onnx.AttributeProto.AttributeType.STRING&&s instanceof oe.onnx.AttributeProto?sn$1(d):c===oe.onnx.AttributeProto.AttributeType.STRINGS&&s instanceof oe.onnx.AttributeProto?d.map(sn$1):d}static getValueNoCheck(s){return s instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(s):this.getValueNoCheckFromOrtFormat(s)}static getValueNoCheckFromOnnxFormat(s){switch(s.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return s.f;case oe.onnx.AttributeProto.AttributeType.INT:return s.i;case oe.onnx.AttributeProto.AttributeType.STRING:return s.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return s.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return s.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return s.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return s.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return s.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return s.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return s.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[s.type]}`)}}static getValueNoCheckFromOrtFormat(s){switch(s.type()){case bt.AttributeType.FLOAT:return s.f();case bt.AttributeType.INT:return s.i();case bt.AttributeType.STRING:return s.s();case bt.AttributeType.TENSOR:return s.t();case bt.AttributeType.GRAPH:return s.g();case bt.AttributeType.FLOATS:return s.floatsArray();case bt.AttributeType.INTS:{let c=[];for(let d=0;d<s.intsLength();d++)c.push(s.ints(d));return c}case bt.AttributeType.STRINGS:{let c=[];for(let d=0;d<s.stringsLength();d++)c.push(s.strings(d));return c}case bt.AttributeType.TENSORS:{let c=[];for(let d=0;d<s.tensorsLength();d++)c.push(s.tensors(d));return c}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[s.type()]}`)}}}}),Xi$1,wo$1,Ki$1,Mt$1,vo$1,Yi$1,yp$1=L$1(()=>{gp$1(),tn$1(),Xi$1=Ar(Cr()),yr(),fe$1(),wo$1=V.experimental.fbs,Ki$1={from:(a,s)=>new Yi$1(a,s)},Mt$1=class{constructor(a){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,a&&(this.type=We$1.tensorValueTypeFromProto(a.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo$1=class{constructor(a,s){a instanceof Xi$1.onnx.NodeProto?(this.name=a.name,this.opType=a.opType,this.attributes=new mn(a.attribute)):a instanceof wo$1.Node&&(this.name=s??a.name(),this.opType=a.opType(),this.attributes=new mn(We$1.tensorAttributesFromORTFormat(a))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi$1=class{constructor(a,s){if(!a)throw new TypeError("graph is empty");this.buildGraph(a),this.transformGraph(s),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(a){if(a instanceof Xi$1.onnx.GraphProto)this.buildGraphFromOnnxFormat(a);else if(a instanceof wo$1.Graph)this.buildGraphFromOrtFormat(a);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(a){let s=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let c=new Map;if(!a.input)throw new Error("missing information in graph: input");let d=[];for(let et of a.input){if(s.has(et.name))throw new Error(`duplicated input name: ${et.name}`);let g=this._allData.push(new Mt$1(et))-1;s.set(et.name,g),d.push(et.name)}if(!a.initializer)throw new Error("missing information in graph: initializer");for(let et of a.initializer){let g=s.get(et.name);if(g===void 0){let at=new Mt$1;at.type={shape:{dims:We$1.tensorDimsFromProto(et.dims)},tensorType:We$1.tensorDataTypeFromProto(et.dataType)},g=this._allData.push(at)-1,s.set(et.name,g)}this._allData[g]._from=-1,this._allData[g].tensor=$e.fromProto(et)}for(let et=0;et<this._allData.length;et++)this._allData[et].tensor||(this._allInputIndices.push(et),this._allInputNames.push(d[et]));if(!a.output)throw new Error("missing information in graph: output");for(let et of a.output){if(s.has(et.name))throw new Error(`duplicated output name: ${et.name}`);let g=this._allData.push(new Mt$1(et))-1;s.set(et.name,g),this._allOutputIndices.push(g),this._allOutputNames.push(et.name)}if(!a.node)throw new Error("missing information in graph: node");for(let et of a.node){if(!et.name)for(let at=0;;at++){let $t=`unnamed_${et.opType}_${at}`;if(!c.has($t)){et.name=$t;break}}if(c.has(et.name))throw new Error(`duplicated node name: ${et.name}`);let g=this._nodes.push(new vo$1(et))-1;c.set(et.name,g)}for(let et=0;et<this._nodes.length;et++){let g=this._nodes[et],at=a.node[et];if(!at.output)throw new Error(`missing output for node: ${at.name}`);for(let $t of at.output){let vt=s.get($t);if(typeof vt>"u"&&(vt=this._allData.push(new Mt$1)-1,s.set($t,vt)),g.outputs.push(vt),this._allData[vt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${vt}`);if(this._allData[vt]._from=et,at.opType==="Constant"){if(!at.attribute||at.attribute.length!==1||!at.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!at.output||at.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");g.outputs.pop(),g.executeNode=!1,this._allData[vt]._from=-1,this._allData[vt].tensor=$e.fromProto(at.attribute[0].t)}}}for(let et=0;et<this._nodes.length;et++){let g=this._nodes[et],at=a.node[et];if(!at.input)throw new Error(`missing input for node: ${at.name}`);for(let $t of at.input){let vt=s.get($t);if(typeof vt>"u"){if($t===""&&(at.input.length===3||at.input.length===4)&&at.opType==="Resize")continue;throw new Error(`unrecognized input '${$t}' for node: ${at.name}`)}g.inputs.push(vt),this._allData[vt]._to.push(et)}}return!0}buildGraphFromOrtFormat(a){var et,g,at;let s=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let c=new Map,d=[];for(let $t=0;$t<a.inputsLength();$t++){let vt=a.inputs($t);if(s.has(vt))throw new Error(`duplicated input name: ${vt}`);for(let b=0;b<a.nodeArgsLength();b++)if(((et=a.nodeArgs(b))==null?void 0:et.name())===vt){let pt=new Mt$1;if(((at=(g=a.nodeArgs(b))==null?void 0:g.type())==null?void 0:at.valueType())!==wo$1.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let st=a.nodeArgs(b).type().value(new wo$1.TensorTypeAndShape),wt=We$1.tensorDataTypeFromProto(st.elemType()),Tt=st.shape(),Ct=[];for(let Lt=0;Lt<Tt.dimLength();Lt++)Ct.push(it.longToNumber(Tt.dim(Lt).value().dimValue()));pt.type={shape:{dims:Ct},tensorType:wt};let jt=this._allData.push(pt)-1;s.set(vt,jt),d.push(vt)}}for(let $t=0;$t<a.initializersLength();$t++){let vt=a.initializers($t),b=s.get(vt.name());if(b===void 0){let pt=new Mt$1,st=We$1.tensorDimsFromORTFormat(vt),wt=We$1.tensorDataTypeFromProto(vt.dataType());pt.type={shape:{dims:st},tensorType:wt},b=this._allData.push(pt)-1,s.set(vt.name(),b)}this._allData[b]._from=-1,this._allData[b].tensor=$e.fromOrtTensor(vt)}for(let $t=0;$t<this._allData.length;$t++)this._allData[$t].tensor||(this._allInputIndices.push($t),this._allInputNames.push(d[$t]));for(let $t=0;$t<a.outputsLength();$t++){let vt=a.outputs($t);if(s.has(vt))throw new Error(`duplicated output name: ${vt}`);let b=this._allData.push(new Mt$1)-1;s.set(vt,b),this._allOutputIndices.push(b),this._allOutputNames.push(vt)}if(!a.nodes)throw new Error("missing information in graph: node");for(let $t=0;$t<a.nodesLength();$t++){let vt=a.nodes($t),b=vt.name();if(!b)for(let st=0;b=`unnamed_${vt.opType()}_${st}`,!!c.has(b);st++);if(c.has(b))throw new Error(`duplicated node name: ${b}`);let pt=this._nodes.push(new vo$1(vt,b))-1;c.set(b,pt)}for(let $t=0;$t<this._nodes.length;$t++){let vt=this._nodes[$t],b=a.nodes($t);if(b==null)throw new Error(`No node exists at index ${$t}`);if((b==null?void 0:b.outputsLength())===0)throw new Error(`missing output for node: ${b.name}`);for(let pt=0;pt<(b==null?void 0:b.outputsLength());pt++){let st=b==null?void 0:b.outputs(pt),wt=s.get(st);if(typeof wt>"u"&&(wt=this._allData.push(new Mt$1)-1,s.set(st,wt)),vt.outputs.push(wt),this._allData[wt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${wt}`);if(this._allData[wt]._from=$t,b.opType()==="Constant"){if(b.attributesLength()!==1||!b.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(b.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");vt.outputs.pop(),vt.executeNode=!1,this._allData[wt]._from=-1,this._allData[wt].tensor=$e.fromOrtTensor(b.attributes(0).t())}}}for(let $t=0;$t<this._nodes.length;$t++){let vt=this._nodes[$t],b=a.nodes($t);if(b.inputsLength()===0)throw new Error(`missing input for node: ${b.name}`);for(let pt=0;pt<b.inputsLength();pt++){let st=b.inputs(pt),wt=s.get(st);if(typeof wt>"u")throw new Error(`unrecognized input '${st}' for node: ${b.name()}`);vt.inputs.push(wt),this._allData[wt]._to.push($t)}}}checkIsAcyclic(){let a=new Set;this._allInputIndices.forEach(d=>{this._allData[d]._to.forEach(et=>{a.add(et)})});let s=Array.from(a),c=new Array(this._nodes.length).fill("white");for(;s.length>0;){let d=s.pop();c[d]==="gray"?c[d]="black":(s.push(d),c[d]="gray",this._nodes[d].outputs.forEach(et=>{let g=this._allData[et];if(typeof g.tensor<"u")throw new Error("node outputs should not be initialized");if(g._from!==d)throw new Error("from property of the Value object doesn't match index of Node being processed");g._to.forEach(at=>{if(c[at]==="gray")throw new Error("model graph is cyclic");c[at]==="white"&&s.push(at)})}))}}transformGraph(a){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),a&&a.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let a=0,s=new Array(this._nodes.length,0),c=0;for(let d=0;d<this._nodes.length;d++)s[d]=c,this._nodes[d].executeNode?(c!==d&&(this._nodes[c]=this._nodes[d]),c++):this._nodes[d].outputs.forEach(et=>{this._allData[et]._from=-2});this._nodes.splice(c,this._nodes.length-c);for(let d=0;d<this._allData.length;d++){let et=this._allData[d];et._from!==void 0&&et._from!==-1&&et._from!==-2&&(et._from=s[et._from]);for(let g=0;g<et._to.length;g++)if(et._to[g]>=0)et._to[g]=s[et._to[g]];else throw new Error("Trying to update a removed node")}a=0;for(let d=0;d<this._allData.length;d++){if(this._allData[d].from===-2&&this._allOutputIndices.indexOf(d+a)===-1){a++,this._allData.splice(d,1),d--;continue}if(a>0){let et=-1;this._allData[d].from!==void 0&&this._allData[d].from!==-1?(et=this._nodes[this._allData[d].from].outputs.indexOf(d+a),et!==-1&&(this._nodes[this._allData[d].from].outputs[et]=d)):(et=this._allInputIndices.indexOf(d+a),et!==-1&&(this._allInputIndices[et]=d)),this._allData[d].to.forEach(g=>{et=this._nodes[g].inputs.indexOf(d+a),et!==-1&&(this._nodes[g].inputs[et]=d)}),this._allData[d].to.length===0&&(et=this._allOutputIndices.indexOf(d+a),et!==-1&&(this._allOutputIndices[et]=d))}}}deleteNode(a){let s=this._nodes[a];if(s.outputs.length>1){for(let at=1;at<s.outputs.length;at++)if(this._allData[s.outputs[at]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}s.executeNode=!1;let c=s.inputs[0],d=s.outputs[0],et=this._allData[d].to;for(let at=0;at<s.inputs.length;at++){let $t=this._allData[s.inputs[at]].to.indexOf(a);if($t===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[s.inputs[at]].to.splice($t,1)}this._allData[d]._to=[];let g=this._allOutputIndices.indexOf(d);if(g!==-1&&(this._allOutputIndices[g]=c),et&&et.length>0)for(let at of et){let $t=this._nodes[at].inputs.indexOf(d);if($t===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[at].inputs[$t]=c,this._allData[c].to.push(at)}}removeAllDropoutNodes(){let a=0;for(let s of this._nodes){if(s.opType==="Dropout"){if(s.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(s.outputs.length!==1&&s.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(s.outputs.length===2&&this._allData[s.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(a)}a++}}removeAllIdentityNodes(){let a=0;for(let s of this._nodes)s.opType==="Identity"&&this.deleteNode(a),a++}isActivation(a){switch(a.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let a of this._nodes)if(a.opType==="Conv"){let s=this._allData[a.outputs[0]]._to;if(s.length===1&&this.isActivation(this._nodes[s[0]])){let c=this._nodes[s[0]];if(c.opType==="Clip")if(c.inputs.length===1)try{a.attributes.set("activation_params","floats",[c.attributes.getFloat("min"),c.attributes.getFloat("max")])}catch{a.attributes.set("activation_params","floats",[br,gr$1])}else if(c.inputs.length>=3&&this._allData[c.inputs[1]].tensor!==void 0&&this._allData[c.inputs[2]].tensor!==void 0)a.attributes.set("activation_params","floats",[this._allData[c.inputs[1]].tensor.floatData[0],this._allData[c.inputs[2]].tensor.floatData[0]]);else continue;a.attributes.set("activation","string",c.opType),this.deleteNode(s[0])}}}}}),Tp$1,Qb,_o$1,xp$1=L$1(()=>{zn$1(),yp$1(),tn$1(),Tp$1=Ar(Cr()),fe$1(),Qb=V.experimental.fbs,_o$1=class{constructor(){}load(a,s,c){let d;if(!c)try{this.loadFromOnnxFormat(a,s);return}catch(et){if(c!==void 0)throw et;d=et}try{this.loadFromOrtFormat(a,s)}catch(et){throw c!==void 0?et:new Error(`Failed to load model as ONNX format: ${d}
as ORT format: ${et}`)}}loadFromOnnxFormat(a,s){let c=Tp$1.onnx.ModelProto.decode(a);if(it.longToNumber(c.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=c.opsetImport.map(d=>({domain:d.domain,version:it.longToNumber(d.version)})),this._graph=Ki$1.from(c.graph,s)}loadFromOrtFormat(a,s){let c=new _$1.ByteBuffer(a),d=Qb.InferenceSession.getRootAsInferenceSession(c).model();if(it.longToNumber(d.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let et=0;et<d.opsetImportLength();et++){let g=d.opsetImport(et);this._opsets.push({domain:g==null?void 0:g.domain(),version:it.longToNumber(g.version())})}this._graph=Ki$1.from(d.graph(),s)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo,wp$1=L$1(()=>{mp$1(),bp(),lt$1(),xp$1(),Oo=class{constructor(a={}){this._initialized=!1,this.backendHint=a.backendHint,this.profiler=Gn$1.create(a.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(a,s,c){await this.profiler.event("session","Session.loadModel",async()=>{let d=await qi$1(this.backendHint);if(this.sessionHandler=d.createSessionHandler(this.context),this._model=new _o$1,typeof a=="string"){let et=a.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let g=await(void 0)(a);this.initialize(g,et)}else{let g=await(await fetch(a)).arrayBuffer();this.initialize(new Uint8Array(g),et)}}else if(ArrayBuffer.isView(a))this.initialize(a);else{let et=new Uint8Array(a,s||0,c||a.byteLength);this.initialize(et)}})}initialize(a,s){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let c=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(a,c,s),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo$1(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(a){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let s=this.normalizeAndValidateInputs(a),c=await this._executionPlan.execute(this.sessionHandler,s);return this.createOutput(c)})}normalizeAndValidateInputs(a){let s=this._model.graph.getInputNames();if(Array.isArray(a)){if(a.length!==s.length)throw new Error(`incorrect input array length: expected ${s.length} but got ${a.length}`)}else{if(a.size!==s.length)throw new Error(`incorrect input map size: expected ${s.length} but got ${a.size}`);let c=new Array(a.size),d=0;for(let et=0;et<s.length;++et){let g=a.get(s[et]);if(!g)throw new Error(`missing input tensor for: '${name}'`);c[d++]=g}a=c}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let c=this._model.graph.getInputIndices(),d=this._model.graph.getValues(),et=new Array(c.length);for(let g=0;g<c.length;++g){let at=d[c[g]];et[g]=at.type.shape.dims,this.context.graphInputTypes.push(at.type.tensorType),this.context.graphInputDims.push(a[g].dims)}this.validateInputTensorDims(et,a,!0)}else this.validateInputTensorDims(this.context.graphInputDims,a,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,a),a}validateInputTensorTypes(a,s){for(let c=0;c<s.length;c++){let d=a[c],et=s[c].type;if(d!==et)throw new Error(`input tensor[${c}] check failed: expected type '${d}' but got ${et}`)}}validateInputTensorDims(a,s,c){for(let d=0;d<s.length;d++){let et=a[d],g=s[d].dims;if(!this.compareTensorDims(et,g,c))throw new Error(`input tensor[${d}] check failed: expected shape '[${et.join(",")}]' but got [${g.join(",")}]`)}}compareTensorDims(a,s,c){if(a.length!==s.length)return!1;for(let d=0;d<a.length;++d)if(a[d]!==s[d]&&(!c||a[d]!==0))return!1;return!0}createOutput(a){let s=this._model.graph.getOutputNames();if(a.length!==s.length)throw new Error("expected number of outputs do not match number of generated outputs");let c=new Map;for(let d=0;d<s.length;++d)c.set(s[d],a[d]);return c}initializeOps(a){let s=a.getNodes();this._ops=new Array(s.length);for(let c=0;c<s.length;c++)this._ops[c]=this.sessionHandler.resolve(s[c],this._model.opsets,a)}}}),Io$1,vp$1=L$1(()=>{Ot$1(),yr(),Io$1=class{constructor(a){this.session=a,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(a,s,c){let d=new Map;for(let at in a)if(Object.hasOwnProperty.call(a,at)){let $t=a[at];d.set(at,new $e($t.dims,$t.type,void 0,void 0,$t.data))}let et=await this.session.run(d),g={};return et.forEach((at,$t)=>{g[$t]=new Me(at.type,at.data,at.dims)}),g}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p$1={};Sr(_p$1,{onnxjsBackend:()=>tg});var Ji$1,tg,Op$1=L$1(()=>{wp$1(),vp$1(),Ji$1=class{async init(){}async createInferenceSessionHandler(a,s){let c=new Oo(s);return typeof a=="string"?await c.loadModel(a):await c.loadModel(a),new Io$1(c)}},tg=new Ji$1}),Zi$1={};Sr(Zi$1,{createReadStream:()=>Ip$1,readFile:()=>rg,readFileSync:()=>ng});var rg,ng,Ip$1,Qi$1=L$1(()=>{rg=void 0,ng=void 0,Ip$1=void 0}),ea={};Sr(ea,{join:()=>og});var og,ta=L$1(()=>{og=void 0}),Pp$1=me((a,s)=>{var c=(()=>{var et;var d=typeof document<"u"?(et=document.currentScript)==null?void 0:et.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){var at=g,$t,vt,b=new Promise((_g,w0)=>{$t=_g,vt=w0}),pt=Object.assign({},at),st="./this.program",wt=typeof window=="object",Tt=typeof importScripts=="function",Ct=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",jt="",Lt,Ht,Gt;if(Ct){var Kt=(Qi$1(),ar(Zi$1)),tr=(ta(),ar(ea));jt=Tt?tr.dirname(jt)+"/":__dirname+"/",Lt=(_g,w0)=>(_g=wn(_g)?new URL(_g):tr.normalize(_g),Kt.readFileSync(_g,w0?void 0:"utf8")),Gt=_g=>(_g=Lt(_g,!0),_g.buffer||(_g=new Uint8Array(_g)),_g),Ht=(_g,w0,T0,F0=!0)=>{_g=wn(_g)?new URL(_g):tr.normalize(_g),Kt.readFile(_g,F0?void 0:"utf8",(U0,h0)=>{U0?T0(U0):w0(F0?h0.buffer:h0)})},!at.thisProgram&&1<process.argv.length&&(st=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(wt||Tt)&&(Tt?jt=self.location.href:typeof document<"u"&&document.currentScript&&(jt=document.currentScript.src),d&&(jt=d),jt.startsWith("blob:")?jt="":jt=jt.substr(0,jt.replace(/[?#].*/,"").lastIndexOf("/")+1),Lt=_g=>{var w0=new XMLHttpRequest;return w0.open("GET",_g,!1),w0.send(null),w0.responseText},Tt&&(Gt=_g=>{var w0=new XMLHttpRequest;return w0.open("GET",_g,!1),w0.responseType="arraybuffer",w0.send(null),new Uint8Array(w0.response)}),Ht=(_g,w0,T0)=>{var F0=new XMLHttpRequest;F0.open("GET",_g,!0),F0.responseType="arraybuffer",F0.onload=()=>{F0.status==200||F0.status==0&&F0.response?w0(F0.response):T0()},F0.onerror=T0,F0.send(null)});var rr=console.log.bind(console),Lr=console.error.bind(console);Object.assign(at,pt),pt=null;var jr,Yr=!1,An,No,o0,t0,c0;function n0(){var _g=jr.buffer;at.HEAP8=An=new Int8Array(_g),at.HEAP16=new Int16Array(_g),at.HEAPU8=No=new Uint8Array(_g),at.HEAPU16=new Uint16Array(_g),at.HEAP32=o0=new Int32Array(_g),at.HEAPU32=t0=new Uint32Array(_g),at.HEAPF32=new Float32Array(_g),at.HEAPF64=c0=new Float64Array(_g)}var Qo=[],Mo=[],zo=[],e0=0,Xr=null;function In(_g){throw _g="Aborted("+_g+")",Lr(_g),Yr=!0,_g=new WebAssembly.RuntimeError(_g+". Build with -sASSERTIONS for more info."),vt(_g),_g}var Zr=_g=>_g.startsWith("data:application/octet-stream;base64,"),wn=_g=>_g.startsWith("file://"),r0;if(r0="ort-wasm.wasm",!Zr(r0)){var ko=r0;r0=at.locateFile?at.locateFile(ko,jt):jt+ko}function _n(_g){if(Gt)return Gt(_g);throw"both async and sync fetching of the wasm failed"}function i0(_g){if(wt||Tt){if(typeof fetch=="function"&&!wn(_g))return fetch(_g,{credentials:"same-origin"}).then(w0=>{if(!w0.ok)throw`failed to load wasm binary file at '${_g}'`;return w0.arrayBuffer()}).catch(()=>_n(_g));if(Ht)return new Promise((w0,T0)=>{Ht(_g,F0=>w0(new Uint8Array(F0)),T0)})}return Promise.resolve().then(()=>_n(_g))}function a0(_g,w0,T0){return i0(_g).then(F0=>WebAssembly.instantiate(F0,w0)).then(T0,F0=>{Lr(`failed to asynchronously prepare wasm: ${F0}`),In(F0)})}function m0(_g,w0){var T0=r0;return typeof WebAssembly.instantiateStreaming!="function"||Zr(T0)||wn(T0)||Ct||typeof fetch!="function"?a0(T0,_g,w0):fetch(T0,{credentials:"same-origin"}).then(F0=>WebAssembly.instantiateStreaming(F0,_g).then(w0,function(U0){return Lr(`wasm streaming compile failed: ${U0}`),Lr("falling back to ArrayBuffer instantiation"),a0(T0,_g,w0)}))}var p0,x0={798088:(_g,w0,T0,F0)=>{if(typeof at>"u"||!at.ya)return 1;if(_g=P0(_g>>>0),_g.startsWith("./")&&(_g=_g.substring(2)),_g=at.ya.get(_g),!_g)return 2;if(w0>>>=0,T0>>>=0,w0+T0>_g.byteLength)return 3;try{return No.set(_g.subarray(w0,w0+T0),F0>>>0>>>0),0}catch{return 4}}};class S0{constructor(w0){this.wa=w0-24}}var R0=0,$0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,f0=(_g,w0,T0)=>{w0>>>=0;var F0=w0+T0;for(T0=w0;_g[T0]&&!(T0>=F0);)++T0;if(16<T0-w0&&_g.buffer&&$0)return $0.decode(_g.subarray(w0,T0));for(F0="";w0<T0;){var U0=_g[w0++];if(U0&128){var h0=_g[w0++]&63;if((U0&224)==192)F0+=String.fromCharCode((U0&31)<<6|h0);else{var Q0=_g[w0++]&63;U0=(U0&240)==224?(U0&15)<<12|h0<<6|Q0:(U0&7)<<18|h0<<12|Q0<<6|_g[w0++]&63,65536>U0?F0+=String.fromCharCode(U0):(U0-=65536,F0+=String.fromCharCode(55296|U0>>10,56320|U0&1023))}}else F0+=String.fromCharCode(U0)}return F0},P0=(_g,w0)=>(_g>>>=0)?f0(No,_g,w0):"",M0=_g=>{for(var w0=0,T0=0;T0<_g.length;++T0){var F0=_g.charCodeAt(T0);127>=F0?w0++:2047>=F0?w0+=2:55296<=F0&&57343>=F0?(w0+=4,++T0):w0+=3}return w0},C0=(_g,w0,T0,F0)=>{if(T0>>>=0,!(0<F0))return 0;var U0=T0;F0=T0+F0-1;for(var h0=0;h0<_g.length;++h0){var Q0=_g.charCodeAt(h0);if(55296<=Q0&&57343>=Q0){var l1=_g.charCodeAt(++h0);Q0=65536+((Q0&1023)<<10)|l1&1023}if(127>=Q0){if(T0>=F0)break;w0[T0++>>>0]=Q0}else{if(2047>=Q0){if(T0+1>=F0)break;w0[T0++>>>0]=192|Q0>>6}else{if(65535>=Q0){if(T0+2>=F0)break;w0[T0++>>>0]=224|Q0>>12}else{if(T0+3>=F0)break;w0[T0++>>>0]=240|Q0>>18,w0[T0++>>>0]=128|Q0>>12&63}w0[T0++>>>0]=128|Q0>>6&63}w0[T0++>>>0]=128|Q0&63}}return w0[T0>>>0]=0,T0-U0},Uo=_g=>_g%4===0&&(_g%100!==0||_g%400===0),l0=[0,31,60,91,121,152,182,213,244,274,305,335],b0=[0,31,59,90,120,151,181,212,243,273,304,334],k0=[],d0={},E0=()=>{if(!V0){var _g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:st||"./this.program"},w0;for(w0 in d0)d0[w0]===void 0?delete _g[w0]:_g[w0]=d0[w0];var T0=[];for(w0 in _g)T0.push(`${w0}=${_g[w0]}`);V0=T0}return V0},V0,Z0=[null,[],[]],h1=[31,29,31,30,31,30,31,31,30,31,30,31],r1=[31,28,31,30,31,30,31,31,30,31,30,31];function I1(_g){var w0=Array(M0(_g)+1);return C0(_g,w0,0,w0.length),w0}function f1(_g,w0,T0,F0){function U0(I0,p1,x1){for(I0=typeof I0=="number"?I0.toString():I0||"";I0.length<p1;)I0=x1[0]+I0;return I0}function h0(I0,p1){return U0(I0,p1,"0")}function Q0(I0,p1){function x1(D1){return 0>D1?-1:0<D1?1:0}var R1;return(R1=x1(I0.getFullYear()-p1.getFullYear()))===0&&(R1=x1(I0.getMonth()-p1.getMonth()))===0&&(R1=x1(I0.getDate()-p1.getDate())),R1}function l1(I0){switch(I0.getDay()){case 0:return new Date(I0.getFullYear()-1,11,29);case 1:return I0;case 2:return new Date(I0.getFullYear(),0,3);case 3:return new Date(I0.getFullYear(),0,2);case 4:return new Date(I0.getFullYear(),0,1);case 5:return new Date(I0.getFullYear()-1,11,31);case 6:return new Date(I0.getFullYear()-1,11,30)}}function e1(I0){var p1=I0.sa;for(I0=new Date(new Date(I0.ta+1900,0,1).getTime());0<p1;){var x1=I0.getMonth(),R1=(Uo(I0.getFullYear())?h1:r1)[x1];if(p1>R1-I0.getDate())p1-=R1-I0.getDate()+1,I0.setDate(1),11>x1?I0.setMonth(x1+1):(I0.setMonth(0),I0.setFullYear(I0.getFullYear()+1));else{I0.setDate(I0.getDate()+p1);break}}return x1=new Date(I0.getFullYear()+1,0,4),p1=l1(new Date(I0.getFullYear(),0,4)),x1=l1(x1),0>=Q0(p1,I0)?0>=Q0(x1,I0)?I0.getFullYear()+1:I0.getFullYear():I0.getFullYear()-1}_g>>>=0,w0>>>=0,T0>>>=0,F0>>>=0;var m1=t0[F0+40>>>2>>>0];F0={Ba:o0[F0>>>2>>>0],Aa:o0[F0+4>>>2>>>0],ua:o0[F0+8>>>2>>>0],xa:o0[F0+12>>>2>>>0],va:o0[F0+16>>>2>>>0],ta:o0[F0+20>>>2>>>0],na:o0[F0+24>>>2>>>0],sa:o0[F0+28>>>2>>>0],Da:o0[F0+32>>>2>>>0],za:o0[F0+36>>>2>>>0],Ca:m1?P0(m1):""},T0=P0(T0),m1={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var T1 in m1)T0=T0.replace(new RegExp(T1,"g"),m1[T1]);var G1="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),P1="January February March April May June July August September October November December".split(" ");m1={"%a":I0=>G1[I0.na].substring(0,3),"%A":I0=>G1[I0.na],"%b":I0=>P1[I0.va].substring(0,3),"%B":I0=>P1[I0.va],"%C":I0=>h0((I0.ta+1900)/100|0,2),"%d":I0=>h0(I0.xa,2),"%e":I0=>U0(I0.xa,2," "),"%g":I0=>e1(I0).toString().substring(2),"%G":e1,"%H":I0=>h0(I0.ua,2),"%I":I0=>(I0=I0.ua,I0==0?I0=12:12<I0&&(I0-=12),h0(I0,2)),"%j":I0=>{for(var p1=0,x1=0;x1<=I0.va-1;p1+=(Uo(I0.ta+1900)?h1:r1)[x1++]);return h0(I0.xa+p1,3)},"%m":I0=>h0(I0.va+1,2),"%M":I0=>h0(I0.Aa,2),"%n":()=>`
`,"%p":I0=>0<=I0.ua&&12>I0.ua?"AM":"PM","%S":I0=>h0(I0.Ba,2),"%t":()=>"	","%u":I0=>I0.na||7,"%U":I0=>h0(Math.floor((I0.sa+7-I0.na)/7),2),"%V":I0=>{var p1=Math.floor((I0.sa+7-(I0.na+6)%7)/7);if(2>=(I0.na+371-I0.sa-2)%7&&p1++,p1)p1==53&&(x1=(I0.na+371-I0.sa)%7,x1==4||x1==3&&Uo(I0.ta)||(p1=1));else{p1=52;var x1=(I0.na+7-I0.sa-1)%7;(x1==4||x1==5&&Uo(I0.ta%400-1))&&p1++}return h0(p1,2)},"%w":I0=>I0.na,"%W":I0=>h0(Math.floor((I0.sa+7-(I0.na+6)%7)/7),2),"%y":I0=>(I0.ta+1900).toString().substring(2),"%Y":I0=>I0.ta+1900,"%z":I0=>{I0=I0.za;var p1=0<=I0;return I0=Math.abs(I0)/60,(p1?"+":"-")+("0000"+(I0/60*100+I0%60)).slice(-4)},"%Z":I0=>I0.Ca,"%%":()=>"%"},T0=T0.replace(/%%/g,"\0\0");for(T1 in m1)T0.includes(T1)&&(T0=T0.replace(new RegExp(T1,"g"),m1[T1](F0)));return T0=T0.replace(/\0\0/g,"%"),T1=I1(T0),T1.length>w0?0:(An.set(T1,_g>>>0),T1.length-1)}var q1={a:function(_g,w0,T0){_g>>>=0;var F0=new S0(_g);throw t0[F0.wa+16>>>2>>>0]=0,t0[F0.wa+4>>>2>>>0]=w0>>>0,t0[F0.wa+8>>>2>>>0]=T0>>>0,R0=_g,R0},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(_g,w0,T0){return w0>>>=0,No.copyWithin(_g>>>0>>>0,w0>>>0,w0+(T0>>>0)>>>0)},n:function(_g,w0,T0){_g=w0+2097152>>>0<4194305-!!_g?(_g>>>0)+4294967296*w0:NaN,T0>>>=0,_g=new Date(1e3*_g),o0[T0>>>2>>>0]=_g.getUTCSeconds(),o0[T0+4>>>2>>>0]=_g.getUTCMinutes(),o0[T0+8>>>2>>>0]=_g.getUTCHours(),o0[T0+12>>>2>>>0]=_g.getUTCDate(),o0[T0+16>>>2>>>0]=_g.getUTCMonth(),o0[T0+20>>>2>>>0]=_g.getUTCFullYear()-1900,o0[T0+24>>>2>>>0]=_g.getUTCDay(),o0[T0+28>>>2>>>0]=(_g.getTime()-Date.UTC(_g.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(_g,w0,T0){_g=w0+2097152>>>0<4194305-!!_g?(_g>>>0)+4294967296*w0:NaN,T0>>>=0,_g=new Date(1e3*_g),o0[T0>>>2>>>0]=_g.getSeconds(),o0[T0+4>>>2>>>0]=_g.getMinutes(),o0[T0+8>>>2>>>0]=_g.getHours(),o0[T0+12>>>2>>>0]=_g.getDate(),o0[T0+16>>>2>>>0]=_g.getMonth(),o0[T0+20>>>2>>>0]=_g.getFullYear()-1900,o0[T0+24>>>2>>>0]=_g.getDay(),o0[T0+28>>>2>>>0]=(Uo(_g.getFullYear())?l0:b0)[_g.getMonth()]+_g.getDate()-1|0,o0[T0+36>>>2>>>0]=-(60*_g.getTimezoneOffset()),w0=new Date(_g.getFullYear(),6,1).getTimezoneOffset();var F0=new Date(_g.getFullYear(),0,1).getTimezoneOffset();o0[T0+32>>>2>>>0]=(w0!=F0&&_g.getTimezoneOffset()==Math.min(F0,w0))|0},p:function(_g){_g>>>=0;var w0=new Date(o0[_g+20>>>2>>>0]+1900,o0[_g+16>>>2>>>0],o0[_g+12>>>2>>>0],o0[_g+8>>>2>>>0],o0[_g+4>>>2>>>0],o0[_g>>>2>>>0],0),T0=o0[_g+32>>>2>>>0],F0=w0.getTimezoneOffset(),U0=new Date(w0.getFullYear(),6,1).getTimezoneOffset(),h0=new Date(w0.getFullYear(),0,1).getTimezoneOffset(),Q0=Math.min(h0,U0);return 0>T0?o0[_g+32>>>2>>>0]=+(U0!=h0&&Q0==F0):0<T0!=(Q0==F0)&&(U0=Math.max(h0,U0),w0.setTime(w0.getTime()+6e4*((0<T0?Q0:U0)-F0))),o0[_g+24>>>2>>>0]=w0.getDay(),o0[_g+28>>>2>>>0]=(Uo(w0.getFullYear())?l0:b0)[w0.getMonth()]+w0.getDate()-1|0,o0[_g>>>2>>>0]=w0.getSeconds(),o0[_g+4>>>2>>>0]=w0.getMinutes(),o0[_g+8>>>2>>>0]=w0.getHours(),o0[_g+12>>>2>>>0]=w0.getDate(),o0[_g+16>>>2>>>0]=w0.getMonth(),o0[_g+20>>>2>>>0]=w0.getYear(),_g=w0.getTime(),_g=isNaN(_g)?-1:_g/1e3,B1((p0=_g,1<=+Math.abs(p0)?0<p0?+Math.floor(p0/4294967296)>>>0:~~+Math.ceil((p0-+(~~p0>>>0))/4294967296)>>>0:0)),_g>>>0},l:function(){return-52},m:function(){},t:function(_g,w0,T0,F0){T0>>>=0,F0>>>=0;var U0=new Date().getFullYear(),h0=new Date(U0,0,1),Q0=new Date(U0,6,1);U0=h0.getTimezoneOffset();var l1=Q0.getTimezoneOffset();t0[_g>>>0>>>2>>>0]=60*Math.max(U0,l1),o0[w0>>>0>>>2>>>0]=+(U0!=l1),_g=e1=>e1.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],h0=_g(h0),Q0=_g(Q0),l1<U0?(C0(h0,No,T0,17),C0(Q0,No,F0,17)):(C0(h0,No,F0,17),C0(Q0,No,T0,17))},d:()=>{In("")},B:function(_g,w0,T0){_g>>>=0,w0>>>=0,T0>>>=0,k0.length=0;for(var F0;F0=No[w0++>>>0];){var U0=F0!=105;U0&=F0!=112,T0+=U0&&T0%8?4:0,k0.push(F0==112?t0[T0>>>2>>>0]:F0==105?o0[T0>>>2>>>0]:c0[T0>>>3>>>0]),T0+=U0?8:4}return x0[_g](...k0)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(_g){_g>>>=0;var w0=No.length;if(4294901760<_g)return!1;for(var T0=1;4>=T0;T0*=2){var F0=w0*(1+.2/T0);F0=Math.min(F0,_g+100663296);var U0=Math;F0=Math.max(_g,F0);e:{U0=(U0.min.call(U0,4294901760,F0+(65536-F0%65536)%65536)-jr.buffer.byteLength+65535)/65536;try{jr.grow(U0),n0();var h0=1;break e}catch{}h0=void 0}if(h0)return!0}return!1},C:function(_g,w0){_g>>>=0,w0>>>=0;var T0=0;return E0().forEach((F0,U0)=>{var h0=w0+T0;for(U0=t0[_g+4*U0>>>2>>>0]=h0,h0=0;h0<F0.length;++h0)An[U0++>>>0]=F0.charCodeAt(h0);An[U0>>>0]=0,T0+=F0.length+1}),0},D:function(_g,w0){_g>>>=0,w0>>>=0;var T0=E0();t0[_g>>>2>>>0]=T0.length;var F0=0;return T0.forEach(U0=>F0+=U0.length+1),t0[w0>>>2>>>0]=F0,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(_g,w0,T0,F0){w0>>>=0,T0>>>=0,F0>>>=0;for(var U0=0,h0=0;h0<T0;h0++){var Q0=t0[w0>>>2>>>0],l1=t0[w0+4>>>2>>>0];w0+=8;for(var e1=0;e1<l1;e1++){var m1=No[Q0+e1>>>0],T1=Z0[_g];m1===0||m1===10?((_g===1?rr:Lr)(f0(T1,0)),T1.length=0):T1.push(m1)}U0+=l1}return t0[F0>>>2>>>0]=U0,0},r:f1,c:function(_g,w0,T0,F0){return f1(_g>>>0,w0>>>0,T0>>>0,F0>>>0)}},c1=function(){function _g(T0){return c1=T0.exports,c1=dv(),jr=c1.K,n0(),Mo.unshift(c1.L),e0--,e0==0&&Xr&&(T0=Xr,Xr=null,T0()),c1}var w0={a:q1};if(e0++,at.instantiateWasm)try{return at.instantiateWasm(w0,_g)}catch(T0){Lr(`Module.instantiateWasm callback failed with error: ${T0}`),vt(T0)}return m0(w0,function(T0){_g(T0.instance)}).catch(vt),{}}();at._OrtInit=(_g,w0)=>(at._OrtInit=c1.M)(_g,w0),at._OrtGetLastError=(_g,w0)=>(at._OrtGetLastError=c1.N)(_g,w0),at._OrtCreateSessionOptions=(_g,w0,T0,F0,U0,h0,Q0,l1,e1,m1)=>(at._OrtCreateSessionOptions=c1.O)(_g,w0,T0,F0,U0,h0,Q0,l1,e1,m1),at._OrtAppendExecutionProvider=(_g,w0)=>(at._OrtAppendExecutionProvider=c1.P)(_g,w0),at._OrtAddFreeDimensionOverride=(_g,w0,T0)=>(at._OrtAddFreeDimensionOverride=c1.Q)(_g,w0,T0),at._OrtAddSessionConfigEntry=(_g,w0,T0)=>(at._OrtAddSessionConfigEntry=c1.R)(_g,w0,T0),at._OrtReleaseSessionOptions=_g=>(at._OrtReleaseSessionOptions=c1.S)(_g),at._OrtCreateSession=(_g,w0,T0)=>(at._OrtCreateSession=c1.T)(_g,w0,T0),at._OrtReleaseSession=_g=>(at._OrtReleaseSession=c1.U)(_g),at._OrtGetInputOutputCount=(_g,w0,T0)=>(at._OrtGetInputOutputCount=c1.V)(_g,w0,T0),at._OrtGetInputName=(_g,w0)=>(at._OrtGetInputName=c1.W)(_g,w0),at._OrtGetOutputName=(_g,w0)=>(at._OrtGetOutputName=c1.X)(_g,w0),at._OrtFree=_g=>(at._OrtFree=c1.Y)(_g),at._OrtCreateTensor=(_g,w0,T0,F0,U0,h0)=>(at._OrtCreateTensor=c1.Z)(_g,w0,T0,F0,U0,h0),at._OrtGetTensorData=(_g,w0,T0,F0,U0)=>(at._OrtGetTensorData=c1._)(_g,w0,T0,F0,U0),at._OrtReleaseTensor=_g=>(at._OrtReleaseTensor=c1.$)(_g),at._OrtCreateRunOptions=(_g,w0,T0,F0)=>(at._OrtCreateRunOptions=c1.aa)(_g,w0,T0,F0),at._OrtAddRunConfigEntry=(_g,w0,T0)=>(at._OrtAddRunConfigEntry=c1.ba)(_g,w0,T0),at._OrtReleaseRunOptions=_g=>(at._OrtReleaseRunOptions=c1.ca)(_g),at._OrtCreateBinding=_g=>(at._OrtCreateBinding=c1.da)(_g),at._OrtBindInput=(_g,w0,T0)=>(at._OrtBindInput=c1.ea)(_g,w0,T0),at._OrtBindOutput=(_g,w0,T0,F0)=>(at._OrtBindOutput=c1.fa)(_g,w0,T0,F0),at._OrtClearBoundOutputs=_g=>(at._OrtClearBoundOutputs=c1.ga)(_g),at._OrtReleaseBinding=_g=>(at._OrtReleaseBinding=c1.ha)(_g),at._OrtRunWithBinding=(_g,w0,T0,F0,U0)=>(at._OrtRunWithBinding=c1.ia)(_g,w0,T0,F0,U0),at._OrtRun=(_g,w0,T0,F0,U0,h0,Q0,l1)=>(at._OrtRun=c1.ja)(_g,w0,T0,F0,U0,h0,Q0,l1),at._OrtEndProfiling=_g=>(at._OrtEndProfiling=c1.ka)(_g),at._malloc=_g=>(at._malloc=c1.la)(_g),at._free=_g=>(at._free=c1.ma)(_g);var B1=_g=>(B1=c1.oa)(_g),nv=_g=>(nv=c1.pa)(_g),iv=_g=>(iv=c1.qa)(_g),t1=()=>(t1=c1.ra)();function dv(){var _g=c1;_g=Object.assign({},_g);var w0=T0=>F0=>T0(F0)>>>0;return _g.la=w0(_g.la),_g.qa=w0(_g.qa),_g.ra=(T0=>()=>T0()>>>0)(_g.ra),_g}at.stackSave=()=>t1(),at.stackRestore=_g=>nv(_g),at.stackAlloc=_g=>iv(_g),at.UTF8ToString=P0,at.stringToUTF8=(_g,w0,T0)=>C0(_g,No,w0,T0),at.lengthBytesUTF8=M0;var $1;Xr=function _g(){$1||rv(),$1||(Xr=_g)};function rv(){if(!(0<e0)){if(at.preRun)for(typeof at.preRun=="function"&&(at.preRun=[at.preRun]);at.preRun.length;){var _g=at.preRun.shift();Qo.unshift(_g)}for(;0<Qo.length;)Qo.shift()(at);if(!(0<e0||$1||($1=!0,at.calledRun=!0,Yr))){for(;0<Mo.length;)Mo.shift()(at);for($t(at);0<zo.length;)zo.shift()(at)}}}return rv(),b}})();typeof a=="object"&&typeof s=="object"?s.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Ep$1=me(()=>{}),Dp$1=me(()=>{}),Lp$1={};Sr(Lp$1,{cpus:()=>ig});var ig,Cp$1=L$1(()=>{ig=void 0}),kp$1=me((a,s)=>{var c=(()=>{var et;var d=typeof document<"u"?(et=document.currentScript)==null?void 0:et.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){function at(){return zo.buffer!=Zr.buffer&&i0(),Zr}function $t(){return zo.buffer!=Zr.buffer&&i0(),wn}function vt(){return zo.buffer!=Zr.buffer&&i0(),r0}function b(){return zo.buffer!=Zr.buffer&&i0(),ko}function pt(){return zo.buffer!=Zr.buffer&&i0(),_n}var st=g,wt,Tt,Ct=new Promise((vn,nr)=>{wt=vn,Tt=nr}),jt=Object.assign({},st),Lt="./this.program",Ht=(vn,nr)=>{throw nr},Gt=typeof window=="object",Kt=typeof importScripts=="function",tr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",rr=st.ENVIRONMENT_IS_PTHREAD||!1,Lr="";function jr(vn){return st.locateFile?st.locateFile(vn,Lr):Lr+vn}var Yr,An,No;if(tr){var o0=(Qi$1(),ar(Zi$1)),t0=(ta(),ar(ea));Lr=Kt?t0.dirname(Lr)+"/":__dirname+"/",Yr=(vn,nr)=>(vn=M0(vn)?new URL(vn):t0.normalize(vn),o0.readFileSync(vn,nr?void 0:"utf8")),No=vn=>(vn=Yr(vn,!0),vn.buffer||(vn=new Uint8Array(vn)),vn),An=(vn,nr,Ir,Kr=!0)=>{vn=M0(vn)?new URL(vn):t0.normalize(vn),o0.readFile(vn,Kr?void 0:"utf8",(Sn,Go)=>{Sn?Ir(Sn):nr(Kr?Go.buffer:Go)})},!st.thisProgram&&1<process.argv.length&&(Lt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Ht=(vn,nr)=>{throw process.exitCode=vn,nr},global.Worker=Ep$1().Worker}else(Gt||Kt)&&(Kt?Lr=self.location.href:typeof document<"u"&&document.currentScript&&(Lr=document.currentScript.src),typeof d<"u"&&d&&(Lr=d),Lr.startsWith("blob:")?Lr="":Lr=Lr.substr(0,Lr.replace(/[?#].*/,"").lastIndexOf("/")+1),tr||(Yr=vn=>{var nr=new XMLHttpRequest;return nr.open("GET",vn,!1),nr.send(null),nr.responseText},Kt&&(No=vn=>{var nr=new XMLHttpRequest;return nr.open("GET",vn,!1),nr.responseType="arraybuffer",nr.send(null),new Uint8Array(nr.response)}),An=(vn,nr,Ir)=>{var Kr=new XMLHttpRequest;Kr.open("GET",vn,!0),Kr.responseType="arraybuffer",Kr.onload=()=>{Kr.status==200||Kr.status==0&&Kr.response?nr(Kr.response):Ir()},Kr.onerror=Ir,Kr.send(null)}));tr&&typeof performance>"u"&&(global.performance=Dp$1().performance);var c0=console.log.bind(console),n0=console.error.bind(console);tr&&(c0=(...vn)=>o0.writeSync(1,vn.join(" ")+`
`),n0=(...vn)=>o0.writeSync(2,vn.join(" ")+`
`));var Qo=c0,Mo=n0;Object.assign(st,jt),jt=null;var zo,e0,Xr=!1,In,Zr,wn,r0,ko,_n;function i0(){var vn=zo.buffer;st.HEAP8=Zr=new Int8Array(vn),st.HEAP16=new Int16Array(vn),st.HEAPU8=wn=new Uint8Array(vn),st.HEAPU16=new Uint16Array(vn),st.HEAP32=r0=new Int32Array(vn),st.HEAPU32=ko=new Uint32Array(vn),st.HEAPF32=new Float32Array(vn),st.HEAPF64=_n=new Float64Array(vn)}var a0=16777216;if(rr)zo=st.wasmMemory;else if(st.wasmMemory)zo=st.wasmMemory;else if(zo=new WebAssembly.Memory({initial:a0/65536,maximum:65536,shared:!0}),!(zo.buffer instanceof SharedArrayBuffer))throw Mo("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),tr&&Mo("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");i0(),a0=zo.buffer.byteLength;var m0=[],p0=[],x0=[],S0=0,R0=null;function $0(){if(S0--,S0==0&&R0){var vn=R0;R0=null,vn()}}function f0(vn){throw vn="Aborted("+vn+")",Mo(vn),Xr=!0,In=1,vn=new WebAssembly.RuntimeError(vn+". Build with -sASSERTIONS for more info."),Tt(vn),vn}var P0=vn=>vn.startsWith("data:application/octet-stream;base64,"),M0=vn=>vn.startsWith("file://"),C0;C0="ort-wasm-threaded.wasm",P0(C0)||(C0=jr(C0));function Uo(vn){if(No)return No(vn);throw"both async and sync fetching of the wasm failed"}function l0(vn){if(Gt||Kt){if(typeof fetch=="function"&&!M0(vn))return fetch(vn,{credentials:"same-origin"}).then(nr=>{if(!nr.ok)throw`failed to load wasm binary file at '${vn}'`;return nr.arrayBuffer()}).catch(()=>Uo(vn));if(An)return new Promise((nr,Ir)=>{An(vn,Kr=>nr(new Uint8Array(Kr)),Ir)})}return Promise.resolve().then(()=>Uo(vn))}function b0(vn,nr,Ir){return l0(vn).then(Kr=>WebAssembly.instantiate(Kr,nr)).then(Ir,Kr=>{Mo(`failed to asynchronously prepare wasm: ${Kr}`),f0(Kr)})}function k0(vn,nr){var Ir=C0;return typeof WebAssembly.instantiateStreaming!="function"||P0(Ir)||M0(Ir)||tr||typeof fetch!="function"?b0(Ir,vn,nr):fetch(Ir,{credentials:"same-origin"}).then(Kr=>WebAssembly.instantiateStreaming(Kr,vn).then(nr,function(Sn){return Mo(`wasm streaming compile failed: ${Sn}`),Mo("falling back to ArrayBuffer instantiation"),b0(Ir,vn,nr)}))}var d0,E0={799444:(vn,nr,Ir,Kr)=>{if(typeof st>"u"||!st.bb)return 1;if(vn=l1(vn>>>0),vn.startsWith("./")&&(vn=vn.substring(2)),vn=st.bb.get(vn),!vn)return 2;if(nr>>>=0,Ir>>>=0,Kr>>>=0,nr+Ir>vn.byteLength)return 3;try{return $t().set(vn.subarray(nr,nr+Ir),Kr>>>0),0}catch{return 4}}};function V0(vn){this.name="ExitStatus",this.message=`Program terminated with exit(${vn})`,this.status=vn}var Z0=vn=>{vn.terminate(),vn.onmessage=()=>{}},h1=vn=>{t1.Oa.length==0&&(nv(),t1.Xa(t1.Oa[0]));var nr=t1.Oa.pop();if(!nr)return 6;t1.Pa.push(nr),t1.La[vn.Na]=nr,nr.Na=vn.Na;var Ir={cmd:"run",start_routine:vn.gb,arg:vn.cb,pthread_ptr:vn.Na};return tr&&nr.unref(),nr.postMessage(Ir,vn.mb),0},r1=0,I1=vn=>{var nr=Ev();return vn=vn(),$v(nr),vn},f1=(vn,nr,...Ir)=>I1(()=>{for(var Kr=Ir.length,Sn=Cy(8*Kr),Go=Sn>>>3,g0=0;g0<Ir.length;g0++){var B0=Ir[g0];pt()[Go+g0>>>0]=B0}return Ty(vn,0,Kr,Sn,nr)});function q1(vn){var nr;if(rr)return f1(0,1,vn);In=vn,0<r1||(t1.hb(),(nr=st.onExit)==null||nr.call(st,vn),Xr=!0),Ht(vn,new V0(vn))}var c1=vn=>{if(In=vn,rr)throw $1(vn),"unwind";q1(vn)};function B1(){for(var vn=st.numThreads;vn--;)nv();m0.unshift(()=>{S0++,iv(()=>$0())})}function nv(){var vn=jr("ort-wasm-threaded.worker.js");vn=new Worker(vn),t1.Oa.push(vn)}function iv(vn){rr?vn():Promise.all(t1.Oa.map(t1.Xa)).then(vn)}var t1={Oa:[],Pa:[],ab:[],La:{},Va(){rr?(t1.receiveObjectTransfer=t1.fb,t1.threadInitTLS=t1.$a,t1.setExitStatus=t1.Za):B1()},Za:vn=>In=vn,pb:["$terminateWorker"],hb:()=>{for(var vn of t1.Pa)Z0(vn);for(vn of t1.Oa)Z0(vn);t1.Oa=[],t1.Pa=[],t1.La=[]},Ya:vn=>{var nr=vn.Na;delete t1.La[nr],t1.Oa.push(vn),t1.Pa.splice(t1.Pa.indexOf(vn),1),vn.Na=0,kv(nr)},fb(){},$a(){t1.ab.forEach(vn=>vn())},Xa:vn=>new Promise(nr=>{vn.onmessage=Go=>{Go=Go.data;var g0=Go.cmd;if(Go.targetThread&&Go.targetThread!=My()){var B0=t1.La[Go.targetThread];B0?B0.postMessage(Go,Go.transferList):Mo(`Internal error! Worker sent a message "${g0}" to target pthread ${Go.targetThread}, but that thread no longer exists!`)}else g0==="checkMailbox"?Rv():g0==="spawnThread"?h1(Go):g0==="cleanupThread"?t1.Ya(t1.La[Go.thread]):g0==="killThread"?(Go=Go.thread,g0=t1.La[Go],delete t1.La[Go],Z0(g0),kv(Go),t1.Pa.splice(t1.Pa.indexOf(g0),1),g0.Na=0):g0==="cancelThread"?t1.La[Go.thread].postMessage({cmd:"cancel"}):g0==="loaded"?(vn.loaded=!0,tr&&!vn.Na&&vn.unref(),nr(vn)):g0==="alert"?alert(`Thread ${Go.threadId}: ${Go.text}`):Go.target==="setimmediate"?vn.postMessage(Go):g0==="callHandler"?st[Go.handler](...Go.args):g0&&Mo(`worker sent an unknown command ${g0}`)},vn.onerror=Go=>{throw Mo(`worker sent an error! ${Go.filename}:${Go.lineno}: ${Go.message}`),Go},tr&&(vn.on("message",Go=>vn.onmessage({data:Go})),vn.on("error",Go=>vn.onerror(Go)));var Ir=[],Kr=["onExit"],Sn;for(Sn of Kr)st.hasOwnProperty(Sn)&&Ir.push(Sn);vn.postMessage({cmd:"load",handlers:Ir,urlOrBlob:st.mainScriptUrlOrBlob||d,wasmMemory:zo,wasmModule:e0})})};st.PThread=t1;var dv=vn=>{for(;0<vn.length;)vn.shift()(st)};st.establishStackSpace=()=>{var vn=My(),nr=b()[vn+52>>>2>>>0];vn=b()[vn+56>>>2>>>0],dy(nr,nr-vn),$v(nr)};function $1(vn){if(rr)return f1(1,0,vn);c1(vn)}var rv=[],_g;st.invokeEntryPoint=(vn,nr)=>{r1=0;var Ir=rv[vn];Ir||(vn>=rv.length&&(rv.length=vn+1),rv[vn]=Ir=_g.get(vn)),vn=Ir(nr),0<r1?t1.Za(vn):fv(vn)};class w0{constructor(nr){this.Ua=nr-24}Va(nr,Ir){b()[this.Ua+16>>>2>>>0]=0,b()[this.Ua+4>>>2>>>0]=nr,b()[this.Ua+8>>>2>>>0]=Ir}}var T0=0;function F0(vn,nr,Ir,Kr){return rr?f1(2,1,vn,nr,Ir,Kr):U0(vn,nr,Ir,Kr)}function U0(vn,nr,Ir,Kr){if(vn>>>=0,nr>>>=0,Ir>>>=0,Kr>>>=0,typeof SharedArrayBuffer>"u")return Mo("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Sn=[];return rr&&Sn.length===0?F0(vn,nr,Ir,Kr):(vn={gb:Ir,Na:vn,cb:Kr,mb:Sn},rr?(vn.ob="spawnThread",postMessage(vn,Sn),0):h1(vn))}var h0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Q0=(vn,nr,Ir)=>{nr>>>=0;var Kr=nr+Ir;for(Ir=nr;vn[Ir]&&!(Ir>=Kr);)++Ir;if(16<Ir-nr&&vn.buffer&&h0)return h0.decode(vn.buffer instanceof SharedArrayBuffer?vn.slice(nr,Ir):vn.subarray(nr,Ir));for(Kr="";nr<Ir;){var Sn=vn[nr++];if(Sn&128){var Go=vn[nr++]&63;if((Sn&224)==192)Kr+=String.fromCharCode((Sn&31)<<6|Go);else{var g0=vn[nr++]&63;Sn=(Sn&240)==224?(Sn&15)<<12|Go<<6|g0:(Sn&7)<<18|Go<<12|g0<<6|vn[nr++]&63,65536>Sn?Kr+=String.fromCharCode(Sn):(Sn-=65536,Kr+=String.fromCharCode(55296|Sn>>10,56320|Sn&1023))}}else Kr+=String.fromCharCode(Sn)}return Kr},l1=(vn,nr)=>(vn>>>=0)?Q0($t(),vn,nr):"";function e1(vn,nr,Ir){return rr?f1(3,1,vn,nr,Ir):0}function m1(vn,nr){if(rr)return f1(4,1,vn,nr)}var T1=vn=>{for(var nr=0,Ir=0;Ir<vn.length;++Ir){var Kr=vn.charCodeAt(Ir);127>=Kr?nr++:2047>=Kr?nr+=2:55296<=Kr&&57343>=Kr?(nr+=4,++Ir):nr+=3}return nr},G1=(vn,nr,Ir,Kr)=>{if(Ir>>>=0,!(0<Kr))return 0;var Sn=Ir;Kr=Ir+Kr-1;for(var Go=0;Go<vn.length;++Go){var g0=vn.charCodeAt(Go);if(55296<=g0&&57343>=g0){var B0=vn.charCodeAt(++Go);g0=65536+((g0&1023)<<10)|B0&1023}if(127>=g0){if(Ir>=Kr)break;nr[Ir++>>>0]=g0}else{if(2047>=g0){if(Ir+1>=Kr)break;nr[Ir++>>>0]=192|g0>>6}else{if(65535>=g0){if(Ir+2>=Kr)break;nr[Ir++>>>0]=224|g0>>12}else{if(Ir+3>=Kr)break;nr[Ir++>>>0]=240|g0>>18,nr[Ir++>>>0]=128|g0>>12&63}nr[Ir++>>>0]=128|g0>>6&63}nr[Ir++>>>0]=128|g0&63}}return nr[Ir>>>0]=0,Ir-Sn},P1=(vn,nr,Ir)=>G1(vn,$t(),nr,Ir);function I0(vn,nr){if(rr)return f1(5,1,vn,nr)}function p1(vn,nr,Ir){if(rr)return f1(6,1,vn,nr,Ir)}function x1(vn,nr,Ir){return rr?f1(7,1,vn,nr,Ir):0}function R1(vn,nr){if(rr)return f1(8,1,vn,nr)}function D1(vn,nr,Ir){if(rr)return f1(9,1,vn,nr,Ir)}function K1(vn,nr,Ir,Kr){if(rr)return f1(10,1,vn,nr,Ir,Kr)}function vv(vn,nr,Ir,Kr){if(rr)return f1(11,1,vn,nr,Ir,Kr)}function yv(vn,nr,Ir,Kr){if(rr)return f1(12,1,vn,nr,Ir,Kr)}function gv(vn){if(rr)return f1(13,1,vn)}function qv(vn,nr){if(rr)return f1(14,1,vn,nr)}function ov(vn,nr,Ir){if(rr)return f1(15,1,vn,nr,Ir)}function Lv(vn){vn>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(vt(),vn>>>2,vn).value.then(Rv),vn+=128,Atomics.store(vt(),vn>>>2,1))}st.__emscripten_thread_mailbox_await=Lv;var Rv=()=>{var vn=My();if(vn&&(Lv(vn),vn=cy,!Xr))try{if(vn(),!(0<r1))try{rr?fv(In):c1(In)}catch(nr){nr instanceof V0||nr=="unwind"||Ht(1,nr)}}catch(nr){nr instanceof V0||nr=="unwind"||Ht(1,nr)}};st.checkMailbox=Rv;var $y=[],Iv=vn=>vn%4===0&&(vn%100!==0||vn%400===0),Cv=[0,31,60,91,121,152,182,213,244,274,305,335],Gy=[0,31,59,90,120,151,181,212,243,273,304,334];function Kv(vn,nr,Ir,Kr,Sn,Go,g0,B0){return rr?f1(16,1,vn,nr,Ir,Kr,Sn,Go,g0,B0):-52}function _v(vn,nr,Ir,Kr,Sn,Go,g0){if(rr)return f1(17,1,vn,nr,Ir,Kr,Sn,Go,g0)}var Yv=[],xy={},Pv=()=>{if(!qy){var vn={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Lt||"./this.program"},nr;for(nr in xy)xy[nr]===void 0?delete vn[nr]:vn[nr]=xy[nr];var Ir=[];for(nr in vn)Ir.push(`${nr}=${vn[nr]}`);qy=Ir}return qy},qy;function sv(vn,nr){if(rr)return f1(18,1,vn,nr);vn>>>=0,nr>>>=0;var Ir=0;return Pv().forEach((Kr,Sn)=>{var Go=nr+Ir;for(Sn=b()[vn+4*Sn>>>2>>>0]=Go,Go=0;Go<Kr.length;++Go)at()[Sn++>>>0]=Kr.charCodeAt(Go);at()[Sn>>>0]=0,Ir+=Kr.length+1}),0}function wy(vn,nr){if(rr)return f1(19,1,vn,nr);vn>>>=0,nr>>>=0;var Ir=Pv();b()[vn>>>2>>>0]=Ir.length;var Kr=0;return Ir.forEach(Sn=>Kr+=Sn.length+1),b()[nr>>>2>>>0]=Kr,0}function uy(vn){return rr?f1(20,1,vn):52}function Sv(vn,nr,Ir,Kr){return rr?f1(21,1,vn,nr,Ir,Kr):52}function _y(vn,nr,Ir,Kr,Sn){return rr?f1(22,1,vn,nr,Ir,Kr,Sn):70}var lv=[null,[],[]];function bv(vn,nr,Ir,Kr){if(rr)return f1(23,1,vn,nr,Ir,Kr);nr>>>=0,Ir>>>=0,Kr>>>=0;for(var Sn=0,Go=0;Go<Ir;Go++){var g0=b()[nr>>>2>>>0],B0=b()[nr+4>>>2>>>0];nr+=8;for(var q0=0;q0<B0;q0++){var J0=$t()[g0+q0>>>0],X0=lv[vn];J0===0||J0===10?((vn===1?Qo:Mo)(Q0(X0,0)),X0.length=0):X0.push(J0)}Sn+=B0}return b()[Kr>>>2>>>0]=Sn,0}var ty=[31,29,31,30,31,30,31,31,30,31,30,31],Ky=[31,28,31,30,31,30,31,31,30,31,30,31];function Yy(vn){var nr=Array(T1(vn)+1);return G1(vn,nr,0,nr.length),nr}var Sy=(vn,nr)=>{at().set(vn,nr>>>0)};function l$(vn,nr,Ir,Kr){function Sn(D0,A0,o1){for(D0=typeof D0=="number"?D0.toString():D0||"";D0.length<A0;)D0=o1[0]+D0;return D0}function Go(D0,A0){return Sn(D0,A0,"0")}function g0(D0,A0){function o1(j1){return 0>j1?-1:0<j1?1:0}var a1;return(a1=o1(D0.getFullYear()-A0.getFullYear()))===0&&(a1=o1(D0.getMonth()-A0.getMonth()))===0&&(a1=o1(D0.getDate()-A0.getDate())),a1}function B0(D0){switch(D0.getDay()){case 0:return new Date(D0.getFullYear()-1,11,29);case 1:return D0;case 2:return new Date(D0.getFullYear(),0,3);case 3:return new Date(D0.getFullYear(),0,2);case 4:return new Date(D0.getFullYear(),0,1);case 5:return new Date(D0.getFullYear()-1,11,31);case 6:return new Date(D0.getFullYear()-1,11,30)}}function q0(D0){var A0=D0.Qa;for(D0=new Date(new Date(D0.Ra+1900,0,1).getTime());0<A0;){var o1=D0.getMonth(),a1=(Iv(D0.getFullYear())?ty:Ky)[o1];if(A0>a1-D0.getDate())A0-=a1-D0.getDate()+1,D0.setDate(1),11>o1?D0.setMonth(o1+1):(D0.setMonth(0),D0.setFullYear(D0.getFullYear()+1));else{D0.setDate(D0.getDate()+A0);break}}return o1=new Date(D0.getFullYear()+1,0,4),A0=B0(new Date(D0.getFullYear(),0,4)),o1=B0(o1),0>=g0(A0,D0)?0>=g0(o1,D0)?D0.getFullYear()+1:D0.getFullYear():D0.getFullYear()-1}vn>>>=0,nr>>>=0,Ir>>>=0,Kr>>>=0;var J0=b()[Kr+40>>>2>>>0];Kr={kb:vt()[Kr>>>2>>>0],jb:vt()[Kr+4>>>2>>>0],Sa:vt()[Kr+8>>>2>>>0],Wa:vt()[Kr+12>>>2>>>0],Ta:vt()[Kr+16>>>2>>>0],Ra:vt()[Kr+20>>>2>>>0],Ma:vt()[Kr+24>>>2>>>0],Qa:vt()[Kr+28>>>2>>>0],qb:vt()[Kr+32>>>2>>>0],ib:vt()[Kr+36>>>2>>>0],lb:J0?l1(J0):""},Ir=l1(Ir),J0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var X0 in J0)Ir=Ir.replace(new RegExp(X0,"g"),J0[X0]);var y1="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),L1="January February March April May June July August September October November December".split(" ");J0={"%a":D0=>y1[D0.Ma].substring(0,3),"%A":D0=>y1[D0.Ma],"%b":D0=>L1[D0.Ta].substring(0,3),"%B":D0=>L1[D0.Ta],"%C":D0=>Go((D0.Ra+1900)/100|0,2),"%d":D0=>Go(D0.Wa,2),"%e":D0=>Sn(D0.Wa,2," "),"%g":D0=>q0(D0).toString().substring(2),"%G":q0,"%H":D0=>Go(D0.Sa,2),"%I":D0=>(D0=D0.Sa,D0==0?D0=12:12<D0&&(D0-=12),Go(D0,2)),"%j":D0=>{for(var A0=0,o1=0;o1<=D0.Ta-1;A0+=(Iv(D0.Ra+1900)?ty:Ky)[o1++]);return Go(D0.Wa+A0,3)},"%m":D0=>Go(D0.Ta+1,2),"%M":D0=>Go(D0.jb,2),"%n":()=>`
`,"%p":D0=>0<=D0.Sa&&12>D0.Sa?"AM":"PM","%S":D0=>Go(D0.kb,2),"%t":()=>"	","%u":D0=>D0.Ma||7,"%U":D0=>Go(Math.floor((D0.Qa+7-D0.Ma)/7),2),"%V":D0=>{var A0=Math.floor((D0.Qa+7-(D0.Ma+6)%7)/7);if(2>=(D0.Ma+371-D0.Qa-2)%7&&A0++,A0)A0==53&&(o1=(D0.Ma+371-D0.Qa)%7,o1==4||o1==3&&Iv(D0.Ra)||(A0=1));else{A0=52;var o1=(D0.Ma+7-D0.Qa-1)%7;(o1==4||o1==5&&Iv(D0.Ra%400-1))&&A0++}return Go(A0,2)},"%w":D0=>D0.Ma,"%W":D0=>Go(Math.floor((D0.Qa+7-(D0.Ma+6)%7)/7),2),"%y":D0=>(D0.Ra+1900).toString().substring(2),"%Y":D0=>D0.Ra+1900,"%z":D0=>{D0=D0.ib;var A0=0<=D0;return D0=Math.abs(D0)/60,(A0?"+":"-")+("0000"+(D0/60*100+D0%60)).slice(-4)},"%Z":D0=>D0.lb,"%%":()=>"%"},Ir=Ir.replace(/%%/g,"\0\0");for(X0 in J0)Ir.includes(X0)&&(Ir=Ir.replace(new RegExp(X0,"g"),J0[X0](Kr)));return Ir=Ir.replace(/\0\0/g,"%"),X0=Yy(Ir),X0.length>nr?0:(Sy(X0,vn),X0.length-1)}t1.Va();var Xy=[q1,$1,F0,e1,m1,I0,p1,x1,R1,D1,K1,vv,yv,gv,qv,ov,Kv,_v,sv,wy,uy,Sv,_y,bv],Ey={b:function(vn,nr,Ir){throw vn>>>=0,new w0(vn).Va(nr>>>0,Ir>>>0),T0=vn,T0},L:function(vn){b1(vn>>>0,!Kt,1,!Gt,131072,!1),t1.$a()},j:function(vn){vn>>>=0,rr?postMessage({cmd:"cleanupThread",thread:vn}):t1.Ya(t1.La[vn])},H:U0,h:e1,S:m1,D:I0,F:p1,T:x1,Q:R1,J:D1,P:K1,n:vv,E:yv,B:gv,R:qv,C:ov,p:()=>1,z:function(vn,nr){vn>>>=0,vn==nr>>>0?setTimeout(Rv):rr?postMessage({targetThread:vn,cmd:"checkMailbox"}):(vn=t1.La[vn])&&vn.postMessage({cmd:"checkMailbox"})},I:function(vn,nr,Ir,Kr,Sn){nr>>>=0,Ir>>>=0,$y.length=Kr,Sn=Sn>>>0>>>3;for(var Go=0;Go<Kr;Go++)$y[Go]=pt()[Sn+Go>>>0];return vn=nr?E0[nr]:Xy[vn],t1.eb=Ir,Ir=vn(...$y),t1.eb=0,Ir},K:Lv,o:function(vn){tr&&t1.La[vn>>>0].ref()},s:function(vn,nr,Ir){vn=nr+2097152>>>0<4194305-!!vn?(vn>>>0)+4294967296*nr:NaN,Ir>>>=0,vn=new Date(1e3*vn),vt()[Ir>>>2>>>0]=vn.getUTCSeconds(),vt()[Ir+4>>>2>>>0]=vn.getUTCMinutes(),vt()[Ir+8>>>2>>>0]=vn.getUTCHours(),vt()[Ir+12>>>2>>>0]=vn.getUTCDate(),vt()[Ir+16>>>2>>>0]=vn.getUTCMonth(),vt()[Ir+20>>>2>>>0]=vn.getUTCFullYear()-1900,vt()[Ir+24>>>2>>>0]=vn.getUTCDay(),vn=(vn.getTime()-Date.UTC(vn.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,vt()[Ir+28>>>2>>>0]=vn},t:function(vn,nr,Ir){vn=nr+2097152>>>0<4194305-!!vn?(vn>>>0)+4294967296*nr:NaN,Ir>>>=0,vn=new Date(1e3*vn),vt()[Ir>>>2>>>0]=vn.getSeconds(),vt()[Ir+4>>>2>>>0]=vn.getMinutes(),vt()[Ir+8>>>2>>>0]=vn.getHours(),vt()[Ir+12>>>2>>>0]=vn.getDate(),vt()[Ir+16>>>2>>>0]=vn.getMonth(),vt()[Ir+20>>>2>>>0]=vn.getFullYear()-1900,vt()[Ir+24>>>2>>>0]=vn.getDay(),nr=(Iv(vn.getFullYear())?Cv:Gy)[vn.getMonth()]+vn.getDate()-1|0,vt()[Ir+28>>>2>>>0]=nr,vt()[Ir+36>>>2>>>0]=-(60*vn.getTimezoneOffset()),nr=new Date(vn.getFullYear(),6,1).getTimezoneOffset();var Kr=new Date(vn.getFullYear(),0,1).getTimezoneOffset();vn=(nr!=Kr&&vn.getTimezoneOffset()==Math.min(Kr,nr))|0,vt()[Ir+32>>>2>>>0]=vn},u:function(vn){vn>>>=0;var nr=new Date(vt()[vn+20>>>2>>>0]+1900,vt()[vn+16>>>2>>>0],vt()[vn+12>>>2>>>0],vt()[vn+8>>>2>>>0],vt()[vn+4>>>2>>>0],vt()[vn>>>2>>>0],0),Ir=vt()[vn+32>>>2>>>0],Kr=nr.getTimezoneOffset(),Sn=new Date(nr.getFullYear(),6,1).getTimezoneOffset(),Go=new Date(nr.getFullYear(),0,1).getTimezoneOffset(),g0=Math.min(Go,Sn);return 0>Ir?vt()[vn+32>>>2>>>0]=+(Sn!=Go&&g0==Kr):0<Ir!=(g0==Kr)&&(Sn=Math.max(Go,Sn),nr.setTime(nr.getTime()+6e4*((0<Ir?g0:Sn)-Kr))),vt()[vn+24>>>2>>>0]=nr.getDay(),Ir=(Iv(nr.getFullYear())?Cv:Gy)[nr.getMonth()]+nr.getDate()-1|0,vt()[vn+28>>>2>>>0]=Ir,vt()[vn>>>2>>>0]=nr.getSeconds(),vt()[vn+4>>>2>>>0]=nr.getMinutes(),vt()[vn+8>>>2>>>0]=nr.getHours(),vt()[vn+12>>>2>>>0]=nr.getDate(),vt()[vn+16>>>2>>>0]=nr.getMonth(),vt()[vn+20>>>2>>>0]=nr.getYear(),vn=nr.getTime(),vn=isNaN(vn)?-1:vn/1e3,ry((d0=vn,1<=+Math.abs(d0)?0<d0?+Math.floor(d0/4294967296)>>>0:~~+Math.ceil((d0-+(~~d0>>>0))/4294967296)>>>0:0)),vn>>>0},q:Kv,r:_v,y:function(vn,nr,Ir,Kr){vn>>>=0,nr>>>=0,Ir>>>=0,Kr>>>=0;var Sn=new Date().getFullYear(),Go=new Date(Sn,0,1),g0=new Date(Sn,6,1);Sn=Go.getTimezoneOffset();var B0=g0.getTimezoneOffset(),q0=Math.max(Sn,B0);b()[vn>>>2>>>0]=60*q0,vt()[nr>>>2>>>0]=+(Sn!=B0),vn=J0=>J0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],Go=vn(Go),g0=vn(g0),B0<Sn?(P1(Go,Ir,17),P1(g0,Kr,17)):(P1(Go,Kr,17),P1(g0,Ir,17))},c:()=>{f0("")},O:function(vn,nr,Ir){vn>>>=0,nr>>>=0,Ir>>>=0,Yv.length=0;for(var Kr;Kr=$t()[nr++>>>0];){var Sn=Kr!=105;Sn&=Kr!=112,Ir+=Sn&&Ir%8?4:0,Yv.push(Kr==112?b()[Ir>>>2>>>0]:Kr==105?vt()[Ir>>>2>>>0]:pt()[Ir>>>3>>>0]),Ir+=Sn?8:4}return E0[vn](...Yv)},k:()=>{},i:()=>Date.now(),U:()=>{throw r1+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>tr?(Cp$1(),ar(Lp$1)).cpus().length:navigator.hardwareConcurrency,x:function(vn){vn>>>=0;var nr=$t().length;if(vn<=nr||4294901760<vn)return!1;for(var Ir=1;4>=Ir;Ir*=2){var Kr=nr*(1+.2/Ir);Kr=Math.min(Kr,vn+100663296);var Sn=Math;Kr=Math.max(vn,Kr);e:{Sn=(Sn.min.call(Sn,4294901760,Kr+(65536-Kr%65536)%65536)-zo.buffer.byteLength+65535)/65536;try{zo.grow(Sn),i0();var Go=1;break e}catch{}Go=void 0}if(Go)return!0}return!1},M:sv,N:wy,G:c1,g:uy,m:Sv,v:_y,l:bv,a:zo||st.wasmMemory,w:l$,d:function(vn,nr,Ir,Kr){return l$(vn>>>0,nr>>>0,Ir>>>0,Kr>>>0)}},v1=function(){function vn(Ir,Kr){return v1=Ir.exports,v1=Ov(),t1.ab.push(v1.ya),_g=v1.za,p0.unshift(v1.V),e0=Kr,$0(),v1}var nr={a:Ey};if(S0++,st.instantiateWasm)try{return st.instantiateWasm(nr,vn)}catch(Ir){Mo(`Module.instantiateWasm callback failed with error: ${Ir}`),Tt(Ir)}return k0(nr,function(Ir){vn(Ir.instance,Ir.module)}).catch(Tt),{}}();st._OrtInit=(vn,nr)=>(st._OrtInit=v1.W)(vn,nr),st._OrtGetLastError=(vn,nr)=>(st._OrtGetLastError=v1.X)(vn,nr),st._OrtCreateSessionOptions=(vn,nr,Ir,Kr,Sn,Go,g0,B0,q0,J0)=>(st._OrtCreateSessionOptions=v1.Y)(vn,nr,Ir,Kr,Sn,Go,g0,B0,q0,J0),st._OrtAppendExecutionProvider=(vn,nr)=>(st._OrtAppendExecutionProvider=v1.Z)(vn,nr),st._OrtAddFreeDimensionOverride=(vn,nr,Ir)=>(st._OrtAddFreeDimensionOverride=v1._)(vn,nr,Ir),st._OrtAddSessionConfigEntry=(vn,nr,Ir)=>(st._OrtAddSessionConfigEntry=v1.$)(vn,nr,Ir),st._OrtReleaseSessionOptions=vn=>(st._OrtReleaseSessionOptions=v1.aa)(vn),st._OrtCreateSession=(vn,nr,Ir)=>(st._OrtCreateSession=v1.ba)(vn,nr,Ir),st._OrtReleaseSession=vn=>(st._OrtReleaseSession=v1.ca)(vn),st._OrtGetInputOutputCount=(vn,nr,Ir)=>(st._OrtGetInputOutputCount=v1.da)(vn,nr,Ir),st._OrtGetInputName=(vn,nr)=>(st._OrtGetInputName=v1.ea)(vn,nr),st._OrtGetOutputName=(vn,nr)=>(st._OrtGetOutputName=v1.fa)(vn,nr),st._OrtFree=vn=>(st._OrtFree=v1.ga)(vn),st._OrtCreateTensor=(vn,nr,Ir,Kr,Sn,Go)=>(st._OrtCreateTensor=v1.ha)(vn,nr,Ir,Kr,Sn,Go),st._OrtGetTensorData=(vn,nr,Ir,Kr,Sn)=>(st._OrtGetTensorData=v1.ia)(vn,nr,Ir,Kr,Sn),st._OrtReleaseTensor=vn=>(st._OrtReleaseTensor=v1.ja)(vn),st._OrtCreateRunOptions=(vn,nr,Ir,Kr)=>(st._OrtCreateRunOptions=v1.ka)(vn,nr,Ir,Kr),st._OrtAddRunConfigEntry=(vn,nr,Ir)=>(st._OrtAddRunConfigEntry=v1.la)(vn,nr,Ir),st._OrtReleaseRunOptions=vn=>(st._OrtReleaseRunOptions=v1.ma)(vn),st._OrtCreateBinding=vn=>(st._OrtCreateBinding=v1.na)(vn),st._OrtBindInput=(vn,nr,Ir)=>(st._OrtBindInput=v1.oa)(vn,nr,Ir),st._OrtBindOutput=(vn,nr,Ir,Kr)=>(st._OrtBindOutput=v1.pa)(vn,nr,Ir,Kr),st._OrtClearBoundOutputs=vn=>(st._OrtClearBoundOutputs=v1.qa)(vn),st._OrtReleaseBinding=vn=>(st._OrtReleaseBinding=v1.ra)(vn),st._OrtRunWithBinding=(vn,nr,Ir,Kr,Sn)=>(st._OrtRunWithBinding=v1.sa)(vn,nr,Ir,Kr,Sn),st._OrtRun=(vn,nr,Ir,Kr,Sn,Go,g0,B0)=>(st._OrtRun=v1.ta)(vn,nr,Ir,Kr,Sn,Go,g0,B0),st._OrtEndProfiling=vn=>(st._OrtEndProfiling=v1.ua)(vn);var My=st._pthread_self=()=>(My=st._pthread_self=v1.va)();st._malloc=vn=>(st._malloc=v1.wa)(vn),st._free=vn=>(st._free=v1.xa)(vn),st.__emscripten_tls_init=()=>(st.__emscripten_tls_init=v1.ya)();var b1=st.__emscripten_thread_init=(vn,nr,Ir,Kr,Sn,Go)=>(b1=st.__emscripten_thread_init=v1.Aa)(vn,nr,Ir,Kr,Sn,Go);st.__emscripten_thread_crashed=()=>(st.__emscripten_thread_crashed=v1.Ba)();var Ty=(vn,nr,Ir,Kr,Sn)=>(Ty=v1.Ca)(vn,nr,Ir,Kr,Sn),kv=vn=>(kv=v1.Da)(vn),fv=st.__emscripten_thread_exit=vn=>(fv=st.__emscripten_thread_exit=v1.Ea)(vn),cy=()=>(cy=v1.Fa)(),ry=vn=>(ry=v1.Ga)(vn),dy=(vn,nr)=>(dy=v1.Ha)(vn,nr),$v=vn=>($v=v1.Ia)(vn),Cy=vn=>(Cy=v1.Ja)(vn),Ev=()=>(Ev=v1.Ka)();function Ov(){var vn=v1;vn=Object.assign({},vn);var nr=Kr=>()=>Kr()>>>0,Ir=Kr=>Sn=>Kr(Sn)>>>0;return vn.va=nr(vn.va),vn.wa=Ir(vn.wa),vn.emscripten_main_runtime_thread_id=nr(vn.emscripten_main_runtime_thread_id),vn.Ja=Ir(vn.Ja),vn.Ka=nr(vn.Ka),vn}st.wasmMemory=zo,st.stackSave=()=>Ev(),st.stackRestore=vn=>$v(vn),st.stackAlloc=vn=>Cy(vn),st.keepRuntimeAlive=()=>0<r1,st.UTF8ToString=l1,st.stringToUTF8=P1,st.lengthBytesUTF8=T1,st.ExitStatus=V0,st.PThread=t1;var fy;R0=function vn(){fy||jv(),fy||(R0=vn)};function jv(){if(!(0<S0))if(rr)wt(st),rr||dv(p0),startWorker(st);else{if(st.preRun)for(typeof st.preRun=="function"&&(st.preRun=[st.preRun]);st.preRun.length;)m0.unshift(st.preRun.shift());dv(m0),0<S0||fy||(fy=!0,st.calledRun=!0,Xr||(rr||dv(p0),wt(st),rr||dv(x0)))}}return jv(),Ct}})();typeof a=="object"&&typeof s=="object"?s.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Bp$1=me((a,s)=>{s.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp$1,sg,oa$1,ia$1,So$1,Np$1,ug,lg,fg,Mp$1,De$1,Ur=L$1(()=>{Rp$1=Pp$1(),sg=kp$1(),ia$1=!1,So$1=!1,Np$1=!1,ug=a=>{if(a===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+a+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+a+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg=(a,s)=>a?s?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":s?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp$1=async a=>{if(ia$1)return Promise.resolve();if(So$1)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np$1)throw new Error("previous call to 'initializeWebAssembly()' failed.");So$1=!0;let s=a.initTimeout,c=a.numThreads,d=a.simd,et=ug(c),g=d&&lg(),at=a.wasmPaths,$t=typeof at=="string"?at:void 0,vt=fg(g,et),b=typeof at=="object"?at[vt]:void 0,pt=!1,st=[];if(s>0&&st.push(new Promise(wt=>{setTimeout(()=>{pt=!0,wt()},s)})),st.push(new Promise((wt,Tt)=>{let Ct=et?sg:Rp$1,jt={locateFile:(Lt,Ht)=>et&&Lt.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp$1()],{type:"text/javascript"})):Lt.endsWith(".wasm")?b||($t??Ht)+vt:Ht+Lt};if(et)if(jt.numThreads=c,typeof Blob>"u")jt.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let Lt=`var ortWasmThreaded=${Ct.toString()};`;jt.mainScriptUrlOrBlob=new Blob([Lt],{type:"text/javascript"})}Ct(jt).then(Lt=>{So$1=!1,ia$1=!0,oa$1=Lt,wt()},Lt=>{So$1=!1,Np$1=!0,Tt(Lt)})})),await Promise.race(st),pt)throw new Error(`WebAssembly backend initializing failed due to timeout: ${s}ms`)},De$1=()=>{if(ia$1&&oa$1)return oa$1;throw new Error("WebAssembly is not initialized yet.")}}),ve,bn,_e$1,Ao=L$1(()=>{Ur(),ve=(a,s)=>{let c=De$1(),d=c.lengthBytesUTF8(a)+1,et=c._malloc(d);return c.stringToUTF8(a,et,d),s.push(et),et},bn=(a,s,c,d)=>{if(typeof a=="object"&&a!==null){if(c.has(a))throw new Error("Circular reference in options");c.add(a)}Object.entries(a).forEach(([et,g])=>{let at=s?s+et:et;if(typeof g=="object")bn(g,at+".",c,d);else if(typeof g=="string"||typeof g=="number")d(at,g.toString());else if(typeof g=="boolean")d(at,g?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof g}`)})},_e$1=a=>{let s=De$1(),c=s.stackSave();try{let d=s.stackAlloc(8);s._OrtGetLastError(d,d+4);let et=s.HEAP32[d/4],g=s.HEAPU32[d/4+1],at=g?s.UTF8ToString(g):"";throw new Error(`${a} ERROR_CODE: ${et}, ERROR_MESSAGE: ${at}`)}finally{s.stackRestore(c)}}}),Gp$1,Up$1=L$1(()=>{Ur(),Ao(),Gp$1=a=>{let s=De$1(),c=0,d=[],et=a||{};try{if((a==null?void 0:a.logSeverityLevel)===void 0)et.logSeverityLevel=2;else if(typeof a.logSeverityLevel!="number"||!Number.isInteger(a.logSeverityLevel)||a.logSeverityLevel<0||a.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${a.logSeverityLevel}`);if((a==null?void 0:a.logVerbosityLevel)===void 0)et.logVerbosityLevel=0;else if(typeof a.logVerbosityLevel!="number"||!Number.isInteger(a.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${a.logVerbosityLevel}`);(a==null?void 0:a.terminate)===void 0&&(et.terminate=!1);let g=0;return(a==null?void 0:a.tag)!==void 0&&(g=ve(a.tag,d)),c=s._OrtCreateRunOptions(et.logSeverityLevel,et.logVerbosityLevel,!!et.terminate,g),c===0&&_e$1("Can't create run options."),(a==null?void 0:a.extra)!==void 0&&bn(a.extra,"",new WeakSet,(at,$t)=>{let vt=ve(at,d),b=ve($t,d);s._OrtAddRunConfigEntry(c,vt,b)!==0&&_e$1(`Can't set a run config entry: ${at} - ${$t}.`)}),[c,d]}catch(g){throw c!==0&&s._OrtReleaseRunOptions(c),d.forEach(at=>s._free(at)),g}}}),cg,pg,dg,hg,zp$1,Vp$1=L$1(()=>{Ur(),Ao(),cg=a=>{switch(a){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${a}`)}},pg=a=>{switch(a){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${a}`)}},dg=a=>{a.extra||(a.extra={}),a.extra.session||(a.extra.session={});let s=a.extra.session;s.use_ort_model_bytes_directly||(s.use_ort_model_bytes_directly="1"),a.executionProviders&&a.executionProviders.some(c=>(typeof c=="string"?c:c.name)==="webgpu")&&(a.enableMemPattern=!1)},hg=(a,s,c)=>{for(let d of s){let et=typeof d=="string"?d:d.name;switch(et){case"webnn":if(et="WEBNN",typeof d!="string"){let at=d;if(at!=null&&at.deviceType){let $t=ve("deviceType",c),vt=ve(at.deviceType,c);De$1()._OrtAddSessionConfigEntry(a,$t,vt)!==0&&_e$1(`Can't set a session config entry: 'deviceType' - ${at.deviceType}.`)}if(at!=null&&at.numThreads){let $t=at.numThreads;(typeof $t!="number"||!Number.isInteger($t)||$t<0)&&($t=0);let vt=ve("numThreads",c),b=ve($t.toString(),c);De$1()._OrtAddSessionConfigEntry(a,vt,b)!==0&&_e$1(`Can't set a session config entry: 'numThreads' - ${at.numThreads}.`)}if(at!=null&&at.powerPreference){let $t=ve("powerPreference",c),vt=ve(at.powerPreference,c);De$1()._OrtAddSessionConfigEntry(a,$t,vt)!==0&&_e$1(`Can't set a session config entry: 'powerPreference' - ${at.powerPreference}.`)}}break;case"webgpu":if(et="JS",typeof d!="string"){let at=d;if(at!=null&&at.preferredLayout){if(at.preferredLayout!=="NCHW"&&at.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${at.preferredLayout}`);let $t=ve("preferredLayout",c),vt=ve(at.preferredLayout,c);De$1()._OrtAddSessionConfigEntry(a,$t,vt)!==0&&_e$1(`Can't set a session config entry: 'preferredLayout' - ${at.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${et}`)}let g=ve(et,c);De$1()._OrtAppendExecutionProvider(a,g)!==0&&_e$1(`Can't append execution provider: ${et}.`)}},zp$1=a=>{let s=De$1(),c=0,d=[],et=a||{};dg(et);try{let g=cg(et.graphOptimizationLevel??"all"),at=pg(et.executionMode??"sequential"),$t=typeof et.logId=="string"?ve(et.logId,d):0,vt=et.logSeverityLevel??2;if(!Number.isInteger(vt)||vt<0||vt>4)throw new Error(`log serverity level is not valid: ${vt}`);let b=et.logVerbosityLevel??0;if(!Number.isInteger(b)||b<0||b>4)throw new Error(`log verbosity level is not valid: ${b}`);let pt=typeof et.optimizedModelFilePath=="string"?ve(et.optimizedModelFilePath,d):0;if(c=s._OrtCreateSessionOptions(g,!!et.enableCpuMemArena,!!et.enableMemPattern,at,!!et.enableProfiling,0,$t,vt,b,pt),c===0&&_e$1("Can't create session options."),et.executionProviders&&hg(c,et.executionProviders,d),et.enableGraphCapture!==void 0){if(typeof et.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${et.enableGraphCapture}`);let st=ve("enableGraphCapture",d),wt=ve(et.enableGraphCapture.toString(),d);s._OrtAddSessionConfigEntry(c,st,wt)!==0&&_e$1(`Can't set a session config entry: 'enableGraphCapture' - ${et.enableGraphCapture}.`)}if(et.freeDimensionOverrides)for(let[st,wt]of Object.entries(et.freeDimensionOverrides)){if(typeof st!="string")throw new Error(`free dimension override name must be a string: ${st}`);if(typeof wt!="number"||!Number.isInteger(wt)||wt<0)throw new Error(`free dimension override value must be a non-negative integer: ${wt}`);let Tt=ve(st,d);s._OrtAddFreeDimensionOverride(c,Tt,wt)!==0&&_e$1(`Can't set a free dimension override: ${st} - ${wt}.`)}return et.extra!==void 0&&bn(et.extra,"",new WeakSet,(st,wt)=>{let Tt=ve(st,d),Ct=ve(wt,d);s._OrtAddSessionConfigEntry(c,Tt,Ct)!==0&&_e$1(`Can't set a session config entry: ${st} - ${wt}.`)}),[c,d]}catch(g){throw c!==0&&s._OrtReleaseSessionOptions(c),d.forEach(at=>s._free(at)),g}}}),aa$1,Wp$1,sa$1,Hp$1,qp$1,Po,jp$1,ua$1=L$1(()=>{aa$1=a=>{switch(a){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${a}`)}},Wp$1=a=>{switch(a){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${a}`)}},sa$1=a=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][a],Hp$1=a=>{switch(a){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${a}`)}},qp$1=a=>{switch(a){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${a}`)}},Po=a=>a==="float32"||a==="float16"||a==="int32"||a==="int64"||a==="uint32"||a==="uint8"||a==="bool",jp$1=a=>{switch(a){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${a}`)}}}),gn,la$1=L$1(()=>{gn=async a=>{if(typeof a=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(a))}catch(s){if(s.code==="ERR_FS_FILE_TOO_LARGE"){let c=(void 0)(a),d=[];for await(let et of c)d.push(et);return new Uint8Array(Buffer.concat(d))}throw s}else{let s=await fetch(a);if(!s.ok)throw new Error(`failed to load external data file: ${a}`);let c=s.headers.get("Content-Length"),d=c?parseInt(c,10):0;if(d<1073741824)return new Uint8Array(await s.arrayBuffer());{if(!s.body)throw new Error(`failed to load external data file: ${a}, no response body.`);let et=s.body.getReader(),g;try{g=new ArrayBuffer(d)}catch($t){if($t instanceof RangeError){let vt=Math.ceil(d/65536);g=new WebAssembly.Memory({initial:vt,maximum:vt}).buffer}else throw $t}let at=0;for(;;){let{done:$t,value:vt}=await et.read();if($t)break;let b=vt.byteLength;new Uint8Array(g,at,b).set(vt),at+=b}return new Uint8Array(g,0,d)}}else return a instanceof Blob?new Uint8Array(await a.arrayBuffer()):a instanceof Uint8Array?a:new Uint8Array(a)}}),mg,Xp$1,Kp$1,zr$1,bg,fa$1,Jp$1,Zp$1,Yp$1,Qp$1,ed$1,td$1,rd$1=L$1(()=>{Up$1(),Vp$1(),ua$1(),Ur(),Ao(),la$1(),mg=(a,s)=>{De$1()._OrtInit(a,s)!==0&&_e$1("Can't initialize onnxruntime.")},Xp$1=async a=>{mg(a.wasm.numThreads,qp$1(a.logLevel))},Kp$1=async(a,s)=>{},zr$1=new Map,bg=a=>{let s=De$1(),c=s.stackSave();try{let d=s.stackAlloc(8);return s._OrtGetInputOutputCount(a,d,d+4)!==0&&_e$1("Can't get session input/output count."),[s.HEAP32[d/4],s.HEAP32[d/4+1]]}finally{s.stackRestore(c)}},fa$1=a=>{let s=De$1(),c=s._malloc(a.byteLength);if(c===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${a.byteLength}.`);return s.HEAPU8.set(a,c),[c,a.byteLength]},Jp$1=async(a,s)=>{var pt;let c,d,et=De$1();Array.isArray(a)?[c,d]=a:a.buffer===et.HEAPU8.buffer?[c,d]=[a.byteOffset,a.byteLength]:[c,d]=fa$1(a);let g=0,at=0,$t=[],vt=[],b=[];try{if([at,$t]=zp$1(s),(s==null?void 0:s.externalData)&&et.mountExternalData){let Gt=[];for(let Kt of s.externalData){let tr=typeof Kt=="string"?Kt:Kt.path;Gt.push(gn(typeof Kt=="string"?Kt:Kt.data).then(rr=>{et.mountExternalData(tr,rr)}))}await Promise.all(Gt)}g=await et._OrtCreateSession(c,d,at),g===0&&_e$1("Can't create a session.");let[st,wt]=bg(g),Tt=!!(s!=null&&s.enableGraphCapture),Ct=[],jt=[],Lt=[];for(let Gt=0;Gt<st;Gt++){let Kt=et._OrtGetInputName(g,Gt);Kt===0&&_e$1("Can't get an input name."),vt.push(Kt),Ct.push(et.UTF8ToString(Kt))}for(let Gt=0;Gt<wt;Gt++){let Kt=et._OrtGetOutputName(g,Gt);Kt===0&&_e$1("Can't get an output name."),b.push(Kt);let tr=et.UTF8ToString(Kt);jt.push(tr)}return zr$1.set(g,[g,vt,b,null,Tt,!1]),[g,Ct,jt]}catch(st){throw vt.forEach(wt=>et._OrtFree(wt)),b.forEach(wt=>et._OrtFree(wt)),g!==0&&et._OrtReleaseSession(g),st}finally{et._free(c),at!==0&&et._OrtReleaseSessionOptions(at),$t.forEach(st=>et._free(st)),(pt=et.unmountExternalData)==null||pt.call(et)}},Zp$1=a=>{var vt;let s=De$1(),c=zr$1.get(a);if(!c)throw new Error(`cannot release session. invalid session id: ${a}`);let[d,et,g,at,$t]=c;at&&($t&&s._OrtClearBoundOutputs(at.handle),s._OrtReleaseBinding(at.handle)),(vt=s.jsepOnReleaseSession)==null||vt.call(s,a),et.forEach(b=>s._OrtFree(b)),g.forEach(b=>s._OrtFree(b)),s._OrtReleaseSession(d),zr$1.delete(a)},Yp$1=(a,s,c,d,et,g=!1)=>{if(!a){s.push(0);return}let at=De$1(),$t=a[0],vt=a[1],b=a[3],pt,st;if($t==="string"&&b==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(g&&b!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${et} when enableGraphCapture is true.`);if(b==="gpu-buffer"){let Ct=a[2].gpuBuffer,jt=sa$1(aa$1($t));st=vt.reduce((Ht,Gt)=>Ht*Gt,1)*jt;let Lt=at.jsepRegisterBuffer;if(!Lt)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');pt=Lt(d,et,Ct,st)}else{let Ct=a[2];if(Array.isArray(Ct)){st=4*Ct.length,pt=at._malloc(st),c.push(pt);let jt=pt/4;for(let Lt=0;Lt<Ct.length;Lt++){if(typeof Ct[Lt]!="string")throw new TypeError(`tensor data at index ${Lt} is not a string`);at.HEAPU32[jt++]=ve(Ct[Lt],c)}}else st=Ct.byteLength,pt=at._malloc(st),c.push(pt),at.HEAPU8.set(new Uint8Array(Ct.buffer,Ct.byteOffset,st),pt)}let wt=at.stackSave(),Tt=at.stackAlloc(4*vt.length);try{let Ct=Tt/4;vt.forEach(Lt=>at.HEAP32[Ct++]=Lt);let jt=at._OrtCreateTensor(aa$1($t),pt,st,Tt,vt.length,jp$1(b));jt===0&&_e$1(`Can't create tensor for input/output. session=${d}, index=${et}.`),s.push(jt)}finally{at.stackRestore(wt)}},Qp$1=async(a,s,c,d,et,g)=>{var An;let at=De$1(),$t=zr$1.get(a);if(!$t)throw new Error(`cannot run inference. invalid session id: ${a}`);let vt=$t[0],b=$t[1],pt=$t[2],st=$t[3],wt=$t[4];$t[5];let Tt=s.length,Ct=d.length,jt=0,Lt=[],Ht=[],Gt=[],Kt=[],tr=at.stackSave(),rr=at.stackAlloc(Tt*4),Lr=at.stackAlloc(Tt*4),jr=at.stackAlloc(Ct*4),Yr=at.stackAlloc(Ct*4);try{[jt,Lt]=Gp$1(g);for(let Mo=0;Mo<Tt;Mo++)Yp$1(c[Mo],Ht,Kt,a,s[Mo],wt);for(let Mo=0;Mo<Ct;Mo++)Yp$1(et[Mo],Gt,Kt,a,Tt+d[Mo],wt);let No=rr/4,o0=Lr/4,t0=jr/4,c0=Yr/4;for(let Mo=0;Mo<Tt;Mo++)at.HEAPU32[No++]=Ht[Mo],at.HEAPU32[o0++]=b[s[Mo]];for(let Mo=0;Mo<Ct;Mo++)at.HEAPU32[t0++]=Gt[Mo],at.HEAPU32[c0++]=pt[d[Mo]];(An=at.jsepOnRunStart)==null||An.call(at,vt);let n0;n0=await at._OrtRun(vt,Lr,rr,Tt,Yr,Ct,jr,jt),n0!==0&&_e$1("failed to call OrtRun().");let Qo=[];for(let Mo=0;Mo<Ct;Mo++){let zo=at.HEAPU32[jr/4+Mo];if(zo===Gt[Mo]){Qo.push(et[Mo]);continue}let e0=at.stackSave(),Xr=at.stackAlloc(4*4),In=!1,Zr,wn=0;try{at._OrtGetTensorData(zo,Xr,Xr+4,Xr+8,Xr+12)!==0&&_e$1(`Can't access output tensor data on index ${Mo}.`);let r0=Xr/4,ko=at.HEAPU32[r0++];wn=at.HEAPU32[r0++];let _n=at.HEAPU32[r0++],i0=at.HEAPU32[r0++],a0=[];for(let x0=0;x0<i0;x0++)a0.push(at.HEAPU32[_n/4+x0]);at._OrtFree(_n);let m0=a0.reduce((x0,S0)=>x0*S0,1);Zr=Wp$1(ko);let p0=st==null?void 0:st.outputPreferredLocations[d[Mo]];if(Zr==="string"){if(p0==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let x0=[],S0=wn/4;for(let R0=0;R0<m0;R0++){let $0=at.HEAPU32[S0++],f0=R0===m0-1?void 0:at.HEAPU32[S0]-$0;x0.push(at.UTF8ToString($0,f0))}Qo.push([Zr,a0,x0,"cpu"])}else if(p0==="gpu-buffer"&&m0>0){let x0=at.jsepGetBuffer;if(!x0)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let S0=x0(wn),R0=sa$1(ko);if(R0===void 0||!Po(Zr))throw new Error(`Unsupported data type: ${Zr}`);In=!0,Qo.push([Zr,a0,{gpuBuffer:S0,download:at.jsepCreateDownloader(S0,m0*R0,Zr),dispose:()=>{at._OrtReleaseTensor(zo)}},"gpu-buffer"])}else{let x0=Hp$1(Zr),S0=new x0(m0);new Uint8Array(S0.buffer,S0.byteOffset,S0.byteLength).set(at.HEAPU8.subarray(wn,wn+S0.byteLength)),Qo.push([Zr,a0,S0,"cpu"])}}finally{at.stackRestore(e0),Zr==="string"&&wn&&at._free(wn),In||at._OrtReleaseTensor(zo)}}return st&&!wt&&(at._OrtClearBoundOutputs(st.handle),zr$1.set(a,[vt,b,pt,st,wt,!1])),Qo}finally{at.stackRestore(tr),Ht.forEach(No=>at._OrtReleaseTensor(No)),Gt.forEach(No=>at._OrtReleaseTensor(No)),Kt.forEach(No=>at._free(No)),jt!==0&&at._OrtReleaseRunOptions(jt),Lt.forEach(No=>at._free(No))}},ed$1=a=>{let s=De$1(),c=zr$1.get(a);if(!c)throw new Error("invalid session id");let d=c[0],et=s._OrtEndProfiling(d);et===0&&_e$1("Can't get an profile file name."),s._OrtFree(et)},td$1=a=>{let s=[];for(let c of a){let d=c[2];!Array.isArray(d)&&"buffer"in d&&s.push(d.buffer)}return s}}),nd$1=me((a,s)=>{s.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r,gt$1,yn,Do,Lo,ca$1,pa$1,Vr,Wr,Tg,Eo,od$1,id$1,ad$1,sd$1,ud$1,ld$1,fd$1,da$1=L$1(()=>{var a;Ot$1(),rd$1(),Ur(),_r=()=>!!Z.wasm.proxy&&typeof document<"u",yn=!1,Do=!1,Lo=!1,pa$1=new Map,Vr=(s,c)=>{let d=pa$1.get(s);d?d.push(c):pa$1.set(s,[c])},Wr=()=>{if(yn||!Do||Lo||!gt$1)throw new Error("worker not ready")},Tg=s=>{switch(s.data.type){case"init-wasm":yn=!1,s.data.err?(Lo=!0,ca$1[1](s.data.err)):(Do=!0,ca$1[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let c=pa$1.get(s.data.type);s.data.err?c.shift()[1](s.data.err):c.shift()[0](s.data.out);break}}},Eo=typeof document<"u"?(a=document==null?void 0:document.currentScript)==null?void 0:a.src:void 0,od$1=async()=>{if(!Do){if(yn)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo)throw new Error("previous call to 'initWasm()' failed.");if(yn=!0,_r())return Z.wasm.wasmPaths===void 0&&Eo&&Eo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Eo.substr(0,+Eo.lastIndexOf("/")+1)),new Promise((s,c)=>{gt$1==null||gt$1.terminate();let d=URL.createObjectURL(new Blob([nd$1()],{type:"text/javascript"}));gt$1=new Worker(d,{name:"ort-wasm-proxy-worker"}),gt$1.onerror=g=>c(g),gt$1.onmessage=Tg,URL.revokeObjectURL(d),ca$1=[s,c];let et={type:"init-wasm",in:Z};gt$1.postMessage(et)});try{await Mp$1(Z.wasm),await Xp$1(Z),Do=!0}catch(s){throw Lo=!0,s}finally{yn=!1}}},id$1=async s=>{if(_r())return Wr(),new Promise((c,d)=>{Vr("init-ep",[c,d]);let et={type:"init-ep",in:{epName:s,env:Z}};gt$1.postMessage(et)});await Kp$1(Z,s)},ad$1=async s=>_r()?(Wr(),new Promise((c,d)=>{Vr("copy-from",[c,d]);let et={type:"copy-from",in:{buffer:s}};gt$1.postMessage(et,[s.buffer])})):fa$1(s),sd$1=async(s,c)=>{if(_r()){if(c!=null&&c.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((d,et)=>{Vr("create",[d,et]);let g={type:"create",in:{model:s,options:{...c}}},at=[];s instanceof Uint8Array&&at.push(s.buffer),gt$1.postMessage(g,at)})}else return Jp$1(s,c)},ud$1=async s=>{if(_r())return Wr(),new Promise((c,d)=>{Vr("release",[c,d]);let et={type:"release",in:s};gt$1.postMessage(et)});Zp$1(s)},ld$1=async(s,c,d,et,g,at)=>{if(_r()){if(d.some($t=>$t[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(g.some($t=>$t))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise(($t,vt)=>{Vr("run",[$t,vt]);let b=d,pt={type:"run",in:{sessionId:s,inputIndices:c,inputs:b,outputIndices:et,options:at}};gt$1.postMessage(pt,td$1(b))})}else return Qp$1(s,c,d,et,g,at)},fd$1=async s=>{if(_r())return Wr(),new Promise((c,d)=>{Vr("end-profiling",[c,d]);let et={type:"end-profiling",in:s};gt$1.postMessage(et)});ed$1(s)}}),cd$1,xg,Co$1,pd$1=L$1(()=>{Ot$1(),da$1(),ua$1(),la$1(),cd$1=(a,s)=>{switch(a.location){case"cpu":return[a.type,a.dims,a.data,"cpu"];case"gpu-buffer":return[a.type,a.dims,{gpuBuffer:a.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${a.location} for ${s()}`)}},xg=a=>{switch(a[3]){case"cpu":return new Me(a[0],a[2],a[1]);case"gpu-buffer":{let s=a[0];if(!Po(s))throw new Error(`not supported data type: ${s} for deserializing GPU tensor`);let{gpuBuffer:c,download:d,dispose:et}=a[2];return Me.fromGpuBuffer(c,{dataType:s,dims:a[1],download:d,dispose:et})}default:throw new Error(`invalid data location: ${a[3]}`)}},Co$1=class{async fetchModelAndCopyToWasmMemory(a){return ad$1(await gn(a))}async loadModel(a,s){lr$1();let c;typeof a=="string"?typeof process<"u"&&process.versions&&process.versions.node?c=await gn(a):c=await this.fetchModelAndCopyToWasmMemory(a):c=a,[this.sessionId,this.inputNames,this.outputNames]=await sd$1(c,s),fr$1()}async dispose(){return ud$1(this.sessionId)}async run(a,s,c){lr$1();let d=[],et=[];Object.entries(a).forEach(st=>{let wt=st[0],Tt=st[1],Ct=this.inputNames.indexOf(wt);if(Ct===-1)throw new Error(`invalid input '${wt}'`);d.push(Tt),et.push(Ct)});let g=[],at=[];Object.entries(s).forEach(st=>{let wt=st[0],Tt=st[1],Ct=this.outputNames.indexOf(wt);if(Ct===-1)throw new Error(`invalid output '${wt}'`);g.push(Tt),at.push(Ct)});let $t=d.map((st,wt)=>cd$1(st,()=>`input "${this.inputNames[et[wt]]}"`)),vt=g.map((st,wt)=>st?cd$1(st,()=>`output "${this.outputNames[at[wt]]}"`):null),b=await ld$1(this.sessionId,et,$t,at,vt,c),pt={};for(let st=0;st<b.length;st++)pt[this.outputNames[at[st]]]=g[st]??xg(b[st]);return fr$1(),pt}startProfiling(){}endProfiling(){fd$1(this.sessionId)}}}),wg,Fo,dd$1=L$1(()=>{Ot$1(),da$1(),pd$1(),wg=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let a=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},Fo=class{async init(a){wg(),await od$1(),await id$1(a)}async createInferenceSessionHandler(a,s){let c=new Co$1;return await c.loadModel(a,s),Promise.resolve(c)}}}),hd$1={};Sr(hd$1,{wasmBackend:()=>vg});var vg,md$1=L$1(()=>{dd$1(),vg=new Fo});Ot$1();Ot$1();Ot$1();var Ts$1="1.18.0",jO=qo;{let a=(Op$1(),ar(_p$1)).onnxjsBackend;Pr$1("webgl",a,-10)}{let a=(md$1(),ar(hd$1)).wasmBackend;Pr$1("cpu",a,10),Pr$1("wasm",a,10)}Object.defineProperty(Z.versions,"web",{value:Ts$1,enumerable:!0});/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/const ort_cpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return Pd$1},get TRACE(){return ls$1},get TRACE_FUNC_BEGIN(){return lr$1},get TRACE_FUNC_END(){return fr$1},get Tensor(){return Me},get TrainingSession(){return Dd$1},default:jO,get env(){return Z},get registerBackend(){return Pr$1}},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var Oi=Object.defineProperty,nc=Object.getOwnPropertyDescriptor,ic=Object.getOwnPropertyNames,oc=Object.prototype.hasOwnProperty,j=(a,s)=>()=>(a&&(s=a(a=0)),s),Er=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),kr=(a,s)=>{for(var c in s)Oi(a,c,{get:s[c],enumerable:!0})},ac=(a,s,c,d)=>{if(s&&typeof s=="object"||typeof s=="function")for(let et of ic(s))!oc.call(a,et)&&et!==c&&Oi(a,et,{get:()=>s[et],enumerable:!(d=nc(s,et))||d.enumerable});return a},sr=a=>ac(Oi({},"__esModule",{value:!0}),a),kn,ur,lr,sc,On,Pn=j(()=>{kn=new Map,ur=[],lr=(a,s,c)=>{if(s&&typeof s.init=="function"&&typeof s.createInferenceSessionHandler=="function"){let d=kn.get(a);if(d===void 0)kn.set(a,{backend:s,priority:c});else{if(d.priority>c)return;if(d.priority===c&&d.backend!==s)throw new Error(`cannot register backend "${a}" using priority ${c}`)}if(c>=0){let et=ur.indexOf(a);et!==-1&&ur.splice(et,1);for(let g=0;g<ur.length;g++)if(kn.get(ur[g]).priority<=c){ur.splice(g,0,a);return}ur.push(a)}return}throw new TypeError("not a valid backend")},sc=async a=>{let s=kn.get(a);if(!s)return"backend not found.";if(s.initialized)return s.backend;if(s.aborted)return s.error;{let c=!!s.initPromise;try{return c||(s.initPromise=s.backend.init(a)),await s.initPromise,s.initialized=!0,s.backend}catch(d){return c||(s.error=`${d}`,s.aborted=!0),s.error}finally{delete s.initPromise}}},On=async a=>{let s=a.executionProviders||[],c=s.map(vt=>typeof vt=="string"?vt:vt.name),d=c.length===0?ur:c,et,g=[],at=new Set;for(let vt of d){let b=await sc(vt);typeof b=="string"?g.push({name:vt,err:b}):(et||(et=b),et===b&&at.add(vt))}if(!et)throw new Error(`no available backend found. ERR: ${g.map(vt=>`[${vt.name}] ${vt.err}`).join(", ")}`);for(let{name:vt,err:b}of g)c.includes(vt)&&console.warn(`removing requested execution provider "${vt}" from session options because it is not available: ${b}`);let $t=s.filter(vt=>at.has(typeof vt=="string"?vt:vt.name));return[et,new Proxy(a,{get:(vt,b)=>b==="executionProviders"?$t:Reflect.get(vt,b)})]}}),ra=j(()=>{Pn()}),na,ia=j(()=>{na="1.18.0"}),oa,gt,Pi=j(()=>{ia(),oa="warning",gt={wasm:{},webgl:{},webgpu:{},versions:{common:na},set logLevel(a){if(a!==void 0){if(typeof a!="string"||["verbose","info","warning","error","fatal"].indexOf(a)===-1)throw new Error(`Unsupported logging level: ${a}`);oa=a}},get logLevel(){return oa}},Object.defineProperty(gt,"logLevel",{enumerable:!0})}),ke,aa=j(()=>{Pi(),ke=gt}),sa,ua,la=j(()=>{sa=(a,s)=>{let c=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);c.width=a.dims[3],c.height=a.dims[2];let d=c.getContext("2d");if(d!=null){let et,g;(s==null?void 0:s.tensorLayout)!==void 0&&s.tensorLayout==="NHWC"?(et=a.dims[2],g=a.dims[3]):(et=a.dims[3],g=a.dims[2]);let at=(s==null?void 0:s.format)!==void 0?s.format:"RGB",$t=s==null?void 0:s.norm,vt,b;$t===void 0||$t.mean===void 0?vt=[255,255,255,255]:typeof $t.mean=="number"?vt=[$t.mean,$t.mean,$t.mean,$t.mean]:(vt=[$t.mean[0],$t.mean[1],$t.mean[2],0],$t.mean[3]!==void 0&&(vt[3]=$t.mean[3])),$t===void 0||$t.bias===void 0?b=[0,0,0,0]:typeof $t.bias=="number"?b=[$t.bias,$t.bias,$t.bias,$t.bias]:(b=[$t.bias[0],$t.bias[1],$t.bias[2],0],$t.bias[3]!==void 0&&(b[3]=$t.bias[3]));let pt=g*et,st=0,wt=pt,Tt=pt*2,Ct=-1;at==="RGBA"?(st=0,wt=pt,Tt=pt*2,Ct=pt*3):at==="RGB"?(st=0,wt=pt,Tt=pt*2):at==="RBG"&&(st=0,Tt=pt,wt=pt*2);for(let jt=0;jt<g;jt++)for(let Lt=0;Lt<et;Lt++){let Ht=(a.data[st++]-b[0])*vt[0],Gt=(a.data[wt++]-b[1])*vt[1],Kt=(a.data[Tt++]-b[2])*vt[2],tr=Ct===-1?255:(a.data[Ct++]-b[3])*vt[3];d.fillStyle="rgba("+Ht+","+Gt+","+Kt+","+tr+")",d.fillRect(Lt,jt,1,1)}if("toDataURL"in c)return c.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ua=(a,s)=>{let c=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),d;if(c!=null){let et,g,at;(s==null?void 0:s.tensorLayout)!==void 0&&s.tensorLayout==="NHWC"?(et=a.dims[2],g=a.dims[1],at=a.dims[3]):(et=a.dims[3],g=a.dims[2],at=a.dims[1]);let $t=s!==void 0&&s.format!==void 0?s.format:"RGB",vt=s==null?void 0:s.norm,b,pt;vt===void 0||vt.mean===void 0?b=[255,255,255,255]:typeof vt.mean=="number"?b=[vt.mean,vt.mean,vt.mean,vt.mean]:(b=[vt.mean[0],vt.mean[1],vt.mean[2],255],vt.mean[3]!==void 0&&(b[3]=vt.mean[3])),vt===void 0||vt.bias===void 0?pt=[0,0,0,0]:typeof vt.bias=="number"?pt=[vt.bias,vt.bias,vt.bias,vt.bias]:(pt=[vt.bias[0],vt.bias[1],vt.bias[2],0],vt.bias[3]!==void 0&&(pt[3]=vt.bias[3]));let st=g*et;if(s!==void 0&&(s.format!==void 0&&at===4&&s.format!=="RGBA"||at===3&&s.format!=="RGB"&&s.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let wt=4,Tt=0,Ct=1,jt=2,Lt=3,Ht=0,Gt=st,Kt=st*2,tr=-1;$t==="RGBA"?(Ht=0,Gt=st,Kt=st*2,tr=st*3):$t==="RGB"?(Ht=0,Gt=st,Kt=st*2):$t==="RBG"&&(Ht=0,Kt=st,Gt=st*2),d=c.createImageData(et,g);for(let rr=0;rr<g*et;Tt+=wt,Ct+=wt,jt+=wt,Lt+=wt,rr++)d.data[Tt]=(a.data[Ht++]-pt[0])*b[0],d.data[Ct]=(a.data[Gt++]-pt[1])*b[1],d.data[jt]=(a.data[Kt++]-pt[2])*b[2],d.data[Lt]=tr===-1?255:(a.data[tr++]-pt[3])*b[3]}else throw new Error("Can not access image data");return d}}),Ri,da,ca,pa,ma,fa=j(()=>{Rn(),Ri=(a,s)=>{if(a===void 0)throw new Error("Image buffer must be defined");if(s.height===void 0||s.width===void 0)throw new Error("Image height and width must be defined");if(s.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:c,width:d}=s,et=s.norm??{mean:255,bias:0},g,at;typeof et.mean=="number"?g=[et.mean,et.mean,et.mean,et.mean]:g=[et.mean[0],et.mean[1],et.mean[2],et.mean[3]??255],typeof et.bias=="number"?at=[et.bias,et.bias,et.bias,et.bias]:at=[et.bias[0],et.bias[1],et.bias[2],et.bias[3]??0];let $t=s.format!==void 0?s.format:"RGBA",vt=s.tensorFormat!==void 0&&s.tensorFormat!==void 0?s.tensorFormat:"RGB",b=c*d,pt=vt==="RGBA"?new Float32Array(b*4):new Float32Array(b*3),st=4,wt=0,Tt=1,Ct=2,jt=3,Lt=0,Ht=b,Gt=b*2,Kt=-1;$t==="RGB"&&(st=3,wt=0,Tt=1,Ct=2,jt=-1),vt==="RGBA"?Kt=b*3:vt==="RBG"?(Lt=0,Gt=b,Ht=b*2):vt==="BGR"&&(Gt=0,Ht=b,Lt=b*2);for(let tr=0;tr<b;tr++,wt+=st,Ct+=st,Tt+=st,jt+=st)pt[Lt++]=(a[wt]+at[0])/g[0],pt[Ht++]=(a[Tt]+at[1])/g[1],pt[Gt++]=(a[Ct]+at[2])/g[2],Kt!==-1&&jt!==-1&&(pt[Kt++]=(a[jt]+at[3])/g[3]);return vt==="RGBA"?new ot("float32",pt,[1,4,c,d]):new ot("float32",pt,[1,3,c,d])},da=async(a,s)=>{let c=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,d=typeof ImageData<"u"&&a instanceof ImageData,et=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,g=typeof a=="string",at,$t=s??{},vt=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},b=pt=>pt instanceof HTMLCanvasElement||pt instanceof OffscreenCanvas?pt.getContext("2d"):null;if(c){let pt=vt();pt.width=a.width,pt.height=a.height;let st=b(pt);if(st!=null){let wt=a.height,Tt=a.width;if(s!==void 0&&s.resizedHeight!==void 0&&s.resizedWidth!==void 0&&(wt=s.resizedHeight,Tt=s.resizedWidth),s!==void 0){if($t=s,s.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");$t.tensorFormat="RGBA",$t.height=wt,$t.width=Tt}else $t.tensorFormat="RGBA",$t.height=wt,$t.width=Tt;st.drawImage(a,0,0),at=st.getImageData(0,0,Tt,wt).data}else throw new Error("Can not access image data")}else if(d){let pt,st;if(s!==void 0&&s.resizedWidth!==void 0&&s.resizedHeight!==void 0?(pt=s.resizedHeight,st=s.resizedWidth):(pt=a.height,st=a.width),s!==void 0&&($t=s),$t.format="RGBA",$t.height=pt,$t.width=st,s!==void 0){let wt=vt();wt.width=st,wt.height=pt;let Tt=b(wt);if(Tt!=null)Tt.putImageData(a,0,0),at=Tt.getImageData(0,0,st,pt).data;else throw new Error("Can not access image data")}else at=a.data}else if(et){if(s===void 0)throw new Error("Please provide image config with format for Imagebitmap");let pt=vt();pt.width=a.width,pt.height=a.height;let st=b(pt);if(st!=null){let wt=a.height,Tt=a.width;return st.drawImage(a,0,0,Tt,wt),at=st.getImageData(0,0,Tt,wt).data,$t.height=wt,$t.width=Tt,Ri(at,$t)}else throw new Error("Can not access image data")}else{if(g)return new Promise((pt,st)=>{let wt=vt(),Tt=b(wt);if(!a||!Tt)return st();let Ct=new Image;Ct.crossOrigin="Anonymous",Ct.src=a,Ct.onload=()=>{wt.width=Ct.width,wt.height=Ct.height,Tt.drawImage(Ct,0,0,wt.width,wt.height);let jt=Tt.getImageData(0,0,wt.width,wt.height);$t.height=wt.height,$t.width=wt.width,pt(Ri(jt.data,$t))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(at!==void 0)return Ri(at,$t);throw new Error("Input data provided is not supported - aborted tensor creation")},ca=(a,s)=>{let{width:c,height:d,download:et,dispose:g}=s,at=[1,d,c,4];return new ot({location:"texture",type:"float32",texture:a,dims:at,download:et,dispose:g})},pa=(a,s)=>{let{dataType:c,dims:d,download:et,dispose:g}=s;return new ot({location:"gpu-buffer",type:c??"float32",gpuBuffer:a,dims:d,download:et,dispose:g})},ma=(a,s,c)=>new ot({location:"cpu-pinned",type:a,data:s,dims:c??[s.length]})}),dr,Qr,ha,ga,ya=j(()=>{dr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ha=!1,ga=()=>{if(!ha){ha=!0;let a=typeof BigInt64Array<"u"&&BigInt64Array.from,s=typeof BigUint64Array<"u"&&BigUint64Array.from,c=typeof Float16Array<"u"&&Float16Array.from;a&&(dr.set("int64",BigInt64Array),Qr.set(BigInt64Array,"int64")),s&&(dr.set("uint64",BigUint64Array),Qr.set(BigUint64Array,"uint64")),c?(dr.set("float16",Float16Array),Qr.set(Float16Array,"float16")):dr.set("float16",Uint16Array)}}}),ba,va,wa=j(()=>{Rn(),ba=a=>{let s=1;for(let c=0;c<a.length;c++){let d=a[c];if(typeof d!="number"||!Number.isSafeInteger(d))throw new TypeError(`dims[${c}] must be an integer, got: ${d}`);if(d<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${d}`);s*=d}return s},va=(a,s)=>{switch(a.location){case"cpu":return new ot(a.type,a.data,s);case"cpu-pinned":return new ot({location:"cpu-pinned",data:a.data,type:a.type,dims:s});case"texture":return new ot({location:"texture",texture:a.texture,type:a.type,dims:s});case"gpu-buffer":return new ot({location:"gpu-buffer",gpuBuffer:a.gpuBuffer,type:a.type,dims:s});default:throw new Error(`tensorReshape: tensor location ${a.location} is not supported`)}}}),ot,Rn=j(()=>{la(),fa(),ya(),wa(),ot=class{constructor(a,s,c){ga();let d,et;if(typeof a=="object"&&"location"in a)switch(this.dataLocation=a.location,d=a.type,et=a.dims,a.location){case"cpu-pinned":{let at=dr.get(d);if(!at)throw new TypeError(`unsupported type "${d}" to create tensor from pinned buffer`);if(!(a.data instanceof at))throw new TypeError(`buffer should be of type ${at.name}`);this.cpuData=a.data;break}case"texture":{if(d!=="float32")throw new TypeError(`unsupported type "${d}" to create tensor from texture`);this.gpuTextureData=a.texture,this.downloader=a.download,this.disposer=a.dispose;break}case"gpu-buffer":{if(d!=="float32"&&d!=="float16"&&d!=="int32"&&d!=="int64"&&d!=="uint32"&&d!=="uint8"&&d!=="bool")throw new TypeError(`unsupported type "${d}" to create tensor from gpu buffer`);this.gpuBufferData=a.gpuBuffer,this.downloader=a.download,this.disposer=a.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let at,$t;if(typeof a=="string")if(d=a,$t=c,a==="string"){if(!Array.isArray(s))throw new TypeError("A string tensor's data must be a string array.");at=s}else{let vt=dr.get(a);if(vt===void 0)throw new TypeError(`Unsupported tensor type: ${a}.`);if(Array.isArray(s)){if(a==="float16"&&vt===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");a==="uint64"||a==="int64"?at=vt.from(s,BigInt):at=vt.from(s)}else if(s instanceof vt)at=s;else throw new TypeError(`A ${d} tensor's data must be type of ${vt}`)}else if($t=s,Array.isArray(a)){if(a.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let vt=typeof a[0];if(vt==="string")d="string",at=a;else if(vt==="boolean")d="bool",at=Uint8Array.from(a);else throw new TypeError(`Invalid element type of data array: ${vt}.`)}else{let vt=Qr.get(a.constructor);if(vt===void 0)throw new TypeError(`Unsupported type for tensor data: ${a.constructor}.`);d=vt,at=a}if($t===void 0)$t=[at.length];else if(!Array.isArray($t))throw new TypeError("A tensor's dims must be a number array");et=$t,this.cpuData=at,this.dataLocation="cpu"}let g=ba(et);if(this.cpuData&&g!==this.cpuData.length)throw new Error(`Tensor's size(${g}) does not match data length(${this.cpuData.length}).`);this.type=d,this.dims=et,this.size=g}static async fromImage(a,s){return da(a,s)}static fromTexture(a,s){return ca(a,s)}static fromGpuBuffer(a,s){return pa(a,s)}static fromPinnedBuffer(a,s,c){return ma(a,s,c)}toDataURL(a){return sa(this,a)}toImageData(a){return ua(this,a)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(a){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let s=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=s,a&&this.disposer&&(this.disposer(),this.disposer=void 0),s}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(a){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return va(this,a)}}}),tt,zn=j(()=>{Rn(),tt=ot}),Bn,$a,yt,ut,zi=j(()=>{Pi(),Bn=(a,s)=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||console.timeStamp(`${a}::ORT::${s}`)},$a=(a,s)=>{var et;let c=((et=new Error().stack)==null?void 0:et.split(/\r\n|\r|\n/g))||[],d=!1;for(let g=0;g<c.length;g++){if(d&&!c[g].includes("TRACE_FUNC")){let at=`FUNC_${a}::${c[g].trim().split(" ")[1]}`;s&&(at+=`::${s}`),Bn("CPU",at);return}c[g].includes("TRACE_FUNC")&&(d=!0)}},yt=a=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("BEGIN",a)},ut=a=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("END",a)}}),Dn,_a=j(()=>{Pn(),zn(),zi(),Dn=class VS{constructor(s){this.handler=s}async run(s,c,d){yt();let et={},g={};if(typeof s!="object"||s===null||s instanceof tt||Array.isArray(s))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let at=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");at=!1;for(let b of c){if(typeof b!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(b)===-1)throw new RangeError(`'fetches' contains invalid output name: ${b}.`);et[b]=null}if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let b=!1,pt=Object.getOwnPropertyNames(c);for(let st of this.outputNames)if(pt.indexOf(st)!==-1){let wt=c[st];(wt===null||wt instanceof tt)&&(b=!0,at=!1,et[st]=wt)}if(b){if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else g=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let b of this.inputNames)if(typeof s[b]>"u")throw new Error(`input '${b}' is missing in 'feeds'.`);if(at)for(let b of this.outputNames)et[b]=null;let $t=await this.handler.run(s,et,g),vt={};for(let b in $t)if(Object.hasOwnProperty.call($t,b)){let pt=$t[b];pt instanceof tt?vt[b]=pt:vt[b]=new tt(pt.type,pt.data,pt.dims)}return ut(),vt}async release(){return this.handler.dispose()}static async create(s,c,d,et){yt();let g,at={};if(typeof s=="string"){if(g=s,typeof c=="object"&&c!==null)at=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(s instanceof Uint8Array){if(g=s,typeof c=="object"&&c!==null)at=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(s instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&s instanceof SharedArrayBuffer){let pt=s,st=0,wt=s.byteLength;if(typeof c=="object"&&c!==null)at=c;else if(typeof c=="number"){if(st=c,!Number.isSafeInteger(st))throw new RangeError("'byteOffset' must be an integer.");if(st<0||st>=pt.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${pt.byteLength}).`);if(wt=s.byteLength-st,typeof d=="number"){if(wt=d,!Number.isSafeInteger(wt))throw new RangeError("'byteLength' must be an integer.");if(wt<=0||st+wt>pt.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${pt.byteLength-st}].`);if(typeof et=="object"&&et!==null)at=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(typeof d<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof c<"u")throw new TypeError("'options' must be an object.");g=new Uint8Array(pt,st,wt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[$t,vt]=await On(at),b=await $t.createInferenceSessionHandler(g,vt);return ut(),new VS(b)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),uc,xa=j(()=>{_a(),uc=Dn}),Sa=j(()=>{}),Ca=j(()=>{}),Ia=j(()=>{}),Ta=j(()=>{}),lc,Mn,Aa=j(()=>{Pn(),zn(),lc="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Mn=class WS{constructor(s,c,d){this.handler=s,this.hasOptimizerModel=c,this.hasEvalModel=d}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(s,c){let d=s.evalModel||"",et=s.optimizerModel||"",g=c||{},[at,$t]=await On(g);if(at.createTrainingSessionHandler){let vt=await at.createTrainingSessionHandler(s.checkpointState,s.trainModel,d,et,$t);return new WS(vt,!!s.optimizerModel,!!s.evalModel)}else throw new Error(lc)}typeNarrowingForRunStep(s,c,d,et,g){let at={},$t={};if(typeof d!="object"||d===null||d instanceof tt||Array.isArray(d))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let vt=!0;if(typeof et=="object"){if(et===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(et instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(et)){if(et.length===0)throw new TypeError("'fetches' cannot be an empty array.");vt=!1;for(let b of et){if(typeof b!="string")throw new TypeError("'fetches' must be a string array or an object.");if(c.indexOf(b)===-1)throw new RangeError(`'fetches' contains invalid output name: ${b}.`);at[b]=null}if(typeof g=="object"&&g!==null)$t=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else{let b=!1,pt=Object.getOwnPropertyNames(et);for(let st of c)if(pt.indexOf(st)!==-1){let wt=et[st];(wt===null||wt instanceof tt)&&(b=!0,vt=!1,at[st]=wt)}if(b){if(typeof g=="object"&&g!==null)$t=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else $t=et}}else if(typeof et<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let b of s)if(typeof d[b]>"u")throw new Error(`input '${b}' is missing in 'feeds'.`);if(vt)for(let b of c)at[b]=null;return[at,$t]}convertHandlerReturnTypeToMapOfTensors(s){let c={};for(let d in s)if(Object.hasOwnProperty.call(s,d)){let et=s[d];et instanceof tt?c[d]=et:c[d]=new tt(et.type,et.data,et.dims)}return c}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(s,c,d){let[et,g]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,s,c,d),at=await this.handler.runTrainStep(s,et,g);return this.convertHandlerReturnTypeToMapOfTensors(at)}async runOptimizerStep(s){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(s||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(s,c,d){if(this.hasEvalModel){let[et,g]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,s,c,d),at=await this.handler.runEvalStep(s,et,g);return this.convertHandlerReturnTypeToMapOfTensors(at)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(s=!0){return this.handler.getParametersSize(s)}async loadParametersBuffer(s,c=!0){let d=await this.getParametersSize(c);if(s.length!==4*d)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(s,c)}async getContiguousParameters(s=!0){return this.handler.getContiguousParameters(s)}async release(){return this.handler.dispose()}}}),dc,Ea=j(()=>{Aa(),dc=Mn}),Bi={};kr(Bi,{InferenceSession:()=>uc,TRACE:()=>Bn,TRACE_FUNC_BEGIN:()=>yt,TRACE_FUNC_END:()=>ut,Tensor:()=>tt,TrainingSession:()=>dc,env:()=>ke,registerBackend:()=>lr});var _t=j(()=>{ra(),aa(),xa(),zn(),Sa(),Ca(),zi(),Ia(),Ta(),Ea()}),Di={};kr(Di,{createReadStream:()=>Oa,readFile:()=>cc,readFileSync:()=>pc});var cc,pc,Oa,Mi=j(()=>{cc=void 0,pc=void 0,Oa=void 0}),Ui={};kr(Ui,{join:()=>mc});var mc,Wi=j(()=>{mc=void 0}),za=Er((a,s)=>{var c=(()=>{var et;var d=typeof document<"u"?(et=document.currentScript)==null?void 0:et.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){var at=g,$t,vt,b=new Promise((nr,Ir)=>{$t=nr,vt=Ir});at.mountExternalData=(nr,Ir)=>{(at.eb||(at.eb=new Map)).set(nr,Ir)},at.unmountExternalData=()=>{delete at.eb};let pt=()=>{let nr=(Kr,Sn,Go)=>(...g0)=>{let B0=R1,q0=Sn==null?void 0:Sn();g0=Kr(...g0);let J0=Sn==null?void 0:Sn();return q0!==J0&&(Kr=J0,Go(q0),Sn=Go=null),R1!=B0?Lv():g0},Ir=Kr=>async(...Sn)=>{var Go;try{if(at.cb)throw Error("Session already started");let g0=at.cb={xb:Sn[0],errors:[]},B0=await Kr(...Sn);if(at.cb!==g0)throw Error("Session mismatch");(Go=at.kb)==null||Go.flush();let q0=g0.errors;if(0<q0.length){let J0=await Promise.all(q0);if(J0=J0.filter(X0=>X0),0<J0.length)throw Error(J0.join(`
`))}return B0}finally{at.cb=null}};at._OrtCreateSession=nr(at._OrtCreateSession,()=>at._OrtCreateSession,Kr=>at._OrtCreateSession=Kr),at._OrtRun=Ir(nr(at._OrtRun,()=>at._OrtRun,Kr=>at._OrtRun=Kr)),at._OrtRunWithBinding=Ir(nr(at._OrtRunWithBinding,()=>at._OrtRunWithBinding,Kr=>at._OrtRunWithBinding=Kr)),at._OrtBindInput=nr(at._OrtBindInput,()=>at._OrtBindInput,Kr=>at._OrtBindInput=Kr),pt=void 0};at.jsepInit=(nr,Ir)=>{if(pt==null||pt(),nr==="webgpu"){[at.kb,at.pb,at.tb,at.lb,at.sb,at.Ra,at.ub,at.wb,at.qb,at.rb,at.vb]=Ir;let Kr=at.kb;at.jsepRegisterBuffer=(Sn,Go,g0,B0)=>Kr.registerBuffer(Sn,Go,g0,B0),at.jsepGetBuffer=Sn=>Kr.getBuffer(Sn),at.jsepCreateDownloader=(Sn,Go,g0)=>Kr.createDownloader(Sn,Go,g0),at.jsepOnReleaseSession=Sn=>{Kr.onReleaseSession(Sn)},at.jsepOnRunStart=Sn=>Kr.onRunStart(Sn)}};var st=Object.assign({},at),wt="./this.program",Tt=(nr,Ir)=>{throw Ir},Ct=typeof window=="object",jt=typeof importScripts=="function",Lt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Ht="",Gt,Kt,tr;if(Lt){var rr=(Mi(),sr(Di)),Lr=(Wi(),sr(Ui));Ht=jt?Lr.dirname(Ht)+"/":__dirname+"/",Gt=(nr,Ir)=>(nr=x0(nr)?new URL(nr):Lr.normalize(nr),rr.readFileSync(nr,Ir?void 0:"utf8")),tr=nr=>(nr=Gt(nr,!0),nr.buffer||(nr=new Uint8Array(nr)),nr),Kt=(nr,Ir,Kr,Sn=!0)=>{nr=x0(nr)?new URL(nr):Lr.normalize(nr),rr.readFile(nr,Sn?void 0:"utf8",(Go,g0)=>{Go?Kr(Go):Ir(Sn?g0.buffer:g0)})},!at.thisProgram&&1<process.argv.length&&(wt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Tt=(nr,Ir)=>{throw process.exitCode=nr,Ir}}else(Ct||jt)&&(jt?Ht=self.location.href:typeof document<"u"&&document.currentScript&&(Ht=document.currentScript.src),d&&(Ht=d),Ht.startsWith("blob:")?Ht="":Ht=Ht.substr(0,Ht.replace(/[?#].*/,"").lastIndexOf("/")+1),Gt=nr=>{var Ir=new XMLHttpRequest;return Ir.open("GET",nr,!1),Ir.send(null),Ir.responseText},jt&&(tr=nr=>{var Ir=new XMLHttpRequest;return Ir.open("GET",nr,!1),Ir.responseType="arraybuffer",Ir.send(null),new Uint8Array(Ir.response)}),Kt=(nr,Ir,Kr)=>{var Sn=new XMLHttpRequest;Sn.open("GET",nr,!0),Sn.responseType="arraybuffer",Sn.onload=()=>{Sn.status==200||Sn.status==0&&Sn.response?Ir(Sn.response):Kr()},Sn.onerror=Kr,Sn.send(null)});var jr=console.log.bind(console),Yr=console.error.bind(console);Object.assign(at,st),st=null;var An,No=!1,o0,t0,c0,n0,Qo,Mo,zo,e0,Xr,In,Zr;function wn(){var nr=An.buffer;at.HEAP8=t0=new Int8Array(nr),at.HEAP16=n0=new Int16Array(nr),at.HEAPU8=c0=new Uint8Array(nr),at.HEAPU16=Qo=new Uint16Array(nr),at.HEAP32=Mo=new Int32Array(nr),at.HEAPU32=zo=new Uint32Array(nr),at.HEAPF32=e0=new Float32Array(nr),at.HEAPF64=Zr=new Float64Array(nr),at.HEAP64=Xr=new BigInt64Array(nr),at.HEAPU64=In=new BigUint64Array(nr)}var r0=[],ko=[],_n=[],i0=0,a0=null;function m0(nr){throw nr="Aborted("+nr+")",Yr(nr),No=!0,o0=1,nr=new WebAssembly.RuntimeError(nr+". Build with -sASSERTIONS for more info."),vt(nr),nr}var p0=nr=>nr.startsWith("data:application/octet-stream;base64,"),x0=nr=>nr.startsWith("file://"),S0;if(S0="ort-wasm-simd.wasm",!p0(S0)){var R0=S0;S0=at.locateFile?at.locateFile(R0,Ht):Ht+R0}function $0(nr){if(tr)return tr(nr);throw"both async and sync fetching of the wasm failed"}function f0(nr){if(Ct||jt){if(typeof fetch=="function"&&!x0(nr))return fetch(nr,{credentials:"same-origin"}).then(Ir=>{if(!Ir.ok)throw`failed to load wasm binary file at '${nr}'`;return Ir.arrayBuffer()}).catch(()=>$0(nr));if(Kt)return new Promise((Ir,Kr)=>{Kt(nr,Sn=>Ir(new Uint8Array(Sn)),Kr)})}return Promise.resolve().then(()=>$0(nr))}function P0(nr,Ir,Kr){return f0(nr).then(Sn=>WebAssembly.instantiate(Sn,Ir)).then(Kr,Sn=>{Yr(`failed to asynchronously prepare wasm: ${Sn}`),m0(Sn)})}function M0(nr,Ir){var Kr=S0;return typeof WebAssembly.instantiateStreaming!="function"||p0(Kr)||x0(Kr)||Lt||typeof fetch!="function"?P0(Kr,nr,Ir):fetch(Kr,{credentials:"same-origin"}).then(Sn=>WebAssembly.instantiateStreaming(Sn,nr).then(Ir,function(Go){return Yr(`wasm streaming compile failed: ${Go}`),Yr("falling back to ArrayBuffer instantiation"),P0(Kr,nr,Ir)}))}var C0={824920:(nr,Ir,Kr,Sn)=>{if(typeof at>"u"||!at.eb)return 1;if(nr=E0(nr>>>0),nr.startsWith("./")&&(nr=nr.substring(2)),nr=at.eb.get(nr),!nr)return 2;if(Ir>>>=0,Kr>>>=0,Ir+Kr>nr.byteLength)return 3;try{return c0.set(nr.subarray(Ir,Ir+Kr),Sn>>>0>>>0),0}catch{return 4}},825421:()=>{at.qb()},825452:()=>{at.rb()},825481:()=>{at.vb()},825506:nr=>at.pb(nr),825539:nr=>at.tb(nr),825571:(nr,Ir,Kr)=>{at.lb(nr,Ir,Kr,!0)},825610:(nr,Ir,Kr)=>{at.lb(nr,Ir,Kr)},825643:nr=>{at.Ra("Abs",nr,void 0)},825694:nr=>{at.Ra("Neg",nr,void 0)},825745:nr=>{at.Ra("Floor",nr,void 0)},825798:nr=>{at.Ra("Ceil",nr,void 0)},825850:nr=>{at.Ra("Reciprocal",nr,void 0)},825908:nr=>{at.Ra("Sqrt",nr,void 0)},825960:nr=>{at.Ra("Exp",nr,void 0)},826011:nr=>{at.Ra("Erf",nr,void 0)},826062:nr=>{at.Ra("Sigmoid",nr,void 0)},826117:(nr,Ir,Kr)=>{at.Ra("HardSigmoid",nr,{alpha:Ir,beta:Kr})},826196:nr=>{at.Ra("Log",nr,void 0)},826247:nr=>{at.Ra("Sin",nr,void 0)},826298:nr=>{at.Ra("Cos",nr,void 0)},826349:nr=>{at.Ra("Tan",nr,void 0)},826400:nr=>{at.Ra("Asin",nr,void 0)},826452:nr=>{at.Ra("Acos",nr,void 0)},826504:nr=>{at.Ra("Atan",nr,void 0)},826556:nr=>{at.Ra("Sinh",nr,void 0)},826608:nr=>{at.Ra("Cosh",nr,void 0)},826660:nr=>{at.Ra("Asinh",nr,void 0)},826713:nr=>{at.Ra("Acosh",nr,void 0)},826766:nr=>{at.Ra("Atanh",nr,void 0)},826819:nr=>{at.Ra("Tanh",nr,void 0)},826871:nr=>{at.Ra("Not",nr,void 0)},826922:(nr,Ir,Kr)=>{at.Ra("Clip",nr,{min:Ir,max:Kr})},826991:nr=>{at.Ra("Clip",nr,void 0)},827043:(nr,Ir)=>{at.Ra("Elu",nr,{alpha:Ir})},827101:nr=>{at.Ra("Relu",nr,void 0)},827153:(nr,Ir)=>{at.Ra("LeakyRelu",nr,{alpha:Ir})},827217:(nr,Ir)=>{at.Ra("ThresholdedRelu",nr,{alpha:Ir})},827287:(nr,Ir)=>{at.Ra("Cast",nr,{to:Ir})},827345:nr=>{at.Ra("Add",nr,void 0)},827396:nr=>{at.Ra("Sub",nr,void 0)},827447:nr=>{at.Ra("Mul",nr,void 0)},827498:nr=>{at.Ra("Div",nr,void 0)},827549:nr=>{at.Ra("Pow",nr,void 0)},827600:nr=>{at.Ra("Equal",nr,void 0)},827653:nr=>{at.Ra("Greater",nr,void 0)},827708:nr=>{at.Ra("GreaterOrEqual",nr,void 0)},827770:nr=>{at.Ra("Less",nr,void 0)},827822:nr=>{at.Ra("LessOrEqual",nr,void 0)},827881:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceMean",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},828040:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceMax",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},828198:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceMin",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},828356:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceProd",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},828515:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceSum",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},828673:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceL1",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},828830:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceL2",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},828987:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceLogSum",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},829148:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceSumSquare",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},829312:(nr,Ir,Kr,Sn,Go)=>{at.Ra("ReduceLogSumExp",nr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},829476:nr=>{at.Ra("Where",nr,void 0)},829529:(nr,Ir,Kr)=>{at.Ra("Transpose",nr,{perm:Ir?Array.from(Mo.subarray(Ir>>>0,Kr>>>0)):[]})},829637:(nr,Ir,Kr,Sn)=>{at.Ra("DepthToSpace",nr,{blocksize:Ir,mode:E0(Kr),format:Sn?"NHWC":"NCHW"})},829770:(nr,Ir,Kr,Sn)=>{at.Ra("DepthToSpace",nr,{blocksize:Ir,mode:E0(Kr),format:Sn?"NHWC":"NCHW"})},829903:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0,o1)=>{at.Ra("ConvTranspose",nr,{format:J0?"NHWC":"NCHW",autoPad:Ir,dilations:[Kr],group:Sn,kernelShape:[Go],pads:[g0,B0],strides:[q0],wIsConst:()=>!!t0[X0>>>0],outputPadding:y1?Array.from(Mo.subarray(y1>>>0,L1>>>0)):[],outputShape:D0?Array.from(Mo.subarray(D0>>>0,A0>>>0)):[],activation:E0(o1)})},830304:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0)=>{at.Ra("ConvTranspose",nr,{format:q0?"NHWC":"NCHW",autoPad:Ir,dilations:Array.from(Mo.subarray(Kr>>>0,(Kr>>>0)+2>>>0)),group:Sn,kernelShape:Array.from(Mo.subarray(Go>>>0,(Go>>>0)+2>>>0)),pads:Array.from(Mo.subarray(g0>>>0,(g0>>>0)+4>>>0)),strides:Array.from(Mo.subarray(B0>>>0,(B0>>>0)+2>>>0)),wIsConst:()=>!!t0[J0>>>0],outputPadding:X0?Array.from(Mo.subarray(X0>>>0,y1>>>0)):[],outputShape:L1?Array.from(Mo.subarray(L1>>>0,D0>>>0)):[],activation:E0(A0)})},830869:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0,o1)=>{at.Ra("ConvTranspose",nr,{format:J0?"NHWC":"NCHW",autoPad:Ir,dilations:[Kr],group:Sn,kernelShape:[Go],pads:[g0,B0],strides:[q0],wIsConst:()=>!!t0[X0>>>0],outputPadding:y1?Array.from(Mo.subarray(y1>>>0,L1>>>0)):[],outputShape:D0?Array.from(Mo.subarray(D0>>>0,A0>>>0)):[],activation:E0(o1)})},831270:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0)=>{at.Ra("ConvTranspose",nr,{format:q0?"NHWC":"NCHW",autoPad:Ir,dilations:Array.from(Mo.subarray(Kr>>>0,(Kr>>>0)+2>>>0)),group:Sn,kernelShape:Array.from(Mo.subarray(Go>>>0,(Go>>>0)+2>>>0)),pads:Array.from(Mo.subarray(g0>>>0,(g0>>>0)+4>>>0)),strides:Array.from(Mo.subarray(B0>>>0,(B0>>>0)+2>>>0)),wIsConst:()=>!!t0[J0>>>0],outputPadding:X0?Array.from(Mo.subarray(X0>>>0,y1>>>0)):[],outputShape:L1?Array.from(Mo.subarray(L1>>>0,D0>>>0)):[],activation:E0(A0)})},831835:(nr,Ir)=>{at.Ra("GlobalAveragePool",nr,{format:Ir?"NHWC":"NCHW"})},831926:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0,o1,a1)=>{at.Ra("AveragePool",nr,{format:a1?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:Sn,storage_order:Go,dilations:[g0,B0],kernel_shape:[q0,J0],pads:[X0,y1,L1,D0],strides:[A0,o1]})},832210:(nr,Ir)=>{at.Ra("GlobalAveragePool",nr,{format:Ir?"NHWC":"NCHW"})},832301:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0,o1,a1)=>{at.Ra("AveragePool",nr,{format:a1?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:Sn,storage_order:Go,dilations:[g0,B0],kernel_shape:[q0,J0],pads:[X0,y1,L1,D0],strides:[A0,o1]})},832585:(nr,Ir)=>{at.Ra("GlobalMaxPool",nr,{format:Ir?"NHWC":"NCHW"})},832672:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0,o1,a1)=>{at.Ra("MaxPool",nr,{format:a1?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:Sn,storage_order:Go,dilations:[g0,B0],kernel_shape:[q0,J0],pads:[X0,y1,L1,D0],strides:[A0,o1]})},832952:(nr,Ir)=>{at.Ra("GlobalMaxPool",nr,{format:Ir?"NHWC":"NCHW"})},833039:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0,o1,a1)=>{at.Ra("MaxPool",nr,{format:a1?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:Sn,storage_order:Go,dilations:[g0,B0],kernel_shape:[q0,J0],pads:[X0,y1,L1,D0],strides:[A0,o1]})},833319:(nr,Ir,Kr,Sn,Go)=>{at.Ra("Gemm",nr,{alpha:Ir,beta:Kr,transA:Sn,transB:Go})},833423:nr=>{at.Ra("MatMul",nr,void 0)},833477:(nr,Ir,Kr,Sn)=>{at.Ra("ArgMax",nr,{keepDims:!!Ir,selectLastIndex:!!Kr,axis:Sn})},833585:(nr,Ir,Kr,Sn)=>{at.Ra("ArgMin",nr,{keepDims:!!Ir,selectLastIndex:!!Kr,axis:Sn})},833693:(nr,Ir)=>{at.Ra("Softmax",nr,{axis:Ir})},833756:(nr,Ir)=>{at.Ra("Concat",nr,{axis:Ir})},833816:(nr,Ir,Kr,Sn,Go)=>{at.Ra("Split",nr,{axis:Ir,numOutputs:Kr,splitSizes:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},833956:nr=>{at.Ra("Expand",nr,void 0)},834010:(nr,Ir)=>{at.Ra("Gather",nr,{axis:Number(Ir)})},834081:(nr,Ir)=>{at.Ra("GatherElements",nr,{axis:Number(Ir)})},834160:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1)=>{at.Ra("Resize",nr,{antialias:Ir,axes:Kr?Array.from(Mo.subarray(Kr>>>0,Sn>>>0)):[],coordinateTransformMode:E0(Go),cubicCoeffA:g0,excludeOutside:B0,extrapolationValue:q0,keepAspectRatioPolicy:E0(J0),mode:E0(X0),nearestMode:E0(y1)})},834506:(nr,Ir,Kr,Sn,Go,g0,B0)=>{at.Ra("Slice",nr,{starts:Ir?Array.from(Mo.subarray(Ir>>>0,Kr>>>0)):[],ends:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[],axes:g0?Array.from(Mo.subarray(g0>>>0,B0>>>0)):[]})},834722:nr=>{at.Ra("Tile",nr,void 0)},834774:(nr,Ir,Kr,Sn)=>{at.Ra("LayerNormalization",nr,{axis:Ir,epsilon:Kr,simplified:!!Sn})},834885:(nr,Ir,Kr)=>{at.Ra("InstanceNormalization",nr,{epsilon:Ir,format:Kr?"NHWC":"NCHW"})},834999:(nr,Ir,Kr)=>{at.Ra("InstanceNormalization",nr,{epsilon:Ir,format:Kr?"NHWC":"NCHW"})},835113:nr=>{at.Ra("Range",nr,void 0)},835166:(nr,Ir)=>{at.Ra("Einsum",nr,{equation:E0(Ir)})},835247:(nr,Ir,Kr,Sn,Go)=>{at.Ra("Pad",nr,{mode:Ir,value:Kr,pads:Sn?Array.from(Mo.subarray(Sn>>>0,Go>>>0)):[]})},835374:(nr,Ir,Kr,Sn,Go,g0)=>{at.Ra("BatchNormalization",nr,{epsilon:Ir,momentum:Kr,spatial:!!Go,trainingMode:!!Sn,format:g0?"NHWC":"NCHW"})},835543:(nr,Ir,Kr,Sn,Go,g0)=>{at.Ra("BatchNormalization",nr,{epsilon:Ir,momentum:Kr,spatial:!!Go,trainingMode:!!Sn,format:g0?"NHWC":"NCHW"})},835712:(nr,Ir,Kr)=>{at.Ra("CumSum",nr,{exclusive:Number(Ir),reverse:Number(Kr)})},835809:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0)=>{at.Ra("Attention",nr,{numHeads:Ir,isUnidirectional:Kr,maskFilterValue:Sn,scale:Go,doRotary:g0,qkvHiddenSizes:B0?Array.from(Mo.subarray(Number(q0)>>>0,Number(q0)+B0>>>0)):[],pastPresentShareBuffer:!!J0})},836081:nr=>{at.Ra("BiasAdd",nr,void 0)},836136:nr=>{at.Ra("BiasSplitGelu",nr,void 0)},836197:nr=>{at.Ra("FastGelu",nr,void 0)},836253:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0)=>{at.Ra("Conv",nr,{format:J0?"NHWC":"NCHW",auto_pad:Ir,dilations:[Kr],group:Sn,kernel_shape:[Go],pads:g0?Array.from(Mo.subarray(g0>>>0,B0>>>0)):[],strides:[q0],w_is_const:()=>!!t0[X0>>>0],activation:E0(y1),activation_params:L1?Array.from(e0.subarray(L1>>>0,D0>>>0)):[]})},836623:(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0,y1,L1,D0,A0,o1,a1)=>{at.Ra("Conv",nr,{format:L1?"NHWC":"NCHW",auto_pad:Ir,dilations:[Kr,Sn],group:Go,kernel_shape:[g0,B0],pads:q0?Array.from(Mo.subarray(q0>>>0,J0>>>0)):[],strides:[X0,y1],w_is_const:()=>!!t0[D0>>>0],activation:E0(A0),activation_params:o1?Array.from(e0.subarray(o1>>>0,a1>>>0)):[]})},837014:nr=>{at.Ra("Gelu",nr,void 0)},837066:(nr,Ir,Kr,Sn,Go,g0)=>{at.Ra("MatMulNBits",nr,{k:Ir,n:Kr,accuracyLevel:Sn,bits:Go,blockSize:g0})},837193:(nr,Ir,Kr,Sn,Go,g0)=>{at.Ra("MultiHeadAttention",nr,{numHeads:Ir,isUnidirectional:Kr,maskFilterValue:Sn,scale:Go,doRotary:g0})},837352:(nr,Ir,Kr,Sn,Go)=>{at.Ra("RotaryEmbedding",nr,{interleaved:!!Ir,numHeads:Kr,rotaryEmbeddingDim:Sn,scale:Go})},837491:(nr,Ir,Kr)=>{at.Ra("SkipLayerNormalization",nr,{epsilon:Ir,simplified:!!Kr})},837593:(nr,Ir,Kr)=>{at.Ra("SkipLayerNormalization",nr,{epsilon:Ir,simplified:!!Kr})},837695:(nr,Ir,Kr,Sn)=>{at.Ra("LayerNormalization",nr,{axis:Ir,epsilon:Kr,simplified:!!Sn})},837806:nr=>{at.ub(nr)},837840:(nr,Ir)=>at.wb(nr,Ir,at.cb.xb,at.cb.errors)};function Uo(nr){this.name="ExitStatus",this.message=`Program terminated with exit(${nr})`,this.status=nr}class l0{constructor(Ir){this.hb=Ir-24}}var b0=0,k0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,d0=(nr,Ir,Kr)=>{Ir>>>=0;var Sn=Ir+Kr;for(Kr=Ir;nr[Kr]&&!(Kr>=Sn);)++Kr;if(16<Kr-Ir&&nr.buffer&&k0)return k0.decode(nr.subarray(Ir,Kr));for(Sn="";Ir<Kr;){var Go=nr[Ir++];if(Go&128){var g0=nr[Ir++]&63;if((Go&224)==192)Sn+=String.fromCharCode((Go&31)<<6|g0);else{var B0=nr[Ir++]&63;Go=(Go&240)==224?(Go&15)<<12|g0<<6|B0:(Go&7)<<18|g0<<12|B0<<6|nr[Ir++]&63,65536>Go?Sn+=String.fromCharCode(Go):(Go-=65536,Sn+=String.fromCharCode(55296|Go>>10,56320|Go&1023))}}else Sn+=String.fromCharCode(Go)}return Sn},E0=(nr,Ir)=>(nr>>>=0)?d0(c0,nr,Ir):"",V0=nr=>{for(var Ir=0,Kr=0;Kr<nr.length;++Kr){var Sn=nr.charCodeAt(Kr);127>=Sn?Ir++:2047>=Sn?Ir+=2:55296<=Sn&&57343>=Sn?(Ir+=4,++Kr):Ir+=3}return Ir},Z0=(nr,Ir,Kr,Sn)=>{if(Kr>>>=0,!(0<Sn))return 0;var Go=Kr;Sn=Kr+Sn-1;for(var g0=0;g0<nr.length;++g0){var B0=nr.charCodeAt(g0);if(55296<=B0&&57343>=B0){var q0=nr.charCodeAt(++g0);B0=65536+((B0&1023)<<10)|q0&1023}if(127>=B0){if(Kr>=Sn)break;Ir[Kr++>>>0]=B0}else{if(2047>=B0){if(Kr+1>=Sn)break;Ir[Kr++>>>0]=192|B0>>6}else{if(65535>=B0){if(Kr+2>=Sn)break;Ir[Kr++>>>0]=224|B0>>12}else{if(Kr+3>=Sn)break;Ir[Kr++>>>0]=240|B0>>18,Ir[Kr++>>>0]=128|B0>>12&63}Ir[Kr++>>>0]=128|B0>>6&63}Ir[Kr++>>>0]=128|B0&63}}return Ir[Kr>>>0]=0,Kr-Go},h1,r1=nr=>{for(var Ir="";c0[nr>>>0];)Ir+=h1[c0[nr++>>>0]];return Ir},I1={},f1={},q1;function c1(nr,Ir,Kr={}){var Sn=Ir.name;if(!nr)throw new q1(`type "${Sn}" must have a positive integer typeid pointer`);if(f1.hasOwnProperty(nr)){if(Kr.nb)return;throw new q1(`Cannot register type '${Sn}' twice`)}f1[nr]=Ir,I1.hasOwnProperty(nr)&&(Ir=I1[nr],delete I1[nr],Ir.forEach(Go=>Go()))}function B1(nr,Ir,Kr={}){if(!("argPackAdvance"in Ir))throw new TypeError("registerType registeredInstance requires argPackAdvance");return c1(nr,Ir,Kr)}var nv=(nr,Ir,Kr)=>{switch(Ir){case 1:return Kr?Sn=>t0[Sn>>>0]:Sn=>c0[Sn>>>0];case 2:return Kr?Sn=>n0[Sn>>>1>>>0]:Sn=>Qo[Sn>>>1>>>0];case 4:return Kr?Sn=>Mo[Sn>>>2>>>0]:Sn=>zo[Sn>>>2>>>0];case 8:return Kr?Sn=>Xr[Sn>>>3]:Sn=>In[Sn>>>3];default:throw new TypeError(`invalid integer width (${Ir}): ${nr}`)}},iv=[],t1=[];function dv(nr){nr>>>=0,9<nr&&--t1[nr+1]===0&&(t1[nr]=void 0,iv.push(nr))}var $1=nr=>{if(!nr)throw new q1("Cannot use deleted val. handle = "+nr);return t1[nr]},rv=nr=>{switch(nr){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let Ir=iv.pop()||t1.length;return t1[Ir]=nr,t1[Ir+1]=1,Ir}};function _g(nr){return this.fromWireType(zo[nr>>>2>>>0])}var w0={name:"emscripten::val",fromWireType:nr=>{var Ir=$1(nr);return dv(nr),Ir},toWireType:(nr,Ir)=>rv(Ir),argPackAdvance:8,readValueFromPointer:_g,bb:null},T0=(nr,Ir)=>{switch(Ir){case 4:return function(Kr){return this.fromWireType(e0[Kr>>>2>>>0])};case 8:return function(Kr){return this.fromWireType(Zr[Kr>>>3>>>0])};default:throw new TypeError(`invalid float width (${Ir}): ${nr}`)}},F0=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,U0=(nr,Ir)=>{for(var Kr=nr>>1,Sn=Kr+Ir/2;!(Kr>=Sn)&&Qo[Kr>>>0];)++Kr;if(Kr<<=1,32<Kr-nr&&F0)return F0.decode(c0.subarray(nr>>>0,Kr>>>0));for(Kr="",Sn=0;!(Sn>=Ir/2);++Sn){var Go=n0[nr+2*Sn>>>1>>>0];if(Go==0)break;Kr+=String.fromCharCode(Go)}return Kr},h0=(nr,Ir,Kr)=>{if(Kr??(Kr=2147483647),2>Kr)return 0;Kr-=2;var Sn=Ir;Kr=Kr<2*nr.length?Kr/2:nr.length;for(var Go=0;Go<Kr;++Go)n0[Ir>>>1>>>0]=nr.charCodeAt(Go),Ir+=2;return n0[Ir>>>1>>>0]=0,Ir-Sn},Q0=nr=>2*nr.length,l1=(nr,Ir)=>{for(var Kr=0,Sn="";!(Kr>=Ir/4);){var Go=Mo[nr+4*Kr>>>2>>>0];if(Go==0)break;++Kr,65536<=Go?(Go-=65536,Sn+=String.fromCharCode(55296|Go>>10,56320|Go&1023)):Sn+=String.fromCharCode(Go)}return Sn},e1=(nr,Ir,Kr)=>{if(Ir>>>=0,Kr??(Kr=2147483647),4>Kr)return 0;var Sn=Ir;Kr=Sn+Kr-4;for(var Go=0;Go<nr.length;++Go){var g0=nr.charCodeAt(Go);if(55296<=g0&&57343>=g0){var B0=nr.charCodeAt(++Go);g0=65536+((g0&1023)<<10)|B0&1023}if(Mo[Ir>>>2>>>0]=g0,Ir+=4,Ir+4>Kr)break}return Mo[Ir>>>2>>>0]=0,Ir-Sn},m1=nr=>{for(var Ir=0,Kr=0;Kr<nr.length;++Kr){var Sn=nr.charCodeAt(Kr);55296<=Sn&&57343>=Sn&&++Kr,Ir+=4}return Ir},T1=(nr,Ir)=>{var Kr=f1[nr];if(Kr===void 0)throw nr=Ty(nr),Kr=r1(nr),fv(nr),new q1(`${Ir} has unknown type ${Kr}`);return Kr},G1=(nr,Ir,Kr)=>{var Sn=[];return nr=nr.toWireType(Sn,Kr),Sn.length&&(zo[Ir>>>2>>>0]=rv(Sn)),nr},P1=nr=>{try{nr()}catch(Ir){m0(Ir)}},I0=nr=>{var Ir;if(!No)try{nr();try{o0=o0=nr=o0,(Ir=at.onExit)==null||Ir.call(at,nr),No=!0,Tt(nr,new Uo(nr))}catch(Kr){Kr instanceof Uo||Kr=="unwind"||Tt(1,Kr)}}catch(Kr){Kr instanceof Uo||Kr=="unwind"||Tt(1,Kr)}};function p1(){var nr=b1,Ir={};for(let[Kr,Sn]of Object.entries(nr))Ir[Kr]=typeof Sn=="function"?(...Go)=>{K1.push(Kr);try{return Sn(...Go)}finally{No||(K1.pop(),R1&&x1===1&&K1.length===0&&(x1=0,P1(Cy),typeof Fibers<"u"&&Fibers.Db()))}}:Sn;return Ir}var x1=0,R1=null,D1=0,K1=[],vv={},yv={},gv=0,qv=null,ov=[];function Lv(){return new Promise((nr,Ir)=>{qv={resolve:nr,reject:Ir}})}function Rv(){var nr=kv(65548),Ir=nr+12;zo[nr>>>2>>>0]=Ir,zo[nr+4>>>2>>>0]=Ir+65536,Ir=K1[0];var Kr=vv[Ir];return Kr===void 0&&(Kr=gv++,vv[Ir]=Kr,yv[Kr]=Ir),Mo[nr+8>>>2>>>0]=Kr,nr}function $y(nr){if(!No){if(x1===0){var Ir=!1,Kr=!1;nr((Sn=0)=>{if(!No&&(D1=Sn,Ir=!0,Kr)){x1=2,P1(()=>Ev(R1)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),Sn=!1;try{var Go=(0,b1[yv[Mo[R1+8>>>2>>>0]]])()}catch(q0){Go=q0,Sn=!0}var g0=!1;if(!R1){var B0=qv;B0&&(qv=null,(Sn?B0.reject:B0.resolve)(Go),g0=!0)}if(Sn&&!g0)throw Go}}),Kr=!0,Ir||(x1=1,R1=Rv(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),P1(()=>$v(R1)))}else x1===2?(x1=0,P1(Ov),fv(R1),R1=null,ov.forEach(I0)):m0(`invalid state: ${x1}`);return D1}}function Iv(nr){return $y(Ir=>{nr().then(Ir)})}var Cv=[],Gy={},Kv=nr=>{var Ir=Gy[nr];return Ir===void 0?r1(nr):Ir},_v=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Yv=nr=>{var Ir=Cv.length;return Cv.push(nr),Ir},xy=(nr,Ir)=>{for(var Kr=Array(nr),Sn=0;Sn<nr;++Sn)Kr[Sn]=T1(zo[Ir+4*Sn>>>2>>>0],"parameter "+Sn);return Kr},Pv=(nr,Ir)=>Object.defineProperty(Ir,"name",{value:nr});function qy(nr){var Ir=Function;if(!(Ir instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof Ir} which is not a function`);var Kr=Pv(Ir.name||"unknownFunctionName",function(){});return Kr.prototype=Ir.prototype,Kr=new Kr,nr=Ir.apply(Kr,nr),nr instanceof Object?nr:Kr}var sv=nr=>nr%4===0&&(nr%100!==0||nr%400===0),wy=[0,31,60,91,121,152,182,213,244,274,305,335],uy=[0,31,59,90,120,151,181,212,243,273,304,334],Sv=[],_y=(nr,Ir)=>{Sv.length=0;for(var Kr;Kr=c0[nr++>>>0];){var Sn=Kr!=105;Sn&=Kr!=112,Ir+=Sn&&Ir%8?4:0,Sv.push(Kr==112?zo[Ir>>>2>>>0]:Kr==106?Xr[Ir>>>3]:Kr==105?Mo[Ir>>>2>>>0]:Zr[Ir>>>3>>>0]),Ir+=Sn?8:4}return Sv},lv={},bv=()=>{if(!ty){var nr={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:wt||"./this.program"},Ir;for(Ir in lv)lv[Ir]===void 0?delete nr[Ir]:nr[Ir]=lv[Ir];var Kr=[];for(Ir in nr)Kr.push(`${Ir}=${nr[Ir]}`);ty=Kr}return ty},ty,Ky=[null,[],[]],Yy=[31,29,31,30,31,30,31,31,30,31,30,31],Sy=[31,28,31,30,31,30,31,31,30,31,30,31];function l$(nr){var Ir=Array(V0(nr)+1);return Z0(nr,Ir,0,Ir.length),Ir}function Xy(nr,Ir,Kr,Sn){function Go(A0,o1,a1){for(A0=typeof A0=="number"?A0.toString():A0||"";A0.length<o1;)A0=a1[0]+A0;return A0}function g0(A0,o1){return Go(A0,o1,"0")}function B0(A0,o1){function a1(Oy){return 0>Oy?-1:0<Oy?1:0}var j1;return(j1=a1(A0.getFullYear()-o1.getFullYear()))===0&&(j1=a1(A0.getMonth()-o1.getMonth()))===0&&(j1=a1(A0.getDate()-o1.getDate())),j1}function q0(A0){switch(A0.getDay()){case 0:return new Date(A0.getFullYear()-1,11,29);case 1:return A0;case 2:return new Date(A0.getFullYear(),0,3);case 3:return new Date(A0.getFullYear(),0,2);case 4:return new Date(A0.getFullYear(),0,1);case 5:return new Date(A0.getFullYear()-1,11,31);case 6:return new Date(A0.getFullYear()-1,11,30)}}function J0(A0){var o1=A0.$a;for(A0=new Date(new Date(A0.ab+1900,0,1).getTime());0<o1;){var a1=A0.getMonth(),j1=(sv(A0.getFullYear())?Yy:Sy)[a1];if(o1>j1-A0.getDate())o1-=j1-A0.getDate()+1,A0.setDate(1),11>a1?A0.setMonth(a1+1):(A0.setMonth(0),A0.setFullYear(A0.getFullYear()+1));else{A0.setDate(A0.getDate()+o1);break}}return a1=new Date(A0.getFullYear()+1,0,4),o1=q0(new Date(A0.getFullYear(),0,4)),a1=q0(a1),0>=B0(o1,A0)?0>=B0(a1,A0)?A0.getFullYear()+1:A0.getFullYear():A0.getFullYear()-1}nr>>>=0,Ir>>>=0,Kr>>>=0,Sn>>>=0;var X0=zo[Sn+40>>>2>>>0];Sn={Ab:Mo[Sn>>>2>>>0],zb:Mo[Sn+4>>>2>>>0],fb:Mo[Sn+8>>>2>>>0],jb:Mo[Sn+12>>>2>>>0],gb:Mo[Sn+16>>>2>>>0],ab:Mo[Sn+20>>>2>>>0],Va:Mo[Sn+24>>>2>>>0],$a:Mo[Sn+28>>>2>>>0],Cb:Mo[Sn+32>>>2>>>0],yb:Mo[Sn+36>>>2>>>0],Bb:X0?E0(X0):""},Kr=E0(Kr),X0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var y1 in X0)Kr=Kr.replace(new RegExp(y1,"g"),X0[y1]);var L1="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),D0="January February March April May June July August September October November December".split(" ");X0={"%a":A0=>L1[A0.Va].substring(0,3),"%A":A0=>L1[A0.Va],"%b":A0=>D0[A0.gb].substring(0,3),"%B":A0=>D0[A0.gb],"%C":A0=>g0((A0.ab+1900)/100|0,2),"%d":A0=>g0(A0.jb,2),"%e":A0=>Go(A0.jb,2," "),"%g":A0=>J0(A0).toString().substring(2),"%G":J0,"%H":A0=>g0(A0.fb,2),"%I":A0=>(A0=A0.fb,A0==0?A0=12:12<A0&&(A0-=12),g0(A0,2)),"%j":A0=>{for(var o1=0,a1=0;a1<=A0.gb-1;o1+=(sv(A0.ab+1900)?Yy:Sy)[a1++]);return g0(A0.jb+o1,3)},"%m":A0=>g0(A0.gb+1,2),"%M":A0=>g0(A0.zb,2),"%n":()=>`
`,"%p":A0=>0<=A0.fb&&12>A0.fb?"AM":"PM","%S":A0=>g0(A0.Ab,2),"%t":()=>"	","%u":A0=>A0.Va||7,"%U":A0=>g0(Math.floor((A0.$a+7-A0.Va)/7),2),"%V":A0=>{var o1=Math.floor((A0.$a+7-(A0.Va+6)%7)/7);if(2>=(A0.Va+371-A0.$a-2)%7&&o1++,o1)o1==53&&(a1=(A0.Va+371-A0.$a)%7,a1==4||a1==3&&sv(A0.ab)||(o1=1));else{o1=52;var a1=(A0.Va+7-A0.$a-1)%7;(a1==4||a1==5&&sv(A0.ab%400-1))&&o1++}return g0(o1,2)},"%w":A0=>A0.Va,"%W":A0=>g0(Math.floor((A0.$a+7-(A0.Va+6)%7)/7),2),"%y":A0=>(A0.ab+1900).toString().substring(2),"%Y":A0=>A0.ab+1900,"%z":A0=>{A0=A0.yb;var o1=0<=A0;return A0=Math.abs(A0)/60,(o1?"+":"-")+("0000"+(A0/60*100+A0%60)).slice(-4)},"%Z":A0=>A0.Bb,"%%":()=>"%"},Kr=Kr.replace(/%%/g,"\0\0");for(y1 in X0)Kr.includes(y1)&&(Kr=Kr.replace(new RegExp(y1,"g"),X0[y1](Sn)));return Kr=Kr.replace(/\0\0/g,"%"),y1=l$(Kr),y1.length>Ir?0:(t0.set(y1,nr>>>0),y1.length-1)}for(var Ey=Array(256),v1=0;256>v1;++v1)Ey[v1]=String.fromCharCode(v1);h1=Ey,q1=at.BindingError=class extends Error{constructor(nr){super(nr),this.name="BindingError"}},at.InternalError=class extends Error{constructor(nr){super(nr),this.name="InternalError"}},t1.push(0,1,void 0,1,null,1,!0,1,!1,1),at.count_emval_handles=()=>t1.length/2-5-iv.length;var My={ia:function(nr,Ir,Kr){return Iv(async()=>{await at.sb(nr,Ir,Kr)})},a:function(nr,Ir,Kr){nr>>>=0;var Sn=new l0(nr);throw zo[Sn.hb+16>>>2>>>0]=0,zo[Sn.hb+4>>>2>>>0]=Ir>>>0,zo[Sn.hb+8>>>2>>>0]=Kr>>>0,b0=nr,b0},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(nr,Ir,Kr){Ir=r1(Ir>>>0),B1(nr>>>0,{name:Ir,fromWireType:Sn=>Sn,toWireType:function(Sn,Go){if(typeof Go!="bigint"&&typeof Go!="number")throw Go===null?Go="null":(Sn=typeof Go,Go=Sn==="object"||Sn==="array"||Sn==="function"?Go.toString():""+Go),new TypeError(`Cannot convert "${Go}" to ${this.name}`);return typeof Go=="number"&&(Go=BigInt(Go)),Go},argPackAdvance:8,readValueFromPointer:nv(Ir,Kr>>>0,Ir.indexOf("u")==-1),bb:null})},K:function(nr,Ir,Kr,Sn){Ir=r1(Ir>>>0),B1(nr>>>0,{name:Ir,fromWireType:function(Go){return!!Go},toWireType:function(Go,g0){return g0?Kr:Sn},argPackAdvance:8,readValueFromPointer:function(Go){return this.fromWireType(c0[Go>>>0])},bb:null})},J:function(nr){return B1(nr>>>0,w0)},B:function(nr,Ir,Kr){Ir=r1(Ir>>>0),B1(nr>>>0,{name:Ir,fromWireType:Sn=>Sn,toWireType:(Sn,Go)=>Go,argPackAdvance:8,readValueFromPointer:T0(Ir,Kr>>>0),bb:null})},s:function(nr,Ir,Kr,Sn,Go){if(nr>>>=0,Kr>>>=0,Ir=r1(Ir>>>0),Go===-1&&(Go=4294967295),Go=q0=>q0,Sn===0){var g0=32-8*Kr;Go=q0=>q0<<g0>>>g0}var B0=Ir.includes("unsigned")?function(q0,J0){return J0>>>0}:function(q0,J0){return J0};B1(nr,{name:Ir,fromWireType:Go,toWireType:B0,argPackAdvance:8,readValueFromPointer:nv(Ir,Kr,Sn!==0),bb:null})},o:function(nr,Ir,Kr){function Sn(g0){return new Go(t0.buffer,zo[g0+4>>>2>>>0],zo[g0>>>2>>>0])}var Go=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][Ir];Kr=r1(Kr>>>0),B1(nr>>>0,{name:Kr,fromWireType:Sn,argPackAdvance:8,readValueFromPointer:Sn},{nb:!0})},D:function(nr,Ir){Ir=r1(Ir>>>0);var Kr=Ir==="std::string";B1(nr>>>0,{name:Ir,fromWireType:function(Sn){var Go=zo[Sn>>>2>>>0],g0=Sn+4;if(Kr)for(var B0=g0,q0=0;q0<=Go;++q0){var J0=g0+q0;if(q0==Go||c0[J0>>>0]==0){if(B0=E0(B0,J0-B0),X0===void 0)var X0=B0;else X0+="\0",X0+=B0;B0=J0+1}}else{for(X0=Array(Go),q0=0;q0<Go;++q0)X0[q0]=String.fromCharCode(c0[g0+q0>>>0]);X0=X0.join("")}return fv(Sn),X0},toWireType:function(Sn,Go){Go instanceof ArrayBuffer&&(Go=new Uint8Array(Go));var g0=typeof Go=="string";if(!(g0||Go instanceof Uint8Array||Go instanceof Uint8ClampedArray||Go instanceof Int8Array))throw new q1("Cannot pass non-string to std::string");var B0=Kr&&g0?V0(Go):Go.length,q0=kv(4+B0+1),J0=q0+4;if(zo[q0>>>2>>>0]=B0,Kr&&g0)Z0(Go,c0,J0,B0+1);else if(g0)for(g0=0;g0<B0;++g0){var X0=Go.charCodeAt(g0);if(255<X0)throw fv(J0),new q1("String has UTF-16 code units that do not fit in 8 bits");c0[J0+g0>>>0]=X0}else for(g0=0;g0<B0;++g0)c0[J0+g0>>>0]=Go[g0];return Sn!==null&&Sn.push(fv,q0),q0},argPackAdvance:8,readValueFromPointer:_g,bb(Sn){fv(Sn)}})},x:function(nr,Ir,Kr){if(Ir>>>=0,Kr>>>=0,Kr=r1(Kr),Ir===2)var Sn=U0,Go=h0,g0=Q0,B0=q0=>Qo[q0>>>1>>>0];else Ir===4&&(Sn=l1,Go=e1,g0=m1,B0=q0=>zo[q0>>>2>>>0]);B1(nr>>>0,{name:Kr,fromWireType:q0=>{for(var J0=zo[q0>>>2>>>0],X0,y1=q0+4,L1=0;L1<=J0;++L1){var D0=q0+4+L1*Ir;(L1==J0||B0(D0)==0)&&(y1=Sn(y1,D0-y1),X0===void 0?X0=y1:(X0+="\0",X0+=y1),y1=D0+Ir)}return fv(q0),X0},toWireType:(q0,J0)=>{if(typeof J0!="string")throw new q1(`Cannot pass non-string to C++ string type ${Kr}`);var X0=g0(J0),y1=kv(4+X0+Ir);return zo[y1>>>2>>>0]=X0/Ir,Go(J0,y1+4,X0+Ir),q0!==null&&q0.push(fv,y1),y1},argPackAdvance:8,readValueFromPointer:_g,bb(q0){fv(q0)}})},L:function(nr,Ir){Ir=r1(Ir>>>0),B1(nr>>>0,{ob:!0,name:Ir,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(nr,Ir,Kr){return Ir>>>=0,Kr>>>=0,nr=$1(nr>>>0),Ir=T1(Ir,"emval::as"),G1(Ir,Kr,nr)},w:function(nr){return nr>>>=0,Iv(()=>(nr=$1(nr),nr.then(rv)))},n:function(nr,Ir,Kr,Sn){return Kr>>>=0,Sn>>>=0,nr=Cv[nr>>>0],Ir=$1(Ir>>>0),nr(null,Ir,Kr,Sn)},j:function(nr,Ir,Kr,Sn,Go){return Kr>>>=0,Sn>>>=0,Go>>>=0,nr=Cv[nr>>>0],Ir=$1(Ir>>>0),Kr=Kv(Kr),nr(Ir,Ir[Kr],Sn,Go)},b:dv,A:function(nr,Ir){return Ir>>>=0,nr=$1(nr>>>0),Ir=$1(Ir),nr==Ir},m:function(nr){return nr>>>=0,nr===0?rv(_v()):(nr=Kv(nr),rv(_v()[nr]))},i:function(nr,Ir,Kr){Ir=xy(nr,Ir>>>0);var Sn=Ir.shift();nr--;var Go=`return function (obj, func, destructorsRef, args) {
`,g0=0,B0=[];Kr===0&&B0.push("obj");for(var q0=["retType"],J0=[Sn],X0=0;X0<nr;++X0)B0.push("arg"+X0),q0.push("argType"+X0),J0.push(Ir[X0]),Go+=`  var arg${X0} = argType${X0}.readValueFromPointer(args${g0?"+"+g0:""});
`,g0+=Ir[X0].argPackAdvance;return Go+=`  var rv = ${Kr===1?"new func":"func.call"}(${B0.join(", ")});
`,Sn.ob||(q0.push("emval_returnValue"),J0.push(G1),Go+=`  return emval_returnValue(retType, destructorsRef, rv);
`),q0.push(Go+`};
`),nr=qy(q0)(...J0),Kr=`methodCaller<(${Ir.map(y1=>y1.name).join(", ")}) => ${Sn.name}>`,Yv(Pv(Kr,nr))},r:function(nr,Ir){return Ir>>>=0,nr=$1(nr>>>0),Ir=$1(Ir),rv(nr[Ir])},e:function(nr){nr>>>=0,9<nr&&(t1[nr+1]+=1)},t:function(){return rv([])},l:function(nr){nr=$1(nr>>>0);for(var Ir=Array(nr.length),Kr=0;Kr<nr.length;Kr++)Ir[Kr]=nr[Kr];return rv(Ir)},f:function(nr){return rv(Kv(nr>>>0))},k:function(){return rv({})},h:function(nr){nr>>>=0;for(var Ir=$1(nr);Ir.length;){var Kr=Ir.pop();Ir.pop()(Kr)}dv(nr)},g:function(nr,Ir,Kr){Ir>>>=0,Kr>>>=0,nr=$1(nr>>>0),Ir=$1(Ir),Kr=$1(Kr),nr[Ir]=Kr},c:function(nr,Ir){return Ir>>>=0,nr=T1(nr>>>0,"_emval_take_value"),nr=nr.readValueFromPointer(Ir),rv(nr)},W:function(nr,Ir){nr=-9007199254740992>nr||9007199254740992<nr?NaN:Number(nr),Ir>>>=0,nr=new Date(1e3*nr),Mo[Ir>>>2>>>0]=nr.getUTCSeconds(),Mo[Ir+4>>>2>>>0]=nr.getUTCMinutes(),Mo[Ir+8>>>2>>>0]=nr.getUTCHours(),Mo[Ir+12>>>2>>>0]=nr.getUTCDate(),Mo[Ir+16>>>2>>>0]=nr.getUTCMonth(),Mo[Ir+20>>>2>>>0]=nr.getUTCFullYear()-1900,Mo[Ir+24>>>2>>>0]=nr.getUTCDay(),Mo[Ir+28>>>2>>>0]=(nr.getTime()-Date.UTC(nr.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(nr,Ir){nr=-9007199254740992>nr||9007199254740992<nr?NaN:Number(nr),Ir>>>=0,nr=new Date(1e3*nr),Mo[Ir>>>2>>>0]=nr.getSeconds(),Mo[Ir+4>>>2>>>0]=nr.getMinutes(),Mo[Ir+8>>>2>>>0]=nr.getHours(),Mo[Ir+12>>>2>>>0]=nr.getDate(),Mo[Ir+16>>>2>>>0]=nr.getMonth(),Mo[Ir+20>>>2>>>0]=nr.getFullYear()-1900,Mo[Ir+24>>>2>>>0]=nr.getDay(),Mo[Ir+28>>>2>>>0]=(sv(nr.getFullYear())?wy:uy)[nr.getMonth()]+nr.getDate()-1|0,Mo[Ir+36>>>2>>>0]=-(60*nr.getTimezoneOffset());var Kr=new Date(nr.getFullYear(),6,1).getTimezoneOffset(),Sn=new Date(nr.getFullYear(),0,1).getTimezoneOffset();Mo[Ir+32>>>2>>>0]=(Kr!=Sn&&nr.getTimezoneOffset()==Math.min(Sn,Kr))|0},Y:function(nr){nr>>>=0;var Ir=new Date(Mo[nr+20>>>2>>>0]+1900,Mo[nr+16>>>2>>>0],Mo[nr+12>>>2>>>0],Mo[nr+8>>>2>>>0],Mo[nr+4>>>2>>>0],Mo[nr>>>2>>>0],0),Kr=Mo[nr+32>>>2>>>0],Sn=Ir.getTimezoneOffset(),Go=new Date(Ir.getFullYear(),6,1).getTimezoneOffset(),g0=new Date(Ir.getFullYear(),0,1).getTimezoneOffset(),B0=Math.min(g0,Go);return 0>Kr?Mo[nr+32>>>2>>>0]=+(Go!=g0&&B0==Sn):0<Kr!=(B0==Sn)&&(Go=Math.max(g0,Go),Ir.setTime(Ir.getTime()+6e4*((0<Kr?B0:Go)-Sn))),Mo[nr+24>>>2>>>0]=Ir.getDay(),Mo[nr+28>>>2>>>0]=(sv(Ir.getFullYear())?wy:uy)[Ir.getMonth()]+Ir.getDate()-1|0,Mo[nr>>>2>>>0]=Ir.getSeconds(),Mo[nr+4>>>2>>>0]=Ir.getMinutes(),Mo[nr+8>>>2>>>0]=Ir.getHours(),Mo[nr+12>>>2>>>0]=Ir.getDate(),Mo[nr+16>>>2>>>0]=Ir.getMonth(),Mo[nr+20>>>2>>>0]=Ir.getYear(),nr=Ir.getTime(),BigInt(isNaN(nr)?-1:nr/1e3)},U:function(){return-52},V:function(){},N:function(nr,Ir,Kr,Sn){Kr>>>=0,Sn>>>=0;var Go=new Date().getFullYear(),g0=new Date(Go,0,1),B0=new Date(Go,6,1);Go=g0.getTimezoneOffset();var q0=B0.getTimezoneOffset();zo[nr>>>0>>>2>>>0]=60*Math.max(Go,q0),Mo[Ir>>>0>>>2>>>0]=+(Go!=q0),nr=J0=>J0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],g0=nr(g0),B0=nr(B0),q0<Go?(Z0(g0,c0,Kr,17),Z0(B0,c0,Sn,17)):(Z0(g0,c0,Sn,17),Z0(B0,c0,Kr,17))},v:()=>{m0("")},d:function(nr,Ir,Kr){return nr>>>=0,Ir=_y(Ir>>>0,Kr>>>0),C0[nr](...Ir)},I:function(nr,Ir,Kr){return nr>>>=0,Ir=_y(Ir>>>0,Kr>>>0),C0[nr](...Ir)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(nr){nr>>>=0;var Ir=c0.length;if(4294901760<nr)return!1;for(var Kr=1;4>=Kr;Kr*=2){var Sn=Ir*(1+.2/Kr);Sn=Math.min(Sn,nr+100663296);var Go=Math;Sn=Math.max(nr,Sn);e:{Go=(Go.min.call(Go,4294901760,Sn+(65536-Sn%65536)%65536)-An.buffer.byteLength+65535)/65536;try{An.grow(Go),wn();var g0=1;break e}catch{}g0=void 0}if(g0)return!0}return!1},$:function(nr,Ir){nr>>>=0,Ir>>>=0;var Kr=0;return bv().forEach((Sn,Go)=>{var g0=Ir+Kr;for(Go=zo[nr+4*Go>>>2>>>0]=g0,g0=0;g0<Sn.length;++g0)t0[Go++>>>0]=Sn.charCodeAt(g0);t0[Go>>>0]=0,Kr+=Sn.length+1}),0},aa:function(nr,Ir){nr>>>=0,Ir>>>=0;var Kr=bv();zo[nr>>>2>>>0]=Kr.length;var Sn=0;return Kr.forEach(Go=>Sn+=Go.length+1),zo[Ir>>>2>>>0]=Sn,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(nr,Ir,Kr,Sn){Ir>>>=0,Kr>>>=0,Sn>>>=0;for(var Go=0,g0=0;g0<Kr;g0++){var B0=zo[Ir>>>2>>>0],q0=zo[Ir+4>>>2>>>0];Ir+=8;for(var J0=0;J0<q0;J0++){var X0=c0[B0+J0>>>0],y1=Ky[nr];X0===0||X0===10?((nr===1?jr:Yr)(d0(y1,0)),y1.length=0):y1.push(X0)}Go+=q0}return zo[Sn>>>2>>>0]=Go,0},fa:Xy,p:function(nr,Ir,Kr,Sn){return Xy(nr>>>0,Ir>>>0,Kr>>>0,Sn>>>0)}},b1=function(){function nr(Kr){return b1=Kr.exports,b1=p1(),b1=fy(),An=b1.ja,wn(),ko.unshift(b1.ka),i0--,i0==0&&a0&&(Kr=a0,a0=null,Kr()),b1}var Ir={a:My};if(i0++,at.instantiateWasm)try{return at.instantiateWasm(Ir,nr)}catch(Kr){Yr(`Module.instantiateWasm callback failed with error: ${Kr}`),vt(Kr)}return M0(Ir,function(Kr){nr(Kr.instance)}).catch(vt),{}}(),Ty=nr=>(Ty=b1.la)(nr);at._OrtInit=(nr,Ir)=>(at._OrtInit=b1.ma)(nr,Ir),at._OrtGetLastError=(nr,Ir)=>(at._OrtGetLastError=b1.na)(nr,Ir),at._OrtCreateSessionOptions=(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0)=>(at._OrtCreateSessionOptions=b1.oa)(nr,Ir,Kr,Sn,Go,g0,B0,q0,J0,X0),at._OrtAppendExecutionProvider=(nr,Ir)=>(at._OrtAppendExecutionProvider=b1.pa)(nr,Ir),at._OrtAddFreeDimensionOverride=(nr,Ir,Kr)=>(at._OrtAddFreeDimensionOverride=b1.qa)(nr,Ir,Kr),at._OrtAddSessionConfigEntry=(nr,Ir,Kr)=>(at._OrtAddSessionConfigEntry=b1.ra)(nr,Ir,Kr),at._OrtReleaseSessionOptions=nr=>(at._OrtReleaseSessionOptions=b1.sa)(nr),at._OrtCreateSession=(nr,Ir,Kr)=>(at._OrtCreateSession=b1.ta)(nr,Ir,Kr),at._OrtReleaseSession=nr=>(at._OrtReleaseSession=b1.ua)(nr),at._OrtGetInputOutputCount=(nr,Ir,Kr)=>(at._OrtGetInputOutputCount=b1.va)(nr,Ir,Kr),at._OrtGetInputName=(nr,Ir)=>(at._OrtGetInputName=b1.wa)(nr,Ir),at._OrtGetOutputName=(nr,Ir)=>(at._OrtGetOutputName=b1.xa)(nr,Ir),at._OrtFree=nr=>(at._OrtFree=b1.ya)(nr),at._OrtCreateTensor=(nr,Ir,Kr,Sn,Go,g0)=>(at._OrtCreateTensor=b1.za)(nr,Ir,Kr,Sn,Go,g0),at._OrtGetTensorData=(nr,Ir,Kr,Sn,Go)=>(at._OrtGetTensorData=b1.Aa)(nr,Ir,Kr,Sn,Go),at._OrtReleaseTensor=nr=>(at._OrtReleaseTensor=b1.Ba)(nr),at._OrtCreateRunOptions=(nr,Ir,Kr,Sn)=>(at._OrtCreateRunOptions=b1.Ca)(nr,Ir,Kr,Sn),at._OrtAddRunConfigEntry=(nr,Ir,Kr)=>(at._OrtAddRunConfigEntry=b1.Da)(nr,Ir,Kr),at._OrtReleaseRunOptions=nr=>(at._OrtReleaseRunOptions=b1.Ea)(nr),at._OrtCreateBinding=nr=>(at._OrtCreateBinding=b1.Fa)(nr),at._OrtBindInput=(nr,Ir,Kr)=>(at._OrtBindInput=b1.Ga)(nr,Ir,Kr),at._OrtBindOutput=(nr,Ir,Kr,Sn)=>(at._OrtBindOutput=b1.Ha)(nr,Ir,Kr,Sn),at._OrtClearBoundOutputs=nr=>(at._OrtClearBoundOutputs=b1.Ia)(nr),at._OrtReleaseBinding=nr=>(at._OrtReleaseBinding=b1.Ja)(nr),at._OrtRunWithBinding=(nr,Ir,Kr,Sn,Go)=>(at._OrtRunWithBinding=b1.Ka)(nr,Ir,Kr,Sn,Go),at._OrtRun=(nr,Ir,Kr,Sn,Go,g0,B0,q0)=>(at._OrtRun=b1.La)(nr,Ir,Kr,Sn,Go,g0,B0,q0),at._OrtEndProfiling=nr=>(at._OrtEndProfiling=b1.Ma)(nr),at._JsepOutput=(nr,Ir,Kr)=>(at._JsepOutput=b1.Na)(nr,Ir,Kr),at._JsepGetNodeName=nr=>(at._JsepGetNodeName=b1.Oa)(nr);var kv=at._malloc=nr=>(kv=at._malloc=b1.Pa)(nr),fv=at._free=nr=>(fv=at._free=b1.Qa)(nr),cy=nr=>(cy=b1.Sa)(nr),ry=nr=>(ry=b1.Ta)(nr),dy=()=>(dy=b1.Ua)(),$v=nr=>($v=b1.Wa)(nr),Cy=()=>(Cy=b1.Xa)(),Ev=nr=>(Ev=b1.Ya)(nr),Ov=()=>(Ov=b1.Za)();at.___start_em_js=837952,at.___stop_em_js=838113;function fy(){var nr=b1;nr=Object.assign({},nr);var Ir=Kr=>Sn=>Kr(Sn)>>>0;return nr.la=Ir(nr.la),nr.Pa=Ir(nr.Pa),nr.Ta=Ir(nr.Ta),nr.Ua=(Kr=>()=>Kr()>>>0)(nr.Ua),nr}at.stackSave=()=>dy(),at.stackRestore=nr=>cy(nr),at.stackAlloc=nr=>ry(nr),at.UTF8ToString=E0,at.stringToUTF8=(nr,Ir,Kr)=>Z0(nr,c0,Ir,Kr),at.lengthBytesUTF8=V0;var jv;a0=function nr(){jv||vn(),jv||(a0=nr)};function vn(){if(!(0<i0)){if(at.preRun)for(typeof at.preRun=="function"&&(at.preRun=[at.preRun]);at.preRun.length;){var nr=at.preRun.shift();r0.unshift(nr)}for(;0<r0.length;)r0.shift()(at);if(!(0<i0||jv||(jv=!0,at.calledRun=!0,No))){for(;0<ko.length;)ko.shift()(at);for($t(at);0<_n.length;)_n.shift()(at)}}}return vn(),b}})();typeof a=="object"&&typeof s=="object"?s.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Ba=Er(()=>{}),Da=Er(()=>{}),Ma={};kr(Ma,{cpus:()=>fc});var fc,Ua=j(()=>{fc=void 0}),Va=Er((a,s)=>{var c=(()=>{var et;var d=typeof document<"u"?(et=document.currentScript)==null?void 0:et.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){function at(){return Zr.buffer!=_n.buffer&&P0(),_n}function $t(){return Zr.buffer!=_n.buffer&&P0(),i0}function vt(){return Zr.buffer!=_n.buffer&&P0(),a0}function b(){return Zr.buffer!=_n.buffer&&P0(),m0}function pt(){return Zr.buffer!=_n.buffer&&P0(),p0}function st(){return Zr.buffer!=_n.buffer&&P0(),x0}function wt(){return Zr.buffer!=_n.buffer&&P0(),S0}function Tt(){return Zr.buffer!=_n.buffer&&P0(),f0}var Ct=g,jt,Lt,Ht=new Promise((or,Hr)=>{jt=or,Lt=Hr});Ct.mountExternalData=(or,Hr)=>{(Ct.Db||(Ct.Db=new Map)).set(or,Hr)},Ct.unmountExternalData=()=>{delete Ct.Db};let Gt=()=>{let or=(xn,Ro,s0)=>(...y0)=>{let j0=Ov,Y0=Ro==null?void 0:Ro();y0=xn(...y0);let s1=Ro==null?void 0:Ro();return Y0!==s1&&(xn=s1,s0(Y0),Ro=s0=null),Ov!=j0?Go():y0},Hr=xn=>async(...Ro)=>{var s0;try{if(Ct.Cb)throw Error("Session already started");let y0=Ct.Cb={ec:Ro[0],errors:[]},j0=await xn(...Ro);if(Ct.Cb!==y0)throw Error("Session mismatch");(s0=Ct.Kb)==null||s0.flush();let Y0=y0.errors;if(0<Y0.length){let s1=await Promise.all(Y0);if(s1=s1.filter(n1=>n1),0<s1.length)throw Error(s1.join(`
`))}return j0}finally{Ct.Cb=null}};Ct._OrtCreateSession=or(Ct._OrtCreateSession,()=>Ct._OrtCreateSession,xn=>Ct._OrtCreateSession=xn),Ct._OrtRun=Hr(or(Ct._OrtRun,()=>Ct._OrtRun,xn=>Ct._OrtRun=xn)),Ct._OrtRunWithBinding=Hr(or(Ct._OrtRunWithBinding,()=>Ct._OrtRunWithBinding,xn=>Ct._OrtRunWithBinding=xn)),Ct._OrtBindInput=or(Ct._OrtBindInput,()=>Ct._OrtBindInput,xn=>Ct._OrtBindInput=xn),Gt=void 0};Ct.jsepInit=(or,Hr)=>{if(Gt==null||Gt(),or==="webgpu"){[Ct.Kb,Ct.Wb,Ct.$b,Ct.Lb,Ct.Zb,Ct.ob,Ct.ac,Ct.cc,Ct.Xb,Ct.Yb,Ct.bc]=Hr;let xn=Ct.Kb;Ct.jsepRegisterBuffer=(Ro,s0,y0,j0)=>xn.registerBuffer(Ro,s0,y0,j0),Ct.jsepGetBuffer=Ro=>xn.getBuffer(Ro),Ct.jsepCreateDownloader=(Ro,s0,y0)=>xn.createDownloader(Ro,s0,y0),Ct.jsepOnReleaseSession=Ro=>{xn.onReleaseSession(Ro)},Ct.jsepOnRunStart=Ro=>xn.onRunStart(Ro)}};var Kt=Object.assign({},Ct),tr="./this.program",rr=(or,Hr)=>{throw Hr},Lr=typeof window=="object",jr=typeof importScripts=="function",Yr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",An=Ct.ENVIRONMENT_IS_PTHREAD||!1,No="";function o0(or){return Ct.locateFile?Ct.locateFile(or,No):No+or}var t0,c0,n0;if(Yr){var Qo=(Mi(),sr(Di)),Mo=(Wi(),sr(Ui));No=jr?Mo.dirname(No)+"/":__dirname+"/",t0=(or,Hr)=>(or=Z0(or)?new URL(or):Mo.normalize(or),Qo.readFileSync(or,Hr?void 0:"utf8")),n0=or=>(or=t0(or,!0),or.buffer||(or=new Uint8Array(or)),or),c0=(or,Hr,xn,Ro=!0)=>{or=Z0(or)?new URL(or):Mo.normalize(or),Qo.readFile(or,Ro?void 0:"utf8",(s0,y0)=>{s0?xn(s0):Hr(Ro?y0.buffer:y0)})},!Ct.thisProgram&&1<process.argv.length&&(tr=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),rr=(or,Hr)=>{throw process.exitCode=or,Hr},global.Worker=Ba().Worker}else(Lr||jr)&&(jr?No=self.location.href:typeof document<"u"&&document.currentScript&&(No=document.currentScript.src),typeof d<"u"&&d&&(No=d),No.startsWith("blob:")?No="":No=No.substr(0,No.replace(/[?#].*/,"").lastIndexOf("/")+1),Yr||(t0=or=>{var Hr=new XMLHttpRequest;return Hr.open("GET",or,!1),Hr.send(null),Hr.responseText},jr&&(n0=or=>{var Hr=new XMLHttpRequest;return Hr.open("GET",or,!1),Hr.responseType="arraybuffer",Hr.send(null),new Uint8Array(Hr.response)}),c0=(or,Hr,xn)=>{var Ro=new XMLHttpRequest;Ro.open("GET",or,!0),Ro.responseType="arraybuffer",Ro.onload=()=>{Ro.status==200||Ro.status==0&&Ro.response?Hr(Ro.response):xn()},Ro.onerror=xn,Ro.send(null)}));Yr&&typeof performance>"u"&&(global.performance=Da().performance);var zo=console.log.bind(console),e0=console.error.bind(console);Yr&&(zo=(...or)=>Qo.writeSync(1,or.join(" ")+`
`),e0=(...or)=>Qo.writeSync(2,or.join(" ")+`
`));var Xr=zo,In=e0;Object.assign(Ct,Kt),Kt=null;var Zr,wn,r0=!1,ko,_n,i0,a0,m0,p0,x0,S0,R0,$0,f0;function P0(){var or=Zr.buffer;Ct.HEAP8=_n=new Int8Array(or),Ct.HEAP16=a0=new Int16Array(or),Ct.HEAPU8=i0=new Uint8Array(or),Ct.HEAPU16=m0=new Uint16Array(or),Ct.HEAP32=p0=new Int32Array(or),Ct.HEAPU32=x0=new Uint32Array(or),Ct.HEAPF32=S0=new Float32Array(or),Ct.HEAPF64=f0=new Float64Array(or),Ct.HEAP64=R0=new BigInt64Array(or),Ct.HEAPU64=$0=new BigUint64Array(or)}var M0=16777216;if(An)Zr=Ct.wasmMemory;else if(Ct.wasmMemory)Zr=Ct.wasmMemory;else if(Zr=new WebAssembly.Memory({initial:M0/65536,maximum:65536,shared:!0}),!(Zr.buffer instanceof SharedArrayBuffer))throw In("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Yr&&In("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");P0(),M0=Zr.buffer.byteLength;var C0=[],Uo=[],l0=[],b0=0,k0=null;function d0(){if(b0--,b0==0&&k0){var or=k0;k0=null,or()}}function E0(or){throw or="Aborted("+or+")",In(or),r0=!0,ko=1,or=new WebAssembly.RuntimeError(or+". Build with -sASSERTIONS for more info."),Lt(or),or}var V0=or=>or.startsWith("data:application/octet-stream;base64,"),Z0=or=>or.startsWith("file://"),h1;h1="ort-wasm-simd-threaded.wasm",V0(h1)||(h1=o0(h1));function r1(or){if(n0)return n0(or);throw"both async and sync fetching of the wasm failed"}function I1(or){if(Lr||jr){if(typeof fetch=="function"&&!Z0(or))return fetch(or,{credentials:"same-origin"}).then(Hr=>{if(!Hr.ok)throw`failed to load wasm binary file at '${or}'`;return Hr.arrayBuffer()}).catch(()=>r1(or));if(c0)return new Promise((Hr,xn)=>{c0(or,Ro=>Hr(new Uint8Array(Ro)),xn)})}return Promise.resolve().then(()=>r1(or))}function f1(or,Hr,xn){return I1(or).then(Ro=>WebAssembly.instantiate(Ro,Hr)).then(xn,Ro=>{In(`failed to asynchronously prepare wasm: ${Ro}`),E0(Ro)})}function q1(or,Hr){var xn=h1;return typeof WebAssembly.instantiateStreaming!="function"||V0(xn)||Z0(xn)||Yr||typeof fetch!="function"?f1(xn,or,Hr):fetch(xn,{credentials:"same-origin"}).then(Ro=>WebAssembly.instantiateStreaming(Ro,or).then(Hr,function(s0){return In(`wasm streaming compile failed: ${s0}`),In("falling back to ArrayBuffer instantiation"),f1(xn,or,Hr)}))}var c1={826468:(or,Hr,xn,Ro)=>{if(typeof Ct>"u"||!Ct.Db)return 1;if(or=I0(or>>>0),or.startsWith("./")&&(or=or.substring(2)),or=Ct.Db.get(or),!or)return 2;if(Hr>>>=0,xn>>>=0,Ro>>>=0,Hr+xn>or.byteLength)return 3;try{return $t().set(or.subarray(Hr,Hr+xn),Ro>>>0),0}catch{return 4}},826969:()=>{Ct.Xb()},827e3:()=>{Ct.Yb()},827029:()=>{Ct.bc()},827054:or=>Ct.Wb(or),827087:or=>Ct.$b(or),827119:(or,Hr,xn)=>{Ct.Lb(or,Hr,xn,!0)},827158:(or,Hr,xn)=>{Ct.Lb(or,Hr,xn)},827191:or=>{Ct.ob("Abs",or,void 0)},827242:or=>{Ct.ob("Neg",or,void 0)},827293:or=>{Ct.ob("Floor",or,void 0)},827346:or=>{Ct.ob("Ceil",or,void 0)},827398:or=>{Ct.ob("Reciprocal",or,void 0)},827456:or=>{Ct.ob("Sqrt",or,void 0)},827508:or=>{Ct.ob("Exp",or,void 0)},827559:or=>{Ct.ob("Erf",or,void 0)},827610:or=>{Ct.ob("Sigmoid",or,void 0)},827665:(or,Hr,xn)=>{Ct.ob("HardSigmoid",or,{alpha:Hr,beta:xn})},827744:or=>{Ct.ob("Log",or,void 0)},827795:or=>{Ct.ob("Sin",or,void 0)},827846:or=>{Ct.ob("Cos",or,void 0)},827897:or=>{Ct.ob("Tan",or,void 0)},827948:or=>{Ct.ob("Asin",or,void 0)},828e3:or=>{Ct.ob("Acos",or,void 0)},828052:or=>{Ct.ob("Atan",or,void 0)},828104:or=>{Ct.ob("Sinh",or,void 0)},828156:or=>{Ct.ob("Cosh",or,void 0)},828208:or=>{Ct.ob("Asinh",or,void 0)},828261:or=>{Ct.ob("Acosh",or,void 0)},828314:or=>{Ct.ob("Atanh",or,void 0)},828367:or=>{Ct.ob("Tanh",or,void 0)},828419:or=>{Ct.ob("Not",or,void 0)},828470:(or,Hr,xn)=>{Ct.ob("Clip",or,{min:Hr,max:xn})},828539:or=>{Ct.ob("Clip",or,void 0)},828591:(or,Hr)=>{Ct.ob("Elu",or,{alpha:Hr})},828649:or=>{Ct.ob("Relu",or,void 0)},828701:(or,Hr)=>{Ct.ob("LeakyRelu",or,{alpha:Hr})},828765:(or,Hr)=>{Ct.ob("ThresholdedRelu",or,{alpha:Hr})},828835:(or,Hr)=>{Ct.ob("Cast",or,{to:Hr})},828893:or=>{Ct.ob("Add",or,void 0)},828944:or=>{Ct.ob("Sub",or,void 0)},828995:or=>{Ct.ob("Mul",or,void 0)},829046:or=>{Ct.ob("Div",or,void 0)},829097:or=>{Ct.ob("Pow",or,void 0)},829148:or=>{Ct.ob("Equal",or,void 0)},829201:or=>{Ct.ob("Greater",or,void 0)},829256:or=>{Ct.ob("GreaterOrEqual",or,void 0)},829318:or=>{Ct.ob("Less",or,void 0)},829370:or=>{Ct.ob("LessOrEqual",or,void 0)},829429:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceMean",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},829588:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceMax",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},829746:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceMin",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},829904:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceProd",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},830063:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceSum",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},830221:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceL1",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},830378:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceL2",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},830535:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceLogSum",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},830696:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceSumSquare",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},830860:(or,Hr,xn,Ro,s0)=>{Ct.ob("ReduceLogSumExp",or,{keepDims:!!Hr,noopWithEmptyAxes:!!xn,axes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},831024:or=>{Ct.ob("Where",or,void 0)},831077:(or,Hr,xn)=>{Ct.ob("Transpose",or,{perm:Hr?Array.from(pt().subarray(Hr>>>0,xn>>>0)):[]})},831185:(or,Hr,xn,Ro)=>{Ct.ob("DepthToSpace",or,{blocksize:Hr,mode:I0(xn),format:Ro?"NHWC":"NCHW"})},831318:(or,Hr,xn,Ro)=>{Ct.ob("DepthToSpace",or,{blocksize:Hr,mode:I0(xn),format:Ro?"NHWC":"NCHW"})},831451:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0,C1)=>{Ct.ob("ConvTranspose",or,{format:s1?"NHWC":"NCHW",autoPad:Hr,dilations:[xn],group:Ro,kernelShape:[s0],pads:[y0,j0],strides:[Y0],wIsConst:()=>!!at()[n1>>>0],outputPadding:w1?Array.from(pt().subarray(w1>>>0,Y1>>>0)):[],outputShape:W1?Array.from(pt().subarray(W1>>>0,L0>>>0)):[],activation:I0(C1)})},831852:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0)=>{Ct.ob("ConvTranspose",or,{format:Y0?"NHWC":"NCHW",autoPad:Hr,dilations:Array.from(pt().subarray(xn>>>0,(xn>>>0)+2>>>0)),group:Ro,kernelShape:Array.from(pt().subarray(s0>>>0,(s0>>>0)+2>>>0)),pads:Array.from(pt().subarray(y0>>>0,(y0>>>0)+4>>>0)),strides:Array.from(pt().subarray(j0>>>0,(j0>>>0)+2>>>0)),wIsConst:()=>!!at()[s1>>>0],outputPadding:n1?Array.from(pt().subarray(n1>>>0,w1>>>0)):[],outputShape:Y1?Array.from(pt().subarray(Y1>>>0,W1>>>0)):[],activation:I0(L0)})},832417:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0,C1)=>{Ct.ob("ConvTranspose",or,{format:s1?"NHWC":"NCHW",autoPad:Hr,dilations:[xn],group:Ro,kernelShape:[s0],pads:[y0,j0],strides:[Y0],wIsConst:()=>!!at()[n1>>>0],outputPadding:w1?Array.from(pt().subarray(w1>>>0,Y1>>>0)):[],outputShape:W1?Array.from(pt().subarray(W1>>>0,L0>>>0)):[],activation:I0(C1)})},832818:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0)=>{Ct.ob("ConvTranspose",or,{format:Y0?"NHWC":"NCHW",autoPad:Hr,dilations:Array.from(pt().subarray(xn>>>0,(xn>>>0)+2>>>0)),group:Ro,kernelShape:Array.from(pt().subarray(s0>>>0,(s0>>>0)+2>>>0)),pads:Array.from(pt().subarray(y0>>>0,(y0>>>0)+4>>>0)),strides:Array.from(pt().subarray(j0>>>0,(j0>>>0)+2>>>0)),wIsConst:()=>!!at()[s1>>>0],outputPadding:n1?Array.from(pt().subarray(n1>>>0,w1>>>0)):[],outputShape:Y1?Array.from(pt().subarray(Y1>>>0,W1>>>0)):[],activation:I0(L0)})},833383:(or,Hr)=>{Ct.ob("GlobalAveragePool",or,{format:Hr?"NHWC":"NCHW"})},833474:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0,C1,U1)=>{Ct.ob("AveragePool",or,{format:U1?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:xn,count_include_pad:Ro,storage_order:s0,dilations:[y0,j0],kernel_shape:[Y0,s1],pads:[n1,w1,Y1,W1],strides:[L0,C1]})},833758:(or,Hr)=>{Ct.ob("GlobalAveragePool",or,{format:Hr?"NHWC":"NCHW"})},833849:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0,C1,U1)=>{Ct.ob("AveragePool",or,{format:U1?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:xn,count_include_pad:Ro,storage_order:s0,dilations:[y0,j0],kernel_shape:[Y0,s1],pads:[n1,w1,Y1,W1],strides:[L0,C1]})},834133:(or,Hr)=>{Ct.ob("GlobalMaxPool",or,{format:Hr?"NHWC":"NCHW"})},834220:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0,C1,U1)=>{Ct.ob("MaxPool",or,{format:U1?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:xn,count_include_pad:Ro,storage_order:s0,dilations:[y0,j0],kernel_shape:[Y0,s1],pads:[n1,w1,Y1,W1],strides:[L0,C1]})},834500:(or,Hr)=>{Ct.ob("GlobalMaxPool",or,{format:Hr?"NHWC":"NCHW"})},834587:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0,C1,U1)=>{Ct.ob("MaxPool",or,{format:U1?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:xn,count_include_pad:Ro,storage_order:s0,dilations:[y0,j0],kernel_shape:[Y0,s1],pads:[n1,w1,Y1,W1],strides:[L0,C1]})},834867:(or,Hr,xn,Ro,s0)=>{Ct.ob("Gemm",or,{alpha:Hr,beta:xn,transA:Ro,transB:s0})},834971:or=>{Ct.ob("MatMul",or,void 0)},835025:(or,Hr,xn,Ro)=>{Ct.ob("ArgMax",or,{keepDims:!!Hr,selectLastIndex:!!xn,axis:Ro})},835133:(or,Hr,xn,Ro)=>{Ct.ob("ArgMin",or,{keepDims:!!Hr,selectLastIndex:!!xn,axis:Ro})},835241:(or,Hr)=>{Ct.ob("Softmax",or,{axis:Hr})},835304:(or,Hr)=>{Ct.ob("Concat",or,{axis:Hr})},835364:(or,Hr,xn,Ro,s0)=>{Ct.ob("Split",or,{axis:Hr,numOutputs:xn,splitSizes:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},835504:or=>{Ct.ob("Expand",or,void 0)},835558:(or,Hr)=>{Ct.ob("Gather",or,{axis:Number(Hr)})},835629:(or,Hr)=>{Ct.ob("GatherElements",or,{axis:Number(Hr)})},835708:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1)=>{Ct.ob("Resize",or,{antialias:Hr,axes:xn?Array.from(pt().subarray(xn>>>0,Ro>>>0)):[],coordinateTransformMode:I0(s0),cubicCoeffA:y0,excludeOutside:j0,extrapolationValue:Y0,keepAspectRatioPolicy:I0(s1),mode:I0(n1),nearestMode:I0(w1)})},836054:(or,Hr,xn,Ro,s0,y0,j0)=>{Ct.ob("Slice",or,{starts:Hr?Array.from(pt().subarray(Hr>>>0,xn>>>0)):[],ends:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[],axes:y0?Array.from(pt().subarray(y0>>>0,j0>>>0)):[]})},836270:or=>{Ct.ob("Tile",or,void 0)},836322:(or,Hr,xn,Ro)=>{Ct.ob("LayerNormalization",or,{axis:Hr,epsilon:xn,simplified:!!Ro})},836433:(or,Hr,xn)=>{Ct.ob("InstanceNormalization",or,{epsilon:Hr,format:xn?"NHWC":"NCHW"})},836547:(or,Hr,xn)=>{Ct.ob("InstanceNormalization",or,{epsilon:Hr,format:xn?"NHWC":"NCHW"})},836661:or=>{Ct.ob("Range",or,void 0)},836714:(or,Hr)=>{Ct.ob("Einsum",or,{equation:I0(Hr)})},836795:(or,Hr,xn,Ro,s0)=>{Ct.ob("Pad",or,{mode:Hr,value:xn,pads:Ro?Array.from(pt().subarray(Ro>>>0,s0>>>0)):[]})},836922:(or,Hr,xn,Ro,s0,y0)=>{Ct.ob("BatchNormalization",or,{epsilon:Hr,momentum:xn,spatial:!!s0,trainingMode:!!Ro,format:y0?"NHWC":"NCHW"})},837091:(or,Hr,xn,Ro,s0,y0)=>{Ct.ob("BatchNormalization",or,{epsilon:Hr,momentum:xn,spatial:!!s0,trainingMode:!!Ro,format:y0?"NHWC":"NCHW"})},837260:(or,Hr,xn)=>{Ct.ob("CumSum",or,{exclusive:Number(Hr),reverse:Number(xn)})},837357:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1)=>{Ct.ob("Attention",or,{numHeads:Hr,isUnidirectional:xn,maskFilterValue:Ro,scale:s0,doRotary:y0,qkvHiddenSizes:j0?Array.from(pt().subarray(Number(Y0)>>>0,Number(Y0)+j0>>>0)):[],pastPresentShareBuffer:!!s1})},837629:or=>{Ct.ob("BiasAdd",or,void 0)},837684:or=>{Ct.ob("BiasSplitGelu",or,void 0)},837745:or=>{Ct.ob("FastGelu",or,void 0)},837801:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1)=>{Ct.ob("Conv",or,{format:s1?"NHWC":"NCHW",auto_pad:Hr,dilations:[xn],group:Ro,kernel_shape:[s0],pads:y0?Array.from(pt().subarray(y0>>>0,j0>>>0)):[],strides:[Y0],w_is_const:()=>!!at()[n1>>>0],activation:I0(w1),activation_params:Y1?Array.from(wt().subarray(Y1>>>0,W1>>>0)):[]})},838171:(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1,w1,Y1,W1,L0,C1,U1)=>{Ct.ob("Conv",or,{format:Y1?"NHWC":"NCHW",auto_pad:Hr,dilations:[xn,Ro],group:s0,kernel_shape:[y0,j0],pads:Y0?Array.from(pt().subarray(Y0>>>0,s1>>>0)):[],strides:[n1,w1],w_is_const:()=>!!at()[W1>>>0],activation:I0(L0),activation_params:C1?Array.from(wt().subarray(C1>>>0,U1>>>0)):[]})},838562:or=>{Ct.ob("Gelu",or,void 0)},838614:(or,Hr,xn,Ro,s0,y0)=>{Ct.ob("MatMulNBits",or,{k:Hr,n:xn,accuracyLevel:Ro,bits:s0,blockSize:y0})},838741:(or,Hr,xn,Ro,s0,y0)=>{Ct.ob("MultiHeadAttention",or,{numHeads:Hr,isUnidirectional:xn,maskFilterValue:Ro,scale:s0,doRotary:y0})},838900:(or,Hr,xn,Ro,s0)=>{Ct.ob("RotaryEmbedding",or,{interleaved:!!Hr,numHeads:xn,rotaryEmbeddingDim:Ro,scale:s0})},839039:(or,Hr,xn)=>{Ct.ob("SkipLayerNormalization",or,{epsilon:Hr,simplified:!!xn})},839141:(or,Hr,xn)=>{Ct.ob("SkipLayerNormalization",or,{epsilon:Hr,simplified:!!xn})},839243:(or,Hr,xn,Ro)=>{Ct.ob("LayerNormalization",or,{axis:Hr,epsilon:xn,simplified:!!Ro})},839354:or=>{Ct.ac(or)},839388:(or,Hr)=>Ct.cc(or,Hr,Ct.Cb.ec,Ct.Cb.errors)};function B1(or){this.name="ExitStatus",this.message=`Program terminated with exit(${or})`,this.status=or}var nv=or=>{or.terminate(),or.onmessage=()=>{}},iv=or=>{U0.xb.length==0&&(T0(),U0.Mb(U0.xb[0]));var Hr=U0.xb.pop();if(!Hr)return 6;U0.yb.push(Hr),U0.ub[or.wb]=Hr,Hr.wb=or.wb;var xn={cmd:"run",start_routine:or.fc,arg:or.Rb,pthread_ptr:or.wb};return Yr&&Hr.unref(),Hr.postMessage(xn,or.mc),0},t1=0,dv=or=>{var Hr=wx();return or=or(),Zy(Hr),or},$1=(or,Hr,...xn)=>dv(()=>{for(var Ro=2*xn.length,s0=jy(8*Ro),y0=s0>>>3,j0=0;j0<xn.length;j0++){var Y0=xn[j0];typeof Y0=="bigint"?(R0[y0+2*j0]=1n,R0[y0+2*j0+1]=Y0):(R0[y0+2*j0]=0n,Tt()[y0+2*j0+1>>>0]=Y0)}return z$(or,0,Ro,s0,Hr)});function rv(or){var Hr;if(An)return $1(0,1,or);ko=or,0<t1||(U0.hc(),(Hr=Ct.onExit)==null||Hr.call(Ct,or),r0=!0),rr(or,new B1(or))}var _g=or=>{if(ko=or,An)throw Q0(or),"unwind";rv(or)};function w0(){for(var or=Ct.numThreads;or--;)T0();C0.unshift(()=>{b0++,F0(()=>d0())})}function T0(){var or=o0("ort-wasm-simd-threaded.worker.js");or=new Worker(or),U0.xb.push(or)}function F0(or){An?or():Promise.all(U0.xb.map(U0.Mb)).then(or)}var U0={xb:[],yb:[],Qb:[],ub:{},Gb(){An?(U0.receiveObjectTransfer=U0.dc,U0.threadInitTLS=U0.Pb,U0.setExitStatus=U0.Ob):w0()},Ob:or=>ko=or,pc:["$terminateWorker"],hc:()=>{for(var or of U0.yb)nv(or);for(or of U0.xb)nv(or);U0.xb=[],U0.yb=[],U0.ub=[]},Nb:or=>{var Hr=or.wb;delete U0.ub[Hr],U0.xb.push(or),U0.yb.splice(U0.yb.indexOf(or),1),or.wb=0,bx(Hr)},dc(){},Pb(){U0.Qb.forEach(or=>or())},Mb:or=>new Promise(Hr=>{or.onmessage=y0=>{y0=y0.data;var j0=y0.cmd;if(y0.targetThread&&y0.targetThread!=J1()){var Y0=U0.ub[y0.targetThread];Y0?Y0.postMessage(y0,y0.transferList):In(`Internal error! Worker sent a message "${j0}" to target pthread ${y0.targetThread}, but that thread no longer exists!`)}else j0==="checkMailbox"?fv():j0==="spawnThread"?iv(y0):j0==="cleanupThread"?U0.Nb(U0.ub[y0.thread]):j0==="killThread"?(y0=y0.thread,j0=U0.ub[y0],delete U0.ub[y0],nv(j0),bx(y0),U0.yb.splice(U0.yb.indexOf(j0),1),j0.wb=0):j0==="cancelThread"?U0.ub[y0.thread].postMessage({cmd:"cancel"}):j0==="loaded"?(or.loaded=!0,Yr&&!or.wb&&or.unref(),Hr(or)):j0==="alert"?alert(`Thread ${y0.threadId}: ${y0.text}`):y0.target==="setimmediate"?or.postMessage(y0):j0==="callHandler"?Ct[y0.handler](...y0.args):j0&&In(`worker sent an unknown command ${j0}`)},or.onerror=y0=>{throw In(`worker sent an error! ${y0.filename}:${y0.lineno}: ${y0.message}`),y0},Yr&&(or.on("message",y0=>or.onmessage({data:y0})),or.on("error",y0=>or.onerror(y0)));var xn=[],Ro=["onExit"],s0;for(s0 of Ro)Ct.hasOwnProperty(s0)&&xn.push(s0);or.postMessage({cmd:"load",handlers:xn,urlOrBlob:Ct.mainScriptUrlOrBlob||d,wasmMemory:Zr,wasmModule:wn})})};Ct.PThread=U0;var h0=or=>{for(;0<or.length;)or.shift()(Ct)};Ct.establishStackSpace=()=>{var or=J1(),Hr=st()[or+52>>>2>>>0];or=st()[or+56>>>2>>>0],xx(Hr,Hr-or),Zy(Hr)};function Q0(or){if(An)return $1(1,0,or);_g(or)}Ct.invokeEntryPoint=(or,Hr)=>{t1=0,or=_x(or,Hr),0<t1?U0.Ob(or):$x(or)};class l1{constructor(Hr){this.Ib=Hr-24}Gb(Hr,xn){st()[this.Ib+16>>>2>>>0]=0,st()[this.Ib+4>>>2>>>0]=Hr,st()[this.Ib+8>>>2>>>0]=xn}}var e1=0;function m1(or,Hr,xn,Ro){return An?$1(2,1,or,Hr,xn,Ro):T1(or,Hr,xn,Ro)}function T1(or,Hr,xn,Ro){if(or>>>=0,Hr>>>=0,xn>>>=0,Ro>>>=0,typeof SharedArrayBuffer>"u")return In("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var s0=[];return An&&s0.length===0?m1(or,Hr,xn,Ro):(or={fc:xn,wb:or,Rb:Ro,mc:s0},An?(or.oc="spawnThread",postMessage(or,s0),0):iv(or))}var G1=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,P1=(or,Hr,xn)=>{Hr>>>=0;var Ro=Hr+xn;for(xn=Hr;or[xn]&&!(xn>=Ro);)++xn;if(16<xn-Hr&&or.buffer&&G1)return G1.decode(or.buffer instanceof SharedArrayBuffer?or.slice(Hr,xn):or.subarray(Hr,xn));for(Ro="";Hr<xn;){var s0=or[Hr++];if(s0&128){var y0=or[Hr++]&63;if((s0&224)==192)Ro+=String.fromCharCode((s0&31)<<6|y0);else{var j0=or[Hr++]&63;s0=(s0&240)==224?(s0&15)<<12|y0<<6|j0:(s0&7)<<18|y0<<12|j0<<6|or[Hr++]&63,65536>s0?Ro+=String.fromCharCode(s0):(s0-=65536,Ro+=String.fromCharCode(55296|s0>>10,56320|s0&1023))}}else Ro+=String.fromCharCode(s0)}return Ro},I0=(or,Hr)=>(or>>>=0)?P1($t(),or,Hr):"";function p1(or,Hr,xn){return An?$1(3,1,or,Hr,xn):0}function x1(or,Hr){if(An)return $1(4,1,or,Hr)}var R1=or=>{for(var Hr=0,xn=0;xn<or.length;++xn){var Ro=or.charCodeAt(xn);127>=Ro?Hr++:2047>=Ro?Hr+=2:55296<=Ro&&57343>=Ro?(Hr+=4,++xn):Hr+=3}return Hr},D1=(or,Hr,xn,Ro)=>{if(xn>>>=0,!(0<Ro))return 0;var s0=xn;Ro=xn+Ro-1;for(var y0=0;y0<or.length;++y0){var j0=or.charCodeAt(y0);if(55296<=j0&&57343>=j0){var Y0=or.charCodeAt(++y0);j0=65536+((j0&1023)<<10)|Y0&1023}if(127>=j0){if(xn>=Ro)break;Hr[xn++>>>0]=j0}else{if(2047>=j0){if(xn+1>=Ro)break;Hr[xn++>>>0]=192|j0>>6}else{if(65535>=j0){if(xn+2>=Ro)break;Hr[xn++>>>0]=224|j0>>12}else{if(xn+3>=Ro)break;Hr[xn++>>>0]=240|j0>>18,Hr[xn++>>>0]=128|j0>>12&63}Hr[xn++>>>0]=128|j0>>6&63}Hr[xn++>>>0]=128|j0&63}}return Hr[xn>>>0]=0,xn-s0},K1=(or,Hr,xn)=>D1(or,$t(),Hr,xn);function vv(or,Hr){if(An)return $1(5,1,or,Hr)}function yv(or,Hr,xn){if(An)return $1(6,1,or,Hr,xn)}function gv(or,Hr,xn){return An?$1(7,1,or,Hr,xn):0}function qv(or,Hr){if(An)return $1(8,1,or,Hr)}function ov(or,Hr,xn){if(An)return $1(9,1,or,Hr,xn)}function Lv(or,Hr,xn,Ro){if(An)return $1(10,1,or,Hr,xn,Ro)}function Rv(or,Hr,xn,Ro){if(An)return $1(11,1,or,Hr,xn,Ro)}function $y(or,Hr,xn,Ro){if(An)return $1(12,1,or,Hr,xn,Ro)}function Iv(or){if(An)return $1(13,1,or)}function Cv(or,Hr){if(An)return $1(14,1,or,Hr)}function Gy(or,Hr,xn){if(An)return $1(15,1,or,Hr,xn)}var Kv,_v=or=>{for(var Hr="";$t()[or>>>0];)Hr+=Kv[$t()[or++>>>0]];return Hr},Yv={},xy={},Pv;function qy(or,Hr,xn={}){var Ro=Hr.name;if(!or)throw new Pv(`type "${Ro}" must have a positive integer typeid pointer`);if(xy.hasOwnProperty(or)){if(xn.Ub)return;throw new Pv(`Cannot register type '${Ro}' twice`)}xy[or]=Hr,Yv.hasOwnProperty(or)&&(Hr=Yv[or],delete Yv[or],Hr.forEach(s0=>s0()))}function sv(or,Hr,xn={}){if(!("argPackAdvance"in Hr))throw new TypeError("registerType registeredInstance requires argPackAdvance");return qy(or,Hr,xn)}var wy=(or,Hr,xn)=>{switch(Hr){case 1:return xn?Ro=>at()[Ro>>>0]:Ro=>$t()[Ro>>>0];case 2:return xn?Ro=>vt()[Ro>>>1>>>0]:Ro=>b()[Ro>>>1>>>0];case 4:return xn?Ro=>pt()[Ro>>>2>>>0]:Ro=>st()[Ro>>>2>>>0];case 8:return xn?Ro=>R0[Ro>>>3]:Ro=>$0[Ro>>>3];default:throw new TypeError(`invalid integer width (${Hr}): ${or}`)}},uy=[],Sv=[];function _y(or){or>>>=0,9<or&&--Sv[or+1]===0&&(Sv[or]=void 0,uy.push(or))}var lv=or=>{if(!or)throw new Pv("Cannot use deleted val. handle = "+or);return Sv[or]},bv=or=>{switch(or){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let Hr=uy.pop()||Sv.length;return Sv[Hr]=or,Sv[Hr+1]=1,Hr}};function ty(or){return this.fromWireType(st()[or>>>2>>>0])}var Ky={name:"emscripten::val",fromWireType:or=>{var Hr=lv(or);return _y(or),Hr},toWireType:(or,Hr)=>bv(Hr),argPackAdvance:8,readValueFromPointer:ty,Bb:null},Yy=(or,Hr)=>{switch(Hr){case 4:return function(xn){return this.fromWireType(wt()[xn>>>2>>>0])};case 8:return function(xn){return this.fromWireType(Tt()[xn>>>3>>>0])};default:throw new TypeError(`invalid float width (${Hr}): ${or}`)}},Sy=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,l$=(or,Hr)=>{for(var xn=or>>1,Ro=xn+Hr/2;!(xn>=Ro)&&b()[xn>>>0];)++xn;if(xn<<=1,32<xn-or&&Sy)return Sy.decode($t().slice(or,xn));for(xn="",Ro=0;!(Ro>=Hr/2);++Ro){var s0=vt()[or+2*Ro>>>1>>>0];if(s0==0)break;xn+=String.fromCharCode(s0)}return xn},Xy=(or,Hr,xn)=>{if(xn??(xn=2147483647),2>xn)return 0;xn-=2;var Ro=Hr;xn=xn<2*or.length?xn/2:or.length;for(var s0=0;s0<xn;++s0){var y0=or.charCodeAt(s0);vt()[Hr>>>1>>>0]=y0,Hr+=2}return vt()[Hr>>>1>>>0]=0,Hr-Ro},Ey=or=>2*or.length,v1=(or,Hr)=>{for(var xn=0,Ro="";!(xn>=Hr/4);){var s0=pt()[or+4*xn>>>2>>>0];if(s0==0)break;++xn,65536<=s0?(s0-=65536,Ro+=String.fromCharCode(55296|s0>>10,56320|s0&1023)):Ro+=String.fromCharCode(s0)}return Ro},My=(or,Hr,xn)=>{if(Hr>>>=0,xn??(xn=2147483647),4>xn)return 0;var Ro=Hr;xn=Ro+xn-4;for(var s0=0;s0<or.length;++s0){var y0=or.charCodeAt(s0);if(55296<=y0&&57343>=y0){var j0=or.charCodeAt(++s0);y0=65536+((y0&1023)<<10)|j0&1023}if(pt()[Hr>>>2>>>0]=y0,Hr+=4,Hr+4>xn)break}return pt()[Hr>>>2>>>0]=0,Hr-Ro},b1=or=>{for(var Hr=0,xn=0;xn<or.length;++xn){var Ro=or.charCodeAt(xn);55296<=Ro&&57343>=Ro&&++xn,Hr+=4}return Hr},Ty=or=>{if(!r0)try{if(or(),!(0<t1))try{An?$x(ko):_g(ko)}catch(Hr){Hr instanceof B1||Hr=="unwind"||rr(1,Hr)}}catch(Hr){Hr instanceof B1||Hr=="unwind"||rr(1,Hr)}};function kv(or){or>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(pt(),or>>>2,or).value.then(fv),or+=128,Atomics.store(pt(),or>>>2,1))}Ct.__emscripten_thread_mailbox_await=kv;var fv=()=>{var or=J1();or&&(kv(or),Ty(rw))};Ct.checkMailbox=fv;var cy=[],ry=(or,Hr)=>{var xn=xy[or];if(xn===void 0)throw or=B$(or),xn=_v(or),Xv(or),new Pv(`${Hr} has unknown type ${xn}`);return xn},dy=(or,Hr,xn)=>{var Ro=[];return or=or.toWireType(Ro,xn),Ro.length&&(st()[Hr>>>2>>>0]=bv(Ro)),or},$v=or=>{try{or()}catch(Hr){E0(Hr)}};function Cy(){var or=d1,Hr={};for(let[xn,Ro]of Object.entries(or))Hr[xn]=typeof Ro=="function"?(...s0)=>{jv.push(xn);try{return Ro(...s0)}finally{r0||(jv.pop(),Ov&&Ev===1&&jv.length===0&&(Ev=0,t1+=1,$v(U$),typeof Fibers<"u"&&Fibers.rc()))}}:Ro;return Hr}var Ev=0,Ov=null,fy=0,jv=[],vn={},nr={},Ir=0,Kr=null,Sn=[];function Go(){return new Promise((or,Hr)=>{Kr={resolve:or,reject:Hr}})}function g0(){var or=ny(65548),Hr=or+12;st()[or>>>2>>>0]=Hr,st()[or+4>>>2>>>0]=Hr+65536,Hr=jv[0];var xn=vn[Hr];return xn===void 0&&(xn=Ir++,vn[Hr]=xn,nr[xn]=Hr),Hr=xn,pt()[or+8>>>2>>>0]=Hr,or}function B0(){var or=pt()[Ov+8>>>2>>>0];return or=d1[nr[or]],--t1,or()}function q0(or){if(!r0){if(Ev===0){var Hr=!1,xn=!1;or((Ro=0)=>{if(!r0&&(fy=Ro,Hr=!0,xn)){Ev=2,$v(()=>V$(Ov)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),Ro=!1;try{var s0=B0()}catch(Y0){s0=Y0,Ro=!0}var y0=!1;if(!Ov){var j0=Kr;j0&&(Kr=null,(Ro?j0.reject:j0.resolve)(s0),y0=!0)}if(Ro&&!y0)throw s0}}),xn=!0,Hr||(Ev=1,Ov=g0(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),$v(()=>Sx(Ov)))}else Ev===2?(Ev=0,$v(Ex),Xv(Ov),Ov=null,Sn.forEach(Ty)):E0(`invalid state: ${Ev}`);return fy}}function J0(or){return q0(Hr=>{or().then(Hr)})}var X0=[],y1={},L1=or=>{var Hr=y1[or];return Hr===void 0?_v(or):Hr},D0=()=>typeof globalThis=="object"?globalThis:Function("return this")(),A0=or=>{var Hr=X0.length;return X0.push(or),Hr},o1=(or,Hr)=>{for(var xn=Array(or),Ro=0;Ro<or;++Ro)xn[Ro]=ry(st()[Hr+4*Ro>>>2>>>0],"parameter "+Ro);return xn},a1=(or,Hr)=>Object.defineProperty(Hr,"name",{value:or});function j1(or){var Hr=Function;if(!(Hr instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof Hr} which is not a function`);var xn=a1(Hr.name||"unknownFunctionName",function(){});return xn.prototype=Hr.prototype,xn=new xn,or=Hr.apply(xn,or),or instanceof Object?or:xn}var Oy=or=>or%4===0&&(or%100!==0||or%400===0),qx=[0,31,60,91,121,152,182,213,244,274,305,335],Kx=[0,31,59,90,120,151,181,212,243,273,304,334];function Yx(or,Hr,xn,Ro,s0,y0,j0){return An?$1(16,1,or,Hr,xn,Ro,s0,y0,j0):-52}function Xx(or,Hr,xn,Ro,s0,y0){if(An)return $1(17,1,or,Hr,xn,Ro,s0,y0)}var dx=[],fx=(or,Hr)=>{dx.length=0;for(var xn;xn=$t()[or++>>>0];){var Ro=xn!=105;Ro&=xn!=112,Hr+=Ro&&Hr%8?4:0,dx.push(xn==112?st()[Hr>>>2>>>0]:xn==106?R0[Hr>>>3]:xn==105?pt()[Hr>>>2>>>0]:Tt()[Hr>>>3>>>0]),Hr+=Ro?8:4}return dx},px={},pv=()=>{if(!E$){var or={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:tr||"./this.program"},Hr;for(Hr in px)px[Hr]===void 0?delete or[Hr]:or[Hr]=px[Hr];var xn=[];for(Hr in or)xn.push(`${Hr}=${or[Hr]}`);E$=xn}return E$},E$;function Ny(or,Hr){if(An)return $1(18,1,or,Hr);or>>>=0,Hr>>>=0;var xn=0;return pv().forEach((Ro,s0)=>{var y0=Hr+xn;for(s0=st()[or+4*s0>>>2>>>0]=y0,y0=0;y0<Ro.length;++y0)at()[s0++>>>0]=Ro.charCodeAt(y0);at()[s0>>>0]=0,xn+=Ro.length+1}),0}function hx(or,Hr){if(An)return $1(19,1,or,Hr);or>>>=0,Hr>>>=0;var xn=pv();st()[or>>>2>>>0]=xn.length;var Ro=0;return xn.forEach(s0=>Ro+=s0.length+1),st()[Hr>>>2>>>0]=Ro,0}function j$(or){return An?$1(20,1,or):52}function Fv(or,Hr,xn,Ro){return An?$1(21,1,or,Hr,xn,Ro):52}function mx(or,Hr,xn,Ro){return An?$1(22,1,or,Hr,xn,Ro):70}var Zx=[null,[],[]];function gx(or,Hr,xn,Ro){if(An)return $1(23,1,or,Hr,xn,Ro);Hr>>>=0,xn>>>=0,Ro>>>=0;for(var s0=0,y0=0;y0<xn;y0++){var j0=st()[Hr>>>2>>>0],Y0=st()[Hr+4>>>2>>>0];Hr+=8;for(var s1=0;s1<Y0;s1++){var n1=$t()[j0+s1>>>0],w1=Zx[or];n1===0||n1===10?((or===1?Xr:In)(P1(w1,0)),w1.length=0):w1.push(n1)}s0+=Y0}return st()[Ro>>>2>>>0]=s0,0}var vx=[31,29,31,30,31,30,31,31,30,31,30,31],yx=[31,28,31,30,31,30,31,31,30,31,30,31];function Qx(or){var Hr=Array(R1(or)+1);return D1(or,Hr,0,Hr.length),Hr}var Bv=(or,Hr)=>{at().set(or,Hr>>>0)};function Jx(or,Hr,xn,Ro){function s0(L0,C1,U1){for(L0=typeof L0=="number"?L0.toString():L0||"";L0.length<C1;)L0=U1[0]+L0;return L0}function y0(L0,C1){return s0(L0,C1,"0")}function j0(L0,C1){function U1(Ay){return 0>Ay?-1:0<Ay?1:0}var Fy;return(Fy=U1(L0.getFullYear()-C1.getFullYear()))===0&&(Fy=U1(L0.getMonth()-C1.getMonth()))===0&&(Fy=U1(L0.getDate()-C1.getDate())),Fy}function Y0(L0){switch(L0.getDay()){case 0:return new Date(L0.getFullYear()-1,11,29);case 1:return L0;case 2:return new Date(L0.getFullYear(),0,3);case 3:return new Date(L0.getFullYear(),0,2);case 4:return new Date(L0.getFullYear(),0,1);case 5:return new Date(L0.getFullYear()-1,11,31);case 6:return new Date(L0.getFullYear()-1,11,30)}}function s1(L0){var C1=L0.zb;for(L0=new Date(new Date(L0.Ab+1900,0,1).getTime());0<C1;){var U1=L0.getMonth(),Fy=(Oy(L0.getFullYear())?vx:yx)[U1];if(C1>Fy-L0.getDate())C1-=Fy-L0.getDate()+1,L0.setDate(1),11>U1?L0.setMonth(U1+1):(L0.setMonth(0),L0.setFullYear(L0.getFullYear()+1));else{L0.setDate(L0.getDate()+C1);break}}return U1=new Date(L0.getFullYear()+1,0,4),C1=Y0(new Date(L0.getFullYear(),0,4)),U1=Y0(U1),0>=j0(C1,L0)?0>=j0(U1,L0)?L0.getFullYear()+1:L0.getFullYear():L0.getFullYear()-1}or>>>=0,Hr>>>=0,xn>>>=0,Ro>>>=0;var n1=st()[Ro+40>>>2>>>0];Ro={kc:pt()[Ro>>>2>>>0],jc:pt()[Ro+4>>>2>>>0],Eb:pt()[Ro+8>>>2>>>0],Jb:pt()[Ro+12>>>2>>>0],Fb:pt()[Ro+16>>>2>>>0],Ab:pt()[Ro+20>>>2>>>0],vb:pt()[Ro+24>>>2>>>0],zb:pt()[Ro+28>>>2>>>0],qc:pt()[Ro+32>>>2>>>0],ic:pt()[Ro+36>>>2>>>0],lc:n1?I0(n1):""},xn=I0(xn),n1={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var w1 in n1)xn=xn.replace(new RegExp(w1,"g"),n1[w1]);var Y1="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),W1="January February March April May June July August September October November December".split(" ");n1={"%a":L0=>Y1[L0.vb].substring(0,3),"%A":L0=>Y1[L0.vb],"%b":L0=>W1[L0.Fb].substring(0,3),"%B":L0=>W1[L0.Fb],"%C":L0=>y0((L0.Ab+1900)/100|0,2),"%d":L0=>y0(L0.Jb,2),"%e":L0=>s0(L0.Jb,2," "),"%g":L0=>s1(L0).toString().substring(2),"%G":s1,"%H":L0=>y0(L0.Eb,2),"%I":L0=>(L0=L0.Eb,L0==0?L0=12:12<L0&&(L0-=12),y0(L0,2)),"%j":L0=>{for(var C1=0,U1=0;U1<=L0.Fb-1;C1+=(Oy(L0.Ab+1900)?vx:yx)[U1++]);return y0(L0.Jb+C1,3)},"%m":L0=>y0(L0.Fb+1,2),"%M":L0=>y0(L0.jc,2),"%n":()=>`
`,"%p":L0=>0<=L0.Eb&&12>L0.Eb?"AM":"PM","%S":L0=>y0(L0.kc,2),"%t":()=>"	","%u":L0=>L0.vb||7,"%U":L0=>y0(Math.floor((L0.zb+7-L0.vb)/7),2),"%V":L0=>{var C1=Math.floor((L0.zb+7-(L0.vb+6)%7)/7);if(2>=(L0.vb+371-L0.zb-2)%7&&C1++,C1)C1==53&&(U1=(L0.vb+371-L0.zb)%7,U1==4||U1==3&&Oy(L0.Ab)||(C1=1));else{C1=52;var U1=(L0.vb+7-L0.zb-1)%7;(U1==4||U1==5&&Oy(L0.Ab%400-1))&&C1++}return y0(C1,2)},"%w":L0=>L0.vb,"%W":L0=>y0(Math.floor((L0.zb+7-(L0.vb+6)%7)/7),2),"%y":L0=>(L0.Ab+1900).toString().substring(2),"%Y":L0=>L0.Ab+1900,"%z":L0=>{L0=L0.ic;var C1=0<=L0;return L0=Math.abs(L0)/60,(C1?"+":"-")+("0000"+(L0/60*100+L0%60)).slice(-4)},"%Z":L0=>L0.lc,"%%":()=>"%"},xn=xn.replace(/%%/g,"\0\0");for(w1 in n1)xn.includes(w1)&&(xn=xn.replace(new RegExp(w1,"g"),n1[w1](Ro)));return xn=xn.replace(/\0\0/g,"%"),w1=Qx(xn),w1.length>Hr?0:(Bv(w1,or),w1.length-1)}U0.Gb();for(var zv=Array(256),F$=0;256>F$;++F$)zv[F$]=String.fromCharCode(F$);Kv=zv,Pv=Ct.BindingError=class extends Error{constructor(or){super(or),this.name="BindingError"}},Ct.InternalError=class extends Error{constructor(or){super(or),this.name="InternalError"}},Sv.push(0,1,void 0,1,null,1,!0,1,!1,1),Ct.count_emval_handles=()=>Sv.length/2-5-uy.length;var ew=[rv,Q0,m1,p1,x1,vv,yv,gv,qv,ov,Lv,Rv,$y,Iv,Cv,Gy,Yx,Xx,Ny,hx,j$,Fv,mx,gx],Ly={ua:function(or,Hr,xn){return J0(async()=>{await Ct.Zb(or,Hr,xn)})},b:function(or,Hr,xn){throw or>>>=0,new l1(or).Gb(Hr>>>0,xn>>>0),e1=or,e1},ia:function(or){tw(or>>>0,!jr,1,!Lr,131072,!1),U0.Pb()},G:function(or){or>>>=0,An?postMessage({cmd:"cleanupThread",thread:or}):U0.Nb(U0.ub[or])},_:T1,A:p1,pa:x1,W:vv,Y:yv,qa:gv,na:qv,fa:ov,ma:Lv,K:Rv,X:$y,U:Iv,oa:Cv,V:Gy,E:function(or,Hr,xn){or>>>=0,xn>>>=0,Hr=_v(Hr>>>0),sv(or,{name:Hr,fromWireType:Ro=>Ro,toWireType:function(Ro,s0){if(typeof s0!="bigint"&&typeof s0!="number")throw s0===null?s0="null":(Ro=typeof s0,s0=Ro==="object"||Ro==="array"||Ro==="function"?s0.toString():""+s0),new TypeError(`Cannot convert "${s0}" to ${this.name}`);return typeof s0=="number"&&(s0=BigInt(s0)),s0},argPackAdvance:8,readValueFromPointer:wy(Hr,xn,Hr.indexOf("u")==-1),Bb:null})},O:function(or,Hr,xn,Ro){or>>>=0,Hr=_v(Hr>>>0),sv(or,{name:Hr,fromWireType:function(s0){return!!s0},toWireType:function(s0,y0){return y0?xn:Ro},argPackAdvance:8,readValueFromPointer:function(s0){return this.fromWireType($t()[s0>>>0])},Bb:null})},N:function(or){return sv(or>>>0,Ky)},D:function(or,Hr,xn){or>>>=0,xn>>>=0,Hr=_v(Hr>>>0),sv(or,{name:Hr,fromWireType:Ro=>Ro,toWireType:(Ro,s0)=>s0,argPackAdvance:8,readValueFromPointer:Yy(Hr,xn),Bb:null})},t:function(or,Hr,xn,Ro,s0){if(or>>>=0,xn>>>=0,Hr=_v(Hr>>>0),s0===-1&&(s0=4294967295),s0=Y0=>Y0,Ro===0){var y0=32-8*xn;s0=Y0=>Y0<<y0>>>y0}var j0=Hr.includes("unsigned")?function(Y0,s1){return s1>>>0}:function(Y0,s1){return s1};sv(or,{name:Hr,fromWireType:s0,toWireType:j0,argPackAdvance:8,readValueFromPointer:wy(Hr,xn,Ro!==0),Bb:null})},p:function(or,Hr,xn){function Ro(y0){var j0=st()[y0>>>2>>>0];return y0=st()[y0+4>>>2>>>0],new s0(at().buffer,y0,j0)}or>>>=0;var s0=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][Hr];xn=_v(xn>>>0),sv(or,{name:xn,fromWireType:Ro,argPackAdvance:8,readValueFromPointer:Ro},{Ub:!0})},F:function(or,Hr){or>>>=0,Hr=_v(Hr>>>0);var xn=Hr==="std::string";sv(or,{name:Hr,fromWireType:function(Ro){var s0=st()[Ro>>>2>>>0],y0=Ro+4;if(xn)for(var j0=y0,Y0=0;Y0<=s0;++Y0){var s1=y0+Y0;if(Y0==s0||$t()[s1>>>0]==0){if(j0=I0(j0,s1-j0),n1===void 0)var n1=j0;else n1+="\0",n1+=j0;j0=s1+1}}else{for(n1=Array(s0),Y0=0;Y0<s0;++Y0)n1[Y0]=String.fromCharCode($t()[y0+Y0>>>0]);n1=n1.join("")}return Xv(Ro),n1},toWireType:function(Ro,s0){s0 instanceof ArrayBuffer&&(s0=new Uint8Array(s0));var y0=typeof s0=="string";if(!(y0||s0 instanceof Uint8Array||s0 instanceof Uint8ClampedArray||s0 instanceof Int8Array))throw new Pv("Cannot pass non-string to std::string");var j0=xn&&y0?R1(s0):s0.length,Y0=ny(4+j0+1),s1=Y0+4;if(st()[Y0>>>2>>>0]=j0,xn&&y0)K1(s0,s1,j0+1);else if(y0)for(y0=0;y0<j0;++y0){var n1=s0.charCodeAt(y0);if(255<n1)throw Xv(s1),new Pv("String has UTF-16 code units that do not fit in 8 bits");$t()[s1+y0>>>0]=n1}else for(y0=0;y0<j0;++y0)$t()[s1+y0>>>0]=s0[y0];return Ro!==null&&Ro.push(Xv,Y0),Y0},argPackAdvance:8,readValueFromPointer:ty,Bb(Ro){Xv(Ro)}})},z:function(or,Hr,xn){if(or>>>=0,Hr>>>=0,xn>>>=0,xn=_v(xn),Hr===2)var Ro=l$,s0=Xy,y0=Ey,j0=Y0=>b()[Y0>>>1>>>0];else Hr===4&&(Ro=v1,s0=My,y0=b1,j0=Y0=>st()[Y0>>>2>>>0]);sv(or,{name:xn,fromWireType:Y0=>{for(var s1=st()[Y0>>>2>>>0],n1,w1=Y0+4,Y1=0;Y1<=s1;++Y1){var W1=Y0+4+Y1*Hr;(Y1==s1||j0(W1)==0)&&(w1=Ro(w1,W1-w1),n1===void 0?n1=w1:(n1+="\0",n1+=w1),w1=W1+Hr)}return Xv(Y0),n1},toWireType:(Y0,s1)=>{if(typeof s1!="string")throw new Pv(`Cannot pass non-string to C++ string type ${xn}`);var n1=y0(s1),w1=ny(4+n1+Hr);return st()[w1>>>2>>>0]=n1/Hr,s0(s1,w1+4,n1+Hr),Y0!==null&&Y0.push(Xv,w1),w1},argPackAdvance:8,readValueFromPointer:ty,Bb(Y0){Xv(Y0)}})},P:function(or,Hr){or>>>=0,Hr=_v(Hr>>>0),sv(or,{Vb:!0,name:Hr,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(or,Hr){or>>>=0,or==Hr>>>0?setTimeout(fv):An?postMessage({targetThread:or,cmd:"checkMailbox"}):(or=U0.ub[or])&&or.postMessage({cmd:"checkMailbox"})},$:function(or,Hr,xn,Ro,s0){Hr>>>=0,xn>>>=0,Ro/=2,cy.length=Ro,s0=s0>>>0>>>3;for(var y0=0;y0<Ro;y0++)cy[y0]=R0[s0+2*y0]?R0[s0+2*y0+1]:Tt()[s0+2*y0+1>>>0];return or=Hr?c1[Hr]:ew[or],U0.Sb=xn,xn=or(...cy),U0.Sb=0,xn},ha:kv,sa:function(or){Yr&&U0.ub[or>>>0].ref()},w:function(or,Hr,xn){return Hr>>>=0,xn>>>=0,or=lv(or>>>0),Hr=ry(Hr,"emval::as"),dy(Hr,xn,or)},y:function(or){return or>>>=0,J0(()=>(or=lv(or),or.then(bv)))},o:function(or,Hr,xn,Ro){return xn>>>=0,Ro>>>=0,or=X0[or>>>0],Hr=lv(Hr>>>0),or(null,Hr,xn,Ro)},k:function(or,Hr,xn,Ro,s0){return xn>>>=0,Ro>>>=0,s0>>>=0,or=X0[or>>>0],Hr=lv(Hr>>>0),xn=L1(xn),or(Hr,Hr[xn],Ro,s0)},c:_y,C:function(or,Hr){return Hr>>>=0,or=lv(or>>>0),Hr=lv(Hr),or==Hr},n:function(or){return or>>>=0,or===0?bv(D0()):(or=L1(or),bv(D0()[or]))},j:function(or,Hr,xn){Hr=o1(or,Hr>>>0);var Ro=Hr.shift();or--;var s0=`return function (obj, func, destructorsRef, args) {
`,y0=0,j0=[];xn===0&&j0.push("obj");for(var Y0=["retType"],s1=[Ro],n1=0;n1<or;++n1)j0.push("arg"+n1),Y0.push("argType"+n1),s1.push(Hr[n1]),s0+=`  var arg${n1} = argType${n1}.readValueFromPointer(args${y0?"+"+y0:""});
`,y0+=Hr[n1].argPackAdvance;return s0+=`  var rv = ${xn===1?"new func":"func.call"}(${j0.join(", ")});
`,Ro.Vb||(Y0.push("emval_returnValue"),s1.push(dy),s0+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Y0.push(s0+`};
`),or=j1(Y0)(...s1),xn=`methodCaller<(${Hr.map(w1=>w1.name).join(", ")}) => ${Ro.name}>`,A0(a1(xn,or))},s:function(or,Hr){return Hr>>>=0,or=lv(or>>>0),Hr=lv(Hr),bv(or[Hr])},d:function(or){or>>>=0,9<or&&(Sv[or+1]+=1)},v:function(){return bv([])},m:function(or){or=lv(or>>>0);for(var Hr=Array(or.length),xn=0;xn<or.length;xn++)Hr[xn]=or[xn];return bv(Hr)},g:function(or){return bv(L1(or>>>0))},l:function(){return bv({})},i:function(or){or>>>=0;for(var Hr=lv(or);Hr.length;){var xn=Hr.pop();Hr.pop()(xn)}_y(or)},h:function(or,Hr,xn){Hr>>>=0,xn>>>=0,or=lv(or>>>0),Hr=lv(Hr),xn=lv(xn),or[Hr]=xn},e:function(or,Hr){return Hr>>>=0,or=ry(or>>>0,"_emval_take_value"),or=or.readValueFromPointer(Hr),bv(or)},ca:function(or,Hr){or=-9007199254740992>or||9007199254740992<or?NaN:Number(or),Hr>>>=0,or=new Date(1e3*or),pt()[Hr>>>2>>>0]=or.getUTCSeconds(),pt()[Hr+4>>>2>>>0]=or.getUTCMinutes(),pt()[Hr+8>>>2>>>0]=or.getUTCHours(),pt()[Hr+12>>>2>>>0]=or.getUTCDate(),pt()[Hr+16>>>2>>>0]=or.getUTCMonth(),pt()[Hr+20>>>2>>>0]=or.getUTCFullYear()-1900,pt()[Hr+24>>>2>>>0]=or.getUTCDay(),or=(or.getTime()-Date.UTC(or.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,pt()[Hr+28>>>2>>>0]=or},da:function(or,Hr){or=-9007199254740992>or||9007199254740992<or?NaN:Number(or),Hr>>>=0,or=new Date(1e3*or),pt()[Hr>>>2>>>0]=or.getSeconds(),pt()[Hr+4>>>2>>>0]=or.getMinutes(),pt()[Hr+8>>>2>>>0]=or.getHours(),pt()[Hr+12>>>2>>>0]=or.getDate(),pt()[Hr+16>>>2>>>0]=or.getMonth(),pt()[Hr+20>>>2>>>0]=or.getFullYear()-1900,pt()[Hr+24>>>2>>>0]=or.getDay();var xn=(Oy(or.getFullYear())?qx:Kx)[or.getMonth()]+or.getDate()-1|0;pt()[Hr+28>>>2>>>0]=xn,pt()[Hr+36>>>2>>>0]=-(60*or.getTimezoneOffset()),xn=new Date(or.getFullYear(),6,1).getTimezoneOffset();var Ro=new Date(or.getFullYear(),0,1).getTimezoneOffset();or=(xn!=Ro&&or.getTimezoneOffset()==Math.min(Ro,xn))|0,pt()[Hr+32>>>2>>>0]=or},ea:function(or){or>>>=0;var Hr=new Date(pt()[or+20>>>2>>>0]+1900,pt()[or+16>>>2>>>0],pt()[or+12>>>2>>>0],pt()[or+8>>>2>>>0],pt()[or+4>>>2>>>0],pt()[or>>>2>>>0],0),xn=pt()[or+32>>>2>>>0],Ro=Hr.getTimezoneOffset(),s0=new Date(Hr.getFullYear(),6,1).getTimezoneOffset(),y0=new Date(Hr.getFullYear(),0,1).getTimezoneOffset(),j0=Math.min(y0,s0);return 0>xn?pt()[or+32>>>2>>>0]=+(s0!=y0&&j0==Ro):0<xn!=(j0==Ro)&&(s0=Math.max(y0,s0),Hr.setTime(Hr.getTime()+6e4*((0<xn?j0:s0)-Ro))),pt()[or+24>>>2>>>0]=Hr.getDay(),xn=(Oy(Hr.getFullYear())?qx:Kx)[Hr.getMonth()]+Hr.getDate()-1|0,pt()[or+28>>>2>>>0]=xn,pt()[or>>>2>>>0]=Hr.getSeconds(),pt()[or+4>>>2>>>0]=Hr.getMinutes(),pt()[or+8>>>2>>>0]=Hr.getHours(),pt()[or+12>>>2>>>0]=Hr.getDate(),pt()[or+16>>>2>>>0]=Hr.getMonth(),pt()[or+20>>>2>>>0]=Hr.getYear(),or=Hr.getTime(),BigInt(isNaN(or)?-1:or/1e3)},aa:Yx,ba:Xx,R:function(or,Hr,xn,Ro){or>>>=0,Hr>>>=0,xn>>>=0,Ro>>>=0;var s0=new Date().getFullYear(),y0=new Date(s0,0,1),j0=new Date(s0,6,1);s0=y0.getTimezoneOffset();var Y0=j0.getTimezoneOffset(),s1=Math.max(s0,Y0);st()[or>>>2>>>0]=60*s1,pt()[Hr>>>2>>>0]=+(s0!=Y0),or=n1=>n1.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],y0=or(y0),j0=or(j0),Y0<s0?(K1(y0,xn,17),K1(j0,Ro,17)):(K1(y0,Ro,17),K1(j0,xn,17))},q:()=>{E0("")},f:function(or,Hr,xn){return or>>>=0,Hr=fx(Hr>>>0,xn>>>0),c1[or](...Hr)},M:function(or,Hr,xn){return or>>>=0,Hr=fx(Hr>>>0,xn>>>0),c1[or](...Hr)},H:()=>{},L:()=>Date.now(),ra:()=>{throw t1+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>Yr?(Ua(),sr(Ma)).cpus().length:navigator.hardwareConcurrency,Q:function(or){or>>>=0;var Hr=$t().length;if(or<=Hr||4294901760<or)return!1;for(var xn=1;4>=xn;xn*=2){var Ro=Hr*(1+.2/xn);Ro=Math.min(Ro,or+100663296);var s0=Math;Ro=Math.max(or,Ro);e:{s0=(s0.min.call(s0,4294901760,Ro+(65536-Ro%65536)%65536)-Zr.buffer.byteLength+65535)/65536;try{Zr.grow(s0),P0();var y0=1;break e}catch{}y0=void 0}if(y0)return!0}return!1},ja:Ny,la:hx,Z:_g,B:j$,J:Fv,ga:mx,I:gx,a:Zr||Ct.wasmMemory,ka:Jx,r:function(or,Hr,xn,Ro){return Jx(or>>>0,Hr>>>0,xn>>>0,Ro>>>0)}},d1=function(){function or(xn,Ro){return d1=xn.exports,d1=Cy(),d1=Vw(),U0.Qb.push(d1.cb),Uo.unshift(d1.va),wn=Ro,d0(),d1}var Hr={a:Ly};if(b0++,Ct.instantiateWasm)try{return Ct.instantiateWasm(Hr,or)}catch(xn){In(`Module.instantiateWasm callback failed with error: ${xn}`),Lt(xn)}return q1(Hr,function(xn){or(xn.instance,xn.module)}).catch(Lt),{}}(),B$=or=>(B$=d1.wa)(or);Ct.__embind_initialize_bindings=()=>(Ct.__embind_initialize_bindings=d1.xa)(),Ct._OrtInit=(or,Hr)=>(Ct._OrtInit=d1.ya)(or,Hr),Ct._OrtGetLastError=(or,Hr)=>(Ct._OrtGetLastError=d1.za)(or,Hr),Ct._OrtCreateSessionOptions=(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1)=>(Ct._OrtCreateSessionOptions=d1.Aa)(or,Hr,xn,Ro,s0,y0,j0,Y0,s1,n1),Ct._OrtAppendExecutionProvider=(or,Hr)=>(Ct._OrtAppendExecutionProvider=d1.Ba)(or,Hr),Ct._OrtAddFreeDimensionOverride=(or,Hr,xn)=>(Ct._OrtAddFreeDimensionOverride=d1.Ca)(or,Hr,xn),Ct._OrtAddSessionConfigEntry=(or,Hr,xn)=>(Ct._OrtAddSessionConfigEntry=d1.Da)(or,Hr,xn),Ct._OrtReleaseSessionOptions=or=>(Ct._OrtReleaseSessionOptions=d1.Ea)(or),Ct._OrtCreateSession=(or,Hr,xn)=>(Ct._OrtCreateSession=d1.Fa)(or,Hr,xn),Ct._OrtReleaseSession=or=>(Ct._OrtReleaseSession=d1.Ga)(or),Ct._OrtGetInputOutputCount=(or,Hr,xn)=>(Ct._OrtGetInputOutputCount=d1.Ha)(or,Hr,xn),Ct._OrtGetInputName=(or,Hr)=>(Ct._OrtGetInputName=d1.Ia)(or,Hr),Ct._OrtGetOutputName=(or,Hr)=>(Ct._OrtGetOutputName=d1.Ja)(or,Hr),Ct._OrtFree=or=>(Ct._OrtFree=d1.Ka)(or),Ct._OrtCreateTensor=(or,Hr,xn,Ro,s0,y0)=>(Ct._OrtCreateTensor=d1.La)(or,Hr,xn,Ro,s0,y0),Ct._OrtGetTensorData=(or,Hr,xn,Ro,s0)=>(Ct._OrtGetTensorData=d1.Ma)(or,Hr,xn,Ro,s0),Ct._OrtReleaseTensor=or=>(Ct._OrtReleaseTensor=d1.Na)(or),Ct._OrtCreateRunOptions=(or,Hr,xn,Ro)=>(Ct._OrtCreateRunOptions=d1.Oa)(or,Hr,xn,Ro),Ct._OrtAddRunConfigEntry=(or,Hr,xn)=>(Ct._OrtAddRunConfigEntry=d1.Pa)(or,Hr,xn),Ct._OrtReleaseRunOptions=or=>(Ct._OrtReleaseRunOptions=d1.Qa)(or),Ct._OrtCreateBinding=or=>(Ct._OrtCreateBinding=d1.Ra)(or),Ct._OrtBindInput=(or,Hr,xn)=>(Ct._OrtBindInput=d1.Sa)(or,Hr,xn),Ct._OrtBindOutput=(or,Hr,xn,Ro)=>(Ct._OrtBindOutput=d1.Ta)(or,Hr,xn,Ro),Ct._OrtClearBoundOutputs=or=>(Ct._OrtClearBoundOutputs=d1.Ua)(or),Ct._OrtReleaseBinding=or=>(Ct._OrtReleaseBinding=d1.Va)(or),Ct._OrtRunWithBinding=(or,Hr,xn,Ro,s0)=>(Ct._OrtRunWithBinding=d1.Wa)(or,Hr,xn,Ro,s0),Ct._OrtRun=(or,Hr,xn,Ro,s0,y0,j0,Y0)=>(Ct._OrtRun=d1.Xa)(or,Hr,xn,Ro,s0,y0,j0,Y0),Ct._OrtEndProfiling=or=>(Ct._OrtEndProfiling=d1.Ya)(or),Ct._JsepOutput=(or,Hr,xn)=>(Ct._JsepOutput=d1.Za)(or,Hr,xn),Ct._JsepGetNodeName=or=>(Ct._JsepGetNodeName=d1._a)(or);var J1=Ct._pthread_self=()=>(J1=Ct._pthread_self=d1.$a)(),ny=Ct._malloc=or=>(ny=Ct._malloc=d1.ab)(or),Xv=Ct._free=or=>(Xv=Ct._free=d1.bb)(or);Ct.__emscripten_tls_init=()=>(Ct.__emscripten_tls_init=d1.cb)();var tw=Ct.__emscripten_thread_init=(or,Hr,xn,Ro,s0,y0)=>(tw=Ct.__emscripten_thread_init=d1.eb)(or,Hr,xn,Ro,s0,y0);Ct.__emscripten_thread_crashed=()=>(Ct.__emscripten_thread_crashed=d1.fb)();var z$=(or,Hr,xn,Ro,s0)=>(z$=d1.gb)(or,Hr,xn,Ro,s0),bx=or=>(bx=d1.hb)(or),$x=Ct.__emscripten_thread_exit=or=>($x=Ct.__emscripten_thread_exit=d1.ib)(or),rw=()=>(rw=d1.jb)(),xx=(or,Hr)=>(xx=d1.kb)(or,Hr),Zy=or=>(Zy=d1.lb)(or),jy=or=>(jy=d1.mb)(or),wx=()=>(wx=d1.nb)(),_x=Ct.dynCall_ii=(or,Hr)=>(_x=Ct.dynCall_ii=d1.pb)(or,Hr),Sx=or=>(Sx=d1.qb)(or),U$=()=>(U$=d1.rb)(),V$=or=>(V$=d1.sb)(or),Ex=()=>(Ex=d1.tb)();Ct.___start_em_js=839500,Ct.___stop_em_js=839661;function Vw(){var or=d1;or=Object.assign({},or);var Hr=Ro=>s0=>Ro(s0)>>>0,xn=Ro=>()=>Ro()>>>0;return or.wa=Hr(or.wa),or.$a=xn(or.$a),or.ab=Hr(or.ab),or.emscripten_main_runtime_thread_id=xn(or.emscripten_main_runtime_thread_id),or.mb=Hr(or.mb),or.nb=xn(or.nb),or}Ct.wasmMemory=Zr,Ct.stackSave=()=>wx(),Ct.stackRestore=or=>Zy(or),Ct.stackAlloc=or=>jy(or),Ct.keepRuntimeAlive=()=>0<t1,Ct.UTF8ToString=I0,Ct.stringToUTF8=K1,Ct.lengthBytesUTF8=R1,Ct.ExitStatus=B1,Ct.PThread=U0;var u$;k0=function or(){u$||W$(),u$||(k0=or)};function W$(){if(!(0<b0))if(An)jt(Ct),An||h0(Uo),startWorker(Ct);else{if(Ct.preRun)for(typeof Ct.preRun=="function"&&(Ct.preRun=[Ct.preRun]);Ct.preRun.length;)C0.unshift(Ct.preRun.shift());h0(C0),0<b0||u$||(u$=!0,Ct.calledRun=!0,r0||(An||h0(Uo),jt(Ct),An||h0(l0)))}}return W$(),Ht}})();typeof a=="object"&&typeof s=="object"?s.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Ha=Er((a,s)=>{s.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),La,gc,Hi,Gi,Un,Ga,yc,bc,vc,Fa,Fe,Or=j(()=>{La=za(),gc=Va(),Gi=!1,Un=!1,Ga=!1,yc=a=>{if(a===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+a+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+a+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},bc=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},vc=(a,s)=>a?s?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":s?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Fa=async a=>{if(Gi)return Promise.resolve();if(Un)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ga)throw new Error("previous call to 'initializeWebAssembly()' failed.");Un=!0;let s=a.initTimeout,c=a.numThreads,d=a.simd,et=yc(c),g=d&&bc(),at=a.wasmPaths,$t=typeof at=="string"?at:void 0,vt=vc(g,et),b=typeof at=="object"?at[vt]:void 0,pt=!1,st=[];if(s>0&&st.push(new Promise(wt=>{setTimeout(()=>{pt=!0,wt()},s)})),st.push(new Promise((wt,Tt)=>{let Ct=et?gc:La,jt={locateFile:(Lt,Ht)=>{if(et&&Lt.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Ha()],{type:"text/javascript"}));if(Lt.endsWith(".wasm")){if(b)return b;let Gt=$t??Ht;return vt==="ort-wasm-simd.wasm"?Gt+"ort-wasm-simd.jsep.wasm":vt==="ort-wasm-simd-threaded.wasm"?Gt+"ort-wasm-simd-threaded.jsep.wasm":Gt+vt}return Ht+Lt}};if(et)if(jt.numThreads=c,typeof Blob>"u")jt.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let Lt=`var ortWasmThreaded=${Ct.toString()};`;jt.mainScriptUrlOrBlob=new Blob([Lt],{type:"text/javascript"})}Ct(jt).then(Lt=>{Un=!1,Gi=!0,Hi=Lt,wt()},Lt=>{Un=!1,Ga=!0,Tt(Lt)})})),await Promise.race(st),pt)throw new Error(`WebAssembly backend initializing failed due to timeout: ${s}ms`)},Fe=()=>{if(Gi&&Hi)return Hi;throw new Error("WebAssembly is not initialized yet.")}}),qe,Jr,We,Wn=j(()=>{Or(),qe=(a,s)=>{let c=Fe(),d=c.lengthBytesUTF8(a)+1,et=c._malloc(d);return c.stringToUTF8(a,et,d),s.push(et),et},Jr=(a,s,c,d)=>{if(typeof a=="object"&&a!==null){if(c.has(a))throw new Error("Circular reference in options");c.add(a)}Object.entries(a).forEach(([et,g])=>{let at=s?s+et:et;if(typeof g=="object")Jr(g,at+".",c,d);else if(typeof g=="string"||typeof g=="number")d(at,g.toString());else if(typeof g=="boolean")d(at,g?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof g}`)})},We=a=>{let s=Fe(),c=s.stackSave();try{let d=s.stackAlloc(8);s._OrtGetLastError(d,d+4);let et=s.HEAP32[d/4],g=s.HEAPU32[d/4+1],at=g?s.UTF8ToString(g):"";throw new Error(`${a} ERROR_CODE: ${et}, ERROR_MESSAGE: ${at}`)}finally{s.stackRestore(c)}}}),qa,ja=j(()=>{Or(),Wn(),qa=a=>{let s=Fe(),c=0,d=[],et=a||{};try{if((a==null?void 0:a.logSeverityLevel)===void 0)et.logSeverityLevel=2;else if(typeof a.logSeverityLevel!="number"||!Number.isInteger(a.logSeverityLevel)||a.logSeverityLevel<0||a.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${a.logSeverityLevel}`);if((a==null?void 0:a.logVerbosityLevel)===void 0)et.logVerbosityLevel=0;else if(typeof a.logVerbosityLevel!="number"||!Number.isInteger(a.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${a.logVerbosityLevel}`);(a==null?void 0:a.terminate)===void 0&&(et.terminate=!1);let g=0;return(a==null?void 0:a.tag)!==void 0&&(g=qe(a.tag,d)),c=s._OrtCreateRunOptions(et.logSeverityLevel,et.logVerbosityLevel,!!et.terminate,g),c===0&&We("Can't create run options."),(a==null?void 0:a.extra)!==void 0&&Jr(a.extra,"",new WeakSet,(at,$t)=>{let vt=qe(at,d),b=qe($t,d);s._OrtAddRunConfigEntry(c,vt,b)!==0&&We(`Can't set a run config entry: ${at} - ${$t}.`)}),[c,d]}catch(g){throw c!==0&&s._OrtReleaseRunOptions(c),d.forEach(at=>s._free(at)),g}}}),wc,$c,_c,xc,Ka,Ya=j(()=>{Or(),Wn(),wc=a=>{switch(a){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${a}`)}},$c=a=>{switch(a){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${a}`)}},_c=a=>{a.extra||(a.extra={}),a.extra.session||(a.extra.session={});let s=a.extra.session;s.use_ort_model_bytes_directly||(s.use_ort_model_bytes_directly="1"),a.executionProviders&&a.executionProviders.some(c=>(typeof c=="string"?c:c.name)==="webgpu")&&(a.enableMemPattern=!1)},xc=(a,s,c)=>{for(let d of s){let et=typeof d=="string"?d:d.name;switch(et){case"webnn":if(et="WEBNN",typeof d!="string"){let at=d;if(at!=null&&at.deviceType){let $t=qe("deviceType",c),vt=qe(at.deviceType,c);Fe()._OrtAddSessionConfigEntry(a,$t,vt)!==0&&We(`Can't set a session config entry: 'deviceType' - ${at.deviceType}.`)}if(at!=null&&at.numThreads){let $t=at.numThreads;(typeof $t!="number"||!Number.isInteger($t)||$t<0)&&($t=0);let vt=qe("numThreads",c),b=qe($t.toString(),c);Fe()._OrtAddSessionConfigEntry(a,vt,b)!==0&&We(`Can't set a session config entry: 'numThreads' - ${at.numThreads}.`)}if(at!=null&&at.powerPreference){let $t=qe("powerPreference",c),vt=qe(at.powerPreference,c);Fe()._OrtAddSessionConfigEntry(a,$t,vt)!==0&&We(`Can't set a session config entry: 'powerPreference' - ${at.powerPreference}.`)}}break;case"webgpu":if(et="JS",typeof d!="string"){let at=d;if(at!=null&&at.preferredLayout){if(at.preferredLayout!=="NCHW"&&at.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${at.preferredLayout}`);let $t=qe("preferredLayout",c),vt=qe(at.preferredLayout,c);Fe()._OrtAddSessionConfigEntry(a,$t,vt)!==0&&We(`Can't set a session config entry: 'preferredLayout' - ${at.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${et}`)}let g=qe(et,c);Fe()._OrtAppendExecutionProvider(a,g)!==0&&We(`Can't append execution provider: ${et}.`)}},Ka=a=>{let s=Fe(),c=0,d=[],et=a||{};_c(et);try{let g=wc(et.graphOptimizationLevel??"all"),at=$c(et.executionMode??"sequential"),$t=typeof et.logId=="string"?qe(et.logId,d):0,vt=et.logSeverityLevel??2;if(!Number.isInteger(vt)||vt<0||vt>4)throw new Error(`log serverity level is not valid: ${vt}`);let b=et.logVerbosityLevel??0;if(!Number.isInteger(b)||b<0||b>4)throw new Error(`log verbosity level is not valid: ${b}`);let pt=typeof et.optimizedModelFilePath=="string"?qe(et.optimizedModelFilePath,d):0;if(c=s._OrtCreateSessionOptions(g,!!et.enableCpuMemArena,!!et.enableMemPattern,at,!!et.enableProfiling,0,$t,vt,b,pt),c===0&&We("Can't create session options."),et.executionProviders&&xc(c,et.executionProviders,d),et.enableGraphCapture!==void 0){if(typeof et.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${et.enableGraphCapture}`);let st=qe("enableGraphCapture",d),wt=qe(et.enableGraphCapture.toString(),d);s._OrtAddSessionConfigEntry(c,st,wt)!==0&&We(`Can't set a session config entry: 'enableGraphCapture' - ${et.enableGraphCapture}.`)}if(et.freeDimensionOverrides)for(let[st,wt]of Object.entries(et.freeDimensionOverrides)){if(typeof st!="string")throw new Error(`free dimension override name must be a string: ${st}`);if(typeof wt!="number"||!Number.isInteger(wt)||wt<0)throw new Error(`free dimension override value must be a non-negative integer: ${wt}`);let Tt=qe(st,d);s._OrtAddFreeDimensionOverride(c,Tt,wt)!==0&&We(`Can't set a free dimension override: ${st} - ${wt}.`)}return et.extra!==void 0&&Jr(et.extra,"",new WeakSet,(st,wt)=>{let Tt=qe(st,d),Ct=qe(wt,d);s._OrtAddSessionConfigEntry(c,Tt,Ct)!==0&&We(`Can't set a session config entry: ${st} - ${wt}.`)}),[c,d]}catch(g){throw c!==0&&s._OrtReleaseSessionOptions(c),d.forEach(at=>s._free(at)),g}}}),Li,Yt,cr,Nn,en,Vn,Fi,ye=j(()=>{Li=a=>{switch(a){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${a}`)}},Yt=a=>{switch(a){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${a}`)}},cr=a=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][a],Nn=a=>{switch(a){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${a}`)}},en=a=>{switch(a){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${a}`)}},Vn=a=>a==="float32"||a==="float16"||a==="int32"||a==="int64"||a==="uint32"||a==="uint8"||a==="bool",Fi=a=>{switch(a){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${a}`)}}}),tn,qi=j(()=>{tn=async a=>{if(typeof a=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(a))}catch(s){if(s.code==="ERR_FS_FILE_TOO_LARGE"){let c=(void 0)(a),d=[];for await(let et of c)d.push(et);return new Uint8Array(Buffer.concat(d))}throw s}else{let s=await fetch(a);if(!s.ok)throw new Error(`failed to load external data file: ${a}`);let c=s.headers.get("Content-Length"),d=c?parseInt(c,10):0;if(d<1073741824)return new Uint8Array(await s.arrayBuffer());{if(!s.body)throw new Error(`failed to load external data file: ${a}, no response body.`);let et=s.body.getReader(),g;try{g=new ArrayBuffer(d)}catch($t){if($t instanceof RangeError){let vt=Math.ceil(d/65536);g=new WebAssembly.Memory({initial:vt,maximum:vt}).buffer}else throw $t}let at=0;for(;;){let{done:$t,value:vt}=await et.read();if($t)break;let b=vt.byteLength;new Uint8Array(g,at,b).set(vt),at+=b}return new Uint8Array(g,0,d)}}else return a instanceof Blob?new Uint8Array(await a.arrayBuffer()):a instanceof Uint8Array?a:new Uint8Array(a)}}),Sc,Cc,Xa,Za,Qa,Ic,Ne,Xt=j(()=>{ye(),Sc=["V","I","W","E","F"],Cc=(a,s)=>{console.log(`[${Sc[a]},${new Date().toISOString()}]${s}`)},Qa=(a,s)=>{Xa=a,Za=s},Ic=(a,s)=>{let c=en(a),d=en(Xa);c>=d&&Cc(c,typeof s=="function"?s():s)},Ne=(...a)=>{Za&&Ic(...a)}}),Ja,es=j(()=>{ye(),Ja=(a,s)=>new(Nn(s))(a)}),Hn=j(()=>{}),ts,ji,Ki,Tc,Ac,rs,Xi,Yi,is,os=j(()=>{Xt(),Hn(),ts=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),ji=[],Ki=a=>Math.ceil(a/16)*16,Tc=a=>{for(let s=0;s<ji.length;s++){let c=ji[s];if(a<=c)return c}return Math.ceil(a/16)*16},Ac=1,rs=()=>Ac++,Xi=async(a,s,c,d)=>{let et=Ki(c),g=a.device.createBuffer({size:et,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let at=a.getCommandEncoder();a.endComputePass(),at.copyBufferToBuffer(s,0,g,0,et),a.flush(),await g.mapAsync(GPUMapMode.READ);let $t=g.getMappedRange();if(d){let vt=d();return vt.set(new Uint8Array($t,0,c)),vt}else return new Uint8Array($t.slice(0,c))}finally{g.destroy()}},Yi=class{constructor(a){this.backend=a,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[s]of ts)ji.push(s),this.freeBuffers.set(s,[]),this.freeUniformBuffers.set(s,[])}upload(a,s){let c=s.buffer,d=s.byteOffset,et=s.byteLength,g=Ki(et),at=this.storageCache.get(a);if(!at)throw new Error("gpu data for uploading does not exist");if(at.originalSize!==et)throw new Error(`inconsistent data size. gpu data size=${at.originalSize}, data size=${et}`);let $t=this.backend.device.createBuffer({mappedAtCreation:!0,size:g,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),vt=$t.getMappedRange();new Uint8Array(vt).set(new Uint8Array(c,d,et)),$t.unmap();let b=this.backend.getCommandEncoder();this.backend.endComputePass(),b.copyBufferToBuffer($t,0,at.gpuData.buffer,0,g),Ne("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${a})`),this.buffersForUploadingPending.push($t)}memcpy(a,s){let c=this.storageCache.get(a);if(!c)throw new Error("source gpu data for memcpy does not exist");let d=this.storageCache.get(s);if(!d)throw new Error("destination gpu data for memcpy does not exist");if(c.originalSize!==d.originalSize)throw new Error("inconsistent source and destination gpu data size");let et=Ki(c.originalSize),g=this.backend.getCommandEncoder();this.backend.endComputePass(),g.copyBufferToBuffer(c.gpuData.buffer,0,d.gpuData.buffer,0,et)}registerExternalBuffer(a,s,c){let d;if(c){if(d=this.externalBuffers.get(c),d===void 0)throw new Error("previous buffer is not registered");if(a===c)return Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${s}) => id=${d}, buffer is the same, skip.`),d;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`);this.externalBuffers.delete(c)}else d=rs();return this.storageCache.set(d,{gpuData:{id:d,type:0,buffer:a},originalSize:s}),this.externalBuffers.set(a,d),Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${s}) => id=${d}, registered.`),d}unregisterExternalBuffer(a){let s=this.externalBuffers.get(a);s!==void 0&&(this.storageCache.delete(s),this.externalBuffers.delete(a),Ne("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${s}`))}create(a,s=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let c=Tc(a),d,et=(s&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,g=(s&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(et||g){let $t=(et?this.freeBuffers:this.freeUniformBuffers).get(c);$t?$t.length>0?d=$t.pop():d=this.backend.device.createBuffer({size:c,usage:s}):d=this.backend.device.createBuffer({size:c,usage:s})}else d=this.backend.device.createBuffer({size:c,usage:s});let at={id:rs(),type:0,buffer:d};return this.storageCache.set(at.id,{gpuData:at,originalSize:a}),Ne("verbose",()=>`[WebGPU] GpuDataManager.create(size=${a}) => id=${at.id}`),at}get(a){var s;return(s=this.storageCache.get(a))==null?void 0:s.gpuData}release(a){let s=this.storageCache.get(a);if(!s)throw new Error("releasing data does not exist");return Ne("verbose",()=>`[WebGPU] GpuDataManager.release(id=${a}), gpuDataId=${s.gpuData.id}`),this.storageCache.delete(a),this.buffersPending.push(s.gpuData.buffer),s.originalSize}async download(a,s){let c=this.storageCache.get(a);if(!c)throw new Error("data does not exist");await Xi(this.backend,c.gpuData.buffer,c.originalSize,s)}refreshPendingBuffers(){for(let a of this.buffersForUploadingPending)a.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let a of this.buffersPending){let s=ts.get(a.size);if((a.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let c=this.freeBuffers.get(a.size)||[];s===void 0||c.length>=s?a.destroy():c.push(a)}else if((a.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let c=this.freeUniformBuffers.get(a.size)||[];s===void 0||c.length>=s?a.destroy():c.push(a)}else a.destroy()}this.buffersPending=[]}else{let a=this.capturedPendingBuffers.get(this.backend.currentSessionId);a||(a=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,a));for(let s of this.buffersPending)a.push(s);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(a=>{a.forEach(s=>{s.destroy()})}),this.freeUniformBuffers.forEach(a=>{a.forEach(s=>{s.destroy()})}),this.storageCache.forEach(a=>{a.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(a=>{a.forEach(s=>{s.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(a){let s=this.capturedPendingBuffers.get(a);s&&(s.forEach(c=>{c.destroy()}),this.capturedPendingBuffers.delete(a))}},is=(...a)=>new Yi(...a)}),Zi,we,Ze=j(()=>{Zi=class{constructor(a){Object.assign(this,a)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(a=>`${this[a]}`).join(";")),this.key}},we=a=>new Zi(a)}),Qi,zt,M$1,pr,Gn,Ln,Fn,xe=j(()=>{Qi=class{static calcMatMulShape(a,s){return a[1]!==s[0]?void 0:[a[0],s[1]]}},zt=class{static calcShape(a,s,c=!1){let d=a.length,et=s.length;if(d===0)return s;if(et===0)return a;let g=Math.max(a.length,s.length),at=new Array(g);if(c){if(d<2||et<2)return;let $t=Qi.calcMatMulShape([a[d-2],a[d-1]],[s[et-2],s[et-1]]);if($t===void 0)return;[at[g-2],at[g-1]]=$t}for(let $t=c?3:1;$t<=g;$t++){let vt=d-$t<0?1:a[d-$t],b=et-$t<0?1:s[et-$t];if(vt!==b&&vt>1&&b>1)return;let pt=Math.max(vt,b);if(vt&&b)at[g-$t]=Math.max(vt,b);else{if(pt>1)return;at[g-$t]=0}}return at}static isValidBroadcast(a,s){let c=a.length,d=s.length;if(c>d)return!1;for(let et=1;et<=c;et++)if(a[c-et]!==1&&a[c-et]!==s[d-et])return!1;return!0}},M$1=class Uw{static size(s){return Uw.getSizeFromDimensionRange(s,0,s.length)}static convertShape(s,c=4){let d=s.length;if(d===0)return[];let et=new Array(d),g=d-1;for(;g>=0;){if(s[g]%c===0){et[g]=s[g]/c;break}if(c%s[g]!==0)throw new Error("cannot convert shape");et[g]=1,c/=s[g],g--}for(g--;g>=0;g--)et[g]=s[g];return et}static sizeFromDimension(s,c){if(c<0||c>s.length)throw new Error(`invalid dimension of ${c} for sizeFromDimension as Tensor has ${s.length} dimensions.`);return Uw.getSizeFromDimensionRange(s,c,s.length)}static sizeToDimension(s,c){if(c<0||c>s.length)throw new Error(`invalid dimension of ${c} for sizeToDimension as Tensor has ${s.length} dimensions.`);return Uw.getSizeFromDimensionRange(s,0,c)}static getSizeFromDimensionRange(s,c,d){let et=1;for(let g=c;g<d;g++){if(s[g]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");et*=s[g]}return et}static computeStrides(s){let c=s.length;if(c===0)return[];if(c===1)return[1];let d=new Array(c);d[c-1]=1,d[c-2]=s[c-1];for(let et=c-3;et>=0;--et)d[et]=d[et+1]*s[et+1];return d}static normalizeAxis(s,c){if(s<-c&&s>=c)throw new Error("unsupported axis for this operation.");return s<0?s+c:s}static normalizeAxes(s,c){return s.map(d=>this.normalizeAxis(d,c??s.length))}static sortBasedOnPerm(s,c){return c?c.map(d=>s[d]):s.slice().reverse()}static padShape(s,c){let d=s.length;return s.map((et,g)=>et+c[g]+c[g+d])}static areEqual(s,c){return s.length!==c.length?!1:s.every((d,et)=>d===c[et])}},pr=class Wx{static adjustPoolAttributes(s,c,d,et,g,at){if(!s&&d.length!==c.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(s)for(let $t=0;$t<c.length-2;$t++)$t>=d.length?d.push(c[$t+2]):d[$t]=c[$t+2];for(let $t=0;$t<d.length;$t++)if($t<et.length){if(et[$t]<0)throw new Error("strides should be greater than or equal to 1")}else et.push(1);for(let $t=0;$t<d.length;$t++)if($t<g.length){if(g[$t]<0)throw new Error("dilations should be greater than or equal to 1")}else g.push(1);for(let $t=0;$t<d.length*2;$t++)if($t<at.length){if(at[$t]<0)throw new Error("pad should be greater than or equal to 1")}else at.push(0);for(let $t=0;$t<d.length;$t++){if(d[$t]<=0)throw new Error("kernel shapes need to be greater than 0");if(at[$t]>=d[$t]||at[$t+d.length]>=d[$t])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(s,c,d,et,g,at,$t){if($t){if(g.length!==2*(s.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(c.length!==s.length-2)throw new Error("length of strides should be the length of data dimensions");if(et.length!==s.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let vt=0;vt<s.length-2;vt++)Wx.adjustPadAndReturnShape(s[vt+(at?1:2)],c[vt],d[vt],et[vt],g,vt,vt+s.length-2,$t)}}static computePoolOutputShape(s,c,d,et,g,at,$t){if(c.length<=0)throw new Error("input shape must be of size greater than 0");let vt=[c[0],c[1]];return Wx.computeShapeHelper(s,c,vt,d,et,g,at,$t),vt}static computeConvOutputShape(s,c,d,et,g,at,$t){if(s.length<=0||c.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let vt=[s[0],c[0]];return Wx.computeShapeHelper(!1,s,vt,d,et,g,at,$t),vt}static computeShapeHelper(s,c,d,et,g,at,$t,vt){if(s)for(let b=0;b<c.length-2;b++)d.push(1);else for(let b=0;b<c.length-2;b++)d.push(Wx.adjustPadAndReturnShape(c[b+2],et[b],g[b],at[b],$t,b,b+c.length-2,vt))}static adjustPadAndReturnShape(s,c,d,et,g,at,$t,vt){let b=d*(et-1)+1;if(vt&&vt!=="NOTSET")switch(vt){case"VALID":return g[at]=0,g[$t]=0,Math.floor((s-b)/c+1);case"SAME_LOWER":case"SAME_UPPER":if(d!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let pt=((s+c-1)/c-1)*c+et-s;return g[at]=Math.floor(vt==="SAME_LOWER"?(pt+1)/2:pt/2),g[$t]=pt-g[at],Math.floor((s+pt-et)/c+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((s+g[at]+g[$t]-b)/c+1)}},Gn=class{static getShapeOfGemmResult(a,s,c,d,et){if(a.length!==2||c.length!==2)throw new Error("shape need to be of size 2");let g,at,$t;s?(g=a[1],at=a[0]):(g=a[0],at=a[1]);let vt=-1;if(d?($t=c[0],vt=1):($t=c[1],vt=0),c[vt]!==at)throw new Error("dimension mismatch");if(g<=0||$t<=0||at<=0)throw new Error("invalid shape specified");if(et&&!zt.isValidBroadcast(et,[g,$t]))throw new Error("gemm: invalid bias shape for broadcast");return[g,$t,at]}},Ln=-34028234663852886e22,Fn=34028234663852886e22}),mr,eo,De,rt,X,Ue,At,fr,Et,fe,to,U$1,K,qn,Ji,as,Pr,_e=j(()=>{ye(),xe(),mr=64,eo=(a,s)=>{if(s===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(a){case 10:return s>1?`vec${s}<f16>`:"f16";case 1:return s>1?`vec${s}<f32>`:"f32";case 6:return s>1?`vec${s}<i32>`:"i32";case 12:return s>1?`vec${s}<u32>`:"u32";case 7:if(s>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(s>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(s!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${a}`)}},De=(a,s=1)=>{let c=eo(a,s);return typeof c=="string"?c:c[0]},rt=(a,s=1)=>{let c=eo(a,s);return typeof c=="string"?c:c[1]},X=(...a)=>{let s=[];return a.forEach(c=>{c.length!==0&&s.push({type:12,data:c},{type:12,data:M$1.computeStrides(c)})}),s},Ue=a=>a%4===0?4:a%2===0?2:1,At=(a="f32",s,c="0")=>!s||s===1?`${a}(${c})`:`vec${s}<${a}>(${c})`,fr=(a,s,c)=>a==="f32"?c:s===1?`f32(${c})`:`vec${s}<f32>(${c})`,Et=(a,s)=>s===4?`(${a}.x + ${a}.y + ${a}.z + ${a}.w)`:s===2?`(${a}.x + ${a}.y)`:s===3?`(${a}.x + ${a}.y + ${a}.z)`:a,fe=(a,s,c,d)=>a.startsWith("uniforms.")&&c>4?typeof s=="string"?d==="f16"?`${a}[(${s}) / 8][(${s}) % 8 / 4][(${s}) % 8 % 4]`:`${a}[(${s}) / 4][(${s}) % 4]`:d==="f16"?`${a}[${Math.floor(s/8)}][${Math.floor(s%8/4)}][${s%8%4}]`:`${a}[${Math.floor(s/4)}][${s%4}]`:c>1?`${a}[${s}]`:a,to=(a,s,c,d,et)=>{let g=typeof c=="number",at=g?c:c.length,$t=[...new Array(at).keys()],vt=at<2?"u32":at<=4?`vec${at}<u32>`:`array<u32, ${at}>`,b=eo(s,et),pt=typeof b=="string"?b:b[1],st=typeof b=="string"?b:b[0],wt={indices:vt,value:pt,storage:st,tensor:s},Tt=Zr=>typeof Zr=="string"?Zr:`${Zr}u`,Ct={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},jt=g?"uniforms.":"",Lt=`${jt}${a}_shape`,Ht=`${jt}${a}_strides`,Gt="";for(let Zr=0;Zr<at-1;Zr++)Gt+=`
    let dim${Zr} = current / ${fe(Ht,Zr,at)};
    let rest${Zr} = current % ${fe(Ht,Zr,at)};
    indices[${Zr}] = dim${Zr};
    current = rest${Zr};
    `;Gt+=`indices[${at-1}] = current;`;let Kt=at<2?"":`
  fn o2i_${a}(offset: u32) -> ${wt.indices} {
    var indices: ${wt.indices};
    var current = offset;
    ${Gt}
    return indices;
  }`,tr=Zr=>(Ct.offsetToIndices=!0,at<2?Zr:`o2i_${a}(${Zr})`),rr=[];if(at>=2)for(let Zr=at-1;Zr>=0;Zr--)rr.push(`${fe(Ht,Zr,at)} * (indices[${Zr}])`);let Lr=at<2?"":`
  fn i2o_${a}(indices: ${wt.indices}) -> u32 {
    return ${rr.join("+")};
  }`,jr=Zr=>(Ct.indicesToOffset=!0,at<2?Zr:`i2o_${a}(${Zr})`),Yr=(...Zr)=>at===0?"0u":`${wt.indices}(${Zr.map(Tt).join(",")})`,An=(Zr,wn)=>at<2?`${Zr}`:`${fe(Zr,wn,at)}`,No=(Zr,wn,r0)=>at<2?`${Zr}=${r0};`:`${fe(Zr,wn,at)}=${r0};`,o0={},t0=(Zr,wn)=>{Ct.broadcastedIndicesToOffset=!0;let r0=`${wn.name}broadcastedIndicesTo${a}Offset`;if(r0 in o0)return`${r0}(${Zr})`;let ko=[];for(let _n=at-1;_n>=0;_n--){let i0=wn.indicesGet("outputIndices",_n+wn.rank-at);ko.push(`${An(Ht,_n)} * (${i0} % ${An(Lt,_n)})`)}return o0[r0]=`fn ${r0}(outputIndices: ${wn.type.indices}) -> u32 {
             return ${ko.length>0?ko.join("+"):"0u"};
           }`,`${r0}(${Zr})`},c0=(Zr,wn)=>(()=>{if(wt.storage===wt.value)return`${a}[${Zr}]=${wn};`;if(wt.storage==="vec2<u32>"&&wt.value==="i32")return`${a}[${Zr}]=vec2<u32>(u32(${wn}), select(0u, 0xFFFFFFFFu, ${wn} < 0));`;if(wt.storage==="vec2<u32>"&&wt.value==="u32")return`${a}[${Zr}]=vec2<u32>(u32(${wn}), 0u);`;if(wt.storage==="u32"&&wt.value==="vec4<bool>")return`${a}[${Zr}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${wn}));`;throw new Error(`not supported combination of storage type ${wt.storage} and value type ${wt.value} yet`)})(),n0=Zr=>(()=>{if(wt.storage===wt.value)return`${a}[${Zr}]`;if(wt.storage==="vec2<u32>"&&wt.value==="i32")return`i32(${a}[${Zr}].x)`;if(wt.storage==="vec2<u32>"&&wt.value==="u32")return`u32(${a}[${Zr}].x)`;if(wt.storage==="u32"&&wt.value==="vec4<bool>")return`vec4<bool>(bool(${a}[${Zr}] & 0xFFu), bool(${a}[${Zr}] & 0xFF00u), bool(${a}[${Zr}] & 0xFF0000u), bool(${a}[${Zr}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${wt.storage} and value type ${wt.value} yet`)})(),Qo=at<2?"":`
  fn get_${a}ByIndices(indices: ${wt.indices}) -> ${pt} {
    return ${n0(`i2o_${a}(indices)`)};
  }`,Mo=at<2?"":(()=>{let Zr=$t.map(r0=>`d${r0}: u32`).join(", "),wn=$t.map(r0=>`d${r0}`).join(", ");return`
  fn get_${a}(${Zr}) -> ${pt} {
    return get_${a}ByIndices(${Yr(wn)});
  }`})(),zo=(...Zr)=>{if(Zr.length!==at)throw new Error(`indices length must be ${at}`);let wn=Zr.map(Tt).join(",");return at===0?n0("0u"):at===1?n0(wn[0]):(Ct.get=!0,Ct.getByIndices=!0,Ct.indicesToOffset=!0,`get_${a}(${wn})`)},e0=Zr=>at<2?n0(Zr):(Ct.getByIndices=!0,Ct.indicesToOffset=!0,`get_${a}ByIndices(${Zr})`),Xr=at<2?"":`
  fn set_${a}ByIndices(indices: ${wt.indices}, value: ${pt}) {
    ${c0(`i2o_${a}(indices)`,"value")}
  }`,In=at<2?"":(()=>{let Zr=$t.map(r0=>`d${r0}: u32`).join(", "),wn=$t.map(r0=>`d${r0}`).join(", ");return`
  fn set_${a}(${Zr}, value: ${pt}) {
    set_${a}ByIndices(${Yr(wn)}, value);
  }`})();return{impl:()=>{let Zr=[],wn=!1;return Ct.offsetToIndices&&(Zr.push(Kt),wn=!0),Ct.indicesToOffset&&(Zr.push(Lr),wn=!0),Ct.broadcastedIndicesToOffset&&(Object.values(o0).forEach(r0=>Zr.push(r0)),wn=!0),Ct.set&&(Zr.push(In),wn=!0),Ct.setByIndices&&(Zr.push(Xr),wn=!0),Ct.get&&(Zr.push(Mo),wn=!0),Ct.getByIndices&&(Zr.push(Qo),wn=!0),!g&&wn&&Zr.unshift(`const ${Lt} = ${wt.indices}(${c.join(",")});`,`const ${Ht} = ${wt.indices}(${M$1.computeStrides(c).join(",")});`),Zr.join(`
`)},type:wt,offsetToIndices:tr,indicesToOffset:jr,broadcastedIndicesToOffset:t0,indices:Yr,indicesGet:An,indicesSet:No,set:(...Zr)=>{if(Zr.length!==at+1)throw new Error(`indices length must be ${at}`);let wn=Zr[at];if(typeof wn!="string")throw new Error("value must be string");let r0=Zr.slice(0,at).map(Tt).join(",");return at===0?c0("0u",wn):at===1?c0(r0[0],wn):(Ct.set=!0,Ct.setByIndices=!0,Ct.indicesToOffset=!0,`set_${a}(${r0}, ${wn})`)},setByOffset:c0,setByIndices:(Zr,wn)=>at<2?c0(Zr,wn):(Ct.setByIndices=!0,Ct.indicesToOffset=!0,`set_${a}ByIndices(${Zr}, ${wn});`),get:zo,getByOffset:n0,getByIndices:e0,usage:d,name:a,strides:Ht,shape:Lt,rank:at}},U$1=(a,s,c,d=1)=>to(a,s,c,"input",d),K=(a,s,c,d=1)=>to(a,s,c,"output",d),qn=(a,s,c,d=1)=>to(a,s,c,"internal",d),Ji=class{constructor(a,s){this.normalizedDispatchGroup=a,this.limits=s,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(a){return`if (global_idx >= ${typeof a=="number"?`${a}u`:a}) { return; }`}mainStart(a=mr){let s=typeof a=="number"?a:a[0],c=typeof a=="number"?1:a[1],d=typeof a=="number"?1:a[2];if(s>this.limits.maxComputeWorkgroupSizeX||c>this.limits.maxComputeWorkgroupSizeY||d>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${s}, ${c}, ${d}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(s*c*d>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${s}, ${c}, ${d}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let et=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,g=et?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,at=et?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${s*c*d}u + local_idx;`;return`@compute @workgroup_size(${s}, ${c}, ${d})
  fn main(${g}) {
    ${at}
  `}appendVariableUniforms(a){a.rank!==0&&(a.shape.startsWith("uniforms.")&&this.uniforms.push({name:a.shape.replace("uniforms.",""),type:"u32",length:a.rank}),a.strides.startsWith("uniforms.")&&this.uniforms.push({name:a.strides.replace("uniforms.",""),type:"u32",length:a.rank}))}declareVariable(a,s){if(a.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(a),this.appendVariableUniforms(a);let c=a.usage==="input"?"read":"read_write",d=a.type.storage;return`@group(0) @binding(${s}) var<storage, ${c}> ${a.name}: array<${d}>;`}declareVariables(...a){return a.map(s=>this.declareVariable(s,this.variableIndex++)).join(`
`)}registerInternalVariable(a){if(a.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(a),this.appendVariableUniforms(a)}registerInternalVariables(...a){return a.forEach(s=>this.registerInternalVariable(s)),this}registerUniform(a,s,c=1){return this.uniforms.push({name:a,type:s,length:c}),this}registerUniforms(a){return this.uniforms=this.uniforms.concat(a),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let a=[];for(let{name:s,type:c,length:d}of this.uniforms)if(d&&d>4)c==="f16"?a.push(`@align(16) ${s}:array<mat2x4<${c}>, ${Math.ceil(d/8)}>`):a.push(`${s}:array<vec4<${c}>, ${Math.ceil(d/4)}>`);else{let et=d==null||d===1?c:`vec${d}<${c}>`;a.push(`${s}:${et}`)}return`
      struct Uniforms { ${a.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(a=>a.impl()).join(`
`)+this.internalVariables.map(a=>a.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let a=s=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(s)];return this.uniforms.map(s=>[a(s.type),s.length??1])}},as=(a,s)=>new Ji(a,s),Pr=(a,s)=>{let c=a.length,d=[];for(let et=0;et<c;et++){let g=c-1-et,at=a[g]||1;(s[s.length-1-et]||1)>1&&at===1&&d.unshift(g)}return d}}),Ec,ss,kc,Oc,xt,us,ls,Rr=j(()=>{ye(),xe(),Ze(),_e(),Ec=a=>{if(!a||a.length!==1)throw new Error("Transpose requires 1 input.")},ss=(a,s)=>s&&s.length!==a?[...new Array(a).keys()].reverse():s,kc=(a,s)=>M$1.sortBasedOnPerm(a,ss(a.length,s)),Oc=(a,s,c,d)=>{let et=[];et.push(`fn perm(i: ${d.type.indices}) -> ${c.type.indices} {
    var a: ${c.type.indices};`);for(let g=0;g<s;++g)et.push(c.indicesSet("a",a[g],`i[${g}]`));return et.push("return a;}"),et.join(`
`)},xt=(a,s)=>{let c=a.dataType,d=a.dims.length,et=ss(d,s),g=kc(a.dims,et),at=K("output",c,g.length),$t=U$1("a",c,d),vt=b=>`
  ${b.registerUniform("output_size","u32").declareVariables($t,at)}

  ${Oc(et,d,$t,at)}

  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${at.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${at.setByOffset("global_idx",$t.getByIndices("aIndices"))}
  }`;return{name:"Transpose",shaderCache:{hint:`${s}`,inputDependencies:["rank"]},getRunData:b=>{let pt=M$1.size(g);return{outputs:[{dims:g,dataType:b[0].dataType}],dispatchGroup:{x:Math.ceil(pt/64)},programUniforms:[{type:12,data:pt},...X(b[0].dims,g)]}},getShaderSource:vt}},us=(a,s)=>{Ec(a.inputs),a.compute(xt(a.inputs[0],s.perm))},ls=a=>we({perm:a.perm})}),Pc,Rc,zc,Bc,Dc,Mc,Uc,Wc,Nc,Vc,Bt,ds,cs,ps,ms,fs,hs,gs,ys,bs,vs,ws=j(()=>{ye(),xe(),_e(),jn(),Rr(),Pc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Rc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},zc={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Bc={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Dc=(a,s)=>{let c=[];for(let d=s-a;d<s;++d)c.push(d);return c},Mc=(a,s)=>{let c=[],d=a.length;for(let g=0;g<d;g++)s.indexOf(g)===-1&&c.push(a[g]);let et=s.map(g=>a[g]);return[c,et]},Uc=(a,s)=>{let c=a.length+s.length,d=[],et=0;for(let g=0;g<c;g++)s.indexOf(g)===-1?d.push(a[et++]):d.push(1);return d},Wc=(a,s)=>{for(let c=0;c<a.length;++c)if(a[a.length-c-1]!==s-1-c)return!1;return!0},Nc=(a,s)=>{let c=[];if(!Wc(a,s)){for(let d=0;d<s;++d)a.indexOf(d)===-1&&c.push(d);a.forEach(d=>c.push(d))}return c},Vc=(a,s,c,d,et,g,at)=>{let $t=c[0].dims,vt=M$1.size(g),b=M$1.size(at),pt=U$1("_A",c[0].dataType,$t),st=K("output",et,g),wt=32,Tt=`
          var<workgroup> aBestValues : array<f32, ${wt}>;
       `;return{name:a,shaderCache:s,getShaderSource:Ct=>`
        ${Ct.registerUniform("reduceSize","u32").declareVariables(pt,st)}
        ${Tt}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${Ct.mainStart(wt)}

          let outputIndex = global_idx / ${wt};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${zc[d]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${wt}) {
           let candidate = f32(${pt.getByOffset("offset + k")});
           bestValue = ${Pc[d]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${wt}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Rc[d]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${st.setByOffset("outputIndex",`${d==="mean"?`${st.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${st.type.storage}(${Bc[d]})`}`)};
         }
        }`,getRunData:()=>({outputs:[{dims:g,dataType:et}],dispatchGroup:{x:vt},programUniforms:[{type:12,data:b}]})}},Bt=(a,s,c,d)=>{let et=a.inputs.length===1?c:ro(a.inputs,c),g=et.axes;g.length===0&&!et.noopWithEmptyAxes&&(g=a.inputs[0].dims.map((Tt,Ct)=>Ct));let at=M$1.normalizeAxes(g,a.inputs[0].dims.length),$t=at,vt=a.inputs[0],b=Nc($t,a.inputs[0].dims.length);b.length>0&&(vt=a.compute(xt(a.inputs[0],b),{inputs:[0],outputs:[-1]})[0],$t=Dc($t.length,vt.dims.length));let[pt,st]=Mc(vt.dims,$t),wt=pt;et.keepDims&&(wt=Uc(pt,at)),a.compute(Vc(s,{hint:et.cacheKey,inputDependencies:["type"]},[vt],d,a.inputs[0].dataType,wt,st),{inputs:[vt]})},ds=(a,s)=>{Bt(a,"ReduceMeanShared",s,"mean")},cs=(a,s)=>{Bt(a,"ReduceL1Shared",s,"l1")},ps=(a,s)=>{Bt(a,"ReduceL2Shared",s,"l2")},ms=(a,s)=>{Bt(a,"ReduceLogSumExpShared",s,"logSumExp")},fs=(a,s)=>{Bt(a,"ReduceMaxShared",s,"max")},hs=(a,s)=>{Bt(a,"ReduceMinShared",s,"min")},gs=(a,s)=>{Bt(a,"ReduceProdShared",s,"prod")},ys=(a,s)=>{Bt(a,"ReduceSumShared",s,"sum")},bs=(a,s)=>{Bt(a,"ReduceSumSquareShared",s,"sumSquare")},vs=(a,s)=>{Bt(a,"ReduceLogSumShared",s,"logSum")}}),Dt,Hc,Kn,ro,Mt,Gc,Lc,Fc,qc,jc,Kc,Yc,Xc,Zc,Qc,Ut,$s,_s,xs,Ss,Cs,Is,Ts,As,Es,ks,jn=j(()=>{ye(),xe(),Ze(),_e(),ws(),Dt=a=>{if(!a||a.length===0||a.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(a.length===2&&a[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Hc=a=>["","",`var value = ${a.getByIndices("input_indices")};`,""],Kn=(a,s,c,d,et,g,at=!1,$t=!1)=>{let vt=[],b=c[0].dims,pt=b.length,st=M$1.normalizeAxes(et,pt),wt=!$t&&st.length===0;b.forEach((jt,Lt)=>{wt||st.indexOf(Lt)>=0?at&&vt.push(1):vt.push(jt)});let Tt=vt.length,Ct=M$1.size(vt);return{name:a,shaderCache:s,getShaderSource:jt=>{let Lt=[],Ht=U$1("_A",c[0].dataType,pt),Gt=K("output",g,Tt),Kt=d(Ht,Gt,st),tr=Kt[2];for(let rr=0,Lr=0;rr<pt;rr++)wt||st.indexOf(rr)>=0?(at&&Lr++,tr=`for(var j${rr}: u32 = 0; j${rr} < ${b[rr]}; j${rr}++) {
                  ${Kt[2].includes("last_index")?`let last_index = j${rr};`:""}
                  ${Ht.indicesSet("input_indices",rr,`j${rr}`)}
                  ${tr}
                }`):(Lt.push(`${Ht.indicesSet("input_indices",rr,Gt.indicesGet("output_indices",Lr))};`),Lr++);return`

        ${jt.registerUniform("output_size","u32").declareVariables(Ht,Gt)}

        ${jt.mainStart()}
          ${jt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${Ht.type.indices};
          let output_indices = ${Gt.offsetToIndices("global_idx")};

          ${Lt.join(`
`)}
          ${Kt[0]}       // init ops for reduce max/min
          ${Kt[1]}
          ${tr}
          ${Kt[3]}
          ${Kt.length===4?Gt.setByOffset("global_idx","value"):Kt.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:vt,dataType:g}],dispatchGroup:{x:Math.ceil(Ct/64)},programUniforms:[{type:12,data:Ct},...X(b,vt)]})}},ro=(a,s)=>{let c=[];return a[1].dims[0]>0&&a[1].getBigInt64Array().forEach(d=>c.push(Number(d))),we({axes:c,keepDims:s.keepDims,noopWithEmptyAxes:s.noopWithEmptyAxes})},Mt=(a,s,c,d)=>{let et=a.inputs,g=et.length===1?c:ro(et,c);a.compute(Kn(s,{hint:g.cacheKey,inputDependencies:["rank"]},[et[0]],g.noopWithEmptyAxes&&g.axes.length===0?Hc:d,g.axes,et[0].dataType,g.keepDims,g.noopWithEmptyAxes),{inputs:[0]})},Gc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceLogSum",s,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += ${c.getByIndices("input_indices")};`,"value = log(value);"])},Lc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceL1",s,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += abs(${c.getByIndices("input_indices")});`,""])},Fc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceL2",s,(c,d)=>[`var t = ${d.type.value}(0); var value = ${d.type.value}(0);`,"",`t = ${c.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},qc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceLogSumExp",s,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += exp(${c.getByIndices("input_indices")});`,"value = log(value);"])},jc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceMax",s,(c,d,et)=>{let g=[];for(let at=0;at<c.rank;at++)(et.indexOf(at)>=0||et.length===0)&&g.push(c.indicesSet("input_indices",at,0));return[`${g.join(`
`)}`,`var value = ${c.getByIndices("input_indices")};`,`value = max(value, ${c.getByIndices("input_indices")});`,""]})},Kc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceMean",s,(c,d,et)=>{let g=1;for(let at=0;at<c.rank;at++)(et.indexOf(at)>=0||et.length===0)&&(g*=a.inputs[0].dims[at]);return["var sum = f32(0);","",`sum += f32(${c.getByIndices("input_indices")});`,`let value = ${d.type.value}(sum / ${g});`]})},Yc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceMin",s,(c,d,et)=>{let g=[];for(let at=0;at<c.rank;at++)(et.indexOf(at)>=0||et.length===0)&&g.push(`input_indices[${at}] = 0;`);return[`${g.join(`
`)}`,`var value = ${c.getByIndices("input_indices")};`,`value = min(value, ${c.getByIndices("input_indices")});`,""]})},Xc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceProd",s,(c,d)=>[`var value = ${d.type.storage}(1);`,"",`value *= ${c.getByIndices("input_indices")};`,""])},Zc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceSum",s,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += ${c.getByIndices("input_indices")};`,""])},Qc=(a,s)=>{Dt(a.inputs),Mt(a,"ReduceSumSquare",s,(c,d)=>[`var t = ${d.type.value}(0); var value = ${d.type.value}(0);`,"",`t = ${c.getByIndices("input_indices")}; value += t * t;`,""])},Ut=(a,s,c)=>{if(s.length===0)return c;let d=1,et=1;for(let g=0;g<s.length;g++)s.indexOf(g)===-1?d*=a[g]:et*=a[g];return et<32&&d>1024},$s=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Kc(a,s):ds(a,s)},_s=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Lc(a,s):cs(a,s)},xs=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Fc(a,s):ps(a,s)},Ss=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?qc(a,s):ms(a,s)},Cs=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?jc(a,s):fs(a,s)},Is=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Yc(a,s):hs(a,s)},Ts=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Xc(a,s):gs(a,s)},As=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Zc(a,s):ys(a,s)},Es=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Qc(a,s):bs(a,s)},ks=(a,s)=>{Ut(a.inputs[0].dims,s.axes,s.noopWithEmptyAxes)?Gc(a,s):vs(a,s)}}),Os,Ps,Rs,no,zs=j(()=>{ye(),Ze(),jn(),Os=a=>{if(!a||a.length===0||a.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(a[0].dataType!==1)throw new Error("Invalid input type.")},Ps=(a,s)=>{Os(a.inputs);let c=(d,et,g)=>{let at=[];for(let $t=0;$t<d.rank;$t++)(g.indexOf($t)>=0||g.length===0)&&at.push(`input_indices[${$t}] = 0;`);return[`${at.join(`
`)}`,`var value = ${d.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${d.getByIndices("input_indices")} ${s.selectLastIndex>0?"<=":"<"} value) {
         value = ${d.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",et.setByOffset("global_idx","best_index")]};a.compute(Kn("ArgMin",{hint:s.cacheKey,inputDependencies:["rank"]},[a.inputs[0]],c,[s.axis],7,s.keepDims),{inputs:[0]})},Rs=(a,s)=>{Os(a.inputs);let c=(d,et,g)=>{let at=[];for(let $t=0;$t<d.rank;$t++)(g.indexOf($t)>=0||g.length===0)&&at.push(`input_indices[${$t}] = 0;`);return[`${at.join(`
`)}`,`var value = ${d.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${d.getByIndices("input_indices")} ${s.selectLastIndex>0?">=":">"} value) {
         value = ${d.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",et.setByOffset("global_idx","best_index")]};a.compute(Kn("argMax",{hint:s.cacheKey,inputDependencies:["rank"]},[a.inputs[0]],c,[s.axis],7,s.keepDims),{inputs:[0]})},no=a=>we(a)}),Jc,ep,tp,Yn,Bs,Ds,io=j(()=>{ye(),xe(),Ze(),_e(),Jc=(a,s)=>{if(!a||a.length<1)throw new Error("too few inputs");let c=0,d=a[c],et=d.dataType,g=d.dims.length;a.forEach((at,$t)=>{if($t!==c){if(at.dataType!==et)throw new Error("input tensors should be one type");if(at.dims.length!==g)throw new Error("input tensors should have the same shape");at.dims.forEach((vt,b)=>{if(b!==s&&vt!==d.dims[b])throw new Error("non concat dimensions must match")})}})},ep=(a,s)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${a}u>(${s});
    for (var i: u32 = 0u; i < ${a}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${a}u;
  }`,tp=(a,s)=>{let c=a.length,d=[];for(let et=0;et<c;++et){let g=s.setByOffset("global_idx",a[et].getByIndices("indices"));c===1?d.push(g):et===0?d.push(`if (inputIndex == ${et}u) { ${g} }`):et===c-1?d.push(`else { ${g} }`):d.push(`else if (inputIndex == ${et}) { ${g} }`)}return d.join(`
`)},Yn=(a,s,c,d)=>{let et=M$1.size(c),g=new Array(a.length),at=new Array(a.length),$t=0,vt=[],b=[],pt=[{type:12,data:et}];for(let jt=0;jt<a.length;++jt)$t+=a[jt].dims[s],g[jt]=$t,b.push(a[jt].dims.length),at[jt]=U$1(`input${jt}`,d,b[jt]),vt.push("rank"),pt.push({type:12,data:g[jt]});for(let jt=0;jt<a.length;++jt)pt.push(...X(a[jt].dims));pt.push(...X(c));let st=K("output",d,c.length),wt=st.indicesGet("indices",s),Tt=Array.from(Array(g.length).keys()).map(jt=>`uniforms.sizeInConcatAxis${jt}`).join(","),Ct=jt=>`

  ${(()=>{jt.registerUniform("outputSize","u32");for(let Lt=0;Lt<a.length;Lt++)jt.registerUniform(`sizeInConcatAxis${Lt}`,"u32");return jt.declareVariables(...at,st)})()}

  ${ep(g.length,Tt)}

  ${jt.mainStart()}
    ${jt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${st.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${wt});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${g.length}u>(${Tt});
      ${wt} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${tp(at,st)}
  }`;return{name:"Concat",shaderCache:{hint:`${s}`,inputDependencies:vt},getRunData:()=>({outputs:[{dims:c,dataType:d}],dispatchGroup:{x:Math.ceil(et/64)},programUniforms:pt}),getShaderSource:Ct}},Bs=(a,s)=>{let c=a.inputs,d=c[0].dims,et=M$1.normalizeAxis(s.axis,d.length);Jc(c,et);let g=d.slice();g[et]=c.reduce(($t,vt)=>$t+(vt.dims.length>et?vt.dims[et]:0),0);let at=c.filter($t=>M$1.size($t.dims)>0);a.compute(Yn(at,et,g,c[0].dataType),{inputs:at})},Ds=a=>we({axis:a.axis})}),rp,np,ip,op,Xn,ap,Ms,oo=j(()=>{ye(),Hn(),_e(),io(),rp=(a,s)=>{let c=a[0],d=a[1],et=a[2],g=a[3],at=a[4],$t=a[5];if(at&&$t)throw new Error("Attention cannot have both past and relative_position_bias");if(c.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let vt=c.dims[0],b=c.dims[1],pt=c.dims[2];if(et.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(d.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(d.dims[0]!==pt)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(et.dims[0]!==d.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let st=et.dims[0]/3,wt=st,Tt=wt;if(s.qkvHiddenSizes.length>0){if(s.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let Kt of s.qkvHiddenSizes)if(Kt%s.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");st=s.qkvHiddenSizes[0],wt=s.qkvHiddenSizes[1],Tt=s.qkvHiddenSizes[2]}let Ct=b;if(st!==wt)throw new Error("qkv_hidden_sizes first element should be same as the second");if(et.dims[0]!==st+wt+Tt)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let jt=0;if(at){if(wt!==Tt)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(at.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(at.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(at.dims[1]!==vt)throw new Error('Input "past" second dimension must be batch_size');if(at.dims[2]!==s.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(at.dims[4]!==wt/s.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');s.pastPresentShareBuffer||(jt=at.dims[3])}let Lt=Ct+jt,Ht=-1,Gt=0;if(g)throw new Error("Mask not supported");if(at)throw new Error("past is not supported");return{batchSize:vt,sequenceLength:b,pastSequenceLength:jt,kvSequenceLength:Ct,totalSequenceLength:Lt,maxSequenceLength:Ht,inputHiddenSize:pt,hiddenSize:st,vHiddenSize:Tt,headSize:Math.floor(st/s.numHeads),vHeadSize:Math.floor(Tt/s.numHeads),numHeads:s.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:s.maskFilterValue,maskType:Gt,scale:s.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},np=(a,s,c,d)=>{let et=Ue(d),g=64,at=d/et;at<g?g=1:at/8<64&&(g=Math.ceil(at/8));let $t=Math.ceil(d/et/g),vt=[{type:s.dataType,data:1/d},{type:12,data:at},{type:12,data:$t}],b=De(s.dataType,et),pt=rt(1,et),st=wt=>{let Tt=K("x",s.dataType,s.dims,et),Ct=[{name:"d_inv",type:rt(s.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${g}>;
  var<workgroup> thread_sum: array<f32, ${g}>;
  ${wt.registerUniforms(Ct).declareVariables(Tt)}
  ${wt.mainStart([g,1,1])}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = workgroup_id.x * uniforms.d_comp + local_offset;

    var thread_max_vector = ${pt}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      thread_max_vector = max(${pt}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(et){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${et}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${g}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${pt}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      sum_vector += exp(${pt}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(et){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${et}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${g}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        x[offset + i] = ${Tt.type.value}(uniforms.d_inv);
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        var f32input = ${pt}(x[offset + i]);
        x[offset + i] = ${Tt.type.value}(exp(f32input - max_value) / sum);
      }
    }
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${g};${b};${et}`},getShaderSource:st,getRunData:()=>({outputs:[],dispatchGroup:{x:c},programUniforms:vt})}},ip=(a,s,c,d,et,g,at)=>{let $t=at+et.kvSequenceLength,vt=[et.batchSize,et.numHeads,et.sequenceLength,$t],b=g.scale===0?1/Math.sqrt(et.headSize):g.scale,pt=Ue(et.headSize),st=et.headSize/pt,wt=12,Tt={x:Math.ceil($t/wt),y:Math.ceil(et.sequenceLength/wt),z:et.batchSize*et.numHeads},Ct=[{type:12,data:et.sequenceLength},{type:12,data:st},{type:12,data:$t},{type:12,data:et.numHeads},{type:1,data:b}],jt=d?["type","type","type"]:["type","type"],Lt=Ht=>{let Gt=U$1("q",s.dataType,s.dims,pt),Kt=U$1("key",c.dataType,c.dims,pt),tr=[Gt,Kt];d&&tr.push(U$1("relative_position_bias",d.dataType,d.dims));let rr=K("output",s.dataType,vt),Lr=rt(1,pt),jr=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`
  const TILE_SIZE = ${wt}u;

  var<workgroup> tileQ: array<${Gt.type.storage}, ${wt*wt}>;
  var<workgroup> tileK: array<${Gt.type.storage}, ${wt*wt}>;
  ${Ht.registerUniforms(jr).declareVariables(...tr,rr)}
  ${Ht.mainStart([wt,wt,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;
    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;

    var value = ${Lr}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
        value += ${Lr}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    let headOffset = headIdx * uniforms.M * uniforms.N;
    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(pt){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${pt}`)}})()};
        output[outputIdx] = ${rr.type.value} (sum * uniforms.alpha) + ${d?"relative_position_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${pt}`,inputDependencies:jt},getRunData:()=>({outputs:[{dims:vt,dataType:s.dataType,gpuDataType:0}],dispatchGroup:Tt,programUniforms:Ct}),getShaderSource:Lt}},op=(a,s,c,d,et)=>{let g=et+d.kvSequenceLength,at=[d.batchSize,d.sequenceLength,d.vHiddenSize],$t=12,vt={x:Math.ceil(d.vHeadSize/$t),y:Math.ceil(d.sequenceLength/$t),z:d.batchSize*d.numHeads},b=[{type:12,data:d.sequenceLength},{type:12,data:g},{type:12,data:d.vHeadSize},{type:12,data:d.numHeads},{type:12,data:d.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:at,dataType:s.dataType,gpuDataType:0}],dispatchGroup:vt,programUniforms:b}),getShaderSource:pt=>{let st=U$1("probs",s.dataType,s.dims),wt=U$1("v",c.dataType,c.dims),Tt=K("output",s.dataType,at),Ct=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`
  const TILE_SIZE = ${$t}u;
  var<workgroup> tileQ: array<${st.type.value}, ${$t*$t}>;
  var<workgroup> tileK: array<${st.type.value}, ${$t*$t}>;
  ${pt.registerUniforms(Ct).declareVariables(st,wt,Tt)}
  ${pt.mainStart([$t,$t,1])}
   let headIdx = workgroup_id.z;
   let m = global_id.y;
   let n = global_id.x;

   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;
   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;

   var value = ${st.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
     if (m < uniforms.M && w + local_id.x < uniforms.K) {
       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
     }
     if (n < uniforms.N && w + local_id.y < uniforms.K) {
       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];
     }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + currentBatchHeadNumber * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`}}},Xn=(a,s,c,d,et,g,at,$t,vt,b,pt)=>{let st=a.outputCount>1,wt=a.outputCount>2,Tt=st&&wt?b.pastSequenceLength:0,Ct=Tt+b.kvSequenceLength,jt=[b.batchSize,b.numHeads,Ct,b.headSize],Lt=at?[at,c]:[c],Ht=st?a.compute(Yn(Lt,2,jt,c.dataType),{inputs:Lt,outputs:[1]})[0]:c,Gt=[b.batchSize,b.numHeads,Ct,b.headSize],Kt=$t?[$t,d]:[d],tr=wt?a.compute(Yn(Kt,2,Gt,d.dataType),{inputs:Kt,outputs:[2]})[0]:d,rr=[s,Ht];vt&&rr.push(vt);let Lr=a.compute(ip(a,s,Ht,vt,b,pt,Tt),{inputs:rr,outputs:[-1]})[0];a.compute(np(a,Lr,b.batchSize*b.numHeads*b.sequenceLength,Ct),{inputs:[Lr],outputs:[]});let jr=[Lr,tr];a.compute(op(a,Lr,tr,b,Tt),{inputs:jr,outputs:[0]})},ap=(a,s)=>{let c=[s.batchSize,s.numHeads,s.sequenceLength,s.headSize],d=s.sequenceLength,et=s.inputHiddenSize,g=s.headSize,at=12,$t={x:Math.ceil(s.headSize/at),y:Math.ceil(s.sequenceLength/at),z:s.batchSize*s.numHeads},vt=[a.inputs[0],a.inputs[1],a.inputs[2]],b=[{type:12,data:d},{type:12,data:et},{type:12,data:g},{type:12,data:s.numHeads},{type:12,data:s.headSize},{type:12,data:s.hiddenSize},{type:12,data:s.hiddenSize+s.hiddenSize+s.vHiddenSize}],pt=st=>{let wt=K("output_q",vt[0].dataType,c),Tt=K("output_k",vt[0].dataType,c),Ct=K("output_v",vt[0].dataType,c),jt=U$1("input",vt[0].dataType,vt[0].dims),Lt=U$1("weight",vt[1].dataType,vt[1].dims),Ht=U$1("bias",vt[2].dataType,vt[2].dims),Gt=jt.type.storage,Kt=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${at}u;
  var<workgroup> tileInput: array<${Gt}, ${at*at}>;
  var<workgroup> tileWeightQ: array<${Gt}, ${at*at}>;
  var<workgroup> tileWeightK: array<${Gt}, ${at*at}>;
  var<workgroup> tileWeightV: array<${Gt}, ${at*at}>;
  ${st.registerUniforms(Kt).declareVariables(jt,Lt,Ht,wt,Tt,Ct)}
  ${st.mainStart([at,at,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${Gt}(0);
    var valueK = ${Gt}(0);
    var valueV = ${Gt}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return a.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:a.inputs[0].dataType,gpuDataType:0},{dims:c,dataType:a.inputs[0].dataType,gpuDataType:0},{dims:c,dataType:a.inputs[0].dataType,gpuDataType:0}],dispatchGroup:$t,programUniforms:b}),getShaderSource:pt},{inputs:vt,outputs:[-1,-1,-1]})},Ms=(a,s)=>{let c=rp(a.inputs,s),[d,et,g]=ap(a,c);return Xn(a,d,et,g,a.inputs[4],void 0,void 0,void 0,a.inputs[5],c,s)}}),sp,up,lp,Us,Ws=j(()=>{_t(),ye(),xe(),Ze(),_e(),sp=(a,s)=>{if(!a||a.length!==5)throw new Error("BatchNormalization requires 5 inputs");let c=(d,et,g)=>{let at=et.length;if(at!==d.length)throw new Error(`${g}: num dimensions != ${at}`);et.forEach(($t,vt)=>{if($t!==d[vt])throw new Error(`${g}: dim[${vt}] do not match`)})};if(a[0].dims.length>1){let d=s.format==="NHWC"?s.spatial?a[0].dims.slice(-1):a[0].dims.slice(-1).concat(a[0].dims.slice(1,a[0].dims.length-1)):a[0].dims.slice(1,s.spatial?2:void 0);c(a[1].dims,d,"Invalid input scale"),c(a[2].dims,d,"Invalid input B"),c(a[3].dims,d,"Invalid input mean"),c(a[4].dims,d,"Invalid input var")}else c(a[1].dims,[1],"Invalid input scale"),c(a[2].dims,[1],"Invalid input B"),c(a[3].dims,[1],"Invalid input mean"),c(a[4].dims,[1],"Invalid input var")},up=(a,s)=>{let{epsilon:c,spatial:d,format:et}=s,g=a[0].dims,at=d?Ue(g[g.length-1]):1,$t=et==="NHWC"&&g.length>1?at:1,vt=M$1.size(g)/at,b=d,pt=b?g.length:g,st=U$1("x",a[0].dataType,a[0].dims,at),wt=U$1("scale",a[1].dataType,a[1].dims,$t),Tt=U$1("bias",a[2].dataType,a[2].dims,$t),Ct=U$1("inputMean",a[3].dataType,a[3].dims,$t),jt=U$1("inputVar",a[4].dataType,a[4].dims,$t),Lt=K("y",a[0].dataType,pt,at),Ht=()=>{let Kt="";if(d)Kt=`let cOffset = ${g.length===1?"0u":et==="NHWC"?`outputIndices[${g.length-1}] / ${at}`:"outputIndices[1]"};`;else if(et==="NCHW")Kt=`
            ${Lt.indicesSet("outputIndices","0","0")}
            let cOffset = ${Lt.indicesToOffset("outputIndices")};`;else{Kt=`var cIndices = ${wt.type.indices}(0);
                       cIndices[0] = outputIndices[${g.length-1}];`;for(let tr=1;tr<wt.rank;tr++)Kt+=`cIndices[${tr}] = outputIndices[${tr}];`;Kt+=`let cOffset = ${wt.indicesToOffset("cIndices")};`}return Kt},Gt=Kt=>`
  const epsilon = ${c};
  ${Kt.registerUniform("outputSize","u32").declareVariables(st,wt,Tt,Ct,jt,Lt)}
  ${Kt.mainStart()}
  ${Kt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${Lt.offsetToIndices(`global_idx * ${at}`)};
    ${Ht()}
    let scale = ${wt.getByOffset("cOffset")};
    let bias = ${Tt.getByOffset("cOffset")};
    let inputMean = ${Ct.getByOffset("cOffset")};
    let inputVar = ${jt.getByOffset("cOffset")};
    let x = ${st.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${Lt.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${s.epsilon}_${s.format}_${d}_${at}`,inputDependencies:b?["rank","type","type","type","type"]:void 0},getShaderSource:Gt,getRunData:()=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(vt/64)},programUniforms:b?[{type:12,data:vt},...X(g)]:[{type:12,data:vt}]})}},lp=a=>we(a),Us=(a,s)=>{let{inputs:c,outputCount:d}=a,et=lp({...s,outputCount:d});if(ke.webgpu.validateInputContent&&sp(c,et),s.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");a.compute(up(c,et))}}),dp,cp,Ns,Vs=j(()=>{xe(),_e(),dp=a=>{if(a[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(a[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(a[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(a[0].dims[2]!==a[1].dims[0])throw new Error("last dimension of input and bias are not the same")},cp=a=>{let s=a[0].dims,c=a[0].dims[2],d=M$1.size(s)/4,et=a[0].dataType,g=U$1("input",et,s,4),at=U$1("bias",et,[c],4),$t=U$1("residual",et,s,4),vt=K("output",et,s,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:s,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)}}),getShaderSource:b=>`
  const channels = ${c}u / 4;
  ${b.declareVariables(g,at,$t,vt)}

  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes(d)}
    let value = ${g.getByOffset("global_idx")}
      + ${at.getByOffset("global_idx % channels")} + ${$t.getByOffset("global_idx")};
    ${vt.setByOffset("global_idx","value")}
  }`}},Ns=a=>{dp(a.inputs),a.compute(cp(a.inputs))}}),pp,Pe,Hs,Gs,Ls,Fs,qs,js,Ks,Ys,Xs,mp,Zs,Qs,Js,eu,Zn,tu,Qn,ru,nu,iu,ou,au,su,uu,lu,du,cu,pu,mu,fu,hu,gu,yu,bu,vu,ao,so,wu,$u,_u,Jn=j(()=>{ye(),xe(),Ze(),_e(),pp=(a,s,c,d,et,g)=>{let at=Math.ceil(s/4),$t="";typeof et=="string"?$t=`${et}(a)`:$t=et("a");let vt=U$1("inputData",c,[at],4),b=K("outputData",d,[at],4);return`
      ${a.registerUniform("vec_size","u32").declareVariables(vt,b)}

  ${g??""}

  ${a.mainStart()}
    ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${vt.getByOffset("global_idx")};
    ${b.setByOffset("global_idx",$t)}
  }`},Pe=(a,s,c,d,et,g=a.dataType)=>({name:s,shaderCache:{hint:et,inputDependencies:["type"]},getShaderSource:at=>pp(at,M$1.size(a.dims),a.dataType,g,c,d),getRunData:at=>({outputs:[{dims:a.dims,dataType:g}],dispatchGroup:{x:Math.ceil(M$1.size(at[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M$1.size(a.dims)/4)}]})}),Hs=a=>{a.compute(Pe(a.inputs[0],"Abs","abs"))},Gs=a=>{a.compute(Pe(a.inputs[0],"Acos","acos"))},Ls=a=>{a.compute(Pe(a.inputs[0],"Acosh","acosh"))},Fs=a=>{a.compute(Pe(a.inputs[0],"Asin","asin"))},qs=a=>{a.compute(Pe(a.inputs[0],"Asinh","asinh"))},js=a=>{a.compute(Pe(a.inputs[0],"Atan","atan"))},Ks=a=>{a.compute(Pe(a.inputs[0],"Atanh","atanh"))},Ys=a=>we(a),Xs=(a,s)=>{let c;switch(s.to){case 10:c="vec4<f16>";break;case 1:c="vec4<f32>";break;case 12:c="vec4<u32>";break;case 6:c="vec4<i32>";break;case 9:c="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${s.to}`)}a.compute(Pe(a.inputs[0],"Cast",c,void 0,s.cacheKey,s.to))},mp=a=>{let s=a.length>=2&&a[1].data!==0?a[1].getFloat32Array()[0]:Ln,c=a.length>=3&&a[2].data!==0?a[2].getFloat32Array()[0]:Fn;return we({min:s,max:c})},Zs=(a,s)=>{let c=a.inputs.length===1?s:mp(a.inputs),d=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"Clip",et=>`clamp(${et}, clip_min_, clip_max_)`,`
    const clip_min_: vec4<${d}> = vec4(${d}(${c.min}));
    const clip_max_: vec4<${d}> = vec4(${d}(${c.max}));
`,c.cacheKey),{inputs:[0]})},Qs=a=>{a.compute(Pe(a.inputs[0],"Ceil","ceil"))},Js=a=>{a.compute(Pe(a.inputs[0],"Cos","cos"))},eu=a=>{a.compute(Pe(a.inputs[0],"Cosh","cosh"))},Zn=a=>we(a),tu=(a,s)=>{let c=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"Elu",d=>`elu_vf32(${d})`,`
  const elu_alpha_ = ${c}(${s.alpha});

  fn elu_f32(a: ${c}) -> ${c} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${c}>) -> vec4<${c}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,s.cacheKey))},Qn=(a="f32")=>`
const r0: ${a} = 0.3275911;
const r1: ${a} = 0.254829592;
const r2: ${a} = -0.284496736;
const r3: ${a} = 1.421413741;
const r4: ${a} = -1.453152027;
const r5: ${a} = 1.061405429;

fn erf_vf32(v: vec4<${a}>) -> vec4<${a}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,ru=a=>{let s=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"Erf",c=>`erf_vf32(${c})`,Qn(s)))},nu=a=>{a.compute(Pe(a.inputs[0],"Exp","exp"))},iu=a=>{a.compute(Pe(a.inputs[0],"Floor","floor"))},ou=a=>{let s=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"Gelu",c=>`0.5 * ${c} * (1.0 + erf_vf32(${c} * 0.7071067811865475))`,Qn(s)))},au=(a,s)=>{let c=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"LeakyRelu",d=>`select(leaky_relu_alpha_ * ${d}, ${d}, ${d} >= vec4<${c}>(0.0))`,`const leaky_relu_alpha_ = ${c}(${s.alpha});`,s.cacheKey))},su=a=>{a.compute(Pe(a.inputs[0],"Not",s=>`!${s}`))},uu=a=>{a.compute(Pe(a.inputs[0],"Neg",s=>`-${s}`))},lu=a=>{a.compute(Pe(a.inputs[0],"Reciprocal",s=>`1.0/${s}`))},du=a=>{let s=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"Relu",c=>`select(vec4<${s}>(0.0), ${c}, ${c} > vec4<${s}>(0.0))`))},cu=a=>{a.compute(Pe(a.inputs[0],"Sigmoid",s=>`(1.0 / (1.0 + exp(-${s})))`))},pu=a=>we(a),mu=(a,s)=>{let c=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"HardSigmoid",d=>`max(vec4<${c}>(0.0), min(vec4<${c}>(1.0), ${s.alpha} * ${d} + vec4<${c}>(${s.beta})))`,void 0,s.cacheKey))},fu=a=>{a.compute(Pe(a.inputs[0],"Sin","sin"))},hu=a=>{a.compute(Pe(a.inputs[0],"Sinh","sinh"))},gu=a=>{a.compute(Pe(a.inputs[0],"Sqrt","sqrt"))},yu=a=>{a.compute(Pe(a.inputs[0],"Tan","tan"))},bu=a=>`sign(${a}) * (1 - exp(-2 * abs(${a}))) / (1 + exp(-2 * abs(${a})))`,vu=a=>{a.compute(Pe(a.inputs[0],"Tanh",bu))},ao=(a="f32")=>`
const fast_gelu_a: ${a} = 0.5;
const fast_gelu_b: ${a} = 0.7978845608028654;
const fast_gelu_c: ${a} = 0.035677408136300125;

fn tanh_v(v: vec4<${a}>) -> vec4<${a}> {
  return ${bu("v")};
}
`,so=a=>`(fast_gelu_a + fast_gelu_a * tanh_v(${a} * (fast_gelu_c * ${a} * ${a} + fast_gelu_b))) * ${a}`,wu=a=>{let s=rt(a.inputs[0].dataType);a.compute(Pe(a.inputs[0],"FastGelu",so,ao(s),void 0,a.inputs[0].dataType))},$u=(a,s)=>{let c=rt(a.inputs[0].dataType);return a.compute(Pe(a.inputs[0],"ThresholdedRelu",d=>`select(vec4<${c}>(0.0), ${d}, ${d} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${c}>(${s.alpha});`,s.cacheKey)),0},_u=a=>{a.compute(Pe(a.inputs[0],"Log","log"))}}),fp,hp,Su,Cu=j(()=>{xe(),_e(),Jn(),fp=a=>{if(a[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(a[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(a[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(a[0].dims[2]!==a[1].dims[0])throw new Error("last dimension of input and bias are not the same")},hp=a=>{let s=a[0].dims.slice();s[2]=s[2]/2;let c=U$1("input",a[0].dataType,a[0].dims,4),d=U$1("bias",a[0].dataType,[a[0].dims[2]],4),et=K("output",a[0].dataType,s,4),g=M$1.size(s)/4,at=De(a[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:s,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(g/64)}}),getShaderSource:$t=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${a[0].dims[2]/4/2}u;

  ${$t.declareVariables(c,d,et)}

  ${Qn(at)}

  ${$t.mainStart()}
    ${$t.guardAgainstOutOfBoundsWorkgroupSizes(g)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${et.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},Su=a=>{fp(a.inputs),a.compute(hp(a.inputs))}}),gp,yp,Wt,Iu,Tu,Au,Eu,ku,Ou,Pu,Ru,zu,Bu,Du=j(()=>{ye(),xe(),_e(),gp=(a,s,c,d,et,g,at,$t,vt,b,pt,st)=>{let wt,Tt;typeof $t=="string"?wt=Tt=(Gt,Kt)=>`${$t}((${Gt}),(${Kt}))`:typeof $t=="function"?wt=Tt=$t:(wt=$t.scalar,Tt=$t.vector);let Ct=K("outputData",pt,d.length,4),jt=U$1("aData",vt,s.length,4),Lt=U$1("bData",b,c.length,4),Ht;if(et)if(g){let Gt=M$1.size(s)===1,Kt=M$1.size(c)===1,tr=s.length>0&&s[s.length-1]%4===0,rr=c.length>0&&c[c.length-1]%4===0;Gt||Kt?Ht=Ct.setByOffset("global_idx",Tt(Gt?`${jt.type.value}(${jt.getByOffset("0")}.x)`:jt.getByOffset("global_idx"),Kt?`${Lt.type.value}(${Lt.getByOffset("0")}.x)`:Lt.getByOffset("global_idx"))):Ht=`
            let outputIndices = ${Ct.offsetToIndices("global_idx * 4u")};
            let offsetA = ${jt.broadcastedIndicesToOffset("outputIndices",Ct)};
            let offsetB = ${Lt.broadcastedIndicesToOffset("outputIndices",Ct)};
            ${Ct.setByOffset("global_idx",Tt(at||tr?jt.getByOffset("offsetA / 4u"):`${jt.type.value}(${jt.getByOffset("offsetA / 4u")}[offsetA % 4u])`,at||rr?Lt.getByOffset("offsetB / 4u"):`${Lt.type.value}(${Lt.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else Ht=Ct.setByOffset("global_idx",Tt(jt.getByOffset("global_idx"),Lt.getByOffset("global_idx")));else{if(!g)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let Gt=(Kt,tr,rr="")=>{let Lr=`aData[indexA${tr}][componentA${tr}]`,jr=`bData[indexB${tr}][componentB${tr}]`;return`
            let outputIndices${tr} = ${Ct.offsetToIndices(`global_idx * 4u + ${tr}u`)};
            let offsetA${tr} = ${jt.broadcastedIndicesToOffset(`outputIndices${tr}`,Ct)};
            let offsetB${tr} = ${Lt.broadcastedIndicesToOffset(`outputIndices${tr}`,Ct)};
            let indexA${tr} = offsetA${tr} / 4u;
            let indexB${tr} = offsetB${tr} / 4u;
            let componentA${tr} = offsetA${tr} % 4u;
            let componentB${tr} = offsetB${tr} % 4u;
            ${Kt}[${tr}] = ${rr}(${wt(Lr,jr)});
          `};pt===9?Ht=`
            var data = vec4<u32>(0);
            ${Gt("data",0,"u32")}
            ${Gt("data",1,"u32")}
            ${Gt("data",2,"u32")}
            ${Gt("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:Ht=`
            ${Gt("outputData[global_idx]",0)}
            ${Gt("outputData[global_idx]",1)}
            ${Gt("outputData[global_idx]",2)}
            ${Gt("outputData[global_idx]",3)}
          `}return`
        ${a.registerUniform("vec_size","u32").declareVariables(jt,Lt,Ct)}

        ${st??""}

        ${a.mainStart()}
        ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${Ht}
      }`},yp=(a,s,c,d,et,g,at=c.dataType)=>{let $t=!M$1.areEqual(c.dims,d.dims),vt=c.dims,b=M$1.size(c.dims),pt=!1,st=!1,wt=[$t];if($t){let Tt=zt.calcShape(c.dims,d.dims,!1);if(!Tt)throw new Error("Can't perform binary op on the given tensors");vt=Tt,b=M$1.size(vt);let Ct=M$1.size(c.dims)===1,jt=M$1.size(d.dims)===1,Lt=c.dims.length>0&&c.dims[c.dims.length-1]%4===0,Ht=d.dims.length>0&&d.dims[d.dims.length-1]%4===0;wt.push(Ct),wt.push(jt),wt.push(Lt),wt.push(Ht);let Gt=1;for(let Kt=1;Kt<vt.length;Kt++){let tr=c.dims[c.dims.length-Kt]??1,rr=d.dims[d.dims.length-Kt]??1;if(tr===rr)Gt*=tr;else break}Gt%4===0?(st=!0,pt=!0):(Ct||jt||Lt||Ht)&&(pt=!0)}else pt=!0;return wt.push(pt),{name:a,shaderCache:{hint:s+wt.map(Tt=>Tt.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:Tt=>gp(Tt,c.dims,d.dims,vt,pt,$t,st,et,c.dataType,d.dataType,at,g),getRunData:()=>({outputs:[{dims:vt,dataType:at}],dispatchGroup:{x:Math.ceil(b/64/4)},programUniforms:[{type:12,data:Math.ceil(M$1.size(vt)/4)},...X(c.dims,d.dims,vt)]})}},Wt=(a,s,c,d,et,g)=>{a.compute(yp(s,et??"",a.inputs[0],a.inputs[1],c,d,g))},Iu=a=>{Wt(a,"Add",(s,c)=>`${s}+${c}`)},Tu=a=>{Wt(a,"Div",(s,c)=>`${s}/${c}`)},Au=a=>{Wt(a,"Equal",{scalar:(s,c)=>`u32(${s}==${c})`,vector:(s,c)=>`vec4<u32>(${s}==${c})`},void 0,void 0,9)},Eu=a=>{Wt(a,"Mul",(s,c)=>`${s}*${c}`)},ku=a=>{let s=U$1("input",a.inputs[0].dataType,a.inputs[0].dims).type.value;Wt(a,"Pow",{scalar:(c,d)=>`pow_custom(${c},${d})`,vector:(c,d)=>`pow_vector_custom(${c},${d})`},`
    fn pow_custom(a : ${s}, b : ${s}) -> ${s} {
      if (b == ${s}(0.0)) {
        return ${s}(1.0);
      } else if (a < ${s}(0.0) && f32(b) != floor(f32(b))) {
        return ${s}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${s}(1.0), round(f32(abs(b) % ${s}(2.0))) != 1.0) * ${s}(${s==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${s}>, b : vec4<${s}>) -> vec4<${s}> {
      // TODO: implement vectorized pow
      return vec4<${s}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},Ou=a=>{Wt(a,"Sub",(s,c)=>`${s}-${c}`)},Pu=a=>{Wt(a,"Greater",{scalar:(s,c)=>`u32(${s}>${c})`,vector:(s,c)=>`vec4<u32>(${s}>${c})`},void 0,void 0,9)},Ru=a=>{Wt(a,"Less",{scalar:(s,c)=>`u32(${s}<${c})`,vector:(s,c)=>`vec4<u32>(${s}<${c})`},void 0,void 0,9)},zu=a=>{Wt(a,"GreaterOrEqual",{scalar:(s,c)=>`u32(${s}>=${c})`,vector:(s,c)=>`vec4<u32>(${s}>=${c})`},void 0,void 0,9)},Bu=a=>{Wt(a,"LessOrEqual",{scalar:(s,c)=>`u32(${s}<=${c})`,vector:(s,c)=>`vec4<u32>(${s}<=${c})`},void 0,void 0,9)}}),kt,Ot,Pt,ei,Zt=j(()=>{ye(),xe(),kt=(a,s,c="f32")=>{switch(a.activation){case"Relu":return`value = max(value, ${s}(0.0));`;case"Sigmoid":return`value = (${s}(1.0) / (${s}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${s}(${c}(uniforms.clip_min)), ${s}(${c}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${s}(0.0), min(${s}(1.0), ${c}(uniforms.alpha) * value + ${c}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${c}(uniforms.alpha) * value, value, value >= ${s}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${a.activation}`)}},Ot=(a,s)=>{a.activation==="Clip"?s.push({type:1,data:a.clipMax},{type:1,data:a.clipMin}):a.activation==="HardSigmoid"?s.push({type:1,data:a.alpha},{type:1,data:a.beta}):a.activation==="LeakyRelu"&&s.push({type:1,data:a.alpha})},Pt=(a,s)=>{a.activation==="Clip"?s.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):a.activation==="HardSigmoid"?s.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):a.activation==="LeakyRelu"&&s.push({name:"alpha",type:"f32"})},ei=a=>{let s=(a==null?void 0:a.activation)||"";if(s==="HardSigmoid"){let[c,d]=(a==null?void 0:a.activation_params)||[.2,.5];return{activation:s,alpha:c,beta:d}}else if(s==="Clip"){let[c,d]=(a==null?void 0:a.activation_params)||[Ln,Fn];return{activation:s,clipMax:d,clipMin:c}}else if(s==="LeakyRelu"){let[c]=(a==null?void 0:a.activation_params)||[.01];return{activation:s,alpha:c}}return{activation:s}}}),nt,ti,ri=j(()=>{nt=(a,s)=>{switch(a){case 1:return s;case 2:return`vec2<${s}>`;case 3:return`vec3<${s}>`;case 4:return`vec4<${s}>`;default:throw new Error(`${a}-component is not supported.`)}},ti=a=>`
      ${a?"value = value + getBiasByOutputCoords(coords);":""}
      `}),ni,uo=j(()=>{ni=a=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${a}.x), i32(${a}.y), i32(${a}.z), 1));
}
`}),vp,wp,rn,Mu,$p,nn,_p,ii,on=j(()=>{ye(),xe(),_e(),Zt(),ri(),vp=(a,s)=>a?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${s?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${s?", batchIndices":""});
        `,wp=(a,s)=>a?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${s===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${s===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${s===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,rn=(a,s,c="f32",d,et=!1,g=32,at=!1,$t=32)=>{let vt=s[1]*a[1],b=s[0]*a[0],pt=et?vt:g,st=et?g:vt,wt=pt/s[0],Tt=g/s[1];if(!((et&&wt===4&&a[1]===4||!et&&(wt===3||wt===4))&&pt%s[0]===0&&g%s[1]===0&&a[0]===4))throw new Error(`If transposeA ${et} is true, innerElementSize ${wt} and workPerThread[1] ${a[1]} must be 4.
      Otherwise, innerElementSize ${wt} must be 3 or 4.
  tileAWidth ${pt} must be divisible by workgroupSize[0]${s[0]}. tileInner ${g} must be divisible by workgroupSize[1] ${s[1]}. colPerThread ${a[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${wt}<${c}>, ${pt/wt}>, ${st}>;
var<workgroup> mm_Bsub: array<array<vec4<${c}>, ${b/a[0]}>, ${g}>;

const rowPerThread = ${a[1]};
const colPerThread = ${a[0]};
const innerElementSize = ${wt};
const tileInner = ${g};

@compute @workgroup_size(${s[0]}, ${s[1]}, ${s[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${at?"0":"i32(globalId.z)"};
  ${d?`let batchIndices = ${d.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${vt};

  let num_tiles = ${at?`${Math.ceil($t/g)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${at?`i32(globalId.z) * ${$t}`:"0"};

  var acc: array<vec4<${c}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${Tt};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${vp(et,d)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${Tt}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${d?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${wt===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${wp(et,wt)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Mu=(a,s)=>a?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${s?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${s?", batchIndices":""});
            `,$p=a=>a?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",nn=(a,s,c="f32",d,et=!1,g=32,at=!1,$t=32,vt=!1)=>{let b=a[1]*s[1],pt=a[0]*s[0],st=et?b:g,wt=et?g:b;if(!(wt%s[1]===0&&st%s[0]===0&&g%s[1]===0))throw new Error(`tileAHight ${wt} must be divisible by workgroupSize[1]${s[1]}, tileAWidth ${st} must be divisible by workgroupSize[0]${s[0]}, tileInner ${g} must be divisible by workgroupSize[1]${s[1]}`);let Tt=wt/s[1],Ct=st/s[0],jt=g/s[1],Lt=vt?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${b};
    let globalColStart = i32(workgroupId.x) * ${pt};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${wt}; inputRow = inputRow + ${s[1]}) {
        for (var inputCol = localCol; inputCol < ${st}; inputCol = inputCol + ${s[0]}) {
          ${Mu(et,d)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${g}; inputRow = inputRow + ${s[1]}) {
            for (var inputCol = localCol; inputCol < ${pt}; inputCol = inputCol + ${s[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${d?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${c}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${s[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${et?`mm_Asub[k][localRow + innerRow * ${s[1]}];`:`mm_Asub[localRow + innerRow * ${s[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${s[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${s[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${b};

let tileRowA = i32(localId.y) * ${Tt};
let tileColA = i32(localId.x) * ${Ct};
let tileRowB = i32(localId.y) * ${jt};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${Tt}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${Ct}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Mu(et,d)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${jt}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${d?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${c}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${$p(et)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${c}, ${st}>, ${wt}>;
  var<workgroup> mm_Bsub : array<array<${c}, ${pt}>, ${g}>;
  const rowPerThread = ${a[1]};
  const colPerThread = ${a[0]};
  const tileInner = ${g};

@compute @workgroup_size(${s[0]}, ${s[1]}, ${s[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${at?"0":"i32(globalId.z)"};
    ${d?`let batchIndices = ${d.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${at?`${Math.ceil($t/g)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${at?`i32(globalId.z) * ${$t}`:"0"};

    var acc : array<array<${c}, colPerThread>, rowPerThread>;

    // Without this initialization strange values show up in acc.
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = 0.0;
      }
    }
    ${Lt}
  }
`},_p=(a,s,c,d,et,g=!1)=>{let[at,$t,vt]=et,[b,pt,st,wt]=d,Tt=Pr(at,vt),Ct=Pr($t,vt),jt=De(d[0].type.tensor),Lt=()=>{let Gt=pt.rank,Kt=b.rank,tr=`var aIndices: ${pt.type.indices};`;for(let rr=Gt-2-1,Lr=Kt-1;rr>=0;rr--,Lr--)tr+=`
aIndices[${rr}] = ${Kt>1?`batchIndices[${Lr}]`:"batchIndices"};`;return Tt.forEach(rr=>{tr+=`
aIndices[${rr}] = 0;`}),tr+=`
aIndices[${Gt-2}] = u32(row);
                   aIndices[${Gt-1}] = u32(colIn);`,tr},Ht=()=>{let Gt=st.rank,Kt=b.rank,tr=`var bIndices: ${st.type.indices};`;for(let rr=Gt-2-1,Lr=Kt-1;rr>=0;rr--,Lr--)tr+=`
bIndices[${rr}] = ${Kt>1?`batchIndices[${Lr}]`:"batchIndices"};`;return Ct.forEach(rr=>{tr+=`
bIndices[${rr}] = 0;`}),tr+=`
bIndices[${Gt-2}] = u32(row);
                   bIndices[${Gt-1}] = u32(colIn);`,tr};return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${b.type.indices}) -> ${nt(a,jt)} {
      var value = ${nt(a,jt)}(0.0);
      let col = colIn * ${a};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        ${Lt()}
        value = ${pt.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${b.type.indices}) -> ${nt(a,jt)} {
      var value = ${nt(a,jt)}(0.0);
      let col = colIn * ${a};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        ${Ht()}
        value = ${st.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${nt(a,jt)}) {
      let col = colIn * ${a};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${s?`value = value + ${g?"bias[colIn]":`${nt(a,jt)}(bias[row])`};`:""}
        ${c}
        ${wt.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},ii=(a,s,c,d,et=!1)=>{let g=a[0].dims,at=a[1].dims,$t=g.slice(0,-2),vt=at.slice(0,-2),b=d?d.slice(0,-2):c.slice(0,-2),pt=M$1.size(b),st=g[g.length-2],wt=g[g.length-1],Tt=at[at.length-1],Ct=wt%4===0&&Tt%4===0,jt=st<=8?[4,1,1]:[4,4,1],Lt=[8,8,1],Ht=[Math.ceil(Tt/Lt[0]/jt[0]),Math.ceil(st/Lt[1]/jt[1]),Math.ceil(pt/Lt[2]/jt[2])],Gt=Ct?4:1,Kt=[...$t,st,wt/Gt],tr=Kt.length,rr=[...vt,wt,Tt/Gt],Lr=rr.length,jr=[pt,st,Tt/Gt],Yr=[{type:6,data:st},{type:6,data:Tt},{type:6,data:wt}];Ot(s,Yr),Yr.push(...X(b,Kt,rr));let An=["rank","rank"],No=a.length>2;No&&(Yr.push(...X(a[2].dims)),An.push("rank")),Yr.push(...X(jr));let o0=t0=>{let c0=b.length,n0=qn("batchDims",a[0].dataType,c0,1),Qo=De(a[0].dataType),Mo=U$1("a",a[0].dataType,tr,Gt),zo=U$1("b",a[1].dataType,Lr,Gt),e0=K("result",a[0].dataType,jr.length,Gt),Xr=[Mo,zo];if(No){let ko=et?Gt:1;Xr.push(U$1("bias",a[2].dataType,a[2].dims.length,ko))}let In=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Pt(s,In);let Zr=De(e0.type.tensor),wn=kt(s,e0.type.value,Zr),r0=_p(Gt,No,wn,[n0,Mo,zo,e0],[$t,vt,b],et);return`
  ${t0.registerUniforms(In).registerInternalVariables(n0).declareVariables(...Xr,e0)}
  ${r0}
  ${Ct?rn(jt,Lt,Qo,n0):nn(jt,Lt,Qo,n0)}
                   `};return{name:"MatMul",shaderCache:{hint:`${jt};${s.activation};${Ct};${et}`,inputDependencies:An},getRunData:()=>({outputs:[{dims:c,dataType:a[0].dataType}],dispatchGroup:{x:Ht[0],y:Ht[1],z:Ht[2]},programUniforms:Yr}),getShaderSource:o0}}}),xp,Uu,Wu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),xp=(a,s,c,d,et=!1,g,at=4,$t=4,vt=4,b="f32")=>{let pt=An=>{switch(An){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${b}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${An} is not supported.`)}},st=An=>{switch(An){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${An} is not supported.`)}},wt=a?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,Tt=a?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,Ct=a?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",jt=a?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",Lt=a?"row":"col",Ht=a?"col":"row",Gt=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${a?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${Lt} / outWidth;
    let outCol = ${Lt} % outWidth;

    let WRow = ${Ht} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${Ht} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${Ht} % inChannels;
    var resData = ${nt(at,b)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${Ct} && xCol >= 0 && xCol < ${jt}) {
      ${wt}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${pt(at)}
    }
    return resData;`,Kt=a?s&&d?`
    let col = colIn * ${at};
    ${Gt}`:`
    let col = colIn * ${at};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${Gt}
    }
    return ${nt(at,b)}(0.0);`:d&&c?`
    let col = colIn * ${at};
    ${Gt}`:`
    let col = colIn * ${at};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${Gt}
    }
    return ${nt(at,b)}(0.0);`,tr=`${st($t)}`,rr=nt(vt,b),Lr=nt(a?at:$t,b),jr=nt(a?$t:at,b),Yr=kt(g,rr,b);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${Lr} {
      ${a?Kt:tr}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${jr} {
      ${a?tr:Kt}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${rr}) {
      let col = colIn * ${vt};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${a?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${Tt}
      ${ti(et)}
      ${Yr}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},Uu=(a,s,c,d,et,g,at,$t)=>{let vt=s.format==="NHWC",b=vt?a[0].dims[3]:a[0].dims[1],pt=c[0],st=vt?c[2]:c[3],wt=vt?c[1]:c[2],Tt=vt?c[3]:c[1],Ct=vt&&(b%4===0||b%3===0)&&Tt%4===0,jt=vt?Tt:st*wt,Lt=vt?st*wt:Tt,Ht=[8,8,1],Gt=d<=8?[4,1,1]:[4,4,1],Kt=[Math.ceil(jt/Ht[0]/Gt[0]),Math.ceil(Lt/Ht[1]/Gt[1]),Math.ceil(pt/Ht[2]/Gt[2])];Ne("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${Kt}`);let tr=Ct?vt&&b%4!==0?3:4:1,rr=Ht[1]*Gt[1],Lr=Ht[0]*Gt[0],jr=Math.max(Ht[0]*tr,Ht[1]),Yr=d%rr===0,An=et%Lr===0,No=g%jr===0,o0=Ct?[tr,4,4]:[1,1,1],t0=[{type:6,data:d},{type:6,data:et},{type:6,data:g},{type:6,data:[s.pads[0],s.pads[1]]},{type:6,data:s.strides},{type:6,data:s.dilations}];Ot(s,t0),t0.push(...X(a[0].dims,a[1].dims));let c0=["rank","rank"];at&&(t0.push(...X(a[2].dims)),c0.push("rank")),t0.push(...X(c));let n0=Qo=>{let Mo=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Pt(s,Mo);let zo=Ct?4:1,e0=De(a[0].dataType),Xr=`
      fn setOutputAtIndex(flatIndex : i32, value : ${Ct?`vec4<${e0}>`:e0}) {
        result[flatIndex] = ${Ct?`vec4<${e0}>`:e0}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${Ct?`vec4<${e0}>`:e0}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${Ct?"/ 4":""}, value);
      }`,In=U$1("x",a[0].dataType,a[0].dims.length,tr===3?1:tr),Zr=U$1("w",a[1].dataType,a[1].dims.length,zo),wn=[In,Zr],r0=K("result",a[0].dataType,c.length,zo);if(at){let ko=U$1("bias",a[2].dataType,a[2].dims.length,zo);wn.push(ko),Xr+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${Ct?`vec4<${e0}>`:e0} {
          return bias[coords.${vt?"w":"y"}${Ct?"/ 4":""}];
        }`}return`
        ${ni("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${Qo.registerUniforms(Mo).declareVariables(...wn,r0)}
        ${Xr}
        ${xp(vt,Yr,An,No,at,s,o0[0],o0[1],o0[2],e0)}
        ${Ct?rn(Gt,Ht,e0,void 0,!vt,jr):nn(Gt,Ht,e0,void 0,!vt,jr,!1,void 0,$t)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${s.cacheKey};${tr};${Ct};${Yr};${An};${No};${rr};${Lr};${jr}`,inputDependencies:c0},getRunData:()=>({outputs:[{dims:c,dataType:a[0].dataType}],dispatchGroup:{x:Kt[0],y:Kt[1],z:Kt[2]},programUniforms:t0}),getShaderSource:n0}}}),lo,Nu,Vu=j(()=>{ye(),xe(),_e(),co(),Zt(),lo=(a,s,c)=>{let d=a.length>2,et=d?"value += b[output_channel];":"",g=a[0].dims,at=a[1].dims,$t=at[0]/s.group,vt=s.format==="NHWC",b=oi(g,at,s.dilations,s.pads,s.strides,vt),pt=M$1.size(b),st=[{type:12,data:pt},{type:12,data:s.dilations},{type:12,data:[s.strides[0],s.strides[1]]},{type:12,data:[s.pads[0],s.pads[1]]},{type:12,data:$t}];Ot(s,st),st.push(...X(g,at));let wt=["rank","rank"];d&&(st.push(...X(a[2].dims)),wt.push("rank")),st.push(...X(b));let Tt=Ct=>{let jt=K("output",a[0].dataType,b.length),Lt=De(jt.type.tensor),Ht=kt(s,jt.type.value,Lt),Gt=U$1("x",a[0].dataType,g.length),Kt=U$1("w",a[1].dataType,at.length),tr=[Gt,Kt];d&&tr.push(U$1("b",a[2].dataType,a[2].dims.length));let rr=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:s.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Pt(s,rr),`
  ${Ct.registerUniforms(rr).declareVariables(...tr,jt)}

  ${Ct.mainStart()}
    ${Ct.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${jt.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${vt?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${vt?1:2}], outputIndices[${vt?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel / uniforms.output_channels_per_group;

    var value: ${jt.type.value} = ${jt.type.value}(0);
    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[${vt?1:2}]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[${vt?2:3}]) {
            continue;
          }

          let xVal = ${vt?Gt.get("batch","xHeight","xWidth","input_channel"):Gt.get("batch","input_channel","xHeight","xWidth")};
          let wVal = ${Kt.get("output_channel","wInChannel","wHeight","wWidth")};
          value += xVal*wVal;
        }
      }
    }
    ${et}
    ${Ht}
    ${jt.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:s.cacheKey,inputDependencies:wt},getRunData:()=>({outputs:[{dims:c?c(b):b,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(pt/64)},programUniforms:st}),getShaderSource:Tt}},Nu=(a,s,c)=>{let d=a.length>2,et=Ue(c[3]),g=Ue(c[2]),at=M$1.size(c)/et/g,$t=[a[0].dims[0],a[0].dims[1],a[0].dims[2],a[0].dims[3]/et],vt=[a[1].dims[0],a[1].dims[1],a[1].dims[2],a[1].dims[3]/et],b=[c[0],c[1],c[2],c[3]/et],pt=[{type:12,data:at},{type:6,data:[s.strides[0],s.strides[1]]},{type:6,data:[s.pads[0],s.pads[1]]}];Ot(s,pt),pt.push(...X($t,vt,b));let st=(g-1)*s.strides[1]+vt[1],wt=Tt=>{let Ct=K("output",a[0].dataType,b.length,et),jt=De(Ct.type.tensor),Lt=kt(s,Ct.type.value,jt),Ht=U$1("x",a[0].dataType,$t.length,et),Gt=U$1("w",a[1].dataType,vt.length,et),Kt=[Ht,Gt];d&&Kt.push(U$1("b",a[2].dataType,a[2].dims,et));let tr=d?"value += b[output_channel];":"",rr=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Pt(s,rr),`
  ${Tt.registerUniforms(rr).declareVariables(...Kt,Ct)}
  ${Tt.mainStart()}
    ${Tt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${g}u;
    let col = (index1 % width1) * ${g}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${Ht.type.value}, ${st}>;
    var values: array<${Ct.type.value}, ${g}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${vt[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${st}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${Ht.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${Ht.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${vt[1]}; w_width++) {
          let w_val = ${Gt.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${g}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${g}u; i++) {
      var value = values[i];
      ${tr}
      ${Lt}
      ${Ct.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${s.cacheKey};${et};${g};${st};${vt[0]};${vt[1]}`,inputDependencies:d?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:c,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(at/64)},programUniforms:pt}),getShaderSource:wt}}}),po,Sp,Hu,mo=j(()=>{ye(),xe(),on(),_e(),Zt(),po=(a,s,c,d,et=!1)=>{let g=a[0].dims,at=a[1].dims,$t=g[g.length-2],vt=at[at.length-1],b=g[g.length-1],pt=Ue(vt),st=Ue(b),wt=Ue($t),Tt=M$1.size(c)/pt/wt,Ct=a.length>2,jt=d?d.slice(0,-2):c.slice(0,-2),Lt=[M$1.size(jt),$t,vt],Ht=[{type:12,data:Tt},{type:12,data:$t},{type:12,data:vt},{type:12,data:b}];Ot(s,Ht),Ht.push(...X(jt,g,at)),Ct&&Ht.push(...X(a[2].dims)),Ht.push(...X(Lt));let Gt=Kt=>{let tr=qn("batch_dims",a[0].dataType,jt.length),rr=U$1("a",a[0].dataType,g.length,st),Lr=U$1("b",a[1].dataType,at.length,pt),jr=K("output",a[0].dataType,Lt.length,pt),Yr=De(jr.type.tensor),An=kt(s,jr.type.value,Yr),No=[rr,Lr],o0="";if(Ct){let Xr=et?pt:1;No.push(U$1("bias",a[2].dataType,a[2].dims.length,Xr)),o0=`${et?`value += bias[col / ${Xr}];`:`value += ${jr.type.value}(bias[row + i]);`}`}let t0=g.slice(0,-2),c0=at.slice(0,-2),n0=Pr(t0,jt),Qo=Pr(c0,jt),Mo=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Pt(s,Mo);let zo=(Xr,In)=>{let Zr=Xr.rank,wn=Xr.name;if(Zr===2)return`var ${wn}_indices = ${Xr.type.indices}(0u, 0u);`;let r0=tr.rank,ko=`var ${wn}_indices: ${Xr.type.indices};`;for(let _n=Zr-2-1,i0=r0-1;_n>=0;_n--,i0--)ko+=`
${wn}_indices[${_n}] = ${r0>1?`batch_indices[${i0}]`:"batch_indices"};`;return In.forEach(_n=>{ko+=`
${wn}_indices[${_n}] = 0;`}),ko+=`${wn}_indices[${Zr-2}] = 0u;
                     ${wn}_indices[${Zr-1}] = 0u;`,ko},e0=()=>{let Xr=`var a_data: ${rr.type.value};`;for(let In=0;In<st;In++)Xr+=`
              let b_data${In} = b[(b_offset + (k + ${In}) * uniforms.N + col) / ${pt}];`;for(let In=0;In<wt;In++){Xr+=`a_data = a[(a_offset + (row + ${In}) * uniforms.K + k) / ${st}];`;for(let Zr=0;Zr<st;Zr++)Xr+=`
            values[${In}] = fma(${Lr.type.value}(a_data${st===1?"":`[${Zr}]`}), b_data${Zr}, values[${In}]);
`}return Xr};return`
  ${Kt.registerUniforms(Mo).registerInternalVariables(tr).declareVariables(...No,jr)}
  ${Kt.mainStart()}
    ${Kt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${pt})) * ${pt};
    var index1 = global_idx / (uniforms.N / ${pt});
    let stride1 = uniforms.M / ${wt};
    let row = (index1 % stride1) * ${wt};
    let batch = index1 / stride1;

    ${c.length===2?"":`let batch_indices = ${tr.offsetToIndices("batch")};`}
    ${zo(rr,n0)}
    let a_offset = ${rr.indicesToOffset("a_indices")};
    ${zo(Lr,Qo)}
    let b_offset = ${Lr.indicesToOffset("b_indices")};
    var values: array<${jr.type.value}, ${wt}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${st}) {
      ${e0()}
    }
    for (var i = 0u; i < ${wt}u; i++) {
      var value = values[i];
      ${o0}
      ${An}
      let cur_indices = ${jr.type.indices}(batch, row + i, col);
      let offset = ${jr.indicesToOffset("cur_indices")};
      ${jr.setByOffset(`offset / ${pt}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${s.activation};${pt};${st};${wt};${et}`,inputDependencies:Ct?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:c,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(Tt/64)},programUniforms:Ht}),getShaderSource:Gt}},Sp=a=>{if(!a||a.length!==2)throw new Error("MatMul requires 2 inputs.");if(a[0].dims[a[0].dims.length-1]!==a[1].dims[a[1].dims.length-2])throw new Error("shared dimension does not match.")},Hu=a=>{Sp(a.inputs);let s=zt.calcShape(a.inputs[0].dims,a.inputs[1].dims,!0);if(!s)throw new Error("Can't use matmul on the given tensors");let c=s[s.length-1],d=a.inputs[0].dims[a.inputs[0].dims.length-1];c<8&&d<8?a.compute(po(a.inputs,{activation:""},s)):a.compute(ii(a.inputs,{activation:""},s))}}),oi,fo,Cp,Gu,ho,Ip,Tp,go,co=j(()=>{xe(),Wu(),on(),Vu(),Zt(),mo(),Rr(),oi=(a,s,c,d,et,g)=>{let at=a[0],$t=a.slice(g?1:2,g?3:4),vt=$t.length,b=s[0],pt=s.slice(2).map((wt,Tt)=>wt+(wt-1)*(c[Tt]-1)),st=$t.map((wt,Tt)=>wt+d[Tt]+d[Tt+vt]).map((wt,Tt)=>Math.floor((wt-pt[Tt]+et[Tt])/et[Tt]));return st.splice(0,0,at),st.splice(g?3:1,0,b),st},fo=[2,3,1,0],Cp=(a,s)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4&&a[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(a[0].dims.length!==a[1].dims.length)throw new Error("filter does not have same dimension as input");let c=a[0].dims[s.format==="NHWC"?a[0].dims.length-1:1],d=a[1].dims[1]*s.group;if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(a.length===3&&(a[2].dims.length!==1||a[1].dims[0]!==a[2].dims[0]))throw new Error("invalid bias");let et=a[0].dims.length-2;if(s.dilations.length!==et)throw new Error(`dilations should be ${et}D`);if(s.strides.length!==et)throw new Error(`strides should be ${et}D`);if(s.pads.length!==et*2)throw new Error(`pads should be ${et*2}D`);if(s.kernelShape.length!==0&&s.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape")},Gu=(a,s)=>{let c=a.kernelShape.slice();for(let g=2;g<s[1].dims.length;++g)c[g-2]===0&&(c[g-2]=s[1].dims[g]);let d=a.pads.slice();pr.adjustPadsBasedOnAutoPad(s[0].dims,a.strides,a.dilations,c,d,a.format==="NHWC",a.autoPad);let et=Object.assign({},a);return Object.assign(et,{kernelShape:c,pads:d}),et},ho=a=>{let s=ei(a),c=a.format,d=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][a.auto_pad],et=a.dilations,g=a.group,at=a.kernel_shape,$t=a.pads,vt=a.strides,b=a.w_is_const();return{autoPad:d,format:c,dilations:et,group:g,kernelShape:at,pads:$t,strides:vt,wIsConst:b,...s,cacheKey:`${a.format};${s.activation};`}},Ip=(a,s,c)=>{let d=Gu(c,s),et=c.format==="NHWC";if(c.group!==1){if(!a.adapterInfo.isArchitecture("ampere")&&et&&s[1].dims[0]===c.group&&s[1].dims[1]===1&&c.dilations[0]===1&&c.dilations[1]===1){let Lr=oi(s[0].dims,s[1].dims,c.dilations,d.pads,c.strides,et),jr=a.kernelCustomData.wT??a.compute(xt(s[1],fo),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];c.wIsConst&&!a.kernelCustomData.wT&&(a.kernelCustomData.wT=jr);let Yr=[s[0],jr];s.length===3&&Yr.push(s[2]),a.compute(Nu(Yr,d,Lr),{inputs:Yr})}else a.compute(lo(s,d));return}let g=s.length===3,at=s[0].dims[et?1:2],$t=s[0].dims[et?2:3],vt=s[0].dims[et?3:1],b=s[1].dims[2],pt=s[1].dims[3],st=oi(s[0].dims,s[1].dims,c.dilations,d.pads,c.strides,et),wt=st[et?1:2],Tt=st[et?2:3],Ct=st[et?3:1],jt=et&&b===at&&pt===$t&&c.pads[0]===0&&c.pads[1]===0;if(jt||b===1&&pt===1&&c.dilations[0]===1&&c.dilations[1]===1&&c.strides[0]===1&&c.strides[1]===1&&c.pads[0]===0&&c.pads[1]===0){let Lr=st[0],jr,Yr,An,No=[];if(et){let c0=a.kernelCustomData.wT??a.compute(xt(s[1],fo),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];if(c.wIsConst&&!a.kernelCustomData.wT&&(a.kernelCustomData.wT=c0),jt){let n0=at*$t*vt;jr=s[0].reshape([1,Lr,n0]),Yr=c0.reshape([1,n0,Ct]),An=[1,Lr,Ct]}else jr=s[0].reshape([Lr,at*$t,vt]),Yr=c0.reshape([1,vt,Ct]),An=[Lr,wt*Tt,Ct];No.push(jr),No.push(Yr)}else jr=s[0].reshape([Lr,vt,at*$t]),Yr=s[1].reshape([1,Ct,vt]),An=[Lr,Ct,wt*Tt],No.push(Yr),No.push(jr);g&&No.push(s[2]);let o0=An[2],t0=No[0].dims[No[0].dims.length-1];o0<8&&t0<8?a.compute(po(No,d,st,An,et),{inputs:No}):a.compute(ii(No,d,st,An,et),{inputs:No});return}let Lt=!0,Ht=a.kernelCustomData.wT??a.compute(xt(s[1],fo),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];c.wIsConst&&!a.kernelCustomData.wT&&(a.kernelCustomData.wT=Ht);let Gt=[s[0],Ht];g&&Gt.push(s[2]);let Kt=et?wt*Tt:Ct,tr=et?Ct:wt*Tt,rr=b*pt*vt;a.compute(Uu(Gt,d,st,Kt,tr,rr,g,Lt),{inputs:Gt})},Tp=(a,s)=>{let c=s.format==="NHWC",d=[a.inputs[0].reshape(c?[a.inputs[0].dims[0],1,a.inputs[0].dims[1],a.inputs[0].dims[2]]:[a.inputs[0].dims[0],a.inputs[0].dims[1],1,a.inputs[0].dims[2]]),a.inputs[1].reshape([a.inputs[1].dims[0],a.inputs[1].dims[1],1,a.inputs[1].dims[2]])];a.inputs.length===3&&d.push(a.inputs[2]);let et=[0,s.pads[0],0,s.pads[1]],g=[1].concat(s.strides),at=[1].concat(s.dilations),$t=[1].concat(s.kernelShape),vt=Gu({...s,pads:et,strides:g,dilations:at,kernelShape:$t},d);a.compute(lo(d,vt,b=>c?[b[0],b[2],b[3]]:[]))},go=(a,s)=>{Cp(a.inputs,s),a.inputs[0].dims.length===3?Tp(a,s):Ip(a,a.inputs,s)}}),Ap,Lu,Fu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),Ap=(a,s=!1,c,d,et=4)=>{let g=Lt=>{switch(Lt){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];
            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];
            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];
            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];
            return ${d}(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${Lt} is not supported.`)}},at=a?`
      let coord = vec4<i32>(batch, iXR, iXC, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, iXR, iXC);
      `,$t=a?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,vt=a?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",b=a?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",pt=a?"row":"col",st=a?"col":"row",wt=`
      let inChannels = ${a?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let outWidth = ${a?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      let outRow = ${pt} / outWidth;
      let outCol = ${pt} % outWidth;

      let WRow = ${st} / (uniforms.filter_dims[1] * inChannels);
      let WCol = ${st} / inChannels % uniforms.filter_dims[1];
      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(${vt}) || fract(xR) > 0.0) {
        return ${d}(0.0);
      }
      if (xC < 0.0 || xC >= f32(${b}) || fract(xC) > 0.0) {
        return ${d}(0.0);
      }
      let iXR = i32(xR);
      let iXC = i32(xC);
      let xCh = ${st} % inChannels;
      ${at}
      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${et}];`,Tt=a?`
      let col = colIn * ${et};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
        ${wt}
      }
      return ${d}(0.0);`:`
      let col = colIn * ${et};
      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
        ${wt}
      }
      return ${d}(0.0);`,Ct=`
      let col = colIn * ${et};
      let inChannels = ${a?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);
      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];
      if (${a?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {
        let rowInner = row % inChannels;
        let coord = vec4<i32>(coordX, coordY, col, rowInner);
        ${g(et)}
      }
      return ${d}(0.0);
      `,jt=kt(c,d);return`
  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${d} {
    ${a?Tt:Ct}
  }

  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${d} {
    ${a?Ct:Tt}
  }

  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${d}) {
    let col = colIn * ${et};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
      var value = valueInput;
      let outWidth = ${a?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${$t}
      ${ti(s)}
      ${jt}
      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${et}] = value;
    }
  }`},Lu=(a,s,c,d,et,g,at,$t)=>{let vt=s.format==="NHWC",b=vt?a[0].dims[3]:a[0].dims[1],pt=c[0],st=vt?c[2]:c[3],wt=vt?c[1]:c[2],Tt=vt?c[3]:c[1],Ct=vt&&b%4===0&&b%3&&Tt%4===0,jt=vt?Tt:st*wt,Lt=vt?st*wt:Tt,Ht=[8,8,1],Gt=d<=8?[4,1,1]:[4,4,1],Kt=[Math.ceil(jt/Ht[0]/Gt[0]),Math.ceil(Lt/Ht[1]/Gt[1]),Math.ceil(pt/Ht[2]/Gt[2])];Ne("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${Kt}`);let tr=Ct?4:1,rr=Math.max(Ht[0]*tr,Ht[1]),Lr=Ct?4:1,jr=[s.kernelShape[vt?1:2],s.kernelShape[vt?2:3]],Yr=[jr[0]+(s.dilations[0]<=1?0:(jr[0]-1)*(s.dilations[0]-1)),jr[1]+(s.dilations[1]<=1?0:(jr[1]-1)*(s.dilations[1]-1))],An=[Yr[0]-1-Math.floor((s.pads[0]+s.pads[2])/2),Yr[1]-1-Math.floor((s.pads[1]+s.pads[3])/2)],No=[{type:6,data:d},{type:6,data:et},{type:6,data:g},{type:6,data:s.strides},{type:6,data:s.dilations},{type:6,data:jr},{type:6,data:An}];Ot(s,No),No.push(...X(a[0].dims,a[1].dims));let o0=["rank","rank"];at&&(No.push(...X(a[2].dims)),o0.push("rank")),No.push(...X(c));let t0=c0=>{let n0=U$1("x",a[0].dataType,a[0].dims.length,Lr),Qo=U$1("w",a[1].dataType,a[1].dims.length,1),Mo=K("result",a[0].dataType,c.length,Lr),zo=[n0,Qo],e0="";if(at){let Zr=U$1("bias",a[2].dataType,a[2].dims.length,Lr);zo.push(Zr),e0+=`
          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${Zr.type.value} {
            return bias[coords.${vt?"w":"y"}${Ct?"/ 4":""}];
          }`}let Xr=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:jr.length},{name:"pads",type:"i32",length:An.length}];Pt(s,Xr);let In=De(a[0].dataType,1);if(In!=="f16"&&In!=="f32")throw new Error(`elemType ${In} is not supported.`);return`
        ${ni("uniforms.result_strides")}
        ${c0.registerUniforms(Xr).declareVariables(...zo,Mo)};
        ${e0}
        ${Ap(vt,at,s,n0.type.value,tr)}
        ${Ct?rn(Gt,Ht,In,void 0,!vt,rr):nn(Gt,Ht,In,void 0,!vt,rr,!1,void 0,$t)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${s.cacheKey};${Gt};${Ht};${Ct}`,inputDependencies:o0},getRunData:()=>({outputs:[{dims:c,dataType:a[0].dataType}],dispatchGroup:{x:Kt[0],y:Kt[1],z:Kt[2]},programUniforms:No}),getShaderSource:t0}}}),Ep,yo,qu=j(()=>{ye(),Xt(),xe(),_e(),Ep=(a,s,c,d,et,g=!1,at,$t,vt=!1)=>{let b=vt?1:2,pt=vt?2:3,st=vt?3:1,wt=g?2:1,Tt=`
  fn setOutputAtIndex(flatIndex : u32, value : ${g?`vec4<${at}>`:at}) {
    result[flatIndex] = ${g?`vec4<${at}>`:at}(value);
  }`;d&&(Tt+=`
    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${g?`vec4<${at}>`:at} {
      return bias[coords.${vt?"w":"y"}${g?"/ 4":""}];
    }`);let Ct=g?4:1,jt=U$1("W",s[1].dataType,s[1].dims.length,Ct),Lt=U$1("Dy",s[0].dataType,s[0].dims.length,Ct),Ht=[Lt,jt];d&&Ht.push(U$1("bias",s[2].dataType,[c[st]].length,Ct));let Gt=K("result",s[0].dataType,c.length,Ct),Kt=`{
        let batch: u32 = ${et?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];
        let r = ${et?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];
        let c = ${et?"global_id.y":"workgroup_id.y"} * ${wt};
        let d1: u32 = ${et?"global_id.x":"workgroup_id.x"} * 4;

        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd: array<vec4<${at}>, ${wt}>;
        for (var i = 0; i < ${wt}; i++) {
          dotProd[i] = vec4<${at}>(0.0);
        }
        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {
          var dyR = (${at}(dyCorner.x) + ${at}(wR)) / ${at}(uniforms.strides.x);
          let wRPerm = uniforms.filter_dims[0] - 1 - wR;
          if (dyR < 0.0 || dyR >= ${at}(uniforms.Dy_shape[1]) ||
              fract(dyR) > 0.0 || wRPerm < 0) {
            continue;
          }
          let idyR: u32 = u32(dyR);

          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {
            let dyC = (${at}(dyCorner.y) + ${at}(wC)) / ${at}(uniforms.strides.y);
            let dyC2 = (${at}(dyCorner.y) + 1.0 + ${at}(wC)) / ${at}(uniforms.strides.y);
            let wCPerm = uniforms.filter_dims[1] - 1 - wC;
            if (wCPerm < 0) {
              continue;
            }
            var bDyCVal = true;
            var bDyCVal2 = true;
            if (dyC < 0.0 || dyC >= ${at}(uniforms.Dy_shape[2]) ||
                fract(dyC) > 0.0) {
              bDyCVal = false;
            }
            if (dyC2 < 0.0 || dyC2 >= ${at}(uniforms.Dy_shape[2]) ||
                fract(dyC2) > 0.0) {
              bDyCVal2 = false;
            }

            let idyC: u32 = u32(dyC);
            let idyC2: u32 = u32(dyC2);
            if (bDyCVal && bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${Lt.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${at}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;

                xValue =  ${Lt.get("batch","idyR","idyC2","d2")};

                dotProd[1] = dotProd[1] + vec4<${at}>(dot(xValue, wValue0),
                                                    dot(xValue, wValue1),
                                                    dot(xValue, wValue2),
                                                    dot(xValue, wValue3));
              }
            } else if (bDyCVal) {
              let d2Length = uniforms.Dy_shape[${st}];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${Lt.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${at}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;
              }
            } else if (bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${jt.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${Lt.get("batch","idyR","idyC2","d2")};
                let tmpval = vec4<${at}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[1] = dotProd[1] + tmpval;
              }
            }
          }
        }

        for (var i: u32 = 0; i < ${wt}; i = i + 1) {
          let value = dotProd[i] + ${d?"bias[c+i]":`vec4<${at}>(0.0)`};
          ${Gt.set("batch","r","c + i","d1","value")};
        }
      }`,tr=`
          let outputIndices = ${Gt.offsetToIndices("global_idx")};
          let batch = ${Gt.indicesGet("outputIndices",0)};
          let d1 = ${Gt.indicesGet("outputIndices",st)};
          let r = ${Gt.indicesGet("outputIndices",b)};
          let c = ${Gt.indicesGet("outputIndices",pt)};
          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
          let dyRCorner = dyCorner.x;
          let dyCCorner = dyCorner.y;
          let groupId = d1 / uniforms.output_channels_per_group;
          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
          // ? = to be determined. : = across all values in that axis.
          var dotProd = ${at}(0.0);
          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
            if (wR % uniforms.dilations.x != 0) {
              continue;
            }
            let dyR = (${at}(dyRCorner) + ${at}(wR)) / ${at}(uniforms.strides[0]);
            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
            if (dyR < 0.0 || dyR >= ${at}(uniforms.Dy_shape[${b}]) || fract(dyR) > 0.0 ||
                wRPerm < 0) {
              continue;
            }
            let idyR: u32 = u32(dyR);

            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
              if (wC % uniforms.dilations.y != 0) {
                continue;
              }
              let dyC = (${at}(dyCCorner) + ${at}(wC)) / ${at}(uniforms.strides.y);
              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
              if (dyC < 0.0 || dyC >= ${at}(uniforms.Dy_shape[${pt}]) ||
                  fract(dyC) > 0.0 || wCPerm < 0) {
                continue;
              }
              let idyC: u32 = u32(dyC);
              var inputChannel = groupId * uniforms.input_channels_per_group;
              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {
                let xValue = ${vt?Lt.get("batch","idyR","idyC","inputChannel"):Lt.get("batch","inputChannel","idyR","idyC")};
                let wValue = ${jt.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};
                dotProd = dotProd + xValue * wValue;
                inputChannel = inputChannel + 1;
              }
            }
          }
          let value = dotProd + ${d?"bias[d1]":`${at}(0.0)`};
          ${Gt.setByOffset("global_idx","value")};
        `;return`
  ${a.registerUniforms($t).declareVariables(...Ht,Gt)}
  ${Tt}

    ${a.mainStart()}
    ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
  ${g?Kt:tr}}`},yo=(a,s,c)=>{let d=a.length>2,et=s.outputShape,g=M$1.size(et),at=[Math.ceil(g/64),1,1];Ne("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${at}`);let $t=s.format==="NHWC",vt=["rank","rank"],b=[s.strides[0],s.strides[1]],pt=[s.kernelShape[$t?1:2],s.kernelShape[$t?2:3]],st=[s.dilations[0],s.dilations[1]],wt=[pt[0]+(s.dilations[0]<=1?0:(s.kernelShape[$t?1:2]-1)*(s.dilations[0]-1)),pt[1]+(s.dilations[1]<=1?0:(s.kernelShape[$t?2:3]-1)*(s.dilations[1]-1))],Tt=[wt[0]-1-Math.floor((s.pads[0]+s.pads[2])/2),wt[1]-1-Math.floor(s.pads[1]+s.pads[3])/2],Ct=!1,jt=s.group,Lt=a[1].dims,Ht=Lt[0]/jt,Gt=Lt[1],Kt=[{type:12,data:g},{type:12,data:b},{type:12,data:pt},{type:12,data:st},{type:12,data:wt},{type:6,data:Tt},{type:12,data:Ht},{type:12,data:Gt},...X(a[0].dims,a[1].dims)];d&&(Kt.push(...X(a[2].dims)),vt.push("rank")),Kt.push(...X(et));let tr=at[1]===1&&at[2]===1,rr=Lr=>{let jr=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:b.length},{name:"filter_dims",type:"u32",length:pt.length},{name:"dilations",type:"u32",length:pt.length},{name:"effective_filter_dims",type:"u32",length:wt.length},{name:"pads",type:"i32",length:Tt.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],Yr=De(a[0].dataType);return`${Ep(Lr,a,et,d,tr,Ct,Yr,jr,$t)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${s.cacheKey};`,inputDependencies:vt},getRunData:()=>({dispatchGroup:{x:at[0],y:at[1],z:at[2]},outputs:[{dims:c?c(et):et,dataType:a[0].dataType}],programUniforms:Kt}),getShaderSource:rr}}}),kp,Op,Pp,ju,Ku,Rp,zp,Bp,Dp,Yu,Xu=j(()=>{Fu(),qu(),Zt(),Rr(),kp=(a,s,c,d,et,g)=>(a-1)*s+c+(d-1)*et+1-g,Op=(a,s,c,d,et)=>{let g=Math.floor(a/2);s==="SAME_UPPER"?(c[d]=g,c[et]=a-g):s==="SAME_LOWER"&&(c[d]=a-g,c[et]=g)},Pp=(a,s,c,d,et,g,at,$t,vt,b)=>{let pt=a.length-2,st=b.length===0;if(vt.length===0)for(let Ct=0;Ct<pt;++Ct)vt.push(0);let wt=a[0],Tt=s[$t?3:1]*et;for(let Ct=0,jt=a.length-pt-($t?1:0);Ct<pt;++Ct,++jt){let Lt=a[jt],Ht=st?Lt*at[Ct]:b[Ct],Gt=kp(Lt,at[Ct],g[Ct],s[jt],c[Ct],Ht);Op(Gt,d,g,Ct,Ct+pt),st&&b.push(at[Ct]*(Lt-1)+vt[Ct]+(s[jt]-1)*c[Ct]+1-g[Ct]-g[Ct+pt])}b.splice(0,0,wt),b.splice($t?3:1,0,Tt)},ju=(a,s)=>{let c=a.kernelShape.slice();if(a.kernelShape.length===0||a.kernelShape.reduce((st,wt)=>st*wt,1)===0){c.length=0;for(let st=2;st<s[1].dims.length;++st)c.push(s[1].dims[st])}let d=a.format==="NHWC";c.splice(0,0,s[1].dims[0]),c.splice(d?3:1,0,s[1].dims[1]);let et=a.pads.slice(),g=a.outputShape.slice(),at=a.outputPadding.slice(),$t=s[0].dims,vt=a.dilations.slice();if(vt.reduce((st,wt)=>st+wt,0)===0){let st=s[0].dims.length-2;vt=new Array(st).fill(1)}let b=a.strides.slice();if(b.reduce((st,wt)=>st+wt,0)===0){let st=s[0].dims.length-2;b=new Array(st).fill(1)}Pp($t,c,vt,a.autoPad,a.group,et,b,d,at,g);let pt=Object.assign({},a);return Object.assign(pt,{kernelShape:c,pads:et,outputPadding:at,outputShape:g,dilations:vt,strides:b}),pt},Ku=a=>{let s=ei(a),c=a.format,d=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof a.autoPad>"u"?0:a.autoPad],et=a.dilations,g=a.group,at=a.kernelShape,$t=a.pads,vt=a.strides,b=a.wIsConst(),pt=a.outputPadding,st=a.outputShape;return{autoPad:d,format:c,dilations:et,group:g,kernelShape:at,outputPadding:pt,outputShape:st,pads:$t,strides:vt,wIsConst:b,...s,cacheKey:`${a.format};${s.activation};`}},Rp=(a,s)=>{if(!a||a.length!==2&&a.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(a[0].dims.length!==4&&a[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(a[0].dims.length!==a[1].dims.length)throw new Error("filter does not have same dimension as input");let c=a[0].dims[s.format==="NHWC"?a[0].dims.length-1:1],d=a[1].dims[0];if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let et=a[1].dims[1]*s.group;if(a.length===3&&(a[2].dims.length!==1||a[2].dims[0]!==et))throw new Error("invalid bias");let g=a[0].dims.length-2;if(s.dilations.reduce((at,$t)=>at+$t,0)>0&&s.dilations.length!==g)throw new Error(`dilations should be ${g}D`);if(s.strides.reduce((at,$t)=>at+$t,0)>0&&s.strides.length!==g)throw new Error(`strides should be ${g}D`);if(s.pads.reduce((at,$t)=>at+$t,0)>0&&s.pads.length!==g*2)throw new Error(`pads should be ${g*2}D`);if(s.outputPadding.length!==g&&s.outputPadding.length!==0)throw new Error(`output_padding should be ${g}D`);if(s.kernelShape.reduce((at,$t)=>at+$t,0)>0&&s.kernelShape.length!==0&&s.kernelShape.length!==a[1].dims.length-2)throw new Error("invalid kernel shape");if(s.outputShape.length!==0&&s.outputShape.length!==a[0].dims.length-2)throw new Error("invalid output shape")},zp=[2,3,1,0],Bp=(a,s,c)=>{let d=ju(c,s),et=c.format==="NHWC",g=d.outputShape,at=g[et?3:1],$t=s[0].dims[et?3:1];if(d.group!==1||at===1&&$t===1){a.compute(yo(s,d));return}let vt=g[et?1:2],b=g[et?2:3],pt=s[1].dims[2],st=s[1].dims[3],wt=et?vt*b:at,Tt=et?at:vt*b,Ct=pt*st*$t,jt=!0,Lt=a.kernelCustomData.wT??a.compute(xt(s[1],zp),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];c.wIsConst&&!a.kernelCustomData.wT&&(a.kernelCustomData.wT=Lt);let Ht=[s[0],Lt],Gt=s.length===3;Gt&&(!et&&s[2].dims.length===1?Ht.push(s[2].reshape([s[2].dims[0],1,1])):Ht.push(s[2])),a.compute(Lu(Ht,d,g,wt,Tt,Ct,Gt,jt),{inputs:Ht})},Dp=(a,s)=>{let c=s.format==="NHWC",d=[a.inputs[0].reshape(c?[a.inputs[0].dims[0],1,a.inputs[0].dims[1],a.inputs[0].dims[2]]:[a.inputs[0].dims[0],a.inputs[0].dims[1],1,a.inputs[0].dims[2]]),a.inputs[1].reshape([a.inputs[1].dims[0],a.inputs[1].dims[1],1,a.inputs[1].dims[2]])];a.inputs.length===3&&d.push(a.inputs[2]);let et=s.kernelShape;(et.length===0||et[0]===0)&&(et=[a.inputs[1].dims[2]]);let g=s.dilations;(g.length===0||g[0]===0)&&(g=[1]);let at=s.strides;(at.length===0||at[0]===0)&&(at=[1]);let $t=s.pads;$t.length===0&&($t=[0,0]),$t=[0,$t[0],0,$t[1]],at=[1].concat(at),g=[1].concat(g),et=[1].concat(et);let vt=ju({...s,pads:$t,strides:at,dilations:g,kernelShape:et},d);a.compute(yo(d,vt,b=>c?[b[0],b[2],b[3]]:[b[0],b[1],b[3]]))},Yu=(a,s)=>{Rp(a.inputs,s),a.inputs[0].dims.length===3?Dp(a,s):Bp(a,a.inputs,s)}}),Mp,Zu,Qu,Ju=j(()=>{ye(),xe(),Ze(),_e(),Mp=(a,s,c,d)=>{let et=M$1.size(s),g=s.length,at=U$1("input",a,g),$t=K("output",a,g),vt=c.dataType===6?c.getInt32Array()[0]:Number(c.getBigInt64Array()[0]),b=M$1.normalizeAxis(vt,g),pt=st=>{let wt=` i32(${at.indicesGet("inputIndices","uniforms.axis")}) `,Tt=fe("uniforms.input_shape","uniforms.axis",g),Ct=d.reverse?wt+(d.exclusive?" + 1":""):"0",jt=d.reverse?Tt:wt+(d.exclusive?"":" + 1");return`
                ${st.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(at,$t)}
                ${st.mainStart()}
                  ${st.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${$t.offsetToIndices("global_idx")};
                  var sum = ${$t.type.value}(0);
                  let first : i32 = ${Ct};
                  let last : i32 = ${jt};
                  for (var i : i32 = first; i < last; i++) {
                    ${at.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${at.getByIndices("inputIndices")};
                  }
                  ${$t.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:d.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:s,dataType:a}],dispatchGroup:{x:Math.ceil(et/64)},programUniforms:[{type:12,data:et},{type:12,data:b},...X(s,s)]}),getShaderSource:pt}},Zu=(a,s)=>{let c=a.inputs[0].dims,d=a.inputs[0].dataType,et=a.inputs[1];a.compute(Mp(d,c,et,s),{inputs:[0]})},Qu=a=>{let s=a.exclusive===1,c=a.reverse===1;return we({exclusive:s,reverse:c})}}),Up,Wp,Np,el,tl,rl=j(()=>{ye(),xe(),Ze(),_e(),Up=a=>{if(!a||a.length!==1)throw new Error("DepthToSpace requires 1 input.");if(a[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Wp=(a,s,c,d)=>{let et=[];et.push(`fn perm(i: ${d.type.indices}) -> ${c.type.indices} {
    var a: ${c.type.indices};`);for(let g=0;g<s;++g)et.push(c.indicesSet("a",a[g],`i[${g}]`));return et.push("return a;}"),et.join(`
`)},Np=(a,s)=>{let c,d,et,g,at,$t,vt=s.format==="NHWC",b=s.blocksize,pt=s.mode==="DCR";vt?([c,d,et,g]=a.dims,at=pt?[c,d,et,b,b,g/b**2]:[c,d,et,g/b**2,b,b],$t=pt?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([c,d,et,g]=[a.dims[0],a.dims[2],a.dims[3],a.dims[1]],at=pt?[c,b,b,g/b**2,d,et]:[c,g/b**2,b,b,d,et],$t=pt?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let st=a.reshape(at),wt=st.dims.length,Tt=a.dataType,Ct=U$1("a",Tt,wt),jt=K("output",Tt,wt),Lt=Ht=>`
  ${Ht.registerUniform("output_size","u32").declareVariables(Ct,jt)}

  ${Wp($t,wt,Ct,jt)}

  ${Ht.mainStart()}
    ${Ht.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${jt.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${jt.setByOffset("global_idx",Ct.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${a.dims};${s.blocksize};${s.mode}`,inputDependencies:["rank"]},getRunData:Ht=>{let Gt=vt?[c,d*b,et*b,g/b**2]:[c,g/b**2,d*b,et*b],Kt=M$1.size(Gt),tr=st.dims,rr=M$1.sortBasedOnPerm(tr,$t);return{outputs:[{dims:Gt,dataType:Ht[0].dataType}],dispatchGroup:{x:Math.ceil(Kt/64)},programUniforms:[{type:12,data:Kt},...X(tr,rr)]}},getShaderSource:Lt}},el=(a,s)=>{Up(a.inputs),a.compute(Np(a.inputs[0],s))},tl=a=>we({blocksize:a.blocksize,mode:a.mode,format:a.format})}),bo,ai,nl,Vp,Hp,vo,wo,il,Gp,ol,al,sl=j(()=>{ye(),xe(),Ze(),_e(),bo="[a-zA-Z]|\\.\\.\\.",ai="("+bo+")+",nl="^"+ai+"$",Vp="("+ai+",)*"+ai,Hp="^"+Vp+"$",vo=class{constructor(a=-1){this.symbolToIndices=new Map,this.inputIndex=a}addSymbol(a,s){let c=this.symbolToIndices.get(a);c===void 0?c=[s]:c.push(s),this.symbolToIndices.set(a,c)}},wo=class{constructor(a,s){var et;this.equation=s,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[c,d]=s.includes("->")?s.split("->",2):[s,""];if(!c.match(RegExp(Hp)))throw new Error("Invalid LHS term");if(c.split(",").forEach((g,at)=>{let $t=a[at].dims.slice();if(!g.match(RegExp(nl)))throw new Error("Invalid LHS term");let vt=this.processTerm(g,!0,$t,at);this.lhs.push(vt)}),d==="")d+=[...this.symbolToInfo.entries()].filter(([g,at])=>at.count===1||g==="...").map(([g])=>g).join("");else if(!d.match(RegExp(ai)))throw new Error("Invalid RHS");(et=d.match(RegExp(bo,"g")))==null||et.forEach(g=>{if(g==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let at=this.symbolToInfo.get(g);if(at===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(at.dimValue)}}),this.rhs=this.processTerm(d,!1,this.outputDims)}addSymbol(a,s,c){let d=this.symbolToInfo.get(a);if(d!==void 0){if(d.dimValue!==s&&d.count!==1)throw new Error("Dimension mismatch");d.count++,d.inputIndices.push(c)}else d={count:1,dimValue:s,inputIndices:[c]};this.symbolToInfo.set(a,d)}processTerm(a,s,c,d=-1){let et=c.length,g=!1,at=[],$t=0;if(!a.match(RegExp(nl))&&!s&&a!=="")throw new Error("Invalid LHS term");let vt=a.match(RegExp(bo,"g")),b=new vo(d);return vt==null||vt.forEach((pt,st)=>{if(pt==="..."){if(g)throw new Error("Only one ellipsis is allowed per input term");g=!0;let wt=et-vt.length+1;if(wt<0)throw new Error("Ellipsis out of bounds");if(at=c.slice($t,$t+wt),this.hasEllipsis){if(this.ellipsisDims.length!==at.length||this.ellipsisDims.toString()!==at.toString())throw new Error("Ellipsis dimensions mismatch")}else if(s)this.hasEllipsis=!0,this.ellipsisDims=at;else throw new Error("Ellipsis must be specified in the LHS");for(let Tt=0;Tt<at.length;Tt++){let Ct=String.fromCharCode(48+Tt);b.addSymbol(Ct,st+Tt),this.addSymbol(Ct,c[$t++],d)}}else b.addSymbol(pt,st+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(pt,c[$t++],d)}),b}},il=a=>a+"_max",Gp=(a,s,c,d)=>{let et=a.map(b=>b.length).map((b,pt)=>U$1(`input${pt}`,s,b)),g=M$1.size(d),at=K("output",s,d.length),$t=[...c.symbolToInfo.keys()].filter(b=>!c.rhs.symbolToIndices.has(b)),vt=b=>{let pt=[],st="var prod = 1.0;",wt="var sum = 0.0;",Tt="sum += prod;",Ct=[],jt=[],Lt=[],Ht=[],Gt=c.symbolToInfo.size===c.rhs.symbolToIndices.size;c.symbolToInfo.forEach((tr,rr)=>{var Lr;if(c.rhs.symbolToIndices.has(rr)){let jr=(Lr=c.rhs.symbolToIndices.get(rr))==null?void 0:Lr[0];jr!==void 0&&c.lhs.forEach((Yr,An)=>{if(tr.inputIndices.includes(An)){let No=Yr.symbolToIndices.get(rr);if(No===void 0)throw new Error("Invalid symbol error");No.forEach(o0=>{pt.push(`${et[An].indicesSet(`input${An}Indices`,o0,at.indicesGet("outputIndices",jr))}`)})}})}else c.lhs.forEach((jr,Yr)=>{if(tr.inputIndices.includes(Yr)){let An=jr.symbolToIndices.get(rr);if(An===void 0)throw new Error("Invalid symbol error");An.forEach(No=>{Ct.push(`${et[Yr].indicesSet(`input${Yr}Indices`,No,`${rr}`)}`)}),Ht.push(`prod *= ${et[Yr].getByIndices(`input${Yr}Indices`)};`)}}),jt.push(`for(var ${rr}: u32 = 0; ${rr} < uniforms.${il(rr)}; ${rr}++) {`),Lt.push("}")});let Kt=Gt?[...pt,`let sum = ${et.map((tr,rr)=>tr.getByIndices(`input${rr}Indices`)).join(" * ")};`]:[...pt,wt,...jt,...Ct,st,...Ht,Tt,...Lt];return`
            ${b.registerUniforms($t.map(tr=>({name:`${il(tr)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...et,at)}

            ${b.mainStart()}
            ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${at.offsetToIndices("global_idx")};
            ${et.map((tr,rr)=>`var input${rr}Indices: ${et[rr].type.indices};`).join(`
`)}
            ${Kt.join(`
`)};
            ${at.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:c.equation,inputDependencies:a.map(()=>"rank")},getRunData:()=>{let b=$t.filter(st=>c.symbolToInfo.has(st)).map(st=>{var wt;return{type:12,data:((wt=c.symbolToInfo.get(st))==null?void 0:wt.dimValue)||0}});b.push({type:12,data:g});let pt=a.map((st,wt)=>[...X(st)]).reduce((st,wt)=>st.concat(wt),b);return pt.push(...X(d)),{outputs:[{dims:d,dataType:s}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:pt}},getShaderSource:vt}},ol=(a,s)=>{let c=new wo(a.inputs,s.equation),d=c.outputDims,et=a.inputs.map((g,at)=>g.dims);a.compute(Gp(et,a.inputs[0].dataType,c,d))},al=a=>{let s=a.equation.replace(/\s+/g,"");return we({equation:s})}}),Lp,ul,Fp,qp,ll,dl=j(()=>{ye(),xe(),_e(),Lp=a=>{if(!a||a.length!==2)throw new Error("Expand requires 2 input.");let s=a[0].dims,c=Array.from(a[1].getBigInt64Array(),Number),d=c.length<s.length?0:c.length-s.length,et=s.length<c.length?0:s.length-c.length;for(;d<c.length&&et<s.length;++d,++et)if(c[d]!==s[et]&&c[d]!==1&&s[et]!==1)throw new Error("Expand requires shape to be broadcastable to input")},ul=(a,s)=>{let c=a.length-s.length,d=[];for(let et=0;et<c;++et)d.push(a[et]);for(let et=0;et<s.length;++et)d.push(s[et]===1?a[et+c]:s[et]);return d},Fp=(a,s)=>a.length>s.length?ul(a,s):ul(s,a),qp=a=>{let s=a[0].dims,c=Array.from(a[1].getBigInt64Array(),Number),d=Fp(s,c),et=a[0].dataType,g=et===9?4:1,at=Math.ceil(M$1.size(d)/g),$t=b=>{let pt=U$1("input",et,s.length,g),st=K("output",et,d.length,g),wt;if(et===9){let Tt=(Ct,jt,Lt="")=>`
          let outputIndices${jt} = ${st.offsetToIndices(`outputOffset + ${jt}u`)};
          let offset${jt} = ${pt.broadcastedIndicesToOffset(`outputIndices${jt}`,st)};
          let index${jt} = offset${jt} / 4u;
          let component${jt} = offset${jt} % 4u;
          ${Ct}[${jt}] = ${Lt}(${pt.getByOffset(`index${jt}`)}[component${jt}]);
        `;wt=`
        let outputOffset = global_idx * ${g};
        var data = vec4<u32>(0);
        ${Tt("data",0,"u32")}
        ${Tt("data",1,"u32")}
        ${Tt("data",2,"u32")}
        ${Tt("data",3,"u32")}
        ${st.setByOffset("global_idx","data")}
      }`}else wt=`
        let outputIndices = ${st.offsetToIndices("global_idx")};
        let inputOffset = ${pt.broadcastedIndicesToOffset("outputIndices",st)};
        ${st.setByOffset("global_idx",pt.getByOffset("inputOffset"))}
      }`;return`
    ${b.registerUniform("vec_size","u32").declareVariables(pt,st)}
    ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${wt}`},vt=[{type:12,data:at},...X(s,d)];return{name:"Expand",shaderCache:{hint:`${d.length}`,inputDependencies:["rank"]},getShaderSource:$t,getRunData:()=>({outputs:[{dims:d,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(at/64)},programUniforms:vt})}},ll=a=>{Lp(a.inputs),a.compute(qp(a.inputs),{inputs:[0]})}}),jp,cl,pl=j(()=>{ye(),xe(),_e(),Jn(),jp=a=>{let s=a[0].dataType,c=M$1.size(a[0].dims),d=M$1.size(a[1].dims),et=d%4===0,g=at=>{let $t=U$1("x",s,[1],4),vt=U$1("bias",s,[1],4),b=K("y",s,[1],4),pt=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],st=Tt=>`
      let bias${Tt}_offset: u32 = (global_idx * 4 + ${Tt}) % uniforms.bias_size;
      let bias${Tt} = ${vt.getByOffset(`bias${Tt}_offset / 4`)}[bias${Tt}_offset % 4];`,wt=et?`
      let bias = ${vt.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${st(0)}${st(1)}${st(2)}${st(3)}
      let bias = ${$t.type.value}(bias0, bias1, bias2, bias3);`;return`${at.registerUniforms(pt).declareVariables($t,vt,b)}

    ${ao(rt(s))}

    ${at.mainStart(mr)}
      ${at.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${$t.getByOffset("global_idx")};
      ${wt}
      let x_in = x + bias;
      ${b.setByOffset("global_idx",so("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${et}`,inputDependencies:["type","type"]},getShaderSource:g,getRunData:at=>({outputs:[{dims:at[0].dims,dataType:at[0].dataType}],programUniforms:[{type:12,data:Math.ceil(c/4)},{type:12,data:d}],dispatchGroup:{x:Math.ceil(c/mr/4)}})}},cl=a=>{a.inputs.length<2||M$1.size(a.inputs[1].dims)===0?wu(a):a.compute(jp(a.inputs))}}),Kp,Yp,ml,fl,hl=j(()=>{ye(),xe(),Ze(),_e(),Kp=a=>{if(!a||a.length!==2)throw new Error("Gather requires 2 inputs.")},Yp=(a,s)=>{let c=a[0].dims,d=a[1].dims,et=c.length,g=M$1.normalizeAxis(s.axis,et),at=c.slice(0);at.splice(g,1,...d);let $t=c[g],vt=a[0].dataType===9?4:1,b=Math.ceil(M$1.size(at)/vt),pt=[{type:12,data:b},{type:6,data:$t},{type:12,data:g},...X(a[0].dims,a[1].dims,at)],st=wt=>{let Tt=U$1("data",a[0].dataType,a[0].dims.length,vt),Ct=U$1("inputIndices",a[1].dataType,a[1].dims.length),jt=K("output",a[0].dataType,at.length,vt),Lt=Gt=>{let Kt=d.length,tr=`var indicesIndices${Gt}  = ${Ct.type.indices}(0);`;for(let rr=0;rr<Kt;rr++)tr+=`${Kt>1?`indicesIndices${Gt}[${rr}]`:`indicesIndices${Gt}`} = ${at.length>1?`outputIndices${Gt}[uniforms.axis + ${rr}]`:`outputIndices${Gt}`};`;tr+=`
          var idx${Gt} = ${Ct.getByIndices(`indicesIndices${Gt}`)};
          if (idx${Gt} < 0) {
            idx${Gt} = idx${Gt} + uniforms.axisDimLimit;
          }
          var dataIndices${Gt} : ${Tt.type.indices};
        `;for(let rr=0,Lr=0;rr<et;rr++)rr===g?(tr+=`${et>1?`dataIndices${Gt}[${rr}]`:`dataIndices${Gt}`} = u32(idx${Gt});`,Lr+=Kt):(tr+=`${et>1?`dataIndices${Gt}[${rr}]`:`dataIndices${Gt}`} = ${at.length>1?`outputIndices${Gt}[${Lr}]`:`outputIndices${Gt}`};`,Lr++);return tr},Ht;if(a[0].dataType===9){let Gt=(Kt,tr,rr="")=>`
          let outputIndices${tr} = ${jt.offsetToIndices(`outputOffset + ${tr}u`)};
          ${Lt(tr)};
          let offset${tr} = ${Tt.indicesToOffset(`dataIndices${tr}`)};
          let index${tr} = offset${tr} / 4u;
          let component${tr} = offset${tr} % 4u;
          ${Kt}[${tr}] = ${rr}(${Tt.getByOffset(`index${tr}`)}[component${tr}]);
        `;Ht=`
        let outputOffset = global_idx * ${vt};
        var value = vec4<u32>(0);
        ${Gt("value",0,"u32")}
        ${Gt("value",1,"u32")}
        ${Gt("value",2,"u32")}
        ${Gt("value",3,"u32")}
        ${jt.setByOffset("global_idx","value")}
      `}else Ht=`
      let outputIndices = ${jt.offsetToIndices("global_idx")};
      ${Lt("")};
      let value = ${Tt.getByIndices("dataIndices")};
      ${jt.setByOffset("global_idx","value")};
      `;return`
      ${wt.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(Tt,Ct,jt)}
      ${wt.mainStart()}
        ${wt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${Ht}
      }`};return{name:"Gather",shaderCache:{hint:s.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:at,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(b/64)},programUniforms:pt}),getShaderSource:st}},ml=a=>we({axis:a.axis}),fl=(a,s)=>{let c=a.inputs;Kp(c),a.compute(Yp(a.inputs,s))}}),Xp,Zp,gl,yl,bl=j(()=>{ye(),xe(),Ze(),_e(),Xp=a=>{if(!a||a.length!==2)throw new Error("GatherElements requires 2 inputs.");if(a[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(a[0].dims.length!==a[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},Zp=(a,s)=>{let c=a[0].dims,d=a[0].dataType,et=c.length,g=a[1].dims,at=a[1].dataType,$t=M$1.normalizeAxis(s.axis,et),vt=c[$t],b=g.slice(0),pt=M$1.size(b),st=U$1("input",d,et),wt=U$1("indicesInput",at,g.length),Tt=K("output",d,b.length),Ct=[{type:12,data:pt},{type:6,data:vt},{type:12,data:$t}];return Ct.push(...X(c,g,b)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:b,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(pt/64)},programUniforms:Ct}),getShaderSource:jt=>`
      ${jt.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(st,wt,Tt)}
      ${jt.mainStart()}
      ${jt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${Tt.offsetToIndices("global_idx")};

      var idx = ${wt.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${st.type.indices}(outputIndices);
      ${st.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${st.getByIndices("inputIndices")};

      ${Tt.setByOffset("global_idx","value")};
  }`}},gl=a=>we({axis:a.axis}),yl=(a,s)=>{let c=a.inputs;Xp(c),a.compute(Zp(a.inputs,s))}}),Qp,Jp,vl,wl,$l=j(()=>{ye(),xe(),_e(),Qp=a=>{if(!a)throw new Error("Input is missing");if(a.length<2||a.length>3)throw new Error("Invaid input number.");if(a.length===3&&a[2].dims.length>2)throw new Error("Invalid input shape of C");if(a[0].dataType!==a[1].dataType||a.length===3&&a[0].dataType!==a[2].dataType)throw new Error("Input types are mismatched")},Jp=(a,s)=>{let c=a[0].dims.slice(),d=a[1].dims.slice(),[et,g,at]=Gn.getShapeOfGemmResult(c,s.transA,d,s.transB,a.length===3?a[2].dims:void 0),$t=[et,g];if(!$t)throw new Error("Can't use gemm on the given tensors");let vt=M$1.size($t),b=[{type:12,data:vt},{type:12,data:et},{type:12,data:g},{type:12,data:at},{type:1,data:s.alpha},{type:1,data:s.beta}],pt=["type","type"];a.length===3&&(b.push(...X(a[2].dims)),pt.push("rank")),b.push(...X($t));let st=wt=>{let Tt="";s.transA&&s.transB?Tt="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":s.transA&&!s.transB?Tt="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!s.transA&&s.transB?Tt="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!s.transA&&!s.transB&&(Tt="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let Ct=s.alpha===1?"":"value *= uniforms.alpha;",jt=U$1("a",a[0].dataType,a[0].dims),Lt=U$1("b",a[1].dataType,a[1].dims),Ht=jt.type.value,Gt=null,Kt=[jt,Lt];a.length===3&&(Gt=U$1("c",a[2].dataType,a[2].dims.length),Kt.push(Gt));let tr=K("output",a[0].dataType,$t.length);Kt.push(tr);let rr=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${wt.registerUniforms(rr).declareVariables(...Kt)}

  ${wt.mainStart()}
    ${wt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${Ht}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${Tt}
    }

    ${Ct}
    ${Gt!=null?`let cOffset = ${Gt.broadcastedIndicesToOffset("vec2(m, n)",tr)}; value += ${Ht}(uniforms.beta) * ${Gt.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`};return{name:"Gemm",shaderCache:{hint:`${s.cacheKey}`,inputDependencies:pt},getRunData:()=>({outputs:[{dims:$t,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(vt/64)},programUniforms:b}),getShaderSource:st}},vl=a=>{let s=a.transA,c=a.transB,d=a.alpha,et=a.beta;return{transA:s,transB:c,alpha:d,beta:et,cacheKey:`${a.transA};${a.transB};${a.alpha===1}`}},wl=(a,s)=>{Qp(a.inputs),a.compute(Jp(a.inputs,s))}}),em,tm,rm,_l,xl=j(()=>{ye(),xe(),_e(),em=(a,s)=>{let c=a[0].dims,d=c,et=2,g=M$1.sizeToDimension(c,et),at=M$1.sizeFromDimension(c,et),$t=Ue(at),vt=at/$t,b=[c[0],c[1],vt],pt=["rank","type","type"],st=[{type:12,data:at},{type:12,data:vt}];st.push(...X(b,b));let wt=Tt=>{let Ct=U$1("x",a[0].dataType,b.length,$t),jt=U$1("scale",a[1].dataType,a[1].dims),Lt=U$1("bias",a[2].dataType,a[2].dims),Ht=K("output",a[0].dataType,b.length,$t),Gt=[Ct,jt,Lt,Ht],Kt=Ct.type.value,tr=$t===1?"f32":`vec${$t}<f32>`,rr=64,Lr=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`
  var<workgroup> meanShared : f32;
  var<workgroup> squaredNormShared : f32;
  var<workgroup> workgroupShared : array<${tr}, ${rr}>;
  const workgroupSize = ${rr}u;
  ${Tt.registerUniforms(Lr).declareVariables(...Gt)}
  ${Tt.mainStart(rr)}
    let norm = global_idx / workgroupSize;
    let batch = norm / uniforms.x_shape[1];
    let channel = norm % uniforms.x_shape[1];
    let localIndex = local_id.x;

    // initialize workgroup memory
    var initial = ${tr}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      initial = initial + ${tr}(${Ct.get("batch","channel","h")});
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the mean of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      meanShared = ${Et("workgroupShared[0]",$t)} / f32(uniforms.normSize);
    }
    workgroupBarrier();

    // reinitialize workgroup memory.
    initial = ${tr}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let deviation =  ${tr}(${Ct.get("batch","channel","h")}) - ${tr}(meanShared);
      initial = initial + deviation * deviation;
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the sum of square of deviation of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      squaredNormShared = ${Et("workgroupShared[0]",$t)};
    }
    workgroupBarrier();

    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${s.epsilon}));
    let channelScale = invStdDev * f32(${jt.getByOffset("channel")});
    let channelShift = f32(${Lt.getByOffset("channel")}) - meanShared * channelScale;
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let value = ${Ct.get("batch","channel","h")} * ${Kt}(${tr}(channelScale)) + ${Kt}(${tr}(channelShift));
      ${Ht.set("batch","channel","h","value")};
    }
  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${s.epsilon};${$t}`,inputDependencies:pt},getRunData:()=>({outputs:[{dims:d,dataType:a[0].dataType}],dispatchGroup:{x:g},programUniforms:st}),getShaderSource:wt}},tm=(a,s,c,d,et,g,at,$t)=>{let vt=Ue(at),b=64,pt=vt===1?"vec2f":`mat2x${vt}f`,st=vt===1?"f32":`vec${vt}f`,wt=(Lr,jr)=>`${pt}(${Lr}, ${jr})`,Tt=et*at/vt,Ct=Math.ceil(g/b),jt=["type"],Lt=[{type:12,data:Ct},{type:12,data:g},{type:12,data:Math.floor(at/vt)},{type:12,data:Math.floor(g*at/vt)}],Ht=Lr=>{let jr=U$1("input",s.dataType,s.dims,vt);return`
  ${Lr.declareVariables(jr)}
  @group(0) @binding(1) var<storage, read_write> output : array<${pt}>;
  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};
  @group(0) @binding(2) var<uniform> uniforms: Uniforms;

  ${Lr.mainStart(b)}
    let currentImageNumber = global_idx / ${b} / uniforms.C;
    let currentChannelNumber = (global_idx / ${b}) % uniforms.C;
    let wgOffset = local_id.x * uniforms.wg_size;
    if (wgOffset >= uniforms.H) {
        return;
    }
    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);

    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;
    var sum = ${At("f32",vt)};
    var squaredSum = ${At("f32",vt)};
    for (var i: u32 = wgOffset; i < wgMax; i++) {
        let value = ${st}(input[offset + i * uniforms.C]);
        sum += value;
        squaredSum += value * value;
    }
    output[global_idx] = ${wt("sum","squaredSum")};
  }`},Gt=a.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${vt}`,inputDependencies:jt},getRunData:()=>({outputs:[{dims:[et,at,b,2],dataType:1}],dispatchGroup:{x:et*at/vt},programUniforms:Lt}),getShaderSource:Ht},{inputs:[s],outputs:[-1]})[0],Kt=[{type:12,data:Tt},{type:12,data:g},{type:12,data:Math.floor(at/vt)},{type:12,data:Math.floor(b*at/vt)}],tr=["type","type","type"],rr=Lr=>{let jr=U$1("scale",c.dataType,c.dims,vt),Yr=U$1("bias",d.dataType,d.dims,vt);return`
  @group(0) @binding(0) var<storage, read> input : array<${pt}>;
  @group(0) @binding(1) var<storage, read> scale : array<${jr.type.storage}>;
  @group(0) @binding(2) var<storage, read> bias : array<${Yr.type.storage}>;
  @group(0) @binding(3) var<storage, read_write> output : array<${pt}>;
  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};
  @group(0) @binding(4) var<uniform> uniforms: Uniforms;

  ${Lr.mainStart()}
    ${Lr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}
    let currentImageNumber = global_idx / uniforms.C;
    let currentChannelNumber = global_idx % uniforms.C;

    let offset = currentImageNumber * uniforms.image_size;
    var sum = ${At("f32",vt)};
    var squaredSum = ${At("f32",vt)};
    for (var i: u32 = 0; i < min(${b}, uniforms.H); i++) {
        let value = input[offset + i + currentChannelNumber * ${b}];
        sum += value[0];
        squaredSum += value[1];
    }
    sum = sum / f32(uniforms.H);
    squaredSum = squaredSum / f32(uniforms.H);
    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${$t}));
    let channelScale = invStdDev * ${st}(scale[currentChannelNumber]);
    let channelShift = ${st}(bias[currentChannelNumber]) - sum * channelScale;

    output[global_idx] = ${wt("channelScale","channelShift")};
  }`};return a.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${vt};${$t}`,inputDependencies:tr},getRunData:()=>({outputs:[{dims:[et,at,2],dataType:1}],dispatchGroup:{x:Math.ceil(Tt/64)},programUniforms:Kt}),getShaderSource:rr},{inputs:[Gt,c,d],outputs:[-1]})[0]},rm=(a,s,c)=>{let d=s[0].dims,et=d,g=d[0],at=d[d.length-1],$t=M$1.sizeFromDimension(d,1)/at,vt=Ue(at),b=M$1.size(et)/vt,pt=[{type:12,data:$t},{type:12,data:Math.floor(at/vt)}],st=["type","type"],wt=tm(a,s[0],s[1],s[2],g,$t,at,c.epsilon),Tt=Ct=>{let jt=De(s[0].dataType),Lt=vt===1?"vec2f":`mat2x${vt}f`,Ht=vt===1?jt:`vec${vt}<${jt}>`,Gt=U$1("input",s[0].dataType,s[0].dims,vt),Kt=K("output",s[0].dataType,et,vt);return`
  @group(0) @binding(0) var<storage, read> input : array<${Gt.type.storage}>;
  @group(0) @binding(1) var<storage, read> scaleInput : array<${Lt}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${Kt.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${Ct.mainStart()}
    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);
    let currentChannelNumber = global_idx % uniforms.C;

    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;
    let scale = scaleInput[scaleOffset];
    output[global_idx] = fma(input[global_idx], ${Ht}(scale[0]), ${Ht}(scale[1]));
  }`};a.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${vt}`,inputDependencies:st},getRunData:()=>({outputs:[{dims:et,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(b/64)},programUniforms:pt}),getShaderSource:Tt},{inputs:[s[0],wt]})},_l=(a,s)=>{s.format==="NHWC"?rm(a,a.inputs,s):a.compute(em(a.inputs,s))}}),nm,im,Sl,Cl=j(()=>{ye(),xe(),_e(),nm=a=>{if(!a||a.length<2)throw new Error("layerNorm requires at least 2 inputs.")},im=(a,s,c)=>{let d=s.simplified,et=a[0].dims,g=a[1],at=!d&&a[2],$t=et,vt=M$1.normalizeAxis(s.axis,et.length),b=M$1.sizeToDimension(et,vt),pt=M$1.sizeFromDimension(et,vt),st=M$1.size(g.dims),wt=at?M$1.size(at.dims):0;if(st!==pt||at&&wt!==pt)throw new Error(`Size of X.shape()[axis:] == ${pt}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${st} and bias size of ${wt}`);let Tt=[];for(let rr=0;rr<et.length;++rr)rr<vt?Tt.push(et[rr]):Tt.push(1);let Ct=Ue(pt),jt=["type","type"],Lt=[{type:12,data:b},{type:1,data:pt},{type:12,data:Math.floor(pt/Ct)},{type:1,data:s.epsilon}];at&&jt.push("type");let Ht=c>1,Gt=c>2,Kt=rr=>{let Lr=De(a[0].dataType),jr=[U$1("x",a[0].dataType,a[0].dims,Ct),U$1("scale",g.dataType,g.dims,Ct)];at&&jr.push(U$1("bias",at.dataType,at.dims,Ct)),jr.push(K("output",a[0].dataType,$t,Ct)),Ht&&jr.push(K("mean_data_output",1,Tt)),Gt&&jr.push(K("inv_std_output",1,Tt));let Yr=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${rr.registerUniforms(Yr).declareVariables(...jr)}
  ${rr.mainStart()}
    ${rr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${At("f32",Ct)};
    var mean_square_vector = ${At("f32",Ct)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${fr(Lr,Ct,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Et("mean_vector",Ct)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Et("mean_square_vector",Ct)} / uniforms.norm_size ${d?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${fr(Lr,Ct,"x[j + offset]")};
      let f32scale = ${fr(Lr,Ct,"scale[j]")};
      output[j + offset] = ${jr[0].type.value}((f32input ${d?"":"- mean"}) * inv_std_dev * f32scale
        ${at?`+ ${fr(Lr,Ct,"bias[j]")}`:""}
      );
    }

    ${Ht?"mean_data_output[global_idx] = mean":""};
    ${Gt?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},tr=[{dims:$t,dataType:a[0].dataType}];return Ht&&tr.push({dims:Tt,dataType:1}),Gt&&tr.push({dims:Tt,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${Ct};${c};${d}`,inputDependencies:jt},getRunData:()=>({outputs:tr,dispatchGroup:{x:Math.ceil(b/64)},programUniforms:Lt}),getShaderSource:Kt}},Sl=(a,s)=>{nm(a.inputs),a.compute(im(a.inputs,s,a.outputCount))}}),om,am,Il,Tl,Al=j(()=>{ye(),xe(),Ze(),_e(),om=(a,s)=>{if(a.length<3||a.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let c=a[0],d=c.dims.length;if(c.dims[d-1]!==s.k)throw new Error("The last dim of input shape does not match the k value");let et=Math.floor((s.k+s.blockSize-1)/s.blockSize),g=s.blockSize/8*s.bits,at=a[1];if(!M$1.areEqual(at.dims,[s.n,et,g]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let $t=a[2].dims;if(M$1.size($t)!==s.n*et)throw new Error("scales input size error.");if(a.length===4){let vt=a[3].dims,b=s.bits>4?s.n*et:s.n*Math.floor((et+1)/2);if(M$1.size(vt)!==b)throw new Error("zeroPoints input size error.")}},am=(a,s,c,d)=>{let et=a[0].dims,g=et.length,at=Math.floor((s.k+s.blockSize-1)/s.blockSize),$t=et[g-2],vt=s.k,b=s.n,pt=et.slice(0,g-2),st=M$1.size(pt),wt=s.blockSize/8*s.bits/4,Tt=a[0].dataType,Ct=Ue($t),jt=Ue(s.k),Lt=Ue(wt),Ht=cr(Tt),Gt=$t*at*Ht,Kt=Math.floor(d/Gt),tr=at<=c[0]&&Kt>0,rr=!tr||Kt>=4?Ue(b):Kt>=2&&Ue(b)>=2?2:1,Lr=pt.concat([$t,b]),jr=M$1.size(Lr)/rr/Ct,Yr=tr?[]:[{type:12,data:jr},{type:12,data:s.blockSize}],An=[st,$t,vt/jt],No=M$1.convertShape(a[1].dims).slice();No.splice(-1,1,wt/Lt),Yr.push(...X(An)),Yr.push(...X(No)),Yr.push(...X(a[2].dims)),a.length===4&&Yr.push(...X(M$1.convertShape(a[3].dims)));let o0=[st,$t,b/rr];Yr.push(...X(o0));let t0=c0=>{let n0=An.length,Qo=U$1("a",a[0].dataType,n0,jt),Mo=U$1("b",12,No.length,Lt),zo=U$1("scales",a[2].dataType,a[2].dims.length),e0=[Qo,Mo,zo],Xr=a.length===4?U$1("zero_points",12,a[3].dims.length):void 0;Xr&&e0.push(Xr);let In=o0.length,Zr=K("output",a[0].dataType,In,rr),wn=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],r0=De(a[0].dataType),ko=(()=>{switch(jt){case 1:return`array<${r0}, 8>`;case 2:return`mat4x2<${r0}>`;case 4:return`mat2x4<${r0}>`;default:throw new Error(`${jt}-component is not supported.`)}})(),_n=`
        for (var word: u32 = 0; word < ${wt}; word += ${Lt}) {
          ${Mo.indicesSet("b_indices","2","word")};
          let b_data = ${Mo.getByIndices("b_indices")};
          for (var i: u32 = 0; i < ${Lt}; i++) {
            let b_value: u32 = ${Lt===1?"b_data":"b_data[word + i]"};
            let b_mask: u32 = 0x0F0F0F0Fu;
            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);
            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);
            let b_quantized_values = ${ko}(${Array.from({length:4},(a0,m0)=>`${r0}(b_value_lower[${m0}]), ${r0}(b_value_upper[${m0}])`).join(", ")});
            let b_dequantized_values = ${jt===1?`${ko}(${Array.from({length:8},(a0,m0)=>`(b_quantized_values[${m0}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${ko}(${Array(8).fill("zero_point").join(",")})) * scale;`};
            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8
            for (var m: u32 = 0; m < ${tr?$t:Ct}u; m++) {
              ${Qo.indicesSet("a_indices",n0-2,tr?"m":`row * ${Ct} + m`)};
              ${Qo.indicesSet("a_indices",n0-1,"word_offset")};
              var input_offset = ${Qo.indicesToOffset("a_indices")};
              var a_data: ${ko};
              for (var j: u32 = 0; j < ${8/jt}; j++) {
                a_data[j] = ${Qo.getByOffset("input_offset")};
                input_offset++;
              }
              ${tr?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${rr>1?"[c]":""} += ${Array.from({length:8/jt},(a0,m0)=>`${jt===1?`a_data[${m0}] * b_dequantized_values[${m0}]`:`dot(a_data[${m0}], b_dequantized_values[${m0}])`}`).join(" + ")};
            }
            word_offset += ${8/jt};
          }
        }`,i0=Xr?`
          zero_point_offset += 4;
          if (zero_point_offset == 32) {
            zero_point_offset = 0;
            zero_point_index++;
            zero_point_word = ${Xr.getByOffset("zero_point_index")};
          }`:"";return tr?`
        var<workgroup> workgroup_shared: array<${Zr.type.value}, ${$t*at}>;
        ${c0.declareVariables(...e0,Zr)}
        ${c0.mainStart([at,1,1])}
          var a_indices: ${Qo.type.indices};
          var block = local_id.x;
          var col = workgroup_id.y;
          var batch = workgroup_id.z;
          ${Qo.indicesSet("a_indices","0","batch")};
          // Two zero points are packed into one byte when uniforms.bits is 4.
          for (var c: u32 = 0; c < ${rr}; c++) {
            let col_times_components_plus_c = col * ${rr} + c;
              ${Xr?`
            var zero_point_bytes_per_col: u32 = (${at} + 1) / 2;
            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);
            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;
            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;
            var zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            var zero_point_word: u32 = ${Xr.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}
            var b_indices: ${Mo.type.indices};
            ${Mo.indicesSet("b_indices","0","col_times_components_plus_c")};
            // The scale and zero points are computed per block.
            var scales_index = col_times_components_plus_c * ${at} + block;
            let scale = ${zo.getByOffset("scales_index")};
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${r0}(${Xr?"(zero_point_word) & 0xFu":8});
            ${Mo.indicesSet("b_indices","1","block")};
            var word_offset: u32 = block * ${s.blockSize/jt};
            var workgroup_shared_offset: u32 = block * ${$t};
            ${_n}
          }
          workgroupBarrier();
          if (local_id.x == 0u) {
            var output_indices: ${Zr.type.indices};
            ${Zr.indicesSet("output_indices","0","batch")};
            ${Zr.indicesSet("output_indices",In-1,"col")};
            ${Zr.indicesSet("output_indices",In-2,"0")};
            var output_offset = ${Zr.indicesToOffset("output_indices")};
            for (var m: u32 = 0u; m < ${$t}u; m++) {
              var output_value: ${Zr.type.value} = ${Zr.type.value}(0);
              var workgroup_shared_offset: u32 = m;
              for (var b: u32 = 0u; b < ${at}u; b++) {
                output_value += workgroup_shared[workgroup_shared_offset];
                workgroup_shared_offset += ${$t};
              }
              ${Zr.setByOffset("output_offset","output_value")};
              output_offset += ${b/rr};
            }
          }
        }`:`
        ${c0.registerUniforms(wn).declareVariables(...e0,Zr)}
        ${c0.mainStart()}
          ${c0.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var output_values: array<${Zr.type.value}, ${Ct}>;
          var output_indices = ${Zr.offsetToIndices("global_idx")};
          var col = ${Zr.indicesGet("output_indices",In-1)};
          var row = ${Zr.indicesGet("output_indices",In-2)};
          var a_indices: ${Qo.type.indices} = output_indices;
          // Two zero points are packed into one byte because uniforms.bits <= 4.
          // zero_point_offset is either 0 or 4. It is bit offset within one byte.
          // TODO support zero_point_offset for bits > 4
          ${Xr?`
          var zero_point_abs_offset = col * ${rr} * ((${at} + 1) / 2);
          var zero_point_index: u32 = zero_point_abs_offset / 4;
          var zero_point_word: u32 = ${Xr.getByOffset("zero_point_index")};
          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}
          var scale_index = col * ${at*rr};
          var b_indices: ${Mo.type.indices};
          for (var c: u32 = 0; c < ${rr}; c++) {
            ${Mo.indicesSet("b_indices","0",`col * ${rr} + c`)};
            var block_offset: u32 = 0;
            for (var block: u32 = 0; block < ${at}; block++) {
              // The scale and zero points are computed per block.
              let scale = ${zo.getByOffset("scale_index")};
              // The default zero point is 8 for unsigned 4-bit quantization.
              let zero_point = ${r0}(${Xr?"extractBits(zero_point_word, zero_point_offset, 4)":8});
              ${Mo.indicesSet("b_indices","1","block")};
              var word_offset: u32 = block_offset;
              ${_n}
              scale_index++;
              ${i0}
              block_offset += uniforms.block_size / ${jt};
            }
            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.
            ${Xr?`if (zero_point_offset % 8 > 0) {
                ${i0}
              }`:""}
            }
            for (var k: u32 = 0u; k < ${Ct}u; k++) {
              ${Zr.indicesSet("output_indices",In-2,`${Ct} * row + k`)};
              ${Zr.setByIndices("output_indices","output_values[k]")}
            }
        }`};return{name:tr?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${s.cacheKey};${$t};${Tt};${a.length}`,inputDependencies:Array(a.length).fill("rank")},getRunData:()=>({outputs:[{dims:Lr,dataType:Tt}],name:tr?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:tr?{x:1,y:Math.ceil(b/rr),z:st}:{x:Math.ceil(jr/64)},programUniforms:Yr}),getShaderSource:t0}},Il=(a,s)=>{om(a.inputs,s);let c=a.getMaxComputeWorkgroupSizes(),d=a.getMaxComputeWorkgroupStoragesize();a.compute(am(a.inputs,s,c,d))},Tl=a=>we(a)}),lt,sm,kl,El,um,$o,Ol,Pl=j(()=>{ye(),xe(),Ze(),Hn(),oo(),_e(),Rr(),lt=(a,s)=>a.length>s&&a[s].dims.length>0&&M$1.size(a[s].dims)>0?a[s]:void 0,sm=(a,s)=>{let c=a[0],d=lt(a,1),et=lt(a,2),g=lt(a,3),at=lt(a,4),$t=lt(a,5),vt=lt(a,6),b=lt(a,7);if(c.dims.length!==3&&c.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let pt=!1,st=c.dims[0],wt=c.dims[1],Tt=c.dims.length===3?pt?c.dims[2]/3:c.dims[2]:s.numHeads*c.dims[4],Ct=wt,jt=0,Lt=0,Ht=Math.floor(Tt/s.numHeads);if(vt&&b){if(vt.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(vt.dims[0]!==st||vt.dims[1]!==s.numHeads||vt.dims[3]!==Ht)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(b.dims[0]!==st||b.dims[1]!==s.numHeads||b.dims[3]!==Ht)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(vt.dims[2]!==b.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(b.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');jt=vt.dims[2],Lt=vt.dims[2]}else if(vt||b)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let Gt;if(d){if(c.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(d.dims.length<3||d.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(c.dims[0]!==d.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(d.dims.length===3){if(d.dims[2]!==c.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');Gt=2,Ct=d.dims[1]}else if(d.dims.length===5){if(d.dims[2]!==s.numHeads||d.dims[3]!==2||d.dims[4]!==Ht)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(et)throw new Error('Expect "value" be none when "key" has packed kv format.');Gt=5,Ct=d.dims[1]}else{if(d.dims[1]!==s.numHeads||d.dims[3]!==Ht)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');Gt=0,Ct=d.dims[2]}}else{if(c.dims.length!==3&&c.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(c.dims.length===5&&(c.dims[2]!==s.numHeads||c.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');Gt=3}if(g){if(g.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(et&&c.dims.length===5&&c.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let Kt=0;if(at){Kt=8;let Yr=at.dims;throw Yr.length===1?Yr[0]===st?Kt=1:Yr[0]===3*st+2&&(Kt=3):Yr.length===2&&Yr[0]===st&&Yr[1]===Ct&&(Kt=5),Kt===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)'):new Error("Mask not supported")}let tr=!1,rr=Tt;if(et){if(et.dims.length!==3&&et.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(c.dims[0]!==et.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(et.dims.length===3){if(Ct!==et.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');rr=et.dims[2]}else{if(Ct!==et.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');rr=et.dims[1]*et.dims[3],tr=!0}}let Lr=jt+Ct,jr=!1;if(at)throw new Error("Key padding mask is not supported");if($t){if($t.dims.length!==4)throw new Error('Input "relative_position_bias" is expected to have 4 dimensions');if($t.dims[0]!==st&&$t.dims[0]!==1||$t.dims[1]!==s.numHeads||$t.dims[2]!==wt||$t.dims[3]!==Lr)throw new Error('Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)')}return{batchSize:st,sequenceLength:wt,pastSequenceLength:jt,kvSequenceLength:Ct,totalSequenceLength:Lr,maxSequenceLength:Lt,inputHiddenSize:0,hiddenSize:Tt,vHiddenSize:rr,headSize:Ht,vHeadSize:Math.floor(rr/s.numHeads),numHeads:s.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:s.maskFilterValue,maskType:Kt,scale:s.scale,broadcastResPosBias:jr,passPastInKv:tr,qkvFormat:Gt}},kl=a=>we({...a}),El=we({perm:[0,2,1,3]}),um=(a,s,c,d,et,g,at)=>{let $t=[d,et,g],vt=M$1.size($t),b=[{type:12,data:vt},{type:12,data:at},{type:12,data:g}],pt=st=>{let wt=K("qkv_with_bias",s.dataType,$t),Tt=U$1("qkv",s.dataType,$t),Ct=U$1("bias",c.dataType,$t),jt=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${st.registerUniforms(jt).declareVariables(Tt,Ct,wt)}
  ${st.mainStart()}
    ${st.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return a.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:$t,dataType:s.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(vt/64)},programUniforms:b}),getShaderSource:pt},{inputs:[s,c],outputs:[-1]})[0]},$o=(a,s,c,d,et,g,at,$t)=>{let vt=g;if(at){if(d===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return vt=um(a,g,at,s,d,c*et,$t),vt=vt.reshape([s,d,c,et]),a.compute(xt(vt,El.perm),{inputs:[vt],outputs:[-1]})[0]}else return g.dims.length===3&&(vt=g.reshape([s,d,c,et])),a.compute(xt(vt,El.perm),{inputs:[vt],outputs:[-1]})[0]},Ol=(a,s)=>{let c=sm(a.inputs,s),d=a.inputs[0],et=lt(a.inputs,1),g=lt(a.inputs,2),at=lt(a.inputs,3),$t=lt(a.inputs,4),vt=lt(a.inputs,5),b=lt(a.inputs,6),pt=lt(a.inputs,7);if(d.dims.length===5)throw new Error("Packed QKV is not implemented");if((et==null?void 0:et.dims.length)===5)throw new Error("Packed KV is not implemented");let st=et&&g&&et.dims.length===4&&g.dims.length===4,wt=$o(a,c.batchSize,c.numHeads,c.sequenceLength,c.headSize,d,at,0);if(st)return Xn(a,wt,et,g,$t,void 0,b,pt,vt,c,s);if(!et||!g)throw new Error("key and value must be provided");let Tt=$o(a,c.batchSize,c.numHeads,c.kvSequenceLength,c.headSize,et,at,c.hiddenSize),Ct=$o(a,c.batchSize,c.numHeads,c.kvSequenceLength,c.vHeadSize,g,at,2*c.hiddenSize);Xn(a,wt,Tt,Ct,$t,void 0,b,pt,vt,c,s)}}),lm,dm,cm,pm,mm,fm,hm,gm,Rl,zl=j(()=>{ye(),xe(),_e(),lm=a=>{if(!a||a.length<1)throw new Error("Too few inputs");if(a[0].dataType!==1&&a[0].dataType!==10)throw new Error("Input type must be float or float16.");if(a.length>=2){let s=a[0].dims.length*2===a[1].dims[0];if(a.length===4&&(s=a[3].dims[0]*2===a[1].dims[0]),!s)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},dm=(a,s,c)=>{let d="";for(let et=s-1;et>=0;--et)d+=`
            k = i32(${a.indicesGet("indices",et)}) - ${fe("uniforms.pads",et,c)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${fe("uniforms.x_shape",et,s)})) {
              break;
            }
            offset += k * i32(${fe("uniforms.x_strides",et,s)});
        `;return`
          value = ${a.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${d}
            value = x[offset];
          }
      `},cm=(a,s,c)=>{let d="";for(let et=s-1;et>=0;--et)d+=`
                k = i32(${a.indicesGet("indices",et)}) - ${fe("uniforms.pads",et,c)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",et,s)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${fe("uniforms.x_shape",et,s)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${fe("uniforms.x_strides",et,s)});
            `;return`
              var offset = 0;
              var k = 0;
              ${d}
              value = x[offset];
          `},pm=(a,s,c)=>{let d="";for(let et=s-1;et>=0;--et)d+=`
                k = i32(${a.indicesGet("indices",et)}) - ${fe("uniforms.pads",et,c)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${fe("uniforms.x_shape",et,s)})) {
                  k = i32(${fe("uniforms.x_shape",et,s)}) - 1;
                }
                offset += k * i32(${fe("uniforms.x_strides",et,s)});
            `;return`
              var offset = 0;
              var k = 0;
              ${d}
              value = x[offset];
          `},mm=(a,s,c)=>{let d="";for(let et=s-1;et>=0;--et)d+=`
                k = i32(${a.indicesGet("indices",et)}) - ${fe("uniforms.pads",et,c)};
                if (k < 0)  {
                  k += i32(${fe("uniforms.x_shape",et,s)}]);
                }
                if (k >= i32(${fe("uniforms.x_shape",et,s)})) {
                  k -= i32(${fe("uniforms.x_shape",et,s)});
                }
                offset += k * i32(${fe("uniforms.x_strides",et,s)});
            `;return`
              var offset = 0;
              var k = 0;
              ${d}
              value = x[offset];
          `},fm=(a,s,c)=>{switch(c.mode){case 0:return dm(a,s,c.pads.length);case 1:return cm(a,s,c.pads.length);case 2:return pm(a,s,c.pads.length);case 3:return mm(a,s,c.pads.length);default:throw new Error("Invalid mode")}},hm=(a,s)=>{let c=M$1.padShape(a[0].dims.slice(),s.pads),d=a[0].dims,et=M$1.size(c),g=[{type:12,data:et},{type:6,data:s.pads}];s.mode===0&&g.push({type:a[0].dataType,data:s.value}),g.push(...X(a[0].dims,c));let at=["rank"],$t=vt=>{let b=K("output",a[0].dataType,c.length),pt=U$1("x",a[0].dataType,d.length),st=pt.type.value,wt=fm(b,d.length,s),Tt=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:s.pads.length}];return s.mode===0&&Tt.push({name:"constant_value",type:st}),`
            ${vt.registerUniforms(Tt).declareVariables(pt,b)}
            ${vt.mainStart()}
            ${vt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${b.offsetToIndices("global_idx")};

            var value = ${st}(0);
            ${wt}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${s.mode}`,inputDependencies:at},getRunData:()=>({outputs:[{dims:c,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(M$1.size(c)/64)},programUniforms:g}),getShaderSource:$t}},gm=(a,s)=>{if(a.length>1){let c=a[1].getBigInt64Array(),d=a.length>=3&&a[2].data?a[2].getFloat32Array()[0]:0,et=a[0].dims.length,g=new Int32Array(2*et).fill(0);if(a.length>=4){let $t=a[3].getBigInt64Array();for(let vt=0;vt<$t.length;vt++)g[Number($t[vt])]=Number(c[vt]),g[Number($t[vt])+et]=Number(c[vt+$t.length])}else c.forEach(($t,vt)=>g[Number(vt)]=Number($t));let at=[];return g.forEach($t=>at.push($t)),{mode:s.mode,value:d,pads:at}}else return s},Rl=(a,s)=>{lm(a.inputs);let c=gm(a.inputs,s);a.compute(hm(a.inputs,c),{inputs:[0]})}}),si,Bl,Dl,Ml,Ul,ym,bm,Wl,Nl,Vl,Hl,Gl,Ll,Fl,ql,jl,Kl,Yl,Xl,Zl=j(()=>{_t(),ye(),xe(),_e(),si=a=>{if(ke.webgpu.validateInputContent&&(!a||a.length!==1))throw new Error("Pool ops requires 1 input.")},Bl=(a,s,c)=>{let d=s.format==="NHWC",et=a.dims.slice();d&&et.splice(1,0,et.pop());let g=Object.hasOwnProperty.call(s,"dilations"),at=s.kernelShape.slice(),$t=s.strides.slice(),vt=g?s.dilations.slice():[],b=s.pads.slice();pr.adjustPoolAttributes(c,et,at,$t,vt,b);let pt=pr.computePoolOutputShape(c,et,$t,vt,at,b,s.autoPad),st=Object.assign({},s);g?Object.assign(st,{kernelShape:at,strides:$t,pads:b,dilations:vt,cacheKey:s.cacheKey}):Object.assign(st,{kernelShape:at,strides:$t,pads:b,cacheKey:s.cacheKey});let wt=pt.slice();return wt.push(wt.splice(1,1)[0]),[st,d?wt:pt]},Dl=(a,s)=>{let c=s.format==="NHWC",d=M$1.size(a),et=M$1.size(s.kernelShape),g=[{type:12,data:d},{type:12,data:et}],at=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(s.kernelShape.length<=2){let $t=s.kernelShape[s.kernelShape.length-1],vt=s.strides[s.strides.length-1],b=s.pads[s.pads.length/2-1],pt=s.pads[s.pads.length-1],st=!!(b+pt);g.push({type:12,data:$t},{type:12,data:vt},{type:12,data:b},{type:12,data:pt}),at.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let wt=!1;if(s.kernelShape.length===2){let Tt=s.kernelShape[s.kernelShape.length-2],Ct=s.strides[s.strides.length-2],jt=s.pads[s.pads.length/2-2],Lt=s.pads[s.pads.length-2];wt=!!(jt+Lt),g.push({type:12,data:Tt},{type:12,data:Ct},{type:12,data:jt},{type:12,data:Lt}),at.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[g,at,!0,st,wt]}else{if(c)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let $t=M$1.computeStrides(s.kernelShape);g.push({type:12,data:$t},{type:12,data:s.pads},{type:12,data:s.strides}),at.push({name:"kernelStrides",type:"u32",length:$t.length},{name:"pads",type:"u32",length:s.pads.length},{name:"strides",type:"u32",length:s.strides.length});let vt=s.pads.reduce((b,pt)=>b+pt);return[g,at,!!vt,!1,!1]}},Ml=(a,s,c,d,et,g,at,$t,vt,b,pt,st)=>{let wt=et.format==="NHWC",Tt=s.type.value,Ct=K("output",s.type.tensor,d);if(et.kernelShape.length<=2){let jt="",Lt="",Ht="",Gt=c-(wt?2:1);if(pt?jt=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${Gt}] = indices[${Gt}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${Gt}] < 0 || xIndices[${Gt}]
                      >= uniforms.x_shape[${Gt}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${s.indicesToOffset("xIndices")}];
                  ${g}
                }`:jt=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${Gt}] = indices[${Gt}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${s.indicesToOffset("xIndices")}];
                  ${g}
                }`,et.kernelShape.length===2){let Kt=c-(wt?3:2);st?Lt=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${Kt}] = indices[${Kt}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${Kt}] < 0 || xIndices[${Kt}] >= uniforms.x_shape[${Kt}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:Lt=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${Kt}] = indices[${Kt}] * uniforms.sh - uniforms.phStart + j;
                `,Ht=`
              }
            `}return`
            ${a.registerUniforms(vt).declareVariables(s,Ct)}

            ${a.mainStart()}
              ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${Ct.offsetToIndices("global_idx")};
              var xIndices = ${Ct.offsetToIndices("global_idx")};

              var value = ${Tt}(${$t});
              var pad = 0;
              ${Lt}
              ${jt}
              ${Ht}
              ${at}

              output[global_idx] = value;
            }`}else{if(wt)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let jt=et.kernelShape.length,Lt=et.pads.length,Ht="";return b?Ht=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${s.indicesToOffset("xIndices")}];
                ${g}
              }`:Ht=`
              }
              let x_val = x[${s.indicesToOffset("xIndices")}];
              ${g}
            `,`
            ${a.registerUniforms(vt).declareVariables(s,Ct)}

            ${a.mainStart()}
              ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${Ct.offsetToIndices("global_idx")};
              var xIndices = ${Ct.offsetToIndices("global_idx")};

              var offsets: array<u32, ${jt}>;

              var value = ${Tt}(${$t});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${jt-1}u; j++) {
                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",jt)};
                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",jt)};
                }
                offsets[${jt-1}] = offset;

                isPad = false;
                for (var j = ${c-jt}u; j < ${c}u; j++) {
                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${c-jt}u`,jt)}
                    + offsets[j - ${c-jt}u] - ${fe("uniforms.pads","j - 2u",Lt)};
                  ${Ht}
              }
              ${at}

              output[global_idx] = value;
            }`}},Ul=a=>`${a.format};${a.ceilMode};${a.autoPad};${a.kernelShape.length}`,ym=a=>`${Ul(a)};${a.countIncludePad}`,bm=a=>`${Ul(a)};${a.storageOrder};${a.dilations}`,Wl=a=>({format:a.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][a.auto_pad],ceilMode:a.ceil_mode,kernelShape:a.kernel_shape,strides:a.strides,pads:a.pads}),Nl=(a,s,c,d)=>{let[et,g]=Bl(s,d,c),at=U$1("x",s.dataType,s.dims.length),$t=at.type.value,vt="value += x_val;",b="";et.countIncludePad?b+=`value /= ${$t}(uniforms.kernelSize);`:b+=`value /= ${$t}(i32(uniforms.kernelSize) - pad);`;let[pt,st,wt,Tt,Ct]=Dl(g,et);pt.push(...X(s.dims,g));let jt=["rank"];return{name:a,shaderCache:{hint:`${d.cacheKey};${wt};${Tt};${Ct}`,inputDependencies:jt},getRunData:()=>({outputs:[{dims:g,dataType:s.dataType}],dispatchGroup:{x:Math.ceil(M$1.size(g)/64)},programUniforms:pt}),getShaderSource:Lt=>Ml(Lt,at,s.dims.length,g.length,et,vt,b,0,st,wt,Tt,Ct)}},Vl=a=>{let s=a.count_include_pad!==0,c=Wl(a);if(c.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let d={countIncludePad:s,...c,cacheKey:""};return{...d,cacheKey:ym(d)}},Hl=(a,s)=>{si(a.inputs),a.compute(Nl("AveragePool",a.inputs[0],!1,s))},Gl={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},Ll=a=>{let s=a.format;return{format:s,...Gl,cacheKey:s}},Fl=(a,s)=>{si(a.inputs),a.compute(Nl("GlobalAveragePool",a.inputs[0],!0,s))},ql=(a,s,c,d)=>{let[et,g]=Bl(s,d,c),at=`
      value = max(x_val, value);
    `,$t="",vt=U$1("x",s.dataType,s.dims.length),b=["rank"],[pt,st,wt,Tt,Ct]=Dl(g,et);return pt.push(...X(s.dims,g)),{name:a,shaderCache:{hint:`${d.cacheKey};${wt};${Tt};${Ct}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:g,dataType:s.dataType}],dispatchGroup:{x:Math.ceil(M$1.size(g)/64)},programUniforms:pt}),getShaderSource:jt=>Ml(jt,vt,s.dims.length,g.length,et,at,$t,s.dataType===10?-65504:-1e5,st,wt,Tt,Ct)}},jl=(a,s)=>{si(a.inputs),a.compute(ql("MaxPool",a.inputs[0],!1,s))},Kl=a=>{let s=a.storage_order,c=a.dilations,d=Wl(a);if(s!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(d.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let et={storageOrder:s,dilations:c,...d,cacheKey:""};return{...et,cacheKey:bm(et)}},Yl=a=>{let s=a.format;return{format:s,...Gl,cacheKey:s}},Xl=(a,s)=>{si(a.inputs),a.compute(ql("GlobalMaxPool",a.inputs[0],!0,s))}}),wm,$m,Ql,Jl=j(()=>{_t(),ye(),_e(),wm=(a,s,c)=>{let d=a===s,et=a<s&&c<0,g=a>s&&c>0;if(d||et||g)throw new Error("Range these inputs' contents are invalid.")},$m=(a,s,c,d)=>{let et=Math.abs(Math.ceil((s-a)/c)),g=[et],at=et,$t=[{type:12,data:at},{type:d,data:a},{type:d,data:c},...X(g)],vt=b=>{let pt=K("output",d,g.length),st=pt.type.value,wt=[{name:"outputSize",type:"u32"},{name:"start",type:st},{name:"delta",type:st}];return`
        ${b.registerUniforms(wt).declareVariables(pt)}
        ${b.mainStart()}
        ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${st}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${d}`},getShaderSource:vt,getRunData:()=>({outputs:[{dims:g,dataType:d}],dispatchGroup:{x:Math.ceil(at/64)},programUniforms:$t})}},Ql=a=>{let s=0,c=0,d=0;a.inputs[0].dataType===6?(s=a.inputs[0].getInt32Array()[0],c=a.inputs[1].getInt32Array()[0],d=a.inputs[2].getInt32Array()[0]):a.inputs[0].dataType===1&&(s=a.inputs[0].getFloat32Array()[0],c=a.inputs[1].getFloat32Array()[0],d=a.inputs[2].getFloat32Array()[0]),ke.webgpu.validateInputContent&&wm(s,c,d),a.compute($m(s,c,d,a.inputs[0].dataType),{inputs:[]})}}),_m,xm,Sm,Cm,Im,Tm,Am,Em,km,Om,Pm,ed,Rm,zm,Bm,Dm,Mm,td,rd,nd=j(()=>{ye(),xe(),Ze(),_e(),_m=(a,s)=>{if(a.every(c=>c>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),a.length>0){if(s.mode==="linear"){if(!(a.length===2||a.length===3||a.length===4&&a[0]===1&&a[1]===1||a.length===4&&a[0]===1&&a[3]===1||a.length===5&&a[0]===1&&a[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(s.mode==="cubic"&&!(a.length===2||a.length===4&&a[0]===1&&a[1]===1||a.length===4&&a[0]===1&&a[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},xm=(a,s,c)=>{s.every(et=>et>=0&&et<c||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let d=new Array(c).fill(1);return s.forEach((et,g)=>d[et]=a[g]),d},Sm=(a,s,c,d,et,g)=>{let[at,$t,vt]=c>10?[1,2,3]:[-1,a.length>1?1:-1,-1],b=a[0].dims.length;if(at>0&&a.length>at&&a[at].dims.length>0)a[at].getFloat32Array().forEach(pt=>g.push(pt));else if(s.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if($t>0&&a.length>$t&&a[$t].dims.length>0){if(a[$t].getFloat32Array().forEach(pt=>d.push(pt)),d.length!==0&&d.length!==b&&c>=18&&d.length!==s.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");_m(d,s),s.axes.length>0&&xm(d,s.axes,b).forEach((pt,st)=>d[st]=pt)}if(vt>0&&a.length>vt&&(a[vt].getBigInt64Array().forEach(pt=>et.push(Number(pt))),et.length!==b||c>=18&&et.length===s.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(s.axes.length>0){if(d.length!==s.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(et.length!==s.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof d<"u"&&typeof et<"u"&&d.length>0&&et.length>b)throw new Error("Resize requires only of scales or sizes to be specified")},Cm=(a,s)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${s} { `+(()=>{switch(a){case"asymmetric":return`return ${s}(xResized) / ${s}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${s}(xResized) + 0.5) / ${s}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${s}(xResized) + 0.5) / ${s}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating
                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
                    // offset-by-one error later in floor().
                    let whole = ${s}(xResized * (lengthOriginal - 1) / (lengthResized - 1));
                    let fract =
                        ${s}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${s}(lengthResized - 1);
                    return whole + fract;
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${s}(roiStart) * ${s}(lengthOriginal - 1) +
                        (${s}(xResized) * ${s}(roiEnd - roiStart) * ${s}(lengthOriginal - 1)) /
                        ${s}(lengthResized - 1);
                  } else {
                    return 0.5 * ${s}(roiStart + roiEnd) * ${s}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${s}xScale * ${s}(lengthResized);
                  const adjustment = ${s}(lengthResized) / outputWidth;
                  const center = ${s}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${s}(xResized) + 0.5) / ${s}(xScale)) - 0.5;`;case"half_pixel":return`return ((${s}(xResized) + 0.5) / ${s}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${a} is not supported`)}})()+"}",Im=(a,s,c)=>`fn getNearestPixelFromOriginal(xOriginal: ${c}, isDownSample: bool) -> ${c} {`+(()=>{switch(a){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(s<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${a} is not supported`)}})()+"}",Tm=(a,s,c)=>{let d=new Array(c).fill(0).concat(new Array(c).fill(1)),et=a.length===0?d:a.slice();return s.length>0?(s.forEach((g,at)=>{d[g]=et[at],d[at+c]=et[s.length+at]}),d):et},Am=(a,s,c,d)=>{let et=[];if(c.length>0)if(d.length>0){if(a.forEach(g=>et.push(g)),Math.max(...d)>a.length)throw new Error("axes is out of bound");d.forEach((g,at)=>et[g]=c[at])}else c.forEach(g=>et.push(g));else{if(s.length===0)throw new Error("Resize requires either scales or sizes.");et=a.map((g,at)=>Math.round(g*s[at]))}return et},Em=(a,s,c)=>{let d=(()=>{switch(c.keepAspectRatioPolicy){case"not_larger":return c.axes.length>0?Math.min(...c.axes.map(g=>s[g]),Number.MAX_VALUE):Math.min(...s,Number.MAX_VALUE);case"not_smaller":return c.axes.length>0?Math.max(...c.axes.map(g=>s[g]),Number.MIN_VALUE):Math.max(...s,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${c.keepAspectRatioPolicy} is not supported`)}})();s.fill(1,0,s.length);let et=a.slice();return c.axes.length>0?(c.axes.forEach(g=>s[g]=d),c.axes.forEach(g=>et[g]=Math.round(a[g]*s[g]))):(s.fill(d,0,s.length),et.forEach((g,at)=>et[at]=Math.round(g*s[at]))),et},km=(a,s,c,d,et)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${a.type.indices}) -> array<${a.type.value}, ${c.length}> {
      var original_indices: array<${a.type.value}, ${c.length}>;
      for (var i:u32 = 0; i < ${c.length}; i++) {
        var output_index = ${a.indicesGet("output_indices","i")};
        var scale = ${fe("uniforms.scales","i",d)};
        var roi_low = ${fe("uniforms.roi","i",et)};
        var roi_hi = ${fe("uniforms.roi",`i + ${s.length}`,et)};
        if (scale == 1.0) {
          original_indices[i] = ${a.type.value}(output_index);
        } else {
          var input_shape_i = ${fe("uniforms.input_shape","i",s.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",c.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,Om=(a,s,c,d,et,g,at)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${s.type.indices}) -> ${a.type.indices} {
      var input_indices: ${a.type.indices};
      for (var i:u32 = 0; i < ${d.length}; i++) {
        var output_index = ${s.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${fe("uniforms.scales","i",et)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${fe("uniforms.roi","i",g)};
          var roi_hi = ${fe("uniforms.roi",`i + ${c.length}`,g)};
          var input_shape_i = ${fe("uniforms.input_shape","i",c.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",d.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${at} || (original_idx >= 0 && original_idx < ${s.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${s.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${a.indicesSet("input_indices","i"," input_index")}
      }
      return input_indices;
    }`,Pm=(a,s)=>`
    fn checkInputIndices(input_indices: ${a.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${s.length}; i++) {
        var input_index = ${a.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",s.length)}) {
          return false;
        }
      }
      return true;
    }`,ed=(a,s,c,d)=>a.rank>d?`
    ${a.indicesSet("input_indices",s,"channel")};
    ${a.indicesSet("input_indices",c,"batch")};
`:"",Rm=(a,s,c,d,et)=>{let[g,at,$t,vt]=c.length===2?[-1,0,1,-1]:[0,2,3,1],b=a.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${b} {
      var input_indices: ${a.type.indices};
      ${a.indicesSet("input_indices",at,`max(0, min(row, ${c[at]} - 1))`)};
      ${a.indicesSet("input_indices",$t,`max(0, min(col, ${c[$t]} - 1))`)};
      ${ed(a,vt,g,2)}
      return ${a.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${s.type.indices}) -> ${b} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${b} = originalIndices[${at}];
      var col:${b} = originalIndices[${$t}];
      ${d?`if (row < 0 || row > (${c[at]} - 1) || col < 0 || col > (${c[$t]} - 1)) {
        return ${et};
      }`:""};
      row = max(0, min(row, ${c[at]} - 1));
      col = max(0, min(col, ${c[$t]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${c.length>2?`u32(originalIndices[${vt}])`:"0"};
      var batch: u32 =  ${c.length>2?`u32(originalIndices[${g}])`:"0"};
      var x11: ${b} = getInputValue(batch, channel, row1, col1);
      var x12: ${b} = getInputValue(batch, channel, row1, col2);
      var x21: ${b} = getInputValue(batch, channel, row2, col1);
      var x22: ${b} = getInputValue(batch, channel, row2, col2);
      var dx1: ${b} = abs(row - ${b}(row1));
      var dx2: ${b} = abs(${b}(row2) - row);
      var dy1: ${b} = abs(col - ${b}(col1));
      var dy2: ${b} = abs(${b}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},zm=(a,s,c,d,et,g,at,$t,vt,b)=>{let pt=c.length===2,[st,wt]=pt?[0,1]:[2,3],Tt=a.type.value,Ct=jt=>{let Lt=jt===st?"row":"col";return`
      fn ${Lt}CubicInterpolation(input_indices: ${a.type.indices}, output_indices: ${s.type.indices}) -> ${Tt} {
        var output_index = ${s.indicesGet("output_indices",jt)};
        var originalIdx: ${Tt} = getOriginalCoordinateFromResizedCoordinate(output_index, ${et[jt]},
        ${d[jt]}, ${c[jt]}, ${g[jt]}, ${g[jt]} + ${c.length});
        var fractOriginalIdx: ${Tt} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${$t} && (originalIdx < 0 || originalIdx > (${c[jt]} - 1))) {
          return ${vt};
        }
        var data: array<${Tt}, 4> = array<${Tt}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${Lt}: ${Tt} = originalIdx + ${Tt}(i);
          if (${Lt} < 0 || ${Lt} >= ${c[jt]}) {
            ${b?`coefs[i + 1] = 0.0;
                        continue;`:$t?`return ${vt};`:`${Lt} = max(0, min(${Lt}, ${c[jt]} - 1));`};
          }
        var input_indices_copy: ${a.type.indices} = input_indices;
          ${a.indicesSet("input_indices_copy",jt,`u32(${Lt})`)};
          data[i + 1] = ${jt===st?a.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${Ct(st)};
    ${Ct(wt)};
  fn getCubicInterpolationCoefs(s: ${Tt}) -> array<${Tt}, 4> {
    var absS = abs(s);
    var coeffs: array<${Tt}, 4> = array<${Tt}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${Tt} = 1.0 - absS;
    var twoMinusAbsS: ${Tt} = 2.0 - absS;
    var onePlusAbsS: ${Tt} = 1.0 + absS;
    coeffs[0] = ((${at} * onePlusAbsS - 5 * ${at}) * onePlusAbsS + 8 * ${at}) * onePlusAbsS - 4 * ${at};
    coeffs[1] = ((${at} + 2) * absS - (${at} + 3)) * absS * absS + 1;
    coeffs[2] = ((${at} + 2) * oneMinusAbsS - (${at} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${at} * twoMinusAbsS - 5 * ${at}) * twoMinusAbsS + 8 * ${at}) * twoMinusAbsS - 4 * ${at};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${Tt}, 4>, coefs: array<${Tt}, 4>) -> ${Tt} {
    var coefsSum: ${Tt} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${s.type.indices}) -> ${Tt} {
    var input_indices: ${a.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},Bm=(a,s,c,d,et)=>{let[g,at,$t,vt,b]=c.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],pt=a.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${pt} {
      var input_indices: ${a.type.indices};
      ${a.indicesSet("input_indices",at,`max(0, min(depth, ${c[at]} - 1))`)};
      ${a.indicesSet("input_indices",$t,`max(0, min(height, ${c[$t]} - 1))`)};
      ${a.indicesSet("input_indices",vt,`max(0, min(width, ${c[vt]} - 1))`)};
      ${ed(a,b,g,3)}
      return ${a.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${s.type.indices}) -> ${pt} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${pt} = originalIndices[${at}];
      var height:${pt} = originalIndices[${$t}];
      var width:${pt} = originalIndices[${vt}];
      ${d?`if (depth < 0 || depth > (${c[at]} - 1) || height < 0 || height > (${c[$t]} - 1) || width < 0 || (width > ${c[vt]} - 1)) {
      return ${et};
        }`:""};

    depth = max(0, min(depth, ${c[at]} - 1));
      height = max(0, min(height, ${c[$t]} - 1));
      width = max(0, min(width, ${c[vt]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${c.length>3?`u32(originalIndices[${b}])`:"0"};
      var batch: u32 =  ${c.length>3?`u32(originalIndices[${g}])`:"0"};

      var x111: ${pt} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${pt} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${pt} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${pt} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${pt} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${pt} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${pt} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${pt} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${pt} = abs(depth - ${pt}(depth1));
      var dx2: ${pt} = abs(${pt}(depth2) - depth);
      var dy1: ${pt} = abs(height - ${pt}(height1));
      var dy2: ${pt} = abs(${pt}(height2) - height);
      var dz1: ${pt} = abs(width - ${pt}(width1));
      var dz2: ${pt} = abs(${pt}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},Dm=(a,s,c,d,et,g)=>{let at=a.dims,$t=Tm(g,s.axes,at.length),vt=Am(at,d,et,s.axes),b=d.slice();d.length===0&&(b=at.map((Gt,Kt)=>Gt===0?1:vt[Kt]/Gt),s.keepAspectRatioPolicy!=="stretch"&&(vt=Em(at,b,s)));let pt=K("output",a.dataType,vt.length),st=U$1("input",a.dataType,at.length),wt=M$1.size(vt),Tt=at.length===vt.length&&at.every((Gt,Kt)=>Gt===vt[Kt]),Ct=s.coordinateTransformMode==="tf_crop_and_resize",jt=s.extrapolationValue,Lt=st.type.value,Ht=Gt=>`
      ${Tt?"":`
      ${Cm(s.coordinateTransformMode,Lt)};
      ${(()=>{switch(s.mode){case"nearest":return`
              ${Pm(st,at)};
              ${Im(s.nearestMode,c,Lt)};
              ${Om(st,pt,at,vt,b.length,$t.length,Ct)};
              `;case"linear":return`
              ${km(pt,at,vt,b.length,$t.length)};
              ${(()=>{if(at.length===2||at.length===4)return`${Rm(st,pt,at,Ct,jt)}`;if(at.length===3||at.length===5)return`${Bm(st,pt,at,Ct,jt)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(at.length===2||at.length===4)return`${zm(st,pt,at,vt,b,$t,s.cubicCoeffA,Ct,s.extrapolationValue,s.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${Gt.registerUniform("output_size","u32").registerUniform("scales","f32",b.length).registerUniform("roi","f32",$t.length).declareVariables(st,pt)}
      ${Gt.mainStart()}
        ${Gt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${Tt?"output[global_idx] = input[global_idx];":`
        let output_indices = ${pt.offsetToIndices("global_idx")};
        var input_indices: ${st.type.indices};
        ${(()=>{switch(s.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${st.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${s.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${at.length===2||at.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${s.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${s.cacheKey}|${c}|${b.length>0?b:""}|${et.length>0?et:""}|${$t.length>0?$t:""}|${Tt}|${at}`,inputDependencies:["rank"]},getShaderSource:Ht,getRunData:()=>({outputs:[{dims:vt,dataType:a.dataType}],dispatchGroup:{x:Math.ceil(wt/64)},programUniforms:[{type:12,data:wt},{type:1,data:b},{type:1,data:$t},...X(at,vt)]})}},Mm=a=>{let s=a.customDataBuffer;return new Uint32Array(s,s.byteOffset,1)[0]},td=(a,s)=>{let c=[],d=[],et=[],g=Mm(a);if(s.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");Sm(a.inputs,s,g,c,d,et),a.compute(Dm(a.inputs[0],s,g,c,d,et),{inputs:[0]})},rd=a=>{let s=a.antialias,c=a.axes,d=a.coordinateTransformMode,et=a.cubicCoeffA,g=a.excludeOutside!==0,at=a.extrapolationValue,$t=a.keepAspectRatioPolicy,vt=a.mode,b=a.nearestMode===""?"simple":a.nearestMode;return we({antialias:s,axes:c,coordinateTransformMode:d,cubicCoeffA:et,excludeOutside:g,extrapolationValue:at,keepAspectRatioPolicy:$t,mode:vt,nearestMode:b})}}),Um,Wm,id,od=j(()=>{ye(),xe(),Ze(),_e(),Um=(a,s)=>{let[c,d,et,g]=a,{numHeads:at,rotaryEmbeddingDim:$t}=s;if(c.dims.length!==3&&c.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${c.dims.length}`);if(!M$1.areEqual(d.dims,[])&&!M$1.areEqual(d.dims,[1])&&d.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${d.dims.length}`);if(et.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${et.dims.length}`);if(g.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${g.dims.length}`);if(!M$1.areEqual(et.dims,g.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if($t>0&&at===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let vt=c.dims[0],b=c.dims[c.dims.length-2],pt=et.dims[0],st=M$1.sizeFromDimension(c.dims,1)/b,wt=$t===0?et.dims[1]*2:st/at;if($t>wt)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(d.dims.length===2){if(vt!==d.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${d.dims[0]}`);if(b!==d.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${d.dims[1]}`)}if(wt/2!==et.dims[1]&&$t/2!==et.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${et.dims[1]}`);if(b>pt)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Wm=(a,s)=>{let{interleaved:c,numHeads:d,rotaryEmbeddingDim:et,scale:g}=s,at=a[0].dims[0],$t=M$1.sizeFromDimension(a[0].dims,1),vt=a[0].dims[a[0].dims.length-2],b=$t/vt,pt=a[2].dims[1],st=et===0?pt*2:b/d,wt=new Array(at,vt,b/st,st-pt),Tt=M$1.computeStrides(wt),Ct=[{type:1,data:g},{type:12,data:wt},{type:12,data:Tt},...a[0].dims.length===3?new Array({type:12,data:[$t,b,st,1]}):[],...a[0].dims.length===4?new Array({type:12,data:[$t,st,vt*st,1]}):[],...X(a[0].dims,a[1].dims,a[2].dims,a[3].dims,a[0].dims)],jt=Lt=>{let Ht=U$1("input",a[0].dataType,a[0].dims.length),Gt=U$1("position_ids",a[1].dataType,a[1].dims.length),Kt=U$1("cos_cache",a[2].dataType,a[2].dims.length),tr=U$1("sin_cache",a[3].dataType,a[3].dims.length),rr=K("output",a[0].dataType,a[0].dims.length);return Lt.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:wt.length},{name:"global_strides",type:"u32",length:Tt.length},{name:"input_output_strides",type:"u32",length:Tt.length}]),`
        ${Lt.declareVariables(Ht,Gt,Kt,tr,rr)}

        ${Lt.mainStart(mr)}
          let half_rotary_emb_dim = uniforms.${Kt.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${Lt.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${Gt.broadcastedIndicesToOffset("bsnh.xy",K("",Gt.type.tensor,2))};
            let position_id =
                u32(${Gt.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${c});
            let j = i + select(half_rotary_emb_dim, 1, ${c});
            let re = ${Ht.getByOffset("i")} * ${Kt.get("position_id","bsnh[3]")} -
                ${Ht.getByOffset("j")} * ${tr.get("position_id","bsnh[3]")};
            ${rr.setByOffset("i","re")}
            let im = ${Ht.getByOffset("i")} * ${tr.get("position_id","bsnh[3]")} +
                ${Ht.getByOffset("j")} * ${Kt.get("position_id","bsnh[3]")};
            ${rr.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${rr.setByOffset("k",Ht.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:we({interleaved:c}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:jt,getRunData:()=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(M$1.size(wt)/mr)},programUniforms:Ct})}},id=(a,s)=>{Um(a.inputs,s),a.compute(Wm(a.inputs,s))}}),Nm,Vm,ad,sd=j(()=>{ye(),xe(),_e(),Nm=a=>{if(!a||a.length<3)throw new Error("layerNorm requires at least 3 inputs.");let s=a[0],c=a[1],d=a[2];if(s.dataType!==c.dataType||s.dataType!==d.dataType)throw new Error("All inputs must have the same data type");if(s.dims.length!==3&&s.dims.length!==2)throw new Error("Input must be 2D or 3D");if(c.dims.length!==3&&c.dims.length!==2)throw new Error("Skip must be 2D or 3D");let et=s.dims[s.dims.length-1],g=s.dims[s.dims.length-2];if(c.dims[c.dims.length-1]!==et)throw new Error("Skip must have the same hidden size as input");if(c.dims[c.dims.length-2]!==g)throw new Error("Skip must have the same sequence length as input");if(d.dims.length!==1)throw new Error("Gamma must be 1D");if(d.dims[d.dims.length-1]!==et)throw new Error("Gamma must have the same hidden size as input");if(a.length>3){let at=a[3];if(at.dims.length!==1)throw new Error("Beta must be 1D");if(at.dims[at.dims.length-1]!==et)throw new Error("Beta must have the same hidden size as input")}if(a.length>4){let at=a[4];if(at.dims.length!==1)throw new Error("Bias must be 1D");if(at.dims[at.dims.length-1]!==et)throw new Error("Bias must have the same hidden size as input")}},Vm=(a,s,c,d)=>{let et=s.simplified,g=a[0].dims,at=M$1.size(g),$t=g,vt=at,b=g.slice(-1)[0],pt=d?g.slice(0,-1).concat(1):[],st=!et&&a.length>3,wt=a.length>4,Tt=d&&c>1,Ct=d&&c>2,jt=c>3,Lt=Ue(b),Ht=[{type:12,data:vt},{type:12,data:Lt},{type:12,data:b},{type:1,data:s.epsilon}],Gt=tr=>{let rr=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],Lr=[U$1("x",a[0].dataType,a[0].dims,Lt),U$1("skip",a[1].dataType,a[1].dims,Lt),U$1("gamma",a[2].dataType,a[2].dims,Lt)];st&&Lr.push(U$1("beta",a[3].dataType,a[3].dims,Lt)),wt&&Lr.push(U$1("bias",a[4].dataType,a[4].dims,Lt)),Lr.push(K("output",a[0].dataType,$t,Lt)),Tt&&Lr.push(K("mean_output",1,pt)),Ct&&Lr.push(K("inv_std_output",1,pt)),jt&&Lr.push(K("input_skip_bias_sum",a[0].dataType,$t,Lt));let jr=De(a[0].dataType);return`

      ${tr.registerUniforms(rr).declareVariables(...Lr)}

      ${tr.mainStart()}
        ${tr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}
        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        let offset = global_idx * hidden_size_vectorized;
        var sum = ${At("f32",Lt)};
        var squareSum = ${At("f32",Lt)};
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${wt?"bias[i]":jr+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${jt?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${fr(jr,Lt,"value")};
          sum += f32_value;
          squareSum += f32_value * f32_value;
        }
        let mean = ${Et("sum",Lt)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Et("squareSum",Lt)} / f32(uniforms.hidden_size) ${et?"":"- mean * mean"} + uniforms.epsilon);
        ${Tt?"mean_output[global_idx] = mean;":""}
        ${Ct?"inv_std_output[global_idx] = inv_std_dev;":""}
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          output[offset + i] = (output[offset + i] ${et?"":`- ${jr}(mean)`}) * ${jr}(inv_std_dev) * gamma[i] ${st?"+ beta[i]":""};
        }
      }`},Kt=[{dims:$t,dataType:a[0].dataType}];return c>1&&Kt.push({dims:pt,dataType:1}),c>2&&Kt.push({dims:pt,dataType:1}),c>3&&Kt.push({dims:g,dataType:a[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${Lt};${Tt};${Ct};${jt}`,inputDependencies:a.map((tr,rr)=>"type")},getShaderSource:Gt,getRunData:()=>({outputs:Kt,dispatchGroup:{x:Math.ceil(vt/b/64)},programUniforms:Ht})}},ad=(a,s)=>{Nm(a.inputs);let c=[0];a.outputCount>1&&c.push(-3),a.outputCount>2&&c.push(-3),a.outputCount>3&&c.push(3),a.compute(Vm(a.inputs,s,a.outputCount,!1),{outputs:c})}}),Hm,ui,Gm,ud,Lm,Fm,ld,dd,cd=j(()=>{ye(),xe(),Ze(),_e(),Hm=(a,s)=>{if(!a||a.length<1)throw new Error("too few inputs");if(s.axes.length!==0){if(s.axes.length!==s.starts.length||s.axes.length!==s.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(s.starts.length!==s.ends.length)throw new Error("starts and ends must have the same length");a.slice(1).forEach((c,d)=>{if(a[d+1].dataType!==6&&a[d+1].dataType!==7)throw new Error(`Input ${d} must be an array of int32 or int64`)})},ui=(a,s)=>{let c=[];if(a.length>s)if(a[s].dataType===7)a[s].getBigInt64Array().forEach(d=>c.push(Number(d)));else if(a[s].dataType===6)a[s].getInt32Array().forEach(d=>c.push(Number(d)));else throw new Error(`Input ${s} must be an array of int32 or int64`);return c},Gm=(a,s)=>{if(a.length>1){let c=ui(a,1),d=ui(a,2),et=ui(a,3);return et.length===0&&(et=[...Array(a[0].dims.length).keys()]),we({starts:c,ends:d,axes:et})}else return s},ud=(a,s,c,d,et)=>{let g=a;return a<0&&(g+=c[d[s]]),et[s]<0?Math.max(0,Math.min(g,c[d[s]]-1)):Math.max(0,Math.min(g,c[d[s]]))},Lm=(a,s,c)=>`fn calculateInputIndices(output_indices: ${s.type.indices}) -> ${a.type.indices} {
          var input_indices: ${a.type.indices};
          var carry = 0u;
          for (var i = ${c.length}; i >= 0; i--) {
            let input_shape_i = ${fe("uniforms.input_shape","i",c.length)};
            let steps_i = ${fe("uniforms.steps","i",c.length)};
            let signs_i = ${fe("uniforms.signs","i",c.length)};
            let starts_i = ${fe("uniforms.starts","i",c.length)};
            var output_index = ${s.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${a.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,Fm=(a,s)=>{let c=a[0].dims,d=M$1.size(c),et=s.axes.length>0?M$1.normalizeAxes(s.axes,c.length):[...Array(c.length).keys()],g=ui(a,4);g.forEach(Ht=>Ht!==0||(()=>{throw new Error("step cannot be 0")})),g.length===0&&(g=Array(et.length).fill(1));let at=s.starts.map((Ht,Gt)=>ud(Ht,Gt,c,et,g)),$t=s.ends.map((Ht,Gt)=>ud(Ht,Gt,c,et,g));if(et.length!==at.length||et.length!==$t.length)throw new Error("start, ends and axes should have the same number of elements");if(et.length!==c.length)for(let Ht=0;Ht<c.length;++Ht)et.includes(Ht)||(at.splice(Ht,0,0),$t.splice(Ht,0,c[Ht]),g.splice(Ht,0,1));let vt=g.map(Ht=>Math.sign(Ht));g.forEach((Ht,Gt,Kt)=>{if(Ht<0){let tr=($t[Gt]-at[Gt])/Ht,rr=at[Gt],Lr=rr+tr*g[Gt];at[Gt]=Lr,$t[Gt]=rr,Kt[Gt]=-Ht}});let b=c.slice(0);et.forEach((Ht,Gt)=>{b[Ht]=Math.ceil(($t[Ht]-at[Ht])/g[Ht])});let pt={dims:b,dataType:a[0].dataType},st=K("output",a[0].dataType,b.length),wt=U$1("input",a[0].dataType,a[0].dims.length),Tt=M$1.size(b),Ct=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:at.length},{name:"signs",type:"i32",length:vt.length},{name:"steps",type:"u32",length:g.length}],jt=[{type:12,data:Tt},{type:12,data:at},{type:6,data:vt},{type:12,data:g},...X(a[0].dims,b)],Lt=Ht=>`
      ${Ht.registerUniforms(Ct).declareVariables(wt,st)}
        ${Lm(wt,st,c)}
        ${Ht.mainStart()}
          ${Ht.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${st.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${st.setByOffset("global_idx",wt.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${vt.length}_${at.length}_${g.length}`,inputDependencies:["rank"]},getShaderSource:Lt,getRunData:()=>({outputs:[pt],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:jt})}},ld=(a,s)=>{Hm(a.inputs,s);let c=Gm(a.inputs,s);a.compute(Fm(a.inputs,c),{inputs:[0]})},dd=a=>{let s=a.starts,c=a.ends,d=a.axes;return we({starts:s,ends:c,axes:d})}}),qm,jm,pd,md,fd=j(()=>{ye(),xe(),Ze(),_e(),qm=a=>{if(!a||a.length!==1)throw new Error("Softmax op requires 1 input.")},jm=(a,s)=>{let c=a.dims,d=M$1.size(c),et=64,g=s.axis;if(g<0&&(g=c.length+g),g<c.length-1)throw new Error("softmax only supports last axis for now.");let at=c[g],$t=d/at,vt=Ue(at),b=at/vt,pt=(Lt,Ht)=>Ht===4?`max(max(${Lt}.x, ${Lt}.y), max(${Lt}.z, ${Lt}.w))`:Ht===2?`max(${Lt}.x, ${Lt}.y)`:Ht===3?`max(max(${Lt}.x, ${Lt}.y), ${Lt}.z)`:Lt,st=U$1("x",a.dataType,a.dims,vt),wt=K("result",a.dataType,a.dims,vt),Tt=st.type.value,Ct=De(a.dataType)==="f32"?`var threadMax = ${Tt}(-3.402823e+38f);`:`var threadMax = ${Tt}(-65504.0h);`,jt=Lt=>`
      var<workgroup> rowMaxShared : ${Tt};
      var<workgroup> rowSumShared : ${Tt};
      var<workgroup> threadShared : array<${Tt}, ${et}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${Tt} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${Tt}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${Lt.registerUniform("packedCols","i32").declareVariables(st,wt)}
      ${Lt.mainStart()}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${et};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${Ct}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${Tt}(${pt("threadShared[0]",vt)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${Tt}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${Tt}(${Et("threadShared[0]",vt)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`;return{name:"Softmax",shaderCache:{hint:`${vt}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:c,dataType:a.dataType}],dispatchGroup:{x:$t},programUniforms:[{type:6,data:b}]}),getShaderSource:jt}},pd=(a,s)=>{qm(a.inputs),a.compute(jm(a.inputs[0],s))},md=a=>we({axis:a.axis})}),Km,Ym,Xm,Zm,Qm,hd,gd,yd=j(()=>{ye(),xe(),Ze(),_e(),Km=a=>{if(!a||a.length<1)throw new Error("too few inputs")},Ym=(a,s)=>{let c=[],d=s.numOutputs;return a[1].dims[0]>0&&(a[1].getBigInt64Array().forEach(et=>c.push(Number(et))),d=c.length),we({numOutputs:d,axis:s.axis,splitSizes:c})},Xm=a=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${a}u; i += 1u ) {
    if (index < ${fe("uniforms.size_in_split_axis","i",a)}) {
        return i;
    }
    }
    return ${a}u;
}`,Zm=a=>{let s=a.length,c=[];for(let d=0;d<s;++d){let et=a[d].setByIndices("indices","input[global_idx]");s===1?c.push(et):d===0?c.push(`if (output_number == ${d}u) { ${et} }`):d===s-1?c.push(`else { ${et} }`):c.push(`else if (output_number == ${d}) { ${et} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${a[0].type.indices}, global_idx: u32) {
        ${c.join(`
`)}
      }`},Qm=(a,s)=>{let c=a[0].dims,d=M$1.size(c),et=a[0].dataType,g=M$1.normalizeAxis(s.axis,c.length),at=new Array(s.numOutputs),$t=U$1("input",et,c.length),vt=new Array(s.numOutputs),b=[],pt=[],st=0,wt=[{type:12,data:d}];for(let Ct=0;Ct<s.numOutputs;Ct++){st+=s.splitSizes[Ct],vt[Ct]=st;let jt=c.slice();jt[s.axis]=s.splitSizes[Ct],pt.push(jt),at[Ct]=K(`output${Ct}`,et,jt.length),b.push({dims:pt[Ct],dataType:a[0].dataType})}wt.push({type:12,data:vt},...X(c,...pt));let Tt=Ct=>`
  ${Ct.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",vt.length).declareVariables($t,...at)}
  ${Xm(vt.length)}
  ${Zm(at)}

  ${Ct.mainStart()}
    ${Ct.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${$t.offsetToIndices("global_idx")};
    var index = ${$t.indicesGet("indices",g)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",vt.length)};
      ${$t.indicesSet("indices",g,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:s.cacheKey,inputDependencies:["rank"]},getShaderSource:Tt,getRunData:()=>({outputs:b,dispatchGroup:{x:Math.ceil(d/64)},programUniforms:wt})}},hd=(a,s)=>{Km(a.inputs);let c=a.inputs.length===1?s:Ym(a.inputs,s);a.compute(Qm(a.inputs,c),{inputs:[0]})},gd=a=>{let s=a.axis,c=a.splitSizes,d=a.numOutputs<0?c.length:a.numOutputs;if(d!==c.length)throw new Error("numOutputs and splitSizes lengh must be equal");return we({axis:s,numOutputs:d,splitSizes:c})}}),bd,Jm,ef,tf,vd,wd=j(()=>{ye(),xe(),_e(),bd=a=>Array.from(a.getBigInt64Array(),Number),Jm=a=>{if(!a||a.length!==2)throw new Error("Tile requires 2 inputs.");if(a[0].dataType!==1&&a[0].dataType!==6&&a[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(a[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(a[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(bd(a[1]).length!==a[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},ef=(a,s)=>{let c=[];for(let d=0;d<a.length;++d)c.push(a[d]*s[d]);return c},tf=a=>{let s=a[0].dims,c=bd(a[1]),d=ef(s,c),et=M$1.size(d),g=a[0].dataType,at=U$1("input",g,s.length),$t=K("output",g,d.length),vt=b=>`
      const inputShape = ${at.indices(...s)};
      ${b.registerUniform("output_size","u32").declareVariables(at,$t)}
      ${b.mainStart()}
      ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${$t.offsetToIndices("global_idx")};
      var input_indices: ${at.type.indices};
      for (var i = 0; i < ${s.length}; i++) {
        let input_dim_i = ${at.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${$t.indicesGet("output_indices","i")}  % input_dim_i;

        ${at.indicesSet("input_indices","i","input_dim_value")}
      }
      ${$t.setByOffset("global_idx",at.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${c}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:d,dataType:a[0].dataType}],dispatchGroup:{x:Math.ceil(et/64)},programUniforms:[{type:12,data:et},...X(a[0].dims,d)]}),getShaderSource:vt}},vd=a=>{Jm(a.inputs),a.compute(tf(a.inputs),{inputs:[0]})}}),rf,nf,$d,_d=j(()=>{ye(),xe(),_e(),rf=(a,s,c,d,et)=>{let g=K("output_data",et,c.length,4),at=U$1("a_data",s[1].dataType,s[1].dims.length,4),$t=U$1("b_data",s[2].dataType,s[2].dims.length,4),vt=U$1("c_data",s[0].dataType,s[0].dims.length,4),b,pt=(st,wt,Tt)=>`select(${wt}, ${st}, ${Tt})`;if(!d)b=g.setByOffset("global_idx",pt(at.getByOffset("global_idx"),$t.getByOffset("global_idx"),vt.getByOffset("global_idx")));else{let st=(wt,Tt,Ct="")=>{let jt=`a_data[index_a${Tt}][component_a${Tt}]`,Lt=`b_data[index_b${Tt}][component_b${Tt}]`,Ht=`bool(c_data[index_c${Tt}] & (0xffu << (component_c${Tt} * 8)))`;return`
            let output_indices${Tt} = ${g.offsetToIndices(`global_idx * 4u + ${Tt}u`)};
            let offset_a${Tt} = ${at.broadcastedIndicesToOffset(`output_indices${Tt}`,g)};
            let offset_b${Tt} = ${$t.broadcastedIndicesToOffset(`output_indices${Tt}`,g)};
            let offset_c${Tt} = ${vt.broadcastedIndicesToOffset(`output_indices${Tt}`,g)};
            let index_a${Tt} = offset_a${Tt} / 4u;
            let index_b${Tt} = offset_b${Tt} / 4u;
            let index_c${Tt} = offset_c${Tt} / 4u;
            let component_a${Tt} = offset_a${Tt} % 4u;
            let component_b${Tt} = offset_b${Tt} % 4u;
            let component_c${Tt} = offset_c${Tt} % 4u;
            ${wt}[${Tt}] = ${Ct}(${pt(jt,Lt,Ht)});
          `};et===9?b=`
            var data = vec4<u32>(0);
            ${st("data",0,"u32")}
            ${st("data",1,"u32")}
            ${st("data",2,"u32")}
            ${st("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:b=`
            ${st("output_data[global_idx]",0)}
            ${st("output_data[global_idx]",1)}
            ${st("output_data[global_idx]",2)}
            ${st("output_data[global_idx]",3)}
          `}return`
        ${a.registerUniform("vec_size","u32").declareVariables(vt,at,$t,g)}
        ${a.mainStart()}
        ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${b}
      }`},nf=a=>{let s=a[1].dims,c=a[2].dims,d=a[0].dims,et=a[1].dataType,g=!(M$1.areEqual(s,c)&&M$1.areEqual(c,d)),at=s,$t=M$1.size(s);if(g){let b=zt.calcShape(zt.calcShape(s,c,!1),d,!1);if(!b)throw new Error("Can't perform where op on the given tensors");at=b,$t=M$1.size(at)}let vt=Math.ceil($t/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:b=>rf(b,a,at,g,et),getRunData:()=>({outputs:[{dims:at,dataType:et}],dispatchGroup:{x:Math.ceil($t/64/4)},programUniforms:[{type:12,data:vt},...X(d,s,c,at)]})}},$d=a=>{a.compute(nf(a.inputs))}}),xd,Sd=j(()=>{zs(),oo(),Ws(),Vs(),Cu(),Du(),io(),co(),Xu(),Ju(),rl(),sl(),dl(),pl(),hl(),bl(),$l(),xl(),Cl(),mo(),Al(),Pl(),zl(),Zl(),Jl(),jn(),nd(),od(),sd(),cd(),fd(),yd(),wd(),Rr(),Jn(),_d(),xd=new Map([["Abs",[Hs]],["Acos",[Gs]],["Acosh",[Ls]],["Add",[Iu]],["ArgMax",[Rs,no]],["ArgMin",[Ps,no]],["Asin",[Fs]],["Asinh",[qs]],["Atan",[js]],["Atanh",[Ks]],["Attention",[Ms]],["AveragePool",[Hl,Vl]],["BatchNormalization",[Us]],["BiasAdd",[Ns]],["BiasSplitGelu",[Su]],["Cast",[Xs,Ys]],["Ceil",[Qs]],["Clip",[Zs]],["Concat",[Bs,Ds]],["Conv",[go,ho]],["ConvTranspose",[Yu,Ku]],["Cos",[Js]],["Cosh",[eu]],["CumSum",[Zu,Qu]],["DepthToSpace",[el,tl]],["Div",[Tu]],["Einsum",[ol,al]],["Elu",[tu,Zn]],["Equal",[Au]],["Erf",[ru]],["Exp",[nu]],["Expand",[ll]],["FastGelu",[cl]],["Floor",[iu]],["FusedConv",[go,ho]],["Gather",[fl,ml]],["GatherElements",[yl,gl]],["Gelu",[ou]],["Gemm",[wl,vl]],["GlobalAveragePool",[Fl,Ll]],["GlobalMaxPool",[Xl,Yl]],["Greater",[Pu]],["GreaterOrEqual",[zu]],["HardSigmoid",[mu,pu]],["InstanceNormalization",[_l]],["LayerNormalization",[Sl]],["LeakyRelu",[au,Zn]],["Less",[Ru]],["LessOrEqual",[Bu]],["Log",[_u]],["MatMul",[Hu]],["MatMulNBits",[Il,Tl]],["MaxPool",[jl,Kl]],["Mul",[Eu]],["MultiHeadAttention",[Ol,kl]],["Neg",[uu]],["Not",[su]],["Pad",[Rl]],["Pow",[ku]],["Range",[Ql]],["Reciprocal",[lu]],["ReduceMin",[Is]],["ReduceMean",[$s]],["ReduceMax",[Cs]],["ReduceSum",[As]],["ReduceProd",[Ts]],["ReduceL1",[_s]],["ReduceL2",[xs]],["ReduceLogSum",[ks]],["ReduceLogSumExp",[Ss]],["ReduceSumSquare",[Es]],["Relu",[du]],["Resize",[td,rd]],["RotaryEmbedding",[id]],["Sigmoid",[cu]],["Sin",[fu]],["Sinh",[hu]],["Slice",[ld,dd]],["SkipLayerNormalization",[ad]],["Split",[hd,gd]],["Sqrt",[gu]],["Softmax",[pd,md]],["Sub",[Ou]],["Tan",[yu]],["Tanh",[vu]],["ThresholdedRelu",[$u,Zn]],["Tile",[vd]],["Transpose",[us,ls]],["Where",[$d]]])}),li,Cd=j(()=>{_t(),Xt(),_e(),li=class{constructor(a){this.backend=a,this.repo=new Map,this.attributesBound=!1}getArtifact(a){return this.repo.get(a)}setArtifact(a,s){this.repo.set(a,s)}run(a,s,c,d,et){yt(a.programInfo.name);let g=this.backend.device,at=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let $t=[];for(let b of s)$t.push({binding:$t.length,resource:{buffer:b.buffer}});for(let b of c)$t.push({binding:$t.length,resource:{buffer:b.buffer}});et&&$t.push({binding:$t.length,resource:et});let vt=g.createBindGroup({layout:a.computePipeline.getBindGroupLayout(0),entries:$t,label:a.programInfo.name});if(this.backend.sessionStatus==="capturing"){let b={kernelId:this.backend.currentKernelId,computePipeline:a.computePipeline,bindGroup:vt,dispatchGroup:d};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(b)}at.setPipeline(a.computePipeline),at.setBindGroup(0,vt),at.dispatchWorkgroups(...d),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ut(a.programInfo.name)}dispose(){}build(a,s){yt(a.name);let c=this.backend.device,d=[];c.features.has("shader-f16")&&d.push("enable f16;");let et=as(s,this.backend.device.limits),g=a.getShaderSource(et),at=`${d.join(`
`)}
${et.additionalImplementations}
${g}`,$t=c.createShaderModule({code:at,label:a.name});Ne("verbose",()=>`[WebGPU] ${a.name} shader code: ${at}`);let vt=c.createComputePipeline({compute:{module:$t,entryPoint:"main"},layout:"auto",label:a.name});return ut(a.name),{programInfo:a,computePipeline:vt,uniformVariablesInfo:et.variablesInfo}}normalizeDispatchGroupSize(a){let s=typeof a=="number"?a:a.x,c=typeof a=="number"?1:a.y||1,d=typeof a=="number"?1:a.z||1,et=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(s<=et&&c<=et&&d<=et)return[s,c,d];let g=s*c*d,at=Math.ceil(Math.sqrt(g));if(at>et){if(at=Math.ceil(Math.cbrt(g)),at>et)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[at,at,at]}else return[at,at,1]}}}),of,af,_o,di,Id=j(()=>{_t(),ye(),Xt(),es(),os(),Sd(),Cd(),of=(a,s)=>{if(s.length!==a.length)throw new Error(`inputDependencies length ${s.length} is not equal to inputTensors length ${a.length}.`);let c=[];for(let d=0;d<a.length;++d){let et=a[d].dataType;switch(s[d]){case"none":{c.push("");break}case"type":{c.push(`${et}`);break}case"rank":{let g=a[d].dims.length;c.push(`${et};${g}`);break}case"dims":{let g=a[d].dims.join(",");c.push(`${et};${g}`);break}default:throw new Error(`unsupported input dependency: ${s[d]}`)}}return c.join("|")},af=(a,s,c)=>{var et,g;let d=a.name;return(et=a.shaderCache)!=null&&et.hint&&(d+="["+a.shaderCache.hint+"]"),d+=":"+c+`:${of(s,((g=a.shaderCache)==null?void 0:g.inputDependencies)??new Array(s.length).fill("dims"))}`,d},_o=class{constructor(a){a&&(this.architecture=a.architecture,this.vendor=a.vendor)}isArchitecture(a){return this.architecture===a}isVendor(a){return this.vendor===a}},di=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let a=this.kernelCustomData.get(this.currentKernelId);return a||(a={},this.kernelCustomData.set(this.currentKernelId,a)),a}async initialize(a,s){this.env=a;let c=[],d={requiredLimits:{maxComputeWorkgroupStorageSize:s.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:s.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:s.limits.maxStorageBufferBindingSize,maxBufferSize:s.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:s.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:s.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:s.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:s.limits.maxComputeWorkgroupSizeZ},requiredFeatures:c};s.features.has("chromium-experimental-timestamp-query-inside-passes")?c.push("chromium-experimental-timestamp-query-inside-passes"):s.features.has("timestamp-query")&&c.push("timestamp-query"),s.features.has("shader-f16")&&c.push("shader-f16"),this.device=await s.requestDevice(d),this.adapterInfo=new _o(await s.requestAdapterInfo()),this.gpuDataManager=is(this),this.programManager=new li(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,Qa(a.logLevel,!!a.debug),this.device.onuncapturederror=et=>{et.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${et.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:s,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let a=this.getCommandEncoder(),s={};this.queryType==="at-passes"&&(s.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=a.beginComputePass(s)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;yt(),this.endComputePass();let a;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),a=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(a,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,a,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&a.mapAsync(GPUMapMode.READ).then(()=>{var d;let s=new BigUint64Array(a.getMappedRange()),c=this.pendingQueries.get(a);for(let et=0;et<s.length/2;et++){let g=c[et],at=g.kernelId,$t=this.kernels.get(at),vt=$t.kernelType,b=$t.kernelName,pt=g.programName,st=g.inputTensorViews,wt=g.outputTensorViews,Tt=s[et*2],Ct=s[et*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=Tt);let jt=Number(Tt-this.queryTimeBase),Lt=Number(Ct-this.queryTimeBase);if(!Number.isSafeInteger(jt)||!Number.isSafeInteger(Lt))throw new RangeError("incorrect timestamp range");if((d=this.env.webgpu.profiling)!=null&&d.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:st.map(Ht=>({dims:Ht.dims,dataType:Yt(Ht.dataType)})),outputsMetadata:wt.map(Ht=>({dims:Ht.dims,dataType:Yt(Ht.dataType)})),kernelId:at,kernelType:vt,kernelName:b,programName:pt,startTime:jt,endTime:Lt});else{let Ht="";st.forEach((Kt,tr)=>{Ht+=`input[${tr}]: [${Kt.dims}] | ${Yt(Kt.dataType)}, `});let Gt="";wt.forEach((Kt,tr)=>{Gt+=`output[${tr}]: [${Kt.dims}] | ${Yt(Kt.dataType)}, `}),console.log(`[profiling] kernel "${at}|${vt}|${b}|${pt}" ${Ht}${Gt}execution time: ${Lt-jt} ns`)}Bn("GPU",`${pt}::${Tt}::${Ct}`)}a.unmap(),this.pendingQueries.delete(a)}),ut()}run(a,s,c,d,et,g){yt(a.name);let at=[];for(let Gt=0;Gt<s.length;++Gt){let Kt=s[Gt].data;if(Kt===0)continue;let tr=this.gpuDataManager.get(Kt);if(!tr)throw new Error(`no GPU data for input: ${Kt}`);at.push(tr)}let{outputs:$t,dispatchGroup:vt,programUniforms:b}=a.getRunData(s),pt=c.length===0?$t.map((Gt,Kt)=>Kt):c;if(pt.length!==$t.length)throw new Error(`Output size ${pt.length} must be equal to ${$t.length}.`);let st=[],wt=[];for(let Gt=0;Gt<$t.length;++Gt){if(!Number.isInteger(pt[Gt])||pt[Gt]<-3||pt[Gt]>=g)throw new Error(`Invalid output index: ${pt[Gt]}`);if(pt[Gt]===-3)continue;let Kt=pt[Gt]===-1,tr=pt[Gt]===-2,rr=Kt||tr?et($t[Gt].dataType,$t[Gt].dims):d(pt[Gt],$t[Gt].dataType,$t[Gt].dims);if(st.push(rr),rr.data===0)continue;let Lr=this.gpuDataManager.get(rr.data);if(!Lr)throw new Error(`no GPU data for output: ${rr.data}`);if(Kt&&this.temporaryData.push(Lr),tr){let jr=this.kernelPersistentData.get(this.currentKernelId);jr||(jr=[],this.kernelPersistentData.set(this.currentKernelId,jr)),jr.push(Lr)}wt.push(Lr)}if(at.length!==s.length||wt.length!==st.length){if(wt.length===0)return ut(a.name),st;throw new Error(`Program ${a.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let Tt;if(b){let Gt=0,Kt=[];b.forEach(jr=>{let Yr=typeof jr.data=="number"?[jr.data]:jr.data;if(Yr.length===0)return;let An=jr.type===10?2:4,No,o0;jr.type===10?(o0=Yr.length>4?16:Yr.length>2?8:Yr.length*An,No=Yr.length>4?16:An*Yr.length):(o0=Yr.length<=2?Yr.length*An:16,No=16),Gt=Math.ceil(Gt/o0)*o0,Kt.push(Gt);let t0=jr.type===10?8:4;Gt+=Yr.length>4?Math.ceil(Yr.length/t0)*No:Yr.length*An});let tr=16;Gt=Math.ceil(Gt/tr)*tr;let rr=new ArrayBuffer(Gt);b.forEach((jr,Yr)=>{let An=Kt[Yr],No=typeof jr.data=="number"?[jr.data]:jr.data;if(jr.type===6)new Int32Array(rr,An,No.length).set(No);else if(jr.type===12)new Uint32Array(rr,An,No.length).set(No);else if(jr.type===10)new Uint16Array(rr,An,No.length).set(No);else if(jr.type===1)new Float32Array(rr,An,No.length).set(No);else throw new Error(`Unsupported uniform type: ${Yt(jr.type)}`)});let Lr=this.gpuDataManager.create(Gt,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(Lr.buffer,0,rr,0,Gt),this.gpuDataManager.release(Lr.id),Tt={offset:0,size:Gt,buffer:Lr.buffer}}let Ct=this.programManager.normalizeDispatchGroupSize(vt),jt=Ct[1]===1&&Ct[2]===1,Lt=af(a,s,jt),Ht=this.programManager.getArtifact(Lt);if(Ht||(Ht=this.programManager.build(a,Ct),this.programManager.setArtifact(Lt,Ht),Ne("info",()=>`[artifact] key: ${Lt}, programName: ${a.name}`)),b&&Ht.uniformVariablesInfo){if(b.length!==Ht.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${Ht.uniformVariablesInfo.length}, got ${b.length} in program "${Ht.programInfo.name}".`);for(let Gt=0;Gt<b.length;Gt++){let Kt=b[Gt],tr=Kt.type,rr=typeof Kt.data=="number"?1:Kt.data.length,[Lr,jr]=Ht.uniformVariablesInfo[Gt];if(tr!==Lr||rr!==jr)throw new Error(`Uniform variable ${Gt} mismatch: expect type ${Lr} with size ${jr}, got type ${tr} with size ${rr} in program "${Ht.programInfo.name}".`)}}if(Ne("info",()=>`[ProgramManager] run "${a.name}" (key=${Lt}) with ${Ct[0]}x${Ct[1]}x${Ct[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let Gt={kernelId:this.currentKernelId,programName:Ht.programInfo.name,inputTensorViews:s,outputTensorViews:st};this.pendingKernels.push(Gt),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(Gt)}return this.programManager.run(Ht,at,wt,Ct,Tt),ut(a.name),st}upload(a,s){this.gpuDataManager.upload(a,s)}memcpy(a,s){this.gpuDataManager.memcpy(a,s)}async download(a,s){await this.gpuDataManager.download(a,s)}alloc(a){return this.gpuDataManager.create(a).id}free(a){return this.gpuDataManager.release(a)}createKernel(a,s,c,d){let et=xd.get(a);if(!et)throw new Error(`kernel not implemented: ${a}`);let g={kernelType:a,kernelName:d,kernelEntry:et[0],attributes:[et[1],c]};this.kernels.set(s,g)}releaseKernel(a){let s=this.kernelPersistentData.get(a);if(s){for(let c of s)this.gpuDataManager.release(c.id);this.kernelPersistentData.delete(a)}this.kernelCustomData.delete(a),this.kernels.delete(a)}computeKernel(a,s,c){let d=this.kernels.get(a);if(!d)throw new Error(`kernel not created: ${a}`);let et=d.kernelType,g=d.kernelName,at=d.kernelEntry,$t=d.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${et}] ${g}" is not allowed to be called recursively`);this.currentKernelId=a,$t[0]&&($t[1]=$t[0]($t[1]),$t[0]=void 0),Ne("info",()=>`[WebGPU] Start to run kernel "[${et}] ${g}"...`);let vt=this.env.debug;this.temporaryData=[];try{return vt&&this.device.pushErrorScope("validation"),at(s,$t[1]),0}catch(b){return c.push(Promise.resolve(`[WebGPU] Kernel "[${et}] ${g}" failed. ${b}`)),1}finally{vt&&c.push(this.device.popErrorScope().then(b=>b?`GPU validation error for kernel "[${et}] ${g}": ${b.message}`:null));for(let b of this.temporaryData)this.gpuDataManager.release(b.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(a,s,c,d){let et=this.sessionExternalDataMapping.get(a);et||(et=new Map,this.sessionExternalDataMapping.set(a,et));let g=et.get(s),at=this.gpuDataManager.registerExternalBuffer(c,d,g==null?void 0:g[1]);return et.set(s,[at,c]),at}unregisterBuffers(a){let s=this.sessionExternalDataMapping.get(a);s&&(s.forEach(c=>this.gpuDataManager.unregisterExternalBuffer(c[1])),this.sessionExternalDataMapping.delete(a))}getBuffer(a){let s=this.gpuDataManager.get(a);if(!s)throw new Error(`no GPU data for buffer: ${a}`);return s.buffer}createDownloader(a,s,c){return async()=>{let d=await Xi(this,a,s);return Ja(d.buffer,c)}}writeTimestamp(a){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,a)}setQueryType(){var a;this.queryType="none",(((a=this.env.webgpu.profiling)==null?void 0:a.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ne("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ne("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ne("info","replay"),this.sessionStatus="replaying";let a=this.capturedCommandList.get(this.currentSessionId),s=this.capturedPendingKernels.get(this.currentSessionId),c=a.length;this.pendingKernels=[];for(let d=0;d<c;d++){let et=this.getComputePassEncoder(),g=a[d];this.writeTimestamp(this.pendingDispatchNumber*2),et.setPipeline(g.computePipeline),et.setBindGroup(0,g.bindGroup),et.dispatchWorkgroups(...g.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(s[d]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(a){this.unregisterBuffers(a),this.capturedCommandList.has(a)&&this.capturedCommandList.delete(a),this.capturedPendingKernels.has(a)&&this.capturedPendingKernels.delete(a),this.gpuDataManager.onReleaseSession(a)}onRunStart(a){this.currentSessionId=a,this.setQueryType()}}}),Td={};kr(Td,{init:()=>sf});var an,xo,sf,Ad=j(()=>{ye(),Id(),Xt(),xe(),an=class HS{constructor(s,c,d,et){this.module=s,this.dataType=c,this.data=d,this.dims=et}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let s=M$1.size(this.dims);return s===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,s)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let s=M$1.size(this.dims);return s===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,s)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let s=M$1.size(this.dims);return s===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,s)}reshape(s){if(M$1.size(s)!==M$1.size(this.dims))throw new Error("Invalid new shape");return new HS(this.module,this.dataType,this.data,s)}},xo=class{constructor(a,s,c){this.module=a,this.backend=s,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=s.adapterInfo;let d=a.HEAPU32,et=c>>>2;this.opKernelContext=d[et++];let g=d[et++];this.outputCount=d[et++],this.customDataOffset=d[et++],this.customDataSize=d[et++];let at=[];for(let $t=0;$t<g;$t++){let vt=d[et++],b=d[et++],pt=d[et++],st=[];for(let wt=0;wt<pt;wt++)st.push(d[et++]);at.push(new an(a,vt,b,st))}this.inputs=at}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(a,s){var at;let c=((at=s==null?void 0:s.inputs)==null?void 0:at.map($t=>typeof $t=="number"?this.inputs[$t]:$t))??this.inputs,d=(s==null?void 0:s.outputs)??[],et=($t,vt,b)=>new an(this.module,vt,this.output($t,b),b),g=($t,vt)=>{let b=cr($t);if(!b)throw new Error(`Unsupported data type: ${$t}`);let pt=b*M$1.size(vt),st=pt>0?this.backend.gpuDataManager.create(pt).id:0;return new an(this.module,$t,st,vt)};return this.backend.run(a,c,d,et,g,this.outputCount)}output(a,s){let c=this.module.stackSave();try{let d=this.module.stackAlloc((1+s.length)*4),et=d>>2;this.module.HEAPU32[et++]=s.length;for(let g=0;g<s.length;g++)this.module.HEAPU32[et++]=s[g];return this.module._JsepOutput(this.opKernelContext,a,d)}catch(d){throw new Error(`Failed to generate kernel's output[${a}] with dims [${s}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${d}`)}finally{this.module.stackRestore(c)}}},sf=async(a,s,c,d)=>{let et=s.jsepInit;if(!et)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(a==="webgpu"){let g=new di;await g.initialize(c,d),et("webgpu",[g,at=>g.alloc(at),at=>g.free(at),(at,$t,vt,b=!1)=>{if(b)Ne("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${at}, dst=${$t}, size=${vt}`),g.memcpy(at,$t);else{Ne("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${at}, gpuDataId=${$t}, size=${vt}`);let pt=s.HEAPU8.subarray(at>>>0,(at>>>0)+vt);g.upload($t,pt)}},async(at,$t,vt)=>{Ne("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${at}, dataOffset=${$t}, size=${vt}`),await g.download(at,()=>s.HEAPU8.subarray($t>>>0,($t>>>0)+vt))},(at,$t,vt)=>g.createKernel(at,$t,vt,s.UTF8ToString(s._JsepGetNodeName($t))),at=>g.releaseKernel(at),(at,$t,vt,b)=>{Ne("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${vt}, kernel=${at}, contextDataOffset=${$t}`);let pt=new xo(s,g,$t);return g.computeKernel(at,pt,b)},()=>g.captureBegin(),()=>g.captureEnd(),()=>g.replay()])}else et("webnn")}}),uf,kd,Od,hr,lf,So,Pd,Rd,Ed,zd,Bd,Dd,Md=j(()=>{ja(),Ya(),ye(),Or(),Wn(),qi(),uf=(a,s)=>{Fe()._OrtInit(a,s)!==0&&We("Can't initialize onnxruntime.")},kd=async a=>{uf(a.wasm.numThreads,en(a.logLevel))},Od=async(a,s)=>{{let c=(Ad(),sr(Td)).init;if(s==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let d=a.webgpu.adapter;if(d){if(typeof d.limits!="object"||typeof d.features!="object"||typeof d.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let et=a.webgpu.powerPreference;if(et!==void 0&&et!=="low-power"&&et!=="high-performance")throw new Error(`Invalid powerPreference setting: "${et}"`);let g=a.webgpu.forceFallbackAdapter;if(g!==void 0&&typeof g!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${g}"`);if(d=await navigator.gpu.requestAdapter({powerPreference:et,forceFallbackAdapter:g}),!d)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}if(!a.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await c("webgpu",Fe(),a,d)}if(s==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await c("webnn",Fe(),a)}}},hr=new Map,lf=a=>{let s=Fe(),c=s.stackSave();try{let d=s.stackAlloc(8);return s._OrtGetInputOutputCount(a,d,d+4)!==0&&We("Can't get session input/output count."),[s.HEAP32[d/4],s.HEAP32[d/4+1]]}finally{s.stackRestore(c)}},So=a=>{let s=Fe(),c=s._malloc(a.byteLength);if(c===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${a.byteLength}.`);return s.HEAPU8.set(a,c),[c,a.byteLength]},Pd=async(a,s)=>{var st,wt;let c,d,et=Fe();Array.isArray(a)?[c,d]=a:a.buffer===et.HEAPU8.buffer?[c,d]=[a.byteOffset,a.byteLength]:[c,d]=So(a);let g=0,at=0,$t=0,vt=[],b=[],pt=[];try{if([at,vt]=Ka(s),(s==null?void 0:s.externalData)&&et.mountExternalData){let tr=[];for(let rr of s.externalData){let Lr=typeof rr=="string"?rr:rr.path;tr.push(tn(typeof rr=="string"?rr:rr.data).then(jr=>{et.mountExternalData(Lr,jr)}))}await Promise.all(tr)}g=await et._OrtCreateSession(c,d,at),g===0&&We("Can't create a session.");let[Tt,Ct]=lf(g),jt=!!(s!=null&&s.enableGraphCapture),Lt=[],Ht=[],Gt=[];for(let tr=0;tr<Tt;tr++){let rr=et._OrtGetInputName(g,tr);rr===0&&We("Can't get an input name."),b.push(rr),Lt.push(et.UTF8ToString(rr))}for(let tr=0;tr<Ct;tr++){let rr=et._OrtGetOutputName(g,tr);rr===0&&We("Can't get an output name."),pt.push(rr);let Lr=et.UTF8ToString(rr);Ht.push(Lr);{if(jt&&(s==null?void 0:s.preferredOutputLocation)===void 0){Gt.push("gpu-buffer");continue}let jr=typeof(s==null?void 0:s.preferredOutputLocation)=="string"?s.preferredOutputLocation:((st=s==null?void 0:s.preferredOutputLocation)==null?void 0:st[Lr])??"cpu";if(jr!=="cpu"&&jr!=="cpu-pinned"&&jr!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${jr}.`);if(jt&&jr!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${jr}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);Gt.push(jr)}}let Kt=null;return Gt.some(tr=>tr==="gpu-buffer")&&($t=et._OrtCreateBinding(g),$t===0&&We("Can't create IO binding."),Kt={handle:$t,outputPreferredLocations:Gt,outputPreferredLocationsEncoded:Gt.map(tr=>Fi(tr))}),hr.set(g,[g,b,pt,Kt,jt,!1]),[g,Lt,Ht]}catch(Tt){throw b.forEach(Ct=>et._OrtFree(Ct)),pt.forEach(Ct=>et._OrtFree(Ct)),$t!==0&&et._OrtReleaseBinding($t),g!==0&&et._OrtReleaseSession(g),Tt}finally{et._free(c),at!==0&&et._OrtReleaseSessionOptions(at),vt.forEach(Tt=>et._free(Tt)),(wt=et.unmountExternalData)==null||wt.call(et)}},Rd=a=>{var vt;let s=Fe(),c=hr.get(a);if(!c)throw new Error(`cannot release session. invalid session id: ${a}`);let[d,et,g,at,$t]=c;at&&($t&&s._OrtClearBoundOutputs(at.handle),s._OrtReleaseBinding(at.handle)),(vt=s.jsepOnReleaseSession)==null||vt.call(s,a),et.forEach(b=>s._OrtFree(b)),g.forEach(b=>s._OrtFree(b)),s._OrtReleaseSession(d),hr.delete(a)},Ed=(a,s,c,d,et,g=!1)=>{if(!a){s.push(0);return}let at=Fe(),$t=a[0],vt=a[1],b=a[3],pt,st;if($t==="string"&&b==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(g&&b!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${et} when enableGraphCapture is true.`);if(b==="gpu-buffer"){let Ct=a[2].gpuBuffer,jt=cr(Li($t));st=vt.reduce((Ht,Gt)=>Ht*Gt,1)*jt;let Lt=at.jsepRegisterBuffer;if(!Lt)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');pt=Lt(d,et,Ct,st)}else{let Ct=a[2];if(Array.isArray(Ct)){st=4*Ct.length,pt=at._malloc(st),c.push(pt);let jt=pt/4;for(let Lt=0;Lt<Ct.length;Lt++){if(typeof Ct[Lt]!="string")throw new TypeError(`tensor data at index ${Lt} is not a string`);at.HEAPU32[jt++]=qe(Ct[Lt],c)}}else st=Ct.byteLength,pt=at._malloc(st),c.push(pt),at.HEAPU8.set(new Uint8Array(Ct.buffer,Ct.byteOffset,st),pt)}let wt=at.stackSave(),Tt=at.stackAlloc(4*vt.length);try{let Ct=Tt/4;vt.forEach(Lt=>at.HEAP32[Ct++]=Lt);let jt=at._OrtCreateTensor(Li($t),pt,st,Tt,vt.length,Fi(b));jt===0&&We(`Can't create tensor for input/output. session=${d}, index=${et}.`),s.push(jt)}finally{at.stackRestore(wt)}},zd=async(a,s,c,d,et,g)=>{var No,o0;let at=Fe(),$t=hr.get(a);if(!$t)throw new Error(`cannot run inference. invalid session id: ${a}`);let vt=$t[0],b=$t[1],pt=$t[2],st=$t[3],wt=$t[4],Tt=$t[5],Ct=s.length,jt=d.length,Lt=0,Ht=[],Gt=[],Kt=[],tr=[],rr=at.stackSave(),Lr=at.stackAlloc(Ct*4),jr=at.stackAlloc(Ct*4),Yr=at.stackAlloc(jt*4),An=at.stackAlloc(jt*4);try{[Lt,Ht]=qa(g);for(let e0=0;e0<Ct;e0++)Ed(c[e0],Gt,tr,a,s[e0],wt);for(let e0=0;e0<jt;e0++)Ed(et[e0],Kt,tr,a,Ct+d[e0],wt);let t0=Lr/4,c0=jr/4,n0=Yr/4,Qo=An/4;for(let e0=0;e0<Ct;e0++)at.HEAPU32[t0++]=Gt[e0],at.HEAPU32[c0++]=b[s[e0]];for(let e0=0;e0<jt;e0++)at.HEAPU32[n0++]=Kt[e0],at.HEAPU32[Qo++]=pt[d[e0]];if(st&&!Tt){let{handle:e0,outputPreferredLocations:Xr,outputPreferredLocationsEncoded:In}=st;if(b.length!==Ct)throw new Error(`input count from feeds (${Ct}) is expected to be always equal to model's input count (${b.length}).`);for(let Zr=0;Zr<Ct;Zr++){let wn=s[Zr];await at._OrtBindInput(e0,b[wn],Gt[Zr])!==0&&We(`Can't bind input[${Zr}] for session=${a}.`)}for(let Zr=0;Zr<jt;Zr++){let wn=d[Zr];(No=et[Zr])!=null&&No[3]?at._OrtBindOutput(e0,pt[wn],Kt[Zr],0)!==0&&We(`Can't bind pre-allocated output[${Zr}] for session=${a}.`):at._OrtBindOutput(e0,pt[wn],0,In[wn])!==0&&We(`Can't bind output[${Zr}] to ${Xr[Zr]} for session=${a}.`)}hr.set(a,[vt,b,pt,st,wt,!0])}(o0=at.jsepOnRunStart)==null||o0.call(at,vt);let Mo;st?Mo=await at._OrtRunWithBinding(vt,st.handle,jt,Yr,Lt):Mo=await at._OrtRun(vt,jr,Lr,Ct,An,jt,Yr,Lt),Mo!==0&&We("failed to call OrtRun().");let zo=[];for(let e0=0;e0<jt;e0++){let Xr=at.HEAPU32[Yr/4+e0];if(Xr===Kt[e0]){zo.push(et[e0]);continue}let In=at.stackSave(),Zr=at.stackAlloc(4*4),wn=!1,r0,ko=0;try{at._OrtGetTensorData(Xr,Zr,Zr+4,Zr+8,Zr+12)!==0&&We(`Can't access output tensor data on index ${e0}.`);let _n=Zr/4,i0=at.HEAPU32[_n++];ko=at.HEAPU32[_n++];let a0=at.HEAPU32[_n++],m0=at.HEAPU32[_n++],p0=[];for(let R0=0;R0<m0;R0++)p0.push(at.HEAPU32[a0/4+R0]);at._OrtFree(a0);let x0=p0.reduce((R0,$0)=>R0*$0,1);r0=Yt(i0);let S0=st==null?void 0:st.outputPreferredLocations[d[e0]];if(r0==="string"){if(S0==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let R0=[],$0=ko/4;for(let f0=0;f0<x0;f0++){let P0=at.HEAPU32[$0++],M0=f0===x0-1?void 0:at.HEAPU32[$0]-P0;R0.push(at.UTF8ToString(P0,M0))}zo.push([r0,p0,R0,"cpu"])}else if(S0==="gpu-buffer"&&x0>0){let R0=at.jsepGetBuffer;if(!R0)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let $0=R0(ko),f0=cr(i0);if(f0===void 0||!Vn(r0))throw new Error(`Unsupported data type: ${r0}`);wn=!0,zo.push([r0,p0,{gpuBuffer:$0,download:at.jsepCreateDownloader($0,x0*f0,r0),dispose:()=>{at._OrtReleaseTensor(Xr)}},"gpu-buffer"])}else{let R0=Nn(r0),$0=new R0(x0);new Uint8Array($0.buffer,$0.byteOffset,$0.byteLength).set(at.HEAPU8.subarray(ko,ko+$0.byteLength)),zo.push([r0,p0,$0,"cpu"])}}finally{at.stackRestore(In),r0==="string"&&ko&&at._free(ko),wn||at._OrtReleaseTensor(Xr)}}return st&&!wt&&(at._OrtClearBoundOutputs(st.handle),hr.set(a,[vt,b,pt,st,wt,!1])),zo}finally{at.stackRestore(rr),Gt.forEach(t0=>at._OrtReleaseTensor(t0)),Kt.forEach(t0=>at._OrtReleaseTensor(t0)),tr.forEach(t0=>at._free(t0)),Lt!==0&&at._OrtReleaseRunOptions(Lt),Ht.forEach(t0=>at._free(t0))}},Bd=a=>{let s=Fe(),c=hr.get(a);if(!c)throw new Error("invalid session id");let d=c[0],et=s._OrtEndProfiling(d);et===0&&We("Can't get an profile file name."),s._OrtFree(et)},Dd=a=>{let s=[];for(let c of a){let d=c[2];!Array.isArray(d)&&"buffer"in d&&s.push(d.buffer)}return s}}),Ud=Er((a,s)=>{s.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var ao=Object.defineProperty;var nl=Object.getOwnPropertyDescriptor;var ol=Object.getOwnPropertyNames;var il=Object.prototype.hasOwnProperty;var Y=(e,t)=>()=>(e&&(t=e(e=0)),t);var Wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gn=(e,t)=>{for(var r in t)ao(e,r,{get:t[r],enumerable:!0})},al=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ol(t))!il.call(e,i)&&i!==r&&ao(e,i,{get:()=>t[i],enumerable:!(o=nl(t,i))||o.enumerable});return e};var wr=e=>al(ao({},"__esModule",{value:!0}),e);var so={};gn(so,{createReadStream:()=>Ai,readFile:()=>sl,readFileSync:()=>ul});var sl,ul,Ai,uo=Y(()=>{sl=void 0,ul=void 0,Ai=void 0});var lo={};gn(lo,{join:()=>dl});var dl,co=Y(()=>{dl=void 0});var Ei=Wr((Ti,po)=>{"use strict";var Ii=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){var r=t,o,i,u=new Promise((s,m)=>{o=s,i=m});r.mountExternalData=(s,m)=>{(r.eb||(r.eb=new Map)).set(s,m)},r.unmountExternalData=()=>{delete r.eb};let a=()=>{let s=(g,$,T)=>(...B)=>{let H=dt,q=$?.();B=g(...B);let te=$?.();return q!==te&&(g=te,T(q),$=T=null),dt!=H?tn():B},m=g=>async(...$)=>{try{if(r.cb)throw Error("Session already started");let T=r.cb={xb:$[0],errors:[]},B=await g(...$);if(r.cb!==T)throw Error("Session mismatch");r.kb?.flush();let H=T.errors;if(0<H.length){let q=await Promise.all(H);if(q=q.filter(te=>te),0<q.length)throw Error(q.join(`\n`))}return B}finally{r.cb=null}};r._OrtCreateSession=s(r._OrtCreateSession,()=>r._OrtCreateSession,g=>r._OrtCreateSession=g),r._OrtRun=m(s(r._OrtRun,()=>r._OrtRun,g=>r._OrtRun=g)),r._OrtRunWithBinding=m(s(r._OrtRunWithBinding,()=>r._OrtRunWithBinding,g=>r._OrtRunWithBinding=g)),r._OrtBindInput=s(r._OrtBindInput,()=>r._OrtBindInput,g=>r._OrtBindInput=g),a=void 0};r.jsepInit=(s,m)=>{if(a?.(),s==="webgpu"){[r.kb,r.pb,r.tb,r.lb,r.sb,r.Ra,r.ub,r.wb,r.qb,r.rb,r.vb]=m;let g=r.kb;r.jsepRegisterBuffer=($,T,B,H)=>g.registerBuffer($,T,B,H),r.jsepGetBuffer=$=>g.getBuffer($),r.jsepCreateDownloader=($,T,B)=>g.createDownloader($,T,B),r.jsepOnReleaseSession=$=>{g.onReleaseSession($)},r.jsepOnRunStart=$=>g.onRunStart($)}};var c=Object.assign({},r),p="./this.program",h=(s,m)=>{throw m},d=typeof window=="object",y=typeof importScripts=="function",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_="",v,S,A;if(w){var I=(uo(),wr(so)),x=(co(),wr(lo));_=y?x.dirname(_)+"/":__dirname+"/",v=(s,m)=>(s=Ke(s)?new URL(s):x.normalize(s),I.readFileSync(s,m?void 0:"utf8")),A=s=>(s=v(s,!0),s.buffer||(s=new Uint8Array(s)),s),S=(s,m,g,$=!0)=>{s=Ke(s)?new URL(s):x.normalize(s),I.readFile(s,$?void 0:"utf8",(T,B)=>{T?g(T):m($?B.buffer:B)})},!r.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(s,m)=>{throw process.exitCode=s,m}}else(d||y)&&(y?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),e&&(_=e),_.startsWith("blob:")?_="":_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),v=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.send(null),m.responseText},y&&(A=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),S=(s,m,g)=>{var $=new XMLHttpRequest;$.open("GET",s,!0),$.responseType="arraybuffer",$.onload=()=>{$.status==200||$.status==0&&$.response?m($.response):g()},$.onerror=g,$.send(null)});var E=console.log.bind(console),P=console.error.bind(console);Object.assign(r,c),c=null;var O,R=!1,L,N,K,Q,he,W,se,Ce,We,ee,ae;function Ae(){var s=O.buffer;r.HEAP8=N=new Int8Array(s),r.HEAP16=Q=new Int16Array(s),r.HEAPU8=K=new Uint8Array(s),r.HEAPU16=he=new Uint16Array(s),r.HEAP32=W=new Int32Array(s),r.HEAPU32=se=new Uint32Array(s),r.HEAPF32=Ce=new Float32Array(s),r.HEAPF64=ae=new Float64Array(s),r.HEAP64=We=new BigInt64Array(s),r.HEAPU64=ee=new BigUint64Array(s)}var me=[],ie=[],ue=[],le=0,qe=null,G=null;function ne(s){throw s="Aborted("+s+")",P(s),R=!0,L=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),i(s),s}var xe=s=>s.startsWith("data:application/octet-stream;base64,"),Ke=s=>s.startsWith("file://"),Be;if(Be="ort-wasm-simd.wasm",!xe(Be)){var Ge=Be;Be=r.locateFile?r.locateFile(Ge,_):_+Ge}function Ut(s){if(A)return A(s);throw"both async and sync fetching of the wasm failed"}function Ne(s){if(d||y){if(typeof fetch=="function"&&!Ke(s))return fetch(s,{credentials:"same-origin"}).then(m=>{if(!m.ok)throw`failed to load wasm binary file at \'${s}\'`;return m.arrayBuffer()}).catch(()=>Ut(s));if(S)return new Promise((m,g)=>{S(s,$=>m(new Uint8Array($)),g)})}return Promise.resolve().then(()=>Ut(s))}function Ye(s,m,g){return Ne(s).then($=>WebAssembly.instantiate($,m)).then(g,$=>{P(`failed to asynchronously prepare wasm: ${$}`),ne($)})}function mt(s,m){var g=Be;return typeof WebAssembly.instantiateStreaming!="function"||xe(g)||Ke(g)||w||typeof fetch!="function"?Ye(g,s,m):fetch(g,{credentials:"same-origin"}).then($=>WebAssembly.instantiateStreaming($,s).then(m,function(T){return P(`wasm streaming compile failed: ${T}`),P("falling back to ArrayBuffer instantiation"),Ye(g,s,m)}))}var Rt={824920:(s,m,g,$)=>{if(typeof r>"u"||!r.eb)return 1;if(s=je(s>>>0),s.startsWith("./")&&(s=s.substring(2)),s=r.eb.get(s),!s)return 2;if(m>>>=0,g>>>=0,m+g>s.byteLength)return 3;try{return K.set(s.subarray(m,m+g),$>>>0>>>0),0}catch{return 4}},825421:()=>{r.qb()},825452:()=>{r.rb()},825481:()=>{r.vb()},825506:s=>r.pb(s),825539:s=>r.tb(s),825571:(s,m,g)=>{r.lb(s,m,g,!0)},825610:(s,m,g)=>{r.lb(s,m,g)},825643:s=>{r.Ra("Abs",s,void 0)},825694:s=>{r.Ra("Neg",s,void 0)},825745:s=>{r.Ra("Floor",s,void 0)},825798:s=>{r.Ra("Ceil",s,void 0)},825850:s=>{r.Ra("Reciprocal",s,void 0)},825908:s=>{r.Ra("Sqrt",s,void 0)},825960:s=>{r.Ra("Exp",s,void 0)},826011:s=>{r.Ra("Erf",s,void 0)},826062:s=>{r.Ra("Sigmoid",s,void 0)},826117:(s,m,g)=>{r.Ra("HardSigmoid",s,{alpha:m,beta:g})},826196:s=>{r.Ra("Log",s,void 0)},826247:s=>{r.Ra("Sin",s,void 0)},826298:s=>{r.Ra("Cos",s,void 0)},826349:s=>{r.Ra("Tan",s,void 0)},826400:s=>{r.Ra("Asin",s,void 0)},826452:s=>{r.Ra("Acos",s,void 0)},826504:s=>{r.Ra("Atan",s,void 0)},826556:s=>{r.Ra("Sinh",s,void 0)},826608:s=>{r.Ra("Cosh",s,void 0)},826660:s=>{r.Ra("Asinh",s,void 0)},826713:s=>{r.Ra("Acosh",s,void 0)},826766:s=>{r.Ra("Atanh",s,void 0)},826819:s=>{r.Ra("Tanh",s,void 0)},826871:s=>{r.Ra("Not",s,void 0)},826922:(s,m,g)=>{r.Ra("Clip",s,{min:m,max:g})},826991:s=>{r.Ra("Clip",s,void 0)},827043:(s,m)=>{r.Ra("Elu",s,{alpha:m})},827101:s=>{r.Ra("Relu",s,void 0)},827153:(s,m)=>{r.Ra("LeakyRelu",s,{alpha:m})},827217:(s,m)=>{r.Ra("ThresholdedRelu",s,{alpha:m})},827287:(s,m)=>{r.Ra("Cast",s,{to:m})},827345:s=>{r.Ra("Add",s,void 0)},827396:s=>{r.Ra("Sub",s,void 0)},827447:s=>{r.Ra("Mul",s,void 0)},827498:s=>{r.Ra("Div",s,void 0)},827549:s=>{r.Ra("Pow",s,void 0)},827600:s=>{r.Ra("Equal",s,void 0)},827653:s=>{r.Ra("Greater",s,void 0)},827708:s=>{r.Ra("GreaterOrEqual",s,void 0)},827770:s=>{r.Ra("Less",s,void 0)},827822:s=>{r.Ra("LessOrEqual",s,void 0)},827881:(s,m,g,$,T)=>{r.Ra("ReduceMean",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828040:(s,m,g,$,T)=>{r.Ra("ReduceMax",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828198:(s,m,g,$,T)=>{r.Ra("ReduceMin",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828356:(s,m,g,$,T)=>{r.Ra("ReduceProd",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828515:(s,m,g,$,T)=>{r.Ra("ReduceSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828673:(s,m,g,$,T)=>{r.Ra("ReduceL1",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828830:(s,m,g,$,T)=>{r.Ra("ReduceL2",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828987:(s,m,g,$,T)=>{r.Ra("ReduceLogSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829148:(s,m,g,$,T)=>{r.Ra("ReduceSumSquare",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829312:(s,m,g,$,T)=>{r.Ra("ReduceLogSumExp",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829476:s=>{r.Ra("Where",s,void 0)},829529:(s,m,g)=>{r.Ra("Transpose",s,{perm:m?Array.from(W.subarray(m>>>0,g>>>0)):[]})},829637:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829770:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829903:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},830304:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},830869:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},831270:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},831835:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},831926:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832210:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},832301:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832585:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},832672:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832952:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},833039:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},833319:(s,m,g,$,T)=>{r.Ra("Gemm",s,{alpha:m,beta:g,transA:$,transB:T})},833423:s=>{r.Ra("MatMul",s,void 0)},833477:(s,m,g,$)=>{r.Ra("ArgMax",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833585:(s,m,g,$)=>{r.Ra("ArgMin",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833693:(s,m)=>{r.Ra("Softmax",s,{axis:m})},833756:(s,m)=>{r.Ra("Concat",s,{axis:m})},833816:(s,m,g,$,T)=>{r.Ra("Split",s,{axis:m,numOutputs:g,splitSizes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},833956:s=>{r.Ra("Expand",s,void 0)},834010:(s,m)=>{r.Ra("Gather",s,{axis:Number(m)})},834081:(s,m)=>{r.Ra("GatherElements",s,{axis:Number(m)})},834160:(s,m,g,$,T,B,H,q,te,X,de)=>{r.Ra("Resize",s,{antialias:m,axes:g?Array.from(W.subarray(g>>>0,$>>>0)):[],coordinateTransformMode:je(T),cubicCoeffA:B,excludeOutside:H,extrapolationValue:q,keepAspectRatioPolicy:je(te),mode:je(X),nearestMode:je(de)})},834506:(s,m,g,$,T,B,H)=>{r.Ra("Slice",s,{starts:m?Array.from(W.subarray(m>>>0,g>>>0)):[],ends:$?Array.from(W.subarray($>>>0,T>>>0)):[],axes:B?Array.from(W.subarray(B>>>0,H>>>0)):[]})},834722:s=>{r.Ra("Tile",s,void 0)},834774:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},834885:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},834999:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},835113:s=>{r.Ra("Range",s,void 0)},835166:(s,m)=>{r.Ra("Einsum",s,{equation:je(m)})},835247:(s,m,g,$,T)=>{r.Ra("Pad",s,{mode:m,value:g,pads:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},835374:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835543:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835712:(s,m,g)=>{r.Ra("CumSum",s,{exclusive:Number(m),reverse:Number(g)})},835809:(s,m,g,$,T,B,H,q,te)=>{r.Ra("Attention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B,qkvHiddenSizes:H?Array.from(W.subarray(Number(q)>>>0,Number(q)+H>>>0)):[],pastPresentShareBuffer:!!te})},836081:s=>{r.Ra("BiasAdd",s,void 0)},836136:s=>{r.Ra("BiasSplitGelu",s,void 0)},836197:s=>{r.Ra("FastGelu",s,void 0)},836253:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe)=>{r.Ra("Conv",s,{format:te?"NHWC":"NCHW",auto_pad:m,dilations:[g],group:$,kernel_shape:[T],pads:B?Array.from(W.subarray(B>>>0,H>>>0)):[],strides:[q],w_is_const:()=>!!N[X>>>0],activation:je(de),activation_params:Ee?Array.from(Ce.subarray(Ee>>>0,Oe>>>0)):[]})},836623:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("Conv",s,{format:Ee?"NHWC":"NCHW",auto_pad:m,dilations:[g,$],group:T,kernel_shape:[B,H],pads:q?Array.from(W.subarray(q>>>0,te>>>0)):[],strides:[X,de],w_is_const:()=>!!N[Oe>>>0],activation:je(D),activation_params:be?Array.from(Ce.subarray(be>>>0,Ie>>>0)):[]})},837014:s=>{r.Ra("Gelu",s,void 0)},837066:(s,m,g,$,T,B)=>{r.Ra("MatMulNBits",s,{k:m,n:g,accuracyLevel:$,bits:T,blockSize:B})},837193:(s,m,g,$,T,B)=>{r.Ra("MultiHeadAttention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B})},837352:(s,m,g,$,T)=>{r.Ra("RotaryEmbedding",s,{interleaved:!!m,numHeads:g,rotaryEmbeddingDim:$,scale:T})},837491:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837593:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837695:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},837806:s=>{r.ub(s)},837840:(s,m)=>r.wb(s,m,r.cb.xb,r.cb.errors)};function qt(s){this.name="ExitStatus",this.message=`Program terminated with exit(${s})`,this.status=s}class Vt{constructor(m){this.hb=m-24}}var sr=0,jt=0,xr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Kt=(s,m,g)=>{m>>>=0;var $=m+g;for(g=m;s[g]&&!(g>=$);)++g;if(16<g-m&&s.buffer&&xr)return xr.decode(s.subarray(m,g));for($="";m<g;){var T=s[m++];if(T&128){var B=s[m++]&63;if((T&224)==192)$+=String.fromCharCode((T&31)<<6|B);else{var H=s[m++]&63;T=(T&240)==224?(T&15)<<12|B<<6|H:(T&7)<<18|B<<12|H<<6|s[m++]&63,65536>T?$+=String.fromCharCode(T):(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023))}}else $+=String.fromCharCode(T)}return $},je=(s,m)=>(s>>>=0)?Kt(K,s,m):"",Wt=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);127>=$?m++:2047>=$?m+=2:55296<=$&&57343>=$?(m+=4,++g):m+=3}return m},at=(s,m,g,$)=>{if(g>>>=0,!(0<$))return 0;var T=g;$=g+$-1;for(var B=0;B<s.length;++B){var H=s.charCodeAt(B);if(55296<=H&&57343>=H){var q=s.charCodeAt(++B);H=65536+((H&1023)<<10)|q&1023}if(127>=H){if(g>=$)break;m[g++>>>0]=H}else{if(2047>=H){if(g+1>=$)break;m[g++>>>0]=192|H>>6}else{if(65535>=H){if(g+2>=$)break;m[g++>>>0]=224|H>>12}else{if(g+3>=$)break;m[g++>>>0]=240|H>>18,m[g++>>>0]=128|H>>12&63}m[g++>>>0]=128|H>>6&63}m[g++>>>0]=128|H&63}}return m[g>>>0]=0,g-T},Cr,ft=s=>{for(var m="";K[s>>>0];)m+=Cr[K[s++>>>0]];return m},ur={},Ar={},Ir={},st;function Tr(s,m,g={}){var $=m.name;if(!s)throw new st(`type "${$}" must have a positive integer typeid pointer`);if(Ar.hasOwnProperty(s)){if(g.nb)return;throw new st(`Cannot register type \'${$}\' twice`)}Ar[s]=m,delete Ir[s],ur.hasOwnProperty(s)&&(m=ur[s],delete ur[s],m.forEach(T=>T()))}function ht(s,m,g={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Tr(s,m,g)}var bt=(s,m,g)=>{switch(m){case 1:return g?$=>N[$>>>0]:$=>K[$>>>0];case 2:return g?$=>Q[$>>>1>>>0]:$=>he[$>>>1>>>0];case 4:return g?$=>W[$>>>2>>>0]:$=>se[$>>>2>>>0];case 8:return g?$=>We[$>>>3]:$=>ee[$>>>3];default:throw new TypeError(`invalid integer width (${m}): ${s}`)}},Er=[],Te=[];function dr(s){s>>>=0,9<s&&--Te[s+1]===0&&(Te[s]=void 0,Er.push(s))}var Xe=s=>{if(!s)throw new st("Cannot use deleted val. handle = "+s);return Te[s]},ut=s=>{switch(s){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let m=Er.pop()||Te.length;return Te[m]=s,Te[m+1]=1,m}};function lr(s){return this.fromWireType(se[s>>>2>>>0])}var Fn={name:"emscripten::val",fromWireType:s=>{var m=Xe(s);return dr(s),m},toWireType:(s,m)=>ut(m),argPackAdvance:8,readValueFromPointer:lr,bb:null},ge=(s,m)=>{switch(m){case 4:return function(g){return this.fromWireType(Ce[g>>>2>>>0])};case 8:return function(g){return this.fromWireType(ae[g>>>3>>>0])};default:throw new TypeError(`invalid float width (${m}): ${s}`)}},Yt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jr=(s,m)=>{for(var g=s>>1,$=g+m/2;!(g>=$)&&he[g>>>0];)++g;if(g<<=1,32<g-s&&Yt)return Yt.decode(K.subarray(s>>>0,g>>>0));for(g="",$=0;!($>=m/2);++$){var T=Q[s+2*$>>>1>>>0];if(T==0)break;g+=String.fromCharCode(T)}return g},qn=(s,m,g)=>{if(g??=2147483647,2>g)return 0;g-=2;var $=m;g=g<2*s.length?g/2:s.length;for(var T=0;T<g;++T)Q[m>>>1>>>0]=s.charCodeAt(T),m+=2;return Q[m>>>1>>>0]=0,m-$},Kr=s=>2*s.length,jn=(s,m)=>{for(var g=0,$="";!(g>=m/4);){var T=W[s+4*g>>>2>>>0];if(T==0)break;++g,65536<=T?(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023)):$+=String.fromCharCode(T)}return $},Yr=(s,m,g)=>{if(m>>>=0,g??=2147483647,4>g)return 0;var $=m;g=$+g-4;for(var T=0;T<s.length;++T){var B=s.charCodeAt(T);if(55296<=B&&57343>=B){var H=s.charCodeAt(++T);B=65536+((B&1023)<<10)|H&1023}if(W[m>>>2>>>0]=B,m+=4,m+4>g)break}return W[m>>>2>>>0]=0,m-$},Zr=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);55296<=$&&57343>=$&&++g,m+=4}return m},cr=(s,m)=>{var g=Ar[s];if(g===void 0)throw s=Mr(s),g=ft(s),rt(s),new st(`${m} has unknown type ${g}`);return g},Pr=(s,m,g)=>{var $=[];return s=s.toWireType($,g),$.length&&(se[m>>>2>>>0]=ut($)),s},He=s=>{try{s()}catch(m){ne(m)}},Xr=s=>{if(!R)try{s();try{L=L=s=L,r.onExit?.(s),R=!0,h(s,new qt(s))}catch(m){m instanceof qt||m=="unwind"||h(1,m)}}catch(m){m instanceof qt||m=="unwind"||h(1,m)}};function Qr(){var s=pe,m={};for(let[g,$]of Object.entries(s))m[g]=typeof $=="function"?(...T)=>{Zt.push(g);try{return $(...T)}finally{R||(Zt.pop(),dt&&gt===1&&Zt.length===0&&(gt=0,He(dn),typeof Fibers<"u"&&Fibers.Db()))}}:$;return m}var gt=0,dt=null,Bt=0,Zt=[],kr={},Or={},Jr=0,pr=null,en=[];function tn(){return new Promise((s,m)=>{pr={resolve:s,reject:m}})}function rn(){var s=Nt(65548),m=s+12;se[s>>>2>>>0]=m,se[s+4>>>2>>>0]=m+65536,m=Zt[0];var g=kr[m];return g===void 0&&(g=Jr++,kr[m]=g,Or[g]=m),W[s+8>>>2>>>0]=g,s}function nn(s){if(!R){if(gt===0){var m=!1,g=!1;s(($=0)=>{if(!R&&(Bt=$,m=!0,g)){gt=2,He(()=>vt(dt)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),$=!1;try{var T=(0,pe[Or[W[dt+8>>>2>>>0]]])()}catch(q){T=q,$=!0}var B=!1;if(!dt){var H=pr;H&&(pr=null,($?H.reject:H.resolve)(T),B=!0)}if($&&!B)throw T}}),g=!0,m||(gt=1,dt=rn(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),He(()=>Jt(dt)))}else gt===2?(gt=0,He(ct),rt(dt),dt=null,en.forEach(Xr)):ne(`invalid state: ${gt}`);return Bt}}function Rr(s){return nn(m=>{s().then(m)})}var Xt=[],on={},nt=s=>{var m=on[s];return m===void 0?ft(s):m},mr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Br=s=>{var m=Xt.length;return Xt.push(s),m},Kn=(s,m)=>{for(var g=Array(s),$=0;$<s;++$)g[$]=cr(se[m+4*$>>>2>>>0],"parameter "+$);return g},wt=(s,m)=>Object.defineProperty(m,"name",{value:s});function Yn(s){var m=Function;if(!(m instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof m} which is not a function`);var g=wt(m.name||"unknownFunctionName",function(){});return g.prototype=m.prototype,g=new g,s=m.apply(g,s),s instanceof Object?s:g}var Je=s=>s%4===0&&(s%100!==0||s%400===0),Dr=[0,31,60,91,121,152,182,213,244,274,305,335],fr=[0,31,59,90,120,151,181,212,243,273,304,334],lt=[],hr=(s,m)=>{lt.length=0;for(var g;g=K[s++>>>0];){var $=g!=105;$&=g!=112,m+=$&&m%8?4:0,lt.push(g==112?se[m>>>2>>>0]:g==106?We[m>>>3]:g==105?W[m>>>2>>>0]:ae[m>>>3>>>0]),m+=$?8:4}return lt},Qe={},ot=()=>{if(!Qt){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},m;for(m in Qe)Qe[m]===void 0?delete s[m]:s[m]=Qe[m];var g=[];for(m in s)g.push(`${m}=${s[m]}`);Qt=g}return Qt},Qt,Zn=[null,[],[]],an=[31,29,31,30,31,30,31,31,30,31,30,31],zr=[31,28,31,30,31,30,31,31,30,31,30,31];function Xn(s){var m=Array(Wt(s)+1);return at(s,m,0,m.length),m}function sn(s,m,g,$){function T(D,be,Ie){for(D=typeof D=="number"?D.toString():D||"";D.length<be;)D=Ie[0]+D;return D}function B(D,be){return T(D,be,"0")}function H(D,be){function Ie(Mt){return 0>Mt?-1:0<Mt?1:0}var zt;return(zt=Ie(D.getFullYear()-be.getFullYear()))===0&&(zt=Ie(D.getMonth()-be.getMonth()))===0&&(zt=Ie(D.getDate()-be.getDate())),zt}function q(D){switch(D.getDay()){case 0:return new Date(D.getFullYear()-1,11,29);case 1:return D;case 2:return new Date(D.getFullYear(),0,3);case 3:return new Date(D.getFullYear(),0,2);case 4:return new Date(D.getFullYear(),0,1);case 5:return new Date(D.getFullYear()-1,11,31);case 6:return new Date(D.getFullYear()-1,11,30)}}function te(D){var be=D.$a;for(D=new Date(new Date(D.ab+1900,0,1).getTime());0<be;){var Ie=D.getMonth(),zt=(Je(D.getFullYear())?an:zr)[Ie];if(be>zt-D.getDate())be-=zt-D.getDate()+1,D.setDate(1),11>Ie?D.setMonth(Ie+1):(D.setMonth(0),D.setFullYear(D.getFullYear()+1));else{D.setDate(D.getDate()+be);break}}return Ie=new Date(D.getFullYear()+1,0,4),be=q(new Date(D.getFullYear(),0,4)),Ie=q(Ie),0>=H(be,D)?0>=H(Ie,D)?D.getFullYear()+1:D.getFullYear():D.getFullYear()-1}s>>>=0,m>>>=0,g>>>=0,$>>>=0;var X=se[$+40>>>2>>>0];$={Ab:W[$>>>2>>>0],zb:W[$+4>>>2>>>0],fb:W[$+8>>>2>>>0],jb:W[$+12>>>2>>>0],gb:W[$+16>>>2>>>0],ab:W[$+20>>>2>>>0],Va:W[$+24>>>2>>>0],$a:W[$+28>>>2>>>0],Cb:W[$+32>>>2>>>0],yb:W[$+36>>>2>>>0],Bb:X?je(X):""},g=je(g),X={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var de in X)g=g.replace(new RegExp(de,"g"),X[de]);var Ee="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Oe="January February March April May June July August September October November December".split(" ");X={"%a":D=>Ee[D.Va].substring(0,3),"%A":D=>Ee[D.Va],"%b":D=>Oe[D.gb].substring(0,3),"%B":D=>Oe[D.gb],"%C":D=>B((D.ab+1900)/100|0,2),"%d":D=>B(D.jb,2),"%e":D=>T(D.jb,2," "),"%g":D=>te(D).toString().substring(2),"%G":te,"%H":D=>B(D.fb,2),"%I":D=>(D=D.fb,D==0?D=12:12<D&&(D-=12),B(D,2)),"%j":D=>{for(var be=0,Ie=0;Ie<=D.gb-1;be+=(Je(D.ab+1900)?an:zr)[Ie++]);return B(D.jb+be,3)},"%m":D=>B(D.gb+1,2),"%M":D=>B(D.zb,2),"%n":()=>`\n`,"%p":D=>0<=D.fb&&12>D.fb?"AM":"PM","%S":D=>B(D.Ab,2),"%t":()=>"	","%u":D=>D.Va||7,"%U":D=>B(Math.floor((D.$a+7-D.Va)/7),2),"%V":D=>{var be=Math.floor((D.$a+7-(D.Va+6)%7)/7);if(2>=(D.Va+371-D.$a-2)%7&&be++,be)be==53&&(Ie=(D.Va+371-D.$a)%7,Ie==4||Ie==3&&Je(D.ab)||(be=1));else{be=52;var Ie=(D.Va+7-D.$a-1)%7;(Ie==4||Ie==5&&Je(D.ab%400-1))&&be++}return B(be,2)},"%w":D=>D.Va,"%W":D=>B(Math.floor((D.$a+7-(D.Va+6)%7)/7),2),"%y":D=>(D.ab+1900).toString().substring(2),"%Y":D=>D.ab+1900,"%z":D=>{D=D.yb;var be=0<=D;return D=Math.abs(D)/60,(be?"+":"-")+("0000"+(D/60*100+D%60)).slice(-4)},"%Z":D=>D.Bb,"%%":()=>"%"},g=g.replace(/%%/g,"\\0\\0");for(de in X)g.includes(de)&&(g=g.replace(new RegExp(de,"g"),X[de]($)));return g=g.replace(/\\0\\0/g,"%"),de=Xn(g),de.length>m?0:(N.set(de,s>>>0),de.length-1)}for(var un=Array(256),gr=0;256>gr;++gr)un[gr]=String.fromCharCode(gr);Cr=un,st=r.BindingError=class extends Error{constructor(s){super(s),this.name="BindingError"}},r.InternalError=class extends Error{constructor(s){super(s),this.name="InternalError"}},Te.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=()=>Te.length/2-5-Er.length;var Qn={ia:function(s,m,g){return Rr(async()=>{await r.sb(s,m,g)})},a:function(s,m,g){s>>>=0;var $=new Vt(s);throw se[$.hb+16>>>2>>>0]=0,se[$.hb+4>>>2>>>0]=m>>>0,se[$.hb+8>>>2>>>0]=g>>>0,sr=s,jt++,sr},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:function($,T){if(typeof T!="bigint"&&typeof T!="number")throw T===null?T="null":($=typeof T,T=$==="object"||$==="array"||$==="function"?T.toString():""+T),new TypeError(`Cannot convert "${T}" to ${this.name}`);return typeof T=="number"&&(T=BigInt(T)),T},argPackAdvance:8,readValueFromPointer:bt(m,g>>>0,m.indexOf("u")==-1),bb:null})},K:function(s,m,g,$){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:function(T){return!!T},toWireType:function(T,B){return B?g:$},argPackAdvance:8,readValueFromPointer:function(T){return this.fromWireType(K[T>>>0])},bb:null})},J:function(s){return ht(s>>>0,Fn)},B:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:($,T)=>T,argPackAdvance:8,readValueFromPointer:ge(m,g>>>0),bb:null})},s:function(s,m,g,$,T){if(s>>>=0,g>>>=0,m=ft(m>>>0),T===-1&&(T=4294967295),T=q=>q,$===0){var B=32-8*g;T=q=>q<<B>>>B}var H=m.includes("unsigned")?function(q,te){return te>>>0}:function(q,te){return te};ht(s,{name:m,fromWireType:T,toWireType:H,argPackAdvance:8,readValueFromPointer:bt(m,g,$!==0),bb:null})},o:function(s,m,g){function $(B){return new T(N.buffer,se[B+4>>>2>>>0],se[B>>>2>>>0])}var T=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][m];g=ft(g>>>0),ht(s>>>0,{name:g,fromWireType:$,argPackAdvance:8,readValueFromPointer:$},{nb:!0})},D:function(s,m){m=ft(m>>>0);var g=m==="std::string";ht(s>>>0,{name:m,fromWireType:function($){var T=se[$>>>2>>>0],B=$+4;if(g)for(var H=B,q=0;q<=T;++q){var te=B+q;if(q==T||K[te>>>0]==0){if(H=je(H,te-H),X===void 0)var X=H;else X+=String.fromCharCode(0),X+=H;H=te+1}}else{for(X=Array(T),q=0;q<T;++q)X[q]=String.fromCharCode(K[B+q>>>0]);X=X.join("")}return rt($),X},toWireType:function($,T){T instanceof ArrayBuffer&&(T=new Uint8Array(T));var B=typeof T=="string";if(!(B||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int8Array))throw new st("Cannot pass non-string to std::string");var H=g&&B?Wt(T):T.length,q=Nt(4+H+1),te=q+4;if(se[q>>>2>>>0]=H,g&&B)at(T,K,te,H+1);else if(B)for(B=0;B<H;++B){var X=T.charCodeAt(B);if(255<X)throw rt(te),new st("String has UTF-16 code units that do not fit in 8 bits");K[te+B>>>0]=X}else for(B=0;B<H;++B)K[te+B>>>0]=T[B];return $!==null&&$.push(rt,q),q},argPackAdvance:8,readValueFromPointer:lr,bb($){rt($)}})},x:function(s,m,g){if(m>>>=0,g>>>=0,g=ft(g),m===2)var $=jr,T=qn,B=Kr,H=q=>he[q>>>1>>>0];else m===4&&($=jn,T=Yr,B=Zr,H=q=>se[q>>>2>>>0]);ht(s>>>0,{name:g,fromWireType:q=>{for(var te=se[q>>>2>>>0],X,de=q+4,Ee=0;Ee<=te;++Ee){var Oe=q+4+Ee*m;(Ee==te||H(Oe)==0)&&(de=$(de,Oe-de),X===void 0?X=de:(X+=String.fromCharCode(0),X+=de),de=Oe+m)}return rt(q),X},toWireType:(q,te)=>{if(typeof te!="string")throw new st(`Cannot pass non-string to C++ string type ${g}`);var X=B(te),de=Nt(4+X+m);return se[de>>>2>>>0]=X/m,T(te,de+4,X+m),q!==null&&q.push(rt,de),de},argPackAdvance:8,readValueFromPointer:lr,bb(q){rt(q)}})},L:function(s,m){m=ft(m>>>0),ht(s>>>0,{ob:!0,name:m,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(s,m,g){return m>>>=0,g>>>=0,s=Xe(s>>>0),m=cr(m,"emval::as"),Pr(m,g,s)},w:function(s){return s>>>=0,Rr(()=>(s=Xe(s),s.then(ut)))},n:function(s,m,g,$){return g>>>=0,$>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),s(null,m,g,$)},j:function(s,m,g,$,T){return g>>>=0,$>>>=0,T>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),g=nt(g),s(m,m[g],$,T)},b:dr,A:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),s==m},m:function(s){return s>>>=0,s===0?ut(mr()):(s=nt(s),ut(mr()[s]))},i:function(s,m,g){m=Kn(s,m>>>0);var $=m.shift();s--;var T=`return function (obj, func, destructorsRef, args) {\n`,B=0,H=[];g===0&&H.push("obj");for(var q=["retType"],te=[$],X=0;X<s;++X)H.push("arg"+X),q.push("argType"+X),te.push(m[X]),T+=`  var arg${X} = argType${X}.readValueFromPointer(args${B?"+"+B:""});\n`,B+=m[X].argPackAdvance;return T+=`  var rv = ${g===1?"new func":"func.call"}(${H.join(", ")});\n`,$.ob||(q.push("emval_returnValue"),te.push(Pr),T+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),q.push(T+`};\n`),s=Yn(q)(...te),g=`methodCaller<(${m.map(de=>de.name).join(", ")}) => ${$.name}>`,Br(wt(g,s))},r:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),ut(s[m])},e:function(s){s>>>=0,9<s&&(Te[s+1]+=1)},t:function(){return ut([])},l:function(s){s=Xe(s>>>0);for(var m=Array(s.length),g=0;g<s.length;g++)m[g]=s[g];return ut(m)},f:function(s){return ut(nt(s>>>0))},k:function(){return ut({})},h:function(s){s>>>=0;for(var m=Xe(s);m.length;){var g=m.pop();m.pop()(g)}dr(s)},g:function(s,m,g){m>>>=0,g>>>=0,s=Xe(s>>>0),m=Xe(m),g=Xe(g),s[m]=g},c:function(s,m){return m>>>=0,s=cr(s>>>0,"_emval_take_value"),s=s.readValueFromPointer(m),ut(s)},W:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getUTCSeconds(),W[m+4>>>2>>>0]=s.getUTCMinutes(),W[m+8>>>2>>>0]=s.getUTCHours(),W[m+12>>>2>>>0]=s.getUTCDate(),W[m+16>>>2>>>0]=s.getUTCMonth(),W[m+20>>>2>>>0]=s.getUTCFullYear()-1900,W[m+24>>>2>>>0]=s.getUTCDay(),W[m+28>>>2>>>0]=(s.getTime()-Date.UTC(s.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getSeconds(),W[m+4>>>2>>>0]=s.getMinutes(),W[m+8>>>2>>>0]=s.getHours(),W[m+12>>>2>>>0]=s.getDate(),W[m+16>>>2>>>0]=s.getMonth(),W[m+20>>>2>>>0]=s.getFullYear()-1900,W[m+24>>>2>>>0]=s.getDay(),W[m+28>>>2>>>0]=(Je(s.getFullYear())?Dr:fr)[s.getMonth()]+s.getDate()-1|0,W[m+36>>>2>>>0]=-(60*s.getTimezoneOffset());var g=new Date(s.getFullYear(),6,1).getTimezoneOffset(),$=new Date(s.getFullYear(),0,1).getTimezoneOffset();W[m+32>>>2>>>0]=(g!=$&&s.getTimezoneOffset()==Math.min($,g))|0},Y:function(s){s>>>=0;var m=new Date(W[s+20>>>2>>>0]+1900,W[s+16>>>2>>>0],W[s+12>>>2>>>0],W[s+8>>>2>>>0],W[s+4>>>2>>>0],W[s>>>2>>>0],0),g=W[s+32>>>2>>>0],$=m.getTimezoneOffset(),T=new Date(m.getFullYear(),6,1).getTimezoneOffset(),B=new Date(m.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(B,T);return 0>g?W[s+32>>>2>>>0]=+(T!=B&&H==$):0<g!=(H==$)&&(T=Math.max(B,T),m.setTime(m.getTime()+6e4*((0<g?H:T)-$))),W[s+24>>>2>>>0]=m.getDay(),W[s+28>>>2>>>0]=(Je(m.getFullYear())?Dr:fr)[m.getMonth()]+m.getDate()-1|0,W[s>>>2>>>0]=m.getSeconds(),W[s+4>>>2>>>0]=m.getMinutes(),W[s+8>>>2>>>0]=m.getHours(),W[s+12>>>2>>>0]=m.getDate(),W[s+16>>>2>>>0]=m.getMonth(),W[s+20>>>2>>>0]=m.getYear(),s=m.getTime(),BigInt(isNaN(s)?-1:s/1e3)},U:function(){return-52},V:function(){},N:function(s,m,g,$){g>>>=0,$>>>=0;var T=new Date().getFullYear(),B=new Date(T,0,1),H=new Date(T,6,1);T=B.getTimezoneOffset();var q=H.getTimezoneOffset();se[s>>>0>>>2>>>0]=60*Math.max(T,q),W[m>>>0>>>2>>>0]=+(T!=q),s=te=>te.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],B=s(B),H=s(H),q<T?(at(B,K,g,17),at(H,K,$,17)):(at(B,K,$,17),at(H,K,g,17))},v:()=>{ne("")},d:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},I:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(s){s>>>=0;var m=K.length;if(4294901760<s)return!1;for(var g=1;4>=g;g*=2){var $=m*(1+.2/g);$=Math.min($,s+100663296);var T=Math;$=Math.max(s,$);e:{T=(T.min.call(T,4294901760,$+(65536-$%65536)%65536)-O.buffer.byteLength+65535)/65536;try{O.grow(T),Ae();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},$:function(s,m){s>>>=0,m>>>=0;var g=0;return ot().forEach(($,T)=>{var B=m+g;for(T=se[s+4*T>>>2>>>0]=B,B=0;B<$.length;++B)N[T++>>>0]=$.charCodeAt(B);N[T>>>0]=0,g+=$.length+1}),0},aa:function(s,m){s>>>=0,m>>>=0;var g=ot();se[s>>>2>>>0]=g.length;var $=0;return g.forEach(T=>$+=T.length+1),se[m>>>2>>>0]=$,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(s,m,g,$){m>>>=0,g>>>=0,$>>>=0;for(var T=0,B=0;B<g;B++){var H=se[m>>>2>>>0],q=se[m+4>>>2>>>0];m+=8;for(var te=0;te<q;te++){var X=K[H+te>>>0],de=Zn[s];X===0||X===10?((s===1?E:P)(Kt(de,0)),de.length=0):de.push(X)}T+=q}return se[$>>>2>>>0]=T,0},fa:sn,p:function(s,m,g,$){return sn(s>>>0,m>>>0,g>>>0,$>>>0)}},pe=function(){function s(g){return pe=g.exports,pe=Qr(),pe=ln(),O=pe.ja,Ae(),ie.unshift(pe.ka),le--,le==0&&(qe!==null&&(clearInterval(qe),qe=null),G&&(g=G,G=null,g())),pe}var m={a:Qn};if(le++,r.instantiateWasm)try{return r.instantiateWasm(m,s)}catch(g){P(`Module.instantiateWasm callback failed with error: ${g}`),i(g)}return mt(m,function(g){s(g.instance)}).catch(i),{}}(),Mr=s=>(Mr=pe.la)(s);r._OrtInit=(s,m)=>(r._OrtInit=pe.ma)(s,m),r._OrtGetLastError=(s,m)=>(r._OrtGetLastError=pe.na)(s,m),r._OrtCreateSessionOptions=(s,m,g,$,T,B,H,q,te,X)=>(r._OrtCreateSessionOptions=pe.oa)(s,m,g,$,T,B,H,q,te,X),r._OrtAppendExecutionProvider=(s,m)=>(r._OrtAppendExecutionProvider=pe.pa)(s,m),r._OrtAddFreeDimensionOverride=(s,m,g)=>(r._OrtAddFreeDimensionOverride=pe.qa)(s,m,g),r._OrtAddSessionConfigEntry=(s,m,g)=>(r._OrtAddSessionConfigEntry=pe.ra)(s,m,g),r._OrtReleaseSessionOptions=s=>(r._OrtReleaseSessionOptions=pe.sa)(s),r._OrtCreateSession=(s,m,g)=>(r._OrtCreateSession=pe.ta)(s,m,g),r._OrtReleaseSession=s=>(r._OrtReleaseSession=pe.ua)(s),r._OrtGetInputOutputCount=(s,m,g)=>(r._OrtGetInputOutputCount=pe.va)(s,m,g),r._OrtGetInputName=(s,m)=>(r._OrtGetInputName=pe.wa)(s,m),r._OrtGetOutputName=(s,m)=>(r._OrtGetOutputName=pe.xa)(s,m),r._OrtFree=s=>(r._OrtFree=pe.ya)(s),r._OrtCreateTensor=(s,m,g,$,T,B)=>(r._OrtCreateTensor=pe.za)(s,m,g,$,T,B),r._OrtGetTensorData=(s,m,g,$,T)=>(r._OrtGetTensorData=pe.Aa)(s,m,g,$,T),r._OrtReleaseTensor=s=>(r._OrtReleaseTensor=pe.Ba)(s),r._OrtCreateRunOptions=(s,m,g,$)=>(r._OrtCreateRunOptions=pe.Ca)(s,m,g,$),r._OrtAddRunConfigEntry=(s,m,g)=>(r._OrtAddRunConfigEntry=pe.Da)(s,m,g),r._OrtReleaseRunOptions=s=>(r._OrtReleaseRunOptions=pe.Ea)(s),r._OrtCreateBinding=s=>(r._OrtCreateBinding=pe.Fa)(s),r._OrtBindInput=(s,m,g)=>(r._OrtBindInput=pe.Ga)(s,m,g),r._OrtBindOutput=(s,m,g,$)=>(r._OrtBindOutput=pe.Ha)(s,m,g,$),r._OrtClearBoundOutputs=s=>(r._OrtClearBoundOutputs=pe.Ia)(s),r._OrtReleaseBinding=s=>(r._OrtReleaseBinding=pe.Ja)(s),r._OrtRunWithBinding=(s,m,g,$,T)=>(r._OrtRunWithBinding=pe.Ka)(s,m,g,$,T),r._OrtRun=(s,m,g,$,T,B,H,q)=>(r._OrtRun=pe.La)(s,m,g,$,T,B,H,q),r._OrtEndProfiling=s=>(r._OrtEndProfiling=pe.Ma)(s),r._JsepOutput=(s,m,g)=>(r._JsepOutput=pe.Na)(s,m,g),r._JsepGetNodeName=s=>(r._JsepGetNodeName=pe.Oa)(s);var Nt=r._malloc=s=>(Nt=r._malloc=pe.Pa)(s),rt=r._free=s=>(rt=r._free=pe.Qa)(s),yr=s=>(yr=pe.Sa)(s),br=s=>(br=pe.Ta)(s),Ur=()=>(Ur=pe.Ua)(),Jt=s=>(Jt=pe.Wa)(s),dn=()=>(dn=pe.Xa)(),vt=s=>(vt=pe.Ya)(s),ct=()=>(ct=pe.Za)();r.___start_em_js=837952,r.___stop_em_js=838113;function ln(){var s=pe;s=Object.assign({},s);var m=g=>$=>g($)>>>0;return s.la=m(s.la),s.Pa=m(s.Pa),s.Ta=m(s.Ta),s.Ua=(g=>()=>g()>>>0)(s.Ua),s}r.stackSave=()=>Ur(),r.stackRestore=s=>yr(s),r.stackAlloc=s=>br(s),r.UTF8ToString=je,r.stringToUTF8=(s,m,g)=>at(s,K,m,g),r.lengthBytesUTF8=Wt;var Dt;G=function s(){Dt||Vr(),Dt||(G=s)};function Vr(){if(!(0<le)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var s=r.preRun.shift();me.unshift(s)}for(;0<me.length;)me.shift()(r);if(!(0<le||Dt||(Dt=!0,r.calledRun=!0,R))){for(;0<ie.length;)ie.shift()(r);for(o(r);0<ue.length;)ue.shift()(r)}}}return Vr(),u}})();typeof Ti=="object"&&typeof po=="object"?po.exports=Ii:typeof define=="function"&&define.amd&&define([],()=>Ii)});var Pi=Wr(()=>{});var ki=Wr(()=>{});var Oi={};gn(Oi,{cpus:()=>ll});var ll,Ri=Y(()=>{ll=void 0});var zi=Wr((Di,mo)=>{"use strict";var Bi=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){function r(){return ae.buffer!=ue.buffer&&Ne(),ue}function o(){return ae.buffer!=ue.buffer&&Ne(),le}function i(){return ae.buffer!=ue.buffer&&Ne(),qe}function u(){return ae.buffer!=ue.buffer&&Ne(),G}function a(){return ae.buffer!=ue.buffer&&Ne(),ne}function c(){return ae.buffer!=ue.buffer&&Ne(),xe}function p(){return ae.buffer!=ue.buffer&&Ne(),Ke}function h(){return ae.buffer!=ue.buffer&&Ne(),Ut}var d=t,y,w,_=new Promise((n,l)=>{y=n,w=l});d.mountExternalData=(n,l)=>{(d.Db||(d.Db=new Map)).set(n,l)},d.unmountExternalData=()=>{delete d.Db};let v=()=>{let n=(f,b,C)=>(...k)=>{let V=ct,F=b?.();k=f(...k);let re=b?.();return F!==re&&(f=re,C(F),b=C=null),ct!=V?T():k},l=f=>async(...b)=>{try{if(d.Cb)throw Error("Session already started");let C=d.Cb={ec:b[0],errors:[]},k=await f(...b);if(d.Cb!==C)throw Error("Session mismatch");d.Kb?.flush();let V=C.errors;if(0<V.length){let F=await Promise.all(V);if(F=F.filter(re=>re),0<F.length)throw Error(F.join(`\n`))}return k}finally{d.Cb=null}};d._OrtCreateSession=n(d._OrtCreateSession,()=>d._OrtCreateSession,f=>d._OrtCreateSession=f),d._OrtRun=l(n(d._OrtRun,()=>d._OrtRun,f=>d._OrtRun=f)),d._OrtRunWithBinding=l(n(d._OrtRunWithBinding,()=>d._OrtRunWithBinding,f=>d._OrtRunWithBinding=f)),d._OrtBindInput=n(d._OrtBindInput,()=>d._OrtBindInput,f=>d._OrtBindInput=f),v=void 0};d.jsepInit=(n,l)=>{if(v?.(),n==="webgpu"){[d.Kb,d.Wb,d.$b,d.Lb,d.Zb,d.ob,d.ac,d.cc,d.Xb,d.Yb,d.bc]=l;let f=d.Kb;d.jsepRegisterBuffer=(b,C,k,V)=>f.registerBuffer(b,C,k,V),d.jsepGetBuffer=b=>f.getBuffer(b),d.jsepCreateDownloader=(b,C,k)=>f.createDownloader(b,C,k),d.jsepOnReleaseSession=b=>{f.onReleaseSession(b)},d.jsepOnRunStart=b=>f.onRunStart(b)}};var S=Object.assign({},d),A="./this.program",I=(n,l)=>{throw l},x=typeof window=="object",E=typeof importScripts=="function",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O=d.ENVIRONMENT_IS_PTHREAD||!1,R="";function L(n){return d.locateFile?d.locateFile(n,R):R+n}var N,K,Q;if(P){var he=(uo(),wr(so)),W=(co(),wr(lo));R=E?W.dirname(R)+"/":__dirname+"/",N=(n,l)=>(n=Wt(n)?new URL(n):W.normalize(n),he.readFileSync(n,l?void 0:"utf8")),Q=n=>(n=N(n,!0),n.buffer||(n=new Uint8Array(n)),n),K=(n,l,f,b=!0)=>{n=Wt(n)?new URL(n):W.normalize(n),he.readFile(n,b?void 0:"utf8",(C,k)=>{C?f(C):l(b?k.buffer:k)})},!d.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),I=(n,l)=>{throw process.exitCode=n,l},global.Worker=Pi().Worker}else(x||E)&&(E?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),typeof e<"u"&&e&&(R=e),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),P||(N=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.send(null),l.responseText},E&&(Q=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),K=(n,l,f)=>{var b=new XMLHttpRequest;b.open("GET",n,!0),b.responseType="arraybuffer",b.onload=()=>{b.status==200||b.status==0&&b.response?l(b.response):f()},b.onerror=f,b.send(null)}));P&&typeof performance>"u"&&(global.performance=ki().performance);var se=console.log.bind(console),Ce=console.error.bind(console);P&&(se=(...n)=>he.writeSync(1,n.join(" ")+`\n`),Ce=(...n)=>he.writeSync(2,n.join(" ")+`\n`));var We=se,ee=Ce;Object.assign(d,S),S=null;var ae,Ae,me=!1,ie,ue,le,qe,G,ne,xe,Ke,Be,Ge,Ut;function Ne(){var n=ae.buffer;d.HEAP8=ue=new Int8Array(n),d.HEAP16=qe=new Int16Array(n),d.HEAPU8=le=new Uint8Array(n),d.HEAPU16=G=new Uint16Array(n),d.HEAP32=ne=new Int32Array(n),d.HEAPU32=xe=new Uint32Array(n),d.HEAPF32=Ke=new Float32Array(n),d.HEAPF64=Ut=new Float64Array(n),d.HEAP64=Be=new BigInt64Array(n),d.HEAPU64=Ge=new BigUint64Array(n)}var Ye=16777216;if(O)ae=d.wasmMemory;else if(d.wasmMemory)ae=d.wasmMemory;else if(ae=new WebAssembly.Memory({initial:Ye/65536,maximum:65536,shared:!0}),!(ae.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),P&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ne(),Ye=ae.buffer.byteLength;var mt=[],Rt=[],qt=[],Vt=0,sr=null,jt=null;function xr(){if(Vt--,Vt==0&&(sr!==null&&(clearInterval(sr),sr=null),jt)){var n=jt;jt=null,n()}}function Kt(n){throw n="Aborted("+n+")",ee(n),me=!0,ie=1,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),w(n),n}var je=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),at;at="ort-wasm-simd-threaded.wasm",je(at)||(at=L(at));function Cr(n){if(Q)return Q(n);throw"both async and sync fetching of the wasm failed"}function ft(n){if(x||E){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw`failed to load wasm binary file at \'${n}\'`;return l.arrayBuffer()}).catch(()=>Cr(n));if(K)return new Promise((l,f)=>{K(n,b=>l(new Uint8Array(b)),f)})}return Promise.resolve().then(()=>Cr(n))}function ur(n,l,f){return ft(n).then(b=>WebAssembly.instantiate(b,l)).then(f,b=>{ee(`failed to asynchronously prepare wasm: ${b}`),Kt(b)})}function Ar(n,l){var f=at;return typeof WebAssembly.instantiateStreaming!="function"||je(f)||Wt(f)||P||typeof fetch!="function"?ur(f,n,l):fetch(f,{credentials:"same-origin"}).then(b=>WebAssembly.instantiateStreaming(b,n).then(l,function(C){return ee(`wasm streaming compile failed: ${C}`),ee("falling back to ArrayBuffer instantiation"),ur(f,n,l)}))}var Ir={826468:(n,l,f,b)=>{if(typeof d>"u"||!d.Db)return 1;if(n=He(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=d.Db.get(n),!n)return 2;if(l>>>=0,f>>>=0,b>>>=0,l+f>n.byteLength)return 3;try{return o().set(n.subarray(l,l+f),b>>>0),0}catch{return 4}},826969:()=>{d.Xb()},827e3:()=>{d.Yb()},827029:()=>{d.bc()},827054:n=>d.Wb(n),827087:n=>d.$b(n),827119:(n,l,f)=>{d.Lb(n,l,f,!0)},827158:(n,l,f)=>{d.Lb(n,l,f)},827191:n=>{d.ob("Abs",n,void 0)},827242:n=>{d.ob("Neg",n,void 0)},827293:n=>{d.ob("Floor",n,void 0)},827346:n=>{d.ob("Ceil",n,void 0)},827398:n=>{d.ob("Reciprocal",n,void 0)},827456:n=>{d.ob("Sqrt",n,void 0)},827508:n=>{d.ob("Exp",n,void 0)},827559:n=>{d.ob("Erf",n,void 0)},827610:n=>{d.ob("Sigmoid",n,void 0)},827665:(n,l,f)=>{d.ob("HardSigmoid",n,{alpha:l,beta:f})},827744:n=>{d.ob("Log",n,void 0)},827795:n=>{d.ob("Sin",n,void 0)},827846:n=>{d.ob("Cos",n,void 0)},827897:n=>{d.ob("Tan",n,void 0)},827948:n=>{d.ob("Asin",n,void 0)},828e3:n=>{d.ob("Acos",n,void 0)},828052:n=>{d.ob("Atan",n,void 0)},828104:n=>{d.ob("Sinh",n,void 0)},828156:n=>{d.ob("Cosh",n,void 0)},828208:n=>{d.ob("Asinh",n,void 0)},828261:n=>{d.ob("Acosh",n,void 0)},828314:n=>{d.ob("Atanh",n,void 0)},828367:n=>{d.ob("Tanh",n,void 0)},828419:n=>{d.ob("Not",n,void 0)},828470:(n,l,f)=>{d.ob("Clip",n,{min:l,max:f})},828539:n=>{d.ob("Clip",n,void 0)},828591:(n,l)=>{d.ob("Elu",n,{alpha:l})},828649:n=>{d.ob("Relu",n,void 0)},828701:(n,l)=>{d.ob("LeakyRelu",n,{alpha:l})},828765:(n,l)=>{d.ob("ThresholdedRelu",n,{alpha:l})},828835:(n,l)=>{d.ob("Cast",n,{to:l})},828893:n=>{d.ob("Add",n,void 0)},828944:n=>{d.ob("Sub",n,void 0)},828995:n=>{d.ob("Mul",n,void 0)},829046:n=>{d.ob("Div",n,void 0)},829097:n=>{d.ob("Pow",n,void 0)},829148:n=>{d.ob("Equal",n,void 0)},829201:n=>{d.ob("Greater",n,void 0)},829256:n=>{d.ob("GreaterOrEqual",n,void 0)},829318:n=>{d.ob("Less",n,void 0)},829370:n=>{d.ob("LessOrEqual",n,void 0)},829429:(n,l,f,b,C)=>{d.ob("ReduceMean",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829588:(n,l,f,b,C)=>{d.ob("ReduceMax",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829746:(n,l,f,b,C)=>{d.ob("ReduceMin",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829904:(n,l,f,b,C)=>{d.ob("ReduceProd",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830063:(n,l,f,b,C)=>{d.ob("ReduceSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830221:(n,l,f,b,C)=>{d.ob("ReduceL1",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830378:(n,l,f,b,C)=>{d.ob("ReduceL2",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830535:(n,l,f,b,C)=>{d.ob("ReduceLogSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830696:(n,l,f,b,C)=>{d.ob("ReduceSumSquare",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830860:(n,l,f,b,C)=>{d.ob("ReduceLogSumExp",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},831024:n=>{d.ob("Where",n,void 0)},831077:(n,l,f)=>{d.ob("Transpose",n,{perm:l?Array.from(a().subarray(l>>>0,f>>>0)):[]})},831185:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831318:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831451:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},831852:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},832417:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},832818:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},833383:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833474:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},833758:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833849:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834133:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834220:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834500:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834587:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834867:(n,l,f,b,C)=>{d.ob("Gemm",n,{alpha:l,beta:f,transA:b,transB:C})},834971:n=>{d.ob("MatMul",n,void 0)},835025:(n,l,f,b)=>{d.ob("ArgMax",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835133:(n,l,f,b)=>{d.ob("ArgMin",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835241:(n,l)=>{d.ob("Softmax",n,{axis:l})},835304:(n,l)=>{d.ob("Concat",n,{axis:l})},835364:(n,l,f,b,C)=>{d.ob("Split",n,{axis:l,numOutputs:f,splitSizes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},835504:n=>{d.ob("Expand",n,void 0)},835558:(n,l)=>{d.ob("Gather",n,{axis:Number(l)})},835629:(n,l)=>{d.ob("GatherElements",n,{axis:Number(l)})},835708:(n,l,f,b,C,k,V,F,re,J,ce)=>{d.ob("Resize",n,{antialias:l,axes:f?Array.from(a().subarray(f>>>0,b>>>0)):[],coordinateTransformMode:He(C),cubicCoeffA:k,excludeOutside:V,extrapolationValue:F,keepAspectRatioPolicy:He(re),mode:He(J),nearestMode:He(ce)})},836054:(n,l,f,b,C,k,V)=>{d.ob("Slice",n,{starts:l?Array.from(a().subarray(l>>>0,f>>>0)):[],ends:b?Array.from(a().subarray(b>>>0,C>>>0)):[],axes:k?Array.from(a().subarray(k>>>0,V>>>0)):[]})},836270:n=>{d.ob("Tile",n,void 0)},836322:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},836433:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836547:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836661:n=>{d.ob("Range",n,void 0)},836714:(n,l)=>{d.ob("Einsum",n,{equation:He(l)})},836795:(n,l,f,b,C)=>{d.ob("Pad",n,{mode:l,value:f,pads:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},836922:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837091:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837260:(n,l,f)=>{d.ob("CumSum",n,{exclusive:Number(l),reverse:Number(f)})},837357:(n,l,f,b,C,k,V,F,re)=>{d.ob("Attention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k,qkvHiddenSizes:V?Array.from(a().subarray(Number(F)>>>0,Number(F)+V>>>0)):[],pastPresentShareBuffer:!!re})},837629:n=>{d.ob("BiasAdd",n,void 0)},837684:n=>{d.ob("BiasSplitGelu",n,void 0)},837745:n=>{d.ob("FastGelu",n,void 0)},837801:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze)=>{d.ob("Conv",n,{format:re?"NHWC":"NCHW",auto_pad:l,dilations:[f],group:b,kernel_shape:[C],pads:k?Array.from(a().subarray(k>>>0,V>>>0)):[],strides:[F],w_is_const:()=>!!r()[J>>>0],activation:He(ce),activation_params:Re?Array.from(p().subarray(Re>>>0,ze>>>0)):[]})},838171:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("Conv",n,{format:Re?"NHWC":"NCHW",auto_pad:l,dilations:[f,b],group:C,kernel_shape:[k,V],pads:F?Array.from(a().subarray(F>>>0,re>>>0)):[],strides:[J,ce],w_is_const:()=>!!r()[ze>>>0],activation:He(z),activation_params:we?Array.from(p().subarray(we>>>0,Pe>>>0)):[]})},838562:n=>{d.ob("Gelu",n,void 0)},838614:(n,l,f,b,C,k)=>{d.ob("MatMulNBits",n,{k:l,n:f,accuracyLevel:b,bits:C,blockSize:k})},838741:(n,l,f,b,C,k)=>{d.ob("MultiHeadAttention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k})},838900:(n,l,f,b,C)=>{d.ob("RotaryEmbedding",n,{interleaved:!!l,numHeads:f,rotaryEmbeddingDim:b,scale:C})},839039:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839141:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839243:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},839354:n=>{d.ac(n)},839388:(n,l)=>d.cc(n,l,d.Cb.ec,d.Cb.errors)};function st(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Tr=n=>{n.terminate(),n.onmessage=()=>{}},ht=n=>{ge.xb.length==0&&(lr(),ge.Mb(ge.xb[0]));var l=ge.xb.pop();if(!l)return 6;ge.yb.push(l),ge.ub[n.wb]=l,l.wb=n.wb;var f={cmd:"run",start_routine:n.fc,arg:n.Rb,pthread_ptr:n.wb};return P&&l.unref(),l.postMessage(f,n.mc),0},bt=0,Er=n=>{var l=io();return n=n(),fn(l),n},Te=(n,l,...f)=>Er(()=>{for(var b=2*f.length,C=oo(8*b),k=C>>>3,V=0;V<f.length;V++){var F=f[V];typeof F=="bigint"?(Be[k+2*V]=1n,Be[k+2*V+1]=F):(Be[k+2*V]=0n,h()[k+2*V+1>>>0]=F)}return gi(n,0,b,C,l)});function dr(n){if(O)return Te(0,1,n);ie=n,0<bt||(ge.hc(),d.onExit?.(n),me=!0),I(n,new st(n))}var Xe=n=>{if(ie=n,O)throw jr(n),"unwind";dr(n)};function ut(){for(var n=d.numThreads;n--;)lr();mt.unshift(()=>{Vt++,Fn(()=>xr())})}function lr(){var n=L("ort-wasm-simd-threaded.worker.js");n=new Worker(n),ge.xb.push(n)}function Fn(n){O?n():Promise.all(ge.xb.map(ge.Mb)).then(n)}var ge={xb:[],yb:[],Qb:[],ub:{},Gb(){O?(ge.receiveObjectTransfer=ge.dc,ge.threadInitTLS=ge.Pb,ge.setExitStatus=ge.Ob):ut()},Ob:n=>ie=n,pc:["$terminateWorker"],hc:()=>{for(var n of ge.yb)Tr(n);for(n of ge.xb)Tr(n);ge.xb=[],ge.yb=[],ge.ub=[]},Nb:n=>{var l=n.wb;delete ge.ub[l],ge.xb.push(n),ge.yb.splice(ge.yb.indexOf(n),1),n.wb=0,ro(l)},dc(){},Pb(){ge.Qb.forEach(n=>n())},Mb:n=>new Promise(l=>{n.onmessage=k=>{k=k.data;var V=k.cmd;if(k.targetThread&&k.targetThread!=pn()){var F=ge.ub[k.targetThread];F?F.postMessage(k,k.transferList):ee(`Internal error! Worker sent a message "${V}" to target pthread ${k.targetThread}, but that thread no longer exists!`)}else V==="checkMailbox"?rt():V==="spawnThread"?ht(k):V==="cleanupThread"?ge.Nb(ge.ub[k.thread]):V==="killThread"?(k=k.thread,V=ge.ub[k],delete ge.ub[k],Tr(V),ro(k),ge.yb.splice(ge.yb.indexOf(V),1),V.wb=0):V==="cancelThread"?ge.ub[k.thread].postMessage({cmd:"cancel"}):V==="loaded"?(n.loaded=!0,P&&!n.wb&&n.unref(),l(n)):V==="alert"?alert(`Thread ${k.threadId}: ${k.text}`):k.target==="setimmediate"?n.postMessage(k):V==="callHandler"?d[k.handler](...k.args):V&&ee(`worker sent an unknown command ${V}`)},n.onerror=k=>{throw ee(`worker sent an error! ${k.filename}:${k.lineno}: ${k.message}`),k},P&&(n.on("message",k=>n.onmessage({data:k})),n.on("error",k=>n.onerror(k)));var f=[],b=["onExit"],C;for(C of b)d.hasOwnProperty(C)&&f.push(C);n.postMessage({cmd:"load",handlers:f,urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:ae,wasmModule:Ae})})};d.PThread=ge;var Yt=n=>{for(;0<n.length;)n.shift()(d)};d.establishStackSpace=()=>{var n=pn(),l=c()[n+52>>>2>>>0];n=c()[n+56>>>2>>>0],bi(l,l-n),fn(l)};function jr(n){if(O)return Te(1,0,n);Xe(n)}d.invokeEntryPoint=(n,l)=>{bt=0,n=wi(n,l),0<bt?ge.Ob(n):no(n)};class qn{constructor(l){this.Ib=l-24}Gb(l,f){c()[this.Ib+16>>>2>>>0]=0,c()[this.Ib+4>>>2>>>0]=l,c()[this.Ib+8>>>2>>>0]=f}}var Kr=0,jn=0;function Yr(n,l,f,b){return O?Te(2,1,n,l,f,b):Zr(n,l,f,b)}function Zr(n,l,f,b){if(n>>>=0,l>>>=0,f>>>=0,b>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var C=[];return O&&C.length===0?Yr(n,l,f,b):(n={fc:f,wb:n,Rb:b,mc:C},O?(n.oc="spawnThread",postMessage(n,C),0):ht(n))}var cr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Pr=(n,l,f)=>{l>>>=0;var b=l+f;for(f=l;n[f]&&!(f>=b);)++f;if(16<f-l&&n.buffer&&cr)return cr.decode(n.buffer instanceof SharedArrayBuffer?n.slice(l,f):n.subarray(l,f));for(b="";l<f;){var C=n[l++];if(C&128){var k=n[l++]&63;if((C&224)==192)b+=String.fromCharCode((C&31)<<6|k);else{var V=n[l++]&63;C=(C&240)==224?(C&15)<<12|k<<6|V:(C&7)<<18|k<<12|V<<6|n[l++]&63,65536>C?b+=String.fromCharCode(C):(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023))}}else b+=String.fromCharCode(C)}return b},He=(n,l)=>(n>>>=0)?Pr(o(),n,l):"";function Xr(n,l,f){return O?Te(3,1,n,l,f):0}function Qr(n,l){if(O)return Te(4,1,n,l)}var gt=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);127>=b?l++:2047>=b?l+=2:55296<=b&&57343>=b?(l+=4,++f):l+=3}return l},dt=(n,l,f,b)=>{if(f>>>=0,!(0<b))return 0;var C=f;b=f+b-1;for(var k=0;k<n.length;++k){var V=n.charCodeAt(k);if(55296<=V&&57343>=V){var F=n.charCodeAt(++k);V=65536+((V&1023)<<10)|F&1023}if(127>=V){if(f>=b)break;l[f++>>>0]=V}else{if(2047>=V){if(f+1>=b)break;l[f++>>>0]=192|V>>6}else{if(65535>=V){if(f+2>=b)break;l[f++>>>0]=224|V>>12}else{if(f+3>=b)break;l[f++>>>0]=240|V>>18,l[f++>>>0]=128|V>>12&63}l[f++>>>0]=128|V>>6&63}l[f++>>>0]=128|V&63}}return l[f>>>0]=0,f-C},Bt=(n,l,f)=>dt(n,o(),l,f);function Zt(n,l){if(O)return Te(5,1,n,l)}function kr(n,l,f){if(O)return Te(6,1,n,l,f)}function Or(n,l,f){return O?Te(7,1,n,l,f):0}function Jr(n,l){if(O)return Te(8,1,n,l)}function pr(n,l,f){if(O)return Te(9,1,n,l,f)}function en(n,l,f,b){if(O)return Te(10,1,n,l,f,b)}function tn(n,l,f,b){if(O)return Te(11,1,n,l,f,b)}function rn(n,l,f,b){if(O)return Te(12,1,n,l,f,b)}function nn(n){if(O)return Te(13,1,n)}function Rr(n,l){if(O)return Te(14,1,n,l)}function Xt(n,l,f){if(O)return Te(15,1,n,l,f)}var on,nt=n=>{for(var l="";o()[n>>>0];)l+=on[o()[n++>>>0]];return l},mr={},Br={},Kn={},wt;function Yn(n,l,f={}){var b=l.name;if(!n)throw new wt(`type "${b}" must have a positive integer typeid pointer`);if(Br.hasOwnProperty(n)){if(f.Ub)return;throw new wt(`Cannot register type \'${b}\' twice`)}Br[n]=l,delete Kn[n],mr.hasOwnProperty(n)&&(l=mr[n],delete mr[n],l.forEach(C=>C()))}function Je(n,l,f={}){if(!("argPackAdvance"in l))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Yn(n,l,f)}var Dr=(n,l,f)=>{switch(l){case 1:return f?b=>r()[b>>>0]:b=>o()[b>>>0];case 2:return f?b=>i()[b>>>1>>>0]:b=>u()[b>>>1>>>0];case 4:return f?b=>a()[b>>>2>>>0]:b=>c()[b>>>2>>>0];case 8:return f?b=>Be[b>>>3]:b=>Ge[b>>>3];default:throw new TypeError(`invalid integer width (${l}): ${n}`)}},fr=[],lt=[];function hr(n){n>>>=0,9<n&&--lt[n+1]===0&&(lt[n]=void 0,fr.push(n))}var Qe=n=>{if(!n)throw new wt("Cannot use deleted val. handle = "+n);return lt[n]},ot=n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let l=fr.pop()||lt.length;return lt[l]=n,lt[l+1]=1,l}};function Qt(n){return this.fromWireType(c()[n>>>2>>>0])}var Zn={name:"emscripten::val",fromWireType:n=>{var l=Qe(n);return hr(n),l},toWireType:(n,l)=>ot(l),argPackAdvance:8,readValueFromPointer:Qt,Bb:null},an=(n,l)=>{switch(l){case 4:return function(f){return this.fromWireType(p()[f>>>2>>>0])};case 8:return function(f){return this.fromWireType(h()[f>>>3>>>0])};default:throw new TypeError(`invalid float width (${l}): ${n}`)}},zr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Xn=(n,l)=>{for(var f=n>>1,b=f+l/2;!(f>=b)&&u()[f>>>0];)++f;if(f<<=1,32<f-n&&zr)return zr.decode(o().slice(n,f));for(f="",b=0;!(b>=l/2);++b){var C=i()[n+2*b>>>1>>>0];if(C==0)break;f+=String.fromCharCode(C)}return f},sn=(n,l,f)=>{if(f??=2147483647,2>f)return 0;f-=2;var b=l;f=f<2*n.length?f/2:n.length;for(var C=0;C<f;++C){var k=n.charCodeAt(C);i()[l>>>1>>>0]=k,l+=2}return i()[l>>>1>>>0]=0,l-b},un=n=>2*n.length,gr=(n,l)=>{for(var f=0,b="";!(f>=l/4);){var C=a()[n+4*f>>>2>>>0];if(C==0)break;++f,65536<=C?(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023)):b+=String.fromCharCode(C)}return b},Qn=(n,l,f)=>{if(l>>>=0,f??=2147483647,4>f)return 0;var b=l;f=b+f-4;for(var C=0;C<n.length;++C){var k=n.charCodeAt(C);if(55296<=k&&57343>=k){var V=n.charCodeAt(++C);k=65536+((k&1023)<<10)|V&1023}if(a()[l>>>2>>>0]=k,l+=4,l+4>f)break}return a()[l>>>2>>>0]=0,l-b},pe=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);55296<=b&&57343>=b&&++f,l+=4}return l},Mr=n=>{if(!me)try{if(n(),!(0<bt))try{O?no(ie):Xe(ie)}catch(l){l instanceof st||l=="unwind"||I(1,l)}}catch(l){l instanceof st||l=="unwind"||I(1,l)}};function Nt(n){n>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(a(),n>>>2,n).value.then(rt),n+=128,Atomics.store(a(),n>>>2,1))}d.__emscripten_thread_mailbox_await=Nt;var rt=()=>{var n=pn();n&&(Nt(n),Mr(yi))};d.checkMailbox=rt;var yr=[],br=(n,l)=>{var f=Br[n];if(f===void 0)throw n=fi(n),f=nt(n),At(n),new wt(`${l} has unknown type ${f}`);return f},Ur=(n,l,f)=>{var b=[];return n=n.toWireType(b,f),b.length&&(c()[l>>>2>>>0]=ot(b)),n},Jt=n=>{try{n()}catch(l){Kt(l)}};function dn(){var n=oe,l={};for(let[f,b]of Object.entries(n))l[f]=typeof b=="function"?(...C)=>{Dt.push(f);try{return b(...C)}finally{me||(Dt.pop(),ct&&vt===1&&Dt.length===0&&(vt=0,bt+=1,Jt($i),typeof Fibers<"u"&&Fibers.rc()))}}:b;return l}var vt=0,ct=null,ln=0,Dt=[],Vr={},s={},m=0,g=null,$=[];function T(){return new Promise((n,l)=>{g={resolve:n,reject:l}})}function B(){var n=mn(65548),l=n+12;c()[n>>>2>>>0]=l,c()[n+4>>>2>>>0]=l+65536,l=Dt[0];var f=Vr[l];return f===void 0&&(f=m++,Vr[l]=f,s[f]=l),l=f,a()[n+8>>>2>>>0]=l,n}function H(){var n=a()[ct+8>>>2>>>0];return n=oe[s[n]],--bt,n()}function q(n){if(!me){if(vt===0){var l=!1,f=!1;n((b=0)=>{if(!me&&(ln=b,l=!0,f)){vt=2,Jt(()=>_i(ct)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),b=!1;try{var C=H()}catch(F){C=F,b=!0}var k=!1;if(!ct){var V=g;V&&(g=null,(b?V.reject:V.resolve)(C),k=!0)}if(b&&!k)throw C}}),f=!0,l||(vt=1,ct=B(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Jt(()=>vi(ct)))}else vt===2?(vt=0,Jt(Si),At(ct),ct=null,$.forEach(Mr)):Kt(`invalid state: ${vt}`);return ln}}function te(n){return q(l=>{n().then(l)})}var X=[],de={},Ee=n=>{var l=de[n];return l===void 0?nt(n):l},Oe=()=>typeof globalThis=="object"?globalThis:Function("return this")(),D=n=>{var l=X.length;return X.push(n),l},be=(n,l)=>{for(var f=Array(n),b=0;b<n;++b)f[b]=br(c()[l+4*b>>>2>>>0],"parameter "+b);return f},Ie=(n,l)=>Object.defineProperty(l,"name",{value:n});function zt(n){var l=Function;if(!(l instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof l} which is not a function`);var f=Ie(l.name||"unknownFunctionName",function(){});return f.prototype=l.prototype,f=new f,n=l.apply(f,n),n instanceof Object?n:f}var Mt=n=>n%4===0&&(n%100!==0||n%400===0),Qo=[0,31,60,91,121,152,182,213,244,274,305,335],Jo=[0,31,59,90,120,151,181,212,243,273,304,334];function ei(n,l,f,b,C,k,V){return O?Te(16,1,n,l,f,b,C,k,V):-52}function ti(n,l,f,b,C,k){if(O)return Te(17,1,n,l,f,b,C,k)}var Jn=[],ri=(n,l)=>{Jn.length=0;for(var f;f=o()[n++>>>0];){var b=f!=105;b&=f!=112,l+=b&&l%8?4:0,Jn.push(f==112?c()[l>>>2>>>0]:f==106?Be[l>>>3]:f==105?a()[l>>>2>>>0]:h()[l>>>3>>>0]),l+=b?8:4}return Jn},eo={},ni=()=>{if(!to){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},l;for(l in eo)eo[l]===void 0?delete n[l]:n[l]=eo[l];var f=[];for(l in n)f.push(`${l}=${n[l]}`);to=f}return to},to;function oi(n,l){if(O)return Te(18,1,n,l);n>>>=0,l>>>=0;var f=0;return ni().forEach((b,C)=>{var k=l+f;for(C=c()[n+4*C>>>2>>>0]=k,k=0;k<b.length;++k)r()[C++>>>0]=b.charCodeAt(k);r()[C>>>0]=0,f+=b.length+1}),0}function ii(n,l){if(O)return Te(19,1,n,l);n>>>=0,l>>>=0;var f=ni();c()[n>>>2>>>0]=f.length;var b=0;return f.forEach(C=>b+=C.length+1),c()[l>>>2>>>0]=b,0}function ai(n){return O?Te(20,1,n):52}function si(n,l,f,b){return O?Te(21,1,n,l,f,b):52}function ui(n,l,f,b){return O?Te(22,1,n,l,f,b):70}var Xd=[null,[],[]];function di(n,l,f,b){if(O)return Te(23,1,n,l,f,b);l>>>=0,f>>>=0,b>>>=0;for(var C=0,k=0;k<f;k++){var V=c()[l>>>2>>>0],F=c()[l+4>>>2>>>0];l+=8;for(var re=0;re<F;re++){var J=o()[V+re>>>0],ce=Xd[n];J===0||J===10?((n===1?We:ee)(Pr(ce,0)),ce.length=0):ce.push(J)}C+=F}return c()[b>>>2>>>0]=C,0}var li=[31,29,31,30,31,30,31,31,30,31,30,31],ci=[31,28,31,30,31,30,31,31,30,31,30,31];function Qd(n){var l=Array(gt(n)+1);return dt(n,l,0,l.length),l}var Jd=(n,l)=>{r().set(n,l>>>0)};function pi(n,l,f,b){function C(z,we,Pe){for(z=typeof z=="number"?z.toString():z||"";z.length<we;)z=Pe[0]+z;return z}function k(z,we){return C(z,we,"0")}function V(z,we){function Pe(Ci){return 0>Ci?-1:0<Ci?1:0}var er;return(er=Pe(z.getFullYear()-we.getFullYear()))===0&&(er=Pe(z.getMonth()-we.getMonth()))===0&&(er=Pe(z.getDate()-we.getDate())),er}function F(z){switch(z.getDay()){case 0:return new Date(z.getFullYear()-1,11,29);case 1:return z;case 2:return new Date(z.getFullYear(),0,3);case 3:return new Date(z.getFullYear(),0,2);case 4:return new Date(z.getFullYear(),0,1);case 5:return new Date(z.getFullYear()-1,11,31);case 6:return new Date(z.getFullYear()-1,11,30)}}function re(z){var we=z.zb;for(z=new Date(new Date(z.Ab+1900,0,1).getTime());0<we;){var Pe=z.getMonth(),er=(Mt(z.getFullYear())?li:ci)[Pe];if(we>er-z.getDate())we-=er-z.getDate()+1,z.setDate(1),11>Pe?z.setMonth(Pe+1):(z.setMonth(0),z.setFullYear(z.getFullYear()+1));else{z.setDate(z.getDate()+we);break}}return Pe=new Date(z.getFullYear()+1,0,4),we=F(new Date(z.getFullYear(),0,4)),Pe=F(Pe),0>=V(we,z)?0>=V(Pe,z)?z.getFullYear()+1:z.getFullYear():z.getFullYear()-1}n>>>=0,l>>>=0,f>>>=0,b>>>=0;var J=c()[b+40>>>2>>>0];b={kc:a()[b>>>2>>>0],jc:a()[b+4>>>2>>>0],Eb:a()[b+8>>>2>>>0],Jb:a()[b+12>>>2>>>0],Fb:a()[b+16>>>2>>>0],Ab:a()[b+20>>>2>>>0],vb:a()[b+24>>>2>>>0],zb:a()[b+28>>>2>>>0],qc:a()[b+32>>>2>>>0],ic:a()[b+36>>>2>>>0],lc:J?He(J):""},f=He(f),J={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ce in J)f=f.replace(new RegExp(ce,"g"),J[ce]);var Re="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ze="January February March April May June July August September October November December".split(" ");J={"%a":z=>Re[z.vb].substring(0,3),"%A":z=>Re[z.vb],"%b":z=>ze[z.Fb].substring(0,3),"%B":z=>ze[z.Fb],"%C":z=>k((z.Ab+1900)/100|0,2),"%d":z=>k(z.Jb,2),"%e":z=>C(z.Jb,2," "),"%g":z=>re(z).toString().substring(2),"%G":re,"%H":z=>k(z.Eb,2),"%I":z=>(z=z.Eb,z==0?z=12:12<z&&(z-=12),k(z,2)),"%j":z=>{for(var we=0,Pe=0;Pe<=z.Fb-1;we+=(Mt(z.Ab+1900)?li:ci)[Pe++]);return k(z.Jb+we,3)},"%m":z=>k(z.Fb+1,2),"%M":z=>k(z.jc,2),"%n":()=>`\n`,"%p":z=>0<=z.Eb&&12>z.Eb?"AM":"PM","%S":z=>k(z.kc,2),"%t":()=>"	","%u":z=>z.vb||7,"%U":z=>k(Math.floor((z.zb+7-z.vb)/7),2),"%V":z=>{var we=Math.floor((z.zb+7-(z.vb+6)%7)/7);if(2>=(z.vb+371-z.zb-2)%7&&we++,we)we==53&&(Pe=(z.vb+371-z.zb)%7,Pe==4||Pe==3&&Mt(z.Ab)||(we=1));else{we=52;var Pe=(z.vb+7-z.zb-1)%7;(Pe==4||Pe==5&&Mt(z.Ab%400-1))&&we++}return k(we,2)},"%w":z=>z.vb,"%W":z=>k(Math.floor((z.zb+7-(z.vb+6)%7)/7),2),"%y":z=>(z.Ab+1900).toString().substring(2),"%Y":z=>z.Ab+1900,"%z":z=>{z=z.ic;var we=0<=z;return z=Math.abs(z)/60,(we?"+":"-")+("0000"+(z/60*100+z%60)).slice(-4)},"%Z":z=>z.lc,"%%":()=>"%"},f=f.replace(/%%/g,"\\0\\0");for(ce in J)f.includes(ce)&&(f=f.replace(new RegExp(ce,"g"),J[ce](b)));return f=f.replace(/\\0\\0/g,"%"),ce=Qd(f),ce.length>l?0:(Jd(ce,n),ce.length-1)}ge.Gb();for(var mi=Array(256),cn=0;256>cn;++cn)mi[cn]=String.fromCharCode(cn);on=mi,wt=d.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},d.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},lt.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=()=>lt.length/2-5-fr.length;var el=[dr,jr,Yr,Xr,Qr,Zt,kr,Or,Jr,pr,en,tn,rn,nn,Rr,Xt,ei,ti,oi,ii,ai,si,ui,di],tl={ua:function(n,l,f){return te(async()=>{await d.Zb(n,l,f)})},b:function(n,l,f){throw n>>>=0,new qn(n).Gb(l>>>0,f>>>0),Kr=n,jn++,Kr},ia:function(n){hi(n>>>0,!E,1,!x,131072,!1),ge.Pb()},G:function(n){n>>>=0,O?postMessage({cmd:"cleanupThread",thread:n}):ge.Nb(ge.ub[n])},_:Zr,A:Xr,pa:Qr,W:Zt,Y:kr,qa:Or,na:Jr,fa:pr,ma:en,K:tn,X:rn,U:nn,oa:Rr,V:Xt,E:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:function(b,C){if(typeof C!="bigint"&&typeof C!="number")throw C===null?C="null":(b=typeof C,C=b==="object"||b==="array"||b==="function"?C.toString():""+C),new TypeError(`Cannot convert "${C}" to ${this.name}`);return typeof C=="number"&&(C=BigInt(C)),C},argPackAdvance:8,readValueFromPointer:Dr(l,f,l.indexOf("u")==-1),Bb:null})},O:function(n,l,f,b){n>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:function(C){return!!C},toWireType:function(C,k){return k?f:b},argPackAdvance:8,readValueFromPointer:function(C){return this.fromWireType(o()[C>>>0])},Bb:null})},N:function(n){return Je(n>>>0,Zn)},D:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:(b,C)=>C,argPackAdvance:8,readValueFromPointer:an(l,f),Bb:null})},t:function(n,l,f,b,C){if(n>>>=0,f>>>=0,l=nt(l>>>0),C===-1&&(C=4294967295),C=F=>F,b===0){var k=32-8*f;C=F=>F<<k>>>k}var V=l.includes("unsigned")?function(F,re){return re>>>0}:function(F,re){return re};Je(n,{name:l,fromWireType:C,toWireType:V,argPackAdvance:8,readValueFromPointer:Dr(l,f,b!==0),Bb:null})},p:function(n,l,f){function b(k){var V=c()[k>>>2>>>0];return k=c()[k+4>>>2>>>0],new C(r().buffer,k,V)}n>>>=0;var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][l];f=nt(f>>>0),Je(n,{name:f,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{Ub:!0})},F:function(n,l){n>>>=0,l=nt(l>>>0);var f=l==="std::string";Je(n,{name:l,fromWireType:function(b){var C=c()[b>>>2>>>0],k=b+4;if(f)for(var V=k,F=0;F<=C;++F){var re=k+F;if(F==C||o()[re>>>0]==0){if(V=He(V,re-V),J===void 0)var J=V;else J+=String.fromCharCode(0),J+=V;V=re+1}}else{for(J=Array(C),F=0;F<C;++F)J[F]=String.fromCharCode(o()[k+F>>>0]);J=J.join("")}return At(b),J},toWireType:function(b,C){C instanceof ArrayBuffer&&(C=new Uint8Array(C));var k=typeof C=="string";if(!(k||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int8Array))throw new wt("Cannot pass non-string to std::string");var V=f&&k?gt(C):C.length,F=mn(4+V+1),re=F+4;if(c()[F>>>2>>>0]=V,f&&k)Bt(C,re,V+1);else if(k)for(k=0;k<V;++k){var J=C.charCodeAt(k);if(255<J)throw At(re),new wt("String has UTF-16 code units that do not fit in 8 bits");o()[re+k>>>0]=J}else for(k=0;k<V;++k)o()[re+k>>>0]=C[k];return b!==null&&b.push(At,F),F},argPackAdvance:8,readValueFromPointer:Qt,Bb(b){At(b)}})},z:function(n,l,f){if(n>>>=0,l>>>=0,f>>>=0,f=nt(f),l===2)var b=Xn,C=sn,k=un,V=F=>u()[F>>>1>>>0];else l===4&&(b=gr,C=Qn,k=pe,V=F=>c()[F>>>2>>>0]);Je(n,{name:f,fromWireType:F=>{for(var re=c()[F>>>2>>>0],J,ce=F+4,Re=0;Re<=re;++Re){var ze=F+4+Re*l;(Re==re||V(ze)==0)&&(ce=b(ce,ze-ce),J===void 0?J=ce:(J+=String.fromCharCode(0),J+=ce),ce=ze+l)}return At(F),J},toWireType:(F,re)=>{if(typeof re!="string")throw new wt(`Cannot pass non-string to C++ string type ${f}`);var J=k(re),ce=mn(4+J+l);return c()[ce>>>2>>>0]=J/l,C(re,ce+4,J+l),F!==null&&F.push(At,ce),ce},argPackAdvance:8,readValueFromPointer:Qt,Bb(F){At(F)}})},P:function(n,l){n>>>=0,l=nt(l>>>0),Je(n,{Vb:!0,name:l,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(n,l){n>>>=0,n==l>>>0?setTimeout(rt):O?postMessage({targetThread:n,cmd:"checkMailbox"}):(n=ge.ub[n])&&n.postMessage({cmd:"checkMailbox"})},$:function(n,l,f,b,C){l>>>=0,f>>>=0,b/=2,yr.length=b,C=C>>>0>>>3;for(var k=0;k<b;k++)yr[k]=Be[C+2*k]?Be[C+2*k+1]:h()[C+2*k+1>>>0];return n=l?Ir[l]:el[n],ge.Sb=f,f=n(...yr),ge.Sb=0,f},ha:Nt,sa:function(n){P&&ge.ub[n>>>0].ref()},w:function(n,l,f){return l>>>=0,f>>>=0,n=Qe(n>>>0),l=br(l,"emval::as"),Ur(l,f,n)},y:function(n){return n>>>=0,te(()=>(n=Qe(n),n.then(ot)))},o:function(n,l,f,b){return f>>>=0,b>>>=0,n=X[n>>>0],l=Qe(l>>>0),n(null,l,f,b)},k:function(n,l,f,b,C){return f>>>=0,b>>>=0,C>>>=0,n=X[n>>>0],l=Qe(l>>>0),f=Ee(f),n(l,l[f],b,C)},c:hr,C:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),n==l},n:function(n){return n>>>=0,n===0?ot(Oe()):(n=Ee(n),ot(Oe()[n]))},j:function(n,l,f){l=be(n,l>>>0);var b=l.shift();n--;var C=`return function (obj, func, destructorsRef, args) {\n`,k=0,V=[];f===0&&V.push("obj");for(var F=["retType"],re=[b],J=0;J<n;++J)V.push("arg"+J),F.push("argType"+J),re.push(l[J]),C+=`  var arg${J} = argType${J}.readValueFromPointer(args${k?"+"+k:""});\n`,k+=l[J].argPackAdvance;return C+=`  var rv = ${f===1?"new func":"func.call"}(${V.join(", ")});\n`,b.Vb||(F.push("emval_returnValue"),re.push(Ur),C+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),F.push(C+`};\n`),n=zt(F)(...re),f=`methodCaller<(${l.map(ce=>ce.name).join(", ")}) => ${b.name}>`,D(Ie(f,n))},s:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),ot(n[l])},d:function(n){n>>>=0,9<n&&(lt[n+1]+=1)},v:function(){return ot([])},m:function(n){n=Qe(n>>>0);for(var l=Array(n.length),f=0;f<n.length;f++)l[f]=n[f];return ot(l)},g:function(n){return ot(Ee(n>>>0))},l:function(){return ot({})},i:function(n){n>>>=0;for(var l=Qe(n);l.length;){var f=l.pop();l.pop()(f)}hr(n)},h:function(n,l,f){l>>>=0,f>>>=0,n=Qe(n>>>0),l=Qe(l),f=Qe(f),n[l]=f},e:function(n,l){return l>>>=0,n=br(n>>>0,"_emval_take_value"),n=n.readValueFromPointer(l),ot(n)},ca:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getUTCSeconds(),a()[l+4>>>2>>>0]=n.getUTCMinutes(),a()[l+8>>>2>>>0]=n.getUTCHours(),a()[l+12>>>2>>>0]=n.getUTCDate(),a()[l+16>>>2>>>0]=n.getUTCMonth(),a()[l+20>>>2>>>0]=n.getUTCFullYear()-1900,a()[l+24>>>2>>>0]=n.getUTCDay(),n=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[l+28>>>2>>>0]=n},da:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getSeconds(),a()[l+4>>>2>>>0]=n.getMinutes(),a()[l+8>>>2>>>0]=n.getHours(),a()[l+12>>>2>>>0]=n.getDate(),a()[l+16>>>2>>>0]=n.getMonth(),a()[l+20>>>2>>>0]=n.getFullYear()-1900,a()[l+24>>>2>>>0]=n.getDay();var f=(Mt(n.getFullYear())?Qo:Jo)[n.getMonth()]+n.getDate()-1|0;a()[l+28>>>2>>>0]=f,a()[l+36>>>2>>>0]=-(60*n.getTimezoneOffset()),f=new Date(n.getFullYear(),6,1).getTimezoneOffset();var b=new Date(n.getFullYear(),0,1).getTimezoneOffset();n=(f!=b&&n.getTimezoneOffset()==Math.min(b,f))|0,a()[l+32>>>2>>>0]=n},ea:function(n){n>>>=0;var l=new Date(a()[n+20>>>2>>>0]+1900,a()[n+16>>>2>>>0],a()[n+12>>>2>>>0],a()[n+8>>>2>>>0],a()[n+4>>>2>>>0],a()[n>>>2>>>0],0),f=a()[n+32>>>2>>>0],b=l.getTimezoneOffset(),C=new Date(l.getFullYear(),6,1).getTimezoneOffset(),k=new Date(l.getFullYear(),0,1).getTimezoneOffset(),V=Math.min(k,C);return 0>f?a()[n+32>>>2>>>0]=+(C!=k&&V==b):0<f!=(V==b)&&(C=Math.max(k,C),l.setTime(l.getTime()+6e4*((0<f?V:C)-b))),a()[n+24>>>2>>>0]=l.getDay(),f=(Mt(l.getFullYear())?Qo:Jo)[l.getMonth()]+l.getDate()-1|0,a()[n+28>>>2>>>0]=f,a()[n>>>2>>>0]=l.getSeconds(),a()[n+4>>>2>>>0]=l.getMinutes(),a()[n+8>>>2>>>0]=l.getHours(),a()[n+12>>>2>>>0]=l.getDate(),a()[n+16>>>2>>>0]=l.getMonth(),a()[n+20>>>2>>>0]=l.getYear(),n=l.getTime(),BigInt(isNaN(n)?-1:n/1e3)},aa:ei,ba:ti,R:function(n,l,f,b){n>>>=0,l>>>=0,f>>>=0,b>>>=0;var C=new Date().getFullYear(),k=new Date(C,0,1),V=new Date(C,6,1);C=k.getTimezoneOffset();var F=V.getTimezoneOffset(),re=Math.max(C,F);c()[n>>>2>>>0]=60*re,a()[l>>>2>>>0]=+(C!=F),n=J=>J.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],k=n(k),V=n(V),F<C?(Bt(k,f,17),Bt(V,b,17)):(Bt(k,b,17),Bt(V,f,17))},q:()=>{Kt("")},f:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},M:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},H:()=>{},L:()=>Date.now(),ra:()=>{throw bt+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>P?(Ri(),wr(Oi)).cpus().length:navigator.hardwareConcurrency,Q:function(n){n>>>=0;var l=o().length;if(n<=l||4294901760<n)return!1;for(var f=1;4>=f;f*=2){var b=l*(1+.2/f);b=Math.min(b,n+100663296);var C=Math;b=Math.max(n,b);e:{C=(C.min.call(C,4294901760,b+(65536-b%65536)%65536)-ae.buffer.byteLength+65535)/65536;try{ae.grow(C),Ne();var k=1;break e}catch{}k=void 0}if(k)return!0}return!1},ja:oi,la:ii,Z:Xe,B:ai,J:si,ga:ui,I:di,a:ae||d.wasmMemory,ka:pi,r:function(n,l,f,b){return pi(n>>>0,l>>>0,f>>>0,b>>>0)}},oe=function(){function n(f,b){return oe=f.exports,oe=dn(),oe=rl(),ge.Qb.push(oe.cb),Rt.unshift(oe.va),Ae=b,xr(),oe}var l={a:tl};if(Vt++,d.instantiateWasm)try{return d.instantiateWasm(l,n)}catch(f){ee(`Module.instantiateWasm callback failed with error: ${f}`),w(f)}return Ar(l,function(f){n(f.instance,f.module)}).catch(w),{}}(),fi=n=>(fi=oe.wa)(n);d.__embind_initialize_bindings=()=>(d.__embind_initialize_bindings=oe.xa)(),d._OrtInit=(n,l)=>(d._OrtInit=oe.ya)(n,l),d._OrtGetLastError=(n,l)=>(d._OrtGetLastError=oe.za)(n,l),d._OrtCreateSessionOptions=(n,l,f,b,C,k,V,F,re,J)=>(d._OrtCreateSessionOptions=oe.Aa)(n,l,f,b,C,k,V,F,re,J),d._OrtAppendExecutionProvider=(n,l)=>(d._OrtAppendExecutionProvider=oe.Ba)(n,l),d._OrtAddFreeDimensionOverride=(n,l,f)=>(d._OrtAddFreeDimensionOverride=oe.Ca)(n,l,f),d._OrtAddSessionConfigEntry=(n,l,f)=>(d._OrtAddSessionConfigEntry=oe.Da)(n,l,f),d._OrtReleaseSessionOptions=n=>(d._OrtReleaseSessionOptions=oe.Ea)(n),d._OrtCreateSession=(n,l,f)=>(d._OrtCreateSession=oe.Fa)(n,l,f),d._OrtReleaseSession=n=>(d._OrtReleaseSession=oe.Ga)(n),d._OrtGetInputOutputCount=(n,l,f)=>(d._OrtGetInputOutputCount=oe.Ha)(n,l,f),d._OrtGetInputName=(n,l)=>(d._OrtGetInputName=oe.Ia)(n,l),d._OrtGetOutputName=(n,l)=>(d._OrtGetOutputName=oe.Ja)(n,l),d._OrtFree=n=>(d._OrtFree=oe.Ka)(n),d._OrtCreateTensor=(n,l,f,b,C,k)=>(d._OrtCreateTensor=oe.La)(n,l,f,b,C,k),d._OrtGetTensorData=(n,l,f,b,C)=>(d._OrtGetTensorData=oe.Ma)(n,l,f,b,C),d._OrtReleaseTensor=n=>(d._OrtReleaseTensor=oe.Na)(n),d._OrtCreateRunOptions=(n,l,f,b)=>(d._OrtCreateRunOptions=oe.Oa)(n,l,f,b),d._OrtAddRunConfigEntry=(n,l,f)=>(d._OrtAddRunConfigEntry=oe.Pa)(n,l,f),d._OrtReleaseRunOptions=n=>(d._OrtReleaseRunOptions=oe.Qa)(n),d._OrtCreateBinding=n=>(d._OrtCreateBinding=oe.Ra)(n),d._OrtBindInput=(n,l,f)=>(d._OrtBindInput=oe.Sa)(n,l,f),d._OrtBindOutput=(n,l,f,b)=>(d._OrtBindOutput=oe.Ta)(n,l,f,b),d._OrtClearBoundOutputs=n=>(d._OrtClearBoundOutputs=oe.Ua)(n),d._OrtReleaseBinding=n=>(d._OrtReleaseBinding=oe.Va)(n),d._OrtRunWithBinding=(n,l,f,b,C)=>(d._OrtRunWithBinding=oe.Wa)(n,l,f,b,C),d._OrtRun=(n,l,f,b,C,k,V,F)=>(d._OrtRun=oe.Xa)(n,l,f,b,C,k,V,F),d._OrtEndProfiling=n=>(d._OrtEndProfiling=oe.Ya)(n),d._JsepOutput=(n,l,f)=>(d._JsepOutput=oe.Za)(n,l,f),d._JsepGetNodeName=n=>(d._JsepGetNodeName=oe._a)(n);var pn=d._pthread_self=()=>(pn=d._pthread_self=oe.$a)(),mn=d._malloc=n=>(mn=d._malloc=oe.ab)(n),At=d._free=n=>(At=d._free=oe.bb)(n);d.__emscripten_tls_init=()=>(d.__emscripten_tls_init=oe.cb)();var hi=d.__emscripten_thread_init=(n,l,f,b,C,k)=>(hi=d.__emscripten_thread_init=oe.eb)(n,l,f,b,C,k);d.__emscripten_thread_crashed=()=>(d.__emscripten_thread_crashed=oe.fb)();var gi=(n,l,f,b,C)=>(gi=oe.gb)(n,l,f,b,C),ro=n=>(ro=oe.hb)(n),no=d.__emscripten_thread_exit=n=>(no=d.__emscripten_thread_exit=oe.ib)(n),yi=()=>(yi=oe.jb)(),bi=(n,l)=>(bi=oe.kb)(n,l),fn=n=>(fn=oe.lb)(n),oo=n=>(oo=oe.mb)(n),io=()=>(io=oe.nb)(),wi=d.dynCall_ii=(n,l)=>(wi=d.dynCall_ii=oe.pb)(n,l),vi=n=>(vi=oe.qb)(n),$i=()=>($i=oe.rb)(),_i=n=>(_i=oe.sb)(n),Si=()=>(Si=oe.tb)();d.___start_em_js=839500,d.___stop_em_js=839661;function rl(){var n=oe;n=Object.assign({},n);var l=b=>C=>b(C)>>>0,f=b=>()=>b()>>>0;return n.wa=l(n.wa),n.$a=f(n.$a),n.ab=l(n.ab),n.emscripten_main_runtime_thread_id=f(n.emscripten_main_runtime_thread_id),n.mb=l(n.mb),n.nb=f(n.nb),n}d.wasmMemory=ae,d.stackSave=()=>io(),d.stackRestore=n=>fn(n),d.stackAlloc=n=>oo(n),d.keepRuntimeAlive=()=>0<bt,d.UTF8ToString=He,d.stringToUTF8=Bt,d.lengthBytesUTF8=gt,d.ExitStatus=st,d.PThread=ge;var hn;jt=function n(){hn||xi(),hn||(jt=n)};function xi(){if(!(0<Vt))if(O)y(d),O||Yt(Rt),startWorker(d);else{if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)mt.unshift(d.preRun.shift());Yt(mt),0<Vt||hn||(hn=!0,d.calledRun=!0,me||(O||Yt(Rt),y(d),O||Yt(qt)))}}return xi(),_}})();typeof Di=="object"&&typeof mo=="object"?mo.exports=Bi:typeof define=="function"&&define.amd&&define([],()=>Bi)});var Mi=Wr((gm,cl)=>{cl.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var go,Gt,tr,bn,Gr,Hi,yo,ye=Y(()=>{"use strict";go=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Gt=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},tr=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],bn=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Gr=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Hi=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",yo=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}});var wn=Y(()=>{"use strict"});var Fi=Y(()=>{"use strict";wn()});var qi,ji=Y(()=>{"use strict";qi="1.18.0"});var Ki,pt,bo=Y(()=>{"use strict";ji();Ki="warning",pt={wasm:{},webgl:{},webgpu:{},versions:{common:qi},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Ki=e}},get logLevel(){return Ki}};Object.defineProperty(pt,"logLevel",{enumerable:!0})});var vr,Yi=Y(()=>{"use strict";bo();vr=pt});var Zi=Y(()=>{"use strict"});var Xi=Y(()=>{"use strict";vn()});var Ji=Y(()=>{"use strict"});var ea=Y(()=>{"use strict";vn()});var vn=Y(()=>{"use strict";Zi();Xi();Ji();ea()});var $n=Y(()=>{"use strict";vn()});var wo,ta,rr,Ht,vo=Y(()=>{"use strict";bo();wo=(e,t)=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||console.timeStamp(`${e}::ORT::${t}`)},ta=(e,t)=>{let r=new Error().stack?.split(/\\r\\n|\\r|\\n/g)||[],o=!1;for(let i=0;i<r.length;i++){if(o&&!r[i].includes("TRACE_FUNC")){let u=`FUNC_${e}::${r[i].trim().split(" ")[1]}`;t&&(u+=`::${t}`),wo("CPU",u);return}r[i].includes("TRACE_FUNC")&&(o=!0)}},rr=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("BEGIN",e)},Ht=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("END",e)}});var ra=Y(()=>{"use strict";wn();$n();vo()});var na=Y(()=>{"use strict";ra()});var oa=Y(()=>{"use strict"});var ia=Y(()=>{"use strict"});var aa=Y(()=>{"use strict"});var sa=Y(()=>{"use strict"});var ua=Y(()=>{"use strict";wn();$n()});var da=Y(()=>{"use strict";ua()});var $r=Y(()=>{"use strict";Fi();Yi();na();$n();oa();ia();vo();aa();sa();da()});var _l,Sl,la,ca,pa,xl,Ve,Lt=Y(()=>{"use strict";ye();_l=["V","I","W","E","F"],Sl=(e,t)=>{console.log(`[${_l[e]},${new Date().toISOString()}]${t}`)},pa=(e,t)=>{la=e,ca=t},xl=(e,t)=>{let r=Gr(e),o=Gr(la);r>=o&&Sl(r,typeof t=="function"?t():t)},Ve=(...e)=>{ca&&xl(...e)}});var ma,fa=Y(()=>{"use strict";ye();ma=(e,t)=>new(bn(t))(e)});var _n=Y(()=>{"use strict"});var ha,$o,_o,Cl,Al,ga,xo,So,ba,wa=Y(()=>{"use strict";Lt();_n();ha=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),$o=[],_o=e=>Math.ceil(e/16)*16,Cl=e=>{for(let t=0;t<$o.length;t++){let r=$o[t];if(e<=r)return r}return Math.ceil(e/16)*16},Al=1,ga=()=>Al++,xo=async(e,t,r,o)=>{let i=_o(r),u=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,u,0,i),e.flush(),await u.mapAsync(GPUMapMode.READ);let c=u.getMappedRange();if(o){let p=o();return p.set(new Uint8Array(c,0,r)),p}else return new Uint8Array(c.slice(0,r))}finally{u.destroy()}},So=class{constructor(t){this.backend=t;this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[r]of ha)$o.push(r),this.freeBuffers.set(r,[]),this.freeUniformBuffers.set(r,[])}upload(t,r){let o=r.buffer,i=r.byteOffset,u=r.byteLength,a=_o(u),c=this.storageCache.get(t);if(!c)throw new Error("gpu data for uploading does not exist");if(c.originalSize!==u)throw new Error(`inconsistent data size. gpu data size=${c.originalSize}, data size=${u}`);let p=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),h=p.getMappedRange();new Uint8Array(h).set(new Uint8Array(o,i,u)),p.unmap();let d=this.backend.getCommandEncoder();this.backend.endComputePass(),d.copyBufferToBuffer(p,0,c.gpuData.buffer,0,a),Ve("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${t})`),this.buffersForUploadingPending.push(p)}memcpy(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("source gpu data for memcpy does not exist");let i=this.storageCache.get(r);if(!i)throw new Error("destination gpu data for memcpy does not exist");if(o.originalSize!==i.originalSize)throw new Error("inconsistent source and destination gpu data size");let u=_o(o.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(o.gpuData.buffer,0,i.gpuData.buffer,0,u)}registerExternalBuffer(t,r,o){let i;if(o){if(i=this.externalBuffers.get(o),i===void 0)throw new Error("previous buffer is not registered");if(t===o)return Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, buffer is the same, skip.`),i;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.\n             Please use the previous external buffer!`);this.externalBuffers.delete(o)}else i=ga();return this.storageCache.set(i,{gpuData:{id:i,type:0,buffer:t},originalSize:r}),this.externalBuffers.set(t,i),Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, registered.`),i}unregisterExternalBuffer(t){let r=this.externalBuffers.get(t);r!==void 0&&(this.storageCache.delete(r),this.externalBuffers.delete(t),Ve("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${r}`))}create(t,r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let o=Cl(t),i,u=(r&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,a=(r&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(u||a){let h=(u?this.freeBuffers:this.freeUniformBuffers).get(o);h?h.length>0?i=h.pop():i=this.backend.device.createBuffer({size:o,usage:r}):i=this.backend.device.createBuffer({size:o,usage:r})}else i=this.backend.device.createBuffer({size:o,usage:r});let c={id:ga(),type:0,buffer:i};return this.storageCache.set(c.id,{gpuData:c,originalSize:t}),Ve("verbose",()=>`[WebGPU] GpuDataManager.create(size=${t}) => id=${c.id}`),c}get(t){return this.storageCache.get(t)?.gpuData}release(t){let r=this.storageCache.get(t);if(!r)throw new Error("releasing data does not exist");return Ve("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("data does not exist");await xo(this.backend,o.gpuData.buffer,o.originalSize,r)}refreshPendingBuffers(){for(let t of this.buffersForUploadingPending)t.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let t of this.buffersPending){let r=ha.get(t.size);if((t.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let o=this.freeBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else if((t.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let o=this.freeUniformBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else t.destroy()}this.buffersPending=[]}else{let t=this.capturedPendingBuffers.get(this.backend.currentSessionId);t||(t=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,t));for(let r of this.buffersPending)t.push(r);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.freeUniformBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache.forEach(t=>{t.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(t){let r=this.capturedPendingBuffers.get(t);r&&(r.forEach(o=>{o.destroy()}),this.capturedPendingBuffers.delete(t))}},ba=(...e)=>new So(...e)});var Co,ve,Ze=Y(()=>{"use strict";Co=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ve=e=>new Co(e)});var Ao,It,M,nr,Sn,xn,Cn,Se=Y(()=>{"use strict";Ao=class{static calcMatMulShape(t,r){return t[1]!==r[0]?void 0:[t[0],r[1]]}},It=class{static calcShape(t,r,o=!1){let i=t.length,u=r.length;if(i===0)return r;if(u===0)return t;let a=Math.max(t.length,r.length),c=new Array(a);if(o){if(i<2||u<2)return;let p=Ao.calcMatMulShape([t[i-2],t[i-1]],[r[u-2],r[u-1]]);if(p===void 0)return;[c[a-2],c[a-1]]=p}for(let p=o?3:1;p<=a;p++){let h=i-p<0?1:t[i-p],d=u-p<0?1:r[u-p];if(h!==d&&h>1&&d>1)return;let y=Math.max(h,d);if(h&&d)c[a-p]=Math.max(h,d);else{if(y>1)return;c[a-p]=0}}return c}static isValidBroadcast(t,r){let o=t.length,i=r.length;if(o>i)return!1;for(let u=1;u<=o;u++)if(t[o-u]!==1&&t[o-u]!==r[i-u])return!1;return!0}},M=class e{static size(t){return e.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let o=t.length;if(o===0)return[];let i=new Array(o),u=o-1;for(;u>=0;){if(t[u]%r===0){i[u]=t[u]/r;break}if(r%t[u]!==0)throw new Error("cannot convert shape");i[u]=1,r/=t[u],u--}for(u--;u>=0;u--)i[u]=t[u];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,o){let i=1;for(let u=r;u<o;u++){if(t[u]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=t[u]}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let o=new Array(r);o[r-1]=1,o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];return o}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(o=>this.normalizeAxis(o,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(o=>t[o]):t.slice().reverse()}static padShape(t,r){let o=t.length;return t.map((i,u)=>i+r[u]+r[u+o])}static areEqual(t,r){return t.length!==r.length?!1:t.every((o,i)=>o===r[i])}},nr=class e{static adjustPoolAttributes(t,r,o,i,u,a){if(!t&&o.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let c=0;c<r.length-2;c++)c>=o.length?o.push(r[c+2]):o[c]=r[c+2];for(let c=0;c<o.length;c++)if(c<i.length){if(i[c]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let c=0;c<o.length;c++)if(c<u.length){if(u[c]<0)throw new Error("dilations should be greater than or equal to 1")}else u.push(1);for(let c=0;c<o.length*2;c++)if(c<a.length){if(a[c]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let c=0;c<o.length;c++){if(o[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[c]>=o[c]||a[c+o.length]>=o[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,o,i,u,a,c){if(c){if(u.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let p=0;p<t.length-2;p++)e.adjustPadAndReturnShape(t[p+(a?1:2)],r[p],o[p],i[p],u,p,p+t.length-2,c)}}static computePoolOutputShape(t,r,o,i,u,a,c){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let p=[r[0],r[1]];return e.computeShapeHelper(t,r,p,o,i,u,a,c),p}static computeConvOutputShape(t,r,o,i,u,a,c){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[t[0],r[0]];return e.computeShapeHelper(!1,t,p,o,i,u,a,c),p}static computeShapeHelper(t,r,o,i,u,a,c,p){if(t)for(let h=0;h<r.length-2;h++)o.push(1);else for(let h=0;h<r.length-2;h++)o.push(e.adjustPadAndReturnShape(r[h+2],i[h],u[h],a[h],c,h,h+r.length-2,p))}static adjustPadAndReturnShape(t,r,o,i,u,a,c,p){let h=o*(i-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return u[a]=0,u[c]=0,Math.floor((t-h)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let y=((t+r-1)/r-1)*r+i-t;return u[a]=Math.floor(p==="SAME_LOWER"?(y+1)/2:y/2),u[c]=y-u[a],Math.floor((t+y-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+u[a]+u[c]-h)/r+1)}},Sn=class{static getShapeOfGemmResult(t,r,o,i,u){if(t.length!==2||o.length!==2)throw new Error("shape need to be of size 2");let a,c,p;r?(a=t[1],c=t[0]):(a=t[0],c=t[1]);let h=-1;if(i?(p=o[0],h=1):(p=o[1],h=0),o[h]!==c)throw new Error("dimension mismatch");if(a<=0||p<=0||c<=0)throw new Error("invalid shape specified");if(u&&!It.isValidBroadcast(u,[a,p]))throw new Error("gemm: invalid bias shape for broadcast");return[a,p,c]}},xn=-34028234663852886e22,Cn=34028234663852886e22});var or,To,De,et,Z,Me,$t,ir,_t,fe,Eo,U,j,An,Io,va,_r,_e=Y(()=>{"use strict";ye();Se();or=64,To=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e}`)}},De=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[0]},et=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[1]},Z=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:M.computeStrides(r)})}),t},Me=e=>e%4===0?4:e%2===0?2:1,$t=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,ir=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,_t=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,fe=(e,t,r,o)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?o==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:o==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,Eo=(e,t,r,o,i)=>{let u=typeof r=="number",a=u?r:r.length,c=[...new Array(a).keys()],p=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,h=To(t,i),d=typeof h=="string"?h:h[1],y=typeof h=="string"?h:h[0],w={indices:p,value:d,storage:y,tensor:t},_=G=>typeof G=="string"?G:`${G}u`,v={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},S=u?"uniforms.":"",A=`${S}${e}_shape`,I=`${S}${e}_strides`,x="";for(let G=0;G<a-1;G++)x+=`\n    let dim${G} = current / ${fe(I,G,a)};\n    let rest${G} = current % ${fe(I,G,a)};\n    indices[${G}] = dim${G};\n    current = rest${G};\n    `;x+=`indices[${a-1}] = current;`;let E=a<2?"":`\n  fn o2i_${e}(offset: u32) -> ${w.indices} {\n    var indices: ${w.indices};\n    var current = offset;\n    ${x}\n    return indices;\n  }`,P=G=>(v.offsetToIndices=!0,a<2?G:`o2i_${e}(${G})`),O=[];if(a>=2)for(let G=a-1;G>=0;G--)O.push(`${fe(I,G,a)} * (indices[${G}])`);let R=a<2?"":`\n  fn i2o_${e}(indices: ${w.indices}) -> u32 {\n    return ${O.join("+")};\n  }`,L=G=>(v.indicesToOffset=!0,a<2?G:`i2o_${e}(${G})`),N=(...G)=>a===0?"0u":`${w.indices}(${G.map(_).join(",")})`,K=(G,ne)=>a<2?`${G}`:`${fe(G,ne,a)}`,Q=(G,ne,xe)=>a<2?`${G}=${xe};`:`${fe(G,ne,a)}=${xe};`,he={},W=(G,ne)=>{v.broadcastedIndicesToOffset=!0;let xe=`${ne.name}broadcastedIndicesTo${e}Offset`;if(xe in he)return`${xe}(${G})`;let Ke=[];for(let Be=a-1;Be>=0;Be--){let Ge=ne.indicesGet("outputIndices",Be+ne.rank-a);Ke.push(`${K(I,Be)} * (${Ge} % ${K(A,Be)})`)}return he[xe]=`fn ${xe}(outputIndices: ${ne.type.indices}) -> u32 {\n             return ${Ke.length>0?Ke.join("+"):"0u"};\n           }`,`${xe}(${G})`},se=(G,ne)=>(()=>{if(w.storage===w.value)return`${e}[${G}]=${ne};`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`${e}[${G}]=vec2<u32>(u32(${ne}), select(0u, 0xFFFFFFFFu, ${ne} < 0));`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`${e}[${G}]=vec2<u32>(u32(${ne}), 0u);`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`${e}[${G}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${ne}));`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),Ce=G=>(()=>{if(w.storage===w.value)return`${e}[${G}]`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`i32(${e}[${G}].x)`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`u32(${e}[${G}].x)`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${G}] & 0xFFu), bool(${e}[${G}] & 0xFF00u), bool(${e}[${G}] & 0xFF0000u), bool(${e}[${G}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),We=a<2?"":`\n  fn get_${e}ByIndices(indices: ${w.indices}) -> ${d} {\n    return ${Ce(`i2o_${e}(indices)`)};\n  }`,ee=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn get_${e}(${G}) -> ${d} {\n    return get_${e}ByIndices(${N(ne)});\n  }`})(),ae=(...G)=>{if(G.length!==a)throw new Error(`indices length must be ${a}`);let ne=G.map(_).join(",");return a===0?Ce("0u"):a===1?Ce(ne[0]):(v.get=!0,v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}(${ne})`)},Ae=G=>a<2?Ce(G):(v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}ByIndices(${G})`),me=a<2?"":`\n  fn set_${e}ByIndices(indices: ${w.indices}, value: ${d}) {\n    ${se(`i2o_${e}(indices)`,"value")}\n  }`,ie=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn set_${e}(${G}, value: ${d}) {\n    set_${e}ByIndices(${N(ne)}, value);\n  }`})();return{impl:()=>{let G=[],ne=!1;return v.offsetToIndices&&(G.push(E),ne=!0),v.indicesToOffset&&(G.push(R),ne=!0),v.broadcastedIndicesToOffset&&(Object.values(he).forEach(xe=>G.push(xe)),ne=!0),v.set&&(G.push(ie),ne=!0),v.setByIndices&&(G.push(me),ne=!0),v.get&&(G.push(ee),ne=!0),v.getByIndices&&(G.push(We),ne=!0),!u&&ne&&G.unshift(`const ${A} = ${w.indices}(${r.join(",")});`,`const ${I} = ${w.indices}(${M.computeStrides(r).join(",")});`),G.join(`\n`)},type:w,offsetToIndices:P,indicesToOffset:L,broadcastedIndicesToOffset:W,indices:N,indicesGet:K,indicesSet:Q,set:(...G)=>{if(G.length!==a+1)throw new Error(`indices length must be ${a}`);let ne=G[a];if(typeof ne!="string")throw new Error("value must be string");let xe=G.slice(0,a).map(_).join(",");return a===0?se("0u",ne):a===1?se(xe[0],ne):(v.set=!0,v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}(${xe}, ${ne})`)},setByOffset:se,setByIndices:(G,ne)=>a<2?se(G,ne):(v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}ByIndices(${G}, ${ne});`),get:ae,getByOffset:Ce,getByIndices:Ae,usage:o,name:e,strides:I,shape:A,rank:a}},U=(e,t,r,o=1)=>Eo(e,t,r,"input",o),j=(e,t,r,o=1)=>Eo(e,t,r,"output",o),An=(e,t,r,o=1)=>Eo(e,t,r,"internal",o),Io=class{constructor(t,r){this.normalizedDispatchGroup=t;this.limits=r;this.internalVariables=[];this.variables=[];this.uniforms=[];this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(t){return`if (global_idx >= ${typeof t=="number"?`${t}u`:t}) { return; }`}mainStart(t=or){let r=typeof t=="number"?t:t[0],o=typeof t=="number"?1:t[1],i=typeof t=="number"?1:t[2];if(r>this.limits.maxComputeWorkgroupSizeX||o>this.limits.maxComputeWorkgroupSizeY||i>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(r*o*i>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let u=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,a=u?`@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,\n                                             @builtin(local_invocation_id) local_id : vec3<u32>,\n    @builtin(local_invocation_index) local_idx : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(num_workgroups) num_workgroups : vec3<u32>`,c=u?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +\n          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${r*o*i}u + local_idx;`;return`@compute @workgroup_size(${r}, ${o}, ${i})\n  fn main(${a}) {\n    ${c}\n  `}appendVariableUniforms(t){t.rank!==0&&(t.shape.startsWith("uniforms.")&&this.uniforms.push({name:t.shape.replace("uniforms.",""),type:"u32",length:t.rank}),t.strides.startsWith("uniforms.")&&this.uniforms.push({name:t.strides.replace("uniforms.",""),type:"u32",length:t.rank}))}declareVariable(t,r){if(t.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(t),this.appendVariableUniforms(t);let o=t.usage==="input"?"read":"read_write",i=t.type.storage;return`@group(0) @binding(${r}) var<storage, ${o}> ${t.name}: array<${i}>;`}declareVariables(...t){return t.map(r=>this.declareVariable(r,this.variableIndex++)).join(`\n`)}registerInternalVariable(t){if(t.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(t),this.appendVariableUniforms(t)}registerInternalVariables(...t){return t.forEach(r=>this.registerInternalVariable(r)),this}registerUniform(t,r,o=1){return this.uniforms.push({name:t,type:r,length:o}),this}registerUniforms(t){return this.uniforms=this.uniforms.concat(t),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let t=[];for(let{name:r,type:o,length:i}of this.uniforms)if(i&&i>4)o==="f16"?t.push(`@align(16) ${r}:array<mat2x4<${o}>, ${Math.ceil(i/8)}>`):t.push(`${r}:array<vec4<${o}>, ${Math.ceil(i/4)}>`);else{let u=i==null||i===1?o:`vec${i}<${o}>`;t.push(`${r}:${u}`)}return`\n      struct Uniforms { ${t.join(", ")} };\n      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(t=>t.impl()).join(`\n`)+this.internalVariables.map(t=>t.impl()).join(`\n`)}get variablesInfo(){if(this.uniforms.length===0)return;let t=r=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(r)];return this.uniforms.map(r=>[t(r.type),r.length??1])}},va=(e,t)=>new Io(e,t),_r=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;i++){let u=r-1-i,a=e[u]||1;(t[t.length-1-i]||1)>1&&a===1&&o.unshift(u)}return o}});var Il,$a,Tl,El,yt,_a,Sa,Sr=Y(()=>{"use strict";ye();Se();Ze();_e();Il=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.")},$a=(e,t)=>t&&t.length!==e?[...new Array(e).keys()].reverse():t,Tl=(e,t)=>M.sortBasedOnPerm(e,$a(e.length,t)),El=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},yt=(e,t)=>{let r=e.dataType,o=e.dims.length,i=$a(o,t),u=Tl(e.dims,i),a=j("output",r,u.length),c=U("a",r,o),p=h=>`\n  ${h.registerUniform("output_size","u32").declareVariables(c,a)}\n\n  ${El(i,o,c,a)}\n\n  ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${a.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${a.setByOffset("global_idx",c.getByIndices("aIndices"))}\n  }`;return{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:h=>{let d=M.size(u);return{outputs:[{dims:u,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:12,data:d},...Z(h[0].dims,u)]}},getShaderSource:p}},_a=(e,t)=>{Il(e.inputs),e.compute(yt(e.inputs[0],t.perm))},Sa=e=>ve({perm:e.perm})});var Pl,kl,Ol,Rl,Bl,Dl,zl,Ml,Ul,Vl,Tt,xa,Ca,Aa,Ia,Ta,Ea,Pa,ka,Oa,Ra,Ba=Y(()=>{"use strict";ye();Se();_e();In();Sr();Pl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},kl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Ol={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Rl={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Bl=(e,t)=>{let r=[];for(let o=t-e;o<t;++o)r.push(o);return r},Dl=(e,t)=>{let r=[],o=e.length;for(let u=0;u<o;u++)t.indexOf(u)===-1&&r.push(e[u]);let i=t.map(u=>e[u]);return[r,i]},zl=(e,t)=>{let r=e.length+t.length,o=[],i=0;for(let u=0;u<r;u++)t.indexOf(u)===-1?o.push(e[i++]):o.push(1);return o},Ml=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Ul=(e,t)=>{let r=[];if(!Ml(e,t)){for(let o=0;o<t;++o)e.indexOf(o)===-1&&r.push(o);e.forEach(o=>r.push(o))}return r},Vl=(e,t,r,o,i,u,a)=>{let c=r[0].dims,p=M.size(u),h=M.size(a),d=U("_A",r[0].dataType,c),y=j("output",i,u),w=32,_=`\n          var<workgroup> aBestValues : array<f32, ${w}>;\n       `;return{name:e,shaderCache:t,getShaderSource:S=>`\n        ${S.registerUniform("reduceSize","u32").declareVariables(d,y)}\n        ${_}\n        fn DIV_CEIL(a : u32, b : u32) -> u32 {\n          return ((a - 1u) / b + 1u);\n         }\n         ${S.mainStart(w)}\n\n          let outputIndex = global_idx / ${w};\n          let offset = outputIndex * uniforms.reduceSize;\n\n          var bestValue = f32(${Ol[o]});\n          let Length = uniforms.reduceSize;\n          for (var k = local_idx; k < Length; k = k + ${w}) {\n           let candidate = f32(${d.getByOffset("offset + k")});\n           bestValue = ${Pl[o]};\n          }\n          aBestValues[local_idx] = bestValue;\n          workgroupBarrier();\n\n         var reduceSize = min(Length, ${w}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (local_idx < currentSize) {\n            let candidate = aBestValues[local_idx + interval];\n            bestValue = ${kl[o]};\n            aBestValues[local_idx] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (local_idx == 0u) {\n          ${y.setByOffset("outputIndex",`${o==="mean"?`${y.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${y.type.storage}(${Rl[o]})`}`)};\n         }\n        }`,getRunData:()=>({outputs:[{dims:u,dataType:i}],dispatchGroup:{x:p},programUniforms:[{type:12,data:h}]})}},Tt=(e,t,r,o)=>{let i=e.inputs.length===1?r:Po(e.inputs,r),u=i.axes;u.length===0&&!i.noopWithEmptyAxes&&(u=e.inputs[0].dims.map((_,v)=>v));let a=M.normalizeAxes(u,e.inputs[0].dims.length),c=a,p=e.inputs[0],h=Ul(c,e.inputs[0].dims.length);h.length>0&&(p=e.compute(yt(e.inputs[0],h),{inputs:[0],outputs:[-1]})[0],c=Bl(c.length,p.dims.length));let[d,y]=Dl(p.dims,c),w=d;i.keepDims&&(w=zl(d,a)),e.compute(Vl(t,{hint:i.cacheKey,inputDependencies:["type"]},[p],o,e.inputs[0].dataType,w,y),{inputs:[p]})},xa=(e,t)=>{Tt(e,"ReduceMeanShared",t,"mean")},Ca=(e,t)=>{Tt(e,"ReduceL1Shared",t,"l1")},Aa=(e,t)=>{Tt(e,"ReduceL2Shared",t,"l2")},Ia=(e,t)=>{Tt(e,"ReduceLogSumExpShared",t,"logSumExp")},Ta=(e,t)=>{Tt(e,"ReduceMaxShared",t,"max")},Ea=(e,t)=>{Tt(e,"ReduceMinShared",t,"min")},Pa=(e,t)=>{Tt(e,"ReduceProdShared",t,"prod")},ka=(e,t)=>{Tt(e,"ReduceSumShared",t,"sum")},Oa=(e,t)=>{Tt(e,"ReduceSumSquareShared",t,"sumSquare")},Ra=(e,t)=>{Tt(e,"ReduceLogSumShared",t,"logSum")}});var Et,Wl,Tn,Po,Pt,Nl,Gl,Hl,Ll,Fl,ql,jl,Kl,Yl,Zl,kt,Da,za,Ma,Ua,Va,Wa,Na,Ga,Ha,La,In=Y(()=>{"use strict";ye();Se();Ze();_e();Ba();Et=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Wl=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Tn=(e,t,r,o,i,u,a=!1,c=!1)=>{let p=[],h=r[0].dims,d=h.length,y=M.normalizeAxes(i,d),w=!c&&y.length===0;h.forEach((A,I)=>{w||y.indexOf(I)>=0?a&&p.push(1):p.push(A)});let _=p.length,v=M.size(p);return{name:e,shaderCache:t,getShaderSource:A=>{let I=[],x=U("_A",r[0].dataType,d),E=j("output",u,_),P=o(x,E,y),O=P[2];for(let R=0,L=0;R<d;R++)w||y.indexOf(R)>=0?(a&&L++,O=`for(var j${R}: u32 = 0; j${R} < ${h[R]}; j${R}++) {\n                  ${P[2].includes("last_index")?`let last_index = j${R};`:""}\n                  ${x.indicesSet("input_indices",R,`j${R}`)}\n                  ${O}\n                }`):(I.push(`${x.indicesSet("input_indices",R,E.indicesGet("output_indices",L))};`),L++);return`\n\n        ${A.registerUniform("output_size","u32").declareVariables(x,E)}\n\n        ${A.mainStart()}\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var input_indices: ${x.type.indices};\n          let output_indices = ${E.offsetToIndices("global_idx")};\n\n          ${I.join(`\n`)}\n          ${P[0]}       // init ops for reduce max/min\n          ${P[1]}\n          ${O}\n          ${P[3]}\n          ${P.length===4?E.setByOffset("global_idx","value"):P.slice(4).join(`\n`)}\n        }`},getRunData:()=>({outputs:[{dims:p,dataType:u}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:[{type:12,data:v},...Z(h,p)]})}},Po=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(o=>r.push(Number(o))),ve({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Pt=(e,t,r,o)=>{let i=e.inputs,u=i.length===1?r:Po(i,r);e.compute(Tn(t,{hint:u.cacheKey,inputDependencies:["rank"]},[i[0]],u.noopWithEmptyAxes&&u.axes.length===0?Wl:o,u.axes,i[0].dataType,u.keepDims,u.noopWithEmptyAxes),{inputs:[0]})},Nl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,"value = log(value);"])},Gl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL1",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += abs(${o.getByIndices("input_indices")});`,""])},Hl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL2",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Ll=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSumExp",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += exp(${o.getByIndices("input_indices")});`,"value = log(value);"])},Fl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMax",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(o.indicesSet("input_indices",c,0));return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = max(value, ${o.getByIndices("input_indices")});`,""]})},ql=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMean",t,(o,i,u)=>{let a=1;for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&(a*=e.inputs[0].dims[c]);return["var sum = f32(0);","",`sum += f32(${o.getByIndices("input_indices")});`,`let value = ${i.type.value}(sum / ${a});`]})},jl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMin",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = min(value, ${o.getByIndices("input_indices")});`,""]})},Kl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceProd",t,(o,i)=>[`var value = ${i.type.storage}(1);`,"",`value *= ${o.getByIndices("input_indices")};`,""])},Yl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,""])},Zl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSumSquare",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += t * t;`,""])},kt=(e,t,r)=>{if(t.length===0)return r;let o=1,i=1;for(let u=0;u<t.length;u++)t.indexOf(u)===-1?o*=e[u]:i*=e[u];return i<32&&o>1024},Da=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?ql(e,t):xa(e,t)},za=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Gl(e,t):Ca(e,t)},Ma=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hl(e,t):Aa(e,t)},Ua=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Ll(e,t):Ia(e,t)},Va=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Fl(e,t):Ta(e,t)},Wa=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?jl(e,t):Ea(e,t)},Na=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Kl(e,t):Pa(e,t)},Ga=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Yl(e,t):ka(e,t)},Ha=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Zl(e,t):Oa(e,t)},La=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Nl(e,t):Ra(e,t)}});var Fa,qa,ja,ko,Ka=Y(()=>{"use strict";ye();Ze();In();Fa=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},qa=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ja=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ko=e=>ve(e)});var Xl,Ql,Jl,En,Ya,Za,Oo=Y(()=>{"use strict";ye();Se();Ze();_e();Xl=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,o=e[r],i=o.dataType,u=o.dims.length;e.forEach((a,c)=>{if(c!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==u)throw new Error("input tensors should have the same shape");a.dims.forEach((p,h)=>{if(h!==t&&p!==o.dims[h])throw new Error("non concat dimensions must match")})}})},Ql=(e,t)=>`\n  fn calculateInputIndex(index: u32) -> u32 {\n    let sizeInConcatAxis = array<u32, ${e}u>(${t});\n    for (var i: u32 = 0u; i < ${e}; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ${e}u;\n  }`,Jl=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;++i){let u=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?o.push(u):i===0?o.push(`if (inputIndex == ${i}u) { ${u} }`):i===r-1?o.push(`else { ${u} }`):o.push(`else if (inputIndex == ${i}) { ${u} }`)}return o.join(`\n`)},En=(e,t,r,o)=>{let i=M.size(r),u=new Array(e.length),a=new Array(e.length),c=0,p=[],h=[],d=[{type:12,data:i}];for(let S=0;S<e.length;++S)c+=e[S].dims[t],u[S]=c,h.push(e[S].dims.length),a[S]=U(`input${S}`,o,h[S]),p.push("rank"),d.push({type:12,data:u[S]});for(let S=0;S<e.length;++S)d.push(...Z(e[S].dims));d.push(...Z(r));let y=j("output",o,r.length),w=y.indicesGet("indices",t),_=Array.from(Array(u.length).keys()).map(S=>`uniforms.sizeInConcatAxis${S}`).join(","),v=S=>`\n\n  ${(()=>{S.registerUniform("outputSize","u32");for(let A=0;A<e.length;A++)S.registerUniform(`sizeInConcatAxis${A}`,"u32");return S.declareVariables(...a,y)})()}\n\n  ${Ql(u.length,_)}\n\n  ${S.mainStart()}\n    ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n    var indices = ${y.offsetToIndices("global_idx")};\n\n    let inputIndex = calculateInputIndex(${w});\n    if (inputIndex != 0u) {\n      let sizeInConcatAxis = array<u32, ${u.length}u>(${_});\n      ${w} -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ${Jl(a,y)}\n  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:o}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:d}),getShaderSource:v}},Ya=(e,t)=>{let r=e.inputs,o=r[0].dims,i=M.normalizeAxis(t.axis,o.length);Xl(r,i);let u=o.slice();u[i]=r.reduce((c,p)=>c+(p.dims.length>i?p.dims[i]:0),0);let a=r.filter(c=>M.size(c.dims)>0);e.compute(En(a,i,u,r[0].dataType),{inputs:a})},Za=e=>ve({axis:e.axis})});var ec,tc,rc,nc,Pn,oc,Xa,Ro=Y(()=>{"use strict";ye();_n();_e();Oo();ec=(e,t)=>{let r=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5];if(a&&c)throw new Error("Attention cannot have both past and relative_position_bias");if(r.dims.length!==3)throw new Error(\'Input "input" must have 3 dimensions\');let p=r.dims[0],h=r.dims[1],d=r.dims[2];if(i.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimensions\');if(o.dims.length!==2)throw new Error(\'Input "weights" is expected to have 2 dimensions\');if(o.dims[0]!==d)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==o.dims[1])throw new Error(\'Input "bias" dimension 0 should have same length as dimension 1 of input "weights"\');let y=i.dims[0]/3,w=y,_=w;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let E of t.qkvHiddenSizes)if(E%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");y=t.qkvHiddenSizes[0],w=t.qkvHiddenSizes[1],_=t.qkvHiddenSizes[2]}let v=h;if(y!==w)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==y+w+_)throw new Error(\'Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes\');let S=0;if(a){if(w!==_)throw new Error(\'Input "past" expect k_hidden_size == v_hidden_size\');if(a.dims.length!==5)throw new Error(\'Input "past" must have 5 dimensions\');if(a.dims[0]!==2)throw new Error(\'Input "past" first dimension must be 2\');if(a.dims[1]!==p)throw new Error(\'Input "past" second dimension must be batch_size\');if(a.dims[2]!==t.numHeads)throw new Error(\'Input "past" third dimension must be num_heads\');if(a.dims[4]!==w/t.numHeads)throw new Error(\'Input "past" fifth dimension must be k_hidden_size / num_heads\');t.pastPresentShareBuffer||(S=a.dims[3])}let A=v+S,I=-1,x=0;if(u)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");return{batchSize:p,sequenceLength:h,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:A,maxSequenceLength:I,inputHiddenSize:d,hiddenSize:y,vHiddenSize:_,headSize:Math.floor(y/t.numHeads),vHeadSize:Math.floor(_/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:x,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},tc=(e,t,r,o)=>{let i=Me(o),u=64,a=o/i;a<u?u=1:a/8<64&&(u=Math.ceil(a/8));let c=Math.ceil(o/i/u),p=[{type:t.dataType,data:1/o},{type:12,data:a},{type:12,data:c}],h=De(t.dataType,i),d=et(1,i),y=w=>{let _=j("x",t.dataType,t.dims,i),S=[{name:"d_inv",type:et(t.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`\n  var<workgroup> thread_max: array<f32, ${u}>;\n  var<workgroup> thread_sum: array<f32, ${u}>;\n  ${w.registerUniforms(S).declareVariables(_)}\n  ${w.mainStart([u,1,1])}\n    let local_offset = local_idx * uniforms.elements_per_thread;\n    let offset = workgroup_id.x * uniforms.d_comp + local_offset;\n\n    var thread_max_vector = ${d}(-3.402823e+38f);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      thread_max_vector = max(${d}(x[offset + i]), thread_max_vector);\n    }\n    thread_max[local_idx] = ${(()=>{switch(i){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var max_value =  f32(-3.402823e+38f);\n    for (var i = 0u; i < ${u}; i++) {\n      max_value = max(thread_max[i], max_value);\n    }\n\n    var sum_vector = ${d}(0);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      sum_vector += exp(${d}(x[offset + i]) - max_value);\n    }\n    thread_sum[local_idx] = ${(()=>{switch(i){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var sum: f32 = 0;\n    for (var i = 0u; i < ${u}; i++) {\n      sum += thread_sum[i];\n    }\n\n    if (sum == 0) {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        x[offset + i] = ${_.type.value}(uniforms.d_inv);\n      }\n    } else {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        var f32input = ${d}(x[offset + i]);\n        x[offset + i] = ${_.type.value}(exp(f32input - max_value) / sum);\n      }\n    }\n  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${u};${h};${i}`},getShaderSource:y,getRunData:()=>({outputs:[],dispatchGroup:{x:r},programUniforms:p})}},rc=(e,t,r,o,i,u,a)=>{let c=a+i.kvSequenceLength,p=[i.batchSize,i.numHeads,i.sequenceLength,c],h=u.scale===0?1/Math.sqrt(i.headSize):u.scale,d=Me(i.headSize),y=i.headSize/d,w=12,_={x:Math.ceil(c/w),y:Math.ceil(i.sequenceLength/w),z:i.batchSize*i.numHeads},v=[{type:12,data:i.sequenceLength},{type:12,data:y},{type:12,data:c},{type:12,data:i.numHeads},{type:1,data:h}],S=o?["type","type","type"]:["type","type"],A=I=>{let x=U("q",t.dataType,t.dims,d),E=U("key",r.dataType,r.dims,d),P=[x,E];o&&P.push(U("relative_position_bias",o.dataType,o.dims));let O=j("output",t.dataType,p),R=et(1,d),L=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`\n  const TILE_SIZE = ${w}u;\n\n  var<workgroup> tileQ: array<${x.type.storage}, ${w*w}>;\n  var<workgroup> tileK: array<${x.type.storage}, ${w*w}>;\n  ${I.registerUniforms(L).declareVariables(...P,O)}\n  ${I.mainStart([w,w,1])}\n    // x holds the N and y holds the M\n    let headIdx = workgroup_id.z;\n    let m = workgroup_id.y * TILE_SIZE;\n    let n = workgroup_id.x * TILE_SIZE;\n    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;\n    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;\n\n    var value = ${R}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {\n        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {\n        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      workgroupBarrier();\n\n      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n        value += ${R}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = headIdx * uniforms.M * uniforms.N;\n    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {\n      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;\n      var sum: f32 = ${(()=>{switch(d){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${d}`)}})()};\n        output[outputIdx] = ${O.type.value} (sum * uniforms.alpha) + ${o?"relative_position_bias[outputIdx]":"0.0"};\n    }\n  }`};return{name:"AttentionProbs",shaderCache:{hint:`${d}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:p,dataType:t.dataType,gpuDataType:0}],dispatchGroup:_,programUniforms:v}),getShaderSource:A}},nc=(e,t,r,o,i)=>{let u=i+o.kvSequenceLength,a=[o.batchSize,o.sequenceLength,o.vHiddenSize],c=12,p={x:Math.ceil(o.vHeadSize/c),y:Math.ceil(o.sequenceLength/c),z:o.batchSize*o.numHeads},h=[{type:12,data:o.sequenceLength},{type:12,data:u},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:p,programUniforms:h}),getShaderSource:w=>{let _=U("probs",t.dataType,t.dims),v=U("v",r.dataType,r.dims),S=j("output",t.dataType,a),A=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`\n  const TILE_SIZE = ${c}u;\n  var<workgroup> tileQ: array<${_.type.value}, ${c*c}>;\n  var<workgroup> tileK: array<${_.type.value}, ${c*c}>;\n  ${w.registerUniforms(A).declareVariables(_,v,S)}\n  ${w.mainStart([c,c,1])}\n   let headIdx = workgroup_id.z;\n   let m = global_id.y;\n   let n = global_id.x;\n\n   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;\n   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;\n\n   var value = ${_.type.storage}(0);\n   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n     if (m < uniforms.M && w + local_id.x < uniforms.K) {\n       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];\n     }\n     if (n < uniforms.N && w + local_id.y < uniforms.K) {\n       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];\n     }\n     workgroupBarrier();\n     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];\n     }\n     workgroupBarrier();\n   }\n\n   // we need to transpose output from BNSH_v to BSND_v\n   let batchIdx = workgroup_id.z / uniforms.num_heads;\n   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;\n   if (m < uniforms.M && n < uniforms.N) {\n     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size\n       + currentBatchHeadNumber * uniforms.N + n;\n     output[outputIdx] = value;\n   }\n  }`}}},Pn=(e,t,r,o,i,u,a,c,p,h,d)=>{let y=e.outputCount>1,w=e.outputCount>2,_=y&&w?h.pastSequenceLength:0,v=_+h.kvSequenceLength,S=[h.batchSize,h.numHeads,v,h.headSize],A=a?[a,r]:[r],I=y?e.compute(En(A,2,S,r.dataType),{inputs:A,outputs:[1]})[0]:r,x=[h.batchSize,h.numHeads,v,h.headSize],E=c?[c,o]:[o],P=w?e.compute(En(E,2,x,o.dataType),{inputs:E,outputs:[2]})[0]:o,O=[t,I];p&&O.push(p);let R=e.compute(rc(e,t,I,p,h,d,_),{inputs:O,outputs:[-1]})[0];e.compute(tc(e,R,h.batchSize*h.numHeads*h.sequenceLength,v),{inputs:[R],outputs:[]});let L=[R,P];e.compute(nc(e,R,P,h,_),{inputs:L,outputs:[0]})},oc=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],o=t.sequenceLength,i=t.inputHiddenSize,u=t.headSize,a=12,c={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},p=[e.inputs[0],e.inputs[1],e.inputs[2]],h=[{type:12,data:o},{type:12,data:i},{type:12,data:u},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],d=y=>{let w=j("output_q",p[0].dataType,r),_=j("output_k",p[0].dataType,r),v=j("output_v",p[0].dataType,r),S=U("input",p[0].dataType,p[0].dims),A=U("weight",p[1].dataType,p[1].dims),I=U("bias",p[2].dataType,p[2].dims),x=S.type.storage,E=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`\n  const TILE_SIZE = ${a}u;\n  var<workgroup> tileInput: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightQ: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightK: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightV: array<${x}, ${a*a}>;\n  ${y.registerUniforms(E).declareVariables(S,A,I,w,_,v)}\n  ${y.mainStart([a,a,1])}\n    let batchIndex = workgroup_id.z / uniforms.num_heads;\n    let headNumber = workgroup_id.z % uniforms.num_heads;\n    let m = global_id.y;\n    let n = global_id.x;\n\n    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;\n    let biasOffsetQ = headNumber * uniforms.head_size;\n    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;\n    let biasOffsetV = uniforms.hidden_size + biasOffsetK;\n\n    var valueQ = ${x}(0);\n    var valueK = ${x}(0);\n    var valueV = ${x}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m < uniforms.M && w + local_id.x < uniforms.K) {\n        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];\n      }\n      if (n < uniforms.N && w + local_id.y < uniforms.K) {\n        let offset = n + (w + local_id.y) * uniforms.ldb;\n        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];\n        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];\n        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];\n      }\n      workgroupBarrier();\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        let inputTileOffset = TILE_SIZE * local_id.y + k;\n        let weightTileOffset = TILE_SIZE * k + local_id.x;\n        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];\n        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];\n        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = (m * uniforms.N + n) % uniforms.head_size;\n    valueQ += bias[headOffset + biasOffsetQ];\n    valueK += bias[headOffset + biasOffsetK];\n    valueV += bias[headOffset + biasOffsetV];\n\n    let offset = workgroup_id.z * uniforms.M * uniforms.N;\n    if (m < uniforms.M && n < uniforms.N) {\n      let outputIdx = offset + m * uniforms.N + n;\n      output_q[outputIdx] = valueQ;\n      output_k[outputIdx] = valueK;\n      output_v[outputIdx] = valueV;\n    }\n  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:h}),getShaderSource:d},{inputs:p,outputs:[-1,-1,-1]})},Xa=(e,t)=>{let r=ec(e.inputs,t),[o,i,u]=oc(e,r);return Pn(e,o,i,u,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t)}});var ic,ac,sc,Qa,Ja=Y(()=>{"use strict";$r();ye();Se();Ze();_e();ic=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(o,i,u)=>{let a=i.length;if(a!==o.length)throw new Error(`${u}: num dimensions != ${a}`);i.forEach((c,p)=>{if(c!==o[p])throw new Error(`${u}: dim[${p}] do not match`)})};if(e[0].dims.length>1){let o=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,o,"Invalid input scale"),r(e[2].dims,o,"Invalid input B"),r(e[3].dims,o,"Invalid input mean"),r(e[4].dims,o,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},ac=(e,t)=>{let{epsilon:r,spatial:o,format:i}=t,u=e[0].dims,a=o?Me(u[u.length-1]):1,c=i==="NHWC"&&u.length>1?a:1,p=M.size(u)/a,h=o,d=h?u.length:u,y=U("x",e[0].dataType,e[0].dims,a),w=U("scale",e[1].dataType,e[1].dims,c),_=U("bias",e[2].dataType,e[2].dims,c),v=U("inputMean",e[3].dataType,e[3].dims,c),S=U("inputVar",e[4].dataType,e[4].dims,c),A=j("y",e[0].dataType,d,a),I=()=>{let E="";if(o)E=`let cOffset = ${u.length===1?"0u":i==="NHWC"?`outputIndices[${u.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")E=`\n            ${A.indicesSet("outputIndices","0","0")}\n            let cOffset = ${A.indicesToOffset("outputIndices")};`;else{E=`var cIndices = ${w.type.indices}(0);\n                       cIndices[0] = outputIndices[${u.length-1}];`;for(let P=1;P<w.rank;P++)E+=`cIndices[${P}] = outputIndices[${P}];`;E+=`let cOffset = ${w.indicesToOffset("cIndices")};`}return E},x=E=>`\n  const epsilon = ${r};\n  ${E.registerUniform("outputSize","u32").declareVariables(y,w,_,v,S,A)}\n  ${E.mainStart()}\n  ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n    var outputIndices = ${A.offsetToIndices(`global_idx * ${a}`)};\n    ${I()}\n    let scale = ${w.getByOffset("cOffset")};\n    let bias = ${_.getByOffset("cOffset")};\n    let inputMean = ${v.getByOffset("cOffset")};\n    let inputVar = ${S.getByOffset("cOffset")};\n    let x = ${y.getByOffset("global_idx")};\n    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;\n    ${A.setByOffset("global_idx","value")}\n  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${o}_${a}`,inputDependencies:h?["rank","type","type","type","type"]:void 0},getShaderSource:x,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h?[{type:12,data:p},...Z(u)]:[{type:12,data:p}]})}},sc=e=>ve(e),Qa=(e,t)=>{let{inputs:r,outputCount:o}=e,i=sc({...t,outputCount:o});if(vr.webgpu.validateInputContent&&ic(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(ac(r,i))}});var uc,dc,es,ts=Y(()=>{"use strict";Se();_e();uc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},dc=e=>{let t=e[0].dims,r=e[0].dims[2],o=M.size(t)/4,i=e[0].dataType,u=U("input",i,t,4),a=U("bias",i,[r],4),c=U("residual",i,t,4),p=j("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:d=>`\n  const channels = ${r}u / 4;\n  ${d.declareVariables(u,a,c,p)}\n\n  ${d.mainStart()}\n    ${d.guardAgainstOutOfBoundsWorkgroupSizes(o)}\n    let value = ${u.getByOffset("global_idx")}\n      + ${a.getByOffset("global_idx % channels")} + ${c.getByOffset("global_idx")};\n    ${p.setByOffset("global_idx","value")}\n  }`}},es=e=>{uc(e.inputs),e.compute(dc(e.inputs))}});var lc,ke,rs,ns,os,is,as,ss,us,ds,ls,cc,cs,ps,ms,fs,kn,hs,On,gs,ys,bs,ws,vs,$s,_s,Ss,xs,Cs,As,Is,Ts,Es,Ps,ks,Os,Rs,Bo,Do,Bs,Ds,zs,Rn=Y(()=>{"use strict";ye();Se();Ze();_e();lc=(e,t,r,o,i,u)=>{let a=Math.ceil(t/4),c="";typeof i=="string"?c=`${i}(a)`:c=i("a");let p=U("inputData",r,[a],4),h=j("outputData",o,[a],4);return`\n      ${e.registerUniform("vec_size","u32").declareVariables(p,h)}\n\n  ${u??""}\n\n  ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n\n    let a = ${p.getByOffset("global_idx")};\n    ${h.setByOffset("global_idx",c)}\n  }`},ke=(e,t,r,o,i,u=e.dataType)=>({name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:a=>lc(a,M.size(e.dims),e.dataType,u,r,o),getRunData:a=>({outputs:[{dims:e.dims,dataType:u}],dispatchGroup:{x:Math.ceil(M.size(a[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(e.dims)/4)}]})}),rs=e=>{e.compute(ke(e.inputs[0],"Abs","abs"))},ns=e=>{e.compute(ke(e.inputs[0],"Acos","acos"))},os=e=>{e.compute(ke(e.inputs[0],"Acosh","acosh"))},is=e=>{e.compute(ke(e.inputs[0],"Asin","asin"))},as=e=>{e.compute(ke(e.inputs[0],"Asinh","asinh"))},ss=e=>{e.compute(ke(e.inputs[0],"Atan","atan"))},us=e=>{e.compute(ke(e.inputs[0],"Atanh","atanh"))},ds=e=>ve(e),ls=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute \'to\' from \'Cast\' operator): ${t.to}`)}e.compute(ke(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},cc=e=>{let t=e.length>=2&&e[1].data!==0?e[1].getFloat32Array()[0]:xn,r=e.length>=3&&e[2].data!==0?e[2].getFloat32Array()[0]:Cn;return ve({min:t,max:r})},cs=(e,t)=>{let r=e.inputs.length===1?t:cc(e.inputs),o=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Clip",i=>`clamp(${i}, clip_min_, clip_max_)`,`\n    const clip_min_: vec4<${o}> = vec4(${o}(${r.min}));\n    const clip_max_: vec4<${o}> = vec4(${o}(${r.max}));\n`,r.cacheKey),{inputs:[0]})},ps=e=>{e.compute(ke(e.inputs[0],"Ceil","ceil"))},ms=e=>{e.compute(ke(e.inputs[0],"Cos","cos"))},fs=e=>{e.compute(ke(e.inputs[0],"Cosh","cosh"))},kn=e=>ve(e),hs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Elu",o=>`elu_vf32(${o})`,`\n  const elu_alpha_ = ${r}(${t.alpha});\n\n  fn elu_f32(a: ${r}) -> ${r} {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }`,t.cacheKey))},On=(e="f32")=>`\nconst r0: ${e} = 0.3275911;\nconst r1: ${e} = 0.254829592;\nconst r2: ${e} = -0.284496736;\nconst r3: ${e} = 1.421413741;\nconst r4: ${e} = -1.453152027;\nconst r5: ${e} = 1.061405429;\n\nfn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}`,gs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,On(t)))},ys=e=>{e.compute(ke(e.inputs[0],"Exp","exp"))},bs=e=>{e.compute(ke(e.inputs[0],"Floor","floor"))},ws=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,On(t)))},vs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"LeakyRelu",o=>`select(leaky_relu_alpha_ * ${o}, ${o}, ${o} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},$s=e=>{e.compute(ke(e.inputs[0],"Not",t=>`!${t}`))},_s=e=>{e.compute(ke(e.inputs[0],"Neg",t=>`-${t}`))},Ss=e=>{e.compute(ke(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},xs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Cs=e=>{e.compute(ke(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},As=e=>ve(e),Is=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"HardSigmoid",o=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${o} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},Ts=e=>{e.compute(ke(e.inputs[0],"Sin","sin"))},Es=e=>{e.compute(ke(e.inputs[0],"Sinh","sinh"))},Ps=e=>{e.compute(ke(e.inputs[0],"Sqrt","sqrt"))},ks=e=>{e.compute(ke(e.inputs[0],"Tan","tan"))},Os=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,Rs=e=>{e.compute(ke(e.inputs[0],"Tanh",Os))},Bo=(e="f32")=>`\nconst fast_gelu_a: ${e} = 0.5;\nconst fast_gelu_b: ${e} = 0.7978845608028654;\nconst fast_gelu_c: ${e} = 0.035677408136300125;\n\nfn tanh_v(v: vec4<${e}>) -> vec4<${e}> {\n  return ${Os("v")};\n}\n`,Do=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,Bs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"FastGelu",Do,Bo(t),void 0,e.inputs[0].dataType))},Ds=(e,t)=>{let r=et(e.inputs[0].dataType);return e.compute(ke(e.inputs[0],"ThresholdedRelu",o=>`select(vec4<${r}>(0.0), ${o}, ${o} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},zs=e=>{e.compute(ke(e.inputs[0],"Log","log"))}});var pc,mc,Us,Vs=Y(()=>{"use strict";Se();_e();Rn();pc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},mc=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=U("input",e[0].dataType,e[0].dims,4),o=U("bias",e[0].dataType,[e[0].dims[2]],4),i=j("output",e[0].dataType,t,4),u=M.size(t)/4,a=De(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)}}),getShaderSource:p=>`\n  const M_SQRT2 = sqrt(2.0);\n  const halfChannels = ${e[0].dims[2]/4/2}u;\n\n  ${p.declareVariables(r,o,i)}\n\n  ${On(a)}\n\n  ${p.mainStart()}\n    ${p.guardAgainstOutOfBoundsWorkgroupSizes(u)}\n    let biasIdx = global_idx % halfChannels;\n    let batchIndex = global_idx / halfChannels;\n    let inputOffset = biasIdx + batchIndex * halfChannels * 2;\n    let valueLeft = input[inputOffset] + bias[biasIdx];\n    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];\n    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);\n\n    ${i.setByOffset("global_idx","valueLeft * geluRight")}\n  }`}},Us=e=>{pc(e.inputs),e.compute(mc(e.inputs))}});var fc,hc,Ot,Ws,Ns,Gs,Hs,Ls,Fs,qs,js,Ks,Ys,Zs=Y(()=>{"use strict";ye();Se();_e();fc=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w,_;typeof c=="string"?w=_=(x,E)=>`${c}((${x}),(${E}))`:typeof c=="function"?w=_=c:(w=c.scalar,_=c.vector);let v=j("outputData",d,o.length,4),S=U("aData",p,t.length,4),A=U("bData",h,r.length,4),I;if(i)if(u){let x=M.size(t)===1,E=M.size(r)===1,P=t.length>0&&t[t.length-1]%4===0,O=r.length>0&&r[r.length-1]%4===0;x||E?I=v.setByOffset("global_idx",_(x?`${S.type.value}(${S.getByOffset("0")}.x)`:S.getByOffset("global_idx"),E?`${A.type.value}(${A.getByOffset("0")}.x)`:A.getByOffset("global_idx"))):I=`\n            let outputIndices = ${v.offsetToIndices("global_idx * 4u")};\n            let offsetA = ${S.broadcastedIndicesToOffset("outputIndices",v)};\n            let offsetB = ${A.broadcastedIndicesToOffset("outputIndices",v)};\n            ${v.setByOffset("global_idx",_(a||P?S.getByOffset("offsetA / 4u"):`${S.type.value}(${S.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||O?A.getByOffset("offsetB / 4u"):`${A.type.value}(${A.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}\n          `}else I=v.setByOffset("global_idx",_(S.getByOffset("global_idx"),A.getByOffset("global_idx")));else{if(!u)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let x=(E,P,O="")=>{let R=`aData[indexA${P}][componentA${P}]`,L=`bData[indexB${P}][componentB${P}]`;return`\n            let outputIndices${P} = ${v.offsetToIndices(`global_idx * 4u + ${P}u`)};\n            let offsetA${P} = ${S.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let offsetB${P} = ${A.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let indexA${P} = offsetA${P} / 4u;\n            let indexB${P} = offsetB${P} / 4u;\n            let componentA${P} = offsetA${P} % 4u;\n            let componentB${P} = offsetB${P} % 4u;\n            ${E}[${P}] = ${O}(${w(R,L)});\n          `};d===9?I=`\n            var data = vec4<u32>(0);\n            ${x("data",0,"u32")}\n            ${x("data",1,"u32")}\n            ${x("data",2,"u32")}\n            ${x("data",3,"u32")}\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:I=`\n            ${x("outputData[global_idx]",0)}\n            ${x("outputData[global_idx]",1)}\n            ${x("outputData[global_idx]",2)}\n            ${x("outputData[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(S,A,v)}\n\n        ${y??""}\n\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${I}\n      }`},hc=(e,t,r,o,i,u,a=r.dataType)=>{let c=!M.areEqual(r.dims,o.dims),p=r.dims,h=M.size(r.dims),d=!1,y=!1,w=[c];if(c){let _=It.calcShape(r.dims,o.dims,!1);if(!_)throw new Error("Can\'t perform binary op on the given tensors");p=_,h=M.size(p);let v=M.size(r.dims)===1,S=M.size(o.dims)===1,A=r.dims.length>0&&r.dims[r.dims.length-1]%4===0,I=o.dims.length>0&&o.dims[o.dims.length-1]%4===0;w.push(v),w.push(S),w.push(A),w.push(I);let x=1;for(let E=1;E<p.length;E++){let P=r.dims[r.dims.length-E]??1,O=o.dims[o.dims.length-E]??1;if(P===O)x*=P;else break}x%4===0?(y=!0,d=!0):(v||S||A||I)&&(d=!0)}else d=!0;return w.push(d),{name:e,shaderCache:{hint:t+w.map(_=>_.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:_=>fc(_,r.dims,o.dims,p,d,c,y,i,r.dataType,o.dataType,a,u),getRunData:()=>({outputs:[{dims:p,dataType:a}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(p)/4)},...Z(r.dims,o.dims,p)]})}},Ot=(e,t,r,o,i,u)=>{e.compute(hc(t,i??"",e.inputs[0],e.inputs[1],r,o,u))},Ws=e=>{Ot(e,"Add",(t,r)=>`${t}+${r}`)},Ns=e=>{Ot(e,"Div",(t,r)=>`${t}/${r}`)},Gs=e=>{Ot(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},Hs=e=>{Ot(e,"Mul",(t,r)=>`${t}*${r}`)},Ls=e=>{let t=U("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Ot(e,"Pow",{scalar:(o,i)=>`pow_custom(${o},${i})`,vector:(o,i)=>`pow_vector_custom(${o},${i})`},`\n    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {\n      if (b == ${t}(0.0)) {\n        return ${t}(1.0);\n      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {\n        return ${t}(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {\n      // TODO: implement vectorized pow\n      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      `)},Fs=e=>{Ot(e,"Sub",(t,r)=>`${t}-${r}`)},qs=e=>{Ot(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},js=e=>{Ot(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},Ks=e=>{Ot(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},Ys=e=>{Ot(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}});var St,xt,Ct,Bn,Ft=Y(()=>{"use strict";ye();Se();St=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},xt=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Ct=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},Bn=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[r,o]=e?.activation_params||[.2,.5];return{activation:t,alpha:r,beta:o}}else if(t==="Clip"){let[r,o]=e?.activation_params||[xn,Cn];return{activation:t,clipMax:o,clipMin:r}}else if(t==="LeakyRelu"){let[r]=e?.activation_params||[.01];return{activation:t,alpha:r}}return{activation:t}}});var tt,Dn,zn=Y(()=>{"use strict";tt=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},Dn=e=>`\n      ${e?"value = value + getBiasByOutputCoords(coords);":""}\n      `});var Mn,zo=Y(()=>{"use strict";Mn=e=>`\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));\n}\n`});var yc,bc,Hr,Xs,wc,Lr,vc,Un,Fr=Y(()=>{"use strict";ye();Se();_e();Ft();zn();yc=(e,t)=>e?`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `:`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `,bc=(e,t)=>e?`\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}\n        }`:`\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}\n        }`,Hr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32)=>{let p=t[1]*e[1],h=t[0]*e[0],d=i?p:u,y=i?u:p,w=d/t[0],_=u/t[1];if(!((i&&w===4&&e[1]===4||!i&&(w===3||w===4))&&d%t[0]===0&&u%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${w} and workPerThread[1] ${e[1]} must be 4.\n      Otherwise, innerElementSize ${w} must be 3 or 4.\n  tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}. tileInner ${u} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`\nvar<workgroup> mm_Asub: array<array<vec${w}<${r}>, ${d/w}>, ${y}>;\nvar<workgroup> mm_Bsub: array<array<vec4<${r}>, ${h/e[0]}>, ${u}>;\n\nconst rowPerThread = ${e[1]};\nconst colPerThread = ${e[0]};\nconst innerElementSize = ${w};\nconst tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ${a?"0":"i32(globalId.z)"};\n  ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n  let globalRowStart = i32(workgroupId.y) * ${p};\n\n  let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n  var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n  var acc: array<vec4<${r}>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ${_};\n  for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ${yc(i,o)}\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${o?", batchIndices":""});\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ${w===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}\n\n          ${bc(i,w)}\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}`},Xs=(e,t)=>e?`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol${t?", batchIndices":""});\n            `:`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol${t?", batchIndices":""});\n            `,wc=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",Lr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32,p=!1)=>{let h=e[1]*t[1],d=e[0]*t[0],y=i?h:u,w=i?u:h;if(!(w%t[1]===0&&y%t[0]===0&&u%t[1]===0))throw new Error(`tileAHight ${w} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${y} must be divisible by workgroupSize[0]${t[0]}, tileInner ${u} must be divisible by workgroupSize[1]${t[1]}`);let _=w/t[1],v=y/t[0],S=u/t[1],A=p?`\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ${h};\n    let globalColStart = i32(workgroupId.x) * ${d};\n\n    // Loop over shared dimension.\n    for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ${w}; inputRow = inputRow + ${t[1]}) {\n        for (var inputCol = localCol; inputCol < ${y}; inputCol = inputCol + ${t[0]}) {\n          ${Xs(i,o)}\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ${u}; inputRow = inputRow + ${t[1]}) {\n            for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol${o?", batchIndices":""});\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<${r}, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ${t[1]};\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ${t[0]};\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    `:`\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ${h};\n\nlet tileRowA = i32(localId.y) * ${_};\nlet tileColA = i32(localId.x) * ${v};\nlet tileRowB = i32(localId.y) * ${S};\n// Loop over shared dimension.\nfor (var t = 0; t < num_tiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ${v}; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ${Xs(i,o)}\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ${S}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol${o?", batchIndices":""});\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<${r}, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ${wc(i)}\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n`;return`\n  var<workgroup> mm_Asub : array<array<${r}, ${y}>, ${w}>;\n  var<workgroup> mm_Bsub : array<array<${r}, ${d}>, ${u}>;\n  const rowPerThread = ${e[1]};\n  const colPerThread = ${e[0]};\n  const tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ${a?"0":"i32(globalId.z)"};\n    ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n    let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n    var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n    var acc : array<array<${r}, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ${A}\n  }\n`},vc=(e,t,r,o,i,u=!1)=>{let[a,c,p]=i,[h,d,y,w]=o,_=_r(a,p),v=_r(c,p),S=De(o[0].type.tensor),A=()=>{let E=d.rank,P=h.rank,O=`var aIndices: ${d.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\naIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return _.forEach(R=>{O+=`\naIndices[${R}] = 0;`}),O+=`\naIndices[${E-2}] = u32(row);\n                   aIndices[${E-1}] = u32(colIn);`,O},I=()=>{let E=y.rank,P=h.rank,O=`var bIndices: ${y.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\nbIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return v.forEach(R=>{O+=`\nbIndices[${R}] = 0;`}),O+=`\nbIndices[${E-2}] = u32(row);\n                   bIndices[${E-1}] = u32(colIn);`,O};return`\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)\n      {\n        ${A()}\n        value = ${d.getByIndices("aIndices")};\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)\n      {\n        ${I()}\n        value = ${y.getByIndices("bIndices")};\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${tt(e,S)}) {\n      let col = colIn * ${e};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ${t?`value = value + ${u?"bias[colIn]":`${tt(e,S)}(bias[row])`};`:""}\n        ${r}\n        ${w.setByIndices("vec3<u32>(coords)","value")}\n      }\n    }\n    `},Un=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u.slice(0,-2),p=a.slice(0,-2),h=o?o.slice(0,-2):r.slice(0,-2),d=M.size(h),y=u[u.length-2],w=u[u.length-1],_=a[a.length-1],v=w%4===0&&_%4===0,S=y<=8?[4,1,1]:[4,4,1],A=[8,8,1],I=[Math.ceil(_/A[0]/S[0]),Math.ceil(y/A[1]/S[1]),Math.ceil(d/A[2]/S[2])],x=v?4:1,E=[...c,y,w/x],P=E.length,O=[...p,w,_/x],R=O.length,L=[d,y,_/x],N=[{type:6,data:y},{type:6,data:_},{type:6,data:w}];xt(t,N),N.push(...Z(h,E,O));let K=["rank","rank"],Q=e.length>2;Q&&(N.push(...Z(e[2].dims)),K.push("rank")),N.push(...Z(L));let he=W=>{let se=h.length,Ce=An("batchDims",e[0].dataType,se,1),We=De(e[0].dataType),ee=U("a",e[0].dataType,P,x),ae=U("b",e[1].dataType,R,x),Ae=j("result",e[0].dataType,L.length,x),me=[ee,ae];if(Q){let G=i?x:1;me.push(U("bias",e[2].dataType,e[2].dims.length,G))}let ie=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Ct(t,ie);let ue=De(Ae.type.tensor),le=St(t,Ae.type.value,ue),qe=vc(x,Q,le,[Ce,ee,ae,Ae],[c,p,h],i);return`\n  ${W.registerUniforms(ie).registerInternalVariables(Ce).declareVariables(...me,Ae)}\n  ${qe}\n  ${v?Hr(S,A,We,Ce):Lr(S,A,We,Ce)}\n                   `};return{name:"MatMul",shaderCache:{hint:`${S};${t.activation};${v};${i}`,inputDependencies:K},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:I[0],y:I[1],z:I[2]},programUniforms:N}),getShaderSource:he}}});var $c,Qs,Js=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();$c=(e,t,r,o,i=!1,u,a=4,c=4,p=4,h="f32")=>{let d=Q=>{switch(Q){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${h}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},y=Q=>{switch(Q){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},w=e?`\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    `:`\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    `,_=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,v=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",S=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",A=e?"row":"col",I=e?"col":"row",x=`\n    let inChannels = i32(uniforms.w_shape[2]);\n    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n    let outRow = ${A} / outWidth;\n    let outCol = ${A} % outWidth;\n\n    let WRow = ${I} / (i32(uniforms.w_shape[1]) * inChannels);\n    let WCol = ${I} / inChannels % i32(uniforms.w_shape[1]);\n    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];\n    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];\n    let xCh = ${I} % inChannels;\n    var resData = ${tt(a,h)}(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the \'same\' padding type.\n    if (xRow >= 0 && xRow < ${v} && xCol >= 0 && xCol < ${S}) {\n      ${w}\n      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));\n      ${d(a)}\n    }\n    return resData;`,E=e?t&&o?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`:o&&r?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`,P=`${y(c)}`,O=tt(p,h),R=e?tt(a,h):tt(c,h),L=e?tt(c,h):tt(a,h),N=St(u,O,h);return`\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${R} {\n      ${e?E:P}\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${L} {\n      ${e?P:E}\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${O}) {\n      let col = colIn * ${p};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)\n      {\n      var value = valueIn;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${_}\n      ${Dn(i)}\n      ${N}\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }`},Qs=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&(h%4===0||h%3===0)&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${E}`);let P=v?p&&h%4!==0?3:4:1,O=I[1]*x[1],R=I[0]*x[0],L=Math.max(I[0]*P,I[1]),N=o%O===0,K=i%R===0,Q=u%L===0,he=v?[P,4,4]:[1,1,1],W=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];xt(t,W),W.push(...Z(e[0].dims,e[1].dims));let se=["rank","rank"];a&&(W.push(...Z(e[2].dims)),se.push("rank")),W.push(...Z(r));let Ce=We=>{let ee=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Ct(t,ee);let ae=v?4:1,Ae=De(e[0].dataType),me=`\n      fn setOutputAtIndex(flatIndex : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        result[flatIndex] = ${v?`vec4<${Ae}>`:Ae}(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ${v?"/ 4":""}, value);\n      }`,ie=U("x",e[0].dataType,e[0].dims.length,P===3?1:P),ue=U("w",e[1].dataType,e[1].dims.length,ae),le=[ie,ue],qe=j("result",e[0].dataType,r.length,ae);if(a){let G=U("bias",e[2].dataType,e[2].dims.length,ae);le.push(G),me+=`\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${v?`vec4<${Ae}>`:Ae} {\n          return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n        }`}return`\n        ${Mn("uniforms.result_strides")}\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ${We.registerUniforms(ee).declareVariables(...le,qe)}\n        ${me}\n        ${$c(p,N,K,Q,a,t,he[0],he[1],he[2],Ae)}\n        ${v?Hr(x,I,Ae,void 0,!p,L):Lr(x,I,Ae,void 0,!p,L,!1,void 0,c)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${P};${v};${N};${K};${Q};${O};${R};${L}`,inputDependencies:se},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:W}),getShaderSource:Ce}}});var Mo,eu,tu=Y(()=>{"use strict";ye();Se();_e();Uo();Ft();Mo=(e,t,r)=>{let o=e.length>2,i=o?"value += b[output_channel];":"",u=e[0].dims,a=e[1].dims,c=a[0]/t.group,p=t.format==="NHWC",h=Vn(u,a,t.dilations,t.pads,t.strides,p),d=M.size(h),y=[{type:12,data:d},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:c}];xt(t,y),y.push(...Z(u,a));let w=["rank","rank"];o&&(y.push(...Z(e[2].dims)),w.push("rank")),y.push(...Z(h));let _=v=>{let S=j("output",e[0].dataType,h.length),A=De(S.type.tensor),I=St(t,S.type.value,A),x=U("x",e[0].dataType,u.length),E=U("w",e[1].dataType,a.length),P=[x,E];o&&P.push(U("b",e[2].dataType,e[2].dims.length));let O=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Ct(t,O),`\n  ${v.registerUniforms(O).declareVariables(...P,S)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let outputIndices = ${S.offsetToIndices("global_idx")};\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[${p?3:1}];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${p?1:2}], outputIndices[${p?2:3}]) * uniforms.strides - uniforms.pads;\n    let group_id: u32 = output_channel / uniforms.output_channels_per_group;\n\n    var value: ${S.type.value} = ${S.type.value}(0);\n    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {\n      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];\n\n        if (xHeight < 0u || xHeight >= uniforms.x_shape[${p?1:2}]) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];\n          if (xWidth < 0u || xWidth >= uniforms.x_shape[${p?2:3}]) {\n            continue;\n          }\n\n          let xVal = ${p?x.get("batch","xHeight","xWidth","input_channel"):x.get("batch","input_channel","xHeight","xWidth")};\n          let wVal = ${E.get("output_channel","wInChannel","wHeight","wWidth")};\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${i}\n    ${I}\n    ${S.setByOffset("global_idx","value")}\n  }`};return{name:"GroupedConv",shaderCache:{hint:t.cacheKey,inputDependencies:w},getRunData:()=>({outputs:[{dims:r?r(h):h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:y}),getShaderSource:_}},eu=(e,t,r)=>{let o=e.length>2,i=Me(r[3]),u=Me(r[2]),a=M.size(r)/i/u,c=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/i],p=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/i],h=[r[0],r[1],r[2],r[3]/i],d=[{type:12,data:a},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];xt(t,d),d.push(...Z(c,p,h));let y=(u-1)*t.strides[1]+p[1],w=_=>{let v=j("output",e[0].dataType,h.length,i),S=De(v.type.tensor),A=St(t,v.type.value,S),I=U("x",e[0].dataType,c.length,i),x=U("w",e[1].dataType,p.length,i),E=[I,x];o&&E.push(U("b",e[2].dataType,e[2].dims,i));let P=o?"value += b[output_channel];":"",O=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Ct(t,O),`\n  ${_.registerUniforms(O).declareVariables(...E,v)}\n  ${_.mainStart()}\n    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let width0 = uniforms.output_shape[3];\n    let output_channel = global_idx % width0;\n    var index1 = global_idx / width0;\n    let width1 = uniforms.output_shape[2] / ${u}u;\n    let col = (index1 % width1) * ${u}u;\n    index1 = index1 / width1;\n    let row = index1 % uniforms.output_shape[1];\n    let batch = index1 / uniforms.output_shape[1];\n\n    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;\n\n    var x_vals: array<${I.type.value}, ${y}>;\n    var values: array<${v.type.value}, ${u}>;\n    let input_channel = output_channel;\n    // Use constant instead of uniform can give better performance for w\'s height/width.\n    for (var w_height: u32 = 0u; w_height < ${p[0]}; w_height++) {\n      let x_height = x_corner.x + i32(w_height);\n      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {\n        for (var i = 0; i < ${y}; i++) {\n          let x_width = x_corner.y + i;\n          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {\n            x_vals[i] = ${I.get("batch","u32(x_height)","u32(x_width)","input_channel")};\n          } else {\n            x_vals[i] = ${I.type.value}(0);\n          }\n        }\n        for (var w_width: u32 = 0u; w_width < ${p[1]}; w_width++) {\n          let w_val = ${x.get("w_height","w_width","0","output_channel")};\n          for (var i = 0u; i < ${u}u; i++) {\n            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);\n          }\n        }\n      }\n    }\n\n    for (var i = 0u; i < ${u}u; i++) {\n      var value = values[i];\n      ${P}\n      ${A}\n      ${v.set("batch","row","col + i","output_channel","value")};\n    }\n  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${i};${u};${y};${p[0]};${p[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:w}}});var Vo,_c,ru,Wo=Y(()=>{"use strict";ye();Se();Fr();_e();Ft();Vo=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u[u.length-2],p=a[a.length-1],h=u[u.length-1],d=Me(p),y=Me(h),w=Me(c),_=M.size(r)/d/w,v=e.length>2,S=o?o.slice(0,-2):r.slice(0,-2),I=[M.size(S),c,p],x=[{type:12,data:_},{type:12,data:c},{type:12,data:p},{type:12,data:h}];xt(t,x),x.push(...Z(S,u,a)),v&&x.push(...Z(e[2].dims)),x.push(...Z(I));let E=P=>{let O=An("batch_dims",e[0].dataType,S.length),R=U("a",e[0].dataType,u.length,y),L=U("b",e[1].dataType,a.length,d),N=j("output",e[0].dataType,I.length,d),K=De(N.type.tensor),Q=St(t,N.type.value,K),he=[R,L],W="";if(v){let ie=i?d:1;he.push(U("bias",e[2].dataType,e[2].dims.length,ie)),W=`${i?`value += bias[col / ${ie}];`:`value += ${N.type.value}(bias[row + i]);`}`}let se=u.slice(0,-2),Ce=a.slice(0,-2),We=_r(se,S),ee=_r(Ce,S),ae=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Ct(t,ae);let Ae=(ie,ue)=>{let le=ie.rank,qe=ie.name;if(le===2)return`var ${qe}_indices = ${ie.type.indices}(0u, 0u);`;let G=O.rank,ne=`var ${qe}_indices: ${ie.type.indices};`;for(let xe=le-2-1,Ke=G-1;xe>=0;xe--,Ke--)ne+=`\n${qe}_indices[${xe}] = ${G>1?`batch_indices[${Ke}]`:"batch_indices"};`;return ue.forEach(xe=>{ne+=`\n${qe}_indices[${xe}] = 0;`}),ne+=`${qe}_indices[${le-2}] = 0u;\n                     ${qe}_indices[${le-1}] = 0u;`,ne},me=()=>{let ie=`var a_data: ${R.type.value};`;for(let ue=0;ue<y;ue++)ie+=`\n              let b_data${ue} = b[(b_offset + (k + ${ue}) * uniforms.N + col) / ${d}];`;for(let ue=0;ue<w;ue++){ie+=`a_data = a[(a_offset + (row + ${ue}) * uniforms.K + k) / ${y}];`;for(let le=0;le<y;le++)ie+=`\n            values[${ue}] = fma(${L.type.value}(a_data${y===1?"":`[${le}]`}), b_data${le}, values[${ue}]);\n`}return ie};return`\n  ${P.registerUniforms(ae).registerInternalVariables(O).declareVariables(...he,N)}\n  ${P.mainStart()}\n    ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let col = (global_idx % (uniforms.N / ${d})) * ${d};\n    var index1 = global_idx / (uniforms.N / ${d});\n    let stride1 = uniforms.M / ${w};\n    let row = (index1 % stride1) * ${w};\n    let batch = index1 / stride1;\n\n    ${r.length===2?"":`let batch_indices = ${O.offsetToIndices("batch")};`}\n    ${Ae(R,We)}\n    let a_offset = ${R.indicesToOffset("a_indices")};\n    ${Ae(L,ee)}\n    let b_offset = ${L.indicesToOffset("b_indices")};\n    var values: array<${N.type.value}, ${w}>;\n    for (var k: u32 = 0u; k < uniforms.K; k = k + ${y}) {\n      ${me()}\n    }\n    for (var i = 0u; i < ${w}u; i++) {\n      var value = values[i];\n      ${W}\n      ${Q}\n      let cur_indices = ${N.type.indices}(batch, row + i, col);\n      let offset = ${N.indicesToOffset("cur_indices")};\n      ${N.setByOffset(`offset / ${d}`,"value")};\n    }\n  }\n  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${y};${w};${i}`,inputDependencies:v?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:x}),getShaderSource:E}},_c=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},ru=e=>{_c(e.inputs);let t=It.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can\'t use matmul on the given tensors");let r=t[t.length-1],o=e.inputs[0].dims[e.inputs[0].dims.length-1];r<8&&o<8?e.compute(Vo(e.inputs,{activation:""},t)):e.compute(Un(e.inputs,{activation:""},t))}});var Vn,No,Sc,nu,Go,xc,Cc,Ho,Uo=Y(()=>{"use strict";Se();Js();Fr();tu();Ft();Wo();Sr();Vn=(e,t,r,o,i,u)=>{let a=e[0],c=e.slice(u?1:2,u?3:4),p=c.length,h=t[0],y=t.slice(2).map((v,S)=>v+(v-1)*(r[S]-1)),_=c.map((v,S)=>v+o[S]+o[S+p]).map((v,S)=>Math.floor((v-y[S]+i[S])/i[S]));return _.splice(0,0,a),_.splice(u?3:1,0,h),_},No=[2,3,1,0],Sc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[1]*t.group;if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},nu=(e,t)=>{let r=e.kernelShape.slice();for(let u=2;u<t[1].dims.length;++u)r[u-2]===0&&(r[u-2]=t[1].dims[u]);let o=e.pads.slice();nr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,o,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:o}),i},Go=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,u=e.group,a=e.kernel_shape,c=e.pads,p=e.strides,h=e.w_is_const();return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},xc=(e,t,r)=>{let o=nu(r,t),i=r.format==="NHWC";if(r.group!==1){if(!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1){let L=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),N=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=N);let K=[t[0],N];t.length===3&&K.push(t[2]),e.compute(eu(K,o,L),{inputs:K})}else e.compute(Mo(t,o));return}let u=t.length===3,a=t[0].dims[i?1:2],c=t[0].dims[i?2:3],p=t[0].dims[i?3:1],h=t[1].dims[2],d=t[1].dims[3],y=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),w=y[i?1:2],_=y[i?2:3],v=y[i?3:1],S=i&&h===a&&d===c&&r.pads[0]===0&&r.pads[1]===0;if(S||h===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let R=y[0],L,N,K,Q=[];if(i){let se=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=se),S){let Ce=a*c*p;L=t[0].reshape([1,R,Ce]),N=se.reshape([1,Ce,v]),K=[1,R,v]}else L=t[0].reshape([R,a*c,p]),N=se.reshape([1,p,v]),K=[R,w*_,v];Q.push(L),Q.push(N)}else L=t[0].reshape([R,p,a*c]),N=t[1].reshape([1,v,p]),K=[R,v,w*_],Q.push(N),Q.push(L);u&&Q.push(t[2]);let he=K[2],W=Q[0].dims[Q[0].dims.length-1];he<8&&W<8?e.compute(Vo(Q,o,y,K,i),{inputs:Q}):e.compute(Un(Q,o,y,K,i),{inputs:Q});return}let A=!0,I=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=I);let x=[t[0],I];u&&x.push(t[2]);let E=i?w*_:v,P=i?v:w*_,O=h*d*p;e.compute(Qs(x,o,y,E,P,O,u,A),{inputs:x})},Cc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],u=[1].concat(t.strides),a=[1].concat(t.dilations),c=[1].concat(t.kernelShape),p=nu({...t,pads:i,strides:u,dilations:a,kernelShape:c},o);e.compute(Mo(o,p,h=>r?[h[0],h[2],h[3]]:[]))},Ho=(e,t)=>{Sc(e.inputs,t),e.inputs[0].dims.length===3?Cc(e,t):xc(e,e.inputs,t)}});var Ac,ou,iu=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();Ac=(e,t=!1,r,o,i=4)=>{let u=I=>{switch(I){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];\n            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];\n            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];\n            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];\n            return ${o}(v0, v1, v2, v3);\n            `;default:throw new Error(`innerElementSize ${I} is not supported.`)}},a=e?`\n      let coord = vec4<i32>(batch, iXR, iXC, xCh);\n      `:`\n      let coord = vec4<i32>(batch, xCh, iXR, iXC);\n      `,c=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,p=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",h=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",d=e?"row":"col",y=e?"col":"row",w=`\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      let outRow = ${d} / outWidth;\n      let outCol = ${d} % outWidth;\n\n      let WRow = ${y} / (uniforms.filter_dims[1] * inChannels);\n      let WCol = ${y} / inChannels % uniforms.filter_dims[1];\n      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(${p}) || fract(xR) > 0.0) {\n        return ${o}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(${h}) || fract(xC) > 0.0) {\n        return ${o}(0.0);\n      }\n      let iXR = i32(xR);\n      let iXC = i32(xC);\n      let xCh = ${y} % inChannels;\n      ${a}\n      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${i}];`,_=e?`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n        ${w}\n      }\n      return ${o}(0.0);`:`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n        ${w}\n      }\n      return ${o}(0.0);`,v=`\n      let col = colIn * ${i};\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);\n      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];\n      if (${e?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {\n        let rowInner = row % inChannels;\n        let coord = vec4<i32>(coordX, coordY, col, rowInner);\n        ${u(i)}\n      }\n      return ${o}(0.0);\n      `,S=St(r,o);return`\n  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?_:v}\n  }\n\n  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?v:_}\n  }\n\n  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${o}) {\n    let col = colIn * ${i};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n      var value = valueInput;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${c}\n      ${Dn(t)}\n      ${S}\n      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${i}] = value;\n    }\n  }`},ou=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&h%4===0&&h%3&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${E}`);let P=v?4:1,O=Math.max(I[0]*P,I[1]),R=v?4:1,L=[t.kernelShape[p?1:2],t.kernelShape[p?2:3]],N=[L[0]+(t.dilations[0]<=1?0:(L[0]-1)*(t.dilations[0]-1)),L[1]+(t.dilations[1]<=1?0:(L[1]-1)*(t.dilations[1]-1))],K=[N[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),N[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],Q=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:t.strides},{type:6,data:t.dilations},{type:6,data:L},{type:6,data:K}];xt(t,Q),Q.push(...Z(e[0].dims,e[1].dims));let he=["rank","rank"];a&&(Q.push(...Z(e[2].dims)),he.push("rank")),Q.push(...Z(r));let W=se=>{let Ce=U("x",e[0].dataType,e[0].dims.length,R),We=U("w",e[1].dataType,e[1].dims.length,1),ee=j("result",e[0].dataType,r.length,R),ae=[Ce,We],Ae="";if(a){let ue=U("bias",e[2].dataType,e[2].dims.length,R);ae.push(ue),Ae+=`\n          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${ue.type.value} {\n            return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n          }`}let me=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:L.length},{name:"pads",type:"i32",length:K.length}];Ct(t,me);let ie=De(e[0].dataType,1);if(ie!=="f16"&&ie!=="f32")throw new Error(`elemType ${ie} is not supported.`);return`\n        ${Mn("uniforms.result_strides")}\n        ${se.registerUniforms(me).declareVariables(...ae,ee)};\n        ${Ae}\n        ${Ac(p,a,t,Ce.type.value,P)}\n        ${v?Hr(x,I,ie,void 0,!p,O):Lr(x,I,ie,void 0,!p,O,!1,void 0,c)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${t.cacheKey};${x};${I};${v}`,inputDependencies:he},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:Q}),getShaderSource:W}}});var Ic,Lo,au=Y(()=>{"use strict";ye();Lt();Se();_e();Ic=(e,t,r,o,i,u=!1,a,c,p=!1)=>{let h=p?1:2,d=p?2:3,y=p?3:1,w=u?2:1,_=`\n  fn setOutputAtIndex(flatIndex : u32, value : ${u?`vec4<${a}>`:a}) {\n    result[flatIndex] = ${u?`vec4<${a}>`:a}(value);\n  }`;o&&(_+=`\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${u?`vec4<${a}>`:a} {\n      return bias[coords.${p?"w":"y"}${u?"/ 4":""}];\n    }`);let v=u?4:1,S=U("W",t[1].dataType,t[1].dims.length,v),A=U("Dy",t[0].dataType,t[0].dims.length,v),I=[A,S];o&&I.push(U("bias",t[2].dataType,[r[y]].length,v));let x=j("result",t[0].dataType,r.length,v),E=`{\n        let batch: u32 = ${i?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];\n        let r = ${i?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];\n        let c = ${i?"global_id.y":"workgroup_id.y"} * ${w};\n        let d1: u32 = ${i?"global_id.x":"workgroup_id.x"} * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<${a}>, ${w}>;\n        for (var i = 0; i < ${w}; i++) {\n          dotProd[i] = vec4<${a}>(0.0);\n        }\n        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {\n          var dyR = (${a}(dyCorner.x) + ${a}(wR)) / ${a}(uniforms.strides.x);\n          let wRPerm = uniforms.filter_dims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {\n            let dyC = (${a}(dyCorner.y) + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let dyC2 = (${a}(dyCorner.y) + 1.0 + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let wCPerm = uniforms.filter_dims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ${A.get("batch","idyR","idyC2","d2")};\n\n                dotProd[1] = dotProd[1] + vec4<${a}>(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = uniforms.Dy_shape[${y}];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC2","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ${w}; i = i + 1) {\n          let value = dotProd[i] + ${o?"bias[c+i]":`vec4<${a}>(0.0)`};\n          ${x.set("batch","r","c + i","d1","value")};\n        }\n      }`,P=`\n          let outputIndices = ${x.offsetToIndices("global_idx")};\n          let batch = ${x.indicesGet("outputIndices",0)};\n          let d1 = ${x.indicesGet("outputIndices",y)};\n          let r = ${x.indicesGet("outputIndices",h)};\n          let c = ${x.indicesGet("outputIndices",d)};\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / uniforms.output_channels_per_group;\n          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = ${a}(0.0);\n          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {\n            if (wR % uniforms.dilations.x != 0) {\n              continue;\n            }\n            let dyR = (${a}(dyRCorner) + ${a}(wR)) / ${a}(uniforms.strides[0]);\n            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;\n            if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[${h}]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {\n              if (wC % uniforms.dilations.y != 0) {\n                continue;\n              }\n              let dyC = (${a}(dyCCorner) + ${a}(wC)) / ${a}(uniforms.strides.y);\n              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;\n              if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[${d}]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n              var inputChannel = groupId * uniforms.input_channels_per_group;\n              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {\n                let xValue = ${p?A.get("batch","idyR","idyC","inputChannel"):A.get("batch","inputChannel","idyR","idyC")};\n                let wValue = ${S.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};\n                dotProd = dotProd + xValue * wValue;\n                inputChannel = inputChannel + 1;\n              }\n            }\n          }\n          let value = dotProd + ${o?"bias[d1]":`${a}(0.0)`};\n          ${x.setByOffset("global_idx","value")};\n        `;return`\n  ${e.registerUniforms(c).declareVariables(...I,x)}\n  ${_}\n\n    ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};\n  ${u?E:P}}`},Lo=(e,t,r)=>{let o=e.length>2,i=t.outputShape,u=M.size(i),a=[Math.ceil(u/64),1,1];Ve("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${a}`);let c=t.format==="NHWC",p=["rank","rank"],h=[t.strides[0],t.strides[1]],d=[t.kernelShape[c?1:2],t.kernelShape[c?2:3]],y=[t.dilations[0],t.dilations[1]],w=[d[0]+(t.dilations[0]<=1?0:(t.kernelShape[c?1:2]-1)*(t.dilations[0]-1)),d[1]+(t.dilations[1]<=1?0:(t.kernelShape[c?2:3]-1)*(t.dilations[1]-1))],_=[w[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),w[1]-1-Math.floor(t.pads[1]+t.pads[3])/2],v=!1,S=t.group,A=e[1].dims,I=A[0]/S,x=A[1],E=[{type:12,data:u},{type:12,data:h},{type:12,data:d},{type:12,data:y},{type:12,data:w},{type:6,data:_},{type:12,data:I},{type:12,data:x},...Z(e[0].dims,e[1].dims)];o&&(E.push(...Z(e[2].dims)),p.push("rank")),E.push(...Z(i));let P=a[1]===1&&a[2]===1,O=R=>{let L=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:h.length},{name:"filter_dims",type:"u32",length:d.length},{name:"dilations",type:"u32",length:d.length},{name:"effective_filter_dims",type:"u32",length:w.length},{name:"pads",type:"i32",length:_.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],N=De(e[0].dataType);return`${Ic(R,e,i,o,P,v,N,L,c)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};`,inputDependencies:p},getRunData:()=>({dispatchGroup:{x:a[0],y:a[1],z:a[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:E}),getShaderSource:O}}});var Tc,Ec,Pc,su,uu,kc,Oc,Rc,Bc,du,lu=Y(()=>{"use strict";iu();au();Ft();Sr();Tc=(e,t,r,o,i,u)=>(e-1)*t+r+(o-1)*i+1-u,Ec=(e,t,r,o,i)=>{let u=Math.floor(e/2);t==="SAME_UPPER"?(r[o]=u,r[i]=e-u):t==="SAME_LOWER"&&(r[o]=e-u,r[i]=u)},Pc=(e,t,r,o,i,u,a,c,p,h)=>{let d=e.length-2,y=h.length===0;if(p.length===0)for(let v=0;v<d;++v)p.push(0);let w=e[0],_=t[c?3:1]*i;for(let v=0,S=e.length-d-(c?1:0);v<d;++v,++S){let A=e[S],I=y?A*a[v]:h[v],x=Tc(A,a[v],u[v],t[S],r[v],I);Ec(x,o,u,v,v+d),y&&h.push(a[v]*(A-1)+p[v]+(t[S]-1)*r[v]+1-u[v]-u[v+d])}h.splice(0,0,w),h.splice(c?3:1,0,_)},su=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((y,w)=>y*w,1)===0){r.length=0;for(let y=2;y<t[1].dims.length;++y)r.push(t[1].dims[y])}let o=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(o?3:1,0,t[1].dims[1]);let i=e.pads.slice(),u=e.outputShape.slice(),a=e.outputPadding.slice(),c=t[0].dims,p=e.dilations.slice();if(p.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;p=new Array(y).fill(1)}let h=e.strides.slice();if(h.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;h=new Array(y).fill(1)}Pc(c,r,p,e.autoPad,e.group,i,h,o,a,u);let d=Object.assign({},e);return Object.assign(d,{kernelShape:r,pads:i,outputPadding:a,outputShape:u,dilations:p,strides:h}),d},uu=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,u=e.group,a=e.kernelShape,c=e.pads,p=e.strides,h=e.wIsConst(),d=e.outputPadding,y=e.outputShape;return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,outputPadding:d,outputShape:y,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},kc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[0];if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let u=e[0].dims.length-2;if(t.dilations.reduce((d,y)=>d+y,0)>0&&t.dilations.length!==u)throw new Error(`dilations should be ${u}D`);if(t.strides.reduce((d,y)=>d+y,0)>0&&t.strides.length!==u)throw new Error(`strides should be ${u}D`);if(t.pads.reduce((d,y)=>d+y,0)>0&&t.pads.length!==u*2)throw new Error(`pads should be ${u*2}D`);if(t.outputPadding.length!==u&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${u}D`);if(t.kernelShape.reduce((d,y)=>d+y,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Oc=[2,3,1,0],Rc=(e,t,r)=>{let o=su(r,t),i=r.format==="NHWC",u=o.outputShape,a=u[i?3:1],c=t[0].dims[i?3:1];if(o.group!==1||a===1&&c===1){e.compute(Lo(t,o));return}let p=u[i?1:2],h=u[i?2:3],d=t[1].dims[2],y=t[1].dims[3],w=i?p*h:a,_=i?a:p*h,v=d*y*c,S=!0,A=e.kernelCustomData.wT??e.compute(yt(t[1],Oc),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=A);let I=[t[0],A],x=t.length===3;x&&(!i&&t[2].dims.length===1?I.push(t[2].reshape([t[2].dims[0],1,1])):I.push(t[2])),e.compute(ou(I,o,u,w,_,v,x,S),{inputs:I})},Bc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let u=t.dilations;(u.length===0||u[0]===0)&&(u=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let c=t.pads;c.length===0&&(c=[0,0]),c=[0,c[0],0,c[1]],a=[1].concat(a),u=[1].concat(u),i=[1].concat(i);let p=su({...t,pads:c,strides:a,dilations:u,kernelShape:i},o);e.compute(Lo(o,p,h=>r?[h[0],h[2],h[3]]:[h[0],h[1],h[3]]))},du=(e,t)=>{kc(e.inputs,t),e.inputs[0].dims.length===3?Bc(e,t):Rc(e,e.inputs,t)}});var Dc,cu,pu,mu=Y(()=>{"use strict";ye();Se();Ze();_e();Dc=(e,t,r,o)=>{let i=M.size(t),u=t.length,a=U("input",e,u),c=j("output",e,u),p=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),h=M.normalizeAxis(p,u),d=y=>{let w=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,_=fe("uniforms.input_shape","uniforms.axis",u),v=o.reverse?w+(o.exclusive?" + 1":""):"0",S=o.reverse?_:w+(o.exclusive?"":" + 1");return`\n                ${y.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,c)}\n                ${y.mainStart()}\n                  ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n                  var inputIndices = ${c.offsetToIndices("global_idx")};\n                  var sum = ${c.type.value}(0);\n                  let first : i32 = ${v};\n                  let last : i32 = ${S};\n                  for (var i : i32 = first; i < last; i++) {\n                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};\n                    sum = sum + ${a.getByIndices("inputIndices")};\n                  }\n                  ${c.setByOffset("global_idx","sum")};\n                }`};return{name:"CumSum",shaderCache:{hint:o.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:h},...Z(t,t)]}),getShaderSource:d}},cu=(e,t)=>{let r=e.inputs[0].dims,o=e.inputs[0].dataType,i=e.inputs[1];e.compute(Dc(o,r,i,t),{inputs:[0]})},pu=e=>{let t=e.exclusive===1,r=e.reverse===1;return ve({exclusive:t,reverse:r})}});var zc,Mc,Uc,fu,hu,gu=Y(()=>{"use strict";ye();Se();Ze();_e();zc=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Mc=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},Uc=(e,t)=>{let r,o,i,u,a,c,p=t.format==="NHWC",h=t.blocksize,d=t.mode==="DCR";p?([r,o,i,u]=e.dims,a=d?[r,o,i,h,h,u/h**2]:[r,o,i,u/h**2,h,h],c=d?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,o,i,u]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=d?[r,h,h,u/h**2,o,i]:[r,u/h**2,h,h,o,i],c=d?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let y=e.reshape(a),w=y.dims.length,_=e.dataType,v=U("a",_,w),S=j("output",_,w),A=I=>`\n  ${I.registerUniform("output_size","u32").declareVariables(v,S)}\n\n  ${Mc(c,w,v,S)}\n\n  ${I.mainStart()}\n    ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${S.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${S.setByOffset("global_idx",v.getByIndices("aIndices"))}\n  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:I=>{let x=p?[r,o*h,i*h,u/h**2]:[r,u/h**2,o*h,i*h],E=M.size(x),P=y.dims,O=M.sortBasedOnPerm(P,c);return{outputs:[{dims:x,dataType:I[0].dataType}],dispatchGroup:{x:Math.ceil(E/64)},programUniforms:[{type:12,data:E},...Z(P,O)]}},getShaderSource:A}},fu=(e,t)=>{zc(e.inputs),e.compute(Uc(e.inputs[0],t))},hu=e=>ve({blocksize:e.blocksize,mode:e.mode,format:e.format})});var Fo,Wn,yu,Vc,Wc,qo,jo,bu,Nc,wu,vu,$u=Y(()=>{"use strict";ye();Se();Ze();_e();Fo="[a-zA-Z]|\\\\.\\\\.\\\\.",Wn="("+Fo+")+",yu="^"+Wn+"$",Vc="("+Wn+",)*"+Wn,Wc="^"+Vc+"$",qo=class{constructor(t=-1){this.symbolToIndices=new Map,this.inputIndex=t}addSymbol(t,r){let o=this.symbolToIndices.get(t);o===void 0?o=[r]:o.push(r),this.symbolToIndices.set(t,o)}},jo=class{constructor(t,r){this.equation=r;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[o,i]=r.includes("->")?r.split("->",2):[r,""];if(!o.match(RegExp(Wc)))throw new Error("Invalid LHS term");if(o.split(",").forEach((c,p)=>{let h=t[p].dims.slice();if(!c.match(RegExp(yu)))throw new Error("Invalid LHS term");let d=this.processTerm(c,!0,h,p);this.lhs.push(d)}),i==="")i+=[...this.symbolToInfo.entries()].filter(([c,p])=>p.count===1||c==="...").map(([c])=>c).join("");else if(!i.match(RegExp(Wn)))throw new Error("Invalid RHS");i.match(RegExp(Fo,"g"))?.forEach(c=>{if(c==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let p=this.symbolToInfo.get(c);if(p===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(p.dimValue)}}),this.rhs=this.processTerm(i,!1,this.outputDims)}addSymbol(t,r,o){let i=this.symbolToInfo.get(t);if(i!==void 0){if(i.dimValue!==r&&i.count!==1)throw new Error("Dimension mismatch");i.count++,i.inputIndices.push(o)}else i={count:1,dimValue:r,inputIndices:[o]};this.symbolToInfo.set(t,i)}processTerm(t,r,o,i=-1){let u=o.length,a=!1,c=[],p=0;if(!t.match(RegExp(yu))&&!r&&t!=="")throw new Error("Invalid LHS term");let h=t.match(RegExp(Fo,"g")),d=new qo(i);return h?.forEach((y,w)=>{if(y==="..."){if(a)throw new Error("Only one ellipsis is allowed per input term");a=!0;let _=u-h.length+1;if(_<0)throw new Error("Ellipsis out of bounds");if(c=o.slice(p,p+_),this.hasEllipsis){if(this.ellipsisDims.length!==c.length||this.ellipsisDims.toString()!==c.toString())throw new Error("Ellipsis dimensions mismatch")}else if(r)this.hasEllipsis=!0,this.ellipsisDims=c;else throw new Error("Ellipsis must be specified in the LHS");for(let v=0;v<c.length;v++){let S=String.fromCharCode("0".charCodeAt(0)+v);d.addSymbol(S,w+v),this.addSymbol(S,o[p++],i)}}else d.addSymbol(y,w+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(y,o[p++],i)}),d}},bu=e=>e+"_max",Nc=(e,t,r,o)=>{let u=e.map(d=>d.length).map((d,y)=>U(`input${y}`,t,d)),a=M.size(o),c=j("output",t,o.length),p=[...r.symbolToInfo.keys()].filter(d=>!r.rhs.symbolToIndices.has(d)),h=d=>{let y=[],w="var prod = 1.0;",_="var sum = 0.0;",v="sum += prod;",S=[],A=[],I=[],x=[],E=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((O,R)=>{if(r.rhs.symbolToIndices.has(R)){let L=r.rhs.symbolToIndices.get(R)?.[0];L!==void 0&&r.lhs.forEach((N,K)=>{if(O.inputIndices.includes(K)){let Q=N.symbolToIndices.get(R);if(Q===void 0)throw new Error("Invalid symbol error");Q.forEach(he=>{y.push(`${u[K].indicesSet(`input${K}Indices`,he,c.indicesGet("outputIndices",L))}`)})}})}else r.lhs.forEach((L,N)=>{if(O.inputIndices.includes(N)){let K=L.symbolToIndices.get(R);if(K===void 0)throw new Error("Invalid symbol error");K.forEach(Q=>{S.push(`${u[N].indicesSet(`input${N}Indices`,Q,`${R}`)}`)}),x.push(`prod *= ${u[N].getByIndices(`input${N}Indices`)};`)}}),A.push(`for(var ${R}: u32 = 0; ${R} < uniforms.${bu(R)}; ${R}++) {`),I.push("}")});let P=E?[...y,`let sum = ${u.map((O,R)=>O.getByIndices(`input${R}Indices`)).join(" * ")};`]:[...y,_,...A,...S,w,...x,v,...I];return`\n            ${d.registerUniforms(p.map(O=>({name:`${bu(O)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...u,c)}\n\n            ${d.mainStart()}\n            ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n            var outputIndices = ${c.offsetToIndices("global_idx")};\n            ${u.map((O,R)=>`var input${R}Indices: ${u[R].type.indices};`).join(`\n`)}\n            ${P.join(`\n`)};\n            ${c.setByOffset("global_idx","sum")};\n          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let d=p.filter(w=>r.symbolToInfo.has(w)).map(w=>({type:12,data:r.symbolToInfo.get(w)?.dimValue||0}));d.push({type:12,data:a});let y=e.map((w,_)=>[...Z(w)]).reduce((w,_)=>w.concat(_),d);return y.push(...Z(o)),{outputs:[{dims:o,dataType:t}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:y}},getShaderSource:h}},wu=(e,t)=>{let r=new jo(e.inputs,t.equation),o=r.outputDims,i=e.inputs.map((u,a)=>u.dims);e.compute(Nc(i,e.inputs[0].dataType,r,o))},vu=e=>{let t=e.equation.replace(/\\s+/g,"");return ve({equation:t})}});var Gc,_u,Hc,Lc,Su,xu=Y(()=>{"use strict";ye();Se();_e();Gc=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;o<r.length&&i<t.length;++o,++i)if(r[o]!==t[i]&&r[o]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},_u=(e,t)=>{let r=e.length-t.length,o=[];for(let i=0;i<r;++i)o.push(e[i]);for(let i=0;i<t.length;++i)o.push(t[i]===1?e[i+r]:t[i]);return o},Hc=(e,t)=>e.length>t.length?_u(e,t):_u(t,e),Lc=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=Hc(t,r),i=e[0].dataType,u=i===9?4:1,a=Math.ceil(M.size(o)/u),c=h=>{let d=U("input",i,t.length,u),y=j("output",i,o.length,u),w;if(i===9){let _=(v,S,A="")=>`\n          let outputIndices${S} = ${y.offsetToIndices(`outputOffset + ${S}u`)};\n          let offset${S} = ${d.broadcastedIndicesToOffset(`outputIndices${S}`,y)};\n          let index${S} = offset${S} / 4u;\n          let component${S} = offset${S} % 4u;\n          ${v}[${S}] = ${A}(${d.getByOffset(`index${S}`)}[component${S}]);\n        `;w=`\n        let outputOffset = global_idx * ${u};\n        var data = vec4<u32>(0);\n        ${_("data",0,"u32")}\n        ${_("data",1,"u32")}\n        ${_("data",2,"u32")}\n        ${_("data",3,"u32")}\n        ${y.setByOffset("global_idx","data")}\n      }`}else w=`\n        let outputIndices = ${y.offsetToIndices("global_idx")};\n        let inputOffset = ${d.broadcastedIndicesToOffset("outputIndices",y)};\n        ${y.setByOffset("global_idx",d.getByOffset("inputOffset"))}\n      }`;return`\n    ${h.registerUniform("vec_size","u32").declareVariables(d,y)}\n    ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n    ${w}`},p=[{type:12,data:a},...Z(t,o)];return{name:"Expand",shaderCache:{hint:`${o.length}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:p})}},Su=e=>{Gc(e.inputs),e.compute(Lc(e.inputs),{inputs:[0]})}});var Fc,Cu,Au=Y(()=>{"use strict";ye();Se();_e();Rn();Fc=e=>{let t=e[0].dataType,r=M.size(e[0].dims),o=M.size(e[1].dims),i=o%4===0,u=a=>{let c=U("x",t,[1],4),p=U("bias",t,[1],4),h=j("y",t,[1],4),d=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],y=_=>`\n      let bias${_}_offset: u32 = (global_idx * 4 + ${_}) % uniforms.bias_size;\n      let bias${_} = ${p.getByOffset(`bias${_}_offset / 4`)}[bias${_}_offset % 4];`,w=i?`\n      let bias = ${p.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${y(0)}${y(1)}${y(2)}${y(3)}\n      let bias = ${c.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(d).declareVariables(c,p,h)}\n\n    ${Bo(et(t))}\n\n    ${a.mainStart(or)}\n      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}\n\n      let x = ${c.getByOffset("global_idx")};\n      ${w}\n      let x_in = x + bias;\n      ${h.setByOffset("global_idx",Do("x_in"))}\n    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:u,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:o}],dispatchGroup:{x:Math.ceil(r/or/4)}})}},Cu=e=>{e.inputs.length<2||M.size(e.inputs[1].dims)===0?Bs(e):e.compute(Fc(e.inputs))}});var qc,jc,Iu,Tu,Eu=Y(()=>{"use strict";ye();Se();Ze();_e();qc=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},jc=(e,t)=>{let r=e[0].dims,o=e[1].dims,i=r.length,u=M.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(u,1,...o);let c=r[u],p=e[0].dataType===9?4:1,h=Math.ceil(M.size(a)/p),d=[{type:12,data:h},{type:6,data:c},{type:12,data:u},...Z(e[0].dims,e[1].dims,a)],y=w=>{let _=U("data",e[0].dataType,e[0].dims.length,p),v=U("inputIndices",e[1].dataType,e[1].dims.length),S=j("output",e[0].dataType,a.length,p),A=x=>{let E=o.length,P=`var indicesIndices${x}  = ${v.type.indices}(0);`;for(let O=0;O<E;O++)P+=`${E>1?`indicesIndices${x}[${O}]`:`indicesIndices${x}`} = ${a.length>1?`outputIndices${x}[uniforms.axis + ${O}]`:`outputIndices${x}`};`;P+=`\n          var idx${x} = ${v.getByIndices(`indicesIndices${x}`)};\n          if (idx${x} < 0) {\n            idx${x} = idx${x} + uniforms.axisDimLimit;\n          }\n          var dataIndices${x} : ${_.type.indices};\n        `;for(let O=0,R=0;O<i;O++)O===u?(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = u32(idx${x});`,R+=E):(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = ${a.length>1?`outputIndices${x}[${R}]`:`outputIndices${x}`};`,R++);return P},I;if(e[0].dataType===9){let x=(E,P,O="")=>`\n          let outputIndices${P} = ${S.offsetToIndices(`outputOffset + ${P}u`)};\n          ${A(P)};\n          let offset${P} = ${_.indicesToOffset(`dataIndices${P}`)};\n          let index${P} = offset${P} / 4u;\n          let component${P} = offset${P} % 4u;\n          ${E}[${P}] = ${O}(${_.getByOffset(`index${P}`)}[component${P}]);\n        `;I=`\n        let outputOffset = global_idx * ${p};\n        var value = vec4<u32>(0);\n        ${x("value",0,"u32")}\n        ${x("value",1,"u32")}\n        ${x("value",2,"u32")}\n        ${x("value",3,"u32")}\n        ${S.setByOffset("global_idx","value")}\n      `}else I=`\n      let outputIndices = ${S.offsetToIndices("global_idx")};\n      ${A("")};\n      let value = ${_.getByIndices("dataIndices")};\n      ${S.setByOffset("global_idx","value")};\n      `;return`\n      ${w.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(_,v,S)}\n      ${w.mainStart()}\n        ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        ${I}\n      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:y}},Iu=e=>ve({axis:e.axis}),Tu=(e,t)=>{let r=e.inputs;qc(r),e.compute(jc(e.inputs,t))}});var Kc,Yc,Pu,ku,Ou=Y(()=>{"use strict";ye();Se();Ze();_e();Kc=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and\n                     indices input tensors be of same rank.`)},Yc=(e,t)=>{let r=e[0].dims,o=e[0].dataType,i=r.length,u=e[1].dims,a=e[1].dataType,c=M.normalizeAxis(t.axis,i),p=r[c],h=u.slice(0),d=M.size(h),y=U("input",o,i),w=U("indicesInput",a,u.length),_=j("output",o,h.length),v=[{type:12,data:d},{type:6,data:p},{type:12,data:c}];return v.push(...Z(r,u,h)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:v}),getShaderSource:I=>`\n      ${I.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(y,w,_)}\n      ${I.mainStart()}\n      ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n      let outputIndices = ${_.offsetToIndices("global_idx")};\n\n      var idx = ${w.getByOffset("global_idx")};\n      if (idx < 0) {\n        idx = idx + uniforms.axisDimLimit;\n      }\n      var inputIndices = ${y.type.indices}(outputIndices);\n      ${y.indicesSet("inputIndices","uniforms.axis","u32(idx)")};\n      let value = ${y.getByIndices("inputIndices")};\n\n      ${_.setByOffset("global_idx","value")};\n  }`}},Pu=e=>ve({axis:e.axis}),ku=(e,t)=>{let r=e.inputs;Kc(r),e.compute(Yc(e.inputs,t))}});var Zc,Xc,Ru,Bu,Du=Y(()=>{"use strict";ye();Se();_e();Zc=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},Xc=(e,t)=>{let r=e[0].dims.slice(),o=e[1].dims.slice(),[i,u,a]=Sn.getShapeOfGemmResult(r,t.transA,o,t.transB,e.length===3?e[2].dims:void 0),c=[i,u];if(!c)throw new Error("Can\'t use gemm on the given tensors");let p=M.size(c),h=[{type:12,data:p},{type:12,data:i},{type:12,data:u},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],d=["type","type"];e.length===3&&(h.push(...Z(e[2].dims)),d.push("rank")),h.push(...Z(c));let y=w=>{let _="";t.transA&&t.transB?_="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?_="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?_="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(_="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let v=t.alpha===1?"":"value *= uniforms.alpha;",S=U("a",e[0].dataType,e[0].dims),A=U("b",e[1].dataType,e[1].dims),I=S.type.value,x=null,E=[S,A];e.length===3&&(x=U("c",e[2].dataType,e[2].dims.length),E.push(x));let P=j("output",e[0].dataType,c.length);E.push(P);let O=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`\n  ${w.registerUniforms(O).declareVariables(...E)}\n\n  ${w.mainStart()}\n    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let m = global_idx / uniforms.N;\n    let n = global_idx % uniforms.N;\n\n    var value = ${I}(0);\n    for (var k: u32 = 0u; k < uniforms.K; k++) {\n      ${_}\n    }\n\n    ${v}\n    ${(()=>x!=null?`let cOffset = ${x.broadcastedIndicesToOffset("vec2(m, n)",P)}; value += ${I}(uniforms.beta) * ${x.getByOffset("cOffset")};`:"")()}\n    output[global_idx] = value;\n  }`};return{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:y}},Ru=e=>{let t=e.transA,r=e.transB,o=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:o,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},Bu=(e,t)=>{Zc(e.inputs),e.compute(Xc(e.inputs,t))}});var Qc,Jc,ep,zu,Mu=Y(()=>{"use strict";ye();Se();_e();Qc=(e,t)=>{let r=e[0].dims,o=r,i=2,u=M.sizeToDimension(r,i),a=M.sizeFromDimension(r,i),c=Me(a),p=a/c,h=[r[0],r[1],p],d=["rank","type","type"],y=[{type:12,data:a},{type:12,data:p}];y.push(...Z(h,h));let w=_=>{let v=U("x",e[0].dataType,h.length,c),S=U("scale",e[1].dataType,e[1].dims),A=U("bias",e[2].dataType,e[2].dims),I=j("output",e[0].dataType,h.length,c),x=[v,S,A,I],E=v.type.value,P=c===1?"f32":`vec${c}<f32>`,O=64,R=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`\n  var<workgroup> meanShared : f32;\n  var<workgroup> squaredNormShared : f32;\n  var<workgroup> workgroupShared : array<${P}, ${O}>;\n  const workgroupSize = ${O}u;\n  ${_.registerUniforms(R).declareVariables(...x)}\n  ${_.mainStart(O)}\n    let norm = global_idx / workgroupSize;\n    let batch = norm / uniforms.x_shape[1];\n    let channel = norm % uniforms.x_shape[1];\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      initial = initial + ${P}(${v.get("batch","channel","h")});\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = ${_t("workgroupShared[0]",c)} / f32(uniforms.normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let deviation =  ${P}(${v.get("batch","channel","h")}) - ${P}(meanShared);\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = ${_t("workgroupShared[0]",c)};\n    }\n    workgroupBarrier();\n\n    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${t.epsilon}));\n    let channelScale = invStdDev * f32(${S.getByOffset("channel")});\n    let channelShift = f32(${A.getByOffset("channel")}) - meanShared * channelScale;\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let value = ${v.get("batch","channel","h")} * ${E}(${P}(channelScale)) + ${E}(${P}(channelShift));\n      ${I.set("batch","channel","h","value")};\n    }\n  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${t.epsilon};${c}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:u},programUniforms:y}),getShaderSource:w}},Jc=(e,t,r,o,i,u,a,c)=>{let p=Me(a),h=64,d=p===1?"vec2f":`mat2x${p}f`,y=p===1?"f32":`vec${p}f`,w=(R,L)=>`${d}(${R}, ${L})`,_=i*a/p,v=Math.ceil(u/h),S=["type"],A=[{type:12,data:v},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(u*a/p)}],I=R=>{let L=U("input",t.dataType,t.dims,p);return`\n  ${R.declareVariables(L)}\n  @group(0) @binding(1) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};\n  @group(0) @binding(2) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart(h)}\n    let currentImageNumber = global_idx / ${h} / uniforms.C;\n    let currentChannelNumber = (global_idx / ${h}) % uniforms.C;\n    let wgOffset = local_id.x * uniforms.wg_size;\n    if (wgOffset >= uniforms.H) {\n        return;\n    }\n    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);\n\n    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = wgOffset; i < wgMax; i++) {\n        let value = ${y}(input[offset + i * uniforms.C]);\n        sum += value;\n        squaredSum += value * value;\n    }\n    output[global_idx] = ${w("sum","squaredSum")};\n  }`},x=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${p}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:[i,a,h,2],dataType:1}],dispatchGroup:{x:i*a/p},programUniforms:A}),getShaderSource:I},{inputs:[t],outputs:[-1]})[0],E=[{type:12,data:_},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(h*a/p)}],P=["type","type","type"],O=R=>{let L=U("scale",r.dataType,r.dims,p),N=U("bias",o.dataType,o.dims,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${d}>;\n  @group(0) @binding(1) var<storage, read> scale : array<${L.type.storage}>;\n  @group(0) @binding(2) var<storage, read> bias : array<${N.type.storage}>;\n  @group(0) @binding(3) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};\n  @group(0) @binding(4) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart()}\n    ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}\n    let currentImageNumber = global_idx / uniforms.C;\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let offset = currentImageNumber * uniforms.image_size;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = 0; i < min(${h}, uniforms.H); i++) {\n        let value = input[offset + i + currentChannelNumber * ${h}];\n        sum += value[0];\n        squaredSum += value[1];\n    }\n    sum = sum / f32(uniforms.H);\n    squaredSum = squaredSum / f32(uniforms.H);\n    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${c}));\n    let channelScale = invStdDev * ${y}(scale[currentChannelNumber]);\n    let channelShift = ${y}(bias[currentChannelNumber]) - sum * channelScale;\n\n    output[global_idx] = ${w("channelScale","channelShift")};\n  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${p};${c}`,inputDependencies:P},getRunData:()=>({outputs:[{dims:[i,a,2],dataType:1}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:E}),getShaderSource:O},{inputs:[x,r,o],outputs:[-1]})[0]},ep=(e,t,r)=>{let o=t[0].dims,i=o,u=o[0],a=o[o.length-1],c=M.sizeFromDimension(o,1)/a,p=Me(a),h=M.size(i)/p,d=[{type:12,data:c},{type:12,data:Math.floor(a/p)}],y=["type","type"],w=Jc(e,t[0],t[1],t[2],u,c,a,r.epsilon),_=v=>{let S=De(t[0].dataType),A=p===1?"vec2f":`mat2x${p}f`,I=p===1?S:`vec${p}<${S}>`,x=U("input",t[0].dataType,t[0].dims,p),E=j("output",t[0].dataType,i,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${x.type.storage}>;\n  @group(0) @binding(1) var<storage, read> scaleInput : array<${A}>;\n  @group(0) @binding(2) var<storage, read_write> output : array<${E.type.storage}>;\n  struct Uniforms {H: u32, C : u32};\n  @group(0) @binding(3) var<uniform> uniforms: Uniforms;\n\n  ${v.mainStart()}\n    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;\n    let scale = scaleInput[scaleOffset];\n    output[global_idx] = fma(input[global_idx], ${I}(scale[0]), ${I}(scale[1]));\n  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${p}`,inputDependencies:y},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:_},{inputs:[t[0],w]})},zu=(e,t)=>{t.format==="NHWC"?ep(e,e.inputs,t):e.compute(Qc(e.inputs,t))}});var tp,rp,Uu,Vu=Y(()=>{"use strict";ye();Se();_e();tp=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},rp=(e,t,r)=>{let o=t.simplified,i=e[0].dims,u=e[1],a=!o&&e[2],c=i,p=M.normalizeAxis(t.axis,i.length),h=M.sizeToDimension(i,p),d=M.sizeFromDimension(i,p),y=M.size(u.dims),w=a?M.size(a.dims):0;if(y!==d||a&&w!==d)throw new Error(`Size of X.shape()[axis:] == ${d}.\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ${y} and bias size of ${w}`);let _=[];for(let O=0;O<i.length;++O)O<p?_.push(i[O]):_.push(1);let v=Me(d),S=["type","type"],A=[{type:12,data:h},{type:1,data:d},{type:12,data:Math.floor(d/v)},{type:1,data:t.epsilon}];a&&S.push("type");let I=r>1,x=r>2,E=O=>{let R=De(e[0].dataType),L=[U("x",e[0].dataType,e[0].dims,v),U("scale",u.dataType,u.dims,v)];a&&L.push(U("bias",a.dataType,a.dims,v)),L.push(j("output",e[0].dataType,c,v)),I&&L.push(j("mean_data_output",1,_)),x&&L.push(j("inv_std_output",1,_));let N=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`\n  ${O.registerUniforms(N).declareVariables(...L)}\n  ${O.mainStart()}\n    ${O.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}\n    let offset = global_idx * uniforms.norm_size_vectorized;\n    var mean_vector = ${$t("f32",v)};\n    var mean_square_vector = ${$t("f32",v)};\n\n    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {\n      let value = ${ir(R,v,"x[h + offset]")};\n      mean_vector += value;\n      mean_square_vector += value * value;\n    }\n    let mean = ${_t("mean_vector",v)} / uniforms.norm_size;\n    let inv_std_dev = inverseSqrt(${_t("mean_square_vector",v)} / uniforms.norm_size ${o?"":"- mean * mean"} + uniforms.epsilon);\n\n    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {\n      let f32input = ${ir(R,v,"x[j + offset]")};\n      let f32scale = ${ir(R,v,"scale[j]")};\n      output[j + offset] = ${L[0].type.value}((f32input ${o?"":"- mean"}) * inv_std_dev * f32scale\n        ${a?`+ ${ir(R,v,"bias[j]")}`:""}\n      );\n    }\n\n    ${I?"mean_data_output[global_idx] = mean":""};\n    ${x?"inv_std_output[global_idx] = inv_std_dev":""};\n  }`},P=[{dims:c,dataType:e[0].dataType}];return I&&P.push({dims:_,dataType:1}),x&&P.push({dims:_,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${v};${r};${o}`,inputDependencies:S},getRunData:()=>({outputs:P,dispatchGroup:{x:Math.ceil(h/64)},programUniforms:A}),getShaderSource:E}},Uu=(e,t)=>{tp(e.inputs),e.compute(rp(e.inputs,t,e.outputCount))}});var np,op,Wu,Nu,Gu=Y(()=>{"use strict";ye();Se();Ze();_e();np=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],o=r.dims.length;if(r.dims[o-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),u=t.blockSize/8*t.bits,a=e[1];if(!M.areEqual(a.dims,[t.n,i,u]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let p=e[2].dims;if(M.size(p)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let d=e[3].dims,y=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(M.size(d)!==y)throw new Error("zeroPoints input size error.")}},op=(e,t,r,o)=>{let i=e[0].dims,u=i.length,a=Math.floor((t.k+t.blockSize-1)/t.blockSize),c=i[u-2],p=t.k,h=t.n,d=i.slice(0,u-2),y=M.size(d),_=t.blockSize/8*t.bits/4,v=e[0].dataType,S=Me(c),A=Me(t.k),I=Me(_),x=tr(v),E=c*a*x,P=Math.floor(o/E),O=a<=r[0]&&P>0,R=!O||P>=4?Me(h):P>=2&&Me(h)>=2?2:1,L=d.concat([c,h]),N=M.size(L)/R/S,K=O?[]:[{type:12,data:N},{type:12,data:t.blockSize}],Q=[y,c,p/A],he=M.convertShape(e[1].dims).slice();he.splice(-1,1,_/I),K.push(...Z(Q)),K.push(...Z(he)),K.push(...Z(e[2].dims)),e.length===4&&K.push(...Z(M.convertShape(e[3].dims)));let W=[y,c,h/R];K.push(...Z(W));let se=Ce=>{let We=Q.length,ee=U("a",e[0].dataType,We,A),ae=U("b",12,he.length,I),Ae=U("scales",e[2].dataType,e[2].dims.length),me=[ee,ae,Ae],ie=e.length===4?U("zero_points",12,e[3].dims.length):void 0;ie&&me.push(ie);let ue=W.length,le=j("output",e[0].dataType,ue,R),qe=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],G=De(e[0].dataType),ne=(()=>{switch(A){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${A}-component is not supported.`)}})(),xe=`\n        for (var word: u32 = 0; word < ${_}; word += ${I}) {\n          ${ae.indicesSet("b_indices","2","word")};\n          let b_data = ${ae.getByIndices("b_indices")};\n          for (var i: u32 = 0; i < ${I}; i++) {\n            let b_value: u32 = ${I===1?"b_data":"b_data[word + i]"};\n            let b_mask: u32 = 0x0F0F0F0Fu;\n            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);\n            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);\n            let b_quantized_values = ${ne}(${Array.from({length:4},(Be,Ge)=>`${G}(b_value_lower[${Ge}]), ${G}(b_value_upper[${Ge}])`).join(", ")});\n            let b_dequantized_values = ${(()=>A===1?`${ne}(${Array.from({length:8},(Be,Ge)=>`(b_quantized_values[${Ge}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${ne}(${Array(8).fill("zero_point").join(",")})) * scale;`)()};\n            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8\n            for (var m: u32 = 0; m < ${O?c:S}u; m++) {\n              ${ee.indicesSet("a_indices",We-2,O?"m":`row * ${S} + m`)};\n              ${ee.indicesSet("a_indices",We-1,"word_offset")};\n              var input_offset = ${ee.indicesToOffset("a_indices")};\n              var a_data: ${ne};\n              for (var j: u32 = 0; j < ${8/A}; j++) {\n                a_data[j] = ${ee.getByOffset("input_offset")};\n                input_offset++;\n              }\n              ${O?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${R>1?"[c]":""} += ${Array.from({length:8/A},(Be,Ge)=>`${A===1?`a_data[${Ge}] * b_dequantized_values[${Ge}]`:`dot(a_data[${Ge}], b_dequantized_values[${Ge}])`}`).join(" + ")};\n            }\n            word_offset += ${8/A};\n          }\n        }`,Ke=ie?`\n          zero_point_offset += 4;\n          if (zero_point_offset == 32) {\n            zero_point_offset = 0;\n            zero_point_index++;\n            zero_point_word = ${ie.getByOffset("zero_point_index")};\n          }`:"";return O?`\n        var<workgroup> workgroup_shared: array<${le.type.value}, ${c*a}>;\n        ${Ce.declareVariables(...me,le)}\n        ${Ce.mainStart([a,1,1])}\n          var a_indices: ${ee.type.indices};\n          var block = local_id.x;\n          var col = workgroup_id.y;\n          var batch = workgroup_id.z;\n          ${ee.indicesSet("a_indices","0","batch")};\n          // Two zero points are packed into one byte when uniforms.bits is 4.\n          for (var c: u32 = 0; c < ${R}; c++) {\n            let col_times_components_plus_c = col * ${R} + c;\n              ${ie?`\n            var zero_point_bytes_per_col: u32 = (${a} + 1) / 2;\n            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);\n            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;\n            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;\n            var zero_point_nibble_offset: u32 = block & 0x1u;\n            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);\n            var zero_point_word: u32 = ${ie.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}\n            var b_indices: ${ae.type.indices};\n            ${ae.indicesSet("b_indices","0","col_times_components_plus_c")};\n            // The scale and zero points are computed per block.\n            var scales_index = col_times_components_plus_c * ${a} + block;\n            let scale = ${Ae.getByOffset("scales_index")};\n            // The default zero point is 8 for unsigned 4-bit quantization.\n            let zero_point = ${G}(${ie?"(zero_point_word) & 0xFu":8});\n            ${ae.indicesSet("b_indices","1","block")};\n            var word_offset: u32 = block * ${t.blockSize/A};\n            var workgroup_shared_offset: u32 = block * ${c};\n            ${xe}\n          }\n          workgroupBarrier();\n          if (local_id.x == 0u) {\n            var output_indices: ${le.type.indices};\n            ${le.indicesSet("output_indices","0","batch")};\n            ${le.indicesSet("output_indices",ue-1,"col")};\n            ${le.indicesSet("output_indices",ue-2,"0")};\n            var output_offset = ${le.indicesToOffset("output_indices")};\n            for (var m: u32 = 0u; m < ${c}u; m++) {\n              var output_value: ${le.type.value} = ${le.type.value}(0);\n              var workgroup_shared_offset: u32 = m;\n              for (var b: u32 = 0u; b < ${a}u; b++) {\n                output_value += workgroup_shared[workgroup_shared_offset];\n                workgroup_shared_offset += ${c};\n              }\n              ${le.setByOffset("output_offset","output_value")};\n              output_offset += ${h/R};\n            }\n          }\n        }`:`\n        ${Ce.registerUniforms(qe).declareVariables(...me,le)}\n        ${Ce.mainStart()}\n          ${Ce.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var output_values: array<${le.type.value}, ${S}>;\n          var output_indices = ${le.offsetToIndices("global_idx")};\n          var col = ${le.indicesGet("output_indices",ue-1)};\n          var row = ${le.indicesGet("output_indices",ue-2)};\n          var a_indices: ${ee.type.indices} = output_indices;\n          // Two zero points are packed into one byte because uniforms.bits <= 4.\n          // zero_point_offset is either 0 or 4. It is bit offset within one byte.\n          // TODO support zero_point_offset for bits > 4\n          ${ie?`\n          var zero_point_abs_offset = col * ${R} * ((${a} + 1) / 2);\n          var zero_point_index: u32 = zero_point_abs_offset / 4;\n          var zero_point_word: u32 = ${ie.getByOffset("zero_point_index")};\n          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}\n          var scale_index = col * ${a*R};\n          var b_indices: ${ae.type.indices};\n          for (var c: u32 = 0; c < ${R}; c++) {\n            ${ae.indicesSet("b_indices","0",`col * ${R} + c`)};\n            var block_offset: u32 = 0;\n            for (var block: u32 = 0; block < ${a}; block++) {\n              // The scale and zero points are computed per block.\n              let scale = ${Ae.getByOffset("scale_index")};\n              // The default zero point is 8 for unsigned 4-bit quantization.\n              let zero_point = ${G}(${ie?"extractBits(zero_point_word, zero_point_offset, 4)":8});\n              ${ae.indicesSet("b_indices","1","block")};\n              var word_offset: u32 = block_offset;\n              ${xe}\n              scale_index++;\n              ${Ke}\n              block_offset += uniforms.block_size / ${A};\n            }\n            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.\n            ${ie?`if (zero_point_offset % 8 > 0) {\n                ${Ke}\n              }`:""}\n            }\n            for (var k: u32 = 0u; k < ${S}u; k++) {\n              ${le.indicesSet("output_indices",ue-2,`${S} * row + k`)};\n              ${le.setByIndices("output_indices","output_values[k]")}\n            }\n        }`};return{name:O?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${t.cacheKey};${c};${v};${e.length}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:L,dataType:v}],name:O?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:O?{x:1,y:Math.ceil(h/R),z:y}:{x:Math.ceil(N/64)},programUniforms:K}),getShaderSource:se}},Wu=(e,t)=>{np(e.inputs,t);let r=e.getMaxComputeWorkgroupSizes(),o=e.getMaxComputeWorkgroupStoragesize();e.compute(op(e.inputs,t,r,o))},Nu=e=>ve(e)});var it,ip,Lu,Hu,ap,Ko,Fu,qu=Y(()=>{"use strict";ye();Se();Ze();_n();Ro();_e();Sr();it=(e,t)=>e.length>t&&e[t].dims.length>0&&M.size(e[t].dims)>0?e[t]:void 0,ip=(e,t)=>{let r=e[0],o=it(e,1),i=it(e,2),u=it(e,3),a=it(e,4),c=it(e,5),p=it(e,6),h=it(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let d=!1,y=r.dims[0],w=r.dims[1],_=r.dims.length===3?d?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],v=w,S=0,A=0,I=Math.floor(_/t.numHeads);if(p&&h){if(p.dims.length!==4)throw new Error(\'Input "past_key" is expected to have 4 dimensions\');if(p.dims[0]!==y||p.dims[1]!==t.numHeads||p.dims[3]!==I)throw new Error(\'Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(h.dims[0]!==y||h.dims[1]!==t.numHeads||h.dims[3]!==I)throw new Error(\'Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(p.dims[2]!==h.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)\');if(h.dims.length!==4)throw new Error(\'Input "past_value" is expected to have 4 dimensions\');S=p.dims[2],A=p.dims[2]}else if(p||h)throw new Error(\'Input "past_key" and "past_value" shall be both present or both absent\');let x;if(o){if(r.dims.length!==3)throw new Error(\'Input "query" is expected to have 3 dimensions when key is given\');if(o.dims.length<3||o.dims.length>5)throw new Error(\'Input "key" is expected to have 3, 4, or 5 dimensions\');if(r.dims[0]!==o.dims[0])throw new Error(\'Input "query" and "key" shall have same dim 0 (batch size)\');if(o.dims.length===3){if(o.dims[2]!==r.dims[2])throw new Error(\'Input "query" and "key" shall have same dim 2 (hidden_size)\');x=2,v=o.dims[1]}else if(o.dims.length===5){if(o.dims[2]!==t.numHeads||o.dims[3]!==2||o.dims[4]!==I)throw new Error(\'Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv\');if(i)throw new Error(\'Expect "value" be none when "key" has packed kv format.\');x=5,v=o.dims[1]}else{if(o.dims[1]!==t.numHeads||o.dims[3]!==I)throw new Error(\'Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key\');x=0,v=o.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error(\'Input "query" is expected to have 3 or 5 dimensions when key is empty\');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error(\'Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv\');x=3}if(u){if(u.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimension\');if(i&&r.dims.length===5&&r.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let E=0;if(a){E=8;let N=a.dims;throw N.length===1?N[0]===y?E=1:N[0]===3*y+2&&(E=3):N.length===2&&N[0]===y&&N[1]===v&&(E=5),E===8?new Error(\'Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)\'):new Error("Mask not supported")}let P=!1,O=_;if(i){if(i.dims.length!==3&&i.dims.length!==4)throw new Error(\'Input "value" is expected to have 3 or 4 dimensions\');if(r.dims[0]!==i.dims[0])throw new Error(\'Input "query" and "value" shall have same dim 0 (batch_size)\');if(i.dims.length===3){if(v!==i.dims[1])throw new Error(\'Input "key" and "value" shall have the same dim 1 (kv_sequence_length)\');O=i.dims[2]}else{if(v!==i.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)\');O=i.dims[1]*i.dims[3],P=!0}}let R=S+v,L=!1;if(a)throw new Error("Key padding mask is not supported");if(c){if(c.dims.length!==4)throw new Error(\'Input "relative_position_bias" is expected to have 4 dimensions\');if(c.dims[0]!==y&&c.dims[0]!==1||c.dims[1]!==t.numHeads||c.dims[2]!==w||c.dims[3]!==R)throw new Error(\'Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)\')}return{batchSize:y,sequenceLength:w,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:R,maxSequenceLength:A,inputHiddenSize:0,hiddenSize:_,vHiddenSize:O,headSize:I,vHeadSize:Math.floor(O/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:E,scale:t.scale,broadcastResPosBias:L,passPastInKv:P,qkvFormat:x}},Lu=e=>ve({...e}),Hu=ve({perm:[0,2,1,3]}),ap=(e,t,r,o,i,u,a)=>{let c=[o,i,u],p=M.size(c),h=[{type:12,data:p},{type:12,data:a},{type:12,data:u}],d=y=>{let w=j("qkv_with_bias",t.dataType,c),_=U("qkv",t.dataType,c),v=U("bias",r.dataType,c),S=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`\n  ${y.registerUniforms(S).declareVariables(_,v,w)}\n  ${y.mainStart()}\n    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;\n\n    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];\n  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:d},{inputs:[t,r],outputs:[-1]})[0]},Ko=(e,t,r,o,i,u,a,c)=>{let p=u;if(a){if(o===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return p=ap(e,u,a,t,o,r*i,c),p=p.reshape([t,o,r,i]),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]}else return u.dims.length===3&&(p=u.reshape([t,o,r,i])),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]},Fu=(e,t)=>{let r=ip(e.inputs,t),o=e.inputs[0],i=it(e.inputs,1),u=it(e.inputs,2),a=it(e.inputs,3),c=it(e.inputs,4),p=it(e.inputs,5),h=it(e.inputs,6),d=it(e.inputs,7);if(o.dims.length===5)throw new Error("Packed QKV is not implemented");if(i?.dims.length===5)throw new Error("Packed KV is not implemented");let y=i&&u&&i.dims.length===4&&u.dims.length===4,w=Ko(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,o,a,0);if(y)return Pn(e,w,i,u,c,void 0,h,d,p,r,t);if(!i||!u)throw new Error("key and value must be provided");let _=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),v=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,u,a,2*r.hiddenSize);Pn(e,w,_,v,c,void 0,h,d,p,r,t)}});var sp,up,dp,lp,cp,pp,mp,fp,ju,Ku=Y(()=>{"use strict";ye();Se();_e();sp=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},up=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n            k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n            if (k < 0) {\n              break;\n            }\n            if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n              break;\n            }\n            offset += k * i32(${fe("uniforms.x_strides",i,t)});\n        `;return`\n          value = ${e.type.value}(uniforms.constant_value);\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ${o}\n            value = x[offset];\n          }\n      `},dp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",i,t)}) - 1);\n                  k = k % _2n_1;\n                  if(k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},lp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k = i32(${fe("uniforms.x_shape",i,t)}) - 1;\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},cp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0)  {\n                  k += i32(${fe("uniforms.x_shape",i,t)}]);\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k -= i32(${fe("uniforms.x_shape",i,t)});\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},pp=(e,t,r)=>{switch(r.mode){case 0:return up(e,t,r.pads.length);case 1:return dp(e,t,r.pads.length);case 2:return lp(e,t,r.pads.length);case 3:return cp(e,t,r.pads.length);default:throw new Error("Invalid mode")}},mp=(e,t)=>{let r=M.padShape(e[0].dims.slice(),t.pads),o=e[0].dims,i=M.size(r),u=[{type:12,data:i},{type:6,data:t.pads}];t.mode===0&&u.push({type:e[0].dataType,data:t.value}),u.push(...Z(e[0].dims,r));let a=["rank"],c=p=>{let h=j("output",e[0].dataType,r.length),d=U("x",e[0].dataType,o.length),y=d.type.value,w=pp(h,o.length,t),_=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&_.push({name:"constant_value",type:y}),`\n            ${p.registerUniforms(_).declareVariables(d,h)}\n            ${p.mainStart()}\n            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n            let indices = ${h.offsetToIndices("global_idx")};\n\n            var value = ${y}(0);\n            ${w}\n            output[global_idx] = value;\n        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(r)/64)},programUniforms:u}),getShaderSource:c}},fp=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),o=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,i=e[0].dims.length,u=new Int32Array(2*i).fill(0);if(e.length>=4){let c=e[3].getBigInt64Array();for(let p=0;p<c.length;p++)u[Number(c[p])]=Number(r[p]),u[Number(c[p])+i]=Number(r[p+c.length])}else r.forEach((c,p)=>u[Number(p)]=Number(c));let a=[];return u.forEach(c=>a.push(c)),{mode:t.mode,value:o,pads:a}}else return t},ju=(e,t)=>{sp(e.inputs);let r=fp(e.inputs,t);e.compute(mp(e.inputs,r),{inputs:[0]})}});var Nn,Yu,Zu,Xu,Qu,hp,gp,Ju,ed,td,rd,nd,od,id,ad,sd,ud,dd,ld,cd=Y(()=>{"use strict";$r();ye();Se();_e();Nn=e=>{if(vr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Yu=(e,t,r)=>{let o=t.format==="NHWC",i=e.dims.slice();o&&i.splice(1,0,i.pop());let u=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),c=t.strides.slice(),p=u?t.dilations.slice():[],h=t.pads.slice();nr.adjustPoolAttributes(r,i,a,c,p,h);let d=nr.computePoolOutputShape(r,i,c,p,a,h,t.autoPad),y=Object.assign({},t);u?Object.assign(y,{kernelShape:a,strides:c,pads:h,dilations:p,cacheKey:t.cacheKey}):Object.assign(y,{kernelShape:a,strides:c,pads:h,cacheKey:t.cacheKey});let w=d.slice();return w.push(w.splice(1,1)[0]),[y,o?w:d]},Zu=(e,t)=>{let r=t.format==="NHWC",o=M.size(e),i=M.size(t.kernelShape),u=[{type:12,data:o},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let c=t.kernelShape[t.kernelShape.length-1],p=t.strides[t.strides.length-1],h=t.pads[t.pads.length/2-1],d=t.pads[t.pads.length-1],y=!!(h+d);u.push({type:12,data:c},{type:12,data:p},{type:12,data:h},{type:12,data:d}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let w=!1;if(t.kernelShape.length===2){let _=t.kernelShape[t.kernelShape.length-2],v=t.strides[t.strides.length-2],S=t.pads[t.pads.length/2-2],A=t.pads[t.pads.length-2];w=!!(S+A),u.push({type:12,data:_},{type:12,data:v},{type:12,data:S},{type:12,data:A}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[u,a,!0,y,w]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let c=M.computeStrides(t.kernelShape);u.push({type:12,data:c},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:c.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let p=t.pads.reduce((h,d)=>h+d);return[u,a,!!p,!1,!1]}},Xu=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w=i.format==="NHWC",_=t.type.value,v=j("output",t.type.tensor,o);if(i.kernelShape.length<=2){let S="",A="",I="",x=r-(w?2:1);if(d?S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  if (xIndices[${x}] < 0 || xIndices[${x}]\n                      >= uniforms.x_shape[${x}]) {\n                    pad++;\n                    continue;\n                  }\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`:S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`,i.kernelShape.length===2){let P=r-(w?3:2);y?A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                  if (xIndices[${P}] < 0 || xIndices[${P}] >= uniforms.x_shape[${P}]) {\n                    pad += i32(uniforms.kw);\n                    continue;\n                  }\n              `:A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                `,I=`\n              }\n            `}return`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var value = ${_}(${c});\n              var pad = 0;\n              ${A}\n              ${S}\n              ${I}\n              ${a}\n\n              output[global_idx] = value;\n            }`}else{if(w)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let S=i.kernelShape.length,A=i.pads.length,I="";return h?I=`\n                if (xIndices[j] >= uniforms.x_shape[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[${t.indicesToOffset("xIndices")}];\n                ${u}\n              }`:I=`\n              }\n              let x_val = x[${t.indicesToOffset("xIndices")}];\n              ${u}\n            `,`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var offsets: array<u32, ${S}>;\n\n              var value = ${_}(${c});\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {\n                var offset = i;\n                for (var j = 0u; j < ${S-1}u; j++) {\n                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",S)};\n                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",S)};\n                }\n                offsets[${S-1}] = offset;\n\n                isPad = false;\n                for (var j = ${r-S}u; j < ${r}u; j++) {\n                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${r-S}u`,S)}\n                    + offsets[j - ${r-S}u] - ${fe("uniforms.pads","j - 2u",A)};\n                  ${I}\n              }\n              ${a}\n\n              output[global_idx] = value;\n            }`}},Qu=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,hp=e=>`${Qu(e)};${e.countIncludePad}`,gp=e=>`${Qu(e)};${e.storageOrder};${e.dilations}`,Ju=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),ed=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=U("x",t.dataType,t.dims.length),c=a.type.value,p="value += x_val;",h="";i.countIncludePad?h+=`value /= ${c}(uniforms.kernelSize);`:h+=`value /= ${c}(i32(uniforms.kernelSize) - pad);`;let[d,y,w,_,v]=Zu(u,i);d.push(...Z(t.dims,u));let S=["rank"];return{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:A=>Xu(A,a,t.dims.length,u.length,i,p,h,0,y,w,_,v)}},td=e=>{let t=e.count_include_pad!==0,r=Ju(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let o={countIncludePad:t,...r,cacheKey:""};return{...o,cacheKey:hp(o)}},rd=(e,t)=>{Nn(e.inputs),e.compute(ed("AveragePool",e.inputs[0],!1,t))},nd={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},od=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},id=(e,t)=>{Nn(e.inputs),e.compute(ed("GlobalAveragePool",e.inputs[0],!0,t))},ad=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=`\n      value = max(x_val, value);\n    `,c="",p=U("x",t.dataType,t.dims.length),h=["rank"],[d,y,w,_,v]=Zu(u,i);return d.push(...Z(t.dims,u)),{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:S=>Xu(S,p,t.dims.length,u.length,i,a,c,t.dataType===10?-65504:-1e5,y,w,_,v)}},sd=(e,t)=>{Nn(e.inputs),e.compute(ad("MaxPool",e.inputs[0],!1,t))},ud=e=>{let t=e.storage_order,r=e.dilations,o=Ju(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...o,cacheKey:""};return{...i,cacheKey:gp(i)}},dd=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},ld=(e,t)=>{Nn(e.inputs),e.compute(ad("GlobalMaxPool",e.inputs[0],!0,t))}});var bp,wp,pd,md=Y(()=>{"use strict";$r();ye();_e();bp=(e,t,r)=>{let o=e===t,i=e<t&&r<0,u=e>t&&r>0;if(o||i||u)throw new Error("Range these inputs\' contents are invalid.")},wp=(e,t,r,o)=>{let i=Math.abs(Math.ceil((t-e)/r)),u=[i],a=i,c=[{type:12,data:a},{type:o,data:e},{type:o,data:r},...Z(u)],p=h=>{let d=j("output",o,u.length),y=d.type.value,w=[{name:"outputSize",type:"u32"},{name:"start",type:y},{name:"delta",type:y}];return`\n        ${h.registerUniforms(w).declareVariables(d)}\n        ${h.mainStart()}\n        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        output[global_idx] = uniforms.start + ${y}(global_idx) * uniforms.delta;\n      }`};return{name:"Range",shaderCache:{hint:`${o}`},getShaderSource:p,getRunData:()=>({outputs:[{dims:u,dataType:o}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:c})}},pd=e=>{let t=0,r=0,o=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],o=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],o=e.inputs[2].getFloat32Array()[0]),vr.webgpu.validateInputContent&&bp(t,r,o),e.compute(wp(t,r,o,e.inputs[0].dataType),{inputs:[]})}});var vp,$p,_p,Sp,xp,Cp,Ap,Ip,Tp,Ep,Pp,fd,kp,Op,Rp,Bp,Dp,hd,gd,yd=Y(()=>{"use strict";ye();Se();Ze();_e();vp=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and\n            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},$p=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let o=new Array(r).fill(1);return t.forEach((i,u)=>o[i]=e[u]),o},_p=(e,t,r,o,i,u)=>{let[a,c,p]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],h=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(d=>u.push(d));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(c>0&&e.length>c&&e[c].dims.length>0){if(e[c].getFloat32Array().forEach(d=>o.push(d)),o.length!==0&&o.length!==h&&r>=18&&o.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");vp(o,t),t.axes.length>0&&$p(o,t.axes,h).forEach((d,y)=>o[y]=d)}if(p>0&&e.length>p&&(e[p].getBigInt64Array().forEach(d=>i.push(Number(d))),i.length!==h||r>=18&&i.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(o.length!==t.axes.length)throw new Error(\'Resize requires "scales" input size to be of axes rank when axes attributes is specified\');if(i.length!==t.axes.length)throw new Error(\'Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified\')}if(typeof o<"u"&&typeof i<"u"&&o.length>0&&i.length>h)throw new Error("Resize requires only of scales or sizes to be specified")},Sp=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,\n     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`return ${t}(xResized) / ${t}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {\n                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;\n                  } else {\n                    return 0.0;\n                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {\n                    return 0.0;\n                  } else {\n                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating\n                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an\n                    // offset-by-one error later in floor().\n                    let whole = ${t}(xResized * (lengthOriginal - 1) / (lengthResized - 1));\n                    let fract =\n                        ${t}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${t}(lengthResized - 1);\n                    return whole + fract;\n                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {\n                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +\n                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /\n                        ${t}(lengthResized - 1);\n                  } else {\n                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);\n                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);\n                  const adjustment = ${t}(lengthResized) / outputWidth;\n                  const center = ${t}(lengthOriginal) / 2;\n                  const offset = center * (1 - adjustment);\n                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",xp=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",Cp=(e,t,r)=>{let o=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?o:e.slice();return t.length>0?(t.forEach((u,a)=>{o[u]=i[a],o[a+r]=i[t.length+a]}),o):i},Ap=(e,t,r,o)=>{let i=[];if(r.length>0)if(o.length>0){if(e.forEach(u=>i.push(u)),Math.max(...o)>e.length)throw new Error("axes is out of bound");o.forEach((u,a)=>i[u]=r[a])}else r.forEach(u=>i.push(u));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((u,a)=>Math.round(u*t[a]))}return i},Ip=(e,t,r)=>{let o=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(u=>t[u]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(u=>t[u]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(u=>t[u]=o),r.axes.forEach(u=>i[u]=Math.round(e[u]*t[u]))):(t.fill(o,0,t.length),i.forEach((u,a)=>i[a]=Math.round(u*t[a]))),i},Tp=(e,t,r,o,i)=>`\n    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {\n      var original_indices: array<${e.type.value}, ${r.length}>;\n      for (var i:u32 = 0; i < ${r.length}; i++) {\n        var output_index = ${e.indicesGet("output_indices","i")};\n        var scale = ${fe("uniforms.scales","i",o)};\n        var roi_low = ${fe("uniforms.roi","i",i)};\n        var roi_hi = ${fe("uniforms.roi",`i + ${t.length}`,i)};\n        if (scale == 1.0) {\n          original_indices[i] = ${e.type.value}(output_index);\n        } else {\n          var input_shape_i = ${fe("uniforms.input_shape","i",t.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",r.length)};\n          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                           input_shape_i, roi_low, roi_hi);\n        }\n      }\n      return original_indices;\n    }`,Ep=(e,t,r,o,i,u,a)=>`\n    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n      var input_indices: ${e.type.indices};\n      for (var i:u32 = 0; i < ${o.length}; i++) {\n        var output_index = ${t.indicesGet("output_indices","i")};\n        var input_index: u32;\n        var scale = ${fe("uniforms.scales","i",i)};\n        if (scale == 1.0) {\n          input_index = output_index;\n        } else {\n          var roi_low = ${fe("uniforms.roi","i",u)};\n          var roi_hi = ${fe("uniforms.roi",`i + ${r.length}`,u)};\n          var input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",o.length)};\n          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                        input_shape_i, roi_low, roi_hi);\n          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {\n            if (original_idx < 0) {\n              input_index = 0;\n            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {\n              input_index = input_shape_i - 1;\n            } else {\n              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));\n            }\n          } else {\n            input_index = u32(original_idx);\n          }\n        }\n        ${e.indicesSet("input_indices","i"," input_index")}\n      }\n      return input_indices;\n    }`,Pp=(e,t)=>`\n    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {\n      for (var i:u32 = 0; i < ${t.length}; i++) {\n        var input_index = ${e.indicesGet("input_indices","i")};\n        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",t.length)}) {\n          return false;\n        }\n      }\n      return true;\n    }`,fd=(e,t,r,o)=>e.rank>o?`\n    ${e.indicesSet("input_indices",t,"channel")};\n    ${e.indicesSet("input_indices",r,"batch")};\n`:"",kp=(e,t,r,o,i)=>{let[a,c,p,h]=r.length===2?[-1,0,1,-1]:[0,2,3,1],d=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${d} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(row, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(col, ${r[p]} - 1))`)};\n      ${fd(e,h,a,2)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var row:${d} = originalIndices[${c}];\n      var col:${d} = originalIndices[${p}];\n      ${o?`if (row < 0 || row > (${r[c]} - 1) || col < 0 || col > (${r[p]} - 1)) {\n        return ${i};\n      }`:""};\n      row = max(0, min(row, ${r[c]} - 1));\n      col = max(0, min(col, ${r[p]} - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = ${r.length>2?`u32(originalIndices[${h}])`:"0"};\n      var batch: u32 =  ${r.length>2?`u32(originalIndices[${a}])`:"0"};\n      var x11: ${d} = getInputValue(batch, channel, row1, col1);\n      var x12: ${d} = getInputValue(batch, channel, row1, col2);\n      var x21: ${d} = getInputValue(batch, channel, row2, col1);\n      var x22: ${d} = getInputValue(batch, channel, row2, col2);\n      var dx1: ${d} = abs(row - ${d}(row1));\n      var dx2: ${d} = abs(${d}(row2) - row);\n      var dy1: ${d} = abs(col - ${d}(col1));\n      var dy2: ${d} = abs(${d}(col2) - col);\n      if (row1 == row2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (col1 == col2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }`},Op=(e,t,r,o,i,u,a,c,p,h)=>{let d=r.length===2,y=!0,[w,_]=d?[0,1]:y?[2,3]:[1,2],v=e.type.value,S=A=>{let I=A===w?"row":"col";return`\n      fn ${I}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${v} {\n        var output_index = ${t.indicesGet("output_indices",A)};\n        var originalIdx: ${v} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[A]},\n        ${o[A]}, ${r[A]}, ${u[A]}, ${u[A]} + ${r.length});\n        var fractOriginalIdx: ${v} = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (${c} && (originalIdx < 0 || originalIdx > (${r[A]} - 1))) {\n          return ${p};\n        }\n        var data: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ${I}: ${v} = originalIdx + ${v}(i);\n          if (${I} < 0 || ${I} >= ${r[A]}) {\n            ${(()=>h?`coefs[i + 1] = 0.0;\n                        continue;`:c?`return ${p};`:`${I} = max(0, min(${I}, ${r[A]} - 1));`)()};\n          }\n        var input_indices_copy: ${e.type.indices} = input_indices;\n          ${e.indicesSet("input_indices_copy",A,`u32(${I})`)};\n          data[i + 1] = ${A===w?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};\n        }\n        return cubicInterpolation1D(data, coefs);\n      }`};return`\n    ${S(w)};\n    ${S(_)};\n  fn getCubicInterpolationCoefs(s: ${v}) -> array<${v}, 4> {\n    var absS = abs(s);\n    var coeffs: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: ${v} = 1.0 - absS;\n    var twoMinusAbsS: ${v} = 2.0 - absS;\n    var onePlusAbsS: ${v} = 1.0 + absS;\n    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};\n    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;\n    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<${v}, 4>, coefs: array<${v}, 4>) -> ${v} {\n    var coefsSum: ${v} = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${v} {\n    var input_indices: ${e.type.indices} = output_indices;\n    return colCubicInterpolation(input_indices, output_indices);\n  }\n    `},Rp=(e,t,r,o,i)=>{let[a,c,p,h,d]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],y=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${y} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(depth, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(height, ${r[p]} - 1))`)};\n      ${e.indicesSet("input_indices",h,`max(0, min(width, ${r[h]} - 1))`)};\n      ${fd(e,d,a,3)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${y} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var depth:${y} = originalIndices[${c}];\n      var height:${y} = originalIndices[${p}];\n      var width:${y} = originalIndices[${h}];\n      ${o?`if (depth < 0 || depth > (${r[c]} - 1) || height < 0 || height > (${r[p]} - 1) || width < 0 || (width > ${r[h]} - 1)) {\n      return ${i};\n        }`:""};\n\n    depth = max(0, min(depth, ${r[c]} - 1));\n      height = max(0, min(height, ${r[p]} - 1));\n      width = max(0, min(width, ${r[h]} - 1));\n      var depth1: u32 = u32(depth);\n      var height1: u32 = u32(height);\n      var width1: u32 = u32(width);\n      var depth2: u32 = u32(depth + 1);\n      var height2: u32 = u32(height + 1);\n      var width2: u32 = u32(width + 1);\n      var channel: u32 = ${r.length>3?`u32(originalIndices[${d}])`:"0"};\n      var batch: u32 =  ${r.length>3?`u32(originalIndices[${a}])`:"0"};\n\n      var x111: ${y} = getInputValue(batch, channel, depth1, height1, width1);\n      var x112: ${y} = getInputValue(batch, channel, depth1, height1, width2);\n      var x121: ${y} = getInputValue(batch, channel, depth1, height2, width1);\n      var x122: ${y} = getInputValue(batch, channel, depth1, height2, width2);\n      var x211: ${y} = getInputValue(batch, channel, depth2, height1, width1);\n      var x212: ${y} = getInputValue(batch, channel, depth2, height1, width2);\n      var x221: ${y} = getInputValue(batch, channel, depth2, height2, width1);\n      var x222: ${y} = getInputValue(batch, channel, depth2, height2, width2);\n      var dx1: ${y} = abs(depth - ${y}(depth1));\n      var dx2: ${y} = abs(${y}(depth2) - depth);\n      var dy1: ${y} = abs(height - ${y}(height1));\n      var dy2: ${y} = abs(${y}(height2) - height);\n      var dz1: ${y} = abs(width - ${y}(width1));\n      var dz2: ${y} = abs(${y}(width2) - width);\n      if (depth1 == depth2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (height1 == height2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      if (width1 == width2) {\n        dz1 = 0.5;\n        dz2 = 0.5;\n      }\n      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +\n              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);\n    }`},Bp=(e,t,r,o,i,u)=>{let a=e.dims,c=Cp(u,t.axes,a.length),p=Ap(a,o,i,t.axes),h=o.slice();o.length===0&&(h=a.map((x,E)=>x===0?1:p[E]/x),t.keepAspectRatioPolicy!=="stretch"&&(p=Ip(a,h,t)));let d=j("output",e.dataType,p.length),y=U("input",e.dataType,a.length),w=M.size(p),_=a.length===p.length&&a.every((x,E)=>x===p[E]),v=t.coordinateTransformMode==="tf_crop_and_resize",S=t.extrapolationValue,A=y.type.value,I=x=>`\n      ${_?"":`\n      ${Sp(t.coordinateTransformMode,A)};\n      ${(()=>{switch(t.mode){case"nearest":return`\n              ${Pp(y,a)};\n              ${xp(t.nearestMode,r,A)};\n              ${Ep(y,d,a,p,h.length,c.length,v)};\n              `;case"linear":return`\n              ${Tp(d,a,p,h.length,c.length)};\n              ${(()=>{if(a.length===2||a.length===4)return`${kp(y,d,a,v,S)}`;if(a.length===3||a.length===5)return`${Rp(y,d,a,v,S)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};\n            `;case"cubic":return`\n            ${(()=>{if(a.length===2||a.length===4)return`${Op(y,d,a,p,h,c,t.cubicCoeffA,v,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};\n            `;default:throw Error("Invalid resize mode")}})()};\n      `}\n      ${x.registerUniform("output_size","u32").registerUniform("scales","f32",h.length).registerUniform("roi","f32",c.length).declareVariables(y,d)}\n      ${x.mainStart()}\n        ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n        ${_?"output[global_idx] = input[global_idx];":`\n        let output_indices = ${d.offsetToIndices("global_idx")};\n        var input_indices: ${y.type.indices};\n        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);\n                if (checkInputIndices(input_indices)) {\n                  output[global_idx] = ${y.getByIndices("input_indices")};\n                } else {\n                  output[global_idx] = ${t.extrapolationValue};\n                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};\n`}\n      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${h.length>0?h:""}|${i.length>0?i:""}|${c.length>0?c:""}|${_}|${a}`,inputDependencies:["rank"]},getShaderSource:I,getRunData:()=>({outputs:[{dims:p,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:[{type:12,data:w},{type:1,data:h},{type:1,data:c},...Z(a,p)]})}},Dp=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},hd=(e,t)=>{let r=[],o=[],i=[],u=Dp(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");_p(e.inputs,t,u,r,o,i),e.compute(Bp(e.inputs[0],t,u,r,o,i),{inputs:[0]})},gd=e=>{let t=e.antialias,r=e.axes,o=e.coordinateTransformMode,i=e.cubicCoeffA,u=e.excludeOutside!==0,a=e.extrapolationValue,c=e.keepAspectRatioPolicy,p=e.mode,h=e.nearestMode===""?"simple":e.nearestMode;return ve({antialias:t,axes:r,coordinateTransformMode:o,cubicCoeffA:i,excludeOutside:u,extrapolationValue:a,keepAspectRatioPolicy:c,mode:p,nearestMode:h})}});var zp,Mp,bd,wd=Y(()=>{"use strict";ye();Se();Ze();_e();zp=(e,t)=>{let[r,o,i,u]=e,{numHeads:a,rotaryEmbeddingDim:c}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input \'x\' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!M.areEqual(o.dims,[])&&!M.areEqual(o.dims,[1])&&o.dims.length!==2)throw new Error(`Input \'position_ids\' is expected to have 0, 1, or 2 dimensions, got ${o.dims.length}`);if(i.dims.length!==2)throw new Error(`Input \'cos_cache\' is expected to have 2 dimensions, got ${i.dims.length}`);if(u.dims.length!==2)throw new Error(`Input \'sin_cache\' is expected to have 2 dimensions, got ${u.dims.length}`);if(!M.areEqual(i.dims,u.dims))throw new Error("Inputs \'cos_cache\' and \'sin_cache\' are expected to have the same shape");if(c>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let p=r.dims[0],h=r.dims[r.dims.length-2],d=i.dims[0],y=M.sizeFromDimension(r.dims,1)/h,w=c===0?i.dims[1]*2:y/a;if(c>w)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(o.dims.length===2){if(p!==o.dims[0])throw new Error(`Input \'position_ids\' dimension 0 should be of size batch_size, got ${o.dims[0]}`);if(h!==o.dims[1])throw new Error(`Input \'position_ids\' dimension 1 should be of size sequence_length, got ${o.dims[1]}`)}if(w/2!==i.dims[1]&&c/2!==i.dims[1])throw new Error(`Input \'cos_cache\' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(h>d)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Mp=(e,t)=>{let{interleaved:r,numHeads:o,rotaryEmbeddingDim:i,scale:u}=t,a=e[0].dims[0],c=M.sizeFromDimension(e[0].dims,1),p=e[0].dims[e[0].dims.length-2],h=c/p,d=e[2].dims[1],y=i===0?d*2:h/o,w=new Array(a,p,h/y,y-d),_=M.computeStrides(w),v=[{type:1,data:u},{type:12,data:w},{type:12,data:_},...e[0].dims.length===3?new Array({type:12,data:[c,h,y,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[c,y,p*y,1]}):[],...Z(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],S=A=>{let I=U("input",e[0].dataType,e[0].dims.length),x=U("position_ids",e[1].dataType,e[1].dims.length),E=U("cos_cache",e[2].dataType,e[2].dims.length),P=U("sin_cache",e[3].dataType,e[3].dims.length),O=j("output",e[0].dataType,e[0].dims.length);return A.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:w.length},{name:"global_strides",type:"u32",length:_.length},{name:"input_output_strides",type:"u32",length:_.length}]),`\n        ${A.declareVariables(I,x,E,P,O)}\n\n        ${A.mainStart(or)}\n          let half_rotary_emb_dim = uniforms.${E.name}_shape[1];\n          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;\n          let size = uniforms.global_shape[0] * uniforms.global_strides[0];\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("size")}\n\n          if (bsnh[3] < half_rotary_emb_dim) {\n            let position_ids_idx =\n                ${x.broadcastedIndicesToOffset("bsnh.xy",j("",x.type.tensor,2))};\n            let position_id =\n                u32(${x.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);\n            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});\n            let j = i + select(half_rotary_emb_dim, 1, ${r});\n            let re = ${I.getByOffset("i")} * ${E.get("position_id","bsnh[3]")} -\n                ${I.getByOffset("j")} * ${P.get("position_id","bsnh[3]")};\n            ${O.setByOffset("i","re")}\n            let im = ${I.getByOffset("i")} * ${P.get("position_id","bsnh[3]")} +\n                ${I.getByOffset("j")} * ${E.get("position_id","bsnh[3]")};\n            ${O.setByOffset("j","im")}\n          } else {\n            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;\n            ${O.setByOffset("k",I.getByOffset("k"))}\n          }\n        }`};return{name:"RotaryEmbedding",shaderCache:{hint:ve({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:S,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(w)/or)},programUniforms:v})}},bd=(e,t)=>{zp(e.inputs,t),e.compute(Mp(e.inputs,t))}});var Up,Vp,vd,$d=Y(()=>{"use strict";ye();Se();_e();Up=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],o=e[2];if(t.dataType!==r.dataType||t.dataType!==o.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],u=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==u)throw new Error("Skip must have the same sequence length as input");if(o.dims.length!==1)throw new Error("Gamma must be 1D");if(o.dims[o.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},Vp=(e,t,r,o)=>{let i=t.simplified,u=e[0].dims,a=M.size(u),c=u,p=a,h=u.slice(-1)[0],d=o?u.slice(0,-1).concat(1):[],y=!i&&e.length>3,w=e.length>4,_=o&&r>1,v=o&&r>2,S=r>3,A=Me(h),I=[{type:12,data:p},{type:12,data:A},{type:12,data:h},{type:1,data:t.epsilon}],x=P=>{let O=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],R=[U("x",e[0].dataType,e[0].dims,A),U("skip",e[1].dataType,e[1].dims,A),U("gamma",e[2].dataType,e[2].dims,A)];y&&R.push(U("beta",e[3].dataType,e[3].dims,A)),w&&R.push(U("bias",e[4].dataType,e[4].dims,A)),R.push(j("output",e[0].dataType,c,A)),_&&R.push(j("mean_output",1,d)),v&&R.push(j("inv_std_output",1,d)),S&&R.push(j("input_skip_bias_sum",e[0].dataType,c,A));let L=De(e[0].dataType);return`\n\n      ${P.registerUniforms(O).declareVariables(...R)}\n\n      ${P.mainStart()}\n        ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}\n        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;\n        let offset = global_idx * hidden_size_vectorized;\n        var sum = ${$t("f32",A)};\n        var squareSum = ${$t("f32",A)};\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          let skip_value = skip[offset + i];\n          let bias_value = ${w?"bias[i]":L+"(0.0)"};\n          let input_value = x[offset + i];\n          let value = input_value + skip_value + bias_value;\n          ${S?"input_skip_bias_sum[offset + i] = value;":""}\n          output[offset + i] = value;\n          let f32_value = ${ir(L,A,"value")};\n          sum += f32_value;\n          squareSum += f32_value * f32_value;\n        }\n        let mean = ${_t("sum",A)} / f32(uniforms.hidden_size);\n        let inv_std_dev = inverseSqrt(${_t("squareSum",A)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);\n        ${_?"mean_output[global_idx] = mean;":""}\n        ${v?"inv_std_output[global_idx] = inv_std_dev;":""}\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          output[offset + i] = (output[offset + i] ${i?"":`- ${L}(mean)`}) * ${L}(inv_std_dev) * gamma[i] ${y?"+ beta[i]":""};\n        }\n      }`},E=[{dims:c,dataType:e[0].dataType}];return r>1&&E.push({dims:d,dataType:1}),r>2&&E.push({dims:d,dataType:1}),r>3&&E.push({dims:u,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${A};${_};${v};${S}`,inputDependencies:e.map((P,O)=>"type")},getShaderSource:x,getRunData:()=>({outputs:E,dispatchGroup:{x:Math.ceil(p/h/64)},programUniforms:I})}},vd=(e,t)=>{Up(e.inputs);let o=[0];e.outputCount>1&&o.push(-3),e.outputCount>2&&o.push(-3),e.outputCount>3&&o.push(3),e.compute(Vp(e.inputs,t,e.outputCount,!1),{outputs:o})}});var Wp,Gn,Np,_d,Gp,Hp,Sd,xd,Cd=Y(()=>{"use strict";ye();Se();Ze();_e();Wp=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,o)=>{if(e[o+1].dataType!==6&&e[o+1].dataType!==7)throw new Error(`Input ${o} must be an array of int32 or int64`)})},Gn=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(o=>r.push(Number(o)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(o=>r.push(Number(o)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},Np=(e,t)=>{if(e.length>1){let r=Gn(e,1),o=Gn(e,2),i=Gn(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),ve({starts:r,ends:o,axes:i})}else return t},_d=(e,t,r,o,i)=>{let u=e;return e<0&&(u+=r[o[t]]),i[t]<0?Math.max(0,Math.min(u,r[o[t]]-1)):Math.max(0,Math.min(u,r[o[t]]))},Gp=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n          var input_indices: ${e.type.indices};\n          var carry = 0u;\n          for (var i = ${r.length}; i >= 0; i--) {\n            let input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n            let steps_i = ${fe("uniforms.steps","i",r.length)};\n            let signs_i = ${fe("uniforms.signs","i",r.length)};\n            let starts_i = ${fe("uniforms.starts","i",r.length)};\n            var output_index = ${t.indicesGet("output_indices","i")};\n            var input_index = output_index * steps_i + starts_i + carry;\n            carry = input_index / input_shape_i;\n            input_index = input_index % input_shape_i;\n            if (signs_i < 0) {\n              input_index = input_shape_i - input_index - 1u + starts_i;\n            }\n            ${e.indicesSet("input_indices","i","input_index")};\n          }\n          return input_indices;\n      }`,Hp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=t.axes.length>0?M.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],u=Gn(e,4);u.forEach(I=>I!==0||(()=>{throw new Error("step cannot be 0")})),u.length===0&&(u=Array(i.length).fill(1));let a=t.starts.map((I,x)=>_d(I,x,r,i,u)),c=t.ends.map((I,x)=>_d(I,x,r,i,u));if(i.length!==a.length||i.length!==c.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let I=0;I<r.length;++I)i.includes(I)||(a.splice(I,0,0),c.splice(I,0,r[I]),u.splice(I,0,1));let p=u.map(I=>Math.sign(I));u.forEach((I,x,E)=>{if(I<0){let P=(c[x]-a[x])/I,O=a[x],R=O+P*u[x];a[x]=R,c[x]=O,E[x]=-I}});let h=r.slice(0);i.forEach((I,x)=>{h[I]=Math.ceil((c[I]-a[I])/u[I])});let d={dims:h,dataType:e[0].dataType},y=j("output",e[0].dataType,h.length),w=U("input",e[0].dataType,e[0].dims.length),_=M.size(h),v=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:p.length},{name:"steps",type:"u32",length:u.length}],S=[{type:12,data:_},{type:12,data:a},{type:6,data:p},{type:12,data:u},...Z(e[0].dims,h)],A=I=>`\n      ${I.registerUniforms(v).declareVariables(w,y)}\n        ${Gp(w,y,r)}\n        ${I.mainStart()}\n          ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n          let output_indices = ${y.offsetToIndices("global_idx")};\n          let input_indices = calculateInputIndices(output_indices);\n          ${y.setByOffset("global_idx",w.getByIndices("input_indices"))}\n      }`;return{name:"Slice",shaderCache:{hint:`${p.length}_${a.length}_${u.length}`,inputDependencies:["rank"]},getShaderSource:A,getRunData:()=>({outputs:[d],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:S})}},Sd=(e,t)=>{Wp(e.inputs,t);let r=Np(e.inputs,t);e.compute(Hp(e.inputs,r),{inputs:[0]})},xd=e=>{let t=e.starts,r=e.ends,o=e.axes;return ve({starts:t,ends:r,axes:o})}});var Lp,Fp,Ad,Id,Td=Y(()=>{"use strict";ye();Se();Ze();_e();Lp=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},Fp=(e,t)=>{let r=e.dims,o=M.size(r),i=64,u=t.axis;if(u<0&&(u=r.length+u),u<r.length-1)throw new Error("softmax only supports last axis for now.");let a=r[u],c=o/a,p=Me(a),h=a/p,d=(A,I)=>I===4?`max(max(${A}.x, ${A}.y), max(${A}.z, ${A}.w))`:I===2?`max(${A}.x, ${A}.y)`:I===3?`max(max(${A}.x, ${A}.y), ${A}.z)`:A,y=U("x",e.dataType,e.dims,p),w=j("result",e.dataType,e.dims,p),_=y.type.value,v=De(e.dataType)==="f32"?`var threadMax = ${_}(-3.402823e+38f);`:`var threadMax = ${_}(-65504.0h);`,S=A=>`\n      var<workgroup> rowMaxShared : ${_};\n      var<workgroup> rowSumShared : ${_};\n      var<workgroup> threadShared : array<${_}, ${i}>;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ${_} {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ${_}) {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n      ${A.registerUniform("packedCols","i32").declareVariables(y,w)}\n      ${A.mainStart()}\n        let gindex = i32(global_idx);\n        let lindex = i32(local_idx);\n        const wg = ${i};\n        let row = gindex / wg;\n        let cols = uniforms.packedCols;\n        let row_stride : i32 = uniforms.packedCols;\n\n        // find the rows max\n        ${v}\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = ${_}(${d("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum = ${_}(0.0);\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = ${_}(${_t("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }`;return{name:"Softmax",shaderCache:{hint:`${p}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.dataType}],dispatchGroup:{x:c},programUniforms:[{type:6,data:h}]}),getShaderSource:S}},Ad=(e,t)=>{Lp(e.inputs),e.compute(Fp(e.inputs[0],t))},Id=e=>ve({axis:e.axis})});var qp,jp,Kp,Yp,Zp,Ed,Pd,kd=Y(()=>{"use strict";ye();Se();Ze();_e();qp=e=>{if(!e||e.length<1)throw new Error("too few inputs")},jp=(e,t)=>{let r=[],o=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),o=r.length),ve({numOutputs:o,axis:t.axis,splitSizes:r})},Kp=e=>`\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {\n    if (index < ${fe("uniforms.size_in_split_axis","i",e)}) {\n        return i;\n    }\n    }\n    return ${e}u;\n}`,Yp=e=>{let t=e.length,r=[];for(let o=0;o<t;++o){let i=e[o].setByIndices("indices","input[global_idx]");t===1?r.push(i):o===0?r.push(`if (output_number == ${o}u) { ${i} }`):o===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${o}) { ${i} }`)}return`\n      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {\n        ${r.join(`\n`)}\n      }`},Zp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=e[0].dataType,u=M.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),c=U("input",i,r.length),p=new Array(t.numOutputs),h=[],d=[],y=0,w=[{type:12,data:o}];for(let v=0;v<t.numOutputs;v++){y+=t.splitSizes[v],p[v]=y;let S=r.slice();S[t.axis]=t.splitSizes[v],d.push(S),a[v]=j(`output${v}`,i,S.length),h.push({dims:d[v],dataType:e[0].dataType})}w.push({type:12,data:p},...Z(r,...d));let _=v=>`\n  ${v.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",p.length).declareVariables(c,...a)}\n  ${Kp(p.length)}\n  ${Yp(a)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}\n\n    var indices = ${c.offsetToIndices("global_idx")};\n    var index = ${c.indicesGet("indices",u)};\n    let output_number = calculateOutputIndex(index);\n    if (output_number != 0) {\n      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",p.length)};\n      ${c.indicesSet("indices",u,"index")};\n    }\n    writeBufferData(output_number, indices, global_idx);\n  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:_,getRunData:()=>({outputs:h,dispatchGroup:{x:Math.ceil(o/64)},programUniforms:w})}},Ed=(e,t)=>{qp(e.inputs);let r=e.inputs.length===1?t:jp(e.inputs,t);e.compute(Zp(e.inputs,r),{inputs:[0]})},Pd=e=>{let t=e.axis,r=e.splitSizes,o=e.numOutputs<0?r.length:e.numOutputs;if(o!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return ve({axis:t,numOutputs:o,splitSizes:r})}});var Od,Xp,Qp,Jp,Rd,Bd=Y(()=>{"use strict";ye();Se();_e();Od=e=>Array.from(e.getBigInt64Array(),Number),Xp=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Od(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},Qp=(e,t)=>{let r=[];for(let o=0;o<e.length;++o)r.push(e[o]*t[o]);return r},Jp=e=>{let t=e[0].dims,r=Od(e[1]),o=Qp(t,r),i=M.size(o),u=e[0].dataType,a=U("input",u,t.length),c=j("output",u,o.length),p=h=>`\n      const inputShape = ${a.indices(...t)};\n      ${h.registerUniform("output_size","u32").declareVariables(a,c)}\n      ${h.mainStart()}\n      ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n      let output_indices = ${c.offsetToIndices("global_idx")};\n      var input_indices: ${a.type.indices};\n      for (var i = 0; i < ${t.length}; i++) {\n        let input_dim_i = ${a.indicesGet("uniforms.input_shape","i")};\n        let input_dim_value = ${c.indicesGet("output_indices","i")}  % input_dim_i;\n\n        ${a.indicesSet("input_indices","i","input_dim_value")}\n      }\n      ${c.setByOffset("global_idx",a.getByIndices("input_indices"))}\n    }`;return{name:"Tile",shaderCache:{hint:`${r}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},...Z(e[0].dims,o)]}),getShaderSource:p}},Rd=e=>{Xp(e.inputs),e.compute(Jp(e.inputs),{inputs:[0]})}});var em,tm,Dd,zd=Y(()=>{"use strict";ye();Se();_e();em=(e,t,r,o,i)=>{let u=j("output_data",i,r.length,4),a=U("a_data",t[1].dataType,t[1].dims.length,4),c=U("b_data",t[2].dataType,t[2].dims.length,4),p=U("c_data",t[0].dataType,t[0].dims.length,4),h,d=(y,w,_)=>`select(${w}, ${y}, ${_})`;if(!o)h=u.setByOffset("global_idx",d(a.getByOffset("global_idx"),c.getByOffset("global_idx"),p.getByOffset("global_idx")));else{let y=(w,_,v="")=>{let S=`a_data[index_a${_}][component_a${_}]`,A=`b_data[index_b${_}][component_b${_}]`,I=`bool(c_data[index_c${_}] & (0xffu << (component_c${_} * 8)))`;return`\n            let output_indices${_} = ${u.offsetToIndices(`global_idx * 4u + ${_}u`)};\n            let offset_a${_} = ${a.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_b${_} = ${c.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_c${_} = ${p.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let index_a${_} = offset_a${_} / 4u;\n            let index_b${_} = offset_b${_} / 4u;\n            let index_c${_} = offset_c${_} / 4u;\n            let component_a${_} = offset_a${_} % 4u;\n            let component_b${_} = offset_b${_} % 4u;\n            let component_c${_} = offset_c${_} % 4u;\n            ${w}[${_}] = ${v}(${d(S,A,I)});\n          `};i===9?h=`\n            var data = vec4<u32>(0);\n            ${y("data",0,"u32")}\n            ${y("data",1,"u32")}\n            ${y("data",2,"u32")}\n            ${y("data",3,"u32")}\n            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:h=`\n            ${y("output_data[global_idx]",0)}\n            ${y("output_data[global_idx]",1)}\n            ${y("output_data[global_idx]",2)}\n            ${y("output_data[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(p,a,c,u)}\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${h}\n      }`},tm=e=>{let t=e[1].dims,r=e[2].dims,o=e[0].dims,i=e[1].dataType,u=!(M.areEqual(t,r)&&M.areEqual(r,o)),a=t,c=M.size(t);if(u){let h=It.calcShape(It.calcShape(t,r,!1),o,!1);if(!h)throw new Error("Can\'t perform where op on the given tensors");a=h,c=M.size(a)}let p=Math.ceil(c/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:h=>em(h,e,a,u,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:p},...Z(o,t,r,a)]})}},Dd=e=>{e.compute(tm(e.inputs))}});var Md,Ud=Y(()=>{"use strict";Ka();Ro();Ja();ts();Vs();Zs();Oo();Uo();lu();mu();gu();$u();xu();Au();Eu();Ou();Du();Mu();Vu();Wo();Gu();qu();Ku();cd();md();In();yd();wd();$d();Cd();Td();kd();Bd();Sr();Rn();zd();Md=new Map([["Abs",[rs]],["Acos",[ns]],["Acosh",[os]],["Add",[Ws]],["ArgMax",[ja,ko]],["ArgMin",[qa,ko]],["Asin",[is]],["Asinh",[as]],["Atan",[ss]],["Atanh",[us]],["Attention",[Xa]],["AveragePool",[rd,td]],["BatchNormalization",[Qa]],["BiasAdd",[es]],["BiasSplitGelu",[Us]],["Cast",[ls,ds]],["Ceil",[ps]],["Clip",[cs]],["Concat",[Ya,Za]],["Conv",[Ho,Go]],["ConvTranspose",[du,uu]],["Cos",[ms]],["Cosh",[fs]],["CumSum",[cu,pu]],["DepthToSpace",[fu,hu]],["Div",[Ns]],["Einsum",[wu,vu]],["Elu",[hs,kn]],["Equal",[Gs]],["Erf",[gs]],["Exp",[ys]],["Expand",[Su]],["FastGelu",[Cu]],["Floor",[bs]],["FusedConv",[Ho,Go]],["Gather",[Tu,Iu]],["GatherElements",[ku,Pu]],["Gelu",[ws]],["Gemm",[Bu,Ru]],["GlobalAveragePool",[id,od]],["GlobalMaxPool",[ld,dd]],["Greater",[qs]],["GreaterOrEqual",[Ks]],["HardSigmoid",[Is,As]],["InstanceNormalization",[zu]],["LayerNormalization",[Uu]],["LeakyRelu",[vs,kn]],["Less",[js]],["LessOrEqual",[Ys]],["Log",[zs]],["MatMul",[ru]],["MatMulNBits",[Wu,Nu]],["MaxPool",[sd,ud]],["Mul",[Hs]],["MultiHeadAttention",[Fu,Lu]],["Neg",[_s]],["Not",[$s]],["Pad",[ju]],["Pow",[Ls]],["Range",[pd]],["Reciprocal",[Ss]],["ReduceMin",[Wa]],["ReduceMean",[Da]],["ReduceMax",[Va]],["ReduceSum",[Ga]],["ReduceProd",[Na]],["ReduceL1",[za]],["ReduceL2",[Ma]],["ReduceLogSum",[La]],["ReduceLogSumExp",[Ua]],["ReduceSumSquare",[Ha]],["Relu",[xs]],["Resize",[hd,gd]],["RotaryEmbedding",[bd]],["Sigmoid",[Cs]],["Sin",[Ts]],["Sinh",[Es]],["Slice",[Sd,xd]],["SkipLayerNormalization",[vd]],["Split",[Ed,Pd]],["Sqrt",[Ps]],["Softmax",[Ad,Id]],["Sub",[Fs]],["Tan",[ks]],["Tanh",[Rs]],["ThresholdedRelu",[Ds,kn]],["Tile",[Rd]],["Transpose",[_a,Sa]],["Where",[Dd]]])});var Hn,Vd=Y(()=>{"use strict";$r();Lt();_e();Hn=class{constructor(t){this.backend=t;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,r){this.repo.set(t,r)}run(t,r,o,i,u){rr(t.programInfo.name);let a=this.backend.device,c=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let p=[];for(let d of r)p.push({binding:p.length,resource:{buffer:d.buffer}});for(let d of o)p.push({binding:p.length,resource:{buffer:d.buffer}});u&&p.push({binding:p.length,resource:u});let h=a.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:p,label:t.programInfo.name});if(this.backend.sessionStatus==="capturing"){let d={kernelId:this.backend.currentKernelId,computePipeline:t.computePipeline,bindGroup:h,dispatchGroup:i};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(d)}c.setPipeline(t.computePipeline),c.setBindGroup(0,h),c.dispatchWorkgroups(...i),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Ht(t.programInfo.name)}dispose(){}build(t,r){rr(t.name);let o=this.backend.device,i=[];o.features.has("shader-f16")&&i.push("enable f16;");let u=va(r,this.backend.device.limits),a=t.getShaderSource(u),c=`${i.join(`\n`)}\n${u.additionalImplementations}\n${a}`,p=o.createShaderModule({code:c,label:t.name});Ve("verbose",()=>`[WebGPU] ${t.name} shader code: ${c}`);let h=o.createComputePipeline({compute:{module:p,entryPoint:"main"},layout:"auto",label:t.name});return Ht(t.name),{programInfo:t,computePipeline:h,uniformVariablesInfo:u.variablesInfo}}normalizeDispatchGroupSize(t){let r=typeof t=="number"?t:t.x,o=typeof t=="number"?1:t.y||1,i=typeof t=="number"?1:t.z||1,u=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(r<=u&&o<=u&&i<=u)return[r,o,i];let a=r*o*i,c=Math.ceil(Math.sqrt(a));if(c>u){if(c=Math.ceil(Math.cbrt(a)),c>u)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[c,c,c]}else return[c,c,1]}}});var rm,nm,Yo,Ln,Wd=Y(()=>{"use strict";$r();ye();Lt();fa();wa();Ud();Vd();rm=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let o=0;o<e.length;++o){let i=e[o].dataType;switch(t[o]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let u=e[o].dims.length;r.push(`${i};${u}`);break}case"dims":{let u=e[o].dims.join(",");r.push(`${i};${u}`);break}default:throw new Error(`unsupported input dependency: ${t[o]}`)}}return r.join("|")},nm=(e,t,r)=>{let o=e.name;return e.shaderCache?.hint&&(o+="["+e.shaderCache.hint+"]"),o+=":"+r+`:${rm(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,o},Yo=class{constructor(t){t&&(this.architecture=t.architecture,this.vendor=t.vendor)}isArchitecture(t){return this.architecture===t}isVendor(t){return this.vendor===t}},Ln=class{constructor(){this.currentSessionId=null;this.currentKernelId=null;this.commandEncoder=null;this.computePassEncoder=null;this.maxDispatchNumber=16;this.pendingDispatchNumber=0;this.pendingKernels=[];this.pendingQueries=new Map;this.sessionStatus="default";this.capturedCommandList=new Map;this.capturedPendingKernels=new Map;this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t}async initialize(t,r){this.env=t;let o=[],i={requiredLimits:{maxComputeWorkgroupStorageSize:r.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:r.limits.maxStorageBufferBindingSize,maxBufferSize:r.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:r.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:r.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:r.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:r.limits.maxComputeWorkgroupSizeZ},requiredFeatures:o};r.features.has("chromium-experimental-timestamp-query-inside-passes")?o.push("chromium-experimental-timestamp-query-inside-passes"):r.features.has("timestamp-query")&&o.push("timestamp-query"),r.features.has("shader-f16")&&o.push("shader-f16"),this.device=await r.requestDevice(i),this.adapterInfo=new Yo(await r.requestAdapterInfo()),this.gpuDataManager=ba(this),this.programManager=new Hn(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,pa(t.logLevel,!!t.debug),this.device.onuncapturederror=u=>{u.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${u.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:r,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let t=this.getCommandEncoder(),r={};this.queryType==="at-passes"&&(r.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=t.beginComputePass(r)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;rr(),this.endComputePass();let t;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),t=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(t,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&t.mapAsync(GPUMapMode.READ).then(()=>{let r=new BigUint64Array(t.getMappedRange()),o=this.pendingQueries.get(t);for(let i=0;i<r.length/2;i++){let u=o[i],a=u.kernelId,c=this.kernels.get(a),p=c.kernelType,h=c.kernelName,d=u.programName,y=u.inputTensorViews,w=u.outputTensorViews,_=r[i*2],v=r[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=_);let S=Number(_-this.queryTimeBase),A=Number(v-this.queryTimeBase);if(!Number.isSafeInteger(S)||!Number.isSafeInteger(A))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:y.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),outputsMetadata:w.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),kernelId:a,kernelType:p,kernelName:h,programName:d,startTime:S,endTime:A});else{let I="";y.forEach((E,P)=>{I+=`input[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `});let x="";w.forEach((E,P)=>{x+=`output[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `}),console.log(`[profiling] kernel "${a}|${p}|${h}|${d}" ${I}${x}execution time: ${A-S} ns`)}wo("GPU",`${d}::${_}::${v}`)}t.unmap(),this.pendingQueries.delete(t)}),Ht()}run(t,r,o,i,u,a){rr(t.name);let c=[];for(let E=0;E<r.length;++E){let P=r[E].data;if(P===0)continue;let O=this.gpuDataManager.get(P);if(!O)throw new Error(`no GPU data for input: ${P}`);c.push(O)}let{outputs:p,dispatchGroup:h,programUniforms:d}=t.getRunData(r),y=o.length===0?p.map((E,P)=>P):o;if(y.length!==p.length)throw new Error(`Output size ${y.length} must be equal to ${p.length}.`);let w=[],_=[];for(let E=0;E<p.length;++E){if(!Number.isInteger(y[E])||y[E]<-3||y[E]>=a)throw new Error(`Invalid output index: ${y[E]}`);if(y[E]===-3)continue;let P=y[E]===-1,O=y[E]===-2,R=P||O?u(p[E].dataType,p[E].dims):i(y[E],p[E].dataType,p[E].dims);if(w.push(R),R.data===0)continue;let L=this.gpuDataManager.get(R.data);if(!L)throw new Error(`no GPU data for output: ${R.data}`);if(P&&this.temporaryData.push(L),O){let N=this.kernelPersistentData.get(this.currentKernelId);N||(N=[],this.kernelPersistentData.set(this.currentKernelId,N)),N.push(L)}_.push(L)}if(c.length!==r.length||_.length!==w.length){if(_.length===0)return Ht(t.name),w;throw new Error(`Program ${t.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let v;if(d){let E=0,P=[];d.forEach(N=>{let K=typeof N.data=="number"?[N.data]:N.data;if(K.length===0)return;let Q=N.type===10?2:4,he,W;N.type===10?(W=K.length>4?16:K.length>2?8:K.length*Q,he=K.length>4?16:Q*K.length):(W=K.length<=2?K.length*Q:16,he=16),E=Math.ceil(E/W)*W,P.push(E);let se=N.type===10?8:4;E+=K.length>4?Math.ceil(K.length/se)*he:K.length*Q});let O=16;E=Math.ceil(E/O)*O;let R=new ArrayBuffer(E);d.forEach((N,K)=>{let Q=P[K],he=typeof N.data=="number"?[N.data]:N.data;if(N.type===6)new Int32Array(R,Q,he.length).set(he);else if(N.type===12)new Uint32Array(R,Q,he.length).set(he);else if(N.type===10)new Uint16Array(R,Q,he.length).set(he);else if(N.type===1)new Float32Array(R,Q,he.length).set(he);else throw new Error(`Unsupported uniform type: ${Gt(N.type)}`)});let L=this.gpuDataManager.create(E,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(L.buffer,0,R,0,E),this.gpuDataManager.release(L.id),v={offset:0,size:E,buffer:L.buffer}}let S=this.programManager.normalizeDispatchGroupSize(h),A=S[1]===1&&S[2]===1,I=nm(t,r,A),x=this.programManager.getArtifact(I);if(x||(x=this.programManager.build(t,S),this.programManager.setArtifact(I,x),Ve("info",()=>`[artifact] key: ${I}, programName: ${t.name}`)),d&&x.uniformVariablesInfo){if(d.length!==x.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${x.uniformVariablesInfo.length}, got ${d.length} in program "${x.programInfo.name}".`);for(let E=0;E<d.length;E++){let P=d[E],O=P.type,R=typeof P.data=="number"?1:P.data.length,[L,N]=x.uniformVariablesInfo[E];if(O!==L||R!==N)throw new Error(`Uniform variable ${E} mismatch: expect type ${L} with size ${N}, got type ${O} with size ${R} in program "${x.programInfo.name}".`)}}if(Ve("info",()=>`[ProgramManager] run "${t.name}" (key=${I}) with ${S[0]}x${S[1]}x${S[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let E={kernelId:this.currentKernelId,programName:x.programInfo.name,inputTensorViews:r,outputTensorViews:w};this.pendingKernels.push(E),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(E)}return this.programManager.run(x,c,_,S,v),Ht(t.name),w}upload(t,r){this.gpuDataManager.upload(t,r)}memcpy(t,r){this.gpuDataManager.memcpy(t,r)}async download(t,r){await this.gpuDataManager.download(t,r)}alloc(t){return this.gpuDataManager.create(t).id}free(t){return this.gpuDataManager.release(t)}createKernel(t,r,o,i){let u=Md.get(t);if(!u)throw new Error(`kernel not implemented: ${t}`);let a={kernelType:t,kernelName:i,kernelEntry:u[0],attributes:[u[1],o]};this.kernels.set(r,a)}releaseKernel(t){let r=this.kernelPersistentData.get(t);if(r){for(let o of r)this.gpuDataManager.release(o.id);this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)}computeKernel(t,r,o){let i=this.kernels.get(t);if(!i)throw new Error(`kernel not created: ${t}`);let u=i.kernelType,a=i.kernelName,c=i.kernelEntry,p=i.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${u}] ${a}" is not allowed to be called recursively`);this.currentKernelId=t,p[0]&&(p[1]=p[0](p[1]),p[0]=void 0),Ve("info",()=>`[WebGPU] Start to run kernel "[${u}] ${a}"...`);let h=this.env.debug;this.temporaryData=[];try{return h&&this.device.pushErrorScope("validation"),c(r,p[1]),0}catch(d){return o.push(Promise.resolve(`[WebGPU] Kernel "[${u}] ${a}" failed. ${d}`)),1}finally{h&&o.push(this.device.popErrorScope().then(d=>d?`GPU validation error for kernel "[${u}] ${a}": ${d.message}`:null));for(let d of this.temporaryData)this.gpuDataManager.release(d.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(t,r,o,i){let u=this.sessionExternalDataMapping.get(t);u||(u=new Map,this.sessionExternalDataMapping.set(t,u));let a=u.get(r),c=this.gpuDataManager.registerExternalBuffer(o,i,a?.[1]);return u.set(r,[c,o]),c}unregisterBuffers(t){let r=this.sessionExternalDataMapping.get(t);r&&(r.forEach(o=>this.gpuDataManager.unregisterExternalBuffer(o[1])),this.sessionExternalDataMapping.delete(t))}getBuffer(t){let r=this.gpuDataManager.get(t);if(!r)throw new Error(`no GPU data for buffer: ${t}`);return r.buffer}createDownloader(t,r,o){return async()=>{let i=await xo(this,t,r);return ma(i.buffer,o)}}writeTimestamp(t){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,t)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ve("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ve("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ve("info","replay"),this.sessionStatus="replaying";let t=this.capturedCommandList.get(this.currentSessionId),r=this.capturedPendingKernels.get(this.currentSessionId),o=t.length;this.pendingKernels=[];for(let i=0;i<o;i++){let u=this.getComputePassEncoder(),a=t[i];this.writeTimestamp(this.pendingDispatchNumber*2),u.setPipeline(a.computePipeline),u.setBindGroup(0,a.bindGroup),u.dispatchWorkgroups(...a.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(r[i]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(t){this.unregisterBuffers(t),this.capturedCommandList.has(t)&&this.capturedCommandList.delete(t),this.capturedPendingKernels.has(t)&&this.capturedPendingKernels.delete(t),this.gpuDataManager.onReleaseSession(t)}onRunStart(t){this.currentSessionId=t,this.setQueryType()}}});var Nd={};gn(Nd,{init:()=>om});var qr,Zo,om,Gd=Y(()=>{"use strict";ye();Wd();Lt();Se();qr=class e{constructor(t,r,o,i){this.module=t;this.dataType=r;this.data=o;this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(M.size(t)!==M.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)}},Zo=class{constructor(t,r,o){this.module=t;this.backend=r;this.customDataOffset=0;this.customDataSize=0;this.adapterInfo=r.adapterInfo;let i=t.HEAPU32,u=o>>>2;this.opKernelContext=i[u++];let a=i[u++];this.outputCount=i[u++],this.customDataOffset=i[u++],this.customDataSize=i[u++];let c=[];for(let p=0;p<a;p++){let h=i[u++],d=i[u++],y=i[u++],w=[];for(let _=0;_<y;_++)w.push(i[u++]);c.push(new qr(t,h,d,w))}this.inputs=c}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(t,r){let o=r?.inputs?.map(c=>typeof c=="number"?this.inputs[c]:c)??this.inputs,i=r?.outputs??[],u=(c,p,h)=>new qr(this.module,p,this.output(c,h),h),a=(c,p)=>{let h=tr(c);if(!h)throw new Error(`Unsupported data type: ${c}`);let d=h*M.size(p),y=d>0?this.backend.gpuDataManager.create(d).id:0;return new qr(this.module,c,y,p)};return this.backend.run(t,o,i,u,a,this.outputCount)}output(t,r){let o=this.module.stackSave();try{let i=this.module.stackAlloc((1+r.length)*4),u=i>>2;this.module.HEAPU32[u++]=r.length;for(let a=0;a<r.length;a++)this.module.HEAPU32[u++]=r[a];return this.module._JsepOutput(this.opKernelContext,t,i)}catch(i){throw new Error(`Failed to generate kernel\'s output[${t}] with dims [${r}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${i}`)}finally{this.module.stackRestore(o)}}},om=async(e,t,r,o)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let u=new Ln;await u.initialize(r,o),i("webgpu",[u,a=>u.alloc(a),a=>u.free(a),(a,c,p,h=!1)=>{if(h)Ve("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${a}, dst=${c}, size=${p}`),u.memcpy(a,c);else{Ve("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${a}, gpuDataId=${c}, size=${p}`);let d=t.HEAPU8.subarray(a>>>0,(a>>>0)+p);u.upload(c,d)}},async(a,c,p)=>{Ve("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${a}, dataOffset=${c}, size=${p}`),await u.download(a,()=>t.HEAPU8.subarray(c>>>0,(c>>>0)+p))},(a,c,p)=>u.createKernel(a,c,p,t.UTF8ToString(t._JsepGetNodeName(c))),a=>u.releaseKernel(a),(a,c,p,h)=>{Ve("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${p}, kernel=${a}, contextDataOffset=${c}`);let d=new Zo(t,u,c);return u.computeKernel(a,d,h)},()=>u.captureBegin(),()=>u.captureEnd(),()=>u.replay()])}else i("webnn")}});var Vi;Vi=Ei();var pl=zi(),fo,ho=!1,yn=!1,Ui=!1,ml=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},fl=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},hl=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Wi=async e=>{if(ho)return Promise.resolve();if(yn)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Ui)throw new Error("previous call to \'initializeWebAssembly()\' failed.");yn=!0;let t=e.initTimeout,r=e.numThreads,o=e.simd,i=ml(r),u=o&&fl(),a=e.wasmPaths,c=typeof a=="string"?a:void 0,p=hl(u,i),h=typeof a=="object"?a[p]:void 0,d=!1,y=[];if(t>0&&y.push(new Promise(w=>{setTimeout(()=>{d=!0,w()},t)})),y.push(new Promise((w,_)=>{let v=i?pl:Vi,S={locateFile:(A,I)=>{if(i&&A.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Mi()],{type:"text/javascript"}));if(A.endsWith(".wasm")){if(h)return h;let x=c??I;return p==="ort-wasm-simd.wasm"?x+"ort-wasm-simd.jsep.wasm":p==="ort-wasm-simd-threaded.wasm"?x+"ort-wasm-simd-threaded.jsep.wasm":x+p}return I+A}};if(i)if(S.numThreads=r,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${v.toString()};`;S.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}v(S).then(A=>{yn=!1,ho=!0,fo=A,w()},A=>{yn=!1,Ui=!0,_(A)})})),await Promise.race(y),d)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Le=()=>{if(ho&&fo)return fo;throw new Error("WebAssembly is not initialized yet.")};var Fe=(e,t)=>{let r=Le(),o=r.lengthBytesUTF8(e)+1,i=r._malloc(o);return r.stringToUTF8(e,i,o),t.push(i),i},Nr=(e,t,r,o)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,u])=>{let a=t?t+i:i;if(typeof u=="object")Nr(u,a+".",r,o);else if(typeof u=="string"||typeof u=="number")o(a,u.toString());else if(typeof u=="boolean")o(a,u?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof u}`)})},Ue=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);t._OrtGetLastError(o,o+4);let i=t.HEAP32[o/4],u=t.HEAPU32[o/4+1],a=u?t.UTF8ToString(u):"";throw new Error(`${e} ERROR_CODE: ${i}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}};var Ni=e=>{let t=Le(),r=0,o=[],i=e||{};try{if(e?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(i.terminate=!1);let u=0;return e?.tag!==void 0&&(u=Fe(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,u),r===0&&Ue("Can\'t create run options."),e?.extra!==void 0&&Nr(e.extra,"",new WeakSet,(a,c)=>{let p=Fe(a,o),h=Fe(c,o);t._OrtAddRunConfigEntry(r,p,h)!==0&&Ue(`Can\'t set a run config entry: ${a} - ${c}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseRunOptions(r),o.forEach(a=>t._free(a)),u}};var gl=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},yl=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},bl=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},wl=(e,t,r)=>{for(let o of t){let i=typeof o=="string"?o:o.name;switch(i){case"webnn":if(i="WEBNN",typeof o!="string"){let a=o;if(a?.deviceType){let c=Fe("deviceType",r),p=Fe(a.deviceType,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'deviceType\' - ${a.deviceType}.`)}if(a?.numThreads){let c=a.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=Fe("numThreads",r),h=Fe(c.toString(),r);Le()._OrtAddSessionConfigEntry(e,p,h)!==0&&Ue(`Can\'t set a session config entry: \'numThreads\' - ${a.numThreads}.`)}if(a?.powerPreference){let c=Fe("powerPreference",r),p=Fe(a.powerPreference,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'powerPreference\' - ${a.powerPreference}.`)}}break;case"webgpu":if(i="JS",typeof o!="string"){let a=o;if(a?.preferredLayout){if(a.preferredLayout!=="NCHW"&&a.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${a.preferredLayout}`);let c=Fe("preferredLayout",r),p=Fe(a.preferredLayout,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'preferredLayout\' - ${a.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let u=Fe(i,r);Le()._OrtAppendExecutionProvider(e,u)!==0&&Ue(`Can\'t append execution provider: ${i}.`)}},Gi=e=>{let t=Le(),r=0,o=[],i=e||{};bl(i);try{let u=gl(i.graphOptimizationLevel??"all"),a=yl(i.executionMode??"sequential"),c=typeof i.logId=="string"?Fe(i.logId,o):0,p=i.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let h=i.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let d=typeof i.optimizedModelFilePath=="string"?Fe(i.optimizedModelFilePath,o):0;if(r=t._OrtCreateSessionOptions(u,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,c,p,h,d),r===0&&Ue("Can\'t create session options."),i.executionProviders&&wl(r,i.executionProviders,o),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);let y=Fe("enableGraphCapture",o),w=Fe(i.enableGraphCapture.toString(),o);t._OrtAddSessionConfigEntry(r,y,w)!==0&&Ue(`Can\'t set a session config entry: \'enableGraphCapture\' - ${i.enableGraphCapture}.`)}if(i.freeDimensionOverrides)for(let[y,w]of Object.entries(i.freeDimensionOverrides)){if(typeof y!="string")throw new Error(`free dimension override name must be a string: ${y}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let _=Fe(y,o);t._OrtAddFreeDimensionOverride(r,_,w)!==0&&Ue(`Can\'t set a free dimension override: ${y} - ${w}.`)}return i.extra!==void 0&&Nr(i.extra,"",new WeakSet,(y,w)=>{let _=Fe(y,o),v=Fe(w,o);t._OrtAddSessionConfigEntry(r,_,v)!==0&&Ue(`Can\'t set a session config entry: ${y} - ${w}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseSessionOptions(r),o.forEach(a=>t._free(a)),u}};ye();var Li=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(e),o=[];for await(let i of r)o.push(i);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),o=r?parseInt(r,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),u;try{u=new ArrayBuffer(o)}catch(c){if(c instanceof RangeError){let p=Math.ceil(o/65536);u=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let a=0;for(;;){let{done:c,value:p}=await i.read();if(c)break;let h=p.byteLength;new Uint8Array(u,a,h).set(p),a+=h}return new Uint8Array(u,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)};var im=(e,t)=>{Le()._OrtInit(e,t)!==0&&Ue("Can\'t initialize onnxruntime.")},Ld=async e=>{im(e.wasm.numThreads,Gr(e.logLevel))},Fd=async(e,t)=>{{let r=(Gd(),wr(Nd)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let o=e.webgpu.adapter;if(o){if(typeof o.limits!="object"||typeof o.features!="object"||typeof o.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let i=e.webgpu.powerPreference;if(i!==void 0&&i!=="low-power"&&i!=="high-performance")throw new Error(`Invalid powerPreference setting: "${i}"`);let u=e.webgpu.forceFallbackAdapter;if(u!==void 0&&typeof u!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${u}"`);if(o=await navigator.gpu.requestAdapter({powerPreference:i,forceFallbackAdapter:u}),!o)throw new Error(\'Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.\')}if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await r("webgpu",Le(),e,o)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await r("webnn",Le(),e)}}},ar=new Map,am=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,o,o+4)!==0&&Ue("Can\'t get session input/output count."),[t.HEAP32[o/4],t.HEAP32[o/4+1]]}finally{t.stackRestore(r)}},Xo=e=>{let t=Le(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},qd=async(e,t)=>{let r,o,i=Le();Array.isArray(e)?[r,o]=e:e.buffer===i.HEAPU8.buffer?[r,o]=[e.byteOffset,e.byteLength]:[r,o]=Xo(e);let u=0,a=0,c=0,p=[],h=[],d=[];try{if([a,p]=Gi(t),t?.externalData&&i.mountExternalData){let x=[];for(let E of t.externalData){let P=typeof E=="string"?E:E.path;x.push(Li(typeof E=="string"?E:E.data).then(O=>{i.mountExternalData(P,O)}))}await Promise.all(x)}u=await i._OrtCreateSession(r,o,a),u===0&&Ue("Can\'t create a session.");let[y,w]=am(u),_=!!t?.enableGraphCapture,v=[],S=[],A=[];for(let x=0;x<y;x++){let E=i._OrtGetInputName(u,x);E===0&&Ue("Can\'t get an input name."),h.push(E),v.push(i.UTF8ToString(E))}for(let x=0;x<w;x++){let E=i._OrtGetOutputName(u,x);E===0&&Ue("Can\'t get an output name."),d.push(E);let P=i.UTF8ToString(E);S.push(P);{if(_&&t?.preferredOutputLocation===void 0){A.push("gpu-buffer");continue}let O=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[P]??"cpu";if(O!=="cpu"&&O!=="cpu-pinned"&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}.`);if(_&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}. Only \'gpu-buffer\' location is supported when enableGraphCapture is true.`);A.push(O)}}let I=null;return A.some(x=>x==="gpu-buffer")&&(c=i._OrtCreateBinding(u),c===0&&Ue("Can\'t create IO binding."),I={handle:c,outputPreferredLocations:A,outputPreferredLocationsEncoded:A.map(x=>yo(x))}),ar.set(u,[u,h,d,I,_,!1]),[u,v,S]}catch(y){throw h.forEach(w=>i._OrtFree(w)),d.forEach(w=>i._OrtFree(w)),c!==0&&i._OrtReleaseBinding(c),u!==0&&i._OrtReleaseSession(u),y}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a),p.forEach(y=>i._free(y)),i.unmountExternalData?.()}},jd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,i,u,a,c]=r;a&&(c&&t._OrtClearBoundOutputs(a.handle),t._OrtReleaseBinding(a.handle)),t.jsepOnReleaseSession?.(e),i.forEach(p=>t._OrtFree(p)),u.forEach(p=>t._OrtFree(p)),t._OrtReleaseSession(o),ar.delete(e)},Hd=(e,t,r,o,i,u=!1)=>{if(!e){t.push(0);return}let a=Le(),c=e[0],p=e[1],h=e[3],d,y;if(c==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${i} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let v=e[2].gpuBuffer,S=tr(go(c));y=p.reduce((I,x)=>I*x,1)*S;let A=a.jsepRegisterBuffer;if(!A)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');d=A(o,i,v,y)}else{let v=e[2];if(Array.isArray(v)){y=4*v.length,d=a._malloc(y),r.push(d);let S=d/4;for(let A=0;A<v.length;A++){if(typeof v[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);a.HEAPU32[S++]=Fe(v[A],r)}}else y=v.byteLength,d=a._malloc(y),r.push(d),a.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,y),d)}let w=a.stackSave(),_=a.stackAlloc(4*p.length);try{let v=_/4;p.forEach(A=>a.HEAP32[v++]=A);let S=a._OrtCreateTensor(go(c),d,y,_,p.length,yo(h));S===0&&Ue(`Can\'t create tensor for input/output. session=${o}, index=${i}.`),t.push(S)}finally{a.stackRestore(w)}},Kd=async(e,t,r,o,i,u)=>{let a=Le(),c=ar.get(e);if(!c)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=c[0],h=c[1],d=c[2],y=c[3],w=c[4],_=c[5],v=t.length,S=o.length,A=0,I=[],x=[],E=[],P=[],O=a.stackSave(),R=a.stackAlloc(v*4),L=a.stackAlloc(v*4),N=a.stackAlloc(S*4),K=a.stackAlloc(S*4);try{[A,I]=Ni(u);for(let ee=0;ee<v;ee++)Hd(r[ee],x,P,e,t[ee],w);for(let ee=0;ee<S;ee++)Hd(i[ee],E,P,e,v+o[ee],w);let Q=R/4,he=L/4,W=N/4,se=K/4;for(let ee=0;ee<v;ee++)a.HEAPU32[Q++]=x[ee],a.HEAPU32[he++]=h[t[ee]];for(let ee=0;ee<S;ee++)a.HEAPU32[W++]=E[ee],a.HEAPU32[se++]=d[o[ee]];if(y&&!_){let{handle:ee,outputPreferredLocations:ae,outputPreferredLocationsEncoded:Ae}=y;if(h.length!==v)throw new Error(`input count from feeds (${v}) is expected to be always equal to model\'s input count (${h.length}).`);for(let me=0;me<v;me++){let ie=t[me];await a._OrtBindInput(ee,h[ie],x[me])!==0&&Ue(`Can\'t bind input[${me}] for session=${e}.`)}for(let me=0;me<S;me++){let ie=o[me];i[me]?.[3]?a._OrtBindOutput(ee,d[ie],E[me],0)!==0&&Ue(`Can\'t bind pre-allocated output[${me}] for session=${e}.`):a._OrtBindOutput(ee,d[ie],0,Ae[ie])!==0&&Ue(`Can\'t bind output[${me}] to ${ae[me]} for session=${e}.`)}ar.set(e,[p,h,d,y,w,!0])}a.jsepOnRunStart?.(p);let Ce;y?Ce=await a._OrtRunWithBinding(p,y.handle,S,N,A):Ce=await a._OrtRun(p,L,R,v,K,S,N,A),Ce!==0&&Ue("failed to call OrtRun().");let We=[];for(let ee=0;ee<S;ee++){let ae=a.HEAPU32[N/4+ee];if(ae===E[ee]){We.push(i[ee]);continue}let Ae=a.stackSave(),me=a.stackAlloc(4*4),ie=!1,ue,le=0;try{a._OrtGetTensorData(ae,me,me+4,me+8,me+12)!==0&&Ue(`Can\'t access output tensor data on index ${ee}.`);let G=me/4,ne=a.HEAPU32[G++];le=a.HEAPU32[G++];let xe=a.HEAPU32[G++],Ke=a.HEAPU32[G++],Be=[];for(let Ne=0;Ne<Ke;Ne++)Be.push(a.HEAPU32[xe/4+Ne]);a._OrtFree(xe);let Ge=Be.reduce((Ne,Ye)=>Ne*Ye,1);ue=Gt(ne);let Ut=y?.outputPreferredLocations[o[ee]];if(ue==="string"){if(Ut==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ne=[],Ye=le/4;for(let mt=0;mt<Ge;mt++){let Rt=a.HEAPU32[Ye++],qt=mt===Ge-1?void 0:a.HEAPU32[Ye]-Rt;Ne.push(a.UTF8ToString(Rt,qt))}We.push([ue,Be,Ne,"cpu"])}else if(Ut==="gpu-buffer"&&Ge>0){let Ne=a.jsepGetBuffer;if(!Ne)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let Ye=Ne(le),mt=tr(ne);if(mt===void 0||!Hi(ue))throw new Error(`Unsupported data type: ${ue}`);ie=!0,We.push([ue,Be,{gpuBuffer:Ye,download:a.jsepCreateDownloader(Ye,Ge*mt,ue),dispose:()=>{a._OrtReleaseTensor(ae)}},"gpu-buffer"])}else{let Ne=bn(ue),Ye=new Ne(Ge);new Uint8Array(Ye.buffer,Ye.byteOffset,Ye.byteLength).set(a.HEAPU8.subarray(le,le+Ye.byteLength)),We.push([ue,Be,Ye,"cpu"])}}finally{a.stackRestore(Ae),ue==="string"&&le&&a._free(le),ie||a._OrtReleaseTensor(ae)}}return y&&!w&&(a._OrtClearBoundOutputs(y.handle),ar.set(e,[p,h,d,y,w,!1])),We}finally{a.stackRestore(O),x.forEach(Q=>a._OrtReleaseTensor(Q)),E.forEach(Q=>a._OrtReleaseTensor(Q)),P.forEach(Q=>a._free(Q)),A!==0&&a._OrtReleaseRunOptions(A),I.forEach(Q=>a._free(Q))}},Yd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error("invalid session id");let o=r[0],i=t._OrtEndProfiling(o);i===0&&Ue("Can\'t get an profile file name."),t._OrtFree(i)},Zd=e=>{let t=[];for(let r of e){let o=r[2];!Array.isArray(o)&&"buffer"in o&&t.push(o.buffer)}return t};self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":Wi(r.wasm).then(()=>{Ld(r).then(()=>{postMessage({type:t})},o=>{postMessage({type:t,err:o})})},o=>{postMessage({type:t,err:o})});break;case"init-ep":{let{epName:o,env:i}=r;Fd(i,o).then(()=>{postMessage({type:t})},u=>{postMessage({type:t,err:u})});break}case"copy-from":{let{buffer:o}=r,i=Xo(o);postMessage({type:t,out:i});break}case"create":{let{model:o,options:i}=r;qd(o,i).then(u=>{postMessage({type:t,out:u})},u=>{postMessage({type:t,err:u})});break}case"release":jd(r),postMessage({type:t});break;case"run":{let{sessionId:o,inputIndices:i,inputs:u,outputIndices:a,options:c}=r;Kd(o,i,u,a,new Array(a.length).fill(null),c).then(p=>{p.some(h=>h[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:p},Zd([...u,...p]))},p=>{postMessage({type:t,err:p})});break}case"end-profiling":Yd(r),postMessage({type:t});break;default:}}catch(o){postMessage({type:t,err:o})}};})();\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n'}),gr,St,sn,pi,mi,Co,Io,zr,Br,pf,ci,Wd,Nd,Vd,Hd,Gd,Ld,Fd,To=j(()=>{var a;_t(),Md(),Or(),gr=()=>!!ke.wasm.proxy&&typeof document<"u",sn=!1,pi=!1,mi=!1,Io=new Map,zr=(s,c)=>{let d=Io.get(s);d?d.push(c):Io.set(s,[c])},Br=()=>{if(sn||!pi||mi||!St)throw new Error("worker not ready")},pf=s=>{switch(s.data.type){case"init-wasm":sn=!1,s.data.err?(mi=!0,Co[1](s.data.err)):(pi=!0,Co[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let c=Io.get(s.data.type);s.data.err?c.shift()[1](s.data.err):c.shift()[0](s.data.out);break}}},ci=typeof document<"u"?(a=document==null?void 0:document.currentScript)==null?void 0:a.src:void 0,Wd=async()=>{if(!pi){if(sn)throw new Error("multiple calls to 'initWasm()' detected.");if(mi)throw new Error("previous call to 'initWasm()' failed.");if(sn=!0,gr())return ke.wasm.wasmPaths===void 0&&ci&&ci.indexOf("blob:")!==0&&(ke.wasm.wasmPaths=ci.substr(0,+ci.lastIndexOf("/")+1)),new Promise((s,c)=>{St==null||St.terminate();let d=URL.createObjectURL(new Blob([Ud()],{type:"text/javascript"}));St=new Worker(d,{name:"ort-wasm-proxy-worker"}),St.onerror=g=>c(g),St.onmessage=pf,URL.revokeObjectURL(d),Co=[s,c];let et={type:"init-wasm",in:ke};St.postMessage(et)});try{await Fa(ke.wasm),await kd(ke),pi=!0}catch(s){throw mi=!0,s}finally{sn=!1}}},Nd=async s=>{if(gr())return Br(),new Promise((c,d)=>{zr("init-ep",[c,d]);let et={type:"init-ep",in:{epName:s,env:ke}};St.postMessage(et)});await Od(ke,s)},Vd=async s=>gr()?(Br(),new Promise((c,d)=>{zr("copy-from",[c,d]);let et={type:"copy-from",in:{buffer:s}};St.postMessage(et,[s.buffer])})):So(s),Hd=async(s,c)=>{if(gr()){if(c!=null&&c.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Br(),new Promise((d,et)=>{zr("create",[d,et]);let g={type:"create",in:{model:s,options:{...c}}},at=[];s instanceof Uint8Array&&at.push(s.buffer),St.postMessage(g,at)})}else return Pd(s,c)},Gd=async s=>{if(gr())return Br(),new Promise((c,d)=>{zr("release",[c,d]);let et={type:"release",in:s};St.postMessage(et)});Rd(s)},Ld=async(s,c,d,et,g,at)=>{if(gr()){if(d.some($t=>$t[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(g.some($t=>$t))throw new Error("pre-allocated output tensor is not supported for proxy.");return Br(),new Promise(($t,vt)=>{zr("run",[$t,vt]);let b=d,pt={type:"run",in:{sessionId:s,inputIndices:c,inputs:b,outputIndices:et,options:at}};St.postMessage(pt,Dd(b))})}else return zd(s,c,d,et,g,at)},Fd=async s=>{if(gr())return Br(),new Promise((c,d)=>{zr("end-profiling",[c,d]);let et={type:"end-profiling",in:s};St.postMessage(et)});Bd(s)}}),qd,mf,fi,jd=j(()=>{_t(),To(),ye(),qi(),qd=(a,s)=>{switch(a.location){case"cpu":return[a.type,a.dims,a.data,"cpu"];case"gpu-buffer":return[a.type,a.dims,{gpuBuffer:a.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${a.location} for ${s()}`)}},mf=a=>{switch(a[3]){case"cpu":return new tt(a[0],a[2],a[1]);case"gpu-buffer":{let s=a[0];if(!Vn(s))throw new Error(`not supported data type: ${s} for deserializing GPU tensor`);let{gpuBuffer:c,download:d,dispose:et}=a[2];return tt.fromGpuBuffer(c,{dataType:s,dims:a[1],download:d,dispose:et})}default:throw new Error(`invalid data location: ${a[3]}`)}},fi=class{async fetchModelAndCopyToWasmMemory(a){return Vd(await tn(a))}async loadModel(a,s){yt();let c;typeof a=="string"?typeof process<"u"&&process.versions&&process.versions.node?c=await tn(a):c=await this.fetchModelAndCopyToWasmMemory(a):c=a,[this.sessionId,this.inputNames,this.outputNames]=await Hd(c,s),ut()}async dispose(){return Gd(this.sessionId)}async run(a,s,c){yt();let d=[],et=[];Object.entries(a).forEach(st=>{let wt=st[0],Tt=st[1],Ct=this.inputNames.indexOf(wt);if(Ct===-1)throw new Error(`invalid input '${wt}'`);d.push(Tt),et.push(Ct)});let g=[],at=[];Object.entries(s).forEach(st=>{let wt=st[0],Tt=st[1],Ct=this.outputNames.indexOf(wt);if(Ct===-1)throw new Error(`invalid output '${wt}'`);g.push(Tt),at.push(Ct)});let $t=d.map((st,wt)=>qd(st,()=>`input "${this.inputNames[et[wt]]}"`)),vt=g.map((st,wt)=>st?qd(st,()=>`output "${this.outputNames[at[wt]]}"`):null),b=await Ld(this.sessionId,et,$t,at,vt,c),pt={};for(let st=0;st<b.length;st++)pt[this.outputNames[at[st]]]=g[st]??mf(b[st]);return ut(),pt}startProfiling(){}endProfiling(){Fd(this.sessionId)}}}),ff,hi,Kd=j(()=>{_t(),To(),jd(),ff=()=>{if((typeof ke.wasm.initTimeout!="number"||ke.wasm.initTimeout<0)&&(ke.wasm.initTimeout=0),typeof ke.wasm.simd!="boolean"&&(ke.wasm.simd=!0),typeof ke.wasm.proxy!="boolean"&&(ke.wasm.proxy=!1),typeof ke.wasm.trace!="boolean"&&(ke.wasm.trace=!1),typeof ke.wasm.numThreads!="number"||!Number.isInteger(ke.wasm.numThreads)||ke.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(ke.wasm.numThreads=1);let a=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;ke.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},hi=class{async init(a){ff(),await Wd(),await Nd(a)}async createInferenceSessionHandler(a,s){let c=new fi;return await c.loadModel(a,s),Promise.resolve(c)}}}),Yd={};kr(Yd,{wasmBackend:()=>hf});var hf,Xd=j(()=>{Kd(),hf=new hi});_t();_t();_t();var ka="1.18.0",h$=Bi;{let a=(Xd(),sr(Yd)).wasmBackend;lr("webgpu",a,5),lr("webnn",a,5),lr("cpu",a,10),lr("wasm",a,10)}Object.defineProperty(ke.versions,"web",{value:ka,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ort_gpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return uc},get TRACE(){return Bn},get TRACE_FUNC_BEGIN(){return yt},get TRACE_FUNC_END(){return ut},get Tensor(){return tt},get TrainingSession(){return dc},default:h$,get env(){return ke},get registerBackend(){return lr}},Symbol.toStringTag,{value:"Module"}));var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(a,s)=>function(){return s||(0,a[__getOwnPropNames(a)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(a,s,c,d)=>{if(s&&typeof s=="object"||typeof s=="function")for(let et of __getOwnPropNames(s))!__hasOwnProp.call(a,et)&&et!==c&&__defProp(a,et,{get:()=>s[et],enumerable:!(d=__getOwnPropDesc(s,et))||d.enumerable});return a},__toESM=(a,s,c)=>(c=a!=null?__create(__getProtoOf(a)):{},__copyProps(!a||!a.__esModule?__defProp(c,"default",{value:a,enumerable:!0}):c,a)),require_lodash=__commonJS({"../../node_modules/lodash/lodash.js"(a,s){(function(){var c,d="4.17.21",et=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",at="Expected a function",$t="Invalid `variable` option passed into `_.template`",vt="__lodash_hash_undefined__",b=500,pt="__lodash_placeholder__",st=1,wt=2,Tt=4,Ct=1,jt=2,Lt=1,Ht=2,Gt=4,Kt=8,tr=16,rr=32,Lr=64,jr=128,Yr=256,An=512,No=30,o0="...",t0=800,c0=16,n0=1,Qo=2,Mo=3,zo=1/0,e0=9007199254740991,Xr=17976931348623157e292,In=NaN,Zr=4294967295,wn=Zr-1,r0=Zr>>>1,ko=[["ary",jr],["bind",Lt],["bindKey",Ht],["curry",Kt],["curryRight",tr],["flip",An],["partial",rr],["partialRight",Lr],["rearg",Yr]],_n="[object Arguments]",i0="[object Array]",a0="[object AsyncFunction]",m0="[object Boolean]",p0="[object Date]",x0="[object DOMException]",S0="[object Error]",R0="[object Function]",$0="[object GeneratorFunction]",f0="[object Map]",P0="[object Number]",M0="[object Null]",C0="[object Object]",Uo="[object Promise]",l0="[object Proxy]",b0="[object RegExp]",k0="[object Set]",d0="[object String]",E0="[object Symbol]",V0="[object Undefined]",Z0="[object WeakMap]",h1="[object WeakSet]",r1="[object ArrayBuffer]",I1="[object DataView]",f1="[object Float32Array]",q1="[object Float64Array]",c1="[object Int8Array]",B1="[object Int16Array]",nv="[object Int32Array]",iv="[object Uint8Array]",t1="[object Uint8ClampedArray]",dv="[object Uint16Array]",$1="[object Uint32Array]",rv=/\b__p \+= '';/g,_g=/\b(__p \+=) '' \+/g,w0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,T0=/&(?:amp|lt|gt|quot|#39);/g,F0=/[&<>"']/g,U0=RegExp(T0.source),h0=RegExp(F0.source),Q0=/<%-([\s\S]+?)%>/g,l1=/<%([\s\S]+?)%>/g,e1=/<%=([\s\S]+?)%>/g,m1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T1=/^\w*$/,G1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,P1=/[\\^$.*+?()[\]{}|]/g,I0=RegExp(P1.source),p1=/^\s+/,x1=/\s/,R1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,D1=/\{\n\/\* \[wrapped with (.+)\] \*/,K1=/,? & /,vv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yv=/[()=,{}\[\]\/\s]/,gv=/\\(\\)?/g,qv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ov=/\w*$/,Lv=/^[-+]0x[0-9a-f]+$/i,Rv=/^0b[01]+$/i,$y=/^\[object .+?Constructor\]$/,Iv=/^0o[0-7]+$/i,Cv=/^(?:0|[1-9]\d*)$/,Gy=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kv=/($^)/,_v=/['\n\r\u2028\u2029\\]/g,Yv="\\ud800-\\udfff",xy="\\u0300-\\u036f",Pv="\\ufe20-\\ufe2f",qy="\\u20d0-\\u20ff",sv=xy+Pv+qy,wy="\\u2700-\\u27bf",uy="a-z\\xdf-\\xf6\\xf8-\\xff",Sv="\\xac\\xb1\\xd7\\xf7",_y="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lv="\\u2000-\\u206f",bv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ty="A-Z\\xc0-\\xd6\\xd8-\\xde",Ky="\\ufe0e\\ufe0f",Yy=Sv+_y+lv+bv,Sy="['’]",l$="["+Yv+"]",Xy="["+Yy+"]",Ey="["+sv+"]",v1="\\d+",My="["+wy+"]",b1="["+uy+"]",Ty="[^"+Yv+Yy+v1+wy+uy+ty+"]",kv="\\ud83c[\\udffb-\\udfff]",fv="(?:"+Ey+"|"+kv+")",cy="[^"+Yv+"]",ry="(?:\\ud83c[\\udde6-\\uddff]){2}",dy="[\\ud800-\\udbff][\\udc00-\\udfff]",$v="["+ty+"]",Cy="\\u200d",Ev="(?:"+b1+"|"+Ty+")",Ov="(?:"+$v+"|"+Ty+")",fy="(?:"+Sy+"(?:d|ll|m|re|s|t|ve))?",jv="(?:"+Sy+"(?:D|LL|M|RE|S|T|VE))?",vn=fv+"?",nr="["+Ky+"]?",Ir="(?:"+Cy+"(?:"+[cy,ry,dy].join("|")+")"+nr+vn+")*",Kr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Sn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Go=nr+vn+Ir,g0="(?:"+[My,ry,dy].join("|")+")"+Go,B0="(?:"+[cy+Ey+"?",Ey,ry,dy,l$].join("|")+")",q0=RegExp(Sy,"g"),J0=RegExp(Ey,"g"),X0=RegExp(kv+"(?="+kv+")|"+B0+Go,"g"),y1=RegExp([$v+"?"+b1+"+"+fy+"(?="+[Xy,$v,"$"].join("|")+")",Ov+"+"+jv+"(?="+[Xy,$v+Ev,"$"].join("|")+")",$v+"?"+Ev+"+"+fy,$v+"+"+jv,Sn,Kr,v1,g0].join("|"),"g"),L1=RegExp("["+Cy+Yv+sv+Ky+"]"),D0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,A0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],o1=-1,a1={};a1[f1]=a1[q1]=a1[c1]=a1[B1]=a1[nv]=a1[iv]=a1[t1]=a1[dv]=a1[$1]=!0,a1[_n]=a1[i0]=a1[r1]=a1[m0]=a1[I1]=a1[p0]=a1[S0]=a1[R0]=a1[f0]=a1[P0]=a1[C0]=a1[b0]=a1[k0]=a1[d0]=a1[Z0]=!1;var j1={};j1[_n]=j1[i0]=j1[r1]=j1[I1]=j1[m0]=j1[p0]=j1[f1]=j1[q1]=j1[c1]=j1[B1]=j1[nv]=j1[f0]=j1[P0]=j1[C0]=j1[b0]=j1[k0]=j1[d0]=j1[E0]=j1[iv]=j1[t1]=j1[dv]=j1[$1]=!0,j1[S0]=j1[R0]=j1[Z0]=!1;var Oy={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},qx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kx={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xx=parseFloat,dx=parseInt,fx=typeof global=="object"&&global&&global.Object===Object&&global,px=typeof self=="object"&&self&&self.Object===Object&&self,pv=fx||px||Function("return this")(),E$=typeof a=="object"&&a&&!a.nodeType&&a,Ny=E$&&typeof s=="object"&&s&&!s.nodeType&&s,hx=Ny&&Ny.exports===E$,j$=hx&&fx.process,Fv=function(){try{var _0=Ny&&Ny.require&&Ny.require("util").types;return _0||j$&&j$.binding&&j$.binding("util")}catch{}}(),mx=Fv&&Fv.isArrayBuffer,Zx=Fv&&Fv.isDate,gx=Fv&&Fv.isMap,vx=Fv&&Fv.isRegExp,yx=Fv&&Fv.isSet,Qx=Fv&&Fv.isTypedArray;function Bv(_0,z0,N0){switch(N0.length){case 0:return _0.call(z0);case 1:return _0.call(z0,N0[0]);case 2:return _0.call(z0,N0[0],N0[1]);case 3:return _0.call(z0,N0[0],N0[1],N0[2])}return _0.apply(z0,N0)}function Jx(_0,z0,N0,u1){for(var O1=-1,X1=_0==null?0:_0.length;++O1<X1;){var xv=_0[O1];z0(u1,xv,N0(xv),_0)}return u1}function zv(_0,z0){for(var N0=-1,u1=_0==null?0:_0.length;++N0<u1&&z0(_0[N0],N0,_0)!==!1;);return _0}function F$(_0,z0){for(var N0=_0==null?0:_0.length;N0--&&z0(_0[N0],N0,_0)!==!1;);return _0}function ew(_0,z0){for(var N0=-1,u1=_0==null?0:_0.length;++N0<u1;)if(!z0(_0[N0],N0,_0))return!1;return!0}function Ly(_0,z0){for(var N0=-1,u1=_0==null?0:_0.length,O1=0,X1=[];++N0<u1;){var xv=_0[N0];z0(xv,N0,_0)&&(X1[O1++]=xv)}return X1}function d1(_0,z0){var N0=_0==null?0:_0.length;return!!N0&&jy(_0,z0,0)>-1}function B$(_0,z0,N0){for(var u1=-1,O1=_0==null?0:_0.length;++u1<O1;)if(N0(z0,_0[u1]))return!0;return!1}function J1(_0,z0){for(var N0=-1,u1=_0==null?0:_0.length,O1=Array(u1);++N0<u1;)O1[N0]=z0(_0[N0],N0,_0);return O1}function ny(_0,z0){for(var N0=-1,u1=z0.length,O1=_0.length;++N0<u1;)_0[O1+N0]=z0[N0];return _0}function Xv(_0,z0,N0,u1){var O1=-1,X1=_0==null?0:_0.length;for(u1&&X1&&(N0=_0[++O1]);++O1<X1;)N0=z0(N0,_0[O1],O1,_0);return N0}function tw(_0,z0,N0,u1){var O1=_0==null?0:_0.length;for(u1&&O1&&(N0=_0[--O1]);O1--;)N0=z0(N0,_0[O1],O1,_0);return N0}function z$(_0,z0){for(var N0=-1,u1=_0==null?0:_0.length;++N0<u1;)if(z0(_0[N0],N0,_0))return!0;return!1}var bx=U$("length");function $x(_0){return _0.split("")}function rw(_0){return _0.match(vv)||[]}function xx(_0,z0,N0){var u1;return N0(_0,function(O1,X1,xv){if(z0(O1,X1,xv))return u1=X1,!1}),u1}function Zy(_0,z0,N0,u1){for(var O1=_0.length,X1=N0+(u1?1:-1);u1?X1--:++X1<O1;)if(z0(_0[X1],X1,_0))return X1;return-1}function jy(_0,z0,N0){return z0===z0?qS(_0,z0,N0):Zy(_0,_x,N0)}function wx(_0,z0,N0,u1){for(var O1=N0-1,X1=_0.length;++O1<X1;)if(u1(_0[O1],z0))return O1;return-1}function _x(_0){return _0!==_0}function Sx(_0,z0){var N0=_0==null?0:_0.length;return N0?u$(_0,z0)/N0:In}function U$(_0){return function(z0){return z0==null?c:z0[_0]}}function V$(_0){return function(z0){return _0==null?c:_0[z0]}}function Ex(_0,z0,N0,u1,O1){return O1(_0,function(X1,xv,tv){N0=u1?(u1=!1,X1):z0(N0,X1,xv,tv)}),N0}function Vw(_0,z0){var N0=_0.length;for(_0.sort(z0);N0--;)_0[N0]=_0[N0].value;return _0}function u$(_0,z0){for(var N0,u1=-1,O1=_0.length;++u1<O1;){var X1=z0(_0[u1]);X1!==c&&(N0=N0===c?X1:N0+X1)}return N0}function W$(_0,z0){for(var N0=-1,u1=Array(_0);++N0<_0;)u1[N0]=z0(N0);return u1}function or(_0,z0){return J1(z0,function(N0){return[N0,_0[N0]]})}function Hr(_0){return _0&&_0.slice(0,U2(_0)+1).replace(p1,"")}function xn(_0){return function(z0){return _0(z0)}}function Ro(_0,z0){return J1(z0,function(N0){return _0[N0]})}function s0(_0,z0){return _0.has(z0)}function y0(_0,z0){for(var N0=-1,u1=_0.length;++N0<u1&&jy(z0,_0[N0],0)>-1;);return N0}function j0(_0,z0){for(var N0=_0.length;N0--&&jy(z0,_0[N0],0)>-1;);return N0}function Y0(_0,z0){for(var N0=_0.length,u1=0;N0--;)_0[N0]===z0&&++u1;return u1}var s1=V$(Oy),n1=V$(qx);function w1(_0){return"\\"+Yx[_0]}function Y1(_0,z0){return _0==null?c:_0[z0]}function W1(_0){return L1.test(_0)}function L0(_0){return D0.test(_0)}function C1(_0){for(var z0,N0=[];!(z0=_0.next()).done;)N0.push(z0.value);return N0}function U1(_0){var z0=-1,N0=Array(_0.size);return _0.forEach(function(u1,O1){N0[++z0]=[O1,u1]}),N0}function Fy(_0,z0){return function(N0){return _0(z0(N0))}}function Ay(_0,z0){for(var N0=-1,u1=_0.length,O1=0,X1=[];++N0<u1;){var xv=_0[N0];(xv===z0||xv===pt)&&(_0[N0]=pt,X1[O1++]=N0)}return X1}function nw(_0){var z0=-1,N0=Array(_0.size);return _0.forEach(function(u1){N0[++z0]=u1}),N0}function GS(_0){var z0=-1,N0=Array(_0.size);return _0.forEach(function(u1){N0[++z0]=[u1,u1]}),N0}function qS(_0,z0,N0){for(var u1=N0-1,O1=_0.length;++u1<O1;)if(_0[u1]===z0)return u1;return-1}function KS(_0,z0,N0){for(var u1=N0+1;u1--;)if(_0[u1]===z0)return u1;return u1}function H$(_0){return W1(_0)?XS(_0):bx(_0)}function Ry(_0){return W1(_0)?ZS(_0):$x(_0)}function U2(_0){for(var z0=_0.length;z0--&&x1.test(_0.charAt(z0)););return z0}var YS=V$(Kx);function XS(_0){for(var z0=X0.lastIndex=0;X0.test(_0);)++z0;return z0}function ZS(_0){return _0.match(X0)||[]}function QS(_0){return _0.match(y1)||[]}var JS=function _0(z0){z0=z0==null?pv:c$.defaults(pv.Object(),z0,c$.pick(pv,A0));var N0=z0.Array,u1=z0.Date,O1=z0.Error,X1=z0.Function,xv=z0.Math,tv=z0.Object,Ww=z0.RegExp,eE=z0.String,py=z0.TypeError,iw=N0.prototype,tE=X1.prototype,G$=tv.prototype,ow=z0["__core-js_shared__"],aw=tE.toString,ev=G$.hasOwnProperty,rE=0,V2=function(){var Ft=/[^.]+$/.exec(ow&&ow.keys&&ow.keys.IE_PROTO||"");return Ft?"Symbol(src)_1."+Ft:""}(),sw=G$.toString,nE=aw.call(tv),iE=pv._,oE=Ww("^"+aw.call(ev).replace(P1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lw=hx?z0.Buffer:c,d$=z0.Symbol,uw=z0.Uint8Array,W2=lw?lw.allocUnsafe:c,cw=Fy(tv.getPrototypeOf,tv),H2=tv.create,G2=G$.propertyIsEnumerable,dw=iw.splice,q2=d$?d$.isConcatSpreadable:c,Tx=d$?d$.iterator:c,T$=d$?d$.toStringTag:c,fw=function(){try{var Ft=I$(tv,"defineProperty");return Ft({},"",{}),Ft}catch{}}(),aE=z0.clearTimeout!==pv.clearTimeout&&z0.clearTimeout,sE=u1&&u1.now!==pv.Date.now&&u1.now,lE=z0.setTimeout!==pv.setTimeout&&z0.setTimeout,pw=xv.ceil,hw=xv.floor,Hw=tv.getOwnPropertySymbols,uE=lw?lw.isBuffer:c,K2=z0.isFinite,cE=iw.join,dE=Fy(tv.keys,tv),wv=xv.max,Dv=xv.min,fE=u1.now,pE=z0.parseInt,Y2=xv.random,hE=iw.reverse,Gw=I$(z0,"DataView"),Cx=I$(z0,"Map"),qw=I$(z0,"Promise"),q$=I$(z0,"Set"),Ox=I$(z0,"WeakMap"),Ax=I$(tv,"create"),mw=Ox&&new Ox,K$={},mE=P$(Gw),gE=P$(Cx),vE=P$(qw),yE=P$(q$),bE=P$(Ox),gw=d$?d$.prototype:c,Rx=gw?gw.valueOf:c,X2=gw?gw.toString:c;function Bo(Ft){if(uv(Ft)&&!A1(Ft)&&!(Ft instanceof V1)){if(Ft instanceof hy)return Ft;if(ev.call(Ft,"__wrapped__"))return Z_(Ft)}return new hy(Ft)}var Y$=function(){function Ft(){}return function(qt){if(!av(qt))return{};if(H2)return H2(qt);Ft.prototype=qt;var ir=new Ft;return Ft.prototype=c,ir}}();function vw(){}function hy(Ft,qt){this.__wrapped__=Ft,this.__actions__=[],this.__chain__=!!qt,this.__index__=0,this.__values__=c}Bo.templateSettings={escape:Q0,evaluate:l1,interpolate:e1,variable:"",imports:{_:Bo}},Bo.prototype=vw.prototype,Bo.prototype.constructor=Bo,hy.prototype=Y$(vw.prototype),hy.prototype.constructor=hy;function V1(Ft){this.__wrapped__=Ft,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zr,this.__views__=[]}function $E(){var Ft=new V1(this.__wrapped__);return Ft.__actions__=Zv(this.__actions__),Ft.__dir__=this.__dir__,Ft.__filtered__=this.__filtered__,Ft.__iteratees__=Zv(this.__iteratees__),Ft.__takeCount__=this.__takeCount__,Ft.__views__=Zv(this.__views__),Ft}function xE(){if(this.__filtered__){var Ft=new V1(this);Ft.__dir__=-1,Ft.__filtered__=!0}else Ft=this.clone(),Ft.__dir__*=-1;return Ft}function wE(){var Ft=this.__wrapped__.value(),qt=this.__dir__,ir=A1(Ft),qr=qt<0,Tn=ir?Ft.length:0,Xo=DT(0,Tn,this.__views__),u0=Xo.start,v0=Xo.end,O0=v0-u0,W0=qr?v0:u0-1,H0=this.__iteratees__,K0=H0.length,i1=0,g1=Dv(O0,this.__takeCount__);if(!ir||!qr&&Tn==O0&&g1==O0)return $_(Ft,this.__actions__);var S1=[];e:for(;O0--&&i1<g1;){W0+=qt;for(var M1=-1,E1=Ft[W0];++M1<K0;){var z1=H0[M1],H1=z1.iteratee,ay=z1.type,Wv=H1(E1);if(ay==Qo)E1=Wv;else if(!Wv){if(ay==n0)continue e;break e}}S1[i1++]=E1}return S1}V1.prototype=Y$(vw.prototype),V1.prototype.constructor=V1;function C$(Ft){var qt=-1,ir=Ft==null?0:Ft.length;for(this.clear();++qt<ir;){var qr=Ft[qt];this.set(qr[0],qr[1])}}function _E(){this.__data__=Ax?Ax(null):{},this.size=0}function SE(Ft){var qt=this.has(Ft)&&delete this.__data__[Ft];return this.size-=qt?1:0,qt}function EE(Ft){var qt=this.__data__;if(Ax){var ir=qt[Ft];return ir===vt?c:ir}return ev.call(qt,Ft)?qt[Ft]:c}function TE(Ft){var qt=this.__data__;return Ax?qt[Ft]!==c:ev.call(qt,Ft)}function CE(Ft,qt){var ir=this.__data__;return this.size+=this.has(Ft)?0:1,ir[Ft]=Ax&&qt===c?vt:qt,this}C$.prototype.clear=_E,C$.prototype.delete=SE,C$.prototype.get=EE,C$.prototype.has=TE,C$.prototype.set=CE;function Qy(Ft){var qt=-1,ir=Ft==null?0:Ft.length;for(this.clear();++qt<ir;){var qr=Ft[qt];this.set(qr[0],qr[1])}}function OE(){this.__data__=[],this.size=0}function AE(Ft){var qt=this.__data__,ir=yw(qt,Ft);if(ir<0)return!1;var qr=qt.length-1;return ir==qr?qt.pop():dw.call(qt,ir,1),--this.size,!0}function RE(Ft){var qt=this.__data__,ir=yw(qt,Ft);return ir<0?c:qt[ir][1]}function IE(Ft){return yw(this.__data__,Ft)>-1}function PE(Ft,qt){var ir=this.__data__,qr=yw(ir,Ft);return qr<0?(++this.size,ir.push([Ft,qt])):ir[qr][1]=qt,this}Qy.prototype.clear=OE,Qy.prototype.delete=AE,Qy.prototype.get=RE,Qy.prototype.has=IE,Qy.prototype.set=PE;function Jy(Ft){var qt=-1,ir=Ft==null?0:Ft.length;for(this.clear();++qt<ir;){var qr=Ft[qt];this.set(qr[0],qr[1])}}function kE(){this.size=0,this.__data__={hash:new C$,map:new(Cx||Qy),string:new C$}}function DE(Ft){var qt=Rw(this,Ft).delete(Ft);return this.size-=qt?1:0,qt}function ME(Ft){return Rw(this,Ft).get(Ft)}function NE(Ft){return Rw(this,Ft).has(Ft)}function LE(Ft,qt){var ir=Rw(this,Ft),qr=ir.size;return ir.set(Ft,qt),this.size+=ir.size==qr?0:1,this}Jy.prototype.clear=kE,Jy.prototype.delete=DE,Jy.prototype.get=ME,Jy.prototype.has=NE,Jy.prototype.set=LE;function O$(Ft){var qt=-1,ir=Ft==null?0:Ft.length;for(this.__data__=new Jy;++qt<ir;)this.add(Ft[qt])}function jE(Ft){return this.__data__.set(Ft,vt),this}function FE(Ft){return this.__data__.has(Ft)}O$.prototype.add=O$.prototype.push=jE,O$.prototype.has=FE;function Iy(Ft){var qt=this.__data__=new Qy(Ft);this.size=qt.size}function BE(){this.__data__=new Qy,this.size=0}function zE(Ft){var qt=this.__data__,ir=qt.delete(Ft);return this.size=qt.size,ir}function UE(Ft){return this.__data__.get(Ft)}function VE(Ft){return this.__data__.has(Ft)}function WE(Ft,qt){var ir=this.__data__;if(ir instanceof Qy){var qr=ir.__data__;if(!Cx||qr.length<et-1)return qr.push([Ft,qt]),this.size=++ir.size,this;ir=this.__data__=new Jy(qr)}return ir.set(Ft,qt),this.size=ir.size,this}Iy.prototype.clear=BE,Iy.prototype.delete=zE,Iy.prototype.get=UE,Iy.prototype.has=VE,Iy.prototype.set=WE;function Z2(Ft,qt){var ir=A1(Ft),qr=!ir&&k$(Ft),Tn=!ir&&!qr&&v$(Ft),Xo=!ir&&!qr&&!Tn&&J$(Ft),u0=ir||qr||Tn||Xo,v0=u0?W$(Ft.length,eE):[],O0=v0.length;for(var W0 in Ft)(qt||ev.call(Ft,W0))&&!(u0&&(W0=="length"||Tn&&(W0=="offset"||W0=="parent")||Xo&&(W0=="buffer"||W0=="byteLength"||W0=="byteOffset")||n$(W0,O0)))&&v0.push(W0);return v0}function Q2(Ft){var qt=Ft.length;return qt?Ft[i2(0,qt-1)]:c}function HE(Ft,qt){return Iw(Zv(Ft),A$(qt,0,Ft.length))}function GE(Ft){return Iw(Zv(Ft))}function Kw(Ft,qt,ir){(ir!==c&&!Py(Ft[qt],ir)||ir===c&&!(qt in Ft))&&e$(Ft,qt,ir)}function Ix(Ft,qt,ir){var qr=Ft[qt];(!(ev.call(Ft,qt)&&Py(qr,ir))||ir===c&&!(qt in Ft))&&e$(Ft,qt,ir)}function yw(Ft,qt){for(var ir=Ft.length;ir--;)if(Py(Ft[ir][0],qt))return ir;return-1}function qE(Ft,qt,ir,qr){return f$(Ft,function(Tn,Xo,u0){qt(qr,Tn,ir(Tn),u0)}),qr}function J2(Ft,qt){return Ft&&zy(qt,Tv(qt),Ft)}function KE(Ft,qt){return Ft&&zy(qt,Jv(qt),Ft)}function e$(Ft,qt,ir){qt=="__proto__"&&fw?fw(Ft,qt,{configurable:!0,enumerable:!0,value:ir,writable:!0}):Ft[qt]=ir}function Yw(Ft,qt){for(var ir=-1,qr=qt.length,Tn=N0(qr),Xo=Ft==null;++ir<qr;)Tn[ir]=Xo?c:A2(Ft,qt[ir]);return Tn}function A$(Ft,qt,ir){return Ft===Ft&&(ir!==c&&(Ft=Ft<=ir?Ft:ir),qt!==c&&(Ft=Ft>=qt?Ft:qt)),Ft}function my(Ft,qt,ir,qr,Tn,Xo){var u0,v0=qt&st,O0=qt&wt,W0=qt&Tt;if(ir&&(u0=Tn?ir(Ft,qr,Tn,Xo):ir(Ft)),u0!==c)return u0;if(!av(Ft))return Ft;var H0=A1(Ft);if(H0){if(u0=NT(Ft),!v0)return Zv(Ft,u0)}else{var K0=Mv(Ft),i1=K0==R0||K0==$0;if(v$(Ft))return __(Ft,v0);if(K0==C0||K0==_n||i1&&!Tn){if(u0=O0||i1?{}:U_(Ft),!v0)return O0?ET(Ft,KE(u0,Ft)):ST(Ft,J2(u0,Ft))}else{if(!j1[K0])return Tn?Ft:{};u0=LT(Ft,K0,v0)}}Xo||(Xo=new Iy);var g1=Xo.get(Ft);if(g1)return g1;Xo.set(Ft,u0),vS(Ft)?Ft.forEach(function(E1){u0.add(my(E1,qt,ir,E1,Ft,Xo))}):mS(Ft)&&Ft.forEach(function(E1,z1){u0.set(z1,my(E1,qt,ir,z1,Ft,Xo))});var S1=W0?O0?m2:h2:O0?Jv:Tv,M1=H0?c:S1(Ft);return zv(M1||Ft,function(E1,z1){M1&&(z1=E1,E1=Ft[z1]),Ix(u0,z1,my(E1,qt,ir,z1,Ft,Xo))}),u0}function YE(Ft){var qt=Tv(Ft);return function(ir){return e_(ir,Ft,qt)}}function e_(Ft,qt,ir){var qr=ir.length;if(Ft==null)return!qr;for(Ft=tv(Ft);qr--;){var Tn=ir[qr],Xo=qt[Tn],u0=Ft[Tn];if(u0===c&&!(Tn in Ft)||!Xo(u0))return!1}return!0}function t_(Ft,qt,ir){if(typeof Ft!="function")throw new py(at);return jx(function(){Ft.apply(c,ir)},qt)}function Px(Ft,qt,ir,qr){var Tn=-1,Xo=d1,u0=!0,v0=Ft.length,O0=[],W0=qt.length;if(!v0)return O0;ir&&(qt=J1(qt,xn(ir))),qr?(Xo=B$,u0=!1):qt.length>=et&&(Xo=s0,u0=!1,qt=new O$(qt));e:for(;++Tn<v0;){var H0=Ft[Tn],K0=ir==null?H0:ir(H0);if(H0=qr||H0!==0?H0:0,u0&&K0===K0){for(var i1=W0;i1--;)if(qt[i1]===K0)continue e;O0.push(H0)}else Xo(qt,K0,qr)||O0.push(H0)}return O0}var f$=O_(By),r_=O_(Zw,!0);function XE(Ft,qt){var ir=!0;return f$(Ft,function(qr,Tn,Xo){return ir=!!qt(qr,Tn,Xo),ir}),ir}function bw(Ft,qt,ir){for(var qr=-1,Tn=Ft.length;++qr<Tn;){var Xo=Ft[qr],u0=qt(Xo);if(u0!=null&&(v0===c?u0===u0&&!oy(u0):ir(u0,v0)))var v0=u0,O0=Xo}return O0}function ZE(Ft,qt,ir,qr){var Tn=Ft.length;for(ir=k1(ir),ir<0&&(ir=-ir>Tn?0:Tn+ir),qr=qr===c||qr>Tn?Tn:k1(qr),qr<0&&(qr+=Tn),qr=ir>qr?0:bS(qr);ir<qr;)Ft[ir++]=qt;return Ft}function n_(Ft,qt){var ir=[];return f$(Ft,function(qr,Tn,Xo){qt(qr,Tn,Xo)&&ir.push(qr)}),ir}function Av(Ft,qt,ir,qr,Tn){var Xo=-1,u0=Ft.length;for(ir||(ir=FT),Tn||(Tn=[]);++Xo<u0;){var v0=Ft[Xo];qt>0&&ir(v0)?qt>1?Av(v0,qt-1,ir,qr,Tn):ny(Tn,v0):qr||(Tn[Tn.length]=v0)}return Tn}var Xw=A_(),i_=A_(!0);function By(Ft,qt){return Ft&&Xw(Ft,qt,Tv)}function Zw(Ft,qt){return Ft&&i_(Ft,qt,Tv)}function $w(Ft,qt){return Ly(qt,function(ir){return i$(Ft[ir])})}function R$(Ft,qt){qt=m$(qt,Ft);for(var ir=0,qr=qt.length;Ft!=null&&ir<qr;)Ft=Ft[Uy(qt[ir++])];return ir&&ir==qr?Ft:c}function o_(Ft,qt,ir){var qr=qt(Ft);return A1(Ft)?qr:ny(qr,ir(Ft))}function Uv(Ft){return Ft==null?Ft===c?V0:M0:T$&&T$ in tv(Ft)?kT(Ft):GT(Ft)}function Qw(Ft,qt){return Ft>qt}function QE(Ft,qt){return Ft!=null&&ev.call(Ft,qt)}function JE(Ft,qt){return Ft!=null&&qt in tv(Ft)}function eT(Ft,qt,ir){return Ft>=Dv(qt,ir)&&Ft<wv(qt,ir)}function Jw(Ft,qt,ir){for(var qr=ir?B$:d1,Tn=Ft[0].length,Xo=Ft.length,u0=Xo,v0=N0(Xo),O0=1/0,W0=[];u0--;){var H0=Ft[u0];u0&&qt&&(H0=J1(H0,xn(qt))),O0=Dv(H0.length,O0),v0[u0]=!ir&&(qt||Tn>=120&&H0.length>=120)?new O$(u0&&H0):c}H0=Ft[0];var K0=-1,i1=v0[0];e:for(;++K0<Tn&&W0.length<O0;){var g1=H0[K0],S1=qt?qt(g1):g1;if(g1=ir||g1!==0?g1:0,!(i1?s0(i1,S1):qr(W0,S1,ir))){for(u0=Xo;--u0;){var M1=v0[u0];if(!(M1?s0(M1,S1):qr(Ft[u0],S1,ir)))continue e}i1&&i1.push(S1),W0.push(g1)}}return W0}function tT(Ft,qt,ir,qr){return By(Ft,function(Tn,Xo,u0){qt(qr,ir(Tn),Xo,u0)}),qr}function kx(Ft,qt,ir){qt=m$(qt,Ft),Ft=G_(Ft,qt);var qr=Ft==null?Ft:Ft[Uy(vy(qt))];return qr==null?c:Bv(qr,Ft,ir)}function a_(Ft){return uv(Ft)&&Uv(Ft)==_n}function rT(Ft){return uv(Ft)&&Uv(Ft)==r1}function nT(Ft){return uv(Ft)&&Uv(Ft)==p0}function Dx(Ft,qt,ir,qr,Tn){return Ft===qt?!0:Ft==null||qt==null||!uv(Ft)&&!uv(qt)?Ft!==Ft&&qt!==qt:iT(Ft,qt,ir,qr,Dx,Tn)}function iT(Ft,qt,ir,qr,Tn,Xo){var u0=A1(Ft),v0=A1(qt),O0=u0?i0:Mv(Ft),W0=v0?i0:Mv(qt);O0=O0==_n?C0:O0,W0=W0==_n?C0:W0;var H0=O0==C0,K0=W0==C0,i1=O0==W0;if(i1&&v$(Ft)){if(!v$(qt))return!1;u0=!0,H0=!1}if(i1&&!H0)return Xo||(Xo=new Iy),u0||J$(Ft)?F_(Ft,qt,ir,qr,Tn,Xo):IT(Ft,qt,O0,ir,qr,Tn,Xo);if(!(ir&Ct)){var g1=H0&&ev.call(Ft,"__wrapped__"),S1=K0&&ev.call(qt,"__wrapped__");if(g1||S1){var M1=g1?Ft.value():Ft,E1=S1?qt.value():qt;return Xo||(Xo=new Iy),Tn(M1,E1,ir,qr,Xo)}}return i1?(Xo||(Xo=new Iy),PT(Ft,qt,ir,qr,Tn,Xo)):!1}function oT(Ft){return uv(Ft)&&Mv(Ft)==f0}function e2(Ft,qt,ir,qr){var Tn=ir.length,Xo=Tn,u0=!qr;if(Ft==null)return!Xo;for(Ft=tv(Ft);Tn--;){var v0=ir[Tn];if(u0&&v0[2]?v0[1]!==Ft[v0[0]]:!(v0[0]in Ft))return!1}for(;++Tn<Xo;){v0=ir[Tn];var O0=v0[0],W0=Ft[O0],H0=v0[1];if(u0&&v0[2]){if(W0===c&&!(O0 in Ft))return!1}else{var K0=new Iy;if(qr)var i1=qr(W0,H0,O0,Ft,qt,K0);if(!(i1===c?Dx(H0,W0,Ct|jt,qr,K0):i1))return!1}}return!0}function s_(Ft){if(!av(Ft)||zT(Ft))return!1;var qt=i$(Ft)?oE:$y;return qt.test(P$(Ft))}function aT(Ft){return uv(Ft)&&Uv(Ft)==b0}function sT(Ft){return uv(Ft)&&Mv(Ft)==k0}function lT(Ft){return uv(Ft)&&Lw(Ft.length)&&!!a1[Uv(Ft)]}function l_(Ft){return typeof Ft=="function"?Ft:Ft==null?ey:typeof Ft=="object"?A1(Ft)?d_(Ft[0],Ft[1]):c_(Ft):RS(Ft)}function t2(Ft){if(!Lx(Ft))return dE(Ft);var qt=[];for(var ir in tv(Ft))ev.call(Ft,ir)&&ir!="constructor"&&qt.push(ir);return qt}function uT(Ft){if(!av(Ft))return HT(Ft);var qt=Lx(Ft),ir=[];for(var qr in Ft)qr=="constructor"&&(qt||!ev.call(Ft,qr))||ir.push(qr);return ir}function r2(Ft,qt){return Ft<qt}function u_(Ft,qt){var ir=-1,qr=Qv(Ft)?N0(Ft.length):[];return f$(Ft,function(Tn,Xo,u0){qr[++ir]=qt(Tn,Xo,u0)}),qr}function c_(Ft){var qt=v2(Ft);return qt.length==1&&qt[0][2]?W_(qt[0][0],qt[0][1]):function(ir){return ir===Ft||e2(ir,Ft,qt)}}function d_(Ft,qt){return b2(Ft)&&V_(qt)?W_(Uy(Ft),qt):function(ir){var qr=A2(ir,Ft);return qr===c&&qr===qt?R2(ir,Ft):Dx(qt,qr,Ct|jt)}}function xw(Ft,qt,ir,qr,Tn){Ft!==qt&&Xw(qt,function(Xo,u0){if(Tn||(Tn=new Iy),av(Xo))cT(Ft,qt,u0,ir,xw,qr,Tn);else{var v0=qr?qr(x2(Ft,u0),Xo,u0+"",Ft,qt,Tn):c;v0===c&&(v0=Xo),Kw(Ft,u0,v0)}},Jv)}function cT(Ft,qt,ir,qr,Tn,Xo,u0){var v0=x2(Ft,ir),O0=x2(qt,ir),W0=u0.get(O0);if(W0){Kw(Ft,ir,W0);return}var H0=Xo?Xo(v0,O0,ir+"",Ft,qt,u0):c,K0=H0===c;if(K0){var i1=A1(O0),g1=!i1&&v$(O0),S1=!i1&&!g1&&J$(O0);H0=O0,i1||g1||S1?A1(v0)?H0=v0:hv(v0)?H0=Zv(v0):g1?(K0=!1,H0=__(O0,!0)):S1?(K0=!1,H0=S_(O0,!0)):H0=[]:Fx(O0)||k$(O0)?(H0=v0,k$(v0)?H0=$S(v0):(!av(v0)||i$(v0))&&(H0=U_(O0))):K0=!1}K0&&(u0.set(O0,H0),Tn(H0,O0,qr,Xo,u0),u0.delete(O0)),Kw(Ft,ir,H0)}function f_(Ft,qt){var ir=Ft.length;if(ir)return qt+=qt<0?ir:0,n$(qt,ir)?Ft[qt]:c}function p_(Ft,qt,ir){qt.length?qt=J1(qt,function(Xo){return A1(Xo)?function(u0){return R$(u0,Xo.length===1?Xo[0]:Xo)}:Xo}):qt=[ey];var qr=-1;qt=J1(qt,xn(_1()));var Tn=u_(Ft,function(Xo,u0,v0){var O0=J1(qt,function(W0){return W0(Xo)});return{criteria:O0,index:++qr,value:Xo}});return Vw(Tn,function(Xo,u0){return _T(Xo,u0,ir)})}function dT(Ft,qt){return h_(Ft,qt,function(ir,qr){return R2(Ft,qr)})}function h_(Ft,qt,ir){for(var qr=-1,Tn=qt.length,Xo={};++qr<Tn;){var u0=qt[qr],v0=R$(Ft,u0);ir(v0,u0)&&Mx(Xo,m$(u0,Ft),v0)}return Xo}function fT(Ft){return function(qt){return R$(qt,Ft)}}function n2(Ft,qt,ir,qr){var Tn=qr?wx:jy,Xo=-1,u0=qt.length,v0=Ft;for(Ft===qt&&(qt=Zv(qt)),ir&&(v0=J1(Ft,xn(ir)));++Xo<u0;)for(var O0=0,W0=qt[Xo],H0=ir?ir(W0):W0;(O0=Tn(v0,H0,O0,qr))>-1;)v0!==Ft&&dw.call(v0,O0,1),dw.call(Ft,O0,1);return Ft}function m_(Ft,qt){for(var ir=Ft?qt.length:0,qr=ir-1;ir--;){var Tn=qt[ir];if(ir==qr||Tn!==Xo){var Xo=Tn;n$(Tn)?dw.call(Ft,Tn,1):s2(Ft,Tn)}}return Ft}function i2(Ft,qt){return Ft+hw(Y2()*(qt-Ft+1))}function pT(Ft,qt,ir,qr){for(var Tn=-1,Xo=wv(pw((qt-Ft)/(ir||1)),0),u0=N0(Xo);Xo--;)u0[qr?Xo:++Tn]=Ft,Ft+=ir;return u0}function o2(Ft,qt){var ir="";if(!Ft||qt<1||qt>e0)return ir;do qt%2&&(ir+=Ft),qt=hw(qt/2),qt&&(Ft+=Ft);while(qt);return ir}function F1(Ft,qt){return w2(H_(Ft,qt,ey),Ft+"")}function hT(Ft){return Q2(ex(Ft))}function mT(Ft,qt){var ir=ex(Ft);return Iw(ir,A$(qt,0,ir.length))}function Mx(Ft,qt,ir,qr){if(!av(Ft))return Ft;qt=m$(qt,Ft);for(var Tn=-1,Xo=qt.length,u0=Xo-1,v0=Ft;v0!=null&&++Tn<Xo;){var O0=Uy(qt[Tn]),W0=ir;if(O0==="__proto__"||O0==="constructor"||O0==="prototype")return Ft;if(Tn!=u0){var H0=v0[O0];W0=qr?qr(H0,O0,v0):c,W0===c&&(W0=av(H0)?H0:n$(qt[Tn+1])?[]:{})}Ix(v0,O0,W0),v0=v0[O0]}return Ft}var g_=mw?function(Ft,qt){return mw.set(Ft,qt),Ft}:ey,gT=fw?function(Ft,qt){return fw(Ft,"toString",{configurable:!0,enumerable:!1,value:P2(qt),writable:!0})}:ey;function vT(Ft){return Iw(ex(Ft))}function gy(Ft,qt,ir){var qr=-1,Tn=Ft.length;qt<0&&(qt=-qt>Tn?0:Tn+qt),ir=ir>Tn?Tn:ir,ir<0&&(ir+=Tn),Tn=qt>ir?0:ir-qt>>>0,qt>>>=0;for(var Xo=N0(Tn);++qr<Tn;)Xo[qr]=Ft[qr+qt];return Xo}function yT(Ft,qt){var ir;return f$(Ft,function(qr,Tn,Xo){return ir=qt(qr,Tn,Xo),!ir}),!!ir}function ww(Ft,qt,ir){var qr=0,Tn=Ft==null?qr:Ft.length;if(typeof qt=="number"&&qt===qt&&Tn<=r0){for(;qr<Tn;){var Xo=qr+Tn>>>1,u0=Ft[Xo];u0!==null&&!oy(u0)&&(ir?u0<=qt:u0<qt)?qr=Xo+1:Tn=Xo}return Tn}return a2(Ft,qt,ey,ir)}function a2(Ft,qt,ir,qr){var Tn=0,Xo=Ft==null?0:Ft.length;if(Xo===0)return 0;qt=ir(qt);for(var u0=qt!==qt,v0=qt===null,O0=oy(qt),W0=qt===c;Tn<Xo;){var H0=hw((Tn+Xo)/2),K0=ir(Ft[H0]),i1=K0!==c,g1=K0===null,S1=K0===K0,M1=oy(K0);if(u0)var E1=qr||S1;else W0?E1=S1&&(qr||i1):v0?E1=S1&&i1&&(qr||!g1):O0?E1=S1&&i1&&!g1&&(qr||!M1):g1||M1?E1=!1:E1=qr?K0<=qt:K0<qt;E1?Tn=H0+1:Xo=H0}return Dv(Xo,wn)}function v_(Ft,qt){for(var ir=-1,qr=Ft.length,Tn=0,Xo=[];++ir<qr;){var u0=Ft[ir],v0=qt?qt(u0):u0;if(!ir||!Py(v0,O0)){var O0=v0;Xo[Tn++]=u0===0?0:u0}}return Xo}function y_(Ft){return typeof Ft=="number"?Ft:oy(Ft)?In:+Ft}function iy(Ft){if(typeof Ft=="string")return Ft;if(A1(Ft))return J1(Ft,iy)+"";if(oy(Ft))return X2?X2.call(Ft):"";var qt=Ft+"";return qt=="0"&&1/Ft==-zo?"-0":qt}function p$(Ft,qt,ir){var qr=-1,Tn=d1,Xo=Ft.length,u0=!0,v0=[],O0=v0;if(ir)u0=!1,Tn=B$;else if(Xo>=et){var W0=qt?null:AT(Ft);if(W0)return nw(W0);u0=!1,Tn=s0,O0=new O$}else O0=qt?[]:v0;e:for(;++qr<Xo;){var H0=Ft[qr],K0=qt?qt(H0):H0;if(H0=ir||H0!==0?H0:0,u0&&K0===K0){for(var i1=O0.length;i1--;)if(O0[i1]===K0)continue e;qt&&O0.push(K0),v0.push(H0)}else Tn(O0,K0,ir)||(O0!==v0&&O0.push(K0),v0.push(H0))}return v0}function s2(Ft,qt){return qt=m$(qt,Ft),Ft=G_(Ft,qt),Ft==null||delete Ft[Uy(vy(qt))]}function b_(Ft,qt,ir,qr){return Mx(Ft,qt,ir(R$(Ft,qt)),qr)}function _w(Ft,qt,ir,qr){for(var Tn=Ft.length,Xo=qr?Tn:-1;(qr?Xo--:++Xo<Tn)&&qt(Ft[Xo],Xo,Ft););return ir?gy(Ft,qr?0:Xo,qr?Xo+1:Tn):gy(Ft,qr?Xo+1:0,qr?Tn:Xo)}function $_(Ft,qt){var ir=Ft;return ir instanceof V1&&(ir=ir.value()),Xv(qt,function(qr,Tn){return Tn.func.apply(Tn.thisArg,ny([qr],Tn.args))},ir)}function l2(Ft,qt,ir){var qr=Ft.length;if(qr<2)return qr?p$(Ft[0]):[];for(var Tn=-1,Xo=N0(qr);++Tn<qr;)for(var u0=Ft[Tn],v0=-1;++v0<qr;)v0!=Tn&&(Xo[Tn]=Px(Xo[Tn]||u0,Ft[v0],qt,ir));return p$(Av(Xo,1),qt,ir)}function x_(Ft,qt,ir){for(var qr=-1,Tn=Ft.length,Xo=qt.length,u0={};++qr<Tn;){var v0=qr<Xo?qt[qr]:c;ir(u0,Ft[qr],v0)}return u0}function u2(Ft){return hv(Ft)?Ft:[]}function c2(Ft){return typeof Ft=="function"?Ft:ey}function m$(Ft,qt){return A1(Ft)?Ft:b2(Ft,qt)?[Ft]:X_(Z1(Ft))}var bT=F1;function g$(Ft,qt,ir){var qr=Ft.length;return ir=ir===c?qr:ir,!qt&&ir>=qr?Ft:gy(Ft,qt,ir)}var w_=aE||function(Ft){return pv.clearTimeout(Ft)};function __(Ft,qt){if(qt)return Ft.slice();var ir=Ft.length,qr=W2?W2(ir):new Ft.constructor(ir);return Ft.copy(qr),qr}function d2(Ft){var qt=new Ft.constructor(Ft.byteLength);return new uw(qt).set(new uw(Ft)),qt}function $T(Ft,qt){var ir=qt?d2(Ft.buffer):Ft.buffer;return new Ft.constructor(ir,Ft.byteOffset,Ft.byteLength)}function xT(Ft){var qt=new Ft.constructor(Ft.source,ov.exec(Ft));return qt.lastIndex=Ft.lastIndex,qt}function wT(Ft){return Rx?tv(Rx.call(Ft)):{}}function S_(Ft,qt){var ir=qt?d2(Ft.buffer):Ft.buffer;return new Ft.constructor(ir,Ft.byteOffset,Ft.length)}function E_(Ft,qt){if(Ft!==qt){var ir=Ft!==c,qr=Ft===null,Tn=Ft===Ft,Xo=oy(Ft),u0=qt!==c,v0=qt===null,O0=qt===qt,W0=oy(qt);if(!v0&&!W0&&!Xo&&Ft>qt||Xo&&u0&&O0&&!v0&&!W0||qr&&u0&&O0||!ir&&O0||!Tn)return 1;if(!qr&&!Xo&&!W0&&Ft<qt||W0&&ir&&Tn&&!qr&&!Xo||v0&&ir&&Tn||!u0&&Tn||!O0)return-1}return 0}function _T(Ft,qt,ir){for(var qr=-1,Tn=Ft.criteria,Xo=qt.criteria,u0=Tn.length,v0=ir.length;++qr<u0;){var O0=E_(Tn[qr],Xo[qr]);if(O0){if(qr>=v0)return O0;var W0=ir[qr];return O0*(W0=="desc"?-1:1)}}return Ft.index-qt.index}function T_(Ft,qt,ir,qr){for(var Tn=-1,Xo=Ft.length,u0=ir.length,v0=-1,O0=qt.length,W0=wv(Xo-u0,0),H0=N0(O0+W0),K0=!qr;++v0<O0;)H0[v0]=qt[v0];for(;++Tn<u0;)(K0||Tn<Xo)&&(H0[ir[Tn]]=Ft[Tn]);for(;W0--;)H0[v0++]=Ft[Tn++];return H0}function C_(Ft,qt,ir,qr){for(var Tn=-1,Xo=Ft.length,u0=-1,v0=ir.length,O0=-1,W0=qt.length,H0=wv(Xo-v0,0),K0=N0(H0+W0),i1=!qr;++Tn<H0;)K0[Tn]=Ft[Tn];for(var g1=Tn;++O0<W0;)K0[g1+O0]=qt[O0];for(;++u0<v0;)(i1||Tn<Xo)&&(K0[g1+ir[u0]]=Ft[Tn++]);return K0}function Zv(Ft,qt){var ir=-1,qr=Ft.length;for(qt||(qt=N0(qr));++ir<qr;)qt[ir]=Ft[ir];return qt}function zy(Ft,qt,ir,qr){var Tn=!ir;ir||(ir={});for(var Xo=-1,u0=qt.length;++Xo<u0;){var v0=qt[Xo],O0=qr?qr(ir[v0],Ft[v0],v0,ir,Ft):c;O0===c&&(O0=Ft[v0]),Tn?e$(ir,v0,O0):Ix(ir,v0,O0)}return ir}function ST(Ft,qt){return zy(Ft,y2(Ft),qt)}function ET(Ft,qt){return zy(Ft,B_(Ft),qt)}function Sw(Ft,qt){return function(ir,qr){var Tn=A1(ir)?Jx:qE,Xo=qt?qt():{};return Tn(ir,Ft,_1(qr,2),Xo)}}function X$(Ft){return F1(function(qt,ir){var qr=-1,Tn=ir.length,Xo=Tn>1?ir[Tn-1]:c,u0=Tn>2?ir[2]:c;for(Xo=Ft.length>3&&typeof Xo=="function"?(Tn--,Xo):c,u0&&Vv(ir[0],ir[1],u0)&&(Xo=Tn<3?c:Xo,Tn=1),qt=tv(qt);++qr<Tn;){var v0=ir[qr];v0&&Ft(qt,v0,qr,Xo)}return qt})}function O_(Ft,qt){return function(ir,qr){if(ir==null)return ir;if(!Qv(ir))return Ft(ir,qr);for(var Tn=ir.length,Xo=qt?Tn:-1,u0=tv(ir);(qt?Xo--:++Xo<Tn)&&qr(u0[Xo],Xo,u0)!==!1;);return ir}}function A_(Ft){return function(qt,ir,qr){for(var Tn=-1,Xo=tv(qt),u0=qr(qt),v0=u0.length;v0--;){var O0=u0[Ft?v0:++Tn];if(ir(Xo[O0],O0,Xo)===!1)break}return qt}}function TT(Ft,qt,ir){var qr=qt&Lt,Tn=Nx(Ft);function Xo(){var u0=this&&this!==pv&&this instanceof Xo?Tn:Ft;return u0.apply(qr?ir:this,arguments)}return Xo}function R_(Ft){return function(qt){qt=Z1(qt);var ir=W1(qt)?Ry(qt):c,qr=ir?ir[0]:qt.charAt(0),Tn=ir?g$(ir,1).join(""):qt.slice(1);return qr[Ft]()+Tn}}function Z$(Ft){return function(qt){return Xv(OS(CS(qt).replace(q0,"")),Ft,"")}}function Nx(Ft){return function(){var qt=arguments;switch(qt.length){case 0:return new Ft;case 1:return new Ft(qt[0]);case 2:return new Ft(qt[0],qt[1]);case 3:return new Ft(qt[0],qt[1],qt[2]);case 4:return new Ft(qt[0],qt[1],qt[2],qt[3]);case 5:return new Ft(qt[0],qt[1],qt[2],qt[3],qt[4]);case 6:return new Ft(qt[0],qt[1],qt[2],qt[3],qt[4],qt[5]);case 7:return new Ft(qt[0],qt[1],qt[2],qt[3],qt[4],qt[5],qt[6])}var ir=Y$(Ft.prototype),qr=Ft.apply(ir,qt);return av(qr)?qr:ir}}function CT(Ft,qt,ir){var qr=Nx(Ft);function Tn(){for(var Xo=arguments.length,u0=N0(Xo),v0=Xo,O0=Q$(Tn);v0--;)u0[v0]=arguments[v0];var W0=Xo<3&&u0[0]!==O0&&u0[Xo-1]!==O0?[]:Ay(u0,O0);if(Xo-=W0.length,Xo<ir)return M_(Ft,qt,Ew,Tn.placeholder,c,u0,W0,c,c,ir-Xo);var H0=this&&this!==pv&&this instanceof Tn?qr:Ft;return Bv(H0,this,u0)}return Tn}function I_(Ft){return function(qt,ir,qr){var Tn=tv(qt);if(!Qv(qt)){var Xo=_1(ir,3);qt=Tv(qt),ir=function(v0){return Xo(Tn[v0],v0,Tn)}}var u0=Ft(qt,ir,qr);return u0>-1?Tn[Xo?qt[u0]:u0]:c}}function P_(Ft){return r$(function(qt){var ir=qt.length,qr=ir,Tn=hy.prototype.thru;for(Ft&&qt.reverse();qr--;){var Xo=qt[qr];if(typeof Xo!="function")throw new py(at);if(Tn&&!u0&&Aw(Xo)=="wrapper")var u0=new hy([],!0)}for(qr=u0?qr:ir;++qr<ir;){Xo=qt[qr];var v0=Aw(Xo),O0=v0=="wrapper"?g2(Xo):c;O0&&$2(O0[0])&&O0[1]==(jr|Kt|rr|Yr)&&!O0[4].length&&O0[9]==1?u0=u0[Aw(O0[0])].apply(u0,O0[3]):u0=Xo.length==1&&$2(Xo)?u0[v0]():u0.thru(Xo)}return function(){var W0=arguments,H0=W0[0];if(u0&&W0.length==1&&A1(H0))return u0.plant(H0).value();for(var K0=0,i1=ir?qt[K0].apply(this,W0):H0;++K0<ir;)i1=qt[K0].call(this,i1);return i1}})}function Ew(Ft,qt,ir,qr,Tn,Xo,u0,v0,O0,W0){var H0=qt&jr,K0=qt&Lt,i1=qt&Ht,g1=qt&(Kt|tr),S1=qt&An,M1=i1?c:Nx(Ft);function E1(){for(var z1=arguments.length,H1=N0(z1),ay=z1;ay--;)H1[ay]=arguments[ay];if(g1)var Wv=Q$(E1),sy=Y0(H1,Wv);if(qr&&(H1=T_(H1,qr,Tn,g1)),Xo&&(H1=C_(H1,Xo,u0,g1)),z1-=sy,g1&&z1<W0){var mv=Ay(H1,Wv);return M_(Ft,qt,Ew,E1.placeholder,ir,H1,mv,v0,O0,W0-z1)}var ky=K0?ir:this,a$=i1?ky[Ft]:Ft;return z1=H1.length,v0?H1=qT(H1,v0):S1&&z1>1&&H1.reverse(),H0&&O0<z1&&(H1.length=O0),this&&this!==pv&&this instanceof E1&&(a$=M1||Nx(a$)),a$.apply(ky,H1)}return E1}function k_(Ft,qt){return function(ir,qr){return tT(ir,Ft,qt(qr),{})}}function Tw(Ft,qt){return function(ir,qr){var Tn;if(ir===c&&qr===c)return qt;if(ir!==c&&(Tn=ir),qr!==c){if(Tn===c)return qr;typeof ir=="string"||typeof qr=="string"?(ir=iy(ir),qr=iy(qr)):(ir=y_(ir),qr=y_(qr)),Tn=Ft(ir,qr)}return Tn}}function f2(Ft){return r$(function(qt){return qt=J1(qt,xn(_1())),F1(function(ir){var qr=this;return Ft(qt,function(Tn){return Bv(Tn,qr,ir)})})})}function Cw(Ft,qt){qt=qt===c?" ":iy(qt);var ir=qt.length;if(ir<2)return ir?o2(qt,Ft):qt;var qr=o2(qt,pw(Ft/H$(qt)));return W1(qt)?g$(Ry(qr),0,Ft).join(""):qr.slice(0,Ft)}function OT(Ft,qt,ir,qr){var Tn=qt&Lt,Xo=Nx(Ft);function u0(){for(var v0=-1,O0=arguments.length,W0=-1,H0=qr.length,K0=N0(H0+O0),i1=this&&this!==pv&&this instanceof u0?Xo:Ft;++W0<H0;)K0[W0]=qr[W0];for(;O0--;)K0[W0++]=arguments[++v0];return Bv(i1,Tn?ir:this,K0)}return u0}function D_(Ft){return function(qt,ir,qr){return qr&&typeof qr!="number"&&Vv(qt,ir,qr)&&(ir=qr=c),qt=o$(qt),ir===c?(ir=qt,qt=0):ir=o$(ir),qr=qr===c?qt<ir?1:-1:o$(qr),pT(qt,ir,qr,Ft)}}function Ow(Ft){return function(qt,ir){return typeof qt=="string"&&typeof ir=="string"||(qt=yy(qt),ir=yy(ir)),Ft(qt,ir)}}function M_(Ft,qt,ir,qr,Tn,Xo,u0,v0,O0,W0){var H0=qt&Kt,K0=H0?u0:c,i1=H0?c:u0,g1=H0?Xo:c,S1=H0?c:Xo;qt|=H0?rr:Lr,qt&=~(H0?Lr:rr),qt&Gt||(qt&=~(Lt|Ht));var M1=[Ft,qt,Tn,g1,K0,S1,i1,v0,O0,W0],E1=ir.apply(c,M1);return $2(Ft)&&q_(E1,M1),E1.placeholder=qr,K_(E1,Ft,qt)}function p2(Ft){var qt=xv[Ft];return function(ir,qr){if(ir=yy(ir),qr=qr==null?0:Dv(k1(qr),292),qr&&K2(ir)){var Tn=(Z1(ir)+"e").split("e"),Xo=qt(Tn[0]+"e"+(+Tn[1]+qr));return Tn=(Z1(Xo)+"e").split("e"),+(Tn[0]+"e"+(+Tn[1]-qr))}return qt(ir)}}var AT=q$&&1/nw(new q$([,-0]))[1]==zo?function(Ft){return new q$(Ft)}:M2;function N_(Ft){return function(qt){var ir=Mv(qt);return ir==f0?U1(qt):ir==k0?GS(qt):or(qt,Ft(qt))}}function t$(Ft,qt,ir,qr,Tn,Xo,u0,v0){var O0=qt&Ht;if(!O0&&typeof Ft!="function")throw new py(at);var W0=qr?qr.length:0;if(W0||(qt&=~(rr|Lr),qr=Tn=c),u0=u0===c?u0:wv(k1(u0),0),v0=v0===c?v0:k1(v0),W0-=Tn?Tn.length:0,qt&Lr){var H0=qr,K0=Tn;qr=Tn=c}var i1=O0?c:g2(Ft),g1=[Ft,qt,ir,qr,Tn,H0,K0,Xo,u0,v0];if(i1&&WT(g1,i1),Ft=g1[0],qt=g1[1],ir=g1[2],qr=g1[3],Tn=g1[4],v0=g1[9]=g1[9]===c?O0?0:Ft.length:wv(g1[9]-W0,0),!v0&&qt&(Kt|tr)&&(qt&=~(Kt|tr)),!qt||qt==Lt)var S1=TT(Ft,qt,ir);else qt==Kt||qt==tr?S1=CT(Ft,qt,v0):(qt==rr||qt==(Lt|rr))&&!Tn.length?S1=OT(Ft,qt,ir,qr):S1=Ew.apply(c,g1);var M1=i1?g_:q_;return K_(M1(S1,g1),Ft,qt)}function L_(Ft,qt,ir,qr){return Ft===c||Py(Ft,G$[ir])&&!ev.call(qr,ir)?qt:Ft}function j_(Ft,qt,ir,qr,Tn,Xo){return av(Ft)&&av(qt)&&(Xo.set(qt,Ft),xw(Ft,qt,c,j_,Xo),Xo.delete(qt)),Ft}function RT(Ft){return Fx(Ft)?c:Ft}function F_(Ft,qt,ir,qr,Tn,Xo){var u0=ir&Ct,v0=Ft.length,O0=qt.length;if(v0!=O0&&!(u0&&O0>v0))return!1;var W0=Xo.get(Ft),H0=Xo.get(qt);if(W0&&H0)return W0==qt&&H0==Ft;var K0=-1,i1=!0,g1=ir&jt?new O$:c;for(Xo.set(Ft,qt),Xo.set(qt,Ft);++K0<v0;){var S1=Ft[K0],M1=qt[K0];if(qr)var E1=u0?qr(M1,S1,K0,qt,Ft,Xo):qr(S1,M1,K0,Ft,qt,Xo);if(E1!==c){if(E1)continue;i1=!1;break}if(g1){if(!z$(qt,function(z1,H1){if(!s0(g1,H1)&&(S1===z1||Tn(S1,z1,ir,qr,Xo)))return g1.push(H1)})){i1=!1;break}}else if(!(S1===M1||Tn(S1,M1,ir,qr,Xo))){i1=!1;break}}return Xo.delete(Ft),Xo.delete(qt),i1}function IT(Ft,qt,ir,qr,Tn,Xo,u0){switch(ir){case I1:if(Ft.byteLength!=qt.byteLength||Ft.byteOffset!=qt.byteOffset)return!1;Ft=Ft.buffer,qt=qt.buffer;case r1:return!(Ft.byteLength!=qt.byteLength||!Xo(new uw(Ft),new uw(qt)));case m0:case p0:case P0:return Py(+Ft,+qt);case S0:return Ft.name==qt.name&&Ft.message==qt.message;case b0:case d0:return Ft==qt+"";case f0:var v0=U1;case k0:var O0=qr&Ct;if(v0||(v0=nw),Ft.size!=qt.size&&!O0)return!1;var W0=u0.get(Ft);if(W0)return W0==qt;qr|=jt,u0.set(Ft,qt);var H0=F_(v0(Ft),v0(qt),qr,Tn,Xo,u0);return u0.delete(Ft),H0;case E0:if(Rx)return Rx.call(Ft)==Rx.call(qt)}return!1}function PT(Ft,qt,ir,qr,Tn,Xo){var u0=ir&Ct,v0=h2(Ft),O0=v0.length,W0=h2(qt),H0=W0.length;if(O0!=H0&&!u0)return!1;for(var K0=O0;K0--;){var i1=v0[K0];if(!(u0?i1 in qt:ev.call(qt,i1)))return!1}var g1=Xo.get(Ft),S1=Xo.get(qt);if(g1&&S1)return g1==qt&&S1==Ft;var M1=!0;Xo.set(Ft,qt),Xo.set(qt,Ft);for(var E1=u0;++K0<O0;){i1=v0[K0];var z1=Ft[i1],H1=qt[i1];if(qr)var ay=u0?qr(H1,z1,i1,qt,Ft,Xo):qr(z1,H1,i1,Ft,qt,Xo);if(!(ay===c?z1===H1||Tn(z1,H1,ir,qr,Xo):ay)){M1=!1;break}E1||(E1=i1=="constructor")}if(M1&&!E1){var Wv=Ft.constructor,sy=qt.constructor;Wv!=sy&&"constructor"in Ft&&"constructor"in qt&&!(typeof Wv=="function"&&Wv instanceof Wv&&typeof sy=="function"&&sy instanceof sy)&&(M1=!1)}return Xo.delete(Ft),Xo.delete(qt),M1}function r$(Ft){return w2(H_(Ft,c,eS),Ft+"")}function h2(Ft){return o_(Ft,Tv,y2)}function m2(Ft){return o_(Ft,Jv,B_)}var g2=mw?function(Ft){return mw.get(Ft)}:M2;function Aw(Ft){for(var qt=Ft.name+"",ir=K$[qt],qr=ev.call(K$,qt)?ir.length:0;qr--;){var Tn=ir[qr],Xo=Tn.func;if(Xo==null||Xo==Ft)return Tn.name}return qt}function Q$(Ft){var qt=ev.call(Bo,"placeholder")?Bo:Ft;return qt.placeholder}function _1(){var Ft=Bo.iteratee||k2;return Ft=Ft===k2?l_:Ft,arguments.length?Ft(arguments[0],arguments[1]):Ft}function Rw(Ft,qt){var ir=Ft.__data__;return BT(qt)?ir[typeof qt=="string"?"string":"hash"]:ir.map}function v2(Ft){for(var qt=Tv(Ft),ir=qt.length;ir--;){var qr=qt[ir],Tn=Ft[qr];qt[ir]=[qr,Tn,V_(Tn)]}return qt}function I$(Ft,qt){var ir=Y1(Ft,qt);return s_(ir)?ir:c}function kT(Ft){var qt=ev.call(Ft,T$),ir=Ft[T$];try{Ft[T$]=c;var qr=!0}catch{}var Tn=sw.call(Ft);return qr&&(qt?Ft[T$]=ir:delete Ft[T$]),Tn}var y2=Hw?function(Ft){return Ft==null?[]:(Ft=tv(Ft),Ly(Hw(Ft),function(qt){return G2.call(Ft,qt)}))}:N2,B_=Hw?function(Ft){for(var qt=[];Ft;)ny(qt,y2(Ft)),Ft=cw(Ft);return qt}:N2,Mv=Uv;(Gw&&Mv(new Gw(new ArrayBuffer(1)))!=I1||Cx&&Mv(new Cx)!=f0||qw&&Mv(qw.resolve())!=Uo||q$&&Mv(new q$)!=k0||Ox&&Mv(new Ox)!=Z0)&&(Mv=function(Ft){var qt=Uv(Ft),ir=qt==C0?Ft.constructor:c,qr=ir?P$(ir):"";if(qr)switch(qr){case mE:return I1;case gE:return f0;case vE:return Uo;case yE:return k0;case bE:return Z0}return qt});function DT(Ft,qt,ir){for(var qr=-1,Tn=ir.length;++qr<Tn;){var Xo=ir[qr],u0=Xo.size;switch(Xo.type){case"drop":Ft+=u0;break;case"dropRight":qt-=u0;break;case"take":qt=Dv(qt,Ft+u0);break;case"takeRight":Ft=wv(Ft,qt-u0);break}}return{start:Ft,end:qt}}function MT(Ft){var qt=Ft.match(D1);return qt?qt[1].split(K1):[]}function z_(Ft,qt,ir){qt=m$(qt,Ft);for(var qr=-1,Tn=qt.length,Xo=!1;++qr<Tn;){var u0=Uy(qt[qr]);if(!(Xo=Ft!=null&&ir(Ft,u0)))break;Ft=Ft[u0]}return Xo||++qr!=Tn?Xo:(Tn=Ft==null?0:Ft.length,!!Tn&&Lw(Tn)&&n$(u0,Tn)&&(A1(Ft)||k$(Ft)))}function NT(Ft){var qt=Ft.length,ir=new Ft.constructor(qt);return qt&&typeof Ft[0]=="string"&&ev.call(Ft,"index")&&(ir.index=Ft.index,ir.input=Ft.input),ir}function U_(Ft){return typeof Ft.constructor=="function"&&!Lx(Ft)?Y$(cw(Ft)):{}}function LT(Ft,qt,ir){var qr=Ft.constructor;switch(qt){case r1:return d2(Ft);case m0:case p0:return new qr(+Ft);case I1:return $T(Ft,ir);case f1:case q1:case c1:case B1:case nv:case iv:case t1:case dv:case $1:return S_(Ft,ir);case f0:return new qr;case P0:case d0:return new qr(Ft);case b0:return xT(Ft);case k0:return new qr;case E0:return wT(Ft)}}function jT(Ft,qt){var ir=qt.length;if(!ir)return Ft;var qr=ir-1;return qt[qr]=(ir>1?"& ":"")+qt[qr],qt=qt.join(ir>2?", ":" "),Ft.replace(R1,`{
/* [wrapped with `+qt+`] */
`)}function FT(Ft){return A1(Ft)||k$(Ft)||!!(q2&&Ft&&Ft[q2])}function n$(Ft,qt){var ir=typeof Ft;return qt=qt??e0,!!qt&&(ir=="number"||ir!="symbol"&&Cv.test(Ft))&&Ft>-1&&Ft%1==0&&Ft<qt}function Vv(Ft,qt,ir){if(!av(ir))return!1;var qr=typeof qt;return(qr=="number"?Qv(ir)&&n$(qt,ir.length):qr=="string"&&qt in ir)?Py(ir[qt],Ft):!1}function b2(Ft,qt){if(A1(Ft))return!1;var ir=typeof Ft;return ir=="number"||ir=="symbol"||ir=="boolean"||Ft==null||oy(Ft)?!0:T1.test(Ft)||!m1.test(Ft)||qt!=null&&Ft in tv(qt)}function BT(Ft){var qt=typeof Ft;return qt=="string"||qt=="number"||qt=="symbol"||qt=="boolean"?Ft!=="__proto__":Ft===null}function $2(Ft){var qt=Aw(Ft),ir=Bo[qt];if(typeof ir!="function"||!(qt in V1.prototype))return!1;if(Ft===ir)return!0;var qr=g2(ir);return!!qr&&Ft===qr[0]}function zT(Ft){return!!V2&&V2 in Ft}var UT=ow?i$:L2;function Lx(Ft){var qt=Ft&&Ft.constructor,ir=typeof qt=="function"&&qt.prototype||G$;return Ft===ir}function V_(Ft){return Ft===Ft&&!av(Ft)}function W_(Ft,qt){return function(ir){return ir==null?!1:ir[Ft]===qt&&(qt!==c||Ft in tv(ir))}}function VT(Ft){var qt=Mw(Ft,function(qr){return ir.size===b&&ir.clear(),qr}),ir=qt.cache;return qt}function WT(Ft,qt){var ir=Ft[1],qr=qt[1],Tn=ir|qr,Xo=Tn<(Lt|Ht|jr),u0=qr==jr&&ir==Kt||qr==jr&&ir==Yr&&Ft[7].length<=qt[8]||qr==(jr|Yr)&&qt[7].length<=qt[8]&&ir==Kt;if(!(Xo||u0))return Ft;qr&Lt&&(Ft[2]=qt[2],Tn|=ir&Lt?0:Gt);var v0=qt[3];if(v0){var O0=Ft[3];Ft[3]=O0?T_(O0,v0,qt[4]):v0,Ft[4]=O0?Ay(Ft[3],pt):qt[4]}return v0=qt[5],v0&&(O0=Ft[5],Ft[5]=O0?C_(O0,v0,qt[6]):v0,Ft[6]=O0?Ay(Ft[5],pt):qt[6]),v0=qt[7],v0&&(Ft[7]=v0),qr&jr&&(Ft[8]=Ft[8]==null?qt[8]:Dv(Ft[8],qt[8])),Ft[9]==null&&(Ft[9]=qt[9]),Ft[0]=qt[0],Ft[1]=Tn,Ft}function HT(Ft){var qt=[];if(Ft!=null)for(var ir in tv(Ft))qt.push(ir);return qt}function GT(Ft){return sw.call(Ft)}function H_(Ft,qt,ir){return qt=wv(qt===c?Ft.length-1:qt,0),function(){for(var qr=arguments,Tn=-1,Xo=wv(qr.length-qt,0),u0=N0(Xo);++Tn<Xo;)u0[Tn]=qr[qt+Tn];Tn=-1;for(var v0=N0(qt+1);++Tn<qt;)v0[Tn]=qr[Tn];return v0[qt]=ir(u0),Bv(Ft,this,v0)}}function G_(Ft,qt){return qt.length<2?Ft:R$(Ft,gy(qt,0,-1))}function qT(Ft,qt){for(var ir=Ft.length,qr=Dv(qt.length,ir),Tn=Zv(Ft);qr--;){var Xo=qt[qr];Ft[qr]=n$(Xo,ir)?Tn[Xo]:c}return Ft}function x2(Ft,qt){if(!(qt==="constructor"&&typeof Ft[qt]=="function")&&qt!="__proto__")return Ft[qt]}var q_=Y_(g_),jx=lE||function(Ft,qt){return pv.setTimeout(Ft,qt)},w2=Y_(gT);function K_(Ft,qt,ir){var qr=qt+"";return w2(Ft,jT(qr,KT(MT(qr),ir)))}function Y_(Ft){var qt=0,ir=0;return function(){var qr=fE(),Tn=c0-(qr-ir);if(ir=qr,Tn>0){if(++qt>=t0)return arguments[0]}else qt=0;return Ft.apply(c,arguments)}}function Iw(Ft,qt){var ir=-1,qr=Ft.length,Tn=qr-1;for(qt=qt===c?qr:qt;++ir<qt;){var Xo=i2(ir,Tn),u0=Ft[Xo];Ft[Xo]=Ft[ir],Ft[ir]=u0}return Ft.length=qt,Ft}var X_=VT(function(Ft){var qt=[];return Ft.charCodeAt(0)===46&&qt.push(""),Ft.replace(G1,function(ir,qr,Tn,Xo){qt.push(Tn?Xo.replace(gv,"$1"):qr||ir)}),qt});function Uy(Ft){if(typeof Ft=="string"||oy(Ft))return Ft;var qt=Ft+"";return qt=="0"&&1/Ft==-zo?"-0":qt}function P$(Ft){if(Ft!=null){try{return aw.call(Ft)}catch{}try{return Ft+""}catch{}}return""}function KT(Ft,qt){return zv(ko,function(ir){var qr="_."+ir[0];qt&ir[1]&&!d1(Ft,qr)&&Ft.push(qr)}),Ft.sort()}function Z_(Ft){if(Ft instanceof V1)return Ft.clone();var qt=new hy(Ft.__wrapped__,Ft.__chain__);return qt.__actions__=Zv(Ft.__actions__),qt.__index__=Ft.__index__,qt.__values__=Ft.__values__,qt}function YT(Ft,qt,ir){(ir?Vv(Ft,qt,ir):qt===c)?qt=1:qt=wv(k1(qt),0);var qr=Ft==null?0:Ft.length;if(!qr||qt<1)return[];for(var Tn=0,Xo=0,u0=N0(pw(qr/qt));Tn<qr;)u0[Xo++]=gy(Ft,Tn,Tn+=qt);return u0}function XT(Ft){for(var qt=-1,ir=Ft==null?0:Ft.length,qr=0,Tn=[];++qt<ir;){var Xo=Ft[qt];Xo&&(Tn[qr++]=Xo)}return Tn}function ZT(){var Ft=arguments.length;if(!Ft)return[];for(var qt=N0(Ft-1),ir=arguments[0],qr=Ft;qr--;)qt[qr-1]=arguments[qr];return ny(A1(ir)?Zv(ir):[ir],Av(qt,1))}var QT=F1(function(Ft,qt){return hv(Ft)?Px(Ft,Av(qt,1,hv,!0)):[]}),JT=F1(function(Ft,qt){var ir=vy(qt);return hv(ir)&&(ir=c),hv(Ft)?Px(Ft,Av(qt,1,hv,!0),_1(ir,2)):[]}),e3=F1(function(Ft,qt){var ir=vy(qt);return hv(ir)&&(ir=c),hv(Ft)?Px(Ft,Av(qt,1,hv,!0),c,ir):[]});function t3(Ft,qt,ir){var qr=Ft==null?0:Ft.length;return qr?(qt=ir||qt===c?1:k1(qt),gy(Ft,qt<0?0:qt,qr)):[]}function r3(Ft,qt,ir){var qr=Ft==null?0:Ft.length;return qr?(qt=ir||qt===c?1:k1(qt),qt=qr-qt,gy(Ft,0,qt<0?0:qt)):[]}function n3(Ft,qt){return Ft&&Ft.length?_w(Ft,_1(qt,3),!0,!0):[]}function i3(Ft,qt){return Ft&&Ft.length?_w(Ft,_1(qt,3),!0):[]}function o3(Ft,qt,ir,qr){var Tn=Ft==null?0:Ft.length;return Tn?(ir&&typeof ir!="number"&&Vv(Ft,qt,ir)&&(ir=0,qr=Tn),ZE(Ft,qt,ir,qr)):[]}function Q_(Ft,qt,ir){var qr=Ft==null?0:Ft.length;if(!qr)return-1;var Tn=ir==null?0:k1(ir);return Tn<0&&(Tn=wv(qr+Tn,0)),Zy(Ft,_1(qt,3),Tn)}function J_(Ft,qt,ir){var qr=Ft==null?0:Ft.length;if(!qr)return-1;var Tn=qr-1;return ir!==c&&(Tn=k1(ir),Tn=ir<0?wv(qr+Tn,0):Dv(Tn,qr-1)),Zy(Ft,_1(qt,3),Tn,!0)}function eS(Ft){var qt=Ft==null?0:Ft.length;return qt?Av(Ft,1):[]}function a3(Ft){var qt=Ft==null?0:Ft.length;return qt?Av(Ft,zo):[]}function s3(Ft,qt){var ir=Ft==null?0:Ft.length;return ir?(qt=qt===c?1:k1(qt),Av(Ft,qt)):[]}function l3(Ft){for(var qt=-1,ir=Ft==null?0:Ft.length,qr={};++qt<ir;){var Tn=Ft[qt];qr[Tn[0]]=Tn[1]}return qr}function tS(Ft){return Ft&&Ft.length?Ft[0]:c}function u3(Ft,qt,ir){var qr=Ft==null?0:Ft.length;if(!qr)return-1;var Tn=ir==null?0:k1(ir);return Tn<0&&(Tn=wv(qr+Tn,0)),jy(Ft,qt,Tn)}function c3(Ft){var qt=Ft==null?0:Ft.length;return qt?gy(Ft,0,-1):[]}var d3=F1(function(Ft){var qt=J1(Ft,u2);return qt.length&&qt[0]===Ft[0]?Jw(qt):[]}),f3=F1(function(Ft){var qt=vy(Ft),ir=J1(Ft,u2);return qt===vy(ir)?qt=c:ir.pop(),ir.length&&ir[0]===Ft[0]?Jw(ir,_1(qt,2)):[]}),p3=F1(function(Ft){var qt=vy(Ft),ir=J1(Ft,u2);return qt=typeof qt=="function"?qt:c,qt&&ir.pop(),ir.length&&ir[0]===Ft[0]?Jw(ir,c,qt):[]});function h3(Ft,qt){return Ft==null?"":cE.call(Ft,qt)}function vy(Ft){var qt=Ft==null?0:Ft.length;return qt?Ft[qt-1]:c}function m3(Ft,qt,ir){var qr=Ft==null?0:Ft.length;if(!qr)return-1;var Tn=qr;return ir!==c&&(Tn=k1(ir),Tn=Tn<0?wv(qr+Tn,0):Dv(Tn,qr-1)),qt===qt?KS(Ft,qt,Tn):Zy(Ft,_x,Tn,!0)}function g3(Ft,qt){return Ft&&Ft.length?f_(Ft,k1(qt)):c}var v3=F1(rS);function rS(Ft,qt){return Ft&&Ft.length&&qt&&qt.length?n2(Ft,qt):Ft}function y3(Ft,qt,ir){return Ft&&Ft.length&&qt&&qt.length?n2(Ft,qt,_1(ir,2)):Ft}function b3(Ft,qt,ir){return Ft&&Ft.length&&qt&&qt.length?n2(Ft,qt,c,ir):Ft}var $3=r$(function(Ft,qt){var ir=Ft==null?0:Ft.length,qr=Yw(Ft,qt);return m_(Ft,J1(qt,function(Tn){return n$(Tn,ir)?+Tn:Tn}).sort(E_)),qr});function x3(Ft,qt){var ir=[];if(!(Ft&&Ft.length))return ir;var qr=-1,Tn=[],Xo=Ft.length;for(qt=_1(qt,3);++qr<Xo;){var u0=Ft[qr];qt(u0,qr,Ft)&&(ir.push(u0),Tn.push(qr))}return m_(Ft,Tn),ir}function _2(Ft){return Ft==null?Ft:hE.call(Ft)}function w3(Ft,qt,ir){var qr=Ft==null?0:Ft.length;return qr?(ir&&typeof ir!="number"&&Vv(Ft,qt,ir)?(qt=0,ir=qr):(qt=qt==null?0:k1(qt),ir=ir===c?qr:k1(ir)),gy(Ft,qt,ir)):[]}function _3(Ft,qt){return ww(Ft,qt)}function S3(Ft,qt,ir){return a2(Ft,qt,_1(ir,2))}function E3(Ft,qt){var ir=Ft==null?0:Ft.length;if(ir){var qr=ww(Ft,qt);if(qr<ir&&Py(Ft[qr],qt))return qr}return-1}function T3(Ft,qt){return ww(Ft,qt,!0)}function C3(Ft,qt,ir){return a2(Ft,qt,_1(ir,2),!0)}function O3(Ft,qt){var ir=Ft==null?0:Ft.length;if(ir){var qr=ww(Ft,qt,!0)-1;if(Py(Ft[qr],qt))return qr}return-1}function A3(Ft){return Ft&&Ft.length?v_(Ft):[]}function R3(Ft,qt){return Ft&&Ft.length?v_(Ft,_1(qt,2)):[]}function I3(Ft){var qt=Ft==null?0:Ft.length;return qt?gy(Ft,1,qt):[]}function P3(Ft,qt,ir){return Ft&&Ft.length?(qt=ir||qt===c?1:k1(qt),gy(Ft,0,qt<0?0:qt)):[]}function k3(Ft,qt,ir){var qr=Ft==null?0:Ft.length;return qr?(qt=ir||qt===c?1:k1(qt),qt=qr-qt,gy(Ft,qt<0?0:qt,qr)):[]}function D3(Ft,qt){return Ft&&Ft.length?_w(Ft,_1(qt,3),!1,!0):[]}function M3(Ft,qt){return Ft&&Ft.length?_w(Ft,_1(qt,3)):[]}var N3=F1(function(Ft){return p$(Av(Ft,1,hv,!0))}),L3=F1(function(Ft){var qt=vy(Ft);return hv(qt)&&(qt=c),p$(Av(Ft,1,hv,!0),_1(qt,2))}),j3=F1(function(Ft){var qt=vy(Ft);return qt=typeof qt=="function"?qt:c,p$(Av(Ft,1,hv,!0),c,qt)});function F3(Ft){return Ft&&Ft.length?p$(Ft):[]}function B3(Ft,qt){return Ft&&Ft.length?p$(Ft,_1(qt,2)):[]}function z3(Ft,qt){return qt=typeof qt=="function"?qt:c,Ft&&Ft.length?p$(Ft,c,qt):[]}function S2(Ft){if(!(Ft&&Ft.length))return[];var qt=0;return Ft=Ly(Ft,function(ir){if(hv(ir))return qt=wv(ir.length,qt),!0}),W$(qt,function(ir){return J1(Ft,U$(ir))})}function nS(Ft,qt){if(!(Ft&&Ft.length))return[];var ir=S2(Ft);return qt==null?ir:J1(ir,function(qr){return Bv(qt,c,qr)})}var U3=F1(function(Ft,qt){return hv(Ft)?Px(Ft,qt):[]}),V3=F1(function(Ft){return l2(Ly(Ft,hv))}),W3=F1(function(Ft){var qt=vy(Ft);return hv(qt)&&(qt=c),l2(Ly(Ft,hv),_1(qt,2))}),H3=F1(function(Ft){var qt=vy(Ft);return qt=typeof qt=="function"?qt:c,l2(Ly(Ft,hv),c,qt)}),G3=F1(S2);function q3(Ft,qt){return x_(Ft||[],qt||[],Ix)}function K3(Ft,qt){return x_(Ft||[],qt||[],Mx)}var Y3=F1(function(Ft){var qt=Ft.length,ir=qt>1?Ft[qt-1]:c;return ir=typeof ir=="function"?(Ft.pop(),ir):c,nS(Ft,ir)});function iS(Ft){var qt=Bo(Ft);return qt.__chain__=!0,qt}function X3(Ft,qt){return qt(Ft),Ft}function Pw(Ft,qt){return qt(Ft)}var Z3=r$(function(Ft){var qt=Ft.length,ir=qt?Ft[0]:0,qr=this.__wrapped__,Tn=function(Xo){return Yw(Xo,Ft)};return qt>1||this.__actions__.length||!(qr instanceof V1)||!n$(ir)?this.thru(Tn):(qr=qr.slice(ir,+ir+(qt?1:0)),qr.__actions__.push({func:Pw,args:[Tn],thisArg:c}),new hy(qr,this.__chain__).thru(function(Xo){return qt&&!Xo.length&&Xo.push(c),Xo}))});function Q3(){return iS(this)}function J3(){return new hy(this.value(),this.__chain__)}function eC(){this.__values__===c&&(this.__values__=yS(this.value()));var Ft=this.__index__>=this.__values__.length,qt=Ft?c:this.__values__[this.__index__++];return{done:Ft,value:qt}}function tC(){return this}function rC(Ft){for(var qt,ir=this;ir instanceof vw;){var qr=Z_(ir);qr.__index__=0,qr.__values__=c,qt?Tn.__wrapped__=qr:qt=qr;var Tn=qr;ir=ir.__wrapped__}return Tn.__wrapped__=Ft,qt}function nC(){var Ft=this.__wrapped__;if(Ft instanceof V1){var qt=Ft;return this.__actions__.length&&(qt=new V1(this)),qt=qt.reverse(),qt.__actions__.push({func:Pw,args:[_2],thisArg:c}),new hy(qt,this.__chain__)}return this.thru(_2)}function iC(){return $_(this.__wrapped__,this.__actions__)}var oC=Sw(function(Ft,qt,ir){ev.call(Ft,ir)?++Ft[ir]:e$(Ft,ir,1)});function aC(Ft,qt,ir){var qr=A1(Ft)?ew:XE;return ir&&Vv(Ft,qt,ir)&&(qt=c),qr(Ft,_1(qt,3))}function sC(Ft,qt){var ir=A1(Ft)?Ly:n_;return ir(Ft,_1(qt,3))}var lC=I_(Q_),uC=I_(J_);function cC(Ft,qt){return Av(kw(Ft,qt),1)}function dC(Ft,qt){return Av(kw(Ft,qt),zo)}function fC(Ft,qt,ir){return ir=ir===c?1:k1(ir),Av(kw(Ft,qt),ir)}function oS(Ft,qt){var ir=A1(Ft)?zv:f$;return ir(Ft,_1(qt,3))}function aS(Ft,qt){var ir=A1(Ft)?F$:r_;return ir(Ft,_1(qt,3))}var pC=Sw(function(Ft,qt,ir){ev.call(Ft,ir)?Ft[ir].push(qt):e$(Ft,ir,[qt])});function hC(Ft,qt,ir,qr){Ft=Qv(Ft)?Ft:ex(Ft),ir=ir&&!qr?k1(ir):0;var Tn=Ft.length;return ir<0&&(ir=wv(Tn+ir,0)),jw(Ft)?ir<=Tn&&Ft.indexOf(qt,ir)>-1:!!Tn&&jy(Ft,qt,ir)>-1}var mC=F1(function(Ft,qt,ir){var qr=-1,Tn=typeof qt=="function",Xo=Qv(Ft)?N0(Ft.length):[];return f$(Ft,function(u0){Xo[++qr]=Tn?Bv(qt,u0,ir):kx(u0,qt,ir)}),Xo}),gC=Sw(function(Ft,qt,ir){e$(Ft,ir,qt)});function kw(Ft,qt){var ir=A1(Ft)?J1:u_;return ir(Ft,_1(qt,3))}function vC(Ft,qt,ir,qr){return Ft==null?[]:(A1(qt)||(qt=qt==null?[]:[qt]),ir=qr?c:ir,A1(ir)||(ir=ir==null?[]:[ir]),p_(Ft,qt,ir))}var yC=Sw(function(Ft,qt,ir){Ft[ir?0:1].push(qt)},function(){return[[],[]]});function bC(Ft,qt,ir){var qr=A1(Ft)?Xv:Ex,Tn=arguments.length<3;return qr(Ft,_1(qt,4),ir,Tn,f$)}function $C(Ft,qt,ir){var qr=A1(Ft)?tw:Ex,Tn=arguments.length<3;return qr(Ft,_1(qt,4),ir,Tn,r_)}function xC(Ft,qt){var ir=A1(Ft)?Ly:n_;return ir(Ft,Nw(_1(qt,3)))}function wC(Ft){var qt=A1(Ft)?Q2:hT;return qt(Ft)}function _C(Ft,qt,ir){(ir?Vv(Ft,qt,ir):qt===c)?qt=1:qt=k1(qt);var qr=A1(Ft)?HE:mT;return qr(Ft,qt)}function SC(Ft){var qt=A1(Ft)?GE:vT;return qt(Ft)}function EC(Ft){if(Ft==null)return 0;if(Qv(Ft))return jw(Ft)?H$(Ft):Ft.length;var qt=Mv(Ft);return qt==f0||qt==k0?Ft.size:t2(Ft).length}function TC(Ft,qt,ir){var qr=A1(Ft)?z$:yT;return ir&&Vv(Ft,qt,ir)&&(qt=c),qr(Ft,_1(qt,3))}var CC=F1(function(Ft,qt){if(Ft==null)return[];var ir=qt.length;return ir>1&&Vv(Ft,qt[0],qt[1])?qt=[]:ir>2&&Vv(qt[0],qt[1],qt[2])&&(qt=[qt[0]]),p_(Ft,Av(qt,1),[])}),Dw=sE||function(){return pv.Date.now()};function OC(Ft,qt){if(typeof qt!="function")throw new py(at);return Ft=k1(Ft),function(){if(--Ft<1)return qt.apply(this,arguments)}}function sS(Ft,qt,ir){return qt=ir?c:qt,qt=Ft&&qt==null?Ft.length:qt,t$(Ft,jr,c,c,c,c,qt)}function lS(Ft,qt){var ir;if(typeof qt!="function")throw new py(at);return Ft=k1(Ft),function(){return--Ft>0&&(ir=qt.apply(this,arguments)),Ft<=1&&(qt=c),ir}}var E2=F1(function(Ft,qt,ir){var qr=Lt;if(ir.length){var Tn=Ay(ir,Q$(E2));qr|=rr}return t$(Ft,qr,qt,ir,Tn)}),uS=F1(function(Ft,qt,ir){var qr=Lt|Ht;if(ir.length){var Tn=Ay(ir,Q$(uS));qr|=rr}return t$(qt,qr,Ft,ir,Tn)});function cS(Ft,qt,ir){qt=ir?c:qt;var qr=t$(Ft,Kt,c,c,c,c,c,qt);return qr.placeholder=cS.placeholder,qr}function dS(Ft,qt,ir){qt=ir?c:qt;var qr=t$(Ft,tr,c,c,c,c,c,qt);return qr.placeholder=dS.placeholder,qr}function fS(Ft,qt,ir){var qr,Tn,Xo,u0,v0,O0,W0=0,H0=!1,K0=!1,i1=!0;if(typeof Ft!="function")throw new py(at);qt=yy(qt)||0,av(ir)&&(H0=!!ir.leading,K0="maxWait"in ir,Xo=K0?wv(yy(ir.maxWait)||0,qt):Xo,i1="trailing"in ir?!!ir.trailing:i1);function g1(mv){var ky=qr,a$=Tn;return qr=Tn=c,W0=mv,u0=Ft.apply(a$,ky),u0}function S1(mv){return W0=mv,v0=jx(z1,qt),H0?g1(mv):u0}function M1(mv){var ky=mv-O0,a$=mv-W0,IS=qt-ky;return K0?Dv(IS,Xo-a$):IS}function E1(mv){var ky=mv-O0,a$=mv-W0;return O0===c||ky>=qt||ky<0||K0&&a$>=Xo}function z1(){var mv=Dw();if(E1(mv))return H1(mv);v0=jx(z1,M1(mv))}function H1(mv){return v0=c,i1&&qr?g1(mv):(qr=Tn=c,u0)}function ay(){v0!==c&&w_(v0),W0=0,qr=O0=Tn=v0=c}function Wv(){return v0===c?u0:H1(Dw())}function sy(){var mv=Dw(),ky=E1(mv);if(qr=arguments,Tn=this,O0=mv,ky){if(v0===c)return S1(O0);if(K0)return w_(v0),v0=jx(z1,qt),g1(O0)}return v0===c&&(v0=jx(z1,qt)),u0}return sy.cancel=ay,sy.flush=Wv,sy}var AC=F1(function(Ft,qt){return t_(Ft,1,qt)}),RC=F1(function(Ft,qt,ir){return t_(Ft,yy(qt)||0,ir)});function IC(Ft){return t$(Ft,An)}function Mw(Ft,qt){if(typeof Ft!="function"||qt!=null&&typeof qt!="function")throw new py(at);var ir=function(){var qr=arguments,Tn=qt?qt.apply(this,qr):qr[0],Xo=ir.cache;if(Xo.has(Tn))return Xo.get(Tn);var u0=Ft.apply(this,qr);return ir.cache=Xo.set(Tn,u0)||Xo,u0};return ir.cache=new(Mw.Cache||Jy),ir}Mw.Cache=Jy;function Nw(Ft){if(typeof Ft!="function")throw new py(at);return function(){var qt=arguments;switch(qt.length){case 0:return!Ft.call(this);case 1:return!Ft.call(this,qt[0]);case 2:return!Ft.call(this,qt[0],qt[1]);case 3:return!Ft.call(this,qt[0],qt[1],qt[2])}return!Ft.apply(this,qt)}}function PC(Ft){return lS(2,Ft)}var kC=bT(function(Ft,qt){qt=qt.length==1&&A1(qt[0])?J1(qt[0],xn(_1())):J1(Av(qt,1),xn(_1()));var ir=qt.length;return F1(function(qr){for(var Tn=-1,Xo=Dv(qr.length,ir);++Tn<Xo;)qr[Tn]=qt[Tn].call(this,qr[Tn]);return Bv(Ft,this,qr)})}),T2=F1(function(Ft,qt){var ir=Ay(qt,Q$(T2));return t$(Ft,rr,c,qt,ir)}),pS=F1(function(Ft,qt){var ir=Ay(qt,Q$(pS));return t$(Ft,Lr,c,qt,ir)}),DC=r$(function(Ft,qt){return t$(Ft,Yr,c,c,c,qt)});function MC(Ft,qt){if(typeof Ft!="function")throw new py(at);return qt=qt===c?qt:k1(qt),F1(Ft,qt)}function NC(Ft,qt){if(typeof Ft!="function")throw new py(at);return qt=qt==null?0:wv(k1(qt),0),F1(function(ir){var qr=ir[qt],Tn=g$(ir,0,qt);return qr&&ny(Tn,qr),Bv(Ft,this,Tn)})}function LC(Ft,qt,ir){var qr=!0,Tn=!0;if(typeof Ft!="function")throw new py(at);return av(ir)&&(qr="leading"in ir?!!ir.leading:qr,Tn="trailing"in ir?!!ir.trailing:Tn),fS(Ft,qt,{leading:qr,maxWait:qt,trailing:Tn})}function jC(Ft){return sS(Ft,1)}function FC(Ft,qt){return T2(c2(qt),Ft)}function BC(){if(!arguments.length)return[];var Ft=arguments[0];return A1(Ft)?Ft:[Ft]}function zC(Ft){return my(Ft,Tt)}function UC(Ft,qt){return qt=typeof qt=="function"?qt:c,my(Ft,Tt,qt)}function VC(Ft){return my(Ft,st|Tt)}function WC(Ft,qt){return qt=typeof qt=="function"?qt:c,my(Ft,st|Tt,qt)}function HC(Ft,qt){return qt==null||e_(Ft,qt,Tv(qt))}function Py(Ft,qt){return Ft===qt||Ft!==Ft&&qt!==qt}var GC=Ow(Qw),qC=Ow(function(Ft,qt){return Ft>=qt}),k$=a_(function(){return arguments}())?a_:function(Ft){return uv(Ft)&&ev.call(Ft,"callee")&&!G2.call(Ft,"callee")},A1=N0.isArray,KC=mx?xn(mx):rT;function Qv(Ft){return Ft!=null&&Lw(Ft.length)&&!i$(Ft)}function hv(Ft){return uv(Ft)&&Qv(Ft)}function YC(Ft){return Ft===!0||Ft===!1||uv(Ft)&&Uv(Ft)==m0}var v$=uE||L2,XC=Zx?xn(Zx):nT;function ZC(Ft){return uv(Ft)&&Ft.nodeType===1&&!Fx(Ft)}function QC(Ft){if(Ft==null)return!0;if(Qv(Ft)&&(A1(Ft)||typeof Ft=="string"||typeof Ft.splice=="function"||v$(Ft)||J$(Ft)||k$(Ft)))return!Ft.length;var qt=Mv(Ft);if(qt==f0||qt==k0)return!Ft.size;if(Lx(Ft))return!t2(Ft).length;for(var ir in Ft)if(ev.call(Ft,ir))return!1;return!0}function JC(Ft,qt){return Dx(Ft,qt)}function eO(Ft,qt,ir){ir=typeof ir=="function"?ir:c;var qr=ir?ir(Ft,qt):c;return qr===c?Dx(Ft,qt,c,ir):!!qr}function C2(Ft){if(!uv(Ft))return!1;var qt=Uv(Ft);return qt==S0||qt==x0||typeof Ft.message=="string"&&typeof Ft.name=="string"&&!Fx(Ft)}function tO(Ft){return typeof Ft=="number"&&K2(Ft)}function i$(Ft){if(!av(Ft))return!1;var qt=Uv(Ft);return qt==R0||qt==$0||qt==a0||qt==l0}function hS(Ft){return typeof Ft=="number"&&Ft==k1(Ft)}function Lw(Ft){return typeof Ft=="number"&&Ft>-1&&Ft%1==0&&Ft<=e0}function av(Ft){var qt=typeof Ft;return Ft!=null&&(qt=="object"||qt=="function")}function uv(Ft){return Ft!=null&&typeof Ft=="object"}var mS=gx?xn(gx):oT;function rO(Ft,qt){return Ft===qt||e2(Ft,qt,v2(qt))}function nO(Ft,qt,ir){return ir=typeof ir=="function"?ir:c,e2(Ft,qt,v2(qt),ir)}function iO(Ft){return gS(Ft)&&Ft!=+Ft}function oO(Ft){if(UT(Ft))throw new O1(g);return s_(Ft)}function aO(Ft){return Ft===null}function sO(Ft){return Ft==null}function gS(Ft){return typeof Ft=="number"||uv(Ft)&&Uv(Ft)==P0}function Fx(Ft){if(!uv(Ft)||Uv(Ft)!=C0)return!1;var qt=cw(Ft);if(qt===null)return!0;var ir=ev.call(qt,"constructor")&&qt.constructor;return typeof ir=="function"&&ir instanceof ir&&aw.call(ir)==nE}var O2=vx?xn(vx):aT;function lO(Ft){return hS(Ft)&&Ft>=-e0&&Ft<=e0}var vS=yx?xn(yx):sT;function jw(Ft){return typeof Ft=="string"||!A1(Ft)&&uv(Ft)&&Uv(Ft)==d0}function oy(Ft){return typeof Ft=="symbol"||uv(Ft)&&Uv(Ft)==E0}var J$=Qx?xn(Qx):lT;function uO(Ft){return Ft===c}function cO(Ft){return uv(Ft)&&Mv(Ft)==Z0}function dO(Ft){return uv(Ft)&&Uv(Ft)==h1}var fO=Ow(r2),pO=Ow(function(Ft,qt){return Ft<=qt});function yS(Ft){if(!Ft)return[];if(Qv(Ft))return jw(Ft)?Ry(Ft):Zv(Ft);if(Tx&&Ft[Tx])return C1(Ft[Tx]());var qt=Mv(Ft),ir=qt==f0?U1:qt==k0?nw:ex;return ir(Ft)}function o$(Ft){if(!Ft)return Ft===0?Ft:0;if(Ft=yy(Ft),Ft===zo||Ft===-zo){var qt=Ft<0?-1:1;return qt*Xr}return Ft===Ft?Ft:0}function k1(Ft){var qt=o$(Ft),ir=qt%1;return qt===qt?ir?qt-ir:qt:0}function bS(Ft){return Ft?A$(k1(Ft),0,Zr):0}function yy(Ft){if(typeof Ft=="number")return Ft;if(oy(Ft))return In;if(av(Ft)){var qt=typeof Ft.valueOf=="function"?Ft.valueOf():Ft;Ft=av(qt)?qt+"":qt}if(typeof Ft!="string")return Ft===0?Ft:+Ft;Ft=Hr(Ft);var ir=Rv.test(Ft);return ir||Iv.test(Ft)?dx(Ft.slice(2),ir?2:8):Lv.test(Ft)?In:+Ft}function $S(Ft){return zy(Ft,Jv(Ft))}function hO(Ft){return Ft?A$(k1(Ft),-e0,e0):Ft===0?Ft:0}function Z1(Ft){return Ft==null?"":iy(Ft)}var mO=X$(function(Ft,qt){if(Lx(qt)||Qv(qt)){zy(qt,Tv(qt),Ft);return}for(var ir in qt)ev.call(qt,ir)&&Ix(Ft,ir,qt[ir])}),xS=X$(function(Ft,qt){zy(qt,Jv(qt),Ft)}),Fw=X$(function(Ft,qt,ir,qr){zy(qt,Jv(qt),Ft,qr)}),gO=X$(function(Ft,qt,ir,qr){zy(qt,Tv(qt),Ft,qr)}),vO=r$(Yw);function yO(Ft,qt){var ir=Y$(Ft);return qt==null?ir:J2(ir,qt)}var bO=F1(function(Ft,qt){Ft=tv(Ft);var ir=-1,qr=qt.length,Tn=qr>2?qt[2]:c;for(Tn&&Vv(qt[0],qt[1],Tn)&&(qr=1);++ir<qr;)for(var Xo=qt[ir],u0=Jv(Xo),v0=-1,O0=u0.length;++v0<O0;){var W0=u0[v0],H0=Ft[W0];(H0===c||Py(H0,G$[W0])&&!ev.call(Ft,W0))&&(Ft[W0]=Xo[W0])}return Ft}),$O=F1(function(Ft){return Ft.push(c,j_),Bv(wS,c,Ft)});function xO(Ft,qt){return xx(Ft,_1(qt,3),By)}function wO(Ft,qt){return xx(Ft,_1(qt,3),Zw)}function _O(Ft,qt){return Ft==null?Ft:Xw(Ft,_1(qt,3),Jv)}function SO(Ft,qt){return Ft==null?Ft:i_(Ft,_1(qt,3),Jv)}function EO(Ft,qt){return Ft&&By(Ft,_1(qt,3))}function TO(Ft,qt){return Ft&&Zw(Ft,_1(qt,3))}function CO(Ft){return Ft==null?[]:$w(Ft,Tv(Ft))}function OO(Ft){return Ft==null?[]:$w(Ft,Jv(Ft))}function A2(Ft,qt,ir){var qr=Ft==null?c:R$(Ft,qt);return qr===c?ir:qr}function AO(Ft,qt){return Ft!=null&&z_(Ft,qt,QE)}function R2(Ft,qt){return Ft!=null&&z_(Ft,qt,JE)}var RO=k_(function(Ft,qt,ir){qt!=null&&typeof qt.toString!="function"&&(qt=sw.call(qt)),Ft[qt]=ir},P2(ey)),IO=k_(function(Ft,qt,ir){qt!=null&&typeof qt.toString!="function"&&(qt=sw.call(qt)),ev.call(Ft,qt)?Ft[qt].push(ir):Ft[qt]=[ir]},_1),PO=F1(kx);function Tv(Ft){return Qv(Ft)?Z2(Ft):t2(Ft)}function Jv(Ft){return Qv(Ft)?Z2(Ft,!0):uT(Ft)}function kO(Ft,qt){var ir={};return qt=_1(qt,3),By(Ft,function(qr,Tn,Xo){e$(ir,qt(qr,Tn,Xo),qr)}),ir}function DO(Ft,qt){var ir={};return qt=_1(qt,3),By(Ft,function(qr,Tn,Xo){e$(ir,Tn,qt(qr,Tn,Xo))}),ir}var MO=X$(function(Ft,qt,ir){xw(Ft,qt,ir)}),wS=X$(function(Ft,qt,ir,qr){xw(Ft,qt,ir,qr)}),NO=r$(function(Ft,qt){var ir={};if(Ft==null)return ir;var qr=!1;qt=J1(qt,function(Xo){return Xo=m$(Xo,Ft),qr||(qr=Xo.length>1),Xo}),zy(Ft,m2(Ft),ir),qr&&(ir=my(ir,st|wt|Tt,RT));for(var Tn=qt.length;Tn--;)s2(ir,qt[Tn]);return ir});function LO(Ft,qt){return _S(Ft,Nw(_1(qt)))}var FO=r$(function(Ft,qt){return Ft==null?{}:dT(Ft,qt)});function _S(Ft,qt){if(Ft==null)return{};var ir=J1(m2(Ft),function(qr){return[qr]});return qt=_1(qt),h_(Ft,ir,function(qr,Tn){return qt(qr,Tn[0])})}function BO(Ft,qt,ir){qt=m$(qt,Ft);var qr=-1,Tn=qt.length;for(Tn||(Tn=1,Ft=c);++qr<Tn;){var Xo=Ft==null?c:Ft[Uy(qt[qr])];Xo===c&&(qr=Tn,Xo=ir),Ft=i$(Xo)?Xo.call(Ft):Xo}return Ft}function zO(Ft,qt,ir){return Ft==null?Ft:Mx(Ft,qt,ir)}function UO(Ft,qt,ir,qr){return qr=typeof qr=="function"?qr:c,Ft==null?Ft:Mx(Ft,qt,ir,qr)}var SS=N_(Tv),ES=N_(Jv);function VO(Ft,qt,ir){var qr=A1(Ft),Tn=qr||v$(Ft)||J$(Ft);if(qt=_1(qt,4),ir==null){var Xo=Ft&&Ft.constructor;Tn?ir=qr?new Xo:[]:av(Ft)?ir=i$(Xo)?Y$(cw(Ft)):{}:ir={}}return(Tn?zv:By)(Ft,function(u0,v0,O0){return qt(ir,u0,v0,O0)}),ir}function WO(Ft,qt){return Ft==null?!0:s2(Ft,qt)}function HO(Ft,qt,ir){return Ft==null?Ft:b_(Ft,qt,c2(ir))}function GO(Ft,qt,ir,qr){return qr=typeof qr=="function"?qr:c,Ft==null?Ft:b_(Ft,qt,c2(ir),qr)}function ex(Ft){return Ft==null?[]:Ro(Ft,Tv(Ft))}function qO(Ft){return Ft==null?[]:Ro(Ft,Jv(Ft))}function KO(Ft,qt,ir){return ir===c&&(ir=qt,qt=c),ir!==c&&(ir=yy(ir),ir=ir===ir?ir:0),qt!==c&&(qt=yy(qt),qt=qt===qt?qt:0),A$(yy(Ft),qt,ir)}function YO(Ft,qt,ir){return qt=o$(qt),ir===c?(ir=qt,qt=0):ir=o$(ir),Ft=yy(Ft),eT(Ft,qt,ir)}function XO(Ft,qt,ir){if(ir&&typeof ir!="boolean"&&Vv(Ft,qt,ir)&&(qt=ir=c),ir===c&&(typeof qt=="boolean"?(ir=qt,qt=c):typeof Ft=="boolean"&&(ir=Ft,Ft=c)),Ft===c&&qt===c?(Ft=0,qt=1):(Ft=o$(Ft),qt===c?(qt=Ft,Ft=0):qt=o$(qt)),Ft>qt){var qr=Ft;Ft=qt,qt=qr}if(ir||Ft%1||qt%1){var Tn=Y2();return Dv(Ft+Tn*(qt-Ft+Xx("1e-"+((Tn+"").length-1))),qt)}return i2(Ft,qt)}var ZO=Z$(function(Ft,qt,ir){return qt=qt.toLowerCase(),Ft+(ir?TS(qt):qt)});function TS(Ft){return I2(Z1(Ft).toLowerCase())}function CS(Ft){return Ft=Z1(Ft),Ft&&Ft.replace(Gy,s1).replace(J0,"")}function QO(Ft,qt,ir){Ft=Z1(Ft),qt=iy(qt);var qr=Ft.length;ir=ir===c?qr:A$(k1(ir),0,qr);var Tn=ir;return ir-=qt.length,ir>=0&&Ft.slice(ir,Tn)==qt}function JO(Ft){return Ft=Z1(Ft),Ft&&h0.test(Ft)?Ft.replace(F0,n1):Ft}function eA(Ft){return Ft=Z1(Ft),Ft&&I0.test(Ft)?Ft.replace(P1,"\\$&"):Ft}var tA=Z$(function(Ft,qt,ir){return Ft+(ir?"-":"")+qt.toLowerCase()}),rA=Z$(function(Ft,qt,ir){return Ft+(ir?" ":"")+qt.toLowerCase()}),nA=R_("toLowerCase");function iA(Ft,qt,ir){Ft=Z1(Ft),qt=k1(qt);var qr=qt?H$(Ft):0;if(!qt||qr>=qt)return Ft;var Tn=(qt-qr)/2;return Cw(hw(Tn),ir)+Ft+Cw(pw(Tn),ir)}function oA(Ft,qt,ir){Ft=Z1(Ft),qt=k1(qt);var qr=qt?H$(Ft):0;return qt&&qr<qt?Ft+Cw(qt-qr,ir):Ft}function aA(Ft,qt,ir){Ft=Z1(Ft),qt=k1(qt);var qr=qt?H$(Ft):0;return qt&&qr<qt?Cw(qt-qr,ir)+Ft:Ft}function sA(Ft,qt,ir){return ir||qt==null?qt=0:qt&&(qt=+qt),pE(Z1(Ft).replace(p1,""),qt||0)}function lA(Ft,qt,ir){return(ir?Vv(Ft,qt,ir):qt===c)?qt=1:qt=k1(qt),o2(Z1(Ft),qt)}function uA(){var Ft=arguments,qt=Z1(Ft[0]);return Ft.length<3?qt:qt.replace(Ft[1],Ft[2])}var cA=Z$(function(Ft,qt,ir){return Ft+(ir?"_":"")+qt.toLowerCase()});function dA(Ft,qt,ir){return ir&&typeof ir!="number"&&Vv(Ft,qt,ir)&&(qt=ir=c),ir=ir===c?Zr:ir>>>0,ir?(Ft=Z1(Ft),Ft&&(typeof qt=="string"||qt!=null&&!O2(qt))&&(qt=iy(qt),!qt&&W1(Ft))?g$(Ry(Ft),0,ir):Ft.split(qt,ir)):[]}var fA=Z$(function(Ft,qt,ir){return Ft+(ir?" ":"")+I2(qt)});function pA(Ft,qt,ir){return Ft=Z1(Ft),ir=ir==null?0:A$(k1(ir),0,Ft.length),qt=iy(qt),Ft.slice(ir,ir+qt.length)==qt}function hA(Ft,qt,ir){var qr=Bo.templateSettings;ir&&Vv(Ft,qt,ir)&&(qt=c),Ft=Z1(Ft),qt=Fw({},qt,qr,L_);var Tn=Fw({},qt.imports,qr.imports,L_),Xo=Tv(Tn),u0=Ro(Tn,Xo),v0,O0,W0=0,H0=qt.interpolate||Kv,K0="__p += '",i1=Ww((qt.escape||Kv).source+"|"+H0.source+"|"+(H0===e1?qv:Kv).source+"|"+(qt.evaluate||Kv).source+"|$","g"),g1="//# sourceURL="+(ev.call(qt,"sourceURL")?(qt.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++o1+"]")+`
`;Ft.replace(i1,function(E1,z1,H1,ay,Wv,sy){return H1||(H1=ay),K0+=Ft.slice(W0,sy).replace(_v,w1),z1&&(v0=!0,K0+=`' +
__e(`+z1+`) +
'`),Wv&&(O0=!0,K0+=`';
`+Wv+`;
__p += '`),H1&&(K0+=`' +
((__t = (`+H1+`)) == null ? '' : __t) +
'`),W0=sy+E1.length,E1}),K0+=`';
`;var S1=ev.call(qt,"variable")&&qt.variable;if(!S1)K0=`with (obj) {
`+K0+`
}
`;else if(yv.test(S1))throw new O1($t);K0=(O0?K0.replace(rv,""):K0).replace(_g,"$1").replace(w0,"$1;"),K0="function("+(S1||"obj")+`) {
`+(S1?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v0?", __e = _.escape":"")+(O0?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+K0+`return __p
}`;var M1=AS(function(){return X1(Xo,g1+"return "+K0).apply(c,u0)});if(M1.source=K0,C2(M1))throw M1;return M1}function mA(Ft){return Z1(Ft).toLowerCase()}function gA(Ft){return Z1(Ft).toUpperCase()}function vA(Ft,qt,ir){if(Ft=Z1(Ft),Ft&&(ir||qt===c))return Hr(Ft);if(!Ft||!(qt=iy(qt)))return Ft;var qr=Ry(Ft),Tn=Ry(qt),Xo=y0(qr,Tn),u0=j0(qr,Tn)+1;return g$(qr,Xo,u0).join("")}function yA(Ft,qt,ir){if(Ft=Z1(Ft),Ft&&(ir||qt===c))return Ft.slice(0,U2(Ft)+1);if(!Ft||!(qt=iy(qt)))return Ft;var qr=Ry(Ft),Tn=j0(qr,Ry(qt))+1;return g$(qr,0,Tn).join("")}function bA(Ft,qt,ir){if(Ft=Z1(Ft),Ft&&(ir||qt===c))return Ft.replace(p1,"");if(!Ft||!(qt=iy(qt)))return Ft;var qr=Ry(Ft),Tn=y0(qr,Ry(qt));return g$(qr,Tn).join("")}function $A(Ft,qt){var ir=No,qr=o0;if(av(qt)){var Tn="separator"in qt?qt.separator:Tn;ir="length"in qt?k1(qt.length):ir,qr="omission"in qt?iy(qt.omission):qr}Ft=Z1(Ft);var Xo=Ft.length;if(W1(Ft)){var u0=Ry(Ft);Xo=u0.length}if(ir>=Xo)return Ft;var v0=ir-H$(qr);if(v0<1)return qr;var O0=u0?g$(u0,0,v0).join(""):Ft.slice(0,v0);if(Tn===c)return O0+qr;if(u0&&(v0+=O0.length-v0),O2(Tn)){if(Ft.slice(v0).search(Tn)){var W0,H0=O0;for(Tn.global||(Tn=Ww(Tn.source,Z1(ov.exec(Tn))+"g")),Tn.lastIndex=0;W0=Tn.exec(H0);)var K0=W0.index;O0=O0.slice(0,K0===c?v0:K0)}}else if(Ft.indexOf(iy(Tn),v0)!=v0){var i1=O0.lastIndexOf(Tn);i1>-1&&(O0=O0.slice(0,i1))}return O0+qr}function xA(Ft){return Ft=Z1(Ft),Ft&&U0.test(Ft)?Ft.replace(T0,YS):Ft}var wA=Z$(function(Ft,qt,ir){return Ft+(ir?" ":"")+qt.toUpperCase()}),I2=R_("toUpperCase");function OS(Ft,qt,ir){return Ft=Z1(Ft),qt=ir?c:qt,qt===c?L0(Ft)?QS(Ft):rw(Ft):Ft.match(qt)||[]}var AS=F1(function(Ft,qt){try{return Bv(Ft,c,qt)}catch(ir){return C2(ir)?ir:new O1(ir)}}),_A=r$(function(Ft,qt){return zv(qt,function(ir){ir=Uy(ir),e$(Ft,ir,E2(Ft[ir],Ft))}),Ft});function SA(Ft){var qt=Ft==null?0:Ft.length,ir=_1();return Ft=qt?J1(Ft,function(qr){if(typeof qr[1]!="function")throw new py(at);return[ir(qr[0]),qr[1]]}):[],F1(function(qr){for(var Tn=-1;++Tn<qt;){var Xo=Ft[Tn];if(Bv(Xo[0],this,qr))return Bv(Xo[1],this,qr)}})}function EA(Ft){return YE(my(Ft,st))}function P2(Ft){return function(){return Ft}}function TA(Ft,qt){return Ft==null||Ft!==Ft?qt:Ft}var CA=P_(),OA=P_(!0);function ey(Ft){return Ft}function k2(Ft){return l_(typeof Ft=="function"?Ft:my(Ft,st))}function AA(Ft){return c_(my(Ft,st))}function RA(Ft,qt){return d_(Ft,my(qt,st))}var IA=F1(function(Ft,qt){return function(ir){return kx(ir,Ft,qt)}}),PA=F1(function(Ft,qt){return function(ir){return kx(Ft,ir,qt)}});function D2(Ft,qt,ir){var qr=Tv(qt),Tn=$w(qt,qr);ir==null&&!(av(qt)&&(Tn.length||!qr.length))&&(ir=qt,qt=Ft,Ft=this,Tn=$w(qt,Tv(qt)));var Xo=!(av(ir)&&"chain"in ir)||!!ir.chain,u0=i$(Ft);return zv(Tn,function(v0){var O0=qt[v0];Ft[v0]=O0,u0&&(Ft.prototype[v0]=function(){var W0=this.__chain__;if(Xo||W0){var H0=Ft(this.__wrapped__),K0=H0.__actions__=Zv(this.__actions__);return K0.push({func:O0,args:arguments,thisArg:Ft}),H0.__chain__=W0,H0}return O0.apply(Ft,ny([this.value()],arguments))})}),Ft}function kA(){return pv._===this&&(pv._=iE),this}function M2(){}function DA(Ft){return Ft=k1(Ft),F1(function(qt){return f_(qt,Ft)})}var MA=f2(J1),NA=f2(ew),LA=f2(z$);function RS(Ft){return b2(Ft)?U$(Uy(Ft)):fT(Ft)}function jA(Ft){return function(qt){return Ft==null?c:R$(Ft,qt)}}var FA=D_(),BA=D_(!0);function N2(){return[]}function L2(){return!1}function zA(){return{}}function UA(){return""}function VA(){return!0}function WA(Ft,qt){if(Ft=k1(Ft),Ft<1||Ft>e0)return[];var ir=Zr,qr=Dv(Ft,Zr);qt=_1(qt),Ft-=Zr;for(var Tn=W$(qr,qt);++ir<Ft;)qt(ir);return Tn}function HA(Ft){return A1(Ft)?J1(Ft,Uy):oy(Ft)?[Ft]:Zv(X_(Z1(Ft)))}function GA(Ft){var qt=++rE;return Z1(Ft)+qt}var qA=Tw(function(Ft,qt){return Ft+qt},0),KA=p2("ceil"),YA=Tw(function(Ft,qt){return Ft/qt},1),XA=p2("floor");function ZA(Ft){return Ft&&Ft.length?bw(Ft,ey,Qw):c}function QA(Ft,qt){return Ft&&Ft.length?bw(Ft,_1(qt,2),Qw):c}function JA(Ft){return Sx(Ft,ey)}function eR(Ft,qt){return Sx(Ft,_1(qt,2))}function tR(Ft){return Ft&&Ft.length?bw(Ft,ey,r2):c}function rR(Ft,qt){return Ft&&Ft.length?bw(Ft,_1(qt,2),r2):c}var nR=Tw(function(Ft,qt){return Ft*qt},1),iR=p2("round"),oR=Tw(function(Ft,qt){return Ft-qt},0);function aR(Ft){return Ft&&Ft.length?u$(Ft,ey):0}function sR(Ft,qt){return Ft&&Ft.length?u$(Ft,_1(qt,2)):0}return Bo.after=OC,Bo.ary=sS,Bo.assign=mO,Bo.assignIn=xS,Bo.assignInWith=Fw,Bo.assignWith=gO,Bo.at=vO,Bo.before=lS,Bo.bind=E2,Bo.bindAll=_A,Bo.bindKey=uS,Bo.castArray=BC,Bo.chain=iS,Bo.chunk=YT,Bo.compact=XT,Bo.concat=ZT,Bo.cond=SA,Bo.conforms=EA,Bo.constant=P2,Bo.countBy=oC,Bo.create=yO,Bo.curry=cS,Bo.curryRight=dS,Bo.debounce=fS,Bo.defaults=bO,Bo.defaultsDeep=$O,Bo.defer=AC,Bo.delay=RC,Bo.difference=QT,Bo.differenceBy=JT,Bo.differenceWith=e3,Bo.drop=t3,Bo.dropRight=r3,Bo.dropRightWhile=n3,Bo.dropWhile=i3,Bo.fill=o3,Bo.filter=sC,Bo.flatMap=cC,Bo.flatMapDeep=dC,Bo.flatMapDepth=fC,Bo.flatten=eS,Bo.flattenDeep=a3,Bo.flattenDepth=s3,Bo.flip=IC,Bo.flow=CA,Bo.flowRight=OA,Bo.fromPairs=l3,Bo.functions=CO,Bo.functionsIn=OO,Bo.groupBy=pC,Bo.initial=c3,Bo.intersection=d3,Bo.intersectionBy=f3,Bo.intersectionWith=p3,Bo.invert=RO,Bo.invertBy=IO,Bo.invokeMap=mC,Bo.iteratee=k2,Bo.keyBy=gC,Bo.keys=Tv,Bo.keysIn=Jv,Bo.map=kw,Bo.mapKeys=kO,Bo.mapValues=DO,Bo.matches=AA,Bo.matchesProperty=RA,Bo.memoize=Mw,Bo.merge=MO,Bo.mergeWith=wS,Bo.method=IA,Bo.methodOf=PA,Bo.mixin=D2,Bo.negate=Nw,Bo.nthArg=DA,Bo.omit=NO,Bo.omitBy=LO,Bo.once=PC,Bo.orderBy=vC,Bo.over=MA,Bo.overArgs=kC,Bo.overEvery=NA,Bo.overSome=LA,Bo.partial=T2,Bo.partialRight=pS,Bo.partition=yC,Bo.pick=FO,Bo.pickBy=_S,Bo.property=RS,Bo.propertyOf=jA,Bo.pull=v3,Bo.pullAll=rS,Bo.pullAllBy=y3,Bo.pullAllWith=b3,Bo.pullAt=$3,Bo.range=FA,Bo.rangeRight=BA,Bo.rearg=DC,Bo.reject=xC,Bo.remove=x3,Bo.rest=MC,Bo.reverse=_2,Bo.sampleSize=_C,Bo.set=zO,Bo.setWith=UO,Bo.shuffle=SC,Bo.slice=w3,Bo.sortBy=CC,Bo.sortedUniq=A3,Bo.sortedUniqBy=R3,Bo.split=dA,Bo.spread=NC,Bo.tail=I3,Bo.take=P3,Bo.takeRight=k3,Bo.takeRightWhile=D3,Bo.takeWhile=M3,Bo.tap=X3,Bo.throttle=LC,Bo.thru=Pw,Bo.toArray=yS,Bo.toPairs=SS,Bo.toPairsIn=ES,Bo.toPath=HA,Bo.toPlainObject=$S,Bo.transform=VO,Bo.unary=jC,Bo.union=N3,Bo.unionBy=L3,Bo.unionWith=j3,Bo.uniq=F3,Bo.uniqBy=B3,Bo.uniqWith=z3,Bo.unset=WO,Bo.unzip=S2,Bo.unzipWith=nS,Bo.update=HO,Bo.updateWith=GO,Bo.values=ex,Bo.valuesIn=qO,Bo.without=U3,Bo.words=OS,Bo.wrap=FC,Bo.xor=V3,Bo.xorBy=W3,Bo.xorWith=H3,Bo.zip=G3,Bo.zipObject=q3,Bo.zipObjectDeep=K3,Bo.zipWith=Y3,Bo.entries=SS,Bo.entriesIn=ES,Bo.extend=xS,Bo.extendWith=Fw,D2(Bo,Bo),Bo.add=qA,Bo.attempt=AS,Bo.camelCase=ZO,Bo.capitalize=TS,Bo.ceil=KA,Bo.clamp=KO,Bo.clone=zC,Bo.cloneDeep=VC,Bo.cloneDeepWith=WC,Bo.cloneWith=UC,Bo.conformsTo=HC,Bo.deburr=CS,Bo.defaultTo=TA,Bo.divide=YA,Bo.endsWith=QO,Bo.eq=Py,Bo.escape=JO,Bo.escapeRegExp=eA,Bo.every=aC,Bo.find=lC,Bo.findIndex=Q_,Bo.findKey=xO,Bo.findLast=uC,Bo.findLastIndex=J_,Bo.findLastKey=wO,Bo.floor=XA,Bo.forEach=oS,Bo.forEachRight=aS,Bo.forIn=_O,Bo.forInRight=SO,Bo.forOwn=EO,Bo.forOwnRight=TO,Bo.get=A2,Bo.gt=GC,Bo.gte=qC,Bo.has=AO,Bo.hasIn=R2,Bo.head=tS,Bo.identity=ey,Bo.includes=hC,Bo.indexOf=u3,Bo.inRange=YO,Bo.invoke=PO,Bo.isArguments=k$,Bo.isArray=A1,Bo.isArrayBuffer=KC,Bo.isArrayLike=Qv,Bo.isArrayLikeObject=hv,Bo.isBoolean=YC,Bo.isBuffer=v$,Bo.isDate=XC,Bo.isElement=ZC,Bo.isEmpty=QC,Bo.isEqual=JC,Bo.isEqualWith=eO,Bo.isError=C2,Bo.isFinite=tO,Bo.isFunction=i$,Bo.isInteger=hS,Bo.isLength=Lw,Bo.isMap=mS,Bo.isMatch=rO,Bo.isMatchWith=nO,Bo.isNaN=iO,Bo.isNative=oO,Bo.isNil=sO,Bo.isNull=aO,Bo.isNumber=gS,Bo.isObject=av,Bo.isObjectLike=uv,Bo.isPlainObject=Fx,Bo.isRegExp=O2,Bo.isSafeInteger=lO,Bo.isSet=vS,Bo.isString=jw,Bo.isSymbol=oy,Bo.isTypedArray=J$,Bo.isUndefined=uO,Bo.isWeakMap=cO,Bo.isWeakSet=dO,Bo.join=h3,Bo.kebabCase=tA,Bo.last=vy,Bo.lastIndexOf=m3,Bo.lowerCase=rA,Bo.lowerFirst=nA,Bo.lt=fO,Bo.lte=pO,Bo.max=ZA,Bo.maxBy=QA,Bo.mean=JA,Bo.meanBy=eR,Bo.min=tR,Bo.minBy=rR,Bo.stubArray=N2,Bo.stubFalse=L2,Bo.stubObject=zA,Bo.stubString=UA,Bo.stubTrue=VA,Bo.multiply=nR,Bo.nth=g3,Bo.noConflict=kA,Bo.noop=M2,Bo.now=Dw,Bo.pad=iA,Bo.padEnd=oA,Bo.padStart=aA,Bo.parseInt=sA,Bo.random=XO,Bo.reduce=bC,Bo.reduceRight=$C,Bo.repeat=lA,Bo.replace=uA,Bo.result=BO,Bo.round=iR,Bo.runInContext=_0,Bo.sample=wC,Bo.size=EC,Bo.snakeCase=cA,Bo.some=TC,Bo.sortedIndex=_3,Bo.sortedIndexBy=S3,Bo.sortedIndexOf=E3,Bo.sortedLastIndex=T3,Bo.sortedLastIndexBy=C3,Bo.sortedLastIndexOf=O3,Bo.startCase=fA,Bo.startsWith=pA,Bo.subtract=oR,Bo.sum=aR,Bo.sumBy=sR,Bo.template=hA,Bo.times=WA,Bo.toFinite=o$,Bo.toInteger=k1,Bo.toLength=bS,Bo.toLower=mA,Bo.toNumber=yy,Bo.toSafeInteger=hO,Bo.toString=Z1,Bo.toUpper=gA,Bo.trim=vA,Bo.trimEnd=yA,Bo.trimStart=bA,Bo.truncate=$A,Bo.unescape=xA,Bo.uniqueId=GA,Bo.upperCase=wA,Bo.upperFirst=I2,Bo.each=oS,Bo.eachRight=aS,Bo.first=tS,D2(Bo,function(){var Ft={};return By(Bo,function(qt,ir){ev.call(Bo.prototype,ir)||(Ft[ir]=qt)}),Ft}(),{chain:!1}),Bo.VERSION=d,zv(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Ft){Bo[Ft].placeholder=Bo}),zv(["drop","take"],function(Ft,qt){V1.prototype[Ft]=function(ir){ir=ir===c?1:wv(k1(ir),0);var qr=this.__filtered__&&!qt?new V1(this):this.clone();return qr.__filtered__?qr.__takeCount__=Dv(ir,qr.__takeCount__):qr.__views__.push({size:Dv(ir,Zr),type:Ft+(qr.__dir__<0?"Right":"")}),qr},V1.prototype[Ft+"Right"]=function(ir){return this.reverse()[Ft](ir).reverse()}}),zv(["filter","map","takeWhile"],function(Ft,qt){var ir=qt+1,qr=ir==n0||ir==Mo;V1.prototype[Ft]=function(Tn){var Xo=this.clone();return Xo.__iteratees__.push({iteratee:_1(Tn,3),type:ir}),Xo.__filtered__=Xo.__filtered__||qr,Xo}}),zv(["head","last"],function(Ft,qt){var ir="take"+(qt?"Right":"");V1.prototype[Ft]=function(){return this[ir](1).value()[0]}}),zv(["initial","tail"],function(Ft,qt){var ir="drop"+(qt?"":"Right");V1.prototype[Ft]=function(){return this.__filtered__?new V1(this):this[ir](1)}}),V1.prototype.compact=function(){return this.filter(ey)},V1.prototype.find=function(Ft){return this.filter(Ft).head()},V1.prototype.findLast=function(Ft){return this.reverse().find(Ft)},V1.prototype.invokeMap=F1(function(Ft,qt){return typeof Ft=="function"?new V1(this):this.map(function(ir){return kx(ir,Ft,qt)})}),V1.prototype.reject=function(Ft){return this.filter(Nw(_1(Ft)))},V1.prototype.slice=function(Ft,qt){Ft=k1(Ft);var ir=this;return ir.__filtered__&&(Ft>0||qt<0)?new V1(ir):(Ft<0?ir=ir.takeRight(-Ft):Ft&&(ir=ir.drop(Ft)),qt!==c&&(qt=k1(qt),ir=qt<0?ir.dropRight(-qt):ir.take(qt-Ft)),ir)},V1.prototype.takeRightWhile=function(Ft){return this.reverse().takeWhile(Ft).reverse()},V1.prototype.toArray=function(){return this.take(Zr)},By(V1.prototype,function(Ft,qt){var ir=/^(?:filter|find|map|reject)|While$/.test(qt),qr=/^(?:head|last)$/.test(qt),Tn=Bo[qr?"take"+(qt=="last"?"Right":""):qt],Xo=qr||/^find/.test(qt);Tn&&(Bo.prototype[qt]=function(){var u0=this.__wrapped__,v0=qr?[1]:arguments,O0=u0 instanceof V1,W0=v0[0],H0=O0||A1(u0),K0=function(z1){var H1=Tn.apply(Bo,ny([z1],v0));return qr&&i1?H1[0]:H1};H0&&ir&&typeof W0=="function"&&W0.length!=1&&(O0=H0=!1);var i1=this.__chain__,g1=!!this.__actions__.length,S1=Xo&&!i1,M1=O0&&!g1;if(!Xo&&H0){u0=M1?u0:new V1(this);var E1=Ft.apply(u0,v0);return E1.__actions__.push({func:Pw,args:[K0],thisArg:c}),new hy(E1,i1)}return S1&&M1?Ft.apply(this,v0):(E1=this.thru(K0),S1?qr?E1.value()[0]:E1.value():E1)})}),zv(["pop","push","shift","sort","splice","unshift"],function(Ft){var qt=iw[Ft],ir=/^(?:push|sort|unshift)$/.test(Ft)?"tap":"thru",qr=/^(?:pop|shift)$/.test(Ft);Bo.prototype[Ft]=function(){var Tn=arguments;if(qr&&!this.__chain__){var Xo=this.value();return qt.apply(A1(Xo)?Xo:[],Tn)}return this[ir](function(u0){return qt.apply(A1(u0)?u0:[],Tn)})}}),By(V1.prototype,function(Ft,qt){var ir=Bo[qt];if(ir){var qr=ir.name+"";ev.call(K$,qr)||(K$[qr]=[]),K$[qr].push({name:qt,func:ir})}}),K$[Ew(c,Ht).name]=[{name:"wrapper",func:c}],V1.prototype.clone=$E,V1.prototype.reverse=xE,V1.prototype.value=wE,Bo.prototype.at=Z3,Bo.prototype.chain=Q3,Bo.prototype.commit=J3,Bo.prototype.next=eC,Bo.prototype.plant=rC,Bo.prototype.reverse=nC,Bo.prototype.toJSON=Bo.prototype.valueOf=Bo.prototype.value=iC,Bo.prototype.first=Bo.prototype.head,Tx&&(Bo.prototype[Tx]=tC),Bo},c$=JS();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(pv._=c$,define(function(){return c$})):Ny?((Ny.exports=c$)._=c$,E$._=c$):pv._=c$}).call(a)}}),import_lodash=__toESM(require_lodash());async function imageDecode(a){const s=MimeType.fromString(a.type);switch(s.type){case"image/x-alpha8":{const c=parseInt(s.params.width),d=parseInt(s.params.height);return ndarray4(new Uint8Array(await a.arrayBuffer()),[d,c,1])}case"image/x-rgba8":{const c=parseInt(s.params.width),d=parseInt(s.params.height);return ndarray4(new Uint8Array(await a.arrayBuffer()),[d,c,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/jpg":case"image/webp":{const c=await createImageBitmap(a),d=imageBitmapToImageData(c);return ndarray4(new Uint8Array(d.data),[d.height,d.width,4])}default:throw new Error(`Invalid format: ${s.type} with params: ${s.params}`)}}async function imageEncode(a,s=.8,c="image/png"){const[d,et,g]=a.shape;switch(c){case"image/x-alpha8":case"image/x-rgba8":{const vt=MimeType.create(c,{width:et.toString(),height:d.toString()});return new Blob([a.data],{type:vt.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const vt=new ImageData(new Uint8ClampedArray(a.data),et,d);var at=createCanvas(vt.width,vt.height),$t=at.getContext("2d");return $t.putImageData(vt,0,0),at.convertToBlob({quality:s,type:c})}default:throw new Error(`Invalid format: ${c}`)}}var MimeType=class z2{constructor(s,c){this.type="application/octet-stream",this.params={},this.type=s,this.params=c}toString(){const s=[];for(const c in this.params){const d=this.params[c];s.push(`${c}=${d}`)}return[this.type,...s].join(";")}static create(s,c){return new z2(s,c)}isIdentical(s){return this.type===s.type&&this.params===s.params}isEqual(s){return this.type===s.type}static fromString(s){const[c,...d]=s.split(";"),et={};for(const g of d){const[at,$t]=g.split("=");et[at.trim()]=$t.trim()}return new z2(c,et)}};function isAbsoluteURI(a){return new RegExp("^(?:[a-z+]+:)?//","i").test(a)}function ensureAbsoluteURI(a,s){return isAbsoluteURI(a)?a:new URL(a,s).href}function imageBitmapToImageData(a){var s=createCanvas(a.width,a.height),c=s.getContext("2d");return c.drawImage(a,0,0),c.getImageData(0,0,s.width,s.height)}function createTypeArray(a){if(typeof Uint8Array<"u")return new Uint8Array(a);if(typeof Uint8ClampedArray<"u")return new Uint8ClampedArray(a);if(typeof Uint16Array<"u")return new Uint16Array(a);if(typeof Uint32Array<"u")return new Uint32Array(a);if(typeof Float32Array<"u")return new Float32Array(a);if(typeof Float64Array<"u")return new Float64Array(a);throw new Error("TypedArray not supported")}function tensorResizeBilinear(a,s,c,d=!1){const[et,g,at]=a.shape;let $t=g/s,vt=et/c;d&&($t=vt=Math.max($t,vt)>1?Math.max($t,vt):Math.min($t,vt));const b=ndarray4(createTypeArray(at*s*c),[c,s,at]);for(let pt=0;pt<c;pt++)for(let st=0;st<s;st++){const wt=st*$t,Tt=pt*vt,Ct=Math.max(Math.floor(wt),0),jt=Math.min(Math.ceil(wt),g-1),Lt=Math.max(Math.floor(Tt),0),Ht=Math.min(Math.ceil(Tt),et-1),Gt=wt-Ct,Kt=Tt-Lt;for(let tr=0;tr<at;tr++){const rr=a.get(Lt,Ct,tr),Lr=a.get(Lt,jt,tr),jr=a.get(Ht,Ct,tr),Yr=a.get(Ht,jt,tr),An=(1-Gt)*(1-Kt)*rr+Gt*(1-Kt)*Lr+(1-Gt)*Kt*jr+Gt*Kt*Yr;b.set(pt,st,tr,An)}}return b}function tensorHWCtoBCHW(a,s=[128,128,128],c=[256,256,256]){var d=a.data;const[et,g,at]=a.shape,$t=et*g,vt=new Float32Array(3*$t);for(let b=0,pt=0;b<d.length;b+=4,pt+=1)vt[pt]=(d[b]-s[0])/c[0],vt[pt+$t]=(d[b+1]-s[1])/c[1],vt[pt+$t+$t]=(d[b+2]-s[2])/c[2];return ndarray4(vt,[1,3,et,g])}async function imageSourceToImageData(a,s){return typeof a=="string"&&(a=ensureAbsoluteURI(a,s.publicPath),a=new URL(a)),a instanceof URL&&(a=await(await fetch(a,{})).blob()),(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a=new Blob([a])),a instanceof Blob&&(a=await imageDecode(a)),a}function convertFloat32ToUint8(a){const s=new Uint8Array(a.data.length);for(let c=0;c<a.data.length;c++)s[c]=a.data[c]*255;return ndarray4(s,a.shape)}function createCanvas(a,s){let c;if(typeof OffscreenCanvas<"u"?c=new OffscreenCanvas(a,s):c=document.createElement("canvas"),!c)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return c}async function loadAsUrl(a,s){return URL.createObjectURL(await loadAsBlob(a,s))}async function loadAsBlob(a,s){const c=new URL("resources.json",s.publicPath),d=await fetch(c);if(!d.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const g=(await d.json())[a];if(!g)throw new Error(`Resource ${a} not found. Ensure that the config.publicPath is configured correctly.`);const at=g.chunks;let $t=0;const vt=at.map(async st=>{const wt=st.offsets[1]-st.offsets[0],Tt=s.publicPath?new URL(st.hash,s.publicPath).toString():st.hash,jt=await(await fetch(Tt,s.fetchArgs)).blob();if(wt!==jt.size)throw new Error(`Failed to fetch ${a} with size ${wt} but got ${jt.size}`);return s.progress&&($t+=wt,s.progress(`fetch:${a}`,$t,g.size)),jt}),b=await Promise.all(vt),pt=new Blob(b,{type:g.mime});if(pt.size!==g.size)throw new Error(`Failed to fetch ${a} with size ${g.size} but got ${pt.size}`);return pt}var simd=()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async a=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(a)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),webgpu=()=>navigator.gpu!==void 0,maxNumThreads=()=>navigator.hardwareConcurrency??4;async function createOnnxSession(a,s){const c=s.device==="gpu",d=await threads(),et=simd(),g=s.proxyToWorker,at=[c?"webgpu":"wasm"],$t=c?ort_gpu:ort_cpu;s.debug&&(console.debug("	Using Threads:",d),console.debug("	Using SIMD:",et),console.debug("	Using WebGPU:",c),console.debug("	Proxy to Worker:",g),$t.env.debug=!0,$t.env.logLevel="verbose"),$t.env.wasm.numThreads=maxNumThreads(),$t.env.wasm.simd=simd(),$t.env.wasm.proxy=g;const vt={"ort-wasm-simd-threaded.wasm":d&&et,"ort-wasm-simd.wasm":!d&&et,"ort-wasm-threaded.wasm":!c&&d&&!et,"ort-wasm.wasm":!c&&!d&&!et},b={};for(const[wt,Tt]of Object.entries(vt))if(Tt){const Ct=c&&wt.includes("simd")?`/onnxruntime-web/${wt.replace(".wasm",".jsep.wasm")}`:`/onnxruntime-web/${wt}`;b[wt]=await loadAsUrl(Ct,s)}$t.env.wasm.wasmPaths=b,s.debug&&console.debug("ort.env.wasm:",$t.env.wasm);const pt={executionProviders:at,graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await $t.InferenceSession.create(a,pt).catch(wt=>{throw new Error(`Failed to create session: "${wt}". Please check if the publicPath is set correctly.`)})}async function runOnnxSession(a,s,c,d){const g=d.device==="gpu"?ort_gpu:ort_cpu,at={};for(const[b,pt]of s)at[b]=new g.Tensor("float32",new Float32Array(pt.data),pt.shape);const $t=await a.run(at,{}),vt=[];for(const b of c){const pt=$t[b],st=pt.dims,wt=pt.data,Tt=ndarray4(wt,st);vt.push(Tt)}return vt}var package_default={name:"@imgly/background-removal",version:"1.5.3",description:"Background Removal in the Browser",keywords:["background-removal","client-side","data-privacy","image-segmentation","image-matting","onnx"],repository:{type:"git",url:"git+https://github.com/imgly/background-removal-js.git"},license:"SEE LICENSE IN LICENSE.md",author:{name:"IMG.LY GmbH",email:"support@img.ly",url:"https://img.ly"},bugs:{email:"support@img.ly"},source:"./src/index.ts",main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/src/index.d.ts",exports:{".":{require:"./dist/index.cjs",import:"./dist/index.mjs",types:"./dist/src/index.d.ts"}},homepage:"https://img.ly/showcases/cesdk/web/background-removal",files:["LICENSE.md","README.md","CHANGELOG.md","ThirdPartyLicenses.json","dist/","bin/"],scripts:{start:"npm run watch",clean:"npx rimraf dist",test:"true",resources:"node ../../scripts/package-resources.mjs","changelog:create":"node ../../scripts/changelog/changelog-create.mjs","changelog:generate":"node ../../scripts/changelog/changelog-generate.mjs",build:"npm run clean && npm run types && npm run resources && npm run changelog:generate && node scripts/build.mjs",types:" npx tsc --declaration --emitDeclarationOnly --declarationDir dist --declarationMap",watch:"npm run clean && npm run resources && npm run changelog:generate && node scripts/watch.mjs","publish:latest":"npm publish --tag latest --access public","publish:next":"npm publish --tag next --access public","package:pack":"npm pack . --pack-destination ../../releases",lint:"npx prettier --write ."},dependencies:{"@types/lodash-es":"^4.17.12","@types/ndarray":"~1.0.14","@types/node":"~20.3.0","lodash-es":"^4.17.21",ndarray:"~1.0.0","onnxruntime-web":"~1.18.0",zod:"^3.23.8"},devDependencies:{assert:"~2.0.0",esbuild:"~0.18.0",glob:"~10.3.0","npm-dts":"~1.3.0",process:"~0.11.0","ts-loader":"~9.4.0",tslib:"~2.5.0",typescript:"~5.1.0",util:"~0.12.0",webpack:"~5.85.0","webpack-cli":"~5.1.0"},bundleDependencies:[]},ConfigSchema=z$1.object({publicPath:z$1.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(a=>a.replace("${PACKAGE_NAME}",package_default.name).replace("${PACKAGE_VERSION}",package_default.version)),debug:z$1.boolean().default(!1).describe("Whether to enable debug logging."),rescale:z$1.boolean().default(!0).describe("Whether to rescale the image."),device:z$1.enum(["cpu","gpu"]).default("cpu").describe("The device to run the model on."),proxyToWorker:z$1.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z$1.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:z$1.function().args(z$1.string(),z$1.number(),z$1.number()).returns(z$1.void()).describe("Progress callback.").optional(),model:z$1.preprocess(a=>{switch(a){case"large":return"isnet";case"small":return"isnet_quint8";case"medium":return"isnet_fp16";default:return a}},z$1.enum(["isnet","isnet_fp16","isnet_quint8"])).default("medium"),output:z$1.object({format:z$1.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:z$1.number().default(.8)}).default({})}).default({}).transform(a=>(a.debug&&console.log("Config:",a),a.debug&&!a.progress&&(a.progress=a.progress??((s,c,d)=>{console.debug(`Downloading ${s}: ${c} of ${d}`)}),crossOriginIsolated||a.debug&&console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),a.device=="gpu"&&(webgpu()||(a.debug&&console.debug("Switching to CPU for GPU not supported."),a.device="cpu")),a));function validateConfig(a){return ConfigSchema.parse(a??{})}async function initBase(a){a.debug&&console.debug("Loading model...",a.model);const s=a.model,d=await(await loadAsBlob(`/models/${s}`,a)).arrayBuffer();return await createOnnxSession(d,a)}async function initInference(a){a=validateConfig(a);const s=await initBase(a);return{config:a,session:{base:s}}}async function runInference(a,s,c){const[et,g,at]=a.shape,$t=!1;let vt=tensorResizeBilinear(a,1024,1024,$t);const b=tensorHWCtoBCHW(vt);let pt=await runOnnxSession(c.base,[["input",b]],["output"],s),st=ndarray4(pt[0].data,[1024,1024,1]),wt=convertFloat32ToUint8(st);return s.rescale?(wt=tensorResizeBilinear(wt,g,et,$t),[wt,a]):[wt,vt]}var init=(0,import_lodash.memoize)(initInference,a=>JSON.stringify(a));async function removeBackground(a,s){var wt,Tt,Ct,jt;const{config:c,session:d}=await init(s);c.progress&&c.progress("compute:decode",0,4);const et=await imageSourceToImageData(a,c);(wt=c.progress)==null||wt.call(c,"compute:inference",1,4);const[g,at]=await runInference(et,c,d);(Tt=c.progress)==null||Tt.call(c,"compute:mask",2,4);const $t=at,[vt,b]=$t.shape,pt=vt*b;for(let Lt=0;Lt<pt;Lt+=1)$t.data[4*Lt+3]=g.data[Lt];(Ct=c.progress)==null||Ct.call(c,"compute:encode",3,4);const st=await imageEncode($t,c.output.quality,c.output.format);return(jt=c.progress)==null||jt.call(c,"compute:encode",4,4),st}/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/const RefCanvas=reactExports.createContext(void 0),useRefContext=()=>{const a=reactExports.useContext(RefCanvas);if(!a)throw new Error("useRefContext must be used within a RefProvider");return a},RefProvider=({children:a})=>{const s=reactExports.useRef(null),c=reactExports.useRef(null);return jsxRuntimeExports.jsx(RefCanvas.Provider,{value:{fabricRef:s,canvasRef:c},children:a})},COMPARE_SLIDER_DURATION_MS=300,hexToRgba=a=>{a=a.replace("#","");const s=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16),d=parseInt(a.substring(4,6),16),et=parseInt(a.substring(6,8),16)/255;return`rgba(${s}, ${c}, ${d}, ${et})`},config={debug:!0,rescale:!0,device:"cpu",output:{quality:.8,format:"image/png"}},Editor=React.forwardRef(()=>{const{fabricRef:a,canvasRef:s}=useRefContext();useToast();const[c,d,et,g,at,$t,vt,b,pt,st,wt,Tt,Ct,jt,Lt,Ht,Gt,Kt,tr,rr,Lr,jr,Yr,An,No,o0,t0,c0]=useStore(h0=>[h0.disableShortCuts,h0.isInpainting,h0.imageWidth,h0.scaledWidth,h0.imageHeight,h0.scaledHeight,h0.aspectRatio,h0.settings,h0.serverConfig.enableAutoSaving,h0.updateSettings,h0.setImageSize,h0.setBaseBrushSize,h0.interactiveSegState,h0.updateInteractiveSegState,h0.handleCanvasMouseDown,h0.handleSaveState,h0.handleCanvasMouseMove,h0.undo,h0.redo,h0.undoDisabled(),h0.redoDisabled(),h0.getIsProcessing(),h0.updateAppState,h0.runMannually(),h0.runInpainting,h0.isCropperExtenderResizing,h0.decreaseBaseBrushSize,h0.increaseBaseBrushSize]),n0=useStore(h0=>h0.editorState.baseBrushSize);useStore(h0=>h0.getBrushSize());const Qo=useStore(h0=>h0.editorState.renders),Mo=useStore(h0=>h0.editorState.extraMasks);useStore(h0=>h0.editorState.temporaryMasks),useStore(h0=>h0.editorState.lineGroups),useStore(h0=>h0.editorState.curLineGroup);const zo=useStore(h0=>h0.editorState.currCanvasGroups),[e0,Xr]=reactExports.useState(!1),[In,Zr]=useImage(null),[wn,r0]=reactExports.useState(.7);reactExports.useState({x:-1,y:-1});const[ko,_n]=reactExports.useState(!1),[i0,a0]=reactExports.useState(!1),[m0,p0]=reactExports.useState(!1);reactExports.useState(1),reactExports.useState(!1),reactExports.useState(1);const x0=reactExports.useRef(!1),S0=reactExports.useRef(0),R0=reactExports.useRef(0),$0=useWindowSize();reactExports.useRef(null);const[f0,P0]=reactExports.useState(!1),[M0,C0]=reactExports.useState(0),[Uo,l0]=reactExports.useState(!1);reactExports.useRef(null);const b0=reactExports.useRef(null),k0=reactExports.useRef(null),d0=reactExports.useRef(!1),E0=reactExports.useCallback(()=>zo.length!==0,[zo]),V0=reactExports.useCallback(()=>{if(a.current){const h0=a.current;Ht(h0)}},[a.current]);function Z0(h0,Q0=1e3,l1=0){h0&&fabric.fabric.util.animate({startValue:h0.get("opacity"),endValue:l1,duration:Q0,onChange:e1=>{var m1;h0.set("opacity",e1),(m1=h0.canvas)==null||m1.renderAll()},onComplete:()=>{Z0(h0,Q0,l1===1?0:1)}})}const h1=(h0,Q0)=>{const l1=Q0.target.canvas??null;console.log(l1);const e1=(l1==null?void 0:l1._activeObject)??null;if(console.log(e1),!e1)return;Z0(e1,1e3);const m1=(e1.width??0)*(e1.scaleX??0),T1=(e1.height??0)*(e1.scaleY??0),G1=e1.top??0,P1=e1.left??0;let I0=null;var p1=new fabric.fabric.Canvas(I0,{width:m1,height:T1});e1.clone(x1=>{x1.set({left:m1/2,top:T1/2,scaleX:e1.scaleX,scaleY:e1.scaleY,originX:"center",originY:"center"}),p1.add(x1),p1.renderAll();const R1=p1.toDataURL({format:"png"});removeBackground(R1,config).then(D1=>{const K1=URL.createObjectURL(D1),vv=new Image;loadImage(vv,K1).then(()=>{console.log(vv),l1==null||l1.remove(Q0.target);const yv=new fabric.fabric.Image(vv,{left:P1,top:G1,originX:"center",originY:"center"});l1==null||l1.add(yv),l1==null||l1.requestRenderAll()})})})},r1=()=>{if(!a.current||!b0.current||!k0.current)return;const h0=a.current,Q0=b0.current,l1=k0.current,e1=Q0.getBoundingRect(!0,!0),m1=l1.getBoundingRect(!0,!0),T1=Q0.scaleX||1,G1=Q0.scaleY||1,P1=fabric.fabric.util.degreesToRadians(Q0.angle||0),I0=(m1.left-e1.left)/T1,p1=(m1.top-e1.top)/G1,x1=m1.width/T1,R1=m1.height/G1,D1=document.createElement("canvas");D1.width=m1.width,D1.height=m1.height;const K1=D1.getContext("2d");if(!K1)return;K1.translate(D1.width/2,D1.height/2),K1.rotate(-P1),K1.translate(-D1.width/2,-D1.height/2),K1.drawImage(Q0.getElement(),I0,p1,x1,R1,0,0,m1.width,m1.height);const vv=D1.toDataURL();fabric.fabric.Image.fromURL(vv,yv=>{yv.set({left:l1.left,top:l1.top,originX:"center",originY:"center"}),h0.remove(Q0),h0.remove(l1),h0.add(yv),h0.setActiveObject(yv),h0.renderAll()}),d0.current=!1},I1=(h0,Q0)=>{const l1=Q0.target,e1=l1.canvas;e1==null||e1.remove(l1),e1==null||e1.requestRenderAll()},f1=(h0,Q0)=>{if(d0.current)return d0.current=!1,r1();d0.current=!0;const e1=Q0.target.canvas,m1=e1==null?void 0:e1.getActiveObject();if(!m1||!e1)return;const T1=m1.width*m1.scaleX,G1=m1.height*m1.scaleY;let P1=T1*.5,I0=G1*.5;const p1=new fabric.fabric.Rect({fill:"rgba(0,0,0,0.3)",originX:"center",originY:"center",stroke:"black",opacity:1,width:P1,height:I0,left:m1.left,top:m1.top,hasRotatingPoint:!1,transparentCorners:!1,cornerColor:"white",cornerStrokeColor:"black",borderColor:"black",lockMovementX:!0,lockMovementY:!0});b0.current=m1,k0.current=p1,e1.add(p1),e1.setActiveObject(p1)};reactExports.useEffect(()=>{var I0,p1,x1,R1,D1,K1,vv,yv;const h0=()=>new fabric.fabric.Canvas(s.current,{width:$0.width,height:$0.height,backgroundColor:"#f0f0f0",fireMiddleClick:!0,stopContextMenu:!0,enableRetinaScaling:!0,controlsAboveOverlay:!0,preserveObjectStacking:!0});a.current=h0(),fabric.fabric.Object.prototype.originX="center",fabric.fabric.Object.prototype.originY="center",a.current&&(a.current.isDrawingMode=b.showDrawing,a.current.freeDrawingBrush.width=DEFAULT_BRUSH_SIZE,a.current.freeDrawingBrush.color=hexToRgba(BRUSH_COLOR),(x1=a.current)==null||x1.zoomToPoint({x:((I0=a.current)==null?void 0:I0.width)/2,y:((p1=a.current)==null?void 0:p1.height)/2},wn),r0(a.current.getZoom())),fabric.fabric.Object.prototype.set({transparentCorners:!1,borderColor:"#51B9F9",cornerColor:"yellow",borderScaleFactor:2.5,cornerStyle:"rect",cornerStrokeColor:"#0E98FC",borderOpacityWhenMoving:1});const Q0='data:image/svg+xml,%3Csvg height="200px" width="200px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" fill="%23000000"%3E%3Cg id="SVGRepo_bgCarrier" stroke-width="0"%3E%3C/g%3E%3Cg id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"%3E%3C/g%3E%3Cg id="SVGRepo_iconCarrier"%3E%3Cg transform="translate(0 1)"%3E%3Cpolygon style="fill:%233D83F3;" points="34.712,502.322 477.288,502.322 477.288,7.678 34.712,7.678 "%3E%3C/polygon%3E%3Cpolygon style="fill:%23315ED8;" points="477.288,502.322 503.322,502.322 503.322,7.678 477.288,7.678 "%3E%3C/polygon%3E%3Cpolygon style="fill:%23FFFFFF;" points="8.678,502.322 34.712,502.322 34.712,7.678 8.678,7.678 "%3E%3C/polygon%3E%3Cpath d="M512,511H0V120.492c0-5.207,3.471-8.678,8.678-8.678s8.678,3.471,8.678,8.678v373.153h477.288v-78.102 c0-5.207,3.471-8.678,8.678-8.678c5.207,0,8.678,3.471,8.678,8.678V511z"%3E%3C/path%3E%3Cpath d="M503.322,346.119c-5.207,0-8.678-3.471-8.678-8.678V16.356H17.356v34.712c0,5.207-3.471,8.678-8.678,8.678 S0,56.275,0,51.068V-1h512v338.441C512,342.647,508.529,346.119,503.322,346.119z"%3E%3C/path%3E%3Cpath d="M17.356,85.78c0-5.207-3.471-8.678-8.678-8.678S0,80.573,0,85.78c0,5.207,3.471,8.678,8.678,8.678 S17.356,90.986,17.356,85.78"%3E%3C/path%3E%3Cpath d="M503.322,389.508c-5.207,0-8.678-3.471-8.678-8.678v-8.678c0-5.207,3.471-8.678,8.678-8.678 c5.207,0,8.678,3.471,8.678,8.678v8.678C512,386.037,508.529,389.508,503.322,389.508z"%3E%3C/path%3E%3Cpath style="fill:%23FFE100;" d="M395.715,178.634L303.729,85.78c-8.678-8.678-22.563-8.678-31.241,0L69.424,288.844 c-8.678,8.678-8.678,22.563,0,31.241l73.763,72.895l56.407,13.885l196.122-196.99C404.393,201.197,404.393,187.312,395.715,178.634 "%3E%3C/path%3E%3Cpath style="fill:%23FF8800;" d="M395.715,178.634c8.678,8.678,8.678,22.563,0,31.241l-196.122,196.99h27.77l183.105-183.105 c8.678-8.678,8.678-22.563,0-31.241L395.715,178.634z"%3E%3C/path%3E%3Cpath d="M308.936,333.969c-2.603,0-4.339-0.868-6.075-2.603L167.485,195.99c-3.471-3.471-3.471-8.678,0-12.149 c3.471-3.471,8.678-3.471,12.149,0L315.01,319.217c3.471,3.471,3.471,8.678,0,12.149 C313.275,333.102,311.539,333.969,308.936,333.969z"%3E%3C/path%3E%3Cpath d="M230.834,415.542h-76.366L66.82,327.895c-6.075-6.075-8.678-13.885-8.678-21.695s3.471-15.62,8.678-21.695L269.017,83.176 c12.149-12.149,31.241-12.149,43.39,0l104.136,104.136c6.075,6.075,8.678,13.885,8.678,21.695s-3.471,15.62-8.678,21.695 L230.834,415.542z M161.41,398.186h62.481l180.502-180.502c2.603-2.603,3.471-6.075,3.471-9.546c0-3.471-1.736-6.942-3.471-9.546 l0,0L300.258,94.458c-5.207-5.207-13.885-5.207-19.092,0L78.969,297.522c-2.603,2.603-3.471,6.075-3.471,9.546 c0,3.471,1.736,6.942,3.471,9.546L161.41,398.186z"%3E%3C/path%3E%3Cpath d="M433.898,415.542H286.373c-5.207,0-8.678-3.471-8.678-8.678s3.471-8.678,8.678-8.678h147.525 c5.207,0,8.678,3.471,8.678,8.678S439.105,415.542,433.898,415.542z"%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/svg%3E',l1=document.createElement("img");l1.src=Q0;const e1="data:image/svg+xml,%3Csvg height='200px' width='200px' version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 512.002 512.002' xml:space='preserve' fill='%23000000'%3E%3Cg id='SVGRepo_bgCarrier' stroke-width='0'%3E%3C/g%3E%3Cg id='SVGRepo_tracerCarrier' stroke-linecap='round' stroke-linejoin='round'%3E%3C/g%3E%3Cg id='SVGRepo_iconCarrier'%3E%3Cpath style='fill:%23E6E6E6;' d='M330.391,299.581l-64.844,40.281l-139.48-224.536C103.82,79.513,114.818,32.447,150.63,10.2l0,0 L330.391,299.581z'%3E%3C/path%3E%3Cpath style='fill:%23E8655A;' d='M330.196,299.702l-64.65,40.16l78.278,126.013c22.18,35.706,69.105,46.669,104.809,24.49l0,0 c35.706-22.18,46.669-69.105,24.49-104.809l-38.118-61.362C412.826,288.488,365.901,277.523,330.196,299.702z M436.024,402.695 c10.36,16.678,5.239,38.596-11.439,48.955l0,0c-16.678,10.36-38.596,5.239-48.956-11.439l-32.824-52.841 c-10.36-16.678-5.239-38.596,11.439-48.955l0,0c16.678-10.36,38.596-5.239,48.955,11.439L436.024,402.695z'%3E%3C/path%3E%3Cpath style='fill:%23E6E6E6;' d='M181.61,299.581l64.844,40.281l139.48-224.536C408.18,79.513,397.183,32.447,361.37,10.2l0,0 L181.61,299.581z'%3E%3C/path%3E%3Cpath style='fill:%23E8655A;' d='M76.995,324.192l-38.118,61.362c-22.18,35.706-11.215,82.63,24.49,104.809l0,0 c35.706,22.18,82.63,11.215,104.809-24.49l78.278-126.013l-64.65-40.16C146.1,277.523,99.174,288.488,76.995,324.192z M108.801,349.855c10.36-16.678,32.278-21.799,48.956-11.439l0,0c16.678,10.36,21.799,32.278,11.439,48.955l-32.824,52.841 c-10.36,16.678-32.278,21.799-48.956,11.439l0,0c-16.678-10.36-21.799-32.278-11.439-48.955L108.801,349.855z'%3E%3C/path%3E%3Cg%3E%3Cpath style='fill:%23603813;' d='M218.398,160.423l-3.71-5.971c-2.97-4.784-9.259-6.254-14.046-3.281 c-4.785,2.973-6.254,9.261-3.281,14.046l3.71,5.971c1.932,3.109,5.263,4.818,8.674,4.818c1.837,0,3.697-0.497,5.373-1.537 C219.902,171.496,221.37,165.207,218.398,160.423z'%3E%3C/path%3E%3Cpath style='fill:%23603813;' d='M481.787,380.172l-38.118-61.362c-23.248-37.425-70.666-50.855-109.652-32.721l-21.076-33.929 l81.657-131.452c25.179-40.533,12.687-93.992-27.846-119.172c-2.297-1.427-5.067-1.883-7.703-1.268 c-2.635,0.616-4.915,2.252-6.343,4.55L256,160.497L159.294,4.818c-1.427-2.298-3.709-3.934-6.343-4.55 c-2.634-0.616-5.406-0.159-7.703,1.268c-40.532,25.179-53.024,78.639-27.846,119.172l81.658,131.453l-21.076,33.929 c-38.986-18.135-86.405-4.705-109.652,32.721l-38.118,61.362C5.102,420.599,17.56,473.917,57.986,499.029 c14.142,8.785,29.862,12.972,45.402,12.972c28.878,0,57.129-14.461,73.455-40.744l78.277-126.012l0.882-1.421l0.882,1.421 l78.277,126.012c16.328,26.285,44.574,40.744,73.455,40.744c15.536,0,31.26-4.188,45.401-12.972 C494.441,473.916,506.899,420.598,481.787,380.172z M316.344,296.299l-38.522,23.93l-8.993,5.586l-0.821-1.322l32.926-53.004 L316.344,296.299z M134.731,109.944c-10.809-17.401-12.527-37.917-6.473-55.971l50.651,81.539c1.932,3.11,5.263,4.819,8.674,4.819 c1.837,0,3.696-0.497,5.372-1.537c4.785-2.973,6.256-9.261,3.282-14.046l-56.73-91.324c2.461-3.045,5.216-5.897,8.255-8.509 l96.23,154.913l-32.926,53.004L134.731,109.944z M364.238,24.915c3.039,2.613,5.795,5.464,8.255,8.509l-38.222,61.53 c-2.973,4.785-1.503,11.074,3.282,14.046c1.676,1.041,3.535,1.537,5.372,1.537c3.411,0,6.742-1.709,8.674-4.819l32.144-51.746 c6.055,18.054,4.336,38.57-6.473,55.971L243.171,325.815l-47.515-29.516L364.238,24.915z M159.513,460.492 c-12.469,20.072-34.04,31.116-56.094,31.114c-11.864,0-23.872-3.198-34.67-9.906c-30.87-19.177-40.383-59.892-21.207-90.763 l38.118-61.362c19.177-30.871,59.892-40.384,90.763-21.207l55.985,34.777L159.513,460.492z M443.252,481.7 c-30.873,19.177-71.589,9.661-90.764-21.207l-72.894-117.348l55.985-34.777c30.871-19.177,71.587-9.662,90.763,21.207 l38.118,61.362C483.634,421.807,474.121,462.523,443.252,481.7z'%3E%3C/path%3E%3Cpath style='fill:%23603813;' d='M411.864,344.472c-6.448-10.38-16.553-17.628-28.452-20.409c-11.899-2.781-24.169-0.761-34.55,5.687 c-21.429,13.312-28.032,41.575-14.721,63.002l32.824,52.841c8.655,13.933,23.628,21.598,38.937,21.597 c8.235,0,16.57-2.219,24.065-6.876c21.429-13.312,28.032-41.575,14.721-63.002L411.864,344.472z M419.203,442.986 c-11.874,7.375-27.532,3.718-34.911-8.158l-32.824-52.841c-7.374-11.874-3.717-27.533,8.157-34.909 c4.067-2.526,8.657-3.826,13.328-3.826c1.935,0,3.885,0.223,5.816,0.674c6.593,1.541,12.192,5.557,15.765,11.309l32.825,52.841 C434.735,419.951,431.077,435.611,419.203,442.986z'%3E%3C/path%3E%3Cpath style='fill:%23603813;' d='M163.138,329.751c-10.379-6.447-22.649-8.469-34.55-5.687c-11.899,2.78-22.003,10.028-28.451,20.408 l-32.825,52.841C54,418.74,60.605,447.003,82.033,460.315c7.497,4.656,15.829,6.876,24.065,6.876 c15.308,0,30.282-7.666,38.937-21.597l32.824-52.841C191.171,371.325,184.566,343.063,163.138,329.751z M160.531,381.988 l-32.824,52.841c-7.377,11.876-23.037,15.532-34.911,8.158c-11.874-7.375-15.532-23.035-8.157-34.909l32.825-52.841l0,0 c3.573-5.752,9.172-9.767,15.765-11.308c1.933-0.451,3.881-0.674,5.816-0.674c4.671,0,9.261,1.299,13.328,3.826 C164.247,354.456,167.906,370.116,160.531,381.988z'%3E%3C/path%3E%3Cpath style='fill:%23603813;' d='M257.295,266.804c5.632,0,10.2-4.566,10.2-10.2v-9.115c0-5.633-4.568-10.2-10.2-10.2 c-5.632,0-10.2,4.566-10.2,10.2v9.115C247.095,262.237,251.663,266.804,257.295,266.804z'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/svg%3E",m1=document.createElement("img");m1.src=e1;const T1="data:image/svg+xml,%3Csvg viewBox='0 0 1024 1024' class='icon' version='1.1' xmlns='http://www.w3.org/2000/svg' fill='%23000000'%3E%3Cg id='SVGRepo_bgCarrier' stroke-width='0'%3E%3C/g%3E%3Cg id='SVGRepo_tracerCarrier' stroke-linecap='round' stroke-linejoin='round'%3E%3C/g%3E%3Cg id='SVGRepo_iconCarrier'%3E%3Cpath d='M724.3 198H296.1l54.1-146.6h320z' fill='%23FAFCFB'%3E%3C/path%3E%3Cpath d='M724.3 216.5H296.1c-6.1 0-11.7-3-15.2-7.9-3.5-5-4.3-11.3-2.2-17L332.8 45c2.7-7.3 9.6-12.1 17.4-12.1h320c7.7 0 14.7 4.8 17.4 12.1l54.1 146.6c2.1 5.7 1.3 12-2.2 17-3.5 4.9-9.2 7.9-15.2 7.9z m-401.6-37h375.1L657.3 69.9H363.1l-40.4 109.6z' fill='%230F0F0F'%3E%3C/path%3E%3Cpath d='M664.3 981.6H339.7c-54.2 0-98.5-43.3-99.6-97.5L223.7 235h572.9l-32.8 651.4c-2.3 53.2-46.1 95.2-99.5 95.2z' fill='%239DC6AF'%3E%3C/path%3E%3Cpath d='M664.3 995H339.7c-29.7 0-57.8-11.4-79-32.2-21.2-20.8-33.3-48.6-34-78.3L210 221.6h600.7L777.2 887c-2.6 60.5-52.2 108-112.9 108zM237.4 248.3l16 635.5c0.5 22.7 9.7 44 25.9 59.8 16.2 15.9 37.7 24.6 60.4 24.6h324.6c46.3 0 84.2-36.2 86.2-82.5l32.1-637.4H237.4z' fill='%23191919'%3E%3C/path%3E%3Cpath d='M827.1 239.5H193.3c-22.2 0-40.4-18.2-40.4-40.4v-2.2c0-22.2 18.2-40.4 40.4-40.4h633.8c22.2 0 40.4 18.2 40.4 40.4v2.2c0 22.2-18.2 40.4-40.4 40.4z' fill='%23D39E33'%3E%3C/path%3E%3Cpath d='M826 252.9H194.4c-30.3 0-54.9-24.6-54.9-54.9 0-30.3 24.6-54.9 54.9-54.9H826c30.3 0 54.9 24.6 54.9 54.9s-24.7 54.9-54.9 54.9z m-631.6-83.1c-15.5 0-28.2 12.6-28.2 28.2s12.6 28.2 28.2 28.2H826c15.5 0 28.2-12.6 28.2-28.2 0-15.5-12.6-28.2-28.2-28.2H194.4z' fill='%23111111'%3E%3C/path%3E%3Cpath d='M354.6 430.3v369.6' fill='%23FAFCFB'%3E%3C/path%3E%3Cpath d='M354.6 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c-0.1 7.4-6 13.4-13.4 13.4z' fill='%230F0F0F'%3E%3C/path%3E%3Cpath d='M458.3 430.3v369.6' fill='%23FAFCFB'%3E%3C/path%3E%3Cpath d='M458.3 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c0 7.4-6 13.4-13.4 13.4z' fill='%230F0F0F'%3E%3C/path%3E%3Cpath d='M562.1 430.3v369.6' fill='%23FAFCFB'%3E%3C/path%3E%3Cpath d='M562.1 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c-0.1 7.4-6.1 13.4-13.4 13.4z' fill='%230F0F0F'%3E%3C/path%3E%3Cpath d='M665.8 430.3v369.6' fill='%23FAFCFB'%3E%3C/path%3E%3Cpath d='M665.8 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c0 7.4-6 13.4-13.4 13.4z' fill='%230F0F0F'%3E%3C/path%3E%3C/g%3E%3C/svg%3E",G1=document.createElement("img");G1.src=T1;function P1(gv){return function(ov,Lv,Rv,$y,Iv){var Cv=this.cornerSize;ov.save(),ov.translate(Lv,Rv),ov.rotate(fabric.fabric.util.degreesToRadians(Iv.angle)),ov.drawImage(gv,-Cv/2,-Cv/2,Cv,Cv),ov.restore()}}return fabric.fabric.Object.prototype.controls.removeBg=new fabric.fabric.Control({x:-.48,y:-.41,offsetY:16,cursorStyle:"pointer",mouseUpHandler:h1,render:P1(l1),cornerSize:60}),fabric.fabric.Object.prototype.controls.crop=new fabric.fabric.Control({x:-.48,y:-.48,offsetY:16,cursorStyle:"pointer",mouseUpHandler:f1,render:P1(m1),cornerSize:60}),fabric.fabric.Object.prototype.controls.delete=new fabric.fabric.Control({x:.5,y:-.48,offsetY:16,cursorStyle:"pointer",mouseUpHandler:I1,render:P1(G1),cornerSize:60}),(R1=a.current)==null||R1.on("mouse:up",q1),(D1=a.current)==null||D1.on("mouse:down",c1),(K1=a.current)==null||K1.on("mouse:move",B1),(vv=a.current)==null||vv.on("path:created",()=>{V0()}),(yv=a.current)==null||yv.on("mouse:wheel",function(gv){var Lv,Rv;const qv=gv.e.deltaY;let ov=(Lv=a.current)==null?void 0:Lv.getZoom();ov*=.999**qv,ov>20&&(ov=20),ov<.01&&(ov=.01),(Rv=a.current)==null||Rv.zoomToPoint({x:gv.e.offsetX,y:gv.e.offsetY},ov),gv.e.preventDefault(),gv.e.stopPropagation()}),()=>{var gv;(gv=a.current)==null||gv.dispose()}},[]),reactExports.useEffect(()=>{const h0=a.current;if(!h0)return;const Q0=l1=>{const{ctx:e1}=l1,m1="rgba(0, 0, 0, 0.7)",T1=(h0==null?void 0:h0.width)??0,G1=(h0==null?void 0:h0.height)??0;if(e1){e1.save(),e1.beginPath(),e1.moveTo(0,0),e1.lineTo(T1,0),e1.lineTo(T1,G1),e1.lineTo(0,G1),e1.lineTo(0,0),e1.transform.apply(e1,Array.from(h0.viewportTransform));let P1,I0,p1;const[x1,R1]=vt.split(":").map(Number);T1/x1<G1/R1?(P1=T1,p1=R1/x1,I0=T1*p1):(I0=G1,p1=x1/R1,P1=G1*p1),debugLog(LOG_LEVELS.DEBUG,"window size",$0),debugLog(LOG_LEVELS.DEBUG,"fabric width",T1,"fabric height",G1),debugLog(LOG_LEVELS.DEBUG,"clipWidth",P1,"clipHeight",I0),Yr({scaledWidth:P1,scaledHeight:I0});const D1=(T1-P1)/2,K1=(G1-I0)/2;debugLog(LOG_LEVELS.DEBUG,"clipX",D1,"clipY",K1),e1.moveTo(D1,K1),e1.lineTo(D1,K1+I0),e1.lineTo(D1+P1,K1+I0),e1.lineTo(D1+P1,K1),e1.closePath(),e1.fillStyle=m1,e1.fill(),e1.restore()}};return a.current.on("after:render",Q0),()=>{a.current&&a.current.off("after:render",Q0)}},[vt]);const q1=reactExports.useCallback(h0=>{isMidClick(h0)&&(x0.current=!1)},[]),c1=reactExports.useCallback(h0=>{if(isMidClick(h0)){const Q0=h0.e;x0.current=!0,S0.current=Q0.clientX,R0.current=Q0.clientY}},[]),B1=reactExports.useCallback(h0=>{if(x0.current){if(!a.current)return;const Q0=h0.e,l1=a.current.viewportTransform;l1[4]+=Q0.clientX-S0.current,l1[5]+=Q0.clientY-R0.current,a.current.requestRenderAll(),S0.current=Q0.clientX,R0.current=Q0.clientY}},[a.current]);reactExports.useEffect(()=>{if(!a.current||zo.length===0)return;const h0=zo[zo.length-1],Q0=JSON.parse(h0.data);a.current.loadFromJSON(Q0,a.current.renderAll.bind(a.current))},[zo]),reactExports.useEffect(()=>{a.current&&(a.current.freeDrawingBrush.width=n0)},[n0]);const nv=()=>Qo.length!==0,iv=reactExports.useCallback(()=>{a.current&&(a.current.zoomToPoint({x:a.current.width/2,y:a.current.height/2},wn),a.current.setViewportTransform([1,0,0,1,0,0]),a.current.requestRenderAll())},[]);useHotKey("Escape",()=>{jr||(f0?P0(!1):iv())},[f0,d,iv]);const dv=()=>{Kt()};useHotKey("meta+z,ctrl+z",dv);const $1=h0=>{h0.preventDefault(),tr()};useHotKey("shift+ctrl+z,shift+meta+z",$1),useKeyPressEvent("Tab",h0=>{h0==null||h0.preventDefault(),h0==null||h0.stopPropagation(),nv()&&Xr(()=>(window.setTimeout(()=>{C0(100)},10),!0))},h0=>{h0==null||h0.preventDefault(),h0==null||h0.stopPropagation(),nv()&&(window.setTimeout(()=>{C0(0)},10),window.setTimeout(()=>{Xr(!1)},COMPARE_SLIDER_DURATION_MS))});const rv=(h0,Q0,l1)=>{h0.getObjects().forEach(m1=>m1.set({visible:!1})),Q0.forEach(m1=>m1.set({visible:!0})),h0.renderAll();const e1=document.createElement("a");e1.href=h0.toDataURL({format:"png"}),e1.download=l1,e1.click(),h0.getObjects().forEach(m1=>m1.set({visible:!0})),h0.renderAll()};useHotKey("meta+s,ctrl+s",h0=>{const Q0=a.current;if(Q0){const l1=Q0.getObjects().filter(e1=>e1.type===h0);rv(Q0,l1,`${h0}.png`)}}),reactExports.useCallback(()=>{if(jr)return"default";if(m0)return"grab";if(ko)return"none"},[ko,m0,jr]),useHotKey("[",()=>{t0()},[t0]),useHotKey("]",()=>{c0()},[c0]),useKeyPressEvent(" ",h0=>{c||(h0==null||h0.preventDefault(),h0==null||h0.stopPropagation(),_n(!1),p0(!0))},h0=>{c||(h0==null||h0.preventDefault(),h0==null||h0.stopPropagation(),_n(!0),p0(!1))}),useKeyPressEvent("Alt",h0=>{c||(h0==null||h0.preventDefault(),h0==null||h0.stopPropagation(),l0(!0))},h0=>{c||(h0==null||h0.preventDefault(),h0==null||h0.stopPropagation(),l0(!1))});const w0=h0=>{Tt(h0),i0||(a0(!0),window.setTimeout(()=>{a0(!1)},1e4))},T0=()=>jsxRuntimeExports.jsxs("div",{className:"relative top-[60px] bg-stone-600",children:[jsxRuntimeExports.jsx("canvas",{className:cn$1(jr?"pointer-events-none animate-pulse duration-600":""),ref:s,style:{clipPath:`inset(0 ${M0}% 0 0)`,transition:`clip-path ${COMPARE_SLIDER_DURATION_MS}ms`}}),jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute top-0",style:{width:`${et}px`,height:`${at}px`},children:e0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 z-10 bg-primary h-full w-[6px] justify-self-end",style:{marginRight:`${M0}%`,transition:`margin-right ${COMPARE_SLIDER_DURATION_MS}ms`}}),jsxRuntimeExports.jsx("img",{className:"absolute ",src:In.src,alt:"original",style:{width:`${et}px`,height:`${at}px`}})]})})]}),F0=()=>{var x1;const h0=predefinedRatios.find(R1=>R1.name===vt);if(!h0){console.error("Invalid aspect ratio");return}const{width:Q0,height:l1}=h0,e1=($0.width-g)/2,m1=($0.height-$t)/2,T1=new fabric.fabric.Canvas(null,{width:Q0,height:l1}),G1=Q0/g,P1=l1/$t;(x1=a.current)==null||x1.getObjects().forEach(R1=>{const D1=fabric.fabric.util.object.clone(R1);D1.set({left:(D1.left-e1)*G1,top:(D1.top-m1)*P1,scaleX:D1.scaleX*G1,scaleY:D1.scaleY*P1}),T1.add(D1)}),T1.renderAll();const I0=T1.toDataURL({format:"png",quality:1}),p1=document.createElement("a");p1.href=I0,p1.download="canvas.png",document.body.appendChild(p1),p1.click(),document.body.removeChild(p1)},U0=h0=>{const Q0=a.current;Q0&&(Q0.isDrawingMode=h0)};return jsxRuntimeExports.jsxs("div",{className:"flex w-screen h-screen justify-center items-center","aria-hidden":"true",children:[T0(),jsxRuntimeExports.jsxs("div",{className:"fixed flex bottom-5 border px-4 py-2 rounded-[3rem] gap-8 items-center justify-center backdrop-filter backdrop-blur-md bg-background/70",children:[jsxRuntimeExports.jsx(Slider,{className:"w-48",defaultValue:[50],min:MIN_BRUSH_SIZE,max:MAX_BRUSH_SIZE,step:1,tabIndex:-1,value:[n0],onValueChange:h0=>w0(h0[0]),onClick:()=>a0(!1)}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(IconButton,{tooltip:"Reset zoom & pan",onClick:iv,children:jsxRuntimeExports.jsx(Expand,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Undo",onClick:dv,disabled:rr,children:jsxRuntimeExports.jsx(Undo,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Redo",onClick:$1,disabled:Lr,children:jsxRuntimeExports.jsx(Redo,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Show original image",onPointerDown:h0=>{h0.preventDefault(),Xr(()=>(window.setTimeout(()=>{C0(100)},10),!0))},onPointerUp:()=>{window.setTimeout(()=>{C0(0)},10),window.setTimeout(()=>{Xr(!1)},COMPARE_SLIDER_DURATION_MS)},disabled:Qo.length===0,children:jsxRuntimeExports.jsx(Eye,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Save Image",onClick:()=>F0(),children:jsxRuntimeExports.jsx(Download,{})}),jsxRuntimeExports.jsx(IconButton,{tooltip:"Run Inpainting",disabled:jr||!E0()&&Mo.length===0,onClick:()=>{No("lama")},children:jsxRuntimeExports.jsx(Eraser,{})}),jsxRuntimeExports.jsx(Toggle,{"aria-label":"Toggle italic",defaultPressed:b.showDrawing,onPressedChange:h0=>{st({showDrawing:h0}),U0(h0),h0&&st({showSelectable:!1})},children:jsxRuntimeExports.jsx(Paintbrush,{})})]})]})]})}),ImageSize=()=>{const[a,s]=useStore(c=>[c.imageWidth,c.imageHeight]);return!a||!s?null:jsxRuntimeExports.jsxs("div",{className:"border rounded-lg px-2 py-[6px] z-10 bg-background",children:[a,"x",s]})},Sheet=$5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,SheetTrigger=$5d3850c4d0b4e6c7$export$41fb9f06171c75f4,SheetPortal=$5d3850c4d0b4e6c7$export$602eac185826482c,SheetOverlay=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{className:cn$1("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:c}));SheetOverlay.displayName=$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff.displayName;const sheetVariants=cva("fixed gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),SheetContent=reactExports.forwardRef(({side:a="right",className:s,children:c,...d},et)=>jsxRuntimeExports.jsxs(SheetPortal,{children:[jsxRuntimeExports.jsx(SheetOverlay,{}),jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{ref:et,className:cn$1(sheetVariants({side:a}),s),...d,children:c})]}));SheetContent.displayName=$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2.displayName;const SheetHeader=({className:a,...s})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-2 text-center sm:text-left",a),...s});SheetHeader.displayName="SheetHeader";const SheetTitle=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f99233281efd08a0,{ref:c,className:cn$1("text-lg font-semibold text-foreground",a),...s}));SheetTitle.displayName=$5d3850c4d0b4e6c7$export$f99233281efd08a0.displayName;const SheetDescription=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$393edc798c47379d,{ref:c,className:cn$1("text-sm text-muted-foreground",a),...s}));SheetDescription.displayName=$5d3850c4d0b4e6c7$export$393edc798c47379d.displayName;const RowContainer$1=({children:a})=>jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center pr-2",children:a}),LabelTitle=({text:a,toolTip:s="",url:c,htmlFor:d,disabled:et=!1})=>jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Label$1,{htmlFor:d||a.toLowerCase().replace(" ","-"),className:"font-medium",disabled:et,children:a})}),s||c?jsxRuntimeExports.jsxs(TooltipContent,{className:"flex flex-col max-w-xs text-sm",side:"left",children:[jsxRuntimeExports.jsx("p",{children:s}),c?jsxRuntimeExports.jsx(Button,{variant:"link",className:"justify-end",children:jsxRuntimeExports.jsx("a",{href:c,target:"_blank",children:"More info"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]}),LDMOptions=()=>{const[a,s]=useStore(c=>[c.settings,c.updateSettings]);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"steps",text:"Steps",toolTip:"The number of denoising steps. More denoising steps usually lead to a higher quality image at the expense of slower inference."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[30],min:1,max:100,step:1,value:[Math.floor(a.ldmSteps)],onValueChange:c=>s({ldmSteps:c[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"steps",className:"w-[60px] rounded-full",numberValue:a.ldmSteps,allowFloat:!1,onNumberValueChange:c=>{s({ldmSteps:c})}})]})]}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Sampler"}),jsxRuntimeExports.jsxs(Select,{value:a.ldmSampler,onValueChange:c=>{s({ldmSampler:c})},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[100px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select sampler"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(LDMSampler).map(c=>jsxRuntimeExports.jsx(SelectItem,{value:c,children:c},c))})})]})]})]})},ExtenderButton=({text:a,onClick:s})=>{const[c]=useStore(d=>[d.settings.showExtender]);return jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",disabled:!c,onClick:s,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:a})})},DiffusionOptions=()=>{const[a,s,c,d,et,g,at,$t,vt,b,pt]=useStore(zo=>[zo.serverConfig.samplers,zo.settings,zo.paintByExampleFile,zo.getIsProcessing(),zo.updateSettings,zo.runInpainting,zo.updateAppState,zo.updateExtenderByBuiltIn,zo.updateExtenderDirection,zo.adjustMask,zo.clearMask]),[st,wt]=useImage(c),Tt=reactExports.useRef(null),{t:Ct}=useTranslation();useClickAway(Tt,()=>{Tt!=null&&Tt.current&&Tt.current.blur()});const jt=zo=>{zo.key==="Enter"&&zo.ctrlKey&&s.prompt.length!==0&&g()},Lt=()=>jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:Ct("Cropper"),toolTip:"Inpainting on part of image, improve inference speed and reduce memory usage."}),jsxRuntimeExports.jsx(Switch,{id:"cropper",checked:s.showCropper,onCheckedChange:zo=>{et({showCropper:zo}),zo&&et({showExtender:!1})}})]}),Ht=()=>s.model.support_controlnet?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pr-2",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"ControlNet",toolTip:"Using an additional conditioning image to control how an image is generated",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#controlnet"}),jsxRuntimeExports.jsx(Switch,{id:"controlnet",checked:s.enableControlnet,onCheckedChange:zo=>{et({enableControlnet:zo})}})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1",children:jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[100],min:1,max:100,step:1,disabled:!s.enableControlnet,value:[Math.floor(s.controlnetConditioningScale*100)],onValueChange:zo=>et({controlnetConditioningScale:zo[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"controlnet-weight",className:"w-[60px] rounded-full",disabled:!s.enableControlnet,numberValue:s.controlnetConditioningScale,allowFloat:!1,onNumberValueChange:zo=>{et({controlnetConditioningScale:zo})}})]})}),jsxRuntimeExports.jsx("div",{className:"pr-2",children:jsxRuntimeExports.jsxs(Select,{defaultValue:s.controlnetMethod,value:s.controlnetMethod,onValueChange:zo=>{et({controlnetMethod:zo})},disabled:!s.enableControlnet,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select control method"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(s.model.controlnets).map(zo=>jsxRuntimeExports.jsx(SelectItem,{value:zo,children:zo.split("/")[1]},zo))})})]})})]}),jsxRuntimeExports.jsx(Separator$1,{})]}):null,Gt=()=>s.model.support_lcm_lora?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"LCM LoRA",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inference_with_lcm_lora",toolTip:"Enable quality image generation in typically 2-4 steps. Suggest disabling guidance_scale by setting it to 0. You can also try values between 1.0 and 2.0. When LCM Lora is enabled, LCMSampler will be used automatically."}),jsxRuntimeExports.jsx(Switch,{id:"lcm-lora",checked:s.enableLCMLora,onCheckedChange:zo=>{et({enableLCMLora:zo})}})]}),jsxRuntimeExports.jsx(Separator$1,{})]}):null,Kt=()=>s.model.support_freeu?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pr-2",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"FreeU",toolTip:"FreeU is a technique for improving image quality. Different models may require different FreeU-specific hyperparameters, which can be viewed in the more info section.",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/freeu"}),jsxRuntimeExports.jsx(Switch,{id:"freeu",checked:s.enableFreeu,onCheckedChange:zo=>{et({enableFreeu:zo})}})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-s1",text:"s1",disabled:!s.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-s1",className:"w-14",disabled:!s.enableFreeu,numberValue:s.freeuConfig.s1,allowFloat:!0,onNumberValueChange:zo=>{et({freeuConfig:{...s.freeuConfig,s1:zo}})}})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-s2",text:"s2",disabled:!s.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-s2",className:"w-14",disabled:!s.enableFreeu,numberValue:s.freeuConfig.s2,allowFloat:!0,onNumberValueChange:zo=>{et({freeuConfig:{...s.freeuConfig,s2:zo}})}})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-b1",text:"b1",disabled:!s.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-b1",className:"w-14",disabled:!s.enableFreeu,numberValue:s.freeuConfig.b1,allowFloat:!0,onNumberValueChange:zo=>{et({freeuConfig:{...s.freeuConfig,b1:zo}})}})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"freeu-b2",text:"b2",disabled:!s.enableFreeu}),jsxRuntimeExports.jsx(NumberInput,{id:"freeu-b2",className:"w-14",disabled:!s.enableFreeu,numberValue:s.freeuConfig.b2,allowFloat:!0,onNumberValueChange:zo=>{et({freeuConfig:{...s.freeuConfig,b2:zo}})}})]})]})]}),jsxRuntimeExports.jsx(Separator$1,{})]}):null,tr=()=>s.model.need_prompt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Negative prompt",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#negative-prompt",toolTip:"Negative prompt guides the model away from generating certain things in an image"}),jsxRuntimeExports.jsx("div",{className:"pl-2 pr-4",children:jsxRuntimeExports.jsx(Textarea,{ref:Tt,rows:4,onKeyUp:jt,className:"max-h-[8rem] overflow-y-auto mb-2",placeholder:"",id:"negative-prompt",value:s.negativePrompt,onInput:zo=>{zo.preventDefault(),zo.stopPropagation();const e0=zo.target;et({negativePrompt:e0.value})}})})]}):null,rr=()=>s.model.name!==PAINT_BY_EXAMPLE?null:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Example Image",toolTip:"An example image to guide image generation."}),jsxRuntimeExports.jsx(ImageUploadButton,{tooltip:"Upload example image",onFileUpload:zo=>{at({paintByExampleFile:zo})},children:jsxRuntimeExports.jsx(Upload,{})})]}),wt?jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center",children:jsxRuntimeExports.jsx("img",{src:st.src,alt:"example",className:"max-w-[200px] max-h-[200px] m-3"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(Button,{variant:"default",className:"w-full",disabled:d||!wt,onClick:()=>{g("Fantasy-Studio/Paint-by-Example")},children:"Paint"})]}),Lr=()=>s.model.name!==INSTRUCT_PIX2PIX?null:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Image guidance scale",toolTip:"Push the generated image towards the inital image. Higher image guidance scale encourages generated images that are closely linked to the source image, usually at the expense of lower image quality.",url:"https://huggingface.co/docs/diffusers/main/en/api/pipelines/pix2pix"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[150],min:100,max:1e3,step:1,value:[Math.floor(s.p2pImageGuidanceScale*100)],onValueChange:zo=>et({p2pImageGuidanceScale:zo[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"image-guidance-scale",className:"w-[60px] rounded-full",numberValue:s.p2pImageGuidanceScale,allowFloat:!0,onNumberValueChange:zo=>{et({p2pImageGuidanceScale:zo})}})]})]}),jr=()=>s.model.support_strength?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Strength",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#strength",toolTip:"Strength is a measure of how much noise is added to the base image, which influences how similar the output is to the base image. Higher value means more noise and more different from the base image"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[100],min:10,max:100,step:1,value:[Math.floor(s.sdStrength*100)],onValueChange:zo=>et({sdStrength:zo[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"strength",className:"w-[60px] rounded-full",numberValue:s.sdStrength,allowFloat:!0,onNumberValueChange:zo=>{et({sdStrength:zo})}})]})]}):null,Yr=()=>s.model.support_outpainting?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Extender",toolTip:"Perform outpainting on images to expand it's content."}),jsxRuntimeExports.jsx(Switch,{id:"extender",checked:s.showExtender,onCheckedChange:zo=>{et({showExtender:zo}),zo&&et({showCropper:!1})}})]}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsxs(Select,{defaultValue:s.extenderDirection,value:s.extenderDirection,onValueChange:zo=>{vt(zo)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[65px] h-7",disabled:!s.showExtender,children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select axis"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(ExtenderDirection).map(zo=>jsxRuntimeExports.jsx(SelectItem,{value:zo,children:zo},zo))})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 justify-center mt-0",children:[jsxRuntimeExports.jsx(ExtenderButton,{text:"1.25x",onClick:()=>$t(s.extenderDirection,1.25)}),jsxRuntimeExports.jsx(ExtenderButton,{text:"1.5x",onClick:()=>$t(s.extenderDirection,1.5)}),jsxRuntimeExports.jsx(ExtenderButton,{text:"1.75x",onClick:()=>$t(s.extenderDirection,1.75)}),jsxRuntimeExports.jsx(ExtenderButton,{text:"2.0x",onClick:()=>$t(s.extenderDirection,2)})]})]})]}),jsxRuntimeExports.jsx(Separator$1,{})]}):null,An=()=>s.model.name!==POWERPAINT?null:jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Task",toolTip:"PowerPaint task. When using extender, image-outpainting task will be auto used. For object-removal and image-outpainting, it is recommended to set the guidance_scale at 10 or above."}),jsxRuntimeExports.jsxs(Select,{defaultValue:s.powerpaintTask,value:s.powerpaintTask,onValueChange:zo=>{et({powerpaintTask:zo})},disabled:s.showExtender,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[140px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select task"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:[PowerPaintTask.text_guided,PowerPaintTask.object_remove,PowerPaintTask.shape_guided].map(zo=>jsxRuntimeExports.jsx(SelectItem,{value:zo,children:zo},zo))})})]})]}),No=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"steps",text:"Steps",toolTip:"The number of denoising steps. More denoising steps usually lead to a higher quality image at the expense of slower inference."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[30],min:1,max:100,step:1,value:[Math.floor(s.sdSteps)],onValueChange:zo=>et({sdSteps:zo[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"steps",className:"w-[60px] rounded-full",numberValue:s.sdSteps,allowFloat:!1,onNumberValueChange:zo=>{et({sdSteps:zo})}})]})]}),o0=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Guidance scale",url:"https://huggingface.co/docs/diffusers/main/en/using-diffusers/inpaint#guidance-scale",toolTip:"Guidance scale affects how aligned the text prompt and generated image are. Higher value means the prompt and generated image are closely aligned, so the output is a stricter interpretation of the prompt"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[750],min:0,max:1500,step:1,value:[Math.floor(s.sdGuidanceScale*100)],onValueChange:zo=>et({sdGuidanceScale:zo[0]/100})}),jsxRuntimeExports.jsx(NumberInput,{id:"guidance-scale",className:"w-[60px] rounded-full",numberValue:s.sdGuidanceScale,allowFloat:!0,onNumberValueChange:zo=>{et({sdGuidanceScale:zo})}})]})]}),t0=()=>s.model.name===ANYTEXT?null:jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Sampler"}),jsxRuntimeExports.jsxs(Select,{defaultValue:s.sdSampler,value:s.sdSampler,onValueChange:zo=>{et({sdSampler:zo})},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[175px] text-xs",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select sampler"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:a.map(zo=>jsxRuntimeExports.jsx(SelectItem,{value:zo,className:"text-xs",children:zo},zo))})})]})]}),c0=()=>jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Seed",toolTip:"Using same parameters and a fixed seed can generate same result image."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[jsxRuntimeExports.jsx(Switch,{id:"seed",checked:s.seedFixed,onCheckedChange:zo=>{et({seedFixed:zo})}}),jsxRuntimeExports.jsx(NumberInput,{id:"seed",className:"w-[100px]",disabled:!s.seedFixed,numberValue:s.seed,allowFloat:!1,onNumberValueChange:zo=>{et({seed:zo})}})]})]}),n0=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Mask blur",toolTip:"How much to blur the mask before processing, in pixels. Make the generated inpainting boundaries appear more natural."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[s.sdMaskBlur],min:0,max:96,step:1,value:[Math.floor(s.sdMaskBlur)],onValueChange:zo=>et({sdMaskBlur:zo[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"mask-blur",className:"w-[60px] rounded-full",numberValue:s.sdMaskBlur,allowFloat:!1,onNumberValueChange:zo=>{et({sdMaskBlur:zo})}})]})]}),Qo=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"Match histograms",toolTip:"Match the inpainting result histogram to the source image histogram",url:"https://github.com/Sanster/lama-cleaner/pull/143#issuecomment-1325859307"}),jsxRuntimeExports.jsx(Switch,{id:"match-histograms",checked:s.sdMatchHistograms,onCheckedChange:zo=>{et({sdMatchHistograms:zo})}})]}),jsxRuntimeExports.jsx(Separator$1,{})]}),Mo=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(LabelTitle,{htmlFor:"adjustMaskKernelSize",text:Ct("Adjust Mask"),toolTip:"Expand or shrink mask. Using the slider to adjust the kernel size for dilation or erosion."}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[12],min:1,max:100,step:1,value:[Math.floor(s.adjustMaskKernelSize)],onValueChange:zo=>et({adjustMaskKernelSize:zo[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"adjustMaskKernelSize",className:"w-[60px] rounded-full",numberValue:s.adjustMaskKernelSize,allowFloat:!1,onNumberValueChange:zo=>{et({adjustMaskKernelSize:zo})}})]}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1 justify-start",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",onClick:()=>b("expand"),disabled:d,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:Ct("Expand")})}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",onClick:()=>b("shrink"),disabled:d,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:Ct("Shrink")})}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8",onClick:()=>b("reverse"),disabled:d,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:Ct("Reverse")})})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"p-1 h-8 justify-self-end",onClick:pt,disabled:d,children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 select-none",children:Ct("Clear")})})]})]}),jsxRuntimeExports.jsx(Separator$1,{})]});return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[Lt(),Yr(),Mo(),An(),No(),o0(),Lr(),jr(),t0(),c0(),tr(),jsxRuntimeExports.jsx(Separator$1,{}),Ht(),Gt(),n0(),Qo(),Kt(),rr()]})},CV2Options=()=>{const[a,s]=useStore(c=>[c.settings,c.updateSettings]);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(LabelTitle,{text:"CV2 Flag",url:"https://docs.opencv.org/4.8.0/d7/d8b/group__photo__inpaint.html#gga8002a65f5a3328fbf15df81b842d3c3ca892824c38e258feb5e72f308a358d52e"}),jsxRuntimeExports.jsxs(Select,{value:a.cv2Flag,onValueChange:c=>{s({cv2Flag:c})},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[160px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select flag"})}),jsxRuntimeExports.jsx(SelectContent,{align:"end",children:jsxRuntimeExports.jsx(SelectGroup,{children:Object.values(CV2Flag).map(c=>jsxRuntimeExports.jsx(SelectItem,{value:c,children:c},c))})})]})]}),jsxRuntimeExports.jsx(LabelTitle,{text:"CV2 Radius",url:"https://docs.opencv.org/4.8.0/d7/d8b/group__photo__inpaint.html#gga8002a65f5a3328fbf15df81b842d3c3ca892824c38e258feb5e72f308a358d52e"}),jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx(Slider,{className:"w-[180px]",defaultValue:[5],min:1,max:100,step:1,value:[Math.floor(a.cv2Radius)],onValueChange:c=>s({cv2Radius:c[0]})}),jsxRuntimeExports.jsx(NumberInput,{id:"cv2-radius",className:"w-[60px] rounded-full",numberValue:a.cv2Radius,allowFloat:!1,onNumberValueChange:c=>{s({cv2Radius:c})}})]})]})},RightSidePanel=()=>{const[a,s]=useStore(g=>[g.settings,g.windowSize]),[c,d]=useToggle(!0);if(useHotKey("c",()=>{d()}),a.model.name!==LDM&&a.model.name!==CV2&&a.model.model_type===MODEL_TYPE_INPAINT)return null;const et=()=>a.model.name===LDM?jsxRuntimeExports.jsx(LDMOptions,{}):a.model.name===CV2?jsxRuntimeExports.jsx(CV2Options,{}):jsxRuntimeExports.jsx(DiffusionOptions,{});return jsxRuntimeExports.jsxs(Sheet,{open:c,modal:!1,children:[jsxRuntimeExports.jsx(SheetTrigger,{tabIndex:-1,className:"z-10 outline-none absolute top-[68px] right-6 rounded-lg border bg-background",hidden:c,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",asChild:!0,className:"p-1.5",onClick:d,children:jsxRuntimeExports.jsx(ChevronLeft,{strokeWidth:1})})}),jsxRuntimeExports.jsxs(SheetContent,{side:"right",className:"w-[300px] mt-[60px] outline-none pl-4 pr-1",onOpenAutoFocus:g=>g.preventDefault(),onPointerDownOutside:g=>g.preventDefault(),children:[jsxRuntimeExports.jsxs(SheetHeader,{children:[jsxRuntimeExports.jsxs(RowContainer$1,{children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden mr-8",children:a.model.name.split("/")[a.model.name.split("/").length-1]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"border h-6 w-6",onClick:d,children:jsxRuntimeExports.jsx(ChevronRight,{strokeWidth:1})})]}),jsxRuntimeExports.jsx(Separator$1,{})]}),jsxRuntimeExports.jsx(ScrollArea,{style:{height:s.height-160},className:"pr-3",children:et()})]})]})},RowContainer=({children:a})=>jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center pr-2",children:a}),CanvasOptions=()=>{const[a,s,c,d]=useStore($t=>[$t.serverConfig.samplers,$t.settings,$t.paintByExampleFile,$t.getIsProcessing(),$t.updateSettings,$t.runInpainting,$t.updateAppState]);useImage(a),useTranslation();const{fabricRef:et}=useRefContext(),g=$t=>{const vt=et.current;if(vt){const b=vt==null?void 0:vt.getActiveObject();if(!b)return;switch($t){case"toFront":vt.bringToFront(b);break;case"toBack":vt.sendToBack(b);break;case"toForward":vt.bringForward(b);break;case"toBackward":vt.sendBackwards(b)}vt.discardActiveObject(),vt.renderAll()}},at=()=>{const $t=[{label:"toForward",icon:jsxRuntimeExports.jsx(ArrowUpIcon,{className:"h-4 w-4"}),tooltip:"Forward"},{label:"toFront",icon:jsxRuntimeExports.jsx(DoubleArrowUpIcon,{className:"h-4 w-4"}),tooltip:"To front"},{label:"toBackward",icon:jsxRuntimeExports.jsx(ArrowDownIcon,{className:"h-4 w-4"}),tooltip:"Backward"},{label:"toBack",icon:jsxRuntimeExports.jsx(DoubleArrowDownIcon,{className:"h-4 w-4"}),tooltip:"To back"}];return jsxRuntimeExports.jsx(RowContainer,{children:$t.map(({label:vt,icon:b,tooltip:pt})=>jsxRuntimeExports.jsx(IconButton,{tooltip:pt,onClick:()=>g(vt),children:b},vt))})};return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-4 mt-4",children:at()})},RatioOptions=()=>{const[a,s,c,d,et]=useStore(vt=>[vt.aspectRatio,vt.paintByExampleFile,vt.getIsProcessing(),vt.runInpainting,vt.updateAppState]);useTranslation();const{fabricRef:g}=useRefContext(),at=vt=>{var pt;if(g.current){switch(vt){case"Horizontal":et({aspectRatio:"16:9"});break;case"Vertical":et({aspectRatio:"9:16"});break;case"Cuadrado":et({aspectRatio:"1:1"});break}(pt=g.current)==null||pt.requestRenderAll()}},$t=()=>{const vt=[{label:"Horizontal",icon:jsxRuntimeExports.jsx(RectangleHorizontal,{className:"h-4 w-4"}),tooltip:"Horizontal"},{label:"Vertical",icon:jsxRuntimeExports.jsx(RectangleVertical,{className:"h-4 w-4"}),tooltip:"Vertical"},{label:"Cuadrado",icon:jsxRuntimeExports.jsx(Square,{className:"h-4 w-4"}),tooltip:"Cuadrado"}];return jsxRuntimeExports.jsx(RowContainer,{children:vt.map(({label:b,icon:pt,tooltip:st})=>jsxRuntimeExports.jsx(IconButton,{tooltip:st,onClick:()=>at(b),children:pt},b))})};return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-4 mt-4",children:$t()})};function createContextScope(a,s=[]){let c=[];function d(g,at){const $t=reactExports.createContext(at),vt=c.length;c=[...c,at];function b(st){const{scope:wt,children:Tt,...Ct}=st,jt=(wt==null?void 0:wt[a][vt])||$t,Lt=reactExports.useMemo(()=>Ct,Object.values(Ct));return jsxRuntimeExports.jsx(jt.Provider,{value:Lt,children:Tt})}function pt(st,wt){const Tt=(wt==null?void 0:wt[a][vt])||$t,Ct=reactExports.useContext(Tt);if(Ct)return Ct;if(at!==void 0)return at;throw new Error(`\`${st}\` must be used within \`${g}\``)}return b.displayName=g+"Provider",[b,pt]}const et=()=>{const g=c.map(at=>reactExports.createContext(at));return function($t){const vt=($t==null?void 0:$t[a])||g;return reactExports.useMemo(()=>({[`__scope${a}`]:{...$t,[a]:vt}}),[$t,vt])}};return et.scopeName=a,[d,composeContextScopes(et,...s)]}function composeContextScopes(...a){const s=a[0];if(a.length===1)return s;const c=()=>{const d=a.map(et=>({useScope:et(),scopeName:et.scopeName}));return function(g){const at=d.reduce(($t,{useScope:vt,scopeName:b})=>{const st=vt(g)[`__scope${b}`];return{...$t,...st}},{});return reactExports.useMemo(()=>({[`__scope${s.scopeName}`]:at}),[at])}};return c.scopeName=s.scopeName,c}function setRef(a,s){typeof a=="function"?a(s):a!=null&&(a.current=s)}function composeRefs(...a){return s=>a.forEach(c=>setRef(c,s))}function useComposedRefs(...a){return reactExports.useCallback(composeRefs(...a),a)}var Slot=reactExports.forwardRef((a,s)=>{const{children:c,...d}=a,et=reactExports.Children.toArray(c),g=et.find(isSlottable);if(g){const at=g.props.children,$t=et.map(vt=>vt===g?reactExports.Children.count(at)>1?reactExports.Children.only(null):reactExports.isValidElement(at)?at.props.children:null:vt);return jsxRuntimeExports.jsx(SlotClone,{...d,ref:s,children:reactExports.isValidElement(at)?reactExports.cloneElement(at,void 0,$t):null})}return jsxRuntimeExports.jsx(SlotClone,{...d,ref:s,children:c})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((a,s)=>{const{children:c,...d}=a;if(reactExports.isValidElement(c)){const et=getElementRef$1(c);return reactExports.cloneElement(c,{...mergeProps(d,c.props),ref:s?composeRefs(s,et):et})}return reactExports.Children.count(c)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:a})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a});function isSlottable(a){return reactExports.isValidElement(a)&&a.type===Slottable}function mergeProps(a,s){const c={...s};for(const d in s){const et=a[d],g=s[d];/^on[A-Z]/.test(d)?et&&g?c[d]=(...$t)=>{g(...$t),et(...$t)}:et&&(c[d]=et):d==="style"?c[d]={...et,...g}:d==="className"&&(c[d]=[et,g].filter(Boolean).join(" "))}return{...a,...c}}function getElementRef$1(a){var d,et;let s=(d=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:d.get,c=s&&"isReactWarning"in s&&s.isReactWarning;return c?a.ref:(s=(et=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:et.get,c=s&&"isReactWarning"in s&&s.isReactWarning,c?a.props.ref:a.props.ref||a.ref)}function createCollection(a){const s=a+"CollectionProvider",[c,d]=createContextScope(s),[et,g]=c(s,{collectionRef:{current:null},itemMap:new Map}),at=Tt=>{const{scope:Ct,children:jt}=Tt,Lt=React.useRef(null),Ht=React.useRef(new Map).current;return jsxRuntimeExports.jsx(et,{scope:Ct,itemMap:Ht,collectionRef:Lt,children:jt})};at.displayName=s;const $t=a+"CollectionSlot",vt=React.forwardRef((Tt,Ct)=>{const{scope:jt,children:Lt}=Tt,Ht=g($t,jt),Gt=useComposedRefs(Ct,Ht.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:Gt,children:Lt})});vt.displayName=$t;const b=a+"CollectionItemSlot",pt="data-radix-collection-item",st=React.forwardRef((Tt,Ct)=>{const{scope:jt,children:Lt,...Ht}=Tt,Gt=React.useRef(null),Kt=useComposedRefs(Ct,Gt),tr=g(b,jt);return React.useEffect(()=>(tr.itemMap.set(Gt,{ref:Gt,...Ht}),()=>void tr.itemMap.delete(Gt))),jsxRuntimeExports.jsx(Slot,{[pt]:"",ref:Kt,children:Lt})});st.displayName=b;function wt(Tt){const Ct=g(a+"CollectionConsumer",Tt);return React.useCallback(()=>{const Lt=Ct.collectionRef.current;if(!Lt)return[];const Ht=Array.from(Lt.querySelectorAll(`[${pt}]`));return Array.from(Ct.itemMap.values()).sort((tr,rr)=>Ht.indexOf(tr.ref.current)-Ht.indexOf(rr.ref.current))},[Ct.collectionRef,Ct.itemMap])}return[{Provider:at,Slot:vt,ItemSlot:st},wt,d]}var DirectionContext=reactExports.createContext(void 0);function useDirection(a){const s=reactExports.useContext(DirectionContext);return a||s||"ltr"}function composeEventHandlers(a,s,{checkForDefaultPrevented:c=!0}={}){return function(et){if(a==null||a(et),c===!1||!et.defaultPrevented)return s==null?void 0:s(et)}}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useReactId=React$1.useId||(()=>{}),count$1=0;function useId(a){const[s,c]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{c(d=>d??String(count$1++))},[a]),s?`radix-${s}`:""}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((a,s)=>{const c=reactExports.forwardRef((d,et)=>{const{asChild:g,...at}=d,$t=g?Slot:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx($t,{...at,ref:et})});return c.displayName=`Primitive.${s}`,{...a,[s]:c}},{});function dispatchDiscreteCustomEvent(a,s){a&&reactDomExports.flushSync(()=>a.dispatchEvent(s))}function useCallbackRef(a){const s=reactExports.useRef(a);return reactExports.useEffect(()=>{s.current=a}),reactExports.useMemo(()=>(...c)=>{var d;return(d=s.current)==null?void 0:d.call(s,...c)},[])}function useEscapeKeydown(a,s=globalThis==null?void 0:globalThis.document){const c=useCallbackRef(a);reactExports.useEffect(()=>{const d=et=>{et.key==="Escape"&&c(et)};return s.addEventListener("keydown",d,{capture:!0}),()=>s.removeEventListener("keydown",d,{capture:!0})},[c,s])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((a,s)=>{const{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:et,onFocusOutside:g,onInteractOutside:at,onDismiss:$t,...vt}=a,b=reactExports.useContext(DismissableLayerContext),[pt,st]=reactExports.useState(null),wt=(pt==null?void 0:pt.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,Tt]=reactExports.useState({}),Ct=useComposedRefs(s,jr=>st(jr)),jt=Array.from(b.layers),[Lt]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),Ht=jt.indexOf(Lt),Gt=pt?jt.indexOf(pt):-1,Kt=b.layersWithOutsidePointerEventsDisabled.size>0,tr=Gt>=Ht,rr=usePointerDownOutside(jr=>{const Yr=jr.target,An=[...b.branches].some(No=>No.contains(Yr));!tr||An||(et==null||et(jr),at==null||at(jr),jr.defaultPrevented||$t==null||$t())},wt),Lr=useFocusOutside(jr=>{const Yr=jr.target;[...b.branches].some(No=>No.contains(Yr))||(g==null||g(jr),at==null||at(jr),jr.defaultPrevented||$t==null||$t())},wt);return useEscapeKeydown(jr=>{Gt===b.layers.size-1&&(d==null||d(jr),!jr.defaultPrevented&&$t&&(jr.preventDefault(),$t()))},wt),reactExports.useEffect(()=>{if(pt)return c&&(b.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=wt.body.style.pointerEvents,wt.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(pt)),b.layers.add(pt),dispatchUpdate(),()=>{c&&b.layersWithOutsidePointerEventsDisabled.size===1&&(wt.body.style.pointerEvents=originalBodyPointerEvents)}},[pt,wt,c,b]),reactExports.useEffect(()=>()=>{pt&&(b.layers.delete(pt),b.layersWithOutsidePointerEventsDisabled.delete(pt),dispatchUpdate())},[pt,b]),reactExports.useEffect(()=>{const jr=()=>Tt({});return document.addEventListener(CONTEXT_UPDATE,jr),()=>document.removeEventListener(CONTEXT_UPDATE,jr)},[]),jsxRuntimeExports.jsx(Primitive.div,{...vt,ref:Ct,style:{pointerEvents:Kt?tr?"auto":"none":void 0,...a.style},onFocusCapture:composeEventHandlers(a.onFocusCapture,Lr.onFocusCapture),onBlurCapture:composeEventHandlers(a.onBlurCapture,Lr.onBlurCapture),onPointerDownCapture:composeEventHandlers(a.onPointerDownCapture,rr.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((a,s)=>{const c=reactExports.useContext(DismissableLayerContext),d=reactExports.useRef(null),et=useComposedRefs(s,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return c.branches.add(g),()=>{c.branches.delete(g)}},[c.branches]),jsxRuntimeExports.jsx(Primitive.div,{...a,ref:et})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(a,s=globalThis==null?void 0:globalThis.document){const c=useCallbackRef(a),d=reactExports.useRef(!1),et=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const g=$t=>{if($t.target&&!d.current){let vt=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,c,b,{discrete:!0})};const b={originalEvent:$t};$t.pointerType==="touch"?(s.removeEventListener("click",et.current),et.current=vt,s.addEventListener("click",et.current,{once:!0})):vt()}else s.removeEventListener("click",et.current);d.current=!1},at=window.setTimeout(()=>{s.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(at),s.removeEventListener("pointerdown",g),s.removeEventListener("click",et.current)}},[s,c]),{onPointerDownCapture:()=>d.current=!0}}function useFocusOutside(a,s=globalThis==null?void 0:globalThis.document){const c=useCallbackRef(a),d=reactExports.useRef(!1);return reactExports.useEffect(()=>{const et=g=>{g.target&&!d.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,c,{originalEvent:g},{discrete:!1})};return s.addEventListener("focusin",et),()=>s.removeEventListener("focusin",et)},[s,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}function dispatchUpdate(){const a=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(a)}function handleAndDispatchCustomEvent(a,s,c,{discrete:d}){const et=c.originalEvent.target,g=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});s&&et.addEventListener(a,s,{once:!0}),d?dispatchDiscreteCustomEvent(et,g):et.dispatchEvent(g)}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",a[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),count--}},[])}function createFocusGuard(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",a}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((a,s)=>{const{loop:c=!1,trapped:d=!1,onMountAutoFocus:et,onUnmountAutoFocus:g,...at}=a,[$t,vt]=reactExports.useState(null),b=useCallbackRef(et),pt=useCallbackRef(g),st=reactExports.useRef(null),wt=useComposedRefs(s,jt=>vt(jt)),Tt=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(d){let jt=function(Kt){if(Tt.paused||!$t)return;const tr=Kt.target;$t.contains(tr)?st.current=tr:focus(st.current,{select:!0})},Lt=function(Kt){if(Tt.paused||!$t)return;const tr=Kt.relatedTarget;tr!==null&&($t.contains(tr)||focus(st.current,{select:!0}))},Ht=function(Kt){if(document.activeElement===document.body)for(const rr of Kt)rr.removedNodes.length>0&&focus($t)};document.addEventListener("focusin",jt),document.addEventListener("focusout",Lt);const Gt=new MutationObserver(Ht);return $t&&Gt.observe($t,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",jt),document.removeEventListener("focusout",Lt),Gt.disconnect()}}},[d,$t,Tt.paused]),reactExports.useEffect(()=>{if($t){focusScopesStack.add(Tt);const jt=document.activeElement;if(!$t.contains(jt)){const Ht=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);$t.addEventListener(AUTOFOCUS_ON_MOUNT,b),$t.dispatchEvent(Ht),Ht.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates($t)),{select:!0}),document.activeElement===jt&&focus($t))}return()=>{$t.removeEventListener(AUTOFOCUS_ON_MOUNT,b),setTimeout(()=>{const Ht=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);$t.addEventListener(AUTOFOCUS_ON_UNMOUNT,pt),$t.dispatchEvent(Ht),Ht.defaultPrevented||focus(jt??document.body,{select:!0}),$t.removeEventListener(AUTOFOCUS_ON_UNMOUNT,pt),focusScopesStack.remove(Tt)},0)}}},[$t,b,pt,Tt]);const Ct=reactExports.useCallback(jt=>{if(!c&&!d||Tt.paused)return;const Lt=jt.key==="Tab"&&!jt.altKey&&!jt.ctrlKey&&!jt.metaKey,Ht=document.activeElement;if(Lt&&Ht){const Gt=jt.currentTarget,[Kt,tr]=getTabbableEdges(Gt);Kt&&tr?!jt.shiftKey&&Ht===tr?(jt.preventDefault(),c&&focus(Kt,{select:!0})):jt.shiftKey&&Ht===Kt&&(jt.preventDefault(),c&&focus(tr,{select:!0})):Ht===Gt&&jt.preventDefault()}},[c,d,Tt.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...at,ref:wt,onKeyDown:Ct})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(a,{select:s=!1}={}){const c=document.activeElement;for(const d of a)if(focus(d,{select:s}),document.activeElement!==c)return}function getTabbableEdges(a){const s=getTabbableCandidates(a),c=findVisible(s,a),d=findVisible(s.reverse(),a);return[c,d]}function getTabbableCandidates(a){const s=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const et=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||et?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)s.push(c.currentNode);return s}function findVisible(a,s){for(const c of a)if(!isHidden(c,{upTo:s}))return c}function isHidden(a,{upTo:s}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(s!==void 0&&a===s)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function isSelectableInput(a){return a instanceof HTMLInputElement&&"select"in a}function focus(a,{select:s=!1}={}){if(a&&a.focus){const c=document.activeElement;a.focus({preventScroll:!0}),a!==c&&isSelectableInput(a)&&s&&a.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let a=[];return{add(s){const c=a[0];s!==c&&(c==null||c.pause()),a=arrayRemove(a,s),a.unshift(s)},remove(s){var c;a=arrayRemove(a,s),(c=a[0])==null||c.resume()}}}function arrayRemove(a,s){const c=[...a],d=c.indexOf(s);return d!==-1&&c.splice(d,1),c}function removeLinks(a){return a.filter(s=>s.tagName!=="A")}var NAME="Arrow",Arrow$1=reactExports.forwardRef((a,s)=>{const{children:c,width:d=10,height:et=5,...g}=a;return jsxRuntimeExports.jsx(Primitive.svg,{...g,ref:s,width:d,height:et,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME;var Root$1=Arrow$1;function useSize(a){const[s,c]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});const d=new ResizeObserver(et=>{if(!Array.isArray(et)||!et.length)return;const g=et[0];let at,$t;if("borderBoxSize"in g){const vt=g.borderBoxSize,b=Array.isArray(vt)?vt[0]:vt;at=b.inlineSize,$t=b.blockSize}else at=a.offsetWidth,$t=a.offsetHeight;c({width:at,height:$t})});return d.observe(a,{box:"border-box"}),()=>d.unobserve(a)}else c(void 0)},[a]),s}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=a=>{const{__scopePopper:s,children:c}=a,[d,et]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:s,anchor:d,onAnchorChange:et,children:c})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((a,s)=>{const{__scopePopper:c,virtualRef:d,...et}=a,g=usePopperContext(ANCHOR_NAME$1,c),at=reactExports.useRef(null),$t=useComposedRefs(s,at);return reactExports.useEffect(()=>{g.onAnchorChange((d==null?void 0:d.current)||at.current)}),d?null:jsxRuntimeExports.jsx(Primitive.div,{...et,ref:$t})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$2="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$2),PopperContent=reactExports.forwardRef((a,s)=>{var a0,m0,p0,x0,S0,R0;const{__scopePopper:c,side:d="bottom",sideOffset:et=0,align:g="center",alignOffset:at=0,arrowPadding:$t=0,avoidCollisions:vt=!0,collisionBoundary:b=[],collisionPadding:pt=0,sticky:st="partial",hideWhenDetached:wt=!1,updatePositionStrategy:Tt="optimized",onPlaced:Ct,...jt}=a,Lt=usePopperContext(CONTENT_NAME$2,c),[Ht,Gt]=reactExports.useState(null),Kt=useComposedRefs(s,$0=>Gt($0)),[tr,rr]=reactExports.useState(null),Lr=useSize(tr),jr=(Lr==null?void 0:Lr.width)??0,Yr=(Lr==null?void 0:Lr.height)??0,An=d+(g!=="center"?"-"+g:""),No=typeof pt=="number"?pt:{top:0,right:0,bottom:0,left:0,...pt},o0=Array.isArray(b)?b:[b],t0=o0.length>0,c0={padding:No,boundary:o0.filter(isNotNull),altBoundary:t0},{refs:n0,floatingStyles:Qo,placement:Mo,isPositioned:zo,middlewareData:e0}=useFloating({strategy:"fixed",placement:An,whileElementsMounted:(...$0)=>autoUpdate(...$0,{animationFrame:Tt==="always"}),elements:{reference:Lt.anchor},middleware:[offset({mainAxis:et+Yr,alignmentAxis:at}),vt&&shift({mainAxis:!0,crossAxis:!1,limiter:st==="partial"?limitShift():void 0,...c0}),vt&&flip({...c0}),size({...c0,apply:({elements:$0,rects:f0,availableWidth:P0,availableHeight:M0})=>{const{width:C0,height:Uo}=f0.reference,l0=$0.floating.style;l0.setProperty("--radix-popper-available-width",`${P0}px`),l0.setProperty("--radix-popper-available-height",`${M0}px`),l0.setProperty("--radix-popper-anchor-width",`${C0}px`),l0.setProperty("--radix-popper-anchor-height",`${Uo}px`)}}),tr&&arrow({element:tr,padding:$t}),transformOrigin({arrowWidth:jr,arrowHeight:Yr}),wt&&hide({strategy:"referenceHidden",...c0})]}),[Xr,In]=getSideAndAlignFromPlacement(Mo),Zr=useCallbackRef(Ct);useLayoutEffect2(()=>{zo&&(Zr==null||Zr())},[zo,Zr]);const wn=(a0=e0.arrow)==null?void 0:a0.x,r0=(m0=e0.arrow)==null?void 0:m0.y,ko=((p0=e0.arrow)==null?void 0:p0.centerOffset)!==0,[_n,i0]=reactExports.useState();return useLayoutEffect2(()=>{Ht&&i0(window.getComputedStyle(Ht).zIndex)},[Ht]),jsxRuntimeExports.jsx("div",{ref:n0.setFloating,"data-radix-popper-content-wrapper":"",style:{...Qo,transform:zo?Qo.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_n,"--radix-popper-transform-origin":[(x0=e0.transformOrigin)==null?void 0:x0.x,(S0=e0.transformOrigin)==null?void 0:S0.y].join(" "),...((R0=e0.hide)==null?void 0:R0.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:c,placedSide:Xr,onArrowChange:rr,arrowX:wn,arrowY:r0,shouldHideArrow:ko,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Xr,"data-align":In,...jt,ref:Kt,style:{...jt.style,animation:zo?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$2;var ARROW_NAME$2="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function a(s,c){const{__scopePopper:d,...et}=s,g=useContentContext(ARROW_NAME$2,d),at=OPPOSITE_SIDE[g.placedSide];return jsxRuntimeExports.jsx("span",{ref:g.onArrowChange,style:{position:"absolute",left:g.arrowX,top:g.arrowY,[at]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[g.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[g.placedSide],visibility:g.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$1,{...et,ref:c,style:{...et.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$2;function isNotNull(a){return a!==null}var transformOrigin=a=>({name:"transformOrigin",options:a,fn(s){var Lt,Ht,Gt;const{placement:c,rects:d,middlewareData:et}=s,at=((Lt=et.arrow)==null?void 0:Lt.centerOffset)!==0,$t=at?0:a.arrowWidth,vt=at?0:a.arrowHeight,[b,pt]=getSideAndAlignFromPlacement(c),st={start:"0%",center:"50%",end:"100%"}[pt],wt=(((Ht=et.arrow)==null?void 0:Ht.x)??0)+$t/2,Tt=(((Gt=et.arrow)==null?void 0:Gt.y)??0)+vt/2;let Ct="",jt="";return b==="bottom"?(Ct=at?st:`${wt}px`,jt=`${-vt}px`):b==="top"?(Ct=at?st:`${wt}px`,jt=`${d.floating.height+vt}px`):b==="right"?(Ct=`${-vt}px`,jt=at?st:`${Tt}px`):b==="left"&&(Ct=`${d.floating.width+vt}px`,jt=at?st:`${Tt}px`),{data:{x:Ct,y:jt}}}});function getSideAndAlignFromPlacement(a){const[s,c="center"]=a.split("-");return[s,c]}var Root2=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,PORTAL_NAME$2="Portal",Portal$1=reactExports.forwardRef((a,s)=>{var $t;const{container:c,...d}=a,[et,g]=reactExports.useState(!1);useLayoutEffect2(()=>g(!0),[]);const at=c||et&&(($t=globalThis==null?void 0:globalThis.document)==null?void 0:$t.body);return at?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...d,ref:s}),at):null});Portal$1.displayName=PORTAL_NAME$2;function useStateMachine(a,s){return reactExports.useReducer((c,d)=>s[c][d]??c,a)}var Presence=a=>{const{present:s,children:c}=a,d=usePresence(s),et=typeof c=="function"?c({present:d.isPresent}):reactExports.Children.only(c),g=useComposedRefs(d.ref,getElementRef(et));return typeof c=="function"||d.isPresent?reactExports.cloneElement(et,{ref:g}):null};Presence.displayName="Presence";function usePresence(a){const[s,c]=reactExports.useState(),d=reactExports.useRef({}),et=reactExports.useRef(a),g=reactExports.useRef("none"),at=a?"mounted":"unmounted",[$t,vt]=useStateMachine(at,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const b=getAnimationName(d.current);g.current=$t==="mounted"?b:"none"},[$t]),useLayoutEffect2(()=>{const b=d.current,pt=et.current;if(pt!==a){const wt=g.current,Tt=getAnimationName(b);a?vt("MOUNT"):Tt==="none"||(b==null?void 0:b.display)==="none"?vt("UNMOUNT"):vt(pt&&wt!==Tt?"ANIMATION_OUT":"UNMOUNT"),et.current=a}},[a,vt]),useLayoutEffect2(()=>{if(s){const b=st=>{const Tt=getAnimationName(d.current).includes(st.animationName);st.target===s&&Tt&&reactDomExports.flushSync(()=>vt("ANIMATION_END"))},pt=st=>{st.target===s&&(g.current=getAnimationName(d.current))};return s.addEventListener("animationstart",pt),s.addEventListener("animationcancel",b),s.addEventListener("animationend",b),()=>{s.removeEventListener("animationstart",pt),s.removeEventListener("animationcancel",b),s.removeEventListener("animationend",b)}}else vt("ANIMATION_END")},[s,vt]),{isPresent:["mounted","unmountSuspended"].includes($t),ref:reactExports.useCallback(b=>{b&&(d.current=getComputedStyle(b)),c(b)},[])}}function getAnimationName(a){return(a==null?void 0:a.animationName)||"none"}function getElementRef(a){var d,et;let s=(d=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:d.get,c=s&&"isReactWarning"in s&&s.isReactWarning;return c?a.ref:(s=(et=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:et.get,c=s&&"isReactWarning"in s&&s.isReactWarning,c?a.props.ref:a.props.ref||a.ref)}function useControllableState({prop:a,defaultProp:s,onChange:c=()=>{}}){const[d,et]=useUncontrolledState({defaultProp:s,onChange:c}),g=a!==void 0,at=g?a:d,$t=useCallbackRef(c),vt=reactExports.useCallback(b=>{if(g){const st=typeof b=="function"?b(a):b;st!==a&&$t(st)}else et(b)},[g,a,et,$t]);return[at,vt]}function useUncontrolledState({defaultProp:a,onChange:s}){const c=reactExports.useState(a),[d]=c,et=reactExports.useRef(d),g=useCallbackRef(s);return reactExports.useEffect(()=>{et.current!==d&&(g(d),et.current=d)},[d,et,g]),c}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$2="RovingFocusGroup",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(GROUP_NAME$2),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$2,[createCollectionScope$2]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$2),RovingFocusGroup=reactExports.forwardRef((a,s)=>jsxRuntimeExports.jsx(Collection$2.Provider,{scope:a.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:a.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...a,ref:s})})}));RovingFocusGroup.displayName=GROUP_NAME$2;var RovingFocusGroupImpl=reactExports.forwardRef((a,s)=>{const{__scopeRovingFocusGroup:c,orientation:d,loop:et=!1,dir:g,currentTabStopId:at,defaultCurrentTabStopId:$t,onCurrentTabStopIdChange:vt,onEntryFocus:b,preventScrollOnEntryFocus:pt=!1,...st}=a,wt=reactExports.useRef(null),Tt=useComposedRefs(s,wt),Ct=useDirection(g),[jt=null,Lt]=useControllableState({prop:at,defaultProp:$t,onChange:vt}),[Ht,Gt]=reactExports.useState(!1),Kt=useCallbackRef(b),tr=useCollection$2(c),rr=reactExports.useRef(!1),[Lr,jr]=reactExports.useState(0);return reactExports.useEffect(()=>{const Yr=wt.current;if(Yr)return Yr.addEventListener(ENTRY_FOCUS,Kt),()=>Yr.removeEventListener(ENTRY_FOCUS,Kt)},[Kt]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:c,orientation:d,dir:Ct,loop:et,currentTabStopId:jt,onItemFocus:reactExports.useCallback(Yr=>Lt(Yr),[Lt]),onItemShiftTab:reactExports.useCallback(()=>Gt(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>jr(Yr=>Yr+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>jr(Yr=>Yr-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:Ht||Lr===0?-1:0,"data-orientation":d,...st,ref:Tt,style:{outline:"none",...a.style},onMouseDown:composeEventHandlers(a.onMouseDown,()=>{rr.current=!0}),onFocus:composeEventHandlers(a.onFocus,Yr=>{const An=!rr.current;if(Yr.target===Yr.currentTarget&&An&&!Ht){const No=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(Yr.currentTarget.dispatchEvent(No),!No.defaultPrevented){const o0=tr().filter(Mo=>Mo.focusable),t0=o0.find(Mo=>Mo.active),c0=o0.find(Mo=>Mo.id===jt),Qo=[t0,c0,...o0].filter(Boolean).map(Mo=>Mo.ref.current);focusFirst$1(Qo,pt)}}rr.current=!1}),onBlur:composeEventHandlers(a.onBlur,()=>Gt(!1))})})}),ITEM_NAME$2="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((a,s)=>{const{__scopeRovingFocusGroup:c,focusable:d=!0,active:et=!1,tabStopId:g,...at}=a,$t=useId(),vt=g||$t,b=useRovingFocusContext(ITEM_NAME$2,c),pt=b.currentTabStopId===vt,st=useCollection$2(c),{onFocusableItemAdd:wt,onFocusableItemRemove:Tt}=b;return reactExports.useEffect(()=>{if(d)return wt(),()=>Tt()},[d,wt,Tt]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:c,id:vt,focusable:d,active:et,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:pt?0:-1,"data-orientation":b.orientation,...at,ref:s,onMouseDown:composeEventHandlers(a.onMouseDown,Ct=>{d?b.onItemFocus(vt):Ct.preventDefault()}),onFocus:composeEventHandlers(a.onFocus,()=>b.onItemFocus(vt)),onKeyDown:composeEventHandlers(a.onKeyDown,Ct=>{if(Ct.key==="Tab"&&Ct.shiftKey){b.onItemShiftTab();return}if(Ct.target!==Ct.currentTarget)return;const jt=getFocusIntent(Ct,b.orientation,b.dir);if(jt!==void 0){if(Ct.metaKey||Ct.ctrlKey||Ct.altKey||Ct.shiftKey)return;Ct.preventDefault();let Ht=st().filter(Gt=>Gt.focusable).map(Gt=>Gt.ref.current);if(jt==="last")Ht.reverse();else if(jt==="prev"||jt==="next"){jt==="prev"&&Ht.reverse();const Gt=Ht.indexOf(Ct.currentTarget);Ht=b.loop?wrapArray$2(Ht,Gt+1):Ht.slice(Gt+1)}setTimeout(()=>focusFirst$1(Ht))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$2;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(a,s){return s!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function getFocusIntent(a,s,c){const d=getDirectionAwareKey(a.key,c);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(d))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(d)))return MAP_KEY_TO_FOCUS_INTENT[d]}function focusFirst$1(a,s=!1){const c=document.activeElement;for(const d of a)if(d===c||(d.focus({preventScroll:s}),document.activeElement!==c))return}function wrapArray$2(a,s){return a.map((c,d)=>a[(s+d)%a.length])}var Root=RovingFocusGroup,Item=RovingFocusGroupItem,effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(a,s){var c=reactExports.useRef(null),d=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),et=d[0],g=d[1],at=a.forwardProps,$t=a.children,vt=a.className,b=a.removeScrollBar,pt=a.enabled,st=a.shards,wt=a.sideCar,Tt=a.noIsolation,Ct=a.inert,jt=a.allowPinchZoom,Lt=a.as,Ht=Lt===void 0?"div":Lt,Gt=a.gapMode,Kt=__rest(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),tr=wt,rr=useMergeRefs([c,s]),Lr=__assign(__assign({},Kt),et);return reactExports.createElement(reactExports.Fragment,null,pt&&reactExports.createElement(tr,{sideCar:effectCar,removeScrollBar:b,shards:st,noIsolation:Tt,inert:Ct,setCallbacks:g,allowPinchZoom:!!jt,lockRef:c,gapMode:Gt}),at?reactExports.cloneElement(reactExports.Children.only($t),__assign(__assign({},Lr),{ref:rr})):reactExports.createElement(Ht,__assign({},Lr,{className:vt,ref:rr}),$t))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(a){return a.tagName==="TEXTAREA"},elementCanBeScrolled=function(a,s){var c=window.getComputedStyle(a);return c[s]!=="hidden"&&!(c.overflowY===c.overflowX&&!alwaysContainsScroll(a)&&c[s]==="visible")},elementCouldBeVScrolled=function(a){return elementCanBeScrolled(a,"overflowY")},elementCouldBeHScrolled=function(a){return elementCanBeScrolled(a,"overflowX")},locationCouldBeScrolled=function(a,s){var c=s.ownerDocument,d=s;do{typeof ShadowRoot<"u"&&d instanceof ShadowRoot&&(d=d.host);var et=elementCouldBeScrolled(a,d);if(et){var g=getScrollVariables(a,d),at=g[1],$t=g[2];if(at>$t)return!0}d=d.parentNode}while(d&&d!==c.body);return!1},getVScrollVariables=function(a){var s=a.scrollTop,c=a.scrollHeight,d=a.clientHeight;return[s,c,d]},getHScrollVariables=function(a){var s=a.scrollLeft,c=a.scrollWidth,d=a.clientWidth;return[s,c,d]},elementCouldBeScrolled=function(a,s){return a==="v"?elementCouldBeVScrolled(s):elementCouldBeHScrolled(s)},getScrollVariables=function(a,s){return a==="v"?getVScrollVariables(s):getHScrollVariables(s)},getDirectionFactor=function(a,s){return a==="h"&&s==="rtl"?-1:1},handleScroll=function(a,s,c,d,et){var g=getDirectionFactor(a,window.getComputedStyle(s).direction),at=g*d,$t=c.target,vt=s.contains($t),b=!1,pt=at>0,st=0,wt=0;do{var Tt=getScrollVariables(a,$t),Ct=Tt[0],jt=Tt[1],Lt=Tt[2],Ht=jt-Lt-g*Ct;(Ct||Ht)&&elementCouldBeScrolled(a,$t)&&(st+=Ht,wt+=Ct),$t instanceof ShadowRoot?$t=$t.host:$t=$t.parentNode}while(!vt&&$t!==document.body||vt&&(s.contains($t)||s===$t));return(pt&&(Math.abs(st)<1||!et)||!pt&&(Math.abs(wt)<1||!et))&&(b=!0),b},getTouchXY=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(a){return[a.deltaX,a.deltaY]},extractRef=function(a){return a&&"current"in a?a.current:a},deltaCompare=function(a,s){return a[0]===s[0]&&a[1]===s[1]},generateStyle=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(a){var s=reactExports.useRef([]),c=reactExports.useRef([0,0]),d=reactExports.useRef(),et=reactExports.useState(idCounter++)[0],g=reactExports.useState(styleSingleton)[0],at=reactExports.useRef(a);reactExports.useEffect(function(){at.current=a},[a]),reactExports.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(et));var jt=__spreadArray([a.lockRef.current],(a.shards||[]).map(extractRef),!0).filter(Boolean);return jt.forEach(function(Lt){return Lt.classList.add("allow-interactivity-".concat(et))}),function(){document.body.classList.remove("block-interactivity-".concat(et)),jt.forEach(function(Lt){return Lt.classList.remove("allow-interactivity-".concat(et))})}}},[a.inert,a.lockRef.current,a.shards]);var $t=reactExports.useCallback(function(jt,Lt){if("touches"in jt&&jt.touches.length===2)return!at.current.allowPinchZoom;var Ht=getTouchXY(jt),Gt=c.current,Kt="deltaX"in jt?jt.deltaX:Gt[0]-Ht[0],tr="deltaY"in jt?jt.deltaY:Gt[1]-Ht[1],rr,Lr=jt.target,jr=Math.abs(Kt)>Math.abs(tr)?"h":"v";if("touches"in jt&&jr==="h"&&Lr.type==="range")return!1;var Yr=locationCouldBeScrolled(jr,Lr);if(!Yr)return!0;if(Yr?rr=jr:(rr=jr==="v"?"h":"v",Yr=locationCouldBeScrolled(jr,Lr)),!Yr)return!1;if(!d.current&&"changedTouches"in jt&&(Kt||tr)&&(d.current=rr),!rr)return!0;var An=d.current||rr;return handleScroll(An,Lt,jt,An==="h"?Kt:tr,!0)},[]),vt=reactExports.useCallback(function(jt){var Lt=jt;if(!(!lockStack.length||lockStack[lockStack.length-1]!==g)){var Ht="deltaY"in Lt?getDeltaXY(Lt):getTouchXY(Lt),Gt=s.current.filter(function(rr){return rr.name===Lt.type&&(rr.target===Lt.target||Lt.target===rr.shadowParent)&&deltaCompare(rr.delta,Ht)})[0];if(Gt&&Gt.should){Lt.cancelable&&Lt.preventDefault();return}if(!Gt){var Kt=(at.current.shards||[]).map(extractRef).filter(Boolean).filter(function(rr){return rr.contains(Lt.target)}),tr=Kt.length>0?$t(Lt,Kt[0]):!at.current.noIsolation;tr&&Lt.cancelable&&Lt.preventDefault()}}},[]),b=reactExports.useCallback(function(jt,Lt,Ht,Gt){var Kt={name:jt,delta:Lt,target:Ht,should:Gt,shadowParent:getOutermostShadowParent(Ht)};s.current.push(Kt),setTimeout(function(){s.current=s.current.filter(function(tr){return tr!==Kt})},1)},[]),pt=reactExports.useCallback(function(jt){c.current=getTouchXY(jt),d.current=void 0},[]),st=reactExports.useCallback(function(jt){b(jt.type,getDeltaXY(jt),jt.target,$t(jt,a.lockRef.current))},[]),wt=reactExports.useCallback(function(jt){b(jt.type,getTouchXY(jt),jt.target,$t(jt,a.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(g),a.setCallbacks({onScrollCapture:st,onWheelCapture:st,onTouchMoveCapture:wt}),document.addEventListener("wheel",vt,nonPassive),document.addEventListener("touchmove",vt,nonPassive),document.addEventListener("touchstart",pt,nonPassive),function(){lockStack=lockStack.filter(function(jt){return jt!==g}),document.removeEventListener("wheel",vt,nonPassive),document.removeEventListener("touchmove",vt,nonPassive),document.removeEventListener("touchstart",pt,nonPassive)}},[]);var Tt=a.removeScrollBar,Ct=a.inert;return reactExports.createElement(reactExports.Fragment,null,Ct?reactExports.createElement(g,{styles:generateStyle(et)}):null,Tt?reactExports.createElement(RemoveScrollBar,{gapMode:a.gapMode}):null)}function getOutermostShadowParent(a){for(var s=null;a!==null;)a instanceof ShadowRoot&&(s=a.host,a=a.host),a=a.parentNode;return s}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(a,s){return reactExports.createElement(RemoveScroll,__assign({},a,{ref:s,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var SELECTION_KEYS=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS,"ArrowRight"],rtl:[...SELECTION_KEYS,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME$1="Menu",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(MENU_NAME$1),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME$1,[createCollectionScope$1,createPopperScope,createRovingFocusGroupScope]),usePopperScope=createPopperScope(),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME$1),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME$1),Menu$1=a=>{const{__scopeMenu:s,open:c=!1,children:d,dir:et,onOpenChange:g,modal:at=!0}=a,$t=usePopperScope(s),[vt,b]=reactExports.useState(null),pt=reactExports.useRef(!1),st=useCallbackRef(g),wt=useDirection(et);return reactExports.useEffect(()=>{const Tt=()=>{pt.current=!0,document.addEventListener("pointerdown",Ct,{capture:!0,once:!0}),document.addEventListener("pointermove",Ct,{capture:!0,once:!0})},Ct=()=>pt.current=!1;return document.addEventListener("keydown",Tt,{capture:!0}),()=>{document.removeEventListener("keydown",Tt,{capture:!0}),document.removeEventListener("pointerdown",Ct,{capture:!0}),document.removeEventListener("pointermove",Ct,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2,{...$t,children:jsxRuntimeExports.jsx(MenuProvider,{scope:s,open:c,onOpenChange:st,content:vt,onContentChange:b,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:s,onClose:reactExports.useCallback(()=>st(!1),[st]),isUsingKeyboardRef:pt,dir:wt,modal:at,children:d})})})};Menu$1.displayName=MENU_NAME$1;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,...d}=a,et=usePopperScope(c);return jsxRuntimeExports.jsx(Anchor,{...et,...d,ref:s})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$1="MenuPortal",[PortalProvider,usePortalContext]=createMenuContext(PORTAL_NAME$1,{forceMount:void 0}),MenuPortal=a=>{const{__scopeMenu:s,forceMount:c,children:d,container:et}=a,g=useMenuContext(PORTAL_NAME$1,s);return jsxRuntimeExports.jsx(PortalProvider,{scope:s,forceMount:c,children:jsxRuntimeExports.jsx(Presence,{present:c||g.open,children:jsxRuntimeExports.jsx(Portal$1,{asChild:!0,container:et,children:d})})})};MenuPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$1),MenuContent=reactExports.forwardRef((a,s)=>{const c=usePortalContext(CONTENT_NAME$1,a.__scopeMenu),{forceMount:d=c.forceMount,...et}=a,g=useMenuContext(CONTENT_NAME$1,a.__scopeMenu),at=useMenuRootContext(CONTENT_NAME$1,a.__scopeMenu);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:a.__scopeMenu,children:at.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...et,ref:s}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...et,ref:s})})})})}),MenuRootContentModal=reactExports.forwardRef((a,s)=>{const c=useMenuContext(CONTENT_NAME$1,a.__scopeMenu),d=reactExports.useRef(null),et=useComposedRefs(s,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return hideOthers(g)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...a,ref:et,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(a.onFocusOutside,g=>g.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((a,s)=>{const c=useMenuContext(CONTENT_NAME$1,a.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...a,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),MenuContentImpl=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,loop:d=!1,trapFocus:et,onOpenAutoFocus:g,onCloseAutoFocus:at,disableOutsidePointerEvents:$t,onEntryFocus:vt,onEscapeKeyDown:b,onPointerDownOutside:pt,onFocusOutside:st,onInteractOutside:wt,onDismiss:Tt,disableOutsideScroll:Ct,...jt}=a,Lt=useMenuContext(CONTENT_NAME$1,c),Ht=useMenuRootContext(CONTENT_NAME$1,c),Gt=usePopperScope(c),Kt=useRovingFocusGroupScope$1(c),tr=useCollection$1(c),[rr,Lr]=reactExports.useState(null),jr=reactExports.useRef(null),Yr=useComposedRefs(s,jr,Lt.onContentChange),An=reactExports.useRef(0),No=reactExports.useRef(""),o0=reactExports.useRef(0),t0=reactExports.useRef(null),c0=reactExports.useRef("right"),n0=reactExports.useRef(0),Qo=Ct?ReactRemoveScroll:reactExports.Fragment,Mo=Ct?{as:Slot,allowPinchZoom:!0}:void 0,zo=Xr=>{var a0,m0;const In=No.current+Xr,Zr=tr().filter(p0=>!p0.disabled),wn=document.activeElement,r0=(a0=Zr.find(p0=>p0.ref.current===wn))==null?void 0:a0.textValue,ko=Zr.map(p0=>p0.textValue),_n=getNextMatch(ko,In,r0),i0=(m0=Zr.find(p0=>p0.textValue===_n))==null?void 0:m0.ref.current;(function p0(x0){No.current=x0,window.clearTimeout(An.current),x0!==""&&(An.current=window.setTimeout(()=>p0(""),1e3))})(In),i0&&setTimeout(()=>i0.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(An.current),[]),useFocusGuards();const e0=reactExports.useCallback(Xr=>{var Zr,wn;return c0.current===((Zr=t0.current)==null?void 0:Zr.side)&&isPointerInGraceArea(Xr,(wn=t0.current)==null?void 0:wn.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:c,searchRef:No,onItemEnter:reactExports.useCallback(Xr=>{e0(Xr)&&Xr.preventDefault()},[e0]),onItemLeave:reactExports.useCallback(Xr=>{var In;e0(Xr)||((In=jr.current)==null||In.focus(),Lr(null))},[e0]),onTriggerLeave:reactExports.useCallback(Xr=>{e0(Xr)&&Xr.preventDefault()},[e0]),pointerGraceTimerRef:o0,onPointerGraceIntentChange:reactExports.useCallback(Xr=>{t0.current=Xr},[]),children:jsxRuntimeExports.jsx(Qo,{...Mo,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:et,onMountAutoFocus:composeEventHandlers(g,Xr=>{var In;Xr.preventDefault(),(In=jr.current)==null||In.focus({preventScroll:!0})}),onUnmountAutoFocus:at,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:$t,onEscapeKeyDown:b,onPointerDownOutside:pt,onFocusOutside:st,onInteractOutside:wt,onDismiss:Tt,children:jsxRuntimeExports.jsx(Root,{asChild:!0,...Kt,dir:Ht.dir,orientation:"vertical",loop:d,currentTabStopId:rr,onCurrentTabStopIdChange:Lr,onEntryFocus:composeEventHandlers(vt,Xr=>{Ht.isUsingKeyboardRef.current||Xr.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(Lt.open),"data-radix-menu-content":"",dir:Ht.dir,...Gt,...jt,ref:Yr,style:{outline:"none",...jt.style},onKeyDown:composeEventHandlers(jt.onKeyDown,Xr=>{const Zr=Xr.target.closest("[data-radix-menu-content]")===Xr.currentTarget,wn=Xr.ctrlKey||Xr.altKey||Xr.metaKey,r0=Xr.key.length===1;Zr&&(Xr.key==="Tab"&&Xr.preventDefault(),!wn&&r0&&zo(Xr.key));const ko=jr.current;if(Xr.target!==ko||!FIRST_LAST_KEYS.includes(Xr.key))return;Xr.preventDefault();const i0=tr().filter(a0=>!a0.disabled).map(a0=>a0.ref.current);LAST_KEYS.includes(Xr.key)&&i0.reverse(),focusFirst(i0)}),onBlur:composeEventHandlers(a.onBlur,Xr=>{Xr.currentTarget.contains(Xr.target)||(window.clearTimeout(An.current),No.current="")}),onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse(Xr=>{const In=Xr.target,Zr=n0.current!==Xr.clientX;if(Xr.currentTarget.contains(In)&&Zr){const wn=Xr.clientX>n0.current?"right":"left";c0.current=wn,n0.current=Xr.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$1;var GROUP_NAME$1="MenuGroup",MenuGroup=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...d,ref:s})});MenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="MenuLabel",MenuLabel=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{...d,ref:s})});MenuLabel.displayName=LABEL_NAME$1;var ITEM_NAME$1="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((a,s)=>{const{disabled:c=!1,onSelect:d,...et}=a,g=reactExports.useRef(null),at=useMenuRootContext(ITEM_NAME$1,a.__scopeMenu),$t=useMenuContentContext(ITEM_NAME$1,a.__scopeMenu),vt=useComposedRefs(s,g),b=reactExports.useRef(!1),pt=()=>{const st=g.current;if(!c&&st){const wt=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});st.addEventListener(ITEM_SELECT,Tt=>d==null?void 0:d(Tt),{once:!0}),dispatchDiscreteCustomEvent(st,wt),wt.defaultPrevented?b.current=!1:at.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...et,ref:vt,disabled:c,onClick:composeEventHandlers(a.onClick,pt),onPointerDown:st=>{var wt;(wt=a.onPointerDown)==null||wt.call(a,st),b.current=!0},onPointerUp:composeEventHandlers(a.onPointerUp,st=>{var wt;b.current||(wt=st.currentTarget)==null||wt.click()}),onKeyDown:composeEventHandlers(a.onKeyDown,st=>{const wt=$t.searchRef.current!=="";c||wt&&st.key===" "||SELECTION_KEYS.includes(st.key)&&(st.currentTarget.click(),st.preventDefault())})})});MenuItem.displayName=ITEM_NAME$1;var MenuItemImpl=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,disabled:d=!1,textValue:et,...g}=a,at=useMenuContentContext(ITEM_NAME$1,c),$t=useRovingFocusGroupScope$1(c),vt=reactExports.useRef(null),b=useComposedRefs(s,vt),[pt,st]=reactExports.useState(!1),[wt,Tt]=reactExports.useState("");return reactExports.useEffect(()=>{const Ct=vt.current;Ct&&Tt((Ct.textContent??"").trim())},[g.children]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:c,disabled:d,textValue:et??wt,children:jsxRuntimeExports.jsx(Item,{asChild:!0,...$t,focusable:!d,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":pt?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...g,ref:b,onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse(Ct=>{d?at.onItemLeave(Ct):(at.onItemEnter(Ct),Ct.defaultPrevented||Ct.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(a.onPointerLeave,whenMouse(Ct=>at.onItemLeave(Ct))),onFocus:composeEventHandlers(a.onFocus,()=>st(!0)),onBlur:composeEventHandlers(a.onBlur,()=>st(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((a,s)=>{const{checked:c=!1,onCheckedChange:d,...et}=a;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:a.__scopeMenu,checked:c,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(c)?"mixed":c,...et,ref:s,"data-state":getCheckedState(c),onSelect:composeEventHandlers(et.onSelect,()=>d==null?void 0:d(isIndeterminate(c)?!0:!c),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((a,s)=>{const{value:c,onValueChange:d,...et}=a,g=useCallbackRef(d);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:a.__scopeMenu,value:c,onValueChange:g,children:jsxRuntimeExports.jsx(MenuGroup,{...et,ref:s})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((a,s)=>{const{value:c,...d}=a,et=useRadioGroupContext(RADIO_ITEM_NAME$1,a.__scopeMenu),g=c===et.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:a.__scopeMenu,checked:g,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":g,...d,ref:s,"data-state":getCheckedState(g),onSelect:composeEventHandlers(d.onSelect,()=>{var at;return(at=et.onValueChange)==null?void 0:at.call(et,c)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,forceMount:d,...et}=a,g=useItemIndicatorContext(ITEM_INDICATOR_NAME,c);return jsxRuntimeExports.jsx(Presence,{present:d||isIndeterminate(g.checked)||g.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...et,ref:s,"data-state":getCheckedState(g.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME;var SEPARATOR_NAME$1="MenuSeparator",MenuSeparator=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...d,ref:s})});MenuSeparator.displayName=SEPARATOR_NAME$1;var ARROW_NAME$1="MenuArrow",MenuArrow=reactExports.forwardRef((a,s)=>{const{__scopeMenu:c,...d}=a,et=usePopperScope(c);return jsxRuntimeExports.jsx(Arrow,{...et,...d,ref:s})});MenuArrow.displayName=ARROW_NAME$1;var SUB_NAME$1="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME$1),MenuSub=a=>{const{__scopeMenu:s,children:c,open:d=!1,onOpenChange:et}=a,g=useMenuContext(SUB_NAME$1,s),at=usePopperScope(s),[$t,vt]=reactExports.useState(null),[b,pt]=reactExports.useState(null),st=useCallbackRef(et);return reactExports.useEffect(()=>(g.open===!1&&st(!1),()=>st(!1)),[g.open,st]),jsxRuntimeExports.jsx(Root2,{...at,children:jsxRuntimeExports.jsx(MenuProvider,{scope:s,open:d,onOpenChange:st,content:b,onContentChange:pt,children:jsxRuntimeExports.jsx(MenuSubProvider,{scope:s,contentId:useId(),triggerId:useId(),trigger:$t,onTriggerChange:vt,children:c})})})};MenuSub.displayName=SUB_NAME$1;var SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((a,s)=>{const c=useMenuContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),d=useMenuRootContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),et=useMenuSubContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),g=useMenuContentContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),at=reactExports.useRef(null),{pointerGraceTimerRef:$t,onPointerGraceIntentChange:vt}=g,b={__scopeMenu:a.__scopeMenu},pt=reactExports.useCallback(()=>{at.current&&window.clearTimeout(at.current),at.current=null},[]);return reactExports.useEffect(()=>pt,[pt]),reactExports.useEffect(()=>{const st=$t.current;return()=>{window.clearTimeout(st),vt(null)}},[$t,vt]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...b,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:et.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":et.contentId,"data-state":getOpenState(c.open),...a,ref:composeRefs(s,et.onTriggerChange),onClick:st=>{var wt;(wt=a.onClick)==null||wt.call(a,st),!(a.disabled||st.defaultPrevented)&&(st.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse(st=>{g.onItemEnter(st),!st.defaultPrevented&&!a.disabled&&!c.open&&!at.current&&(g.onPointerGraceIntentChange(null),at.current=window.setTimeout(()=>{c.onOpenChange(!0),pt()},100))})),onPointerLeave:composeEventHandlers(a.onPointerLeave,whenMouse(st=>{var Tt,Ct;pt();const wt=(Tt=c.content)==null?void 0:Tt.getBoundingClientRect();if(wt){const jt=(Ct=c.content)==null?void 0:Ct.dataset.side,Lt=jt==="right",Ht=Lt?-5:5,Gt=wt[Lt?"left":"right"],Kt=wt[Lt?"right":"left"];g.onPointerGraceIntentChange({area:[{x:st.clientX+Ht,y:st.clientY},{x:Gt,y:wt.top},{x:Kt,y:wt.top},{x:Kt,y:wt.bottom},{x:Gt,y:wt.bottom}],side:jt}),window.clearTimeout($t.current),$t.current=window.setTimeout(()=>g.onPointerGraceIntentChange(null),300)}else{if(g.onTriggerLeave(st),st.defaultPrevented)return;g.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(a.onKeyDown,st=>{var Tt;const wt=g.searchRef.current!=="";a.disabled||wt&&st.key===" "||SUB_OPEN_KEYS[d.dir].includes(st.key)&&(c.onOpenChange(!0),(Tt=c.content)==null||Tt.focus(),st.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((a,s)=>{const c=usePortalContext(CONTENT_NAME$1,a.__scopeMenu),{forceMount:d=c.forceMount,...et}=a,g=useMenuContext(CONTENT_NAME$1,a.__scopeMenu),at=useMenuRootContext(CONTENT_NAME$1,a.__scopeMenu),$t=useMenuSubContext(SUB_CONTENT_NAME$1,a.__scopeMenu),vt=reactExports.useRef(null),b=useComposedRefs(s,vt);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:$t.contentId,"aria-labelledby":$t.triggerId,...et,ref:b,align:"start",side:at.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:pt=>{var st;at.isUsingKeyboardRef.current&&((st=vt.current)==null||st.focus()),pt.preventDefault()},onCloseAutoFocus:pt=>pt.preventDefault(),onFocusOutside:composeEventHandlers(a.onFocusOutside,pt=>{pt.target!==$t.trigger&&g.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(a.onEscapeKeyDown,pt=>{at.onClose(),pt.preventDefault()}),onKeyDown:composeEventHandlers(a.onKeyDown,pt=>{var Tt;const st=pt.currentTarget.contains(pt.target),wt=SUB_CLOSE_KEYS[at.dir].includes(pt.key);st&&wt&&(g.onOpenChange(!1),(Tt=$t.trigger)==null||Tt.focus(),pt.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(a){return a?"open":"closed"}function isIndeterminate(a){return a==="indeterminate"}function getCheckedState(a){return isIndeterminate(a)?"indeterminate":a?"checked":"unchecked"}function focusFirst(a){const s=document.activeElement;for(const c of a)if(c===s||(c.focus(),document.activeElement!==s))return}function wrapArray$1(a,s){return a.map((c,d)=>a[(s+d)%a.length])}function getNextMatch(a,s,c){const et=s.length>1&&Array.from(s).every(b=>b===s[0])?s[0]:s,g=c?a.indexOf(c):-1;let at=wrapArray$1(a,Math.max(g,0));et.length===1&&(at=at.filter(b=>b!==c));const vt=at.find(b=>b.toLowerCase().startsWith(et.toLowerCase()));return vt!==c?vt:void 0}function isPointInPolygon(a,s){const{x:c,y:d}=a;let et=!1;for(let g=0,at=s.length-1;g<s.length;at=g++){const $t=s[g].x,vt=s[g].y,b=s[at].x,pt=s[at].y;vt>d!=pt>d&&c<(b-$t)*(d-vt)/(pt-vt)+$t&&(et=!et)}return et}function isPointerInGraceArea(a,s){if(!s)return!1;const c={x:a.clientX,y:a.clientY};return isPointInPolygon(c,s)}function whenMouse(a){return s=>s.pointerType==="mouse"?a(s):void 0}var Root3$1=Menu$1,Anchor2=MenuAnchor,Portal=MenuPortal,Content2$1=MenuContent,Group=MenuGroup,Label=MenuLabel,Item2=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator=MenuItemIndicator,Separator=MenuSeparator,Arrow2=MenuArrow,Sub=MenuSub,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,MENUBAR_NAME="Menubar",[Collection,useCollection,createCollectionScope]=createCollection(MENUBAR_NAME),[createMenubarContext,createMenubarScope]=createContextScope(MENUBAR_NAME,[createCollectionScope,createRovingFocusGroupScope]),useMenuScope=createMenuScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenubarContextProvider,useMenubarContext]=createMenubarContext(MENUBAR_NAME),Menubar$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,value:d,onValueChange:et,defaultValue:g,loop:at=!0,dir:$t,...vt}=a,b=useDirection($t),pt=useRovingFocusGroupScope(c),[st="",wt]=useControllableState({prop:d,onChange:et,defaultProp:g}),[Tt,Ct]=reactExports.useState(null);return jsxRuntimeExports.jsx(MenubarContextProvider,{scope:c,value:st,onMenuOpen:reactExports.useCallback(jt=>{wt(jt),Ct(jt)},[wt]),onMenuClose:reactExports.useCallback(()=>wt(""),[wt]),onMenuToggle:reactExports.useCallback(jt=>{wt(Lt=>Lt?"":jt),Ct(jt)},[wt]),dir:b,loop:at,children:jsxRuntimeExports.jsx(Collection.Provider,{scope:c,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:c,children:jsxRuntimeExports.jsx(Root,{asChild:!0,...pt,orientation:"horizontal",loop:at,dir:b,currentTabStopId:Tt,onCurrentTabStopIdChange:Ct,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menubar",...vt,ref:s})})})})})});Menubar$1.displayName=MENUBAR_NAME;var MENU_NAME="MenubarMenu",[MenubarMenuProvider,useMenubarMenuContext]=createMenubarContext(MENU_NAME),MenubarMenu$1=a=>{const{__scopeMenubar:s,value:c,...d}=a,et=useId(),g=c||et||"LEGACY_REACT_AUTO_VALUE",at=useMenubarContext(MENU_NAME,s),$t=useMenuScope(s),vt=reactExports.useRef(null),b=reactExports.useRef(!1),pt=at.value===g;return reactExports.useEffect(()=>{pt||(b.current=!1)},[pt]),jsxRuntimeExports.jsx(MenubarMenuProvider,{scope:s,value:g,triggerId:useId(),triggerRef:vt,contentId:useId(),wasKeyboardTriggerOpenRef:b,children:jsxRuntimeExports.jsx(Root3$1,{...$t,open:pt,onOpenChange:st=>{st||at.onMenuClose()},modal:!1,dir:at.dir,...d})})};MenubarMenu$1.displayName=MENU_NAME;var TRIGGER_NAME="MenubarTrigger",MenubarTrigger$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,disabled:d=!1,...et}=a,g=useRovingFocusGroupScope(c),at=useMenuScope(c),$t=useMenubarContext(TRIGGER_NAME,c),vt=useMenubarMenuContext(TRIGGER_NAME,c),b=reactExports.useRef(null),pt=useComposedRefs(s,b,vt.triggerRef),[st,wt]=reactExports.useState(!1),Tt=$t.value===vt.value;return jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:c,value:vt.value,disabled:d,children:jsxRuntimeExports.jsx(Item,{asChild:!0,...g,focusable:!d,tabStopId:vt.value,children:jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...at,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"menuitem",id:vt.triggerId,"aria-haspopup":"menu","aria-expanded":Tt,"aria-controls":Tt?vt.contentId:void 0,"data-highlighted":st?"":void 0,"data-state":Tt?"open":"closed","data-disabled":d?"":void 0,disabled:d,...et,ref:pt,onPointerDown:composeEventHandlers(a.onPointerDown,Ct=>{!d&&Ct.button===0&&Ct.ctrlKey===!1&&($t.onMenuOpen(vt.value),Tt||Ct.preventDefault())}),onPointerEnter:composeEventHandlers(a.onPointerEnter,()=>{var jt;!!$t.value&&!Tt&&($t.onMenuOpen(vt.value),(jt=b.current)==null||jt.focus())}),onKeyDown:composeEventHandlers(a.onKeyDown,Ct=>{d||(["Enter"," "].includes(Ct.key)&&$t.onMenuToggle(vt.value),Ct.key==="ArrowDown"&&$t.onMenuOpen(vt.value),["Enter"," ","ArrowDown"].includes(Ct.key)&&(vt.wasKeyboardTriggerOpenRef.current=!0,Ct.preventDefault()))}),onFocus:composeEventHandlers(a.onFocus,()=>wt(!0)),onBlur:composeEventHandlers(a.onBlur,()=>wt(!1))})})})})});MenubarTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="MenubarPortal",MenubarPortal=a=>{const{__scopeMenubar:s,...c}=a,d=useMenuScope(s);return jsxRuntimeExports.jsx(Portal,{...d,...c})};MenubarPortal.displayName=PORTAL_NAME;var CONTENT_NAME="MenubarContent",MenubarContent$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,align:d="start",...et}=a,g=useMenuScope(c),at=useMenubarContext(CONTENT_NAME,c),$t=useMenubarMenuContext(CONTENT_NAME,c),vt=useCollection(c),b=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$1,{id:$t.contentId,"aria-labelledby":$t.triggerId,"data-radix-menubar-content":"",...g,...et,ref:s,align:d,onCloseAutoFocus:composeEventHandlers(a.onCloseAutoFocus,pt=>{var wt;!!!at.value&&!b.current&&((wt=$t.triggerRef.current)==null||wt.focus()),b.current=!1,pt.preventDefault()}),onFocusOutside:composeEventHandlers(a.onFocusOutside,pt=>{const st=pt.target;vt().some(Tt=>{var Ct;return(Ct=Tt.ref.current)==null?void 0:Ct.contains(st)})&&pt.preventDefault()}),onInteractOutside:composeEventHandlers(a.onInteractOutside,()=>{b.current=!0}),onEntryFocus:pt=>{$t.wasKeyboardTriggerOpenRef.current||pt.preventDefault()},onKeyDown:composeEventHandlers(a.onKeyDown,pt=>{if(["ArrowRight","ArrowLeft"].includes(pt.key)){const st=pt.target,wt=st.hasAttribute("data-radix-menubar-subtrigger"),Tt=st.closest("[data-radix-menubar-content]")!==pt.currentTarget,jt=(at.dir==="rtl"?"ArrowRight":"ArrowLeft")===pt.key;if(!jt&&wt||Tt&&jt)return;let Gt=vt().filter(rr=>!rr.disabled).map(rr=>rr.value);jt&&Gt.reverse();const Kt=Gt.indexOf($t.value);Gt=at.loop?wrapArray(Gt,Kt+1):Gt.slice(Kt+1);const[tr]=Gt;tr&&at.onMenuOpen(tr)}},{checkForDefaultPrevented:!1}),style:{...a.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});MenubarContent$1.displayName=CONTENT_NAME;var GROUP_NAME="MenubarGroup",MenubarGroup=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(Group,{...et,...d,ref:s})});MenubarGroup.displayName=GROUP_NAME;var LABEL_NAME="MenubarLabel",MenubarLabel$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(Label,{...et,...d,ref:s})});MenubarLabel$1.displayName=LABEL_NAME;var ITEM_NAME="MenubarItem",MenubarItem$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(Item2,{...et,...d,ref:s})});MenubarItem$1.displayName=ITEM_NAME;var CHECKBOX_ITEM_NAME="MenubarCheckboxItem",MenubarCheckboxItem$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(CheckboxItem,{...et,...d,ref:s})});MenubarCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="MenubarRadioGroup",MenubarRadioGroup=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(RadioGroup,{...et,...d,ref:s})});MenubarRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="MenubarRadioItem",MenubarRadioItem$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(RadioItem,{...et,...d,ref:s})});MenubarRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="MenubarItemIndicator",MenubarItemIndicator=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(ItemIndicator,{...et,...d,ref:s})});MenubarItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME="MenubarSeparator",MenubarSeparator$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(Separator,{...et,...d,ref:s})});MenubarSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="MenubarArrow",MenubarArrow=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(Arrow2,{...et,...d,ref:s})});MenubarArrow.displayName=ARROW_NAME;var SUB_NAME="MenubarSub",MenubarSub$1=a=>{const{__scopeMenubar:s,children:c,open:d,onOpenChange:et,defaultOpen:g}=a,at=useMenuScope(s),[$t=!1,vt]=useControllableState({prop:d,defaultProp:g,onChange:et});return jsxRuntimeExports.jsx(Sub,{...at,open:$t,onOpenChange:vt,children:c})};MenubarSub$1.displayName=SUB_NAME;var SUB_TRIGGER_NAME="MenubarSubTrigger",MenubarSubTrigger$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(SubTrigger,{"data-radix-menubar-subtrigger":"",...et,...d,ref:s})});MenubarSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="MenubarSubContent",MenubarSubContent$1=reactExports.forwardRef((a,s)=>{const{__scopeMenubar:c,...d}=a,et=useMenuScope(c);return jsxRuntimeExports.jsx(SubContent,{...et,"data-radix-menubar-content":"",...d,ref:s,style:{...a.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});MenubarSubContent$1.displayName=SUB_CONTENT_NAME;function wrapArray(a,s){return a.map((c,d)=>a[(s+d)%a.length])}var Root3=Menubar$1,Menu=MenubarMenu$1,Trigger=MenubarTrigger$1,Portal2=MenubarPortal,Content2=MenubarContent$1,Label2=MenubarLabel$1,Item3=MenubarItem$1,CheckboxItem2=MenubarCheckboxItem$1,RadioItem2=MenubarRadioItem$1,ItemIndicator2=MenubarItemIndicator,Separator2=MenubarSeparator$1,Sub2=MenubarSub$1,SubTrigger2=MenubarSubTrigger$1,SubContent2=MenubarSubContent$1;const MenubarMenu=Menu,MenubarSub=Sub2,Menubar=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(Root3,{ref:c,className:cn$1("flex flex-col items-start space-y-1 rounded-md border bg-background p-1 shadow-sm",a),...s}));Menubar.displayName=Root3.displayName;const MenubarTrigger=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(Trigger,{ref:c,className:cn$1("flex flex-col w-full items-center cursor-default select-none rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",a),...s}));MenubarTrigger.displayName=Trigger.displayName;const MenubarSubTrigger=reactExports.forwardRef(({className:a,inset:s,children:c,...d},et)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:et,className:cn$1("flex w-full cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",s&&"pl-8",a),...d,children:[c,jsxRuntimeExports.jsx(ChevronRightIcon,{className:"ml-auto h-4 w-4"})]}));MenubarSubTrigger.displayName=SubTrigger2.displayName;const MenubarSubContent=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(SubContent2,{ref:c,className:cn$1("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s}));MenubarSubContent.displayName=SubContent2.displayName;const MenubarContent=reactExports.forwardRef(({className:a,align:s="start",alignOffset:c=-4,sideOffset:d=8,side:et="right",...g},at)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2,{ref:at,align:s,alignOffset:c,sideOffset:d,side:et,className:cn$1("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...g})}));MenubarContent.displayName=Content2.displayName;const MenubarItem=reactExports.forwardRef(({className:a,inset:s,...c},d)=>jsxRuntimeExports.jsx(Item3,{ref:d,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...c}));MenubarItem.displayName=Item3.displayName;const MenubarCheckboxItem=reactExports.forwardRef(({className:a,children:s,checked:c,...d},et)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:et,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...d,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(CheckIcon,{className:"h-4 w-4"})})}),s]}));MenubarCheckboxItem.displayName=CheckboxItem2.displayName;const MenubarRadioItem=reactExports.forwardRef(({className:a,children:s,...c},d)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:d,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(DotFilledIcon,{className:"h-4 w-4 fill-current"})})}),s]}));MenubarRadioItem.displayName=RadioItem2.displayName;const MenubarLabel=reactExports.forwardRef(({className:a,inset:s,...c},d)=>jsxRuntimeExports.jsx(Label2,{ref:d,className:cn$1("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...c}));MenubarLabel.displayName=Label2.displayName;const MenubarSeparator=reactExports.forwardRef(({className:a,...s},c)=>jsxRuntimeExports.jsx(Separator2,{ref:c,className:cn$1("-mx-1 my-1 h-px bg-muted",a),...s}));MenubarSeparator.displayName=Separator2.displayName;const MenubarShortcut=({className:a,...s})=>jsxRuntimeExports.jsx("span",{className:cn$1("ml-auto text-xs tracking-widest text-muted-foreground",a),...s});MenubarShortcut.displayname="MenubarShortcut";const domain_dist="https://d1d5i0xjsb5dtw.cloudfront.net/",works=[{artist:"Stable Diffusion 1",art:`${domain_dist}photo-ai/TEST1_0.png`},{artist:"Stable Diffusion2",art:`${domain_dist}photo-ai/TEST1_1.png`},{artist:"Stable Diffusion3",art:`${domain_dist}photo-ai/TEST1_2.png`},{artist:"Stable Diffusion4",art:`${domain_dist}photo-ai/TEST1_3.png`},{artist:"Stable Diffusion5",art:`${domain_dist}photo-ai/TEST2_0.png`},{artist:"Stable Diffusion6",art:`${domain_dist}photo-ai/TEST2_1.png`},{artist:"Stable Diffusion7",art:`${domain_dist}photo-ai/TEST2_2.png`},{artist:"Stable Diffusion8",art:`${domain_dist}photo-ai/TEST2_3.png`},{artist:"Stable Diffusion9",art:`${domain_dist}photo-ai/picture_3.png`},{artist:"Stable Diffusion10",art:`${domain_dist}photo-ai/picture_2.png`}],LeftSidePanel=()=>{const[a,s]=useStore(at=>[at.settings,at.windowSize]),[c,d]=useToggle(!0);useHotKey("c",()=>{d()});const et=(at,$t)=>{at.dataTransfer.setData("text/plain",$t.art)};function g(){return jsxRuntimeExports.jsxs(Menubar,{className:"z-10 outline-none absolute top-[120px] left-6 rounded-lg border bg-background flex flex-col",children:[jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[" ",jsxRuntimeExports.jsx(Images,{})," IMAGENES"," "]}),jsxRuntimeExports.jsx(MenubarContent,{children:jsxRuntimeExports.jsx(ScrollArea,{style:{height:s.height-160},className:"pr-3",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col w-max space-x-4 p-4",children:works.map(at=>jsxRuntimeExports.jsxs("figure",{className:"shrink-0",draggable:!0,onDragStart:$t=>et($t,at),children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden rounded-md",children:jsxRuntimeExports.jsx("img",{src:at.art,alt:`Photo by ${at.artist}`,className:"h-[400px] w-[600px] object-cover"})}),jsxRuntimeExports.jsxs("figcaption",{className:"pt-2 text-xs text-muted-foreground",children:["Photo by"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-foreground",children:at.artist})]})]},at.artist))})})})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[jsxRuntimeExports.jsx(Paperclip,{})," UPLOADS"]}),jsxRuntimeExports.jsxs(MenubarContent,{children:[jsxRuntimeExports.jsxs(MenubarItem,{children:["Undo ",jsxRuntimeExports.jsx(MenubarShortcut,{children:"⌘Z"})]}),jsxRuntimeExports.jsxs(MenubarItem,{children:["Redo ",jsxRuntimeExports.jsx(MenubarShortcut,{children:"⇧⌘Z"})]}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsxs(MenubarSub,{children:[jsxRuntimeExports.jsx(MenubarSubTrigger,{children:"Find"}),jsxRuntimeExports.jsxs(MenubarSubContent,{children:[jsxRuntimeExports.jsx(MenubarItem,{children:"Search the web"}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsx(MenubarItem,{children:"Find..."}),jsxRuntimeExports.jsx(MenubarItem,{children:"Find Next"}),jsxRuntimeExports.jsx(MenubarItem,{children:"Find Previous"})]})]}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsx(MenubarItem,{children:"Cut"}),jsxRuntimeExports.jsx(MenubarItem,{children:"Copy"}),jsxRuntimeExports.jsx(MenubarItem,{children:"Paste"})]})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[" ",jsxRuntimeExports.jsx(WandSparkles,{})," MAGIC AI"]}),jsxRuntimeExports.jsxs(MenubarContent,{children:[jsxRuntimeExports.jsx(MenubarCheckboxItem,{children:"Always Show Bookmarks Bar"}),jsxRuntimeExports.jsx(MenubarCheckboxItem,{checked:!0,children:"Always Show Full URLs"}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsxs(MenubarItem,{inset:!0,children:["Reload ",jsxRuntimeExports.jsx(MenubarShortcut,{children:"⌘R"})]}),jsxRuntimeExports.jsxs(MenubarItem,{disabled:!0,inset:!0,children:["Force Reload ",jsxRuntimeExports.jsx(MenubarShortcut,{children:"⇧⌘R"})]}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsx(MenubarItem,{inset:!0,children:"Toggle Fullscreen"}),jsxRuntimeExports.jsx(MenubarSeparator,{}),jsxRuntimeExports.jsx(MenubarItem,{inset:!0,children:"Hide Sidebar"})]})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[" ",jsxRuntimeExports.jsx(Layers,{})," AJUSTA IMAGEN"]}),jsxRuntimeExports.jsx(MenubarContent,{children:jsxRuntimeExports.jsx(CanvasOptions,{})})]}),jsxRuntimeExports.jsxs(MenubarMenu,{children:[jsxRuntimeExports.jsxs(MenubarTrigger,{children:[" ",jsxRuntimeExports.jsx(Layers,{})," DEVICE RATIO"]}),jsxRuntimeExports.jsx(MenubarContent,{children:jsxRuntimeExports.jsx(RatioOptions,{})})]})]})}return jsxRuntimeExports.jsx(g,{})},model={name:"Fantasy-Studio/Paint-by-Example",path:"Fantasy-Studio/Paint-by-Example",model_type:"diffusers_other",is_single_file_diffusers:!1,need_prompt:!1,controlnets:[],support_strength:!1,support_outpainting:!1,support_lcm_lora:!1,support_controlnet:!1,support_freeu:!1},Workspace=()=>{const[a]=useStore(s=>[s.updateSettings]);return reactExports.useEffect(()=>{a({model})},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex gap-3 absolute top-[68px] left-[20px] items-center",children:jsxRuntimeExports.jsx(ImageSize,{})}),jsxRuntimeExports.jsx(LeftSidePanel,{}),jsxRuntimeExports.jsx(RightSidePanel,{}),jsxRuntimeExports.jsx(Editor,{})]})},SUPPORTED_FILE_TYPE=["image/jpeg","image/png","image/webp","image/bmp","image/tiff"];function Home(){const[a,s,c,d,et,g]=useStore(Lt=>[Lt.file,Lt.handleSaveState,Lt.updateAppState,Lt.setFile,Lt.scaledWidth,Lt.scaledHeight]),{fabricRef:at}=useRefContext(),[$t,vt]=useImage(a),b=useWindowSize();reactExports.useEffect(()=>{c({windowSize:b})},[b]);const pt=reactExports.useRef(0),st=reactExports.useCallback(Lt=>{Lt.preventDefault(),Lt.stopPropagation()},[]),wt=reactExports.useCallback(Lt=>{Lt.preventDefault(),Lt.stopPropagation(),pt.current+=1},[]),Tt=reactExports.useCallback(Lt=>{Lt.preventDefault(),Lt.stopPropagation(),pt.current-=1,pt.current>0},[]),Ct=reactExports.useCallback(Lt=>{if(Lt.preventDefault(),Lt.stopPropagation(),!at.current)return;const Ht=Lt.dataTransfer;if(Ht!=null&&Ht.files&&Ht.files.length>0){const Gt=Ht.files[0],Kt=Gt.type;SUPPORTED_FILE_TYPE.includes(Kt)&&d(Gt)}else{const Gt=Ht==null?void 0:Ht.getData("text/plain");Gt&&d(Gt)}Lt.dataTransfer.clearData()},[]),jt=reactExports.useCallback(Lt=>{if(!Lt.clipboardData)return;const Ht=Lt.clipboardData.items,Gt=[].slice.call(Ht).filter(rr=>rr.type.indexOf("image")!==-1);if(Gt.length===0)return;Lt.preventDefault(),Lt.stopPropagation();const tr=Gt[0].getAsFile();tr&&d(tr)},[]);return reactExports.useEffect(()=>{if(vt&&at.current&&$t){const Lt=et/(($t==null?void 0:$t.width)??1),Ht=g/(($t==null?void 0:$t.height)??1),Gt=Math.min(Lt,Ht),Kt=new fabric.fabric.Image($t,{scaleX:Gt,scaleY:Gt}),tr=at.current.width??0,rr=at.current.height??0;Kt.left=tr/2,Kt.top=rr/2,at.current.add(Kt),s(at.current)}},[$t,vt]),reactExports.useEffect(()=>(window.addEventListener("dragenter",wt),window.addEventListener("dragleave",Tt),window.addEventListener("dragover",st),window.addEventListener("drop",Ct),window.addEventListener("paste",jt),function(){window.removeEventListener("dragenter",wt),window.removeEventListener("dragleave",Tt),window.removeEventListener("dragover",st),window.removeEventListener("drop",Ct),window.removeEventListener("paste",jt)})),jsxRuntimeExports.jsxs("main",{className:"flex min-h-screen flex-col items-center justify-between w-full bg-[radial-gradient(circle_at_1px_1px,_#8e8e8e8e_1px,_transparent_0)] [background-size:20px_20px] bg-repeat",children:[jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(Workspace,{})]})}var P=["light","dark"],E="(prefers-color-scheme: dark)",Q=typeof window>"u",L=reactExports.createContext(void 0),z=a=>reactExports.useContext(L)?a.children:reactExports.createElement(O,{...a}),N=["light","dark"],O=({forcedTheme:a,disableTransitionOnChange:s=!1,enableSystem:c=!0,enableColorScheme:d=!0,storageKey:et="theme",themes:g=N,defaultTheme:at=c?"system":"light",attribute:$t="data-theme",value:vt,children:b,nonce:pt})=>{let[st,wt]=reactExports.useState(()=>M(et,at)),[Tt,Ct]=reactExports.useState(()=>M(et)),jt=vt?Object.values(vt):g,Lt=reactExports.useCallback(tr=>{let rr=tr;if(!rr)return;tr==="system"&&c&&(rr=T());let Lr=vt?vt[rr]:rr,jr=s?_():null,Yr=document.documentElement;if($t==="class"?(Yr.classList.remove(...jt),Lr&&Yr.classList.add(Lr)):Lr?Yr.setAttribute($t,Lr):Yr.removeAttribute($t),d){let An=P.includes(at)?at:null,No=P.includes(rr)?rr:An;Yr.style.colorScheme=No}jr==null||jr()},[]),Ht=reactExports.useCallback(tr=>{let rr=typeof tr=="function"?tr(tr):tr;wt(rr);try{localStorage.setItem(et,rr)}catch{}},[a]),Gt=reactExports.useCallback(tr=>{let rr=T(tr);Ct(rr),st==="system"&&c&&!a&&Lt("system")},[st,a]);reactExports.useEffect(()=>{let tr=window.matchMedia(E);return tr.addListener(Gt),Gt(tr),()=>tr.removeListener(Gt)},[Gt]),reactExports.useEffect(()=>{let tr=rr=>{if(rr.key!==et)return;let Lr=rr.newValue||at;Ht(Lr)};return window.addEventListener("storage",tr),()=>window.removeEventListener("storage",tr)},[Ht]),reactExports.useEffect(()=>{Lt(a??st)},[a,st]);let Kt=reactExports.useMemo(()=>({theme:st,setTheme:Ht,forcedTheme:a,resolvedTheme:st==="system"?Tt:st,themes:c?[...g,"system"]:g,systemTheme:c?Tt:void 0}),[st,Ht,a,Tt,c,g]);return reactExports.createElement(L.Provider,{value:Kt},reactExports.createElement(U,{forcedTheme:a,disableTransitionOnChange:s,enableSystem:c,enableColorScheme:d,storageKey:et,themes:g,defaultTheme:at,attribute:$t,value:vt,children:b,attrs:jt,nonce:pt}),b)},U=reactExports.memo(({forcedTheme:a,storageKey:s,attribute:c,enableSystem:d,enableColorScheme:et,defaultTheme:g,value:at,attrs:$t,nonce:vt})=>{let b=g==="system",pt=c==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${$t.map(Ct=>`'${Ct}'`).join(",")})`};`:`var d=document.documentElement,n='${c}',s='setAttribute';`,st=et?P.includes(g)&&g?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${g}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",wt=(Ct,jt=!1,Lt=!0)=>{let Ht=at?at[Ct]:Ct,Gt=jt?Ct+"|| ''":`'${Ht}'`,Kt="";return et&&Lt&&!jt&&P.includes(Ct)&&(Kt+=`d.style.colorScheme = '${Ct}';`),c==="class"?jt||Ht?Kt+=`c.add(${Gt})`:Kt+="null":Ht&&(Kt+=`d[s](n,${Gt})`),Kt},Tt=a?`!function(){${pt}${wt(a)}}()`:d?`!function(){try{${pt}var e=localStorage.getItem('${s}');if('system'===e||(!e&&${b})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${wt("dark")}}else{${wt("light")}}}else if(e){${at?`var x=${JSON.stringify(at)};`:""}${wt(at?"x[e]":"e",!0)}}${b?"":"else{"+wt(g,!1,!1)+"}"}${st}}catch(e){}}()`:`!function(){try{${pt}var e=localStorage.getItem('${s}');if(e){${at?`var x=${JSON.stringify(at)};`:""}${wt(at?"x[e]":"e",!0)}}else{${wt(g,!1,!1)};}${st}}catch(t){}}();`;return reactExports.createElement("script",{nonce:vt,dangerouslySetInnerHTML:{__html:Tt}})}),M=(a,s)=>{if(Q)return;let c;try{c=localStorage.getItem(a)||void 0}catch{}return c||s},_=()=>{let a=document.createElement("style");return a.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(a),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(a)},1)}},T=a=>(a||(a=window.matchMedia(E)),a.matches?"dark":"light");const consoleLogger={type:"logger",log(a){this.output("log",a)},warn(a){this.output("warn",a)},error(a){this.output("error",a)},output(a,s){console&&console[a]&&console[a].apply(console,s)}};class Logger{constructor(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(s,c)}init(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=c.prefix||"i18next:",this.logger=s||consoleLogger,this.options=c,this.debug=c.debug}log(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return this.forward(c,"log","",!0)}warn(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return this.forward(c,"warn","",!0)}error(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return this.forward(c,"error","")}deprecate(){for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return this.forward(c,"warn","WARNING DEPRECATED: ",!0)}forward(s,c,d,et){return et&&!this.debug?null:(typeof s[0]=="string"&&(s[0]=`${d}${this.prefix} ${s[0]}`),this.logger[c](s))}create(s){return new Logger(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new Logger(this.logger,s)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(s,c){return s.split(" ").forEach(d=>{this.observers[d]||(this.observers[d]=new Map);const et=this.observers[d].get(c)||0;this.observers[d].set(c,et+1)}),this}off(s,c){if(this.observers[s]){if(!c){delete this.observers[s];return}this.observers[s].delete(c)}}emit(s){for(var c=arguments.length,d=new Array(c>1?c-1:0),et=1;et<c;et++)d[et-1]=arguments[et];this.observers[s]&&Array.from(this.observers[s].entries()).forEach(at=>{let[$t,vt]=at;for(let b=0;b<vt;b++)$t(...d)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(at=>{let[$t,vt]=at;for(let b=0;b<vt;b++)$t.apply($t,[s,...d])})}}function defer(){let a,s;const c=new Promise((d,et)=>{a=d,s=et});return c.resolve=a,c.reject=s,c}function makeString(a){return a==null?"":""+a}function copy(a,s,c){a.forEach(d=>{s[d]&&(c[d]=s[d])})}const lastOfPathSeparatorRegExp=/###/g;function getLastOfPath(a,s,c){function d($t){return $t&&$t.indexOf("###")>-1?$t.replace(lastOfPathSeparatorRegExp,"."):$t}function et(){return!a||typeof a=="string"}const g=typeof s!="string"?s:s.split(".");let at=0;for(;at<g.length-1;){if(et())return{};const $t=d(g[at]);!a[$t]&&c&&(a[$t]=new c),Object.prototype.hasOwnProperty.call(a,$t)?a=a[$t]:a={},++at}return et()?{}:{obj:a,k:d(g[at])}}function setPath(a,s,c){const{obj:d,k:et}=getLastOfPath(a,s,Object);if(d!==void 0||s.length===1){d[et]=c;return}let g=s[s.length-1],at=s.slice(0,s.length-1),$t=getLastOfPath(a,at,Object);for(;$t.obj===void 0&&at.length;)g=`${at[at.length-1]}.${g}`,at=at.slice(0,at.length-1),$t=getLastOfPath(a,at,Object),$t&&$t.obj&&typeof $t.obj[`${$t.k}.${g}`]<"u"&&($t.obj=void 0);$t.obj[`${$t.k}.${g}`]=c}function pushPath(a,s,c,d){const{obj:et,k:g}=getLastOfPath(a,s,Object);et[g]=et[g]||[],et[g].push(c)}function getPath(a,s){const{obj:c,k:d}=getLastOfPath(a,s);if(c)return c[d]}function getPathWithDefaults(a,s,c){const d=getPath(a,c);return d!==void 0?d:getPath(s,c)}function deepExtend(a,s,c){for(const d in s)d!=="__proto__"&&d!=="constructor"&&(d in a?typeof a[d]=="string"||a[d]instanceof String||typeof s[d]=="string"||s[d]instanceof String?c&&(a[d]=s[d]):deepExtend(a[d],s[d],c):a[d]=s[d]);return a}function regexEscape(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape(a){return typeof a=="string"?a.replace(/[&<>"'\/]/g,s=>_entityMap[s]):a}class RegExpCache{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const c=this.regExpMap.get(s);if(c!==void 0)return c;const d=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,d),this.regExpQueue.push(s),d}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20);function looksLikeObjectPath(a,s,c){s=s||"",c=c||"";const d=chars.filter(at=>s.indexOf(at)<0&&c.indexOf(at)<0);if(d.length===0)return!0;const et=looksLikeObjectPathRegExpCache.getRegExp(`(${d.map(at=>at==="?"?"\\?":at).join("|")})`);let g=!et.test(a);if(!g){const at=a.indexOf(c);at>0&&!et.test(a.substring(0,at))&&(g=!0)}return g}function deepFind(a,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!a)return;if(a[s])return a[s];const d=s.split(c);let et=a;for(let g=0;g<d.length;){if(!et||typeof et!="object")return;let at,$t="";for(let vt=g;vt<d.length;++vt)if(vt!==g&&($t+=c),$t+=d[vt],at=et[$t],at!==void 0){if(["string","number","boolean"].indexOf(typeof at)>-1&&vt<d.length-1)continue;g+=vt-g+1;break}et=at}return et}function getCleanedCode(a){return a&&a.indexOf("_")>0?a.replace("_","-"):a}class ResourceStore extends EventEmitter{constructor(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=s||{},this.options=c,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const c=this.options.ns.indexOf(s);c>-1&&this.options.ns.splice(c,1)}getResource(s,c,d){let et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const g=et.keySeparator!==void 0?et.keySeparator:this.options.keySeparator,at=et.ignoreJSONStructure!==void 0?et.ignoreJSONStructure:this.options.ignoreJSONStructure;let $t;s.indexOf(".")>-1?$t=s.split("."):($t=[s,c],d&&(Array.isArray(d)?$t.push(...d):typeof d=="string"&&g?$t.push(...d.split(g)):$t.push(d)));const vt=getPath(this.data,$t);return!vt&&!c&&!d&&s.indexOf(".")>-1&&(s=$t[0],c=$t[1],d=$t.slice(2).join(".")),vt||!at||typeof d!="string"?vt:deepFind(this.data&&this.data[s]&&this.data[s][c],d,g)}addResource(s,c,d,et){let g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const at=g.keySeparator!==void 0?g.keySeparator:this.options.keySeparator;let $t=[s,c];d&&($t=$t.concat(at?d.split(at):d)),s.indexOf(".")>-1&&($t=s.split("."),et=c,c=$t[1]),this.addNamespaces(c),setPath(this.data,$t,et),g.silent||this.emit("added",s,c,d,et)}addResources(s,c,d){let et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const g in d)(typeof d[g]=="string"||Array.isArray(d[g]))&&this.addResource(s,c,g,d[g],{silent:!0});et.silent||this.emit("added",s,c,d)}addResourceBundle(s,c,d,et,g){let at=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},$t=[s,c];s.indexOf(".")>-1&&($t=s.split("."),et=d,d=c,c=$t[1]),this.addNamespaces(c);let vt=getPath(this.data,$t)||{};at.skipCopy||(d=JSON.parse(JSON.stringify(d))),et?deepExtend(vt,d,g):vt={...vt,...d},setPath(this.data,$t,vt),at.silent||this.emit("added",s,c,d)}removeResourceBundle(s,c){this.hasResourceBundle(s,c)&&delete this.data[s][c],this.removeNamespaces(c),this.emit("removed",s,c)}hasResourceBundle(s,c){return this.getResource(s,c)!==void 0}getResourceBundle(s,c){return c||(c=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(s,c)}:this.getResource(s,c)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const c=this.getDataByLanguage(s);return!!(c&&Object.keys(c)||[]).find(et=>c[et]&&Object.keys(c[et]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(a){this.processors[a.name]=a},handle(a,s,c,d,et){return a.forEach(g=>{this.processors[g]&&(s=this.processors[g].process(s,c,d,et))}),s}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=c,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(s==null)return!1;const d=this.resolve(s,c);return d&&d.res!==void 0}extractFromKey(s,c){let d=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const et=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let g=c.ns||this.options.defaultNS||[];const at=d&&s.indexOf(d)>-1,$t=!this.options.userDefinedKeySeparator&&!c.keySeparator&&!this.options.userDefinedNsSeparator&&!c.nsSeparator&&!looksLikeObjectPath(s,d,et);if(at&&!$t){const vt=s.match(this.interpolator.nestingRegexp);if(vt&&vt.length>0)return{key:s,namespaces:g};const b=s.split(d);(d!==et||d===et&&this.options.ns.indexOf(b[0])>-1)&&(g=b.shift()),s=b.join(et)}return typeof g=="string"&&(g=[g]),{key:s,namespaces:g}}translate(s,c,d){if(typeof c!="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),typeof c=="object"&&(c={...c}),c||(c={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);const et=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,g=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,{key:at,namespaces:$t}=this.extractFromKey(s[s.length-1],c),vt=$t[$t.length-1],b=c.lng||this.language,pt=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(b&&b.toLowerCase()==="cimode"){if(pt){const tr=c.nsSeparator||this.options.nsSeparator;return et?{res:`${vt}${tr}${at}`,usedKey:at,exactUsedKey:at,usedLng:b,usedNS:vt,usedParams:this.getUsedParamsDetails(c)}:`${vt}${tr}${at}`}return et?{res:at,usedKey:at,exactUsedKey:at,usedLng:b,usedNS:vt,usedParams:this.getUsedParamsDetails(c)}:at}const st=this.resolve(s,c);let wt=st&&st.res;const Tt=st&&st.usedKey||at,Ct=st&&st.exactUsedKey||at,jt=Object.prototype.toString.apply(wt),Lt=["[object Number]","[object Function]","[object RegExp]"],Ht=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,Gt=!this.i18nFormat||this.i18nFormat.handleAsObject;if(Gt&&wt&&(typeof wt!="string"&&typeof wt!="boolean"&&typeof wt!="number")&&Lt.indexOf(jt)<0&&!(typeof Ht=="string"&&Array.isArray(wt))){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const tr=this.options.returnedObjectHandler?this.options.returnedObjectHandler(Tt,wt,{...c,ns:$t}):`key '${at} (${this.language})' returned an object instead of string.`;return et?(st.res=tr,st.usedParams=this.getUsedParamsDetails(c),st):tr}if(g){const tr=Array.isArray(wt),rr=tr?[]:{},Lr=tr?Ct:Tt;for(const jr in wt)if(Object.prototype.hasOwnProperty.call(wt,jr)){const Yr=`${Lr}${g}${jr}`;rr[jr]=this.translate(Yr,{...c,joinArrays:!1,ns:$t}),rr[jr]===Yr&&(rr[jr]=wt[jr])}wt=rr}}else if(Gt&&typeof Ht=="string"&&Array.isArray(wt))wt=wt.join(Ht),wt&&(wt=this.extendTranslation(wt,s,c,d));else{let tr=!1,rr=!1;const Lr=c.count!==void 0&&typeof c.count!="string",jr=Translator.hasDefaultValue(c),Yr=Lr?this.pluralResolver.getSuffix(b,c.count,c):"",An=c.ordinal&&Lr?this.pluralResolver.getSuffix(b,c.count,{ordinal:!1}):"",No=Lr&&!c.ordinal&&c.count===0&&this.pluralResolver.shouldUseIntlApi(),o0=No&&c[`defaultValue${this.options.pluralSeparator}zero`]||c[`defaultValue${Yr}`]||c[`defaultValue${An}`]||c.defaultValue;!this.isValidLookup(wt)&&jr&&(tr=!0,wt=o0),this.isValidLookup(wt)||(rr=!0,wt=at);const c0=(c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&rr?void 0:wt,n0=jr&&o0!==wt&&this.options.updateMissing;if(rr||tr||n0){if(this.logger.log(n0?"updateKey":"missingKey",b,vt,at,n0?o0:wt),g){const e0=this.resolve(at,{...c,keySeparator:!1});e0&&e0.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Qo=[];const Mo=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Mo&&Mo[0])for(let e0=0;e0<Mo.length;e0++)Qo.push(Mo[e0]);else this.options.saveMissingTo==="all"?Qo=this.languageUtils.toResolveHierarchy(c.lng||this.language):Qo.push(c.lng||this.language);const zo=(e0,Xr,In)=>{const Zr=jr&&In!==wt?In:c0;this.options.missingKeyHandler?this.options.missingKeyHandler(e0,vt,Xr,Zr,n0,c):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e0,vt,Xr,Zr,n0,c),this.emit("missingKey",e0,vt,Xr,wt)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Lr?Qo.forEach(e0=>{const Xr=this.pluralResolver.getSuffixes(e0,c);No&&c[`defaultValue${this.options.pluralSeparator}zero`]&&Xr.indexOf(`${this.options.pluralSeparator}zero`)<0&&Xr.push(`${this.options.pluralSeparator}zero`),Xr.forEach(In=>{zo([e0],at+In,c[`defaultValue${In}`]||o0)})}):zo(Qo,at,o0))}wt=this.extendTranslation(wt,s,c,st,d),rr&&wt===at&&this.options.appendNamespaceToMissingKey&&(wt=`${vt}:${at}`),(rr||tr)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?wt=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${vt}:${at}`:at,tr?wt:void 0):wt=this.options.parseMissingKeyHandler(wt))}return et?(st.res=wt,st.usedParams=this.getUsedParamsDetails(c),st):wt}extendTranslation(s,c,d,et,g){var at=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...d},d.lng||this.language||et.usedLng,et.usedNS,et.usedKey,{resolved:et});else if(!d.skipInterpolation){d.interpolation&&this.interpolator.init({...d,interpolation:{...this.options.interpolation,...d.interpolation}});const b=typeof s=="string"&&(d&&d.interpolation&&d.interpolation.skipOnVariables!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let pt;if(b){const wt=s.match(this.interpolator.nestingRegexp);pt=wt&&wt.length}let st=d.replace&&typeof d.replace!="string"?d.replace:d;if(this.options.interpolation.defaultVariables&&(st={...this.options.interpolation.defaultVariables,...st}),s=this.interpolator.interpolate(s,st,d.lng||this.language,d),b){const wt=s.match(this.interpolator.nestingRegexp),Tt=wt&&wt.length;pt<Tt&&(d.nest=!1)}!d.lng&&this.options.compatibilityAPI!=="v1"&&et&&et.res&&(d.lng=et.usedLng),d.nest!==!1&&(s=this.interpolator.nest(s,function(){for(var wt=arguments.length,Tt=new Array(wt),Ct=0;Ct<wt;Ct++)Tt[Ct]=arguments[Ct];return g&&g[0]===Tt[0]&&!d.context?(at.logger.warn(`It seems you are nesting recursively key: ${Tt[0]} in key: ${c[0]}`),null):at.translate(...Tt,c)},d)),d.interpolation&&this.interpolator.reset()}const $t=d.postProcess||this.options.postProcess,vt=typeof $t=="string"?[$t]:$t;return s!=null&&vt&&vt.length&&d.applyPostProcessor!==!1&&(s=postProcessor.handle(vt,s,c,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...et,usedParams:this.getUsedParamsDetails(d)},...d}:d,this)),s}resolve(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d,et,g,at,$t;return typeof s=="string"&&(s=[s]),s.forEach(vt=>{if(this.isValidLookup(d))return;const b=this.extractFromKey(vt,c),pt=b.key;et=pt;let st=b.namespaces;this.options.fallbackNS&&(st=st.concat(this.options.fallbackNS));const wt=c.count!==void 0&&typeof c.count!="string",Tt=wt&&!c.ordinal&&c.count===0&&this.pluralResolver.shouldUseIntlApi(),Ct=c.context!==void 0&&(typeof c.context=="string"||typeof c.context=="number")&&c.context!=="",jt=c.lngs?c.lngs:this.languageUtils.toResolveHierarchy(c.lng||this.language,c.fallbackLng);st.forEach(Lt=>{this.isValidLookup(d)||($t=Lt,!checkedLoadedFor[`${jt[0]}-${Lt}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace($t)&&(checkedLoadedFor[`${jt[0]}-${Lt}`]=!0,this.logger.warn(`key "${et}" for languages "${jt.join(", ")}" won't get resolved as namespace "${$t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),jt.forEach(Ht=>{if(this.isValidLookup(d))return;at=Ht;const Gt=[pt];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(Gt,pt,Ht,Lt,c);else{let tr;wt&&(tr=this.pluralResolver.getSuffix(Ht,c.count,c));const rr=`${this.options.pluralSeparator}zero`,Lr=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(wt&&(Gt.push(pt+tr),c.ordinal&&tr.indexOf(Lr)===0&&Gt.push(pt+tr.replace(Lr,this.options.pluralSeparator)),Tt&&Gt.push(pt+rr)),Ct){const jr=`${pt}${this.options.contextSeparator}${c.context}`;Gt.push(jr),wt&&(Gt.push(jr+tr),c.ordinal&&tr.indexOf(Lr)===0&&Gt.push(jr+tr.replace(Lr,this.options.pluralSeparator)),Tt&&Gt.push(jr+rr))}}let Kt;for(;Kt=Gt.pop();)this.isValidLookup(d)||(g=Kt,d=this.getResource(Ht,Lt,Kt,c))}))})}),{res:d,usedKey:et,exactUsedKey:g,usedLng:at,usedNS:$t}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,c,d){let et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(s,c,d,et):this.resourceStore.getResource(s,c,d,et)}getUsedParamsDetails(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],d=s.replace&&typeof s.replace!="string";let et=d?s.replace:s;if(d&&typeof s.count<"u"&&(et.count=s.count),this.options.interpolation.defaultVariables&&(et={...this.options.interpolation.defaultVariables,...et}),!d){et={...et};for(const g of c)delete et[g]}return et}static hasDefaultValue(s){const c="defaultValue";for(const d in s)if(Object.prototype.hasOwnProperty.call(s,d)&&c===d.substring(0,c.length)&&s[d]!==void 0)return!0;return!1}}function capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)}class LanguageUtil{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(s){if(s=getCleanedCode(s),!s||s.indexOf("-")<0)return null;const c=s.split("-");return c.length===2||(c.pop(),c[c.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(c.join("-"))}getLanguagePartFromCode(s){if(s=getCleanedCode(s),!s||s.indexOf("-")<0)return s;const c=s.split("-");return this.formatLanguageCode(c[0])}formatLanguageCode(s){if(typeof s=="string"&&s.indexOf("-")>-1){const c=["hans","hant","latn","cyrl","cans","mong","arab"];let d=s.split("-");return this.options.lowerCaseLng?d=d.map(et=>et.toLowerCase()):d.length===2?(d[0]=d[0].toLowerCase(),d[1]=d[1].toUpperCase(),c.indexOf(d[1].toLowerCase())>-1&&(d[1]=capitalize(d[1].toLowerCase()))):d.length===3&&(d[0]=d[0].toLowerCase(),d[1].length===2&&(d[1]=d[1].toUpperCase()),d[0]!=="sgn"&&d[2].length===2&&(d[2]=d[2].toUpperCase()),c.indexOf(d[1].toLowerCase())>-1&&(d[1]=capitalize(d[1].toLowerCase())),c.indexOf(d[2].toLowerCase())>-1&&(d[2]=capitalize(d[2].toLowerCase()))),d.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let c;return s.forEach(d=>{if(c)return;const et=this.formatLanguageCode(d);(!this.options.supportedLngs||this.isSupportedCode(et))&&(c=et)}),!c&&this.options.supportedLngs&&s.forEach(d=>{if(c)return;const et=this.getLanguagePartFromCode(d);if(this.isSupportedCode(et))return c=et;c=this.options.supportedLngs.find(g=>{if(g===et)return g;if(!(g.indexOf("-")<0&&et.indexOf("-")<0)&&(g.indexOf("-")>0&&et.indexOf("-")<0&&g.substring(0,g.indexOf("-"))===et||g.indexOf(et)===0&&et.length>1))return g})}),c||(c=this.getFallbackCodes(this.options.fallbackLng)[0]),c}getFallbackCodes(s,c){if(!s)return[];if(typeof s=="function"&&(s=s(c)),typeof s=="string"&&(s=[s]),Array.isArray(s))return s;if(!c)return s.default||[];let d=s[c];return d||(d=s[this.getScriptPartFromCode(c)]),d||(d=s[this.formatLanguageCode(c)]),d||(d=s[this.getLanguagePartFromCode(c)]),d||(d=s.default),d||[]}toResolveHierarchy(s,c){const d=this.getFallbackCodes(c||this.options.fallbackLng||[],s),et=[],g=at=>{at&&(this.isSupportedCode(at)?et.push(at):this.logger.warn(`rejecting language code not found in supportedLngs: ${at}`))};return typeof s=="string"&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&g(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&g(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&g(this.getLanguagePartFromCode(s))):typeof s=="string"&&g(this.formatLanguageCode(s)),d.forEach(at=>{et.indexOf(at)<0&&g(this.formatLanguageCode(at))}),et}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(a){return+(a>1)},2:function(a){return+(a!=1)},3:function(a){return 0},4:function(a){return a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2},5:function(a){return a==0?0:a==1?1:a==2?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5},6:function(a){return a==1?0:a>=2&&a<=4?1:2},7:function(a){return a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2},8:function(a){return a==1?0:a==2?1:a!=8&&a!=11?2:3},9:function(a){return+(a>=2)},10:function(a){return a==1?0:a==2?1:a<7?2:a<11?3:4},11:function(a){return a==1||a==11?0:a==2||a==12?1:a>2&&a<20?2:3},12:function(a){return+(a%10!=1||a%100==11)},13:function(a){return+(a!==0)},14:function(a){return a==1?0:a==2?1:a==3?2:3},15:function(a){return a%10==1&&a%100!=11?0:a%10>=2&&(a%100<10||a%100>=20)?1:2},16:function(a){return a%10==1&&a%100!=11?0:a!==0?1:2},17:function(a){return a==1||a%10==1&&a%100!=11?0:1},18:function(a){return a==0?0:a==1?1:2},19:function(a){return a==1?0:a==0||a%100>1&&a%100<11?1:a%100>10&&a%100<20?2:3},20:function(a){return a==1?0:a==0||a%100>0&&a%100<20?1:2},21:function(a){return a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0},22:function(a){return a==1?0:a==2?1:(a<0||a>10)&&a%10==0?2:3}};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5};function createRules(){const a={};return sets.forEach(s=>{s.lngs.forEach(c=>{a[c]={numbers:s.nr,plurals:_rulesPluralsTypes[s.fc]}})}),a}class PluralResolver{constructor(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=s,this.options=c,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}addRule(s,c){this.rules[s]=c}getRule(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(getCleanedCode(s==="dev"?"en":s),{type:c.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[s]||this.rules[this.languageUtils.getLanguagePartFromCode(s)]}needsPlural(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=this.getRule(s,c);return this.shouldUseIntlApi()?d&&d.resolvedOptions().pluralCategories.length>1:d&&d.numbers.length>1}getPluralFormsOfKey(s,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(s,d).map(et=>`${c}${et}`)}getSuffixes(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=this.getRule(s,c);return d?this.shouldUseIntlApi()?d.resolvedOptions().pluralCategories.sort((et,g)=>suffixesOrder[et]-suffixesOrder[g]).map(et=>`${this.options.prepend}${c.ordinal?`ordinal${this.options.prepend}`:""}${et}`):d.numbers.map(et=>this.getSuffix(s,et,c)):[]}getSuffix(s,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const et=this.getRule(s,d);return et?this.shouldUseIntlApi()?`${this.options.prepend}${d.ordinal?`ordinal${this.options.prepend}`:""}${et.select(c)}`:this.getSuffixRetroCompatible(et,c):(this.logger.warn(`no plural rule found for: ${s}`),"")}getSuffixRetroCompatible(s,c){const d=s.noAbs?s.plurals(c):s.plurals(Math.abs(c));let et=s.numbers[d];this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1&&(et===2?et="plural":et===1&&(et=""));const g=()=>this.options.prepend&&et.toString()?this.options.prepend+et.toString():et.toString();return this.options.compatibilityJSON==="v1"?et===1?"":typeof et=="number"?`_plural_${et.toString()}`:g():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1?g():this.options.prepend&&d.toString()?this.options.prepend+d.toString():d.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}function deepFindWithDefaults(a,s,c){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",et=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,g=getPathWithDefaults(a,s,c);return!g&&et&&typeof c=="string"&&(g=deepFind(a,c,d),g===void 0&&(g=deepFind(s,c,d))),g}class Interpolator{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=s,this.format=s.interpolation&&s.interpolation.format||(c=>c),this.init(s)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s.interpolation||(s.interpolation={escapeValue:!0});const{escape:c,escapeValue:d,useRawValueToEscape:et,prefix:g,prefixEscaped:at,suffix:$t,suffixEscaped:vt,formatSeparator:b,unescapeSuffix:pt,unescapePrefix:st,nestingPrefix:wt,nestingPrefixEscaped:Tt,nestingSuffix:Ct,nestingSuffixEscaped:jt,nestingOptionsSeparator:Lt,maxReplaces:Ht,alwaysFormat:Gt}=s.interpolation;this.escape=c!==void 0?c:escape,this.escapeValue=d!==void 0?d:!0,this.useRawValueToEscape=et!==void 0?et:!1,this.prefix=g?regexEscape(g):at||"{{",this.suffix=$t?regexEscape($t):vt||"}}",this.formatSeparator=b||",",this.unescapePrefix=pt?"":st||"-",this.unescapeSuffix=this.unescapePrefix?"":pt||"",this.nestingPrefix=wt?regexEscape(wt):Tt||regexEscape("$t("),this.nestingSuffix=Ct?regexEscape(Ct):jt||regexEscape(")"),this.nestingOptionsSeparator=Lt||",",this.maxReplaces=Ht||1e3,this.alwaysFormat=Gt!==void 0?Gt:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(c,d)=>c&&c.source===d?(c.lastIndex=0,c):new RegExp(d,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(s,c,d,et){let g,at,$t;const vt=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function b(Ct){return Ct.replace(/\$/g,"$$$$")}const pt=Ct=>{if(Ct.indexOf(this.formatSeparator)<0){const Gt=deepFindWithDefaults(c,vt,Ct,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Gt,void 0,d,{...et,...c,interpolationkey:Ct}):Gt}const jt=Ct.split(this.formatSeparator),Lt=jt.shift().trim(),Ht=jt.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(c,vt,Lt,this.options.keySeparator,this.options.ignoreJSONStructure),Ht,d,{...et,...c,interpolationkey:Lt})};this.resetRegExp();const st=et&&et.missingInterpolationHandler||this.options.missingInterpolationHandler,wt=et&&et.interpolation&&et.interpolation.skipOnVariables!==void 0?et.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:Ct=>b(Ct)},{regex:this.regexp,safeValue:Ct=>this.escapeValue?b(this.escape(Ct)):b(Ct)}].forEach(Ct=>{for($t=0;g=Ct.regex.exec(s);){const jt=g[1].trim();if(at=pt(jt),at===void 0)if(typeof st=="function"){const Ht=st(s,g,et);at=typeof Ht=="string"?Ht:""}else if(et&&Object.prototype.hasOwnProperty.call(et,jt))at="";else if(wt){at=g[0];continue}else this.logger.warn(`missed to pass in variable ${jt} for interpolating ${s}`),at="";else typeof at!="string"&&!this.useRawValueToEscape&&(at=makeString(at));const Lt=Ct.safeValue(at);if(s=s.replace(g[0],Lt),wt?(Ct.regex.lastIndex+=at.length,Ct.regex.lastIndex-=g[0].length):Ct.regex.lastIndex=0,$t++,$t>=this.maxReplaces)break}}),s}nest(s,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},et,g,at;function $t(vt,b){const pt=this.nestingOptionsSeparator;if(vt.indexOf(pt)<0)return vt;const st=vt.split(new RegExp(`${pt}[ ]*{`));let wt=`{${st[1]}`;vt=st[0],wt=this.interpolate(wt,at);const Tt=wt.match(/'/g),Ct=wt.match(/"/g);(Tt&&Tt.length%2===0&&!Ct||Ct.length%2!==0)&&(wt=wt.replace(/'/g,'"'));try{at=JSON.parse(wt),b&&(at={...b,...at})}catch(jt){return this.logger.warn(`failed parsing options string in nesting for key ${vt}`,jt),`${vt}${pt}${wt}`}return at.defaultValue&&at.defaultValue.indexOf(this.prefix)>-1&&delete at.defaultValue,vt}for(;et=this.nestingRegexp.exec(s);){let vt=[];at={...d},at=at.replace&&typeof at.replace!="string"?at.replace:at,at.applyPostProcessor=!1,delete at.defaultValue;let b=!1;if(et[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(et[1])){const pt=et[1].split(this.formatSeparator).map(st=>st.trim());et[1]=pt.shift(),vt=pt,b=!0}if(g=c($t.call(this,et[1].trim(),at),at),g&&et[0]===s&&typeof g!="string")return g;typeof g!="string"&&(g=makeString(g)),g||(this.logger.warn(`missed to resolve ${et[1]} for nesting ${s}`),g=""),b&&(g=vt.reduce((pt,st)=>this.format(pt,st,d.lng,{...d,interpolationkey:et[1].trim()}),g.trim())),s=s.replace(et[0],g),this.regexp.lastIndex=0}return s}}function parseFormatStr(a){let s=a.toLowerCase().trim();const c={};if(a.indexOf("(")>-1){const d=a.split("(");s=d[0].toLowerCase().trim();const et=d[1].substring(0,d[1].length-1);s==="currency"&&et.indexOf(":")<0?c.currency||(c.currency=et.trim()):s==="relativetime"&&et.indexOf(":")<0?c.range||(c.range=et.trim()):et.split(";").forEach(at=>{if(at){const[$t,...vt]=at.split(":"),b=vt.join(":").trim().replace(/^'+|'+$/g,""),pt=$t.trim();c[pt]||(c[pt]=b),b==="false"&&(c[pt]=!1),b==="true"&&(c[pt]=!0),isNaN(b)||(c[pt]=parseInt(b,10))}})}return{formatName:s,formatOptions:c}}function createCachedFormatter(a){const s={};return function(d,et,g){const at=et+JSON.stringify(g);let $t=s[at];return $t||($t=a(getCleanedCode(et),g),s[at]=$t),$t(d)}}class Formatter{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=s,this.formats={number:createCachedFormatter((c,d)=>{const et=new Intl.NumberFormat(c,{...d});return g=>et.format(g)}),currency:createCachedFormatter((c,d)=>{const et=new Intl.NumberFormat(c,{...d,style:"currency"});return g=>et.format(g)}),datetime:createCachedFormatter((c,d)=>{const et=new Intl.DateTimeFormat(c,{...d});return g=>et.format(g)}),relativetime:createCachedFormatter((c,d)=>{const et=new Intl.RelativeTimeFormat(c,{...d});return g=>et.format(g,d.range||"day")}),list:createCachedFormatter((c,d)=>{const et=new Intl.ListFormat(c,{...d});return g=>et.format(g)})},this.init(s)}init(s){const d=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=d.formatSeparator?d.formatSeparator:d.formatSeparator||","}add(s,c){this.formats[s.toLowerCase().trim()]=c}addCached(s,c){this.formats[s.toLowerCase().trim()]=createCachedFormatter(c)}format(s,c,d){let et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return c.split(this.formatSeparator).reduce(($t,vt)=>{const{formatName:b,formatOptions:pt}=parseFormatStr(vt);if(this.formats[b]){let st=$t;try{const wt=et&&et.formatParams&&et.formatParams[et.interpolationkey]||{},Tt=wt.locale||wt.lng||et.locale||et.lng||d;st=this.formats[b]($t,Tt,{...pt,...et,...wt})}catch(wt){this.logger.warn(wt)}return st}else this.logger.warn(`there was no format function for ${b}`);return $t},s)}}function removePending(a,s){a.pending[s]!==void 0&&(delete a.pending[s],a.pendingCount--)}class Connector extends EventEmitter{constructor(s,c,d){let et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=s,this.store=c,this.services=d,this.languageUtils=d.languageUtils,this.options=et,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=et.maxParallelReads||10,this.readingCalls=0,this.maxRetries=et.maxRetries>=0?et.maxRetries:5,this.retryTimeout=et.retryTimeout>=1?et.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(d,et.backend,et)}queueLoad(s,c,d,et){const g={},at={},$t={},vt={};return s.forEach(b=>{let pt=!0;c.forEach(st=>{const wt=`${b}|${st}`;!d.reload&&this.store.hasResourceBundle(b,st)?this.state[wt]=2:this.state[wt]<0||(this.state[wt]===1?at[wt]===void 0&&(at[wt]=!0):(this.state[wt]=1,pt=!1,at[wt]===void 0&&(at[wt]=!0),g[wt]===void 0&&(g[wt]=!0),vt[st]===void 0&&(vt[st]=!0)))}),pt||($t[b]=!0)}),(Object.keys(g).length||Object.keys(at).length)&&this.queue.push({pending:at,pendingCount:Object.keys(at).length,loaded:{},errors:[],callback:et}),{toLoad:Object.keys(g),pending:Object.keys(at),toLoadLanguages:Object.keys($t),toLoadNamespaces:Object.keys(vt)}}loaded(s,c,d){const et=s.split("|"),g=et[0],at=et[1];c&&this.emit("failedLoading",g,at,c),d&&this.store.addResourceBundle(g,at,d,void 0,void 0,{skipCopy:!0}),this.state[s]=c?-1:2;const $t={};this.queue.forEach(vt=>{pushPath(vt.loaded,[g],at),removePending(vt,s),c&&vt.errors.push(c),vt.pendingCount===0&&!vt.done&&(Object.keys(vt.loaded).forEach(b=>{$t[b]||($t[b]={});const pt=vt.loaded[b];pt.length&&pt.forEach(st=>{$t[b][st]===void 0&&($t[b][st]=!0)})}),vt.done=!0,vt.errors.length?vt.callback(vt.errors):vt.callback())}),this.emit("loaded",$t),this.queue=this.queue.filter(vt=>!vt.done)}read(s,c,d){let et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,at=arguments.length>5?arguments[5]:void 0;if(!s.length)return at(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:c,fcName:d,tried:et,wait:g,callback:at});return}this.readingCalls++;const $t=(b,pt)=>{if(this.readingCalls--,this.waitingReads.length>0){const st=this.waitingReads.shift();this.read(st.lng,st.ns,st.fcName,st.tried,st.wait,st.callback)}if(b&&pt&&et<this.maxRetries){setTimeout(()=>{this.read.call(this,s,c,d,et+1,g*2,at)},g);return}at(b,pt)},vt=this.backend[d].bind(this.backend);if(vt.length===2){try{const b=vt(s,c);b&&typeof b.then=="function"?b.then(pt=>$t(null,pt)).catch($t):$t(null,b)}catch(b){$t(b)}return}return vt(s,c,$t)}prepareLoading(s,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},et=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),et&&et();typeof s=="string"&&(s=this.languageUtils.toResolveHierarchy(s)),typeof c=="string"&&(c=[c]);const g=this.queueLoad(s,c,d,et);if(!g.toLoad.length)return g.pending.length||et(),null;g.toLoad.forEach(at=>{this.loadOne(at)})}load(s,c,d){this.prepareLoading(s,c,{},d)}reload(s,c,d){this.prepareLoading(s,c,{reload:!0},d)}loadOne(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const d=s.split("|"),et=d[0],g=d[1];this.read(et,g,"read",void 0,void 0,(at,$t)=>{at&&this.logger.warn(`${c}loading namespace ${g} for language ${et} failed`,at),!at&&$t&&this.logger.log(`${c}loaded namespace ${g} for language ${et}`,$t),this.loaded(s,at,$t)})}saveMissing(s,c,d,et,g){let at=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},$t=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(c)){this.logger.warn(`did not save key "${d}" as the namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(d==null||d==="")){if(this.backend&&this.backend.create){const vt={...at,isUpdate:g},b=this.backend.create.bind(this.backend);if(b.length<6)try{let pt;b.length===5?pt=b(s,c,d,et,vt):pt=b(s,c,d,et),pt&&typeof pt.then=="function"?pt.then(st=>$t(null,st)).catch($t):$t(null,pt)}catch(pt){$t(pt)}else b(s,c,d,et,$t,vt)}!s||!s[0]||this.store.addResource(s[0],c,d,et)}}}function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(s){let c={};if(typeof s[1]=="object"&&(c=s[1]),typeof s[1]=="string"&&(c.defaultValue=s[1]),typeof s[2]=="string"&&(c.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const d=s[3]||s[2];Object.keys(d).forEach(et=>{c[et]=d[et]})}return c},interpolation:{escapeValue:!0,format:a=>a,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(a){return typeof a.ns=="string"&&(a.ns=[a.ns]),typeof a.fallbackLng=="string"&&(a.fallbackLng=[a.fallbackLng]),typeof a.fallbackNS=="string"&&(a.fallbackNS=[a.fallbackNS]),a.supportedLngs&&a.supportedLngs.indexOf("cimode")<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),a}function noop(){}function bindMemberFunctions(a){Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(c=>{typeof a[c]=="function"&&(a[c]=a[c].bind(a))})}class I18n extends EventEmitter{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(s),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),c&&!this.isInitialized&&!s.isClone){if(!this.options.initImmediate)return this.init(s,c),this;setTimeout(()=>{this.init(s,c)},0)}}init(){var s=this;let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof c=="function"&&(d=c,c={}),!c.defaultNS&&c.defaultNS!==!1&&c.ns&&(typeof c.ns=="string"?c.defaultNS=c.ns:c.ns.indexOf("translation")<0&&(c.defaultNS=c.ns[0]));const et=get();this.options={...et,...this.options,...transformOptions(c)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...et.interpolation,...this.options.interpolation}),c.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=c.keySeparator),c.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=c.nsSeparator);function g(pt){return pt?typeof pt=="function"?new pt:pt:null}if(!this.options.isClone){this.modules.logger?baseLogger.init(g(this.modules.logger),this.options):baseLogger.init(null,this.options);let pt;this.modules.formatter?pt=this.modules.formatter:typeof Intl<"u"&&(pt=Formatter);const st=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const wt=this.services;wt.logger=baseLogger,wt.resourceStore=this.store,wt.languageUtils=st,wt.pluralResolver=new PluralResolver(st,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),pt&&(!this.options.interpolation.format||this.options.interpolation.format===et.interpolation.format)&&(wt.formatter=g(pt),wt.formatter.init(wt,this.options),this.options.interpolation.format=wt.formatter.format.bind(wt.formatter)),wt.interpolator=new Interpolator(this.options),wt.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},wt.backendConnector=new Connector(g(this.modules.backend),wt.resourceStore,wt,this.options),wt.backendConnector.on("*",function(Tt){for(var Ct=arguments.length,jt=new Array(Ct>1?Ct-1:0),Lt=1;Lt<Ct;Lt++)jt[Lt-1]=arguments[Lt];s.emit(Tt,...jt)}),this.modules.languageDetector&&(wt.languageDetector=g(this.modules.languageDetector),wt.languageDetector.init&&wt.languageDetector.init(wt,this.options.detection,this.options)),this.modules.i18nFormat&&(wt.i18nFormat=g(this.modules.i18nFormat),wt.i18nFormat.init&&wt.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(Tt){for(var Ct=arguments.length,jt=new Array(Ct>1?Ct-1:0),Lt=1;Lt<Ct;Lt++)jt[Lt-1]=arguments[Lt];s.emit(Tt,...jt)}),this.modules.external.forEach(Tt=>{Tt.init&&Tt.init(this)})}if(this.format=this.options.interpolation.format,d||(d=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const pt=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);pt.length>0&&pt[0]!=="dev"&&(this.options.lng=pt[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(pt=>{this[pt]=function(){return s.store[pt](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(pt=>{this[pt]=function(){return s.store[pt](...arguments),s}});const vt=defer(),b=()=>{const pt=(st,wt)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),vt.resolve(wt),d(st,wt)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return pt(null,this.t.bind(this));this.changeLanguage(this.options.lng,pt)};return this.options.resources||!this.options.initImmediate?b():setTimeout(b,0),vt}loadResources(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const et=typeof s=="string"?s:this.language;if(typeof s=="function"&&(d=s),!this.options.resources||this.options.partialBundledLanguages){if(et&&et.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return d();const g=[],at=$t=>{if(!$t||$t==="cimode")return;this.services.languageUtils.toResolveHierarchy($t).forEach(b=>{b!=="cimode"&&g.indexOf(b)<0&&g.push(b)})};et?at(et):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(vt=>at(vt)),this.options.preload&&this.options.preload.forEach($t=>at($t)),this.services.backendConnector.load(g,this.options.ns,$t=>{!$t&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),d($t)})}else d(null)}reloadResources(s,c,d){const et=defer();return s||(s=this.languages),c||(c=this.options.ns),d||(d=noop),this.services.backendConnector.reload(s,c,g=>{et.resolve(),d(g)}),et}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&postProcessor.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1))for(let c=0;c<this.languages.length;c++){const d=this.languages[c];if(!(["cimode","dev"].indexOf(d)>-1)&&this.store.hasLanguageSomeTranslations(d)){this.resolvedLanguage=d;break}}}changeLanguage(s,c){var d=this;this.isLanguageChangingTo=s;const et=defer();this.emit("languageChanging",s);const g=vt=>{this.language=vt,this.languages=this.services.languageUtils.toResolveHierarchy(vt),this.resolvedLanguage=void 0,this.setResolvedLanguage(vt)},at=(vt,b)=>{b?(g(b),this.translator.changeLanguage(b),this.isLanguageChangingTo=void 0,this.emit("languageChanged",b),this.logger.log("languageChanged",b)):this.isLanguageChangingTo=void 0,et.resolve(function(){return d.t(...arguments)}),c&&c(vt,function(){return d.t(...arguments)})},$t=vt=>{!s&&!vt&&this.services.languageDetector&&(vt=[]);const b=typeof vt=="string"?vt:this.services.languageUtils.getBestMatchFromCodes(vt);b&&(this.language||g(b),this.translator.language||this.translator.changeLanguage(b),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(b)),this.loadResources(b,pt=>{at(pt,b)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?$t(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then($t):this.services.languageDetector.detect($t):$t(s),et}getFixedT(s,c,d){var et=this;const g=function(at,$t){let vt;if(typeof $t!="object"){for(var b=arguments.length,pt=new Array(b>2?b-2:0),st=2;st<b;st++)pt[st-2]=arguments[st];vt=et.options.overloadTranslationOptionHandler([at,$t].concat(pt))}else vt={...$t};vt.lng=vt.lng||g.lng,vt.lngs=vt.lngs||g.lngs,vt.ns=vt.ns||g.ns,vt.keyPrefix=vt.keyPrefix||d||g.keyPrefix;const wt=et.options.keySeparator||".";let Tt;return vt.keyPrefix&&Array.isArray(at)?Tt=at.map(Ct=>`${vt.keyPrefix}${wt}${Ct}`):Tt=vt.keyPrefix?`${vt.keyPrefix}${wt}${at}`:at,et.t(Tt,vt)};return typeof s=="string"?g.lng=s:g.lngs=s,g.ns=c,g.keyPrefix=d,g}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const d=c.lng||this.resolvedLanguage||this.languages[0],et=this.options?this.options.fallbackLng:!1,g=this.languages[this.languages.length-1];if(d.toLowerCase()==="cimode")return!0;const at=($t,vt)=>{const b=this.services.backendConnector.state[`${$t}|${vt}`];return b===-1||b===2};if(c.precheck){const $t=c.precheck(this,at);if($t!==void 0)return $t}return!!(this.hasResourceBundle(d,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||at(d,s)&&(!et||at(g,s)))}loadNamespaces(s,c){const d=defer();return this.options.ns?(typeof s=="string"&&(s=[s]),s.forEach(et=>{this.options.ns.indexOf(et)<0&&this.options.ns.push(et)}),this.loadResources(et=>{d.resolve(),c&&c(et)}),d):(c&&c(),Promise.resolve())}loadLanguages(s,c){const d=defer();typeof s=="string"&&(s=[s]);const et=this.options.preload||[],g=s.filter(at=>et.indexOf(at)<0&&this.services.languageUtils.isSupportedCode(at));return g.length?(this.options.preload=et.concat(g),this.loadResources(at=>{d.resolve(),c&&c(at)}),d):(c&&c(),Promise.resolve())}dir(s){if(s||(s=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!s)return"rtl";const c=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],d=this.services&&this.services.languageUtils||new LanguageUtil(get());return c.indexOf(d.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return new I18n(s,c)}cloneInstance(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const d=s.forkResourceStore;d&&delete s.forkResourceStore;const et={...this.options,...s,isClone:!0},g=new I18n(et);return(s.debug!==void 0||s.prefix!==void 0)&&(g.logger=g.logger.clone(s)),["store","services","language"].forEach($t=>{g[$t]=this[$t]}),g.services={...this.services},g.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},d&&(g.store=new ResourceStore(this.store.data,et),g.services.resourceStore=g.store),g.translator=new Translator(g.services,et),g.translator.on("*",function($t){for(var vt=arguments.length,b=new Array(vt>1?vt-1:0),pt=1;pt<vt;pt++)b[pt-1]=arguments[pt];g.emit($t,...b)}),g.init(et,c),g.translator.options=et,g.translator.backendConnector.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},g}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const{slice,forEach}=[];function defaults(a){return forEach.call(slice.call(arguments,1),s=>{if(s)for(const c in s)a[c]===void 0&&(a[c]=s[c])}),a}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=(a,s,c)=>{const d=c||{};d.path=d.path||"/";const et=encodeURIComponent(s);let g=`${a}=${et}`;if(d.maxAge>0){const at=d.maxAge-0;if(Number.isNaN(at))throw new Error("maxAge should be a Number");g+=`; Max-Age=${Math.floor(at)}`}if(d.domain){if(!fieldContentRegExp.test(d.domain))throw new TypeError("option domain is invalid");g+=`; Domain=${d.domain}`}if(d.path){if(!fieldContentRegExp.test(d.path))throw new TypeError("option path is invalid");g+=`; Path=${d.path}`}if(d.expires){if(typeof d.expires.toUTCString!="function")throw new TypeError("option expires is invalid");g+=`; Expires=${d.expires.toUTCString()}`}if(d.httpOnly&&(g+="; HttpOnly"),d.secure&&(g+="; Secure"),d.sameSite)switch(typeof d.sameSite=="string"?d.sameSite.toLowerCase():d.sameSite){case!0:g+="; SameSite=Strict";break;case"lax":g+="; SameSite=Lax";break;case"strict":g+="; SameSite=Strict";break;case"none":g+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return g},cookie={create(a,s,c,d){let et=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};c&&(et.expires=new Date,et.expires.setTime(et.expires.getTime()+c*60*1e3)),d&&(et.domain=d),document.cookie=serializeCookie(a,encodeURIComponent(s),et)},read(a){const s=`${a}=`,c=document.cookie.split(";");for(let d=0;d<c.length;d++){let et=c[d];for(;et.charAt(0)===" ";)et=et.substring(1,et.length);if(et.indexOf(s)===0)return et.substring(s.length,et.length)}return null},remove(a){this.create(a,"",-1)}};var cookie$1={name:"cookie",lookup(a){let{lookupCookie:s}=a;if(s&&typeof document<"u")return cookie.read(s)||void 0},cacheUserLanguage(a,s){let{lookupCookie:c,cookieMinutes:d,cookieDomain:et,cookieOptions:g}=s;c&&typeof document<"u"&&cookie.create(c,a,d,et,g)}},querystring={name:"querystring",lookup(a){var d;let{lookupQuerystring:s}=a,c;if(typeof window<"u"){let{search:et}=window.location;!window.location.search&&((d=window.location.hash)==null?void 0:d.indexOf("?"))>-1&&(et=window.location.hash.substring(window.location.hash.indexOf("?")));const at=et.substring(1).split("&");for(let $t=0;$t<at.length;$t++){const vt=at[$t].indexOf("=");vt>0&&at[$t].substring(0,vt)===s&&(c=at[$t].substring(vt+1))}}return c}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{hasLocalStorageSupport=window!=="undefined"&&window.localStorage!==null;const a="i18next.translate.boo";window.localStorage.setItem(a,"foo"),window.localStorage.removeItem(a)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup(a){let{lookupLocalStorage:s}=a;if(s&&localStorageAvailable())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(a,s){let{lookupLocalStorage:c}=s;c&&localStorageAvailable()&&window.localStorage.setItem(c,a)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{hasSessionStorageSupport=window!=="undefined"&&window.sessionStorage!==null;const a="i18next.translate.boo";window.sessionStorage.setItem(a,"foo"),window.sessionStorage.removeItem(a)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup(a){let{lookupSessionStorage:s}=a;if(s&&sessionStorageAvailable())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(a,s){let{lookupSessionStorage:c}=s;c&&sessionStorageAvailable()&&window.sessionStorage.setItem(c,a)}},navigator$1={name:"navigator",lookup(a){const s=[];if(typeof navigator<"u"){const{languages:c,userLanguage:d,language:et}=navigator;if(c)for(let g=0;g<c.length;g++)s.push(c[g]);d&&s.push(d),et&&s.push(et)}return s.length>0?s:void 0}},htmlTag={name:"htmlTag",lookup(a){let{htmlTag:s}=a,c;const d=s||(typeof document<"u"?document.documentElement:null);return d&&typeof d.getAttribute=="function"&&(c=d.getAttribute("lang")),c}},path={name:"path",lookup(a){var et;let{lookupFromPathIndex:s}=a;if(typeof window>"u")return;const c=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(c)?(et=c[typeof s=="number"?s:0])==null?void 0:et.replace("/",""):void 0}},subdomain={name:"subdomain",lookup(a){var et,g;let{lookupFromSubdomainIndex:s}=a;const c=typeof s=="number"?s+1:1,d=typeof window<"u"&&((g=(et=window.location)==null?void 0:et.hostname)==null?void 0:g.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(d)return d[c]}};function getDefaults(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:a=>a}}let Browser$1=class{constructor(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,c)}init(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s||{languageUtils:{}},this.options=defaults(c,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=et=>et.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=d,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain)}addDetector(s){return this.detectors[s.name]=s,this}detect(s){s||(s=this.options.order);let c=[];return s.forEach(d=>{if(this.detectors[d]){let et=this.detectors[d].lookup(this.options);et&&typeof et=="string"&&(et=[et]),et&&(c=c.concat(et))}}),c=c.map(d=>this.options.convertDetectedLanguage(d)),this.services.languageUtils.getBestMatchFromCodes?c:c.length>0?c[0]:null}cacheUserLanguage(s,c){c||(c=this.options.caches),c&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||c.forEach(d=>{this.detectors[d]&&this.detectors[d].cacheUserLanguage(s,this.options)}))}};Browser$1.type="languageDetector";const translation$1={"Image load":"Click here or drag an image file",Pan:"Pan","Reset Zoom/Pan":"Reset Zoom/Pan","Decrease Brush Size":"Decrease Brush Size","Increase Brush Size":"Increase Brush Size","View Original Image":"View Original Image",Undo:"Undo",Redo:"Redo","Copy Result":"Copy Result","Paste Image":"Paste Image","Trigger Manually Inpainting":"Trigger Manually Inpainting","Toggle Hotkeys Dialog":"Toggle Hotkeys Dialog","Toggle Settings Dialog":"Toggle Settings Dialog","Toggle File Manager":"Toggle File Manager",Broche:"Pincel",Cropper:"Cropper","Adjust Mask":"Adjust Mask",Expand:"Expand",Shrink:"Shrink",Reverse:"Reverse",Clear:"Clear"},enJSON={translation:translation$1},translation={"Image load":"Click aqui o arrastra una imagen",Pan:"Acercar o alejar zoom","Reset Zoom/Pan":"Resetear Zoom/Pan","Decrease Brush Size":"Disminuir pincel","Increase Brush Size":"Incrementar pincel","View Original Image":"Ver imagen original",Undo:"Deshacer",Redo:"Rehacer","Copy Result":"Copiar resultado","Paste Image":"Pegar imagen","Trigger Manually Inpainting":"Activar Inpainting manualmente","Toggle Hotkeys Dialog":"Activar dialogo de instrucciones de teclas","Toggle Settings Dialog":"Acivar dialogo de parametros","Toggle File Manager":"Activar dialogo de gestor de archivos",Broche:"Brocha",Cropper:"Recortar imagen","Adjust Mask":"Ajustar mascara",Expand:"Expandir",Shrink:"Disminuir",Reverse:"Reversar",Clear:"Borrar"},espJSON={translation},resources={en:{...enJSON},es:{...espJSON}};instance.use(Browser$1).use(initReactI18next).init({resources,fallbackLng:"es",interpolation:{escapeValue:!1}});const queryClient=new QueryClient;client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(z,{defaultTheme:"dark",disableTransitionOnChange:!0,children:jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsx(RefProvider,{children:jsxRuntimeExports.jsx(Home,{})})})})})}));
